var WV=Object.defineProperty;var UV=(e,t,n)=>t in e?WV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var uE=(e,t,n)=>UV(e,typeof t!="symbol"?t+"":t,n);function qV(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in e)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(e,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var aC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ol(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var cE={exports:{}},Hx={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pM;function KV(){if(pM)return Hx;pM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,r,o){var s=null;if(o!==void 0&&(s=""+o),r.key!==void 0&&(s=""+r.key),"key"in r){o={};for(var a in r)a!=="key"&&(o[a]=r[a])}else o=r;return r=o.ref,{$$typeof:e,type:i,key:s,ref:r!==void 0?r:null,props:o}}return Hx.Fragment=t,Hx.jsx=n,Hx.jsxs=n,Hx}var gM;function ZV(){return gM||(gM=1,cE.exports=KV()),cE.exports}var T=ZV(),dE={exports:{}},cr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mM;function YV(){if(mM)return cr;mM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),w=Symbol.iterator;function R(_e){return _e===null||typeof _e!="object"?null:(_e=w&&_e[w]||_e["@@iterator"],typeof _e=="function"?_e:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,z={};function $(_e,Le,Oe){this.props=_e,this.context=Le,this.refs=z,this.updater=Oe||L}$.prototype.isReactComponent={},$.prototype.setState=function(_e,Le){if(typeof _e!="object"&&typeof _e!="function"&&_e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_e,Le,"setState")},$.prototype.forceUpdate=function(_e){this.updater.enqueueForceUpdate(this,_e,"forceUpdate")};function U(){}U.prototype=$.prototype;function Y(_e,Le,Oe){this.props=_e,this.context=Le,this.refs=z,this.updater=Oe||L}var X=Y.prototype=new U;X.constructor=Y,O(X,$.prototype),X.isPureReactComponent=!0;var q=Array.isArray;function ie(){}var re={H:null,A:null,T:null,S:null},J=Object.prototype.hasOwnProperty;function ne(_e,Le,Oe){var yt=Oe.ref;return{$$typeof:e,type:_e,key:Le,ref:yt!==void 0?yt:null,props:Oe}}function be(_e,Le){return ne(_e.type,Le,_e.props)}function ue(_e){return typeof _e=="object"&&_e!==null&&_e.$$typeof===e}function ve(_e){var Le={"=":"=0",":":"=2"};return"$"+_e.replace(/[=:]/g,function(Oe){return Le[Oe]})}var ce=/\/+/g;function Ie(_e,Le){return typeof _e=="object"&&_e!==null&&_e.key!=null?ve(""+_e.key):Le.toString(36)}function Te(_e){switch(_e.status){case"fulfilled":return _e.value;case"rejected":throw _e.reason;default:switch(typeof _e.status=="string"?_e.then(ie,ie):(_e.status="pending",_e.then(function(Le){_e.status==="pending"&&(_e.status="fulfilled",_e.value=Le)},function(Le){_e.status==="pending"&&(_e.status="rejected",_e.reason=Le)})),_e.status){case"fulfilled":return _e.value;case"rejected":throw _e.reason}}throw _e}function fe(_e,Le,Oe,yt,xt){var Vt=typeof _e;(Vt==="undefined"||Vt==="boolean")&&(_e=null);var Xt=!1;if(_e===null)Xt=!0;else switch(Vt){case"bigint":case"string":case"number":Xt=!0;break;case"object":switch(_e.$$typeof){case e:case t:Xt=!0;break;case m:return Xt=_e._init,fe(Xt(_e._payload),Le,Oe,yt,xt)}}if(Xt)return xt=xt(_e),Xt=yt===""?"."+Ie(_e,0):yt,q(xt)?(Oe="",Xt!=null&&(Oe=Xt.replace(ce,"$&/")+"/"),fe(xt,Le,Oe,"",function(Lt){return Lt})):xt!=null&&(ue(xt)&&(xt=be(xt,Oe+(xt.key==null||_e&&_e.key===xt.key?"":(""+xt.key).replace(ce,"$&/")+"/")+Xt)),Le.push(xt)),1;Xt=0;var en=yt===""?".":yt+":";if(q(_e))for(var it=0;it<_e.length;it++)yt=_e[it],Vt=en+Ie(yt,it),Xt+=fe(yt,Le,Oe,Vt,xt);else if(it=R(_e),typeof it=="function")for(_e=it.call(_e),it=0;!(yt=_e.next()).done;)yt=yt.value,Vt=en+Ie(yt,it++),Xt+=fe(yt,Le,Oe,Vt,xt);else if(Vt==="object"){if(typeof _e.then=="function")return fe(Te(_e),Le,Oe,yt,xt);throw Le=String(_e),Error("Objects are not valid as a React child (found: "+(Le==="[object Object]"?"object with keys {"+Object.keys(_e).join(", ")+"}":Le)+"). If you meant to render a collection of children, use an array instead.")}return Xt}function he(_e,Le,Oe){if(_e==null)return _e;var yt=[],xt=0;return fe(_e,yt,"","",function(Vt){return Le.call(Oe,Vt,xt++)}),yt}function Re(_e){if(_e._status===-1){var Le=_e._result;Le=Le(),Le.then(function(Oe){(_e._status===0||_e._status===-1)&&(_e._status=1,_e._result=Oe)},function(Oe){(_e._status===0||_e._status===-1)&&(_e._status=2,_e._result=Oe)}),_e._status===-1&&(_e._status=0,_e._result=Le)}if(_e._status===1)return _e._result.default;throw _e._result}var De=typeof reportError=="function"?reportError:function(_e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Le=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _e=="object"&&_e!==null&&typeof _e.message=="string"?String(_e.message):String(_e),error:_e});if(!window.dispatchEvent(Le))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_e);return}console.error(_e)},Ye={map:he,forEach:function(_e,Le,Oe){he(_e,function(){Le.apply(this,arguments)},Oe)},count:function(_e){var Le=0;return he(_e,function(){Le++}),Le},toArray:function(_e){return he(_e,function(Le){return Le})||[]},only:function(_e){if(!ue(_e))throw Error("React.Children.only expected to receive a single React element child.");return _e}};return cr.Activity=v,cr.Children=Ye,cr.Component=$,cr.Fragment=n,cr.Profiler=r,cr.PureComponent=Y,cr.StrictMode=i,cr.Suspense=d,cr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=re,cr.__COMPILER_RUNTIME={__proto__:null,c:function(_e){return re.H.useMemoCache(_e)}},cr.cache=function(_e){return function(){return _e.apply(null,arguments)}},cr.cacheSignal=function(){return null},cr.cloneElement=function(_e,Le,Oe){if(_e==null)throw Error("The argument must be a React element, but you passed "+_e+".");var yt=O({},_e.props),xt=_e.key;if(Le!=null)for(Vt in Le.key!==void 0&&(xt=""+Le.key),Le)!J.call(Le,Vt)||Vt==="key"||Vt==="__self"||Vt==="__source"||Vt==="ref"&&Le.ref===void 0||(yt[Vt]=Le[Vt]);var Vt=arguments.length-2;if(Vt===1)yt.children=Oe;else if(1<Vt){for(var Xt=Array(Vt),en=0;en<Vt;en++)Xt[en]=arguments[en+2];yt.children=Xt}return ne(_e.type,xt,yt)},cr.createContext=function(_e){return _e={$$typeof:s,_currentValue:_e,_currentValue2:_e,_threadCount:0,Provider:null,Consumer:null},_e.Provider=_e,_e.Consumer={$$typeof:o,_context:_e},_e},cr.createElement=function(_e,Le,Oe){var yt,xt={},Vt=null;if(Le!=null)for(yt in Le.key!==void 0&&(Vt=""+Le.key),Le)J.call(Le,yt)&&yt!=="key"&&yt!=="__self"&&yt!=="__source"&&(xt[yt]=Le[yt]);var Xt=arguments.length-2;if(Xt===1)xt.children=Oe;else if(1<Xt){for(var en=Array(Xt),it=0;it<Xt;it++)en[it]=arguments[it+2];xt.children=en}if(_e&&_e.defaultProps)for(yt in Xt=_e.defaultProps,Xt)xt[yt]===void 0&&(xt[yt]=Xt[yt]);return ne(_e,Vt,xt)},cr.createRef=function(){return{current:null}},cr.forwardRef=function(_e){return{$$typeof:a,render:_e}},cr.isValidElement=ue,cr.lazy=function(_e){return{$$typeof:m,_payload:{_status:-1,_result:_e},_init:Re}},cr.memo=function(_e,Le){return{$$typeof:h,type:_e,compare:Le===void 0?null:Le}},cr.startTransition=function(_e){var Le=re.T,Oe={};re.T=Oe;try{var yt=_e(),xt=re.S;xt!==null&&xt(Oe,yt),typeof yt=="object"&&yt!==null&&typeof yt.then=="function"&&yt.then(ie,De)}catch(Vt){De(Vt)}finally{Le!==null&&Oe.types!==null&&(Le.types=Oe.types),re.T=Le}},cr.unstable_useCacheRefresh=function(){return re.H.useCacheRefresh()},cr.use=function(_e){return re.H.use(_e)},cr.useActionState=function(_e,Le,Oe){return re.H.useActionState(_e,Le,Oe)},cr.useCallback=function(_e,Le){return re.H.useCallback(_e,Le)},cr.useContext=function(_e){return re.H.useContext(_e)},cr.useDebugValue=function(){},cr.useDeferredValue=function(_e,Le){return re.H.useDeferredValue(_e,Le)},cr.useEffect=function(_e,Le){return re.H.useEffect(_e,Le)},cr.useEffectEvent=function(_e){return re.H.useEffectEvent(_e)},cr.useId=function(){return re.H.useId()},cr.useImperativeHandle=function(_e,Le,Oe){return re.H.useImperativeHandle(_e,Le,Oe)},cr.useInsertionEffect=function(_e,Le){return re.H.useInsertionEffect(_e,Le)},cr.useLayoutEffect=function(_e,Le){return re.H.useLayoutEffect(_e,Le)},cr.useMemo=function(_e,Le){return re.H.useMemo(_e,Le)},cr.useOptimistic=function(_e,Le){return re.H.useOptimistic(_e,Le)},cr.useReducer=function(_e,Le,Oe){return re.H.useReducer(_e,Le,Oe)},cr.useRef=function(_e){return re.H.useRef(_e)},cr.useState=function(_e){return re.H.useState(_e)},cr.useSyncExternalStore=function(_e,Le,Oe){return re.H.useSyncExternalStore(_e,Le,Oe)},cr.useTransition=function(){return re.H.useTransition()},cr.version="19.2.1",cr}var yM;function ux(){return yM||(yM=1,dE.exports=YV()),dE.exports}var I=ux();const qt=Ol(I),XV=qV({__proto__:null,default:qt},[I]);var hE={exports:{}},Vx={},fE={exports:{}},pE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vM;function JV(){return vM||(vM=1,(function(e){function t(fe,he){var Re=fe.length;fe.push(he);e:for(;0<Re;){var De=Re-1>>>1,Ye=fe[De];if(0<r(Ye,he))fe[De]=he,fe[Re]=Ye,Re=De;else break e}}function n(fe){return fe.length===0?null:fe[0]}function i(fe){if(fe.length===0)return null;var he=fe[0],Re=fe.pop();if(Re!==he){fe[0]=Re;e:for(var De=0,Ye=fe.length,_e=Ye>>>1;De<_e;){var Le=2*(De+1)-1,Oe=fe[Le],yt=Le+1,xt=fe[yt];if(0>r(Oe,Re))yt<Ye&&0>r(xt,Oe)?(fe[De]=xt,fe[yt]=Re,De=yt):(fe[De]=Oe,fe[Le]=Re,De=Le);else if(yt<Ye&&0>r(xt,Re))fe[De]=xt,fe[yt]=Re,De=yt;else break e}}return he}function r(fe,he){var Re=fe.sortIndex-he.sortIndex;return Re!==0?Re:fe.id-he.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var d=[],h=[],m=1,v=null,w=3,R=!1,L=!1,O=!1,z=!1,$=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function X(fe){for(var he=n(h);he!==null;){if(he.callback===null)i(h);else if(he.startTime<=fe)i(h),he.sortIndex=he.expirationTime,t(d,he);else break;he=n(h)}}function q(fe){if(O=!1,X(fe),!L)if(n(d)!==null)L=!0,ie||(ie=!0,ve());else{var he=n(h);he!==null&&Te(q,he.startTime-fe)}}var ie=!1,re=-1,J=5,ne=-1;function be(){return z?!0:!(e.unstable_now()-ne<J)}function ue(){if(z=!1,ie){var fe=e.unstable_now();ne=fe;var he=!0;try{e:{L=!1,O&&(O=!1,U(re),re=-1),R=!0;var Re=w;try{t:{for(X(fe),v=n(d);v!==null&&!(v.expirationTime>fe&&be());){var De=v.callback;if(typeof De=="function"){v.callback=null,w=v.priorityLevel;var Ye=De(v.expirationTime<=fe);if(fe=e.unstable_now(),typeof Ye=="function"){v.callback=Ye,X(fe),he=!0;break t}v===n(d)&&i(d),X(fe)}else i(d);v=n(d)}if(v!==null)he=!0;else{var _e=n(h);_e!==null&&Te(q,_e.startTime-fe),he=!1}}break e}finally{v=null,w=Re,R=!1}he=void 0}}finally{he?ve():ie=!1}}}var ve;if(typeof Y=="function")ve=function(){Y(ue)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,Ie=ce.port2;ce.port1.onmessage=ue,ve=function(){Ie.postMessage(null)}}else ve=function(){$(ue,0)};function Te(fe,he){re=$(function(){fe(e.unstable_now())},he)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(fe){fe.callback=null},e.unstable_forceFrameRate=function(fe){0>fe||125<fe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<fe?Math.floor(1e3/fe):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_next=function(fe){switch(w){case 1:case 2:case 3:var he=3;break;default:he=w}var Re=w;w=he;try{return fe()}finally{w=Re}},e.unstable_requestPaint=function(){z=!0},e.unstable_runWithPriority=function(fe,he){switch(fe){case 1:case 2:case 3:case 4:case 5:break;default:fe=3}var Re=w;w=fe;try{return he()}finally{w=Re}},e.unstable_scheduleCallback=function(fe,he,Re){var De=e.unstable_now();switch(typeof Re=="object"&&Re!==null?(Re=Re.delay,Re=typeof Re=="number"&&0<Re?De+Re:De):Re=De,fe){case 1:var Ye=-1;break;case 2:Ye=250;break;case 5:Ye=1073741823;break;case 4:Ye=1e4;break;default:Ye=5e3}return Ye=Re+Ye,fe={id:m++,callback:he,priorityLevel:fe,startTime:Re,expirationTime:Ye,sortIndex:-1},Re>De?(fe.sortIndex=Re,t(h,fe),n(d)===null&&fe===n(h)&&(O?(U(re),re=-1):O=!0,Te(q,Re-De))):(fe.sortIndex=Ye,t(d,fe),L||R||(L=!0,ie||(ie=!0,ve()))),fe},e.unstable_shouldYield=be,e.unstable_wrapCallback=function(fe){var he=w;return function(){var Re=w;w=he;try{return fe.apply(this,arguments)}finally{w=Re}}}})(pE)),pE}var bM;function QV(){return bM||(bM=1,fE.exports=JV()),fE.exports}var gE={exports:{}},Su={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xM;function e$(){if(xM)return Su;xM=1;var e=ux();function t(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(d,h,m){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:d,containerInfo:h,implementation:m}}var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Su.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Su.createPortal=function(d,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return o(d,h,null,m)},Su.flushSync=function(d){var h=s.T,m=i.p;try{if(s.T=null,i.p=2,d)return d()}finally{s.T=h,i.p=m,i.d.f()}},Su.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(d,h))},Su.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},Su.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var m=h.as,v=a(m,h.crossOrigin),w=typeof h.integrity=="string"?h.integrity:void 0,R=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?i.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:v,integrity:w,fetchPriority:R}):m==="script"&&i.d.X(d,{crossOrigin:v,integrity:w,fetchPriority:R,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Su.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=a(h.as,h.crossOrigin);i.d.M(d,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(d)},Su.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,v=a(m,h.crossOrigin);i.d.L(d,m,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Su.preloadModule=function(d,h){if(typeof d=="string")if(h){var m=a(h.as,h.crossOrigin);i.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(d)},Su.requestFormReset=function(d){i.d.r(d)},Su.unstable_batchedUpdates=function(d,h){return d(h)},Su.useFormState=function(d,h,m){return s.H.useFormState(d,h,m)},Su.useFormStatus=function(){return s.H.useHostTransitionStatus()},Su.version="19.2.1",Su}var wM;function $6(){if(wM)return gE.exports;wM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),gE.exports=e$(),gE.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CM;function t$(){if(CM)return Vx;CM=1;var e=QV(),t=ux(),n=$6();function i(c){var p="https://react.dev/errors/"+c;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+c+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function o(c){var p=c,b=c;if(c.alternate)for(;p.return;)p=p.return;else{c=p;do p=c,(p.flags&4098)!==0&&(b=p.return),c=p.return;while(c)}return p.tag===3?b:null}function s(c){if(c.tag===13){var p=c.memoizedState;if(p===null&&(c=c.alternate,c!==null&&(p=c.memoizedState)),p!==null)return p.dehydrated}return null}function a(c){if(c.tag===31){var p=c.memoizedState;if(p===null&&(c=c.alternate,c!==null&&(p=c.memoizedState)),p!==null)return p.dehydrated}return null}function d(c){if(o(c)!==c)throw Error(i(188))}function h(c){var p=c.alternate;if(!p){if(p=o(c),p===null)throw Error(i(188));return p!==c?null:c}for(var b=c,A=p;;){var N=b.return;if(N===null)break;var V=N.alternate;if(V===null){if(A=N.return,A!==null){b=A;continue}break}if(N.child===V.child){for(V=N.child;V;){if(V===b)return d(N),c;if(V===A)return d(N),p;V=V.sibling}throw Error(i(188))}if(b.return!==A.return)b=N,A=V;else{for(var se=!1,Ae=N.child;Ae;){if(Ae===b){se=!0,b=N,A=V;break}if(Ae===A){se=!0,A=N,b=V;break}Ae=Ae.sibling}if(!se){for(Ae=V.child;Ae;){if(Ae===b){se=!0,b=V,A=N;break}if(Ae===A){se=!0,A=V,b=N;break}Ae=Ae.sibling}if(!se)throw Error(i(189))}}if(b.alternate!==A)throw Error(i(190))}if(b.tag!==3)throw Error(i(188));return b.stateNode.current===b?c:p}function m(c){var p=c.tag;if(p===5||p===26||p===27||p===6)return c;for(c=c.child;c!==null;){if(p=m(c),p!==null)return p;c=c.sibling}return null}var v=Object.assign,w=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),ne=Symbol.for("react.activity"),be=Symbol.for("react.memo_cache_sentinel"),ue=Symbol.iterator;function ve(c){return c===null||typeof c!="object"?null:(c=ue&&c[ue]||c["@@iterator"],typeof c=="function"?c:null)}var ce=Symbol.for("react.client.reference");function Ie(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===ce?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case O:return"Fragment";case $:return"Profiler";case z:return"StrictMode";case q:return"Suspense";case ie:return"SuspenseList";case ne:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case L:return"Portal";case Y:return c.displayName||"Context";case U:return(c._context.displayName||"Context")+".Consumer";case X:var p=c.render;return c=c.displayName,c||(c=p.displayName||p.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case re:return p=c.displayName||null,p!==null?p:Ie(c.type)||"Memo";case J:p=c._payload,c=c._init;try{return Ie(c(p))}catch{}}return null}var Te=Array.isArray,fe=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Re={pending:!1,data:null,method:null,action:null},De=[],Ye=-1;function _e(c){return{current:c}}function Le(c){0>Ye||(c.current=De[Ye],De[Ye]=null,Ye--)}function Oe(c,p){Ye++,De[Ye]=c.current,c.current=p}var yt=_e(null),xt=_e(null),Vt=_e(null),Xt=_e(null);function en(c,p){switch(Oe(Vt,p),Oe(xt,c),Oe(yt,null),p.nodeType){case 9:case 11:c=(c=p.documentElement)&&(c=c.namespaceURI)?F(c):0;break;default:if(c=p.tagName,p=p.namespaceURI)p=F(p),c=M(p,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}Le(yt),Oe(yt,c)}function it(){Le(yt),Le(xt),Le(Vt)}function Lt(c){c.memoizedState!==null&&Oe(Xt,c);var p=yt.current,b=M(p,c.type);p!==b&&(Oe(xt,c),Oe(yt,b))}function St(c){xt.current===c&&(Le(yt),Le(xt)),Xt.current===c&&(Le(Xt),af._currentValue=Re)}var lt,Tn;function Mt(c){if(lt===void 0)try{throw Error()}catch(b){var p=b.stack.trim().match(/\n( *(at )?)/);lt=p&&p[1]||"",Tn=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+lt+c+Tn}var $t=!1;function Pe(c,p){if(!c||$t)return"";$t=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var A={DetermineComponentFrameRoot:function(){try{if(p){var tn=function(){throw Error()};if(Object.defineProperty(tn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tn,[])}catch(zt){var Dt=zt}Reflect.construct(c,[],tn)}else{try{tn.call()}catch(zt){Dt=zt}c.call(tn.prototype)}}else{try{throw Error()}catch(zt){Dt=zt}(tn=c())&&typeof tn.catch=="function"&&tn.catch(function(){})}}catch(zt){if(zt&&Dt&&typeof zt.stack=="string")return[zt.stack,Dt.stack]}return[null,null]}};A.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var N=Object.getOwnPropertyDescriptor(A.DetermineComponentFrameRoot,"name");N&&N.configurable&&Object.defineProperty(A.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var V=A.DetermineComponentFrameRoot(),se=V[0],Ae=V[1];if(se&&Ae){var Xe=se.split(`
`),At=Ae.split(`
`);for(N=A=0;A<Xe.length&&!Xe[A].includes("DetermineComponentFrameRoot");)A++;for(;N<At.length&&!At[N].includes("DetermineComponentFrameRoot");)N++;if(A===Xe.length||N===At.length)for(A=Xe.length-1,N=At.length-1;1<=A&&0<=N&&Xe[A]!==At[N];)N--;for(;1<=A&&0<=N;A--,N--)if(Xe[A]!==At[N]){if(A!==1||N!==1)do if(A--,N--,0>N||Xe[A]!==At[N]){var Kt=`
`+Xe[A].replace(" at new "," at ");return c.displayName&&Kt.includes("<anonymous>")&&(Kt=Kt.replace("<anonymous>",c.displayName)),Kt}while(1<=A&&0<=N);break}}}finally{$t=!1,Error.prepareStackTrace=b}return(b=c?c.displayName||c.name:"")?Mt(b):""}function yn(c,p){switch(c.tag){case 26:case 27:case 5:return Mt(c.type);case 16:return Mt("Lazy");case 13:return c.child!==p&&p!==null?Mt("Suspense Fallback"):Mt("Suspense");case 19:return Mt("SuspenseList");case 0:case 15:return Pe(c.type,!1);case 11:return Pe(c.type.render,!1);case 1:return Pe(c.type,!0);case 31:return Mt("Activity");default:return""}}function wn(c){try{var p="",b=null;do p+=yn(c,b),b=c,c=c.return;while(c);return p}catch(A){return`
Error generating stack: `+A.message+`
`+A.stack}}var dn=Object.prototype.hasOwnProperty,An=e.unstable_scheduleCallback,Cn=e.unstable_cancelCallback,ai=e.unstable_shouldYield,Gi=e.unstable_requestPaint,ri=e.unstable_now,ji=e.unstable_getCurrentPriorityLevel,Si=e.unstable_ImmediatePriority,lr=e.unstable_UserBlockingPriority,Tt=e.unstable_NormalPriority,Ji=e.unstable_LowPriority,Qi=e.unstable_IdlePriority,Vr=e.log,wo=e.unstable_setDisableYieldValue,ln=null,Nn=null;function qn(c){if(typeof Vr=="function"&&wo(c),Nn&&typeof Nn.setStrictMode=="function")try{Nn.setStrictMode(ln,c)}catch{}}var fr=Math.clz32?Math.clz32:oa,us=Math.log,pi=Math.LN2;function oa(c){return c>>>=0,c===0?32:31-(us(c)/pi|0)|0}var sa=256,Ys=262144,zs=4194304;function je(c){var p=c&42;if(p!==0)return p;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return c&261888;case 262144:case 524288:case 1048576:case 2097152:return c&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function pe(c,p,b){var A=c.pendingLanes;if(A===0)return 0;var N=0,V=c.suspendedLanes,se=c.pingedLanes;c=c.warmLanes;var Ae=A&134217727;return Ae!==0?(A=Ae&~V,A!==0?N=je(A):(se&=Ae,se!==0?N=je(se):b||(b=Ae&~c,b!==0&&(N=je(b))))):(Ae=A&~V,Ae!==0?N=je(Ae):se!==0?N=je(se):b||(b=A&~c,b!==0&&(N=je(b)))),N===0?0:p!==0&&p!==N&&(p&V)===0&&(V=N&-N,b=p&-p,V>=b||V===32&&(b&4194048)!==0)?p:N}function ge(c,p){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&p)===0}function ke(c,p){switch(c){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ne(){var c=zs;return zs<<=1,(zs&62914560)===0&&(zs=4194304),c}function Je(c){for(var p=[],b=0;31>b;b++)p.push(c);return p}function nt(c,p){c.pendingLanes|=p,p!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function ct(c,p,b,A,N,V){var se=c.pendingLanes;c.pendingLanes=b,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=b,c.entangledLanes&=b,c.errorRecoveryDisabledLanes&=b,c.shellSuspendCounter=0;var Ae=c.entanglements,Xe=c.expirationTimes,At=c.hiddenUpdates;for(b=se&~b;0<b;){var Kt=31-fr(b),tn=1<<Kt;Ae[Kt]=0,Xe[Kt]=-1;var Dt=At[Kt];if(Dt!==null)for(At[Kt]=null,Kt=0;Kt<Dt.length;Kt++){var zt=Dt[Kt];zt!==null&&(zt.lane&=-536870913)}b&=~tn}A!==0&&Ue(c,A,0),V!==0&&N===0&&c.tag!==0&&(c.suspendedLanes|=V&~(se&~p))}function Ue(c,p,b){c.pendingLanes|=p,c.suspendedLanes&=~p;var A=31-fr(p);c.entangledLanes|=p,c.entanglements[A]=c.entanglements[A]|1073741824|b&261930}function Pt(c,p){var b=c.entangledLanes|=p;for(c=c.entanglements;b;){var A=31-fr(b),N=1<<A;N&p|c[A]&p&&(c[A]|=p),b&=~N}}function Zt(c,p){var b=p&-p;return b=(b&42)!==0?1:Ct(b),(b&(c.suspendedLanes|p))!==0?0:b}function Ct(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function pn(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function $n(){var c=he.p;return c!==0?c:(c=window.event,c===void 0?32:na(c.type))}function Qn(c,p){var b=he.p;try{return he.p=c,p()}finally{he.p=b}}var Ii=Math.random().toString(36).slice(2),Wn="__reactFiber$"+Ii,xi="__reactProps$"+Ii,Fi="__reactContainer$"+Ii,co="__reactEvents$"+Ii,Rr="__reactListeners$"+Ii,Li="__reactHandles$"+Ii,xr="__reactResources$"+Ii,wr="__reactMarker$"+Ii;function No(c){delete c[Wn],delete c[xi],delete c[co],delete c[Rr],delete c[Li]}function io(c){var p=c[Wn];if(p)return p;for(var b=c.parentNode;b;){if(p=b[Fi]||b[Wn]){if(b=p.alternate,p.child!==null||b!==null&&b.child!==null)for(c=On(c);c!==null;){if(b=c[Wn])return b;c=On(c)}return p}c=b,b=c.parentNode}return null}function Xr(c){if(c=c[Wn]||c[Fi]){var p=c.tag;if(p===5||p===6||p===13||p===31||p===26||p===27||p===3)return c}return null}function dl(c){var p=c.tag;if(p===5||p===26||p===27||p===6)return c.stateNode;throw Error(i(33))}function er(c){var p=c[xr];return p||(p=c[xr]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function Bo(c){c[wr]=!0}var $c=new Set,Xs={};function Mo(c,p){Gl(c,p),Gl(c+"Capture",p)}function Gl(c,p){for(Xs[c]=p,c=0;c<p.length;c++)$c.add(p[c])}var Js=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ns={},cu={};function du(c){return dn.call(cu,c)?!0:dn.call(Ns,c)?!1:Js.test(c)?cu[c]=!0:(Ns[c]=!0,!1)}function ro(c,p,b){if(du(p))if(b===null)c.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":c.removeAttribute(p);return;case"boolean":var A=p.toLowerCase().slice(0,5);if(A!=="data-"&&A!=="aria-"){c.removeAttribute(p);return}}c.setAttribute(p,""+b)}}function hl(c,p,b){if(b===null)c.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(p);return}c.setAttribute(p,""+b)}}function Co(c,p,b,A){if(A===null)c.removeAttribute(b);else{switch(typeof A){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(b);return}c.setAttributeNS(p,b,""+A)}}function pr(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function hu(c){var p=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function Ra(c,p,b){var A=Object.getOwnPropertyDescriptor(c.constructor.prototype,p);if(!c.hasOwnProperty(p)&&typeof A<"u"&&typeof A.get=="function"&&typeof A.set=="function"){var N=A.get,V=A.set;return Object.defineProperty(c,p,{configurable:!0,get:function(){return N.call(this)},set:function(se){b=""+se,V.call(this,se)}}),Object.defineProperty(c,p,{enumerable:A.enumerable}),{getValue:function(){return b},setValue:function(se){b=""+se},stopTracking:function(){c._valueTracker=null,delete c[p]}}}}function Mu(c){if(!c._valueTracker){var p=hu(c)?"checked":"value";c._valueTracker=Ra(c,p,""+c[p])}}function Cs(c){if(!c)return!1;var p=c._valueTracker;if(!p)return!0;var b=p.getValue(),A="";return c&&(A=hu(c)?c.checked?"true":"false":c.value),c=A,c!==b?(p.setValue(c),!0):!1}function Wc(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var Pd=/[\n"\\]/g;function Uo(c){return c.replace(Pd,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function aa(c,p,b,A,N,V,se,Ae){c.name="",se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"?c.type=se:c.removeAttribute("type"),p!=null?se==="number"?(p===0&&c.value===""||c.value!=p)&&(c.value=""+pr(p)):c.value!==""+pr(p)&&(c.value=""+pr(p)):se!=="submit"&&se!=="reset"||c.removeAttribute("value"),p!=null?Uc(c,se,pr(p)):b!=null?Uc(c,se,pr(b)):A!=null&&c.removeAttribute("value"),N==null&&V!=null&&(c.defaultChecked=!!V),N!=null&&(c.checked=N&&typeof N!="function"&&typeof N!="symbol"),Ae!=null&&typeof Ae!="function"&&typeof Ae!="symbol"&&typeof Ae!="boolean"?c.name=""+pr(Ae):c.removeAttribute("name")}function ur(c,p,b,A,N,V,se,Ae){if(V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(c.type=V),p!=null||b!=null){if(!(V!=="submit"&&V!=="reset"||p!=null)){Mu(c);return}b=b!=null?""+pr(b):"",p=p!=null?""+pr(p):b,Ae||p===c.value||(c.value=p),c.defaultValue=p}A=A??N,A=typeof A!="function"&&typeof A!="symbol"&&!!A,c.checked=Ae?c.checked:!!A,c.defaultChecked=!!A,se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"&&(c.name=se),Mu(c)}function Uc(c,p,b){p==="number"&&Wc(c.ownerDocument)===c||c.defaultValue===""+b||(c.defaultValue=""+b)}function la(c,p,b,A){if(c=c.options,p){p={};for(var N=0;N<b.length;N++)p["$"+b[N]]=!0;for(b=0;b<c.length;b++)N=p.hasOwnProperty("$"+c[b].value),c[b].selected!==N&&(c[b].selected=N),N&&A&&(c[b].defaultSelected=!0)}else{for(b=""+pr(b),p=null,N=0;N<c.length;N++){if(c[N].value===b){c[N].selected=!0,A&&(c[N].defaultSelected=!0);return}p!==null||c[N].disabled||(p=c[N])}p!==null&&(p.selected=!0)}}function jl(c,p,b){if(p!=null&&(p=""+pr(p),p!==c.value&&(c.value=p),b==null)){c.defaultValue!==p&&(c.defaultValue=p);return}c.defaultValue=b!=null?""+pr(b):""}function bt(c,p,b,A){if(p==null){if(A!=null){if(b!=null)throw Error(i(92));if(Te(A)){if(1<A.length)throw Error(i(93));A=A[0]}b=A}b==null&&(b=""),p=b}b=pr(p),c.defaultValue=b,A=c.textContent,A===b&&A!==""&&A!==null&&(c.value=A),Mu(c)}function We(c,p){if(p){var b=c.firstChild;if(b&&b===c.lastChild&&b.nodeType===3){b.nodeValue=p;return}}c.textContent=p}var at=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ft(c,p,b){var A=p.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?A?c.setProperty(p,""):p==="float"?c.cssFloat="":c[p]="":A?c.setProperty(p,b):typeof b!="number"||b===0||at.has(p)?p==="float"?c.cssFloat=b:c[p]=(""+b).trim():c[p]=b+"px"}function Wt(c,p,b){if(p!=null&&typeof p!="object")throw Error(i(62));if(c=c.style,b!=null){for(var A in b)!b.hasOwnProperty(A)||p!=null&&p.hasOwnProperty(A)||(A.indexOf("--")===0?c.setProperty(A,""):A==="float"?c.cssFloat="":c[A]="");for(var N in p)A=p[N],p.hasOwnProperty(N)&&b[N]!==A&&ft(c,N,A)}else for(var V in p)p.hasOwnProperty(V)&&ft(c,V,p[V])}function ei(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Et=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wt(c){return Bt.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}function Gt(){}var ui=null;function Gn(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Ut=null,Ri=null;function Ze(c){var p=Xr(c);if(p&&(c=p.stateNode)){var b=c[xi]||null;e:switch(c=p.stateNode,p.type){case"input":if(aa(c,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),p=b.name,b.type==="radio"&&p!=null){for(b=c;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+Uo(""+p)+'"][type="radio"]'),p=0;p<b.length;p++){var A=b[p];if(A!==c&&A.form===c.form){var N=A[xi]||null;if(!N)throw Error(i(90));aa(A,N.value,N.defaultValue,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name)}}for(p=0;p<b.length;p++)A=b[p],A.form===c.form&&Cs(A)}break e;case"textarea":jl(c,b.value,b.defaultValue);break e;case"select":p=b.value,p!=null&&la(c,!!b.multiple,p,!1)}}}var _t=!1;function dt(c,p,b){if(_t)return c(p,b);_t=!0;try{var A=c(p);return A}finally{if(_t=!1,(Ut!==null||Ri!==null)&&(Rg(),Ut&&(p=Ut,c=Ri,Ri=Ut=null,Ze(p),c)))for(p=0;p<c.length;p++)Ze(c[p])}}function vt(c,p){var b=c.stateNode;if(b===null)return null;var A=b[xi]||null;if(A===null)return null;b=A[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(A=!A.disabled)||(c=c.type,A=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!A;break e;default:c=!1}if(c)return null;if(b&&typeof b!="function")throw Error(i(231,p,typeof b));return b}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zn=!1;if(Un)try{var Sn={};Object.defineProperty(Sn,"passive",{get:function(){Zn=!0}}),window.addEventListener("test",Sn,Sn),window.removeEventListener("test",Sn,Sn)}catch{Zn=!1}var Ai=null,dr=null,Jt=null;function Xn(){if(Jt)return Jt;var c,p=dr,b=p.length,A,N="value"in Ai?Ai.value:Ai.textContent,V=N.length;for(c=0;c<b&&p[c]===N[c];c++);var se=b-c;for(A=1;A<=se&&p[b-A]===N[V-A];A++);return Jt=N.slice(c,1<A?1-A:void 0)}function Or(c){var p=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&p===13&&(c=13)):c=p,c===10&&(c=13),32<=c||c===13?c:0}function Io(){return!0}function ua(){return!1}function Mr(c){function p(b,A,N,V,se){this._reactName=b,this._targetInst=N,this.type=A,this.nativeEvent=V,this.target=se,this.currentTarget=null;for(var Ae in c)c.hasOwnProperty(Ae)&&(b=c[Ae],this[Ae]=b?b(V):V[Ae]);return this.isDefaultPrevented=(V.defaultPrevented!=null?V.defaultPrevented:V.returnValue===!1)?Io:ua,this.isPropagationStopped=ua,this}return v(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=Io)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=Io)},persist:function(){},isPersistent:Io}),p}var Ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ca=Mr(Ir),oo=v({},Ir,{view:0,detail:0}),_s=Mr(oo),nr,$i,Qs,$a=v({},oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fh,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Qs&&(Qs&&c.type==="mousemove"?(nr=c.screenX-Qs.screenX,$i=c.screenY-Qs.screenY):$i=nr=0,Qs=c),nr)},movementY:function(c){return"movementY"in c?c.movementY:$i}}),Hl=Mr($a),fl=v({},$a,{dataTransfer:0}),Wp=Mr(fl),Am=v({},oo,{relatedTarget:0}),Dh=Mr(Am),Ef=v({},Ir,{animationName:0,elapsedTime:0,pseudoElement:0}),Up=Mr(Ef),qp=v({},Ir,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),Aa=Mr(qp),Tm=v({},Ir,{data:0}),cs=Mr(Tm),km={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Iu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dc(c){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(c):(c=Iu[c])?!!p[c]:!1}function Fh(){return dc}var Jr=v({},oo,{key:function(c){if(c.key){var p=km[c.key]||c.key;if(p!=="Unidentified")return p}return c.type==="keypress"?(c=Or(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?Pm[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fh,charCode:function(c){return c.type==="keypress"?Or(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Or(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),hc=Mr(Jr),Kp=v({},$a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zp=Mr(Kp),Rf=v({},oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fh}),Dm=Mr(Rf),Yp=v({},Ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fm=Mr(Yp),Mh=v({},$a,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),pl=Mr(Mh),fc=v({},Ir,{newState:0,oldState:0}),Xp=Mr(fc),Af=[9,13,27,32],qc=Un&&"CompositionEvent"in window,Lu=null;Un&&"documentMode"in document&&(Lu=document.documentMode);var Ou=Un&&"TextEvent"in window&&!Lu,Ih=Un&&(!qc||Lu&&8<Lu&&11>=Lu),Mm=" ",ho=!1;function Tf(c,p){switch(c){case"keyup":return Af.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wi(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var fu=!1;function ir(c,p){switch(c){case"compositionend":return Wi(p);case"keypress":return p.which!==32?null:(ho=!0,Mm);case"textInput":return c=p.data,c===Mm&&ho?null:c;default:return null}}function Ar(c,p){if(fu)return c==="compositionend"||!qc&&Tf(c,p)?(c=Xn(),Jt=dr=Ai=null,fu=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return Ih&&p.locale!=="ko"?null:p.data;default:return null}}var Vl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kc(c){var p=c&&c.nodeName&&c.nodeName.toLowerCase();return p==="input"?!!Vl[c.type]:p==="textarea"}function Zc(c,p,b,A){Ut?Ri?Ri.push(A):Ri=[A]:Ut=A,p=hp(p,"onChange"),0<p.length&&(b=new ca("onChange","change",null,b,A),c.push({event:b,listeners:p}))}var Yc=null,$l=null;function Dd(c){uy(c,0)}function da(c){var p=dl(c);if(Cs(p))return c}function kf(c,p){if(c==="change")return p}var zu=!1;if(Un){var Lh;if(Un){var Nu="oninput"in document;if(!Nu){var pc=document.createElement("div");pc.setAttribute("oninput","return;"),Nu=typeof pc.oninput=="function"}Lh=Nu}else Lh=!1;zu=Lh&&(!document.documentMode||9<document.documentMode)}function Xc(){Yc&&(Yc.detachEvent("onpropertychange",Ta),$l=Yc=null)}function Ta(c){if(c.propertyName==="value"&&da($l)){var p=[];Zc(p,$l,c,Gn(c)),dt(Dd,p)}}function gc(c,p,b){c==="focusin"?(Xc(),Yc=p,$l=b,Yc.attachEvent("onpropertychange",Ta)):c==="focusout"&&Xc()}function Pf(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return da($l)}function Fd(c,p){if(c==="click")return da(p)}function Md(c,p){if(c==="input"||c==="change")return da(p)}function Jc(c,p){return c===p&&(c!==0||1/c===1/p)||c!==c&&p!==p}var fo=typeof Object.is=="function"?Object.is:Jc;function rr(c,p){if(fo(c,p))return!0;if(typeof c!="object"||c===null||typeof p!="object"||p===null)return!1;var b=Object.keys(c),A=Object.keys(p);if(b.length!==A.length)return!1;for(A=0;A<b.length;A++){var N=b[A];if(!dn.call(p,N)||!fo(c[N],p[N]))return!1}return!0}function Oh(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Im(c,p){var b=Oh(c);c=0;for(var A;b;){if(b.nodeType===3){if(A=c+b.textContent.length,c<=p&&A>=p)return{node:b,offset:p-c};c=A}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=Oh(b)}}function Jp(c,p){return c&&p?c===p?!0:c&&c.nodeType===3?!1:p&&p.nodeType===3?Jp(c,p.parentNode):"contains"in c?c.contains(p):c.compareDocumentPosition?!!(c.compareDocumentPosition(p)&16):!1:!1}function Qc(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var p=Wc(c.document);p instanceof c.HTMLIFrameElement;){try{var b=typeof p.contentWindow.location.href=="string"}catch{b=!1}if(b)c=p.contentWindow;else break;p=Wc(c.document)}return p}function Df(c){var p=c&&c.nodeName&&c.nodeName.toLowerCase();return p&&(p==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||p==="textarea"||c.contentEditable==="true")}var Bu=Un&&"documentMode"in document&&11>=document.documentMode,ut=null,Ht=null,Ft=null,Bn=!1;function Ci(c,p,b){var A=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;Bn||ut==null||ut!==Wc(A)||(A=ut,"selectionStart"in A&&Df(A)?A={start:A.selectionStart,end:A.selectionEnd}:(A=(A.ownerDocument&&A.ownerDocument.defaultView||window).getSelection(),A={anchorNode:A.anchorNode,anchorOffset:A.anchorOffset,focusNode:A.focusNode,focusOffset:A.focusOffset}),Ft&&rr(Ft,A)||(Ft=A,A=hp(Ht,"onSelect"),0<A.length&&(p=new ca("onSelect","select",null,p,b),c.push({event:p,listeners:A}),p.target=ut)))}function Ui(c,p){var b={};return b[c.toLowerCase()]=p.toLowerCase(),b["Webkit"+c]="webkit"+p,b["Moz"+c]="moz"+p,b}var zr={animationend:Ui("Animation","AnimationEnd"),animationiteration:Ui("Animation","AnimationIteration"),animationstart:Ui("Animation","AnimationStart"),transitionrun:Ui("Transition","TransitionRun"),transitionstart:Ui("Transition","TransitionStart"),transitioncancel:Ui("Transition","TransitionCancel"),transitionend:Ui("Transition","TransitionEnd")},Tr={},Gu={};Un&&(Gu=document.createElement("div").style,"AnimationEvent"in window||(delete zr.animationend.animation,delete zr.animationiteration.animation,delete zr.animationstart.animation),"TransitionEvent"in window||delete zr.transitionend.transition);function Wl(c){if(Tr[c])return Tr[c];if(!zr[c])return c;var p=zr[c],b;for(b in p)if(p.hasOwnProperty(b)&&b in Gu)return Tr[c]=p[b];return c}var ea=Wl("animationend"),mc=Wl("animationiteration"),Ff=Wl("animationstart"),Id=Wl("transitionrun"),zh=Wl("transitionstart"),ed=Wl("transitioncancel"),Cr=Wl("transitionend"),Ld=new Map,yc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yc.push("scrollEnd");function Nr(c,p){Ld.set(c,p),Mo(p,[c])}var pu=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)},Wa=[],td=0,Qr=0;function qo(){for(var c=td,p=Qr=td=0;p<c;){var b=Wa[p];Wa[p++]=null;var A=Wa[p];Wa[p++]=null;var N=Wa[p];Wa[p++]=null;var V=Wa[p];if(Wa[p++]=null,A!==null&&N!==null){var se=A.pending;se===null?N.next=N:(N.next=se.next,se.next=N),A.pending=N}V!==0&&Od(b,N,V)}}function ds(c,p,b,A){Wa[td++]=c,Wa[td++]=p,Wa[td++]=b,Wa[td++]=A,Qr|=A,c.lanes|=A,c=c.alternate,c!==null&&(c.lanes|=A)}function vc(c,p,b,A){return ds(c,p,b,A),gu(c)}function gl(c,p){return ds(c,null,null,p),gu(c)}function Od(c,p,b){c.lanes|=b;var A=c.alternate;A!==null&&(A.lanes|=b);for(var N=!1,V=c.return;V!==null;)V.childLanes|=b,A=V.alternate,A!==null&&(A.childLanes|=b),V.tag===22&&(c=V.stateNode,c===null||c._visibility&1||(N=!0)),c=V,V=V.return;return c.tag===3?(V=c.stateNode,N&&p!==null&&(N=31-fr(b),c=V.hiddenUpdates,A=c[N],A===null?c[N]=[p]:A.push(p),p.lane=b|536870912),V):null}function gu(c){if(50<Qd)throw Qd=0,Eg=null,Error(i(185));for(var p=c.return;p!==null;)c=p,p=c.return;return c.tag===3?c.stateNode:null}var Bs={};function Mf(c,p,b,A){this.tag=c,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rs(c,p,b,A){return new Mf(c,p,b,A)}function Ul(c){return c=c.prototype,!(!c||!c.isReactComponent)}function ha(c,p){var b=c.alternate;return b===null?(b=rs(c.tag,p,c.key,c.mode),b.elementType=c.elementType,b.type=c.type,b.stateNode=c.stateNode,b.alternate=c,c.alternate=b):(b.pendingProps=p,b.type=c.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=c.flags&65011712,b.childLanes=c.childLanes,b.lanes=c.lanes,b.child=c.child,b.memoizedProps=c.memoizedProps,b.memoizedState=c.memoizedState,b.updateQueue=c.updateQueue,p=c.dependencies,b.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},b.sibling=c.sibling,b.index=c.index,b.ref=c.ref,b.refCleanup=c.refCleanup,b}function If(c,p){c.flags&=65011714;var b=c.alternate;return b===null?(c.childLanes=0,c.lanes=p,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=b.childLanes,c.lanes=b.lanes,c.child=b.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=b.memoizedProps,c.memoizedState=b.memoizedState,c.updateQueue=b.updateQueue,c.type=b.type,p=b.dependencies,c.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),c}function zd(c,p,b,A,N,V){var se=0;if(A=c,typeof c=="function")Ul(c)&&(se=1);else if(typeof c=="string")se=nu(c,b,yt.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case ne:return c=rs(31,b,p,N),c.elementType=ne,c.lanes=V,c;case O:return Ua(b.children,N,V,p);case z:se=8,N|=24;break;case $:return c=rs(12,b,p,N|2),c.elementType=$,c.lanes=V,c;case q:return c=rs(13,b,p,N),c.elementType=q,c.lanes=V,c;case ie:return c=rs(19,b,p,N),c.elementType=ie,c.lanes=V,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case Y:se=10;break e;case U:se=9;break e;case X:se=11;break e;case re:se=14;break e;case J:se=16,A=null;break e}se=29,b=Error(i(130,c===null?"null":typeof c,"")),A=null}return p=rs(se,b,p,N),p.elementType=c,p.type=A,p.lanes=V,p}function Ua(c,p,b,A){return c=rs(7,c,A,p),c.lanes=b,c}function ju(c,p,b){return c=rs(6,c,null,p),c.lanes=b,c}function Hu(c){var p=rs(18,null,null,0);return p.stateNode=c,p}function nd(c,p,b){return p=rs(4,c.children!==null?c.children:[],c.key,p),p.lanes=b,p.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},p}var Lf=new WeakMap;function fa(c,p){if(typeof c=="object"&&c!==null){var b=Lf.get(c);return b!==void 0?b:(p={value:c,source:p,stack:wn(p)},Lf.set(c,p),p)}return{value:c,source:p,stack:wn(p)}}var bc=[],Vu=0,so=null,Ko=0,Lo=[],Zo=0,ql=null,os=1,Ss="";function qa(c,p){bc[Vu++]=Ko,bc[Vu++]=so,so=c,Ko=p}function Of(c,p,b){Lo[Zo++]=os,Lo[Zo++]=Ss,Lo[Zo++]=ql,ql=c;var A=os;c=Ss;var N=32-fr(A)-1;A&=~(1<<N),b+=1;var V=32-fr(p)+N;if(30<V){var se=N-N%5;V=(A&(1<<se)-1).toString(32),A>>=se,N-=se,os=1<<32-fr(p)+N|b<<N|A,Ss=V+c}else os=1<<V|b<<N|A,Ss=c}function $u(c){c.return!==null&&(qa(c,1),Of(c,1,0))}function xc(c){for(;c===so;)so=bc[--Vu],bc[Vu]=null,Ko=bc[--Vu],bc[Vu]=null;for(;c===ql;)ql=Lo[--Zo],Lo[Zo]=null,Ss=Lo[--Zo],Lo[Zo]=null,os=Lo[--Zo],Lo[Zo]=null}function wc(c,p){Lo[Zo++]=os,Lo[Zo++]=Ss,Lo[Zo++]=ql,os=p.id,Ss=p.overflow,ql=c}var po=null,tr=null,nn=!1,Kl=null,ka=!1,zf=Error(i(519));function Ka(c){var p=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw yu(fa(p,c)),zf}function mu(c){var p=c.stateNode,b=c.type,A=c.memoizedProps;switch(p[Wn]=c,p[xi]=A,b){case"dialog":yr("cancel",p),yr("close",p);break;case"iframe":case"object":case"embed":yr("load",p);break;case"video":case"audio":for(b=0;b<dp.length;b++)yr(dp[b],p);break;case"source":yr("error",p);break;case"img":case"image":case"link":yr("error",p),yr("load",p);break;case"details":yr("toggle",p);break;case"input":yr("invalid",p),ur(p,A.value,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name,!0);break;case"select":yr("invalid",p);break;case"textarea":yr("invalid",p),bt(p,A.value,A.defaultValue,A.children)}b=A.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||p.textContent===""+b||A.suppressHydrationWarning===!0||fp(p.textContent,b)?(A.popover!=null&&(yr("beforetoggle",p),yr("toggle",p)),A.onScroll!=null&&yr("scroll",p),A.onScrollEnd!=null&&yr("scrollend",p),A.onClick!=null&&(p.onclick=Gt),p=!0):p=!1,p||Ka(c,!0)}function Cc(c){for(po=c.return;po;)switch(po.tag){case 5:case 31:case 13:ka=!1;return;case 27:case 3:ka=!0;return;default:po=po.return}}function Oi(c){if(c!==po)return!1;if(!nn)return Cc(c),nn=!0,!1;var p=c.tag,b;if((b=p!==3&&p!==27)&&((b=p===5)&&(b=c.type,b=!(b!=="form"&&b!=="button")||B(c.type,c.memoizedProps)),b=!b),b&&tr&&Ka(c),Cc(c),p===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(i(317));tr=Vn(c)}else if(p===31){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(i(317));tr=Vn(c)}else p===27?(p=tr,we(c.type)?(c=_n,_n=null,tr=c):tr=p):tr=po?vn(c.stateNode.nextSibling):null;return!0}function Se(){tr=po=null,nn=!1}function _c(){var c=Kl;return c!==null&&(el===null?el=c:el.push.apply(el,c),Kl=null),c}function yu(c){Kl===null?Kl=[c]:Kl.push(c)}var Pa=_e(null),Pi=null,vu=null;function bu(c,p,b){Oe(Pa,p._currentValue),p._currentValue=b}function xu(c){c._currentValue=Pa.current,Le(Pa)}function Wu(c,p,b){for(;c!==null;){var A=c.alternate;if((c.childLanes&p)!==p?(c.childLanes|=p,A!==null&&(A.childLanes|=p)):A!==null&&(A.childLanes&p)!==p&&(A.childLanes|=p),c===b)break;c=c.return}}function Nh(c,p,b,A){var N=c.child;for(N!==null&&(N.return=c);N!==null;){var V=N.dependencies;if(V!==null){var se=N.child;V=V.firstContext;e:for(;V!==null;){var Ae=V;V=N;for(var Xe=0;Xe<p.length;Xe++)if(Ae.context===p[Xe]){V.lanes|=b,Ae=V.alternate,Ae!==null&&(Ae.lanes|=b),Wu(V.return,b,c),A||(se=null);break e}V=Ae.next}}else if(N.tag===18){if(se=N.return,se===null)throw Error(i(341));se.lanes|=b,V=se.alternate,V!==null&&(V.lanes|=b),Wu(se,b,c),se=null}else se=N.child;if(se!==null)se.return=N;else for(se=N;se!==null;){if(se===c){se=null;break}if(N=se.sibling,N!==null){N.return=se.return,se=N;break}se=se.return}N=se}}function Nd(c,p,b,A){c=null;for(var N=p,V=!1;N!==null;){if(!V){if((N.flags&524288)!==0)V=!0;else if((N.flags&262144)!==0)break}if(N.tag===10){var se=N.alternate;if(se===null)throw Error(i(387));if(se=se.memoizedProps,se!==null){var Ae=N.type;fo(N.pendingProps.value,se.value)||(c!==null?c.push(Ae):c=[Ae])}}else if(N===Xt.current){if(se=N.alternate,se===null)throw Error(i(387));se.memoizedState.memoizedState!==N.memoizedState.memoizedState&&(c!==null?c.push(af):c=[af])}N=N.return}c!==null&&Nh(p,c,b,A),p.flags|=262144}function Nf(c){for(c=c.firstContext;c!==null;){if(!fo(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function hs(c){Pi=c,vu=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function qi(c){return Bh(Pi,c)}function Gs(c,p){return Pi===null&&hs(c),Bh(c,p)}function Bh(c,p){var b=p._currentValue;if(p={context:p,memoizedValue:b,next:null},vu===null){if(c===null)throw Error(i(308));vu=p,c.dependencies={lanes:0,firstContext:p},c.flags|=524288}else vu=vu.next=p;return b}var Bf=typeof AbortController<"u"?AbortController:function(){var c=[],p=this.signal={aborted:!1,addEventListener:function(b,A){c.push(A)}};this.abort=function(){p.aborted=!0,c.forEach(function(b){return b()})}},Lm=e.unstable_scheduleCallback,Gh=e.unstable_NormalPriority,_o={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ss(){return{controller:new Bf,data:new Map,refCount:0}}function Uu(c){c.refCount--,c.refCount===0&&Lm(Gh,function(){c.controller.abort()})}var zn=null,ii=0,qu=0,Ku=null;function Zu(c,p){if(zn===null){var b=zn=[];ii=0,qu=za(),Ku={status:"pending",value:void 0,then:function(A){b.push(A)}}}return ii++,p.then(D,D),p}function D(){if(--ii===0&&zn!==null){Ku!==null&&(Ku.status="fulfilled");var c=zn;zn=null,qu=0,Ku=null;for(var p=0;p<c.length;p++)(0,c[p])()}}function l(c,p){var b=[],A={status:"pending",value:null,reason:null,then:function(N){b.push(N)}};return c.then(function(){A.status="fulfilled",A.value=p;for(var N=0;N<b.length;N++)(0,b[N])(p)},function(N){for(A.status="rejected",A.reason=N,N=0;N<b.length;N++)(0,b[N])(void 0)}),A}var y=fe.S;fe.S=function(c,p){H0=ri(),typeof p=="object"&&p!==null&&typeof p.then=="function"&&Zu(c,p),y!==null&&y(c,p)};var _=_e(null);function S(){var c=_.current;return c!==null?c:lo.pooledCache}function P(c,p){p===null?Oe(_,_.current):Oe(_,p.pool)}function G(){var c=S();return c===null?null:{parent:_o._currentValue,pool:c}}var W=Error(i(460)),K=Error(i(474)),te=Error(i(542)),ae={then:function(){}};function le(c){return c=c.status,c==="fulfilled"||c==="rejected"}function xe(c,p,b){switch(b=c[b],b===void 0?c.push(p):b!==p&&(p.then(Gt,Gt),p=b),p.status){case"fulfilled":return p.value;case"rejected":throw c=p.reason,Ve(c),c;default:if(typeof p.status=="string")p.then(Gt,Gt);else{if(c=lo,c!==null&&100<c.shellSuspendCounter)throw Error(i(482));c=p,c.status="pending",c.then(function(A){if(p.status==="pending"){var N=p;N.status="fulfilled",N.value=A}},function(A){if(p.status==="pending"){var N=p;N.status="rejected",N.reason=A}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw c=p.reason,Ve(c),c}throw Fe=p,W}}function Ee(c){try{var p=c._init;return p(c._payload)}catch(b){throw b!==null&&typeof b=="object"&&typeof b.then=="function"?(Fe=b,W):b}}var Fe=null;function Ge(){if(Fe===null)throw Error(i(459));var c=Fe;return Fe=null,c}function Ve(c){if(c===W||c===te)throw Error(i(483))}var $e=null,Ke=0;function ze(c){var p=Ke;return Ke+=1,$e===null&&($e=[]),xe($e,c,p)}function tt(c,p){p=p.props.ref,c.ref=p!==void 0?p:null}function rt(c,p){throw p.$$typeof===w?Error(i(525)):(c=Object.prototype.toString.call(p),Error(i(31,c==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":c)))}function gt(c){function p(pt,st){if(c){var Rt=pt.deletions;Rt===null?(pt.deletions=[st],pt.flags|=16):Rt.push(st)}}function b(pt,st){if(!c)return null;for(;st!==null;)p(pt,st),st=st.sibling;return null}function A(pt){for(var st=new Map;pt!==null;)pt.key!==null?st.set(pt.key,pt):st.set(pt.index,pt),pt=pt.sibling;return st}function N(pt,st){return pt=ha(pt,st),pt.index=0,pt.sibling=null,pt}function V(pt,st,Rt){return pt.index=Rt,c?(Rt=pt.alternate,Rt!==null?(Rt=Rt.index,Rt<st?(pt.flags|=67108866,st):Rt):(pt.flags|=67108866,st)):(pt.flags|=1048576,st)}function se(pt){return c&&pt.alternate===null&&(pt.flags|=67108866),pt}function Ae(pt,st,Rt,Qt){return st===null||st.tag!==6?(st=ju(Rt,pt.mode,Qt),st.return=pt,st):(st=N(st,Rt),st.return=pt,st)}function Xe(pt,st,Rt,Qt){var wi=Rt.type;return wi===O?Kt(pt,st,Rt.props.children,Qt,Rt.key):st!==null&&(st.elementType===wi||typeof wi=="object"&&wi!==null&&wi.$$typeof===J&&Ee(wi)===st.type)?(st=N(st,Rt.props),tt(st,Rt),st.return=pt,st):(st=zd(Rt.type,Rt.key,Rt.props,null,pt.mode,Qt),tt(st,Rt),st.return=pt,st)}function At(pt,st,Rt,Qt){return st===null||st.tag!==4||st.stateNode.containerInfo!==Rt.containerInfo||st.stateNode.implementation!==Rt.implementation?(st=nd(Rt,pt.mode,Qt),st.return=pt,st):(st=N(st,Rt.children||[]),st.return=pt,st)}function Kt(pt,st,Rt,Qt,wi){return st===null||st.tag!==7?(st=Ua(Rt,pt.mode,Qt,wi),st.return=pt,st):(st=N(st,Rt),st.return=pt,st)}function tn(pt,st,Rt){if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return st=ju(""+st,pt.mode,Rt),st.return=pt,st;if(typeof st=="object"&&st!==null){switch(st.$$typeof){case R:return Rt=zd(st.type,st.key,st.props,null,pt.mode,Rt),tt(Rt,st),Rt.return=pt,Rt;case L:return st=nd(st,pt.mode,Rt),st.return=pt,st;case J:return st=Ee(st),tn(pt,st,Rt)}if(Te(st)||ve(st))return st=Ua(st,pt.mode,Rt,null),st.return=pt,st;if(typeof st.then=="function")return tn(pt,ze(st),Rt);if(st.$$typeof===Y)return tn(pt,Gs(pt,st),Rt);rt(pt,st)}return null}function Dt(pt,st,Rt,Qt){var wi=st!==null?st.key:null;if(typeof Rt=="string"&&Rt!==""||typeof Rt=="number"||typeof Rt=="bigint")return wi!==null?null:Ae(pt,st,""+Rt,Qt);if(typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case R:return Rt.key===wi?Xe(pt,st,Rt,Qt):null;case L:return Rt.key===wi?At(pt,st,Rt,Qt):null;case J:return Rt=Ee(Rt),Dt(pt,st,Rt,Qt)}if(Te(Rt)||ve(Rt))return wi!==null?null:Kt(pt,st,Rt,Qt,null);if(typeof Rt.then=="function")return Dt(pt,st,ze(Rt),Qt);if(Rt.$$typeof===Y)return Dt(pt,st,Gs(pt,Rt),Qt);rt(pt,Rt)}return null}function zt(pt,st,Rt,Qt,wi){if(typeof Qt=="string"&&Qt!==""||typeof Qt=="number"||typeof Qt=="bigint")return pt=pt.get(Rt)||null,Ae(st,pt,""+Qt,wi);if(typeof Qt=="object"&&Qt!==null){switch(Qt.$$typeof){case R:return pt=pt.get(Qt.key===null?Rt:Qt.key)||null,Xe(st,pt,Qt,wi);case L:return pt=pt.get(Qt.key===null?Rt:Qt.key)||null,At(st,pt,Qt,wi);case J:return Qt=Ee(Qt),zt(pt,st,Rt,Qt,wi)}if(Te(Qt)||ve(Qt))return pt=pt.get(Rt)||null,Kt(st,pt,Qt,wi,null);if(typeof Qt.then=="function")return zt(pt,st,Rt,ze(Qt),wi);if(Qt.$$typeof===Y)return zt(pt,st,Rt,Gs(st,Qt),wi);rt(st,Qt)}return null}function ti(pt,st,Rt,Qt){for(var wi=null,qr=null,li=st,hr=st=0,Er=null;li!==null&&hr<Rt.length;hr++){li.index>hr?(Er=li,li=null):Er=li.sibling;var Kr=Dt(pt,li,Rt[hr],Qt);if(Kr===null){li===null&&(li=Er);break}c&&li&&Kr.alternate===null&&p(pt,li),st=V(Kr,st,hr),qr===null?wi=Kr:qr.sibling=Kr,qr=Kr,li=Er}if(hr===Rt.length)return b(pt,li),nn&&qa(pt,hr),wi;if(li===null){for(;hr<Rt.length;hr++)li=tn(pt,Rt[hr],Qt),li!==null&&(st=V(li,st,hr),qr===null?wi=li:qr.sibling=li,qr=li);return nn&&qa(pt,hr),wi}for(li=A(li);hr<Rt.length;hr++)Er=zt(li,pt,hr,Rt[hr],Qt),Er!==null&&(c&&Er.alternate!==null&&li.delete(Er.key===null?hr:Er.key),st=V(Er,st,hr),qr===null?wi=Er:qr.sibling=Er,qr=Er);return c&&li.forEach(function(yp){return p(pt,yp)}),nn&&qa(pt,hr),wi}function Di(pt,st,Rt,Qt){if(Rt==null)throw Error(i(151));for(var wi=null,qr=null,li=st,hr=st=0,Er=null,Kr=Rt.next();li!==null&&!Kr.done;hr++,Kr=Rt.next()){li.index>hr?(Er=li,li=null):Er=li.sibling;var yp=Dt(pt,li,Kr.value,Qt);if(yp===null){li===null&&(li=Er);break}c&&li&&yp.alternate===null&&p(pt,li),st=V(yp,st,hr),qr===null?wi=yp:qr.sibling=yp,qr=yp,li=Er}if(Kr.done)return b(pt,li),nn&&qa(pt,hr),wi;if(li===null){for(;!Kr.done;hr++,Kr=Rt.next())Kr=tn(pt,Kr.value,Qt),Kr!==null&&(st=V(Kr,st,hr),qr===null?wi=Kr:qr.sibling=Kr,qr=Kr);return nn&&qa(pt,hr),wi}for(li=A(li);!Kr.done;hr++,Kr=Rt.next())Kr=zt(li,pt,hr,Kr.value,Qt),Kr!==null&&(c&&Kr.alternate!==null&&li.delete(Kr.key===null?hr:Kr.key),st=V(Kr,st,hr),qr===null?wi=Kr:qr.sibling=Kr,qr=Kr);return c&&li.forEach(function(lE){return p(pt,lE)}),nn&&qa(pt,hr),wi}function ko(pt,st,Rt,Qt){if(typeof Rt=="object"&&Rt!==null&&Rt.type===O&&Rt.key===null&&(Rt=Rt.props.children),typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case R:e:{for(var wi=Rt.key;st!==null;){if(st.key===wi){if(wi=Rt.type,wi===O){if(st.tag===7){b(pt,st.sibling),Qt=N(st,Rt.props.children),Qt.return=pt,pt=Qt;break e}}else if(st.elementType===wi||typeof wi=="object"&&wi!==null&&wi.$$typeof===J&&Ee(wi)===st.type){b(pt,st.sibling),Qt=N(st,Rt.props),tt(Qt,Rt),Qt.return=pt,pt=Qt;break e}b(pt,st);break}else p(pt,st);st=st.sibling}Rt.type===O?(Qt=Ua(Rt.props.children,pt.mode,Qt,Rt.key),Qt.return=pt,pt=Qt):(Qt=zd(Rt.type,Rt.key,Rt.props,null,pt.mode,Qt),tt(Qt,Rt),Qt.return=pt,pt=Qt)}return se(pt);case L:e:{for(wi=Rt.key;st!==null;){if(st.key===wi)if(st.tag===4&&st.stateNode.containerInfo===Rt.containerInfo&&st.stateNode.implementation===Rt.implementation){b(pt,st.sibling),Qt=N(st,Rt.children||[]),Qt.return=pt,pt=Qt;break e}else{b(pt,st);break}else p(pt,st);st=st.sibling}Qt=nd(Rt,pt.mode,Qt),Qt.return=pt,pt=Qt}return se(pt);case J:return Rt=Ee(Rt),ko(pt,st,Rt,Qt)}if(Te(Rt))return ti(pt,st,Rt,Qt);if(ve(Rt)){if(wi=ve(Rt),typeof wi!="function")throw Error(i(150));return Rt=wi.call(Rt),Di(pt,st,Rt,Qt)}if(typeof Rt.then=="function")return ko(pt,st,ze(Rt),Qt);if(Rt.$$typeof===Y)return ko(pt,st,Gs(pt,Rt),Qt);rt(pt,Rt)}return typeof Rt=="string"&&Rt!==""||typeof Rt=="number"||typeof Rt=="bigint"?(Rt=""+Rt,st!==null&&st.tag===6?(b(pt,st.sibling),Qt=N(st,Rt),Qt.return=pt,pt=Qt):(b(pt,st),Qt=ju(Rt,pt.mode,Qt),Qt.return=pt,pt=Qt),se(pt)):b(pt,st)}return function(pt,st,Rt,Qt){try{Ke=0;var wi=ko(pt,st,Rt,Qt);return $e=null,wi}catch(li){if(li===W||li===te)throw li;var qr=rs(29,li,null,pt.mode);return qr.lanes=Qt,qr.return=pt,qr}finally{}}}var jt=gt(!0),un=gt(!1),gn=!1;function En(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bn(c,p){c=c.updateQueue,p.updateQueue===c&&(p.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function hn(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function kn(c,p,b){var A=c.updateQueue;if(A===null)return null;if(A=A.shared,(Lr&2)!==0){var N=A.pending;return N===null?p.next=p:(p.next=N.next,N.next=p),A.pending=p,p=gu(c),Od(c,null,b),p}return ds(c,A,p,b),gu(c)}function ci(c,p,b){if(p=p.updateQueue,p!==null&&(p=p.shared,(b&4194048)!==0)){var A=p.lanes;A&=c.pendingLanes,b|=A,p.lanes=b,Pt(c,b)}}function xn(c,p){var b=c.updateQueue,A=c.alternate;if(A!==null&&(A=A.updateQueue,b===A)){var N=null,V=null;if(b=b.firstBaseUpdate,b!==null){do{var se={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};V===null?N=V=se:V=V.next=se,b=b.next}while(b!==null);V===null?N=V=p:V=V.next=p}else N=V=p;b={baseState:A.baseState,firstBaseUpdate:N,lastBaseUpdate:V,shared:A.shared,callbacks:A.callbacks},c.updateQueue=b;return}c=b.lastBaseUpdate,c===null?b.firstBaseUpdate=p:c.next=p,b.lastBaseUpdate=p}var cn=!1;function oi(){if(cn){var c=Ku;if(c!==null)throw c}}function kr(c,p,b,A){cn=!1;var N=c.updateQueue;gn=!1;var V=N.firstBaseUpdate,se=N.lastBaseUpdate,Ae=N.shared.pending;if(Ae!==null){N.shared.pending=null;var Xe=Ae,At=Xe.next;Xe.next=null,se===null?V=At:se.next=At,se=Xe;var Kt=c.alternate;Kt!==null&&(Kt=Kt.updateQueue,Ae=Kt.lastBaseUpdate,Ae!==se&&(Ae===null?Kt.firstBaseUpdate=At:Ae.next=At,Kt.lastBaseUpdate=Xe))}if(V!==null){var tn=N.baseState;se=0,Kt=At=Xe=null,Ae=V;do{var Dt=Ae.lane&-536870913,zt=Dt!==Ae.lane;if(zt?(gr&Dt)===Dt:(A&Dt)===Dt){Dt!==0&&Dt===qu&&(cn=!0),Kt!==null&&(Kt=Kt.next={lane:0,tag:Ae.tag,payload:Ae.payload,callback:null,next:null});e:{var ti=c,Di=Ae;Dt=p;var ko=b;switch(Di.tag){case 1:if(ti=Di.payload,typeof ti=="function"){tn=ti.call(ko,tn,Dt);break e}tn=ti;break e;case 3:ti.flags=ti.flags&-65537|128;case 0:if(ti=Di.payload,Dt=typeof ti=="function"?ti.call(ko,tn,Dt):ti,Dt==null)break e;tn=v({},tn,Dt);break e;case 2:gn=!0}}Dt=Ae.callback,Dt!==null&&(c.flags|=64,zt&&(c.flags|=8192),zt=N.callbacks,zt===null?N.callbacks=[Dt]:zt.push(Dt))}else zt={lane:Dt,tag:Ae.tag,payload:Ae.payload,callback:Ae.callback,next:null},Kt===null?(At=Kt=zt,Xe=tn):Kt=Kt.next=zt,se|=Dt;if(Ae=Ae.next,Ae===null){if(Ae=N.shared.pending,Ae===null)break;zt=Ae,Ae=zt.next,zt.next=null,N.lastBaseUpdate=zt,N.shared.pending=null}}while(!0);Kt===null&&(Xe=tn),N.baseState=Xe,N.firstBaseUpdate=At,N.lastBaseUpdate=Kt,V===null&&(N.shared.lanes=0),Jd|=se,c.lanes=se,c.memoizedState=tn}}function gi(c,p){if(typeof c!="function")throw Error(i(191,c));c.call(p)}function Ki(c,p){var b=c.callbacks;if(b!==null)for(c.callbacks=null,c=0;c<b.length;c++)gi(b[c],p)}var vr=_e(null),go=_e(0);function Za(c,p){c=wl,Oe(go,c),Oe(vr,p),wl=c|p.baseLanes}function Zi(){Oe(go,wl),Oe(vr,vr.current)}function Es(){wl=go.current,Le(vr),Le(go)}var eo=_e(null),to=null;function Go(c){var p=c.alternate;Oe(_r,_r.current&1),Oe(eo,c),to===null&&(p===null||vr.current!==null||p.memoizedState!==null)&&(to=c)}function Da(c){Oe(_r,_r.current),Oe(eo,c),to===null&&(to=c)}function id(c){c.tag===22?(Oe(_r,_r.current),Oe(eo,c),to===null&&(to=c)):pa()}function pa(){Oe(_r,_r.current),Oe(eo,eo.current)}function fs(c){Le(eo),to===c&&(to=null),Le(_r)}var _r=_e(0);function rd(c){for(var p=c;p!==null;){if(p.tag===13){var b=p.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||rn(b)||Rn(b)))return p}else if(p.tag===19&&(p.memoizedProps.revealOrder==="forwards"||p.memoizedProps.revealOrder==="backwards"||p.memoizedProps.revealOrder==="unstable_legacy-backwards"||p.memoizedProps.revealOrder==="together")){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var ga=0,yi=null,or=null,Br=null,ma=!1,jo=!1,Ho=!1,ta=0,Hi=0,Fa=null,Bd=0;function Gr(){throw Error(i(321))}function jh(c,p){if(p===null)return!1;for(var b=0;b<p.length&&b<c.length;b++)if(!fo(c[b],p[b]))return!1;return!0}function Gf(c,p,b,A,N,V){return ga=V,yi=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,fe.H=c===null||c.memoizedState===null?k0:qm,Ho=!1,V=b(A,N),Ho=!1,jo&&(V=ml(p,b,A,N)),jf(c),V}function jf(c){fe.H=Wd;var p=or!==null&&or.next!==null;if(ga=0,Br=or=yi=null,ma=!1,Hi=0,Fa=null,p)throw Error(i(300));c===null||So||(c=c.dependencies,c!==null&&Nf(c)&&(So=!0))}function ml(c,p,b,A){yi=c;var N=0;do{if(jo&&(Fa=null),Hi=0,jo=!1,25<=N)throw Error(i(301));if(N+=1,Br=or=null,c.updateQueue!=null){var V=c.updateQueue;V.lastEffect=null,V.events=null,V.stores=null,V.memoCache!=null&&(V.memoCache.index=0)}fe.H=$f,V=p(b,A)}while(jo);return V}function Om(){var c=fe.H,p=c.useState()[0];return p=typeof p.then=="function"?sd(p):p,c=c.useState()[0],(or!==null?or.memoizedState:null)!==c&&(yi.flags|=1024),p}function od(){var c=ta!==0;return ta=0,c}function Sc(c,p,b){p.updateQueue=c.updateQueue,p.flags&=-2053,c.lanes&=~b}function Gd(c){if(ma){for(c=c.memoizedState;c!==null;){var p=c.queue;p!==null&&(p.pending=null),c=c.next}ma=!1}ga=0,Br=or=yi=null,jo=!1,Hi=ta=0,Fa=null}function ps(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Br===null?yi.memoizedState=Br=c:Br=Br.next=c,Br}function ao(){if(or===null){var c=yi.alternate;c=c!==null?c.memoizedState:null}else c=or.next;var p=Br===null?yi.memoizedState:Br.next;if(p!==null)Br=p,or=c;else{if(c===null)throw yi.alternate===null?Error(i(467)):Error(i(310));or=c,c={memoizedState:or.memoizedState,baseState:or.baseState,baseQueue:or.baseQueue,queue:or.queue,next:null},Br===null?yi.memoizedState=Br=c:Br=Br.next=c}return Br}function wu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function sd(c){var p=Hi;return Hi+=1,Fa===null&&(Fa=[]),c=xe(Fa,c,p),p=yi,(Br===null?p.memoizedState:Br.next)===null&&(p=p.alternate,fe.H=p===null||p.memoizedState===null?k0:qm),c}function Hh(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return sd(c);if(c.$$typeof===Y)return qi(c)}throw Error(i(438,String(c)))}function zm(c){var p=null,b=yi.updateQueue;if(b!==null&&(p=b.memoCache),p==null){var A=yi.alternate;A!==null&&(A=A.updateQueue,A!==null&&(A=A.memoCache,A!=null&&(p={data:A.data.map(function(N){return N.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),b===null&&(b=wu(),yi.updateQueue=b),b.memoCache=p,b=p.data[p.index],b===void 0)for(b=p.data[p.index]=Array(c),A=0;A<c;A++)b[A]=be;return p.index++,b}function Yu(c,p){return typeof p=="function"?p(c):p}function Yi(c){var p=ao();return Vh(p,or,c)}function Vh(c,p,b){var A=c.queue;if(A===null)throw Error(i(311));A.lastRenderedReducer=b;var N=c.baseQueue,V=A.pending;if(V!==null){if(N!==null){var se=N.next;N.next=V.next,V.next=se}p.baseQueue=N=V,A.pending=null}if(V=c.baseState,N===null)c.memoizedState=V;else{p=N.next;var Ae=se=null,Xe=null,At=p,Kt=!1;do{var tn=At.lane&-536870913;if(tn!==At.lane?(gr&tn)===tn:(ga&tn)===tn){var Dt=At.revertLane;if(Dt===0)Xe!==null&&(Xe=Xe.next={lane:0,revertLane:0,gesture:null,action:At.action,hasEagerState:At.hasEagerState,eagerState:At.eagerState,next:null}),tn===qu&&(Kt=!0);else if((ga&Dt)===Dt){At=At.next,Dt===qu&&(Kt=!0);continue}else tn={lane:0,revertLane:At.revertLane,gesture:null,action:At.action,hasEagerState:At.hasEagerState,eagerState:At.eagerState,next:null},Xe===null?(Ae=Xe=tn,se=V):Xe=Xe.next=tn,yi.lanes|=Dt,Jd|=Dt;tn=At.action,Ho&&b(V,tn),V=At.hasEagerState?At.eagerState:b(V,tn)}else Dt={lane:tn,revertLane:At.revertLane,gesture:At.gesture,action:At.action,hasEagerState:At.hasEagerState,eagerState:At.eagerState,next:null},Xe===null?(Ae=Xe=Dt,se=V):Xe=Xe.next=Dt,yi.lanes|=tn,Jd|=tn;At=At.next}while(At!==null&&At!==p);if(Xe===null?se=V:Xe.next=Ae,!fo(V,c.memoizedState)&&(So=!0,Kt&&(b=Ku,b!==null)))throw b;c.memoizedState=V,c.baseState=se,c.baseQueue=Xe,A.lastRenderedState=V}return N===null&&(A.lanes=0),[c.memoizedState,A.dispatch]}function jd(c){var p=ao(),b=p.queue;if(b===null)throw Error(i(311));b.lastRenderedReducer=c;var A=b.dispatch,N=b.pending,V=p.memoizedState;if(N!==null){b.pending=null;var se=N=N.next;do V=c(V,se.action),se=se.next;while(se!==N);fo(V,p.memoizedState)||(So=!0),p.memoizedState=V,p.baseQueue===null&&(p.baseState=V),b.lastRenderedState=V}return[V,A]}function yl(c,p,b){var A=yi,N=ao(),V=nn;if(V){if(b===void 0)throw Error(i(407));b=b()}else b=p();var se=!fo((or||N).memoizedState,b);if(se&&(N.memoizedState=b,So=!0),N=N.queue,ld(Ky.bind(null,A,N,c),[c]),N.getSnapshot!==p||se||Br!==null&&Br.memoizedState.tag&1){if(A.flags|=2048,Xa(9,{destroy:void 0},ad.bind(null,A,N,b,p),null),lo===null)throw Error(i(349));V||(ga&127)!==0||Zl(A,p,b)}return b}function Zl(c,p,b){c.flags|=16384,c={getSnapshot:p,value:b},p=yi.updateQueue,p===null?(p=wu(),yi.updateQueue=p,p.stores=[c]):(b=p.stores,b===null?p.stores=[c]:b.push(c))}function ad(c,p,b,A){p.value=b,p.getSnapshot=A,js(p)&&A0(c)}function Ky(c,p,b){return b(function(){js(p)&&A0(c)})}function js(c){var p=c.getSnapshot;c=c.value;try{var b=p();return!fo(c,b)}catch{return!0}}function A0(c){var p=gl(c,2);p!==null&&Oa(p,c,2)}function $h(c){var p=ps();if(typeof c=="function"){var b=c;if(c=b(),Ho){qn(!0);try{b()}finally{qn(!1)}}}return p.memoizedState=p.baseState=c,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yu,lastRenderedState:c},p}function Oo(c,p,b,A){return c.baseState=b,Vh(c,or,typeof A=="function"?A:Yu)}function Nm(c,p,b,A,N){if(ag(c))throw Error(i(485));if(c=p.action,c!==null){var V={payload:N,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(se){V.listeners.push(se)}};fe.T!==null?b(!0):V.isTransition=!1,A(V),b=p.pending,b===null?(V.next=p.pending=V,Bm(p,V)):(V.next=b.next,p.pending=b.next=V)}}function Bm(c,p){var b=p.action,A=p.payload,N=c.state;if(p.isTransition){var V=fe.T,se={};fe.T=se;try{var Ae=b(N,A),Xe=fe.S;Xe!==null&&Xe(se,Ae),Rs(c,p,Ae)}catch(At){Hd(c,p,At)}finally{V!==null&&se.types!==null&&(V.types=se.types),fe.T=V}}else try{V=b(N,A),Rs(c,p,V)}catch(At){Hd(c,p,At)}}function Rs(c,p,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(A){Ya(c,p,A)},function(A){return Hd(c,p,A)}):Ya(c,p,b)}function Ya(c,p,b){p.status="fulfilled",p.value=b,Qp(p),c.state=b,p=c.pending,p!==null&&(b=p.next,b===p?c.pending=null:(b=b.next,p.next=b,Bm(c,b)))}function Hd(c,p,b){var A=c.pending;if(c.pending=null,A!==null){A=A.next;do p.status="rejected",p.reason=b,Qp(p),p=p.next;while(p!==A)}c.action=null}function Qp(c){c=c.listeners;for(var p=0;p<c.length;p++)(0,c[p])()}function Hf(c,p){return p}function Zy(c,p){if(nn){var b=lo.formState;if(b!==null){e:{var A=yi;if(nn){if(tr){t:{for(var N=tr,V=ka;N.nodeType!==8;){if(!V){N=null;break t}if(N=vn(N.nextSibling),N===null){N=null;break t}}V=N.data,N=V==="F!"||V==="F"?N:null}if(N){tr=vn(N.nextSibling),A=N.data==="F!";break e}}Ka(A)}A=!1}A&&(p=b[0])}}return b=ps(),b.memoizedState=b.baseState=p,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hf,lastRenderedState:p},b.queue=A,b=Ja.bind(null,yi,A),A.dispatch=b,A=$h(!1),V=$d.bind(null,yi,!1,A.queue),A=ps(),N={state:p,dispatch:null,action:c,pending:null},A.queue=N,b=Nm.bind(null,yi,N,V,b),N.dispatch=b,A.memoizedState=c,[p,b,!1]}function eg(c){var p=ao();return Yy(p,or,c)}function Yy(c,p,b){if(p=Vh(c,p,Hf)[0],c=Yi(Yu)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var A=sd(p)}catch(se){throw se===W?te:se}else A=p;p=ao();var N=p.queue,V=N.dispatch;return b!==p.memoizedState&&(yi.flags|=2048,Xa(9,{destroy:void 0},tg.bind(null,N,b),null)),[A,V,c]}function tg(c,p){c.action=p}function Gm(c){var p=ao(),b=or;if(b!==null)return Yy(p,b,c);ao(),p=p.memoizedState,b=ao();var A=b.queue.dispatch;return b.memoizedState=c,[p,A,!1]}function Xa(c,p,b,A){return c={tag:c,create:b,deps:A,inst:p,next:null},p=yi.updateQueue,p===null&&(p=wu(),yi.updateQueue=p),b=p.lastEffect,b===null?p.lastEffect=c.next=c:(A=b.next,b.next=c,c.next=A,p.lastEffect=c),c}function Xy(){return ao().memoizedState}function Cu(c,p,b,A){var N=ps();yi.flags|=c,N.memoizedState=Xa(1|p,{destroy:void 0},b,A===void 0?null:A)}function Ec(c,p,b,A){var N=ao();A=A===void 0?null:A;var V=N.memoizedState.inst;or!==null&&A!==null&&jh(A,or.memoizedState.deps)?N.memoizedState=Xa(p,V,b,A):(yi.flags|=c,N.memoizedState=Xa(1|p,V,b,A))}function Jy(c,p){Cu(8390656,8,c,p)}function ld(c,p){Ec(2048,8,c,p)}function jm(c){yi.flags|=4;var p=yi.updateQueue;if(p===null)p=wu(),yi.updateQueue=p,p.events=[c];else{var b=p.events;b===null?p.events=[c]:b.push(c)}}function ng(c){var p=ao().memoizedState;return jm({ref:p,nextImpl:c}),function(){if((Lr&2)!==0)throw Error(i(440));return p.impl.apply(void 0,arguments)}}function Qy(c,p){return Ec(4,2,c,p)}function Hm(c,p){return Ec(4,4,c,p)}function ev(c,p){if(typeof p=="function"){c=c();var b=p(c);return function(){typeof b=="function"?b():p(null)}}if(p!=null)return c=c(),p.current=c,function(){p.current=null}}function ya(c,p,b){b=b!=null?b.concat([c]):null,Ec(4,4,ev.bind(null,p,c),b)}function ud(){}function ig(c,p){var b=ao();p=p===void 0?null:p;var A=b.memoizedState;return p!==null&&jh(p,A[1])?A[0]:(b.memoizedState=[c,p],c)}function Ma(c,p){var b=ao();p=p===void 0?null:p;var A=b.memoizedState;if(p!==null&&jh(p,A[1]))return A[0];if(A=c(),Ho){qn(!0);try{c()}finally{qn(!1)}}return b.memoizedState=[A,p],A}function Ia(c,p,b){return b===void 0||(ga&1073741824)!==0&&(gr&261930)===0?c.memoizedState=p:(c.memoizedState=b,c=Qm(),yi.lanes|=c,Jd|=c,b)}function T0(c,p,b,A){return fo(b,p)?b:vr.current!==null?(c=Ia(c,b,A),fo(c,p)||(So=!0),c):(ga&42)===0||(ga&1073741824)!==0&&(gr&261930)===0?(So=!0,c.memoizedState=b):(c=Qm(),yi.lanes|=c,Jd|=c,p)}function rg(c,p,b,A,N){var V=he.p;he.p=V!==0&&8>V?V:8;var se=fe.T,Ae={};fe.T=Ae,$d(c,!1,p,b);try{var Xe=N(),At=fe.S;if(At!==null&&At(Ae,Xe),Xe!==null&&typeof Xe=="object"&&typeof Xe.then=="function"){var Kt=l(Xe,A);Uh(c,p,Kt,Ql(c))}else Uh(c,p,A,Ql(c))}catch(tn){Uh(c,p,{then:function(){},status:"rejected",reason:tn},Ql())}finally{he.p=V,se!==null&&Ae.types!==null&&(se.types=Ae.types),fe.T=se}}function Vm(){}function cd(c,p,b,A){if(c.tag!==5)throw Error(i(476));var N=$m(c).queue;rg(c,N,p,Re,b===null?Vm:function(){return Wm(c),b(A)})}function $m(c){var p=c.memoizedState;if(p!==null)return p;p={memoizedState:Re,baseState:Re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yu,lastRenderedState:Re},next:null};var b={};return p.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yu,lastRenderedState:b},next:null},c.memoizedState=p,c=c.alternate,c!==null&&(c.memoizedState=p),p}function Wm(c){var p=$m(c);p.next===null&&(p=c.alternate.memoizedState),Uh(c,p.next.queue,{},Ql())}function tv(){return qi(af)}function og(){return ao().memoizedState}function Vd(){return ao().memoizedState}function Wh(c){for(var p=c.return;p!==null;){switch(p.tag){case 24:case 3:var b=Ql();c=hn(b);var A=kn(p,c,b);A!==null&&(Oa(A,p,b),ci(A,p,b)),p={cache:ss()},c.payload=p;return}p=p.return}}function sg(c,p,b){var A=Ql();b={lane:A,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},ag(c)?Vf(p,b):(b=vc(c,p,b,A),b!==null&&(Oa(b,c,A),Um(b,p,A)))}function Ja(c,p,b){var A=Ql();Uh(c,p,b,A)}function Uh(c,p,b,A){var N={lane:A,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null};if(ag(c))Vf(p,N);else{var V=c.alternate;if(c.lanes===0&&(V===null||V.lanes===0)&&(V=p.lastRenderedReducer,V!==null))try{var se=p.lastRenderedState,Ae=V(se,b);if(N.hasEagerState=!0,N.eagerState=Ae,fo(Ae,se))return ds(c,p,N,0),lo===null&&qo(),!1}catch{}finally{}if(b=vc(c,p,N,A),b!==null)return Oa(b,c,A),Um(b,p,A),!0}return!1}function $d(c,p,b,A){if(A={lane:2,revertLane:za(),gesture:null,action:A,hasEagerState:!1,eagerState:null,next:null},ag(c)){if(p)throw Error(i(479))}else p=vc(c,b,A,2),p!==null&&Oa(p,c,2)}function ag(c){var p=c.alternate;return c===yi||p!==null&&p===yi}function Vf(c,p){jo=ma=!0;var b=c.pending;b===null?p.next=p:(p.next=b.next,b.next=p),c.pending=p}function Um(c,p,b){if((b&4194048)!==0){var A=p.lanes;A&=c.pendingLanes,b|=A,p.lanes=b,Pt(c,b)}}var Wd={readContext:qi,use:Hh,useCallback:Gr,useContext:Gr,useEffect:Gr,useImperativeHandle:Gr,useLayoutEffect:Gr,useInsertionEffect:Gr,useMemo:Gr,useReducer:Gr,useRef:Gr,useState:Gr,useDebugValue:Gr,useDeferredValue:Gr,useTransition:Gr,useSyncExternalStore:Gr,useId:Gr,useHostTransitionStatus:Gr,useFormState:Gr,useActionState:Gr,useOptimistic:Gr,useMemoCache:Gr,useCacheRefresh:Gr};Wd.useEffectEvent=Gr;var k0={readContext:qi,use:Hh,useCallback:function(c,p){return ps().memoizedState=[c,p===void 0?null:p],c},useContext:qi,useEffect:Jy,useImperativeHandle:function(c,p,b){b=b!=null?b.concat([c]):null,Cu(4194308,4,ev.bind(null,p,c),b)},useLayoutEffect:function(c,p){return Cu(4194308,4,c,p)},useInsertionEffect:function(c,p){Cu(4,2,c,p)},useMemo:function(c,p){var b=ps();p=p===void 0?null:p;var A=c();if(Ho){qn(!0);try{c()}finally{qn(!1)}}return b.memoizedState=[A,p],A},useReducer:function(c,p,b){var A=ps();if(b!==void 0){var N=b(p);if(Ho){qn(!0);try{b(p)}finally{qn(!1)}}}else N=p;return A.memoizedState=A.baseState=N,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:N},A.queue=c,c=c.dispatch=sg.bind(null,yi,c),[A.memoizedState,c]},useRef:function(c){var p=ps();return c={current:c},p.memoizedState=c},useState:function(c){c=$h(c);var p=c.queue,b=Ja.bind(null,yi,p);return p.dispatch=b,[c.memoizedState,b]},useDebugValue:ud,useDeferredValue:function(c,p){var b=ps();return Ia(b,c,p)},useTransition:function(){var c=$h(!1);return c=rg.bind(null,yi,c.queue,!0,!1),ps().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,p,b){var A=yi,N=ps();if(nn){if(b===void 0)throw Error(i(407));b=b()}else{if(b=p(),lo===null)throw Error(i(349));(gr&127)!==0||Zl(A,p,b)}N.memoizedState=b;var V={value:b,getSnapshot:p};return N.queue=V,Jy(Ky.bind(null,A,V,c),[c]),A.flags|=2048,Xa(9,{destroy:void 0},ad.bind(null,A,V,b,p),null),b},useId:function(){var c=ps(),p=lo.identifierPrefix;if(nn){var b=Ss,A=os;b=(A&~(1<<32-fr(A)-1)).toString(32)+b,p="_"+p+"R_"+b,b=ta++,0<b&&(p+="H"+b.toString(32)),p+="_"}else b=Bd++,p="_"+p+"r_"+b.toString(32)+"_";return c.memoizedState=p},useHostTransitionStatus:tv,useFormState:Zy,useActionState:Zy,useOptimistic:function(c){var p=ps();p.memoizedState=p.baseState=c;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=b,p=$d.bind(null,yi,!0,b),b.dispatch=p,[c,p]},useMemoCache:zm,useCacheRefresh:function(){return ps().memoizedState=Wh.bind(null,yi)},useEffectEvent:function(c){var p=ps(),b={impl:c};return p.memoizedState=b,function(){if((Lr&2)!==0)throw Error(i(440));return b.impl.apply(void 0,arguments)}}},qm={readContext:qi,use:Hh,useCallback:ig,useContext:qi,useEffect:ld,useImperativeHandle:ya,useInsertionEffect:Qy,useLayoutEffect:Hm,useMemo:Ma,useReducer:Yi,useRef:Xy,useState:function(){return Yi(Yu)},useDebugValue:ud,useDeferredValue:function(c,p){var b=ao();return T0(b,or.memoizedState,c,p)},useTransition:function(){var c=Yi(Yu)[0],p=ao().memoizedState;return[typeof c=="boolean"?c:sd(c),p]},useSyncExternalStore:yl,useId:og,useHostTransitionStatus:tv,useFormState:eg,useActionState:eg,useOptimistic:function(c,p){var b=ao();return Oo(b,or,c,p)},useMemoCache:zm,useCacheRefresh:Vd};qm.useEffectEvent=ng;var $f={readContext:qi,use:Hh,useCallback:ig,useContext:qi,useEffect:ld,useImperativeHandle:ya,useInsertionEffect:Qy,useLayoutEffect:Hm,useMemo:Ma,useReducer:jd,useRef:Xy,useState:function(){return jd(Yu)},useDebugValue:ud,useDeferredValue:function(c,p){var b=ao();return or===null?Ia(b,c,p):T0(b,or.memoizedState,c,p)},useTransition:function(){var c=jd(Yu)[0],p=ao().memoizedState;return[typeof c=="boolean"?c:sd(c),p]},useSyncExternalStore:yl,useId:og,useHostTransitionStatus:tv,useFormState:Gm,useActionState:Gm,useOptimistic:function(c,p){var b=ao();return or!==null?Oo(b,or,c,p):(b.baseState=c,[c,b.queue.dispatch])},useMemoCache:zm,useCacheRefresh:Vd};$f.useEffectEvent=ng;function lg(c,p,b,A){p=c.memoizedState,b=b(A,p),b=b==null?p:v({},p,b),c.memoizedState=b,c.lanes===0&&(c.updateQueue.baseState=b)}var Xu={enqueueSetState:function(c,p,b){c=c._reactInternals;var A=Ql(),N=hn(A);N.payload=p,b!=null&&(N.callback=b),p=kn(c,N,A),p!==null&&(Oa(p,c,A),ci(p,c,A))},enqueueReplaceState:function(c,p,b){c=c._reactInternals;var A=Ql(),N=hn(A);N.tag=1,N.payload=p,b!=null&&(N.callback=b),p=kn(c,N,A),p!==null&&(Oa(p,c,A),ci(p,c,A))},enqueueForceUpdate:function(c,p){c=c._reactInternals;var b=Ql(),A=hn(b);A.tag=2,p!=null&&(A.callback=p),p=kn(c,A,b),p!==null&&(Oa(p,c,b),ci(p,c,b))}};function Wf(c,p,b,A,N,V,se){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(A,V,se):p.prototype&&p.prototype.isPureReactComponent?!rr(b,A)||!rr(N,V):!0}function nv(c,p,b,A){c=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(b,A),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(b,A),p.state!==c&&Xu.enqueueReplaceState(p,p.state,null)}function Qa(c,p){var b=p;if("ref"in p){b={};for(var A in p)A!=="ref"&&(b[A]=p[A])}if(c=c.defaultProps){b===p&&(b=v({},b));for(var N in c)b[N]===void 0&&(b[N]=c[N])}return b}function iv(c){pu(c)}function rv(c){console.error(c)}function P0(c){pu(c)}function ug(c,p){try{var b=c.onUncaughtError;b(p.value,{componentStack:p.stack})}catch(A){setTimeout(function(){throw A})}}function D0(c,p,b){try{var A=c.onCaughtError;A(b.value,{componentStack:b.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(N){setTimeout(function(){throw N})}}function cg(c,p,b){return b=hn(b),b.tag=3,b.payload={element:null},b.callback=function(){ug(c,p)},b}function Rc(c){return c=hn(c),c.tag=3,c}function dd(c,p,b,A){var N=b.type.getDerivedStateFromError;if(typeof N=="function"){var V=A.value;c.payload=function(){return N(V)},c.callback=function(){D0(p,b,A)}}var se=b.stateNode;se!==null&&typeof se.componentDidCatch=="function"&&(c.callback=function(){D0(p,b,A),typeof N!="function"&&(md===null?md=new Set([this]):md.add(this));var Ae=A.stack;this.componentDidCatch(A.value,{componentStack:Ae!==null?Ae:""})})}function ov(c,p,b,A,N){if(b.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){if(p=b.alternate,p!==null&&Nd(p,b,N,!0),b=eo.current,b!==null){switch(b.tag){case 31:case 13:return to===null?ey():b.alternate===null&&Ao===0&&(Ao=3),b.flags&=-257,b.flags|=65536,b.lanes=N,A===ae?b.flags|=16384:(p=b.updateQueue,p===null?b.updateQueue=new Set([A]):p.add(A),oy(c,A,N)),!1;case 22:return b.flags|=65536,A===ae?b.flags|=16384:(p=b.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([A])},b.updateQueue=p):(b=p.retryQueue,b===null?p.retryQueue=new Set([A]):b.add(A)),oy(c,A,N)),!1}throw Error(i(435,b.tag))}return oy(c,A,N),ey(),!1}if(nn)return p=eo.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=N,A!==zf&&(c=Error(i(422),{cause:A}),yu(fa(c,b)))):(A!==zf&&(p=Error(i(423),{cause:A}),yu(fa(p,b))),c=c.current.alternate,c.flags|=65536,N&=-N,c.lanes|=N,A=fa(A,b),N=cg(c.stateNode,A,N),xn(c,N),Ao!==4&&(Ao=2)),!1;var V=Error(i(520),{cause:A});if(V=fa(V,b),rp===null?rp=[V]:rp.push(V),Ao!==4&&(Ao=2),p===null)return!0;A=fa(A,b),b=p;do{switch(b.tag){case 3:return b.flags|=65536,c=N&-N,b.lanes|=c,c=cg(b.stateNode,A,c),xn(b,c),!1;case 1:if(p=b.type,V=b.stateNode,(b.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(md===null||!md.has(V))))return b.flags|=65536,N&=-N,b.lanes|=N,N=Rc(N),dd(N,c,b,A),xn(b,N),!1}b=b.return}while(b!==null);return!1}var mo=Error(i(461)),So=!1;function Yo(c,p,b,A){p.child=c===null?un(p,null,b,A):jt(p,c.child,b,A)}function vi(c,p,b,A,N){b=b.render;var V=p.ref;if("ref"in A){var se={};for(var Ae in A)Ae!=="ref"&&(se[Ae]=A[Ae])}else se=A;return hs(p),A=Gf(c,p,b,se,V,N),Ae=od(),c!==null&&!So?(Sc(c,p,N),Qu(c,p,N)):(nn&&Ae&&$u(p),p.flags|=1,Yo(c,p,A,N),p.child)}function Ud(c,p,b,A,N){if(c===null){var V=b.type;return typeof V=="function"&&!Ul(V)&&V.defaultProps===void 0&&b.compare===null?(p.tag=15,p.type=V,qd(c,p,V,A,N)):(c=zd(b.type,null,A,p,p.mode,N),c.ref=p.ref,c.return=p,p.child=c)}if(V=c.child,!pg(c,N)){var se=V.memoizedProps;if(b=b.compare,b=b!==null?b:rr,b(se,A)&&c.ref===p.ref)return Qu(c,p,N)}return p.flags|=1,c=ha(V,A),c.ref=p.ref,c.return=p,p.child=c}function qd(c,p,b,A,N){if(c!==null){var V=c.memoizedProps;if(rr(V,A)&&c.ref===p.ref)if(So=!1,p.pendingProps=A=V,pg(c,N))(c.flags&131072)!==0&&(So=!0);else return p.lanes=c.lanes,Qu(c,p,N)}return dg(c,p,b,A,N)}function hd(c,p,b,A){var N=A.children,V=c!==null?c.memoizedState:null;if(c===null&&p.stateNode===null&&(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),A.mode==="hidden"){if((p.flags&128)!==0){if(V=V!==null?V.baseLanes|b:b,c!==null){for(A=p.child=c.child,N=0;A!==null;)N=N|A.lanes|A.childLanes,A=A.sibling;A=N&~V}else A=0,p.child=null;return Kd(c,p,V,b,A)}if((b&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},c!==null&&P(p,V!==null?V.cachePool:null),V!==null?Za(p,V):Zi(),id(p);else return A=p.lanes=536870912,Kd(c,p,V!==null?V.baseLanes|b:b,b,A)}else V!==null?(P(p,V.cachePool),Za(p,V),pa(),p.memoizedState=null):(c!==null&&P(p,null),Zi(),pa());return Yo(c,p,N,b),p.child}function Uf(c,p){return c!==null&&c.tag===22||p.stateNode!==null||(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.sibling}function Kd(c,p,b,A,N){var V=S();return V=V===null?null:{parent:_o._currentValue,pool:V},p.memoizedState={baseLanes:b,cachePool:V},c!==null&&P(p,null),Zi(),id(p),c!==null&&Nd(c,p,A,!0),p.childLanes=N,null}function qh(c,p){return p=fg({mode:p.mode,children:p.children},c.mode),p.ref=c.ref,c.child=p,p.return=c,p}function Hs(c,p,b){return jt(p,c.child,null,b),c=qh(p,p.pendingProps),c.flags|=2,fs(p),p.memoizedState=null,c}function sv(c,p,b){var A=p.pendingProps,N=(p.flags&128)!==0;if(p.flags&=-129,c===null){if(nn){if(A.mode==="hidden")return c=qh(p,A),p.lanes=536870912,Uf(null,c);if(Da(p),(c=tr)?(c=It(c,ka),c=c!==null&&c.data==="&"?c:null,c!==null&&(p.memoizedState={dehydrated:c,treeContext:ql!==null?{id:os,overflow:Ss}:null,retryLane:536870912,hydrationErrors:null},b=Hu(c),b.return=p,p.child=b,po=p,tr=null)):c=null,c===null)throw Ka(p);return p.lanes=536870912,null}return qh(p,A)}var V=c.memoizedState;if(V!==null){var se=V.dehydrated;if(Da(p),N)if(p.flags&256)p.flags&=-257,p=Hs(c,p,b);else if(p.memoizedState!==null)p.child=c.child,p.flags|=128,p=null;else throw Error(i(558));else if(So||Nd(c,p,b,!1),N=(b&c.childLanes)!==0,So||N){if(A=lo,A!==null&&(se=Zt(A,b),se!==0&&se!==V.retryLane))throw V.retryLane=se,gl(c,se),Oa(A,c,se),mo;ey(),p=Hs(c,p,b)}else c=V.treeContext,tr=vn(se.nextSibling),po=p,nn=!0,Kl=null,ka=!1,c!==null&&wc(p,c),p=qh(p,A),p.flags|=4096;return p}return c=ha(c.child,{mode:A.mode,children:A.children}),c.ref=p.ref,p.child=c,c.return=p,c}function qf(c,p){var b=p.ref;if(b===null)c!==null&&c.ref!==null&&(p.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(i(284));(c===null||c.ref!==b)&&(p.flags|=4194816)}}function dg(c,p,b,A,N){return hs(p),b=Gf(c,p,b,A,void 0,N),A=od(),c!==null&&!So?(Sc(c,p,N),Qu(c,p,N)):(nn&&A&&$u(p),p.flags|=1,Yo(c,p,b,N),p.child)}function av(c,p,b,A,N,V){return hs(p),p.updateQueue=null,b=ml(p,A,b,N),jf(c),A=od(),c!==null&&!So?(Sc(c,p,V),Qu(c,p,V)):(nn&&A&&$u(p),p.flags|=1,Yo(c,p,b,V),p.child)}function lv(c,p,b,A,N){if(hs(p),p.stateNode===null){var V=Bs,se=b.contextType;typeof se=="object"&&se!==null&&(V=qi(se)),V=new b(A,V),p.memoizedState=V.state!==null&&V.state!==void 0?V.state:null,V.updater=Xu,p.stateNode=V,V._reactInternals=p,V=p.stateNode,V.props=A,V.state=p.memoizedState,V.refs={},En(p),se=b.contextType,V.context=typeof se=="object"&&se!==null?qi(se):Bs,V.state=p.memoizedState,se=b.getDerivedStateFromProps,typeof se=="function"&&(lg(p,b,se,A),V.state=p.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof V.getSnapshotBeforeUpdate=="function"||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(se=V.state,typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount(),se!==V.state&&Xu.enqueueReplaceState(V,V.state,null),kr(p,A,V,N),oi(),V.state=p.memoizedState),typeof V.componentDidMount=="function"&&(p.flags|=4194308),A=!0}else if(c===null){V=p.stateNode;var Ae=p.memoizedProps,Xe=Qa(b,Ae);V.props=Xe;var At=V.context,Kt=b.contextType;se=Bs,typeof Kt=="object"&&Kt!==null&&(se=qi(Kt));var tn=b.getDerivedStateFromProps;Kt=typeof tn=="function"||typeof V.getSnapshotBeforeUpdate=="function",Ae=p.pendingProps!==Ae,Kt||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(Ae||At!==se)&&nv(p,V,A,se),gn=!1;var Dt=p.memoizedState;V.state=Dt,kr(p,A,V,N),oi(),At=p.memoizedState,Ae||Dt!==At||gn?(typeof tn=="function"&&(lg(p,b,tn,A),At=p.memoizedState),(Xe=gn||Wf(p,b,Xe,A,Dt,At,se))?(Kt||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(p.flags|=4194308)):(typeof V.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=A,p.memoizedState=At),V.props=A,V.state=At,V.context=se,A=Xe):(typeof V.componentDidMount=="function"&&(p.flags|=4194308),A=!1)}else{V=p.stateNode,bn(c,p),se=p.memoizedProps,Kt=Qa(b,se),V.props=Kt,tn=p.pendingProps,Dt=V.context,At=b.contextType,Xe=Bs,typeof At=="object"&&At!==null&&(Xe=qi(At)),Ae=b.getDerivedStateFromProps,(At=typeof Ae=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(se!==tn||Dt!==Xe)&&nv(p,V,A,Xe),gn=!1,Dt=p.memoizedState,V.state=Dt,kr(p,A,V,N),oi();var zt=p.memoizedState;se!==tn||Dt!==zt||gn||c!==null&&c.dependencies!==null&&Nf(c.dependencies)?(typeof Ae=="function"&&(lg(p,b,Ae,A),zt=p.memoizedState),(Kt=gn||Wf(p,b,Kt,A,Dt,zt,Xe)||c!==null&&c.dependencies!==null&&Nf(c.dependencies))?(At||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(A,zt,Xe),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(A,zt,Xe)),typeof V.componentDidUpdate=="function"&&(p.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof V.componentDidUpdate!="function"||se===c.memoizedProps&&Dt===c.memoizedState||(p.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||se===c.memoizedProps&&Dt===c.memoizedState||(p.flags|=1024),p.memoizedProps=A,p.memoizedState=zt),V.props=A,V.state=zt,V.context=Xe,A=Kt):(typeof V.componentDidUpdate!="function"||se===c.memoizedProps&&Dt===c.memoizedState||(p.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||se===c.memoizedProps&&Dt===c.memoizedState||(p.flags|=1024),A=!1)}return V=A,qf(c,p),A=(p.flags&128)!==0,V||A?(V=p.stateNode,b=A&&typeof b.getDerivedStateFromError!="function"?null:V.render(),p.flags|=1,c!==null&&A?(p.child=jt(p,c.child,null,N),p.child=jt(p,null,b,N)):Yo(c,p,b,N),p.memoizedState=V.state,c=p.child):c=Qu(c,p,N),c}function F0(c,p,b,A){return Se(),p.flags|=256,Yo(c,p,b,A),p.child}var uv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cv(c){return{baseLanes:c,cachePool:G()}}function Ju(c,p,b){return c=c!==null?c.childLanes&~b:0,p&&(c|=Cl),c}function Xo(c,p,b){var A=p.pendingProps,N=!1,V=(p.flags&128)!==0,se;if((se=V)||(se=c!==null&&c.memoizedState===null?!1:(_r.current&2)!==0),se&&(N=!0,p.flags&=-129),se=(p.flags&32)!==0,p.flags&=-33,c===null){if(nn){if(N?Go(p):pa(),(c=tr)?(c=It(c,ka),c=c!==null&&c.data!=="&"?c:null,c!==null&&(p.memoizedState={dehydrated:c,treeContext:ql!==null?{id:os,overflow:Ss}:null,retryLane:536870912,hydrationErrors:null},b=Hu(c),b.return=p,p.child=b,po=p,tr=null)):c=null,c===null)throw Ka(p);return Rn(c)?p.lanes=32:p.lanes=536870912,null}var Ae=A.children;return A=A.fallback,N?(pa(),N=p.mode,Ae=fg({mode:"hidden",children:Ae},N),A=Ua(A,N,b,null),Ae.return=p,A.return=p,Ae.sibling=A,p.child=Ae,A=p.child,A.memoizedState=cv(b),A.childLanes=Ju(c,se,b),p.memoizedState=uv,Uf(null,A)):(Go(p),hg(p,Ae))}var Xe=c.memoizedState;if(Xe!==null&&(Ae=Xe.dehydrated,Ae!==null)){if(V)p.flags&256?(Go(p),p.flags&=-257,p=Ac(c,p,b)):p.memoizedState!==null?(pa(),p.child=c.child,p.flags|=128,p=null):(pa(),Ae=A.fallback,N=p.mode,A=fg({mode:"visible",children:A.children},N),Ae=Ua(Ae,N,b,null),Ae.flags|=2,A.return=p,Ae.return=p,A.sibling=Ae,p.child=A,jt(p,c.child,null,b),A=p.child,A.memoizedState=cv(b),A.childLanes=Ju(c,se,b),p.memoizedState=uv,p=Uf(null,A));else if(Go(p),Rn(Ae)){if(se=Ae.nextSibling&&Ae.nextSibling.dataset,se)var At=se.dgst;se=At,A=Error(i(419)),A.stack="",A.digest=se,yu({value:A,source:null,stack:null}),p=Ac(c,p,b)}else if(So||Nd(c,p,b,!1),se=(b&c.childLanes)!==0,So||se){if(se=lo,se!==null&&(A=Zt(se,b),A!==0&&A!==Xe.retryLane))throw Xe.retryLane=A,gl(c,A),Oa(se,c,A),mo;rn(Ae)||ey(),p=Ac(c,p,b)}else rn(Ae)?(p.flags|=192,p.child=c.child,p=null):(c=Xe.treeContext,tr=vn(Ae.nextSibling),po=p,nn=!0,Kl=null,ka=!1,c!==null&&wc(p,c),p=hg(p,A.children),p.flags|=4096);return p}return N?(pa(),Ae=A.fallback,N=p.mode,Xe=c.child,At=Xe.sibling,A=ha(Xe,{mode:"hidden",children:A.children}),A.subtreeFlags=Xe.subtreeFlags&65011712,At!==null?Ae=ha(At,Ae):(Ae=Ua(Ae,N,b,null),Ae.flags|=2),Ae.return=p,A.return=p,A.sibling=Ae,p.child=A,Uf(null,A),A=p.child,Ae=c.child.memoizedState,Ae===null?Ae=cv(b):(N=Ae.cachePool,N!==null?(Xe=_o._currentValue,N=N.parent!==Xe?{parent:Xe,pool:Xe}:N):N=G(),Ae={baseLanes:Ae.baseLanes|b,cachePool:N}),A.memoizedState=Ae,A.childLanes=Ju(c,se,b),p.memoizedState=uv,Uf(c.child,A)):(Go(p),b=c.child,c=b.sibling,b=ha(b,{mode:"visible",children:A.children}),b.return=p,b.sibling=null,c!==null&&(se=p.deletions,se===null?(p.deletions=[c],p.flags|=16):se.push(c)),p.child=b,p.memoizedState=null,b)}function hg(c,p){return p=fg({mode:"visible",children:p},c.mode),p.return=c,c.child=p}function fg(c,p){return c=rs(22,c,null,p),c.lanes=0,c}function Ac(c,p,b){return jt(p,c.child,null,b),c=hg(p,p.pendingProps.children),c.flags|=2,p.memoizedState=null,c}function M0(c,p,b){c.lanes|=p;var A=c.alternate;A!==null&&(A.lanes|=p),Wu(c.return,p,b)}function dv(c,p,b,A,N,V){var se=c.memoizedState;se===null?c.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:A,tail:b,tailMode:N,treeForkCount:V}:(se.isBackwards=p,se.rendering=null,se.renderingStartTime=0,se.last=A,se.tail=b,se.tailMode=N,se.treeForkCount=V)}function Kf(c,p,b){var A=p.pendingProps,N=A.revealOrder,V=A.tail;A=A.children;var se=_r.current,Ae=(se&2)!==0;if(Ae?(se=se&1|2,p.flags|=128):se&=1,Oe(_r,se),Yo(c,p,A,b),A=nn?Ko:0,!Ae&&c!==null&&(c.flags&128)!==0)e:for(c=p.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&M0(c,b,p);else if(c.tag===19)M0(c,b,p);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===p)break e;for(;c.sibling===null;){if(c.return===null||c.return===p)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}switch(N){case"forwards":for(b=p.child,N=null;b!==null;)c=b.alternate,c!==null&&rd(c)===null&&(N=b),b=b.sibling;b=N,b===null?(N=p.child,p.child=null):(N=b.sibling,b.sibling=null),dv(p,!1,N,b,V,A);break;case"backwards":case"unstable_legacy-backwards":for(b=null,N=p.child,p.child=null;N!==null;){if(c=N.alternate,c!==null&&rd(c)===null){p.child=N;break}c=N.sibling,N.sibling=b,b=N,N=c}dv(p,!0,b,null,V,A);break;case"together":dv(p,!1,null,null,void 0,A);break;default:p.memoizedState=null}return p.child}function Qu(c,p,b){if(c!==null&&(p.dependencies=c.dependencies),Jd|=p.lanes,(b&p.childLanes)===0)if(c!==null){if(Nd(c,p,b,!1),(b&p.childLanes)===0)return null}else return null;if(c!==null&&p.child!==c.child)throw Error(i(153));if(p.child!==null){for(c=p.child,b=ha(c,c.pendingProps),p.child=b,b.return=p;c.sibling!==null;)c=c.sibling,b=b.sibling=ha(c,c.pendingProps),b.return=p;b.sibling=null}return p.child}function pg(c,p){return(c.lanes&p)!==0?!0:(c=c.dependencies,!!(c!==null&&Nf(c)))}function Ix(c,p,b){switch(p.tag){case 3:en(p,p.stateNode.containerInfo),bu(p,_o,c.memoizedState.cache),Se();break;case 27:case 5:Lt(p);break;case 4:en(p,p.stateNode.containerInfo);break;case 10:bu(p,p.type,p.memoizedProps.value);break;case 31:if(p.memoizedState!==null)return p.flags|=128,Da(p),null;break;case 13:var A=p.memoizedState;if(A!==null)return A.dehydrated!==null?(Go(p),p.flags|=128,null):(b&p.child.childLanes)!==0?Xo(c,p,b):(Go(p),c=Qu(c,p,b),c!==null?c.sibling:null);Go(p);break;case 19:var N=(c.flags&128)!==0;if(A=(b&p.childLanes)!==0,A||(Nd(c,p,b,!1),A=(b&p.childLanes)!==0),N){if(A)return Kf(c,p,b);p.flags|=128}if(N=p.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),Oe(_r,_r.current),A)break;return null;case 22:return p.lanes=0,hd(c,p,b,p.pendingProps);case 24:bu(p,_o,c.memoizedState.cache)}return Qu(c,p,b)}function I0(c,p,b){if(c!==null)if(c.memoizedProps!==p.pendingProps)So=!0;else{if(!pg(c,b)&&(p.flags&128)===0)return So=!1,Ix(c,p,b);So=(c.flags&131072)!==0}else So=!1,nn&&(p.flags&1048576)!==0&&Of(p,Ko,p.index);switch(p.lanes=0,p.tag){case 16:e:{var A=p.pendingProps;if(c=Ee(p.elementType),p.type=c,typeof c=="function")Ul(c)?(A=Qa(c,A),p.tag=1,p=lv(null,p,c,A,b)):(p.tag=0,p=dg(null,p,c,A,b));else{if(c!=null){var N=c.$$typeof;if(N===X){p.tag=11,p=vi(null,p,c,A,b);break e}else if(N===re){p.tag=14,p=Ud(null,p,c,A,b);break e}}throw p=Ie(c)||c,Error(i(306,p,""))}}return p;case 0:return dg(c,p,p.type,p.pendingProps,b);case 1:return A=p.type,N=Qa(A,p.pendingProps),lv(c,p,A,N,b);case 3:e:{if(en(p,p.stateNode.containerInfo),c===null)throw Error(i(387));A=p.pendingProps;var V=p.memoizedState;N=V.element,bn(c,p),kr(p,A,null,b);var se=p.memoizedState;if(A=se.cache,bu(p,_o,A),A!==V.cache&&Nh(p,[_o],b,!0),oi(),A=se.element,V.isDehydrated)if(V={element:A,isDehydrated:!1,cache:se.cache},p.updateQueue.baseState=V,p.memoizedState=V,p.flags&256){p=F0(c,p,A,b);break e}else if(A!==N){N=fa(Error(i(424)),p),yu(N),p=F0(c,p,A,b);break e}else{switch(c=p.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(tr=vn(c.firstChild),po=p,nn=!0,Kl=null,ka=!0,b=un(p,null,A,b),p.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling}else{if(Se(),A===N){p=Qu(c,p,b);break e}Yo(c,p,A,b)}p=p.child}return p;case 26:return qf(c,p),c===null?(b=qs(p.type,null,p.pendingProps,null))?p.memoizedState=b:nn||(b=p.type,c=p.pendingProps,A=E(Vt.current).createElement(b),A[Wn]=p,A[xi]=c,$s(A,b,c),Bo(A),p.stateNode=A):p.memoizedState=qs(p.type,c.memoizedProps,p.pendingProps,c.memoizedState),null;case 27:return Lt(p),c===null&&nn&&(A=p.stateNode=Mn(p.type,p.pendingProps,Vt.current),po=p,ka=!0,N=tr,we(p.type)?(_n=N,tr=vn(A.firstChild)):tr=N),Yo(c,p,p.pendingProps.children,b),qf(c,p),c===null&&(p.flags|=4194304),p.child;case 5:return c===null&&nn&&((N=A=tr)&&(A=Qe(A,p.type,p.pendingProps,ka),A!==null?(p.stateNode=A,po=p,tr=vn(A.firstChild),ka=!1,N=!0):N=!1),N||Ka(p)),Lt(p),N=p.type,V=p.pendingProps,se=c!==null?c.memoizedProps:null,A=V.children,B(N,V)?A=null:se!==null&&B(N,se)&&(p.flags|=32),p.memoizedState!==null&&(N=Gf(c,p,Om,null,null,b),af._currentValue=N),qf(c,p),Yo(c,p,A,b),p.child;case 6:return c===null&&nn&&((c=b=tr)&&(b=et(b,p.pendingProps,ka),b!==null?(p.stateNode=b,po=p,tr=null,c=!0):c=!1),c||Ka(p)),null;case 13:return Xo(c,p,b);case 4:return en(p,p.stateNode.containerInfo),A=p.pendingProps,c===null?p.child=jt(p,null,A,b):Yo(c,p,A,b),p.child;case 11:return vi(c,p,p.type,p.pendingProps,b);case 7:return Yo(c,p,p.pendingProps,b),p.child;case 8:return Yo(c,p,p.pendingProps.children,b),p.child;case 12:return Yo(c,p,p.pendingProps.children,b),p.child;case 10:return A=p.pendingProps,bu(p,p.type,A.value),Yo(c,p,A.children,b),p.child;case 9:return N=p.type._context,A=p.pendingProps.children,hs(p),N=qi(N),A=A(N),p.flags|=1,Yo(c,p,A,b),p.child;case 14:return Ud(c,p,p.type,p.pendingProps,b);case 15:return qd(c,p,p.type,p.pendingProps,b);case 19:return Kf(c,p,b);case 31:return sv(c,p,b);case 22:return hd(c,p,b,p.pendingProps);case 24:return hs(p),A=qi(_o),c===null?(N=S(),N===null&&(N=lo,V=ss(),N.pooledCache=V,V.refCount++,V!==null&&(N.pooledCacheLanes|=b),N=V),p.memoizedState={parent:A,cache:N},En(p),bu(p,_o,N)):((c.lanes&b)!==0&&(bn(c,p),kr(p,null,null,b),oi()),N=c.memoizedState,V=p.memoizedState,N.parent!==A?(N={parent:A,cache:A},p.memoizedState=N,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=N),bu(p,_o,A)):(A=V.cache,bu(p,_o,A),A!==N.cache&&Nh(p,[_o],b,!0))),Yo(c,p,p.pendingProps.children,b),p.child;case 29:throw p.pendingProps}throw Error(i(156,p.tag))}function fd(c){c.flags|=4}function hv(c,p,b,A,N){if((p=(c.mode&32)!==0)&&(p=!1),p){if(c.flags|=16777216,(N&335544128)===N)if(c.stateNode.complete)c.flags|=8192;else if(Ag())c.flags|=8192;else throw Fe=ae,K}else c.flags&=-16777217}function gg(c,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!Ds(p))if(Ag())c.flags|=8192;else throw Fe=ae,K}function pd(c,p){p!==null&&(c.flags|=4),c.flags&16384&&(p=c.tag!==22?Ne():536870912,c.lanes|=p,ip|=p)}function Kh(c,p){if(!nn)switch(c.tailMode){case"hidden":p=c.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?c.tail=null:b.sibling=null;break;case"collapsed":b=c.tail;for(var A=null;b!==null;)b.alternate!==null&&(A=b),b=b.sibling;A===null?p||c.tail===null?c.tail=null:c.tail.sibling=null:A.sibling=null}}function yo(c){var p=c.alternate!==null&&c.alternate.child===c.child,b=0,A=0;if(p)for(var N=c.child;N!==null;)b|=N.lanes|N.childLanes,A|=N.subtreeFlags&65011712,A|=N.flags&65011712,N.return=c,N=N.sibling;else for(N=c.child;N!==null;)b|=N.lanes|N.childLanes,A|=N.subtreeFlags,A|=N.flags,N.return=c,N=N.sibling;return c.subtreeFlags|=A,c.childLanes=b,p}function L0(c,p,b){var A=p.pendingProps;switch(xc(p),p.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yo(p),null;case 1:return yo(p),null;case 3:return b=p.stateNode,A=null,c!==null&&(A=c.memoizedState.cache),p.memoizedState.cache!==A&&(p.flags|=2048),xu(_o),it(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(c===null||c.child===null)&&(Oi(p)?fd(p):c===null||c.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,_c())),yo(p),null;case 26:var N=p.type,V=p.memoizedState;return c===null?(fd(p),V!==null?(yo(p),gg(p,V)):(yo(p),hv(p,N,null,A,b))):V?V!==c.memoizedState?(fd(p),yo(p),gg(p,V)):(yo(p),p.flags&=-16777217):(c=c.memoizedProps,c!==A&&fd(p),yo(p),hv(p,N,c,A,b)),null;case 27:if(St(p),b=Vt.current,N=p.type,c!==null&&p.stateNode!=null)c.memoizedProps!==A&&fd(p);else{if(!A){if(p.stateNode===null)throw Error(i(166));return yo(p),null}c=yt.current,Oi(p)?mu(p):(c=Mn(N,A,b),p.stateNode=c,fd(p))}return yo(p),null;case 5:if(St(p),N=p.type,c!==null&&p.stateNode!=null)c.memoizedProps!==A&&fd(p);else{if(!A){if(p.stateNode===null)throw Error(i(166));return yo(p),null}if(V=yt.current,Oi(p))mu(p);else{var se=E(Vt.current);switch(V){case 1:V=se.createElementNS("http://www.w3.org/2000/svg",N);break;case 2:V=se.createElementNS("http://www.w3.org/1998/Math/MathML",N);break;default:switch(N){case"svg":V=se.createElementNS("http://www.w3.org/2000/svg",N);break;case"math":V=se.createElementNS("http://www.w3.org/1998/Math/MathML",N);break;case"script":V=se.createElement("div"),V.innerHTML="<script><\/script>",V=V.removeChild(V.firstChild);break;case"select":V=typeof A.is=="string"?se.createElement("select",{is:A.is}):se.createElement("select"),A.multiple?V.multiple=!0:A.size&&(V.size=A.size);break;default:V=typeof A.is=="string"?se.createElement(N,{is:A.is}):se.createElement(N)}}V[Wn]=p,V[xi]=A;e:for(se=p.child;se!==null;){if(se.tag===5||se.tag===6)V.appendChild(se.stateNode);else if(se.tag!==4&&se.tag!==27&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===p)break e;for(;se.sibling===null;){if(se.return===null||se.return===p)break e;se=se.return}se.sibling.return=se.return,se=se.sibling}p.stateNode=V;e:switch($s(V,N,A),N){case"button":case"input":case"select":case"textarea":A=!!A.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&fd(p)}}return yo(p),hv(p,p.type,c===null?null:c.memoizedProps,p.pendingProps,b),null;case 6:if(c&&p.stateNode!=null)c.memoizedProps!==A&&fd(p);else{if(typeof A!="string"&&p.stateNode===null)throw Error(i(166));if(c=Vt.current,Oi(p)){if(c=p.stateNode,b=p.memoizedProps,A=null,N=po,N!==null)switch(N.tag){case 27:case 5:A=N.memoizedProps}c[Wn]=p,c=!!(c.nodeValue===b||A!==null&&A.suppressHydrationWarning===!0||fp(c.nodeValue,b)),c||Ka(p,!0)}else c=E(c).createTextNode(A),c[Wn]=p,p.stateNode=c}return yo(p),null;case 31:if(b=p.memoizedState,c===null||c.memoizedState!==null){if(A=Oi(p),b!==null){if(c===null){if(!A)throw Error(i(318));if(c=p.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(i(557));c[Wn]=p}else Se(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;yo(p),c=!1}else b=_c(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=b),c=!0;if(!c)return p.flags&256?(fs(p),p):(fs(p),null);if((p.flags&128)!==0)throw Error(i(558))}return yo(p),null;case 13:if(A=p.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(N=Oi(p),A!==null&&A.dehydrated!==null){if(c===null){if(!N)throw Error(i(318));if(N=p.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(i(317));N[Wn]=p}else Se(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;yo(p),N=!1}else N=_c(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=N),N=!0;if(!N)return p.flags&256?(fs(p),p):(fs(p),null)}return fs(p),(p.flags&128)!==0?(p.lanes=b,p):(b=A!==null,c=c!==null&&c.memoizedState!==null,b&&(A=p.child,N=null,A.alternate!==null&&A.alternate.memoizedState!==null&&A.alternate.memoizedState.cachePool!==null&&(N=A.alternate.memoizedState.cachePool.pool),V=null,A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(V=A.memoizedState.cachePool.pool),V!==N&&(A.flags|=2048)),b!==c&&b&&(p.child.flags|=8192),pd(p,p.updateQueue),yo(p),null);case 4:return it(),c===null&&Dv(p.stateNode.containerInfo),yo(p),null;case 10:return xu(p.type),yo(p),null;case 19:if(Le(_r),A=p.memoizedState,A===null)return yo(p),null;if(N=(p.flags&128)!==0,V=A.rendering,V===null)if(N)Kh(A,!1);else{if(Ao!==0||c!==null&&(c.flags&128)!==0)for(c=p.child;c!==null;){if(V=rd(c),V!==null){for(p.flags|=128,Kh(A,!1),c=V.updateQueue,p.updateQueue=c,pd(p,c),p.subtreeFlags=0,c=b,b=p.child;b!==null;)If(b,c),b=b.sibling;return Oe(_r,_r.current&1|2),nn&&qa(p,A.treeForkCount),p.child}c=c.sibling}A.tail!==null&&ri()>Jh&&(p.flags|=128,N=!0,Kh(A,!1),p.lanes=4194304)}else{if(!N)if(c=rd(V),c!==null){if(p.flags|=128,N=!0,c=c.updateQueue,p.updateQueue=c,pd(p,c),Kh(A,!0),A.tail===null&&A.tailMode==="hidden"&&!V.alternate&&!nn)return yo(p),null}else 2*ri()-A.renderingStartTime>Jh&&b!==536870912&&(p.flags|=128,N=!0,Kh(A,!1),p.lanes=4194304);A.isBackwards?(V.sibling=p.child,p.child=V):(c=A.last,c!==null?c.sibling=V:p.child=V,A.last=V)}return A.tail!==null?(c=A.tail,A.rendering=c,A.tail=c.sibling,A.renderingStartTime=ri(),c.sibling=null,b=_r.current,Oe(_r,N?b&1|2:b&1),nn&&qa(p,A.treeForkCount),c):(yo(p),null);case 22:case 23:return fs(p),Es(),A=p.memoizedState!==null,c!==null?c.memoizedState!==null!==A&&(p.flags|=8192):A&&(p.flags|=8192),A?(b&536870912)!==0&&(p.flags&128)===0&&(yo(p),p.subtreeFlags&6&&(p.flags|=8192)):yo(p),b=p.updateQueue,b!==null&&pd(p,b.retryQueue),b=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(b=c.memoizedState.cachePool.pool),A=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(A=p.memoizedState.cachePool.pool),A!==b&&(p.flags|=2048),c!==null&&Le(_),null;case 24:return b=null,c!==null&&(b=c.memoizedState.cache),p.memoizedState.cache!==b&&(p.flags|=2048),xu(_o),yo(p),null;case 25:return null;case 30:return null}throw Error(i(156,p.tag))}function Zf(c,p){switch(xc(p),p.tag){case 1:return c=p.flags,c&65536?(p.flags=c&-65537|128,p):null;case 3:return xu(_o),it(),c=p.flags,(c&65536)!==0&&(c&128)===0?(p.flags=c&-65537|128,p):null;case 26:case 27:case 5:return St(p),null;case 31:if(p.memoizedState!==null){if(fs(p),p.alternate===null)throw Error(i(340));Se()}return c=p.flags,c&65536?(p.flags=c&-65537|128,p):null;case 13:if(fs(p),c=p.memoizedState,c!==null&&c.dehydrated!==null){if(p.alternate===null)throw Error(i(340));Se()}return c=p.flags,c&65536?(p.flags=c&-65537|128,p):null;case 19:return Le(_r),null;case 4:return it(),null;case 10:return xu(p.type),null;case 22:case 23:return fs(p),Es(),c!==null&&Le(_),c=p.flags,c&65536?(p.flags=c&-65537|128,p):null;case 24:return xu(_o),null;case 25:return null;default:return null}}function Km(c,p){switch(xc(p),p.tag){case 3:xu(_o),it();break;case 26:case 27:case 5:St(p);break;case 4:it();break;case 31:p.memoizedState!==null&&fs(p);break;case 13:fs(p);break;case 19:Le(_r);break;case 10:xu(p.type);break;case 22:case 23:fs(p),Es(),c!==null&&Le(_);break;case 24:xu(_o)}}function Yf(c,p){try{var b=p.updateQueue,A=b!==null?b.lastEffect:null;if(A!==null){var N=A.next;b=N;do{if((b.tag&c)===c){A=void 0;var V=b.create,se=b.inst;A=V(),se.destroy=A}b=b.next}while(b!==N)}}catch(Ae){Wr(p,p.return,Ae)}}function Yl(c,p,b){try{var A=p.updateQueue,N=A!==null?A.lastEffect:null;if(N!==null){var V=N.next;A=V;do{if((A.tag&c)===c){var se=A.inst,Ae=se.destroy;if(Ae!==void 0){se.destroy=void 0,N=p;var Xe=b,At=Ae;try{At()}catch(Kt){Wr(N,Xe,Kt)}}}A=A.next}while(A!==V)}}catch(Kt){Wr(p,p.return,Kt)}}function Xf(c){var p=c.updateQueue;if(p!==null){var b=c.stateNode;try{Ki(p,b)}catch(A){Wr(c,c.return,A)}}}function fv(c,p,b){b.props=Qa(c.type,c.memoizedProps),b.state=c.memoizedState;try{b.componentWillUnmount()}catch(A){Wr(c,p,A)}}function vl(c,p){try{var b=c.ref;if(b!==null){switch(c.tag){case 26:case 27:case 5:var A=c.stateNode;break;case 30:A=c.stateNode;break;default:A=c.stateNode}typeof b=="function"?c.refCleanup=b(A):b.current=A}}catch(N){Wr(c,p,N)}}function La(c,p){var b=c.ref,A=c.refCleanup;if(b!==null)if(typeof A=="function")try{A()}catch(N){Wr(c,p,N)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(N){Wr(c,p,N)}else b.current=null}function O0(c){var p=c.type,b=c.memoizedProps,A=c.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":b.autoFocus&&A.focus();break e;case"img":b.src?A.src=b.src:b.srcSet&&(A.srcset=b.srcSet)}}catch(N){Wr(c,c.return,N)}}function Zm(c,p,b){try{var A=c.stateNode;Gx(A,c.type,b,p),A[xi]=p}catch(N){Wr(c,c.return,N)}}function z0(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&we(c.type)||c.tag===4}function Ym(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||z0(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&we(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function mg(c,p,b){var A=c.tag;if(A===5||A===6)c=c.stateNode,p?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(c,p):(p=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,p.appendChild(c),b=b._reactRootContainer,b!=null||p.onclick!==null||(p.onclick=Gt));else if(A!==4&&(A===27&&we(c.type)&&(b=c.stateNode,p=null),c=c.child,c!==null))for(mg(c,p,b),c=c.sibling;c!==null;)mg(c,p,b),c=c.sibling}function yg(c,p,b){var A=c.tag;if(A===5||A===6)c=c.stateNode,p?b.insertBefore(c,p):b.appendChild(c);else if(A!==4&&(A===27&&we(c.type)&&(b=c.stateNode),c=c.child,c!==null))for(yg(c,p,b),c=c.sibling;c!==null;)yg(c,p,b),c=c.sibling}function pv(c){var p=c.stateNode,b=c.memoizedProps;try{for(var A=c.type,N=p.attributes;N.length;)p.removeAttributeNode(N[0]);$s(p,A,b),p[Wn]=c,p[xi]=b}catch(V){Wr(c,c.return,V)}}var Tc=!1,As=!1,Jf=!1,N0=typeof WeakSet=="function"?WeakSet:Set,Vs=null;function Lx(c,p){if(c=c.containerInfo,g=hy,c=Qc(c),Df(c)){if("selectionStart"in c)var b={start:c.selectionStart,end:c.selectionEnd};else e:{b=(b=c.ownerDocument)&&b.defaultView||window;var A=b.getSelection&&b.getSelection();if(A&&A.rangeCount!==0){b=A.anchorNode;var N=A.anchorOffset,V=A.focusNode;A=A.focusOffset;try{b.nodeType,V.nodeType}catch{b=null;break e}var se=0,Ae=-1,Xe=-1,At=0,Kt=0,tn=c,Dt=null;t:for(;;){for(var zt;tn!==b||N!==0&&tn.nodeType!==3||(Ae=se+N),tn!==V||A!==0&&tn.nodeType!==3||(Xe=se+A),tn.nodeType===3&&(se+=tn.nodeValue.length),(zt=tn.firstChild)!==null;)Dt=tn,tn=zt;for(;;){if(tn===c)break t;if(Dt===b&&++At===N&&(Ae=se),Dt===V&&++Kt===A&&(Xe=se),(zt=tn.nextSibling)!==null)break;tn=Dt,Dt=tn.parentNode}tn=zt}b=Ae===-1||Xe===-1?null:{start:Ae,end:Xe}}else b=null}b=b||{start:0,end:0}}else b=null;for(x={focusedElem:c,selectionRange:b},hy=!1,Vs=p;Vs!==null;)if(p=Vs,c=p.child,(p.subtreeFlags&1028)!==0&&c!==null)c.return=p,Vs=c;else for(;Vs!==null;){switch(p=Vs,V=p.alternate,c=p.flags,p.tag){case 0:if((c&4)!==0&&(c=p.updateQueue,c=c!==null?c.events:null,c!==null))for(b=0;b<c.length;b++)N=c[b],N.ref.impl=N.nextImpl;break;case 11:case 15:break;case 1:if((c&1024)!==0&&V!==null){c=void 0,b=p,N=V.memoizedProps,V=V.memoizedState,A=b.stateNode;try{var ti=Qa(b.type,N);c=A.getSnapshotBeforeUpdate(ti,V),A.__reactInternalSnapshotBeforeUpdate=c}catch(Di){Wr(b,b.return,Di)}}break;case 3:if((c&1024)!==0){if(c=p.stateNode.containerInfo,b=c.nodeType,b===9)ht(c);else if(b===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":ht(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(i(163))}if(c=p.sibling,c!==null){c.return=p.return,Vs=c;break}Vs=p.return}}function gv(c,p,b){var A=b.flags;switch(b.tag){case 0:case 11:case 15:xl(c,b),A&4&&Yf(5,b);break;case 1:if(xl(c,b),A&4)if(c=b.stateNode,p===null)try{c.componentDidMount()}catch(se){Wr(b,b.return,se)}else{var N=Qa(b.type,p.memoizedProps);p=p.memoizedState;try{c.componentDidUpdate(N,p,c.__reactInternalSnapshotBeforeUpdate)}catch(se){Wr(b,b.return,se)}}A&64&&Xf(b),A&512&&vl(b,b.return);break;case 3:if(xl(c,b),A&64&&(c=b.updateQueue,c!==null)){if(p=null,b.child!==null)switch(b.child.tag){case 27:case 5:p=b.child.stateNode;break;case 1:p=b.child.stateNode}try{Ki(c,p)}catch(se){Wr(b,b.return,se)}}break;case 27:p===null&&A&4&&pv(b);case 26:case 5:xl(c,b),p===null&&A&4&&O0(b),A&512&&vl(b,b.return);break;case 12:xl(c,b);break;case 31:xl(c,b),A&4&&Jo(c,b);break;case 13:xl(c,b),A&4&&yv(c,b),A&64&&(c=b.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(b=kg.bind(null,b),si(c,b))));break;case 22:if(A=b.memoizedState!==null||Tc,!A){p=p!==null&&p.memoizedState!==null||As,N=Tc;var V=As;Tc=A,(As=p)&&!V?Pc(c,b,(b.subtreeFlags&8772)!==0):xl(c,b),Tc=N,As=V}break;case 30:break;default:xl(c,b)}}function mv(c){var p=c.alternate;p!==null&&(c.alternate=null,mv(p)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(p=c.stateNode,p!==null&&No(p)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var Eo=null,bl=!1;function gd(c,p,b){for(b=b.child;b!==null;)Qf(c,p,b),b=b.sibling}function Qf(c,p,b){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(ln,b)}catch{}switch(b.tag){case 26:As||La(b,p),gd(c,p,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:As||La(b,p);var A=Eo,N=bl;we(b.type)&&(Eo=b.stateNode,bl=!1),gd(c,p,b),Nt(b.stateNode),Eo=A,bl=N;break;case 5:As||La(b,p);case 6:if(A=Eo,N=bl,Eo=null,gd(c,p,b),Eo=A,bl=N,Eo!==null)if(bl)try{(Eo.nodeType===9?Eo.body:Eo.nodeName==="HTML"?Eo.ownerDocument.body:Eo).removeChild(b.stateNode)}catch(V){Wr(b,p,V)}else try{Eo.removeChild(b.stateNode)}catch(V){Wr(b,p,V)}break;case 18:Eo!==null&&(bl?(c=Eo,Be(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,b.stateNode),yy(c)):Be(Eo,b.stateNode));break;case 4:A=Eo,N=bl,Eo=b.stateNode.containerInfo,bl=!0,gd(c,p,b),Eo=A,bl=N;break;case 0:case 11:case 14:case 15:Yl(2,b,p),As||Yl(4,b,p),gd(c,p,b);break;case 1:As||(La(b,p),A=b.stateNode,typeof A.componentWillUnmount=="function"&&fv(b,p,A)),gd(c,p,b);break;case 21:gd(c,p,b);break;case 22:As=(A=As)||b.memoizedState!==null,gd(c,p,b),As=A;break;default:gd(c,p,b)}}function Jo(c,p){if(p.memoizedState===null&&(c=p.alternate,c!==null&&(c=c.memoizedState,c!==null))){c=c.dehydrated;try{yy(c)}catch(b){Wr(p,p.return,b)}}}function yv(c,p){if(p.memoizedState===null&&(c=p.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{yy(c)}catch(b){Wr(p,p.return,b)}}function B0(c){switch(c.tag){case 31:case 13:case 19:var p=c.stateNode;return p===null&&(p=c.stateNode=new N0),p;case 22:return c=c.stateNode,p=c._retryCache,p===null&&(p=c._retryCache=new N0),p;default:throw Error(i(435,c.tag))}}function vg(c,p){var b=B0(c);p.forEach(function(A){if(!b.has(A)){b.add(A);var N=Bx.bind(null,c,A);A.then(N,N)}})}function Xi(c,p){var b=p.deletions;if(b!==null)for(var A=0;A<b.length;A++){var N=b[A],V=c,se=p,Ae=se;e:for(;Ae!==null;){switch(Ae.tag){case 27:if(we(Ae.type)){Eo=Ae.stateNode,bl=!1;break e}break;case 5:Eo=Ae.stateNode,bl=!1;break e;case 3:case 4:Eo=Ae.stateNode.containerInfo,bl=!0;break e}Ae=Ae.return}if(Eo===null)throw Error(i(160));Qf(V,se,N),Eo=null,bl=!1,V=N.alternate,V!==null&&(V.return=null),N.return=null}if(p.subtreeFlags&13886)for(p=p.child;p!==null;)vv(p,c),p=p.sibling}var Xl=null;function vv(c,p){var b=c.alternate,A=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:Xi(p,c),Ro(c),A&4&&(Yl(3,c,c.return),Yf(3,c),Yl(5,c,c.return));break;case 1:Xi(p,c),Ro(c),A&512&&(As||b===null||La(b,b.return)),A&64&&Tc&&(c=c.updateQueue,c!==null&&(A=c.callbacks,A!==null&&(b=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=b===null?A:b.concat(A))));break;case 26:var N=Xl;if(Xi(p,c),Ro(c),A&512&&(As||b===null||La(b,b.return)),A&4){var V=b!==null?b.memoizedState:null;if(A=c.memoizedState,b===null)if(A===null)if(c.stateNode===null){e:{A=c.type,b=c.memoizedProps,N=N.ownerDocument||N;t:switch(A){case"title":V=N.getElementsByTagName("title")[0],(!V||V[wr]||V[Wn]||V.namespaceURI==="http://www.w3.org/2000/svg"||V.hasAttribute("itemprop"))&&(V=N.createElement(A),N.head.insertBefore(V,N.querySelector("head > title"))),$s(V,A,b),V[Wn]=c,Bo(V),A=V;break e;case"link":var se=nc("link","href",N).get(A+(b.href||""));if(se){for(var Ae=0;Ae<se.length;Ae++)if(V=se[Ae],V.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&V.getAttribute("rel")===(b.rel==null?null:b.rel)&&V.getAttribute("title")===(b.title==null?null:b.title)&&V.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){se.splice(Ae,1);break t}}V=N.createElement(A),$s(V,A,b),N.head.appendChild(V);break;case"meta":if(se=nc("meta","content",N).get(A+(b.content||""))){for(Ae=0;Ae<se.length;Ae++)if(V=se[Ae],V.getAttribute("content")===(b.content==null?null:""+b.content)&&V.getAttribute("name")===(b.name==null?null:b.name)&&V.getAttribute("property")===(b.property==null?null:b.property)&&V.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&V.getAttribute("charset")===(b.charSet==null?null:b.charSet)){se.splice(Ae,1);break t}}V=N.createElement(A),$s(V,A,b),N.head.appendChild(V);break;default:throw Error(i(468,A))}V[Wn]=c,Bo(V),A=V}c.stateNode=A}else tu(N,c.type,c.stateNode);else c.stateNode=no(N,A,c.memoizedProps);else V!==A?(V===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):V.count--,A===null?tu(N,c.type,c.stateNode):no(N,A,c.memoizedProps)):A===null&&c.stateNode!==null&&Zm(c,c.memoizedProps,b.memoizedProps)}break;case 27:Xi(p,c),Ro(c),A&512&&(As||b===null||La(b,b.return)),b!==null&&A&4&&Zm(c,c.memoizedProps,b.memoizedProps);break;case 5:if(Xi(p,c),Ro(c),A&512&&(As||b===null||La(b,b.return)),c.flags&32){N=c.stateNode;try{We(N,"")}catch(ti){Wr(c,c.return,ti)}}A&4&&c.stateNode!=null&&(N=c.memoizedProps,Zm(c,N,b!==null?b.memoizedProps:N)),A&1024&&(Jf=!0);break;case 6:if(Xi(p,c),Ro(c),A&4){if(c.stateNode===null)throw Error(i(162));A=c.memoizedProps,b=c.stateNode;try{b.nodeValue=A}catch(ti){Wr(c,c.return,ti)}}break;case 3:if(Sl=null,N=Xl,Xl=di(p.containerInfo),Xi(p,c),Xl=N,Ro(c),A&4&&b!==null&&b.memoizedState.isDehydrated)try{yy(p.containerInfo)}catch(ti){Wr(c,c.return,ti)}Jf&&(Jf=!1,kc(c));break;case 4:A=Xl,Xl=di(c.stateNode.containerInfo),Xi(p,c),Ro(c),Xl=A;break;case 12:Xi(p,c),Ro(c);break;case 31:Xi(p,c),Ro(c),A&4&&(A=c.updateQueue,A!==null&&(c.updateQueue=null,vg(c,A)));break;case 13:Xi(p,c),Ro(c),c.child.flags&8192&&c.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(Xh=ri()),A&4&&(A=c.updateQueue,A!==null&&(c.updateQueue=null,vg(c,A)));break;case 22:N=c.memoizedState!==null;var Xe=b!==null&&b.memoizedState!==null,At=Tc,Kt=As;if(Tc=At||N,As=Kt||Xe,Xi(p,c),As=Kt,Tc=At,Ro(c),A&8192)e:for(p=c.stateNode,p._visibility=N?p._visibility&-2:p._visibility|1,N&&(b===null||Xe||Tc||As||Zd(c)),b=null,p=c;;){if(p.tag===5||p.tag===26){if(b===null){Xe=b=p;try{if(V=Xe.stateNode,N)se=V.style,typeof se.setProperty=="function"?se.setProperty("display","none","important"):se.display="none";else{Ae=Xe.stateNode;var tn=Xe.memoizedProps.style,Dt=tn!=null&&tn.hasOwnProperty("display")?tn.display:null;Ae.style.display=Dt==null||typeof Dt=="boolean"?"":(""+Dt).trim()}}catch(ti){Wr(Xe,Xe.return,ti)}}}else if(p.tag===6){if(b===null){Xe=p;try{Xe.stateNode.nodeValue=N?"":Xe.memoizedProps}catch(ti){Wr(Xe,Xe.return,ti)}}}else if(p.tag===18){if(b===null){Xe=p;try{var zt=Xe.stateNode;N?He(zt,!0):He(Xe.stateNode,!1)}catch(ti){Wr(Xe,Xe.return,ti)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===c)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===c)break e;for(;p.sibling===null;){if(p.return===null||p.return===c)break e;b===p&&(b=null),p=p.return}b===p&&(b=null),p.sibling.return=p.return,p=p.sibling}A&4&&(A=c.updateQueue,A!==null&&(b=A.retryQueue,b!==null&&(A.retryQueue=null,vg(c,b))));break;case 19:Xi(p,c),Ro(c),A&4&&(A=c.updateQueue,A!==null&&(c.updateQueue=null,vg(c,A)));break;case 30:break;case 21:break;default:Xi(p,c),Ro(c)}}function Ro(c){var p=c.flags;if(p&2){try{for(var b,A=c.return;A!==null;){if(z0(A)){b=A;break}A=A.return}if(b==null)throw Error(i(160));switch(b.tag){case 27:var N=b.stateNode,V=Ym(c);yg(c,V,N);break;case 5:var se=b.stateNode;b.flags&32&&(We(se,""),b.flags&=-33);var Ae=Ym(c);yg(c,Ae,se);break;case 3:case 4:var Xe=b.stateNode.containerInfo,At=Ym(c);mg(c,At,Xe);break;default:throw Error(i(161))}}catch(Kt){Wr(c,c.return,Kt)}c.flags&=-3}p&4096&&(c.flags&=-4097)}function kc(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var p=c;kc(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),c=c.sibling}}function xl(c,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)gv(c,p.alternate,p),p=p.sibling}function Zd(c){for(c=c.child;c!==null;){var p=c;switch(p.tag){case 0:case 11:case 14:case 15:Yl(4,p,p.return),Zd(p);break;case 1:La(p,p.return);var b=p.stateNode;typeof b.componentWillUnmount=="function"&&fv(p,p.return,b),Zd(p);break;case 27:Nt(p.stateNode);case 26:case 5:La(p,p.return),Zd(p);break;case 22:p.memoizedState===null&&Zd(p);break;case 30:Zd(p);break;default:Zd(p)}c=c.sibling}}function Pc(c,p,b){for(b=b&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var A=p.alternate,N=c,V=p,se=V.flags;switch(V.tag){case 0:case 11:case 15:Pc(N,V,b),Yf(4,V);break;case 1:if(Pc(N,V,b),A=V,N=A.stateNode,typeof N.componentDidMount=="function")try{N.componentDidMount()}catch(At){Wr(A,A.return,At)}if(A=V,N=A.updateQueue,N!==null){var Ae=A.stateNode;try{var Xe=N.shared.hiddenCallbacks;if(Xe!==null)for(N.shared.hiddenCallbacks=null,N=0;N<Xe.length;N++)gi(Xe[N],Ae)}catch(At){Wr(A,A.return,At)}}b&&se&64&&Xf(V),vl(V,V.return);break;case 27:pv(V);case 26:case 5:Pc(N,V,b),b&&A===null&&se&4&&O0(V),vl(V,V.return);break;case 12:Pc(N,V,b);break;case 31:Pc(N,V,b),b&&se&4&&Jo(N,V);break;case 13:Pc(N,V,b),b&&se&4&&yv(N,V);break;case 22:V.memoizedState===null&&Pc(N,V,b),vl(V,V.return);break;case 30:break;default:Pc(N,V,b)}p=p.sibling}}function bv(c,p){var b=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(b=c.memoizedState.cachePool.pool),c=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(c=p.memoizedState.cachePool.pool),c!==b&&(c!=null&&c.refCount++,b!=null&&Uu(b))}function xv(c,p){c=null,p.alternate!==null&&(c=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==c&&(p.refCount++,c!=null&&Uu(c))}function ec(c,p,b,A){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)G0(c,p,b,A),p=p.sibling}function G0(c,p,b,A){var N=p.flags;switch(p.tag){case 0:case 11:case 15:ec(c,p,b,A),N&2048&&Yf(9,p);break;case 1:ec(c,p,b,A);break;case 3:ec(c,p,b,A),N&2048&&(c=null,p.alternate!==null&&(c=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==c&&(p.refCount++,c!=null&&Uu(c)));break;case 12:if(N&2048){ec(c,p,b,A),c=p.stateNode;try{var V=p.memoizedProps,se=V.id,Ae=V.onPostCommit;typeof Ae=="function"&&Ae(se,p.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(Xe){Wr(p,p.return,Xe)}}else ec(c,p,b,A);break;case 31:ec(c,p,b,A);break;case 13:ec(c,p,b,A);break;case 23:break;case 22:V=p.stateNode,se=p.alternate,p.memoizedState!==null?V._visibility&2?ec(c,p,b,A):bg(c,p):V._visibility&2?ec(c,p,b,A):(V._visibility|=2,Yd(c,p,b,A,(p.subtreeFlags&10256)!==0||!1)),N&2048&&bv(se,p);break;case 24:ec(c,p,b,A),N&2048&&xv(p.alternate,p);break;default:ec(c,p,b,A)}}function Yd(c,p,b,A,N){for(N=N&&((p.subtreeFlags&10256)!==0||!1),p=p.child;p!==null;){var V=c,se=p,Ae=b,Xe=A,At=se.flags;switch(se.tag){case 0:case 11:case 15:Yd(V,se,Ae,Xe,N),Yf(8,se);break;case 23:break;case 22:var Kt=se.stateNode;se.memoizedState!==null?Kt._visibility&2?Yd(V,se,Ae,Xe,N):bg(V,se):(Kt._visibility|=2,Yd(V,se,Ae,Xe,N)),N&&At&2048&&bv(se.alternate,se);break;case 24:Yd(V,se,Ae,Xe,N),N&&At&2048&&xv(se.alternate,se);break;default:Yd(V,se,Ae,Xe,N)}p=p.sibling}}function bg(c,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var b=c,A=p,N=A.flags;switch(A.tag){case 22:bg(b,A),N&2048&&bv(A.alternate,A);break;case 24:bg(b,A),N&2048&&xv(A.alternate,A);break;default:bg(b,A)}p=p.sibling}}var xg=8192;function ep(c,p,b){if(c.subtreeFlags&xg)for(c=c.child;c!==null;)wg(c,p,b),c=c.sibling}function wg(c,p,b){switch(c.tag){case 26:ep(c,p,b),c.flags&xg&&c.memoizedState!==null&&El(b,Xl,c.memoizedState,c.memoizedProps);break;case 5:ep(c,p,b);break;case 3:case 4:var A=Xl;Xl=di(c.stateNode.containerInfo),ep(c,p,b),Xl=A;break;case 22:c.memoizedState===null&&(A=c.alternate,A!==null&&A.memoizedState!==null?(A=xg,xg=16777216,ep(c,p,b),xg=A):ep(c,p,b));break;default:ep(c,p,b)}}function Zh(c){var p=c.alternate;if(p!==null&&(c=p.child,c!==null)){p.child=null;do p=c.sibling,c.sibling=null,c=p;while(c!==null)}}function tp(c){var p=c.deletions;if((c.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var A=p[b];Vs=A,j0(A,c)}Zh(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)Xm(c),c=c.sibling}function Xm(c){switch(c.tag){case 0:case 11:case 15:tp(c),c.flags&2048&&Yl(9,c,c.return);break;case 3:tp(c);break;case 12:tp(c);break;case 22:var p=c.stateNode;c.memoizedState!==null&&p._visibility&2&&(c.return===null||c.return.tag!==13)?(p._visibility&=-3,np(c)):tp(c);break;default:tp(c)}}function np(c){var p=c.deletions;if((c.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var A=p[b];Vs=A,j0(A,c)}Zh(c)}for(c=c.child;c!==null;){switch(p=c,p.tag){case 0:case 11:case 15:Yl(8,p,p.return),np(p);break;case 22:b=p.stateNode,b._visibility&2&&(b._visibility&=-3,np(p));break;default:np(p)}c=c.sibling}}function j0(c,p){for(;Vs!==null;){var b=Vs;switch(b.tag){case 0:case 11:case 15:Yl(8,b,p);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var A=b.memoizedState.cachePool.pool;A!=null&&A.refCount++}break;case 24:Uu(b.memoizedState.cache)}if(A=b.child,A!==null)A.return=b,Vs=A;else e:for(b=c;Vs!==null;){A=Vs;var N=A.sibling,V=A.return;if(mv(A),A===b){Vs=null;break e}if(N!==null){N.return=V,Vs=N;break e}Vs=V}}}var Ox={getCacheForType:function(c){var p=qi(_o),b=p.data.get(c);return b===void 0&&(b=c(),p.data.set(c,b)),b},cacheSignal:function(){return qi(_o).controller.signal}},zx=typeof WeakMap=="function"?WeakMap:Map,Lr=0,lo=null,Ei=null,gr=0,$r=0,Ts=null,_u=!1,Dc=!1,Xd=!1,wl=0,Ao=0,Jd=0,Yh=0,Jm=0,Cl=0,ip=0,rp=null,el=null,Cg=!1,Xh=0,H0=0,Jh=1/0,_g=null,md=null,Qo=0,va=null,Jl=null,Fc=0,Sg=0,wv=null,V0=null,Qd=0,Eg=null;function Ql(){return(Lr&2)!==0&&gr!==0?gr&-gr:fe.T!==null?za():$n()}function Qm(){if(Cl===0)if((gr&536870912)===0||nn){var c=Ys;Ys<<=1,(Ys&3932160)===0&&(Ys=262144),Cl=c}else Cl=536870912;return c=eo.current,c!==null&&(c.flags|=32),Cl}function Oa(c,p,b){(c===lo&&($r===2||$r===9)||c.cancelPendingCommit!==null)&&(ef(c,0),tc(c,gr,Cl,!1)),nt(c,b),((Lr&2)===0||c!==lo)&&(c===lo&&((Lr&2)===0&&(Yh|=b),Ao===4&&tc(c,gr,Cl,!1)),Mc(c))}function Qh(c,p,b){if((Lr&6)!==0)throw Error(i(327));var A=!b&&(p&127)===0&&(p&c.expiredLanes)===0||ge(c,p),N=A?Rv(c,p):Ev(c,p,!0),V=A;do{if(N===0){Dc&&!A&&tc(c,p,0,!1);break}else{if(b=c.current.alternate,V&&!_v(b)){N=Ev(c,p,!1),V=!1;continue}if(N===2){if(V=p,c.errorRecoveryDisabledLanes&V)var se=0;else se=c.pendingLanes&-536870913,se=se!==0?se:se&536870912?536870912:0;if(se!==0){p=se;e:{var Ae=c;N=rp;var Xe=Ae.current.memoizedState.isDehydrated;if(Xe&&(ef(Ae,se).flags|=256),se=Ev(Ae,se,!1),se!==2){if(Xd&&!Xe){Ae.errorRecoveryDisabledLanes|=V,Yh|=V,N=4;break e}V=el,el=N,V!==null&&(el===null?el=V:el.push.apply(el,V))}N=se}if(V=!1,N!==2)continue}}if(N===1){ef(c,0),tc(c,p,0,!0);break}e:{switch(A=c,V=N,V){case 0:case 1:throw Error(i(345));case 4:if((p&4194048)!==p)break;case 6:tc(A,p,Cl,!_u);break e;case 2:el=null;break;case 3:case 5:break;default:throw Error(i(329))}if((p&62914560)===p&&(N=Xh+300-ri(),10<N)){if(tc(A,p,Cl,!_u),pe(A,0,!0)!==0)break e;Fc=p,A.timeoutHandle=ee(Cv.bind(null,A,b,el,_g,Cg,p,Cl,Yh,ip,_u,V,"Throttled",-0,0),N);break e}Cv(A,b,el,_g,Cg,p,Cl,Yh,ip,_u,V,null,-0,0)}}break}while(!0);Mc(c)}function Cv(c,p,b,A,N,V,se,Ae,Xe,At,Kt,tn,Dt,zt){if(c.timeoutHandle=-1,tn=p.subtreeFlags,tn&8192||(tn&16785408)===16785408){tn={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Gt},wg(p,V,tn);var ti=(V&62914560)===V?Xh-ri():(V&4194048)===V?H0-ri():0;if(ti=Y0(tn,ti),ti!==null){Fc=V,c.cancelPendingCommit=ti(ty.bind(null,c,p,V,b,A,N,se,Ae,Xe,Kt,tn,null,Dt,zt)),tc(c,V,se,!At);return}}ty(c,p,V,b,A,N,se,Ae,Xe)}function _v(c){for(var p=c;;){var b=p.tag;if((b===0||b===11||b===15)&&p.flags&16384&&(b=p.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var A=0;A<b.length;A++){var N=b[A],V=N.getSnapshot;N=N.value;try{if(!fo(V(),N))return!1}catch{return!1}}if(b=p.child,p.subtreeFlags&16384&&b!==null)b.return=p,p=b;else{if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function tc(c,p,b,A){p&=~Jm,p&=~Yh,c.suspendedLanes|=p,c.pingedLanes&=~p,A&&(c.warmLanes|=p),A=c.expirationTimes;for(var N=p;0<N;){var V=31-fr(N),se=1<<V;A[V]=-1,N&=~se}b!==0&&Ue(c,b,p)}function Rg(){return(Lr&6)===0?(up(0),!1):!0}function op(){if(Ei!==null){if($r===0)var c=Ei.return;else c=Ei,vu=Pi=null,Gd(c),$e=null,Ke=0,c=Ei;for(;c!==null;)Km(c.alternate,c),c=c.return;Ei=null}}function ef(c,p){var b=c.timeoutHandle;b!==-1&&(c.timeoutHandle=-1,oe(b)),b=c.cancelPendingCommit,b!==null&&(c.cancelPendingCommit=null,b()),Fc=0,op(),lo=c,Ei=b=ha(c.current,null),gr=p,$r=0,Ts=null,_u=!1,Dc=ge(c,p),Xd=!1,ip=Cl=Jm=Yh=Jd=Ao=0,el=rp=null,Cg=!1,(p&8)!==0&&(p|=p&32);var A=c.entangledLanes;if(A!==0)for(c=c.entanglements,A&=p;0<A;){var N=31-fr(A),V=1<<N;p|=c[N],A&=~V}return wl=p,qo(),b}function $0(c,p){yi=null,fe.H=Wd,p===W||p===te?(p=Ge(),$r=3):p===K?(p=Ge(),$r=4):$r=p===mo?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,Ts=p,Ei===null&&(Ao=1,ug(c,fa(p,c.current)))}function Ag(){var c=eo.current;return c===null?!0:(gr&4194048)===gr?to===null:(gr&62914560)===gr||(gr&536870912)!==0?c===to:!1}function Sv(){var c=fe.H;return fe.H=Wd,c===null?Wd:c}function W0(){var c=fe.A;return fe.A=Ox,c}function ey(){Ao=4,_u||(gr&4194048)!==gr&&eo.current!==null||(Dc=!0),(Jd&134217727)===0&&(Yh&134217727)===0||lo===null||tc(lo,gr,Cl,!1)}function Ev(c,p,b){var A=Lr;Lr|=2;var N=Sv(),V=W0();(lo!==c||gr!==p)&&(_g=null,ef(c,p)),p=!1;var se=Ao;e:do try{if($r!==0&&Ei!==null){var Ae=Ei,Xe=Ts;switch($r){case 8:op(),se=6;break e;case 3:case 2:case 9:case 6:eo.current===null&&(p=!0);var At=$r;if($r=0,Ts=null,tf(c,Ae,Xe,At),b&&Dc){se=0;break e}break;default:At=$r,$r=0,Ts=null,tf(c,Ae,Xe,At)}}Nx(),se=Ao;break}catch(Kt){$0(c,Kt)}while(!0);return p&&c.shellSuspendCounter++,vu=Pi=null,Lr=A,fe.H=N,fe.A=V,Ei===null&&(lo=null,gr=0,qo()),se}function Nx(){for(;Ei!==null;)Av(Ei)}function Rv(c,p){var b=Lr;Lr|=2;var A=Sv(),N=W0();lo!==c||gr!==p?(_g=null,Jh=ri()+500,ef(c,p)):Dc=ge(c,p);e:do try{if($r!==0&&Ei!==null){p=Ei;var V=Ts;t:switch($r){case 1:$r=0,Ts=null,tf(c,p,V,1);break;case 2:case 9:if(le(V)){$r=0,Ts=null,Tv(p);break}p=function(){$r!==2&&$r!==9||lo!==c||($r=7),Mc(c)},V.then(p,p);break e;case 3:$r=7;break e;case 4:$r=5;break e;case 7:le(V)?($r=0,Ts=null,Tv(p)):($r=0,Ts=null,tf(c,p,V,7));break;case 5:var se=null;switch(Ei.tag){case 26:se=Ei.memoizedState;case 5:case 27:var Ae=Ei;if(se?Ds(se):Ae.stateNode.complete){$r=0,Ts=null;var Xe=Ae.sibling;if(Xe!==null)Ei=Xe;else{var At=Ae.return;At!==null?(Ei=At,Tg(At)):Ei=null}break t}}$r=0,Ts=null,tf(c,p,V,5);break;case 6:$r=0,Ts=null,tf(c,p,V,6);break;case 8:op(),Ao=6;break e;default:throw Error(i(462))}}eh();break}catch(Kt){$0(c,Kt)}while(!0);return vu=Pi=null,fe.H=A,fe.A=N,Lr=b,Ei!==null?0:(lo=null,gr=0,qo(),Ao)}function eh(){for(;Ei!==null&&!ai();)Av(Ei)}function Av(c){var p=I0(c.alternate,c,wl);c.memoizedProps=c.pendingProps,p===null?Tg(c):Ei=p}function Tv(c){var p=c,b=p.alternate;switch(p.tag){case 15:case 0:p=av(b,p,p.pendingProps,p.type,void 0,gr);break;case 11:p=av(b,p,p.pendingProps,p.type.render,p.ref,gr);break;case 5:Gd(p);default:Km(b,p),p=Ei=If(p,wl),p=I0(b,p,wl)}c.memoizedProps=c.pendingProps,p===null?Tg(c):Ei=p}function tf(c,p,b,A){vu=Pi=null,Gd(p),$e=null,Ke=0;var N=p.return;try{if(ov(c,N,p,b,gr)){Ao=1,ug(c,fa(b,c.current)),Ei=null;return}}catch(V){if(N!==null)throw Ei=N,V;Ao=1,ug(c,fa(b,c.current)),Ei=null;return}p.flags&32768?(nn||A===1?c=!0:Dc||(gr&536870912)!==0?c=!1:(_u=c=!0,(A===2||A===9||A===3||A===6)&&(A=eo.current,A!==null&&A.tag===13&&(A.flags|=16384))),sp(p,c)):Tg(p)}function Tg(c){var p=c;do{if((p.flags&32768)!==0){sp(p,_u);return}c=p.return;var b=L0(p.alternate,p,wl);if(b!==null){Ei=b;return}if(p=p.sibling,p!==null){Ei=p;return}Ei=p=c}while(p!==null);Ao===0&&(Ao=5)}function sp(c,p){do{var b=Zf(c.alternate,c);if(b!==null){b.flags&=32767,Ei=b;return}if(b=c.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!p&&(c=c.sibling,c!==null)){Ei=c;return}Ei=c=b}while(c!==null);Ao=6,Ei=null}function ty(c,p,b,A,N,V,se,Ae,Xe){c.cancelPendingCommit=null;do ba();while(Qo!==0);if((Lr&6)!==0)throw Error(i(327));if(p!==null){if(p===c.current)throw Error(i(177));if(V=p.lanes|p.childLanes,V|=Qr,ct(c,b,V,se,Ae,Xe),c===lo&&(Ei=lo=null,gr=0),Jl=p,va=c,Fc=b,Sg=V,wv=N,V0=A,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,q0(Tt,function(){return rf(),null})):(c.callbackNode=null,c.callbackPriority=0),A=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||A){A=fe.T,fe.T=null,N=he.p,he.p=2,se=Lr,Lr|=4;try{Lx(c,p,b)}finally{Lr=se,he.p=N,fe.T=A}}Qo=1,nf(),ny(),ap()}}function nf(){if(Qo===1){Qo=0;var c=va,p=Jl,b=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||b){b=fe.T,fe.T=null;var A=he.p;he.p=2;var N=Lr;Lr|=4;try{vv(p,c);var V=x,se=Qc(c.containerInfo),Ae=V.focusedElem,Xe=V.selectionRange;if(se!==Ae&&Ae&&Ae.ownerDocument&&Jp(Ae.ownerDocument.documentElement,Ae)){if(Xe!==null&&Df(Ae)){var At=Xe.start,Kt=Xe.end;if(Kt===void 0&&(Kt=At),"selectionStart"in Ae)Ae.selectionStart=At,Ae.selectionEnd=Math.min(Kt,Ae.value.length);else{var tn=Ae.ownerDocument||document,Dt=tn&&tn.defaultView||window;if(Dt.getSelection){var zt=Dt.getSelection(),ti=Ae.textContent.length,Di=Math.min(Xe.start,ti),ko=Xe.end===void 0?Di:Math.min(Xe.end,ti);!zt.extend&&Di>ko&&(se=ko,ko=Di,Di=se);var pt=Im(Ae,Di),st=Im(Ae,ko);if(pt&&st&&(zt.rangeCount!==1||zt.anchorNode!==pt.node||zt.anchorOffset!==pt.offset||zt.focusNode!==st.node||zt.focusOffset!==st.offset)){var Rt=tn.createRange();Rt.setStart(pt.node,pt.offset),zt.removeAllRanges(),Di>ko?(zt.addRange(Rt),zt.extend(st.node,st.offset)):(Rt.setEnd(st.node,st.offset),zt.addRange(Rt))}}}}for(tn=[],zt=Ae;zt=zt.parentNode;)zt.nodeType===1&&tn.push({element:zt,left:zt.scrollLeft,top:zt.scrollTop});for(typeof Ae.focus=="function"&&Ae.focus(),Ae=0;Ae<tn.length;Ae++){var Qt=tn[Ae];Qt.element.scrollLeft=Qt.left,Qt.element.scrollTop=Qt.top}}hy=!!g,x=g=null}finally{Lr=N,he.p=A,fe.T=b}}c.current=p,Qo=2}}function ny(){if(Qo===2){Qo=0;var c=va,p=Jl,b=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||b){b=fe.T,fe.T=null;var A=he.p;he.p=2;var N=Lr;Lr|=4;try{gv(c,p.alternate,p)}finally{Lr=N,he.p=A,fe.T=b}}Qo=3}}function ap(){if(Qo===4||Qo===3){Qo=0,Gi();var c=va,p=Jl,b=Fc,A=V0;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?Qo=5:(Qo=0,Jl=va=null,iy(c,c.pendingLanes));var N=c.pendingLanes;if(N===0&&(md=null),pn(b),p=p.stateNode,Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(ln,p,void 0,(p.current.flags&128)===128)}catch{}if(A!==null){p=fe.T,N=he.p,he.p=2,fe.T=null;try{for(var V=c.onRecoverableError,se=0;se<A.length;se++){var Ae=A[se];V(Ae.value,{componentStack:Ae.stack})}}finally{fe.T=p,he.p=N}}(Fc&3)!==0&&ba(),Mc(c),N=c.pendingLanes,(b&261930)!==0&&(N&42)!==0?c===Eg?Qd++:(Qd=0,Eg=c):Qd=0,up(0)}}function iy(c,p){(c.pooledCacheLanes&=p)===0&&(p=c.pooledCache,p!=null&&(c.pooledCache=null,Uu(p)))}function ba(){return nf(),ny(),ap(),rf()}function rf(){if(Qo!==5)return!1;var c=va,p=Sg;Sg=0;var b=pn(Fc),A=fe.T,N=he.p;try{he.p=32>b?32:b,fe.T=null,b=wv,wv=null;var V=va,se=Fc;if(Qo=0,Jl=va=null,Fc=0,(Lr&6)!==0)throw Error(i(331));var Ae=Lr;if(Lr|=4,Xm(V.current),G0(V,V.current,se,b),Lr=Ae,up(0,!1),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(ln,V)}catch{}return!0}finally{he.p=N,fe.T=A,iy(c,p)}}function ry(c,p,b){p=fa(b,p),p=cg(c.stateNode,p,2),c=kn(c,p,2),c!==null&&(nt(c,2),Mc(c))}function Wr(c,p,b){if(c.tag===3)ry(c,c,b);else for(;p!==null;){if(p.tag===3){ry(p,c,b);break}else if(p.tag===1){var A=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(md===null||!md.has(A))){c=fa(b,c),b=Rc(2),A=kn(p,b,2),A!==null&&(dd(b,A,p,c),nt(A,2),Mc(A));break}}p=p.return}}function oy(c,p,b){var A=c.pingCache;if(A===null){A=c.pingCache=new zx;var N=new Set;A.set(p,N)}else N=A.get(p),N===void 0&&(N=new Set,A.set(p,N));N.has(b)||(Xd=!0,N.add(b),c=U0.bind(null,c,p,b),p.then(c,c))}function U0(c,p,b){var A=c.pingCache;A!==null&&A.delete(p),c.pingedLanes|=c.suspendedLanes&b,c.warmLanes&=~b,lo===c&&(gr&b)===b&&(Ao===4||Ao===3&&(gr&62914560)===gr&&300>ri()-Xh?(Lr&2)===0&&ef(c,0):Jm|=b,ip===gr&&(ip=0)),Mc(c)}function lp(c,p){p===0&&(p=Ne()),c=gl(c,p),c!==null&&(nt(c,p),Mc(c))}function kg(c){var p=c.memoizedState,b=0;p!==null&&(b=p.retryLane),lp(c,b)}function Bx(c,p){var b=0;switch(c.tag){case 31:case 13:var A=c.stateNode,N=c.memoizedState;N!==null&&(b=N.retryLane);break;case 19:A=c.stateNode;break;case 22:A=c.stateNode._retryCache;break;default:throw Error(i(314))}A!==null&&A.delete(p),lp(c,b)}function q0(c,p){return An(c,p)}var eu=null,th=null,sy=!1,Pg=!1,ay=!1,nh=0;function Mc(c){c!==th&&c.next===null&&(th===null?eu=th=c:th=th.next=c),Pg=!0,sy||(sy=!0,ly())}function up(c,p){if(!ay&&Pg){ay=!0;do for(var b=!1,A=eu;A!==null;){if(c!==0){var N=A.pendingLanes;if(N===0)var V=0;else{var se=A.suspendedLanes,Ae=A.pingedLanes;V=(1<<31-fr(42|c)+1)-1,V&=N&~(se&~Ae),V=V&201326741?V&201326741|1:V?V|2:0}V!==0&&(b=!0,Fg(A,V))}else V=gr,V=pe(A,A===lo?V:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),(V&3)===0||ge(A,V)||(b=!0,Fg(A,V));A=A.next}while(b);ay=!1}}function cp(){kv()}function kv(){Pg=sy=!1;var c=0;nh!==0&&Z()&&(c=nh);for(var p=ri(),b=null,A=eu;A!==null;){var N=A.next,V=Dg(A,p);V===0?(A.next=null,b===null?eu=N:b.next=N,N===null&&(th=b)):(b=A,(c!==0||(V&3)!==0)&&(Pg=!0)),A=N}Qo!==0&&Qo!==5||up(c),nh!==0&&(nh=0)}function Dg(c,p){for(var b=c.suspendedLanes,A=c.pingedLanes,N=c.expirationTimes,V=c.pendingLanes&-62914561;0<V;){var se=31-fr(V),Ae=1<<se,Xe=N[se];Xe===-1?((Ae&b)===0||(Ae&A)!==0)&&(N[se]=ke(Ae,p)):Xe<=p&&(c.expiredLanes|=Ae),V&=~Ae}if(p=lo,b=gr,b=pe(c,c===p?b:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),A=c.callbackNode,b===0||c===p&&($r===2||$r===9)||c.cancelPendingCommit!==null)return A!==null&&A!==null&&Cn(A),c.callbackNode=null,c.callbackPriority=0;if((b&3)===0||ge(c,b)){if(p=b&-b,p===c.callbackPriority)return p;switch(A!==null&&Cn(A),pn(b)){case 2:case 8:b=lr;break;case 32:b=Tt;break;case 268435456:b=Qi;break;default:b=Tt}return A=Pv.bind(null,c),b=An(b,A),c.callbackPriority=p,c.callbackNode=b,p}return A!==null&&A!==null&&Cn(A),c.callbackPriority=2,c.callbackNode=null,2}function Pv(c,p){if(Qo!==0&&Qo!==5)return c.callbackNode=null,c.callbackPriority=0,null;var b=c.callbackNode;if(ba()&&c.callbackNode!==b)return null;var A=gr;return A=pe(c,c===lo?A:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),A===0?null:(Qh(c,A,p),Dg(c,ri()),c.callbackNode!=null&&c.callbackNode===b?Pv.bind(null,c):null)}function Fg(c,p){if(ba())return null;Qh(c,p,!0)}function ly(){me(function(){(Lr&6)!==0?An(Si,cp):kv()})}function za(){if(nh===0){var c=qu;c===0&&(c=sa,sa<<=1,(sa&261888)===0&&(sa=256)),nh=c}return nh}function K0(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:wt(""+c)}function Z0(c,p){var b=p.ownerDocument.createElement("input");return b.name=p.name,b.value=p.value,c.id&&b.setAttribute("form",c.id),p.parentNode.insertBefore(b,p),c=new FormData(c),b.parentNode.removeChild(b),c}function of(c,p,b,A,N){if(p==="submit"&&b&&b.stateNode===N){var V=K0((N[xi]||null).action),se=A.submitter;se&&(p=(p=se[xi]||null)?K0(p.formAction):se.getAttribute("formAction"),p!==null&&(V=p,se=null));var Ae=new ca("action","action",null,A,N);c.push({event:Ae,listeners:[{instance:null,listener:function(){if(A.defaultPrevented){if(nh!==0){var Xe=se?Z0(N,se):new FormData(N);cd(b,{pending:!0,data:Xe,method:N.method,action:V},null,Xe)}}else typeof V=="function"&&(Ae.preventDefault(),Xe=se?Z0(N,se):new FormData(N),cd(b,{pending:!0,data:Xe,method:N.method,action:V},V,Xe))},currentTarget:N}]})}}for(var Ti=0;Ti<yc.length;Ti++){var ks=yc[Ti],gs=ks.toLowerCase(),es=ks[0].toUpperCase()+ks.slice(1);Nr(gs,"on"+es)}Nr(ea,"onAnimationEnd"),Nr(mc,"onAnimationIteration"),Nr(Ff,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(Id,"onTransitionRun"),Nr(zh,"onTransitionStart"),Nr(ed,"onTransitionCancel"),Nr(Cr,"onTransitionEnd"),Gl("onMouseEnter",["mouseout","mouseover"]),Gl("onMouseLeave",["mouseout","mouseover"]),Gl("onPointerEnter",["pointerout","pointerover"]),Gl("onPointerLeave",["pointerout","pointerover"]),Mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Mo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yd=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(dp));function uy(c,p){p=(p&4)!==0;for(var b=0;b<c.length;b++){var A=c[b],N=A.event;A=A.listeners;e:{var V=void 0;if(p)for(var se=A.length-1;0<=se;se--){var Ae=A[se],Xe=Ae.instance,At=Ae.currentTarget;if(Ae=Ae.listener,Xe!==V&&N.isPropagationStopped())break e;V=Ae,N.currentTarget=At;try{V(N)}catch(Kt){pu(Kt)}N.currentTarget=null,V=Xe}else for(se=0;se<A.length;se++){if(Ae=A[se],Xe=Ae.instance,At=Ae.currentTarget,Ae=Ae.listener,Xe!==V&&N.isPropagationStopped())break e;V=Ae,N.currentTarget=At;try{V(N)}catch(Kt){pu(Kt)}N.currentTarget=null,V=Xe}}}}function yr(c,p){var b=p[co];b===void 0&&(b=p[co]=new Set);var A=c+"__bubble";b.has(A)||(Ig(p,c,2,!1),b.add(A))}function cy(c,p,b){var A=0;p&&(A|=4),Ig(b,c,A,p)}var Mg="_reactListening"+Math.random().toString(36).slice(2);function Dv(c){if(!c[Mg]){c[Mg]=!0,$c.forEach(function(b){b!=="selectionchange"&&(yd.has(b)||cy(b,!1,c),cy(b,!0,c))});var p=c.nodeType===9?c:c.ownerDocument;p===null||p[Mg]||(p[Mg]=!0,cy("selectionchange",!1,p))}}function Ig(c,p,b,A){switch(na(p)){case 2:var N=ic;break;case 8:N=fy;break;default:N=py}b=N.bind(null,p,b,c),N=void 0,!Zn||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(N=!0),A?N!==void 0?c.addEventListener(p,b,{capture:!0,passive:N}):c.addEventListener(p,b,!0):N!==void 0?c.addEventListener(p,b,{passive:N}):c.addEventListener(p,b,!1)}function Lg(c,p,b,A,N){var V=A;if((p&1)===0&&(p&2)===0&&A!==null)e:for(;;){if(A===null)return;var se=A.tag;if(se===3||se===4){var Ae=A.stateNode.containerInfo;if(Ae===N)break;if(se===4)for(se=A.return;se!==null;){var Xe=se.tag;if((Xe===3||Xe===4)&&se.stateNode.containerInfo===N)return;se=se.return}for(;Ae!==null;){if(se=io(Ae),se===null)return;if(Xe=se.tag,Xe===5||Xe===6||Xe===26||Xe===27){A=V=se;continue e}Ae=Ae.parentNode}}A=A.return}dt(function(){var At=V,Kt=Gn(b),tn=[];e:{var Dt=Ld.get(c);if(Dt!==void 0){var zt=ca,ti=c;switch(c){case"keypress":if(Or(b)===0)break e;case"keydown":case"keyup":zt=hc;break;case"focusin":ti="focus",zt=Dh;break;case"focusout":ti="blur",zt=Dh;break;case"beforeblur":case"afterblur":zt=Dh;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":zt=Hl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":zt=Wp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":zt=Dm;break;case ea:case mc:case Ff:zt=Up;break;case Cr:zt=Fm;break;case"scroll":case"scrollend":zt=_s;break;case"wheel":zt=pl;break;case"copy":case"cut":case"paste":zt=Aa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":zt=Zp;break;case"toggle":case"beforetoggle":zt=Xp}var Di=(p&4)!==0,ko=!Di&&(c==="scroll"||c==="scrollend"),pt=Di?Dt!==null?Dt+"Capture":null:Dt;Di=[];for(var st=At,Rt;st!==null;){var Qt=st;if(Rt=Qt.stateNode,Qt=Qt.tag,Qt!==5&&Qt!==26&&Qt!==27||Rt===null||pt===null||(Qt=vt(st,pt),Qt!=null&&Di.push(tl(st,Qt,Rt))),ko)break;st=st.return}0<Di.length&&(Dt=new zt(Dt,ti,null,b,Kt),tn.push({event:Dt,listeners:Di}))}}if((p&7)===0){e:{if(Dt=c==="mouseover"||c==="pointerover",zt=c==="mouseout"||c==="pointerout",Dt&&b!==ui&&(ti=b.relatedTarget||b.fromElement)&&(io(ti)||ti[Fi]))break e;if((zt||Dt)&&(Dt=Kt.window===Kt?Kt:(Dt=Kt.ownerDocument)?Dt.defaultView||Dt.parentWindow:window,zt?(ti=b.relatedTarget||b.toElement,zt=At,ti=ti?io(ti):null,ti!==null&&(ko=o(ti),Di=ti.tag,ti!==ko||Di!==5&&Di!==27&&Di!==6)&&(ti=null)):(zt=null,ti=At),zt!==ti)){if(Di=Hl,Qt="onMouseLeave",pt="onMouseEnter",st="mouse",(c==="pointerout"||c==="pointerover")&&(Di=Zp,Qt="onPointerLeave",pt="onPointerEnter",st="pointer"),ko=zt==null?Dt:dl(zt),Rt=ti==null?Dt:dl(ti),Dt=new Di(Qt,st+"leave",zt,b,Kt),Dt.target=ko,Dt.relatedTarget=Rt,Qt=null,io(Kt)===At&&(Di=new Di(pt,st+"enter",ti,b,Kt),Di.target=Rt,Di.relatedTarget=ko,Qt=Di),ko=Qt,zt&&ti)t:{for(Di=ih,pt=zt,st=ti,Rt=0,Qt=pt;Qt;Qt=Di(Qt))Rt++;Qt=0;for(var wi=st;wi;wi=Di(wi))Qt++;for(;0<Rt-Qt;)pt=Di(pt),Rt--;for(;0<Qt-Rt;)st=Di(st),Qt--;for(;Rt--;){if(pt===st||st!==null&&pt===st.alternate){Di=pt;break t}pt=Di(pt),st=Di(st)}Di=null}else Di=null;zt!==null&&To(tn,Dt,zt,Di,!1),ti!==null&&ko!==null&&To(tn,ko,ti,Di,!0)}}e:{if(Dt=At?dl(At):window,zt=Dt.nodeName&&Dt.nodeName.toLowerCase(),zt==="select"||zt==="input"&&Dt.type==="file")var qr=kf;else if(Kc(Dt))if(zu)qr=Md;else{qr=Pf;var li=gc}else zt=Dt.nodeName,!zt||zt.toLowerCase()!=="input"||Dt.type!=="checkbox"&&Dt.type!=="radio"?At&&ei(At.elementType)&&(qr=kf):qr=Fd;if(qr&&(qr=qr(c,At))){Zc(tn,qr,b,Kt);break e}li&&li(c,Dt,At),c==="focusout"&&At&&Dt.type==="number"&&At.memoizedProps.value!=null&&Uc(Dt,"number",Dt.value)}switch(li=At?dl(At):window,c){case"focusin":(Kc(li)||li.contentEditable==="true")&&(ut=li,Ht=At,Ft=null);break;case"focusout":Ft=Ht=ut=null;break;case"mousedown":Bn=!0;break;case"contextmenu":case"mouseup":case"dragend":Bn=!1,Ci(tn,b,Kt);break;case"selectionchange":if(Bu)break;case"keydown":case"keyup":Ci(tn,b,Kt)}var hr;if(qc)e:{switch(c){case"compositionstart":var Er="onCompositionStart";break e;case"compositionend":Er="onCompositionEnd";break e;case"compositionupdate":Er="onCompositionUpdate";break e}Er=void 0}else fu?Tf(c,b)&&(Er="onCompositionEnd"):c==="keydown"&&b.keyCode===229&&(Er="onCompositionStart");Er&&(Ih&&b.locale!=="ko"&&(fu||Er!=="onCompositionStart"?Er==="onCompositionEnd"&&fu&&(hr=Xn()):(Ai=Kt,dr="value"in Ai?Ai.value:Ai.textContent,fu=!0)),li=hp(At,Er),0<li.length&&(Er=new cs(Er,c,null,b,Kt),tn.push({event:Er,listeners:li}),hr?Er.data=hr:(hr=Wi(b),hr!==null&&(Er.data=hr)))),(hr=Ou?ir(c,b):Ar(c,b))&&(Er=hp(At,"onBeforeInput"),0<Er.length&&(li=new cs("onBeforeInput","beforeinput",null,b,Kt),tn.push({event:li,listeners:Er}),li.data=hr)),of(tn,c,At,b,Kt)}uy(tn,p)})}function tl(c,p,b){return{instance:c,listener:p,currentTarget:b}}function hp(c,p){for(var b=p+"Capture",A=[];c!==null;){var N=c,V=N.stateNode;if(N=N.tag,N!==5&&N!==26&&N!==27||V===null||(N=vt(c,b),N!=null&&A.unshift(tl(c,N,V)),N=vt(c,p),N!=null&&A.push(tl(c,N,V))),c.tag===3)return A;c=c.return}return[]}function ih(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function To(c,p,b,A,N){for(var V=p._reactName,se=[];b!==null&&b!==A;){var Ae=b,Xe=Ae.alternate,At=Ae.stateNode;if(Ae=Ae.tag,Xe!==null&&Xe===A)break;Ae!==5&&Ae!==26&&Ae!==27||At===null||(Xe=At,N?(At=vt(b,V),At!=null&&se.unshift(tl(b,At,Xe))):N||(At=vt(b,V),At!=null&&se.push(tl(b,At,Xe)))),b=b.return}se.length!==0&&c.push({event:p,listeners:se})}var ts=/\r\n?/g,dy=/\u0000|\uFFFD/g;function Og(c){return(typeof c=="string"?c:""+c).replace(ts,`
`).replace(dy,"")}function fp(c,p){return p=Og(p),Og(c)===p}function Ur(c,p,b,A,N,V){switch(b){case"children":typeof A=="string"?p==="body"||p==="textarea"&&A===""||We(c,A):(typeof A=="number"||typeof A=="bigint")&&p!=="body"&&We(c,""+A);break;case"className":hl(c,"class",A);break;case"tabIndex":hl(c,"tabindex",A);break;case"dir":case"role":case"viewBox":case"width":case"height":hl(c,b,A);break;case"style":Wt(c,A,V);break;case"data":if(p!=="object"){hl(c,"data",A);break}case"src":case"href":if(A===""&&(p!=="a"||b!=="href")){c.removeAttribute(b);break}if(A==null||typeof A=="function"||typeof A=="symbol"||typeof A=="boolean"){c.removeAttribute(b);break}A=wt(""+A),c.setAttribute(b,A);break;case"action":case"formAction":if(typeof A=="function"){c.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof V=="function"&&(b==="formAction"?(p!=="input"&&Ur(c,p,"name",N.name,N,null),Ur(c,p,"formEncType",N.formEncType,N,null),Ur(c,p,"formMethod",N.formMethod,N,null),Ur(c,p,"formTarget",N.formTarget,N,null)):(Ur(c,p,"encType",N.encType,N,null),Ur(c,p,"method",N.method,N,null),Ur(c,p,"target",N.target,N,null)));if(A==null||typeof A=="symbol"||typeof A=="boolean"){c.removeAttribute(b);break}A=wt(""+A),c.setAttribute(b,A);break;case"onClick":A!=null&&(c.onclick=Gt);break;case"onScroll":A!=null&&yr("scroll",c);break;case"onScrollEnd":A!=null&&yr("scrollend",c);break;case"dangerouslySetInnerHTML":if(A!=null){if(typeof A!="object"||!("__html"in A))throw Error(i(61));if(b=A.__html,b!=null){if(N.children!=null)throw Error(i(60));c.innerHTML=b}}break;case"multiple":c.multiple=A&&typeof A!="function"&&typeof A!="symbol";break;case"muted":c.muted=A&&typeof A!="function"&&typeof A!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(A==null||typeof A=="function"||typeof A=="boolean"||typeof A=="symbol"){c.removeAttribute("xlink:href");break}b=wt(""+A),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":A!=null&&typeof A!="function"&&typeof A!="symbol"?c.setAttribute(b,""+A):c.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":A&&typeof A!="function"&&typeof A!="symbol"?c.setAttribute(b,""):c.removeAttribute(b);break;case"capture":case"download":A===!0?c.setAttribute(b,""):A!==!1&&A!=null&&typeof A!="function"&&typeof A!="symbol"?c.setAttribute(b,A):c.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":A!=null&&typeof A!="function"&&typeof A!="symbol"&&!isNaN(A)&&1<=A?c.setAttribute(b,A):c.removeAttribute(b);break;case"rowSpan":case"start":A==null||typeof A=="function"||typeof A=="symbol"||isNaN(A)?c.removeAttribute(b):c.setAttribute(b,A);break;case"popover":yr("beforetoggle",c),yr("toggle",c),ro(c,"popover",A);break;case"xlinkActuate":Co(c,"http://www.w3.org/1999/xlink","xlink:actuate",A);break;case"xlinkArcrole":Co(c,"http://www.w3.org/1999/xlink","xlink:arcrole",A);break;case"xlinkRole":Co(c,"http://www.w3.org/1999/xlink","xlink:role",A);break;case"xlinkShow":Co(c,"http://www.w3.org/1999/xlink","xlink:show",A);break;case"xlinkTitle":Co(c,"http://www.w3.org/1999/xlink","xlink:title",A);break;case"xlinkType":Co(c,"http://www.w3.org/1999/xlink","xlink:type",A);break;case"xmlBase":Co(c,"http://www.w3.org/XML/1998/namespace","xml:base",A);break;case"xmlLang":Co(c,"http://www.w3.org/XML/1998/namespace","xml:lang",A);break;case"xmlSpace":Co(c,"http://www.w3.org/XML/1998/namespace","xml:space",A);break;case"is":ro(c,"is",A);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=Et.get(b)||b,ro(c,b,A))}}function zg(c,p,b,A,N,V){switch(b){case"style":Wt(c,A,V);break;case"dangerouslySetInnerHTML":if(A!=null){if(typeof A!="object"||!("__html"in A))throw Error(i(61));if(b=A.__html,b!=null){if(N.children!=null)throw Error(i(60));c.innerHTML=b}}break;case"children":typeof A=="string"?We(c,A):(typeof A=="number"||typeof A=="bigint")&&We(c,""+A);break;case"onScroll":A!=null&&yr("scroll",c);break;case"onScrollEnd":A!=null&&yr("scrollend",c);break;case"onClick":A!=null&&(c.onclick=Gt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xs.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(N=b.endsWith("Capture"),p=b.slice(2,N?b.length-7:void 0),V=c[xi]||null,V=V!=null?V[b]:null,typeof V=="function"&&c.removeEventListener(p,V,N),typeof A=="function")){typeof V!="function"&&V!==null&&(b in c?c[b]=null:c.hasAttribute(b)&&c.removeAttribute(b)),c.addEventListener(p,A,N);break e}b in c?c[b]=A:A===!0?c.setAttribute(b,""):ro(c,b,A)}}}function $s(c,p,b){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":yr("error",c),yr("load",c);var A=!1,N=!1,V;for(V in b)if(b.hasOwnProperty(V)){var se=b[V];if(se!=null)switch(V){case"src":A=!0;break;case"srcSet":N=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,p));default:Ur(c,p,V,se,b,null)}}N&&Ur(c,p,"srcSet",b.srcSet,b,null),A&&Ur(c,p,"src",b.src,b,null);return;case"input":yr("invalid",c);var Ae=V=se=N=null,Xe=null,At=null;for(A in b)if(b.hasOwnProperty(A)){var Kt=b[A];if(Kt!=null)switch(A){case"name":N=Kt;break;case"type":se=Kt;break;case"checked":Xe=Kt;break;case"defaultChecked":At=Kt;break;case"value":V=Kt;break;case"defaultValue":Ae=Kt;break;case"children":case"dangerouslySetInnerHTML":if(Kt!=null)throw Error(i(137,p));break;default:Ur(c,p,A,Kt,b,null)}}ur(c,V,Ae,Xe,At,se,N,!1);return;case"select":yr("invalid",c),A=se=V=null;for(N in b)if(b.hasOwnProperty(N)&&(Ae=b[N],Ae!=null))switch(N){case"value":V=Ae;break;case"defaultValue":se=Ae;break;case"multiple":A=Ae;default:Ur(c,p,N,Ae,b,null)}p=V,b=se,c.multiple=!!A,p!=null?la(c,!!A,p,!1):b!=null&&la(c,!!A,b,!0);return;case"textarea":yr("invalid",c),V=N=A=null;for(se in b)if(b.hasOwnProperty(se)&&(Ae=b[se],Ae!=null))switch(se){case"value":A=Ae;break;case"defaultValue":N=Ae;break;case"children":V=Ae;break;case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(i(91));break;default:Ur(c,p,se,Ae,b,null)}bt(c,A,N,V);return;case"option":for(Xe in b)if(b.hasOwnProperty(Xe)&&(A=b[Xe],A!=null))switch(Xe){case"selected":c.selected=A&&typeof A!="function"&&typeof A!="symbol";break;default:Ur(c,p,Xe,A,b,null)}return;case"dialog":yr("beforetoggle",c),yr("toggle",c),yr("cancel",c),yr("close",c);break;case"iframe":case"object":yr("load",c);break;case"video":case"audio":for(A=0;A<dp.length;A++)yr(dp[A],c);break;case"image":yr("error",c),yr("load",c);break;case"details":yr("toggle",c);break;case"embed":case"source":case"link":yr("error",c),yr("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(At in b)if(b.hasOwnProperty(At)&&(A=b[At],A!=null))switch(At){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,p));default:Ur(c,p,At,A,b,null)}return;default:if(ei(p)){for(Kt in b)b.hasOwnProperty(Kt)&&(A=b[Kt],A!==void 0&&zg(c,p,Kt,A,b,void 0));return}}for(Ae in b)b.hasOwnProperty(Ae)&&(A=b[Ae],A!=null&&Ur(c,p,Ae,A,b,null))}function Gx(c,p,b,A){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var N=null,V=null,se=null,Ae=null,Xe=null,At=null,Kt=null;for(zt in b){var tn=b[zt];if(b.hasOwnProperty(zt)&&tn!=null)switch(zt){case"checked":break;case"value":break;case"defaultValue":Xe=tn;default:A.hasOwnProperty(zt)||Ur(c,p,zt,null,A,tn)}}for(var Dt in A){var zt=A[Dt];if(tn=b[Dt],A.hasOwnProperty(Dt)&&(zt!=null||tn!=null))switch(Dt){case"type":V=zt;break;case"name":N=zt;break;case"checked":At=zt;break;case"defaultChecked":Kt=zt;break;case"value":se=zt;break;case"defaultValue":Ae=zt;break;case"children":case"dangerouslySetInnerHTML":if(zt!=null)throw Error(i(137,p));break;default:zt!==tn&&Ur(c,p,Dt,zt,A,tn)}}aa(c,se,Ae,Xe,At,Kt,V,N);return;case"select":zt=se=Ae=Dt=null;for(V in b)if(Xe=b[V],b.hasOwnProperty(V)&&Xe!=null)switch(V){case"value":break;case"multiple":zt=Xe;default:A.hasOwnProperty(V)||Ur(c,p,V,null,A,Xe)}for(N in A)if(V=A[N],Xe=b[N],A.hasOwnProperty(N)&&(V!=null||Xe!=null))switch(N){case"value":Dt=V;break;case"defaultValue":Ae=V;break;case"multiple":se=V;default:V!==Xe&&Ur(c,p,N,V,A,Xe)}p=Ae,b=se,A=zt,Dt!=null?la(c,!!b,Dt,!1):!!A!=!!b&&(p!=null?la(c,!!b,p,!0):la(c,!!b,b?[]:"",!1));return;case"textarea":zt=Dt=null;for(Ae in b)if(N=b[Ae],b.hasOwnProperty(Ae)&&N!=null&&!A.hasOwnProperty(Ae))switch(Ae){case"value":break;case"children":break;default:Ur(c,p,Ae,null,A,N)}for(se in A)if(N=A[se],V=b[se],A.hasOwnProperty(se)&&(N!=null||V!=null))switch(se){case"value":Dt=N;break;case"defaultValue":zt=N;break;case"children":break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(i(91));break;default:N!==V&&Ur(c,p,se,N,A,V)}jl(c,Dt,zt);return;case"option":for(var ti in b)if(Dt=b[ti],b.hasOwnProperty(ti)&&Dt!=null&&!A.hasOwnProperty(ti))switch(ti){case"selected":c.selected=!1;break;default:Ur(c,p,ti,null,A,Dt)}for(Xe in A)if(Dt=A[Xe],zt=b[Xe],A.hasOwnProperty(Xe)&&Dt!==zt&&(Dt!=null||zt!=null))switch(Xe){case"selected":c.selected=Dt&&typeof Dt!="function"&&typeof Dt!="symbol";break;default:Ur(c,p,Xe,Dt,A,zt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Di in b)Dt=b[Di],b.hasOwnProperty(Di)&&Dt!=null&&!A.hasOwnProperty(Di)&&Ur(c,p,Di,null,A,Dt);for(At in A)if(Dt=A[At],zt=b[At],A.hasOwnProperty(At)&&Dt!==zt&&(Dt!=null||zt!=null))switch(At){case"children":case"dangerouslySetInnerHTML":if(Dt!=null)throw Error(i(137,p));break;default:Ur(c,p,At,Dt,A,zt)}return;default:if(ei(p)){for(var ko in b)Dt=b[ko],b.hasOwnProperty(ko)&&Dt!==void 0&&!A.hasOwnProperty(ko)&&zg(c,p,ko,void 0,A,Dt);for(Kt in A)Dt=A[Kt],zt=b[Kt],!A.hasOwnProperty(Kt)||Dt===zt||Dt===void 0&&zt===void 0||zg(c,p,Kt,Dt,A,zt);return}}for(var pt in b)Dt=b[pt],b.hasOwnProperty(pt)&&Dt!=null&&!A.hasOwnProperty(pt)&&Ur(c,p,pt,null,A,Dt);for(tn in A)Dt=A[tn],zt=b[tn],!A.hasOwnProperty(tn)||Dt===zt||Dt==null&&zt==null||Ur(c,p,tn,Dt,A,zt)}function f(c){switch(c){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function u(){if(typeof performance.getEntriesByType=="function"){for(var c=0,p=0,b=performance.getEntriesByType("resource"),A=0;A<b.length;A++){var N=b[A],V=N.transferSize,se=N.initiatorType,Ae=N.duration;if(V&&Ae&&f(se)){for(se=0,Ae=N.responseEnd,A+=1;A<b.length;A++){var Xe=b[A],At=Xe.startTime;if(At>Ae)break;var Kt=Xe.transferSize,tn=Xe.initiatorType;Kt&&f(tn)&&(Xe=Xe.responseEnd,se+=Kt*(Xe<Ae?1:(Ae-At)/(Xe-At)))}if(--A,p+=8*(V+se)/(N.duration/1e3),c++,10<c)break}}if(0<c)return p/c/1e6}return navigator.connection&&(c=navigator.connection.downlink,typeof c=="number")?c:5}var g=null,x=null;function E(c){return c.nodeType===9?c:c.ownerDocument}function F(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function M(c,p){if(c===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&p==="foreignObject"?0:c}function B(c,p){return c==="textarea"||c==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var H=null;function Z(){var c=window.event;return c&&c.type==="popstate"?c===H?!1:(H=c,!0):(H=null,!1)}var ee=typeof setTimeout=="function"?setTimeout:void 0,oe=typeof clearTimeout=="function"?clearTimeout:void 0,de=typeof Promise=="function"?Promise:void 0,me=typeof queueMicrotask=="function"?queueMicrotask:typeof de<"u"?function(c){return de.resolve(null).then(c).catch(Ce)}:ee;function Ce(c){setTimeout(function(){throw c})}function we(c){return c==="head"}function Be(c,p){var b=p,A=0;do{var N=b.nextSibling;if(c.removeChild(b),N&&N.nodeType===8)if(b=N.data,b==="/$"||b==="/&"){if(A===0){c.removeChild(N),yy(p);return}A--}else if(b==="$"||b==="$?"||b==="$~"||b==="$!"||b==="&")A++;else if(b==="html")Nt(c.ownerDocument.documentElement);else if(b==="head"){b=c.ownerDocument.head,Nt(b);for(var V=b.firstChild;V;){var se=V.nextSibling,Ae=V.nodeName;V[wr]||Ae==="SCRIPT"||Ae==="STYLE"||Ae==="LINK"&&V.rel.toLowerCase()==="stylesheet"||b.removeChild(V),V=se}}else b==="body"&&Nt(c.ownerDocument.body);b=N}while(b);yy(p)}function He(c,p){var b=c;c=0;do{var A=b.nextSibling;if(b.nodeType===1?p?(b._stashedDisplay=b.style.display,b.style.display="none"):(b.style.display=b._stashedDisplay||"",b.getAttribute("style")===""&&b.removeAttribute("style")):b.nodeType===3&&(p?(b._stashedText=b.nodeValue,b.nodeValue=""):b.nodeValue=b._stashedText||""),A&&A.nodeType===8)if(b=A.data,b==="/$"){if(c===0)break;c--}else b!=="$"&&b!=="$?"&&b!=="$~"&&b!=="$!"||c++;b=A}while(b)}function ht(c){var p=c.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var b=p;switch(p=p.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":ht(b),No(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}c.removeChild(b)}}function Qe(c,p,b,A){for(;c.nodeType===1;){var N=b;if(c.nodeName.toLowerCase()!==p.toLowerCase()){if(!A&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(A){if(!c[wr])switch(p){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(V=c.getAttribute("rel"),V==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(V!==N.rel||c.getAttribute("href")!==(N.href==null||N.href===""?null:N.href)||c.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin)||c.getAttribute("title")!==(N.title==null?null:N.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(V=c.getAttribute("src"),(V!==(N.src==null?null:N.src)||c.getAttribute("type")!==(N.type==null?null:N.type)||c.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin))&&V&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(p==="input"&&c.type==="hidden"){var V=N.name==null?null:""+N.name;if(N.type==="hidden"&&c.getAttribute("name")===V)return c}else return c;if(c=vn(c.nextSibling),c===null)break}return null}function et(c,p,b){if(p==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!b||(c=vn(c.nextSibling),c===null))return null;return c}function It(c,p){for(;c.nodeType!==8;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!p||(c=vn(c.nextSibling),c===null))return null;return c}function rn(c){return c.data==="$?"||c.data==="$~"}function Rn(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState!=="loading"}function si(c,p){var b=c.ownerDocument;if(c.data==="$~")c._reactRetry=p;else if(c.data!=="$?"||b.readyState!=="loading")p();else{var A=function(){p(),b.removeEventListener("DOMContentLoaded",A)};b.addEventListener("DOMContentLoaded",A),c._reactRetry=A}}function vn(c){for(;c!=null;c=c.nextSibling){var p=c.nodeType;if(p===1||p===3)break;if(p===8){if(p=c.data,p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"||p==="F!"||p==="F")break;if(p==="/$"||p==="/&")return null}}return c}var _n=null;function Vn(c){c=c.nextSibling;for(var p=0;c;){if(c.nodeType===8){var b=c.data;if(b==="/$"||b==="/&"){if(p===0)return vn(c.nextSibling);p--}else b!=="$"&&b!=="$!"&&b!=="$?"&&b!=="$~"&&b!=="&"||p++}c=c.nextSibling}return null}function On(c){c=c.previousSibling;for(var p=0;c;){if(c.nodeType===8){var b=c.data;if(b==="$"||b==="$!"||b==="$?"||b==="$~"||b==="&"){if(p===0)return c;p--}else b!=="/$"&&b!=="/&"||p++}c=c.previousSibling}return null}function Mn(c,p,b){switch(p=E(b),c){case"html":if(c=p.documentElement,!c)throw Error(i(452));return c;case"head":if(c=p.head,!c)throw Error(i(453));return c;case"body":if(c=p.body,!c)throw Error(i(454));return c;default:throw Error(i(451))}}function Nt(c){for(var p=c.attributes;p.length;)c.removeAttributeNode(p[0]);No(c)}var In=new Map,jn=new Set;function di(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var mr=he.d;he.d={f:jr,r:Ps,D:as,C:Na,L:Ba,m:Ga,X:Pr,S:sr,M:xa};function jr(){var c=mr.f(),p=Rg();return c||p}function Ps(c){var p=Xr(c);p!==null&&p.tag===5&&p.type==="form"?Wm(p):mr.r(c)}var Ws=typeof document>"u"?null:document;function Us(c,p,b){var A=Ws;if(A&&typeof p=="string"&&p){var N=Uo(p);N='link[rel="'+c+'"][href="'+N+'"]',typeof b=="string"&&(N+='[crossorigin="'+b+'"]'),jn.has(N)||(jn.add(N),c={rel:c,crossOrigin:b,href:p},A.querySelector(N)===null&&(p=A.createElement("link"),$s(p,"link",c),Bo(p),A.head.appendChild(p)))}}function as(c){mr.D(c),Us("dns-prefetch",c,null)}function Na(c,p){mr.C(c,p),Us("preconnect",c,p)}function Ba(c,p,b){mr.L(c,p,b);var A=Ws;if(A&&c&&p){var N='link[rel="preload"][as="'+Uo(p)+'"]';p==="image"&&b&&b.imageSrcSet?(N+='[imagesrcset="'+Uo(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(N+='[imagesizes="'+Uo(b.imageSizes)+'"]')):N+='[href="'+Uo(c)+'"]';var V=N;switch(p){case"style":V=ms(c);break;case"script":V=ar(c)}In.has(V)||(c=v({rel:"preload",href:p==="image"&&b&&b.imageSrcSet?void 0:c,as:p},b),In.set(V,c),A.querySelector(N)!==null||p==="style"&&A.querySelector(ns(V))||p==="script"&&A.querySelector(Sr(V))||(p=A.createElement("link"),$s(p,"link",c),Bo(p),A.head.appendChild(p)))}}function Ga(c,p){mr.m(c,p);var b=Ws;if(b&&c){var A=p&&typeof p.as=="string"?p.as:"script",N='link[rel="modulepreload"][as="'+Uo(A)+'"][href="'+Uo(c)+'"]',V=N;switch(A){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":V=ar(c)}if(!In.has(V)&&(c=v({rel:"modulepreload",href:c},p),In.set(V,c),b.querySelector(N)===null)){switch(A){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(Sr(V)))return}A=b.createElement("link"),$s(A,"link",c),Bo(A),b.head.appendChild(A)}}}function sr(c,p,b){mr.S(c,p,b);var A=Ws;if(A&&c){var N=er(A).hoistableStyles,V=ms(c);p=p||"default";var se=N.get(V);if(!se){var Ae={loading:0,preload:null};if(se=A.querySelector(ns(V)))Ae.loading=5;else{c=v({rel:"stylesheet",href:c,"data-precedence":p},b),(b=In.get(V))&&vo(c,b);var Xe=se=A.createElement("link");Bo(Xe),$s(Xe,"link",c),Xe._p=new Promise(function(At,Kt){Xe.onload=At,Xe.onerror=Kt}),Xe.addEventListener("load",function(){Ae.loading|=1}),Xe.addEventListener("error",function(){Ae.loading|=2}),Ae.loading|=4,wa(se,p,A)}se={type:"stylesheet",instance:se,count:1,state:Ae},N.set(V,se)}}}function Pr(c,p){mr.X(c,p);var b=Ws;if(b&&c){var A=er(b).hoistableScripts,N=ar(c),V=A.get(N);V||(V=b.querySelector(Sr(N)),V||(c=v({src:c,async:!0},p),(p=In.get(N))&&vd(c,p),V=b.createElement("script"),Bo(V),$s(V,"link",c),b.head.appendChild(V)),V={type:"script",instance:V,count:1,state:null},A.set(N,V))}}function xa(c,p){mr.M(c,p);var b=Ws;if(b&&c){var A=er(b).hoistableScripts,N=ar(c),V=A.get(N);V||(V=b.querySelector(Sr(N)),V||(c=v({src:c,async:!0,type:"module"},p),(p=In.get(N))&&vd(c,p),V=b.createElement("script"),Bo(V),$s(V,"link",c),b.head.appendChild(V)),V={type:"script",instance:V,count:1,state:null},A.set(N,V))}}function qs(c,p,b,A){var N=(N=Vt.current)?di(N):null;if(!N)throw Error(i(446));switch(c){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(p=ms(b.href),b=er(N).hoistableStyles,A=b.get(p),A||(A={type:"style",instance:null,count:0,state:null},b.set(p,A)),A):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){c=ms(b.href);var V=er(N).hoistableStyles,se=V.get(c);if(se||(N=N.ownerDocument||N,se={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},V.set(c,se),(V=N.querySelector(ns(c)))&&!V._p&&(se.instance=V,se.state.loading=5),In.has(c)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},In.set(c,b),V||nl(N,c,b,se.state))),p&&A===null)throw Error(i(528,""));return se}if(p&&A!==null)throw Error(i(529,""));return null;case"script":return p=b.async,b=b.src,typeof b=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=ar(b),b=er(N).hoistableScripts,A=b.get(p),A||(A={type:"script",instance:null,count:0,state:null},b.set(p,A)),A):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,c))}}function ms(c){return'href="'+Uo(c)+'"'}function ns(c){return'link[rel="stylesheet"]['+c+"]"}function _l(c){return v({},c,{"data-precedence":c.precedence,precedence:null})}function nl(c,p,b,A){c.querySelector('link[rel="preload"][as="style"]['+p+"]")?A.loading=1:(p=c.createElement("link"),A.preload=p,p.addEventListener("load",function(){return A.loading|=1}),p.addEventListener("error",function(){return A.loading|=2}),$s(p,"link",b),Bo(p),c.head.appendChild(p))}function ar(c){return'[src="'+Uo(c)+'"]'}function Sr(c){return"script[async]"+c}function no(c,p,b){if(p.count++,p.instance===null)switch(p.type){case"style":var A=c.querySelector('style[data-href~="'+Uo(b.href)+'"]');if(A)return p.instance=A,Bo(A),A;var N=v({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return A=(c.ownerDocument||c).createElement("style"),Bo(A),$s(A,"style",N),wa(A,b.precedence,c),p.instance=A;case"stylesheet":N=ms(b.href);var V=c.querySelector(ns(N));if(V)return p.state.loading|=4,p.instance=V,Bo(V),V;A=_l(b),(N=In.get(N))&&vo(A,N),V=(c.ownerDocument||c).createElement("link"),Bo(V);var se=V;return se._p=new Promise(function(Ae,Xe){se.onload=Ae,se.onerror=Xe}),$s(V,"link",A),p.state.loading|=4,wa(V,b.precedence,c),p.instance=V;case"script":return V=ar(b.src),(N=c.querySelector(Sr(V)))?(p.instance=N,Bo(N),N):(A=b,(N=In.get(V))&&(A=v({},b),vd(A,N)),c=c.ownerDocument||c,N=c.createElement("script"),Bo(N),$s(N,"link",A),c.head.appendChild(N),p.instance=N);case"void":return null;default:throw Error(i(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(A=p.instance,p.state.loading|=4,wa(A,b.precedence,c));return p.instance}function wa(c,p,b){for(var A=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),N=A.length?A[A.length-1]:null,V=N,se=0;se<A.length;se++){var Ae=A[se];if(Ae.dataset.precedence===p)V=Ae;else if(V!==N)break}V?V.parentNode.insertBefore(c,V.nextSibling):(p=b.nodeType===9?b.head:b,p.insertBefore(c,p.firstChild))}function vo(c,p){c.crossOrigin==null&&(c.crossOrigin=p.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=p.referrerPolicy),c.title==null&&(c.title=p.title)}function vd(c,p){c.crossOrigin==null&&(c.crossOrigin=p.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=p.referrerPolicy),c.integrity==null&&(c.integrity=p.integrity)}var Sl=null;function nc(c,p,b){if(Sl===null){var A=new Map,N=Sl=new Map;N.set(b,A)}else N=Sl,A=N.get(b),A||(A=new Map,N.set(b,A));if(A.has(c))return A;for(A.set(c,null),b=b.getElementsByTagName(c),N=0;N<b.length;N++){var V=b[N];if(!(V[wr]||V[Wn]||c==="link"&&V.getAttribute("rel")==="stylesheet")&&V.namespaceURI!=="http://www.w3.org/2000/svg"){var se=V.getAttribute(p)||"";se=c+se;var Ae=A.get(se);Ae?Ae.push(V):A.set(se,[V])}}return A}function tu(c,p,b){c=c.ownerDocument||c,c.head.insertBefore(b,p==="title"?c.querySelector("head > title"):null)}function nu(c,p,b){if(b===1||p.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return c=p.disabled,typeof p.precedence=="string"&&c==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function Ds(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}function El(c,p,b,A){if(b.type==="stylesheet"&&(typeof A.media!="string"||matchMedia(A.media).matches!==!1)&&(b.state.loading&4)===0){if(b.instance===null){var N=ms(A.href),V=p.querySelector(ns(N));if(V){p=V._p,p!==null&&typeof p=="object"&&typeof p.then=="function"&&(c.count++,c=Ng.bind(c),p.then(c,c)),b.state.loading|=4,b.instance=V,Bo(V);return}V=p.ownerDocument||p,A=_l(A),(N=In.get(N))&&vo(A,N),V=V.createElement("link"),Bo(V);var se=V;se._p=new Promise(function(Ae,Xe){se.onload=Ae,se.onerror=Xe}),$s(V,"link",A),b.instance=V}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(b,p),(p=b.state.preload)&&(b.state.loading&3)===0&&(c.count++,b=Ng.bind(c),p.addEventListener("load",b),p.addEventListener("error",b))}}var sf=0;function Y0(c,p){return c.stylesheets&&c.count===0&&gp(c,c.stylesheets),0<c.count||0<c.imgCount?function(b){var A=setTimeout(function(){if(c.stylesheets&&gp(c,c.stylesheets),c.unsuspend){var V=c.unsuspend;c.unsuspend=null,V()}},6e4+p);0<c.imgBytes&&sf===0&&(sf=62500*u());var N=setTimeout(function(){if(c.waitingForImages=!1,c.count===0&&(c.stylesheets&&gp(c,c.stylesheets),c.unsuspend)){var V=c.unsuspend;c.unsuspend=null,V()}},(c.imgBytes>sf?50:800)+p);return c.unsuspend=b,function(){c.unsuspend=null,clearTimeout(A),clearTimeout(N)}}:null}function Ng(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)gp(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var pp=null;function gp(c,p){c.stylesheets=null,c.unsuspend!==null&&(c.count++,pp=new Map,p.forEach(Ic,c),pp=null,Ng.call(c))}function Ic(c,p){if(!(p.state.loading&4)){var b=pp.get(c);if(b)var A=b.get(null);else{b=new Map,pp.set(c,b);for(var N=c.querySelectorAll("link[data-precedence],style[data-precedence]"),V=0;V<N.length;V++){var se=N[V];(se.nodeName==="LINK"||se.getAttribute("media")!=="not all")&&(b.set(se.dataset.precedence,se),A=se)}A&&b.set(null,A)}N=p.instance,se=N.getAttribute("data-precedence"),V=b.get(se)||A,V===A&&b.set(null,N),b.set(se,N),this.count++,A=Ng.bind(this),N.addEventListener("load",A),N.addEventListener("error",A),V?V.parentNode.insertBefore(N,V.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(N,c.firstChild)),p.state.loading|=4}}var af={$$typeof:Y,Provider:null,Consumer:null,_currentValue:Re,_currentValue2:Re,_threadCount:0};function X0(c,p,b,A,N,V,se,Ae,Xe){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Je(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Je(0),this.hiddenUpdates=Je(null),this.identifierPrefix=A,this.onUncaughtError=N,this.onCaughtError=V,this.onRecoverableError=se,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Xe,this.incompleteTransitions=new Map}function J0(c,p,b,A,N,V,se,Ae,Xe,At,Kt,tn){return c=new X0(c,p,b,se,Xe,At,Kt,tn,Ae),p=1,V===!0&&(p|=24),V=rs(3,null,null,p),c.current=V,V.stateNode=c,p=ss(),p.refCount++,c.pooledCache=p,p.refCount++,V.memoizedState={element:A,isDehydrated:b,cache:p},En(V),c}function Q0(c){return c?(c=Bs,c):Bs}function eb(c,p,b,A,N,V){N=Q0(N),A.context===null?A.context=N:A.pendingContext=N,A=hn(p),A.payload={element:b},V=V===void 0?null:V,V!==null&&(A.callback=V),b=kn(c,A,p),b!==null&&(Oa(b,c,p),ci(b,c,p))}function tb(c,p){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var b=c.retryLane;c.retryLane=b!==0&&b<p?b:p}}function Fv(c,p){tb(c,p),(c=c.alternate)&&tb(c,p)}function nb(c){if(c.tag===13||c.tag===31){var p=gl(c,67108864);p!==null&&Oa(p,c,67108864),Fv(c,67108864)}}function ib(c){if(c.tag===13||c.tag===31){var p=Ql();p=Ct(p);var b=gl(c,p);b!==null&&Oa(b,c,p),Fv(c,p)}}var hy=!0;function ic(c,p,b,A){var N=fe.T;fe.T=null;var V=he.p;try{he.p=2,py(c,p,b,A)}finally{he.p=V,fe.T=N}}function fy(c,p,b,A){var N=fe.T;fe.T=null;var V=he.p;try{he.p=8,py(c,p,b,A)}finally{he.p=V,fe.T=N}}function py(c,p,b,A){if(hy){var N=Mv(A);if(N===null)Lg(c,p,A,gy,b),nC(c,A);else if(iC(N,c,p,b,A))A.stopPropagation();else if(nC(c,A),p&4&&-1<oE.indexOf(c)){for(;N!==null;){var V=Xr(N);if(V!==null)switch(V.tag){case 3:if(V=V.stateNode,V.current.memoizedState.isDehydrated){var se=je(V.pendingLanes);if(se!==0){var Ae=V;for(Ae.pendingLanes|=2,Ae.entangledLanes|=2;se;){var Xe=1<<31-fr(se);Ae.entanglements[1]|=Xe,se&=~Xe}Mc(V),(Lr&6)===0&&(Jh=ri()+500,up(0))}}break;case 31:case 13:Ae=gl(V,2),Ae!==null&&Oa(Ae,V,2),Rg(),Fv(V,2)}if(V=Mv(A),V===null&&Lg(c,p,A,gy,b),V===N)break;N=V}N!==null&&A.stopPropagation()}else Lg(c,p,A,null,b)}}function Mv(c){return c=Gn(c),Iv(c)}var gy=null;function Iv(c){if(gy=null,c=io(c),c!==null){var p=o(c);if(p===null)c=null;else{var b=p.tag;if(b===13){if(c=s(p),c!==null)return c;c=null}else if(b===31){if(c=a(p),c!==null)return c;c=null}else if(b===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;c=null}else p!==c&&(c=null)}}return gy=c,null}function na(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ji()){case Si:return 2;case lr:return 8;case Tt:case Ji:return 32;case Qi:return 268435456;default:return 32}default:return 32}}var il=!1,Rl=null,ia=null,Al=null,Tl=new Map,Lv=new Map,mp=[],oE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function nC(c,p){switch(c){case"focusin":case"focusout":Rl=null;break;case"dragenter":case"dragleave":ia=null;break;case"mouseover":case"mouseout":Al=null;break;case"pointerover":case"pointerout":Tl.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lv.delete(p.pointerId)}}function Bg(c,p,b,A,N,V){return c===null||c.nativeEvent!==V?(c={blockedOn:p,domEventName:b,eventSystemFlags:A,nativeEvent:V,targetContainers:[N]},p!==null&&(p=Xr(p),p!==null&&nb(p)),c):(c.eventSystemFlags|=A,p=c.targetContainers,N!==null&&p.indexOf(N)===-1&&p.push(N),c)}function iC(c,p,b,A,N){switch(p){case"focusin":return Rl=Bg(Rl,c,p,b,A,N),!0;case"dragenter":return ia=Bg(ia,c,p,b,A,N),!0;case"mouseover":return Al=Bg(Al,c,p,b,A,N),!0;case"pointerover":var V=N.pointerId;return Tl.set(V,Bg(Tl.get(V)||null,c,p,b,A,N)),!0;case"gotpointercapture":return V=N.pointerId,Lv.set(V,Bg(Lv.get(V)||null,c,p,b,A,N)),!0}return!1}function jx(c){var p=io(c.target);if(p!==null){var b=o(p);if(b!==null){if(p=b.tag,p===13){if(p=s(b),p!==null){c.blockedOn=p,Qn(c.priority,function(){ib(b)});return}}else if(p===31){if(p=a(b),p!==null){c.blockedOn=p,Qn(c.priority,function(){ib(b)});return}}else if(p===3&&b.stateNode.current.memoizedState.isDehydrated){c.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}c.blockedOn=null}function rb(c){if(c.blockedOn!==null)return!1;for(var p=c.targetContainers;0<p.length;){var b=Mv(c.nativeEvent);if(b===null){b=c.nativeEvent;var A=new b.constructor(b.type,b);ui=A,b.target.dispatchEvent(A),ui=null}else return p=Xr(b),p!==null&&nb(p),c.blockedOn=b,!1;p.shift()}return!0}function rC(c,p,b){rb(c)&&b.delete(p)}function sE(){il=!1,Rl!==null&&rb(Rl)&&(Rl=null),ia!==null&&rb(ia)&&(ia=null),Al!==null&&rb(Al)&&(Al=null),Tl.forEach(rC),Lv.forEach(rC)}function my(c,p){c.blockedOn===p&&(c.blockedOn=null,il||(il=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,sE)))}var ob=null;function oC(c){ob!==c&&(ob=c,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){ob===c&&(ob=null);for(var p=0;p<c.length;p+=3){var b=c[p],A=c[p+1],N=c[p+2];if(typeof A!="function"){if(Iv(A||b)===null)continue;break}var V=Xr(b);V!==null&&(c.splice(p,3),p-=3,cd(V,{pending:!0,data:N,method:b.method,action:A},A,N))}}))}function yy(c){function p(Xe){return my(Xe,c)}Rl!==null&&my(Rl,c),ia!==null&&my(ia,c),Al!==null&&my(Al,c),Tl.forEach(p),Lv.forEach(p);for(var b=0;b<mp.length;b++){var A=mp[b];A.blockedOn===c&&(A.blockedOn=null)}for(;0<mp.length&&(b=mp[0],b.blockedOn===null);)jx(b),b.blockedOn===null&&mp.shift();if(b=(c.ownerDocument||c).$$reactFormReplay,b!=null)for(A=0;A<b.length;A+=3){var N=b[A],V=b[A+1],se=N[xi]||null;if(typeof V=="function")se||oC(b);else if(se){var Ae=null;if(V&&V.hasAttribute("formAction")){if(N=V,se=V[xi]||null)Ae=se.formAction;else if(Iv(N)!==null)continue}else Ae=se.action;typeof Ae=="function"?b[A+1]=Ae:(b.splice(A,3),A-=3),oC(b)}}}function iu(){function c(V){V.canIntercept&&V.info==="react-transition"&&V.intercept({handler:function(){return new Promise(function(se){return N=se})},focusReset:"manual",scroll:"manual"})}function p(){N!==null&&(N(),N=null),A||setTimeout(b,20)}function b(){if(!A&&!navigation.transition){var V=navigation.currentEntry;V&&V.url!=null&&navigation.navigate(V.url,{state:V.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var A=!1,N=null;return navigation.addEventListener("navigate",c),navigation.addEventListener("navigatesuccess",p),navigation.addEventListener("navigateerror",p),setTimeout(b,100),function(){A=!0,navigation.removeEventListener("navigate",c),navigation.removeEventListener("navigatesuccess",p),navigation.removeEventListener("navigateerror",p),N!==null&&(N(),N=null)}}}function Ov(c){this._internalRoot=c}sb.prototype.render=Ov.prototype.render=function(c){var p=this._internalRoot;if(p===null)throw Error(i(409));var b=p.current,A=Ql();eb(b,A,c,p,null,null)},sb.prototype.unmount=Ov.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var p=c.containerInfo;eb(c.current,2,null,c,null,null),Rg(),p[Fi]=null}};function sb(c){this._internalRoot=c}sb.prototype.unstable_scheduleHydration=function(c){if(c){var p=$n();c={blockedOn:null,target:c,priority:p};for(var b=0;b<mp.length&&p!==0&&p<mp[b].priority;b++);mp.splice(b,0,c),b===0&&jx(c)}};var sC=t.version;if(sC!=="19.2.1")throw Error(i(527,sC,"19.2.1"));he.findDOMNode=function(c){var p=c._reactInternals;if(p===void 0)throw typeof c.render=="function"?Error(i(188)):(c=Object.keys(c).join(","),Error(i(268,c)));return c=h(p),c=c!==null?m(c):null,c=c===null?null:c.stateNode,c};var aE={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:fe,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ab=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ab.isDisabled&&ab.supportsFiber)try{ln=ab.inject(aE),Nn=ab}catch{}}return Vx.createRoot=function(c,p){if(!r(c))throw Error(i(299));var b=!1,A="",N=iv,V=rv,se=P0;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(A=p.identifierPrefix),p.onUncaughtError!==void 0&&(N=p.onUncaughtError),p.onCaughtError!==void 0&&(V=p.onCaughtError),p.onRecoverableError!==void 0&&(se=p.onRecoverableError)),p=J0(c,1,!1,null,null,b,A,null,N,V,se,iu),c[Fi]=p.current,Dv(c),new Ov(p)},Vx.hydrateRoot=function(c,p,b){if(!r(c))throw Error(i(299));var A=!1,N="",V=iv,se=rv,Ae=P0,Xe=null;return b!=null&&(b.unstable_strictMode===!0&&(A=!0),b.identifierPrefix!==void 0&&(N=b.identifierPrefix),b.onUncaughtError!==void 0&&(V=b.onUncaughtError),b.onCaughtError!==void 0&&(se=b.onCaughtError),b.onRecoverableError!==void 0&&(Ae=b.onRecoverableError),b.formState!==void 0&&(Xe=b.formState)),p=J0(c,1,!0,p,b??null,A,N,Xe,V,se,Ae,iu),p.context=Q0(null),b=p.current,A=Ql(),A=Ct(A),N=hn(A),N.callback=null,kn(b,N,A),b=A,p.current.lanes=b,nt(p,b),Mc(p),c[Fi]=p.current,Dv(c),new sb(p)},Vx.version="19.2.1",Vx}var _M;function n$(){if(_M)return hE.exports;_M=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),hE.exports=t$(),hE.exports}var i$=n$();const r$=Ol(i$);/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var SM="popstate";function o$(e={}){function t(i,r){let{pathname:o,search:s,hash:a}=i.location;return nT("",{pathname:o,search:s,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:Bw(r)}return a$(t,n,null,e)}function Ls(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function vh(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function s$(){return Math.random().toString(36).substring(2,10)}function EM(e,t){return{usr:e.state,key:e.key,idx:t}}function nT(e,t,n=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?cx(t):t,state:n,key:t&&t.key||i||s$()}}function Bw({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function cx(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function a$(e,t,n,i={}){let{window:r=document.defaultView,v5Compat:o=!1}=i,s=r.history,a="POP",d=null,h=m();h==null&&(h=0,s.replaceState({...s.state,idx:h},""));function m(){return(s.state||{idx:null}).idx}function v(){a="POP";let z=m(),$=z==null?null:z-h;h=z,d&&d({action:a,location:O.location,delta:$})}function w(z,$){a="PUSH";let U=nT(O.location,z,$);h=m()+1;let Y=EM(U,h),X=O.createHref(U);try{s.pushState(Y,"",X)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;r.location.assign(X)}o&&d&&d({action:a,location:O.location,delta:1})}function R(z,$){a="REPLACE";let U=nT(O.location,z,$);h=m();let Y=EM(U,h),X=O.createHref(U);s.replaceState(Y,"",X),o&&d&&d({action:a,location:O.location,delta:0})}function L(z){return l$(z)}let O={get action(){return a},get location(){return e(r,s)},listen(z){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(SM,v),d=z,()=>{r.removeEventListener(SM,v),d=null}},createHref(z){return t(r,z)},createURL:L,encodeLocation(z){let $=L(z);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:w,replace:R,go(z){return s.go(z)}};return O}function l$(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ls(n,"No window.location.(origin|href) available to create URL");let i=typeof e=="string"?e:Bw(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function W6(e,t,n="/"){return u$(e,t,n,!1)}function u$(e,t,n,i){let r=typeof t=="string"?cx(t):t,o=sm(r.pathname||"/",n);if(o==null)return null;let s=U6(e);c$(s);let a=null;for(let d=0;a==null&&d<s.length;++d){let h=w$(o);a=b$(s[d],h,i)}return a}function U6(e,t=[],n=[],i="",r=!1){let o=(s,a,d=r,h)=>{let m={relativePath:h===void 0?s.path||"":h,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(i)&&d)return;Ls(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length)}let v=Jg([i,m.relativePath]),w=n.concat(m);s.children&&s.children.length>0&&(Ls(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),U6(s.children,t,w,v,d)),!(s.path==null&&!s.index)&&t.push({path:v,score:y$(v,s.index),routesMeta:w})};return e.forEach((s,a)=>{var d;if(s.path===""||!((d=s.path)!=null&&d.includes("?")))o(s,a);else for(let h of q6(s.path))o(s,a,!0,h)}),t}function q6(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let s=q6(i.join("/")),a=[];return a.push(...s.map(d=>d===""?o:[o,d].join("/"))),r&&a.push(...s),a.map(d=>e.startsWith("/")&&d===""?"/":d)}function c$(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:v$(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var d$=/^:[\w-]+$/,h$=3,f$=2,p$=1,g$=10,m$=-2,RM=e=>e==="*";function y$(e,t){let n=e.split("/"),i=n.length;return n.some(RM)&&(i+=m$),t&&(i+=f$),n.filter(r=>!RM(r)).reduce((r,o)=>r+(d$.test(o)?h$:o===""?p$:g$),i)}function v$(e,t){return e.length===t.length&&e.slice(0,-1).every((i,r)=>i===t[r])?e[e.length-1]-t[t.length-1]:0}function b$(e,t,n=!1){let{routesMeta:i}=e,r={},o="/",s=[];for(let a=0;a<i.length;++a){let d=i[a],h=a===i.length-1,m=o==="/"?t:t.slice(o.length)||"/",v=__({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},m),w=d.route;if(!v&&h&&n&&!i[i.length-1].route.index&&(v=__({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},m)),!v)return null;Object.assign(r,v.params),s.push({params:r,pathname:Jg([o,v.pathname]),pathnameBase:R$(Jg([o,v.pathnameBase])),route:w}),v.pathnameBase!=="/"&&(o=Jg([o,v.pathnameBase]))}return s}function __(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=x$(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let o=r[0],s=o.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((h,{paramName:m,isOptional:v},w)=>{if(m==="*"){let L=a[w]||"";s=o.slice(0,o.length-L.length).replace(/(.)\/+$/,"$1")}const R=a[w];return v&&!R?h[m]=void 0:h[m]=(R||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:s,pattern:e}}function x$(e,t=!1,n=!0){vh(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,d)=>(i.push({paramName:a,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(i.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),i]}function w$(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return vh(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function sm(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}var C$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_$=e=>C$.test(e);function S$(e,t="/"){let{pathname:n,search:i="",hash:r=""}=typeof e=="string"?cx(e):e,o;if(n)if(_$(n))o=n;else{if(n.includes("//")){let s=n;n=n.replace(/\/\/+/g,"/"),vh(!1,`Pathnames cannot have embedded double slashes - normalizing ${s} -> ${n}`)}n.startsWith("/")?o=AM(n.substring(1),"/"):o=AM(n,t)}else o=t;return{pathname:o,search:A$(i),hash:T$(r)}}function AM(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function mE(e,t,n,i){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function E$(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function tP(e){let t=E$(e);return t.map((n,i)=>i===t.length-1?n.pathname:n.pathnameBase)}function nP(e,t,n,i=!1){let r;typeof e=="string"?r=cx(e):(r={...e},Ls(!r.pathname||!r.pathname.includes("?"),mE("?","pathname","search",r)),Ls(!r.pathname||!r.pathname.includes("#"),mE("#","pathname","hash",r)),Ls(!r.search||!r.search.includes("#"),mE("#","search","hash",r)));let o=e===""||r.pathname==="",s=o?"/":r.pathname,a;if(s==null)a=n;else{let v=t.length-1;if(!i&&s.startsWith("..")){let w=s.split("/");for(;w[0]==="..";)w.shift(),v-=1;r.pathname=w.join("/")}a=v>=0?t[v]:"/"}let d=S$(r,a),h=s&&s!=="/"&&s.endsWith("/"),m=(o||s===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(h||m)&&(d.pathname+="/"),d}var Jg=e=>e.join("/").replace(/\/\/+/g,"/"),R$=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),A$=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,T$=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function k$(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function P$(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var K6=["POST","PUT","PATCH","DELETE"];new Set(K6);var D$=["GET",...K6];new Set(D$);var dx=I.createContext(null);dx.displayName="DataRouter";var ZS=I.createContext(null);ZS.displayName="DataRouterState";I.createContext(!1);var Z6=I.createContext({isTransitioning:!1});Z6.displayName="ViewTransition";var F$=I.createContext(new Map);F$.displayName="Fetchers";var M$=I.createContext(null);M$.displayName="Await";var Eh=I.createContext(null);Eh.displayName="Navigation";var y1=I.createContext(null);y1.displayName="Location";var Hp=I.createContext({outlet:null,matches:[],isDataRoute:!1});Hp.displayName="Route";var iP=I.createContext(null);iP.displayName="RouteError";function I$(e,{relative:t}={}){Ls(hx(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=I.useContext(Eh),{hash:r,pathname:o,search:s}=b1(e,{relative:t}),a=o;return n!=="/"&&(a=o==="/"?n:Jg([n,o])),i.createHref({pathname:a,search:s,hash:r})}function hx(){return I.useContext(y1)!=null}function By(){return Ls(hx(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(y1).location}var Y6="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function X6(e){I.useContext(Eh).static||I.useLayoutEffect(e)}function v1(){let{isDataRoute:e}=I.useContext(Hp);return e?q$():L$()}function L$(){Ls(hx(),"useNavigate() may be used only in the context of a <Router> component.");let e=I.useContext(dx),{basename:t,navigator:n}=I.useContext(Eh),{matches:i}=I.useContext(Hp),{pathname:r}=By(),o=JSON.stringify(tP(i)),s=I.useRef(!1);return X6(()=>{s.current=!0}),I.useCallback((d,h={})=>{if(vh(s.current,Y6),!s.current)return;if(typeof d=="number"){n.go(d);return}let m=nP(d,JSON.parse(o),r,h.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Jg([t,m.pathname])),(h.replace?n.replace:n.push)(m,h.state,h)},[t,n,o,r,e])}I.createContext(null);function b1(e,{relative:t}={}){let{matches:n}=I.useContext(Hp),{pathname:i}=By(),r=JSON.stringify(tP(n));return I.useMemo(()=>nP(e,JSON.parse(r),i,t==="path"),[e,r,i,t])}function O$(e,t){return J6(e,t)}function J6(e,t,n,i,r){var U;Ls(hx(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=I.useContext(Eh),{matches:s}=I.useContext(Hp),a=s[s.length-1],d=a?a.params:{},h=a?a.pathname:"/",m=a?a.pathnameBase:"/",v=a&&a.route;{let Y=v&&v.path||"";Q6(h,!v||Y.endsWith("*")||Y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${Y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Y}"> to <Route path="${Y==="/"?"*":`${Y}/*`}">.`)}let w=By(),R;if(t){let Y=typeof t=="string"?cx(t):t;Ls(m==="/"||((U=Y.pathname)==null?void 0:U.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${Y.pathname}" was given in the \`location\` prop.`),R=Y}else R=w;let L=R.pathname||"/",O=L;if(m!=="/"){let Y=m.replace(/^\//,"").split("/");O="/"+L.replace(/^\//,"").split("/").slice(Y.length).join("/")}let z=W6(e,{pathname:O});vh(v||z!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),vh(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let $=j$(z&&z.map(Y=>Object.assign({},Y,{params:Object.assign({},d,Y.params),pathname:Jg([m,o.encodeLocation?o.encodeLocation(Y.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?m:Jg([m,o.encodeLocation?o.encodeLocation(Y.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathnameBase])})),s,n,i,r);return t&&$?I.createElement(y1.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},$):$}function z$(){let e=U$(),t=k$(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=I.createElement(I.Fragment,null,I.createElement("p",null," Hey developer "),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:o},"ErrorBoundary")," or"," ",I.createElement("code",{style:o},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},t),n?I.createElement("pre",{style:r},n):null,s)}var N$=I.createElement(z$,null),B$=class extends I.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?I.createElement(Hp.Provider,{value:this.props.routeContext},I.createElement(iP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function G$({routeContext:e,match:t,children:n}){let i=I.useContext(dx);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),I.createElement(Hp.Provider,{value:e},n)}function j$(e,t=[],n=null,i=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,s=n==null?void 0:n.errors;if(s!=null){let m=o.findIndex(v=>v.route.id&&(s==null?void 0:s[v.route.id])!==void 0);Ls(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),o=o.slice(0,Math.min(o.length,m+1))}let a=!1,d=-1;if(n)for(let m=0;m<o.length;m++){let v=o[m];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(d=m),v.route.id){let{loaderData:w,errors:R}=n,L=v.route.loader&&!w.hasOwnProperty(v.route.id)&&(!R||R[v.route.id]===void 0);if(v.route.lazy||L){a=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let h=n&&i?(m,v)=>{var w,R;i(m,{location:n.location,params:((R=(w=n.matches)==null?void 0:w[0])==null?void 0:R.params)??{},unstable_pattern:P$(n.matches),errorInfo:v})}:void 0;return o.reduceRight((m,v,w)=>{let R,L=!1,O=null,z=null;n&&(R=s&&v.route.id?s[v.route.id]:void 0,O=v.route.errorElement||N$,a&&(d<0&&w===0?(Q6("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),L=!0,z=null):d===w&&(L=!0,z=v.route.hydrateFallbackElement||null)));let $=t.concat(o.slice(0,w+1)),U=()=>{let Y;return R?Y=O:L?Y=z:v.route.Component?Y=I.createElement(v.route.Component,null):v.route.element?Y=v.route.element:Y=m,I.createElement(G$,{match:v,routeContext:{outlet:m,matches:$,isDataRoute:n!=null},children:Y})};return n&&(v.route.ErrorBoundary||v.route.errorElement||w===0)?I.createElement(B$,{location:n.location,revalidation:n.revalidation,component:O,error:R,children:U(),routeContext:{outlet:null,matches:$,isDataRoute:!0},onError:h}):U()},null)}function rP(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function H$(e){let t=I.useContext(dx);return Ls(t,rP(e)),t}function V$(e){let t=I.useContext(ZS);return Ls(t,rP(e)),t}function $$(e){let t=I.useContext(Hp);return Ls(t,rP(e)),t}function oP(e){let t=$$(e),n=t.matches[t.matches.length-1];return Ls(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function W$(){return oP("useRouteId")}function U$(){var i;let e=I.useContext(iP),t=V$("useRouteError"),n=oP("useRouteError");return e!==void 0?e:(i=t.errors)==null?void 0:i[n]}function q$(){let{router:e}=H$("useNavigate"),t=oP("useNavigate"),n=I.useRef(!1);return X6(()=>{n.current=!0}),I.useCallback(async(r,o={})=>{vh(n.current,Y6),n.current&&(typeof r=="number"?await e.navigate(r):await e.navigate(r,{fromRouteId:t,...o}))},[e,t])}var TM={};function Q6(e,t,n){!t&&!TM[e]&&(TM[e]=!0,vh(!1,n))}I.memo(K$);function K$({routes:e,future:t,state:n,unstable_onError:i}){return J6(e,void 0,n,i,t)}function kM({to:e,replace:t,state:n,relative:i}){Ls(hx(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=I.useContext(Eh);vh(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=I.useContext(Hp),{pathname:s}=By(),a=v1(),d=nP(e,tP(o),s,i==="path"),h=JSON.stringify(d);return I.useEffect(()=>{a(JSON.parse(h),{replace:t,state:n,relative:i})},[a,h,i,t,n]),null}function mb(e){Ls(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Z$({basename:e="/",children:t=null,location:n,navigationType:i="POP",navigator:r,static:o=!1,unstable_useTransitions:s}){Ls(!hx(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=e.replace(/^\/*/,"/"),d=I.useMemo(()=>({basename:a,navigator:r,static:o,unstable_useTransitions:s,future:{}}),[a,r,o,s]);typeof n=="string"&&(n=cx(n));let{pathname:h="/",search:m="",hash:v="",state:w=null,key:R="default"}=n,L=I.useMemo(()=>{let O=sm(h,a);return O==null?null:{location:{pathname:O,search:m,hash:v,state:w,key:R},navigationType:i}},[a,h,m,v,w,R,i]);return vh(L!=null,`<Router basename="${a}"> is not able to match the URL "${h}${m}${v}" because it does not start with the basename, so the <Router> won't render anything.`),L==null?null:I.createElement(Eh.Provider,{value:d},I.createElement(y1.Provider,{children:t,value:L}))}function Y$({children:e,location:t}){return O$(iT(e),t)}function iT(e,t=[]){let n=[];return I.Children.forEach(e,(i,r)=>{if(!I.isValidElement(i))return;let o=[...t,r];if(i.type===I.Fragment){n.push.apply(n,iT(i.props.children,o));return}Ls(i.type===mb,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ls(!i.props.index||!i.props.children,"An index route cannot have child routes.");let s={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(s.children=iT(i.props.children,o)),n.push(s)}),n}var UC="get",qC="application/x-www-form-urlencoded";function YS(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function X$(e){return YS(e)&&e.tagName.toLowerCase()==="button"}function J$(e){return YS(e)&&e.tagName.toLowerCase()==="form"}function Q$(e){return YS(e)&&e.tagName.toLowerCase()==="input"}function eW(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function tW(e,t){return e.button===0&&(!t||t==="_self")&&!eW(e)}var lC=null;function nW(){if(lC===null)try{new FormData(document.createElement("form"),0),lC=!1}catch{lC=!0}return lC}var iW=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function yE(e){return e!=null&&!iW.has(e)?(vh(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qC}"`),null):e}function rW(e,t){let n,i,r,o,s;if(J$(e)){let a=e.getAttribute("action");i=a?sm(a,t):null,n=e.getAttribute("method")||UC,r=yE(e.getAttribute("enctype"))||qC,o=new FormData(e)}else if(X$(e)||Q$(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||a.getAttribute("action");if(i=d?sm(d,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||UC,r=yE(e.getAttribute("formenctype"))||yE(a.getAttribute("enctype"))||qC,o=new FormData(a,e),!nW()){let{name:h,type:m,value:v}=e;if(m==="image"){let w=h?`${h}.`:"";o.append(`${w}x`,"0"),o.append(`${w}y`,"0")}else h&&o.append(h,v)}}else{if(YS(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=UC,i=null,r=qC,s=e}return o&&r==="text/plain"&&(s=o,o=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:o,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function sP(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function oW(e,t,n){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return i.pathname==="/"?i.pathname=`_root.${n}`:t&&sm(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function sW(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function aW(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function lW(e,t,n){let i=await Promise.all(e.map(async r=>{let o=t.routes[r.route.id];if(o){let s=await sW(o,n);return s.links?s.links():[]}return[]}));return hW(i.flat(1).filter(aW).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function PM(e,t,n,i,r,o){let s=(d,h)=>n[h]?d.route.id!==n[h].route.id:!0,a=(d,h)=>{var m;return n[h].pathname!==d.pathname||((m=n[h].route.path)==null?void 0:m.endsWith("*"))&&n[h].params["*"]!==d.params["*"]};return o==="assets"?t.filter((d,h)=>s(d,h)||a(d,h)):o==="data"?t.filter((d,h)=>{var v;let m=i.routes[d.route.id];if(!m||!m.hasLoader)return!1;if(s(d,h)||a(d,h))return!0;if(d.route.shouldRevalidate){let w=d.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((v=n[0])==null?void 0:v.params)||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function uW(e,t,{includeHydrateFallback:n}={}){return cW(e.map(i=>{let r=t.routes[i.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function cW(e){return[...new Set(e)]}function dW(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}function hW(e,t){let n=new Set;return new Set(t),e.reduce((i,r)=>{let o=JSON.stringify(dW(r));return n.has(o)||(n.add(o),i.push({key:o,link:r})),i},[])}function ez(){let e=I.useContext(dx);return sP(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function fW(){let e=I.useContext(ZS);return sP(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var aP=I.createContext(void 0);aP.displayName="FrameworkContext";function tz(){let e=I.useContext(aP);return sP(e,"You must render this element inside a <HydratedRouter> element"),e}function pW(e,t){let n=I.useContext(aP),[i,r]=I.useState(!1),[o,s]=I.useState(!1),{onFocus:a,onBlur:d,onMouseEnter:h,onMouseLeave:m,onTouchStart:v}=t,w=I.useRef(null);I.useEffect(()=>{if(e==="render"&&s(!0),e==="viewport"){let O=$=>{$.forEach(U=>{s(U.isIntersecting)})},z=new IntersectionObserver(O,{threshold:.5});return w.current&&z.observe(w.current),()=>{z.disconnect()}}},[e]),I.useEffect(()=>{if(i){let O=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(O)}}},[i]);let R=()=>{r(!0)},L=()=>{r(!1),s(!1)};return n?e!=="intent"?[o,w,{}]:[o,w,{onFocus:$x(a,R),onBlur:$x(d,L),onMouseEnter:$x(h,R),onMouseLeave:$x(m,L),onTouchStart:$x(v,R)}]:[!1,w,{}]}function $x(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function gW({page:e,...t}){let{router:n}=ez(),i=I.useMemo(()=>W6(n.routes,e,n.basename),[n.routes,e,n.basename]);return i?I.createElement(yW,{page:e,matches:i,...t}):null}function mW(e){let{manifest:t,routeModules:n}=tz(),[i,r]=I.useState([]);return I.useEffect(()=>{let o=!1;return lW(e,t,n).then(s=>{o||r(s)}),()=>{o=!0}},[e,t,n]),i}function yW({page:e,matches:t,...n}){let i=By(),{manifest:r,routeModules:o}=tz(),{basename:s}=ez(),{loaderData:a,matches:d}=fW(),h=I.useMemo(()=>PM(e,t,d,r,i,"data"),[e,t,d,r,i]),m=I.useMemo(()=>PM(e,t,d,r,i,"assets"),[e,t,d,r,i]),v=I.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let L=new Set,O=!1;if(t.forEach($=>{var Y;let U=r.routes[$.route.id];!U||!U.hasLoader||(!h.some(X=>X.route.id===$.route.id)&&$.route.id in a&&((Y=o[$.route.id])!=null&&Y.shouldRevalidate)||U.hasClientLoader?O=!0:L.add($.route.id))}),L.size===0)return[];let z=oW(e,s,"data");return O&&L.size>0&&z.searchParams.set("_routes",t.filter($=>L.has($.route.id)).map($=>$.route.id).join(",")),[z.pathname+z.search]},[s,a,i,r,h,t,e,o]),w=I.useMemo(()=>uW(m,r),[m,r]),R=mW(m);return I.createElement(I.Fragment,null,v.map(L=>I.createElement("link",{key:L,rel:"prefetch",as:"fetch",href:L,...n})),w.map(L=>I.createElement("link",{key:L,rel:"modulepreload",href:L,...n})),R.map(({key:L,link:O})=>I.createElement("link",{key:L,nonce:n.nonce,...O})))}function vW(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var nz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{nz&&(window.__reactRouterVersion="7.10.1")}catch{}function bW({basename:e,children:t,unstable_useTransitions:n,window:i}){let r=I.useRef();r.current==null&&(r.current=o$({window:i,v5Compat:!0}));let o=r.current,[s,a]=I.useState({action:o.action,location:o.location}),d=I.useCallback(h=>{n===!1?a(h):I.startTransition(()=>a(h))},[n]);return I.useLayoutEffect(()=>o.listen(d),[o,d]),I.createElement(Z$,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:o,unstable_useTransitions:n===!0})}var iz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rz=I.forwardRef(function({onClick:t,discover:n="render",prefetch:i="none",relative:r,reloadDocument:o,replace:s,state:a,target:d,to:h,preventScrollReset:m,viewTransition:v,...w},R){let{basename:L,unstable_useTransitions:O}=I.useContext(Eh),z=typeof h=="string"&&iz.test(h),$,U=!1;if(typeof h=="string"&&z&&($=h,nz))try{let be=new URL(window.location.href),ue=h.startsWith("//")?new URL(be.protocol+h):new URL(h),ve=sm(ue.pathname,L);ue.origin===be.origin&&ve!=null?h=ve+ue.search+ue.hash:U=!0}catch{vh(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Y=I$(h,{relative:r}),[X,q,ie]=pW(i,w),re=_W(h,{replace:s,state:a,target:d,preventScrollReset:m,relative:r,viewTransition:v,unstable_useTransitions:O});function J(be){t&&t(be),be.defaultPrevented||re(be)}let ne=I.createElement("a",{...w,...ie,href:$||Y,onClick:U||o?t:J,ref:vW(R,q),target:d,"data-discover":!z&&n==="render"?"true":void 0});return X&&!z?I.createElement(I.Fragment,null,ne,I.createElement(gW,{page:Y})):ne});rz.displayName="Link";var xW=I.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:i="",end:r=!1,style:o,to:s,viewTransition:a,children:d,...h},m){let v=b1(s,{relative:h.relative}),w=By(),R=I.useContext(ZS),{navigator:L,basename:O}=I.useContext(Eh),z=R!=null&&TW(v)&&a===!0,$=L.encodeLocation?L.encodeLocation(v).pathname:v.pathname,U=w.pathname,Y=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;n||(U=U.toLowerCase(),Y=Y?Y.toLowerCase():null,$=$.toLowerCase()),Y&&O&&(Y=sm(Y,O)||Y);const X=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let q=U===$||!r&&U.startsWith($)&&U.charAt(X)==="/",ie=Y!=null&&(Y===$||!r&&Y.startsWith($)&&Y.charAt($.length)==="/"),re={isActive:q,isPending:ie,isTransitioning:z},J=q?t:void 0,ne;typeof i=="function"?ne=i(re):ne=[i,q?"active":null,ie?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let be=typeof o=="function"?o(re):o;return I.createElement(rz,{...h,"aria-current":J,className:ne,ref:m,style:be,to:s,viewTransition:a},typeof d=="function"?d(re):d)});xW.displayName="NavLink";var wW=I.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:i,replace:r,state:o,method:s=UC,action:a,onSubmit:d,relative:h,preventScrollReset:m,viewTransition:v,...w},R)=>{let{unstable_useTransitions:L}=I.useContext(Eh),O=RW(),z=AW(a,{relative:h}),$=s.toLowerCase()==="get"?"get":"post",U=typeof a=="string"&&iz.test(a),Y=X=>{if(d&&d(X),X.defaultPrevented)return;X.preventDefault();let q=X.nativeEvent.submitter,ie=(q==null?void 0:q.getAttribute("formmethod"))||s,re=()=>O(q||X.currentTarget,{fetcherKey:t,method:ie,navigate:n,replace:r,state:o,relative:h,preventScrollReset:m,viewTransition:v});L&&n!==!1?I.startTransition(()=>re()):re()};return I.createElement("form",{ref:R,method:$,action:z,onSubmit:i?d:Y,...w,"data-discover":!U&&e==="render"?"true":void 0})});wW.displayName="Form";function CW(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function oz(e){let t=I.useContext(dx);return Ls(t,CW(e)),t}function _W(e,{target:t,replace:n,state:i,preventScrollReset:r,relative:o,viewTransition:s,unstable_useTransitions:a}={}){let d=v1(),h=By(),m=b1(e,{relative:o});return I.useCallback(v=>{if(tW(v,t)){v.preventDefault();let w=n!==void 0?n:Bw(h)===Bw(m),R=()=>d(e,{replace:w,state:i,preventScrollReset:r,relative:o,viewTransition:s});a?I.startTransition(()=>R()):R()}},[h,d,m,n,i,t,e,r,o,s,a])}var SW=0,EW=()=>`__${String(++SW)}__`;function RW(){let{router:e}=oz("useSubmit"),{basename:t}=I.useContext(Eh),n=W$(),i=e.fetch,r=e.navigate;return I.useCallback(async(o,s={})=>{let{action:a,method:d,encType:h,formData:m,body:v}=rW(o,t);if(s.navigate===!1){let w=s.fetcherKey||EW();await i(w,n,s.action||a,{preventScrollReset:s.preventScrollReset,formData:m,body:v,formMethod:s.method||d,formEncType:s.encType||h,flushSync:s.flushSync})}else await r(s.action||a,{preventScrollReset:s.preventScrollReset,formData:m,body:v,formMethod:s.method||d,formEncType:s.encType||h,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[i,r,t,n])}function AW(e,{relative:t}={}){let{basename:n}=I.useContext(Eh),i=I.useContext(Hp);Ls(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),o={...b1(e||".",{relative:t})},s=By();if(e==null){o.search=s.search;let a=new URLSearchParams(o.search),d=a.getAll("index");if(d.some(m=>m==="")){a.delete("index"),d.filter(v=>v).forEach(v=>a.append("index",v));let m=a.toString();o.search=m?`?${m}`:""}}return(!e||e===".")&&r.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Jg([n,o.pathname])),Bw(o)}function TW(e,{relative:t}={}){let n=I.useContext(Z6);Ls(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=oz("useViewTransitionState"),r=b1(e,{relative:t});if(!n.isTransitioning)return!1;let o=sm(n.currentLocation.pathname,i)||n.currentLocation.pathname,s=sm(n.nextLocation.pathname,i)||n.nextLocation.pathname;return __(r.pathname,s)!=null||__(r.pathname,o)!=null}var b0=$6();const kW=Ol(b0);var uC={exports:{}},DM;function PW(){if(DM)return uC.exports;DM=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(q,ie,re){return Function.prototype.apply.call(q,ie,re)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(q){return Object.getOwnPropertyNames(q).concat(Object.getOwnPropertySymbols(q))}:n=function(q){return Object.getOwnPropertyNames(q)};function i(X){console&&console.warn&&console.warn(X)}var r=Number.isNaN||function(q){return q!==q};function o(){o.init.call(this)}uC.exports=o,uC.exports.once=$,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(X){if(typeof X!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof X)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(X){if(typeof X!="number"||X<0||r(X))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+X+".");s=X}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(q){if(typeof q!="number"||q<0||r(q))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+q+".");return this._maxListeners=q,this};function d(X){return X._maxListeners===void 0?o.defaultMaxListeners:X._maxListeners}o.prototype.getMaxListeners=function(){return d(this)},o.prototype.emit=function(q){for(var ie=[],re=1;re<arguments.length;re++)ie.push(arguments[re]);var J=q==="error",ne=this._events;if(ne!==void 0)J=J&&ne.error===void 0;else if(!J)return!1;if(J){var be;if(ie.length>0&&(be=ie[0]),be instanceof Error)throw be;var ue=new Error("Unhandled error."+(be?" ("+be.message+")":""));throw ue.context=be,ue}var ve=ne[q];if(ve===void 0)return!1;if(typeof ve=="function")t(ve,this,ie);else for(var ce=ve.length,Ie=L(ve,ce),re=0;re<ce;++re)t(Ie[re],this,ie);return!0};function h(X,q,ie,re){var J,ne,be;if(a(ie),ne=X._events,ne===void 0?(ne=X._events=Object.create(null),X._eventsCount=0):(ne.newListener!==void 0&&(X.emit("newListener",q,ie.listener?ie.listener:ie),ne=X._events),be=ne[q]),be===void 0)be=ne[q]=ie,++X._eventsCount;else if(typeof be=="function"?be=ne[q]=re?[ie,be]:[be,ie]:re?be.unshift(ie):be.push(ie),J=d(X),J>0&&be.length>J&&!be.warned){be.warned=!0;var ue=new Error("Possible EventEmitter memory leak detected. "+be.length+" "+String(q)+" listeners added. Use emitter.setMaxListeners() to increase limit");ue.name="MaxListenersExceededWarning",ue.emitter=X,ue.type=q,ue.count=be.length,i(ue)}return X}o.prototype.addListener=function(q,ie){return h(this,q,ie,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(q,ie){return h(this,q,ie,!0)};function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function v(X,q,ie){var re={fired:!1,wrapFn:void 0,target:X,type:q,listener:ie},J=m.bind(re);return J.listener=ie,re.wrapFn=J,J}o.prototype.once=function(q,ie){return a(ie),this.on(q,v(this,q,ie)),this},o.prototype.prependOnceListener=function(q,ie){return a(ie),this.prependListener(q,v(this,q,ie)),this},o.prototype.removeListener=function(q,ie){var re,J,ne,be,ue;if(a(ie),J=this._events,J===void 0)return this;if(re=J[q],re===void 0)return this;if(re===ie||re.listener===ie)--this._eventsCount===0?this._events=Object.create(null):(delete J[q],J.removeListener&&this.emit("removeListener",q,re.listener||ie));else if(typeof re!="function"){for(ne=-1,be=re.length-1;be>=0;be--)if(re[be]===ie||re[be].listener===ie){ue=re[be].listener,ne=be;break}if(ne<0)return this;ne===0?re.shift():O(re,ne),re.length===1&&(J[q]=re[0]),J.removeListener!==void 0&&this.emit("removeListener",q,ue||ie)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(q){var ie,re,J;if(re=this._events,re===void 0)return this;if(re.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):re[q]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete re[q]),this;if(arguments.length===0){var ne=Object.keys(re),be;for(J=0;J<ne.length;++J)be=ne[J],be!=="removeListener"&&this.removeAllListeners(be);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(ie=re[q],typeof ie=="function")this.removeListener(q,ie);else if(ie!==void 0)for(J=ie.length-1;J>=0;J--)this.removeListener(q,ie[J]);return this};function w(X,q,ie){var re=X._events;if(re===void 0)return[];var J=re[q];return J===void 0?[]:typeof J=="function"?ie?[J.listener||J]:[J]:ie?z(J):L(J,J.length)}o.prototype.listeners=function(q){return w(this,q,!0)},o.prototype.rawListeners=function(q){return w(this,q,!1)},o.listenerCount=function(X,q){return typeof X.listenerCount=="function"?X.listenerCount(q):R.call(X,q)},o.prototype.listenerCount=R;function R(X){var q=this._events;if(q!==void 0){var ie=q[X];if(typeof ie=="function")return 1;if(ie!==void 0)return ie.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function L(X,q){for(var ie=new Array(q),re=0;re<q;++re)ie[re]=X[re];return ie}function O(X,q){for(;q+1<X.length;q++)X[q]=X[q+1];X.pop()}function z(X){for(var q=new Array(X.length),ie=0;ie<q.length;++ie)q[ie]=X[ie].listener||X[ie];return q}function $(X,q){return new Promise(function(ie,re){function J(be){X.removeListener(q,ne),re(be)}function ne(){typeof X.removeListener=="function"&&X.removeListener("error",J),ie([].slice.call(arguments))}Y(X,q,ne,{once:!0}),q!=="error"&&U(X,J,{once:!0})})}function U(X,q,ie){typeof X.on=="function"&&Y(X,"error",q,ie)}function Y(X,q,ie,re){if(typeof X.on=="function")re.once?X.once(q,ie):X.on(q,ie);else if(typeof X.addEventListener=="function")X.addEventListener(q,function J(ne){re.once&&X.removeEventListener(q,J),ie(ne)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof X)}return uC.exports}var lP=PW();function DW(){const e=arguments[0];for(let t=1,n=arguments.length;t<n;t++)if(arguments[t])for(const i in arguments[t])e[i]=arguments[t][i];return e}let ol=DW;typeof Object.assign=="function"&&(ol=Object.assign);function mh(e,t,n,i){const r=e._nodes.get(t);let o=null;return r&&(i==="mixed"?o=r.out&&r.out[n]||r.undirected&&r.undirected[n]:i==="directed"?o=r.out&&r.out[n]:o=r.undirected&&r.undirected[n]),o}function ou(e){return typeof e=="object"&&e!==null}function sz(e){let t;for(t in e)return!1;return!0}function rh(e,t,n){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!0,value:n})}function uf(e,t,n){const i={enumerable:!0,configurable:!0};typeof n=="function"?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(e,t,i)}function FM(e){return!(!ou(e)||e.attributes&&!Array.isArray(e.attributes))}function FW(){let e=Math.floor(Math.random()*256)&255;return()=>e++}function Qg(){const e=arguments;let t=null,n=-1;return{[Symbol.iterator](){return this},next(){let i=null;do{if(t===null){if(n++,n>=e.length)return{done:!0};t=e[n][Symbol.iterator]()}if(i=t.next(),i.done){t=null;continue}break}while(!0);return i}}}function fx(){return{[Symbol.iterator](){return this},next(){return{done:!0}}}}let uP=class extends Error{constructor(t){super(),this.name="GraphError",this.message=t}},Jn=class az extends uP{constructor(t){super(t),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,az.prototype.constructor)}},Ln=class lz extends uP{constructor(t){super(t),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,lz.prototype.constructor)}},Vi=class uz extends uP{constructor(t){super(t),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,uz.prototype.constructor)}};function cz(e,t){this.key=e,this.attributes=t,this.clear()}cz.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function dz(e,t){this.key=e,this.attributes=t,this.clear()}dz.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function hz(e,t){this.key=e,this.attributes=t,this.clear()}hz.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function px(e,t,n,i,r){this.key=t,this.attributes=r,this.undirected=e,this.source=n,this.target=i}px.prototype.attach=function(){let e="out",t="in";this.undirected&&(e=t="undirected");const n=this.source.key,i=this.target.key;this.source[e][i]=this,!(this.undirected&&n===i)&&(this.target[t][n]=this)};px.prototype.attachMulti=function(){let e="out",t="in";const n=this.source.key,i=this.target.key;this.undirected&&(e=t="undirected");const r=this.source[e],o=r[i];if(typeof o>"u"){r[i]=this,this.undirected&&n===i||(this.target[t][n]=this);return}o.previous=this,this.next=o,r[i]=this,this.target[t][n]=this};px.prototype.detach=function(){const e=this.source.key,t=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][t],delete this.target[i][e]};px.prototype.detachMulti=function(){const e=this.source.key,t=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][t],delete this.target[i][e]):(this.next.previous=void 0,this.source[n][t]=this.next,this.target[i][e]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const fz=0,pz=1,MW=2,gz=3;function mm(e,t,n,i,r,o,s){let a,d,h,m;if(i=""+i,n===fz){if(a=e._nodes.get(i),!a)throw new Ln(`Graph.${t}: could not find the "${i}" node in the graph.`);h=r,m=o}else if(n===gz){if(r=""+r,d=e._edges.get(r),!d)throw new Ln(`Graph.${t}: could not find the "${r}" edge in the graph.`);const v=d.source.key,w=d.target.key;if(i===v)a=d.target;else if(i===w)a=d.source;else throw new Ln(`Graph.${t}: the "${i}" node is not attached to the "${r}" edge (${v}, ${w}).`);h=o,m=s}else{if(d=e._edges.get(i),!d)throw new Ln(`Graph.${t}: could not find the "${i}" edge in the graph.`);n===pz?a=d.source:a=d.target,h=r,m=o}return[a,h,m]}function IW(e,t,n){e.prototype[t]=function(i,r,o){const[s,a]=mm(this,t,n,i,r,o);return s.attributes[a]}}function LW(e,t,n){e.prototype[t]=function(i,r){const[o]=mm(this,t,n,i,r);return o.attributes}}function OW(e,t,n){e.prototype[t]=function(i,r,o){const[s,a]=mm(this,t,n,i,r,o);return s.attributes.hasOwnProperty(a)}}function zW(e,t,n){e.prototype[t]=function(i,r,o,s){const[a,d,h]=mm(this,t,n,i,r,o,s);return a.attributes[d]=h,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:d}),this}}function NW(e,t,n){e.prototype[t]=function(i,r,o,s){const[a,d,h]=mm(this,t,n,i,r,o,s);if(typeof h!="function")throw new Jn(`Graph.${t}: updater should be a function.`);const m=a.attributes,v=h(m[d]);return m[d]=v,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:d}),this}}function BW(e,t,n){e.prototype[t]=function(i,r,o){const[s,a]=mm(this,t,n,i,r,o);return delete s.attributes[a],this.emit("nodeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:a}),this}}function GW(e,t,n){e.prototype[t]=function(i,r,o){const[s,a]=mm(this,t,n,i,r,o);if(!ou(a))throw new Jn(`Graph.${t}: provided attributes are not a plain object.`);return s.attributes=a,this.emit("nodeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function jW(e,t,n){e.prototype[t]=function(i,r,o){const[s,a]=mm(this,t,n,i,r,o);if(!ou(a))throw new Jn(`Graph.${t}: provided attributes are not a plain object.`);return ol(s.attributes,a),this.emit("nodeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:a}),this}}function HW(e,t,n){e.prototype[t]=function(i,r,o){const[s,a]=mm(this,t,n,i,r,o);if(typeof a!="function")throw new Jn(`Graph.${t}: provided updater is not a function.`);return s.attributes=a(s.attributes),this.emit("nodeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const VW=[{name:e=>`get${e}Attribute`,attacher:IW},{name:e=>`get${e}Attributes`,attacher:LW},{name:e=>`has${e}Attribute`,attacher:OW},{name:e=>`set${e}Attribute`,attacher:zW},{name:e=>`update${e}Attribute`,attacher:NW},{name:e=>`remove${e}Attribute`,attacher:BW},{name:e=>`replace${e}Attributes`,attacher:GW},{name:e=>`merge${e}Attributes`,attacher:jW},{name:e=>`update${e}Attributes`,attacher:HW}];function $W(e){VW.forEach(function({name:t,attacher:n}){n(e,t("Node"),fz),n(e,t("Source"),pz),n(e,t("Target"),MW),n(e,t("Opposite"),gz)})}function WW(e,t,n){e.prototype[t]=function(i,r){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Vi(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Vi(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,a=""+r;if(r=arguments[2],o=mh(this,s,a,n),!o)throw new Ln(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new Vi(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new Ln(`Graph.${t}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]}}function UW(e,t,n){e.prototype[t]=function(i){let r;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Vi(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new Vi(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,s=""+arguments[1];if(r=mh(this,o,s,n),!r)throw new Ln(`Graph.${t}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if(n!=="mixed")throw new Vi(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new Ln(`Graph.${t}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function qW(e,t,n){e.prototype[t]=function(i,r){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Vi(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Vi(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,a=""+r;if(r=arguments[2],o=mh(this,s,a,n),!o)throw new Ln(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new Vi(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new Ln(`Graph.${t}: could not find the "${i}" edge in the graph.`)}return o.attributes.hasOwnProperty(r)}}function KW(e,t,n){e.prototype[t]=function(i,r,o){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Vi(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Vi(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,d=""+r;if(r=arguments[2],o=arguments[3],s=mh(this,a,d,n),!s)throw new Ln(`Graph.${t}: could not find an edge for the given path ("${a}" - "${d}").`)}else{if(n!=="mixed")throw new Vi(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new Ln(`Graph.${t}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]=o,this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:r}),this}}function ZW(e,t,n){e.prototype[t]=function(i,r,o){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Vi(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Vi(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,d=""+r;if(r=arguments[2],o=arguments[3],s=mh(this,a,d,n),!s)throw new Ln(`Graph.${t}: could not find an edge for the given path ("${a}" - "${d}").`)}else{if(n!=="mixed")throw new Vi(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new Ln(`Graph.${t}: could not find the "${i}" edge in the graph.`)}if(typeof o!="function")throw new Jn(`Graph.${t}: updater should be a function.`);return s.attributes[r]=o(s.attributes[r]),this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:r}),this}}function YW(e,t,n){e.prototype[t]=function(i,r){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Vi(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Vi(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,a=""+r;if(r=arguments[2],o=mh(this,s,a,n),!o)throw new Ln(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new Vi(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new Ln(`Graph.${t}: could not find the "${i}" edge in the graph.`)}return delete o.attributes[r],this.emit("edgeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:r}),this}}function XW(e,t,n){e.prototype[t]=function(i,r){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Vi(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Vi(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,a=""+r;if(r=arguments[2],o=mh(this,s,a,n),!o)throw new Ln(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new Vi(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new Ln(`Graph.${t}: could not find the "${i}" edge in the graph.`)}if(!ou(r))throw new Jn(`Graph.${t}: provided attributes are not a plain object.`);return o.attributes=r,this.emit("edgeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function JW(e,t,n){e.prototype[t]=function(i,r){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Vi(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Vi(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,a=""+r;if(r=arguments[2],o=mh(this,s,a,n),!o)throw new Ln(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new Vi(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new Ln(`Graph.${t}: could not find the "${i}" edge in the graph.`)}if(!ou(r))throw new Jn(`Graph.${t}: provided attributes are not a plain object.`);return ol(o.attributes,r),this.emit("edgeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:r}),this}}function QW(e,t,n){e.prototype[t]=function(i,r){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Vi(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Vi(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,a=""+r;if(r=arguments[2],o=mh(this,s,a,n),!o)throw new Ln(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new Vi(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new Ln(`Graph.${t}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new Jn(`Graph.${t}: provided updater is not a function.`);return o.attributes=r(o.attributes),this.emit("edgeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const eU=[{name:e=>`get${e}Attribute`,attacher:WW},{name:e=>`get${e}Attributes`,attacher:UW},{name:e=>`has${e}Attribute`,attacher:qW},{name:e=>`set${e}Attribute`,attacher:KW},{name:e=>`update${e}Attribute`,attacher:ZW},{name:e=>`remove${e}Attribute`,attacher:YW},{name:e=>`replace${e}Attributes`,attacher:XW},{name:e=>`merge${e}Attributes`,attacher:JW},{name:e=>`update${e}Attributes`,attacher:QW}];function tU(e){eU.forEach(function({name:t,attacher:n}){n(e,t("Edge"),"mixed"),n(e,t("DirectedEdge"),"directed"),n(e,t("UndirectedEdge"),"undirected")})}const nU=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function iU(e,t,n,i){let r=!1;for(const o in t){if(o===i)continue;const s=t[o];if(r=n(s.key,s.attributes,s.source.key,s.target.key,s.source.attributes,s.target.attributes,s.undirected),e&&r)return s.key}}function rU(e,t,n,i){let r,o,s,a=!1;for(const d in t)if(d!==i){r=t[d];do{if(o=r.source,s=r.target,a=n(r.key,r.attributes,o.key,s.key,o.attributes,s.attributes,r.undirected),e&&a)return r.key;r=r.next}while(r!==void 0)}}function vE(e,t){const n=Object.keys(e),i=n.length;let r,o=0;return{[Symbol.iterator](){return this},next(){do if(r)r=r.next;else{if(o>=i)return{done:!0};const s=n[o++];if(s===t){r=void 0;continue}r=e[s]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}}}}function oU(e,t,n,i){const r=t[n];if(!r)return;const o=r.source,s=r.target;if(i(r.key,r.attributes,o.key,s.key,o.attributes,s.attributes,r.undirected)&&e)return r.key}function sU(e,t,n,i){let r=t[n];if(!r)return;let o=!1;do{if(o=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),e&&o)return r.key;r=r.next}while(r!==void 0)}function bE(e,t){let n=e[t];if(n.next!==void 0)return{[Symbol.iterator](){return this},next(){if(!n)return{done:!0};const r={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:r}}};let i=!1;return{[Symbol.iterator](){return this},next(){return i===!0?{done:!0}:(i=!0,{done:!1,value:{edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected}})}}}function aU(e,t){if(e.size===0)return[];if(t==="mixed"||t===e.type)return Array.from(e._edges.keys());const n=t==="undirected"?e.undirectedSize:e.directedSize,i=new Array(n),r=t==="undirected",o=e._edges.values();let s=0,a,d;for(;a=o.next(),a.done!==!0;)d=a.value,d.undirected===r&&(i[s++]=d.key);return i}function mz(e,t,n,i){if(t.size===0)return;const r=n!=="mixed"&&n!==t.type,o=n==="undirected";let s,a,d=!1;const h=t._edges.values();for(;s=h.next(),s.done!==!0;){if(a=s.value,r&&a.undirected!==o)continue;const{key:m,attributes:v,source:w,target:R}=a;if(d=i(m,v,w.key,R.key,w.attributes,R.attributes,a.undirected),e&&d)return m}}function lU(e,t){if(e.size===0)return fx();const n=t!=="mixed"&&t!==e.type,i=t==="undirected",r=e._edges.values();return{[Symbol.iterator](){return this},next(){let o,s;for(;;){if(o=r.next(),o.done)return o;if(s=o.value,!(n&&s.undirected!==i))break}return{value:{edge:s.key,attributes:s.attributes,source:s.source.key,target:s.target.key,sourceAttributes:s.source.attributes,targetAttributes:s.target.attributes,undirected:s.undirected},done:!1}}}}function cP(e,t,n,i,r,o){const s=t?rU:iU;let a;if(n!=="undirected"&&(i!=="out"&&(a=s(e,r.in,o),e&&a)||i!=="in"&&(a=s(e,r.out,o,i?void 0:r.key),e&&a))||n!=="directed"&&(a=s(e,r.undirected,o),e&&a))return a}function uU(e,t,n,i){const r=[];return cP(!1,e,t,n,i,function(o){r.push(o)}),r}function cU(e,t,n){let i=fx();return e!=="undirected"&&(t!=="out"&&typeof n.in<"u"&&(i=Qg(i,vE(n.in))),t!=="in"&&typeof n.out<"u"&&(i=Qg(i,vE(n.out,t?void 0:n.key)))),e!=="directed"&&typeof n.undirected<"u"&&(i=Qg(i,vE(n.undirected))),i}function dP(e,t,n,i,r,o,s){const a=n?sU:oU;let d;if(t!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(d=a(e,r.in,o,s),e&&d)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==o)&&(d=a(e,r.out,o,s),e&&d))||t!=="directed"&&typeof r.undirected<"u"&&(d=a(e,r.undirected,o,s),e&&d))return d}function dU(e,t,n,i,r){const o=[];return dP(!1,e,t,n,i,r,function(s){o.push(s)}),o}function hU(e,t,n,i){let r=fx();return e!=="undirected"&&(typeof n.in<"u"&&t!=="out"&&i in n.in&&(r=Qg(r,bE(n.in,i))),typeof n.out<"u"&&t!=="in"&&i in n.out&&(t||n.key!==i)&&(r=Qg(r,bE(n.out,i)))),e!=="directed"&&typeof n.undirected<"u"&&i in n.undirected&&(r=Qg(r,bE(n.undirected,i))),r}function fU(e,t){const{name:n,type:i,direction:r}=t;e.prototype[n]=function(o,s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return aU(this,i);if(arguments.length===1){o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new Ln(`Graph.${n}: could not find the "${o}" node in the graph.`);return uU(this.multi,i==="mixed"?this.type:i,r,a)}if(arguments.length===2){o=""+o,s=""+s;const a=this._nodes.get(o);if(!a)throw new Ln(`Graph.${n}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(s))throw new Ln(`Graph.${n}:  could not find the "${s}" target node in the graph.`);return dU(i,this.multi,r,a,s)}throw new Jn(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function pU(e,t){const{name:n,type:i,direction:r}=t,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[o]=function(h,m,v){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return v=h,mz(!1,this,i,v);if(arguments.length===2){h=""+h,v=m;const w=this._nodes.get(h);if(typeof w>"u")throw new Ln(`Graph.${o}: could not find the "${h}" node in the graph.`);return cP(!1,this.multi,i==="mixed"?this.type:i,r,w,v)}if(arguments.length===3){h=""+h,m=""+m;const w=this._nodes.get(h);if(!w)throw new Ln(`Graph.${o}:  could not find the "${h}" source node in the graph.`);if(!this._nodes.has(m))throw new Ln(`Graph.${o}:  could not find the "${m}" target node in the graph.`);return dP(!1,i,this.multi,r,w,m,v)}throw new Jn(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const s="map"+n[0].toUpperCase()+n.slice(1);e.prototype[s]=function(){const h=Array.prototype.slice.call(arguments),m=h.pop();let v;if(h.length===0){let w=0;i!=="directed"&&(w+=this.undirectedSize),i!=="undirected"&&(w+=this.directedSize),v=new Array(w);let R=0;h.push((L,O,z,$,U,Y,X)=>{v[R++]=m(L,O,z,$,U,Y,X)})}else v=[],h.push((w,R,L,O,z,$,U)=>{v.push(m(w,R,L,O,z,$,U))});return this[o].apply(this,h),v};const a="filter"+n[0].toUpperCase()+n.slice(1);e.prototype[a]=function(){const h=Array.prototype.slice.call(arguments),m=h.pop(),v=[];return h.push((w,R,L,O,z,$,U)=>{m(w,R,L,O,z,$,U)&&v.push(w)}),this[o].apply(this,h),v};const d="reduce"+n[0].toUpperCase()+n.slice(1);e.prototype[d]=function(){let h=Array.prototype.slice.call(arguments);if(h.length<2||h.length>4)throw new Jn(`Graph.${d}: invalid number of arguments (expecting 2, 3 or 4 and got ${h.length}).`);if(typeof h[h.length-1]=="function"&&typeof h[h.length-2]!="function")throw new Jn(`Graph.${d}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let m,v;h.length===2?(m=h[0],v=h[1],h=[]):h.length===3?(m=h[1],v=h[2],h=[h[0]]):h.length===4&&(m=h[2],v=h[3],h=[h[0],h[1]]);let w=v;return h.push((R,L,O,z,$,U,Y)=>{w=m(w,R,L,O,z,$,U,Y)}),this[o].apply(this,h),w}}function gU(e,t){const{name:n,type:i,direction:r}=t,o="find"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[o]=function(d,h,m){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return m=d,mz(!0,this,i,m);if(arguments.length===2){d=""+d,m=h;const v=this._nodes.get(d);if(typeof v>"u")throw new Ln(`Graph.${o}: could not find the "${d}" node in the graph.`);return cP(!0,this.multi,i==="mixed"?this.type:i,r,v,m)}if(arguments.length===3){d=""+d,h=""+h;const v=this._nodes.get(d);if(!v)throw new Ln(`Graph.${o}:  could not find the "${d}" source node in the graph.`);if(!this._nodes.has(h))throw new Ln(`Graph.${o}:  could not find the "${h}" target node in the graph.`);return dP(!0,i,this.multi,r,v,h,m)}throw new Jn(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const s="some"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[s]=function(){const d=Array.prototype.slice.call(arguments),h=d.pop();return d.push((v,w,R,L,O,z,$)=>h(v,w,R,L,O,z,$)),!!this[o].apply(this,d)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[a]=function(){const d=Array.prototype.slice.call(arguments),h=d.pop();return d.push((v,w,R,L,O,z,$)=>!h(v,w,R,L,O,z,$)),!this[o].apply(this,d)}}function mU(e,t){const{name:n,type:i,direction:r}=t,o=n.slice(0,-1)+"Entries";e.prototype[o]=function(s,a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return fx();if(!arguments.length)return lU(this,i);if(arguments.length===1){s=""+s;const d=this._nodes.get(s);if(!d)throw new Ln(`Graph.${o}: could not find the "${s}" node in the graph.`);return cU(i,r,d)}if(arguments.length===2){s=""+s,a=""+a;const d=this._nodes.get(s);if(!d)throw new Ln(`Graph.${o}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(a))throw new Ln(`Graph.${o}:  could not find the "${a}" target node in the graph.`);return hU(i,r,d,a)}throw new Jn(`Graph.${o}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function yU(e){nU.forEach(t=>{fU(e,t),pU(e,t),gU(e,t),mU(e,t)})}const vU=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function XS(){this.A=null,this.B=null}XS.prototype.wrap=function(e){this.A===null?this.A=e:this.B===null&&(this.B=e)};XS.prototype.has=function(e){return this.A!==null&&e in this.A||this.B!==null&&e in this.B};function Wx(e,t,n,i,r){for(const o in i){const s=i[o],a=s.source,d=s.target,h=a===n?d:a;if(t&&t.has(h.key))continue;const m=r(h.key,h.attributes);if(e&&m)return h.key}}function hP(e,t,n,i,r){if(t!=="mixed"){if(t==="undirected")return Wx(e,null,i,i.undirected,r);if(typeof n=="string")return Wx(e,null,i,i[n],r)}const o=new XS;let s;if(t!=="undirected"){if(n!=="out"){if(s=Wx(e,null,i,i.in,r),e&&s)return s;o.wrap(i.in)}if(n!=="in"){if(s=Wx(e,o,i,i.out,r),e&&s)return s;o.wrap(i.out)}}if(t!=="directed"&&(s=Wx(e,o,i,i.undirected,r),e&&s))return s}function bU(e,t,n){if(e!=="mixed"){if(e==="undirected")return Object.keys(n.undirected);if(typeof t=="string")return Object.keys(n[t])}const i=[];return hP(!1,e,t,n,function(r){i.push(r)}),i}function Ux(e,t,n){const i=Object.keys(n),r=i.length;let o=0;return{[Symbol.iterator](){return this},next(){let s=null;do{if(o>=r)return e&&e.wrap(n),{done:!0};const a=n[i[o++]],d=a.source,h=a.target;if(s=d===t?h:d,e&&e.has(s.key)){s=null;continue}}while(s===null);return{done:!1,value:{neighbor:s.key,attributes:s.attributes}}}}}function xU(e,t,n){if(e!=="mixed"){if(e==="undirected")return Ux(null,n,n.undirected);if(typeof t=="string")return Ux(null,n,n[t])}let i=fx();const r=new XS;return e!=="undirected"&&(t!=="out"&&(i=Qg(i,Ux(r,n,n.in))),t!=="in"&&(i=Qg(i,Ux(r,n,n.out)))),e!=="directed"&&(i=Qg(i,Ux(r,n,n.undirected))),i}function wU(e,t){const{name:n,type:i,direction:r}=t;e.prototype[n]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];o=""+o;const s=this._nodes.get(o);if(typeof s>"u")throw new Ln(`Graph.${n}: could not find the "${o}" node in the graph.`);return bU(i==="mixed"?this.type:i,r,s)}}function CU(e,t){const{name:n,type:i,direction:r}=t,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[o]=function(h,m){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;h=""+h;const v=this._nodes.get(h);if(typeof v>"u")throw new Ln(`Graph.${o}: could not find the "${h}" node in the graph.`);hP(!1,i==="mixed"?this.type:i,r,v,m)};const s="map"+n[0].toUpperCase()+n.slice(1);e.prototype[s]=function(h,m){const v=[];return this[o](h,(w,R)=>{v.push(m(w,R))}),v};const a="filter"+n[0].toUpperCase()+n.slice(1);e.prototype[a]=function(h,m){const v=[];return this[o](h,(w,R)=>{m(w,R)&&v.push(w)}),v};const d="reduce"+n[0].toUpperCase()+n.slice(1);e.prototype[d]=function(h,m,v){if(arguments.length<3)throw new Jn(`Graph.${d}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let w=v;return this[o](h,(R,L)=>{w=m(w,R,L)}),w}}function _U(e,t){const{name:n,type:i,direction:r}=t,o=n[0].toUpperCase()+n.slice(1,-1),s="find"+o;e.prototype[s]=function(h,m){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;h=""+h;const v=this._nodes.get(h);if(typeof v>"u")throw new Ln(`Graph.${s}: could not find the "${h}" node in the graph.`);return hP(!0,i==="mixed"?this.type:i,r,v,m)};const a="some"+o;e.prototype[a]=function(h,m){return!!this[s](h,m)};const d="every"+o;e.prototype[d]=function(h,m){return!this[s](h,(w,R)=>!m(w,R))}}function SU(e,t){const{name:n,type:i,direction:r}=t,o=n.slice(0,-1)+"Entries";e.prototype[o]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return fx();s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new Ln(`Graph.${o}: could not find the "${s}" node in the graph.`);return xU(i==="mixed"?this.type:i,r,a)}}function EU(e){vU.forEach(t=>{wU(e,t),CU(e,t),_U(e,t),SU(e,t)})}function cC(e,t,n,i,r){const o=i._nodes.values(),s=i.type;let a,d,h,m,v,w;for(;a=o.next(),a.done!==!0;){let R=!1;if(d=a.value,s!=="undirected"){m=d.out;for(h in m){v=m[h];do w=v.target,R=!0,r(d.key,w.key,d.attributes,w.attributes,v.key,v.attributes,v.undirected),v=v.next;while(v)}}if(s!=="directed"){m=d.undirected;for(h in m)if(!(t&&d.key>h)){v=m[h];do w=v.target,w.key!==h&&(w=v.source),R=!0,r(d.key,w.key,d.attributes,w.attributes,v.key,v.attributes,v.undirected),v=v.next;while(v)}}n&&!R&&r(d.key,null,d.attributes,null,null,null,null)}}function RU(e,t){const n={key:e};return sz(t.attributes)||(n.attributes=ol({},t.attributes)),n}function AU(e,t,n){const i={key:t,source:n.source.key,target:n.target.key};return sz(n.attributes)||(i.attributes=ol({},n.attributes)),e==="mixed"&&n.undirected&&(i.undirected=!0),i}function TU(e){if(!ou(e))throw new Jn('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in e))throw new Jn("Graph.import: serialized node is missing its key.");if("attributes"in e&&(!ou(e.attributes)||e.attributes===null))throw new Jn("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function kU(e){if(!ou(e))throw new Jn('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in e))throw new Jn("Graph.import: serialized edge is missing its source.");if(!("target"in e))throw new Jn("Graph.import: serialized edge is missing its target.");if("attributes"in e&&(!ou(e.attributes)||e.attributes===null))throw new Jn("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in e&&typeof e.undirected!="boolean")throw new Jn("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const PU=FW(),DU=new Set(["directed","undirected","mixed"]),MM=new Set(["domain","_events","_eventsCount","_maxListeners"]),FU=[{name:e=>`${e}Edge`,generateKey:!0},{name:e=>`${e}DirectedEdge`,generateKey:!0,type:"directed"},{name:e=>`${e}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:e=>`${e}EdgeWithKey`},{name:e=>`${e}DirectedEdgeWithKey`,type:"directed"},{name:e=>`${e}UndirectedEdgeWithKey`,type:"undirected"}],MU={allowSelfLoops:!0,multi:!1,type:"mixed"};function IU(e,t,n){if(n&&!ou(n))throw new Jn(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(t=""+t,n=n||{},e._nodes.has(t))throw new Vi(`Graph.addNode: the "${t}" node already exist in the graph.`);const i=new e.NodeDataClass(t,n);return e._nodes.set(t,i),e.emit("nodeAdded",{key:t,attributes:n}),i}function IM(e,t,n){const i=new e.NodeDataClass(t,n);return e._nodes.set(t,i),e.emit("nodeAdded",{key:t,attributes:n}),i}function yz(e,t,n,i,r,o,s,a){if(!i&&e.type==="undirected")throw new Vi(`Graph.${t}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&e.type==="directed")throw new Vi(`Graph.${t}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!ou(a))throw new Jn(`Graph.${t}: invalid attributes. Expecting an object but got "${a}"`);if(o=""+o,s=""+s,a=a||{},!e.allowSelfLoops&&o===s)throw new Vi(`Graph.${t}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const d=e._nodes.get(o),h=e._nodes.get(s);if(!d)throw new Ln(`Graph.${t}: source node "${o}" not found.`);if(!h)throw new Ln(`Graph.${t}: target node "${s}" not found.`);const m={key:null,undirected:i,source:o,target:s,attributes:a};if(n)r=e._edgeKeyGenerator();else if(r=""+r,e._edges.has(r))throw new Vi(`Graph.${t}: the "${r}" edge already exists in the graph.`);if(!e.multi&&(i?typeof d.undirected[s]<"u":typeof d.out[s]<"u"))throw new Vi(`Graph.${t}: an edge linking "${o}" to "${s}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const v=new px(i,r,d,h,a);e._edges.set(r,v);const w=o===s;return i?(d.undirectedDegree++,h.undirectedDegree++,w&&(d.undirectedLoops++,e._undirectedSelfLoopCount++)):(d.outDegree++,h.inDegree++,w&&(d.directedLoops++,e._directedSelfLoopCount++)),e.multi?v.attachMulti():v.attach(),i?e._undirectedSize++:e._directedSize++,m.key=r,e.emit("edgeAdded",m),r}function LU(e,t,n,i,r,o,s,a,d){if(!i&&e.type==="undirected")throw new Vi(`Graph.${t}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&e.type==="directed")throw new Vi(`Graph.${t}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(d){if(typeof a!="function")throw new Jn(`Graph.${t}: invalid updater function. Expecting a function but got "${a}"`)}else if(!ou(a))throw new Jn(`Graph.${t}: invalid attributes. Expecting an object but got "${a}"`)}o=""+o,s=""+s;let h;if(d&&(h=a,a=void 0),!e.allowSelfLoops&&o===s)throw new Vi(`Graph.${t}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let m=e._nodes.get(o),v=e._nodes.get(s),w,R;if(!n&&(w=e._edges.get(r),w)){if((w.source.key!==o||w.target.key!==s)&&(!i||w.source.key!==s||w.target.key!==o))throw new Vi(`Graph.${t}: inconsistency detected when attempting to merge the "${r}" edge with "${o}" source & "${s}" target vs. ("${w.source.key}", "${w.target.key}").`);R=w}if(!R&&!e.multi&&m&&(R=i?m.undirected[s]:m.out[s]),R){const U=[R.key,!1,!1,!1];if(d?!h:!a)return U;if(d){const Y=R.attributes;R.attributes=h(Y),e.emit("edgeAttributesUpdated",{type:"replace",key:R.key,attributes:R.attributes})}else ol(R.attributes,a),e.emit("edgeAttributesUpdated",{type:"merge",key:R.key,attributes:R.attributes,data:a});return U}a=a||{},d&&h&&(a=h(a));const L={key:null,undirected:i,source:o,target:s,attributes:a};if(n)r=e._edgeKeyGenerator();else if(r=""+r,e._edges.has(r))throw new Vi(`Graph.${t}: the "${r}" edge already exists in the graph.`);let O=!1,z=!1;m||(m=IM(e,o,{}),O=!0,o===s&&(v=m,z=!0)),v||(v=IM(e,s,{}),z=!0),w=new px(i,r,m,v,a),e._edges.set(r,w);const $=o===s;return i?(m.undirectedDegree++,v.undirectedDegree++,$&&(m.undirectedLoops++,e._undirectedSelfLoopCount++)):(m.outDegree++,v.inDegree++,$&&(m.directedLoops++,e._directedSelfLoopCount++)),e.multi?w.attachMulti():w.attach(),i?e._undirectedSize++:e._directedSize++,L.key=r,e.emit("edgeAdded",L),[r,!0,O,z]}function lb(e,t){e._edges.delete(t.key);const{source:n,target:i,attributes:r}=t,o=t.undirected,s=n===i;o?(n.undirectedDegree--,i.undirectedDegree--,s&&(n.undirectedLoops--,e._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,s&&(n.directedLoops--,e._directedSelfLoopCount--)),e.multi?t.detachMulti():t.detach(),o?e._undirectedSize--:e._directedSize--,e.emit("edgeDropped",{key:t.key,attributes:r,source:n.key,target:i.key,undirected:o})}let xs=class rT extends lP.EventEmitter{constructor(t){if(super(),t=ol({},MU,t),typeof t.multi!="boolean")throw new Jn(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${t.multi}".`);if(!DU.has(t.type))throw new Jn(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${t.type}".`);if(typeof t.allowSelfLoops!="boolean")throw new Jn(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${t.allowSelfLoops}".`);const n=t.type==="mixed"?cz:t.type==="directed"?dz:hz;rh(this,"NodeDataClass",n);const i="geid_"+PU()+"_";let r=0;const o=()=>{let s;do s=i+r++;while(this._edges.has(s));return s};rh(this,"_attributes",{}),rh(this,"_nodes",new Map),rh(this,"_edges",new Map),rh(this,"_directedSize",0),rh(this,"_undirectedSize",0),rh(this,"_directedSelfLoopCount",0),rh(this,"_undirectedSelfLoopCount",0),rh(this,"_edgeKeyGenerator",o),rh(this,"_options",t),MM.forEach(s=>rh(this,s,this[s])),uf(this,"order",()=>this._nodes.size),uf(this,"size",()=>this._edges.size),uf(this,"directedSize",()=>this._directedSize),uf(this,"undirectedSize",()=>this._undirectedSize),uf(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),uf(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),uf(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),uf(this,"multi",this._options.multi),uf(this,"type",this._options.type),uf(this,"allowSelfLoops",this._options.allowSelfLoops),uf(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(t){return this._nodes.has(""+t)}hasDirectedEdge(t,n){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+t,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){t=""+t,n=""+n;const i=this._nodes.get(t);return i?i.out.hasOwnProperty(n):!1}throw new Jn(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(t,n){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+t,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){t=""+t,n=""+n;const i=this._nodes.get(t);return i?i.undirected.hasOwnProperty(n):!1}throw new Jn(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(t,n){if(arguments.length===1){const i=""+t;return this._edges.has(i)}else if(arguments.length===2){t=""+t,n=""+n;const i=this._nodes.get(t);return i?typeof i.out<"u"&&i.out.hasOwnProperty(n)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(n):!1}throw new Jn(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(t,n){if(this.type==="undirected")return;if(t=""+t,n=""+n,this.multi)throw new Vi("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(t);if(!i)throw new Ln(`Graph.directedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(n))throw new Ln(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||void 0;if(r)return r.key}undirectedEdge(t,n){if(this.type==="directed")return;if(t=""+t,n=""+n,this.multi)throw new Vi("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(t);if(!i)throw new Ln(`Graph.undirectedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(n))throw new Ln(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const r=i.undirected&&i.undirected[n]||void 0;if(r)return r.key}edge(t,n){if(this.multi)throw new Vi("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");t=""+t,n=""+n;const i=this._nodes.get(t);if(!i)throw new Ln(`Graph.edge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(n))throw new Ln(`Graph.edge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||i.undirected&&i.undirected[n]||void 0;if(r)return r.key}areDirectedNeighbors(t,n){t=""+t,n=""+n;const i=this._nodes.get(t);if(!i)throw new Ln(`Graph.areDirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:n in i.in||n in i.out}areOutNeighbors(t,n){t=""+t,n=""+n;const i=this._nodes.get(t);if(!i)throw new Ln(`Graph.areOutNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:n in i.out}areInNeighbors(t,n){t=""+t,n=""+n;const i=this._nodes.get(t);if(!i)throw new Ln(`Graph.areInNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:n in i.in}areUndirectedNeighbors(t,n){t=""+t,n=""+n;const i=this._nodes.get(t);if(!i)throw new Ln(`Graph.areUndirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="directed"?!1:n in i.undirected}areNeighbors(t,n){t=""+t,n=""+n;const i=this._nodes.get(t);if(!i)throw new Ln(`Graph.areNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&(n in i.in||n in i.out)||this.type!=="directed"&&n in i.undirected}areInboundNeighbors(t,n){t=""+t,n=""+n;const i=this._nodes.get(t);if(!i)throw new Ln(`Graph.areInboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&n in i.in||this.type!=="directed"&&n in i.undirected}areOutboundNeighbors(t,n){t=""+t,n=""+n;const i=this._nodes.get(t);if(!i)throw new Ln(`Graph.areOutboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&n in i.out||this.type!=="directed"&&n in i.undirected}inDegree(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Ln(`Graph.inDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Ln(`Graph.outDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Ln(`Graph.directedDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Ln(`Graph.undirectedDegree: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Ln(`Graph.inboundDegree: could not find the "${t}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree),i}outboundDegree(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Ln(`Graph.outboundDegree: could not find the "${t}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.outDegree),i}degree(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Ln(`Graph.degree: could not find the "${t}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree),i}inDegreeWithoutSelfLoops(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Ln(`Graph.inDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Ln(`Graph.outDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Ln(`Graph.directedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Ln(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Ln(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree,r+=n.directedLoops),i-r}outboundDegreeWithoutSelfLoops(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Ln(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.outDegree,r+=n.directedLoops),i-r}degreeWithoutSelfLoops(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Ln(`Graph.degreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree,r+=n.directedLoops*2),i-r}source(t){t=""+t;const n=this._edges.get(t);if(!n)throw new Ln(`Graph.source: could not find the "${t}" edge in the graph.`);return n.source.key}target(t){t=""+t;const n=this._edges.get(t);if(!n)throw new Ln(`Graph.target: could not find the "${t}" edge in the graph.`);return n.target.key}extremities(t){t=""+t;const n=this._edges.get(t);if(!n)throw new Ln(`Graph.extremities: could not find the "${t}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(t,n){t=""+t,n=""+n;const i=this._edges.get(n);if(!i)throw new Ln(`Graph.opposite: could not find the "${n}" edge in the graph.`);const r=i.source.key,o=i.target.key;if(t===r)return o;if(t===o)return r;throw new Ln(`Graph.opposite: the "${t}" node is not attached to the "${n}" edge (${r}, ${o}).`)}hasExtremity(t,n){t=""+t,n=""+n;const i=this._edges.get(t);if(!i)throw new Ln(`Graph.hasExtremity: could not find the "${t}" edge in the graph.`);return i.source.key===n||i.target.key===n}isUndirected(t){t=""+t;const n=this._edges.get(t);if(!n)throw new Ln(`Graph.isUndirected: could not find the "${t}" edge in the graph.`);return n.undirected}isDirected(t){t=""+t;const n=this._edges.get(t);if(!n)throw new Ln(`Graph.isDirected: could not find the "${t}" edge in the graph.`);return!n.undirected}isSelfLoop(t){t=""+t;const n=this._edges.get(t);if(!n)throw new Ln(`Graph.isSelfLoop: could not find the "${t}" edge in the graph.`);return n.source===n.target}addNode(t,n){return IU(this,t,n).key}mergeNode(t,n){if(n&&!ou(n))throw new Jn(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);t=""+t,n=n||{};let i=this._nodes.get(t);return i?(n&&(ol(i.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:t,attributes:i.attributes,data:n})),[t,!1]):(i=new this.NodeDataClass(t,n),this._nodes.set(t,i),this.emit("nodeAdded",{key:t,attributes:n}),[t,!0])}updateNode(t,n){if(n&&typeof n!="function")throw new Jn(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);t=""+t;let i=this._nodes.get(t);if(i){if(n){const o=i.attributes;i.attributes=n(o),this.emit("nodeAttributesUpdated",{type:"replace",key:t,attributes:i.attributes})}return[t,!1]}const r=n?n({}):{};return i=new this.NodeDataClass(t,r),this._nodes.set(t,i),this.emit("nodeAdded",{key:t,attributes:r}),[t,!0]}dropNode(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Ln(`Graph.dropNode: could not find the "${t}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in n.out){i=n.out[r];do lb(this,i),i=i.next;while(i)}for(const r in n.in){i=n.in[r];do lb(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in n.undirected){i=n.undirected[r];do lb(this,i),i=i.next;while(i)}this._nodes.delete(t),this.emit("nodeDropped",{key:t,attributes:n.attributes})}dropEdge(t){let n;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(n=mh(this,i,r,this.type),!n)throw new Ln(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(t=""+t,n=this._edges.get(t),!n)throw new Ln(`Graph.dropEdge: could not find the "${t}" edge in the graph.`);return lb(this,n),this}dropDirectedEdge(t,n){if(arguments.length<2)throw new Vi("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Vi("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");t=""+t,n=""+n;const i=mh(this,t,n,"directed");if(!i)throw new Ln(`Graph.dropDirectedEdge: could not find a "${t}" -> "${n}" edge in the graph.`);return lb(this,i),this}dropUndirectedEdge(t,n){if(arguments.length<2)throw new Vi("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Vi("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=mh(this,t,n,"undirected");if(!i)throw new Ln(`Graph.dropUndirectedEdge: could not find a "${t}" -> "${n}" edge in the graph.`);return lb(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const t=this._nodes.values();let n;for(;n=t.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(t){return this._attributes[t]}getAttributes(){return this._attributes}hasAttribute(t){return this._attributes.hasOwnProperty(t)}setAttribute(t,n){return this._attributes[t]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}updateAttribute(t,n){if(typeof n!="function")throw new Jn("Graph.updateAttribute: updater should be a function.");const i=this._attributes[t];return this._attributes[t]=n(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}removeAttribute(t){return delete this._attributes[t],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:t}),this}replaceAttributes(t){if(!ou(t))throw new Jn("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=t,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(t){if(!ou(t))throw new Jn("Graph.mergeAttributes: provided attributes are not a plain object.");return ol(this._attributes,t),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:t}),this}updateAttributes(t){if(typeof t!="function")throw new Jn("Graph.updateAttributes: provided updater is not a function.");return this._attributes=t(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(t,n){if(typeof t!="function")throw new Jn("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!FM(n))throw new Jn("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,o;for(;r=i.next(),r.done!==!0;)o=r.value,o.attributes=t(o.key,o.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(t,n){if(typeof t!="function")throw new Jn("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!FM(n))throw new Jn("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,o,s,a;for(;r=i.next(),r.done!==!0;)o=r.value,s=o.source,a=o.target,o.attributes=t(o.key,o.attributes,s.key,a.key,s.attributes,a.attributes,o.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(t){if(typeof t!="function")throw new Jn("Graph.forEachAdjacencyEntry: expecting a callback.");cC(!1,!1,!1,this,t)}forEachAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new Jn("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");cC(!1,!1,!0,this,t)}forEachAssymetricAdjacencyEntry(t){if(typeof t!="function")throw new Jn("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");cC(!1,!0,!1,this,t)}forEachAssymetricAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new Jn("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");cC(!1,!0,!0,this,t)}nodes(){return Array.from(this._nodes.keys())}forEachNode(t){if(typeof t!="function")throw new Jn("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)r=i.value,t(r.key,r.attributes)}findNode(t){if(typeof t!="function")throw new Jn("Graph.findNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,t(r.key,r.attributes))return r.key}mapNodes(t){if(typeof t!="function")throw new Jn("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let i,r;const o=new Array(this.order);let s=0;for(;i=n.next(),i.done!==!0;)r=i.value,o[s++]=t(r.key,r.attributes);return o}someNode(t){if(typeof t!="function")throw new Jn("Graph.someNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,t(r.key,r.attributes))return!0;return!1}everyNode(t){if(typeof t!="function")throw new Jn("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,!t(r.key,r.attributes))return!1;return!0}filterNodes(t){if(typeof t!="function")throw new Jn("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let i,r;const o=[];for(;i=n.next(),i.done!==!0;)r=i.value,t(r.key,r.attributes)&&o.push(r.key);return o}reduceNodes(t,n){if(typeof t!="function")throw new Jn("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new Jn("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=n;const r=this._nodes.values();let o,s;for(;o=r.next(),o.done!==!0;)s=o.value,i=t(i,s.key,s.attributes);return i}nodeEntries(){const t=this._nodes.values();return{[Symbol.iterator](){return this},next(){const n=t.next();if(n.done)return n;const i=n.value;return{value:{node:i.key,attributes:i.attributes},done:!1}}}}export(){const t=new Array(this._nodes.size);let n=0;this._nodes.forEach((r,o)=>{t[n++]=RU(o,r)});const i=new Array(this._edges.size);return n=0,this._edges.forEach((r,o)=>{i[n++]=AU(this.type,o,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:t,edges:i}}import(t,n=!1){if(t instanceof rT)return t.forEachNode((d,h)=>{n?this.mergeNode(d,h):this.addNode(d,h)}),t.forEachEdge((d,h,m,v,w,R,L)=>{n?L?this.mergeUndirectedEdgeWithKey(d,m,v,h):this.mergeDirectedEdgeWithKey(d,m,v,h):L?this.addUndirectedEdgeWithKey(d,m,v,h):this.addDirectedEdgeWithKey(d,m,v,h)}),this;if(!ou(t))throw new Jn("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(t.attributes){if(!ou(t.attributes))throw new Jn("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(t.attributes):this.replaceAttributes(t.attributes)}let i,r,o,s,a;if(t.nodes){if(o=t.nodes,!Array.isArray(o))throw new Jn("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=o.length;i<r;i++){s=o[i],TU(s);const{key:d,attributes:h}=s;n?this.mergeNode(d,h):this.addNode(d,h)}}if(t.edges){let d=!1;if(this.type==="undirected"&&(d=!0),o=t.edges,!Array.isArray(o))throw new Jn("Graph.import: invalid edges. Expecting an array.");for(i=0,r=o.length;i<r;i++){a=o[i],kU(a);const{source:h,target:m,attributes:v,undirected:w=d}=a;let R;"key"in a?(R=n?w?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:w?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,R.call(this,a.key,h,m,v)):(R=n?w?this.mergeUndirectedEdge:this.mergeDirectedEdge:w?this.addUndirectedEdge:this.addDirectedEdge,R.call(this,h,m,v))}}return this}nullCopy(t){const n=new rT(ol({},this._options,t));return n.replaceAttributes(ol({},this.getAttributes())),n}emptyCopy(t){const n=this.nullCopy(t);return this._nodes.forEach((i,r)=>{const o=ol({},i.attributes);i=new n.NodeDataClass(r,o),n._nodes.set(r,i)}),n}copy(t){if(t=t||{},typeof t.type=="string"&&t.type!==this.type&&t.type!=="mixed")throw new Vi(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${t.type}" because this would mean losing information about the current graph.`);if(typeof t.multi=="boolean"&&t.multi!==this.multi&&t.multi!==!0)throw new Vi("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof t.allowSelfLoops=="boolean"&&t.allowSelfLoops!==this.allowSelfLoops&&t.allowSelfLoops!==!0)throw new Vi("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(t),i=this._edges.values();let r,o;for(;r=i.next(),r.done!==!0;)o=r.value,yz(n,"copy",!1,o.undirected,o.key,o.source.key,o.target.key,ol({},o.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const t={};this._nodes.forEach((o,s)=>{t[s]=o.attributes});const n={},i={};this._edges.forEach((o,s)=>{const a=o.undirected?"--":"->";let d="",h=o.source.key,m=o.target.key,v;o.undirected&&h>m&&(v=h,h=m,m=v);const w=`(${h})${a}(${m})`;s.startsWith("geid_")?this.multi&&(typeof i[w]>"u"?i[w]=0:i[w]++,d+=`${i[w]}. `):d+=`[${s}]: `,d+=w,n[d]=o.attributes});const r={};for(const o in this)this.hasOwnProperty(o)&&!MM.has(o)&&typeof this[o]!="function"&&typeof o!="symbol"&&(r[o]=this[o]);return r.attributes=this._attributes,r.nodes=t,r.edges=n,rh(r,"constructor",this.constructor),r}};typeof Symbol<"u"&&(xs.prototype[Symbol.for("nodejs.util.inspect.custom")]=xs.prototype.inspect);FU.forEach(e=>{["add","merge","update"].forEach(t=>{const n=e.name(t),i=t==="add"?yz:LU;e.generateKey?xs.prototype[n]=function(r,o,s){return i(this,n,!0,(e.type||this.type)==="undirected",null,r,o,s,t==="update")}:xs.prototype[n]=function(r,o,s,a){return i(this,n,!1,(e.type||this.type)==="undirected",r,o,s,a,t==="update")}})});$W(xs);tU(xs);yU(xs);EU(xs);let vz=class extends xs{constructor(t){const n=ol({type:"directed"},t);if("multi"in n&&n.multi!==!1)throw new Jn("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new Jn('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}},bz=class extends xs{constructor(t){const n=ol({type:"undirected"},t);if("multi"in n&&n.multi!==!1)throw new Jn("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new Jn('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}},xz=class extends xs{constructor(t){const n=ol({multi:!0},t);if("multi"in n&&n.multi!==!0)throw new Jn("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}},wz=class extends xs{constructor(t){const n=ol({type:"directed",multi:!0},t);if("multi"in n&&n.multi!==!0)throw new Jn("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new Jn('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}},Cz=class extends xs{constructor(t){const n=ol({type:"undirected",multi:!0},t);if("multi"in n&&n.multi!==!0)throw new Jn("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new Jn('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}};function gx(e){e.from=function(t,n){const i=ol({},t.options,n),r=new e(i);return r.import(t),r}}gx(xs);gx(vz);gx(bz);gx(xz);gx(wz);gx(Cz);xs.Graph=xs;xs.DirectedGraph=vz;xs.UndirectedGraph=bz;xs.MultiGraph=xz;xs.MultiDirectedGraph=wz;xs.MultiUndirectedGraph=Cz;xs.InvalidArgumentsGraphError=Jn;xs.NotFoundGraphError=Ln;xs.UsageGraphError=Vi;function OU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function _w(e){var t=OU(e,"string");return typeof t=="symbol"?t:t+""}function Pu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LM(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_w(i.key),i)}}function Du(e,t,n){return t&&LM(e.prototype,t),n&&LM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wb(e){return Wb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wb(e)}function _z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_z=function(){return!!e})()}function zU(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NU(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zU(e)}function Rh(e,t,n){return t=Wb(t),NU(e,_z()?Reflect.construct(t,n||[],Wb(e).constructor):t.apply(e,n))}function oT(e,t){return oT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},oT(e,t)}function Ah(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oT(e,t)}function BU(e){if(Array.isArray(e))return e}function GU(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,r,o,s,a=[],d=!0,h=!1;try{if(o=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;d=!1}else for(;!(d=(i=o.call(n)).done)&&(a.push(i.value),a.length!==t);d=!0);}catch(m){h=!0,r=m}finally{try{if(!d&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(h)throw r}}return a}}function sT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function Sz(e,t){if(e){if(typeof e=="string")return sT(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sT(e,t):void 0}}function jU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ub(e,t){return BU(e)||GU(e,t)||Sz(e,t)||jU()}var xE={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"},Ez=new Int8Array(4),wE=new Int32Array(Ez.buffer,0,1),HU=new Float32Array(Ez.buffer,0,1),VU=/^\s*rgba?\s*\(/,$U=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function WU(e){var t=0,n=0,i=0,r=1;if(e[0]==="#")e.length===4?(t=parseInt(e.charAt(1)+e.charAt(1),16),n=parseInt(e.charAt(2)+e.charAt(2),16),i=parseInt(e.charAt(3)+e.charAt(3),16)):(t=parseInt(e.charAt(1)+e.charAt(2),16),n=parseInt(e.charAt(3)+e.charAt(4),16),i=parseInt(e.charAt(5)+e.charAt(6),16)),e.length===9&&(r=parseInt(e.charAt(7)+e.charAt(8),16)/255);else if(VU.test(e)){var o=e.match($U);o&&(t=+o[1],n=+o[2],i=+o[3],o[4]&&(r=+o[4]))}return{r:t,g:n,b:i,a:r}}var Ab={};for(var dC in xE)Ab[dC]=x1(xE[dC]),Ab[xE[dC]]=Ab[dC];function Rz(e,t,n,i,r){return wE[0]=i<<24|n<<16|t<<8|e,wE[0]=wE[0]&4278190079,HU[0]}function x1(e){if(e=e.toLowerCase(),typeof Ab[e]<"u")return Ab[e];var t=WU(e),n=t.r,i=t.g,r=t.b,o=t.a;o=o*255|0;var s=Rz(n,i,r,o);return Ab[e]=s,s}var CE={};function Az(e){if(typeof CE[e]<"u")return CE[e];var t=(e&16711680)>>>16,n=(e&65280)>>>8,i=e&255,r=255,o=Rz(t,n,i,r);return CE[e]=o,o}function OM(e,t,n,i){return n+(t<<8)+(e<<16)}function zM(e,t,n,i,r,o){var s=Math.floor(n/o*r),a=Math.floor(e.drawingBufferHeight/o-i/o*r),d=new Uint8Array(4);e.bindFramebuffer(e.FRAMEBUFFER,t),e.readPixels(s,a,1,1,e.RGBA,e.UNSIGNED_BYTE,d);var h=Ub(d,4),m=h[0],v=h[1],w=h[2],R=h[3];return[m,v,w,R]}function mn(e,t,n){return(t=_w(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function hi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NM(Object(n),!0).forEach(function(i){mn(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NM(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function UU(e,t){for(;!{}.hasOwnProperty.call(e,t)&&(e=Wb(e))!==null;);return e}function aT(){return aT=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=UU(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},aT.apply(null,arguments)}function Tz(e,t,n,i){var r=aT(Wb(e.prototype),t,n);return typeof r=="function"?function(o){return r.apply(n,o)}:r}function qU(e){return e.normalized?1:e.size}function _E(e){var t=0;return e.forEach(function(n){return t+=qU(n)}),t}function kz(e,t,n){var i=e==="VERTEX"?t.VERTEX_SHADER:t.FRAGMENT_SHADER,r=t.createShader(i);if(r===null)throw new Error("loadShader: error while creating the shader");t.shaderSource(r,n),t.compileShader(r);var o=t.getShaderParameter(r,t.COMPILE_STATUS);if(!o){var s=t.getShaderInfoLog(r);throw t.deleteShader(r),new Error(`loadShader: error while compiling the shader:
`.concat(s,`
`).concat(n))}return r}function KU(e,t){return kz("VERTEX",e,t)}function ZU(e,t){return kz("FRAGMENT",e,t)}function YU(e,t){var n=e.createProgram();if(n===null)throw new Error("loadProgram: error while creating the program.");var i,r;for(i=0,r=t.length;i<r;i++)e.attachShader(n,t[i]);e.linkProgram(n);var o=e.getProgramParameter(n,e.LINK_STATUS);if(!o)throw e.deleteProgram(n),new Error("loadProgram: error while linking the program.");return n}function BM(e){var t=e.gl,n=e.buffer,i=e.program,r=e.vertexShader,o=e.fragmentShader;t.deleteShader(r),t.deleteShader(o),t.deleteProgram(i),t.deleteBuffer(n)}var GM=`#define PICKING_MODE
`,XU=mn(mn(mn(mn(mn(mn(mn(mn({},WebGL2RenderingContext.BOOL,1),WebGL2RenderingContext.BYTE,1),WebGL2RenderingContext.UNSIGNED_BYTE,1),WebGL2RenderingContext.SHORT,2),WebGL2RenderingContext.UNSIGNED_SHORT,2),WebGL2RenderingContext.INT,4),WebGL2RenderingContext.UNSIGNED_INT,4),WebGL2RenderingContext.FLOAT,4),Pz=(function(){function e(t,n,i){Pu(this,e),mn(this,"array",new Float32Array),mn(this,"constantArray",new Float32Array),mn(this,"capacity",0),mn(this,"verticesCount",0);var r=this.getDefinition();if(this.VERTICES=r.VERTICES,this.VERTEX_SHADER_SOURCE=r.VERTEX_SHADER_SOURCE,this.FRAGMENT_SHADER_SOURCE=r.FRAGMENT_SHADER_SOURCE,this.UNIFORMS=r.UNIFORMS,this.ATTRIBUTES=r.ATTRIBUTES,this.METHOD=r.METHOD,this.CONSTANT_ATTRIBUTES="CONSTANT_ATTRIBUTES"in r?r.CONSTANT_ATTRIBUTES:[],this.CONSTANT_DATA="CONSTANT_DATA"in r?r.CONSTANT_DATA:[],this.isInstanced="CONSTANT_ATTRIBUTES"in r,this.ATTRIBUTES_ITEMS_COUNT=_E(this.ATTRIBUTES),this.STRIDE=this.VERTICES*this.ATTRIBUTES_ITEMS_COUNT,this.renderer=i,this.normalProgram=this.getProgramInfo("normal",t,r.VERTEX_SHADER_SOURCE,r.FRAGMENT_SHADER_SOURCE,null),this.pickProgram=n?this.getProgramInfo("pick",t,GM+r.VERTEX_SHADER_SOURCE,GM+r.FRAGMENT_SHADER_SOURCE,n):null,this.isInstanced){var o=_E(this.CONSTANT_ATTRIBUTES);if(this.CONSTANT_DATA.length!==this.VERTICES)throw new Error("Program: error while getting constant data (expected ".concat(this.VERTICES," items, received ").concat(this.CONSTANT_DATA.length," instead)"));this.constantArray=new Float32Array(this.CONSTANT_DATA.length*o);for(var s=0;s<this.CONSTANT_DATA.length;s++){var a=this.CONSTANT_DATA[s];if(a.length!==o)throw new Error("Program: error while getting constant data (one vector has ".concat(a.length," items instead of ").concat(o,")"));for(var d=0;d<a.length;d++)this.constantArray[s*o+d]=a[d]}this.STRIDE=this.ATTRIBUTES_ITEMS_COUNT}}return Du(e,[{key:"kill",value:function(){BM(this.normalProgram),this.pickProgram&&(BM(this.pickProgram),this.pickProgram=null)}},{key:"getProgramInfo",value:function(n,i,r,o,s){var a=this.getDefinition(),d=i.createBuffer();if(d===null)throw new Error("Program: error while creating the WebGL buffer.");var h=KU(i,r),m=ZU(i,o),v=YU(i,[h,m]),w={};a.UNIFORMS.forEach(function(O){var z=i.getUniformLocation(v,O);z&&(w[O]=z)});var R={};a.ATTRIBUTES.forEach(function(O){R[O.name]=i.getAttribLocation(v,O.name)});var L;if("CONSTANT_ATTRIBUTES"in a&&(a.CONSTANT_ATTRIBUTES.forEach(function(O){R[O.name]=i.getAttribLocation(v,O.name)}),L=i.createBuffer(),L===null))throw new Error("Program: error while creating the WebGL constant buffer.");return{name:n,program:v,gl:i,frameBuffer:s,buffer:d,constantBuffer:L||{},uniformLocations:w,attributeLocations:R,isPicking:n==="pick",vertexShader:h,fragmentShader:m}}},{key:"bindProgram",value:function(n){var i=this,r=0,o=n.gl,s=n.buffer;this.isInstanced?(o.bindBuffer(o.ARRAY_BUFFER,n.constantBuffer),r=0,this.CONSTANT_ATTRIBUTES.forEach(function(a){return r+=i.bindAttribute(a,n,r,!1)}),o.bufferData(o.ARRAY_BUFFER,this.constantArray,o.STATIC_DRAW),o.bindBuffer(o.ARRAY_BUFFER,n.buffer),r=0,this.ATTRIBUTES.forEach(function(a){return r+=i.bindAttribute(a,n,r,!0)}),o.bufferData(o.ARRAY_BUFFER,this.array,o.DYNAMIC_DRAW)):(o.bindBuffer(o.ARRAY_BUFFER,s),r=0,this.ATTRIBUTES.forEach(function(a){return r+=i.bindAttribute(a,n,r)}),o.bufferData(o.ARRAY_BUFFER,this.array,o.DYNAMIC_DRAW)),o.bindBuffer(o.ARRAY_BUFFER,null)}},{key:"unbindProgram",value:function(n){var i=this;this.isInstanced?(this.CONSTANT_ATTRIBUTES.forEach(function(r){return i.unbindAttribute(r,n,!1)}),this.ATTRIBUTES.forEach(function(r){return i.unbindAttribute(r,n,!0)})):this.ATTRIBUTES.forEach(function(r){return i.unbindAttribute(r,n)})}},{key:"bindAttribute",value:function(n,i,r,o){var s=XU[n.type];if(typeof s!="number")throw new Error('Program.bind: yet unsupported attribute type "'.concat(n.type,'"'));var a=i.attributeLocations[n.name],d=i.gl;if(a!==-1){d.enableVertexAttribArray(a);var h=this.isInstanced?(o?this.ATTRIBUTES_ITEMS_COUNT:_E(this.CONSTANT_ATTRIBUTES))*Float32Array.BYTES_PER_ELEMENT:this.ATTRIBUTES_ITEMS_COUNT*Float32Array.BYTES_PER_ELEMENT;if(d.vertexAttribPointer(a,n.size,n.type,n.normalized||!1,h,r),this.isInstanced&&o)if(d instanceof WebGL2RenderingContext)d.vertexAttribDivisor(a,1);else{var m=d.getExtension("ANGLE_instanced_arrays");m&&m.vertexAttribDivisorANGLE(a,1)}}return n.size*s}},{key:"unbindAttribute",value:function(n,i,r){var o=i.attributeLocations[n.name],s=i.gl;if(o!==-1&&(s.disableVertexAttribArray(o),this.isInstanced&&r))if(s instanceof WebGL2RenderingContext)s.vertexAttribDivisor(o,0);else{var a=s.getExtension("ANGLE_instanced_arrays");a&&a.vertexAttribDivisorANGLE(o,0)}}},{key:"reallocate",value:function(n){n!==this.capacity&&(this.capacity=n,this.verticesCount=this.VERTICES*n,this.array=new Float32Array(this.isInstanced?this.capacity*this.ATTRIBUTES_ITEMS_COUNT:this.verticesCount*this.ATTRIBUTES_ITEMS_COUNT))}},{key:"hasNothingToRender",value:function(){return this.verticesCount===0}},{key:"renderProgram",value:function(n,i){var r=i.gl,o=i.program;r.enable(r.BLEND),r.useProgram(o),this.setUniforms(n,i),this.drawWebGL(this.METHOD,i)}},{key:"render",value:function(n){this.hasNothingToRender()||(this.pickProgram&&(this.pickProgram.gl.viewport(0,0,n.width*n.pixelRatio/n.downSizingRatio,n.height*n.pixelRatio/n.downSizingRatio),this.bindProgram(this.pickProgram),this.renderProgram(hi(hi({},n),{},{pixelRatio:n.pixelRatio/n.downSizingRatio}),this.pickProgram),this.unbindProgram(this.pickProgram)),this.normalProgram.gl.viewport(0,0,n.width*n.pixelRatio,n.height*n.pixelRatio),this.bindProgram(this.normalProgram),this.renderProgram(n,this.normalProgram),this.unbindProgram(this.normalProgram))}},{key:"drawWebGL",value:function(n,i){var r=i.gl,o=i.frameBuffer;if(r.bindFramebuffer(r.FRAMEBUFFER,o),!this.isInstanced)r.drawArrays(n,0,this.verticesCount);else if(r instanceof WebGL2RenderingContext)r.drawArraysInstanced(n,0,this.VERTICES,this.capacity);else{var s=r.getExtension("ANGLE_instanced_arrays");s&&s.drawArraysInstancedANGLE(n,0,this.VERTICES,this.capacity)}}}])})(),JU=(function(e){function t(){return Pu(this,t),Rh(this,t,arguments)}return Ah(t,e),Du(t,[{key:"kill",value:function(){Tz(t,"kill",this)([])}},{key:"process",value:function(i,r,o){var s=r*this.STRIDE;if(o.hidden){for(var a=s+this.STRIDE;s<a;s++)this.array[s]=0;return}return this.processVisibleItem(Az(i),s,o)}}])})(Pz),fP=(function(e){function t(){var n;Pu(this,t);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return n=Rh(this,t,[].concat(r)),mn(n,"drawLabel",void 0),n}return Ah(t,e),Du(t,[{key:"kill",value:function(){Tz(t,"kill",this)([])}},{key:"process",value:function(i,r,o,s,a){var d=r*this.STRIDE;if(a.hidden||o.hidden||s.hidden){for(var h=d+this.STRIDE;d<h;d++)this.array[d]=0;return}return this.processVisibleItem(Az(i),d,o,s,a)}}])})(Pz);function QU(e,t){return(function(){function n(i,r,o){Pu(this,n),mn(this,"drawLabel",t),this.programs=e.map(function(s){return new s(i,r,o)})}return Du(n,[{key:"reallocate",value:function(r){this.programs.forEach(function(o){return o.reallocate(r)})}},{key:"process",value:function(r,o,s,a,d){this.programs.forEach(function(h){return h.process(r,o,s,a,d)})}},{key:"render",value:function(r){this.programs.forEach(function(o){return o.render(r)})}},{key:"kill",value:function(){this.programs.forEach(function(r){return r.kill()})}}])})()}function eq(e,t,n,i,r){var o=r.edgeLabelSize,s=r.edgeLabelFont,a=r.edgeLabelWeight,d=r.edgeLabelColor.attribute?t[r.edgeLabelColor.attribute]||r.edgeLabelColor.color||"#000":r.edgeLabelColor.color,h=t.label;if(h){e.fillStyle=d,e.font="".concat(a," ").concat(o,"px ").concat(s);var m=n.size,v=i.size,w=n.x,R=n.y,L=i.x,O=i.y,z=(w+L)/2,$=(R+O)/2,U=L-w,Y=O-R,X=Math.sqrt(U*U+Y*Y);if(!(X<m+v)){w+=U*m/X,R+=Y*m/X,L-=U*v/X,O-=Y*v/X,z=(w+L)/2,$=(R+O)/2,U=L-w,Y=O-R,X=Math.sqrt(U*U+Y*Y);var q=e.measureText(h).width;if(q>X){var ie="";for(h=h+ie,q=e.measureText(h).width;q>X&&h.length>1;)h=h.slice(0,-2)+ie,q=e.measureText(h).width;if(h.length<4)return}var re;U>0?Y>0?re=Math.acos(U/X):re=Math.asin(Y/X):Y>0?re=Math.acos(U/X)+Math.PI:re=Math.asin(U/X)+Math.PI/2,e.save(),e.translate(z,$),e.rotate(re),e.fillText(h,-q/2,t.size/2+o),e.restore()}}}function Dz(e,t,n){if(t.label){var i=n.labelSize,r=n.labelFont,o=n.labelWeight,s=n.labelColor.attribute?t[n.labelColor.attribute]||n.labelColor.color||"#000":n.labelColor.color;e.fillStyle=s,e.font="".concat(o," ").concat(i,"px ").concat(r),e.fillText(t.label,t.x+t.size+3,t.y+i/3)}}function tq(e,t,n){var i=n.labelSize,r=n.labelFont,o=n.labelWeight;e.font="".concat(o," ").concat(i,"px ").concat(r),e.fillStyle="#FFF",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=8,e.shadowColor="#000";var s=2;if(typeof t.label=="string"){var a=e.measureText(t.label).width,d=Math.round(a+5),h=Math.round(i+2*s),m=Math.max(t.size,i/2)+s,v=Math.asin(h/2/m),w=Math.sqrt(Math.abs(Math.pow(m,2)-Math.pow(h/2,2)));e.beginPath(),e.moveTo(t.x+w,t.y+h/2),e.lineTo(t.x+m+d,t.y+h/2),e.lineTo(t.x+m+d,t.y-h/2),e.lineTo(t.x+w,t.y-h/2),e.arc(t.x,t.y,m,v,-v),e.closePath(),e.fill()}else e.beginPath(),e.arc(t.x,t.y,t.size+s,0,Math.PI*2),e.closePath(),e.fill();e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,Dz(e,t,n)}var nq=`
precision highp float;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;

uniform float u_correctionRatio;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float border = u_correctionRatio * 2.0;
  float dist = length(v_diffVector) - v_radius + border;

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  if (dist > border)
    gl_FragColor = transparent;
  else
    gl_FragColor = v_color;

  #else
  float t = 0.0;
  if (dist > border)
    t = 1.0;
  else if (dist > 0.0)
    t = dist / border;

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,iq=nq,rq=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_position;
attribute float a_size;
attribute float a_angle;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;
varying float v_border;

const float bias = 255.0 / 254.0;

void main() {
  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;
  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));
  vec2 position = a_position + diffVector;
  gl_Position = vec4(
    (u_matrix * vec3(position, 1)).xy,
    0,
    1
  );

  v_diffVector = diffVector;
  v_radius = size / 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,oq=rq,Fz=WebGLRenderingContext,jM=Fz.UNSIGNED_BYTE,SE=Fz.FLOAT,sq=["u_sizeRatio","u_correctionRatio","u_matrix"],JS=(function(e){function t(){return Pu(this,t),Rh(this,t,arguments)}return Ah(t,e),Du(t,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:oq,FRAGMENT_SHADER_SOURCE:iq,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:sq,ATTRIBUTES:[{name:"a_position",size:2,type:SE},{name:"a_size",size:1,type:SE},{name:"a_color",size:4,type:jM,normalized:!0},{name:"a_id",size:4,type:jM,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:SE}],CONSTANT_DATA:[[t.ANGLE_1],[t.ANGLE_2],[t.ANGLE_3]]}}},{key:"processVisibleItem",value:function(i,r,o){var s=this.array,a=x1(o.color);s[r++]=o.x,s[r++]=o.y,s[r++]=o.size,s[r++]=a,s[r++]=i}},{key:"setUniforms",value:function(i,r){var o=r.gl,s=r.uniformLocations,a=s.u_sizeRatio,d=s.u_correctionRatio,h=s.u_matrix;o.uniform1f(d,i.correctionRatio),o.uniform1f(a,i.sizeRatio),o.uniformMatrix3fv(h,!1,i.matrix)}}])})(JU);mn(JS,"ANGLE_1",0);mn(JS,"ANGLE_2",2*Math.PI/3);mn(JS,"ANGLE_3",4*Math.PI/3);var aq=`
precision mediump float;

varying vec4 v_color;

void main(void) {
  gl_FragColor = v_color;
}
`,lq=aq,uq=`
attribute vec2 a_position;
attribute vec2 a_normal;
attribute float a_radius;
attribute vec3 a_barycentric;

#ifdef PICKING_MODE
attribute vec4 a_id;
#else
attribute vec4 a_color;
#endif

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_widenessToThicknessRatio;

varying vec4 v_color;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float normalLength = length(a_normal);
  vec2 unitNormal = a_normal / normalLength;

  // These first computations are taken from edge.vert.glsl and
  // edge.clamped.vert.glsl. Please read it to get better comments on what's
  // happening:
  float pixelsThickness = max(normalLength / u_sizeRatio, minThickness);
  float webGLThickness = pixelsThickness * u_correctionRatio;
  float webGLNodeRadius = a_radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;
  float webGLArrowHeadThickness = webGLThickness * u_widenessToThicknessRatio;

  float da = a_barycentric.x;
  float db = a_barycentric.y;
  float dc = a_barycentric.z;

  vec2 delta = vec2(
      da * (webGLNodeRadius * unitNormal.y)
    + db * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y + webGLArrowHeadThickness * unitNormal.x)
    + dc * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y - webGLArrowHeadThickness * unitNormal.x),

      da * (-webGLNodeRadius * unitNormal.x)
    + db * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x + webGLArrowHeadThickness * unitNormal.y)
    + dc * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x - webGLArrowHeadThickness * unitNormal.y)
  );

  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;

  gl_Position = vec4(position, 0, 1);

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,cq=uq,Mz=WebGLRenderingContext,HM=Mz.UNSIGNED_BYTE,hC=Mz.FLOAT,dq=["u_matrix","u_sizeRatio","u_correctionRatio","u_minEdgeThickness","u_lengthToThicknessRatio","u_widenessToThicknessRatio"],Iz={extremity:"target",lengthToThicknessRatio:2.5,widenessToThicknessRatio:2};function Lz(e){var t=hi(hi({},Iz),{});return(function(n){function i(){return Pu(this,i),Rh(this,i,arguments)}return Ah(i,n),Du(i,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:cq,FRAGMENT_SHADER_SOURCE:lq,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:dq,ATTRIBUTES:[{name:"a_position",size:2,type:hC},{name:"a_normal",size:2,type:hC},{name:"a_radius",size:1,type:hC},{name:"a_color",size:4,type:HM,normalized:!0},{name:"a_id",size:4,type:HM,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_barycentric",size:3,type:hC}],CONSTANT_DATA:[[1,0,0],[0,1,0],[0,0,1]]}}},{key:"processVisibleItem",value:function(o,s,a,d,h){if(t.extremity==="source"){var m=[d,a];a=m[0],d=m[1]}var v=h.size||1,w=d.size||1,R=a.x,L=a.y,O=d.x,z=d.y,$=x1(h.color),U=O-R,Y=z-L,X=U*U+Y*Y,q=0,ie=0;X&&(X=1/Math.sqrt(X),q=-Y*X*v,ie=U*X*v);var re=this.array;re[s++]=O,re[s++]=z,re[s++]=-q,re[s++]=-ie,re[s++]=w,re[s++]=$,re[s++]=o}},{key:"setUniforms",value:function(o,s){var a=s.gl,d=s.uniformLocations,h=d.u_matrix,m=d.u_sizeRatio,v=d.u_correctionRatio,w=d.u_minEdgeThickness,R=d.u_lengthToThicknessRatio,L=d.u_widenessToThicknessRatio;a.uniformMatrix3fv(h,!1,o.matrix),a.uniform1f(m,o.sizeRatio),a.uniform1f(v,o.correctionRatio),a.uniform1f(w,o.minEdgeThickness),a.uniform1f(R,t.lengthToThicknessRatio),a.uniform1f(L,t.widenessToThicknessRatio)}}])})(fP)}Lz();var hq=`
precision mediump float;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  // We only handle antialiasing for normal mode:
  #ifdef PICKING_MODE
  gl_FragColor = v_color;
  #else
  float dist = length(v_normal) * v_thickness;

  float t = smoothstep(
    v_thickness - v_feather,
    v_thickness,
    dist
  );

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,Oz=hq,fq=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;
attribute float a_radius;
attribute float a_radiusCoef;

uniform mat3 u_matrix;
uniform float u_zoomRatio;
uniform float u_sizeRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float radius = a_radius * a_radiusCoef;
  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // These first computations are taken from edge.vert.glsl. Please read it to
  // get better comments on what's happening:
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here, we move the point to leave space for the arrow head:
  float direction = sign(radius);
  float webGLNodeRadius = direction * radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;

  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (webGLNodeRadius + webGLArrowHeadLength);

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness + compensationVector, 1)).xy, 0, 1);

  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,pq=fq,zz=WebGLRenderingContext,VM=zz.UNSIGNED_BYTE,zv=zz.FLOAT,gq=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness","u_lengthToThicknessRatio"],mq={lengthToThicknessRatio:Iz.lengthToThicknessRatio};function Nz(e){var t=hi(hi({},mq),{});return(function(n){function i(){return Pu(this,i),Rh(this,i,arguments)}return Ah(i,n),Du(i,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:pq,FRAGMENT_SHADER_SOURCE:Oz,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:gq,ATTRIBUTES:[{name:"a_positionStart",size:2,type:zv},{name:"a_positionEnd",size:2,type:zv},{name:"a_normal",size:2,type:zv},{name:"a_color",size:4,type:VM,normalized:!0},{name:"a_id",size:4,type:VM,normalized:!0},{name:"a_radius",size:1,type:zv}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:zv},{name:"a_normalCoef",size:1,type:zv},{name:"a_radiusCoef",size:1,type:zv}],CONSTANT_DATA:[[0,1,0],[0,-1,0],[1,1,1],[1,1,1],[0,-1,0],[1,-1,-1]]}}},{key:"processVisibleItem",value:function(o,s,a,d,h){var m=h.size||1,v=a.x,w=a.y,R=d.x,L=d.y,O=x1(h.color),z=R-v,$=L-w,U=d.size||1,Y=z*z+$*$,X=0,q=0;Y&&(Y=1/Math.sqrt(Y),X=-$*Y*m,q=z*Y*m);var ie=this.array;ie[s++]=v,ie[s++]=w,ie[s++]=R,ie[s++]=L,ie[s++]=X,ie[s++]=q,ie[s++]=O,ie[s++]=o,ie[s++]=U}},{key:"setUniforms",value:function(o,s){var a=s.gl,d=s.uniformLocations,h=d.u_matrix,m=d.u_zoomRatio,v=d.u_feather,w=d.u_pixelRatio,R=d.u_correctionRatio,L=d.u_sizeRatio,O=d.u_minEdgeThickness,z=d.u_lengthToThicknessRatio;a.uniformMatrix3fv(h,!1,o.matrix),a.uniform1f(m,o.zoomRatio),a.uniform1f(L,o.sizeRatio),a.uniform1f(R,o.correctionRatio),a.uniform1f(w,o.pixelRatio),a.uniform1f(v,o.antiAliasingFeather),a.uniform1f(O,o.minEdgeThickness),a.uniform1f(z,t.lengthToThicknessRatio)}}])})(fP)}Nz();function yq(e){return QU([Nz(),Lz()])}var vq=yq(),bq=vq,xq=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_zoomRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // We require edges to be at least "minThickness" pixels thick *on screen*
  // (so we need to compensate the size ratio):
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);

  // Then, we need to retrieve the normalized thickness of the edge in the WebGL
  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction
  // ratio:
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness, 1)).xy, 0, 1);

  // For the fragment shader though, we need a thickness that takes the "magic"
  // correction ratio into account (as in webGLThickness), but so that the
  // antialiasing effect does not depend on the zoom level. So here's yet
  // another thickness version:
  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,wq=xq,Bz=WebGLRenderingContext,$M=Bz.UNSIGNED_BYTE,qx=Bz.FLOAT,Cq=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness"],_q=(function(e){function t(){return Pu(this,t),Rh(this,t,arguments)}return Ah(t,e),Du(t,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:wq,FRAGMENT_SHADER_SOURCE:Oz,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:Cq,ATTRIBUTES:[{name:"a_positionStart",size:2,type:qx},{name:"a_positionEnd",size:2,type:qx},{name:"a_normal",size:2,type:qx},{name:"a_color",size:4,type:$M,normalized:!0},{name:"a_id",size:4,type:$M,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:qx},{name:"a_normalCoef",size:1,type:qx}],CONSTANT_DATA:[[0,1],[0,-1],[1,1],[1,1],[0,-1],[1,-1]]}}},{key:"processVisibleItem",value:function(i,r,o,s,a){var d=a.size||1,h=o.x,m=o.y,v=s.x,w=s.y,R=x1(a.color),L=v-h,O=w-m,z=L*L+O*O,$=0,U=0;z&&(z=1/Math.sqrt(z),$=-O*z*d,U=L*z*d);var Y=this.array;Y[r++]=h,Y[r++]=m,Y[r++]=v,Y[r++]=w,Y[r++]=$,Y[r++]=U,Y[r++]=R,Y[r++]=i}},{key:"setUniforms",value:function(i,r){var o=r.gl,s=r.uniformLocations,a=s.u_matrix,d=s.u_zoomRatio,h=s.u_feather,m=s.u_pixelRatio,v=s.u_correctionRatio,w=s.u_sizeRatio,R=s.u_minEdgeThickness;o.uniformMatrix3fv(a,!1,i.matrix),o.uniform1f(d,i.zoomRatio),o.uniform1f(w,i.sizeRatio),o.uniform1f(v,i.correctionRatio),o.uniform1f(m,i.pixelRatio),o.uniform1f(h,i.antiAliasingFeather),o.uniform1f(R,i.minEdgeThickness)}}])})(fP),pP=(function(e){function t(){var n;return Pu(this,t),n=Rh(this,t),n.rawEmitter=n,n}return Ah(t,e),Du(t)})(lP.EventEmitter),EE,WM;function Gz(){return WM||(WM=1,EE=function(t){return t!==null&&typeof t=="object"&&typeof t.addUndirectedEdgeWithKey=="function"&&typeof t.dropNode=="function"&&typeof t.multi=="boolean"}),EE}var Sq=Gz();const Eq=Ol(Sq);var Rq=function(t){return t},Aq=function(t){return t*t},Tq=function(t){return t*(2-t)},kq=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},Pq=function(t){return t*t*t},Dq=function(t){return--t*t*t+1},Fq=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},Mq={linear:Rq,quadraticIn:Aq,quadraticOut:Tq,quadraticInOut:kq,cubicIn:Pq,cubicOut:Dq,cubicInOut:Fq},Iq={easing:"quadraticInOut",duration:150};function df(){return Float32Array.of(1,0,0,0,1,0,0,0,1)}function fC(e,t,n){return e[0]=t,e[4]=typeof n=="number"?n:t,e}function UM(e,t){var n=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=n,e[3]=-n,e[4]=i,e}function qM(e,t,n){return e[6]=t,e[7]=n,e}function vy(e,t){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],d=e[6],h=e[7],m=e[8],v=t[0],w=t[1],R=t[2],L=t[3],O=t[4],z=t[5],$=t[6],U=t[7],Y=t[8];return e[0]=v*n+w*o+R*d,e[1]=v*i+w*s+R*h,e[2]=v*r+w*a+R*m,e[3]=L*n+O*o+z*d,e[4]=L*i+O*s+z*h,e[5]=L*r+O*a+z*m,e[6]=$*n+U*o+Y*d,e[7]=$*i+U*s+Y*h,e[8]=$*r+U*a+Y*m,e}function lT(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=e[0],r=e[1],o=e[3],s=e[4],a=e[6],d=e[7],h=t.x,m=t.y;return{x:h*i+m*o+a*n,y:h*r+m*s+d*n}}function Lq(e,t){var n=e.height/e.width,i=t.height/t.width;return n<1&&i>1||n>1&&i<1?1:Math.min(Math.max(i,1/i),Math.max(1/n,n))}function Kx(e,t,n,i,r){var o=e.angle,s=e.ratio,a=e.x,d=e.y,h=t.width,m=t.height,v=df(),w=Math.min(h,m)-2*i,R=Lq(t,n);return r?(vy(v,qM(df(),a,d)),vy(v,fC(df(),s)),vy(v,UM(df(),o)),vy(v,fC(df(),h/w/2/R,m/w/2/R))):(vy(v,fC(df(),2*(w/h)*R,2*(w/m)*R)),vy(v,UM(df(),-o)),vy(v,fC(df(),1/s)),vy(v,qM(df(),-a,-d))),v}function Oq(e,t,n){var i=lT(e,{x:Math.cos(t.angle),y:Math.sin(t.angle)},0),r=i.x,o=i.y;return 1/Math.sqrt(Math.pow(r,2)+Math.pow(o,2))/n.width}function zq(e){if(!e.order)return{x:[0,1],y:[0,1]};var t=1/0,n=-1/0,i=1/0,r=-1/0;return e.forEachNode(function(o,s){var a=s.x,d=s.y;a<t&&(t=a),a>n&&(n=a),d<i&&(i=d),d>r&&(r=d)}),{x:[t,n],y:[i,r]}}function Nq(e){if(!Eq(e))throw new Error("Sigma: invalid graph instance.");e.forEachNode(function(t,n){if(!Number.isFinite(n.x)||!Number.isFinite(n.y))throw new Error("Sigma: Coordinates of node ".concat(t," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}function Bq(e,t,n){var i=document.createElement(e);if(t)for(var r in t)i.style[r]=t[r];if(n)for(var o in n)i.setAttribute(o,n[o]);return i}function KM(){return typeof window.devicePixelRatio<"u"?window.devicePixelRatio:1}function ZM(e,t,n){return n.sort(function(i,r){var o=t(i)||0,s=t(r)||0;return o<s?-1:o>s?1:0})}function YM(e){var t=Ub(e.x,2),n=t[0],i=t[1],r=Ub(e.y,2),o=r[0],s=r[1],a=Math.max(i-n,s-o),d=(i+n)/2,h=(s+o)/2;(a===0||Math.abs(a)===1/0||isNaN(a))&&(a=1),isNaN(d)&&(d=0),isNaN(h)&&(h=0);var m=function(w){return{x:.5+(w.x-d)/a,y:.5+(w.y-h)/a}};return m.applyTo=function(v){v.x=.5+(v.x-d)/a,v.y=.5+(v.y-h)/a},m.inverse=function(v){return{x:d+a*(v.x-.5),y:h+a*(v.y-.5)}},m.ratio=a,m}function uT(e){"@babel/helpers - typeof";return uT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uT(e)}function XM(e,t){var n=t.size;if(n!==0){var i=e.length;e.length+=n;var r=0;t.forEach(function(o){e[i+r]=o,r++})}}function RE(e){e=e||{};for(var t=0,n=arguments.length<=1?0:arguments.length-1;t<n;t++){var i=t+1<1||arguments.length<=t+1?void 0:arguments[t+1];i&&Object.assign(e,i)}return e}var gP={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,defaultDrawEdgeLabel:eq,defaultDrawNodeLabel:Dz,defaultDrawNodeHover:tq,minEdgeThickness:1.7,antiAliasingFeather:1,dragTimeout:100,draggedEventsTolerance:3,inertiaDuration:200,inertiaRatio:3,zoomDuration:250,zoomingRatio:1.7,doubleClickTimeout:300,doubleClickZoomingRatio:2.2,doubleClickZoomingDuration:200,tapMoveTolerance:10,zoomToSizeRatioFunction:Math.sqrt,itemSizesReference:"screen",autoRescale:!0,autoCenter:!0,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,enableCameraZooming:!0,enableCameraPanning:!0,enableCameraRotation:!0,cameraPanBoundaries:null,allowInvalidContainer:!1,nodeProgramClasses:{},nodeHoverProgramClasses:{},edgeProgramClasses:{}},Gq={circle:JS},jq={arrow:bq,line:_q};function AE(e){if(typeof e.labelDensity!="number"||e.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var t=e.minCameraRatio,n=e.maxCameraRatio;if(typeof t=="number"&&typeof n=="number"&&n<t)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")}function Hq(e){var t=RE({},gP,e);return t.nodeProgramClasses=RE({},Gq,t.nodeProgramClasses),t.edgeProgramClasses=RE({},jq,t.edgeProgramClasses),t}var pC=1.5,JM=(function(e){function t(){var n;return Pu(this,t),n=Rh(this,t),mn(n,"x",.5),mn(n,"y",.5),mn(n,"angle",0),mn(n,"ratio",1),mn(n,"minRatio",null),mn(n,"maxRatio",null),mn(n,"enabledZooming",!0),mn(n,"enabledPanning",!0),mn(n,"enabledRotation",!0),mn(n,"clean",null),mn(n,"nextFrame",null),mn(n,"previousState",null),mn(n,"enabled",!0),n.previousState=n.getState(),n}return Ah(t,e),Du(t,[{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"getState",value:function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}}},{key:"hasState",value:function(i){return this.x===i.x&&this.y===i.y&&this.ratio===i.ratio&&this.angle===i.angle}},{key:"getPreviousState",value:function(){var i=this.previousState;return i?{x:i.x,y:i.y,angle:i.angle,ratio:i.ratio}:null}},{key:"getBoundedRatio",value:function(i){var r=i;return typeof this.minRatio=="number"&&(r=Math.max(r,this.minRatio)),typeof this.maxRatio=="number"&&(r=Math.min(r,this.maxRatio)),r}},{key:"validateState",value:function(i){var r={};return this.enabledPanning&&typeof i.x=="number"&&(r.x=i.x),this.enabledPanning&&typeof i.y=="number"&&(r.y=i.y),this.enabledZooming&&typeof i.ratio=="number"&&(r.ratio=this.getBoundedRatio(i.ratio)),this.enabledRotation&&typeof i.angle=="number"&&(r.angle=i.angle),this.clean?this.clean(hi(hi({},this.getState()),r)):r}},{key:"isAnimated",value:function(){return!!this.nextFrame}},{key:"setState",value:function(i){if(!this.enabled)return this;this.previousState=this.getState();var r=this.validateState(i);return typeof r.x=="number"&&(this.x=r.x),typeof r.y=="number"&&(this.y=r.y),typeof r.ratio=="number"&&(this.ratio=r.ratio),typeof r.angle=="number"&&(this.angle=r.angle),this.hasState(this.previousState)||this.emit("updated",this.getState()),this}},{key:"updateState",value:function(i){return this.setState(i(this.getState())),this}},{key:"animate",value:function(i){var r=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;if(!s)return new Promise(function(R){return r.animate(i,o,R)});if(this.enabled){var a=hi(hi({},Iq),o),d=this.validateState(i),h=typeof a.easing=="function"?a.easing:Mq[a.easing],m=Date.now(),v=this.getState(),w=function(){var L=(Date.now()-m)/a.duration;if(L>=1){r.nextFrame=null,r.setState(d),r.animationCallback&&(r.animationCallback.call(null),r.animationCallback=void 0);return}var O=h(L),z={};typeof d.x=="number"&&(z.x=v.x+(d.x-v.x)*O),typeof d.y=="number"&&(z.y=v.y+(d.y-v.y)*O),r.enabledRotation&&typeof d.angle=="number"&&(z.angle=v.angle+(d.angle-v.angle)*O),typeof d.ratio=="number"&&(z.ratio=v.ratio+(d.ratio-v.ratio)*O),r.setState(z),r.nextFrame=requestAnimationFrame(w)};this.nextFrame?(cancelAnimationFrame(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=requestAnimationFrame(w)):w(),this.animationCallback=s}}},{key:"animatedZoom",value:function(i){return i?typeof i=="number"?this.animate({ratio:this.ratio/i}):this.animate({ratio:this.ratio/(i.factor||pC)},i):this.animate({ratio:this.ratio/pC})}},{key:"animatedUnzoom",value:function(i){return i?typeof i=="number"?this.animate({ratio:this.ratio*i}):this.animate({ratio:this.ratio*(i.factor||pC)},i):this.animate({ratio:this.ratio*pC})}},{key:"animatedReset",value:function(i){return this.animate({x:.5,y:.5,ratio:1,angle:0},i)}},{key:"copy",value:function(){return t.from(this.getState())}}],[{key:"from",value:function(i){var r=new t;return r.setState(i)}}])})(pP);function hf(e,t){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}function Hg(e,t){var n=hi(hi({},hf(e,t)),{},{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){n.sigmaDefaultPrevented=!0},original:e});return n}function Zx(e){var t="x"in e?e:hi(hi({},e.touches[0]||e.previousTouches[0]),{},{original:e.original,sigmaDefaultPrevented:e.sigmaDefaultPrevented,preventSigmaDefault:function(){e.sigmaDefaultPrevented=!0,t.sigmaDefaultPrevented=!0}});return t}function Vq(e,t){return hi(hi({},Hg(e,t)),{},{delta:jz(e)})}var $q=2;function KC(e){for(var t=[],n=0,i=Math.min(e.length,$q);n<i;n++)t.push(e[n]);return t}function Yx(e,t,n){var i={touches:KC(e.touches).map(function(r){return hf(r,n)}),previousTouches:t.map(function(r){return hf(r,n)}),sigmaDefaultPrevented:!1,preventSigmaDefault:function(){i.sigmaDefaultPrevented=!0},original:e};return i}function jz(e){if(typeof e.deltaY<"u")return e.deltaY*-3/360;if(typeof e.detail<"u")return e.detail/-9;throw new Error("Captor: could not extract delta from event.")}var Hz=(function(e){function t(n,i){var r;return Pu(this,t),r=Rh(this,t),r.container=n,r.renderer=i,r}return Ah(t,e),Du(t)})(pP),Wq=["doubleClickTimeout","doubleClickZoomingDuration","doubleClickZoomingRatio","dragTimeout","draggedEventsTolerance","inertiaDuration","inertiaRatio","zoomDuration","zoomingRatio"],Uq=Wq.reduce(function(e,t){return hi(hi({},e),{},mn({},t,gP[t]))},{}),qq=(function(e){function t(n,i){var r;return Pu(this,t),r=Rh(this,t,[n,i]),mn(r,"enabled",!0),mn(r,"draggedEvents",0),mn(r,"downStartTime",null),mn(r,"lastMouseX",null),mn(r,"lastMouseY",null),mn(r,"isMouseDown",!1),mn(r,"isMoving",!1),mn(r,"movingTimeout",null),mn(r,"startCameraState",null),mn(r,"clicks",0),mn(r,"doubleClickTimeout",null),mn(r,"currentWheelDirection",0),mn(r,"settings",Uq),r.handleClick=r.handleClick.bind(r),r.handleRightClick=r.handleRightClick.bind(r),r.handleDown=r.handleDown.bind(r),r.handleUp=r.handleUp.bind(r),r.handleMove=r.handleMove.bind(r),r.handleWheel=r.handleWheel.bind(r),r.handleLeave=r.handleLeave.bind(r),r.handleEnter=r.handleEnter.bind(r),n.addEventListener("click",r.handleClick,{capture:!1}),n.addEventListener("contextmenu",r.handleRightClick,{capture:!1}),n.addEventListener("mousedown",r.handleDown,{capture:!1}),n.addEventListener("wheel",r.handleWheel,{capture:!1}),n.addEventListener("mouseleave",r.handleLeave,{capture:!1}),n.addEventListener("mouseenter",r.handleEnter,{capture:!1}),document.addEventListener("mousemove",r.handleMove,{capture:!1}),document.addEventListener("mouseup",r.handleUp,{capture:!1}),r}return Ah(t,e),Du(t,[{key:"kill",value:function(){var i=this.container;i.removeEventListener("click",this.handleClick),i.removeEventListener("contextmenu",this.handleRightClick),i.removeEventListener("mousedown",this.handleDown),i.removeEventListener("wheel",this.handleWheel),i.removeEventListener("mouseleave",this.handleLeave),i.removeEventListener("mouseenter",this.handleEnter),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)}},{key:"handleClick",value:function(i){var r=this;if(this.enabled){if(this.clicks++,this.clicks===2)return this.clicks=0,typeof this.doubleClickTimeout=="number"&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(i);setTimeout(function(){r.clicks=0,r.doubleClickTimeout=null},this.settings.doubleClickTimeout),this.draggedEvents<this.settings.draggedEventsTolerance&&this.emit("click",Hg(i,this.container))}}},{key:"handleRightClick",value:function(i){this.enabled&&this.emit("rightClick",Hg(i,this.container))}},{key:"handleDoubleClick",value:function(i){if(this.enabled){i.preventDefault(),i.stopPropagation();var r=Hg(i,this.container);if(this.emit("doubleClick",r),!r.sigmaDefaultPrevented){var o=this.renderer.getCamera(),s=o.getBoundedRatio(o.getState().ratio/this.settings.doubleClickZoomingRatio);o.animate(this.renderer.getViewportZoomedState(hf(i,this.container),s),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}}},{key:"handleDown",value:function(i){if(this.enabled){if(i.button===0){this.startCameraState=this.renderer.getCamera().getState();var r=hf(i,this.container),o=r.x,s=r.y;this.lastMouseX=o,this.lastMouseY=s,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0}this.emit("mousedown",Hg(i,this.container))}}},{key:"handleUp",value:function(i){var r=this;if(!(!this.enabled||!this.isMouseDown)){var o=this.renderer.getCamera();this.isMouseDown=!1,typeof this.movingTimeout=="number"&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var s=hf(i,this.container),a=s.x,d=s.y,h=o.getState(),m=o.getPreviousState()||{x:0,y:0};this.isMoving?o.animate({x:h.x+this.settings.inertiaRatio*(h.x-m.x),y:h.y+this.settings.inertiaRatio*(h.y-m.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"}):(this.lastMouseX!==a||this.lastMouseY!==d)&&o.setState({x:h.x,y:h.y}),this.isMoving=!1,setTimeout(function(){var v=r.draggedEvents>0;r.draggedEvents=0,v&&r.renderer.getSetting("hideEdgesOnMove")&&r.renderer.refresh()},0),this.emit("mouseup",Hg(i,this.container))}}},{key:"handleMove",value:function(i){var r=this;if(this.enabled){var o=Hg(i,this.container);if(this.emit("mousemovebody",o),(i.target===this.container||i.composedPath()[0]===this.container)&&this.emit("mousemove",o),!o.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,typeof this.movingTimeout=="number"&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){r.movingTimeout=null,r.isMoving=!1},this.settings.dragTimeout);var s=this.renderer.getCamera(),a=hf(i,this.container),d=a.x,h=a.y,m=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),v=this.renderer.viewportToFramedGraph({x:d,y:h}),w=m.x-v.x,R=m.y-v.y,L=s.getState(),O=L.x+w,z=L.y+R;s.setState({x:O,y:z}),this.lastMouseX=d,this.lastMouseY=h,i.preventDefault(),i.stopPropagation()}}}},{key:"handleLeave",value:function(i){this.emit("mouseleave",Hg(i,this.container))}},{key:"handleEnter",value:function(i){this.emit("mouseenter",Hg(i,this.container))}},{key:"handleWheel",value:function(i){var r=this,o=this.renderer.getCamera();if(!(!this.enabled||!o.enabledZooming)){var s=jz(i);if(s){var a=Vq(i,this.container);if(this.emit("wheel",a),a.sigmaDefaultPrevented){i.preventDefault(),i.stopPropagation();return}var d=o.getState().ratio,h=s>0?1/this.settings.zoomingRatio:this.settings.zoomingRatio,m=o.getBoundedRatio(d*h),v=s>0?1:-1,w=Date.now();d!==m&&(i.preventDefault(),i.stopPropagation(),!(this.currentWheelDirection===v&&this.lastWheelTriggerTime&&w-this.lastWheelTriggerTime<this.settings.zoomDuration/5)&&(o.animate(this.renderer.getViewportZoomedState(hf(i,this.container),m),{easing:"quadraticOut",duration:this.settings.zoomDuration},function(){r.currentWheelDirection=0}),this.currentWheelDirection=v,this.lastWheelTriggerTime=w))}}}},{key:"setSettings",value:function(i){this.settings=i}}])})(Hz),Kq=["dragTimeout","inertiaDuration","inertiaRatio","doubleClickTimeout","doubleClickZoomingRatio","doubleClickZoomingDuration","tapMoveTolerance"],Zq=Kq.reduce(function(e,t){return hi(hi({},e),{},mn({},t,gP[t]))},{}),Yq=(function(e){function t(n,i){var r;return Pu(this,t),r=Rh(this,t,[n,i]),mn(r,"enabled",!0),mn(r,"isMoving",!1),mn(r,"hasMoved",!1),mn(r,"touchMode",0),mn(r,"startTouchesPositions",[]),mn(r,"lastTouches",[]),mn(r,"lastTap",null),mn(r,"settings",Zq),r.handleStart=r.handleStart.bind(r),r.handleLeave=r.handleLeave.bind(r),r.handleMove=r.handleMove.bind(r),n.addEventListener("touchstart",r.handleStart,{capture:!1}),n.addEventListener("touchcancel",r.handleLeave,{capture:!1}),document.addEventListener("touchend",r.handleLeave,{capture:!1,passive:!1}),document.addEventListener("touchmove",r.handleMove,{capture:!1,passive:!1}),r}return Ah(t,e),Du(t,[{key:"kill",value:function(){var i=this.container;i.removeEventListener("touchstart",this.handleStart),i.removeEventListener("touchcancel",this.handleLeave),document.removeEventListener("touchend",this.handleLeave),document.removeEventListener("touchmove",this.handleMove)}},{key:"getDimensions",value:function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}}},{key:"handleStart",value:function(i){var r=this;if(this.enabled){i.preventDefault();var o=KC(i.touches);if(this.touchMode=o.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=o.map(function(R){return hf(R,r.container)}),this.touchMode===2){var s=Ub(this.startTouchesPositions,2),a=s[0],d=a.x,h=a.y,m=s[1],v=m.x,w=m.y;this.startTouchesAngle=Math.atan2(w-h,v-d),this.startTouchesDistance=Math.sqrt(Math.pow(v-d,2)+Math.pow(w-h,2))}this.emit("touchdown",Yx(i,this.lastTouches,this.container)),this.lastTouches=o,this.lastTouchesPositions=this.startTouchesPositions}}},{key:"handleLeave",value:function(i){if(!(!this.enabled||!this.startTouchesPositions.length)){switch(i.cancelable&&i.preventDefault(),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(i.touches.length===1){this.handleStart(i),i.preventDefault();break}case 1:if(this.isMoving){var r=this.renderer.getCamera(),o=r.getState(),s=r.getPreviousState()||{x:0,y:0};r.animate({x:o.x+this.settings.inertiaRatio*(o.x-s.x),y:o.y+this.settings.inertiaRatio*(o.y-s.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"})}this.hasMoved=!1,this.isMoving=!1,this.touchMode=0;break}if(this.emit("touchup",Yx(i,this.lastTouches,this.container)),!i.touches.length){var a=hf(this.lastTouches[0],this.container),d=this.startTouchesPositions[0],h=Math.pow(a.x-d.x,2)+Math.pow(a.y-d.y,2);if(!i.touches.length&&h<Math.pow(this.settings.tapMoveTolerance,2))if(this.lastTap&&Date.now()-this.lastTap.time<this.settings.doubleClickTimeout){var m=Yx(i,this.lastTouches,this.container);if(this.emit("doubletap",m),this.lastTap=null,!m.sigmaDefaultPrevented){var v=this.renderer.getCamera(),w=v.getBoundedRatio(v.getState().ratio/this.settings.doubleClickZoomingRatio);v.animate(this.renderer.getViewportZoomedState(a,w),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}else{var R=Yx(i,this.lastTouches,this.container);this.emit("tap",R),this.lastTap={time:Date.now(),position:R.touches[0]||R.previousTouches[0]}}}this.lastTouches=KC(i.touches),this.startTouchesPositions=[]}}},{key:"handleMove",value:function(i){var r=this;if(!(!this.enabled||!this.startTouchesPositions.length)){i.preventDefault();var o=KC(i.touches),s=o.map(function(_e){return hf(_e,r.container)}),a=this.lastTouches;this.lastTouches=o,this.lastTouchesPositions=s;var d=Yx(i,a,this.container);if(this.emit("touchmove",d),!d.sigmaDefaultPrevented&&(this.hasMoved||(this.hasMoved=s.some(function(_e,Le){var Oe=r.startTouchesPositions[Le];return Oe&&(_e.x!==Oe.x||_e.y!==Oe.y)})),!!this.hasMoved)){this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){r.isMoving=!1},this.settings.dragTimeout);var h=this.renderer.getCamera(),m=this.startCameraState,v=this.renderer.getSetting("stagePadding");switch(this.touchMode){case 1:{var w=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),R=w.x,L=w.y,O=this.renderer.viewportToFramedGraph(s[0]),z=O.x,$=O.y;h.setState({x:m.x+R-z,y:m.y+L-$});break}case 2:{var U={x:.5,y:.5,angle:0,ratio:1},Y=s[0],X=Y.x,q=Y.y,ie=s[1],re=ie.x,J=ie.y,ne=Math.atan2(J-q,re-X)-this.startTouchesAngle,be=Math.hypot(J-q,re-X)/this.startTouchesDistance,ue=h.getBoundedRatio(m.ratio/be);U.ratio=ue,U.angle=m.angle+ne;var ve=this.getDimensions(),ce=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:m}),Ie=Math.min(ve.width,ve.height)-2*v,Te=Ie/ve.width,fe=Ie/ve.height,he=ue/Ie,Re=X-Ie/2/Te,De=q-Ie/2/fe,Ye=[Re*Math.cos(-U.angle)-De*Math.sin(-U.angle),De*Math.cos(-U.angle)+Re*Math.sin(-U.angle)];Re=Ye[0],De=Ye[1],U.x=ce.x-Re*he,U.y=ce.y+De*he,h.setState(U);break}}}}}},{key:"setSettings",value:function(i){this.settings=i}}])})(Hz);function Xq(e){if(Array.isArray(e))return sT(e)}function Jq(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Qq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QM(e){return Xq(e)||Jq(e)||Sz(e)||Qq()}function eK(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function TE(e,t){if(e==null)return{};var n,i,r=eK(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var eI=(function(){function e(t,n){Pu(this,e),this.key=t,this.size=n}return Du(e,null,[{key:"compare",value:function(n,i){return n.size>i.size?-1:n.size<i.size||n.key>i.key?1:-1}}])})(),tI=(function(){function e(){Pu(this,e),mn(this,"width",0),mn(this,"height",0),mn(this,"cellSize",0),mn(this,"columns",0),mn(this,"rows",0),mn(this,"cells",{})}return Du(e,[{key:"resizeAndClear",value:function(n,i){this.width=n.width,this.height=n.height,this.cellSize=i,this.columns=Math.ceil(n.width/i),this.rows=Math.ceil(n.height/i),this.cells={}}},{key:"getIndex",value:function(n){var i=Math.floor(n.x/this.cellSize),r=Math.floor(n.y/this.cellSize);return r*this.columns+i}},{key:"add",value:function(n,i,r){var o=new eI(n,i),s=this.getIndex(r),a=this.cells[s];a||(a=[],this.cells[s]=a),a.push(o)}},{key:"organize",value:function(){for(var n in this.cells){var i=this.cells[n];i.sort(eI.compare)}}},{key:"getLabelsToDisplay",value:function(n,i){var r=this.cellSize*this.cellSize,o=r/n/n,s=o*i/r,a=Math.ceil(s),d=[];for(var h in this.cells)for(var m=this.cells[h],v=0;v<Math.min(a,m.length);v++)d.push(m[v].key);return d}}])})();function tK(e){var t=e.graph,n=e.hoveredNode,i=e.highlightedNodes,r=e.displayedNodeLabels,o=[];return t.forEachEdge(function(s,a,d,h){(d===n||h===n||i.has(d)||i.has(h)||r.has(d)&&r.has(h))&&o.push(s)}),o}var nI=150,iI=50,Ug=Object.prototype.hasOwnProperty;function nK(e,t,n){if(!Ug.call(n,"x")||!Ug.call(n,"y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(t,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return n.color||(n.color=e.defaultNodeColor),!n.label&&n.label!==""&&(n.label=null),n.label!==void 0&&n.label!==null?n.label=""+n.label:n.label=null,n.size||(n.size=2),Ug.call(n,"hidden")||(n.hidden=!1),Ug.call(n,"highlighted")||(n.highlighted=!1),Ug.call(n,"forceLabel")||(n.forceLabel=!1),(!n.type||n.type==="")&&(n.type=e.defaultNodeType),n.zIndex||(n.zIndex=0),n}function iK(e,t,n){return n.color||(n.color=e.defaultEdgeColor),n.label||(n.label=""),n.size||(n.size=.5),Ug.call(n,"hidden")||(n.hidden=!1),Ug.call(n,"forceLabel")||(n.forceLabel=!1),(!n.type||n.type==="")&&(n.type=e.defaultEdgeType),n.zIndex||(n.zIndex=0),n}var Vz=(function(e){function t(n,i){var r,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Pu(this,t),r=Rh(this,t),mn(r,"elements",{}),mn(r,"canvasContexts",{}),mn(r,"webGLContexts",{}),mn(r,"pickingLayers",new Set),mn(r,"textures",{}),mn(r,"frameBuffers",{}),mn(r,"activeListeners",{}),mn(r,"labelGrid",new tI),mn(r,"nodeDataCache",{}),mn(r,"edgeDataCache",{}),mn(r,"nodeProgramIndex",{}),mn(r,"edgeProgramIndex",{}),mn(r,"nodesWithForcedLabels",new Set),mn(r,"edgesWithForcedLabels",new Set),mn(r,"nodeExtent",{x:[0,1],y:[0,1]}),mn(r,"nodeZExtent",[1/0,-1/0]),mn(r,"edgeZExtent",[1/0,-1/0]),mn(r,"matrix",df()),mn(r,"invMatrix",df()),mn(r,"correctionRatio",1),mn(r,"customBBox",null),mn(r,"normalizationFunction",YM({x:[0,1],y:[0,1]})),mn(r,"graphToViewportRatio",1),mn(r,"itemIDsIndex",{}),mn(r,"nodeIndices",{}),mn(r,"edgeIndices",{}),mn(r,"width",0),mn(r,"height",0),mn(r,"pixelRatio",KM()),mn(r,"pickingDownSizingRatio",2*r.pixelRatio),mn(r,"displayedNodeLabels",new Set),mn(r,"displayedEdgeLabels",new Set),mn(r,"highlightedNodes",new Set),mn(r,"hoveredNode",null),mn(r,"hoveredEdge",null),mn(r,"renderFrame",null),mn(r,"renderHighlightedNodesFrame",null),mn(r,"needToProcess",!1),mn(r,"checkEdgesEventsFrame",null),mn(r,"nodePrograms",{}),mn(r,"nodeHoverPrograms",{}),mn(r,"edgePrograms",{}),r.settings=Hq(o),AE(r.settings),Nq(n),!(i instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");r.graph=n,r.container=i,r.createWebGLContext("edges",{picking:o.enableEdgeEvents}),r.createCanvasContext("edgeLabels"),r.createWebGLContext("nodes",{picking:!0}),r.createCanvasContext("labels"),r.createCanvasContext("hovers"),r.createWebGLContext("hoverNodes"),r.createCanvasContext("mouse",{style:{touchAction:"none",userSelect:"none"}}),r.resize();for(var s in r.settings.nodeProgramClasses)r.registerNodeProgram(s,r.settings.nodeProgramClasses[s],r.settings.nodeHoverProgramClasses[s]);for(var a in r.settings.edgeProgramClasses)r.registerEdgeProgram(a,r.settings.edgeProgramClasses[a]);return r.camera=new JM,r.bindCameraHandlers(),r.mouseCaptor=new qq(r.elements.mouse,r),r.mouseCaptor.setSettings(r.settings),r.touchCaptor=new Yq(r.elements.mouse,r),r.touchCaptor.setSettings(r.settings),r.bindEventHandlers(),r.bindGraphHandlers(),r.handleSettingsUpdate(),r.refresh(),r}return Ah(t,e),Du(t,[{key:"registerNodeProgram",value:function(i,r,o){return this.nodePrograms[i]&&this.nodePrograms[i].kill(),this.nodeHoverPrograms[i]&&this.nodeHoverPrograms[i].kill(),this.nodePrograms[i]=new r(this.webGLContexts.nodes,this.frameBuffers.nodes,this),this.nodeHoverPrograms[i]=new(o||r)(this.webGLContexts.hoverNodes,null,this),this}},{key:"registerEdgeProgram",value:function(i,r){return this.edgePrograms[i]&&this.edgePrograms[i].kill(),this.edgePrograms[i]=new r(this.webGLContexts.edges,this.frameBuffers.edges,this),this}},{key:"unregisterNodeProgram",value:function(i){if(this.nodePrograms[i]){var r=this.nodePrograms,o=r[i],s=TE(r,[i].map(_w));o.kill(),this.nodePrograms=s}if(this.nodeHoverPrograms[i]){var a=this.nodeHoverPrograms,d=a[i],h=TE(a,[i].map(_w));d.kill(),this.nodePrograms=h}return this}},{key:"unregisterEdgeProgram",value:function(i){if(this.edgePrograms[i]){var r=this.edgePrograms,o=r[i],s=TE(r,[i].map(_w));o.kill(),this.edgePrograms=s}return this}},{key:"resetWebGLTexture",value:function(i){var r=this.webGLContexts[i],o=this.frameBuffers[i],s=this.textures[i];s&&r.deleteTexture(s);var a=r.createTexture();return r.bindFramebuffer(r.FRAMEBUFFER,o),r.bindTexture(r.TEXTURE_2D,a),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,this.width,this.height,0,r.RGBA,r.UNSIGNED_BYTE,null),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,a,0),this.textures[i]=a,this}},{key:"bindCameraHandlers",value:function(){var i=this;return this.activeListeners.camera=function(){i.scheduleRender()},this.camera.on("updated",this.activeListeners.camera),this}},{key:"unbindCameraHandlers",value:function(){return this.camera.removeListener("updated",this.activeListeners.camera),this}},{key:"getNodeAtPosition",value:function(i){var r=i.x,o=i.y,s=zM(this.webGLContexts.nodes,this.frameBuffers.nodes,r,o,this.pixelRatio,this.pickingDownSizingRatio),a=OM.apply(void 0,QM(s)),d=this.itemIDsIndex[a];return d&&d.type==="node"?d.id:null}},{key:"bindEventHandlers",value:function(){var i=this;this.activeListeners.handleResize=function(){i.scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(o){var s=Zx(o),a={event:s,preventSigmaDefault:function(){s.preventSigmaDefault()}},d=i.getNodeAtPosition(s);if(d&&i.hoveredNode!==d&&!i.nodeDataCache[d].hidden){i.hoveredNode&&i.emit("leaveNode",hi(hi({},a),{},{node:i.hoveredNode})),i.hoveredNode=d,i.emit("enterNode",hi(hi({},a),{},{node:d})),i.scheduleHighlightedNodesRender();return}if(i.hoveredNode&&i.getNodeAtPosition(s)!==i.hoveredNode){var h=i.hoveredNode;i.hoveredNode=null,i.emit("leaveNode",hi(hi({},a),{},{node:h})),i.scheduleHighlightedNodesRender();return}if(i.settings.enableEdgeEvents){var m=i.hoveredNode?null:i.getEdgeAtPoint(a.event.x,a.event.y);m!==i.hoveredEdge&&(i.hoveredEdge&&i.emit("leaveEdge",hi(hi({},a),{},{edge:i.hoveredEdge})),m&&i.emit("enterEdge",hi(hi({},a),{},{edge:m})),i.hoveredEdge=m)}},this.activeListeners.handleMoveBody=function(o){var s=Zx(o);i.emit("moveBody",{event:s,preventSigmaDefault:function(){s.preventSigmaDefault()}})},this.activeListeners.handleLeave=function(o){var s=Zx(o),a={event:s,preventSigmaDefault:function(){s.preventSigmaDefault()}};i.hoveredNode&&(i.emit("leaveNode",hi(hi({},a),{},{node:i.hoveredNode})),i.scheduleHighlightedNodesRender()),i.settings.enableEdgeEvents&&i.hoveredEdge&&(i.emit("leaveEdge",hi(hi({},a),{},{edge:i.hoveredEdge})),i.scheduleHighlightedNodesRender()),i.emit("leaveStage",hi({},a))},this.activeListeners.handleEnter=function(o){var s=Zx(o),a={event:s,preventSigmaDefault:function(){s.preventSigmaDefault()}};i.emit("enterStage",hi({},a))};var r=function(s){return function(a){var d=Zx(a),h={event:d,preventSigmaDefault:function(){d.preventSigmaDefault()}},m=i.getNodeAtPosition(d);if(m)return i.emit("".concat(s,"Node"),hi(hi({},h),{},{node:m}));if(i.settings.enableEdgeEvents){var v=i.getEdgeAtPoint(d.x,d.y);if(v)return i.emit("".concat(s,"Edge"),hi(hi({},h),{},{edge:v}))}return i.emit("".concat(s,"Stage"),h)}};return this.activeListeners.handleClick=r("click"),this.activeListeners.handleRightClick=r("rightClick"),this.activeListeners.handleDoubleClick=r("doubleClick"),this.activeListeners.handleWheel=r("wheel"),this.activeListeners.handleDown=r("down"),this.activeListeners.handleUp=r("up"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("mousemovebody",this.activeListeners.handleMoveBody),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this.mouseCaptor.on("mouseup",this.activeListeners.handleUp),this.mouseCaptor.on("mouseleave",this.activeListeners.handleLeave),this.mouseCaptor.on("mouseenter",this.activeListeners.handleEnter),this.touchCaptor.on("touchdown",this.activeListeners.handleDown),this.touchCaptor.on("touchdown",this.activeListeners.handleMove),this.touchCaptor.on("touchup",this.activeListeners.handleUp),this.touchCaptor.on("touchmove",this.activeListeners.handleMove),this.touchCaptor.on("tap",this.activeListeners.handleClick),this.touchCaptor.on("doubletap",this.activeListeners.handleDoubleClick),this.touchCaptor.on("touchmove",this.activeListeners.handleMoveBody),this}},{key:"bindGraphHandlers",value:function(){var i=this,r=this.graph,o=new Set(["x","y","zIndex","type"]);return this.activeListeners.eachNodeAttributesUpdatedGraphUpdate=function(s){var a,d=(a=s.hints)===null||a===void 0?void 0:a.attributes;i.graph.forEachNode(function(m){return i.updateNode(m)});var h=!d||d.some(function(m){return o.has(m)});i.refresh({partialGraph:{nodes:r.nodes()},skipIndexation:!h,schedule:!0})},this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate=function(s){var a,d=(a=s.hints)===null||a===void 0?void 0:a.attributes;i.graph.forEachEdge(function(m){return i.updateEdge(m)});var h=d&&["zIndex","type"].some(function(m){return d==null?void 0:d.includes(m)});i.refresh({partialGraph:{edges:r.edges()},skipIndexation:!h,schedule:!0})},this.activeListeners.addNodeGraphUpdate=function(s){var a=s.key;i.addNode(a),i.refresh({partialGraph:{nodes:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.updateNodeGraphUpdate=function(s){var a=s.key;i.refresh({partialGraph:{nodes:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropNodeGraphUpdate=function(s){var a=s.key;i.removeNode(a),i.refresh({schedule:!0})},this.activeListeners.addEdgeGraphUpdate=function(s){var a=s.key;i.addEdge(a),i.refresh({partialGraph:{edges:[a]},schedule:!0})},this.activeListeners.updateEdgeGraphUpdate=function(s){var a=s.key;i.refresh({partialGraph:{edges:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropEdgeGraphUpdate=function(s){var a=s.key;i.removeEdge(a),i.refresh({schedule:!0})},this.activeListeners.clearEdgesGraphUpdate=function(){i.clearEdgeState(),i.clearEdgeIndices(),i.refresh({schedule:!0})},this.activeListeners.clearGraphUpdate=function(){i.clearEdgeState(),i.clearNodeState(),i.clearEdgeIndices(),i.clearNodeIndices(),i.refresh({schedule:!0})},r.on("nodeAdded",this.activeListeners.addNodeGraphUpdate),r.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),r.on("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),r.on("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),r.on("edgeAdded",this.activeListeners.addEdgeGraphUpdate),r.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),r.on("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),r.on("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),r.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),r.on("cleared",this.activeListeners.clearGraphUpdate),this}},{key:"unbindGraphHandlers",value:function(){var i=this.graph;i.removeListener("nodeAdded",this.activeListeners.addNodeGraphUpdate),i.removeListener("nodeDropped",this.activeListeners.dropNodeGraphUpdate),i.removeListener("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),i.removeListener("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),i.removeListener("edgeAdded",this.activeListeners.addEdgeGraphUpdate),i.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),i.removeListener("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),i.removeListener("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),i.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),i.removeListener("cleared",this.activeListeners.clearGraphUpdate)}},{key:"getEdgeAtPoint",value:function(i,r){var o=zM(this.webGLContexts.edges,this.frameBuffers.edges,i,r,this.pixelRatio,this.pickingDownSizingRatio),s=OM.apply(void 0,QM(o)),a=this.itemIDsIndex[s];return a&&a.type==="edge"?a.id:null}},{key:"process",value:function(){var i=this;this.emit("beforeProcess");var r=this.graph,o=this.settings,s=this.getDimensions();if(this.nodeExtent=zq(this.graph),!this.settings.autoRescale){var a=s.width,d=s.height,h=this.nodeExtent,m=h.x,v=h.y;this.nodeExtent={x:[(m[0]+m[1])/2-a/2,(m[0]+m[1])/2+a/2],y:[(v[0]+v[1])/2-d/2,(v[0]+v[1])/2+d/2]}}this.normalizationFunction=YM(this.customBBox||this.nodeExtent);var w=new JM,R=Kx(w.getState(),s,this.getGraphDimensions(),this.getStagePadding());this.labelGrid.resizeAndClear(s,o.labelGridCellSize);for(var L={},O={},z={},$={},U=1,Y=r.nodes(),X=0,q=Y.length;X<q;X++){var ie=Y[X],re=this.nodeDataCache[ie],J=r.getNodeAttributes(ie);re.x=J.x,re.y=J.y,this.normalizationFunction.applyTo(re),typeof re.label=="string"&&!re.hidden&&this.labelGrid.add(ie,re.size,this.framedGraphToViewport(re,{matrix:R})),L[re.type]=(L[re.type]||0)+1}this.labelGrid.organize();for(var ne in this.nodePrograms){if(!Ug.call(this.nodePrograms,ne))throw new Error('Sigma: could not find a suitable program for node type "'.concat(ne,'"!'));this.nodePrograms[ne].reallocate(L[ne]||0),L[ne]=0}this.settings.zIndex&&this.nodeZExtent[0]!==this.nodeZExtent[1]&&(Y=ZM(this.nodeZExtent,function(xt){return i.nodeDataCache[xt].zIndex},Y));for(var be=0,ue=Y.length;be<ue;be++){var ve=Y[be];O[ve]=U,$[O[ve]]={type:"node",id:ve},U++;var ce=this.nodeDataCache[ve];this.addNodeToProgram(ve,O[ve],L[ce.type]++)}for(var Ie={},Te=r.edges(),fe=0,he=Te.length;fe<he;fe++){var Re=Te[fe],De=this.edgeDataCache[Re];Ie[De.type]=(Ie[De.type]||0)+1}this.settings.zIndex&&this.edgeZExtent[0]!==this.edgeZExtent[1]&&(Te=ZM(this.edgeZExtent,function(xt){return i.edgeDataCache[xt].zIndex},Te));for(var Ye in this.edgePrograms){if(!Ug.call(this.edgePrograms,Ye))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(Ye,'"!'));this.edgePrograms[Ye].reallocate(Ie[Ye]||0),Ie[Ye]=0}for(var _e=0,Le=Te.length;_e<Le;_e++){var Oe=Te[_e];z[Oe]=U,$[z[Oe]]={type:"edge",id:Oe},U++;var yt=this.edgeDataCache[Oe];this.addEdgeToProgram(Oe,z[Oe],Ie[yt.type]++)}return this.itemIDsIndex=$,this.nodeIndices=O,this.edgeIndices=z,this.emit("afterProcess"),this}},{key:"handleSettingsUpdate",value:function(i){var r=this,o=this.settings;if(this.camera.minRatio=o.minCameraRatio,this.camera.maxRatio=o.maxCameraRatio,this.camera.enabledZooming=o.enableCameraZooming,this.camera.enabledPanning=o.enableCameraPanning,this.camera.enabledRotation=o.enableCameraRotation,o.cameraPanBoundaries?this.camera.clean=function(m){return r.cleanCameraState(m,o.cameraPanBoundaries&&uT(o.cameraPanBoundaries)==="object"?o.cameraPanBoundaries:{})}:this.camera.clean=null,this.camera.setState(this.camera.validateState(this.camera.getState())),i){if(i.edgeProgramClasses!==o.edgeProgramClasses){for(var s in o.edgeProgramClasses)o.edgeProgramClasses[s]!==i.edgeProgramClasses[s]&&this.registerEdgeProgram(s,o.edgeProgramClasses[s]);for(var a in i.edgeProgramClasses)o.edgeProgramClasses[a]||this.unregisterEdgeProgram(a)}if(i.nodeProgramClasses!==o.nodeProgramClasses||i.nodeHoverProgramClasses!==o.nodeHoverProgramClasses){for(var d in o.nodeProgramClasses)(o.nodeProgramClasses[d]!==i.nodeProgramClasses[d]||o.nodeHoverProgramClasses[d]!==i.nodeHoverProgramClasses[d])&&this.registerNodeProgram(d,o.nodeProgramClasses[d],o.nodeHoverProgramClasses[d]);for(var h in i.nodeProgramClasses)o.nodeProgramClasses[h]||this.unregisterNodeProgram(h)}}return this.mouseCaptor.setSettings(this.settings),this.touchCaptor.setSettings(this.settings),this}},{key:"cleanCameraState",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.tolerance,s=o===void 0?0:o,a=r.boundaries,d=hi({},i),h=a||this.nodeExtent,m=Ub(h.x,2),v=m[0],w=m[1],R=Ub(h.y,2),L=R[0],O=R[1],z=[this.graphToViewport({x:v,y:L},{cameraState:i}),this.graphToViewport({x:w,y:L},{cameraState:i}),this.graphToViewport({x:v,y:O},{cameraState:i}),this.graphToViewport({x:w,y:O},{cameraState:i})],$=1/0,U=-1/0,Y=1/0,X=-1/0;z.forEach(function(Ie){var Te=Ie.x,fe=Ie.y;$=Math.min($,Te),U=Math.max(U,Te),Y=Math.min(Y,fe),X=Math.max(X,fe)});var q=U-$,ie=X-Y,re=this.getDimensions(),J=re.width,ne=re.height,be=0,ue=0;if(q>=J?U<J-s?be=U-(J-s):$>s&&(be=$-s):U>J+s?be=U-(J+s):$<-s&&(be=$+s),ie>=ne?X<ne-s?ue=X-(ne-s):Y>s&&(ue=Y-s):X>ne+s?ue=X-(ne+s):Y<-s&&(ue=Y+s),be||ue){var ve=this.viewportToFramedGraph({x:0,y:0},{cameraState:i}),ce=this.viewportToFramedGraph({x:be,y:ue},{cameraState:i});be=ce.x-ve.x,ue=ce.y-ve.y,d.x+=be,d.y+=ue}return d}},{key:"renderLabels",value:function(){if(!this.settings.renderLabels)return this;var i=this.camera.getState(),r=this.labelGrid.getLabelsToDisplay(i.ratio,this.settings.labelDensity);XM(r,this.nodesWithForcedLabels),this.displayedNodeLabels=new Set;for(var o=this.canvasContexts.labels,s=0,a=r.length;s<a;s++){var d=r[s],h=this.nodeDataCache[d];if(!this.displayedNodeLabels.has(d)&&!h.hidden){var m=this.framedGraphToViewport(h),v=m.x,w=m.y,R=this.scaleSize(h.size);if(!(!h.forceLabel&&R<this.settings.labelRenderedSizeThreshold)&&!(v<-nI||v>this.width+nI||w<-iI||w>this.height+iI)){this.displayedNodeLabels.add(d);var L=this.settings.defaultDrawNodeLabel,O=this.nodePrograms[h.type],z=(O==null?void 0:O.drawLabel)||L;z(o,hi(hi({key:d},h),{},{size:R,x:v,y:w}),this.settings)}}}return this}},{key:"renderEdgeLabels",value:function(){if(!this.settings.renderEdgeLabels)return this;var i=this.canvasContexts.edgeLabels;i.clearRect(0,0,this.width,this.height);var r=tK({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedNodeLabels,highlightedNodes:this.highlightedNodes});XM(r,this.edgesWithForcedLabels);for(var o=new Set,s=0,a=r.length;s<a;s++){var d=r[s],h=this.graph.extremities(d),m=this.nodeDataCache[h[0]],v=this.nodeDataCache[h[1]],w=this.edgeDataCache[d];if(!o.has(d)&&!(w.hidden||m.hidden||v.hidden)){var R=this.settings.defaultDrawEdgeLabel,L=this.edgePrograms[w.type],O=(L==null?void 0:L.drawLabel)||R;O(i,hi(hi({key:d},w),{},{size:this.scaleSize(w.size)}),hi(hi(hi({key:h[0]},m),this.framedGraphToViewport(m)),{},{size:this.scaleSize(m.size)}),hi(hi(hi({key:h[1]},v),this.framedGraphToViewport(v)),{},{size:this.scaleSize(v.size)}),this.settings),o.add(d)}}return this.displayedEdgeLabels=o,this}},{key:"renderHighlightedNodes",value:function(){var i=this,r=this.canvasContexts.hovers;r.clearRect(0,0,this.width,this.height);var o=function(R){var L=i.nodeDataCache[R],O=i.framedGraphToViewport(L),z=O.x,$=O.y,U=i.scaleSize(L.size),Y=i.settings.defaultDrawNodeHover,X=i.nodePrograms[L.type],q=(X==null?void 0:X.drawHover)||Y;q(r,hi(hi({key:R},L),{},{size:U,x:z,y:$}),i.settings)},s=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&s.push(this.hoveredNode),this.highlightedNodes.forEach(function(w){w!==i.hoveredNode&&s.push(w)}),s.forEach(function(w){return o(w)});var a={};s.forEach(function(w){var R=i.nodeDataCache[w].type;a[R]=(a[R]||0)+1});for(var d in this.nodeHoverPrograms)this.nodeHoverPrograms[d].reallocate(a[d]||0),a[d]=0;s.forEach(function(w){var R=i.nodeDataCache[w];i.nodeHoverPrograms[R.type].process(0,a[R.type]++,R)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);var h=this.getRenderParams();for(var m in this.nodeHoverPrograms){var v=this.nodeHoverPrograms[m];v.render(h)}}},{key:"scheduleHighlightedNodesRender",value:function(){var i=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=requestAnimationFrame(function(){i.renderHighlightedNodesFrame=null,i.renderHighlightedNodes(),i.renderEdgeLabels()}))}},{key:"render",value:function(){var i=this;this.emit("beforeRender");var r=function(){return i.emit("afterRender"),i};if(this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.resize(),this.needToProcess&&this.process(),this.needToProcess=!1,this.clear(),this.pickingLayers.forEach(function(z){return i.resetWebGLTexture(z)}),!this.graph.order)return r();var o=this.mouseCaptor,s=this.camera.isAnimated()||o.isMoving||o.draggedEvents||o.currentWheelDirection,a=this.camera.getState(),d=this.getDimensions(),h=this.getGraphDimensions(),m=this.getStagePadding();this.matrix=Kx(a,d,h,m),this.invMatrix=Kx(a,d,h,m,!0),this.correctionRatio=Oq(this.matrix,a,d),this.graphToViewportRatio=this.getGraphToViewportRatio();var v=this.getRenderParams();for(var w in this.nodePrograms){var R=this.nodePrograms[w];R.render(v)}if(!this.settings.hideEdgesOnMove||!s)for(var L in this.edgePrograms){var O=this.edgePrograms[L];O.render(v)}return this.settings.hideLabelsOnMove&&s||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),r()}},{key:"addNode",value:function(i){var r=Object.assign({},this.graph.getNodeAttributes(i));this.settings.nodeReducer&&(r=this.settings.nodeReducer(i,r));var o=nK(this.settings,i,r);this.nodeDataCache[i]=o,this.nodesWithForcedLabels.delete(i),o.forceLabel&&!o.hidden&&this.nodesWithForcedLabels.add(i),this.highlightedNodes.delete(i),o.highlighted&&!o.hidden&&this.highlightedNodes.add(i),this.settings.zIndex&&(o.zIndex<this.nodeZExtent[0]&&(this.nodeZExtent[0]=o.zIndex),o.zIndex>this.nodeZExtent[1]&&(this.nodeZExtent[1]=o.zIndex))}},{key:"updateNode",value:function(i){this.addNode(i);var r=this.nodeDataCache[i];this.normalizationFunction.applyTo(r)}},{key:"removeNode",value:function(i){delete this.nodeDataCache[i],delete this.nodeProgramIndex[i],this.highlightedNodes.delete(i),this.hoveredNode===i&&(this.hoveredNode=null),this.nodesWithForcedLabels.delete(i)}},{key:"addEdge",value:function(i){var r=Object.assign({},this.graph.getEdgeAttributes(i));this.settings.edgeReducer&&(r=this.settings.edgeReducer(i,r));var o=iK(this.settings,i,r);this.edgeDataCache[i]=o,this.edgesWithForcedLabels.delete(i),o.forceLabel&&!o.hidden&&this.edgesWithForcedLabels.add(i),this.settings.zIndex&&(o.zIndex<this.edgeZExtent[0]&&(this.edgeZExtent[0]=o.zIndex),o.zIndex>this.edgeZExtent[1]&&(this.edgeZExtent[1]=o.zIndex))}},{key:"updateEdge",value:function(i){this.addEdge(i)}},{key:"removeEdge",value:function(i){delete this.edgeDataCache[i],delete this.edgeProgramIndex[i],this.hoveredEdge===i&&(this.hoveredEdge=null),this.edgesWithForcedLabels.delete(i)}},{key:"clearNodeIndices",value:function(){this.labelGrid=new tI,this.nodeExtent={x:[0,1],y:[0,1]},this.nodeDataCache={},this.edgeProgramIndex={},this.nodesWithForcedLabels=new Set,this.nodeZExtent=[1/0,-1/0],this.highlightedNodes=new Set}},{key:"clearEdgeIndices",value:function(){this.edgeDataCache={},this.edgeProgramIndex={},this.edgesWithForcedLabels=new Set,this.edgeZExtent=[1/0,-1/0]}},{key:"clearIndices",value:function(){this.clearEdgeIndices(),this.clearNodeIndices()}},{key:"clearNodeState",value:function(){this.displayedNodeLabels=new Set,this.highlightedNodes=new Set,this.hoveredNode=null}},{key:"clearEdgeState",value:function(){this.displayedEdgeLabels=new Set,this.highlightedNodes=new Set,this.hoveredEdge=null}},{key:"clearState",value:function(){this.clearEdgeState(),this.clearNodeState()}},{key:"addNodeToProgram",value:function(i,r,o){var s=this.nodeDataCache[i],a=this.nodePrograms[s.type];if(!a)throw new Error('Sigma: could not find a suitable program for node type "'.concat(s.type,'"!'));a.process(r,o,s),this.nodeProgramIndex[i]=o}},{key:"addEdgeToProgram",value:function(i,r,o){var s=this.edgeDataCache[i],a=this.edgePrograms[s.type];if(!a)throw new Error('Sigma: could not find a suitable program for edge type "'.concat(s.type,'"!'));var d=this.graph.extremities(i),h=this.nodeDataCache[d[0]],m=this.nodeDataCache[d[1]];a.process(r,o,h,m,s),this.edgeProgramIndex[i]=o}},{key:"getRenderParams",value:function(){return{matrix:this.matrix,invMatrix:this.invMatrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,cameraAngle:this.camera.angle,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio,downSizingRatio:this.pickingDownSizingRatio,minEdgeThickness:this.settings.minEdgeThickness,antiAliasingFeather:this.settings.antiAliasingFeather}}},{key:"getStagePadding",value:function(){var i=this.settings,r=i.stagePadding,o=i.autoRescale;return o&&r||0}},{key:"createLayer",value:function(i,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.elements[i])throw new Error('Sigma: a layer named "'.concat(i,'" already exists'));var s=Bq(r,{position:"absolute"},{class:"sigma-".concat(i)});return o.style&&Object.assign(s.style,o.style),this.elements[i]=s,"beforeLayer"in o&&o.beforeLayer?this.elements[o.beforeLayer].before(s):"afterLayer"in o&&o.afterLayer?this.elements[o.afterLayer].after(s):this.container.appendChild(s),s}},{key:"createCanvas",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.createLayer(i,"canvas",r)}},{key:"createCanvasContext",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=this.createCanvas(i,r),s={preserveDrawingBuffer:!1,antialias:!1};return this.canvasContexts[i]=o.getContext("2d",s),this}},{key:"createWebGLContext",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=(r==null?void 0:r.canvas)||this.createCanvas(i,r);r.hidden&&o.remove();var s=hi({preserveDrawingBuffer:!1,antialias:!1},r),a;a=o.getContext("webgl2",s),a||(a=o.getContext("webgl",s)),a||(a=o.getContext("experimental-webgl",s));var d=a;if(this.webGLContexts[i]=d,d.blendFunc(d.ONE,d.ONE_MINUS_SRC_ALPHA),r.picking){this.pickingLayers.add(i);var h=d.createFramebuffer();if(!h)throw new Error("Sigma: cannot create a new frame buffer for layer ".concat(i));this.frameBuffers[i]=h}return d}},{key:"killLayer",value:function(i){var r=this.elements[i];if(!r)throw new Error("Sigma: cannot kill layer ".concat(i,", which does not exist"));if(this.webGLContexts[i]){var o,s=this.webGLContexts[i];(o=s.getExtension("WEBGL_lose_context"))===null||o===void 0||o.loseContext(),delete this.webGLContexts[i]}else this.canvasContexts[i]&&delete this.canvasContexts[i];return r.remove(),delete this.elements[i],this}},{key:"getCamera",value:function(){return this.camera}},{key:"setCamera",value:function(i){this.unbindCameraHandlers(),this.camera=i,this.bindCameraHandlers()}},{key:"getContainer",value:function(){return this.container}},{key:"getGraph",value:function(){return this.graph}},{key:"setGraph",value:function(i){i!==this.graph&&(this.hoveredNode&&!i.hasNode(this.hoveredNode)&&(this.hoveredNode=null),this.hoveredEdge&&!i.hasEdge(this.hoveredEdge)&&(this.hoveredEdge=null),this.unbindGraphHandlers(),this.checkEdgesEventsFrame!==null&&(cancelAnimationFrame(this.checkEdgesEventsFrame),this.checkEdgesEventsFrame=null),this.graph=i,this.bindGraphHandlers(),this.refresh())}},{key:"getMouseCaptor",value:function(){return this.mouseCaptor}},{key:"getTouchCaptor",value:function(){return this.touchCaptor}},{key:"getDimensions",value:function(){return{width:this.width,height:this.height}}},{key:"getGraphDimensions",value:function(){var i=this.customBBox||this.nodeExtent;return{width:i.x[1]-i.x[0]||1,height:i.y[1]-i.y[0]||1}}},{key:"getNodeDisplayData",value:function(i){var r=this.nodeDataCache[i];return r?Object.assign({},r):void 0}},{key:"getEdgeDisplayData",value:function(i){var r=this.edgeDataCache[i];return r?Object.assign({},r):void 0}},{key:"getNodeDisplayedLabels",value:function(){return new Set(this.displayedNodeLabels)}},{key:"getEdgeDisplayedLabels",value:function(){return new Set(this.displayedEdgeLabels)}},{key:"getSettings",value:function(){return hi({},this.settings)}},{key:"getSetting",value:function(i){return this.settings[i]}},{key:"setSetting",value:function(i,r){var o=hi({},this.settings);return this.settings[i]=r,AE(this.settings),this.handleSettingsUpdate(o),this.scheduleRefresh(),this}},{key:"updateSetting",value:function(i,r){return this.setSetting(i,r(this.settings[i])),this}},{key:"setSettings",value:function(i){var r=hi({},this.settings);return this.settings=hi(hi({},this.settings),i),AE(this.settings),this.handleSettingsUpdate(r),this.scheduleRefresh(),this}},{key:"resize",value:function(i){var r=this.width,o=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=KM(),this.width===0)if(this.settings.allowInvalidContainer)this.width=1;else throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(this.height===0)if(this.settings.allowInvalidContainer)this.height=1;else throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(!i&&r===this.width&&o===this.height)return this;for(var s in this.elements){var a=this.elements[s];a.style.width=this.width+"px",a.style.height=this.height+"px"}for(var d in this.canvasContexts)this.elements[d].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[d].setAttribute("height",this.height*this.pixelRatio+"px"),this.pixelRatio!==1&&this.canvasContexts[d].scale(this.pixelRatio,this.pixelRatio);for(var h in this.webGLContexts){this.elements[h].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[h].setAttribute("height",this.height*this.pixelRatio+"px");var m=this.webGLContexts[h];if(m.viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio),this.pickingLayers.has(h)){var v=this.textures[h];v&&m.deleteTexture(v)}}return this.emit("resize"),this}},{key:"clear",value:function(){return this.emit("beforeClear"),this.webGLContexts.nodes.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.nodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.edges.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.edges.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this.emit("afterClear"),this}},{key:"refresh",value:function(i){var r=this,o=(i==null?void 0:i.skipIndexation)!==void 0?i==null?void 0:i.skipIndexation:!1,s=(i==null?void 0:i.schedule)!==void 0?i.schedule:!1,a=!i||!i.partialGraph;if(a)this.clearEdgeIndices(),this.clearNodeIndices(),this.graph.forEachNode(function(X){return r.addNode(X)}),this.graph.forEachEdge(function(X){return r.addEdge(X)});else{for(var d,h,m=((d=i.partialGraph)===null||d===void 0?void 0:d.nodes)||[],v=0,w=(m==null?void 0:m.length)||0;v<w;v++){var R=m[v];if(this.updateNode(R),o){var L=this.nodeProgramIndex[R];if(L===void 0)throw new Error('Sigma: node "'.concat(R,`" can't be repaint`));this.addNodeToProgram(R,this.nodeIndices[R],L)}}for(var O=(i==null||(h=i.partialGraph)===null||h===void 0?void 0:h.edges)||[],z=0,$=O.length;z<$;z++){var U=O[z];if(this.updateEdge(U),o){var Y=this.edgeProgramIndex[U];if(Y===void 0)throw new Error('Sigma: edge "'.concat(U,`" can't be repaint`));this.addEdgeToProgram(U,this.edgeIndices[U],Y)}}}return(a||!o)&&(this.needToProcess=!0),s?this.scheduleRender():this.render(),this}},{key:"scheduleRender",value:function(){var i=this;return this.renderFrame||(this.renderFrame=requestAnimationFrame(function(){i.render()})),this}},{key:"scheduleRefresh",value:function(i){return this.refresh(hi(hi({},i),{},{schedule:!0}))}},{key:"getViewportZoomedState",value:function(i,r){var o=this.camera.getState(),s=o.ratio,a=o.angle,d=o.x,h=o.y,m=this.settings,v=m.minCameraRatio,w=m.maxCameraRatio;typeof w=="number"&&(r=Math.min(r,w)),typeof v=="number"&&(r=Math.max(r,v));var R=r/s,L={x:this.width/2,y:this.height/2},O=this.viewportToFramedGraph(i),z=this.viewportToFramedGraph(L);return{angle:a,x:(O.x-z.x)*(1-R)+d,y:(O.y-z.y)*(1-R)+h,ratio:r}}},{key:"viewRectangle",value:function(){var i=this.viewportToFramedGraph({x:0,y:0}),r=this.viewportToFramedGraph({x:this.width,y:0}),o=this.viewportToFramedGraph({x:0,y:this.height});return{x1:i.x,y1:i.y,x2:r.x,y2:r.y,height:r.y-o.y}}},{key:"framedGraphToViewport",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=!!r.cameraState||!!r.viewportDimensions||!!r.graphDimensions,s=r.matrix?r.matrix:o?Kx(r.cameraState||this.camera.getState(),r.viewportDimensions||this.getDimensions(),r.graphDimensions||this.getGraphDimensions(),r.padding||this.getStagePadding()):this.matrix,a=lT(s,i);return{x:(1+a.x)*this.width/2,y:(1-a.y)*this.height/2}}},{key:"viewportToFramedGraph",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=!!r.cameraState||!!r.viewportDimensions||!r.graphDimensions,s=r.matrix?r.matrix:o?Kx(r.cameraState||this.camera.getState(),r.viewportDimensions||this.getDimensions(),r.graphDimensions||this.getGraphDimensions(),r.padding||this.getStagePadding(),!0):this.invMatrix,a=lT(s,{x:i.x/this.width*2-1,y:1-i.y/this.height*2});return isNaN(a.x)&&(a.x=0),isNaN(a.y)&&(a.y=0),a}},{key:"viewportToGraph",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.normalizationFunction.inverse(this.viewportToFramedGraph(i,r))}},{key:"graphToViewport",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.framedGraphToViewport(this.normalizationFunction(i),r)}},{key:"getGraphToViewportRatio",value:function(){var i={x:0,y:0},r={x:1,y:1},o=Math.sqrt(Math.pow(i.x-r.x,2)+Math.pow(i.y-r.y,2)),s=this.graphToViewport(i),a=this.graphToViewport(r),d=Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2));return d/o}},{key:"getBBox",value:function(){return this.nodeExtent}},{key:"getCustomBBox",value:function(){return this.customBBox}},{key:"setCustomBBox",value:function(i){return this.customBBox=i,this.scheduleRender(),this}},{key:"kill",value:function(){this.emit("kill"),this.removeAllListeners(),this.unbindCameraHandlers(),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),this.unbindGraphHandlers(),this.clearIndices(),this.clearState(),this.nodeDataCache={},this.edgeDataCache={},this.highlightedNodes.clear(),this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&(cancelAnimationFrame(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var i=this.container;i.firstChild;)i.removeChild(i.firstChild);for(var r in this.nodePrograms)this.nodePrograms[r].kill();for(var o in this.nodeHoverPrograms)this.nodeHoverPrograms[o].kill();for(var s in this.edgePrograms)this.edgePrograms[s].kill();this.nodePrograms={},this.nodeHoverPrograms={},this.edgePrograms={};for(var a in this.elements)this.killLayer(a);this.canvasContexts={},this.webGLContexts={},this.elements={}}},{key:"scaleSize",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.camera.ratio;return i/this.settings.zoomToSizeRatioFunction(r)*(this.getSetting("itemSizesReference")==="positions"?r*this.graphToViewportRatio:1)}},{key:"getCanvases",value:function(){var i={};for(var r in this.elements)this.elements[r]instanceof HTMLCanvasElement&&(i[r]=this.elements[r]);return i}}])})(pP),S_=Vz;const $z=I.createContext(null),rK=$z.Provider;function mP(){const e=I.useContext($z);if(e==null)throw new Error("No context provided: useSigmaContext() can only be used in a descendant of <SigmaContainer>");return e}function Vp(){return mP().sigma}function Wz(){const{sigma:e}=mP();return I.useCallback((t=>{e&&Object.keys(t).forEach((n=>{e.setSetting(n,t[n])}))}),[e])}function QS(e){return new Set(Object.keys(e))}const rI=QS({clickNode:!0,rightClickNode:!0,downNode:!0,enterNode:!0,leaveNode:!0,doubleClickNode:!0,wheelNode:!0,clickEdge:!0,rightClickEdge:!0,downEdge:!0,enterEdge:!0,leaveEdge:!0,doubleClickEdge:!0,wheelEdge:!0,clickStage:!0,rightClickStage:!0,downStage:!0,doubleClickStage:!0,wheelStage:!0,beforeRender:!0,afterRender:!0,kill:!0,upStage:!0,upEdge:!0,upNode:!0,enterStage:!0,leaveStage:!0,resize:!0,afterClear:!0,afterProcess:!0,beforeClear:!0,beforeProcess:!0,moveBody:!0}),oI=QS({click:!0,rightClick:!0,doubleClick:!0,mouseup:!0,mousedown:!0,mousemove:!0,mousemovebody:!0,mouseleave:!0,mouseenter:!0,wheel:!0}),sI=QS({touchup:!0,touchdown:!0,touchmove:!0,touchmovebody:!0,tap:!0,doubletap:!0}),aI=QS({updated:!0});function oK(){const e=Vp(),t=Wz(),[n,i]=I.useState({});return I.useEffect((()=>{if(!e||!n)return;const r=n,o=Object.keys(r);return o.forEach((s=>{const a=r[s];rI.has(s)&&e.on(s,a),oI.has(s)&&e.getMouseCaptor().on(s,a),sI.has(s)&&e.getTouchCaptor().on(s,a),aI.has(s)&&e.getCamera().on(s,a)})),()=>{e&&o.forEach((s=>{const a=r[s];rI.has(s)&&e.off(s,a),oI.has(s)&&e.getMouseCaptor().off(s,a),sI.has(s)&&e.getTouchCaptor().off(s,a),aI.has(s)&&e.getCamera().off(s,a)}))}}),[e,n,t]),i}function yP(e,t){if(e===t)return!0;if(typeof e=="object"&&e!=null&&typeof t=="object"&&t!=null){if(Object.keys(e).length!=Object.keys(t).length)return!1;for(const n in e)if(!Object.hasOwn(t,n)||!yP(e[n],t[n]))return!1;return!0}return!1}function sK(e){const t=Vp(),[n,i]=I.useState(e||{});I.useEffect((()=>{i((h=>yP(h,e||{})?h:e||{}))}),[e]);const r=I.useCallback((h=>{t.getCamera().animatedZoom(Object.assign(Object.assign({},n),h))}),[t,n]),o=I.useCallback((h=>{t.getCamera().animatedUnzoom(Object.assign(Object.assign({},n),h))}),[t,n]),s=I.useCallback((h=>{t.getCamera().animatedReset(Object.assign(Object.assign({},n),h))}),[t,n]),a=I.useCallback(((h,m)=>{t.getCamera().animate(h,Object.assign(Object.assign({},n),m))}),[t,n]),d=I.useCallback(((h,m)=>{const v=t.getNodeDisplayData(h);v?t.getCamera().animate(v,Object.assign(Object.assign({},n),m)):console.warn(`Node ${h} not found`)}),[t,n]);return{zoomIn:r,zoomOut:o,reset:s,goto:a,gotoNode:d}}function aK(e){const t=mP(),[n,i]=I.useState(!1),[r,o]=I.useState(e||t.container),s=I.useCallback((()=>i((a=>!a))),[]);return I.useEffect((()=>(document.addEventListener("fullscreenchange",s),()=>document.removeEventListener("fullscreenchange",s))),[s]),I.useEffect((()=>{o(e||t.container)}),[e,t.container]),{toggle:I.useCallback((()=>{var a;a=r,document.fullscreenElement!==a?a.requestFullscreen():document.exitFullscreen&&document.exitFullscreen()}),[r]),isFullScreen:n}}const lK=I.forwardRef((({graph:e,id:t,className:n,style:i,settings:r={},children:o},s)=>{const a=I.useRef(null),d=I.useRef(null),h={className:`react-sigma ${n||""}`,id:t,style:i},[m,v]=I.useState(null),[w,R]=I.useState(r);I.useEffect((()=>{R((z=>yP(z,r)?z:r))}),[r]),I.useEffect((()=>{let z=null;if(d.current!==null){let $=new xs;e&&($=typeof e=="function"?new e:e),z=new Vz($,d.current,w),v((U=>{let Y=null;return U&&(Y=U.getCamera().getState()),Y&&z.getCamera().setState(Y),z}))}return()=>{z&&z.kill()}}),[d,e,w]),I.useImperativeHandle(s,(()=>m),[m]);const L=I.useMemo((()=>m&&a.current?{sigma:m,container:a.current}:null),[m,a]),O=L!==null?qt.createElement(rK,{value:L},o):null;return qt.createElement("div",Object.assign({},h,{ref:a}),qt.createElement("div",{className:"sigma-container",ref:d}),O)}));var lI;function cT(){return cT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},cT.apply(null,arguments)}var uI,uK=function(e){return I.createElement("svg",cT({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"dot-circle-regular_svg__svg-inline--fa dot-circle-regular_svg__fa-dot-circle dot-circle-regular_svg__fa-w-16","data-icon":"dot-circle","data-prefix":"far",viewBox:"0 0 512 512",width:"1em",height:"1em"},e),lI||(lI=I.createElement("path",{fill:"currentColor",d:"M256 56c110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200-110.532 0-200-89.451-200-200 0-110.532 89.451-200 200-200m0-48C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8m0 168c-44.183 0-80 35.817-80 80s35.817 80 80 80 80-35.817 80-80-35.817-80-80-80"})))};function dT(){return dT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},dT.apply(null,arguments)}var cI,cK=function(e){return I.createElement("svg",dT({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"minus-solid_svg__svg-inline--fa minus-solid_svg__fa-minus minus-solid_svg__fa-w-14","data-icon":"minus","data-prefix":"fas",viewBox:"0 0 448 512",width:"1em",height:"1em"},e),uI||(uI=I.createElement("path",{fill:"currentColor",d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32"})))};function hT(){return hT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},hT.apply(null,arguments)}var dK=function(e){return I.createElement("svg",hT({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"plus-solid_svg__svg-inline--fa plus-solid_svg__fa-plus plus-solid_svg__fa-w-14","data-icon":"plus","data-prefix":"fas",viewBox:"0 0 448 512",width:"1em",height:"1em"},e),cI||(cI=I.createElement("path",{fill:"currentColor",d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32"})))};const hK=({className:e,style:t,animationDuration:n=200,children:i,labels:r={}})=>{const{zoomIn:o,zoomOut:s,reset:a}=sK({duration:n,factor:1.5}),d={style:t,className:`react-sigma-control ${e||""}`};return qt.createElement(qt.Fragment,null,qt.createElement("div",Object.assign({},d),qt.createElement("button",{onClick:()=>o(),title:r.zoomIn||"Zoom In"},i?i[0]:qt.createElement(dK,{style:{width:"1em"}}))),qt.createElement("div",Object.assign({},d),qt.createElement("button",{onClick:()=>s(),title:r.zoomOut||"Zoom Out"},i?i[1]:qt.createElement(cK,{style:{width:"1em"}}))),qt.createElement("div",Object.assign({},d),qt.createElement("button",{onClick:()=>a(),title:r.reset||"See whole graph"},i?i[2]:qt.createElement(uK,{style:{width:"1em"}}))))};var dI;function fT(){return fT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},fT.apply(null,arguments)}var hI,fK=function(e){return I.createElement("svg",fT({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"compress-solid_svg__svg-inline--fa compress-solid_svg__fa-compress compress-solid_svg__fa-w-14","data-icon":"compress","data-prefix":"fas",viewBox:"0 0 448 512",width:"1em",height:"1em"},e),dI||(dI=I.createElement("path",{fill:"currentColor",d:"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12m-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24m0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12m192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12"})))};function pT(){return pT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},pT.apply(null,arguments)}var pK=function(e){return I.createElement("svg",pT({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"expand-solid_svg__svg-inline--fa expand-solid_svg__fa-expand expand-solid_svg__fa-w-14","data-icon":"expand","data-prefix":"fas",viewBox:"0 0 448 512",width:"1em",height:"1em"},e),hI||(hI=I.createElement("path",{fill:"currentColor",d:"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12M288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12m148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12M160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12"})))};const gK=({id:e,className:t,style:n,container:i,children:r,labels:o={}})=>{const{isFullScreen:s,toggle:a}=aK(i==null?void 0:i.current),d={className:`react-sigma-control ${t||""}`,id:e,style:n};return document.fullscreenEnabled?qt.createElement("div",Object.assign({},d),qt.createElement("button",{onClick:a,title:s?o.exit||"Exit fullscreen":o.enter||"Enter fullscreen"},r&&!s&&r[0],r&&s&&r[1],!r&&!s&&qt.createElement(pK,{style:{width:"1em"}}),!r&&s&&qt.createElement(fK,{style:{width:"1em"}}))):null};var kE,fI;function vP(){if(fI)return kE;fI=1;function e(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}return typeof Symbol<"u"&&(e.prototype[Symbol.iterator]=function(){return this}),e.of=function(){var t=arguments,n=t.length,i=0;return new e(function(){return i>=n?{done:!0}:{done:!1,value:t[i++]}})},e.empty=function(){var t=new e(function(){return{done:!0}});return t},e.fromSequence=function(t){var n=0,i=t.length;return new e(function(){return n>=i?{done:!0}:{done:!1,value:t[n++]}})},e.is=function(t){return t instanceof e?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"},kE=e,kE}var mK=vP();const bh=Ol(mK);var gC={},pI;function yK(){return pI||(pI=1,gC.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",gC.SYMBOL_SUPPORT=typeof Symbol<"u"),gC}var PE,gI;function Uz(){if(gI)return PE;gI=1;var e=vP(),t=yK(),n=t.ARRAY_BUFFER_SUPPORT,i=t.SYMBOL_SUPPORT;function r(o){return typeof o=="string"||Array.isArray(o)||n&&ArrayBuffer.isView(o)?e.fromSequence(o):typeof o!="object"||o===null?null:i&&typeof o[Symbol.iterator]=="function"?o[Symbol.iterator]():typeof o.next=="function"?o:null}return PE=function(s){var a=r(s);if(!a)throw new Error("obliterator: target is not iterable nor a valid iterator.");return a},PE}var DE,mI;function vK(){if(mI)return DE;mI=1;var e=Uz();return DE=function(n,i){for(var r=arguments.length>1?i:1/0,o=r!==1/0?new Array(r):[],s,a=0,d=e(n);;){if(a===r)return o;if(s=d.next(),s.done)return a!==i&&(o.length=a),o;o[a++]=s.value}},DE}var bK=vK();const qz=Ol(bK);var FE,yI;function xK(){if(yI)return FE;yI=1;var e=vP(),t=Uz();return FE=function(){var i=arguments,r=null,o=-1;return new e(function(){var a=null;do{if(r===null){if(o++,o>=i.length)return{done:!0};r=t(i[o])}if(a=r.next(),a.done===!0){r=null;continue}break}while(!0);return a})},FE}var wK=xK();const em=Ol(wK);function CK(){const e=arguments[0];for(let t=1,n=arguments.length;t<n;t++)if(arguments[t])for(const i in arguments[t])e[i]=arguments[t][i];return e}let sl=CK;typeof Object.assign=="function"&&(sl=Object.assign);function yh(e,t,n,i){const r=e._nodes.get(t);let o=null;return r&&(i==="mixed"?o=r.out&&r.out[n]||r.undirected&&r.undirected[n]:i==="directed"?o=r.out&&r.out[n]:o=r.undirected&&r.undirected[n]),o}function su(e){return typeof e=="object"&&e!==null}function Kz(e){let t;for(t in e)return!1;return!0}function oh(e,t,n){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!0,value:n})}function cf(e,t,n){const i={enumerable:!0,configurable:!0};typeof n=="function"?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(e,t,i)}function vI(e){return!(!su(e)||e.attributes&&!Array.isArray(e.attributes))}function _K(){let e=Math.floor(Math.random()*256)&255;return()=>e++}class bP extends Error{constructor(t){super(),this.name="GraphError",this.message=t}}class Kn extends bP{constructor(t){super(t),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Kn.prototype.constructor)}}class Pn extends bP{constructor(t){super(t),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Pn.prototype.constructor)}}class Mi extends bP{constructor(t){super(t),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Mi.prototype.constructor)}}function Zz(e,t){this.key=e,this.attributes=t,this.clear()}Zz.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function Yz(e,t){this.key=e,this.attributes=t,this.clear()}Yz.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function Xz(e,t){this.key=e,this.attributes=t,this.clear()}Xz.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function mx(e,t,n,i,r){this.key=t,this.attributes=r,this.undirected=e,this.source=n,this.target=i}mx.prototype.attach=function(){let e="out",t="in";this.undirected&&(e=t="undirected");const n=this.source.key,i=this.target.key;this.source[e][i]=this,!(this.undirected&&n===i)&&(this.target[t][n]=this)};mx.prototype.attachMulti=function(){let e="out",t="in";const n=this.source.key,i=this.target.key;this.undirected&&(e=t="undirected");const r=this.source[e],o=r[i];if(typeof o>"u"){r[i]=this,this.undirected&&n===i||(this.target[t][n]=this);return}o.previous=this,this.next=o,r[i]=this,this.target[t][n]=this};mx.prototype.detach=function(){const e=this.source.key,t=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][t],delete this.target[i][e]};mx.prototype.detachMulti=function(){const e=this.source.key,t=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][t],delete this.target[i][e]):(this.next.previous=void 0,this.source[n][t]=this.next,this.target[i][e]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const Jz=0,Qz=1,SK=2,eN=3;function ym(e,t,n,i,r,o,s){let a,d,h,m;if(i=""+i,n===Jz){if(a=e._nodes.get(i),!a)throw new Pn(`Graph.${t}: could not find the "${i}" node in the graph.`);h=r,m=o}else if(n===eN){if(r=""+r,d=e._edges.get(r),!d)throw new Pn(`Graph.${t}: could not find the "${r}" edge in the graph.`);const v=d.source.key,w=d.target.key;if(i===v)a=d.target;else if(i===w)a=d.source;else throw new Pn(`Graph.${t}: the "${i}" node is not attached to the "${r}" edge (${v}, ${w}).`);h=o,m=s}else{if(d=e._edges.get(i),!d)throw new Pn(`Graph.${t}: could not find the "${i}" edge in the graph.`);n===Qz?a=d.source:a=d.target,h=r,m=o}return[a,h,m]}function EK(e,t,n){e.prototype[t]=function(i,r,o){const[s,a]=ym(this,t,n,i,r,o);return s.attributes[a]}}function RK(e,t,n){e.prototype[t]=function(i,r){const[o]=ym(this,t,n,i,r);return o.attributes}}function AK(e,t,n){e.prototype[t]=function(i,r,o){const[s,a]=ym(this,t,n,i,r,o);return s.attributes.hasOwnProperty(a)}}function TK(e,t,n){e.prototype[t]=function(i,r,o,s){const[a,d,h]=ym(this,t,n,i,r,o,s);return a.attributes[d]=h,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:d}),this}}function kK(e,t,n){e.prototype[t]=function(i,r,o,s){const[a,d,h]=ym(this,t,n,i,r,o,s);if(typeof h!="function")throw new Kn(`Graph.${t}: updater should be a function.`);const m=a.attributes,v=h(m[d]);return m[d]=v,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:d}),this}}function PK(e,t,n){e.prototype[t]=function(i,r,o){const[s,a]=ym(this,t,n,i,r,o);return delete s.attributes[a],this.emit("nodeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:a}),this}}function DK(e,t,n){e.prototype[t]=function(i,r,o){const[s,a]=ym(this,t,n,i,r,o);if(!su(a))throw new Kn(`Graph.${t}: provided attributes are not a plain object.`);return s.attributes=a,this.emit("nodeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function FK(e,t,n){e.prototype[t]=function(i,r,o){const[s,a]=ym(this,t,n,i,r,o);if(!su(a))throw new Kn(`Graph.${t}: provided attributes are not a plain object.`);return sl(s.attributes,a),this.emit("nodeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:a}),this}}function MK(e,t,n){e.prototype[t]=function(i,r,o){const[s,a]=ym(this,t,n,i,r,o);if(typeof a!="function")throw new Kn(`Graph.${t}: provided updater is not a function.`);return s.attributes=a(s.attributes),this.emit("nodeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const IK=[{name:e=>`get${e}Attribute`,attacher:EK},{name:e=>`get${e}Attributes`,attacher:RK},{name:e=>`has${e}Attribute`,attacher:AK},{name:e=>`set${e}Attribute`,attacher:TK},{name:e=>`update${e}Attribute`,attacher:kK},{name:e=>`remove${e}Attribute`,attacher:PK},{name:e=>`replace${e}Attributes`,attacher:DK},{name:e=>`merge${e}Attributes`,attacher:FK},{name:e=>`update${e}Attributes`,attacher:MK}];function LK(e){IK.forEach(function({name:t,attacher:n}){n(e,t("Node"),Jz),n(e,t("Source"),Qz),n(e,t("Target"),SK),n(e,t("Opposite"),eN)})}function OK(e,t,n){e.prototype[t]=function(i,r){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Mi(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Mi(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,a=""+r;if(r=arguments[2],o=yh(this,s,a,n),!o)throw new Pn(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new Mi(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new Pn(`Graph.${t}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]}}function zK(e,t,n){e.prototype[t]=function(i){let r;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Mi(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new Mi(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,s=""+arguments[1];if(r=yh(this,o,s,n),!r)throw new Pn(`Graph.${t}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if(n!=="mixed")throw new Mi(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new Pn(`Graph.${t}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function NK(e,t,n){e.prototype[t]=function(i,r){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Mi(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Mi(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,a=""+r;if(r=arguments[2],o=yh(this,s,a,n),!o)throw new Pn(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new Mi(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new Pn(`Graph.${t}: could not find the "${i}" edge in the graph.`)}return o.attributes.hasOwnProperty(r)}}function BK(e,t,n){e.prototype[t]=function(i,r,o){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Mi(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Mi(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,d=""+r;if(r=arguments[2],o=arguments[3],s=yh(this,a,d,n),!s)throw new Pn(`Graph.${t}: could not find an edge for the given path ("${a}" - "${d}").`)}else{if(n!=="mixed")throw new Mi(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new Pn(`Graph.${t}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]=o,this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:r}),this}}function GK(e,t,n){e.prototype[t]=function(i,r,o){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Mi(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Mi(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,d=""+r;if(r=arguments[2],o=arguments[3],s=yh(this,a,d,n),!s)throw new Pn(`Graph.${t}: could not find an edge for the given path ("${a}" - "${d}").`)}else{if(n!=="mixed")throw new Mi(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new Pn(`Graph.${t}: could not find the "${i}" edge in the graph.`)}if(typeof o!="function")throw new Kn(`Graph.${t}: updater should be a function.`);return s.attributes[r]=o(s.attributes[r]),this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:r}),this}}function jK(e,t,n){e.prototype[t]=function(i,r){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Mi(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Mi(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,a=""+r;if(r=arguments[2],o=yh(this,s,a,n),!o)throw new Pn(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new Mi(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new Pn(`Graph.${t}: could not find the "${i}" edge in the graph.`)}return delete o.attributes[r],this.emit("edgeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:r}),this}}function HK(e,t,n){e.prototype[t]=function(i,r){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Mi(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Mi(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,a=""+r;if(r=arguments[2],o=yh(this,s,a,n),!o)throw new Pn(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new Mi(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new Pn(`Graph.${t}: could not find the "${i}" edge in the graph.`)}if(!su(r))throw new Kn(`Graph.${t}: provided attributes are not a plain object.`);return o.attributes=r,this.emit("edgeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function VK(e,t,n){e.prototype[t]=function(i,r){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Mi(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Mi(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,a=""+r;if(r=arguments[2],o=yh(this,s,a,n),!o)throw new Pn(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new Mi(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new Pn(`Graph.${t}: could not find the "${i}" edge in the graph.`)}if(!su(r))throw new Kn(`Graph.${t}: provided attributes are not a plain object.`);return sl(o.attributes,r),this.emit("edgeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:r}),this}}function $K(e,t,n){e.prototype[t]=function(i,r){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Mi(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Mi(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,a=""+r;if(r=arguments[2],o=yh(this,s,a,n),!o)throw new Pn(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new Mi(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new Pn(`Graph.${t}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new Kn(`Graph.${t}: provided updater is not a function.`);return o.attributes=r(o.attributes),this.emit("edgeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const WK=[{name:e=>`get${e}Attribute`,attacher:OK},{name:e=>`get${e}Attributes`,attacher:zK},{name:e=>`has${e}Attribute`,attacher:NK},{name:e=>`set${e}Attribute`,attacher:BK},{name:e=>`update${e}Attribute`,attacher:GK},{name:e=>`remove${e}Attribute`,attacher:jK},{name:e=>`replace${e}Attributes`,attacher:HK},{name:e=>`merge${e}Attributes`,attacher:VK},{name:e=>`update${e}Attributes`,attacher:$K}];function UK(e){WK.forEach(function({name:t,attacher:n}){n(e,t("Edge"),"mixed"),n(e,t("DirectedEdge"),"directed"),n(e,t("UndirectedEdge"),"undirected")})}const qK=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function KK(e,t,n,i){let r=!1;for(const o in t){if(o===i)continue;const s=t[o];if(r=n(s.key,s.attributes,s.source.key,s.target.key,s.source.attributes,s.target.attributes,s.undirected),e&&r)return s.key}}function ZK(e,t,n,i){let r,o,s,a=!1;for(const d in t)if(d!==i){r=t[d];do{if(o=r.source,s=r.target,a=n(r.key,r.attributes,o.key,s.key,o.attributes,s.attributes,r.undirected),e&&a)return r.key;r=r.next}while(r!==void 0)}}function ME(e,t){const n=Object.keys(e),i=n.length;let r,o=0;return new bh(function(){do if(r)r=r.next;else{if(o>=i)return{done:!0};const a=n[o++];if(a===t){r=void 0;continue}r=e[a]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function YK(e,t,n,i){const r=t[n];if(!r)return;const o=r.source,s=r.target;if(i(r.key,r.attributes,o.key,s.key,o.attributes,s.attributes,r.undirected)&&e)return r.key}function XK(e,t,n,i){let r=t[n];if(!r)return;let o=!1;do{if(o=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),e&&o)return r.key;r=r.next}while(r!==void 0)}function IE(e,t){let n=e[t];return n.next!==void 0?new bh(function(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}):bh.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function JK(e,t){if(e.size===0)return[];if(t==="mixed"||t===e.type)return typeof Array.from=="function"?Array.from(e._edges.keys()):qz(e._edges.keys(),e._edges.size);const n=t==="undirected"?e.undirectedSize:e.directedSize,i=new Array(n),r=t==="undirected",o=e._edges.values();let s=0,a,d;for(;a=o.next(),a.done!==!0;)d=a.value,d.undirected===r&&(i[s++]=d.key);return i}function tN(e,t,n,i){if(t.size===0)return;const r=n!=="mixed"&&n!==t.type,o=n==="undirected";let s,a,d=!1;const h=t._edges.values();for(;s=h.next(),s.done!==!0;){if(a=s.value,r&&a.undirected!==o)continue;const{key:m,attributes:v,source:w,target:R}=a;if(d=i(m,v,w.key,R.key,w.attributes,R.attributes,a.undirected),e&&d)return m}}function QK(e,t){if(e.size===0)return bh.empty();const n=t!=="mixed"&&t!==e.type,i=t==="undirected",r=e._edges.values();return new bh(function(){let s,a;for(;;){if(s=r.next(),s.done)return s;if(a=s.value,!(n&&a.undirected!==i))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function xP(e,t,n,i,r,o){const s=t?ZK:KK;let a;if(n!=="undirected"&&(i!=="out"&&(a=s(e,r.in,o),e&&a)||i!=="in"&&(a=s(e,r.out,o,i?void 0:r.key),e&&a))||n!=="directed"&&(a=s(e,r.undirected,o),e&&a))return a}function eZ(e,t,n,i){const r=[];return xP(!1,e,t,n,i,function(o){r.push(o)}),r}function tZ(e,t,n){let i=bh.empty();return e!=="undirected"&&(t!=="out"&&typeof n.in<"u"&&(i=em(i,ME(n.in))),t!=="in"&&typeof n.out<"u"&&(i=em(i,ME(n.out,t?void 0:n.key)))),e!=="directed"&&typeof n.undirected<"u"&&(i=em(i,ME(n.undirected))),i}function wP(e,t,n,i,r,o,s){const a=n?XK:YK;let d;if(t!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(d=a(e,r.in,o,s),e&&d)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==o)&&(d=a(e,r.out,o,s),e&&d))||t!=="directed"&&typeof r.undirected<"u"&&(d=a(e,r.undirected,o,s),e&&d))return d}function nZ(e,t,n,i,r){const o=[];return wP(!1,e,t,n,i,r,function(s){o.push(s)}),o}function iZ(e,t,n,i){let r=bh.empty();return e!=="undirected"&&(typeof n.in<"u"&&t!=="out"&&i in n.in&&(r=em(r,IE(n.in,i))),typeof n.out<"u"&&t!=="in"&&i in n.out&&(t||n.key!==i)&&(r=em(r,IE(n.out,i)))),e!=="directed"&&typeof n.undirected<"u"&&i in n.undirected&&(r=em(r,IE(n.undirected,i))),r}function rZ(e,t){const{name:n,type:i,direction:r}=t;e.prototype[n]=function(o,s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return JK(this,i);if(arguments.length===1){o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new Pn(`Graph.${n}: could not find the "${o}" node in the graph.`);return eZ(this.multi,i==="mixed"?this.type:i,r,a)}if(arguments.length===2){o=""+o,s=""+s;const a=this._nodes.get(o);if(!a)throw new Pn(`Graph.${n}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(s))throw new Pn(`Graph.${n}:  could not find the "${s}" target node in the graph.`);return nZ(i,this.multi,r,a,s)}throw new Kn(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function oZ(e,t){const{name:n,type:i,direction:r}=t,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[o]=function(h,m,v){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return v=h,tN(!1,this,i,v);if(arguments.length===2){h=""+h,v=m;const w=this._nodes.get(h);if(typeof w>"u")throw new Pn(`Graph.${o}: could not find the "${h}" node in the graph.`);return xP(!1,this.multi,i==="mixed"?this.type:i,r,w,v)}if(arguments.length===3){h=""+h,m=""+m;const w=this._nodes.get(h);if(!w)throw new Pn(`Graph.${o}:  could not find the "${h}" source node in the graph.`);if(!this._nodes.has(m))throw new Pn(`Graph.${o}:  could not find the "${m}" target node in the graph.`);return wP(!1,i,this.multi,r,w,m,v)}throw new Kn(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const s="map"+n[0].toUpperCase()+n.slice(1);e.prototype[s]=function(){const h=Array.prototype.slice.call(arguments),m=h.pop();let v;if(h.length===0){let w=0;i!=="directed"&&(w+=this.undirectedSize),i!=="undirected"&&(w+=this.directedSize),v=new Array(w);let R=0;h.push((L,O,z,$,U,Y,X)=>{v[R++]=m(L,O,z,$,U,Y,X)})}else v=[],h.push((w,R,L,O,z,$,U)=>{v.push(m(w,R,L,O,z,$,U))});return this[o].apply(this,h),v};const a="filter"+n[0].toUpperCase()+n.slice(1);e.prototype[a]=function(){const h=Array.prototype.slice.call(arguments),m=h.pop(),v=[];return h.push((w,R,L,O,z,$,U)=>{m(w,R,L,O,z,$,U)&&v.push(w)}),this[o].apply(this,h),v};const d="reduce"+n[0].toUpperCase()+n.slice(1);e.prototype[d]=function(){let h=Array.prototype.slice.call(arguments);if(h.length<2||h.length>4)throw new Kn(`Graph.${d}: invalid number of arguments (expecting 2, 3 or 4 and got ${h.length}).`);if(typeof h[h.length-1]=="function"&&typeof h[h.length-2]!="function")throw new Kn(`Graph.${d}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let m,v;h.length===2?(m=h[0],v=h[1],h=[]):h.length===3?(m=h[1],v=h[2],h=[h[0]]):h.length===4&&(m=h[2],v=h[3],h=[h[0],h[1]]);let w=v;return h.push((R,L,O,z,$,U,Y)=>{w=m(w,R,L,O,z,$,U,Y)}),this[o].apply(this,h),w}}function sZ(e,t){const{name:n,type:i,direction:r}=t,o="find"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[o]=function(d,h,m){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return m=d,tN(!0,this,i,m);if(arguments.length===2){d=""+d,m=h;const v=this._nodes.get(d);if(typeof v>"u")throw new Pn(`Graph.${o}: could not find the "${d}" node in the graph.`);return xP(!0,this.multi,i==="mixed"?this.type:i,r,v,m)}if(arguments.length===3){d=""+d,h=""+h;const v=this._nodes.get(d);if(!v)throw new Pn(`Graph.${o}:  could not find the "${d}" source node in the graph.`);if(!this._nodes.has(h))throw new Pn(`Graph.${o}:  could not find the "${h}" target node in the graph.`);return wP(!0,i,this.multi,r,v,h,m)}throw new Kn(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const s="some"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[s]=function(){const d=Array.prototype.slice.call(arguments),h=d.pop();return d.push((v,w,R,L,O,z,$)=>h(v,w,R,L,O,z,$)),!!this[o].apply(this,d)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[a]=function(){const d=Array.prototype.slice.call(arguments),h=d.pop();return d.push((v,w,R,L,O,z,$)=>!h(v,w,R,L,O,z,$)),!this[o].apply(this,d)}}function aZ(e,t){const{name:n,type:i,direction:r}=t,o=n.slice(0,-1)+"Entries";e.prototype[o]=function(s,a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return bh.empty();if(!arguments.length)return QK(this,i);if(arguments.length===1){s=""+s;const d=this._nodes.get(s);if(!d)throw new Pn(`Graph.${o}: could not find the "${s}" node in the graph.`);return tZ(i,r,d)}if(arguments.length===2){s=""+s,a=""+a;const d=this._nodes.get(s);if(!d)throw new Pn(`Graph.${o}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(a))throw new Pn(`Graph.${o}:  could not find the "${a}" target node in the graph.`);return iZ(i,r,d,a)}throw new Kn(`Graph.${o}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function lZ(e){qK.forEach(t=>{rZ(e,t),oZ(e,t),sZ(e,t),aZ(e,t)})}const uZ=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function e2(){this.A=null,this.B=null}e2.prototype.wrap=function(e){this.A===null?this.A=e:this.B===null&&(this.B=e)};e2.prototype.has=function(e){return this.A!==null&&e in this.A||this.B!==null&&e in this.B};function Xx(e,t,n,i,r){for(const o in i){const s=i[o],a=s.source,d=s.target,h=a===n?d:a;if(t&&t.has(h.key))continue;const m=r(h.key,h.attributes);if(e&&m)return h.key}}function CP(e,t,n,i,r){if(t!=="mixed"){if(t==="undirected")return Xx(e,null,i,i.undirected,r);if(typeof n=="string")return Xx(e,null,i,i[n],r)}const o=new e2;let s;if(t!=="undirected"){if(n!=="out"){if(s=Xx(e,null,i,i.in,r),e&&s)return s;o.wrap(i.in)}if(n!=="in"){if(s=Xx(e,o,i,i.out,r),e&&s)return s;o.wrap(i.out)}}if(t!=="directed"&&(s=Xx(e,o,i,i.undirected,r),e&&s))return s}function cZ(e,t,n){if(e!=="mixed"){if(e==="undirected")return Object.keys(n.undirected);if(typeof t=="string")return Object.keys(n[t])}const i=[];return CP(!1,e,t,n,function(r){i.push(r)}),i}function Jx(e,t,n){const i=Object.keys(n),r=i.length;let o=0;return new bh(function(){let a=null;do{if(o>=r)return e&&e.wrap(n),{done:!0};const d=n[i[o++]],h=d.source,m=d.target;if(a=h===t?m:h,e&&e.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function dZ(e,t,n){if(e!=="mixed"){if(e==="undirected")return Jx(null,n,n.undirected);if(typeof t=="string")return Jx(null,n,n[t])}let i=bh.empty();const r=new e2;return e!=="undirected"&&(t!=="out"&&(i=em(i,Jx(r,n,n.in))),t!=="in"&&(i=em(i,Jx(r,n,n.out)))),e!=="directed"&&(i=em(i,Jx(r,n,n.undirected))),i}function hZ(e,t){const{name:n,type:i,direction:r}=t;e.prototype[n]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];o=""+o;const s=this._nodes.get(o);if(typeof s>"u")throw new Pn(`Graph.${n}: could not find the "${o}" node in the graph.`);return cZ(i==="mixed"?this.type:i,r,s)}}function fZ(e,t){const{name:n,type:i,direction:r}=t,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[o]=function(h,m){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;h=""+h;const v=this._nodes.get(h);if(typeof v>"u")throw new Pn(`Graph.${o}: could not find the "${h}" node in the graph.`);CP(!1,i==="mixed"?this.type:i,r,v,m)};const s="map"+n[0].toUpperCase()+n.slice(1);e.prototype[s]=function(h,m){const v=[];return this[o](h,(w,R)=>{v.push(m(w,R))}),v};const a="filter"+n[0].toUpperCase()+n.slice(1);e.prototype[a]=function(h,m){const v=[];return this[o](h,(w,R)=>{m(w,R)&&v.push(w)}),v};const d="reduce"+n[0].toUpperCase()+n.slice(1);e.prototype[d]=function(h,m,v){if(arguments.length<3)throw new Kn(`Graph.${d}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let w=v;return this[o](h,(R,L)=>{w=m(w,R,L)}),w}}function pZ(e,t){const{name:n,type:i,direction:r}=t,o=n[0].toUpperCase()+n.slice(1,-1),s="find"+o;e.prototype[s]=function(h,m){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;h=""+h;const v=this._nodes.get(h);if(typeof v>"u")throw new Pn(`Graph.${s}: could not find the "${h}" node in the graph.`);return CP(!0,i==="mixed"?this.type:i,r,v,m)};const a="some"+o;e.prototype[a]=function(h,m){return!!this[s](h,m)};const d="every"+o;e.prototype[d]=function(h,m){return!this[s](h,(w,R)=>!m(w,R))}}function gZ(e,t){const{name:n,type:i,direction:r}=t,o=n.slice(0,-1)+"Entries";e.prototype[o]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return bh.empty();s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new Pn(`Graph.${o}: could not find the "${s}" node in the graph.`);return dZ(i==="mixed"?this.type:i,r,a)}}function mZ(e){uZ.forEach(t=>{hZ(e,t),fZ(e,t),pZ(e,t),gZ(e,t)})}function mC(e,t,n,i,r){const o=i._nodes.values(),s=i.type;let a,d,h,m,v,w;for(;a=o.next(),a.done!==!0;){let R=!1;if(d=a.value,s!=="undirected"){m=d.out;for(h in m){v=m[h];do w=v.target,R=!0,r(d.key,w.key,d.attributes,w.attributes,v.key,v.attributes,v.undirected),v=v.next;while(v)}}if(s!=="directed"){m=d.undirected;for(h in m)if(!(t&&d.key>h)){v=m[h];do w=v.target,w.key!==h&&(w=v.source),R=!0,r(d.key,w.key,d.attributes,w.attributes,v.key,v.attributes,v.undirected),v=v.next;while(v)}}n&&!R&&r(d.key,null,d.attributes,null,null,null,null)}}function yZ(e,t){const n={key:e};return Kz(t.attributes)||(n.attributes=sl({},t.attributes)),n}function vZ(e,t,n){const i={key:t,source:n.source.key,target:n.target.key};return Kz(n.attributes)||(i.attributes=sl({},n.attributes)),e==="mixed"&&n.undirected&&(i.undirected=!0),i}function bZ(e){if(!su(e))throw new Kn('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in e))throw new Kn("Graph.import: serialized node is missing its key.");if("attributes"in e&&(!su(e.attributes)||e.attributes===null))throw new Kn("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function xZ(e){if(!su(e))throw new Kn('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in e))throw new Kn("Graph.import: serialized edge is missing its source.");if(!("target"in e))throw new Kn("Graph.import: serialized edge is missing its target.");if("attributes"in e&&(!su(e.attributes)||e.attributes===null))throw new Kn("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in e&&typeof e.undirected!="boolean")throw new Kn("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const wZ=_K(),CZ=new Set(["directed","undirected","mixed"]),bI=new Set(["domain","_events","_eventsCount","_maxListeners"]),_Z=[{name:e=>`${e}Edge`,generateKey:!0},{name:e=>`${e}DirectedEdge`,generateKey:!0,type:"directed"},{name:e=>`${e}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:e=>`${e}EdgeWithKey`},{name:e=>`${e}DirectedEdgeWithKey`,type:"directed"},{name:e=>`${e}UndirectedEdgeWithKey`,type:"undirected"}],SZ={allowSelfLoops:!0,multi:!1,type:"mixed"};function EZ(e,t,n){if(n&&!su(n))throw new Kn(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(t=""+t,n=n||{},e._nodes.has(t))throw new Mi(`Graph.addNode: the "${t}" node already exist in the graph.`);const i=new e.NodeDataClass(t,n);return e._nodes.set(t,i),e.emit("nodeAdded",{key:t,attributes:n}),i}function xI(e,t,n){const i=new e.NodeDataClass(t,n);return e._nodes.set(t,i),e.emit("nodeAdded",{key:t,attributes:n}),i}function nN(e,t,n,i,r,o,s,a){if(!i&&e.type==="undirected")throw new Mi(`Graph.${t}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&e.type==="directed")throw new Mi(`Graph.${t}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!su(a))throw new Kn(`Graph.${t}: invalid attributes. Expecting an object but got "${a}"`);if(o=""+o,s=""+s,a=a||{},!e.allowSelfLoops&&o===s)throw new Mi(`Graph.${t}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const d=e._nodes.get(o),h=e._nodes.get(s);if(!d)throw new Pn(`Graph.${t}: source node "${o}" not found.`);if(!h)throw new Pn(`Graph.${t}: target node "${s}" not found.`);const m={key:null,undirected:i,source:o,target:s,attributes:a};if(n)r=e._edgeKeyGenerator();else if(r=""+r,e._edges.has(r))throw new Mi(`Graph.${t}: the "${r}" edge already exists in the graph.`);if(!e.multi&&(i?typeof d.undirected[s]<"u":typeof d.out[s]<"u"))throw new Mi(`Graph.${t}: an edge linking "${o}" to "${s}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const v=new mx(i,r,d,h,a);e._edges.set(r,v);const w=o===s;return i?(d.undirectedDegree++,h.undirectedDegree++,w&&(d.undirectedLoops++,e._undirectedSelfLoopCount++)):(d.outDegree++,h.inDegree++,w&&(d.directedLoops++,e._directedSelfLoopCount++)),e.multi?v.attachMulti():v.attach(),i?e._undirectedSize++:e._directedSize++,m.key=r,e.emit("edgeAdded",m),r}function RZ(e,t,n,i,r,o,s,a,d){if(!i&&e.type==="undirected")throw new Mi(`Graph.${t}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&e.type==="directed")throw new Mi(`Graph.${t}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(d){if(typeof a!="function")throw new Kn(`Graph.${t}: invalid updater function. Expecting a function but got "${a}"`)}else if(!su(a))throw new Kn(`Graph.${t}: invalid attributes. Expecting an object but got "${a}"`)}o=""+o,s=""+s;let h;if(d&&(h=a,a=void 0),!e.allowSelfLoops&&o===s)throw new Mi(`Graph.${t}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let m=e._nodes.get(o),v=e._nodes.get(s),w,R;if(!n&&(w=e._edges.get(r),w)){if((w.source.key!==o||w.target.key!==s)&&(!i||w.source.key!==s||w.target.key!==o))throw new Mi(`Graph.${t}: inconsistency detected when attempting to merge the "${r}" edge with "${o}" source & "${s}" target vs. ("${w.source.key}", "${w.target.key}").`);R=w}if(!R&&!e.multi&&m&&(R=i?m.undirected[s]:m.out[s]),R){const U=[R.key,!1,!1,!1];if(d?!h:!a)return U;if(d){const Y=R.attributes;R.attributes=h(Y),e.emit("edgeAttributesUpdated",{type:"replace",key:R.key,attributes:R.attributes})}else sl(R.attributes,a),e.emit("edgeAttributesUpdated",{type:"merge",key:R.key,attributes:R.attributes,data:a});return U}a=a||{},d&&h&&(a=h(a));const L={key:null,undirected:i,source:o,target:s,attributes:a};if(n)r=e._edgeKeyGenerator();else if(r=""+r,e._edges.has(r))throw new Mi(`Graph.${t}: the "${r}" edge already exists in the graph.`);let O=!1,z=!1;m||(m=xI(e,o,{}),O=!0,o===s&&(v=m,z=!0)),v||(v=xI(e,s,{}),z=!0),w=new mx(i,r,m,v,a),e._edges.set(r,w);const $=o===s;return i?(m.undirectedDegree++,v.undirectedDegree++,$&&(m.undirectedLoops++,e._undirectedSelfLoopCount++)):(m.outDegree++,v.inDegree++,$&&(m.directedLoops++,e._directedSelfLoopCount++)),e.multi?w.attachMulti():w.attach(),i?e._undirectedSize++:e._directedSize++,L.key=r,e.emit("edgeAdded",L),[r,!0,O,z]}function ub(e,t){e._edges.delete(t.key);const{source:n,target:i,attributes:r}=t,o=t.undirected,s=n===i;o?(n.undirectedDegree--,i.undirectedDegree--,s&&(n.undirectedLoops--,e._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,s&&(n.directedLoops--,e._directedSelfLoopCount--)),e.multi?t.detachMulti():t.detach(),o?e._undirectedSize--:e._directedSize--,e.emit("edgeDropped",{key:t.key,attributes:r,source:n.key,target:i.key,undirected:o})}class xo extends lP.EventEmitter{constructor(t){if(super(),t=sl({},SZ,t),typeof t.multi!="boolean")throw new Kn(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${t.multi}".`);if(!CZ.has(t.type))throw new Kn(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${t.type}".`);if(typeof t.allowSelfLoops!="boolean")throw new Kn(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${t.allowSelfLoops}".`);const n=t.type==="mixed"?Zz:t.type==="directed"?Yz:Xz;oh(this,"NodeDataClass",n);const i="geid_"+wZ()+"_";let r=0;const o=()=>{let s;do s=i+r++;while(this._edges.has(s));return s};oh(this,"_attributes",{}),oh(this,"_nodes",new Map),oh(this,"_edges",new Map),oh(this,"_directedSize",0),oh(this,"_undirectedSize",0),oh(this,"_directedSelfLoopCount",0),oh(this,"_undirectedSelfLoopCount",0),oh(this,"_edgeKeyGenerator",o),oh(this,"_options",t),bI.forEach(s=>oh(this,s,this[s])),cf(this,"order",()=>this._nodes.size),cf(this,"size",()=>this._edges.size),cf(this,"directedSize",()=>this._directedSize),cf(this,"undirectedSize",()=>this._undirectedSize),cf(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),cf(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),cf(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),cf(this,"multi",this._options.multi),cf(this,"type",this._options.type),cf(this,"allowSelfLoops",this._options.allowSelfLoops),cf(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(t){return this._nodes.has(""+t)}hasDirectedEdge(t,n){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+t,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){t=""+t,n=""+n;const i=this._nodes.get(t);return i?i.out.hasOwnProperty(n):!1}throw new Kn(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(t,n){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+t,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){t=""+t,n=""+n;const i=this._nodes.get(t);return i?i.undirected.hasOwnProperty(n):!1}throw new Kn(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(t,n){if(arguments.length===1){const i=""+t;return this._edges.has(i)}else if(arguments.length===2){t=""+t,n=""+n;const i=this._nodes.get(t);return i?typeof i.out<"u"&&i.out.hasOwnProperty(n)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(n):!1}throw new Kn(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(t,n){if(this.type==="undirected")return;if(t=""+t,n=""+n,this.multi)throw new Mi("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(t);if(!i)throw new Pn(`Graph.directedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(n))throw new Pn(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||void 0;if(r)return r.key}undirectedEdge(t,n){if(this.type==="directed")return;if(t=""+t,n=""+n,this.multi)throw new Mi("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(t);if(!i)throw new Pn(`Graph.undirectedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(n))throw new Pn(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const r=i.undirected&&i.undirected[n]||void 0;if(r)return r.key}edge(t,n){if(this.multi)throw new Mi("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");t=""+t,n=""+n;const i=this._nodes.get(t);if(!i)throw new Pn(`Graph.edge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(n))throw new Pn(`Graph.edge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||i.undirected&&i.undirected[n]||void 0;if(r)return r.key}areDirectedNeighbors(t,n){t=""+t,n=""+n;const i=this._nodes.get(t);if(!i)throw new Pn(`Graph.areDirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:n in i.in||n in i.out}areOutNeighbors(t,n){t=""+t,n=""+n;const i=this._nodes.get(t);if(!i)throw new Pn(`Graph.areOutNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:n in i.out}areInNeighbors(t,n){t=""+t,n=""+n;const i=this._nodes.get(t);if(!i)throw new Pn(`Graph.areInNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:n in i.in}areUndirectedNeighbors(t,n){t=""+t,n=""+n;const i=this._nodes.get(t);if(!i)throw new Pn(`Graph.areUndirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="directed"?!1:n in i.undirected}areNeighbors(t,n){t=""+t,n=""+n;const i=this._nodes.get(t);if(!i)throw new Pn(`Graph.areNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&(n in i.in||n in i.out)||this.type!=="directed"&&n in i.undirected}areInboundNeighbors(t,n){t=""+t,n=""+n;const i=this._nodes.get(t);if(!i)throw new Pn(`Graph.areInboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&n in i.in||this.type!=="directed"&&n in i.undirected}areOutboundNeighbors(t,n){t=""+t,n=""+n;const i=this._nodes.get(t);if(!i)throw new Pn(`Graph.areOutboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&n in i.out||this.type!=="directed"&&n in i.undirected}inDegree(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Pn(`Graph.inDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Pn(`Graph.outDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Pn(`Graph.directedDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Pn(`Graph.undirectedDegree: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Pn(`Graph.inboundDegree: could not find the "${t}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree),i}outboundDegree(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Pn(`Graph.outboundDegree: could not find the "${t}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.outDegree),i}degree(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Pn(`Graph.degree: could not find the "${t}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree),i}inDegreeWithoutSelfLoops(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Pn(`Graph.inDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Pn(`Graph.outDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Pn(`Graph.directedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Pn(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Pn(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree,r+=n.directedLoops),i-r}outboundDegreeWithoutSelfLoops(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Pn(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.outDegree,r+=n.directedLoops),i-r}degreeWithoutSelfLoops(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Pn(`Graph.degreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree,r+=n.directedLoops*2),i-r}source(t){t=""+t;const n=this._edges.get(t);if(!n)throw new Pn(`Graph.source: could not find the "${t}" edge in the graph.`);return n.source.key}target(t){t=""+t;const n=this._edges.get(t);if(!n)throw new Pn(`Graph.target: could not find the "${t}" edge in the graph.`);return n.target.key}extremities(t){t=""+t;const n=this._edges.get(t);if(!n)throw new Pn(`Graph.extremities: could not find the "${t}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(t,n){t=""+t,n=""+n;const i=this._edges.get(n);if(!i)throw new Pn(`Graph.opposite: could not find the "${n}" edge in the graph.`);const r=i.source.key,o=i.target.key;if(t===r)return o;if(t===o)return r;throw new Pn(`Graph.opposite: the "${t}" node is not attached to the "${n}" edge (${r}, ${o}).`)}hasExtremity(t,n){t=""+t,n=""+n;const i=this._edges.get(t);if(!i)throw new Pn(`Graph.hasExtremity: could not find the "${t}" edge in the graph.`);return i.source.key===n||i.target.key===n}isUndirected(t){t=""+t;const n=this._edges.get(t);if(!n)throw new Pn(`Graph.isUndirected: could not find the "${t}" edge in the graph.`);return n.undirected}isDirected(t){t=""+t;const n=this._edges.get(t);if(!n)throw new Pn(`Graph.isDirected: could not find the "${t}" edge in the graph.`);return!n.undirected}isSelfLoop(t){t=""+t;const n=this._edges.get(t);if(!n)throw new Pn(`Graph.isSelfLoop: could not find the "${t}" edge in the graph.`);return n.source===n.target}addNode(t,n){return EZ(this,t,n).key}mergeNode(t,n){if(n&&!su(n))throw new Kn(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);t=""+t,n=n||{};let i=this._nodes.get(t);return i?(n&&(sl(i.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:t,attributes:i.attributes,data:n})),[t,!1]):(i=new this.NodeDataClass(t,n),this._nodes.set(t,i),this.emit("nodeAdded",{key:t,attributes:n}),[t,!0])}updateNode(t,n){if(n&&typeof n!="function")throw new Kn(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);t=""+t;let i=this._nodes.get(t);if(i){if(n){const o=i.attributes;i.attributes=n(o),this.emit("nodeAttributesUpdated",{type:"replace",key:t,attributes:i.attributes})}return[t,!1]}const r=n?n({}):{};return i=new this.NodeDataClass(t,r),this._nodes.set(t,i),this.emit("nodeAdded",{key:t,attributes:r}),[t,!0]}dropNode(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new Pn(`Graph.dropNode: could not find the "${t}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in n.out){i=n.out[r];do ub(this,i),i=i.next;while(i)}for(const r in n.in){i=n.in[r];do ub(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in n.undirected){i=n.undirected[r];do ub(this,i),i=i.next;while(i)}this._nodes.delete(t),this.emit("nodeDropped",{key:t,attributes:n.attributes})}dropEdge(t){let n;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(n=yh(this,i,r,this.type),!n)throw new Pn(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(t=""+t,n=this._edges.get(t),!n)throw new Pn(`Graph.dropEdge: could not find the "${t}" edge in the graph.`);return ub(this,n),this}dropDirectedEdge(t,n){if(arguments.length<2)throw new Mi("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Mi("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");t=""+t,n=""+n;const i=yh(this,t,n,"directed");if(!i)throw new Pn(`Graph.dropDirectedEdge: could not find a "${t}" -> "${n}" edge in the graph.`);return ub(this,i),this}dropUndirectedEdge(t,n){if(arguments.length<2)throw new Mi("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Mi("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=yh(this,t,n,"undirected");if(!i)throw new Pn(`Graph.dropUndirectedEdge: could not find a "${t}" -> "${n}" edge in the graph.`);return ub(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const t=this._nodes.values();let n;for(;n=t.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(t){return this._attributes[t]}getAttributes(){return this._attributes}hasAttribute(t){return this._attributes.hasOwnProperty(t)}setAttribute(t,n){return this._attributes[t]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}updateAttribute(t,n){if(typeof n!="function")throw new Kn("Graph.updateAttribute: updater should be a function.");const i=this._attributes[t];return this._attributes[t]=n(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}removeAttribute(t){return delete this._attributes[t],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:t}),this}replaceAttributes(t){if(!su(t))throw new Kn("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=t,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(t){if(!su(t))throw new Kn("Graph.mergeAttributes: provided attributes are not a plain object.");return sl(this._attributes,t),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:t}),this}updateAttributes(t){if(typeof t!="function")throw new Kn("Graph.updateAttributes: provided updater is not a function.");return this._attributes=t(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(t,n){if(typeof t!="function")throw new Kn("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!vI(n))throw new Kn("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,o;for(;r=i.next(),r.done!==!0;)o=r.value,o.attributes=t(o.key,o.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(t,n){if(typeof t!="function")throw new Kn("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!vI(n))throw new Kn("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,o,s,a;for(;r=i.next(),r.done!==!0;)o=r.value,s=o.source,a=o.target,o.attributes=t(o.key,o.attributes,s.key,a.key,s.attributes,a.attributes,o.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(t){if(typeof t!="function")throw new Kn("Graph.forEachAdjacencyEntry: expecting a callback.");mC(!1,!1,!1,this,t)}forEachAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new Kn("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");mC(!1,!1,!0,this,t)}forEachAssymetricAdjacencyEntry(t){if(typeof t!="function")throw new Kn("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");mC(!1,!0,!1,this,t)}forEachAssymetricAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new Kn("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");mC(!1,!0,!0,this,t)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):qz(this._nodes.keys(),this._nodes.size)}forEachNode(t){if(typeof t!="function")throw new Kn("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)r=i.value,t(r.key,r.attributes)}findNode(t){if(typeof t!="function")throw new Kn("Graph.findNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,t(r.key,r.attributes))return r.key}mapNodes(t){if(typeof t!="function")throw new Kn("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let i,r;const o=new Array(this.order);let s=0;for(;i=n.next(),i.done!==!0;)r=i.value,o[s++]=t(r.key,r.attributes);return o}someNode(t){if(typeof t!="function")throw new Kn("Graph.someNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,t(r.key,r.attributes))return!0;return!1}everyNode(t){if(typeof t!="function")throw new Kn("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,!t(r.key,r.attributes))return!1;return!0}filterNodes(t){if(typeof t!="function")throw new Kn("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let i,r;const o=[];for(;i=n.next(),i.done!==!0;)r=i.value,t(r.key,r.attributes)&&o.push(r.key);return o}reduceNodes(t,n){if(typeof t!="function")throw new Kn("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new Kn("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=n;const r=this._nodes.values();let o,s;for(;o=r.next(),o.done!==!0;)s=o.value,i=t(i,s.key,s.attributes);return i}nodeEntries(){const t=this._nodes.values();return new bh(()=>{const n=t.next();if(n.done)return n;const i=n.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const t=new Array(this._nodes.size);let n=0;this._nodes.forEach((r,o)=>{t[n++]=yZ(o,r)});const i=new Array(this._edges.size);return n=0,this._edges.forEach((r,o)=>{i[n++]=vZ(this.type,o,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:t,edges:i}}import(t,n=!1){if(t instanceof xo)return t.forEachNode((d,h)=>{n?this.mergeNode(d,h):this.addNode(d,h)}),t.forEachEdge((d,h,m,v,w,R,L)=>{n?L?this.mergeUndirectedEdgeWithKey(d,m,v,h):this.mergeDirectedEdgeWithKey(d,m,v,h):L?this.addUndirectedEdgeWithKey(d,m,v,h):this.addDirectedEdgeWithKey(d,m,v,h)}),this;if(!su(t))throw new Kn("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(t.attributes){if(!su(t.attributes))throw new Kn("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(t.attributes):this.replaceAttributes(t.attributes)}let i,r,o,s,a;if(t.nodes){if(o=t.nodes,!Array.isArray(o))throw new Kn("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=o.length;i<r;i++){s=o[i],bZ(s);const{key:d,attributes:h}=s;n?this.mergeNode(d,h):this.addNode(d,h)}}if(t.edges){let d=!1;if(this.type==="undirected"&&(d=!0),o=t.edges,!Array.isArray(o))throw new Kn("Graph.import: invalid edges. Expecting an array.");for(i=0,r=o.length;i<r;i++){a=o[i],xZ(a);const{source:h,target:m,attributes:v,undirected:w=d}=a;let R;"key"in a?(R=n?w?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:w?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,R.call(this,a.key,h,m,v)):(R=n?w?this.mergeUndirectedEdge:this.mergeDirectedEdge:w?this.addUndirectedEdge:this.addDirectedEdge,R.call(this,h,m,v))}}return this}nullCopy(t){const n=new xo(sl({},this._options,t));return n.replaceAttributes(sl({},this.getAttributes())),n}emptyCopy(t){const n=this.nullCopy(t);return this._nodes.forEach((i,r)=>{const o=sl({},i.attributes);i=new n.NodeDataClass(r,o),n._nodes.set(r,i)}),n}copy(t){if(t=t||{},typeof t.type=="string"&&t.type!==this.type&&t.type!=="mixed")throw new Mi(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${t.type}" because this would mean losing information about the current graph.`);if(typeof t.multi=="boolean"&&t.multi!==this.multi&&t.multi!==!0)throw new Mi("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof t.allowSelfLoops=="boolean"&&t.allowSelfLoops!==this.allowSelfLoops&&t.allowSelfLoops!==!0)throw new Mi("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(t),i=this._edges.values();let r,o;for(;r=i.next(),r.done!==!0;)o=r.value,nN(n,"copy",!1,o.undirected,o.key,o.source.key,o.target.key,sl({},o.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const t={};this._nodes.forEach((o,s)=>{t[s]=o.attributes});const n={},i={};this._edges.forEach((o,s)=>{const a=o.undirected?"--":"->";let d="",h=o.source.key,m=o.target.key,v;o.undirected&&h>m&&(v=h,h=m,m=v);const w=`(${h})${a}(${m})`;s.startsWith("geid_")?this.multi&&(typeof i[w]>"u"?i[w]=0:i[w]++,d+=`${i[w]}. `):d+=`[${s}]: `,d+=w,n[d]=o.attributes});const r={};for(const o in this)this.hasOwnProperty(o)&&!bI.has(o)&&typeof this[o]!="function"&&typeof o!="symbol"&&(r[o]=this[o]);return r.attributes=this._attributes,r.nodes=t,r.edges=n,oh(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(xo.prototype[Symbol.for("nodejs.util.inspect.custom")]=xo.prototype.inspect);_Z.forEach(e=>{["add","merge","update"].forEach(t=>{const n=e.name(t),i=t==="add"?nN:RZ;e.generateKey?xo.prototype[n]=function(r,o,s){return i(this,n,!0,(e.type||this.type)==="undirected",null,r,o,s,t==="update")}:xo.prototype[n]=function(r,o,s,a){return i(this,n,!1,(e.type||this.type)==="undirected",r,o,s,a,t==="update")}})});LK(xo);UK(xo);lZ(xo);mZ(xo);class _P extends xo{constructor(t){const n=sl({type:"directed"},t);if("multi"in n&&n.multi!==!1)throw new Kn("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new Kn('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class iN extends xo{constructor(t){const n=sl({type:"undirected"},t);if("multi"in n&&n.multi!==!1)throw new Kn("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new Kn('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class rN extends xo{constructor(t){const n=sl({multi:!0},t);if("multi"in n&&n.multi!==!0)throw new Kn("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class oN extends xo{constructor(t){const n=sl({type:"directed",multi:!0},t);if("multi"in n&&n.multi!==!0)throw new Kn("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new Kn('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class sN extends xo{constructor(t){const n=sl({type:"undirected",multi:!0},t);if("multi"in n&&n.multi!==!0)throw new Kn("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new Kn('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function yx(e){e.from=function(t,n){const i=sl({},t.options,n),r=new e(i);return r.import(t),r}}yx(xo);yx(_P);yx(iN);yx(rN);yx(oN);yx(sN);xo.Graph=xo;xo.DirectedGraph=_P;xo.UndirectedGraph=iN;xo.MultiGraph=rN;xo.MultiDirectedGraph=oN;xo.MultiUndirectedGraph=sN;xo.InvalidArgumentsGraphError=Kn;xo.NotFoundGraphError=Pn;xo.UsageGraphError=Mi;var Qx={},wI;function AZ(){if(wI)return Qx;wI=1;function e(i){return typeof i!="number"||isNaN(i)?1:i}function t(i,r){var o={},s=function(h){return typeof h>"u"?r:h};typeof r=="function"&&(s=r);var a=function(h){return s(h[i])},d=function(){return s(void 0)};return typeof i=="string"?(o.fromAttributes=a,o.fromGraph=function(h,m){return a(h.getNodeAttributes(m))},o.fromEntry=function(h,m){return a(m)}):typeof i=="function"?(o.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},o.fromGraph=function(h,m){return s(i(m,h.getNodeAttributes(m)))},o.fromEntry=function(h,m){return s(i(h,m))}):(o.fromAttributes=d,o.fromGraph=d,o.fromEntry=d),o}function n(i,r){var o={},s=function(h){return typeof h>"u"?r:h};typeof r=="function"&&(s=r);var a=function(h){return s(h[i])},d=function(){return s(void 0)};return typeof i=="string"?(o.fromAttributes=a,o.fromGraph=function(h,m){return a(h.getEdgeAttributes(m))},o.fromEntry=function(h,m){return a(m)},o.fromPartialEntry=o.fromEntry,o.fromMinimalEntry=o.fromEntry):typeof i=="function"?(o.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},o.fromGraph=function(h,m){var v=h.extremities(m);return s(i(m,h.getEdgeAttributes(m),v[0],v[1],h.getNodeAttributes(v[0]),h.getNodeAttributes(v[1]),h.isUndirected(m)))},o.fromEntry=function(h,m,v,w,R,L,O){return s(i(h,m,v,w,R,L,O))},o.fromPartialEntry=function(h,m,v,w){return s(i(h,m,v,w))},o.fromMinimalEntry=function(h,m){return s(i(h,m))}):(o.fromAttributes=d,o.fromGraph=d,o.fromEntry=d,o.fromMinimalEntry=d),o}return Qx.createNodeValueGetter=t,Qx.createEdgeValueGetter=n,Qx.createEdgeWeightGetter=function(i){return n(i,e)},Qx}var LE,CI;function TZ(){if(CI)return LE;CI=1;var e=0,t=1,n=2,i=3,r=4,o=5,s=6,a=7,d=8,h=9,m=0,v=1,w=2,R=0,L=1,O=2,z=3,$=4,U=5,Y=6,X=7,q=8,ie=3,re=10,J=3,ne=9,be=10;return LE=function(ve,ce,Ie){var Te,fe,he,Re,De,Ye,_e,Le,Oe,yt,xt=ce.length,Vt=Ie.length,Xt=ve.adjustSizes,en=ve.barnesHutTheta*ve.barnesHutTheta,it,Lt,St,lt,Tn,Mt,$t,Pe=[];for(he=0;he<xt;he+=re)ce[he+r]=ce[he+n],ce[he+o]=ce[he+i],ce[he+n]=0,ce[he+i]=0;if(ve.outboundAttractionDistribution){for(it=0,he=0;he<xt;he+=re)it+=ce[he+s];it/=xt/re}if(ve.barnesHutOptimize){var yn=1/0,wn=-1/0,dn=1/0,An=-1/0,Cn,ai,Gi;for(he=0;he<xt;he+=re)yn=Math.min(yn,ce[he+e]),wn=Math.max(wn,ce[he+e]),dn=Math.min(dn,ce[he+t]),An=Math.max(An,ce[he+t]);var ri=wn-yn,ji=An-dn;for(ri>ji?(dn-=(ri-ji)/2,An=dn+ri):(yn-=(ji-ri)/2,wn=yn+ji),Pe[0+R]=-1,Pe[0+L]=(yn+wn)/2,Pe[0+O]=(dn+An)/2,Pe[0+z]=Math.max(wn-yn,An-dn),Pe[0+$]=-1,Pe[0+U]=-1,Pe[0+Y]=0,Pe[0+X]=0,Pe[0+q]=0,Te=1,he=0;he<xt;he+=re)for(fe=0,Gi=ie;;)if(Pe[fe+U]>=0){ce[he+e]<Pe[fe+L]?ce[he+t]<Pe[fe+O]?Cn=Pe[fe+U]:Cn=Pe[fe+U]+ne:ce[he+t]<Pe[fe+O]?Cn=Pe[fe+U]+ne*2:Cn=Pe[fe+U]+ne*3,Pe[fe+X]=(Pe[fe+X]*Pe[fe+Y]+ce[he+e]*ce[he+s])/(Pe[fe+Y]+ce[he+s]),Pe[fe+q]=(Pe[fe+q]*Pe[fe+Y]+ce[he+t]*ce[he+s])/(Pe[fe+Y]+ce[he+s]),Pe[fe+Y]+=ce[he+s],fe=Cn;continue}else if(Pe[fe+R]<0){Pe[fe+R]=he;break}else{if(Pe[fe+U]=Te*ne,Le=Pe[fe+z]/2,Oe=Pe[fe+U],Pe[Oe+R]=-1,Pe[Oe+L]=Pe[fe+L]-Le,Pe[Oe+O]=Pe[fe+O]-Le,Pe[Oe+z]=Le,Pe[Oe+$]=Oe+ne,Pe[Oe+U]=-1,Pe[Oe+Y]=0,Pe[Oe+X]=0,Pe[Oe+q]=0,Oe+=ne,Pe[Oe+R]=-1,Pe[Oe+L]=Pe[fe+L]-Le,Pe[Oe+O]=Pe[fe+O]+Le,Pe[Oe+z]=Le,Pe[Oe+$]=Oe+ne,Pe[Oe+U]=-1,Pe[Oe+Y]=0,Pe[Oe+X]=0,Pe[Oe+q]=0,Oe+=ne,Pe[Oe+R]=-1,Pe[Oe+L]=Pe[fe+L]+Le,Pe[Oe+O]=Pe[fe+O]-Le,Pe[Oe+z]=Le,Pe[Oe+$]=Oe+ne,Pe[Oe+U]=-1,Pe[Oe+Y]=0,Pe[Oe+X]=0,Pe[Oe+q]=0,Oe+=ne,Pe[Oe+R]=-1,Pe[Oe+L]=Pe[fe+L]+Le,Pe[Oe+O]=Pe[fe+O]+Le,Pe[Oe+z]=Le,Pe[Oe+$]=Pe[fe+$],Pe[Oe+U]=-1,Pe[Oe+Y]=0,Pe[Oe+X]=0,Pe[Oe+q]=0,Te+=4,ce[Pe[fe+R]+e]<Pe[fe+L]?ce[Pe[fe+R]+t]<Pe[fe+O]?Cn=Pe[fe+U]:Cn=Pe[fe+U]+ne:ce[Pe[fe+R]+t]<Pe[fe+O]?Cn=Pe[fe+U]+ne*2:Cn=Pe[fe+U]+ne*3,Pe[fe+Y]=ce[Pe[fe+R]+s],Pe[fe+X]=ce[Pe[fe+R]+e],Pe[fe+q]=ce[Pe[fe+R]+t],Pe[Cn+R]=Pe[fe+R],Pe[fe+R]=-1,ce[he+e]<Pe[fe+L]?ce[he+t]<Pe[fe+O]?ai=Pe[fe+U]:ai=Pe[fe+U]+ne:ce[he+t]<Pe[fe+O]?ai=Pe[fe+U]+ne*2:ai=Pe[fe+U]+ne*3,Cn===ai)if(Gi--){fe=Cn;continue}else{Gi=ie;break}Pe[ai+R]=he;break}}if(ve.barnesHutOptimize)for(Lt=ve.scalingRatio,he=0;he<xt;he+=re)for(fe=0;;)if(Pe[fe+U]>=0)if(Mt=Math.pow(ce[he+e]-Pe[fe+X],2)+Math.pow(ce[he+t]-Pe[fe+q],2),yt=Pe[fe+z],4*yt*yt/Mt<en){if(St=ce[he+e]-Pe[fe+X],lt=ce[he+t]-Pe[fe+q],Xt===!0?Mt>0?($t=Lt*ce[he+s]*Pe[fe+Y]/Mt,ce[he+n]+=St*$t,ce[he+i]+=lt*$t):Mt<0&&($t=-Lt*ce[he+s]*Pe[fe+Y]/Math.sqrt(Mt),ce[he+n]+=St*$t,ce[he+i]+=lt*$t):Mt>0&&($t=Lt*ce[he+s]*Pe[fe+Y]/Mt,ce[he+n]+=St*$t,ce[he+i]+=lt*$t),fe=Pe[fe+$],fe<0)break;continue}else{fe=Pe[fe+U];continue}else{if(Ye=Pe[fe+R],Ye>=0&&Ye!==he&&(St=ce[he+e]-ce[Ye+e],lt=ce[he+t]-ce[Ye+t],Mt=St*St+lt*lt,Xt===!0?Mt>0?($t=Lt*ce[he+s]*ce[Ye+s]/Mt,ce[he+n]+=St*$t,ce[he+i]+=lt*$t):Mt<0&&($t=-Lt*ce[he+s]*ce[Ye+s]/Math.sqrt(Mt),ce[he+n]+=St*$t,ce[he+i]+=lt*$t):Mt>0&&($t=Lt*ce[he+s]*ce[Ye+s]/Mt,ce[he+n]+=St*$t,ce[he+i]+=lt*$t)),fe=Pe[fe+$],fe<0)break;continue}else for(Lt=ve.scalingRatio,Re=0;Re<xt;Re+=re)for(De=0;De<Re;De+=re)St=ce[Re+e]-ce[De+e],lt=ce[Re+t]-ce[De+t],Xt===!0?(Mt=Math.sqrt(St*St+lt*lt)-ce[Re+d]-ce[De+d],Mt>0?($t=Lt*ce[Re+s]*ce[De+s]/Mt/Mt,ce[Re+n]+=St*$t,ce[Re+i]+=lt*$t,ce[De+n]-=St*$t,ce[De+i]-=lt*$t):Mt<0&&($t=100*Lt*ce[Re+s]*ce[De+s],ce[Re+n]+=St*$t,ce[Re+i]+=lt*$t,ce[De+n]-=St*$t,ce[De+i]-=lt*$t)):(Mt=Math.sqrt(St*St+lt*lt),Mt>0&&($t=Lt*ce[Re+s]*ce[De+s]/Mt/Mt,ce[Re+n]+=St*$t,ce[Re+i]+=lt*$t,ce[De+n]-=St*$t,ce[De+i]-=lt*$t));for(Oe=ve.gravity/ve.scalingRatio,Lt=ve.scalingRatio,he=0;he<xt;he+=re)$t=0,St=ce[he+e],lt=ce[he+t],Mt=Math.sqrt(Math.pow(St,2)+Math.pow(lt,2)),ve.strongGravityMode?Mt>0&&($t=Lt*ce[he+s]*Oe):Mt>0&&($t=Lt*ce[he+s]*Oe/Mt),ce[he+n]-=St*$t,ce[he+i]-=lt*$t;for(Lt=1*(ve.outboundAttractionDistribution?it:1),_e=0;_e<Vt;_e+=J)Re=Ie[_e+m],De=Ie[_e+v],Le=Ie[_e+w],Tn=Math.pow(Le,ve.edgeWeightInfluence),St=ce[Re+e]-ce[De+e],lt=ce[Re+t]-ce[De+t],Xt===!0?(Mt=Math.sqrt(St*St+lt*lt)-ce[Re+d]-ce[De+d],ve.linLogMode?ve.outboundAttractionDistribution?Mt>0&&($t=-Lt*Tn*Math.log(1+Mt)/Mt/ce[Re+s]):Mt>0&&($t=-Lt*Tn*Math.log(1+Mt)/Mt):ve.outboundAttractionDistribution?Mt>0&&($t=-Lt*Tn/ce[Re+s]):Mt>0&&($t=-Lt*Tn)):(Mt=Math.sqrt(Math.pow(St,2)+Math.pow(lt,2)),ve.linLogMode?ve.outboundAttractionDistribution?Mt>0&&($t=-Lt*Tn*Math.log(1+Mt)/Mt/ce[Re+s]):Mt>0&&($t=-Lt*Tn*Math.log(1+Mt)/Mt):ve.outboundAttractionDistribution?(Mt=1,$t=-Lt*Tn/ce[Re+s]):(Mt=1,$t=-Lt*Tn)),Mt>0&&(ce[Re+n]+=St*$t,ce[Re+i]+=lt*$t,ce[De+n]-=St*$t,ce[De+i]-=lt*$t);var Si,lr,Tt,Ji,Qi,Vr;if(Xt===!0)for(he=0;he<xt;he+=re)ce[he+h]!==1&&(Si=Math.sqrt(Math.pow(ce[he+n],2)+Math.pow(ce[he+i],2)),Si>be&&(ce[he+n]=ce[he+n]*be/Si,ce[he+i]=ce[he+i]*be/Si),lr=ce[he+s]*Math.sqrt((ce[he+r]-ce[he+n])*(ce[he+r]-ce[he+n])+(ce[he+o]-ce[he+i])*(ce[he+o]-ce[he+i])),Tt=Math.sqrt((ce[he+r]+ce[he+n])*(ce[he+r]+ce[he+n])+(ce[he+o]+ce[he+i])*(ce[he+o]+ce[he+i]))/2,Ji=.1*Math.log(1+Tt)/(1+Math.sqrt(lr)),Qi=ce[he+e]+ce[he+n]*(Ji/ve.slowDown),ce[he+e]=Qi,Vr=ce[he+t]+ce[he+i]*(Ji/ve.slowDown),ce[he+t]=Vr);else for(he=0;he<xt;he+=re)ce[he+h]!==1&&(lr=ce[he+s]*Math.sqrt((ce[he+r]-ce[he+n])*(ce[he+r]-ce[he+n])+(ce[he+o]-ce[he+i])*(ce[he+o]-ce[he+i])),Tt=Math.sqrt((ce[he+r]+ce[he+n])*(ce[he+r]+ce[he+n])+(ce[he+o]+ce[he+i])*(ce[he+o]+ce[he+i]))/2,Ji=ce[he+a]*Math.log(1+Tt)/(1+Math.sqrt(lr)),ce[he+a]=Math.min(1,Math.sqrt(Ji*(Math.pow(ce[he+n],2)+Math.pow(ce[he+i],2))/(1+Math.sqrt(lr)))),Qi=ce[he+e]+ce[he+n]*(Ji/ve.slowDown),ce[he+e]=Qi,Vr=ce[he+t]+ce[he+i]*(Ji/ve.slowDown),ce[he+t]=Vr);return{}},LE}var jg={},_I;function kZ(){if(_I)return jg;_I=1;var e=10,t=3;return jg.assign=function(n){n=n||{};var i=Array.prototype.slice.call(arguments).slice(1),r,o,s;for(r=0,s=i.length;r<s;r++)if(i[r])for(o in i[r])n[o]=i[r][o];return n},jg.validateSettings=function(n){return"linLogMode"in n&&typeof n.linLogMode!="boolean"?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in n&&typeof n.outboundAttractionDistribution!="boolean"?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in n&&typeof n.adjustSizes!="boolean"?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in n&&typeof n.edgeWeightInfluence!="number"?{message:"the `edgeWeightInfluence` setting should be a number."}:"scalingRatio"in n&&!(typeof n.scalingRatio=="number"&&n.scalingRatio>=0)?{message:"the `scalingRatio` setting should be a number >= 0."}:"strongGravityMode"in n&&typeof n.strongGravityMode!="boolean"?{message:"the `strongGravityMode` setting should be a boolean."}:"gravity"in n&&!(typeof n.gravity=="number"&&n.gravity>=0)?{message:"the `gravity` setting should be a number >= 0."}:"slowDown"in n&&!(typeof n.slowDown=="number"||n.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in n&&typeof n.barnesHutOptimize!="boolean"?{message:"the `barnesHutOptimize` setting should be a boolean."}:"barnesHutTheta"in n&&!(typeof n.barnesHutTheta=="number"&&n.barnesHutTheta>=0)?{message:"the `barnesHutTheta` setting should be a number >= 0."}:null},jg.graphToByteArrays=function(n,i){var r=n.order,o=n.size,s={},a,d=new Float32Array(r*e),h=new Float32Array(o*t);return a=0,n.forEachNode(function(m,v){s[m]=a,d[a]=v.x,d[a+1]=v.y,d[a+2]=0,d[a+3]=0,d[a+4]=0,d[a+5]=0,d[a+6]=1,d[a+7]=1,d[a+8]=v.size||1,d[a+9]=v.fixed?1:0,a+=e}),a=0,n.forEachEdge(function(m,v,w,R,L,O,z){var $=s[w],U=s[R],Y=i(m,v,w,R,L,O,z);d[$+6]+=Y,d[U+6]+=Y,h[a]=$,h[a+1]=U,h[a+2]=Y,a+=t}),{nodes:d,edges:h}},jg.assignLayoutChanges=function(n,i,r){var o=0;n.updateEachNodeAttributes(function(s,a){return a.x=i[o],a.y=i[o+1],o+=e,r?r(s,a):a})},jg.readGraphPositions=function(n,i){var r=0;n.forEachNode(function(o,s){i[r]=s.x,i[r+1]=s.y,r+=e})},jg.collectLayoutChanges=function(n,i,r){for(var o=n.nodes(),s={},a=0,d=0,h=i.length;a<h;a+=e){if(r){var m=Object.assign({},n.getNodeAttributes(o[d]));m.x=i[a],m.y=i[a+1],m=r(o[d],m),s[o[d]]={x:m.x,y:m.y}}else s[o[d]]={x:i[a],y:i[a+1]};d++}return s},jg.createWorker=function(i){var r=window.URL||window.webkitURL,o=i.toString(),s=r.createObjectURL(new Blob(["("+o+").call(this);"],{type:"text/javascript"})),a=new Worker(s);return r.revokeObjectURL(s),a},jg}var OE,SI;function PZ(){return SI||(SI=1,OE={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5}),OE}var zE,EI;function DZ(){if(EI)return zE;EI=1;var e=Gz(),t=AZ().createEdgeWeightGetter,n=TZ(),i=kZ(),r=PZ();function o(d,h,m){if(!e(h))throw new Error("graphology-layout-forceatlas2: the given graph is not a valid graphology instance.");typeof m=="number"&&(m={iterations:m});var v=m.iterations;if(typeof v!="number")throw new Error("graphology-layout-forceatlas2: invalid number of iterations.");if(v<=0)throw new Error("graphology-layout-forceatlas2: you should provide a positive number of iterations.");var w=t("getEdgeWeight"in m?m.getEdgeWeight:"weight").fromEntry,R=typeof m.outputReducer=="function"?m.outputReducer:null,L=i.assign({},r,m.settings),O=i.validateSettings(L);if(O)throw new Error("graphology-layout-forceatlas2: "+O.message);var z=i.graphToByteArrays(h,w),$;for($=0;$<v;$++)n(L,z.nodes,z.edges);if(d){i.assignLayoutChanges(h,z.nodes,R);return}return i.collectLayoutChanges(h,z.nodes)}function s(d){var h=typeof d=="number"?d:d.order;return{barnesHutOptimize:h>2e3,strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:1+Math.log(h)}}var a=o.bind(null,!1);return a.assign=o.bind(null,!0),a.inferSettings=s,zE=a,zE}var FZ=DZ();const RI=Ol(FZ);var vw={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var MZ=vw.exports,AI;function IZ(){return AI||(AI=1,(function(e,t){(function(){var n,i="4.17.21",r=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",a="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",h=500,m="__lodash_placeholder__",v=1,w=2,R=4,L=1,O=2,z=1,$=2,U=4,Y=8,X=16,q=32,ie=64,re=128,J=256,ne=512,be=30,ue="...",ve=800,ce=16,Ie=1,Te=2,fe=3,he=1/0,Re=9007199254740991,De=17976931348623157e292,Ye=NaN,_e=4294967295,Le=_e-1,Oe=_e>>>1,yt=[["ary",re],["bind",z],["bindKey",$],["curry",Y],["curryRight",X],["flip",ne],["partial",q],["partialRight",ie],["rearg",J]],xt="[object Arguments]",Vt="[object Array]",Xt="[object AsyncFunction]",en="[object Boolean]",it="[object Date]",Lt="[object DOMException]",St="[object Error]",lt="[object Function]",Tn="[object GeneratorFunction]",Mt="[object Map]",$t="[object Number]",Pe="[object Null]",yn="[object Object]",wn="[object Promise]",dn="[object Proxy]",An="[object RegExp]",Cn="[object Set]",ai="[object String]",Gi="[object Symbol]",ri="[object Undefined]",ji="[object WeakMap]",Si="[object WeakSet]",lr="[object ArrayBuffer]",Tt="[object DataView]",Ji="[object Float32Array]",Qi="[object Float64Array]",Vr="[object Int8Array]",wo="[object Int16Array]",ln="[object Int32Array]",Nn="[object Uint8Array]",qn="[object Uint8ClampedArray]",fr="[object Uint16Array]",us="[object Uint32Array]",pi=/\b__p \+= '';/g,oa=/\b(__p \+=) '' \+/g,sa=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ys=/&(?:amp|lt|gt|quot|#39);/g,zs=/[&<>"']/g,je=RegExp(Ys.source),pe=RegExp(zs.source),ge=/<%-([\s\S]+?)%>/g,ke=/<%([\s\S]+?)%>/g,Ne=/<%=([\s\S]+?)%>/g,Je=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nt=/^\w*$/,ct=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ue=/[\\^$.*+?()[\]{}|]/g,Pt=RegExp(Ue.source),Zt=/^\s+/,Ct=/\s/,pn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$n=/\{\n\/\* \[wrapped with (.+)\] \*/,Qn=/,? & /,Ii=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Wn=/[()=,{}\[\]\/\s]/,xi=/\\(\\)?/g,Fi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,co=/\w*$/,Rr=/^[-+]0x[0-9a-f]+$/i,Li=/^0b[01]+$/i,xr=/^\[object .+?Constructor\]$/,wr=/^0o[0-7]+$/i,No=/^(?:0|[1-9]\d*)$/,io=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Xr=/($^)/,dl=/['\n\r\u2028\u2029\\]/g,er="\\ud800-\\udfff",Bo="\\u0300-\\u036f",$c="\\ufe20-\\ufe2f",Xs="\\u20d0-\\u20ff",Mo=Bo+$c+Xs,Gl="\\u2700-\\u27bf",Js="a-z\\xdf-\\xf6\\xf8-\\xff",Ns="\\xac\\xb1\\xd7\\xf7",cu="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",du="\\u2000-\\u206f",ro=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",hl="A-Z\\xc0-\\xd6\\xd8-\\xde",Co="\\ufe0e\\ufe0f",pr=Ns+cu+du+ro,hu="[']",Ra="["+er+"]",Mu="["+pr+"]",Cs="["+Mo+"]",Wc="\\d+",Pd="["+Gl+"]",Uo="["+Js+"]",aa="[^"+er+pr+Wc+Gl+Js+hl+"]",ur="\\ud83c[\\udffb-\\udfff]",Uc="(?:"+Cs+"|"+ur+")",la="[^"+er+"]",jl="(?:\\ud83c[\\udde6-\\uddff]){2}",bt="[\\ud800-\\udbff][\\udc00-\\udfff]",We="["+hl+"]",at="\\u200d",ft="(?:"+Uo+"|"+aa+")",Wt="(?:"+We+"|"+aa+")",ei="(?:"+hu+"(?:d|ll|m|re|s|t|ve))?",Et="(?:"+hu+"(?:D|LL|M|RE|S|T|VE))?",Bt=Uc+"?",wt="["+Co+"]?",Gt="(?:"+at+"(?:"+[la,jl,bt].join("|")+")"+wt+Bt+")*",ui="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Gn="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ut=wt+Bt+Gt,Ri="(?:"+[Pd,jl,bt].join("|")+")"+Ut,Ze="(?:"+[la+Cs+"?",Cs,jl,bt,Ra].join("|")+")",_t=RegExp(hu,"g"),dt=RegExp(Cs,"g"),vt=RegExp(ur+"(?="+ur+")|"+Ze+Ut,"g"),Un=RegExp([We+"?"+Uo+"+"+ei+"(?="+[Mu,We,"$"].join("|")+")",Wt+"+"+Et+"(?="+[Mu,We+ft,"$"].join("|")+")",We+"?"+ft+"+"+ei,We+"+"+Et,Gn,ui,Wc,Ri].join("|"),"g"),Zn=RegExp("["+at+er+Mo+Co+"]"),Sn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ai=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],dr=-1,Jt={};Jt[Ji]=Jt[Qi]=Jt[Vr]=Jt[wo]=Jt[ln]=Jt[Nn]=Jt[qn]=Jt[fr]=Jt[us]=!0,Jt[xt]=Jt[Vt]=Jt[lr]=Jt[en]=Jt[Tt]=Jt[it]=Jt[St]=Jt[lt]=Jt[Mt]=Jt[$t]=Jt[yn]=Jt[An]=Jt[Cn]=Jt[ai]=Jt[ji]=!1;var Xn={};Xn[xt]=Xn[Vt]=Xn[lr]=Xn[Tt]=Xn[en]=Xn[it]=Xn[Ji]=Xn[Qi]=Xn[Vr]=Xn[wo]=Xn[ln]=Xn[Mt]=Xn[$t]=Xn[yn]=Xn[An]=Xn[Cn]=Xn[ai]=Xn[Gi]=Xn[Nn]=Xn[qn]=Xn[fr]=Xn[us]=!0,Xn[St]=Xn[lt]=Xn[ji]=!1;var Or={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Io={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ua={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Mr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ir=parseFloat,ca=parseInt,oo=typeof aC=="object"&&aC&&aC.Object===Object&&aC,_s=typeof self=="object"&&self&&self.Object===Object&&self,nr=oo||_s||Function("return this")(),$i=t&&!t.nodeType&&t,Qs=$i&&!0&&e&&!e.nodeType&&e,$a=Qs&&Qs.exports===$i,Hl=$a&&oo.process,fl=(function(){try{var ut=Qs&&Qs.require&&Qs.require("util").types;return ut||Hl&&Hl.binding&&Hl.binding("util")}catch{}})(),Wp=fl&&fl.isArrayBuffer,Am=fl&&fl.isDate,Dh=fl&&fl.isMap,Ef=fl&&fl.isRegExp,Up=fl&&fl.isSet,qp=fl&&fl.isTypedArray;function Aa(ut,Ht,Ft){switch(Ft.length){case 0:return ut.call(Ht);case 1:return ut.call(Ht,Ft[0]);case 2:return ut.call(Ht,Ft[0],Ft[1]);case 3:return ut.call(Ht,Ft[0],Ft[1],Ft[2])}return ut.apply(Ht,Ft)}function Tm(ut,Ht,Ft,Bn){for(var Ci=-1,Ui=ut==null?0:ut.length;++Ci<Ui;){var zr=ut[Ci];Ht(Bn,zr,Ft(zr),ut)}return Bn}function cs(ut,Ht){for(var Ft=-1,Bn=ut==null?0:ut.length;++Ft<Bn&&Ht(ut[Ft],Ft,ut)!==!1;);return ut}function km(ut,Ht){for(var Ft=ut==null?0:ut.length;Ft--&&Ht(ut[Ft],Ft,ut)!==!1;);return ut}function Pm(ut,Ht){for(var Ft=-1,Bn=ut==null?0:ut.length;++Ft<Bn;)if(!Ht(ut[Ft],Ft,ut))return!1;return!0}function Iu(ut,Ht){for(var Ft=-1,Bn=ut==null?0:ut.length,Ci=0,Ui=[];++Ft<Bn;){var zr=ut[Ft];Ht(zr,Ft,ut)&&(Ui[Ci++]=zr)}return Ui}function dc(ut,Ht){var Ft=ut==null?0:ut.length;return!!Ft&&fc(ut,Ht,0)>-1}function Fh(ut,Ht,Ft){for(var Bn=-1,Ci=ut==null?0:ut.length;++Bn<Ci;)if(Ft(Ht,ut[Bn]))return!0;return!1}function Jr(ut,Ht){for(var Ft=-1,Bn=ut==null?0:ut.length,Ci=Array(Bn);++Ft<Bn;)Ci[Ft]=Ht(ut[Ft],Ft,ut);return Ci}function hc(ut,Ht){for(var Ft=-1,Bn=Ht.length,Ci=ut.length;++Ft<Bn;)ut[Ci+Ft]=Ht[Ft];return ut}function Kp(ut,Ht,Ft,Bn){var Ci=-1,Ui=ut==null?0:ut.length;for(Bn&&Ui&&(Ft=ut[++Ci]);++Ci<Ui;)Ft=Ht(Ft,ut[Ci],Ci,ut);return Ft}function Zp(ut,Ht,Ft,Bn){var Ci=ut==null?0:ut.length;for(Bn&&Ci&&(Ft=ut[--Ci]);Ci--;)Ft=Ht(Ft,ut[Ci],Ci,ut);return Ft}function Rf(ut,Ht){for(var Ft=-1,Bn=ut==null?0:ut.length;++Ft<Bn;)if(Ht(ut[Ft],Ft,ut))return!0;return!1}var Dm=Lu("length");function Yp(ut){return ut.split("")}function Fm(ut){return ut.match(Ii)||[]}function Mh(ut,Ht,Ft){var Bn;return Ft(ut,function(Ci,Ui,zr){if(Ht(Ci,Ui,zr))return Bn=Ui,!1}),Bn}function pl(ut,Ht,Ft,Bn){for(var Ci=ut.length,Ui=Ft+(Bn?1:-1);Bn?Ui--:++Ui<Ci;)if(Ht(ut[Ui],Ui,ut))return Ui;return-1}function fc(ut,Ht,Ft){return Ht===Ht?Fd(ut,Ht,Ft):pl(ut,Af,Ft)}function Xp(ut,Ht,Ft,Bn){for(var Ci=Ft-1,Ui=ut.length;++Ci<Ui;)if(Bn(ut[Ci],Ht))return Ci;return-1}function Af(ut){return ut!==ut}function qc(ut,Ht){var Ft=ut==null?0:ut.length;return Ft?ho(ut,Ht)/Ft:Ye}function Lu(ut){return function(Ht){return Ht==null?n:Ht[ut]}}function Ou(ut){return function(Ht){return ut==null?n:ut[Ht]}}function Ih(ut,Ht,Ft,Bn,Ci){return Ci(ut,function(Ui,zr,Tr){Ft=Bn?(Bn=!1,Ui):Ht(Ft,Ui,zr,Tr)}),Ft}function Mm(ut,Ht){var Ft=ut.length;for(ut.sort(Ht);Ft--;)ut[Ft]=ut[Ft].value;return ut}function ho(ut,Ht){for(var Ft,Bn=-1,Ci=ut.length;++Bn<Ci;){var Ui=Ht(ut[Bn]);Ui!==n&&(Ft=Ft===n?Ui:Ft+Ui)}return Ft}function Tf(ut,Ht){for(var Ft=-1,Bn=Array(ut);++Ft<ut;)Bn[Ft]=Ht(Ft);return Bn}function Wi(ut,Ht){return Jr(Ht,function(Ft){return[Ft,ut[Ft]]})}function fu(ut){return ut&&ut.slice(0,rr(ut)+1).replace(Zt,"")}function ir(ut){return function(Ht){return ut(Ht)}}function Ar(ut,Ht){return Jr(Ht,function(Ft){return ut[Ft]})}function Vl(ut,Ht){return ut.has(Ht)}function Kc(ut,Ht){for(var Ft=-1,Bn=ut.length;++Ft<Bn&&fc(Ht,ut[Ft],0)>-1;);return Ft}function Zc(ut,Ht){for(var Ft=ut.length;Ft--&&fc(Ht,ut[Ft],0)>-1;);return Ft}function Yc(ut,Ht){for(var Ft=ut.length,Bn=0;Ft--;)ut[Ft]===Ht&&++Bn;return Bn}var $l=Ou(Or),Dd=Ou(Io);function da(ut){return"\\"+Mr[ut]}function kf(ut,Ht){return ut==null?n:ut[Ht]}function zu(ut){return Zn.test(ut)}function Lh(ut){return Sn.test(ut)}function Nu(ut){for(var Ht,Ft=[];!(Ht=ut.next()).done;)Ft.push(Ht.value);return Ft}function pc(ut){var Ht=-1,Ft=Array(ut.size);return ut.forEach(function(Bn,Ci){Ft[++Ht]=[Ci,Bn]}),Ft}function Xc(ut,Ht){return function(Ft){return ut(Ht(Ft))}}function Ta(ut,Ht){for(var Ft=-1,Bn=ut.length,Ci=0,Ui=[];++Ft<Bn;){var zr=ut[Ft];(zr===Ht||zr===m)&&(ut[Ft]=m,Ui[Ci++]=Ft)}return Ui}function gc(ut){var Ht=-1,Ft=Array(ut.size);return ut.forEach(function(Bn){Ft[++Ht]=Bn}),Ft}function Pf(ut){var Ht=-1,Ft=Array(ut.size);return ut.forEach(function(Bn){Ft[++Ht]=[Bn,Bn]}),Ft}function Fd(ut,Ht,Ft){for(var Bn=Ft-1,Ci=ut.length;++Bn<Ci;)if(ut[Bn]===Ht)return Bn;return-1}function Md(ut,Ht,Ft){for(var Bn=Ft+1;Bn--;)if(ut[Bn]===Ht)return Bn;return Bn}function Jc(ut){return zu(ut)?Im(ut):Dm(ut)}function fo(ut){return zu(ut)?Jp(ut):Yp(ut)}function rr(ut){for(var Ht=ut.length;Ht--&&Ct.test(ut.charAt(Ht)););return Ht}var Oh=Ou(ua);function Im(ut){for(var Ht=vt.lastIndex=0;vt.test(ut);)++Ht;return Ht}function Jp(ut){return ut.match(vt)||[]}function Qc(ut){return ut.match(Un)||[]}var Df=(function ut(Ht){Ht=Ht==null?nr:Bu.defaults(nr.Object(),Ht,Bu.pick(nr,Ai));var Ft=Ht.Array,Bn=Ht.Date,Ci=Ht.Error,Ui=Ht.Function,zr=Ht.Math,Tr=Ht.Object,Gu=Ht.RegExp,Wl=Ht.String,ea=Ht.TypeError,mc=Ft.prototype,Ff=Ui.prototype,Id=Tr.prototype,zh=Ht["__core-js_shared__"],ed=Ff.toString,Cr=Id.hasOwnProperty,Ld=0,yc=(function(){var C=/[^.]+$/.exec(zh&&zh.keys&&zh.keys.IE_PROTO||"");return C?"Symbol(src)_1."+C:""})(),Nr=Id.toString,pu=ed.call(Tr),Wa=nr._,td=Gu("^"+ed.call(Cr).replace(Ue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qr=$a?Ht.Buffer:n,qo=Ht.Symbol,ds=Ht.Uint8Array,vc=Qr?Qr.allocUnsafe:n,gl=Xc(Tr.getPrototypeOf,Tr),Od=Tr.create,gu=Id.propertyIsEnumerable,Bs=mc.splice,Mf=qo?qo.isConcatSpreadable:n,rs=qo?qo.iterator:n,Ul=qo?qo.toStringTag:n,ha=(function(){try{var C=hd(Tr,"defineProperty");return C({},"",{}),C}catch{}})(),If=Ht.clearTimeout!==nr.clearTimeout&&Ht.clearTimeout,zd=Bn&&Bn.now!==nr.Date.now&&Bn.now,Ua=Ht.setTimeout!==nr.setTimeout&&Ht.setTimeout,ju=zr.ceil,Hu=zr.floor,nd=Tr.getOwnPropertySymbols,Lf=Qr?Qr.isBuffer:n,fa=Ht.isFinite,bc=mc.join,Vu=Xc(Tr.keys,Tr),so=zr.max,Ko=zr.min,Lo=Bn.now,Zo=Ht.parseInt,ql=zr.random,os=mc.reverse,Ss=hd(Ht,"DataView"),qa=hd(Ht,"Map"),Of=hd(Ht,"Promise"),$u=hd(Ht,"Set"),xc=hd(Ht,"WeakMap"),wc=hd(Tr,"create"),po=xc&&new xc,tr={},nn=La(Ss),Kl=La(qa),ka=La(Of),zf=La($u),Ka=La(xc),mu=qo?qo.prototype:n,Cc=mu?mu.valueOf:n,Oi=mu?mu.toString:n;function Se(C){if(ts(C)&&!Ti(C)&&!(C instanceof Pi)){if(C instanceof Pa)return C;if(Cr.call(C,"__wrapped__"))return Zm(C)}return new Pa(C)}var _c=(function(){function C(){}return function(k){if(!To(k))return{};if(Od)return Od(k);C.prototype=k;var j=new C;return C.prototype=n,j}})();function yu(){}function Pa(C,k){this.__wrapped__=C,this.__actions__=[],this.__chain__=!!k,this.__index__=0,this.__values__=n}Se.templateSettings={escape:ge,evaluate:ke,interpolate:Ne,variable:"",imports:{_:Se}},Se.prototype=yu.prototype,Se.prototype.constructor=Se,Pa.prototype=_c(yu.prototype),Pa.prototype.constructor=Pa;function Pi(C){this.__wrapped__=C,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_e,this.__views__=[]}function vu(){var C=new Pi(this.__wrapped__);return C.__actions__=Ma(this.__actions__),C.__dir__=this.__dir__,C.__filtered__=this.__filtered__,C.__iteratees__=Ma(this.__iteratees__),C.__takeCount__=this.__takeCount__,C.__views__=Ma(this.__views__),C}function bu(){if(this.__filtered__){var C=new Pi(this);C.__dir__=-1,C.__filtered__=!0}else C=this.clone(),C.__dir__*=-1;return C}function xu(){var C=this.__wrapped__.value(),k=this.__dir__,j=Ti(C),Q=k<0,ye=j?C.length:0,Me=sv(0,ye,this.__views__),qe=Me.start,ot=Me.end,mt=ot-qe,on=Q?ot:qe-1,sn=this.__iteratees__,fn=sn.length,Hn=0,mi=Ko(mt,this.__takeCount__);if(!j||!Q&&ye==mt&&mi==mt)return Zy(C,this.__actions__);var zi=[];e:for(;mt--&&Hn<mi;){on+=k;for(var br=-1,Ni=C[on];++br<fn;){var Dr=sn[br],Hr=Dr.iteratee,bd=Dr.type,rc=Hr(Ni);if(bd==Te)Ni=rc;else if(!rc){if(bd==Ie)continue e;break e}}zi[Hn++]=Ni}return zi}Pi.prototype=_c(yu.prototype),Pi.prototype.constructor=Pi;function Wu(C){var k=-1,j=C==null?0:C.length;for(this.clear();++k<j;){var Q=C[k];this.set(Q[0],Q[1])}}function Nh(){this.__data__=wc?wc(null):{},this.size=0}function Nd(C){var k=this.has(C)&&delete this.__data__[C];return this.size-=k?1:0,k}function Nf(C){var k=this.__data__;if(wc){var j=k[C];return j===d?n:j}return Cr.call(k,C)?k[C]:n}function hs(C){var k=this.__data__;return wc?k[C]!==n:Cr.call(k,C)}function qi(C,k){var j=this.__data__;return this.size+=this.has(C)?0:1,j[C]=wc&&k===n?d:k,this}Wu.prototype.clear=Nh,Wu.prototype.delete=Nd,Wu.prototype.get=Nf,Wu.prototype.has=hs,Wu.prototype.set=qi;function Gs(C){var k=-1,j=C==null?0:C.length;for(this.clear();++k<j;){var Q=C[k];this.set(Q[0],Q[1])}}function Bh(){this.__data__=[],this.size=0}function Bf(C){var k=this.__data__,j=Fe(k,C);if(j<0)return!1;var Q=k.length-1;return j==Q?k.pop():Bs.call(k,j,1),--this.size,!0}function Lm(C){var k=this.__data__,j=Fe(k,C);return j<0?n:k[j][1]}function Gh(C){return Fe(this.__data__,C)>-1}function _o(C,k){var j=this.__data__,Q=Fe(j,C);return Q<0?(++this.size,j.push([C,k])):j[Q][1]=k,this}Gs.prototype.clear=Bh,Gs.prototype.delete=Bf,Gs.prototype.get=Lm,Gs.prototype.has=Gh,Gs.prototype.set=_o;function ss(C){var k=-1,j=C==null?0:C.length;for(this.clear();++k<j;){var Q=C[k];this.set(Q[0],Q[1])}}function Uu(){this.size=0,this.__data__={hash:new Wu,map:new(qa||Gs),string:new Wu}}function zn(C){var k=Ud(this,C).delete(C);return this.size-=k?1:0,k}function ii(C){return Ud(this,C).get(C)}function qu(C){return Ud(this,C).has(C)}function Ku(C,k){var j=Ud(this,C),Q=j.size;return j.set(C,k),this.size+=j.size==Q?0:1,this}ss.prototype.clear=Uu,ss.prototype.delete=zn,ss.prototype.get=ii,ss.prototype.has=qu,ss.prototype.set=Ku;function Zu(C){var k=-1,j=C==null?0:C.length;for(this.__data__=new ss;++k<j;)this.add(C[k])}function D(C){return this.__data__.set(C,d),this}function l(C){return this.__data__.has(C)}Zu.prototype.add=Zu.prototype.push=D,Zu.prototype.has=l;function y(C){var k=this.__data__=new Gs(C);this.size=k.size}function _(){this.__data__=new Gs,this.size=0}function S(C){var k=this.__data__,j=k.delete(C);return this.size=k.size,j}function P(C){return this.__data__.get(C)}function G(C){return this.__data__.has(C)}function W(C,k){var j=this.__data__;if(j instanceof Gs){var Q=j.__data__;if(!qa||Q.length<r-1)return Q.push([C,k]),this.size=++j.size,this;j=this.__data__=new ss(Q)}return j.set(C,k),this.size=j.size,this}y.prototype.clear=_,y.prototype.delete=S,y.prototype.get=P,y.prototype.has=G,y.prototype.set=W;function K(C,k){var j=Ti(C),Q=!j&&of(C),ye=!j&&!Q&&yd(C),Me=!j&&!Q&&!ye&&B(C),qe=j||Q||ye||Me,ot=qe?Tf(C.length,Wl):[],mt=ot.length;for(var on in C)(k||Cr.call(C,on))&&!(qe&&(on=="length"||ye&&(on=="offset"||on=="parent")||Me&&(on=="buffer"||on=="byteLength"||on=="byteOffset")||Ju(on,mt)))&&ot.push(on);return ot}function te(C){var k=C.length;return k?C[Hh(0,k-1)]:n}function ae(C,k){return Xf(Ma(C),tt(k,0,C.length))}function le(C){return Xf(Ma(C))}function xe(C,k,j){(j!==n&&!za(C[k],j)||j===n&&!(k in C))&&Ke(C,k,j)}function Ee(C,k,j){var Q=C[k];(!(Cr.call(C,k)&&za(Q,j))||j===n&&!(k in C))&&Ke(C,k,j)}function Fe(C,k){for(var j=C.length;j--;)if(za(C[j][0],k))return j;return-1}function Ge(C,k,j,Q){return En(C,function(ye,Me,qe){k(Q,ye,j(ye),qe)}),Q}function Ve(C,k){return C&&Ia(k,sr(k),C)}function $e(C,k){return C&&Ia(k,Pr(k),C)}function Ke(C,k,j){k=="__proto__"&&ha?ha(C,k,{configurable:!0,enumerable:!0,value:j,writable:!0}):C[k]=j}function ze(C,k){for(var j=-1,Q=k.length,ye=Ft(Q),Me=C==null;++j<Q;)ye[j]=Me?n:Ws(C,k[j]);return ye}function tt(C,k,j){return C===C&&(j!==n&&(C=C<=j?C:j),k!==n&&(C=C>=k?C:k)),C}function rt(C,k,j,Q,ye,Me){var qe,ot=k&v,mt=k&w,on=k&R;if(j&&(qe=ye?j(C,Q,ye,Me):j(C)),qe!==n)return qe;if(!To(C))return C;var sn=Ti(C);if(sn){if(qe=av(C),!ot)return Ma(C,qe)}else{var fn=Hs(C),Hn=fn==lt||fn==Tn;if(yd(C))return Jy(C,ot);if(fn==yn||fn==xt||Hn&&!ye){if(qe=mt||Hn?{}:lv(C),!ot)return mt?rg(C,$e(qe,C)):T0(C,Ve(qe,C))}else{if(!Xn[fn])return ye?C:{};qe=F0(C,fn,ot)}}Me||(Me=new y);var mi=Me.get(C);if(mi)return mi;Me.set(C,qe),E(C)?C.forEach(function(Ni){qe.add(rt(Ni,k,j,Ni,C,Me))}):dy(C)&&C.forEach(function(Ni,Dr){qe.set(Dr,rt(Ni,k,j,Dr,C,Me))});var zi=on?mt?ov:dd:mt?Pr:sr,br=sn?n:zi(C);return cs(br||C,function(Ni,Dr){br&&(Dr=Ni,Ni=C[Dr]),Ee(qe,Dr,rt(Ni,k,j,Dr,C,Me))}),qe}function gt(C){var k=sr(C);return function(j){return jt(j,C,k)}}function jt(C,k,j){var Q=j.length;if(C==null)return!Q;for(C=Tr(C);Q--;){var ye=j[Q],Me=k[ye],qe=C[ye];if(qe===n&&!(ye in C)||!Me(qe))return!1}return!0}function un(C,k,j){if(typeof C!="function")throw new ea(s);return Zf(function(){C.apply(n,j)},k)}function gn(C,k,j,Q){var ye=-1,Me=dc,qe=!0,ot=C.length,mt=[],on=k.length;if(!ot)return mt;j&&(k=Jr(k,ir(j))),Q?(Me=Fh,qe=!1):k.length>=r&&(Me=Vl,qe=!1,k=new Zu(k));e:for(;++ye<ot;){var sn=C[ye],fn=j==null?sn:j(sn);if(sn=Q||sn!==0?sn:0,qe&&fn===fn){for(var Hn=on;Hn--;)if(k[Hn]===fn)continue e;mt.push(sn)}else Me(k,fn,Q)||mt.push(sn)}return mt}var En=$m(gi),bn=$m(Ki,!0);function hn(C,k){var j=!0;return En(C,function(Q,ye,Me){return j=!!k(Q,ye,Me),j}),j}function kn(C,k,j){for(var Q=-1,ye=C.length;++Q<ye;){var Me=C[Q],qe=k(Me);if(qe!=null&&(ot===n?qe===qe&&!M(qe):j(qe,ot)))var ot=qe,mt=Me}return mt}function ci(C,k,j,Q){var ye=C.length;for(j=we(j),j<0&&(j=-j>ye?0:ye+j),Q=Q===n||Q>ye?ye:we(Q),Q<0&&(Q+=ye),Q=j>Q?0:Be(Q);j<Q;)C[j++]=k;return C}function xn(C,k){var j=[];return En(C,function(Q,ye,Me){k(Q,ye,Me)&&j.push(Q)}),j}function cn(C,k,j,Q,ye){var Me=-1,qe=C.length;for(j||(j=cv),ye||(ye=[]);++Me<qe;){var ot=C[Me];k>0&&j(ot)?k>1?cn(ot,k-1,j,Q,ye):hc(ye,ot):Q||(ye[ye.length]=ot)}return ye}var oi=Wm(),kr=Wm(!0);function gi(C,k){return C&&oi(C,k,sr)}function Ki(C,k){return C&&kr(C,k,sr)}function vr(C,k){return Iu(k,function(j){return tl(C[j])})}function go(C,k){k=Xa(k,C);for(var j=0,Q=k.length;C!=null&&j<Q;)C=C[vl(k[j++])];return j&&j==Q?C:n}function Za(C,k,j){var Q=k(C);return Ti(C)?Q:hc(Q,j(C))}function Zi(C){return C==null?C===n?ri:Pe:Ul&&Ul in Tr(C)?Uf(C):hv(C)}function Es(C,k){return C>k}function eo(C,k){return C!=null&&Cr.call(C,k)}function to(C,k){return C!=null&&k in Tr(C)}function Go(C,k,j){return C>=Ko(k,j)&&C<so(k,j)}function Da(C,k,j){for(var Q=j?Fh:dc,ye=C[0].length,Me=C.length,qe=Me,ot=Ft(Me),mt=1/0,on=[];qe--;){var sn=C[qe];qe&&k&&(sn=Jr(sn,ir(k))),mt=Ko(sn.length,mt),ot[qe]=!j&&(k||ye>=120&&sn.length>=120)?new Zu(qe&&sn):n}sn=C[0];var fn=-1,Hn=ot[0];e:for(;++fn<ye&&on.length<mt;){var mi=sn[fn],zi=k?k(mi):mi;if(mi=j||mi!==0?mi:0,!(Hn?Vl(Hn,zi):Q(on,zi,j))){for(qe=Me;--qe;){var br=ot[qe];if(!(br?Vl(br,zi):Q(C[qe],zi,j)))continue e}Hn&&Hn.push(zi),on.push(mi)}}return on}function id(C,k,j,Q){return gi(C,function(ye,Me,qe){k(Q,j(ye),Me,qe)}),Q}function pa(C,k,j){k=Xa(k,C),C=pd(C,k);var Q=C==null?C:C[vl(Ro(k))];return Q==null?n:Aa(Q,C,j)}function fs(C){return ts(C)&&Zi(C)==xt}function _r(C){return ts(C)&&Zi(C)==lr}function rd(C){return ts(C)&&Zi(C)==it}function ga(C,k,j,Q,ye){return C===k?!0:C==null||k==null||!ts(C)&&!ts(k)?C!==C&&k!==k:yi(C,k,j,Q,ga,ye)}function yi(C,k,j,Q,ye,Me){var qe=Ti(C),ot=Ti(k),mt=qe?Vt:Hs(C),on=ot?Vt:Hs(k);mt=mt==xt?yn:mt,on=on==xt?yn:on;var sn=mt==yn,fn=on==yn,Hn=mt==on;if(Hn&&yd(C)){if(!yd(k))return!1;qe=!0,sn=!1}if(Hn&&!sn)return Me||(Me=new y),qe||B(C)?ug(C,k,j,Q,ye,Me):D0(C,k,mt,j,Q,ye,Me);if(!(j&L)){var mi=sn&&Cr.call(C,"__wrapped__"),zi=fn&&Cr.call(k,"__wrapped__");if(mi||zi){var br=mi?C.value():C,Ni=zi?k.value():k;return Me||(Me=new y),ye(br,Ni,j,Q,Me)}}return Hn?(Me||(Me=new y),cg(C,k,j,Q,ye,Me)):!1}function or(C){return ts(C)&&Hs(C)==Mt}function Br(C,k,j,Q){var ye=j.length,Me=ye,qe=!Q;if(C==null)return!Me;for(C=Tr(C);ye--;){var ot=j[ye];if(qe&&ot[2]?ot[1]!==C[ot[0]]:!(ot[0]in C))return!1}for(;++ye<Me;){ot=j[ye];var mt=ot[0],on=C[mt],sn=ot[1];if(qe&&ot[2]){if(on===n&&!(mt in C))return!1}else{var fn=new y;if(Q)var Hn=Q(on,sn,mt,C,k,fn);if(!(Hn===n?ga(sn,on,L|O,Q,fn):Hn))return!1}}return!0}function ma(C){if(!To(C)||M0(C))return!1;var k=tl(C)?td:xr;return k.test(La(C))}function jo(C){return ts(C)&&Zi(C)==An}function Ho(C){return ts(C)&&Hs(C)==Cn}function ta(C){return ts(C)&&ih(C.length)&&!!Jt[Zi(C)]}function Hi(C){return typeof C=="function"?C:C==null?iu:typeof C=="object"?Ti(C)?jf(C[0],C[1]):Gf(C):Ae(C)}function Fa(C){if(!Kf(C))return Vu(C);var k=[];for(var j in Tr(C))Cr.call(C,j)&&j!="constructor"&&k.push(j);return k}function Bd(C){if(!To(C))return fd(C);var k=Kf(C),j=[];for(var Q in C)Q=="constructor"&&(k||!Cr.call(C,Q))||j.push(Q);return j}function Gr(C,k){return C<k}function jh(C,k){var j=-1,Q=gs(C)?Ft(C.length):[];return En(C,function(ye,Me,qe){Q[++j]=k(ye,Me,qe)}),Q}function Gf(C){var k=qd(C);return k.length==1&&k[0][2]?pg(k[0][0],k[0][1]):function(j){return j===C||Br(j,C,k)}}function jf(C,k){return hg(C)&&Qu(k)?pg(vl(C),k):function(j){var Q=Ws(j,C);return Q===n&&Q===k?as(j,C):ga(k,Q,L|O)}}function ml(C,k,j,Q,ye){C!==k&&oi(k,function(Me,qe){if(ye||(ye=new y),To(Me))Om(C,k,qe,j,ml,Q,ye);else{var ot=Q?Q(yo(C,qe),Me,qe+"",C,k,ye):n;ot===n&&(ot=Me),xe(C,qe,ot)}},Pr)}function Om(C,k,j,Q,ye,Me,qe){var ot=yo(C,j),mt=yo(k,j),on=qe.get(mt);if(on){xe(C,j,on);return}var sn=Me?Me(ot,mt,j+"",C,k,qe):n,fn=sn===n;if(fn){var Hn=Ti(mt),mi=!Hn&&yd(mt),zi=!Hn&&!mi&&B(mt);sn=mt,Hn||mi||zi?Ti(ot)?sn=ot:es(ot)?sn=Ma(ot):mi?(fn=!1,sn=Jy(mt,!0)):zi?(fn=!1,sn=Hm(mt,!0)):sn=[]:u(mt)||of(mt)?(sn=ot,of(ot)?sn=ht(ot):(!To(ot)||tl(ot))&&(sn=lv(mt))):fn=!1}fn&&(qe.set(mt,sn),ye(sn,mt,Q,Me,qe),qe.delete(mt)),xe(C,j,sn)}function od(C,k){var j=C.length;if(j)return k+=k<0?j:0,Ju(k,j)?C[k]:n}function Sc(C,k,j){k.length?k=Jr(k,function(Me){return Ti(Me)?function(qe){return go(qe,Me.length===1?Me[0]:Me)}:Me}):k=[iu];var Q=-1;k=Jr(k,ir(vi()));var ye=jh(C,function(Me,qe,ot){var mt=Jr(k,function(on){return on(Me)});return{criteria:mt,index:++Q,value:Me}});return Mm(ye,function(Me,qe){return ya(Me,qe,j)})}function Gd(C,k){return ps(C,k,function(j,Q){return as(C,Q)})}function ps(C,k,j){for(var Q=-1,ye=k.length,Me={};++Q<ye;){var qe=k[Q],ot=go(C,qe);j(ot,qe)&&yl(Me,Xa(qe,C),ot)}return Me}function ao(C){return function(k){return go(k,C)}}function wu(C,k,j,Q){var ye=Q?Xp:fc,Me=-1,qe=k.length,ot=C;for(C===k&&(k=Ma(k)),j&&(ot=Jr(C,ir(j)));++Me<qe;)for(var mt=0,on=k[Me],sn=j?j(on):on;(mt=ye(ot,sn,mt,Q))>-1;)ot!==C&&Bs.call(ot,mt,1),Bs.call(C,mt,1);return C}function sd(C,k){for(var j=C?k.length:0,Q=j-1;j--;){var ye=k[j];if(j==Q||ye!==Me){var Me=ye;Ju(ye)?Bs.call(C,ye,1):Hd(C,ye)}}return C}function Hh(C,k){return C+Hu(ql()*(k-C+1))}function zm(C,k,j,Q){for(var ye=-1,Me=so(ju((k-C)/(j||1)),0),qe=Ft(Me);Me--;)qe[Q?Me:++ye]=C,C+=j;return qe}function Yu(C,k){var j="";if(!C||k<1||k>Re)return j;do k%2&&(j+=C),k=Hu(k/2),k&&(C+=C);while(k);return j}function Yi(C,k){return Km(gg(C,k,iu),C+"")}function Vh(C){return te(El(C))}function jd(C,k){var j=El(C);return Xf(j,tt(k,0,j.length))}function yl(C,k,j,Q){if(!To(C))return C;k=Xa(k,C);for(var ye=-1,Me=k.length,qe=Me-1,ot=C;ot!=null&&++ye<Me;){var mt=vl(k[ye]),on=j;if(mt==="__proto__"||mt==="constructor"||mt==="prototype")return C;if(ye!=qe){var sn=ot[mt];on=Q?Q(sn,mt,ot):n,on===n&&(on=To(sn)?sn:Ju(k[ye+1])?[]:{})}Ee(ot,mt,on),ot=ot[mt]}return C}var Zl=po?function(C,k){return po.set(C,k),C}:iu,ad=ha?function(C,k){return ha(C,"toString",{configurable:!0,enumerable:!1,value:my(k),writable:!0})}:iu;function Ky(C){return Xf(El(C))}function js(C,k,j){var Q=-1,ye=C.length;k<0&&(k=-k>ye?0:ye+k),j=j>ye?ye:j,j<0&&(j+=ye),ye=k>j?0:j-k>>>0,k>>>=0;for(var Me=Ft(ye);++Q<ye;)Me[Q]=C[Q+k];return Me}function A0(C,k){var j;return En(C,function(Q,ye,Me){return j=k(Q,ye,Me),!j}),!!j}function $h(C,k,j){var Q=0,ye=C==null?Q:C.length;if(typeof k=="number"&&k===k&&ye<=Oe){for(;Q<ye;){var Me=Q+ye>>>1,qe=C[Me];qe!==null&&!M(qe)&&(j?qe<=k:qe<k)?Q=Me+1:ye=Me}return ye}return Oo(C,k,iu,j)}function Oo(C,k,j,Q){var ye=0,Me=C==null?0:C.length;if(Me===0)return 0;k=j(k);for(var qe=k!==k,ot=k===null,mt=M(k),on=k===n;ye<Me;){var sn=Hu((ye+Me)/2),fn=j(C[sn]),Hn=fn!==n,mi=fn===null,zi=fn===fn,br=M(fn);if(qe)var Ni=Q||zi;else on?Ni=zi&&(Q||Hn):ot?Ni=zi&&Hn&&(Q||!mi):mt?Ni=zi&&Hn&&!mi&&(Q||!br):mi||br?Ni=!1:Ni=Q?fn<=k:fn<k;Ni?ye=sn+1:Me=sn}return Ko(Me,Le)}function Nm(C,k){for(var j=-1,Q=C.length,ye=0,Me=[];++j<Q;){var qe=C[j],ot=k?k(qe):qe;if(!j||!za(ot,mt)){var mt=ot;Me[ye++]=qe===0?0:qe}}return Me}function Bm(C){return typeof C=="number"?C:M(C)?Ye:+C}function Rs(C){if(typeof C=="string")return C;if(Ti(C))return Jr(C,Rs)+"";if(M(C))return Oi?Oi.call(C):"";var k=C+"";return k=="0"&&1/C==-he?"-0":k}function Ya(C,k,j){var Q=-1,ye=dc,Me=C.length,qe=!0,ot=[],mt=ot;if(j)qe=!1,ye=Fh;else if(Me>=r){var on=k?null:Wf(C);if(on)return gc(on);qe=!1,ye=Vl,mt=new Zu}else mt=k?[]:ot;e:for(;++Q<Me;){var sn=C[Q],fn=k?k(sn):sn;if(sn=j||sn!==0?sn:0,qe&&fn===fn){for(var Hn=mt.length;Hn--;)if(mt[Hn]===fn)continue e;k&&mt.push(fn),ot.push(sn)}else ye(mt,fn,j)||(mt!==ot&&mt.push(fn),ot.push(sn))}return ot}function Hd(C,k){return k=Xa(k,C),C=pd(C,k),C==null||delete C[vl(Ro(k))]}function Qp(C,k,j,Q){return yl(C,k,j(go(C,k)),Q)}function Hf(C,k,j,Q){for(var ye=C.length,Me=Q?ye:-1;(Q?Me--:++Me<ye)&&k(C[Me],Me,C););return j?js(C,Q?0:Me,Q?Me+1:ye):js(C,Q?Me+1:0,Q?ye:Me)}function Zy(C,k){var j=C;return j instanceof Pi&&(j=j.value()),Kp(k,function(Q,ye){return ye.func.apply(ye.thisArg,hc([Q],ye.args))},j)}function eg(C,k,j){var Q=C.length;if(Q<2)return Q?Ya(C[0]):[];for(var ye=-1,Me=Ft(Q);++ye<Q;)for(var qe=C[ye],ot=-1;++ot<Q;)ot!=ye&&(Me[ye]=gn(Me[ye]||qe,C[ot],k,j));return Ya(cn(Me,1),k,j)}function Yy(C,k,j){for(var Q=-1,ye=C.length,Me=k.length,qe={};++Q<ye;){var ot=Q<Me?k[Q]:n;j(qe,C[Q],ot)}return qe}function tg(C){return es(C)?C:[]}function Gm(C){return typeof C=="function"?C:iu}function Xa(C,k){return Ti(C)?C:hg(C,k)?[C]:fv(et(C))}var Xy=Yi;function Cu(C,k,j){var Q=C.length;return j=j===n?Q:j,!k&&j>=Q?C:js(C,k,j)}var Ec=If||function(C){return nr.clearTimeout(C)};function Jy(C,k){if(k)return C.slice();var j=C.length,Q=vc?vc(j):new C.constructor(j);return C.copy(Q),Q}function ld(C){var k=new C.constructor(C.byteLength);return new ds(k).set(new ds(C)),k}function jm(C,k){var j=k?ld(C.buffer):C.buffer;return new C.constructor(j,C.byteOffset,C.byteLength)}function ng(C){var k=new C.constructor(C.source,co.exec(C));return k.lastIndex=C.lastIndex,k}function Qy(C){return Cc?Tr(Cc.call(C)):{}}function Hm(C,k){var j=k?ld(C.buffer):C.buffer;return new C.constructor(j,C.byteOffset,C.length)}function ev(C,k){if(C!==k){var j=C!==n,Q=C===null,ye=C===C,Me=M(C),qe=k!==n,ot=k===null,mt=k===k,on=M(k);if(!ot&&!on&&!Me&&C>k||Me&&qe&&mt&&!ot&&!on||Q&&qe&&mt||!j&&mt||!ye)return 1;if(!Q&&!Me&&!on&&C<k||on&&j&&ye&&!Q&&!Me||ot&&j&&ye||!qe&&ye||!mt)return-1}return 0}function ya(C,k,j){for(var Q=-1,ye=C.criteria,Me=k.criteria,qe=ye.length,ot=j.length;++Q<qe;){var mt=ev(ye[Q],Me[Q]);if(mt){if(Q>=ot)return mt;var on=j[Q];return mt*(on=="desc"?-1:1)}}return C.index-k.index}function ud(C,k,j,Q){for(var ye=-1,Me=C.length,qe=j.length,ot=-1,mt=k.length,on=so(Me-qe,0),sn=Ft(mt+on),fn=!Q;++ot<mt;)sn[ot]=k[ot];for(;++ye<qe;)(fn||ye<Me)&&(sn[j[ye]]=C[ye]);for(;on--;)sn[ot++]=C[ye++];return sn}function ig(C,k,j,Q){for(var ye=-1,Me=C.length,qe=-1,ot=j.length,mt=-1,on=k.length,sn=so(Me-ot,0),fn=Ft(sn+on),Hn=!Q;++ye<sn;)fn[ye]=C[ye];for(var mi=ye;++mt<on;)fn[mi+mt]=k[mt];for(;++qe<ot;)(Hn||ye<Me)&&(fn[mi+j[qe]]=C[ye++]);return fn}function Ma(C,k){var j=-1,Q=C.length;for(k||(k=Ft(Q));++j<Q;)k[j]=C[j];return k}function Ia(C,k,j,Q){var ye=!j;j||(j={});for(var Me=-1,qe=k.length;++Me<qe;){var ot=k[Me],mt=Q?Q(j[ot],C[ot],ot,j,C):n;mt===n&&(mt=C[ot]),ye?Ke(j,ot,mt):Ee(j,ot,mt)}return j}function T0(C,k){return Ia(C,Kd(C),k)}function rg(C,k){return Ia(C,qh(C),k)}function Vm(C,k){return function(j,Q){var ye=Ti(j)?Tm:Ge,Me=k?k():{};return ye(j,C,vi(Q,2),Me)}}function cd(C){return Yi(function(k,j){var Q=-1,ye=j.length,Me=ye>1?j[ye-1]:n,qe=ye>2?j[2]:n;for(Me=C.length>3&&typeof Me=="function"?(ye--,Me):n,qe&&Xo(j[0],j[1],qe)&&(Me=ye<3?n:Me,ye=1),k=Tr(k);++Q<ye;){var ot=j[Q];ot&&C(k,ot,Q,Me)}return k})}function $m(C,k){return function(j,Q){if(j==null)return j;if(!gs(j))return C(j,Q);for(var ye=j.length,Me=k?ye:-1,qe=Tr(j);(k?Me--:++Me<ye)&&Q(qe[Me],Me,qe)!==!1;);return j}}function Wm(C){return function(k,j,Q){for(var ye=-1,Me=Tr(k),qe=Q(k),ot=qe.length;ot--;){var mt=qe[C?ot:++ye];if(j(Me[mt],mt,Me)===!1)break}return k}}function tv(C,k,j){var Q=k&z,ye=Wh(C);function Me(){var qe=this&&this!==nr&&this instanceof Me?ye:C;return qe.apply(Q?j:this,arguments)}return Me}function og(C){return function(k){k=et(k);var j=zu(k)?fo(k):n,Q=j?j[0]:k.charAt(0),ye=j?Cu(j,1).join(""):k.slice(1);return Q[C]()+ye}}function Vd(C){return function(k){return Kp(iC(af(k).replace(_t,"")),C,"")}}function Wh(C){return function(){var k=arguments;switch(k.length){case 0:return new C;case 1:return new C(k[0]);case 2:return new C(k[0],k[1]);case 3:return new C(k[0],k[1],k[2]);case 4:return new C(k[0],k[1],k[2],k[3]);case 5:return new C(k[0],k[1],k[2],k[3],k[4]);case 6:return new C(k[0],k[1],k[2],k[3],k[4],k[5]);case 7:return new C(k[0],k[1],k[2],k[3],k[4],k[5],k[6])}var j=_c(C.prototype),Q=C.apply(j,k);return To(Q)?Q:j}}function sg(C,k,j){var Q=Wh(C);function ye(){for(var Me=arguments.length,qe=Ft(Me),ot=Me,mt=Yo(ye);ot--;)qe[ot]=arguments[ot];var on=Me<3&&qe[0]!==mt&&qe[Me-1]!==mt?[]:Ta(qe,mt);if(Me-=on.length,Me<j)return lg(C,k,$d,ye.placeholder,n,qe,on,n,n,j-Me);var sn=this&&this!==nr&&this instanceof ye?Q:C;return Aa(sn,this,qe)}return ye}function Ja(C){return function(k,j,Q){var ye=Tr(k);if(!gs(k)){var Me=vi(j,3);k=sr(k),j=function(ot){return Me(ye[ot],ot,ye)}}var qe=C(k,j,Q);return qe>-1?ye[Me?k[qe]:qe]:n}}function Uh(C){return Rc(function(k){var j=k.length,Q=j,ye=Pa.prototype.thru;for(C&&k.reverse();Q--;){var Me=k[Q];if(typeof Me!="function")throw new ea(s);if(ye&&!qe&&So(Me)=="wrapper")var qe=new Pa([],!0)}for(Q=qe?Q:j;++Q<j;){Me=k[Q];var ot=So(Me),mt=ot=="wrapper"?mo(Me):n;mt&&Ac(mt[0])&&mt[1]==(re|Y|q|J)&&!mt[4].length&&mt[9]==1?qe=qe[So(mt[0])].apply(qe,mt[3]):qe=Me.length==1&&Ac(Me)?qe[ot]():qe.thru(Me)}return function(){var on=arguments,sn=on[0];if(qe&&on.length==1&&Ti(sn))return qe.plant(sn).value();for(var fn=0,Hn=j?k[fn].apply(this,on):sn;++fn<j;)Hn=k[fn].call(this,Hn);return Hn}})}function $d(C,k,j,Q,ye,Me,qe,ot,mt,on){var sn=k&re,fn=k&z,Hn=k&$,mi=k&(Y|X),zi=k&ne,br=Hn?n:Wh(C);function Ni(){for(var Dr=arguments.length,Hr=Ft(Dr),bd=Dr;bd--;)Hr[bd]=arguments[bd];if(mi)var rc=Yo(Ni),xd=Yc(Hr,rc);if(Q&&(Hr=ud(Hr,Q,ye,mi)),Me&&(Hr=ig(Hr,Me,qe,mi)),Dr-=xd,mi&&Dr<on){var Ca=Ta(Hr,rc);return lg(C,k,$d,Ni.placeholder,j,Hr,Ca,ot,mt,on-Dr)}var lf=fn?j:this,Gg=Hn?lf[C]:C;return Dr=Hr.length,ot?Hr=Kh(Hr,ot):zi&&Dr>1&&Hr.reverse(),sn&&mt<Dr&&(Hr.length=mt),this&&this!==nr&&this instanceof Ni&&(Gg=br||Wh(Gg)),Gg.apply(lf,Hr)}return Ni}function ag(C,k){return function(j,Q){return id(j,C,k(Q),{})}}function Vf(C,k){return function(j,Q){var ye;if(j===n&&Q===n)return k;if(j!==n&&(ye=j),Q!==n){if(ye===n)return Q;typeof j=="string"||typeof Q=="string"?(j=Rs(j),Q=Rs(Q)):(j=Bm(j),Q=Bm(Q)),ye=C(j,Q)}return ye}}function Um(C){return Rc(function(k){return k=Jr(k,ir(vi())),Yi(function(j){var Q=this;return C(k,function(ye){return Aa(ye,Q,j)})})})}function Wd(C,k){k=k===n?" ":Rs(k);var j=k.length;if(j<2)return j?Yu(k,C):k;var Q=Yu(k,ju(C/Jc(k)));return zu(k)?Cu(fo(Q),0,C).join(""):Q.slice(0,C)}function k0(C,k,j,Q){var ye=k&z,Me=Wh(C);function qe(){for(var ot=-1,mt=arguments.length,on=-1,sn=Q.length,fn=Ft(sn+mt),Hn=this&&this!==nr&&this instanceof qe?Me:C;++on<sn;)fn[on]=Q[on];for(;mt--;)fn[on++]=arguments[++ot];return Aa(Hn,ye?j:this,fn)}return qe}function qm(C){return function(k,j,Q){return Q&&typeof Q!="number"&&Xo(k,j,Q)&&(j=Q=n),k=Ce(k),j===n?(j=k,k=0):j=Ce(j),Q=Q===n?k<j?1:-1:Ce(Q),zm(k,j,Q,C)}}function $f(C){return function(k,j){return typeof k=="string"&&typeof j=="string"||(k=He(k),j=He(j)),C(k,j)}}function lg(C,k,j,Q,ye,Me,qe,ot,mt,on){var sn=k&Y,fn=sn?qe:n,Hn=sn?n:qe,mi=sn?Me:n,zi=sn?n:Me;k|=sn?q:ie,k&=~(sn?ie:q),k&U||(k&=-4);var br=[C,k,ye,mi,fn,zi,Hn,ot,mt,on],Ni=j.apply(n,br);return Ac(C)&&L0(Ni,br),Ni.placeholder=Q,Yf(Ni,C,k)}function Xu(C){var k=zr[C];return function(j,Q){if(j=He(j),Q=Q==null?0:Ko(we(Q),292),Q&&fa(j)){var ye=(et(j)+"e").split("e"),Me=k(ye[0]+"e"+(+ye[1]+Q));return ye=(et(Me)+"e").split("e"),+(ye[0]+"e"+(+ye[1]-Q))}return k(j)}}var Wf=$u&&1/gc(new $u([,-0]))[1]==he?function(C){return new $u(C)}:b;function nv(C){return function(k){var j=Hs(k);return j==Mt?pc(k):j==Cn?Pf(k):Wi(k,C(k))}}function Qa(C,k,j,Q,ye,Me,qe,ot){var mt=k&$;if(!mt&&typeof C!="function")throw new ea(s);var on=Q?Q.length:0;if(on||(k&=-97,Q=ye=n),qe=qe===n?qe:so(we(qe),0),ot=ot===n?ot:we(ot),on-=ye?ye.length:0,k&ie){var sn=Q,fn=ye;Q=ye=n}var Hn=mt?n:mo(C),mi=[C,k,j,Q,ye,sn,fn,Me,qe,ot];if(Hn&&I0(mi,Hn),C=mi[0],k=mi[1],j=mi[2],Q=mi[3],ye=mi[4],ot=mi[9]=mi[9]===n?mt?0:C.length:so(mi[9]-on,0),!ot&&k&(Y|X)&&(k&=-25),!k||k==z)var zi=tv(C,k,j);else k==Y||k==X?zi=sg(C,k,ot):(k==q||k==(z|q))&&!ye.length?zi=k0(C,k,j,Q):zi=$d.apply(n,mi);var br=Hn?Zl:L0;return Yf(br(zi,mi),C,k)}function iv(C,k,j,Q){return C===n||za(C,Id[j])&&!Cr.call(Q,j)?k:C}function rv(C,k,j,Q,ye,Me){return To(C)&&To(k)&&(Me.set(k,C),ml(C,k,n,rv,Me),Me.delete(k)),C}function P0(C){return u(C)?n:C}function ug(C,k,j,Q,ye,Me){var qe=j&L,ot=C.length,mt=k.length;if(ot!=mt&&!(qe&&mt>ot))return!1;var on=Me.get(C),sn=Me.get(k);if(on&&sn)return on==k&&sn==C;var fn=-1,Hn=!0,mi=j&O?new Zu:n;for(Me.set(C,k),Me.set(k,C);++fn<ot;){var zi=C[fn],br=k[fn];if(Q)var Ni=qe?Q(br,zi,fn,k,C,Me):Q(zi,br,fn,C,k,Me);if(Ni!==n){if(Ni)continue;Hn=!1;break}if(mi){if(!Rf(k,function(Dr,Hr){if(!Vl(mi,Hr)&&(zi===Dr||ye(zi,Dr,j,Q,Me)))return mi.push(Hr)})){Hn=!1;break}}else if(!(zi===br||ye(zi,br,j,Q,Me))){Hn=!1;break}}return Me.delete(C),Me.delete(k),Hn}function D0(C,k,j,Q,ye,Me,qe){switch(j){case Tt:if(C.byteLength!=k.byteLength||C.byteOffset!=k.byteOffset)return!1;C=C.buffer,k=k.buffer;case lr:return!(C.byteLength!=k.byteLength||!Me(new ds(C),new ds(k)));case en:case it:case $t:return za(+C,+k);case St:return C.name==k.name&&C.message==k.message;case An:case ai:return C==k+"";case Mt:var ot=pc;case Cn:var mt=Q&L;if(ot||(ot=gc),C.size!=k.size&&!mt)return!1;var on=qe.get(C);if(on)return on==k;Q|=O,qe.set(C,k);var sn=ug(ot(C),ot(k),Q,ye,Me,qe);return qe.delete(C),sn;case Gi:if(Cc)return Cc.call(C)==Cc.call(k)}return!1}function cg(C,k,j,Q,ye,Me){var qe=j&L,ot=dd(C),mt=ot.length,on=dd(k),sn=on.length;if(mt!=sn&&!qe)return!1;for(var fn=mt;fn--;){var Hn=ot[fn];if(!(qe?Hn in k:Cr.call(k,Hn)))return!1}var mi=Me.get(C),zi=Me.get(k);if(mi&&zi)return mi==k&&zi==C;var br=!0;Me.set(C,k),Me.set(k,C);for(var Ni=qe;++fn<mt;){Hn=ot[fn];var Dr=C[Hn],Hr=k[Hn];if(Q)var bd=qe?Q(Hr,Dr,Hn,k,C,Me):Q(Dr,Hr,Hn,C,k,Me);if(!(bd===n?Dr===Hr||ye(Dr,Hr,j,Q,Me):bd)){br=!1;break}Ni||(Ni=Hn=="constructor")}if(br&&!Ni){var rc=C.constructor,xd=k.constructor;rc!=xd&&"constructor"in C&&"constructor"in k&&!(typeof rc=="function"&&rc instanceof rc&&typeof xd=="function"&&xd instanceof xd)&&(br=!1)}return Me.delete(C),Me.delete(k),br}function Rc(C){return Km(gg(C,n,Eo),C+"")}function dd(C){return Za(C,sr,Kd)}function ov(C){return Za(C,Pr,qh)}var mo=po?function(C){return po.get(C)}:b;function So(C){for(var k=C.name+"",j=tr[k],Q=Cr.call(tr,k)?j.length:0;Q--;){var ye=j[Q],Me=ye.func;if(Me==null||Me==C)return ye.name}return k}function Yo(C){var k=Cr.call(Se,"placeholder")?Se:C;return k.placeholder}function vi(){var C=Se.iteratee||Ov;return C=C===Ov?Hi:C,arguments.length?C(arguments[0],arguments[1]):C}function Ud(C,k){var j=C.__data__;return fg(k)?j[typeof k=="string"?"string":"hash"]:j.map}function qd(C){for(var k=sr(C),j=k.length;j--;){var Q=k[j],ye=C[Q];k[j]=[Q,ye,Qu(ye)]}return k}function hd(C,k){var j=kf(C,k);return ma(j)?j:n}function Uf(C){var k=Cr.call(C,Ul),j=C[Ul];try{C[Ul]=n;var Q=!0}catch{}var ye=Nr.call(C);return Q&&(k?C[Ul]=j:delete C[Ul]),ye}var Kd=nd?function(C){return C==null?[]:(C=Tr(C),Iu(nd(C),function(k){return gu.call(C,k)}))}:tn,qh=nd?function(C){for(var k=[];C;)hc(k,Kd(C)),C=gl(C);return k}:tn,Hs=Zi;(Ss&&Hs(new Ss(new ArrayBuffer(1)))!=Tt||qa&&Hs(new qa)!=Mt||Of&&Hs(Of.resolve())!=wn||$u&&Hs(new $u)!=Cn||xc&&Hs(new xc)!=ji)&&(Hs=function(C){var k=Zi(C),j=k==yn?C.constructor:n,Q=j?La(j):"";if(Q)switch(Q){case nn:return Tt;case Kl:return Mt;case ka:return wn;case zf:return Cn;case Ka:return ji}return k});function sv(C,k,j){for(var Q=-1,ye=j.length;++Q<ye;){var Me=j[Q],qe=Me.size;switch(Me.type){case"drop":C+=qe;break;case"dropRight":k-=qe;break;case"take":k=Ko(k,C+qe);break;case"takeRight":C=so(C,k-qe);break}}return{start:C,end:k}}function qf(C){var k=C.match($n);return k?k[1].split(Qn):[]}function dg(C,k,j){k=Xa(k,C);for(var Q=-1,ye=k.length,Me=!1;++Q<ye;){var qe=vl(k[Q]);if(!(Me=C!=null&&j(C,qe)))break;C=C[qe]}return Me||++Q!=ye?Me:(ye=C==null?0:C.length,!!ye&&ih(ye)&&Ju(qe,ye)&&(Ti(C)||of(C)))}function av(C){var k=C.length,j=new C.constructor(k);return k&&typeof C[0]=="string"&&Cr.call(C,"index")&&(j.index=C.index,j.input=C.input),j}function lv(C){return typeof C.constructor=="function"&&!Kf(C)?_c(gl(C)):{}}function F0(C,k,j){var Q=C.constructor;switch(k){case lr:return ld(C);case en:case it:return new Q(+C);case Tt:return jm(C,j);case Ji:case Qi:case Vr:case wo:case ln:case Nn:case qn:case fr:case us:return Hm(C,j);case Mt:return new Q;case $t:case ai:return new Q(C);case An:return ng(C);case Cn:return new Q;case Gi:return Qy(C)}}function uv(C,k){var j=k.length;if(!j)return C;var Q=j-1;return k[Q]=(j>1?"& ":"")+k[Q],k=k.join(j>2?", ":" "),C.replace(pn,`{
/* [wrapped with `+k+`] */
`)}function cv(C){return Ti(C)||of(C)||!!(Mf&&C&&C[Mf])}function Ju(C,k){var j=typeof C;return k=k??Re,!!k&&(j=="number"||j!="symbol"&&No.test(C))&&C>-1&&C%1==0&&C<k}function Xo(C,k,j){if(!To(j))return!1;var Q=typeof k;return(Q=="number"?gs(j)&&Ju(k,j.length):Q=="string"&&k in j)?za(j[k],C):!1}function hg(C,k){if(Ti(C))return!1;var j=typeof C;return j=="number"||j=="symbol"||j=="boolean"||C==null||M(C)?!0:nt.test(C)||!Je.test(C)||k!=null&&C in Tr(k)}function fg(C){var k=typeof C;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?C!=="__proto__":C===null}function Ac(C){var k=So(C),j=Se[k];if(typeof j!="function"||!(k in Pi.prototype))return!1;if(C===j)return!0;var Q=mo(j);return!!Q&&C===Q[0]}function M0(C){return!!yc&&yc in C}var dv=zh?tl:Dt;function Kf(C){var k=C&&C.constructor,j=typeof k=="function"&&k.prototype||Id;return C===j}function Qu(C){return C===C&&!To(C)}function pg(C,k){return function(j){return j==null?!1:j[C]===k&&(k!==n||C in Tr(j))}}function Ix(C){var k=lp(C,function(Q){return j.size===h&&j.clear(),Q}),j=k.cache;return k}function I0(C,k){var j=C[1],Q=k[1],ye=j|Q,Me=ye<(z|$|re),qe=Q==re&&j==Y||Q==re&&j==J&&C[7].length<=k[8]||Q==(re|J)&&k[7].length<=k[8]&&j==Y;if(!(Me||qe))return C;Q&z&&(C[2]=k[2],ye|=j&z?0:U);var ot=k[3];if(ot){var mt=C[3];C[3]=mt?ud(mt,ot,k[4]):ot,C[4]=mt?Ta(C[3],m):k[4]}return ot=k[5],ot&&(mt=C[5],C[5]=mt?ig(mt,ot,k[6]):ot,C[6]=mt?Ta(C[5],m):k[6]),ot=k[7],ot&&(C[7]=ot),Q&re&&(C[8]=C[8]==null?k[8]:Ko(C[8],k[8])),C[9]==null&&(C[9]=k[9]),C[0]=k[0],C[1]=ye,C}function fd(C){var k=[];if(C!=null)for(var j in Tr(C))k.push(j);return k}function hv(C){return Nr.call(C)}function gg(C,k,j){return k=so(k===n?C.length-1:k,0),function(){for(var Q=arguments,ye=-1,Me=so(Q.length-k,0),qe=Ft(Me);++ye<Me;)qe[ye]=Q[k+ye];ye=-1;for(var ot=Ft(k+1);++ye<k;)ot[ye]=Q[ye];return ot[k]=j(qe),Aa(C,this,ot)}}function pd(C,k){return k.length<2?C:go(C,js(k,0,-1))}function Kh(C,k){for(var j=C.length,Q=Ko(k.length,j),ye=Ma(C);Q--;){var Me=k[Q];C[Q]=Ju(Me,j)?ye[Me]:n}return C}function yo(C,k){if(!(k==="constructor"&&typeof C[k]=="function")&&k!="__proto__")return C[k]}var L0=Yl(Zl),Zf=Ua||function(C,k){return nr.setTimeout(C,k)},Km=Yl(ad);function Yf(C,k,j){var Q=k+"";return Km(C,uv(Q,O0(qf(Q),j)))}function Yl(C){var k=0,j=0;return function(){var Q=Lo(),ye=ce-(Q-j);if(j=Q,ye>0){if(++k>=ve)return arguments[0]}else k=0;return C.apply(n,arguments)}}function Xf(C,k){var j=-1,Q=C.length,ye=Q-1;for(k=k===n?Q:k;++j<k;){var Me=Hh(j,ye),qe=C[Me];C[Me]=C[j],C[j]=qe}return C.length=k,C}var fv=Ix(function(C){var k=[];return C.charCodeAt(0)===46&&k.push(""),C.replace(ct,function(j,Q,ye,Me){k.push(ye?Me.replace(xi,"$1"):Q||j)}),k});function vl(C){if(typeof C=="string"||M(C))return C;var k=C+"";return k=="0"&&1/C==-he?"-0":k}function La(C){if(C!=null){try{return ed.call(C)}catch{}try{return C+""}catch{}}return""}function O0(C,k){return cs(yt,function(j){var Q="_."+j[0];k&j[1]&&!dc(C,Q)&&C.push(Q)}),C.sort()}function Zm(C){if(C instanceof Pi)return C.clone();var k=new Pa(C.__wrapped__,C.__chain__);return k.__actions__=Ma(C.__actions__),k.__index__=C.__index__,k.__values__=C.__values__,k}function z0(C,k,j){(j?Xo(C,k,j):k===n)?k=1:k=so(we(k),0);var Q=C==null?0:C.length;if(!Q||k<1)return[];for(var ye=0,Me=0,qe=Ft(ju(Q/k));ye<Q;)qe[Me++]=js(C,ye,ye+=k);return qe}function Ym(C){for(var k=-1,j=C==null?0:C.length,Q=0,ye=[];++k<j;){var Me=C[k];Me&&(ye[Q++]=Me)}return ye}function mg(){var C=arguments.length;if(!C)return[];for(var k=Ft(C-1),j=arguments[0],Q=C;Q--;)k[Q-1]=arguments[Q];return hc(Ti(j)?Ma(j):[j],cn(k,1))}var yg=Yi(function(C,k){return es(C)?gn(C,cn(k,1,es,!0)):[]}),pv=Yi(function(C,k){var j=Ro(k);return es(j)&&(j=n),es(C)?gn(C,cn(k,1,es,!0),vi(j,2)):[]}),Tc=Yi(function(C,k){var j=Ro(k);return es(j)&&(j=n),es(C)?gn(C,cn(k,1,es,!0),n,j):[]});function As(C,k,j){var Q=C==null?0:C.length;return Q?(k=j||k===n?1:we(k),js(C,k<0?0:k,Q)):[]}function Jf(C,k,j){var Q=C==null?0:C.length;return Q?(k=j||k===n?1:we(k),k=Q-k,js(C,0,k<0?0:k)):[]}function N0(C,k){return C&&C.length?Hf(C,vi(k,3),!0,!0):[]}function Vs(C,k){return C&&C.length?Hf(C,vi(k,3),!0):[]}function Lx(C,k,j,Q){var ye=C==null?0:C.length;return ye?(j&&typeof j!="number"&&Xo(C,k,j)&&(j=0,Q=ye),ci(C,k,j,Q)):[]}function gv(C,k,j){var Q=C==null?0:C.length;if(!Q)return-1;var ye=j==null?0:we(j);return ye<0&&(ye=so(Q+ye,0)),pl(C,vi(k,3),ye)}function mv(C,k,j){var Q=C==null?0:C.length;if(!Q)return-1;var ye=Q-1;return j!==n&&(ye=we(j),ye=j<0?so(Q+ye,0):Ko(ye,Q-1)),pl(C,vi(k,3),ye,!0)}function Eo(C){var k=C==null?0:C.length;return k?cn(C,1):[]}function bl(C){var k=C==null?0:C.length;return k?cn(C,he):[]}function gd(C,k){var j=C==null?0:C.length;return j?(k=k===n?1:we(k),cn(C,k)):[]}function Qf(C){for(var k=-1,j=C==null?0:C.length,Q={};++k<j;){var ye=C[k];Q[ye[0]]=ye[1]}return Q}function Jo(C){return C&&C.length?C[0]:n}function yv(C,k,j){var Q=C==null?0:C.length;if(!Q)return-1;var ye=j==null?0:we(j);return ye<0&&(ye=so(Q+ye,0)),fc(C,k,ye)}function B0(C){var k=C==null?0:C.length;return k?js(C,0,-1):[]}var vg=Yi(function(C){var k=Jr(C,tg);return k.length&&k[0]===C[0]?Da(k):[]}),Xi=Yi(function(C){var k=Ro(C),j=Jr(C,tg);return k===Ro(j)?k=n:j.pop(),j.length&&j[0]===C[0]?Da(j,vi(k,2)):[]}),Xl=Yi(function(C){var k=Ro(C),j=Jr(C,tg);return k=typeof k=="function"?k:n,k&&j.pop(),j.length&&j[0]===C[0]?Da(j,n,k):[]});function vv(C,k){return C==null?"":bc.call(C,k)}function Ro(C){var k=C==null?0:C.length;return k?C[k-1]:n}function kc(C,k,j){var Q=C==null?0:C.length;if(!Q)return-1;var ye=Q;return j!==n&&(ye=we(j),ye=ye<0?so(Q+ye,0):Ko(ye,Q-1)),k===k?Md(C,k,ye):pl(C,Af,ye,!0)}function xl(C,k){return C&&C.length?od(C,we(k)):n}var Zd=Yi(Pc);function Pc(C,k){return C&&C.length&&k&&k.length?wu(C,k):C}function bv(C,k,j){return C&&C.length&&k&&k.length?wu(C,k,vi(j,2)):C}function xv(C,k,j){return C&&C.length&&k&&k.length?wu(C,k,n,j):C}var ec=Rc(function(C,k){var j=C==null?0:C.length,Q=ze(C,k);return sd(C,Jr(k,function(ye){return Ju(ye,j)?+ye:ye}).sort(ev)),Q});function G0(C,k){var j=[];if(!(C&&C.length))return j;var Q=-1,ye=[],Me=C.length;for(k=vi(k,3);++Q<Me;){var qe=C[Q];k(qe,Q,C)&&(j.push(qe),ye.push(Q))}return sd(C,ye),j}function Yd(C){return C==null?C:os.call(C)}function bg(C,k,j){var Q=C==null?0:C.length;return Q?(j&&typeof j!="number"&&Xo(C,k,j)?(k=0,j=Q):(k=k==null?0:we(k),j=j===n?Q:we(j)),js(C,k,j)):[]}function xg(C,k){return $h(C,k)}function ep(C,k,j){return Oo(C,k,vi(j,2))}function wg(C,k){var j=C==null?0:C.length;if(j){var Q=$h(C,k);if(Q<j&&za(C[Q],k))return Q}return-1}function Zh(C,k){return $h(C,k,!0)}function tp(C,k,j){return Oo(C,k,vi(j,2),!0)}function Xm(C,k){var j=C==null?0:C.length;if(j){var Q=$h(C,k,!0)-1;if(za(C[Q],k))return Q}return-1}function np(C){return C&&C.length?Nm(C):[]}function j0(C,k){return C&&C.length?Nm(C,vi(k,2)):[]}function Ox(C){var k=C==null?0:C.length;return k?js(C,1,k):[]}function zx(C,k,j){return C&&C.length?(k=j||k===n?1:we(k),js(C,0,k<0?0:k)):[]}function Lr(C,k,j){var Q=C==null?0:C.length;return Q?(k=j||k===n?1:we(k),k=Q-k,js(C,k<0?0:k,Q)):[]}function lo(C,k){return C&&C.length?Hf(C,vi(k,3),!1,!0):[]}function Ei(C,k){return C&&C.length?Hf(C,vi(k,3)):[]}var gr=Yi(function(C){return Ya(cn(C,1,es,!0))}),$r=Yi(function(C){var k=Ro(C);return es(k)&&(k=n),Ya(cn(C,1,es,!0),vi(k,2))}),Ts=Yi(function(C){var k=Ro(C);return k=typeof k=="function"?k:n,Ya(cn(C,1,es,!0),n,k)});function _u(C){return C&&C.length?Ya(C):[]}function Dc(C,k){return C&&C.length?Ya(C,vi(k,2)):[]}function Xd(C,k){return k=typeof k=="function"?k:n,C&&C.length?Ya(C,n,k):[]}function wl(C){if(!(C&&C.length))return[];var k=0;return C=Iu(C,function(j){if(es(j))return k=so(j.length,k),!0}),Tf(k,function(j){return Jr(C,Lu(j))})}function Ao(C,k){if(!(C&&C.length))return[];var j=wl(C);return k==null?j:Jr(j,function(Q){return Aa(k,n,Q)})}var Jd=Yi(function(C,k){return es(C)?gn(C,k):[]}),Yh=Yi(function(C){return eg(Iu(C,es))}),Jm=Yi(function(C){var k=Ro(C);return es(k)&&(k=n),eg(Iu(C,es),vi(k,2))}),Cl=Yi(function(C){var k=Ro(C);return k=typeof k=="function"?k:n,eg(Iu(C,es),n,k)}),ip=Yi(wl);function rp(C,k){return Yy(C||[],k||[],Ee)}function el(C,k){return Yy(C||[],k||[],yl)}var Cg=Yi(function(C){var k=C.length,j=k>1?C[k-1]:n;return j=typeof j=="function"?(C.pop(),j):n,Ao(C,j)});function Xh(C){var k=Se(C);return k.__chain__=!0,k}function H0(C,k){return k(C),C}function Jh(C,k){return k(C)}var _g=Rc(function(C){var k=C.length,j=k?C[0]:0,Q=this.__wrapped__,ye=function(Me){return ze(Me,C)};return k>1||this.__actions__.length||!(Q instanceof Pi)||!Ju(j)?this.thru(ye):(Q=Q.slice(j,+j+(k?1:0)),Q.__actions__.push({func:Jh,args:[ye],thisArg:n}),new Pa(Q,this.__chain__).thru(function(Me){return k&&!Me.length&&Me.push(n),Me}))});function md(){return Xh(this)}function Qo(){return new Pa(this.value(),this.__chain__)}function va(){this.__values__===n&&(this.__values__=me(this.value()));var C=this.__index__>=this.__values__.length,k=C?n:this.__values__[this.__index__++];return{done:C,value:k}}function Jl(){return this}function Fc(C){for(var k,j=this;j instanceof yu;){var Q=Zm(j);Q.__index__=0,Q.__values__=n,k?ye.__wrapped__=Q:k=Q;var ye=Q;j=j.__wrapped__}return ye.__wrapped__=C,k}function Sg(){var C=this.__wrapped__;if(C instanceof Pi){var k=C;return this.__actions__.length&&(k=new Pi(this)),k=k.reverse(),k.__actions__.push({func:Jh,args:[Yd],thisArg:n}),new Pa(k,this.__chain__)}return this.thru(Yd)}function wv(){return Zy(this.__wrapped__,this.__actions__)}var V0=Vm(function(C,k,j){Cr.call(C,j)?++C[j]:Ke(C,j,1)});function Qd(C,k,j){var Q=Ti(C)?Pm:hn;return j&&Xo(C,k,j)&&(k=n),Q(C,vi(k,3))}function Eg(C,k){var j=Ti(C)?Iu:xn;return j(C,vi(k,3))}var Ql=Ja(gv),Qm=Ja(mv);function Oa(C,k){return cn(Ag(C,k),1)}function Qh(C,k){return cn(Ag(C,k),he)}function Cv(C,k,j){return j=j===n?1:we(j),cn(Ag(C,k),j)}function _v(C,k){var j=Ti(C)?cs:En;return j(C,vi(k,3))}function tc(C,k){var j=Ti(C)?km:bn;return j(C,vi(k,3))}var Rg=Vm(function(C,k,j){Cr.call(C,j)?C[j].push(k):Ke(C,j,[k])});function op(C,k,j,Q){C=gs(C)?C:El(C),j=j&&!Q?we(j):0;var ye=C.length;return j<0&&(j=so(ye+j,0)),F(C)?j<=ye&&C.indexOf(k,j)>-1:!!ye&&fc(C,k,j)>-1}var ef=Yi(function(C,k,j){var Q=-1,ye=typeof k=="function",Me=gs(C)?Ft(C.length):[];return En(C,function(qe){Me[++Q]=ye?Aa(k,qe,j):pa(qe,k,j)}),Me}),$0=Vm(function(C,k,j){Ke(C,j,k)});function Ag(C,k){var j=Ti(C)?Jr:jh;return j(C,vi(k,3))}function Sv(C,k,j,Q){return C==null?[]:(Ti(k)||(k=k==null?[]:[k]),j=Q?n:j,Ti(j)||(j=j==null?[]:[j]),Sc(C,k,j))}var W0=Vm(function(C,k,j){C[j?0:1].push(k)},function(){return[[],[]]});function ey(C,k,j){var Q=Ti(C)?Kp:Ih,ye=arguments.length<3;return Q(C,vi(k,4),j,ye,En)}function Ev(C,k,j){var Q=Ti(C)?Zp:Ih,ye=arguments.length<3;return Q(C,vi(k,4),j,ye,bn)}function Nx(C,k){var j=Ti(C)?Iu:xn;return j(C,kg(vi(k,3)))}function Rv(C){var k=Ti(C)?te:Vh;return k(C)}function eh(C,k,j){(j?Xo(C,k,j):k===n)?k=1:k=we(k);var Q=Ti(C)?ae:jd;return Q(C,k)}function Av(C){var k=Ti(C)?le:Ky;return k(C)}function Tv(C){if(C==null)return 0;if(gs(C))return F(C)?Jc(C):C.length;var k=Hs(C);return k==Mt||k==Cn?C.size:Fa(C).length}function tf(C,k,j){var Q=Ti(C)?Rf:A0;return j&&Xo(C,k,j)&&(k=n),Q(C,vi(k,3))}var Tg=Yi(function(C,k){if(C==null)return[];var j=k.length;return j>1&&Xo(C,k[0],k[1])?k=[]:j>2&&Xo(k[0],k[1],k[2])&&(k=[k[0]]),Sc(C,cn(k,1),[])}),sp=zd||function(){return nr.Date.now()};function ty(C,k){if(typeof k!="function")throw new ea(s);return C=we(C),function(){if(--C<1)return k.apply(this,arguments)}}function nf(C,k,j){return k=j?n:k,k=C&&k==null?C.length:k,Qa(C,re,n,n,n,n,k)}function ny(C,k){var j;if(typeof k!="function")throw new ea(s);return C=we(C),function(){return--C>0&&(j=k.apply(this,arguments)),C<=1&&(k=n),j}}var ap=Yi(function(C,k,j){var Q=z;if(j.length){var ye=Ta(j,Yo(ap));Q|=q}return Qa(C,Q,k,j,ye)}),iy=Yi(function(C,k,j){var Q=z|$;if(j.length){var ye=Ta(j,Yo(iy));Q|=q}return Qa(k,Q,C,j,ye)});function ba(C,k,j){k=j?n:k;var Q=Qa(C,Y,n,n,n,n,n,k);return Q.placeholder=ba.placeholder,Q}function rf(C,k,j){k=j?n:k;var Q=Qa(C,X,n,n,n,n,n,k);return Q.placeholder=rf.placeholder,Q}function ry(C,k,j){var Q,ye,Me,qe,ot,mt,on=0,sn=!1,fn=!1,Hn=!0;if(typeof C!="function")throw new ea(s);k=He(k)||0,To(j)&&(sn=!!j.leading,fn="maxWait"in j,Me=fn?so(He(j.maxWait)||0,k):Me,Hn="trailing"in j?!!j.trailing:Hn);function mi(Ca){var lf=Q,Gg=ye;return Q=ye=n,on=Ca,qe=C.apply(Gg,lf),qe}function zi(Ca){return on=Ca,ot=Zf(Dr,k),sn?mi(Ca):qe}function br(Ca){var lf=Ca-mt,Gg=Ca-on,fM=k-lf;return fn?Ko(fM,Me-Gg):fM}function Ni(Ca){var lf=Ca-mt,Gg=Ca-on;return mt===n||lf>=k||lf<0||fn&&Gg>=Me}function Dr(){var Ca=sp();if(Ni(Ca))return Hr(Ca);ot=Zf(Dr,br(Ca))}function Hr(Ca){return ot=n,Hn&&Q?mi(Ca):(Q=ye=n,qe)}function bd(){ot!==n&&Ec(ot),on=0,Q=mt=ye=ot=n}function rc(){return ot===n?qe:Hr(sp())}function xd(){var Ca=sp(),lf=Ni(Ca);if(Q=arguments,ye=this,mt=Ca,lf){if(ot===n)return zi(mt);if(fn)return Ec(ot),ot=Zf(Dr,k),mi(mt)}return ot===n&&(ot=Zf(Dr,k)),qe}return xd.cancel=bd,xd.flush=rc,xd}var Wr=Yi(function(C,k){return un(C,1,k)}),oy=Yi(function(C,k,j){return un(C,He(k)||0,j)});function U0(C){return Qa(C,ne)}function lp(C,k){if(typeof C!="function"||k!=null&&typeof k!="function")throw new ea(s);var j=function(){var Q=arguments,ye=k?k.apply(this,Q):Q[0],Me=j.cache;if(Me.has(ye))return Me.get(ye);var qe=C.apply(this,Q);return j.cache=Me.set(ye,qe)||Me,qe};return j.cache=new(lp.Cache||ss),j}lp.Cache=ss;function kg(C){if(typeof C!="function")throw new ea(s);return function(){var k=arguments;switch(k.length){case 0:return!C.call(this);case 1:return!C.call(this,k[0]);case 2:return!C.call(this,k[0],k[1]);case 3:return!C.call(this,k[0],k[1],k[2])}return!C.apply(this,k)}}function Bx(C){return ny(2,C)}var q0=Xy(function(C,k){k=k.length==1&&Ti(k[0])?Jr(k[0],ir(vi())):Jr(cn(k,1),ir(vi()));var j=k.length;return Yi(function(Q){for(var ye=-1,Me=Ko(Q.length,j);++ye<Me;)Q[ye]=k[ye].call(this,Q[ye]);return Aa(C,this,Q)})}),eu=Yi(function(C,k){var j=Ta(k,Yo(eu));return Qa(C,q,n,k,j)}),th=Yi(function(C,k){var j=Ta(k,Yo(th));return Qa(C,ie,n,k,j)}),sy=Rc(function(C,k){return Qa(C,J,n,n,n,k)});function Pg(C,k){if(typeof C!="function")throw new ea(s);return k=k===n?k:we(k),Yi(C,k)}function ay(C,k){if(typeof C!="function")throw new ea(s);return k=k==null?0:so(we(k),0),Yi(function(j){var Q=j[k],ye=Cu(j,0,k);return Q&&hc(ye,Q),Aa(C,this,ye)})}function nh(C,k,j){var Q=!0,ye=!0;if(typeof C!="function")throw new ea(s);return To(j)&&(Q="leading"in j?!!j.leading:Q,ye="trailing"in j?!!j.trailing:ye),ry(C,k,{leading:Q,maxWait:k,trailing:ye})}function Mc(C){return nf(C,1)}function up(C,k){return eu(Gm(k),C)}function cp(){if(!arguments.length)return[];var C=arguments[0];return Ti(C)?C:[C]}function kv(C){return rt(C,R)}function Dg(C,k){return k=typeof k=="function"?k:n,rt(C,R,k)}function Pv(C){return rt(C,v|R)}function Fg(C,k){return k=typeof k=="function"?k:n,rt(C,v|R,k)}function ly(C,k){return k==null||jt(C,k,sr(k))}function za(C,k){return C===k||C!==C&&k!==k}var K0=$f(Es),Z0=$f(function(C,k){return C>=k}),of=fs((function(){return arguments})())?fs:function(C){return ts(C)&&Cr.call(C,"callee")&&!gu.call(C,"callee")},Ti=Ft.isArray,ks=Wp?ir(Wp):_r;function gs(C){return C!=null&&ih(C.length)&&!tl(C)}function es(C){return ts(C)&&gs(C)}function dp(C){return C===!0||C===!1||ts(C)&&Zi(C)==en}var yd=Lf||Dt,uy=Am?ir(Am):rd;function yr(C){return ts(C)&&C.nodeType===1&&!u(C)}function cy(C){if(C==null)return!0;if(gs(C)&&(Ti(C)||typeof C=="string"||typeof C.splice=="function"||yd(C)||B(C)||of(C)))return!C.length;var k=Hs(C);if(k==Mt||k==Cn)return!C.size;if(Kf(C))return!Fa(C).length;for(var j in C)if(Cr.call(C,j))return!1;return!0}function Mg(C,k){return ga(C,k)}function Dv(C,k,j){j=typeof j=="function"?j:n;var Q=j?j(C,k):n;return Q===n?ga(C,k,n,j):!!Q}function Ig(C){if(!ts(C))return!1;var k=Zi(C);return k==St||k==Lt||typeof C.message=="string"&&typeof C.name=="string"&&!u(C)}function Lg(C){return typeof C=="number"&&fa(C)}function tl(C){if(!To(C))return!1;var k=Zi(C);return k==lt||k==Tn||k==Xt||k==dn}function hp(C){return typeof C=="number"&&C==we(C)}function ih(C){return typeof C=="number"&&C>-1&&C%1==0&&C<=Re}function To(C){var k=typeof C;return C!=null&&(k=="object"||k=="function")}function ts(C){return C!=null&&typeof C=="object"}var dy=Dh?ir(Dh):or;function Og(C,k){return C===k||Br(C,k,qd(k))}function fp(C,k,j){return j=typeof j=="function"?j:n,Br(C,k,qd(k),j)}function Ur(C){return f(C)&&C!=+C}function zg(C){if(dv(C))throw new Ci(o);return ma(C)}function $s(C){return C===null}function Gx(C){return C==null}function f(C){return typeof C=="number"||ts(C)&&Zi(C)==$t}function u(C){if(!ts(C)||Zi(C)!=yn)return!1;var k=gl(C);if(k===null)return!0;var j=Cr.call(k,"constructor")&&k.constructor;return typeof j=="function"&&j instanceof j&&ed.call(j)==pu}var g=Ef?ir(Ef):jo;function x(C){return hp(C)&&C>=-Re&&C<=Re}var E=Up?ir(Up):Ho;function F(C){return typeof C=="string"||!Ti(C)&&ts(C)&&Zi(C)==ai}function M(C){return typeof C=="symbol"||ts(C)&&Zi(C)==Gi}var B=qp?ir(qp):ta;function H(C){return C===n}function Z(C){return ts(C)&&Hs(C)==ji}function ee(C){return ts(C)&&Zi(C)==Si}var oe=$f(Gr),de=$f(function(C,k){return C<=k});function me(C){if(!C)return[];if(gs(C))return F(C)?fo(C):Ma(C);if(rs&&C[rs])return Nu(C[rs]());var k=Hs(C),j=k==Mt?pc:k==Cn?gc:El;return j(C)}function Ce(C){if(!C)return C===0?C:0;if(C=He(C),C===he||C===-he){var k=C<0?-1:1;return k*De}return C===C?C:0}function we(C){var k=Ce(C),j=k%1;return k===k?j?k-j:k:0}function Be(C){return C?tt(we(C),0,_e):0}function He(C){if(typeof C=="number")return C;if(M(C))return Ye;if(To(C)){var k=typeof C.valueOf=="function"?C.valueOf():C;C=To(k)?k+"":k}if(typeof C!="string")return C===0?C:+C;C=fu(C);var j=Li.test(C);return j||wr.test(C)?ca(C.slice(2),j?2:8):Rr.test(C)?Ye:+C}function ht(C){return Ia(C,Pr(C))}function Qe(C){return C?tt(we(C),-Re,Re):C===0?C:0}function et(C){return C==null?"":Rs(C)}var It=cd(function(C,k){if(Kf(k)||gs(k)){Ia(k,sr(k),C);return}for(var j in k)Cr.call(k,j)&&Ee(C,j,k[j])}),rn=cd(function(C,k){Ia(k,Pr(k),C)}),Rn=cd(function(C,k,j,Q){Ia(k,Pr(k),C,Q)}),si=cd(function(C,k,j,Q){Ia(k,sr(k),C,Q)}),vn=Rc(ze);function _n(C,k){var j=_c(C);return k==null?j:Ve(j,k)}var Vn=Yi(function(C,k){C=Tr(C);var j=-1,Q=k.length,ye=Q>2?k[2]:n;for(ye&&Xo(k[0],k[1],ye)&&(Q=1);++j<Q;)for(var Me=k[j],qe=Pr(Me),ot=-1,mt=qe.length;++ot<mt;){var on=qe[ot],sn=C[on];(sn===n||za(sn,Id[on])&&!Cr.call(C,on))&&(C[on]=Me[on])}return C}),On=Yi(function(C){return C.push(n,rv),Aa(ns,n,C)});function Mn(C,k){return Mh(C,vi(k,3),gi)}function Nt(C,k){return Mh(C,vi(k,3),Ki)}function In(C,k){return C==null?C:oi(C,vi(k,3),Pr)}function jn(C,k){return C==null?C:kr(C,vi(k,3),Pr)}function di(C,k){return C&&gi(C,vi(k,3))}function mr(C,k){return C&&Ki(C,vi(k,3))}function jr(C){return C==null?[]:vr(C,sr(C))}function Ps(C){return C==null?[]:vr(C,Pr(C))}function Ws(C,k,j){var Q=C==null?n:go(C,k);return Q===n?j:Q}function Us(C,k){return C!=null&&dg(C,k,eo)}function as(C,k){return C!=null&&dg(C,k,to)}var Na=ag(function(C,k,j){k!=null&&typeof k.toString!="function"&&(k=Nr.call(k)),C[k]=j},my(iu)),Ba=ag(function(C,k,j){k!=null&&typeof k.toString!="function"&&(k=Nr.call(k)),Cr.call(C,k)?C[k].push(j):C[k]=[j]},vi),Ga=Yi(pa);function sr(C){return gs(C)?K(C):Fa(C)}function Pr(C){return gs(C)?K(C,!0):Bd(C)}function xa(C,k){var j={};return k=vi(k,3),gi(C,function(Q,ye,Me){Ke(j,k(Q,ye,Me),Q)}),j}function qs(C,k){var j={};return k=vi(k,3),gi(C,function(Q,ye,Me){Ke(j,ye,k(Q,ye,Me))}),j}var ms=cd(function(C,k,j){ml(C,k,j)}),ns=cd(function(C,k,j,Q){ml(C,k,j,Q)}),_l=Rc(function(C,k){var j={};if(C==null)return j;var Q=!1;k=Jr(k,function(Me){return Me=Xa(Me,C),Q||(Q=Me.length>1),Me}),Ia(C,ov(C),j),Q&&(j=rt(j,v|w|R,P0));for(var ye=k.length;ye--;)Hd(j,k[ye]);return j});function nl(C,k){return Sr(C,kg(vi(k)))}var ar=Rc(function(C,k){return C==null?{}:Gd(C,k)});function Sr(C,k){if(C==null)return{};var j=Jr(ov(C),function(Q){return[Q]});return k=vi(k),ps(C,j,function(Q,ye){return k(Q,ye[0])})}function no(C,k,j){k=Xa(k,C);var Q=-1,ye=k.length;for(ye||(ye=1,C=n);++Q<ye;){var Me=C==null?n:C[vl(k[Q])];Me===n&&(Q=ye,Me=j),C=tl(Me)?Me.call(C):Me}return C}function wa(C,k,j){return C==null?C:yl(C,k,j)}function vo(C,k,j,Q){return Q=typeof Q=="function"?Q:n,C==null?C:yl(C,k,j,Q)}var vd=nv(sr),Sl=nv(Pr);function nc(C,k,j){var Q=Ti(C),ye=Q||yd(C)||B(C);if(k=vi(k,4),j==null){var Me=C&&C.constructor;ye?j=Q?new Me:[]:To(C)?j=tl(Me)?_c(gl(C)):{}:j={}}return(ye?cs:gi)(C,function(qe,ot,mt){return k(j,qe,ot,mt)}),j}function tu(C,k){return C==null?!0:Hd(C,k)}function nu(C,k,j){return C==null?C:Qp(C,k,Gm(j))}function Ds(C,k,j,Q){return Q=typeof Q=="function"?Q:n,C==null?C:Qp(C,k,Gm(j),Q)}function El(C){return C==null?[]:Ar(C,sr(C))}function sf(C){return C==null?[]:Ar(C,Pr(C))}function Y0(C,k,j){return j===n&&(j=k,k=n),j!==n&&(j=He(j),j=j===j?j:0),k!==n&&(k=He(k),k=k===k?k:0),tt(He(C),k,j)}function Ng(C,k,j){return k=Ce(k),j===n?(j=k,k=0):j=Ce(j),C=He(C),Go(C,k,j)}function pp(C,k,j){if(j&&typeof j!="boolean"&&Xo(C,k,j)&&(k=j=n),j===n&&(typeof k=="boolean"?(j=k,k=n):typeof C=="boolean"&&(j=C,C=n)),C===n&&k===n?(C=0,k=1):(C=Ce(C),k===n?(k=C,C=0):k=Ce(k)),C>k){var Q=C;C=k,k=Q}if(j||C%1||k%1){var ye=ql();return Ko(C+ye*(k-C+Ir("1e-"+((ye+"").length-1))),k)}return Hh(C,k)}var gp=Vd(function(C,k,j){return k=k.toLowerCase(),C+(j?Ic(k):k)});function Ic(C){return Bg(et(C).toLowerCase())}function af(C){return C=et(C),C&&C.replace(io,$l).replace(dt,"")}function X0(C,k,j){C=et(C),k=Rs(k);var Q=C.length;j=j===n?Q:tt(we(j),0,Q);var ye=j;return j-=k.length,j>=0&&C.slice(j,ye)==k}function J0(C){return C=et(C),C&&pe.test(C)?C.replace(zs,Dd):C}function Q0(C){return C=et(C),C&&Pt.test(C)?C.replace(Ue,"\\$&"):C}var eb=Vd(function(C,k,j){return C+(j?"-":"")+k.toLowerCase()}),tb=Vd(function(C,k,j){return C+(j?" ":"")+k.toLowerCase()}),Fv=og("toLowerCase");function nb(C,k,j){C=et(C),k=we(k);var Q=k?Jc(C):0;if(!k||Q>=k)return C;var ye=(k-Q)/2;return Wd(Hu(ye),j)+C+Wd(ju(ye),j)}function ib(C,k,j){C=et(C),k=we(k);var Q=k?Jc(C):0;return k&&Q<k?C+Wd(k-Q,j):C}function hy(C,k,j){C=et(C),k=we(k);var Q=k?Jc(C):0;return k&&Q<k?Wd(k-Q,j)+C:C}function ic(C,k,j){return j||k==null?k=0:k&&(k=+k),Zo(et(C).replace(Zt,""),k||0)}function fy(C,k,j){return(j?Xo(C,k,j):k===n)?k=1:k=we(k),Yu(et(C),k)}function py(){var C=arguments,k=et(C[0]);return C.length<3?k:k.replace(C[1],C[2])}var Mv=Vd(function(C,k,j){return C+(j?"_":"")+k.toLowerCase()});function gy(C,k,j){return j&&typeof j!="number"&&Xo(C,k,j)&&(k=j=n),j=j===n?_e:j>>>0,j?(C=et(C),C&&(typeof k=="string"||k!=null&&!g(k))&&(k=Rs(k),!k&&zu(C))?Cu(fo(C),0,j):C.split(k,j)):[]}var Iv=Vd(function(C,k,j){return C+(j?" ":"")+Bg(k)});function na(C,k,j){return C=et(C),j=j==null?0:tt(we(j),0,C.length),k=Rs(k),C.slice(j,j+k.length)==k}function il(C,k,j){var Q=Se.templateSettings;j&&Xo(C,k,j)&&(k=n),C=et(C),k=Rn({},k,Q,iv);var ye=Rn({},k.imports,Q.imports,iv),Me=sr(ye),qe=Ar(ye,Me),ot,mt,on=0,sn=k.interpolate||Xr,fn="__p += '",Hn=Gu((k.escape||Xr).source+"|"+sn.source+"|"+(sn===Ne?Fi:Xr).source+"|"+(k.evaluate||Xr).source+"|$","g"),mi="//# sourceURL="+(Cr.call(k,"sourceURL")?(k.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++dr+"]")+`
`;C.replace(Hn,function(Ni,Dr,Hr,bd,rc,xd){return Hr||(Hr=bd),fn+=C.slice(on,xd).replace(dl,da),Dr&&(ot=!0,fn+=`' +
__e(`+Dr+`) +
'`),rc&&(mt=!0,fn+=`';
`+rc+`;
__p += '`),Hr&&(fn+=`' +
((__t = (`+Hr+`)) == null ? '' : __t) +
'`),on=xd+Ni.length,Ni}),fn+=`';
`;var zi=Cr.call(k,"variable")&&k.variable;if(!zi)fn=`with (obj) {
`+fn+`
}
`;else if(Wn.test(zi))throw new Ci(a);fn=(mt?fn.replace(pi,""):fn).replace(oa,"$1").replace(sa,"$1;"),fn="function("+(zi||"obj")+`) {
`+(zi?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ot?", __e = _.escape":"")+(mt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+fn+`return __p
}`;var br=jx(function(){return Ui(Me,mi+"return "+fn).apply(n,qe)});if(br.source=fn,Ig(br))throw br;return br}function Rl(C){return et(C).toLowerCase()}function ia(C){return et(C).toUpperCase()}function Al(C,k,j){if(C=et(C),C&&(j||k===n))return fu(C);if(!C||!(k=Rs(k)))return C;var Q=fo(C),ye=fo(k),Me=Kc(Q,ye),qe=Zc(Q,ye)+1;return Cu(Q,Me,qe).join("")}function Tl(C,k,j){if(C=et(C),C&&(j||k===n))return C.slice(0,rr(C)+1);if(!C||!(k=Rs(k)))return C;var Q=fo(C),ye=Zc(Q,fo(k))+1;return Cu(Q,0,ye).join("")}function Lv(C,k,j){if(C=et(C),C&&(j||k===n))return C.replace(Zt,"");if(!C||!(k=Rs(k)))return C;var Q=fo(C),ye=Kc(Q,fo(k));return Cu(Q,ye).join("")}function mp(C,k){var j=be,Q=ue;if(To(k)){var ye="separator"in k?k.separator:ye;j="length"in k?we(k.length):j,Q="omission"in k?Rs(k.omission):Q}C=et(C);var Me=C.length;if(zu(C)){var qe=fo(C);Me=qe.length}if(j>=Me)return C;var ot=j-Jc(Q);if(ot<1)return Q;var mt=qe?Cu(qe,0,ot).join(""):C.slice(0,ot);if(ye===n)return mt+Q;if(qe&&(ot+=mt.length-ot),g(ye)){if(C.slice(ot).search(ye)){var on,sn=mt;for(ye.global||(ye=Gu(ye.source,et(co.exec(ye))+"g")),ye.lastIndex=0;on=ye.exec(sn);)var fn=on.index;mt=mt.slice(0,fn===n?ot:fn)}}else if(C.indexOf(Rs(ye),ot)!=ot){var Hn=mt.lastIndexOf(ye);Hn>-1&&(mt=mt.slice(0,Hn))}return mt+Q}function oE(C){return C=et(C),C&&je.test(C)?C.replace(Ys,Oh):C}var nC=Vd(function(C,k,j){return C+(j?" ":"")+k.toUpperCase()}),Bg=og("toUpperCase");function iC(C,k,j){return C=et(C),k=j?n:k,k===n?Lh(C)?Qc(C):Fm(C):C.match(k)||[]}var jx=Yi(function(C,k){try{return Aa(C,n,k)}catch(j){return Ig(j)?j:new Ci(j)}}),rb=Rc(function(C,k){return cs(k,function(j){j=vl(j),Ke(C,j,ap(C[j],C))}),C});function rC(C){var k=C==null?0:C.length,j=vi();return C=k?Jr(C,function(Q){if(typeof Q[1]!="function")throw new ea(s);return[j(Q[0]),Q[1]]}):[],Yi(function(Q){for(var ye=-1;++ye<k;){var Me=C[ye];if(Aa(Me[0],this,Q))return Aa(Me[1],this,Q)}})}function sE(C){return gt(rt(C,v))}function my(C){return function(){return C}}function ob(C,k){return C==null||C!==C?k:C}var oC=Uh(),yy=Uh(!0);function iu(C){return C}function Ov(C){return Hi(typeof C=="function"?C:rt(C,v))}function sb(C){return Gf(rt(C,v))}function sC(C,k){return jf(C,rt(k,v))}var aE=Yi(function(C,k){return function(j){return pa(j,C,k)}}),ab=Yi(function(C,k){return function(j){return pa(C,j,k)}});function c(C,k,j){var Q=sr(k),ye=vr(k,Q);j==null&&!(To(k)&&(ye.length||!Q.length))&&(j=k,k=C,C=this,ye=vr(k,sr(k)));var Me=!(To(j)&&"chain"in j)||!!j.chain,qe=tl(C);return cs(ye,function(ot){var mt=k[ot];C[ot]=mt,qe&&(C.prototype[ot]=function(){var on=this.__chain__;if(Me||on){var sn=C(this.__wrapped__),fn=sn.__actions__=Ma(this.__actions__);return fn.push({func:mt,args:arguments,thisArg:C}),sn.__chain__=on,sn}return mt.apply(C,hc([this.value()],arguments))})}),C}function p(){return nr._===this&&(nr._=Wa),this}function b(){}function A(C){return C=we(C),Yi(function(k){return od(k,C)})}var N=Um(Jr),V=Um(Pm),se=Um(Rf);function Ae(C){return hg(C)?Lu(vl(C)):ao(C)}function Xe(C){return function(k){return C==null?n:go(C,k)}}var At=qm(),Kt=qm(!0);function tn(){return[]}function Dt(){return!1}function zt(){return{}}function ti(){return""}function Di(){return!0}function ko(C,k){if(C=we(C),C<1||C>Re)return[];var j=_e,Q=Ko(C,_e);k=vi(k),C-=_e;for(var ye=Tf(Q,k);++j<C;)k(j);return ye}function pt(C){return Ti(C)?Jr(C,vl):M(C)?[C]:Ma(fv(et(C)))}function st(C){var k=++Ld;return et(C)+k}var Rt=Vf(function(C,k){return C+k},0),Qt=Xu("ceil"),wi=Vf(function(C,k){return C/k},1),qr=Xu("floor");function li(C){return C&&C.length?kn(C,iu,Es):n}function hr(C,k){return C&&C.length?kn(C,vi(k,2),Es):n}function Er(C){return qc(C,iu)}function Kr(C,k){return qc(C,vi(k,2))}function yp(C){return C&&C.length?kn(C,iu,Gr):n}function lE(C,k){return C&&C.length?kn(C,vi(k,2),Gr):n}var GV=Vf(function(C,k){return C*k},1),jV=Xu("round"),HV=Vf(function(C,k){return C-k},0);function VV(C){return C&&C.length?ho(C,iu):0}function $V(C,k){return C&&C.length?ho(C,vi(k,2)):0}return Se.after=ty,Se.ary=nf,Se.assign=It,Se.assignIn=rn,Se.assignInWith=Rn,Se.assignWith=si,Se.at=vn,Se.before=ny,Se.bind=ap,Se.bindAll=rb,Se.bindKey=iy,Se.castArray=cp,Se.chain=Xh,Se.chunk=z0,Se.compact=Ym,Se.concat=mg,Se.cond=rC,Se.conforms=sE,Se.constant=my,Se.countBy=V0,Se.create=_n,Se.curry=ba,Se.curryRight=rf,Se.debounce=ry,Se.defaults=Vn,Se.defaultsDeep=On,Se.defer=Wr,Se.delay=oy,Se.difference=yg,Se.differenceBy=pv,Se.differenceWith=Tc,Se.drop=As,Se.dropRight=Jf,Se.dropRightWhile=N0,Se.dropWhile=Vs,Se.fill=Lx,Se.filter=Eg,Se.flatMap=Oa,Se.flatMapDeep=Qh,Se.flatMapDepth=Cv,Se.flatten=Eo,Se.flattenDeep=bl,Se.flattenDepth=gd,Se.flip=U0,Se.flow=oC,Se.flowRight=yy,Se.fromPairs=Qf,Se.functions=jr,Se.functionsIn=Ps,Se.groupBy=Rg,Se.initial=B0,Se.intersection=vg,Se.intersectionBy=Xi,Se.intersectionWith=Xl,Se.invert=Na,Se.invertBy=Ba,Se.invokeMap=ef,Se.iteratee=Ov,Se.keyBy=$0,Se.keys=sr,Se.keysIn=Pr,Se.map=Ag,Se.mapKeys=xa,Se.mapValues=qs,Se.matches=sb,Se.matchesProperty=sC,Se.memoize=lp,Se.merge=ms,Se.mergeWith=ns,Se.method=aE,Se.methodOf=ab,Se.mixin=c,Se.negate=kg,Se.nthArg=A,Se.omit=_l,Se.omitBy=nl,Se.once=Bx,Se.orderBy=Sv,Se.over=N,Se.overArgs=q0,Se.overEvery=V,Se.overSome=se,Se.partial=eu,Se.partialRight=th,Se.partition=W0,Se.pick=ar,Se.pickBy=Sr,Se.property=Ae,Se.propertyOf=Xe,Se.pull=Zd,Se.pullAll=Pc,Se.pullAllBy=bv,Se.pullAllWith=xv,Se.pullAt=ec,Se.range=At,Se.rangeRight=Kt,Se.rearg=sy,Se.reject=Nx,Se.remove=G0,Se.rest=Pg,Se.reverse=Yd,Se.sampleSize=eh,Se.set=wa,Se.setWith=vo,Se.shuffle=Av,Se.slice=bg,Se.sortBy=Tg,Se.sortedUniq=np,Se.sortedUniqBy=j0,Se.split=gy,Se.spread=ay,Se.tail=Ox,Se.take=zx,Se.takeRight=Lr,Se.takeRightWhile=lo,Se.takeWhile=Ei,Se.tap=H0,Se.throttle=nh,Se.thru=Jh,Se.toArray=me,Se.toPairs=vd,Se.toPairsIn=Sl,Se.toPath=pt,Se.toPlainObject=ht,Se.transform=nc,Se.unary=Mc,Se.union=gr,Se.unionBy=$r,Se.unionWith=Ts,Se.uniq=_u,Se.uniqBy=Dc,Se.uniqWith=Xd,Se.unset=tu,Se.unzip=wl,Se.unzipWith=Ao,Se.update=nu,Se.updateWith=Ds,Se.values=El,Se.valuesIn=sf,Se.without=Jd,Se.words=iC,Se.wrap=up,Se.xor=Yh,Se.xorBy=Jm,Se.xorWith=Cl,Se.zip=ip,Se.zipObject=rp,Se.zipObjectDeep=el,Se.zipWith=Cg,Se.entries=vd,Se.entriesIn=Sl,Se.extend=rn,Se.extendWith=Rn,c(Se,Se),Se.add=Rt,Se.attempt=jx,Se.camelCase=gp,Se.capitalize=Ic,Se.ceil=Qt,Se.clamp=Y0,Se.clone=kv,Se.cloneDeep=Pv,Se.cloneDeepWith=Fg,Se.cloneWith=Dg,Se.conformsTo=ly,Se.deburr=af,Se.defaultTo=ob,Se.divide=wi,Se.endsWith=X0,Se.eq=za,Se.escape=J0,Se.escapeRegExp=Q0,Se.every=Qd,Se.find=Ql,Se.findIndex=gv,Se.findKey=Mn,Se.findLast=Qm,Se.findLastIndex=mv,Se.findLastKey=Nt,Se.floor=qr,Se.forEach=_v,Se.forEachRight=tc,Se.forIn=In,Se.forInRight=jn,Se.forOwn=di,Se.forOwnRight=mr,Se.get=Ws,Se.gt=K0,Se.gte=Z0,Se.has=Us,Se.hasIn=as,Se.head=Jo,Se.identity=iu,Se.includes=op,Se.indexOf=yv,Se.inRange=Ng,Se.invoke=Ga,Se.isArguments=of,Se.isArray=Ti,Se.isArrayBuffer=ks,Se.isArrayLike=gs,Se.isArrayLikeObject=es,Se.isBoolean=dp,Se.isBuffer=yd,Se.isDate=uy,Se.isElement=yr,Se.isEmpty=cy,Se.isEqual=Mg,Se.isEqualWith=Dv,Se.isError=Ig,Se.isFinite=Lg,Se.isFunction=tl,Se.isInteger=hp,Se.isLength=ih,Se.isMap=dy,Se.isMatch=Og,Se.isMatchWith=fp,Se.isNaN=Ur,Se.isNative=zg,Se.isNil=Gx,Se.isNull=$s,Se.isNumber=f,Se.isObject=To,Se.isObjectLike=ts,Se.isPlainObject=u,Se.isRegExp=g,Se.isSafeInteger=x,Se.isSet=E,Se.isString=F,Se.isSymbol=M,Se.isTypedArray=B,Se.isUndefined=H,Se.isWeakMap=Z,Se.isWeakSet=ee,Se.join=vv,Se.kebabCase=eb,Se.last=Ro,Se.lastIndexOf=kc,Se.lowerCase=tb,Se.lowerFirst=Fv,Se.lt=oe,Se.lte=de,Se.max=li,Se.maxBy=hr,Se.mean=Er,Se.meanBy=Kr,Se.min=yp,Se.minBy=lE,Se.stubArray=tn,Se.stubFalse=Dt,Se.stubObject=zt,Se.stubString=ti,Se.stubTrue=Di,Se.multiply=GV,Se.nth=xl,Se.noConflict=p,Se.noop=b,Se.now=sp,Se.pad=nb,Se.padEnd=ib,Se.padStart=hy,Se.parseInt=ic,Se.random=pp,Se.reduce=ey,Se.reduceRight=Ev,Se.repeat=fy,Se.replace=py,Se.result=no,Se.round=jV,Se.runInContext=ut,Se.sample=Rv,Se.size=Tv,Se.snakeCase=Mv,Se.some=tf,Se.sortedIndex=xg,Se.sortedIndexBy=ep,Se.sortedIndexOf=wg,Se.sortedLastIndex=Zh,Se.sortedLastIndexBy=tp,Se.sortedLastIndexOf=Xm,Se.startCase=Iv,Se.startsWith=na,Se.subtract=HV,Se.sum=VV,Se.sumBy=$V,Se.template=il,Se.times=ko,Se.toFinite=Ce,Se.toInteger=we,Se.toLength=Be,Se.toLower=Rl,Se.toNumber=He,Se.toSafeInteger=Qe,Se.toString=et,Se.toUpper=ia,Se.trim=Al,Se.trimEnd=Tl,Se.trimStart=Lv,Se.truncate=mp,Se.unescape=oE,Se.uniqueId=st,Se.upperCase=nC,Se.upperFirst=Bg,Se.each=_v,Se.eachRight=tc,Se.first=Jo,c(Se,(function(){var C={};return gi(Se,function(k,j){Cr.call(Se.prototype,j)||(C[j]=k)}),C})(),{chain:!1}),Se.VERSION=i,cs(["bind","bindKey","curry","curryRight","partial","partialRight"],function(C){Se[C].placeholder=Se}),cs(["drop","take"],function(C,k){Pi.prototype[C]=function(j){j=j===n?1:so(we(j),0);var Q=this.__filtered__&&!k?new Pi(this):this.clone();return Q.__filtered__?Q.__takeCount__=Ko(j,Q.__takeCount__):Q.__views__.push({size:Ko(j,_e),type:C+(Q.__dir__<0?"Right":"")}),Q},Pi.prototype[C+"Right"]=function(j){return this.reverse()[C](j).reverse()}}),cs(["filter","map","takeWhile"],function(C,k){var j=k+1,Q=j==Ie||j==fe;Pi.prototype[C]=function(ye){var Me=this.clone();return Me.__iteratees__.push({iteratee:vi(ye,3),type:j}),Me.__filtered__=Me.__filtered__||Q,Me}}),cs(["head","last"],function(C,k){var j="take"+(k?"Right":"");Pi.prototype[C]=function(){return this[j](1).value()[0]}}),cs(["initial","tail"],function(C,k){var j="drop"+(k?"":"Right");Pi.prototype[C]=function(){return this.__filtered__?new Pi(this):this[j](1)}}),Pi.prototype.compact=function(){return this.filter(iu)},Pi.prototype.find=function(C){return this.filter(C).head()},Pi.prototype.findLast=function(C){return this.reverse().find(C)},Pi.prototype.invokeMap=Yi(function(C,k){return typeof C=="function"?new Pi(this):this.map(function(j){return pa(j,C,k)})}),Pi.prototype.reject=function(C){return this.filter(kg(vi(C)))},Pi.prototype.slice=function(C,k){C=we(C);var j=this;return j.__filtered__&&(C>0||k<0)?new Pi(j):(C<0?j=j.takeRight(-C):C&&(j=j.drop(C)),k!==n&&(k=we(k),j=k<0?j.dropRight(-k):j.take(k-C)),j)},Pi.prototype.takeRightWhile=function(C){return this.reverse().takeWhile(C).reverse()},Pi.prototype.toArray=function(){return this.take(_e)},gi(Pi.prototype,function(C,k){var j=/^(?:filter|find|map|reject)|While$/.test(k),Q=/^(?:head|last)$/.test(k),ye=Se[Q?"take"+(k=="last"?"Right":""):k],Me=Q||/^find/.test(k);ye&&(Se.prototype[k]=function(){var qe=this.__wrapped__,ot=Q?[1]:arguments,mt=qe instanceof Pi,on=ot[0],sn=mt||Ti(qe),fn=function(Dr){var Hr=ye.apply(Se,hc([Dr],ot));return Q&&Hn?Hr[0]:Hr};sn&&j&&typeof on=="function"&&on.length!=1&&(mt=sn=!1);var Hn=this.__chain__,mi=!!this.__actions__.length,zi=Me&&!Hn,br=mt&&!mi;if(!Me&&sn){qe=br?qe:new Pi(this);var Ni=C.apply(qe,ot);return Ni.__actions__.push({func:Jh,args:[fn],thisArg:n}),new Pa(Ni,Hn)}return zi&&br?C.apply(this,ot):(Ni=this.thru(fn),zi?Q?Ni.value()[0]:Ni.value():Ni)})}),cs(["pop","push","shift","sort","splice","unshift"],function(C){var k=mc[C],j=/^(?:push|sort|unshift)$/.test(C)?"tap":"thru",Q=/^(?:pop|shift)$/.test(C);Se.prototype[C]=function(){var ye=arguments;if(Q&&!this.__chain__){var Me=this.value();return k.apply(Ti(Me)?Me:[],ye)}return this[j](function(qe){return k.apply(Ti(qe)?qe:[],ye)})}}),gi(Pi.prototype,function(C,k){var j=Se[k];if(j){var Q=j.name+"";Cr.call(tr,Q)||(tr[Q]=[]),tr[Q].push({name:k,func:j})}}),tr[$d(n,$).name]=[{name:"wrapper",func:n}],Pi.prototype.clone=vu,Pi.prototype.reverse=bu,Pi.prototype.value=xu,Se.prototype.at=_g,Se.prototype.chain=md,Se.prototype.commit=Qo,Se.prototype.next=va,Se.prototype.plant=Fc,Se.prototype.reverse=Sg,Se.prototype.toJSON=Se.prototype.valueOf=Se.prototype.value=wv,Se.prototype.first=Se.prototype.head,rs&&(Se.prototype[rs]=Jl),Se}),Bu=Df();Qs?((Qs.exports=Bu)._=Bu,$i._=Bu):nr._=Bu}).call(MZ)})(vw,vw.exports)),vw.exports}var bo=IZ(),aN={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},TI=qt.createContext&&qt.createContext(aN),LZ=["attr","size","title"];function OZ(e,t){if(e==null)return{};var n=zZ(e,t),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)i=o[r],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function zZ(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function E_(){return E_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},E_.apply(this,arguments)}function kI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function R_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kI(Object(n),!0).forEach(function(i){NZ(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kI(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function NZ(e,t,n){return t=BZ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BZ(e){var t=GZ(e,"string");return typeof t=="symbol"?t:t+""}function GZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lN(e){return e&&e.map((t,n)=>qt.createElement(t.tag,R_({key:n},t.attr),lN(t.child)))}function _i(e){return t=>qt.createElement(jZ,E_({attr:R_({},e.attr)},t),lN(e.child))}function jZ(e){var t=n=>{var{attr:i,size:r,title:o}=e,s=OZ(e,LZ),a=r||n.size||"1em",d;return n.className&&(d=n.className),e.className&&(d=(d?d+" ":"")+e.className),qt.createElement("svg",E_({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,s,{className:d,style:R_(R_({color:e.color||n.color},n.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&qt.createElement("title",null,o),e.children)};return TI!==void 0?qt.createElement(TI.Consumer,null,n=>t(n)):t(aN)}function HZ(e){return _i({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 3H4c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2zM4 19V5h7v14H4zm9 0V5h7l.001 14H13z"},child:[]},{tag:"path",attr:{d:"M15 7h3v2h-3zm0 4h3v2h-3z"},child:[]}]})(e)}function PI(e){return _i({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M14 3H5a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z"},child:[]},{tag:"path",attr:{d:"M21 19v-9a2 2 0 0 0-2-2h-1v8a2 2 0 0 1-2 2H8v1a2 2 0 0 0 2 2h9a2 2 0 0 0 2-2z"},child:[]}]})(e)}function VZ(e){return _i({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 5c-3.859 0-7 3.141-7 7s3.141 7 7 7 7-3.141 7-7-3.141-7-7-7zm0 12c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5z"},child:[]},{tag:"path",attr:{d:"M12 9c-1.627 0-3 1.373-3 3s1.373 3 3 3 3-1.373 3-3-1.373-3-3-3z"},child:[]}]})(e)}function $Z(e){return _i({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.828 10.172a.5.5 0 0 0-.707 0l-4.096 4.096V11.5a.5.5 0 0 0-1 0v3.975a.5.5 0 0 0 .5.5H4.5a.5.5 0 0 0 0-1H1.732l4.096-4.096a.5.5 0 0 0 0-.707m4.344 0a.5.5 0 0 1 .707 0l4.096 4.096V11.5a.5.5 0 1 1 1 0v3.975a.5.5 0 0 1-.5.5H11.5a.5.5 0 0 1 0-1h2.768l-4.096-4.096a.5.5 0 0 1 0-.707m0-4.344a.5.5 0 0 0 .707 0l4.096-4.096V4.5a.5.5 0 1 0 1 0V.525a.5.5 0 0 0-.5-.5H11.5a.5.5 0 0 0 0 1h2.768l-4.096 4.096a.5.5 0 0 0 0 .707m-4.344 0a.5.5 0 0 1-.707 0L1.025 1.732V4.5a.5.5 0 0 1-1 0V.525a.5.5 0 0 1 .5-.5H4.5a.5.5 0 0 1 0 1H1.732l4.096 4.096a.5.5 0 0 1 0 .707"},child:[]}]})(e)}function WZ(e){return _i({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5.5 0a.5.5 0 0 1 .5.5v4A1.5 1.5 0 0 1 4.5 6h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5m5 0a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 10 4.5v-4a.5.5 0 0 1 .5-.5M0 10.5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 6 11.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5m10 1a1.5 1.5 0 0 1 1.5-1.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0z"},child:[]}]})(e)}function UZ(e){return _i({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"},child:[]},{tag:"path",attr:{d:"m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"},child:[]}]})(e)}function qZ(e){return _i({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"},child:[]}]})(e)}function KZ(e){return _i({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11M13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0"},child:[]},{tag:"path",attr:{d:"M10.344 11.742q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1 6.5 6.5 0 0 1-1.398 1.4z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M6.5 3a.5.5 0 0 1 .5.5V6h2.5a.5.5 0 0 1 0 1H7v2.5a.5.5 0 0 1-1 0V7H3.5a.5.5 0 0 1 0-1H6V3.5a.5.5 0 0 1 .5-.5"},child:[]}]})(e)}function ZZ(e){return _i({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11M13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0"},child:[]},{tag:"path",attr:{d:"M10.344 11.742q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1 6.5 6.5 0 0 1-1.398 1.4z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M3 6.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5"},child:[]}]})(e)}function SP(e){return _i({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",strokeWidth:"2",d:"M3,3 L21,21 M3,21 L21,3"},child:[]}]})(e)}function YZ(e){return _i({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"},child:[]}]})(e)}function XZ(e){return _i({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"},child:[]}]})(e)}function JZ(e){return _i({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"},child:[]}]})(e)}function QZ(e){return _i({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"},child:[]}]})(e)}function eY(e){return _i({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z"},child:[]}]})(e)}function tY(e){return _i({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z"},child:[]}]})(e)}function uN(e){return _i({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(e)}function nY(e){return _i({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11zM8 15.01l1.41 1.41L11 14.84V19h2v-4.16l1.59 1.59L16 15.01 12.01 11z"},child:[]}]})(e)}function iY(e){return _i({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m17 16-4-4V8.82C14.16 8.4 15 7.3 15 6c0-1.66-1.34-3-3-3S9 4.34 9 6c0 1.3.84 2.4 2 2.82V12l-4 4H3v5h5v-3.05l4-4.2 4 4.2V21h5v-5h-4z"},child:[]}]})(e)}function rY(e){return _i({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"},child:[]}]})(e)}function oY(e){return _i({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"},child:[]}]})(e)}function cN(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(e)}function dN(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(e)}function sY(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(e)}function EP(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(e)}function hN(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(e)}function Gw(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(e)}function aY(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(e)}function fN(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(e)}function gT(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(e)}function lY(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},child:[]}]})(e)}function RP(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(e)}function uY(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(e)}function vx(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 2 7 12 12 22 7 12 2"},child:[]},{tag:"polyline",attr:{points:"2 17 12 22 22 17"},child:[]},{tag:"polyline",attr:{points:"2 12 12 17 22 12"},child:[]}]})(e)}function cY(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"},child:[]},{tag:"path",attr:{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"},child:[]}]})(e)}function t2(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(e)}function mT(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"18"},child:[]},{tag:"line",attr:{x1:"16",y1:"6",x2:"16",y2:"22"},child:[]}]})(e)}function dY(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(e)}function hY(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"4 14 10 14 10 20"},child:[]},{tag:"polyline",attr:{points:"20 10 14 10 14 4"},child:[]},{tag:"line",attr:{x1:"14",y1:"10",x2:"21",y2:"3"},child:[]},{tag:"line",attr:{x1:"3",y1:"21",x2:"10",y2:"14"},child:[]}]})(e)}function DI(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"5 9 2 12 5 15"},child:[]},{tag:"polyline",attr:{points:"9 5 12 2 15 5"},child:[]},{tag:"polyline",attr:{points:"15 19 12 22 9 19"},child:[]},{tag:"polyline",attr:{points:"19 9 22 12 19 15"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"22"},child:[]}]})(e)}function fY(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"3 11 22 2 13 21 11 13 3 11"},child:[]}]})(e)}function AP(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]},{tag:"path",attr:{d:"M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14"},child:[]}]})(e)}function pY(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(e)}function yT(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(e)}function gY(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(e)}function mY(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]}]})(e)}function pN(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(e)}function Sw(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(e)}function gN(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function Tp(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(e)}function TP(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"},child:[]}]})(e)}function yY(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]},{tag:"line",attr:{x1:"11",y1:"8",x2:"11",y2:"14"},child:[]},{tag:"line",attr:{x1:"8",y1:"11",x2:"14",y2:"11"},child:[]}]})(e)}function vY(e){return _i({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]},{tag:"line",attr:{x1:"8",y1:"11",x2:"14",y2:"11"},child:[]}]})(e)}function kP(e){return _i({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0 0 51.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"},child:[]},{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"},child:[]}]})(e)}function PP(e){return _i({attr:{viewBox:"0 0 1024 1024",fill:"currentColor",fillRule:"evenodd"},child:[{tag:"path",attr:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64Zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372Zm128.013 198.826c.023.007.042.018.083.059l45.02 45.019c.04.04.05.06.058.083a.118.118 0 0 1 0 .07c-.007.022-.018.041-.059.082L557.254 512l127.861 127.862a.268.268 0 0 1 .05.06l.009.023a.118.118 0 0 1 0 .07c-.007.022-.018.041-.059.082l-45.019 45.02c-.04.04-.06.05-.083.058a.118.118 0 0 1-.07 0c-.022-.007-.041-.018-.082-.059L512 557.254 384.14 685.115c-.042.041-.06.052-.084.059a.118.118 0 0 1-.07 0c-.022-.007-.041-.018-.082-.059l-45.02-45.019c-.04-.04-.05-.06-.058-.083a.118.118 0 0 1 0-.07c.007-.022.018-.041.059-.082L466.745 512l-127.86-127.86a.268.268 0 0 1-.05-.061l-.009-.023a.118.118 0 0 1 0-.07c.007-.022.018-.041.059-.082l45.019-45.02c.04-.04.06-.05.083-.058a.118.118 0 0 1 .07 0c.022.007.041.018.082.059L512 466.745l127.862-127.86c.04-.041.06-.052.083-.059a.118.118 0 0 1 .07 0Z"},child:[]}]})(e)}function bY(e){return _i({attr:{t:"1569683404098",viewBox:"0 0 1024 1024",version:"1.1"},child:[{tag:"path",attr:{d:"M482.2 508.4L331.3 389c-3-2.4-7.3-0.2-7.3 3.6V478H184V184h204v128c0 2.2 1.8 4 4 4h60c2.2 0 4-1.8 4-4V144c0-15.5-12.5-28-28-28H144c-15.5 0-28 12.5-28 28v736c0 15.5 12.5 28 28 28h284c15.5 0 28-12.5 28-28V712c0-2.2-1.8-4-4-4h-60c-2.2 0-4 1.8-4 4v128H184V546h140v85.4c0 3.8 4.4 6 7.3 3.6l150.9-119.4c2.4-1.8 2.4-5.4 0-7.2zM880 116H596c-15.5 0-28 12.5-28 28v168c0 2.2 1.8 4 4 4h60c2.2 0 4-1.8 4-4V184h204v294H700v-85.4c0-3.8-4.3-6-7.3-3.6l-151 119.4c-2.3 1.8-2.3 5.3 0 7.1l151 119.5c2.9 2.3 7.3 0.2 7.3-3.6V546h140v294H636V712c0-2.2-1.8-4-4-4h-60c-2.2 0-4 1.8-4 4v168c0 15.5 12.5 28 28 28h284c15.5 0 28-12.5 28-28V144c0-15.5-12.5-28-28-28z"},child:[]}]})(e)}const ew="#000000";function xY(e,t,n,i,r,o){e.beginPath(),e.moveTo(t+o,n),e.lineTo(t+i-o,n),e.quadraticCurveTo(t+i,n,t+i,n+o),e.lineTo(t+i,n+r-o),e.quadraticCurveTo(t+i,n+r,t+i-o,n+r),e.lineTo(t+o,n+r),e.quadraticCurveTo(t,n+r,t,n+r-o),e.lineTo(t,n+o),e.quadraticCurveTo(t,n,t+o,n),e.closePath()}function mN(e,t,n){const i=n.labelSize,r=n.labelFont,o=n.labelWeight,s=i-2,a=t.hostname||t.label,d=t.manufacture||"",h=t.model||"",m=t.region||"",v=t.port_used?`${t.port_used}/${t.port_used+t.port_idle} ports`:"",w=t.percentage_used?`${t.percentage_used.toFixed(1)}% used`:"";e.beginPath(),e.fillStyle="#fff",e.shadowOffsetX=0,e.shadowOffsetY=2,e.shadowBlur=8,e.shadowColor="#000",e.font=`${o} ${i}px ${r}`;const R=e.measureText(a).width;e.font=`${o} ${s}px ${r}`;const L=e.measureText(`${d} ${h}`).width,O=e.measureText(m).width,z=v?e.measureText(v).width:0,$=w?e.measureText(w).width:0,U=Math.max(R,L,O,z,$),Y=Math.round(t.x),X=Math.round(t.y),q=Math.round(U+i/2+t.size+3),ie=Math.round(i/2+4),re=Math.round(s/2+9),J=ie+re*4+12;xY(e,Y,X-re*3-12,q,J,5),e.closePath(),e.fill(),e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.fillStyle=ew,e.font=`${o} ${i}px ${r}`,e.fillText(a,t.x+t.size+3,t.y+i/3),d&&h&&(e.fillStyle=ew,e.font=`${o} ${s}px ${r}`,e.fillText(`${d} ${h}`,t.x+t.size+3,t.y-2*i/3-2)),m&&(e.fillStyle=t.color||ew,e.font=`${o} ${s}px ${r}`,e.fillText(m,t.x+t.size+3,t.y+i/3+3+s)),v&&(e.fillStyle=ew,e.font=`${o} ${s}px ${r}`,e.fillText(v,t.x+t.size+3,t.y+i/3+6+s*2)),w&&(e.fillStyle=ew,e.font=`${o} ${s}px ${r}`,e.fillText(w,t.x+t.size+3,t.y+i/3+9+s*3))}function yN(e,t,n){if(!t.label)return;const i=n.labelSize,r=n.labelFont,o=n.labelWeight;e.font=`${o} ${i}px ${r}`;const s=e.measureText(t.label).width+8;e.fillStyle="#ffffffcc",e.fillRect(t.x+t.size,t.y+i/3-15,s,20),e.fillStyle="#000",e.fillText(t.label,t.x+t.size+3,t.y+i/3)}const vN=({message:e,type:t,duration:n=3e3,onClose:i})=>{const[r,o]=I.useState(!0);I.useEffect(()=>{const a=setTimeout(()=>{o(!1),setTimeout(i,300)},n);return()=>clearTimeout(a)},[n,i]);const s=()=>{switch(t){case"success":return T.jsx(YZ,{});case"error":return T.jsx(JZ,{});case"warning":return T.jsx(QZ,{});case"info":return T.jsx(XZ,{})}};return T.jsxs("div",{className:`toast toast-${t} ${r?"toast-visible":"toast-hidden"}`,children:[T.jsx("span",{className:"toast-icon",children:s()}),T.jsx("span",{className:"toast-message",children:e}),T.jsx("button",{className:"toast-close",onClick:()=>{o(!1),setTimeout(i,300)},children:""})]})};function wY(e){return["hostname","no_name","id","name","latitude","longitude","lat","lon","lng"].some(n=>e[n]!==void 0&&e[n]!==null&&e[n]!=="\\N")}function CY(e){const n=["source","target","ruas","nbr","layer","traffic_in","traffic_out"].some(r=>e[r]!==void 0&&e[r]!==null&&e[r]!=="\\N"),i=!!(e.ruas||e.source&&e.target||e.nbr);return n&&i}function _Y(e,t){const n=e.hostname||e.no_name||e.id||e.name||e.label||`Node-${t}`;if(!n||n==="\\N")return null;const i=e.manufacture||e.manufacturer||"Unknown",r=e.model||"Unknown",o=e.region||e.layer||"Unknown",s=e.latitude||e.lat||void 0,a=e.longitude||e.lon||e.lng||void 0,d=e.slot||void 0,h=e.port_used||void 0,m=e.port_idle||void 0,v=e.percentage_used||(h&&d?h/d*100:void 0),w={hostname:String(n),manufacture:String(i),model:String(r),region:String(o)};return d!==void 0&&(w.slot=Number(d)),h!==void 0&&(w.port_used=Number(h)),m!==void 0&&(w.port_idle=Number(m)),v!==void 0&&(w.percentage_used=Number(v)),s!==void 0&&String(s)!=="\\N"&&(w.latitude=Number(s)),a!==void 0&&String(a)!=="\\N"&&(w.longitude=Number(a)),Object.keys(e).forEach(R=>{["hostname","no_name","id","name","manufacture","manufacturer","model","region","latitude","lat","longitude","lon","lng","slot","port_used","port_idle","percentage_used"].includes(R)||(w[R]=e[R])}),w}function SY(e,t){let n,i;if(e.source&&e.target?(n=String(e.source),i=String(e.target)):e.ruas&&e.nbr?(n=e.no_name?String(e.no_name):String(e.ruas).split("_to_")[0],i=String(e.nbr)):e.no_name&&e.nbr&&(n=String(e.no_name),i=String(e.nbr)),!n||!i||n==="\\N"||i==="\\N"||!(t.has(n)||t.has(i))&&t.size>0)return null;const o={source:n,target:i};return e.layer&&(o.layer=String(e.layer)),e.label&&(o.label=String(e.label)),e.size!==void 0&&(o.size=Number(e.size)),e.color&&(o.color=String(e.color)),e.traffic_in!==void 0&&String(e.traffic_in)!=="\\N"&&(o.traffic_in=Number(e.traffic_in)),e.traffic_out!==void 0&&String(e.traffic_out)!=="\\N"&&(o.traffic_out=Number(e.traffic_out)),Object.keys(e).forEach(s=>{["source","target","ruas","nbr","no_name","layer","label","size","color","traffic_in","traffic_out"].includes(s)||(o[s]=e[s])}),o}function FI(e){if(e&&typeof e=="object"&&Array.isArray(e.nodes))return{nodes:e.nodes,edges:e.edges||[]};const t=[],n=[];let i=[];if(Array.isArray(e))i=e;else if(typeof e=="object"&&e!==null)i=[e];else throw new Error("Invalid data format: expected object or array");i.forEach((o,s)=>{if(!(typeof o!="object"||o===null)&&wY(o)){const a=_Y(o,s);a&&t.push(a)}});const r=new Set(t.map(o=>o.hostname));return i.forEach(o=>{if(!(typeof o!="object"||o===null)&&CY(o)){const s=SY(o,r);s&&n.push(s)}}),t.length===0&&i.length>0&&i.forEach((o,s)=>{if(typeof o=="object"&&o!==null){const a=o.id||o.name||o.label||o.hostname||`Node-${s}`;a&&a!=="\\N"&&t.push({hostname:String(a),manufacture:o.manufacture||o.manufacturer||"Unknown",model:o.model||"Unknown",region:o.region||o.layer||o.location||"Unknown",...o})}}),{nodes:t,edges:n}}function MI(e){const t=[];return(!e.nodes||e.nodes.length===0)&&t.push("No valid nodes found in the data"),e.nodes&&e.nodes.forEach((n,i)=>{n.hostname||t.push(`Node at index ${i} is missing hostname`),n.manufacture||t.push(`Node "${n.hostname||i}" is missing manufacture`),n.model||t.push(`Node "${n.hostname||i}" is missing model`),n.region||t.push(`Node "${n.hostname||i}" is missing region`)}),e.edges&&e.edges.forEach((n,i)=>{n.source||t.push(`Edge at index ${i} is missing source`),n.target||t.push(`Edge at index ${i} is missing target`)}),{valid:t.length===0,errors:t}}const EY=({isOpen:e,onClose:t,onSubmit:n,onNotify:i})=>{const[r,o]=I.useState(""),[s,a]=I.useState(""),[d,h]=I.useState(""),m=I.useRef(null);if(!e)return null;const v=O=>{var U;const z=(U=O.target.files)==null?void 0:U[0];if(!z)return;h(z.name),a("");const $=new FileReader;$.onload=Y=>{var q,ie;const X=(q=Y.target)==null?void 0:q.result;try{const re=JSON.parse(X),J=FI(re),ne=MI(J);ne.valid||a(`Data validation warnings:
${ne.errors.slice(0,3).join(`
`)}`),o(JSON.stringify(J,null,2)),i&&i(`File "${z.name}" berhasil dimuat dan diformat: ${J.nodes.length} nodes, ${((ie=J.edges)==null?void 0:ie.length)||0} edges`,ne.valid?"success":"warning")}catch(re){const J=re instanceof Error?re.message:String(re);a(`Failed to parse file: ${J}`),i&&i(`Gagal membaca file: ${J}`,"error")}},$.onerror=()=>{a("Failed to read file"),i&&i("Gagal membaca file","error")},$.readAsText(z)},w=()=>{var O;a("");try{const z=JSON.parse(r),$=FI(z),U=MI($);if(!U.valid&&$.nodes.length===0){a(`Invalid format: No valid nodes found
`+U.errors.slice(0,3).join(`
`));return}n($),o(""),a(""),h(""),t(),i&&i(`Data berhasil ditambahkan: ${$.nodes.length} nodes, ${((O=$.edges)==null?void 0:O.length)||0} edges`,"success")}catch(z){a("Invalid JSON format: "+(z instanceof Error?z.message:String(z)))}},R={nodes:[{hostname:"SW-Example-01",manufacture:"Cisco",model:"Nexus9000",region:"Jakarta",slot:48,port_used:32,port_idle:16,percentage_used:66.67,latitude:-6.2088,longitude:106.8456}],edges:[{source:"SW-Example-01",target:"SW-JAK-CORE-01"}]},L=()=>{o(JSON.stringify(R,null,2)),a("")};return T.jsx("div",{className:"modal-overlay",onClick:t,children:T.jsxs("div",{className:"modal-content",onClick:O=>O.stopPropagation(),children:[T.jsxs("div",{className:"modal-header",children:[T.jsxs("h2",{children:[T.jsx(uN,{})," Add Graph Data"]}),T.jsx("button",{type:"button",className:"modal-close",onClick:t,title:"Close",children:T.jsx(SP,{})})]}),T.jsxs("div",{className:"modal-body",children:[T.jsx("p",{className:"modal-description",children:"Upload file JSON atau masukkan data secara manual. Sistem akan otomatis mendeteksi dan mengkonversi berbagai format data (nodes/edges, network topology, traffic data, dll) ke format yang sesuai untuk visualisasi."}),T.jsxs("div",{className:"upload-section",children:[T.jsx("input",{ref:m,type:"file",accept:".json",onChange:v,style:{display:"none"},id:"json-file-upload"}),T.jsxs("label",{htmlFor:"json-file-upload",className:"button-upload",children:[T.jsx(nY,{})," Upload JSON File"]}),d&&T.jsxs("span",{className:"uploaded-file-name",children:[" ",d]})]}),T.jsx("div",{className:"divider",children:T.jsx("span",{children:"atau"})}),T.jsx("button",{type:"button",className:"button-secondary",onClick:L,children:"Fill Example Data"}),T.jsx("textarea",{className:"json-input",value:r,onChange:O=>o(O.target.value),placeholder:'{"nodes": [...], "edges": [...]} atau format data lainnya',rows:15}),s&&T.jsx("div",{className:"error-message",children:s})]}),T.jsxs("div",{className:"modal-footer",children:[T.jsx("button",{type:"button",className:"button-secondary",onClick:t,children:"Cancel"}),T.jsx("button",{type:"button",className:"button-primary",onClick:w,children:"Add Data"})]})]})})};function RY(e){const t=parseFloat(e);return!isNaN(t)&&isFinite(t)}function II(e){return typeof e=="string"&&e[e.length-1]==="%"&&RY(e.substring(0,e.length-1))}function NE(e,t,n){t===0&&!n&&(e!=null&&e.style)&&(e==null?void 0:e.children.length)>0&&(e.style.display="none")}function AY(e,t){t===0&&(e!=null&&e.style)&&(e.style.display="")}const TY={animating:"rah-animating",animatingUp:"rah-animating--up",animatingDown:"rah-animating--down",animatingToHeightZero:"rah-animating--to-height-zero",animatingToHeightAuto:"rah-animating--to-height-auto",animatingToHeightSpecific:"rah-animating--to-height-specific",static:"rah-static",staticHeightZero:"rah-static--height-zero",staticHeightAuto:"rah-static--height-auto",staticHeightSpecific:"rah-static--height-specific"};function LI(e,t){return[e.static,t===0&&e.staticHeightZero,typeof t=="number"&&t>0?e.staticHeightSpecific:null,t==="auto"&&e.staticHeightAuto].filter(n=>n).join(" ")}const kY=["animateOpacity","animationStateClasses","applyInlineTransitions","children","className","contentClassName","contentRef","delay","duration","easing","height","onHeightAnimationEnd","onHeightAnimationStart","style","disableDisplayNone"],PY=qt.forwardRef((e,t)=>{const{animateOpacity:n=!1,animationStateClasses:i={},applyInlineTransitions:r=!0,children:o,className:s="",contentClassName:a,delay:d=0,disableDisplayNone:h=!1,duration:m=500,easing:v="ease",height:w,onHeightAnimationEnd:R,onHeightAnimationStart:L,style:O,contentRef:z}=e,$=Object.assign({},e);kY.forEach(xt=>{delete $[xt]});const U=I.useRef(w),Y=I.useRef(null),X=I.useRef(),q=I.useRef(),ie=I.useRef(Object.assign(Object.assign({},TY),i)),re=typeof window<"u",J=I.useRef(re&&window.matchMedia?window.matchMedia("(prefers-reduced-motion)").matches:!1),ne=J.current?0:d,be=J.current?0:m;let ue=w,ve="visible";typeof w=="number"?(ue=w<0?0:w,ve="hidden"):II(ue)&&(ue=w==="0%"?0:w,ve="hidden");const[ce,Ie]=I.useState(ue),[Te,fe]=I.useState(ve),[he,Re]=I.useState(!1),[De,Ye]=I.useState(LI(ie.current,w));I.useEffect(()=>{NE(Y.current,ce,h)},[]),I.useEffect(()=>{if(w!==U.current&&Y.current){AY(Y.current,U.current),Y.current.style.overflow="hidden";const xt=Y.current.offsetHeight;Y.current.style.overflow="";const Vt=be+ne;let Xt,en,it="hidden",Lt;const St=U.current==="auto";typeof w=="number"?(Xt=w<0?0:w,en=Xt):II(w)?(Xt=w==="0%"?0:w,en=Xt):(Xt=xt,en="auto",it=void 0),St&&(en=Xt,Xt=xt);const lt=[ie.current.animating,(U.current==="auto"||w<U.current)&&ie.current.animatingUp,(w==="auto"||w>U.current)&&ie.current.animatingDown,en===0&&ie.current.animatingToHeightZero,en==="auto"&&ie.current.animatingToHeightAuto,typeof en=="number"&&en>0?ie.current.animatingToHeightSpecific:null].filter(Mt=>Mt).join(" "),Tn=LI(ie.current,en);Ie(Xt),fe("hidden"),Re(!St),Ye(lt),clearTimeout(q.current),clearTimeout(X.current),St?(Lt=!0,q.current=setTimeout(()=>{Ie(en),fe(it),Re(Lt),L==null||L(en)},50),X.current=setTimeout(()=>{Re(!1),Ye(Tn),NE(Y.current,en,h),R==null||R(en)},Vt)):(L==null||L(Xt),q.current=setTimeout(()=>{Ie(en),fe(it),Re(!1),Ye(Tn),w!=="auto"&&NE(Y.current,Xt,h),R==null||R(Xt)},Vt))}return U.current=w,()=>{clearTimeout(q.current),clearTimeout(X.current)}},[w]);const _e=Object.assign(Object.assign({},O),{height:ce,overflow:Te||(O==null?void 0:O.overflow)});he&&r&&(_e.transition=`height ${be}ms ${v} ${ne}ms`,O!=null&&O.transition&&(_e.transition=`${O.transition}, ${_e.transition}`),_e.WebkitTransition=_e.transition);const Le={};n&&(Le.transition=`opacity ${be}ms ${v} ${ne}ms`,Le.WebkitTransition=Le.transition,ce===0&&(Le.opacity=0));const yt=typeof $["aria-hidden"]<"u"?$["aria-hidden"]:w===0;return qt.createElement("div",Object.assign({},$,{"aria-hidden":yt,className:`${De} ${s}`,style:_e,ref:t}),qt.createElement("div",{className:a,style:Le,ref:xt=>{Y.current=xt,z&&(z.current=xt)}},o))}),OI=300,n2=({title:e,initiallyDeployed:t,children:n})=>{const[i,r]=I.useState(t||!1),o=I.useRef(null);return I.useEffect(()=>{i&&setTimeout(()=>{var s;o.current&&((s=o.current.parentElement)==null||s.scrollTo({top:o.current.offsetTop-5,behavior:"smooth"}))},OI)},[i]),T.jsxs("div",{className:"panel",ref:o,children:[T.jsxs("h2",{children:[e," ",T.jsx("button",{type:"button",onClick:()=>r(s=>!s),children:i?T.jsx(rY,{}):T.jsx(oY,{})})]}),T.jsx(PY,{duration:OI,height:i?"auto":0,children:n})]})},DY=()=>T.jsxs(n2,{initiallyDeployed:!0,title:T.jsxs(T.Fragment,{children:[T.jsx(UZ,{className:"text-muted"})," Description"]}),children:[T.jsxs("p",{children:["This map represents a ",T.jsx("i",{children:"network"})," of infrastructure switches across multiple regions in Indonesia. Each"," ",T.jsx("i",{children:"node"})," represents a network switch, and connections show the network topology between switches."]}),T.jsx("p",{children:"The switches are from various manufacturers including Cisco, Huawei, Arista, Juniper, and MikroTik. Each switch has detailed information including the model, region, port utilization, and geographic coordinates."}),T.jsx("p",{children:"Node sizes represent port utilization percentage - larger nodes indicate switches with higher port usage. Colors represent different manufacturers, making it easy to identify equipment distribution across the network."}),T.jsx("p",{children:"You can hover over any switch to see detailed information including hostname, manufacturer, model, region, port usage statistics, and utilization percentage. Use the search functionality to quickly locate specific switches."})]}),FY=({filters:e,children:t})=>{const i=Vp().getGraph();return I.useEffect(()=>{const{manufactures:r,regions:o,models:s}=e;i.forEachNode((a,d)=>{const h=r[d.manufacture]&&o[d.region]&&s[d.model];i.setNodeAttribute(a,"hidden",!h)}),i.forEachEdge((a,d,h,m)=>{const v=i.getNodeAttribute(h,"hidden"),w=i.getNodeAttribute(m,"hidden");i.setEdgeAttribute(a,"hidden",v||w)})},[i,e]),T.jsx(T.Fragment,{children:t})};function zI(){return document.querySelector(".sigma-mouse")}const MY=({setHoveredNode:e,children:t})=>{const i=Vp().getGraph(),r=oK();return I.useEffect(()=>{r({clickNode({node:o}){i.getNodeAttribute(o,"hidden")||window.open(i.getNodeAttribute(o,"URL"),"_blank")},enterNode({node:o}){e(o);const s=zI();s&&s.classList.add("mouse-pointer")},leaveNode(){e(null);const o=zI();o&&o.classList.remove("mouse-pointer")}})},[]),T.jsx(T.Fragment,{children:t})};function IY(e,t){const[n,i]=I.useState(e);return I.useEffect(()=>{const r=setTimeout(()=>{e!==n&&i(e)},t);return()=>{clearTimeout(r)}},[e,t]),n}const NI="#bbb",BI="#eee",LY=({children:e,hoveredNode:t})=>{const n=Vp(),i=Wz(),r=n.getGraph(),o=IY(t,40);return I.useEffect(()=>{var a;const s=o&&((a=n.getNodeDisplayData(o))==null?void 0:a.color)||"";i({defaultDrawNodeLabel:yN,defaultDrawNodeHover:mN,nodeReducer:(d,h)=>o?d===o||r.hasEdge(d,o)||r.hasEdge(o,d)?{...h,zIndex:1}:{...h,zIndex:0,label:"",color:NI,image:null,highlighted:!1}:h,edgeReducer:(d,h)=>o?r.hasExtremity(d,o)?{...h,color:s,size:4}:{...h,color:BI,hidden:!0}:h})},[n,r,o]),I.useEffect(()=>{var a;const s=o&&((a=n.getNodeDisplayData(o))==null?void 0:a.color)||"";n.setSetting("nodeReducer",o?(d,h)=>d===o||r.hasEdge(d,o)||r.hasEdge(o,d)?{...h,zIndex:1}:{...h,zIndex:0,label:"",color:NI,image:null,highlighted:!1}:null),n.setSetting("edgeReducer",o?(d,h)=>r.hasExtremity(d,o)?{...h,color:s,size:4}:{...h,color:BI,hidden:!0}:null)},[o]),T.jsx(T.Fragment,{children:e})};function GI(e){return(e*100).toFixed(1)+"%"}const OY=({filters:e})=>{const n=Vp().getGraph(),[i,r]=I.useState({nodes:0,edges:0});return I.useEffect(()=>{requestAnimationFrame(()=>{const o={nodes:0,edges:0};n.forEachNode((s,{hidden:a})=>!a&&o.nodes++),n.forEachEdge((s,a,d,h,m,v)=>!m.hidden&&!v.hidden&&o.edges++),r(o)})},[e]),T.jsxs("div",{className:"graph-title",children:[T.jsx("h1",{children:"Network Infrastructure Switch Monitoring"}),T.jsx("h2",{children:T.jsxs("i",{children:[n.order," switch",n.order>1?"es":""," ",i.nodes!==n.order?` (only ${GI(i.nodes/n.order)} visible)`:"",", ",n.size," connection",n.size>1?"s":""," ",i.edges!==n.size?` (only ${GI(i.edges/n.size)} visible)`:""]})})]})},zY={Cisco:"#1ba1e2",Huawei:"#e51400",Arista:"#60a917",Juniper:"#f09609",MikroTik:"#d80073"},NY=({manufacturers:e,filters:t,toggleManufacturer:n,setManufacturers:i})=>{const o=Vp().getGraph(),s=I.useMemo(()=>{const w={};return o.forEachNode((R,{manufacture:L})=>w[L]=(w[L]||0)+1),w},[o]),a=I.useMemo(()=>Math.max(...bo.values(s)),[s]),d=I.useMemo(()=>Object.keys(t.manufactures).length,[t]),[h,m]=I.useState(s);I.useEffect(()=>{requestAnimationFrame(()=>{const w={};o.forEachNode((R,{manufacture:L,hidden:O})=>!O&&(w[L]=(w[L]||0)+1)),m(w)})},[t,o]);const v=I.useMemo(()=>bo.sortBy(e,w=>-s[w]),[e,s]);return T.jsxs(n2,{title:T.jsxs(T.Fragment,{children:[T.jsx(eY,{className:"text-muted"})," Manufacturers",d<e.length?T.jsxs("span",{className:"text-muted text-small",children:[" ","(",d," / ",e.length,")"]}):""]}),children:[T.jsx("p",{children:T.jsx("i",{className:"text-muted",children:"Click a manufacturer to show/hide related switches from the network."})}),T.jsxs("p",{className:"buttons",children:[T.jsxs("button",{className:"btn",onClick:()=>i(bo.mapValues(bo.keyBy(e,w=>w),()=>!0)),children:[T.jsx(kP,{})," Check all"]})," ",T.jsxs("button",{className:"btn",onClick:()=>i({}),children:[T.jsx(PP,{})," Uncheck all"]})]}),T.jsx("ul",{children:v.map(w=>{const R=s[w],L=h[w]||0,O=zY[w]||"#666666";return T.jsxs("li",{className:"caption-row",title:`${R} switch${R>1?"es":""}${L!==R?L>0?` (only ${L>1?`${L} are`:"one is"} visible)`:" (all hidden)":""}`,children:[T.jsx("input",{type:"checkbox",checked:t.manufactures[w]||!1,onChange:()=>n(w),id:`manufacturer-${w}`}),T.jsxs("label",{htmlFor:`manufacturer-${w}`,children:[T.jsx("span",{className:"circle",style:{background:O,borderColor:O}})," ",T.jsxs("div",{className:"node-label",children:[T.jsx("span",{children:w}),T.jsx("div",{className:"bar",style:{width:100*R/a+"%"},children:T.jsx("div",{className:"inside-bar",style:{width:100*L/R+"%"}})})]})]})]},w)})})]})},BY={"7050X3":"#FF7F50",S5720:"#87CEEB",MX480:"#DDA0DD",CCR1036:"#98FB98",Nexus9000:"#F0E68C"},GY=({models:e,filters:t,toggleModel:n,setModels:i})=>{const o=Vp().getGraph(),s=I.useMemo(()=>{const w={};return o.forEachNode((R,{model:L})=>w[L]=(w[L]||0)+1),w},[o]),a=I.useMemo(()=>Math.max(...bo.values(s)),[s]),d=I.useMemo(()=>Object.keys(t.models).length,[t]),[h,m]=I.useState(s);I.useEffect(()=>{requestAnimationFrame(()=>{const w={};o.forEachNode((R,{model:L,hidden:O})=>!O&&(w[L]=(w[L]||0)+1)),m(w)})},[t,o]);const v=I.useMemo(()=>bo.sortBy(e,w=>-s[w]),[e,s]);return T.jsxs(n2,{title:T.jsxs(T.Fragment,{children:[T.jsx(iY,{className:"text-muted"})," Models",d<e.length?T.jsxs("span",{className:"text-muted text-small",children:[" ","(",d," / ",e.length,")"]}):""]}),children:[T.jsx("p",{children:T.jsx("i",{className:"text-muted",children:"Click a model to show/hide related switches from the network."})}),T.jsxs("p",{className:"buttons",children:[T.jsxs("button",{className:"btn",onClick:()=>i(bo.mapValues(bo.keyBy(e,w=>w),()=>!0)),children:[T.jsx(kP,{})," Check all"]})," ",T.jsxs("button",{className:"btn",onClick:()=>i({}),children:[T.jsx(PP,{})," Uncheck all"]})]}),T.jsx("ul",{children:v.map(w=>{const R=s[w],L=h[w]||0,O=BY[w]||"#999999";return T.jsxs("li",{className:"caption-row",title:`${R} switch${R>1?"es":""} with model ${w}${L!==R?L>0?` (only ${L>1?`${L} are`:"one is"} visible)`:" (all hidden)":""}`,children:[T.jsx("input",{type:"checkbox",checked:t.models[w]||!1,onChange:()=>n(w),id:`model-${w}`}),T.jsxs("label",{htmlFor:`model-${w}`,children:[T.jsx("span",{className:"circle",style:{background:O,borderColor:O}})," ",T.jsxs("div",{className:"node-label",children:[T.jsx("span",{children:w}),T.jsx("div",{className:"bar",style:{width:100*R/a+"%"},children:T.jsx("div",{className:"inside-bar",style:{width:100*L/R+"%"}})})]})]})]},w)})})]})},jY={Jakarta:"#FF6B6B",Yogyakarta:"#4ECDC4",Medan:"#45B7D1",Bandung:"#96CEB4",Surabaya:"#FFEAA7",Makassar:"#DDA0DD",Denpasar:"#98D8C8",Balikpapan:"#F7DC6F"},HY=({regions:e,filters:t,toggleRegion:n,setRegions:i})=>{const o=Vp().getGraph(),s=I.useMemo(()=>{const w={};return o.forEachNode((R,{region:L})=>w[L]=(w[L]||0)+1),w},[o]),a=I.useMemo(()=>Math.max(...bo.values(s)),[s]),d=I.useMemo(()=>Object.keys(t.regions).length,[t]),[h,m]=I.useState(s);I.useEffect(()=>{requestAnimationFrame(()=>{const w={};o.forEachNode((R,{region:L,hidden:O})=>!O&&(w[L]=(w[L]||0)+1)),m(w)})},[t,o]);const v=I.useMemo(()=>bo.sortBy(e,w=>-s[w]),[e,s]);return T.jsxs(n2,{title:T.jsxs(T.Fragment,{children:[T.jsx(tY,{className:"text-muted"})," Regions",d<e.length?T.jsxs("span",{className:"text-muted text-small",children:[" ","(",d," / ",e.length,")"]}):""]}),children:[T.jsx("p",{children:T.jsx("i",{className:"text-muted",children:"Click a region to show/hide related switches from the network."})}),T.jsxs("p",{className:"buttons",children:[T.jsxs("button",{className:"btn",onClick:()=>i(bo.mapValues(bo.keyBy(e,w=>w),()=>!0)),children:[T.jsx(kP,{})," Check all"]})," ",T.jsxs("button",{className:"btn",onClick:()=>i({}),children:[T.jsx(PP,{})," Uncheck all"]})]}),T.jsx("ul",{children:v.map(w=>{const R=s[w],L=h[w]||0,O=jY[w]||"#888888";return T.jsxs("li",{className:"caption-row",title:`${R} switch${R>1?"es":""} in ${w}${L!==R?L>0?` (only ${L>1?`${L} are`:"one is"} visible)`:" (all hidden)":""}`,children:[T.jsx("input",{type:"checkbox",checked:t.regions[w]||!1,onChange:()=>n(w),id:`region-${w}`}),T.jsxs("label",{htmlFor:`region-${w}`,children:[T.jsx("span",{className:"circle",style:{background:O,borderColor:O}})," ",T.jsxs("div",{className:"node-label",children:[T.jsx("span",{children:w}),T.jsx("div",{className:"bar",style:{width:100*R/a+"%"},children:T.jsx("div",{className:"inside-bar",style:{width:100*L/R+"%"}})})]})]})]},w)})})]})},VY=({filters:e})=>{const t=Vp(),[n,i]=I.useState(""),[r,o]=I.useState([]),[s,a]=I.useState(null),d=()=>{const v=[],w=n.toLowerCase();!s&&n.length>1&&t.getGraph().forEachNode((R,L)=>{!L.hidden&&L.label&&L.label.toLowerCase().indexOf(w)===0&&v.push({id:R,label:L.label})}),o(v)};I.useEffect(()=>d(),[n]),I.useEffect(()=>{requestAnimationFrame(d)},[e]),I.useEffect(()=>{if(!s)return;t.getGraph().setNodeAttribute(s,"highlighted",!0);const v=t.getNodeDisplayData(s);return v&&t.getCamera().animate({...v,ratio:.05},{duration:600}),()=>{t.getGraph().setNodeAttribute(s,"highlighted",!1)}},[s]);const h=v=>{const w=v.target.value,R=r.find(L=>L.label===w);R?(i(R.label),o([]),a(R.id)):(a(null),i(w))},m=v=>{v.key==="Enter"&&r.length&&(i(r[0].label),a(r[0].id))};return T.jsxs("div",{className:"search-wrapper",children:[T.jsx("input",{type:"search",placeholder:"Search in nodes...",list:"nodes",value:n,onChange:h,onKeyPress:m}),T.jsx(qZ,{className:"icon"}),T.jsx("datalist",{id:"nodes",children:r.map(v=>T.jsx("option",{value:v.label,children:v.label},v.id))})]})};var ZC={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var $Y=ZC.exports,jI;function WY(){return jI||(jI=1,(function(e,t){((n,i)=>{e.exports=i()})($Y,function n(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},r,o=!i.document&&!!i.postMessage,s=i.IS_PAPA_WORKER||!1,a={},d=0,h={};function m(J){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(ne){var be=q(ne);be.chunkSize=parseInt(be.chunkSize),ne.step||ne.chunk||(be.chunkSize=null),this._handle=new O(be),(this._handle.streamer=this)._config=be}).call(this,J),this.parseChunk=function(ne,be){var ue=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<ue){let ce=this._config.newline;ce||(ve=this._config.quoteChar||'"',ce=this._handle.guessLineEndings(ne,ve)),ne=[...ne.split(ce).slice(ue)].join(ce)}this.isFirstChunk&&re(this._config.beforeFirstChunk)&&(ve=this._config.beforeFirstChunk(ne))!==void 0&&(ne=ve),this.isFirstChunk=!1,this._halted=!1;var ue=this._partialLine+ne,ve=(this._partialLine="",this._handle.parse(ue,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(ne=ve.meta.cursor,ue=(this._finished||(this._partialLine=ue.substring(ne-this._baseIndex),this._baseIndex=ne),ve&&ve.data&&(this._rowCount+=ve.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),s)i.postMessage({results:ve,workerId:h.WORKER_ID,finished:ue});else if(re(this._config.chunk)&&!be){if(this._config.chunk(ve,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=ve=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(ve.data),this._completeResults.errors=this._completeResults.errors.concat(ve.errors),this._completeResults.meta=ve.meta),this._completed||!ue||!re(this._config.complete)||ve&&ve.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),ue||ve&&ve.meta.paused||this._nextChunk(),ve}this._halted=!0},this._sendError=function(ne){re(this._config.error)?this._config.error(ne):s&&this._config.error&&i.postMessage({workerId:h.WORKER_ID,error:ne,finished:!1})}}function v(J){var ne;(J=J||{}).chunkSize||(J.chunkSize=h.RemoteChunkSize),m.call(this,J),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(be){this._input=be,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(ne=new XMLHttpRequest,this._config.withCredentials&&(ne.withCredentials=this._config.withCredentials),o||(ne.onload=ie(this._chunkLoaded,this),ne.onerror=ie(this._chunkError,this)),ne.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var be,ue=this._config.downloadRequestHeaders;for(be in ue)ne.setRequestHeader(be,ue[be])}var ve;this._config.chunkSize&&(ve=this._start+this._config.chunkSize-1,ne.setRequestHeader("Range","bytes="+this._start+"-"+ve));try{ne.send(this._config.downloadRequestBody)}catch(ce){this._chunkError(ce.message)}o&&ne.status===0&&this._chunkError()}},this._chunkLoaded=function(){ne.readyState===4&&(ne.status<200||400<=ne.status?this._chunkError():(this._start+=this._config.chunkSize||ne.responseText.length,this._finished=!this._config.chunkSize||this._start>=(be=>(be=be.getResponseHeader("Content-Range"))!==null?parseInt(be.substring(be.lastIndexOf("/")+1)):-1)(ne),this.parseChunk(ne.responseText)))},this._chunkError=function(be){be=ne.statusText||be,this._sendError(new Error(be))}}function w(J){(J=J||{}).chunkSize||(J.chunkSize=h.LocalChunkSize),m.call(this,J);var ne,be,ue=typeof FileReader<"u";this.stream=function(ve){this._input=ve,be=ve.slice||ve.webkitSlice||ve.mozSlice,ue?((ne=new FileReader).onload=ie(this._chunkLoaded,this),ne.onerror=ie(this._chunkError,this)):ne=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var ve=this._input,ce=(this._config.chunkSize&&(ce=Math.min(this._start+this._config.chunkSize,this._input.size),ve=be.call(ve,this._start,ce)),ne.readAsText(ve,this._config.encoding));ue||this._chunkLoaded({target:{result:ce}})},this._chunkLoaded=function(ve){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(ve.target.result)},this._chunkError=function(){this._sendError(ne.error)}}function R(J){var ne;m.call(this,J=J||{}),this.stream=function(be){return ne=be,this._nextChunk()},this._nextChunk=function(){var be,ue;if(!this._finished)return be=this._config.chunkSize,ne=be?(ue=ne.substring(0,be),ne.substring(be)):(ue=ne,""),this._finished=!ne,this.parseChunk(ue)}}function L(J){m.call(this,J=J||{});var ne=[],be=!0,ue=!1;this.pause=function(){m.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){m.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(ve){this._input=ve,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){ue&&ne.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),ne.length?this.parseChunk(ne.shift()):be=!0},this._streamData=ie(function(ve){try{ne.push(typeof ve=="string"?ve:ve.toString(this._config.encoding)),be&&(be=!1,this._checkIsFinished(),this.parseChunk(ne.shift()))}catch(ce){this._streamError(ce)}},this),this._streamError=ie(function(ve){this._streamCleanUp(),this._sendError(ve)},this),this._streamEnd=ie(function(){this._streamCleanUp(),ue=!0,this._streamData("")},this),this._streamCleanUp=ie(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function O(J){var ne,be,ue,ve,ce=Math.pow(2,53),Ie=-ce,Te=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,fe=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,he=this,Re=0,De=0,Ye=!1,_e=!1,Le=[],Oe={data:[],errors:[],meta:{}};function yt(en){return J.skipEmptyLines==="greedy"?en.join("").trim()==="":en.length===1&&en[0].length===0}function xt(){if(Oe&&ue&&(Xt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+h.DefaultDelimiter+"'"),ue=!1),J.skipEmptyLines&&(Oe.data=Oe.data.filter(function(lt){return!yt(lt)})),Vt()){let lt=function(Tn,Mt){re(J.transformHeader)&&(Tn=J.transformHeader(Tn,Mt)),Le.push(Tn)};var St=lt;if(Oe)if(Array.isArray(Oe.data[0])){for(var en=0;Vt()&&en<Oe.data.length;en++)Oe.data[en].forEach(lt);Oe.data.splice(0,1)}else Oe.data.forEach(lt)}function it(lt,Tn){for(var Mt=J.header?{}:[],$t=0;$t<lt.length;$t++){var Pe=$t,yn=lt[$t],yn=((wn,dn)=>(An=>(J.dynamicTypingFunction&&J.dynamicTyping[An]===void 0&&(J.dynamicTyping[An]=J.dynamicTypingFunction(An)),(J.dynamicTyping[An]||J.dynamicTyping)===!0))(wn)?dn==="true"||dn==="TRUE"||dn!=="false"&&dn!=="FALSE"&&((An=>{if(Te.test(An)&&(An=parseFloat(An),Ie<An&&An<ce))return 1})(dn)?parseFloat(dn):fe.test(dn)?new Date(dn):dn===""?null:dn):dn)(Pe=J.header?$t>=Le.length?"__parsed_extra":Le[$t]:Pe,yn=J.transform?J.transform(yn,Pe):yn);Pe==="__parsed_extra"?(Mt[Pe]=Mt[Pe]||[],Mt[Pe].push(yn)):Mt[Pe]=yn}return J.header&&($t>Le.length?Xt("FieldMismatch","TooManyFields","Too many fields: expected "+Le.length+" fields but parsed "+$t,De+Tn):$t<Le.length&&Xt("FieldMismatch","TooFewFields","Too few fields: expected "+Le.length+" fields but parsed "+$t,De+Tn)),Mt}var Lt;Oe&&(J.header||J.dynamicTyping||J.transform)&&(Lt=1,!Oe.data.length||Array.isArray(Oe.data[0])?(Oe.data=Oe.data.map(it),Lt=Oe.data.length):Oe.data=it(Oe.data,0),J.header&&Oe.meta&&(Oe.meta.fields=Le),De+=Lt)}function Vt(){return J.header&&Le.length===0}function Xt(en,it,Lt,St){en={type:en,code:it,message:Lt},St!==void 0&&(en.row=St),Oe.errors.push(en)}re(J.step)&&(ve=J.step,J.step=function(en){Oe=en,Vt()?xt():(xt(),Oe.data.length!==0&&(Re+=en.data.length,J.preview&&Re>J.preview?be.abort():(Oe.data=Oe.data[0],ve(Oe,he))))}),this.parse=function(en,it,Lt){var St=J.quoteChar||'"',St=(J.newline||(J.newline=this.guessLineEndings(en,St)),ue=!1,J.delimiter?re(J.delimiter)&&(J.delimiter=J.delimiter(en),Oe.meta.delimiter=J.delimiter):((St=((lt,Tn,Mt,$t,Pe)=>{var yn,wn,dn,An;Pe=Pe||[",","	","|",";",h.RECORD_SEP,h.UNIT_SEP];for(var Cn=0;Cn<Pe.length;Cn++){for(var ai,Gi=Pe[Cn],ri=0,ji=0,Si=0,lr=(dn=void 0,new $({comments:$t,delimiter:Gi,newline:Tn,preview:10}).parse(lt)),Tt=0;Tt<lr.data.length;Tt++)Mt&&yt(lr.data[Tt])?Si++:(ai=lr.data[Tt].length,ji+=ai,dn===void 0?dn=ai:0<ai&&(ri+=Math.abs(ai-dn),dn=ai));0<lr.data.length&&(ji/=lr.data.length-Si),(wn===void 0||ri<=wn)&&(An===void 0||An<ji)&&1.99<ji&&(wn=ri,yn=Gi,An=ji)}return{successful:!!(J.delimiter=yn),bestDelimiter:yn}})(en,J.newline,J.skipEmptyLines,J.comments,J.delimitersToGuess)).successful?J.delimiter=St.bestDelimiter:(ue=!0,J.delimiter=h.DefaultDelimiter),Oe.meta.delimiter=J.delimiter),q(J));return J.preview&&J.header&&St.preview++,ne=en,be=new $(St),Oe=be.parse(ne,it,Lt),xt(),Ye?{meta:{paused:!0}}:Oe||{meta:{paused:!1}}},this.paused=function(){return Ye},this.pause=function(){Ye=!0,be.abort(),ne=re(J.chunk)?"":ne.substring(be.getCharIndex())},this.resume=function(){he.streamer._halted?(Ye=!1,he.streamer.parseChunk(ne,!0)):setTimeout(he.resume,3)},this.aborted=function(){return _e},this.abort=function(){_e=!0,be.abort(),Oe.meta.aborted=!0,re(J.complete)&&J.complete(Oe),ne=""},this.guessLineEndings=function(lt,St){lt=lt.substring(0,1048576);var St=new RegExp(z(St)+"([^]*?)"+z(St),"gm"),Lt=(lt=lt.replace(St,"")).split("\r"),St=lt.split(`
`),lt=1<St.length&&St[0].length<Lt[0].length;if(Lt.length===1||lt)return`
`;for(var Tn=0,Mt=0;Mt<Lt.length;Mt++)Lt[Mt][0]===`
`&&Tn++;return Tn>=Lt.length/2?`\r
`:"\r"}}function z(J){return J.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function $(J){var ne=(J=J||{}).delimiter,be=J.newline,ue=J.comments,ve=J.step,ce=J.preview,Ie=J.fastMode,Te=null,fe=!1,he=J.quoteChar==null?'"':J.quoteChar,Re=he;if(J.escapeChar!==void 0&&(Re=J.escapeChar),(typeof ne!="string"||-1<h.BAD_DELIMITERS.indexOf(ne))&&(ne=","),ue===ne)throw new Error("Comment character same as delimiter");ue===!0?ue="#":(typeof ue!="string"||-1<h.BAD_DELIMITERS.indexOf(ue))&&(ue=!1),be!==`
`&&be!=="\r"&&be!==`\r
`&&(be=`
`);var De=0,Ye=!1;this.parse=function(_e,Le,Oe){if(typeof _e!="string")throw new Error("Input must be a string");var yt=_e.length,xt=ne.length,Vt=be.length,Xt=ue.length,en=re(ve),it=[],Lt=[],St=[],lt=De=0;if(!_e)return ri();if(Ie||Ie!==!1&&_e.indexOf(he)===-1){for(var Tn=_e.split(be),Mt=0;Mt<Tn.length;Mt++){if(St=Tn[Mt],De+=St.length,Mt!==Tn.length-1)De+=be.length;else if(Oe)return ri();if(!ue||St.substring(0,Xt)!==ue){if(en){if(it=[],An(St.split(ne)),ji(),Ye)return ri()}else An(St.split(ne));if(ce&&ce<=Mt)return it=it.slice(0,ce),ri(!0)}}return ri()}for(var $t=_e.indexOf(ne,De),Pe=_e.indexOf(be,De),yn=new RegExp(z(Re)+z(he),"g"),wn=_e.indexOf(he,De);;)if(_e[De]===he)for(wn=De,De++;;){if((wn=_e.indexOf(he,wn+1))===-1)return Oe||Lt.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:it.length,index:De}),ai();if(wn===yt-1)return ai(_e.substring(De,wn).replace(yn,he));if(he===Re&&_e[wn+1]===Re)wn++;else if(he===Re||wn===0||_e[wn-1]!==Re){$t!==-1&&$t<wn+1&&($t=_e.indexOf(ne,wn+1));var dn=Cn((Pe=Pe!==-1&&Pe<wn+1?_e.indexOf(be,wn+1):Pe)===-1?$t:Math.min($t,Pe));if(_e.substr(wn+1+dn,xt)===ne){St.push(_e.substring(De,wn).replace(yn,he)),_e[De=wn+1+dn+xt]!==he&&(wn=_e.indexOf(he,De)),$t=_e.indexOf(ne,De),Pe=_e.indexOf(be,De);break}if(dn=Cn(Pe),_e.substring(wn+1+dn,wn+1+dn+Vt)===be){if(St.push(_e.substring(De,wn).replace(yn,he)),Gi(wn+1+dn+Vt),$t=_e.indexOf(ne,De),wn=_e.indexOf(he,De),en&&(ji(),Ye))return ri();if(ce&&it.length>=ce)return ri(!0);break}Lt.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:it.length,index:De}),wn++}}else if(ue&&St.length===0&&_e.substring(De,De+Xt)===ue){if(Pe===-1)return ri();De=Pe+Vt,Pe=_e.indexOf(be,De),$t=_e.indexOf(ne,De)}else if($t!==-1&&($t<Pe||Pe===-1))St.push(_e.substring(De,$t)),De=$t+xt,$t=_e.indexOf(ne,De);else{if(Pe===-1)break;if(St.push(_e.substring(De,Pe)),Gi(Pe+Vt),en&&(ji(),Ye))return ri();if(ce&&it.length>=ce)return ri(!0)}return ai();function An(Si){it.push(Si),lt=De}function Cn(Si){var lr=0;return lr=Si!==-1&&(Si=_e.substring(wn+1,Si))&&Si.trim()===""?Si.length:lr}function ai(Si){return Oe||(Si===void 0&&(Si=_e.substring(De)),St.push(Si),De=yt,An(St),en&&ji()),ri()}function Gi(Si){De=Si,An(St),St=[],Pe=_e.indexOf(be,De)}function ri(Si){if(J.header&&!Le&&it.length&&!fe){var lr=it[0],Tt=Object.create(null),Ji=new Set(lr);let Qi=!1;for(let Vr=0;Vr<lr.length;Vr++){let wo=lr[Vr];if(Tt[wo=re(J.transformHeader)?J.transformHeader(wo,Vr):wo]){let ln,Nn=Tt[wo];for(;ln=wo+"_"+Nn,Nn++,Ji.has(ln););Ji.add(ln),lr[Vr]=ln,Tt[wo]++,Qi=!0,(Te=Te===null?{}:Te)[ln]=wo}else Tt[wo]=1,lr[Vr]=wo;Ji.add(wo)}Qi&&console.warn("Duplicate headers found and renamed."),fe=!0}return{data:it,errors:Lt,meta:{delimiter:ne,linebreak:be,aborted:Ye,truncated:!!Si,cursor:lt+(Le||0),renamedHeaders:Te}}}function ji(){ve(ri()),it=[],Lt=[]}},this.abort=function(){Ye=!0},this.getCharIndex=function(){return De}}function U(J){var ne=J.data,be=a[ne.workerId],ue=!1;if(ne.error)be.userError(ne.error,ne.file);else if(ne.results&&ne.results.data){var ve={abort:function(){ue=!0,Y(ne.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:X,resume:X};if(re(be.userStep)){for(var ce=0;ce<ne.results.data.length&&(be.userStep({data:ne.results.data[ce],errors:ne.results.errors,meta:ne.results.meta},ve),!ue);ce++);delete ne.results}else re(be.userChunk)&&(be.userChunk(ne.results,ve,ne.file),delete ne.results)}ne.finished&&!ue&&Y(ne.workerId,ne.results)}function Y(J,ne){var be=a[J];re(be.userComplete)&&be.userComplete(ne),be.terminate(),delete a[J]}function X(){throw new Error("Not implemented.")}function q(J){if(typeof J!="object"||J===null)return J;var ne,be=Array.isArray(J)?[]:{};for(ne in J)be[ne]=q(J[ne]);return be}function ie(J,ne){return function(){J.apply(ne,arguments)}}function re(J){return typeof J=="function"}return h.parse=function(J,ne){var be=(ne=ne||{}).dynamicTyping||!1;if(re(be)&&(ne.dynamicTypingFunction=be,be={}),ne.dynamicTyping=be,ne.transform=!!re(ne.transform)&&ne.transform,!ne.worker||!h.WORKERS_SUPPORTED)return be=null,h.NODE_STREAM_INPUT,typeof J=="string"?(J=(ue=>ue.charCodeAt(0)!==65279?ue:ue.slice(1))(J),be=new(ne.download?v:R)(ne)):J.readable===!0&&re(J.read)&&re(J.on)?be=new L(ne):(i.File&&J instanceof File||J instanceof Object)&&(be=new w(ne)),be.stream(J);(be=(()=>{var ue;return!!h.WORKERS_SUPPORTED&&(ue=(()=>{var ve=i.URL||i.webkitURL||null,ce=n.toString();return h.BLOB_URL||(h.BLOB_URL=ve.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",ce,")();"],{type:"text/javascript"})))})(),(ue=new i.Worker(ue)).onmessage=U,ue.id=d++,a[ue.id]=ue)})()).userStep=ne.step,be.userChunk=ne.chunk,be.userComplete=ne.complete,be.userError=ne.error,ne.step=re(ne.step),ne.chunk=re(ne.chunk),ne.complete=re(ne.complete),ne.error=re(ne.error),delete ne.worker,be.postMessage({input:J,config:ne,workerId:be.id})},h.unparse=function(J,ne){var be=!1,ue=!0,ve=",",ce=`\r
`,Ie='"',Te=Ie+Ie,fe=!1,he=null,Re=!1,De=((()=>{if(typeof ne=="object"){if(typeof ne.delimiter!="string"||h.BAD_DELIMITERS.filter(function(Le){return ne.delimiter.indexOf(Le)!==-1}).length||(ve=ne.delimiter),typeof ne.quotes!="boolean"&&typeof ne.quotes!="function"&&!Array.isArray(ne.quotes)||(be=ne.quotes),typeof ne.skipEmptyLines!="boolean"&&typeof ne.skipEmptyLines!="string"||(fe=ne.skipEmptyLines),typeof ne.newline=="string"&&(ce=ne.newline),typeof ne.quoteChar=="string"&&(Ie=ne.quoteChar),typeof ne.header=="boolean"&&(ue=ne.header),Array.isArray(ne.columns)){if(ne.columns.length===0)throw new Error("Option columns is empty");he=ne.columns}ne.escapeChar!==void 0&&(Te=ne.escapeChar+Ie),ne.escapeFormulae instanceof RegExp?Re=ne.escapeFormulae:typeof ne.escapeFormulae=="boolean"&&ne.escapeFormulae&&(Re=/^[=+\-@\t\r].*$/)}})(),new RegExp(z(Ie),"g"));if(typeof J=="string"&&(J=JSON.parse(J)),Array.isArray(J)){if(!J.length||Array.isArray(J[0]))return Ye(null,J,fe);if(typeof J[0]=="object")return Ye(he||Object.keys(J[0]),J,fe)}else if(typeof J=="object")return typeof J.data=="string"&&(J.data=JSON.parse(J.data)),Array.isArray(J.data)&&(J.fields||(J.fields=J.meta&&J.meta.fields||he),J.fields||(J.fields=Array.isArray(J.data[0])?J.fields:typeof J.data[0]=="object"?Object.keys(J.data[0]):[]),Array.isArray(J.data[0])||typeof J.data[0]=="object"||(J.data=[J.data])),Ye(J.fields||[],J.data||[],fe);throw new Error("Unable to serialize unrecognized input");function Ye(Le,Oe,yt){var xt="",Vt=(typeof Le=="string"&&(Le=JSON.parse(Le)),typeof Oe=="string"&&(Oe=JSON.parse(Oe)),Array.isArray(Le)&&0<Le.length),Xt=!Array.isArray(Oe[0]);if(Vt&&ue){for(var en=0;en<Le.length;en++)0<en&&(xt+=ve),xt+=_e(Le[en],en);0<Oe.length&&(xt+=ce)}for(var it=0;it<Oe.length;it++){var Lt=(Vt?Le:Oe[it]).length,St=!1,lt=Vt?Object.keys(Oe[it]).length===0:Oe[it].length===0;if(yt&&!Vt&&(St=yt==="greedy"?Oe[it].join("").trim()==="":Oe[it].length===1&&Oe[it][0].length===0),yt==="greedy"&&Vt){for(var Tn=[],Mt=0;Mt<Lt;Mt++){var $t=Xt?Le[Mt]:Mt;Tn.push(Oe[it][$t])}St=Tn.join("").trim()===""}if(!St){for(var Pe=0;Pe<Lt;Pe++){0<Pe&&!lt&&(xt+=ve);var yn=Vt&&Xt?Le[Pe]:Pe;xt+=_e(Oe[it][yn],Pe)}it<Oe.length-1&&(!yt||0<Lt&&!lt)&&(xt+=ce)}}return xt}function _e(Le,Oe){var yt,xt;return Le==null?"":Le.constructor===Date?JSON.stringify(Le).slice(1,25):(xt=!1,Re&&typeof Le=="string"&&Re.test(Le)&&(Le="'"+Le,xt=!0),yt=Le.toString().replace(De,Te),(xt=xt||be===!0||typeof be=="function"&&be(Le,Oe)||Array.isArray(be)&&be[Oe]||((Vt,Xt)=>{for(var en=0;en<Xt.length;en++)if(-1<Vt.indexOf(Xt[en]))return!0;return!1})(yt,h.BAD_DELIMITERS)||-1<yt.indexOf(ve)||yt.charAt(0)===" "||yt.charAt(yt.length-1)===" ")?Ie+yt+Ie:yt)}},h.RECORD_SEP="",h.UNIT_SEP="",h.BYTE_ORDER_MARK="\uFEFF",h.BAD_DELIMITERS=["\r",`
`,'"',h.BYTE_ORDER_MARK],h.WORKERS_SUPPORTED=!o&&!!i.Worker,h.NODE_STREAM_INPUT=1,h.LocalChunkSize=10485760,h.RemoteChunkSize=5242880,h.DefaultDelimiter=",",h.Parser=$,h.ParserHandle=O,h.NetworkStreamer=v,h.FileStreamer=w,h.StringStreamer=R,h.ReadableStreamStreamer=L,i.jQuery&&((r=i.jQuery).fn.parse=function(J){var ne=J.config||{},be=[];return this.each(function(ce){if(!(r(this).prop("tagName").toUpperCase()==="INPUT"&&r(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var Ie=0;Ie<this.files.length;Ie++)be.push({file:this.files[Ie],inputElem:this,instanceConfig:r.extend({},ne)})}),ue(),this;function ue(){if(be.length===0)re(J.complete)&&J.complete();else{var ce,Ie,Te,fe,he=be[0];if(re(J.before)){var Re=J.before(he.file,he.inputElem);if(typeof Re=="object"){if(Re.action==="abort")return ce="AbortError",Ie=he.file,Te=he.inputElem,fe=Re.reason,void(re(J.error)&&J.error({name:ce},Ie,Te,fe));if(Re.action==="skip")return void ve();typeof Re.config=="object"&&(he.instanceConfig=r.extend(he.instanceConfig,Re.config))}else if(Re==="skip")return void ve()}var De=he.instanceConfig.complete;he.instanceConfig.complete=function(Ye){re(De)&&De(Ye,he.file,he.inputElem),ve()},h.parse(he.file,he.instanceConfig)}}function ve(){be.splice(0,1),ue()}}),s&&(i.onmessage=function(J){J=J.data,h.WORKER_ID===void 0&&J&&(h.WORKER_ID=J.workerId),typeof J.input=="string"?i.postMessage({workerId:h.WORKER_ID,results:h.parse(J.input,J.config),finished:!0}):(i.File&&J.input instanceof File||J.input instanceof Object)&&(J=h.parse(J.input,J.config))&&i.postMessage({workerId:h.WORKER_ID,results:J,finished:!0})}),(v.prototype=Object.create(m.prototype)).constructor=v,(w.prototype=Object.create(m.prototype)).constructor=w,(R.prototype=Object.create(R.prototype)).constructor=R,(L.prototype=Object.create(m.prototype)).constructor=L,h})})(ZC)),ZC.exports}var UY=WY();const vT=Ol(UY),qY=({onClose:e})=>{const[t,n]=I.useState(null),[i,r]=I.useState(null),[o,s]=I.useState(""),[a,d]=I.useState(""),[h,m]=I.useState(""),[v,w]=I.useState(""),[R,L]=I.useState(null),[O,z]=I.useState(!1),[$,U]=I.useState(""),[Y,X]=I.useState(!1),[q,ie]=I.useState(!1),re=I.useCallback((ce,Ie,Te)=>{U(""),vT.parse(ce,{header:!0,skipEmptyLines:!0,complete:fe=>{if(fe.data.length>0){const he=Object.keys(fe.data[0]);Ie({headers:he,rows:fe.data}),Te(ce.name)}},error:fe=>{U(`Error parsing ${ce.name}: ${fe.message}`)}})},[]),J=I.useCallback(()=>{if(!t||!i||!h||!v){U("Please upload both files and select join columns");return}z(!0),U(""),setTimeout(()=>{try{const ce=new Map;i.rows.forEach(Te=>{const fe=String(Te[v]||"").trim().toLowerCase();fe&&ce.set(fe,Te)});const Ie=t.rows.map(Te=>{const fe=String(Te[h]||"").trim().toLowerCase(),he=ce.get(fe);if(he){const Re={...Te};return Object.keys(he).forEach(De=>{const Ye=De===v?De:`file2_${De}`;Re[Ye]=he[De]}),Re}return Te});i.rows.forEach(Te=>{const fe=String(Te[v]||"").trim().toLowerCase();if(!t.rows.some(Re=>String(Re[h]||"").trim().toLowerCase()===fe)){const Re={};Object.keys(Te).forEach(De=>{const Ye=De===v?h:`file2_${De}`;Re[Ye]=Te[De]}),Ie.push(Re)}}),L(Ie)}catch(ce){U(`Error joining data: ${ce instanceof Error?ce.message:"Unknown error"}`)}finally{z(!1)}},1500)},[t,i,h,v]),ne=I.useCallback(()=>{if(!R||R.length===0)return;const ce=vT.unparse(R),Ie=new Blob([ce],{type:"text/csv;charset=utf-8;"}),Te=document.createElement("a"),fe=URL.createObjectURL(Ie);Te.setAttribute("href",fe),Te.setAttribute("download",`joined_data_${Date.now()}.csv`),Te.style.visibility="hidden",document.body.appendChild(Te),Te.click(),document.body.removeChild(Te)},[R]),be=I.useCallback((ce,Ie)=>{ce.preventDefault(),ce.stopPropagation(),Ie===1?X(!0):ie(!0)},[]),ue=I.useCallback((ce,Ie)=>{ce.preventDefault(),ce.stopPropagation(),Ie===1?X(!1):ie(!1)},[]),ve=I.useCallback((ce,Ie,Te,fe)=>{ce.preventDefault(),ce.stopPropagation(),Ie===1?X(!1):ie(!1);const he=ce.dataTransfer.files;if(he&&he.length>0){const Re=he[0];Re.type==="text/csv"||Re.name.endsWith(".csv")?re(Re,Te,fe):U("Please upload a valid CSV file")}},[re]);return T.jsx("div",{className:"csv-join-overlay",children:T.jsxs("div",{className:"csv-join-container",children:[T.jsxs("div",{className:"csv-join-header",children:[T.jsxs("h2",{children:[T.jsx(PI,{})," CSV Data Join Tool"]}),T.jsx("button",{className:"close-btn",onClick:e,title:"Close",children:T.jsx(SP,{})})]}),T.jsxs("div",{className:"csv-join-content",children:[$&&T.jsx("div",{className:"error-message",children:$}),T.jsxs("div",{className:"upload-section",children:[T.jsxs("div",{className:"upload-card",children:[T.jsxs("div",{className:"upload-header",children:[T.jsx("h3",{children:"File 1"}),o&&T.jsx("span",{className:"file-name",children:o})]}),T.jsxs("label",{className:`upload-area ${Y?"drag-over":""}`,onDragOver:ce=>be(ce,1),onDragLeave:ce=>ue(ce,1),onDrop:ce=>ve(ce,1,n,s),children:[T.jsx("input",{type:"file",accept:".csv",onChange:ce=>{var Te;const Ie=(Te=ce.target.files)==null?void 0:Te[0];Ie&&re(Ie,n,s)}}),T.jsx(Sw,{}),T.jsx("span",{children:"Click or drag & drop CSV file here"})]}),t&&T.jsxs("div",{className:"column-select",children:[T.jsx("label",{children:"Join Column:"}),T.jsxs("select",{value:h,onChange:ce=>m(ce.target.value),children:[T.jsx("option",{value:"",children:"Select column..."}),t.headers.map(ce=>T.jsx("option",{value:ce,children:ce},ce))]}),T.jsxs("div",{className:"data-info",children:[t.rows.length," rows, ",t.headers.length," columns"]})]})]}),T.jsxs("div",{className:"upload-card",children:[T.jsxs("div",{className:"upload-header",children:[T.jsx("h3",{children:"File 2"}),a&&T.jsx("span",{className:"file-name",children:a})]}),T.jsxs("label",{className:`upload-area ${q?"drag-over":""}`,onDragOver:ce=>be(ce,2),onDragLeave:ce=>ue(ce,2),onDrop:ce=>ve(ce,2,r,d),children:[T.jsx("input",{type:"file",accept:".csv",onChange:ce=>{var Te;const Ie=(Te=ce.target.files)==null?void 0:Te[0];Ie&&re(Ie,r,d)}}),T.jsx(Sw,{}),T.jsx("span",{children:"Click or drag & drop CSV file here"})]}),i&&T.jsxs("div",{className:"column-select",children:[T.jsx("label",{children:"Join Column:"}),T.jsxs("select",{value:v,onChange:ce=>w(ce.target.value),children:[T.jsx("option",{value:"",children:"Select column..."}),i.headers.map(ce=>T.jsx("option",{value:ce,children:ce},ce))]}),T.jsxs("div",{className:"data-info",children:[i.rows.length," rows, ",i.headers.length," columns"]})]})]})]}),T.jsx("div",{className:"action-section",children:T.jsx("button",{className:"join-btn",onClick:J,disabled:!t||!i||!h||!v||O,children:O?T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"spinner"}),"Joining Data..."]}):T.jsxs(T.Fragment,{children:[T.jsx(PI,{})," Join Data"]})})}),O&&T.jsxs("div",{className:"loading-animation",children:[T.jsxs("div",{className:"loading-bars",children:[T.jsx("div",{className:"bar"}),T.jsx("div",{className:"bar"}),T.jsx("div",{className:"bar"}),T.jsx("div",{className:"bar"}),T.jsx("div",{className:"bar"})]}),T.jsx("p",{children:"Processing your data..."})]}),R&&!O&&T.jsxs("div",{className:"result-section",children:[T.jsxs("div",{className:"result-header",children:[T.jsx("h3",{children:"Join Result"}),T.jsxs("button",{className:"export-btn",onClick:ne,children:[T.jsx(fN,{})," Export CSV"]})]}),T.jsxs("div",{className:"result-info",children:["Total rows: ",R.length," | Columns: ",Object.keys(R[0]||{}).length]}),T.jsxs("div",{className:"result-preview",children:[T.jsxs("table",{children:[T.jsx("thead",{children:T.jsx("tr",{children:R.length>0&&Object.keys(R[0]).map(ce=>T.jsx("th",{children:ce},ce))})}),T.jsx("tbody",{children:R.slice(0,10).map((ce,Ie)=>T.jsx("tr",{children:Object.values(ce).map((Te,fe)=>T.jsx("td",{children:String(Te||"")},fe))},Ie))})]}),R.length>10&&T.jsxs("div",{className:"preview-note",children:["Showing first 10 rows of ",R.length]})]})]})]})]})})},HI={Cisco:"#1ba1e2",Huawei:"#e51400",Arista:"#60a917",Juniper:"#f09609",MikroTik:"#d80073"},KY=()=>{const e=v1(),t=I.useMemo(()=>new _P,[]),[n,i]=I.useState(!1),[r,o]=I.useState(!1),[s,a]=I.useState(null),[d,h]=I.useState([]),[m,v]=I.useState([]),[w,R]=I.useState([]),[L,O]=I.useState(!1),[z,$]=I.useState(!1),[U,Y]=I.useState(null),[X,q]=I.useState({manufactures:{},regions:{},models:{}}),[ie,re]=I.useState(null),J=I.useMemo(()=>({defaultDrawNodeLabel:yN,defaultDrawNodeHover:mN,defaultNodeType:"circle",defaultEdgeType:"arrow",labelDensity:.07,labelGridCellSize:60,labelRenderedSizeThreshold:15,labelFont:"Lato, sans-serif",zIndex:!0}),[]);I.useEffect(()=>{fetch("./dataset.json").then(ue=>ue.json()).then(ue=>{t.clear();const ve=bo.uniq(ue.map(fe=>fe.manufacture)),ce=bo.uniq(ue.map(fe=>fe.region)),Ie=bo.uniq(ue.map(fe=>fe.model));h(ve),v(ce),R(Ie),ue.forEach(fe=>{const he=HI[fe.manufacture]||"#666666";t.addNode(fe.hostname,{...fe,label:fe.hostname,color:he,size:Math.max(5,(fe.percentage_used||50)/100*20+3),x:((fe.longitude||0)+180)*2,y:-((fe.latitude||0)+90)*2})});const Te=bo.groupBy(ue,"region");Object.values(Te).forEach(fe=>{if(fe.length>1)for(let he=0;he<fe.length-1;he++)for(let Re=he+1;Re<fe.length;Re++)Math.random()>.7&&t.addEdge(fe[he].hostname,fe[Re].hostname,{size:1,color:"#cccccc"})}),q({manufactures:bo.mapValues(bo.groupBy(ve,fe=>fe),()=>!0),regions:bo.mapValues(bo.groupBy(ce,fe=>fe),()=>!0),models:bo.mapValues(bo.groupBy(Ie,fe=>fe),()=>!0)}),a(ue),requestAnimationFrame(()=>o(!0))})},[t]);const ne=ue=>{const{nodes:ve,edges:ce}=ue;ve.forEach(De=>{if(t.hasNode(De.hostname)){console.warn(`Node ${De.hostname} already exists, skipping...`);return}const Ye=HI[De.manufacture]||"#666666",_e=De.longitude!==void 0?(De.longitude+180)*2:Math.random()*1e3,Le=De.latitude!==void 0?-(De.latitude+90)*2:Math.random()*1e3;t.addNode(De.hostname,{...De,label:De.hostname,color:Ye,size:Math.max(5,(De.percentage_used||50)/100*20+3),x:_e,y:Le})}),ce&&ce.length>0&&ce.forEach(De=>{if(!t.hasNode(De.source)){console.warn(`Source node ${De.source} not found, skipping edge...`);return}if(!t.hasNode(De.target)){console.warn(`Target node ${De.target} not found, skipping edge...`);return}t.hasEdge(De.source,De.target)||t.addEdge(De.source,De.target,{size:De.size||1,color:De.color||"#cccccc",label:De.label||""})});const Ie=RI.inferSettings(t);RI.assign(t,{iterations:100,settings:{...Ie,gravity:1,scalingRatio:10}});const Te=s?[...s,...ve]:ve;a(Te);const fe=bo.uniq(Te.map(De=>De.manufacture)),he=bo.uniq(Te.map(De=>De.region)),Re=bo.uniq(Te.map(De=>De.model));h(fe),v(he),R(Re),q(De=>({manufactures:{...De.manufactures,...bo.mapValues(bo.groupBy(fe.filter(Ye=>!De.manufactures[Ye]),Ye=>Ye),()=>!0)},regions:{...De.regions,...bo.mapValues(bo.groupBy(he.filter(Ye=>!De.regions[Ye]),Ye=>Ye),()=>!0)},models:{...De.models,...bo.mapValues(bo.groupBy(Re.filter(Ye=>!De.models[Ye]),Ye=>Ye),()=>!0)}}))},be=(ue,ve)=>{Y({message:ue,type:ve})};return s?T.jsxs("div",{id:"app-root",className:n?"show-contents":"",children:[T.jsxs(lK,{graph:t,settings:J,className:"react-sigma",children:[T.jsx(LY,{hoveredNode:ie}),T.jsx(MY,{setHoveredNode:re}),T.jsx(FY,{filters:X}),r&&T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"controls",children:[T.jsx("div",{className:"react-sigma-control ico",children:T.jsx("button",{type:"button",className:"show-contents",onClick:()=>i(!0),title:"Show caption and description",children:T.jsx(HZ,{})})}),T.jsx("div",{className:"react-sigma-control ico",children:T.jsx("button",{type:"button",className:"maplibre-view",onClick:()=>e("/map"),title:"Switch to MapLibre view",children:T.jsx(mT,{})})}),T.jsx("div",{className:"react-sigma-control ico",children:T.jsx("button",{type:"button",className:"csv-join-view",onClick:()=>$(!0),title:"CSV Join Tool",children:T.jsx(bY,{})})}),T.jsx("div",{className:"react-sigma-control ico",children:T.jsx("button",{type:"button",className:"add-data",onClick:()=>O(!0),title:"Add dynamic data",children:T.jsx(uN,{})})}),T.jsxs(gK,{className:"ico",children:[T.jsx($Z,{}),T.jsx(WZ,{})]}),T.jsxs(hK,{className:"ico",children:[T.jsx(KZ,{}),T.jsx(ZZ,{}),T.jsx(VZ,{})]})]}),T.jsxs("div",{className:"contents",children:[T.jsx("div",{className:"ico",children:T.jsx("button",{type:"button",className:"ico hide-contents",onClick:()=>i(!1),title:"Hide caption and description",children:T.jsx(SP,{})})}),T.jsx(OY,{filters:X}),T.jsxs("div",{className:"panels",children:[T.jsx(VY,{filters:X}),T.jsx(DY,{}),T.jsx(NY,{manufacturers:d,filters:X,setManufacturers:ue=>q(ve=>({...ve,manufactures:ue})),toggleManufacturer:ue=>{q(ve=>({...ve,manufactures:ve.manufactures[ue]?{...ve.manufactures,[ue]:!1}:{...ve.manufactures,[ue]:!0}}))}}),T.jsx(HY,{regions:m,filters:X,setRegions:ue=>q(ve=>({...ve,regions:ue})),toggleRegion:ue=>{q(ve=>({...ve,regions:ve.regions[ue]?{...ve.regions,[ue]:!1}:{...ve.regions,[ue]:!0}}))}}),T.jsx(GY,{models:w,filters:X,setModels:ue=>q(ve=>({...ve,models:ue})),toggleModel:ue=>{q(ve=>({...ve,models:ve.models[ue]?{...ve.models,[ue]:!1}:{...ve.models,[ue]:!0}}))}})]})]})]})]}),z&&T.jsx(qY,{onClose:()=>$(!1)}),T.jsx(EY,{isOpen:L,onClose:()=>O(!1),onSubmit:ne,onNotify:be}),U&&T.jsx(vN,{message:U.message,type:U.type,onClose:()=>Y(null)})]}):null};var YC={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */var ZY=YC.exports,VI;function YY(){return VI||(VI=1,(function(e,t){(function(n,i){e.exports=i()})(ZY,(function(){var n={},i={};function r(s,a,d){if(i[s]=d,s==="index"){var h="var sharedModule = {}; ("+i.shared+")(sharedModule); ("+i.worker+")(sharedModule);",m={};return i.shared(m),i.index(n,m),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([h],{type:"text/javascript"}))),n}}r("shared",["exports"],(function(s){function a(f,u,g,x){return new(g||(g=Promise))((function(E,F){function M(Z){try{H(x.next(Z))}catch(ee){F(ee)}}function B(Z){try{H(x.throw(Z))}catch(ee){F(ee)}}function H(Z){var ee;Z.done?E(Z.value):(ee=Z.value,ee instanceof g?ee:new g((function(oe){oe(ee)}))).then(M,B)}H((x=x.apply(f,u||[])).next())}))}function d(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}typeof SuppressedError=="function"&&SuppressedError;var h=m;function m(f,u){this.x=f,this.y=u}m.prototype={clone:function(){return new m(this.x,this.y)},add:function(f){return this.clone()._add(f)},sub:function(f){return this.clone()._sub(f)},multByPoint:function(f){return this.clone()._multByPoint(f)},divByPoint:function(f){return this.clone()._divByPoint(f)},mult:function(f){return this.clone()._mult(f)},div:function(f){return this.clone()._div(f)},rotate:function(f){return this.clone()._rotate(f)},rotateAround:function(f,u){return this.clone()._rotateAround(f,u)},matMult:function(f){return this.clone()._matMult(f)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(f){return this.x===f.x&&this.y===f.y},dist:function(f){return Math.sqrt(this.distSqr(f))},distSqr:function(f){var u=f.x-this.x,g=f.y-this.y;return u*u+g*g},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(f){return Math.atan2(this.y-f.y,this.x-f.x)},angleWith:function(f){return this.angleWithSep(f.x,f.y)},angleWithSep:function(f,u){return Math.atan2(this.x*u-this.y*f,this.x*f+this.y*u)},_matMult:function(f){var u=f[2]*this.x+f[3]*this.y;return this.x=f[0]*this.x+f[1]*this.y,this.y=u,this},_add:function(f){return this.x+=f.x,this.y+=f.y,this},_sub:function(f){return this.x-=f.x,this.y-=f.y,this},_mult:function(f){return this.x*=f,this.y*=f,this},_div:function(f){return this.x/=f,this.y/=f,this},_multByPoint:function(f){return this.x*=f.x,this.y*=f.y,this},_divByPoint:function(f){return this.x/=f.x,this.y/=f.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var f=this.y;return this.y=this.x,this.x=-f,this},_rotate:function(f){var u=Math.cos(f),g=Math.sin(f),x=g*this.x+u*this.y;return this.x=u*this.x-g*this.y,this.y=x,this},_rotateAround:function(f,u){var g=Math.cos(f),x=Math.sin(f),E=u.y+x*(this.x-u.x)+g*(this.y-u.y);return this.x=u.x+g*(this.x-u.x)-x*(this.y-u.y),this.y=E,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},m.convert=function(f){return f instanceof m?f:Array.isArray(f)?new m(f[0],f[1]):f};var v=d(h),w=R;function R(f,u,g,x){this.cx=3*f,this.bx=3*(g-f)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(x-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=f,this.p1y=u,this.p2x=g,this.p2y=x}R.prototype={sampleCurveX:function(f){return((this.ax*f+this.bx)*f+this.cx)*f},sampleCurveY:function(f){return((this.ay*f+this.by)*f+this.cy)*f},sampleCurveDerivativeX:function(f){return(3*this.ax*f+2*this.bx)*f+this.cx},solveCurveX:function(f,u){if(u===void 0&&(u=1e-6),f<0)return 0;if(f>1)return 1;for(var g=f,x=0;x<8;x++){var E=this.sampleCurveX(g)-f;if(Math.abs(E)<u)return g;var F=this.sampleCurveDerivativeX(g);if(Math.abs(F)<1e-6)break;g-=E/F}var M=0,B=1;for(g=f,x=0;x<20&&(E=this.sampleCurveX(g),!(Math.abs(E-f)<u));x++)f>E?M=g:B=g,g=.5*(B-M)+M;return g},solve:function(f,u){return this.sampleCurveY(this.solveCurveX(f,u))}};var L=d(w);let O,z;function $(){return O==null&&(O=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),O}function U(){if(z==null&&(z=!1,$())){const u=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(u){for(let x=0;x<25;x++){const E=4*x;u.fillStyle=`rgb(${E},${E+1},${E+2})`,u.fillRect(x%5,Math.floor(x/5),1,1)}const g=u.getImageData(0,0,5,5).data;for(let x=0;x<100;x++)if(x%4!=3&&g[x]!==x){z=!0;break}}}return z||!1}function Y(f,u,g,x){const E=new L(f,u,g,x);return F=>E.solve(F)}const X=Y(.25,.1,.25,1);function q(f,u,g){return Math.min(g,Math.max(u,f))}function ie(f,u,g){const x=g-u,E=((f-u)%x+x)%x+u;return E===u?g:E}function re(f,...u){for(const g of u)for(const x in g)f[x]=g[x];return f}let J=1;function ne(f,u,g){const x={};for(const E in f)x[E]=u.call(this,f[E],E,f);return x}function be(f,u,g){const x={};for(const E in f)u.call(this,f[E],E,f)&&(x[E]=f[E]);return x}function ue(f){return Array.isArray(f)?f.map(ue):typeof f=="object"&&f?ne(f,ue):f}const ve={};function ce(f){ve[f]||(typeof console<"u"&&console.warn(f),ve[f]=!0)}function Ie(f,u,g){return(g.y-f.y)*(u.x-f.x)>(u.y-f.y)*(g.x-f.x)}function Te(f){return typeof WorkerGlobalScope<"u"&&f!==void 0&&f instanceof WorkerGlobalScope}let fe=null;function he(f){return typeof ImageBitmap<"u"&&f instanceof ImageBitmap}const Re="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function De(f,u,g,x,E){return a(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const F=new VideoFrame(f,{timestamp:0});try{const M=F==null?void 0:F.format;if(!M||!M.startsWith("BGR")&&!M.startsWith("RGB"))throw new Error(`Unrecognized format ${M}`);const B=M.startsWith("BGR"),H=new Uint8ClampedArray(x*E*4);if(yield F.copyTo(H,(function(Z,ee,oe,de,me){const Ce=4*Math.max(-ee,0),we=(Math.max(0,oe)-oe)*de*4+Ce,Be=4*de,He=Math.max(0,ee),ht=Math.max(0,oe);return{rect:{x:He,y:ht,width:Math.min(Z.width,ee+de)-He,height:Math.min(Z.height,oe+me)-ht},layout:[{offset:we,stride:Be}]}})(f,u,g,x,E)),B)for(let Z=0;Z<H.length;Z+=4){const ee=H[Z];H[Z]=H[Z+2],H[Z+2]=ee}return H}finally{F.close()}}))}let Ye,_e;const Le="AbortError";function Oe(){return new Error(Le)}const yt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function xt(f){return yt.REGISTERED_PROTOCOLS[f.substring(0,f.indexOf("://"))]}const Vt="global-dispatcher";class Xt extends Error{constructor(u,g,x,E){super(`AJAXError: ${g} (${u}): ${x}`),this.status=u,this.statusText=g,this.url=x,this.body=E}}const en=()=>Te(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,it=function(f,u){if(/:\/\//.test(f.url)&&!/^https?:|^file:/.test(f.url)){const x=xt(f.url);if(x)return x(f,u);if(Te(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,targetMapId:Vt},u)}if(!(/^file:/.test(g=f.url)||/^file:/.test(en())&&!/^\w+:/.test(g))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(x,E){return a(this,void 0,void 0,(function*(){const F=new Request(x.url,{method:x.method||"GET",body:x.body,credentials:x.credentials,headers:x.headers,cache:x.cache,referrer:en(),signal:E.signal});x.type!=="json"||F.headers.has("Accept")||F.headers.set("Accept","application/json");const M=yield fetch(F);if(!M.ok){const Z=yield M.blob();throw new Xt(M.status,M.statusText,x.url,Z)}let B;B=x.type==="arrayBuffer"||x.type==="image"?M.arrayBuffer():x.type==="json"?M.json():M.text();const H=yield B;if(E.signal.aborted)throw Oe();return{data:H,cacheControl:M.headers.get("Cache-Control"),expires:M.headers.get("Expires")}}))})(f,u);if(Te(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,mustQueue:!0,targetMapId:Vt},u)}var g;return(function(x,E){return new Promise(((F,M)=>{var B;const H=new XMLHttpRequest;H.open(x.method||"GET",x.url,!0),x.type!=="arrayBuffer"&&x.type!=="image"||(H.responseType="arraybuffer");for(const Z in x.headers)H.setRequestHeader(Z,x.headers[Z]);x.type==="json"&&(H.responseType="text",!((B=x.headers)===null||B===void 0)&&B.Accept||H.setRequestHeader("Accept","application/json")),H.withCredentials=x.credentials==="include",H.onerror=()=>{M(new Error(H.statusText))},H.onload=()=>{if(!E.signal.aborted)if((H.status>=200&&H.status<300||H.status===0)&&H.response!==null){let Z=H.response;if(x.type==="json")try{Z=JSON.parse(H.response)}catch(ee){return void M(ee)}F({data:Z,cacheControl:H.getResponseHeader("Cache-Control"),expires:H.getResponseHeader("Expires")})}else{const Z=new Blob([H.response],{type:H.getResponseHeader("Content-Type")});M(new Xt(H.status,H.statusText,x.url,Z))}},E.signal.addEventListener("abort",(()=>{H.abort(),M(Oe())})),H.send(x.body)}))})(f,u)};function Lt(f){if(!f||f.indexOf("://")<=0||f.indexOf("data:image/")===0||f.indexOf("blob:")===0)return!0;const u=new URL(f),g=window.location;return u.protocol===g.protocol&&u.host===g.host}function St(f,u,g){g[f]&&g[f].indexOf(u)!==-1||(g[f]=g[f]||[],g[f].push(u))}function lt(f,u,g){if(g&&g[f]){const x=g[f].indexOf(u);x!==-1&&g[f].splice(x,1)}}class Tn{constructor(u,g={}){re(this,g),this.type=u}}class Mt extends Tn{constructor(u,g={}){super("error",re({error:u},g))}}class $t{on(u,g){return this._listeners=this._listeners||{},St(u,g,this._listeners),this}off(u,g){return lt(u,g,this._listeners),lt(u,g,this._oneTimeListeners),this}once(u,g){return g?(this._oneTimeListeners=this._oneTimeListeners||{},St(u,g,this._oneTimeListeners),this):new Promise((x=>this.once(u,x)))}fire(u,g){typeof u=="string"&&(u=new Tn(u,g||{}));const x=u.type;if(this.listens(x)){u.target=this;const E=this._listeners&&this._listeners[x]?this._listeners[x].slice():[];for(const B of E)B.call(this,u);const F=this._oneTimeListeners&&this._oneTimeListeners[x]?this._oneTimeListeners[x].slice():[];for(const B of F)lt(x,B,this._oneTimeListeners),B.call(this,u);const M=this._eventedParent;M&&(re(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),M.fire(u))}else u instanceof Mt&&console.error(u.error);return this}listens(u){return this._listeners&&this._listeners[u]&&this._listeners[u].length>0||this._oneTimeListeners&&this._oneTimeListeners[u]&&this._oneTimeListeners[u].length>0||this._eventedParent&&this._eventedParent.listens(u)}setEventedParent(u,g){return this._eventedParent=u,this._eventedParentData=g,this}}var Pe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const yn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function wn(f,u){const g={};for(const x in f)x!=="ref"&&(g[x]=f[x]);return yn.forEach((x=>{x in u&&(g[x]=u[x])})),g}function dn(f,u){if(Array.isArray(f)){if(!Array.isArray(u)||f.length!==u.length)return!1;for(let g=0;g<f.length;g++)if(!dn(f[g],u[g]))return!1;return!0}if(typeof f=="object"&&f!==null&&u!==null){if(typeof u!="object"||Object.keys(f).length!==Object.keys(u).length)return!1;for(const g in f)if(!dn(f[g],u[g]))return!1;return!0}return f===u}function An(f,u){f.push(u)}function Cn(f,u,g){An(g,{command:"addSource",args:[f,u[f]]})}function ai(f,u,g){An(u,{command:"removeSource",args:[f]}),g[f]=!0}function Gi(f,u,g,x){ai(f,g,x),Cn(f,u,g)}function ri(f,u,g){let x;for(x in f[g])if(Object.prototype.hasOwnProperty.call(f[g],x)&&x!=="data"&&!dn(f[g][x],u[g][x]))return!1;for(x in u[g])if(Object.prototype.hasOwnProperty.call(u[g],x)&&x!=="data"&&!dn(f[g][x],u[g][x]))return!1;return!0}function ji(f,u,g,x,E,F){f=f||{},u=u||{};for(const M in f)Object.prototype.hasOwnProperty.call(f,M)&&(dn(f[M],u[M])||g.push({command:F,args:[x,M,u[M],E]}));for(const M in u)Object.prototype.hasOwnProperty.call(u,M)&&!Object.prototype.hasOwnProperty.call(f,M)&&(dn(f[M],u[M])||g.push({command:F,args:[x,M,u[M],E]}))}function Si(f){return f.id}function lr(f,u){return f[u.id]=u,f}class Tt{constructor(u,g,x,E){this.message=(u?`${u}: `:"")+x,E&&(this.identifier=E),g!=null&&g.__line__&&(this.line=g.__line__)}}function Ji(f,...u){for(const g of u)for(const x in g)f[x]=g[x];return f}class Qi extends Error{constructor(u,g){super(g),this.message=g,this.key=u}}class Vr{constructor(u,g=[]){this.parent=u,this.bindings={};for(const[x,E]of g)this.bindings[x]=E}concat(u){return new Vr(this,u)}get(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw new Error(`${u} not found in scope.`)}has(u){return!!this.bindings[u]||!!this.parent&&this.parent.has(u)}}const wo={kind:"null"},ln={kind:"number"},Nn={kind:"string"},qn={kind:"boolean"},fr={kind:"color"},us={kind:"object"},pi={kind:"value"},oa={kind:"collator"},sa={kind:"formatted"},Ys={kind:"padding"},zs={kind:"resolvedImage"},je={kind:"variableAnchorOffsetCollection"};function pe(f,u){return{kind:"array",itemType:f,N:u}}function ge(f){if(f.kind==="array"){const u=ge(f.itemType);return typeof f.N=="number"?`array<${u}, ${f.N}>`:f.itemType.kind==="value"?"array":`array<${u}>`}return f.kind}const ke=[wo,ln,Nn,qn,fr,sa,us,pe(pi),Ys,zs,je];function Ne(f,u){if(u.kind==="error")return null;if(f.kind==="array"){if(u.kind==="array"&&(u.N===0&&u.itemType.kind==="value"||!Ne(f.itemType,u.itemType))&&(typeof f.N!="number"||f.N===u.N))return null}else{if(f.kind===u.kind)return null;if(f.kind==="value"){for(const g of ke)if(!Ne(g,u))return null}}return`Expected ${ge(f)} but found ${ge(u)} instead.`}function Je(f,u){return u.some((g=>g.kind===f.kind))}function nt(f,u){return u.some((g=>g==="null"?f===null:g==="array"?Array.isArray(f):g==="object"?f&&!Array.isArray(f)&&typeof f=="object":g===typeof f))}function ct(f,u){return f.kind==="array"&&u.kind==="array"?f.itemType.kind===u.itemType.kind&&typeof f.N=="number":f.kind===u.kind}const Ue=.96422,Pt=.82521,Zt=4/29,Ct=6/29,pn=3*Ct*Ct,$n=Ct*Ct*Ct,Qn=Math.PI/180,Ii=180/Math.PI;function Wn(f){return(f%=360)<0&&(f+=360),f}function xi([f,u,g,x]){let E,F;const M=co((.2225045*(f=Fi(f))+.7168786*(u=Fi(u))+.0606169*(g=Fi(g)))/1);f===u&&u===g?E=F=M:(E=co((.4360747*f+.3850649*u+.1430804*g)/Ue),F=co((.0139322*f+.0971045*u+.7141733*g)/Pt));const B=116*M-16;return[B<0?0:B,500*(E-M),200*(M-F),x]}function Fi(f){return f<=.04045?f/12.92:Math.pow((f+.055)/1.055,2.4)}function co(f){return f>$n?Math.pow(f,1/3):f/pn+Zt}function Rr([f,u,g,x]){let E=(f+16)/116,F=isNaN(u)?E:E+u/500,M=isNaN(g)?E:E-g/200;return E=1*xr(E),F=Ue*xr(F),M=Pt*xr(M),[Li(3.1338561*F-1.6168667*E-.4906146*M),Li(-.9787684*F+1.9161415*E+.033454*M),Li(.0719453*F-.2289914*E+1.4052427*M),x]}function Li(f){return(f=f<=.00304?12.92*f:1.055*Math.pow(f,1/2.4)-.055)<0?0:f>1?1:f}function xr(f){return f>Ct?f*f*f:pn*(f-Zt)}function wr(f){return parseInt(f.padEnd(2,f),16)/255}function No(f,u){return io(u?f/100:f,0,1)}function io(f,u,g){return Math.min(Math.max(u,f),g)}function Xr(f){return!f.some(Number.isNaN)}const dl={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class er{constructor(u,g,x,E=1,F=!0){this.r=u,this.g=g,this.b=x,this.a=E,F||(this.r*=E,this.g*=E,this.b*=E,E||this.overwriteGetter("rgb",[u,g,x,E]))}static parse(u){if(u instanceof er)return u;if(typeof u!="string")return;const g=(function(x){if((x=x.toLowerCase().trim())==="transparent")return[0,0,0,0];const E=dl[x];if(E){const[M,B,H]=E;return[M/255,B/255,H/255,1]}if(x.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(x)){const M=x.length<6?1:2;let B=1;return[wr(x.slice(B,B+=M)),wr(x.slice(B,B+=M)),wr(x.slice(B,B+=M)),wr(x.slice(B,B+M)||"ff")]}if(x.startsWith("rgb")){const M=x.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(M){const[B,H,Z,ee,oe,de,me,Ce,we,Be,He,ht]=M,Qe=[ee||" ",me||" ",Be].join("");if(Qe==="  "||Qe==="  /"||Qe===",,"||Qe===",,,"){const et=[Z,de,we].join(""),It=et==="%%%"?100:et===""?255:0;if(It){const rn=[io(+H/It,0,1),io(+oe/It,0,1),io(+Ce/It,0,1),He?No(+He,ht):1];if(Xr(rn))return rn}}return}}const F=x.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(F){const[M,B,H,Z,ee,oe,de,me,Ce]=F,we=[H||" ",ee||" ",de].join("");if(we==="  "||we==="  /"||we===",,"||we===",,,"){const Be=[+B,io(+Z,0,100),io(+oe,0,100),me?No(+me,Ce):1];if(Xr(Be))return(function([He,ht,Qe,et]){function It(rn){const Rn=(rn+He/30)%12,si=ht*Math.min(Qe,1-Qe);return Qe-si*Math.max(-1,Math.min(Rn-3,9-Rn,1))}return He=Wn(He),ht/=100,Qe/=100,[It(0),It(8),It(4),et]})(Be)}}})(u);return g?new er(...g,!1):void 0}get rgb(){const{r:u,g,b:x,a:E}=this,F=E||1/0;return this.overwriteGetter("rgb",[u/F,g/F,x/F,E])}get hcl(){return this.overwriteGetter("hcl",(function(u){const[g,x,E,F]=xi(u),M=Math.sqrt(x*x+E*E);return[Math.round(1e4*M)?Wn(Math.atan2(E,x)*Ii):NaN,M,g,F]})(this.rgb))}get lab(){return this.overwriteGetter("lab",xi(this.rgb))}overwriteGetter(u,g){return Object.defineProperty(this,u,{value:g}),g}toString(){const[u,g,x,E]=this.rgb;return`rgba(${[u,g,x].map((F=>Math.round(255*F))).join(",")},${E})`}}er.black=new er(0,0,0,1),er.white=new er(1,1,1,1),er.transparent=new er(0,0,0,0),er.red=new er(1,0,0,1);class Bo{constructor(u,g,x){this.sensitivity=u?g?"variant":"case":g?"accent":"base",this.locale=x,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(u,g){return this.collator.compare(u,g)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class $c{constructor(u,g,x,E,F){this.text=u,this.image=g,this.scale=x,this.fontStack=E,this.textColor=F}}class Xs{constructor(u){this.sections=u}static fromString(u){return new Xs([new $c(u,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((u=>u.text.length!==0||u.image&&u.image.name.length!==0))}static factory(u){return u instanceof Xs?u:Xs.fromString(u)}toString(){return this.sections.length===0?"":this.sections.map((u=>u.text)).join("")}}class Mo{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof Mo)return u;if(typeof u=="number")return new Mo([u,u,u,u]);if(Array.isArray(u)&&!(u.length<1||u.length>4)){for(const g of u)if(typeof g!="number")return;switch(u.length){case 1:u=[u[0],u[0],u[0],u[0]];break;case 2:u=[u[0],u[1],u[0],u[1]];break;case 3:u=[u[0],u[1],u[2],u[1]]}return new Mo(u)}}toString(){return JSON.stringify(this.values)}}const Gl=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Js{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof Js)return u;if(Array.isArray(u)&&!(u.length<1)&&u.length%2==0){for(let g=0;g<u.length;g+=2){const x=u[g],E=u[g+1];if(typeof x!="string"||!Gl.has(x)||!Array.isArray(E)||E.length!==2||typeof E[0]!="number"||typeof E[1]!="number")return}return new Js(u)}}toString(){return JSON.stringify(this.values)}}class Ns{constructor(u){this.name=u.name,this.available=u.available}toString(){return this.name}static fromString(u){return u?new Ns({name:u,available:!1}):null}}function cu(f,u,g,x){return typeof f=="number"&&f>=0&&f<=255&&typeof u=="number"&&u>=0&&u<=255&&typeof g=="number"&&g>=0&&g<=255?x===void 0||typeof x=="number"&&x>=0&&x<=1?null:`Invalid rgba value [${[f,u,g,x].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof x=="number"?[f,u,g,x]:[f,u,g]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function du(f){if(f===null||typeof f=="string"||typeof f=="boolean"||typeof f=="number"||f instanceof er||f instanceof Bo||f instanceof Xs||f instanceof Mo||f instanceof Js||f instanceof Ns)return!0;if(Array.isArray(f)){for(const u of f)if(!du(u))return!1;return!0}if(typeof f=="object"){for(const u in f)if(!du(f[u]))return!1;return!0}return!1}function ro(f){if(f===null)return wo;if(typeof f=="string")return Nn;if(typeof f=="boolean")return qn;if(typeof f=="number")return ln;if(f instanceof er)return fr;if(f instanceof Bo)return oa;if(f instanceof Xs)return sa;if(f instanceof Mo)return Ys;if(f instanceof Js)return je;if(f instanceof Ns)return zs;if(Array.isArray(f)){const u=f.length;let g;for(const x of f){const E=ro(x);if(g){if(g===E)continue;g=pi;break}g=E}return pe(g||pi,u)}return us}function hl(f){const u=typeof f;return f===null?"":u==="string"||u==="number"||u==="boolean"?String(f):f instanceof er||f instanceof Xs||f instanceof Mo||f instanceof Js||f instanceof Ns?f.toString():JSON.stringify(f)}class Co{constructor(u,g){this.type=u,this.value=g}static parse(u,g){if(u.length!==2)return g.error(`'literal' expression requires exactly one argument, but found ${u.length-1} instead.`);if(!du(u[1]))return g.error("invalid value");const x=u[1];let E=ro(x);const F=g.expectedType;return E.kind!=="array"||E.N!==0||!F||F.kind!=="array"||typeof F.N=="number"&&F.N!==0||(E=F),new Co(E,x)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class pr{constructor(u){this.name="ExpressionEvaluationError",this.message=u}toJSON(){return this.message}}const hu={string:Nn,number:ln,boolean:qn,object:us};class Ra{constructor(u,g){this.type=u,this.args=g}static parse(u,g){if(u.length<2)return g.error("Expected at least one argument.");let x,E=1;const F=u[0];if(F==="array"){let B,H;if(u.length>2){const Z=u[1];if(typeof Z!="string"||!(Z in hu)||Z==="object")return g.error('The item type argument of "array" must be one of string, number, boolean',1);B=hu[Z],E++}else B=pi;if(u.length>3){if(u[2]!==null&&(typeof u[2]!="number"||u[2]<0||u[2]!==Math.floor(u[2])))return g.error('The length argument to "array" must be a positive integer literal',2);H=u[2],E++}x=pe(B,H)}else{if(!hu[F])throw new Error(`Types doesn't contain name = ${F}`);x=hu[F]}const M=[];for(;E<u.length;E++){const B=g.parse(u[E],E,pi);if(!B)return null;M.push(B)}return new Ra(x,M)}evaluate(u){for(let g=0;g<this.args.length;g++){const x=this.args[g].evaluate(u);if(!Ne(this.type,ro(x)))return x;if(g===this.args.length-1)throw new pr(`Expected value to be of type ${ge(this.type)}, but found ${ge(ro(x))} instead.`)}throw new Error}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every((u=>u.outputDefined()))}}const Mu={"to-boolean":qn,"to-color":fr,"to-number":ln,"to-string":Nn};class Cs{constructor(u,g){this.type=u,this.args=g}static parse(u,g){if(u.length<2)return g.error("Expected at least one argument.");const x=u[0];if(!Mu[x])throw new Error(`Can't parse ${x} as it is not part of the known types`);if((x==="to-boolean"||x==="to-string")&&u.length!==2)return g.error("Expected one argument.");const E=Mu[x],F=[];for(let M=1;M<u.length;M++){const B=g.parse(u[M],M,pi);if(!B)return null;F.push(B)}return new Cs(E,F)}evaluate(u){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(u);case"color":{let g,x;for(const E of this.args){if(g=E.evaluate(u),x=null,g instanceof er)return g;if(typeof g=="string"){const F=u.parseColor(g);if(F)return F}else if(Array.isArray(g)&&(x=g.length<3||g.length>4?`Invalid rbga value ${JSON.stringify(g)}: expected an array containing either three or four numeric values.`:cu(g[0],g[1],g[2],g[3]),!x))return new er(g[0]/255,g[1]/255,g[2]/255,g[3])}throw new pr(x||`Could not parse color from value '${typeof g=="string"?g:JSON.stringify(g)}'`)}case"padding":{let g;for(const x of this.args){g=x.evaluate(u);const E=Mo.parse(g);if(E)return E}throw new pr(`Could not parse padding from value '${typeof g=="string"?g:JSON.stringify(g)}'`)}case"variableAnchorOffsetCollection":{let g;for(const x of this.args){g=x.evaluate(u);const E=Js.parse(g);if(E)return E}throw new pr(`Could not parse variableAnchorOffsetCollection from value '${typeof g=="string"?g:JSON.stringify(g)}'`)}case"number":{let g=null;for(const x of this.args){if(g=x.evaluate(u),g===null)return 0;const E=Number(g);if(!isNaN(E))return E}throw new pr(`Could not convert ${JSON.stringify(g)} to number.`)}case"formatted":return Xs.fromString(hl(this.args[0].evaluate(u)));case"resolvedImage":return Ns.fromString(hl(this.args[0].evaluate(u)));default:return hl(this.args[0].evaluate(u))}}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every((u=>u.outputDefined()))}}const Wc=["Unknown","Point","LineString","Polygon"];class Pd{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Wc[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(u){let g=this._parseColorCache[u];return g||(g=this._parseColorCache[u]=er.parse(u)),g}}class Uo{constructor(u,g,x=[],E,F=new Vr,M=[]){this.registry=u,this.path=x,this.key=x.map((B=>`[${B}]`)).join(""),this.scope=F,this.errors=M,this.expectedType=E,this._isConstant=g}parse(u,g,x,E,F={}){return g?this.concat(g,x,E)._parse(u,F):this._parse(u,F)}_parse(u,g){function x(E,F,M){return M==="assert"?new Ra(F,[E]):M==="coerce"?new Cs(F,[E]):E}if(u!==null&&typeof u!="string"&&typeof u!="boolean"&&typeof u!="number"||(u=["literal",u]),Array.isArray(u)){if(u.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const E=u[0];if(typeof E!="string")return this.error(`Expression name must be a string, but found ${typeof E} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const F=this.registry[E];if(F){let M=F.parse(u,this);if(!M)return null;if(this.expectedType){const B=this.expectedType,H=M.type;if(B.kind!=="string"&&B.kind!=="number"&&B.kind!=="boolean"&&B.kind!=="object"&&B.kind!=="array"||H.kind!=="value")if(B.kind!=="color"&&B.kind!=="formatted"&&B.kind!=="resolvedImage"||H.kind!=="value"&&H.kind!=="string")if(B.kind!=="padding"||H.kind!=="value"&&H.kind!=="number"&&H.kind!=="array")if(B.kind!=="variableAnchorOffsetCollection"||H.kind!=="value"&&H.kind!=="array"){if(this.checkSubtype(B,H))return null}else M=x(M,B,g.typeAnnotation||"coerce");else M=x(M,B,g.typeAnnotation||"coerce");else M=x(M,B,g.typeAnnotation||"coerce");else M=x(M,B,g.typeAnnotation||"assert")}if(!(M instanceof Co)&&M.type.kind!=="resolvedImage"&&this._isConstant(M)){const B=new Pd;try{M=new Co(M.type,M.evaluate(B))}catch(H){return this.error(H.message),null}}return M}return this.error(`Unknown expression "${E}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(u===void 0?"'undefined' value invalid. Use null instead.":typeof u=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof u} instead.`)}concat(u,g,x){const E=typeof u=="number"?this.path.concat(u):this.path,F=x?this.scope.concat(x):this.scope;return new Uo(this.registry,this._isConstant,E,g||null,F,this.errors)}error(u,...g){const x=`${this.key}${g.map((E=>`[${E}]`)).join("")}`;this.errors.push(new Qi(x,u))}checkSubtype(u,g){const x=Ne(u,g);return x&&this.error(x),x}}class aa{constructor(u,g){this.type=g.type,this.bindings=[].concat(u),this.result=g}evaluate(u){return this.result.evaluate(u)}eachChild(u){for(const g of this.bindings)u(g[1]);u(this.result)}static parse(u,g){if(u.length<4)return g.error(`Expected at least 3 arguments, but found ${u.length-1} instead.`);const x=[];for(let F=1;F<u.length-1;F+=2){const M=u[F];if(typeof M!="string")return g.error(`Expected string, but found ${typeof M} instead.`,F);if(/[^a-zA-Z0-9_]/.test(M))return g.error("Variable names must contain only alphanumeric characters or '_'.",F);const B=g.parse(u[F+1],F+1);if(!B)return null;x.push([M,B])}const E=g.parse(u[u.length-1],u.length-1,g.expectedType,x);return E?new aa(x,E):null}outputDefined(){return this.result.outputDefined()}}class ur{constructor(u,g){this.type=g.type,this.name=u,this.boundExpression=g}static parse(u,g){if(u.length!==2||typeof u[1]!="string")return g.error("'var' expression requires exactly one string literal argument.");const x=u[1];return g.scope.has(x)?new ur(x,g.scope.get(x)):g.error(`Unknown variable "${x}". Make sure "${x}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(u){return this.boundExpression.evaluate(u)}eachChild(){}outputDefined(){return!1}}class Uc{constructor(u,g,x){this.type=u,this.index=g,this.input=x}static parse(u,g){if(u.length!==3)return g.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const x=g.parse(u[1],1,ln),E=g.parse(u[2],2,pe(g.expectedType||pi));return x&&E?new Uc(E.type.itemType,x,E):null}evaluate(u){const g=this.index.evaluate(u),x=this.input.evaluate(u);if(g<0)throw new pr(`Array index out of bounds: ${g} < 0.`);if(g>=x.length)throw new pr(`Array index out of bounds: ${g} > ${x.length-1}.`);if(g!==Math.floor(g))throw new pr(`Array index must be an integer, but found ${g} instead.`);return x[g]}eachChild(u){u(this.index),u(this.input)}outputDefined(){return!1}}class la{constructor(u,g){this.type=qn,this.needle=u,this.haystack=g}static parse(u,g){if(u.length!==3)return g.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const x=g.parse(u[1],1,pi),E=g.parse(u[2],2,pi);return x&&E?Je(x.type,[qn,Nn,ln,wo,pi])?new la(x,E):g.error(`Expected first argument to be of type boolean, string, number or null, but found ${ge(x.type)} instead`):null}evaluate(u){const g=this.needle.evaluate(u),x=this.haystack.evaluate(u);if(!x)return!1;if(!nt(g,["boolean","string","number","null"]))throw new pr(`Expected first argument to be of type boolean, string, number or null, but found ${ge(ro(g))} instead.`);if(!nt(x,["string","array"]))throw new pr(`Expected second argument to be of type array or string, but found ${ge(ro(x))} instead.`);return x.indexOf(g)>=0}eachChild(u){u(this.needle),u(this.haystack)}outputDefined(){return!0}}class jl{constructor(u,g,x){this.type=ln,this.needle=u,this.haystack=g,this.fromIndex=x}static parse(u,g){if(u.length<=2||u.length>=5)return g.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const x=g.parse(u[1],1,pi),E=g.parse(u[2],2,pi);if(!x||!E)return null;if(!Je(x.type,[qn,Nn,ln,wo,pi]))return g.error(`Expected first argument to be of type boolean, string, number or null, but found ${ge(x.type)} instead`);if(u.length===4){const F=g.parse(u[3],3,ln);return F?new jl(x,E,F):null}return new jl(x,E)}evaluate(u){const g=this.needle.evaluate(u),x=this.haystack.evaluate(u);if(!nt(g,["boolean","string","number","null"]))throw new pr(`Expected first argument to be of type boolean, string, number or null, but found ${ge(ro(g))} instead.`);let E;if(this.fromIndex&&(E=this.fromIndex.evaluate(u)),nt(x,["string"])){const F=x.indexOf(g,E);return F===-1?-1:[...x.slice(0,F)].length}if(nt(x,["array"]))return x.indexOf(g,E);throw new pr(`Expected second argument to be of type array or string, but found ${ge(ro(x))} instead.`)}eachChild(u){u(this.needle),u(this.haystack),this.fromIndex&&u(this.fromIndex)}outputDefined(){return!1}}class bt{constructor(u,g,x,E,F,M){this.inputType=u,this.type=g,this.input=x,this.cases=E,this.outputs=F,this.otherwise=M}static parse(u,g){if(u.length<5)return g.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if(u.length%2!=1)return g.error("Expected an even number of arguments.");let x,E;g.expectedType&&g.expectedType.kind!=="value"&&(E=g.expectedType);const F={},M=[];for(let Z=2;Z<u.length-1;Z+=2){let ee=u[Z];const oe=u[Z+1];Array.isArray(ee)||(ee=[ee]);const de=g.concat(Z);if(ee.length===0)return de.error("Expected at least one branch label.");for(const Ce of ee){if(typeof Ce!="number"&&typeof Ce!="string")return de.error("Branch labels must be numbers or strings.");if(typeof Ce=="number"&&Math.abs(Ce)>Number.MAX_SAFE_INTEGER)return de.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ce=="number"&&Math.floor(Ce)!==Ce)return de.error("Numeric branch labels must be integer values.");if(x){if(de.checkSubtype(x,ro(Ce)))return null}else x=ro(Ce);if(F[String(Ce)]!==void 0)return de.error("Branch labels must be unique.");F[String(Ce)]=M.length}const me=g.parse(oe,Z,E);if(!me)return null;E=E||me.type,M.push(me)}const B=g.parse(u[1],1,pi);if(!B)return null;const H=g.parse(u[u.length-1],u.length-1,E);return H?B.type.kind!=="value"&&g.concat(1).checkSubtype(x,B.type)?null:new bt(x,E,B,F,M,H):null}evaluate(u){const g=this.input.evaluate(u);return(ro(g)===this.inputType&&this.outputs[this.cases[g]]||this.otherwise).evaluate(u)}eachChild(u){u(this.input),this.outputs.forEach(u),u(this.otherwise)}outputDefined(){return this.outputs.every((u=>u.outputDefined()))&&this.otherwise.outputDefined()}}class We{constructor(u,g,x){this.type=u,this.branches=g,this.otherwise=x}static parse(u,g){if(u.length<4)return g.error(`Expected at least 3 arguments, but found only ${u.length-1}.`);if(u.length%2!=0)return g.error("Expected an odd number of arguments.");let x;g.expectedType&&g.expectedType.kind!=="value"&&(x=g.expectedType);const E=[];for(let M=1;M<u.length-1;M+=2){const B=g.parse(u[M],M,qn);if(!B)return null;const H=g.parse(u[M+1],M+1,x);if(!H)return null;E.push([B,H]),x=x||H.type}const F=g.parse(u[u.length-1],u.length-1,x);if(!F)return null;if(!x)throw new Error("Can't infer output type");return new We(x,E,F)}evaluate(u){for(const[g,x]of this.branches)if(g.evaluate(u))return x.evaluate(u);return this.otherwise.evaluate(u)}eachChild(u){for(const[g,x]of this.branches)u(g),u(x);u(this.otherwise)}outputDefined(){return this.branches.every((([u,g])=>g.outputDefined()))&&this.otherwise.outputDefined()}}class at{constructor(u,g,x,E){this.type=u,this.input=g,this.beginIndex=x,this.endIndex=E}static parse(u,g){if(u.length<=2||u.length>=5)return g.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const x=g.parse(u[1],1,pi),E=g.parse(u[2],2,ln);if(!x||!E)return null;if(!Je(x.type,[pe(pi),Nn,pi]))return g.error(`Expected first argument to be of type array or string, but found ${ge(x.type)} instead`);if(u.length===4){const F=g.parse(u[3],3,ln);return F?new at(x.type,x,E,F):null}return new at(x.type,x,E)}evaluate(u){const g=this.input.evaluate(u),x=this.beginIndex.evaluate(u);let E;if(this.endIndex&&(E=this.endIndex.evaluate(u)),nt(g,["string"]))return[...g].slice(x,E).join("");if(nt(g,["array"]))return g.slice(x,E);throw new pr(`Expected first argument to be of type array or string, but found ${ge(ro(g))} instead.`)}eachChild(u){u(this.input),u(this.beginIndex),this.endIndex&&u(this.endIndex)}outputDefined(){return!1}}function ft(f,u){const g=f.length-1;let x,E,F=0,M=g,B=0;for(;F<=M;)if(B=Math.floor((F+M)/2),x=f[B],E=f[B+1],x<=u){if(B===g||u<E)return B;F=B+1}else{if(!(x>u))throw new pr("Input is not a number.");M=B-1}return 0}class Wt{constructor(u,g,x){this.type=u,this.input=g,this.labels=[],this.outputs=[];for(const[E,F]of x)this.labels.push(E),this.outputs.push(F)}static parse(u,g){if(u.length-1<4)return g.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return g.error("Expected an even number of arguments.");const x=g.parse(u[1],1,ln);if(!x)return null;const E=[];let F=null;g.expectedType&&g.expectedType.kind!=="value"&&(F=g.expectedType);for(let M=1;M<u.length;M+=2){const B=M===1?-1/0:u[M],H=u[M+1],Z=M,ee=M+1;if(typeof B!="number")return g.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Z);if(E.length&&E[E.length-1][0]>=B)return g.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Z);const oe=g.parse(H,ee,F);if(!oe)return null;F=F||oe.type,E.push([B,oe])}return new Wt(F,x,E)}evaluate(u){const g=this.labels,x=this.outputs;if(g.length===1)return x[0].evaluate(u);const E=this.input.evaluate(u);if(E<=g[0])return x[0].evaluate(u);const F=g.length;return E>=g[F-1]?x[F-1].evaluate(u):x[ft(g,E)].evaluate(u)}eachChild(u){u(this.input);for(const g of this.outputs)u(g)}outputDefined(){return this.outputs.every((u=>u.outputDefined()))}}function ei(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var Et=Bt;function Bt(f,u,g,x){this.cx=3*f,this.bx=3*(g-f)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(x-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=f,this.p1y=u,this.p2x=g,this.p2y=x}Bt.prototype={sampleCurveX:function(f){return((this.ax*f+this.bx)*f+this.cx)*f},sampleCurveY:function(f){return((this.ay*f+this.by)*f+this.cy)*f},sampleCurveDerivativeX:function(f){return(3*this.ax*f+2*this.bx)*f+this.cx},solveCurveX:function(f,u){if(u===void 0&&(u=1e-6),f<0)return 0;if(f>1)return 1;for(var g=f,x=0;x<8;x++){var E=this.sampleCurveX(g)-f;if(Math.abs(E)<u)return g;var F=this.sampleCurveDerivativeX(g);if(Math.abs(F)<1e-6)break;g-=E/F}var M=0,B=1;for(g=f,x=0;x<20&&(E=this.sampleCurveX(g),!(Math.abs(E-f)<u));x++)f>E?M=g:B=g,g=.5*(B-M)+M;return g},solve:function(f,u){return this.sampleCurveY(this.solveCurveX(f,u))}};var wt=ei(Et);function Gt(f,u,g){return f+g*(u-f)}function ui(f,u,g){return f.map(((x,E)=>Gt(x,u[E],g)))}const Gn={number:Gt,color:function(f,u,g,x="rgb"){switch(x){case"rgb":{const[E,F,M,B]=ui(f.rgb,u.rgb,g);return new er(E,F,M,B,!1)}case"hcl":{const[E,F,M,B]=f.hcl,[H,Z,ee,oe]=u.hcl;let de,me;if(isNaN(E)||isNaN(H))isNaN(E)?isNaN(H)?de=NaN:(de=H,M!==1&&M!==0||(me=Z)):(de=E,ee!==1&&ee!==0||(me=F));else{let ht=H-E;H>E&&ht>180?ht-=360:H<E&&E-H>180&&(ht+=360),de=E+g*ht}const[Ce,we,Be,He]=(function([ht,Qe,et,It]){return ht=isNaN(ht)?0:ht*Qn,Rr([et,Math.cos(ht)*Qe,Math.sin(ht)*Qe,It])})([de,me??Gt(F,Z,g),Gt(M,ee,g),Gt(B,oe,g)]);return new er(Ce,we,Be,He,!1)}case"lab":{const[E,F,M,B]=Rr(ui(f.lab,u.lab,g));return new er(E,F,M,B,!1)}}},array:ui,padding:function(f,u,g){return new Mo(ui(f.values,u.values,g))},variableAnchorOffsetCollection:function(f,u,g){const x=f.values,E=u.values;if(x.length!==E.length)throw new pr(`Cannot interpolate values of different length. from: ${f.toString()}, to: ${u.toString()}`);const F=[];for(let M=0;M<x.length;M+=2){if(x[M]!==E[M])throw new pr(`Cannot interpolate values containing mismatched anchors. from[${M}]: ${x[M]}, to[${M}]: ${E[M]}`);F.push(x[M]);const[B,H]=x[M+1],[Z,ee]=E[M+1];F.push([Gt(B,Z,g),Gt(H,ee,g)])}return new Js(F)}};class Ut{constructor(u,g,x,E,F){this.type=u,this.operator=g,this.interpolation=x,this.input=E,this.labels=[],this.outputs=[];for(const[M,B]of F)this.labels.push(M),this.outputs.push(B)}static interpolationFactor(u,g,x,E){let F=0;if(u.name==="exponential")F=Ri(g,u.base,x,E);else if(u.name==="linear")F=Ri(g,1,x,E);else if(u.name==="cubic-bezier"){const M=u.controlPoints;F=new wt(M[0],M[1],M[2],M[3]).solve(Ri(g,1,x,E))}return F}static parse(u,g){let[x,E,F,...M]=u;if(!Array.isArray(E)||E.length===0)return g.error("Expected an interpolation type expression.",1);if(E[0]==="linear")E={name:"linear"};else if(E[0]==="exponential"){const Z=E[1];if(typeof Z!="number")return g.error("Exponential interpolation requires a numeric base.",1,1);E={name:"exponential",base:Z}}else{if(E[0]!=="cubic-bezier")return g.error(`Unknown interpolation type ${String(E[0])}`,1,0);{const Z=E.slice(1);if(Z.length!==4||Z.some((ee=>typeof ee!="number"||ee<0||ee>1)))return g.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);E={name:"cubic-bezier",controlPoints:Z}}}if(u.length-1<4)return g.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return g.error("Expected an even number of arguments.");if(F=g.parse(F,2,ln),!F)return null;const B=[];let H=null;x==="interpolate-hcl"||x==="interpolate-lab"?H=fr:g.expectedType&&g.expectedType.kind!=="value"&&(H=g.expectedType);for(let Z=0;Z<M.length;Z+=2){const ee=M[Z],oe=M[Z+1],de=Z+3,me=Z+4;if(typeof ee!="number")return g.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',de);if(B.length&&B[B.length-1][0]>=ee)return g.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',de);const Ce=g.parse(oe,me,H);if(!Ce)return null;H=H||Ce.type,B.push([ee,Ce])}return ct(H,ln)||ct(H,fr)||ct(H,Ys)||ct(H,je)||ct(H,pe(ln))?new Ut(H,x,E,F,B):g.error(`Type ${ge(H)} is not interpolatable.`)}evaluate(u){const g=this.labels,x=this.outputs;if(g.length===1)return x[0].evaluate(u);const E=this.input.evaluate(u);if(E<=g[0])return x[0].evaluate(u);const F=g.length;if(E>=g[F-1])return x[F-1].evaluate(u);const M=ft(g,E),B=Ut.interpolationFactor(this.interpolation,E,g[M],g[M+1]),H=x[M].evaluate(u),Z=x[M+1].evaluate(u);switch(this.operator){case"interpolate":return Gn[this.type.kind](H,Z,B);case"interpolate-hcl":return Gn.color(H,Z,B,"hcl");case"interpolate-lab":return Gn.color(H,Z,B,"lab")}}eachChild(u){u(this.input);for(const g of this.outputs)u(g)}outputDefined(){return this.outputs.every((u=>u.outputDefined()))}}function Ri(f,u,g,x){const E=x-g,F=f-g;return E===0?0:u===1?F/E:(Math.pow(u,F)-1)/(Math.pow(u,E)-1)}class Ze{constructor(u,g){this.type=u,this.args=g}static parse(u,g){if(u.length<2)return g.error("Expectected at least one argument.");let x=null;const E=g.expectedType;E&&E.kind!=="value"&&(x=E);const F=[];for(const B of u.slice(1)){const H=g.parse(B,1+F.length,x,void 0,{typeAnnotation:"omit"});if(!H)return null;x=x||H.type,F.push(H)}if(!x)throw new Error("No output type");const M=E&&F.some((B=>Ne(E,B.type)));return new Ze(M?pi:x,F)}evaluate(u){let g,x=null,E=0;for(const F of this.args)if(E++,x=F.evaluate(u),x&&x instanceof Ns&&!x.available&&(g||(g=x.name),x=null,E===this.args.length&&(x=g)),x!==null)break;return x}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every((u=>u.outputDefined()))}}function _t(f,u){return f==="=="||f==="!="?u.kind==="boolean"||u.kind==="string"||u.kind==="number"||u.kind==="null"||u.kind==="value":u.kind==="string"||u.kind==="number"||u.kind==="value"}function dt(f,u,g,x){return x.compare(u,g)===0}function vt(f,u,g){const x=f!=="=="&&f!=="!=";return class bN{constructor(F,M,B){this.type=qn,this.lhs=F,this.rhs=M,this.collator=B,this.hasUntypedArgument=F.type.kind==="value"||M.type.kind==="value"}static parse(F,M){if(F.length!==3&&F.length!==4)return M.error("Expected two or three arguments.");const B=F[0];let H=M.parse(F[1],1,pi);if(!H)return null;if(!_t(B,H.type))return M.concat(1).error(`"${B}" comparisons are not supported for type '${ge(H.type)}'.`);let Z=M.parse(F[2],2,pi);if(!Z)return null;if(!_t(B,Z.type))return M.concat(2).error(`"${B}" comparisons are not supported for type '${ge(Z.type)}'.`);if(H.type.kind!==Z.type.kind&&H.type.kind!=="value"&&Z.type.kind!=="value")return M.error(`Cannot compare types '${ge(H.type)}' and '${ge(Z.type)}'.`);x&&(H.type.kind==="value"&&Z.type.kind!=="value"?H=new Ra(Z.type,[H]):H.type.kind!=="value"&&Z.type.kind==="value"&&(Z=new Ra(H.type,[Z])));let ee=null;if(F.length===4){if(H.type.kind!=="string"&&Z.type.kind!=="string"&&H.type.kind!=="value"&&Z.type.kind!=="value")return M.error("Cannot use collator to compare non-string types.");if(ee=M.parse(F[3],3,oa),!ee)return null}return new bN(H,Z,ee)}evaluate(F){const M=this.lhs.evaluate(F),B=this.rhs.evaluate(F);if(x&&this.hasUntypedArgument){const H=ro(M),Z=ro(B);if(H.kind!==Z.kind||H.kind!=="string"&&H.kind!=="number")throw new pr(`Expected arguments for "${f}" to be (string, string) or (number, number), but found (${H.kind}, ${Z.kind}) instead.`)}if(this.collator&&!x&&this.hasUntypedArgument){const H=ro(M),Z=ro(B);if(H.kind!=="string"||Z.kind!=="string")return u(F,M,B)}return this.collator?g(F,M,B,this.collator.evaluate(F)):u(F,M,B)}eachChild(F){F(this.lhs),F(this.rhs),this.collator&&F(this.collator)}outputDefined(){return!0}}}const Un=vt("==",(function(f,u,g){return u===g}),dt),Zn=vt("!=",(function(f,u,g){return u!==g}),(function(f,u,g,x){return!dt(0,u,g,x)})),Sn=vt("<",(function(f,u,g){return u<g}),(function(f,u,g,x){return x.compare(u,g)<0})),Ai=vt(">",(function(f,u,g){return u>g}),(function(f,u,g,x){return x.compare(u,g)>0})),dr=vt("<=",(function(f,u,g){return u<=g}),(function(f,u,g,x){return x.compare(u,g)<=0})),Jt=vt(">=",(function(f,u,g){return u>=g}),(function(f,u,g,x){return x.compare(u,g)>=0}));class Xn{constructor(u,g,x){this.type=oa,this.locale=x,this.caseSensitive=u,this.diacriticSensitive=g}static parse(u,g){if(u.length!==2)return g.error("Expected one argument.");const x=u[1];if(typeof x!="object"||Array.isArray(x))return g.error("Collator options argument must be an object.");const E=g.parse(x["case-sensitive"]!==void 0&&x["case-sensitive"],1,qn);if(!E)return null;const F=g.parse(x["diacritic-sensitive"]!==void 0&&x["diacritic-sensitive"],1,qn);if(!F)return null;let M=null;return x.locale&&(M=g.parse(x.locale,1,Nn),!M)?null:new Xn(E,F,M)}evaluate(u){return new Bo(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)}eachChild(u){u(this.caseSensitive),u(this.diacriticSensitive),this.locale&&u(this.locale)}outputDefined(){return!1}}class Or{constructor(u,g,x,E,F){this.type=Nn,this.number=u,this.locale=g,this.currency=x,this.minFractionDigits=E,this.maxFractionDigits=F}static parse(u,g){if(u.length!==3)return g.error("Expected two arguments.");const x=g.parse(u[1],1,ln);if(!x)return null;const E=u[2];if(typeof E!="object"||Array.isArray(E))return g.error("NumberFormat options argument must be an object.");let F=null;if(E.locale&&(F=g.parse(E.locale,1,Nn),!F))return null;let M=null;if(E.currency&&(M=g.parse(E.currency,1,Nn),!M))return null;let B=null;if(E["min-fraction-digits"]&&(B=g.parse(E["min-fraction-digits"],1,ln),!B))return null;let H=null;return E["max-fraction-digits"]&&(H=g.parse(E["max-fraction-digits"],1,ln),!H)?null:new Or(x,F,M,B,H)}evaluate(u){return new Intl.NumberFormat(this.locale?this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0}).format(this.number.evaluate(u))}eachChild(u){u(this.number),this.locale&&u(this.locale),this.currency&&u(this.currency),this.minFractionDigits&&u(this.minFractionDigits),this.maxFractionDigits&&u(this.maxFractionDigits)}outputDefined(){return!1}}class Io{constructor(u){this.type=sa,this.sections=u}static parse(u,g){if(u.length<2)return g.error("Expected at least one argument.");const x=u[1];if(!Array.isArray(x)&&typeof x=="object")return g.error("First argument must be an image or text section.");const E=[];let F=!1;for(let M=1;M<=u.length-1;++M){const B=u[M];if(F&&typeof B=="object"&&!Array.isArray(B)){F=!1;let H=null;if(B["font-scale"]&&(H=g.parse(B["font-scale"],1,ln),!H))return null;let Z=null;if(B["text-font"]&&(Z=g.parse(B["text-font"],1,pe(Nn)),!Z))return null;let ee=null;if(B["text-color"]&&(ee=g.parse(B["text-color"],1,fr),!ee))return null;const oe=E[E.length-1];oe.scale=H,oe.font=Z,oe.textColor=ee}else{const H=g.parse(u[M],1,pi);if(!H)return null;const Z=H.type.kind;if(Z!=="string"&&Z!=="value"&&Z!=="null"&&Z!=="resolvedImage")return g.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");F=!0,E.push({content:H,scale:null,font:null,textColor:null})}}return new Io(E)}evaluate(u){return new Xs(this.sections.map((g=>{const x=g.content.evaluate(u);return ro(x)===zs?new $c("",x,null,null,null):new $c(hl(x),null,g.scale?g.scale.evaluate(u):null,g.font?g.font.evaluate(u).join(","):null,g.textColor?g.textColor.evaluate(u):null)})))}eachChild(u){for(const g of this.sections)u(g.content),g.scale&&u(g.scale),g.font&&u(g.font),g.textColor&&u(g.textColor)}outputDefined(){return!1}}class ua{constructor(u){this.type=zs,this.input=u}static parse(u,g){if(u.length!==2)return g.error("Expected two arguments.");const x=g.parse(u[1],1,Nn);return x?new ua(x):g.error("No image name provided.")}evaluate(u){const g=this.input.evaluate(u),x=Ns.fromString(g);return x&&u.availableImages&&(x.available=u.availableImages.indexOf(g)>-1),x}eachChild(u){u(this.input)}outputDefined(){return!1}}class Mr{constructor(u){this.type=ln,this.input=u}static parse(u,g){if(u.length!==2)return g.error(`Expected 1 argument, but found ${u.length-1} instead.`);const x=g.parse(u[1],1);return x?x.type.kind!=="array"&&x.type.kind!=="string"&&x.type.kind!=="value"?g.error(`Expected argument of type string or array, but found ${ge(x.type)} instead.`):new Mr(x):null}evaluate(u){const g=this.input.evaluate(u);if(typeof g=="string")return[...g].length;if(Array.isArray(g))return g.length;throw new pr(`Expected value to be of type string or array, but found ${ge(ro(g))} instead.`)}eachChild(u){u(this.input)}outputDefined(){return!1}}const Ir=8192;function ca(f,u){const g=(180+f[0])/360,x=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f[1]*Math.PI/360)))/360,E=Math.pow(2,u.z);return[Math.round(g*E*Ir),Math.round(x*E*Ir)]}function oo(f,u){const g=Math.pow(2,u.z);return[(E=(f[0]/Ir+u.x)/g,360*E-180),(x=(f[1]/Ir+u.y)/g,360/Math.PI*Math.atan(Math.exp((180-360*x)*Math.PI/180))-90)];var x,E}function _s(f,u){f[0]=Math.min(f[0],u[0]),f[1]=Math.min(f[1],u[1]),f[2]=Math.max(f[2],u[0]),f[3]=Math.max(f[3],u[1])}function nr(f,u){return!(f[0]<=u[0]||f[2]>=u[2]||f[1]<=u[1]||f[3]>=u[3])}function $i(f,u,g){const x=f[0]-u[0],E=f[1]-u[1],F=f[0]-g[0],M=f[1]-g[1];return x*M-F*E==0&&x*F<=0&&E*M<=0}function Qs(f,u,g,x){return(E=[x[0]-g[0],x[1]-g[1]])[0]*(F=[u[0]-f[0],u[1]-f[1]])[1]-E[1]*F[0]!=0&&!(!Dh(f,u,g,x)||!Dh(g,x,f,u));var E,F}function $a(f,u,g){for(const x of g)for(let E=0;E<x.length-1;++E)if(Qs(f,u,x[E],x[E+1]))return!0;return!1}function Hl(f,u,g=!1){let x=!1;for(const B of u)for(let H=0;H<B.length-1;H++){if($i(f,B[H],B[H+1]))return g;(F=B[H])[1]>(E=f)[1]!=(M=B[H+1])[1]>E[1]&&E[0]<(M[0]-F[0])*(E[1]-F[1])/(M[1]-F[1])+F[0]&&(x=!x)}var E,F,M;return x}function fl(f,u){for(const g of u)if(Hl(f,g))return!0;return!1}function Wp(f,u){for(const g of f)if(!Hl(g,u))return!1;for(let g=0;g<f.length-1;++g)if($a(f[g],f[g+1],u))return!1;return!0}function Am(f,u){for(const g of u)if(Wp(f,g))return!0;return!1}function Dh(f,u,g,x){const E=x[0]-g[0],F=x[1]-g[1],M=(f[0]-g[0])*F-E*(f[1]-g[1]),B=(u[0]-g[0])*F-E*(u[1]-g[1]);return M>0&&B<0||M<0&&B>0}function Ef(f,u,g){const x=[];for(let E=0;E<f.length;E++){const F=[];for(let M=0;M<f[E].length;M++){const B=ca(f[E][M],g);_s(u,B),F.push(B)}x.push(F)}return x}function Up(f,u,g){const x=[];for(let E=0;E<f.length;E++){const F=Ef(f[E],u,g);x.push(F)}return x}function qp(f,u,g,x){if(f[0]<g[0]||f[0]>g[2]){const E=.5*x;let F=f[0]-g[0]>E?-x:g[0]-f[0]>E?x:0;F===0&&(F=f[0]-g[2]>E?-x:g[2]-f[0]>E?x:0),f[0]+=F}_s(u,f)}function Aa(f,u,g,x){const E=Math.pow(2,x.z)*Ir,F=[x.x*Ir,x.y*Ir],M=[];for(const B of f)for(const H of B){const Z=[H.x+F[0],H.y+F[1]];qp(Z,u,g,E),M.push(Z)}return M}function Tm(f,u,g,x){const E=Math.pow(2,x.z)*Ir,F=[x.x*Ir,x.y*Ir],M=[];for(const H of f){const Z=[];for(const ee of H){const oe=[ee.x+F[0],ee.y+F[1]];_s(u,oe),Z.push(oe)}M.push(Z)}if(u[2]-u[0]<=E/2){(B=u)[0]=B[1]=1/0,B[2]=B[3]=-1/0;for(const H of M)for(const Z of H)qp(Z,u,g,E)}var B;return M}class cs{constructor(u,g){this.type=qn,this.geojson=u,this.geometries=g}static parse(u,g){if(u.length!==2)return g.error(`'within' expression requires exactly one argument, but found ${u.length-1} instead.`);if(du(u[1])){const x=u[1];if(x.type==="FeatureCollection"){const E=[];for(const F of x.features){const{type:M,coordinates:B}=F.geometry;M==="Polygon"&&E.push(B),M==="MultiPolygon"&&E.push(...B)}if(E.length)return new cs(x,{type:"MultiPolygon",coordinates:E})}else if(x.type==="Feature"){const E=x.geometry.type;if(E==="Polygon"||E==="MultiPolygon")return new cs(x,x.geometry)}else if(x.type==="Polygon"||x.type==="MultiPolygon")return new cs(x,x)}return g.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return(function(g,x){const E=[1/0,1/0,-1/0,-1/0],F=[1/0,1/0,-1/0,-1/0],M=g.canonicalID();if(x.type==="Polygon"){const B=Ef(x.coordinates,F,M),H=Aa(g.geometry(),E,F,M);if(!nr(E,F))return!1;for(const Z of H)if(!Hl(Z,B))return!1}if(x.type==="MultiPolygon"){const B=Up(x.coordinates,F,M),H=Aa(g.geometry(),E,F,M);if(!nr(E,F))return!1;for(const Z of H)if(!fl(Z,B))return!1}return!0})(u,this.geometries);if(u.geometryType()==="LineString")return(function(g,x){const E=[1/0,1/0,-1/0,-1/0],F=[1/0,1/0,-1/0,-1/0],M=g.canonicalID();if(x.type==="Polygon"){const B=Ef(x.coordinates,F,M),H=Tm(g.geometry(),E,F,M);if(!nr(E,F))return!1;for(const Z of H)if(!Wp(Z,B))return!1}if(x.type==="MultiPolygon"){const B=Up(x.coordinates,F,M),H=Tm(g.geometry(),E,F,M);if(!nr(E,F))return!1;for(const Z of H)if(!Am(Z,B))return!1}return!0})(u,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let km=class{constructor(f=[],u=((g,x)=>g<x?-1:g>x?1:0)){if(this.data=f,this.length=this.data.length,this.compare=u,this.length>0)for(let g=(this.length>>1)-1;g>=0;g--)this._down(g)}push(f){this.data.push(f),this._up(this.length++)}pop(){if(this.length===0)return;const f=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),f}peek(){return this.data[0]}_up(f){const{data:u,compare:g}=this,x=u[f];for(;f>0;){const E=f-1>>1,F=u[E];if(g(x,F)>=0)break;u[f]=F,f=E}u[f]=x}_down(f){const{data:u,compare:g}=this,x=this.length>>1,E=u[f];for(;f<x;){let F=1+(f<<1);const M=F+1;if(M<this.length&&g(u[M],u[F])<0&&(F=M),g(u[F],E)>=0)break;u[f]=u[F],f=F}u[f]=E}};function Pm(f,u,g,x,E){Iu(f,u,g,x||f.length-1,E||Fh)}function Iu(f,u,g,x,E){for(;x>g;){if(x-g>600){var F=x-g+1,M=u-g+1,B=Math.log(F),H=.5*Math.exp(2*B/3),Z=.5*Math.sqrt(B*H*(F-H)/F)*(M-F/2<0?-1:1);Iu(f,u,Math.max(g,Math.floor(u-M*H/F+Z)),Math.min(x,Math.floor(u+(F-M)*H/F+Z)),E)}var ee=f[u],oe=g,de=x;for(dc(f,g,u),E(f[x],ee)>0&&dc(f,g,x);oe<de;){for(dc(f,oe,de),oe++,de--;E(f[oe],ee)<0;)oe++;for(;E(f[de],ee)>0;)de--}E(f[g],ee)===0?dc(f,g,de):dc(f,++de,x),de<=u&&(g=de+1),u<=de&&(x=de-1)}}function dc(f,u,g){var x=f[u];f[u]=f[g],f[g]=x}function Fh(f,u){return f<u?-1:f>u?1:0}function Jr(f,u){if(f.length<=1)return[f];const g=[];let x,E;for(const F of f){const M=Kp(F);M!==0&&(F.area=Math.abs(M),E===void 0&&(E=M<0),E===M<0?(x&&g.push(x),x=[F]):x.push(F))}if(x&&g.push(x),u>1)for(let F=0;F<g.length;F++)g[F].length<=u||(Pm(g[F],u,1,g[F].length-1,hc),g[F]=g[F].slice(0,u));return g}function hc(f,u){return u.area-f.area}function Kp(f){let u=0;for(let g,x,E=0,F=f.length,M=F-1;E<F;M=E++)g=f[E],x=f[M],u+=(x.x-g.x)*(g.y+x.y);return u}const Zp=1/298.257223563,Rf=Zp*(2-Zp),Dm=Math.PI/180;class Yp{constructor(u){const g=6378.137*Dm*1e3,x=Math.cos(u*Dm),E=1/(1-Rf*(1-x*x)),F=Math.sqrt(E);this.kx=g*F*x,this.ky=g*F*E*(1-Rf)}distance(u,g){const x=this.wrap(u[0]-g[0])*this.kx,E=(u[1]-g[1])*this.ky;return Math.sqrt(x*x+E*E)}pointOnLine(u,g){let x,E,F,M,B=1/0;for(let H=0;H<u.length-1;H++){let Z=u[H][0],ee=u[H][1],oe=this.wrap(u[H+1][0]-Z)*this.kx,de=(u[H+1][1]-ee)*this.ky,me=0;oe===0&&de===0||(me=(this.wrap(g[0]-Z)*this.kx*oe+(g[1]-ee)*this.ky*de)/(oe*oe+de*de),me>1?(Z=u[H+1][0],ee=u[H+1][1]):me>0&&(Z+=oe/this.kx*me,ee+=de/this.ky*me)),oe=this.wrap(g[0]-Z)*this.kx,de=(g[1]-ee)*this.ky;const Ce=oe*oe+de*de;Ce<B&&(B=Ce,x=Z,E=ee,F=H,M=me)}return{point:[x,E],index:F,t:Math.max(0,Math.min(1,M))}}wrap(u){for(;u<-180;)u+=360;for(;u>180;)u-=360;return u}}function Fm(f,u){return u[0]-f[0]}function Mh(f){return f[1]-f[0]+1}function pl(f,u){return f[1]>=f[0]&&f[1]<u}function fc(f,u){if(f[0]>f[1])return[null,null];const g=Mh(f);if(u){if(g===2)return[f,null];const E=Math.floor(g/2);return[[f[0],f[0]+E],[f[0]+E,f[1]]]}if(g===1)return[f,null];const x=Math.floor(g/2)-1;return[[f[0],f[0]+x],[f[0]+x+1,f[1]]]}function Xp(f,u){if(!pl(u,f.length))return[1/0,1/0,-1/0,-1/0];const g=[1/0,1/0,-1/0,-1/0];for(let x=u[0];x<=u[1];++x)_s(g,f[x]);return g}function Af(f){const u=[1/0,1/0,-1/0,-1/0];for(const g of f)for(const x of g)_s(u,x);return u}function qc(f){return f[0]!==-1/0&&f[1]!==-1/0&&f[2]!==1/0&&f[3]!==1/0}function Lu(f,u,g){if(!qc(f)||!qc(u))return NaN;let x=0,E=0;return f[2]<u[0]&&(x=u[0]-f[2]),f[0]>u[2]&&(x=f[0]-u[2]),f[1]>u[3]&&(E=f[1]-u[3]),f[3]<u[1]&&(E=u[1]-f[3]),g.distance([0,0],[x,E])}function Ou(f,u,g){const x=g.pointOnLine(u,f);return g.distance(f,x.point)}function Ih(f,u,g,x,E){const F=Math.min(Ou(f,[g,x],E),Ou(u,[g,x],E)),M=Math.min(Ou(g,[f,u],E),Ou(x,[f,u],E));return Math.min(F,M)}function Mm(f,u,g,x,E){if(!pl(u,f.length)||!pl(x,g.length))return 1/0;let F=1/0;for(let M=u[0];M<u[1];++M){const B=f[M],H=f[M+1];for(let Z=x[0];Z<x[1];++Z){const ee=g[Z],oe=g[Z+1];if(Qs(B,H,ee,oe))return 0;F=Math.min(F,Ih(B,H,ee,oe,E))}}return F}function ho(f,u,g,x,E){if(!pl(u,f.length)||!pl(x,g.length))return NaN;let F=1/0;for(let M=u[0];M<=u[1];++M)for(let B=x[0];B<=x[1];++B)if(F=Math.min(F,E.distance(f[M],g[B])),F===0)return F;return F}function Tf(f,u,g){if(Hl(f,u,!0))return 0;let x=1/0;for(const E of u){const F=E[0],M=E[E.length-1];if(F!==M&&(x=Math.min(x,Ou(f,[M,F],g)),x===0))return x;const B=g.pointOnLine(E,f);if(x=Math.min(x,g.distance(f,B.point)),x===0)return x}return x}function Wi(f,u,g,x){if(!pl(u,f.length))return NaN;for(let F=u[0];F<=u[1];++F)if(Hl(f[F],g,!0))return 0;let E=1/0;for(let F=u[0];F<u[1];++F){const M=f[F],B=f[F+1];for(const H of g)for(let Z=0,ee=H.length,oe=ee-1;Z<ee;oe=Z++){const de=H[oe],me=H[Z];if(Qs(M,B,de,me))return 0;E=Math.min(E,Ih(M,B,de,me,x))}}return E}function fu(f,u){for(const g of f)for(const x of g)if(Hl(x,u,!0))return!0;return!1}function ir(f,u,g,x=1/0){const E=Af(f),F=Af(u);if(x!==1/0&&Lu(E,F,g)>=x)return x;if(nr(E,F)){if(fu(f,u))return 0}else if(fu(u,f))return 0;let M=1/0;for(const B of f)for(let H=0,Z=B.length,ee=Z-1;H<Z;ee=H++){const oe=B[ee],de=B[H];for(const me of u)for(let Ce=0,we=me.length,Be=we-1;Ce<we;Be=Ce++){const He=me[Be],ht=me[Ce];if(Qs(oe,de,He,ht))return 0;M=Math.min(M,Ih(oe,de,He,ht,g))}}return M}function Ar(f,u,g,x,E,F){if(!F)return;const M=Lu(Xp(x,F),E,g);M<u&&f.push([M,F,[0,0]])}function Vl(f,u,g,x,E,F,M){if(!F||!M)return;const B=Lu(Xp(x,F),Xp(E,M),g);B<u&&f.push([B,F,M])}function Kc(f,u,g,x,E=1/0){let F=Math.min(x.distance(f[0],g[0][0]),E);if(F===0)return F;const M=new km([[0,[0,f.length-1],[0,0]]],Fm),B=Af(g);for(;M.length>0;){const H=M.pop();if(H[0]>=F)continue;const Z=H[1],ee=u?50:100;if(Mh(Z)<=ee){if(!pl(Z,f.length))return NaN;if(u){const oe=Wi(f,Z,g,x);if(isNaN(oe)||oe===0)return oe;F=Math.min(F,oe)}else for(let oe=Z[0];oe<=Z[1];++oe){const de=Tf(f[oe],g,x);if(F=Math.min(F,de),F===0)return 0}}else{const oe=fc(Z,u);Ar(M,F,x,f,B,oe[0]),Ar(M,F,x,f,B,oe[1])}}return F}function Zc(f,u,g,x,E,F=1/0){let M=Math.min(F,E.distance(f[0],g[0]));if(M===0)return M;const B=new km([[0,[0,f.length-1],[0,g.length-1]]],Fm);for(;B.length>0;){const H=B.pop();if(H[0]>=M)continue;const Z=H[1],ee=H[2],oe=u?50:100,de=x?50:100;if(Mh(Z)<=oe&&Mh(ee)<=de){if(!pl(Z,f.length)&&pl(ee,g.length))return NaN;let me;if(u&&x)me=Mm(f,Z,g,ee,E),M=Math.min(M,me);else if(u&&!x){const Ce=f.slice(Z[0],Z[1]+1);for(let we=ee[0];we<=ee[1];++we)if(me=Ou(g[we],Ce,E),M=Math.min(M,me),M===0)return M}else if(!u&&x){const Ce=g.slice(ee[0],ee[1]+1);for(let we=Z[0];we<=Z[1];++we)if(me=Ou(f[we],Ce,E),M=Math.min(M,me),M===0)return M}else me=ho(f,Z,g,ee,E),M=Math.min(M,me)}else{const me=fc(Z,u),Ce=fc(ee,x);Vl(B,M,E,f,g,me[0],Ce[0]),Vl(B,M,E,f,g,me[0],Ce[1]),Vl(B,M,E,f,g,me[1],Ce[0]),Vl(B,M,E,f,g,me[1],Ce[1])}}return M}function Yc(f){return f.type==="MultiPolygon"?f.coordinates.map((u=>({type:"Polygon",coordinates:u}))):f.type==="MultiLineString"?f.coordinates.map((u=>({type:"LineString",coordinates:u}))):f.type==="MultiPoint"?f.coordinates.map((u=>({type:"Point",coordinates:u}))):[f]}class $l{constructor(u,g){this.type=ln,this.geojson=u,this.geometries=g}static parse(u,g){if(u.length!==2)return g.error(`'distance' expression requires exactly one argument, but found ${u.length-1} instead.`);if(du(u[1])){const x=u[1];if(x.type==="FeatureCollection")return new $l(x,x.features.map((E=>Yc(E.geometry))).flat());if(x.type==="Feature")return new $l(x,Yc(x.geometry));if("type"in x&&"coordinates"in x)return new $l(x,Yc(x))}return g.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return(function(g,x){const E=g.geometry(),F=E.flat().map((H=>oo([H.x,H.y],g.canonical)));if(E.length===0)return NaN;const M=new Yp(F[0][1]);let B=1/0;for(const H of x){switch(H.type){case"Point":B=Math.min(B,Zc(F,!1,[H.coordinates],!1,M,B));break;case"LineString":B=Math.min(B,Zc(F,!1,H.coordinates,!0,M,B));break;case"Polygon":B=Math.min(B,Kc(F,!1,H.coordinates,M,B))}if(B===0)return B}return B})(u,this.geometries);if(u.geometryType()==="LineString")return(function(g,x){const E=g.geometry(),F=E.flat().map((H=>oo([H.x,H.y],g.canonical)));if(E.length===0)return NaN;const M=new Yp(F[0][1]);let B=1/0;for(const H of x){switch(H.type){case"Point":B=Math.min(B,Zc(F,!0,[H.coordinates],!1,M,B));break;case"LineString":B=Math.min(B,Zc(F,!0,H.coordinates,!0,M,B));break;case"Polygon":B=Math.min(B,Kc(F,!0,H.coordinates,M,B))}if(B===0)return B}return B})(u,this.geometries);if(u.geometryType()==="Polygon")return(function(g,x){const E=g.geometry();if(E.length===0||E[0].length===0)return NaN;const F=Jr(E,0).map((H=>H.map((Z=>Z.map((ee=>oo([ee.x,ee.y],g.canonical))))))),M=new Yp(F[0][0][0][1]);let B=1/0;for(const H of x)for(const Z of F){switch(H.type){case"Point":B=Math.min(B,Kc([H.coordinates],!1,Z,M,B));break;case"LineString":B=Math.min(B,Kc(H.coordinates,!0,Z,M,B));break;case"Polygon":B=Math.min(B,ir(Z,H.coordinates,M,B))}if(B===0)return B}return B})(u,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Dd={"==":Un,"!=":Zn,">":Ai,"<":Sn,">=":Jt,"<=":dr,array:Ra,at:Uc,boolean:Ra,case:We,coalesce:Ze,collator:Xn,format:Io,image:ua,in:la,"index-of":jl,interpolate:Ut,"interpolate-hcl":Ut,"interpolate-lab":Ut,length:Mr,let:aa,literal:Co,match:bt,number:Ra,"number-format":Or,object:Ra,slice:at,step:Wt,string:Ra,"to-boolean":Cs,"to-color":Cs,"to-number":Cs,"to-string":Cs,var:ur,within:cs,distance:$l};class da{constructor(u,g,x,E){this.name=u,this.type=g,this._evaluate=x,this.args=E}evaluate(u){return this._evaluate(u,this.args)}eachChild(u){this.args.forEach(u)}outputDefined(){return!1}static parse(u,g){const x=u[0],E=da.definitions[x];if(!E)return g.error(`Unknown expression "${x}". If you wanted a literal array, use ["literal", [...]].`,0);const F=Array.isArray(E)?E[0]:E.type,M=Array.isArray(E)?[[E[1],E[2]]]:E.overloads,B=M.filter((([Z])=>!Array.isArray(Z)||Z.length===u.length-1));let H=null;for(const[Z,ee]of B){H=new Uo(g.registry,pc,g.path,null,g.scope);const oe=[];let de=!1;for(let me=1;me<u.length;me++){const Ce=u[me],we=Array.isArray(Z)?Z[me-1]:Z.type,Be=H.parse(Ce,1+oe.length,we);if(!Be){de=!0;break}oe.push(Be)}if(!de)if(Array.isArray(Z)&&Z.length!==oe.length)H.error(`Expected ${Z.length} arguments, but found ${oe.length} instead.`);else{for(let me=0;me<oe.length;me++){const Ce=Array.isArray(Z)?Z[me]:Z.type,we=oe[me];H.concat(me+1).checkSubtype(Ce,we.type)}if(H.errors.length===0)return new da(x,F,ee,oe)}}if(B.length===1)g.errors.push(...H.errors);else{const Z=(B.length?B:M).map((([oe])=>{return de=oe,Array.isArray(de)?`(${de.map(ge).join(", ")})`:`(${ge(de.type)}...)`;var de})).join(" | "),ee=[];for(let oe=1;oe<u.length;oe++){const de=g.parse(u[oe],1+ee.length);if(!de)return null;ee.push(ge(de.type))}g.error(`Expected arguments of type ${Z}, but found (${ee.join(", ")}) instead.`)}return null}static register(u,g){da.definitions=g;for(const x in g)u[x]=da}}function kf(f,[u,g,x,E]){u=u.evaluate(f),g=g.evaluate(f),x=x.evaluate(f);const F=E?E.evaluate(f):1,M=cu(u,g,x,F);if(M)throw new pr(M);return new er(u/255,g/255,x/255,F,!1)}function zu(f,u){return f in u}function Lh(f,u){const g=u[f];return g===void 0?null:g}function Nu(f){return{type:f}}function pc(f){if(f instanceof ur)return pc(f.boundExpression);if(f instanceof da&&f.name==="error"||f instanceof Xn||f instanceof cs||f instanceof $l)return!1;const u=f instanceof Cs||f instanceof Ra;let g=!0;return f.eachChild((x=>{g=u?g&&pc(x):g&&x instanceof Co})),!!g&&Xc(f)&&gc(f,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Xc(f){if(f instanceof da&&(f.name==="get"&&f.args.length===1||f.name==="feature-state"||f.name==="has"&&f.args.length===1||f.name==="properties"||f.name==="geometry-type"||f.name==="id"||/^filter-/.test(f.name))||f instanceof cs||f instanceof $l)return!1;let u=!0;return f.eachChild((g=>{u&&!Xc(g)&&(u=!1)})),u}function Ta(f){if(f instanceof da&&f.name==="feature-state")return!1;let u=!0;return f.eachChild((g=>{u&&!Ta(g)&&(u=!1)})),u}function gc(f,u){if(f instanceof da&&u.indexOf(f.name)>=0)return!1;let g=!0;return f.eachChild((x=>{g&&!gc(x,u)&&(g=!1)})),g}function Pf(f){return{result:"success",value:f}}function Fd(f){return{result:"error",value:f}}function Md(f){return f["property-type"]==="data-driven"||f["property-type"]==="cross-faded-data-driven"}function Jc(f){return!!f.expression&&f.expression.parameters.indexOf("zoom")>-1}function fo(f){return!!f.expression&&f.expression.interpolated}function rr(f){return f instanceof Number?"number":f instanceof String?"string":f instanceof Boolean?"boolean":Array.isArray(f)?"array":f===null?"null":typeof f}function Oh(f){return typeof f=="object"&&f!==null&&!Array.isArray(f)}function Im(f){return f}function Jp(f,u){const g=u.type==="color",x=f.stops&&typeof f.stops[0][0]=="object",E=x||!(x||f.property!==void 0),F=f.type||(fo(u)?"exponential":"interval");if(g||u.type==="padding"){const ee=g?er.parse:Mo.parse;(f=Ji({},f)).stops&&(f.stops=f.stops.map((oe=>[oe[0],ee(oe[1])]))),f.default=ee(f.default?f.default:u.default)}if(f.colorSpace&&(M=f.colorSpace)!=="rgb"&&M!=="hcl"&&M!=="lab")throw new Error(`Unknown color space: "${f.colorSpace}"`);var M;let B,H,Z;if(F==="exponential")B=ut;else if(F==="interval")B=Bu;else if(F==="categorical"){B=Df,H=Object.create(null);for(const ee of f.stops)H[ee[0]]=ee[1];Z=typeof f.stops[0][0]}else{if(F!=="identity")throw new Error(`Unknown function type "${F}"`);B=Ht}if(x){const ee={},oe=[];for(let Ce=0;Ce<f.stops.length;Ce++){const we=f.stops[Ce],Be=we[0].zoom;ee[Be]===void 0&&(ee[Be]={zoom:Be,type:f.type,property:f.property,default:f.default,stops:[]},oe.push(Be)),ee[Be].stops.push([we[0].value,we[1]])}const de=[];for(const Ce of oe)de.push([ee[Ce].zoom,Jp(ee[Ce],u)]);const me={name:"linear"};return{kind:"composite",interpolationType:me,interpolationFactor:Ut.interpolationFactor.bind(void 0,me),zoomStops:de.map((Ce=>Ce[0])),evaluate:({zoom:Ce},we)=>ut({stops:de,base:f.base},u,Ce).evaluate(Ce,we)}}if(E){const ee=F==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:ee,interpolationFactor:Ut.interpolationFactor.bind(void 0,ee),zoomStops:f.stops.map((oe=>oe[0])),evaluate:({zoom:oe})=>B(f,u,oe,H,Z)}}return{kind:"source",evaluate(ee,oe){const de=oe&&oe.properties?oe.properties[f.property]:void 0;return de===void 0?Qc(f.default,u.default):B(f,u,de,H,Z)}}}function Qc(f,u,g){return f!==void 0?f:u!==void 0?u:g!==void 0?g:void 0}function Df(f,u,g,x,E){return Qc(typeof g===E?x[g]:void 0,f.default,u.default)}function Bu(f,u,g){if(rr(g)!=="number")return Qc(f.default,u.default);const x=f.stops.length;if(x===1||g<=f.stops[0][0])return f.stops[0][1];if(g>=f.stops[x-1][0])return f.stops[x-1][1];const E=ft(f.stops.map((F=>F[0])),g);return f.stops[E][1]}function ut(f,u,g){const x=f.base!==void 0?f.base:1;if(rr(g)!=="number")return Qc(f.default,u.default);const E=f.stops.length;if(E===1||g<=f.stops[0][0])return f.stops[0][1];if(g>=f.stops[E-1][0])return f.stops[E-1][1];const F=ft(f.stops.map((ee=>ee[0])),g),M=(function(ee,oe,de,me){const Ce=me-de,we=ee-de;return Ce===0?0:oe===1?we/Ce:(Math.pow(oe,we)-1)/(Math.pow(oe,Ce)-1)})(g,x,f.stops[F][0],f.stops[F+1][0]),B=f.stops[F][1],H=f.stops[F+1][1],Z=Gn[u.type]||Im;return typeof B.evaluate=="function"?{evaluate(...ee){const oe=B.evaluate.apply(void 0,ee),de=H.evaluate.apply(void 0,ee);if(oe!==void 0&&de!==void 0)return Z(oe,de,M,f.colorSpace)}}:Z(B,H,M,f.colorSpace)}function Ht(f,u,g){switch(u.type){case"color":g=er.parse(g);break;case"formatted":g=Xs.fromString(g.toString());break;case"resolvedImage":g=Ns.fromString(g.toString());break;case"padding":g=Mo.parse(g);break;default:rr(g)===u.type||u.type==="enum"&&u.values[g]||(g=void 0)}return Qc(g,f.default,u.default)}da.register(Dd,{error:[{kind:"error"},[Nn],(f,[u])=>{throw new pr(u.evaluate(f))}],typeof:[Nn,[pi],(f,[u])=>ge(ro(u.evaluate(f)))],"to-rgba":[pe(ln,4),[fr],(f,[u])=>{const[g,x,E,F]=u.evaluate(f).rgb;return[255*g,255*x,255*E,F]}],rgb:[fr,[ln,ln,ln],kf],rgba:[fr,[ln,ln,ln,ln],kf],has:{type:qn,overloads:[[[Nn],(f,[u])=>zu(u.evaluate(f),f.properties())],[[Nn,us],(f,[u,g])=>zu(u.evaluate(f),g.evaluate(f))]]},get:{type:pi,overloads:[[[Nn],(f,[u])=>Lh(u.evaluate(f),f.properties())],[[Nn,us],(f,[u,g])=>Lh(u.evaluate(f),g.evaluate(f))]]},"feature-state":[pi,[Nn],(f,[u])=>Lh(u.evaluate(f),f.featureState||{})],properties:[us,[],f=>f.properties()],"geometry-type":[Nn,[],f=>f.geometryType()],id:[pi,[],f=>f.id()],zoom:[ln,[],f=>f.globals.zoom],"heatmap-density":[ln,[],f=>f.globals.heatmapDensity||0],"line-progress":[ln,[],f=>f.globals.lineProgress||0],accumulated:[pi,[],f=>f.globals.accumulated===void 0?null:f.globals.accumulated],"+":[ln,Nu(ln),(f,u)=>{let g=0;for(const x of u)g+=x.evaluate(f);return g}],"*":[ln,Nu(ln),(f,u)=>{let g=1;for(const x of u)g*=x.evaluate(f);return g}],"-":{type:ln,overloads:[[[ln,ln],(f,[u,g])=>u.evaluate(f)-g.evaluate(f)],[[ln],(f,[u])=>-u.evaluate(f)]]},"/":[ln,[ln,ln],(f,[u,g])=>u.evaluate(f)/g.evaluate(f)],"%":[ln,[ln,ln],(f,[u,g])=>u.evaluate(f)%g.evaluate(f)],ln2:[ln,[],()=>Math.LN2],pi:[ln,[],()=>Math.PI],e:[ln,[],()=>Math.E],"^":[ln,[ln,ln],(f,[u,g])=>Math.pow(u.evaluate(f),g.evaluate(f))],sqrt:[ln,[ln],(f,[u])=>Math.sqrt(u.evaluate(f))],log10:[ln,[ln],(f,[u])=>Math.log(u.evaluate(f))/Math.LN10],ln:[ln,[ln],(f,[u])=>Math.log(u.evaluate(f))],log2:[ln,[ln],(f,[u])=>Math.log(u.evaluate(f))/Math.LN2],sin:[ln,[ln],(f,[u])=>Math.sin(u.evaluate(f))],cos:[ln,[ln],(f,[u])=>Math.cos(u.evaluate(f))],tan:[ln,[ln],(f,[u])=>Math.tan(u.evaluate(f))],asin:[ln,[ln],(f,[u])=>Math.asin(u.evaluate(f))],acos:[ln,[ln],(f,[u])=>Math.acos(u.evaluate(f))],atan:[ln,[ln],(f,[u])=>Math.atan(u.evaluate(f))],min:[ln,Nu(ln),(f,u)=>Math.min(...u.map((g=>g.evaluate(f))))],max:[ln,Nu(ln),(f,u)=>Math.max(...u.map((g=>g.evaluate(f))))],abs:[ln,[ln],(f,[u])=>Math.abs(u.evaluate(f))],round:[ln,[ln],(f,[u])=>{const g=u.evaluate(f);return g<0?-Math.round(-g):Math.round(g)}],floor:[ln,[ln],(f,[u])=>Math.floor(u.evaluate(f))],ceil:[ln,[ln],(f,[u])=>Math.ceil(u.evaluate(f))],"filter-==":[qn,[Nn,pi],(f,[u,g])=>f.properties()[u.value]===g.value],"filter-id-==":[qn,[pi],(f,[u])=>f.id()===u.value],"filter-type-==":[qn,[Nn],(f,[u])=>f.geometryType()===u.value],"filter-<":[qn,[Nn,pi],(f,[u,g])=>{const x=f.properties()[u.value],E=g.value;return typeof x==typeof E&&x<E}],"filter-id-<":[qn,[pi],(f,[u])=>{const g=f.id(),x=u.value;return typeof g==typeof x&&g<x}],"filter->":[qn,[Nn,pi],(f,[u,g])=>{const x=f.properties()[u.value],E=g.value;return typeof x==typeof E&&x>E}],"filter-id->":[qn,[pi],(f,[u])=>{const g=f.id(),x=u.value;return typeof g==typeof x&&g>x}],"filter-<=":[qn,[Nn,pi],(f,[u,g])=>{const x=f.properties()[u.value],E=g.value;return typeof x==typeof E&&x<=E}],"filter-id-<=":[qn,[pi],(f,[u])=>{const g=f.id(),x=u.value;return typeof g==typeof x&&g<=x}],"filter->=":[qn,[Nn,pi],(f,[u,g])=>{const x=f.properties()[u.value],E=g.value;return typeof x==typeof E&&x>=E}],"filter-id->=":[qn,[pi],(f,[u])=>{const g=f.id(),x=u.value;return typeof g==typeof x&&g>=x}],"filter-has":[qn,[pi],(f,[u])=>u.value in f.properties()],"filter-has-id":[qn,[],f=>f.id()!==null&&f.id()!==void 0],"filter-type-in":[qn,[pe(Nn)],(f,[u])=>u.value.indexOf(f.geometryType())>=0],"filter-id-in":[qn,[pe(pi)],(f,[u])=>u.value.indexOf(f.id())>=0],"filter-in-small":[qn,[Nn,pe(pi)],(f,[u,g])=>g.value.indexOf(f.properties()[u.value])>=0],"filter-in-large":[qn,[Nn,pe(pi)],(f,[u,g])=>(function(x,E,F,M){for(;F<=M;){const B=F+M>>1;if(E[B]===x)return!0;E[B]>x?M=B-1:F=B+1}return!1})(f.properties()[u.value],g.value,0,g.value.length-1)],all:{type:qn,overloads:[[[qn,qn],(f,[u,g])=>u.evaluate(f)&&g.evaluate(f)],[Nu(qn),(f,u)=>{for(const g of u)if(!g.evaluate(f))return!1;return!0}]]},any:{type:qn,overloads:[[[qn,qn],(f,[u,g])=>u.evaluate(f)||g.evaluate(f)],[Nu(qn),(f,u)=>{for(const g of u)if(g.evaluate(f))return!0;return!1}]]},"!":[qn,[qn],(f,[u])=>!u.evaluate(f)],"is-supported-script":[qn,[Nn],(f,[u])=>{const g=f.globals&&f.globals.isSupportedScript;return!g||g(u.evaluate(f))}],upcase:[Nn,[Nn],(f,[u])=>u.evaluate(f).toUpperCase()],downcase:[Nn,[Nn],(f,[u])=>u.evaluate(f).toLowerCase()],concat:[Nn,Nu(pi),(f,u)=>u.map((g=>hl(g.evaluate(f)))).join("")],"resolved-locale":[Nn,[oa],(f,[u])=>u.evaluate(f).resolvedLocale()]});class Ft{constructor(u,g){var x;this.expression=u,this._warningHistory={},this._evaluator=new Pd,this._defaultValue=g?(x=g).type==="color"&&Oh(x.default)?new er(0,0,0,0):x.type==="color"?er.parse(x.default)||null:x.type==="padding"?Mo.parse(x.default)||null:x.type==="variableAnchorOffsetCollection"?Js.parse(x.default)||null:x.default===void 0?null:x.default:null,this._enumValues=g&&g.type==="enum"?g.values:null}evaluateWithoutErrorHandling(u,g,x,E,F,M){return this._evaluator.globals=u,this._evaluator.feature=g,this._evaluator.featureState=x,this._evaluator.canonical=E,this._evaluator.availableImages=F||null,this._evaluator.formattedSection=M,this.expression.evaluate(this._evaluator)}evaluate(u,g,x,E,F,M){this._evaluator.globals=u,this._evaluator.feature=g||null,this._evaluator.featureState=x||null,this._evaluator.canonical=E,this._evaluator.availableImages=F||null,this._evaluator.formattedSection=M||null;try{const B=this.expression.evaluate(this._evaluator);if(B==null||typeof B=="number"&&B!=B)return this._defaultValue;if(this._enumValues&&!(B in this._enumValues))throw new pr(`Expected value to be one of ${Object.keys(this._enumValues).map((H=>JSON.stringify(H))).join(", ")}, but found ${JSON.stringify(B)} instead.`);return B}catch(B){return this._warningHistory[B.message]||(this._warningHistory[B.message]=!0,typeof console<"u"&&console.warn(B.message)),this._defaultValue}}}function Bn(f){return Array.isArray(f)&&f.length>0&&typeof f[0]=="string"&&f[0]in Dd}function Ci(f,u){const g=new Uo(Dd,pc,[],u?(function(E){const F={color:fr,string:Nn,number:ln,enum:Nn,boolean:qn,formatted:sa,padding:Ys,resolvedImage:zs,variableAnchorOffsetCollection:je};return E.type==="array"?pe(F[E.value]||pi,E.length):F[E.type]})(u):void 0),x=g.parse(f,void 0,void 0,void 0,u&&u.type==="string"?{typeAnnotation:"coerce"}:void 0);return x?Pf(new Ft(x,u)):Fd(g.errors)}class Ui{constructor(u,g){this.kind=u,this._styleExpression=g,this.isStateDependent=u!=="constant"&&!Ta(g.expression)}evaluateWithoutErrorHandling(u,g,x,E,F,M){return this._styleExpression.evaluateWithoutErrorHandling(u,g,x,E,F,M)}evaluate(u,g,x,E,F,M){return this._styleExpression.evaluate(u,g,x,E,F,M)}}class zr{constructor(u,g,x,E){this.kind=u,this.zoomStops=x,this._styleExpression=g,this.isStateDependent=u!=="camera"&&!Ta(g.expression),this.interpolationType=E}evaluateWithoutErrorHandling(u,g,x,E,F,M){return this._styleExpression.evaluateWithoutErrorHandling(u,g,x,E,F,M)}evaluate(u,g,x,E,F,M){return this._styleExpression.evaluate(u,g,x,E,F,M)}interpolationFactor(u,g,x){return this.interpolationType?Ut.interpolationFactor(this.interpolationType,u,g,x):0}}function Tr(f,u){const g=Ci(f,u);if(g.result==="error")return g;const x=g.value.expression,E=Xc(x);if(!E&&!Md(u))return Fd([new Qi("","data expressions not supported")]);const F=gc(x,["zoom"]);if(!F&&!Jc(u))return Fd([new Qi("","zoom expressions not supported")]);const M=Wl(x);return M||F?M instanceof Qi?Fd([M]):M instanceof Ut&&!fo(u)?Fd([new Qi("",'"interpolate" expressions cannot be used with this property')]):Pf(M?new zr(E?"camera":"composite",g.value,M.labels,M instanceof Ut?M.interpolation:void 0):new Ui(E?"constant":"source",g.value)):Fd([new Qi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Gu{constructor(u,g){this._parameters=u,this._specification=g,Ji(this,Jp(this._parameters,this._specification))}static deserialize(u){return new Gu(u._parameters,u._specification)}static serialize(u){return{_parameters:u._parameters,_specification:u._specification}}}function Wl(f){let u=null;if(f instanceof aa)u=Wl(f.result);else if(f instanceof Ze){for(const g of f.args)if(u=Wl(g),u)break}else(f instanceof Wt||f instanceof Ut)&&f.input instanceof da&&f.input.name==="zoom"&&(u=f);return u instanceof Qi||f.eachChild((g=>{const x=Wl(g);x instanceof Qi?u=x:!u&&x?u=new Qi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):u&&x&&u!==x&&(u=new Qi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),u}function ea(f){if(f===!0||f===!1)return!0;if(!Array.isArray(f)||f.length===0)return!1;switch(f[0]){case"has":return f.length>=2&&f[1]!=="$id"&&f[1]!=="$type";case"in":return f.length>=3&&(typeof f[1]!="string"||Array.isArray(f[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return f.length!==3||Array.isArray(f[1])||Array.isArray(f[2]);case"any":case"all":for(const u of f.slice(1))if(!ea(u)&&typeof u!="boolean")return!1;return!0;default:return!0}}const mc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ff(f){if(f==null)return{filter:()=>!0,needGeometry:!1};ea(f)||(f=ed(f));const u=Ci(f,mc);if(u.result==="error")throw new Error(u.value.map((g=>`${g.key}: ${g.message}`)).join(", "));return{filter:(g,x,E)=>u.value.evaluate(g,x,{},E),needGeometry:zh(f)}}function Id(f,u){return f<u?-1:f>u?1:0}function zh(f){if(!Array.isArray(f))return!1;if(f[0]==="within"||f[0]==="distance")return!0;for(let u=1;u<f.length;u++)if(zh(f[u]))return!0;return!1}function ed(f){if(!f)return!0;const u=f[0];return f.length<=1?u!=="any":u==="=="?Cr(f[1],f[2],"=="):u==="!="?Nr(Cr(f[1],f[2],"==")):u==="<"||u===">"||u==="<="||u===">="?Cr(f[1],f[2],u):u==="any"?(g=f.slice(1),["any"].concat(g.map(ed))):u==="all"?["all"].concat(f.slice(1).map(ed)):u==="none"?["all"].concat(f.slice(1).map(ed).map(Nr)):u==="in"?Ld(f[1],f.slice(2)):u==="!in"?Nr(Ld(f[1],f.slice(2))):u==="has"?yc(f[1]):u!=="!has"||Nr(yc(f[1]));var g}function Cr(f,u,g){switch(f){case"$type":return[`filter-type-${g}`,u];case"$id":return[`filter-id-${g}`,u];default:return[`filter-${g}`,f,u]}}function Ld(f,u){if(u.length===0)return!1;switch(f){case"$type":return["filter-type-in",["literal",u]];case"$id":return["filter-id-in",["literal",u]];default:return u.length>200&&!u.some((g=>typeof g!=typeof u[0]))?["filter-in-large",f,["literal",u.sort(Id)]]:["filter-in-small",f,["literal",u]]}}function yc(f){switch(f){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",f]}}function Nr(f){return["!",f]}function pu(f){const u=typeof f;if(u==="number"||u==="boolean"||u==="string"||f==null)return JSON.stringify(f);if(Array.isArray(f)){let E="[";for(const F of f)E+=`${pu(F)},`;return`${E}]`}const g=Object.keys(f).sort();let x="{";for(let E=0;E<g.length;E++)x+=`${JSON.stringify(g[E])}:${pu(f[g[E]])},`;return`${x}}`}function Wa(f){let u="";for(const g of yn)u+=`/${pu(f[g])}`;return u}function td(f){const u=f.value;return u?[new Tt(f.key,u,"constants have been deprecated as of v8")]:[]}function Qr(f){return f instanceof Number||f instanceof String||f instanceof Boolean?f.valueOf():f}function qo(f){if(Array.isArray(f))return f.map(qo);if(f instanceof Object&&!(f instanceof Number||f instanceof String||f instanceof Boolean)){const u={};for(const g in f)u[g]=qo(f[g]);return u}return Qr(f)}function ds(f){const u=f.key,g=f.value,x=f.valueSpec||{},E=f.objectElementValidators||{},F=f.style,M=f.styleSpec,B=f.validateSpec;let H=[];const Z=rr(g);if(Z!=="object")return[new Tt(u,g,`object expected, ${Z} found`)];for(const ee in g){const oe=ee.split(".")[0],de=x[oe]||x["*"];let me;if(E[oe])me=E[oe];else if(x[oe])me=B;else if(E["*"])me=E["*"];else{if(!x["*"]){H.push(new Tt(u,g[ee],`unknown property "${ee}"`));continue}me=B}H=H.concat(me({key:(u&&`${u}.`)+ee,value:g[ee],valueSpec:de,style:F,styleSpec:M,object:g,objectKey:ee,validateSpec:B},g))}for(const ee in x)E[ee]||x[ee].required&&x[ee].default===void 0&&g[ee]===void 0&&H.push(new Tt(u,g,`missing required property "${ee}"`));return H}function vc(f){const u=f.value,g=f.valueSpec,x=f.style,E=f.styleSpec,F=f.key,M=f.arrayElementValidator||f.validateSpec;if(rr(u)!=="array")return[new Tt(F,u,`array expected, ${rr(u)} found`)];if(g.length&&u.length!==g.length)return[new Tt(F,u,`array length ${g.length} expected, length ${u.length} found`)];if(g["min-length"]&&u.length<g["min-length"])return[new Tt(F,u,`array length at least ${g["min-length"]} expected, length ${u.length} found`)];let B={type:g.value,values:g.values};E.$version<7&&(B.function=g.function),rr(g.value)==="object"&&(B=g.value);let H=[];for(let Z=0;Z<u.length;Z++)H=H.concat(M({array:u,arrayIndex:Z,value:u[Z],valueSpec:B,validateSpec:f.validateSpec,style:x,styleSpec:E,key:`${F}[${Z}]`}));return H}function gl(f){const u=f.key,g=f.value,x=f.valueSpec;let E=rr(g);return E==="number"&&g!=g&&(E="NaN"),E!=="number"?[new Tt(u,g,`number expected, ${E} found`)]:"minimum"in x&&g<x.minimum?[new Tt(u,g,`${g} is less than the minimum value ${x.minimum}`)]:"maximum"in x&&g>x.maximum?[new Tt(u,g,`${g} is greater than the maximum value ${x.maximum}`)]:[]}function Od(f){const u=f.valueSpec,g=Qr(f.value.type);let x,E,F,M={};const B=g!=="categorical"&&f.value.property===void 0,H=!B,Z=rr(f.value.stops)==="array"&&rr(f.value.stops[0])==="array"&&rr(f.value.stops[0][0])==="object",ee=ds({key:f.key,value:f.value,valueSpec:f.styleSpec.function,validateSpec:f.validateSpec,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{stops:function(me){if(g==="identity")return[new Tt(me.key,me.value,'identity function may not have a "stops" property')];let Ce=[];const we=me.value;return Ce=Ce.concat(vc({key:me.key,value:we,valueSpec:me.valueSpec,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec,arrayElementValidator:oe})),rr(we)==="array"&&we.length===0&&Ce.push(new Tt(me.key,we,"array must have at least one stop")),Ce},default:function(me){return me.validateSpec({key:me.key,value:me.value,valueSpec:u,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec})}}});return g==="identity"&&B&&ee.push(new Tt(f.key,f.value,'missing required property "property"')),g==="identity"||f.value.stops||ee.push(new Tt(f.key,f.value,'missing required property "stops"')),g==="exponential"&&f.valueSpec.expression&&!fo(f.valueSpec)&&ee.push(new Tt(f.key,f.value,"exponential functions not supported")),f.styleSpec.$version>=8&&(H&&!Md(f.valueSpec)?ee.push(new Tt(f.key,f.value,"property functions not supported")):B&&!Jc(f.valueSpec)&&ee.push(new Tt(f.key,f.value,"zoom functions not supported"))),g!=="categorical"&&!Z||f.value.property!==void 0||ee.push(new Tt(f.key,f.value,'"property" property is required')),ee;function oe(me){let Ce=[];const we=me.value,Be=me.key;if(rr(we)!=="array")return[new Tt(Be,we,`array expected, ${rr(we)} found`)];if(we.length!==2)return[new Tt(Be,we,`array length 2 expected, length ${we.length} found`)];if(Z){if(rr(we[0])!=="object")return[new Tt(Be,we,`object expected, ${rr(we[0])} found`)];if(we[0].zoom===void 0)return[new Tt(Be,we,"object stop key must have zoom")];if(we[0].value===void 0)return[new Tt(Be,we,"object stop key must have value")];if(F&&F>Qr(we[0].zoom))return[new Tt(Be,we[0].zoom,"stop zoom values must appear in ascending order")];Qr(we[0].zoom)!==F&&(F=Qr(we[0].zoom),E=void 0,M={}),Ce=Ce.concat(ds({key:`${Be}[0]`,value:we[0],valueSpec:{zoom:{}},validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec,objectElementValidators:{zoom:gl,value:de}}))}else Ce=Ce.concat(de({key:`${Be}[0]`,value:we[0],validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec},we));return Bn(qo(we[1]))?Ce.concat([new Tt(`${Be}[1]`,we[1],"expressions are not allowed in function stops.")]):Ce.concat(me.validateSpec({key:`${Be}[1]`,value:we[1],valueSpec:u,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec}))}function de(me,Ce){const we=rr(me.value),Be=Qr(me.value),He=me.value!==null?me.value:Ce;if(x){if(we!==x)return[new Tt(me.key,He,`${we} stop domain type must match previous stop domain type ${x}`)]}else x=we;if(we!=="number"&&we!=="string"&&we!=="boolean")return[new Tt(me.key,He,"stop domain value must be a number, string, or boolean")];if(we!=="number"&&g!=="categorical"){let ht=`number expected, ${we} found`;return Md(u)&&g===void 0&&(ht+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Tt(me.key,He,ht)]}return g!=="categorical"||we!=="number"||isFinite(Be)&&Math.floor(Be)===Be?g!=="categorical"&&we==="number"&&E!==void 0&&Be<E?[new Tt(me.key,He,"stop domain values must appear in ascending order")]:(E=Be,g==="categorical"&&Be in M?[new Tt(me.key,He,"stop domain values must be unique")]:(M[Be]=!0,[])):[new Tt(me.key,He,`integer expected, found ${Be}`)]}}function gu(f){const u=(f.expressionContext==="property"?Tr:Ci)(qo(f.value),f.valueSpec);if(u.result==="error")return u.value.map((x=>new Tt(`${f.key}${x.key}`,f.value,x.message)));const g=u.value.expression||u.value._styleExpression.expression;if(f.expressionContext==="property"&&f.propertyKey==="text-font"&&!g.outputDefined())return[new Tt(f.key,f.value,`Invalid data expression for "${f.propertyKey}". Output values must be contained as literals within the expression.`)];if(f.expressionContext==="property"&&f.propertyType==="layout"&&!Ta(g))return[new Tt(f.key,f.value,'"feature-state" data expressions are not supported with layout properties.')];if(f.expressionContext==="filter"&&!Ta(g))return[new Tt(f.key,f.value,'"feature-state" data expressions are not supported with filters.')];if(f.expressionContext&&f.expressionContext.indexOf("cluster")===0){if(!gc(g,["zoom","feature-state"]))return[new Tt(f.key,f.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(f.expressionContext==="cluster-initial"&&!Xc(g))return[new Tt(f.key,f.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Bs(f){const u=f.key,g=f.value,x=f.valueSpec,E=[];return Array.isArray(x.values)?x.values.indexOf(Qr(g))===-1&&E.push(new Tt(u,g,`expected one of [${x.values.join(", ")}], ${JSON.stringify(g)} found`)):Object.keys(x.values).indexOf(Qr(g))===-1&&E.push(new Tt(u,g,`expected one of [${Object.keys(x.values).join(", ")}], ${JSON.stringify(g)} found`)),E}function Mf(f){return ea(qo(f.value))?gu(Ji({},f,{expressionContext:"filter",valueSpec:{value:"boolean"}})):rs(f)}function rs(f){const u=f.value,g=f.key;if(rr(u)!=="array")return[new Tt(g,u,`array expected, ${rr(u)} found`)];const x=f.styleSpec;let E,F=[];if(u.length<1)return[new Tt(g,u,"filter array must have at least 1 element")];switch(F=F.concat(Bs({key:`${g}[0]`,value:u[0],valueSpec:x.filter_operator,style:f.style,styleSpec:f.styleSpec})),Qr(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&Qr(u[1])==="$type"&&F.push(new Tt(g,u,`"$type" cannot be use with operator "${u[0]}"`));case"==":case"!=":u.length!==3&&F.push(new Tt(g,u,`filter array for operator "${u[0]}" must have 3 elements`));case"in":case"!in":u.length>=2&&(E=rr(u[1]),E!=="string"&&F.push(new Tt(`${g}[1]`,u[1],`string expected, ${E} found`)));for(let M=2;M<u.length;M++)E=rr(u[M]),Qr(u[1])==="$type"?F=F.concat(Bs({key:`${g}[${M}]`,value:u[M],valueSpec:x.geometry_type,style:f.style,styleSpec:f.styleSpec})):E!=="string"&&E!=="number"&&E!=="boolean"&&F.push(new Tt(`${g}[${M}]`,u[M],`string, number, or boolean expected, ${E} found`));break;case"any":case"all":case"none":for(let M=1;M<u.length;M++)F=F.concat(rs({key:`${g}[${M}]`,value:u[M],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":E=rr(u[1]),u.length!==2?F.push(new Tt(g,u,`filter array for "${u[0]}" operator must have 2 elements`)):E!=="string"&&F.push(new Tt(`${g}[1]`,u[1],`string expected, ${E} found`))}return F}function Ul(f,u){const g=f.key,x=f.validateSpec,E=f.style,F=f.styleSpec,M=f.value,B=f.objectKey,H=F[`${u}_${f.layerType}`];if(!H)return[];const Z=B.match(/^(.*)-transition$/);if(u==="paint"&&Z&&H[Z[1]]&&H[Z[1]].transition)return x({key:g,value:M,valueSpec:F.transition,style:E,styleSpec:F});const ee=f.valueSpec||H[B];if(!ee)return[new Tt(g,M,`unknown property "${B}"`)];let oe;if(rr(M)==="string"&&Md(ee)&&!ee.tokens&&(oe=/^{([^}]+)}$/.exec(M)))return[new Tt(g,M,`"${B}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(oe[1])} }\`.`)];const de=[];return f.layerType==="symbol"&&(B==="text-field"&&E&&!E.glyphs&&de.push(new Tt(g,M,'use of "text-field" requires a style "glyphs" property')),B==="text-font"&&Oh(qo(M))&&Qr(M.type)==="identity"&&de.push(new Tt(g,M,'"text-font" does not support identity functions'))),de.concat(x({key:f.key,value:M,valueSpec:ee,style:E,styleSpec:F,expressionContext:"property",propertyType:u,propertyKey:B}))}function ha(f){return Ul(f,"paint")}function If(f){return Ul(f,"layout")}function zd(f){let u=[];const g=f.value,x=f.key,E=f.style,F=f.styleSpec;g.type||g.ref||u.push(new Tt(x,g,'either "type" or "ref" is required'));let M=Qr(g.type);const B=Qr(g.ref);if(g.id){const H=Qr(g.id);for(let Z=0;Z<f.arrayIndex;Z++){const ee=E.layers[Z];Qr(ee.id)===H&&u.push(new Tt(x,g.id,`duplicate layer id "${g.id}", previously used at line ${ee.id.__line__}`))}}if("ref"in g){let H;["type","source","source-layer","filter","layout"].forEach((Z=>{Z in g&&u.push(new Tt(x,g[Z],`"${Z}" is prohibited for ref layers`))})),E.layers.forEach((Z=>{Qr(Z.id)===B&&(H=Z)})),H?H.ref?u.push(new Tt(x,g.ref,"ref cannot reference another ref layer")):M=Qr(H.type):u.push(new Tt(x,g.ref,`ref layer "${B}" not found`))}else if(M!=="background")if(g.source){const H=E.sources&&E.sources[g.source],Z=H&&Qr(H.type);H?Z==="vector"&&M==="raster"?u.push(new Tt(x,g.source,`layer "${g.id}" requires a raster source`)):Z!=="raster-dem"&&M==="hillshade"?u.push(new Tt(x,g.source,`layer "${g.id}" requires a raster-dem source`)):Z==="raster"&&M!=="raster"?u.push(new Tt(x,g.source,`layer "${g.id}" requires a vector source`)):Z!=="vector"||g["source-layer"]?Z==="raster-dem"&&M!=="hillshade"?u.push(new Tt(x,g.source,"raster-dem source can only be used with layer type 'hillshade'.")):M!=="line"||!g.paint||!g.paint["line-gradient"]||Z==="geojson"&&H.lineMetrics||u.push(new Tt(x,g,`layer "${g.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):u.push(new Tt(x,g,`layer "${g.id}" must specify a "source-layer"`)):u.push(new Tt(x,g.source,`source "${g.source}" not found`))}else u.push(new Tt(x,g,'missing required property "source"'));return u=u.concat(ds({key:x,value:g,valueSpec:F.layer,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*":()=>[],type:()=>f.validateSpec({key:`${x}.type`,value:g.type,valueSpec:F.layer.type,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,object:g,objectKey:"type"}),filter:Mf,layout:H=>ds({layer:g,key:H.key,value:H.value,style:H.style,styleSpec:H.styleSpec,validateSpec:H.validateSpec,objectElementValidators:{"*":Z=>If(Ji({layerType:M},Z))}}),paint:H=>ds({layer:g,key:H.key,value:H.value,style:H.style,styleSpec:H.styleSpec,validateSpec:H.validateSpec,objectElementValidators:{"*":Z=>ha(Ji({layerType:M},Z))}})}})),u}function Ua(f){const u=f.value,g=f.key,x=rr(u);return x!=="string"?[new Tt(g,u,`string expected, ${x} found`)]:[]}const ju={promoteId:function({key:f,value:u}){if(rr(u)==="string")return Ua({key:f,value:u});{const g=[];for(const x in u)g.push(...Ua({key:`${f}.${x}`,value:u[x]}));return g}}};function Hu(f){const u=f.value,g=f.key,x=f.styleSpec,E=f.style,F=f.validateSpec;if(!u.type)return[new Tt(g,u,'"type" is required')];const M=Qr(u.type);let B;switch(M){case"vector":case"raster":return B=ds({key:g,value:u,valueSpec:x[`source_${M.replace("-","_")}`],style:f.style,styleSpec:x,objectElementValidators:ju,validateSpec:F}),B;case"raster-dem":return B=(function(H){var Z;const ee=(Z=H.sourceName)!==null&&Z!==void 0?Z:"",oe=H.value,de=H.styleSpec,me=de.source_raster_dem,Ce=H.style;let we=[];const Be=rr(oe);if(oe===void 0)return we;if(Be!=="object")return we.push(new Tt("source_raster_dem",oe,`object expected, ${Be} found`)),we;const He=Qr(oe.encoding)==="custom",ht=["redFactor","greenFactor","blueFactor","baseShift"],Qe=H.value.encoding?`"${H.value.encoding}"`:"Default";for(const et in oe)!He&&ht.includes(et)?we.push(new Tt(et,oe[et],`In "${ee}": "${et}" is only valid when "encoding" is set to "custom". ${Qe} encoding found`)):me[et]?we=we.concat(H.validateSpec({key:et,value:oe[et],valueSpec:me[et],validateSpec:H.validateSpec,style:Ce,styleSpec:de})):we.push(new Tt(et,oe[et],`unknown property "${et}"`));return we})({sourceName:g,value:u,style:f.style,styleSpec:x,validateSpec:F}),B;case"geojson":if(B=ds({key:g,value:u,valueSpec:x.source_geojson,style:E,styleSpec:x,validateSpec:F,objectElementValidators:ju}),u.cluster)for(const H in u.clusterProperties){const[Z,ee]=u.clusterProperties[H],oe=typeof Z=="string"?[Z,["accumulated"],["get",H]]:Z;B.push(...gu({key:`${g}.${H}.map`,value:ee,expressionContext:"cluster-map"})),B.push(...gu({key:`${g}.${H}.reduce`,value:oe,expressionContext:"cluster-reduce"}))}return B;case"video":return ds({key:g,value:u,valueSpec:x.source_video,style:E,validateSpec:F,styleSpec:x});case"image":return ds({key:g,value:u,valueSpec:x.source_image,style:E,validateSpec:F,styleSpec:x});case"canvas":return[new Tt(g,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Bs({key:`${g}.type`,value:u.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function nd(f){const u=f.value,g=f.styleSpec,x=g.light,E=f.style;let F=[];const M=rr(u);if(u===void 0)return F;if(M!=="object")return F=F.concat([new Tt("light",u,`object expected, ${M} found`)]),F;for(const B in u){const H=B.match(/^(.*)-transition$/);F=F.concat(H&&x[H[1]]&&x[H[1]].transition?f.validateSpec({key:B,value:u[B],valueSpec:g.transition,validateSpec:f.validateSpec,style:E,styleSpec:g}):x[B]?f.validateSpec({key:B,value:u[B],valueSpec:x[B],validateSpec:f.validateSpec,style:E,styleSpec:g}):[new Tt(B,u[B],`unknown property "${B}"`)])}return F}function Lf(f){const u=f.value,g=f.styleSpec,x=g.sky,E=f.style,F=rr(u);if(u===void 0)return[];if(F!=="object")return[new Tt("sky",u,`object expected, ${F} found`)];let M=[];for(const B in u)M=M.concat(x[B]?f.validateSpec({key:B,value:u[B],valueSpec:x[B],style:E,styleSpec:g}):[new Tt(B,u[B],`unknown property "${B}"`)]);return M}function fa(f){const u=f.value,g=f.styleSpec,x=g.terrain,E=f.style;let F=[];const M=rr(u);if(u===void 0)return F;if(M!=="object")return F=F.concat([new Tt("terrain",u,`object expected, ${M} found`)]),F;for(const B in u)F=F.concat(x[B]?f.validateSpec({key:B,value:u[B],valueSpec:x[B],validateSpec:f.validateSpec,style:E,styleSpec:g}):[new Tt(B,u[B],`unknown property "${B}"`)]);return F}function bc(f){let u=[];const g=f.value,x=f.key;if(Array.isArray(g)){const E=[],F=[];for(const M in g)g[M].id&&E.includes(g[M].id)&&u.push(new Tt(x,g,`all the sprites' ids must be unique, but ${g[M].id} is duplicated`)),E.push(g[M].id),g[M].url&&F.includes(g[M].url)&&u.push(new Tt(x,g,`all the sprites' URLs must be unique, but ${g[M].url} is duplicated`)),F.push(g[M].url),u=u.concat(ds({key:`${x}[${M}]`,value:g[M],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:f.validateSpec}));return u}return Ua({key:x,value:g})}const Vu={"*":()=>[],array:vc,boolean:function(f){const u=f.value,g=f.key,x=rr(u);return x!=="boolean"?[new Tt(g,u,`boolean expected, ${x} found`)]:[]},number:gl,color:function(f){const u=f.key,g=f.value,x=rr(g);return x!=="string"?[new Tt(u,g,`color expected, ${x} found`)]:er.parse(String(g))?[]:[new Tt(u,g,`color expected, "${g}" found`)]},constants:td,enum:Bs,filter:Mf,function:Od,layer:zd,object:ds,source:Hu,light:nd,sky:Lf,terrain:fa,projection:function(f){const u=f.value,g=f.styleSpec,x=g.projection,E=f.style,F=rr(u);if(u===void 0)return[];if(F!=="object")return[new Tt("projection",u,`object expected, ${F} found`)];let M=[];for(const B in u)M=M.concat(x[B]?f.validateSpec({key:B,value:u[B],valueSpec:x[B],style:E,styleSpec:g}):[new Tt(B,u[B],`unknown property "${B}"`)]);return M},string:Ua,formatted:function(f){return Ua(f).length===0?[]:gu(f)},resolvedImage:function(f){return Ua(f).length===0?[]:gu(f)},padding:function(f){const u=f.key,g=f.value;if(rr(g)==="array"){if(g.length<1||g.length>4)return[new Tt(u,g,`padding requires 1 to 4 values; ${g.length} values found`)];const x={type:"number"};let E=[];for(let F=0;F<g.length;F++)E=E.concat(f.validateSpec({key:`${u}[${F}]`,value:g[F],validateSpec:f.validateSpec,valueSpec:x}));return E}return gl({key:u,value:g,valueSpec:{}})},variableAnchorOffsetCollection:function(f){const u=f.key,g=f.value,x=rr(g),E=f.styleSpec;if(x!=="array"||g.length<1||g.length%2!=0)return[new Tt(u,g,"variableAnchorOffsetCollection requires a non-empty array of even length")];let F=[];for(let M=0;M<g.length;M+=2)F=F.concat(Bs({key:`${u}[${M}]`,value:g[M],valueSpec:E.layout_symbol["text-anchor"]})),F=F.concat(vc({key:`${u}[${M+1}]`,value:g[M+1],valueSpec:{length:2,value:"number"},validateSpec:f.validateSpec,style:f.style,styleSpec:E}));return F},sprite:bc};function so(f){const u=f.value,g=f.valueSpec,x=f.styleSpec;return f.validateSpec=so,g.expression&&Oh(Qr(u))?Od(f):g.expression&&Bn(qo(u))?gu(f):g.type&&Vu[g.type]?Vu[g.type](f):ds(Ji({},f,{valueSpec:g.type?x[g.type]:g}))}function Ko(f){const u=f.value,g=f.key,x=Ua(f);return x.length||(u.indexOf("{fontstack}")===-1&&x.push(new Tt(g,u,'"glyphs" url must include a "{fontstack}" token')),u.indexOf("{range}")===-1&&x.push(new Tt(g,u,'"glyphs" url must include a "{range}" token'))),x}function Lo(f,u=Pe){let g=[];return g=g.concat(so({key:"",value:f,valueSpec:u.$root,styleSpec:u,style:f,validateSpec:so,objectElementValidators:{glyphs:Ko,"*":()=>[]}})),f.constants&&(g=g.concat(td({key:"constants",value:f.constants}))),ql(g)}function Zo(f){return function(u){return f({...u,validateSpec:so})}}function ql(f){return[].concat(f).sort(((u,g)=>u.line-g.line))}function os(f){return function(...u){return ql(f.apply(this,u))}}Lo.source=os(Zo(Hu)),Lo.sprite=os(Zo(bc)),Lo.glyphs=os(Zo(Ko)),Lo.light=os(Zo(nd)),Lo.sky=os(Zo(Lf)),Lo.terrain=os(Zo(fa)),Lo.layer=os(Zo(zd)),Lo.filter=os(Zo(Mf)),Lo.paintProperty=os(Zo(ha)),Lo.layoutProperty=os(Zo(If));const Ss=Lo,qa=Ss.light,Of=Ss.sky,$u=Ss.paintProperty,xc=Ss.layoutProperty;function wc(f,u){let g=!1;if(u&&u.length)for(const x of u)f.fire(new Mt(new Error(x.message))),g=!0;return g}class po{constructor(u,g,x){const E=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;const M=new Int32Array(this.arrayBuffer);u=M[0],this.d=(g=M[1])+2*(x=M[2]);for(let H=0;H<this.d*this.d;H++){const Z=M[3+H],ee=M[3+H+1];E.push(Z===ee?null:M.subarray(Z,ee))}const B=M[3+E.length+1];this.keys=M.subarray(M[3+E.length],B),this.bboxes=M.subarray(B),this.insert=this._insertReadonly}else{this.d=g+2*x;for(let M=0;M<this.d*this.d;M++)E.push([]);this.keys=[],this.bboxes=[]}this.n=g,this.extent=u,this.padding=x,this.scale=g/u,this.uid=0;const F=x/g*u;this.min=-F,this.max=u+F}insert(u,g,x,E,F){this._forEachCell(g,x,E,F,this._insertCell,this.uid++,void 0,void 0),this.keys.push(u),this.bboxes.push(g),this.bboxes.push(x),this.bboxes.push(E),this.bboxes.push(F)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(u,g,x,E,F,M){this.cells[F].push(M)}query(u,g,x,E,F){const M=this.min,B=this.max;if(u<=M&&g<=M&&B<=x&&B<=E&&!F)return Array.prototype.slice.call(this.keys);{const H=[];return this._forEachCell(u,g,x,E,this._queryCell,H,{},F),H}}_queryCell(u,g,x,E,F,M,B,H){const Z=this.cells[F];if(Z!==null){const ee=this.keys,oe=this.bboxes;for(let de=0;de<Z.length;de++){const me=Z[de];if(B[me]===void 0){const Ce=4*me;(H?H(oe[Ce+0],oe[Ce+1],oe[Ce+2],oe[Ce+3]):u<=oe[Ce+2]&&g<=oe[Ce+3]&&x>=oe[Ce+0]&&E>=oe[Ce+1])?(B[me]=!0,M.push(ee[me])):B[me]=!1}}}}_forEachCell(u,g,x,E,F,M,B,H){const Z=this._convertToCellCoord(u),ee=this._convertToCellCoord(g),oe=this._convertToCellCoord(x),de=this._convertToCellCoord(E);for(let me=Z;me<=oe;me++)for(let Ce=ee;Ce<=de;Ce++){const we=this.d*Ce+me;if((!H||H(this._convertFromCellCoord(me),this._convertFromCellCoord(Ce),this._convertFromCellCoord(me+1),this._convertFromCellCoord(Ce+1)))&&F.call(this,u,g,x,E,we,M,B,H))return}}_convertFromCellCoord(u){return(u-this.padding)/this.scale}_convertToCellCoord(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const u=this.cells,g=3+this.cells.length+1+1;let x=0;for(let M=0;M<this.cells.length;M++)x+=this.cells[M].length;const E=new Int32Array(g+x+this.keys.length+this.bboxes.length);E[0]=this.extent,E[1]=this.n,E[2]=this.padding;let F=g;for(let M=0;M<u.length;M++){const B=u[M];E[3+M]=F,E.set(B,F),F+=B.length}return E[3+u.length]=F,E.set(this.keys,F),F+=this.keys.length,E[3+u.length+1]=F,E.set(this.bboxes,F),F+=this.bboxes.length,E.buffer}static serialize(u,g){const x=u.toArrayBuffer();return g&&g.push(x),{buffer:x}}static deserialize(u){return new po(u.buffer)}}const tr={};function nn(f,u,g={}){if(tr[f])throw new Error(`${f} is already registered.`);Object.defineProperty(u,"_classRegistryKey",{value:f,writeable:!1}),tr[f]={klass:u,omit:g.omit||[],shallow:g.shallow||[]}}nn("Object",Object),nn("TransferableGridIndex",po),nn("Color",er),nn("Error",Error),nn("AJAXError",Xt),nn("ResolvedImage",Ns),nn("StylePropertyFunction",Gu),nn("StyleExpression",Ft,{omit:["_evaluator"]}),nn("ZoomDependentExpression",zr),nn("ZoomConstantExpression",Ui),nn("CompoundExpression",da,{omit:["_evaluate"]});for(const f in Dd)Dd[f]._classRegistryKey||nn(`Expression_${f}`,Dd[f]);function Kl(f){return f&&typeof ArrayBuffer<"u"&&(f instanceof ArrayBuffer||f.constructor&&f.constructor.name==="ArrayBuffer")}function ka(f){return f.$name||f.constructor._classRegistryKey}function zf(f){return!(function(u){if(u===null||typeof u!="object")return!1;const g=ka(u);return!(!g||g==="Object")})(f)&&(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob||f instanceof Error||Kl(f)||he(f)||ArrayBuffer.isView(f)||f instanceof ImageData)}function Ka(f,u){if(zf(f))return(Kl(f)||he(f))&&u&&u.push(f),ArrayBuffer.isView(f)&&u&&u.push(f.buffer),f instanceof ImageData&&u&&u.push(f.data.buffer),f;if(Array.isArray(f)){const F=[];for(const M of f)F.push(Ka(M,u));return F}if(typeof f!="object")throw new Error("can't serialize object of type "+typeof f);const g=ka(f);if(!g)throw new Error(`can't serialize object of unregistered class ${f.constructor.name}`);if(!tr[g])throw new Error(`${g} is not registered.`);const{klass:x}=tr[g],E=x.serialize?x.serialize(f,u):{};if(x.serialize){if(u&&E===u[u.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const F in f){if(!f.hasOwnProperty(F)||tr[g].omit.indexOf(F)>=0)continue;const M=f[F];E[F]=tr[g].shallow.indexOf(F)>=0?M:Ka(M,u)}f instanceof Error&&(E.message=f.message)}if(E.$name)throw new Error("$name property is reserved for worker serialization logic.");return g!=="Object"&&(E.$name=g),E}function mu(f){if(zf(f))return f;if(Array.isArray(f))return f.map(mu);if(typeof f!="object")throw new Error("can't deserialize object of type "+typeof f);const u=ka(f)||"Object";if(!tr[u])throw new Error(`can't deserialize unregistered class ${u}`);const{klass:g}=tr[u];if(!g)throw new Error(`can't deserialize unregistered class ${u}`);if(g.deserialize)return g.deserialize(f);const x=Object.create(g.prototype);for(const E of Object.keys(f)){if(E==="$name")continue;const F=f[E];x[E]=tr[u].shallow.indexOf(E)>=0?F:mu(F)}return x}class Cc{constructor(){this.first=!0}update(u,g){const x=Math.floor(u);return this.first?(this.first=!1,this.lastIntegerZoom=x,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=x,!0):(this.lastFloorZoom>x?(this.lastIntegerZoom=x+1,this.lastIntegerZoomTime=g):this.lastFloorZoom<x&&(this.lastIntegerZoom=x,this.lastIntegerZoomTime=g),u!==this.lastZoom&&(this.lastZoom=u,this.lastFloorZoom=x,!0))}}const Oi={"Latin-1 Supplement":f=>f>=128&&f<=255,"Hangul Jamo":f=>f>=4352&&f<=4607,Khmer:f=>f>=6016&&f<=6143,"General Punctuation":f=>f>=8192&&f<=8303,"Letterlike Symbols":f=>f>=8448&&f<=8527,"Number Forms":f=>f>=8528&&f<=8591,"Miscellaneous Technical":f=>f>=8960&&f<=9215,"Control Pictures":f=>f>=9216&&f<=9279,"Optical Character Recognition":f=>f>=9280&&f<=9311,"Enclosed Alphanumerics":f=>f>=9312&&f<=9471,"Geometric Shapes":f=>f>=9632&&f<=9727,"Miscellaneous Symbols":f=>f>=9728&&f<=9983,"Miscellaneous Symbols and Arrows":f=>f>=11008&&f<=11263,"Ideographic Description Characters":f=>f>=12272&&f<=12287,"CJK Symbols and Punctuation":f=>f>=12288&&f<=12351,Katakana:f=>f>=12448&&f<=12543,Kanbun:f=>f>=12688&&f<=12703,"CJK Strokes":f=>f>=12736&&f<=12783,"Enclosed CJK Letters and Months":f=>f>=12800&&f<=13055,"CJK Compatibility":f=>f>=13056&&f<=13311,"Yijing Hexagram Symbols":f=>f>=19904&&f<=19967,"Private Use Area":f=>f>=57344&&f<=63743,"Vertical Forms":f=>f>=65040&&f<=65055,"CJK Compatibility Forms":f=>f>=65072&&f<=65103,"Small Form Variants":f=>f>=65104&&f<=65135,"Halfwidth and Fullwidth Forms":f=>f>=65280&&f<=65519};function Se(f){for(const u of f)if(bu(u.charCodeAt(0)))return!0;return!1}function _c(f){for(const u of f)if(!Pi(u.charCodeAt(0)))return!1;return!0}function yu(f){const u=f.map((g=>{try{return new RegExp(`\\p{sc=${g}}`,"u").source}catch{return null}})).filter((g=>g));return new RegExp(u.join("|"),"u")}const Pa=yu(["Arab","Dupl","Mong","Ougr","Syrc"]);function Pi(f){return!Pa.test(String.fromCodePoint(f))}const vu=yu(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function bu(f){return!(f!==746&&f!==747&&(f<4352||!(Oi["CJK Compatibility Forms"](f)&&!(f>=65097&&f<=65103)||Oi["CJK Compatibility"](f)||Oi["CJK Strokes"](f)||!(!Oi["CJK Symbols and Punctuation"](f)||f>=12296&&f<=12305||f>=12308&&f<=12319||f===12336)||Oi["Enclosed CJK Letters and Months"](f)||Oi["Ideographic Description Characters"](f)||Oi.Kanbun(f)||Oi.Katakana(f)&&f!==12540||!(!Oi["Halfwidth and Fullwidth Forms"](f)||f===65288||f===65289||f===65293||f>=65306&&f<=65310||f===65339||f===65341||f===65343||f>=65371&&f<=65503||f===65507||f>=65512&&f<=65519)||!(!Oi["Small Form Variants"](f)||f>=65112&&f<=65118||f>=65123&&f<=65126)||Oi["Vertical Forms"](f)||Oi["Yijing Hexagram Symbols"](f)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(f))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(f))||vu.test(String.fromCodePoint(f)))))}function xu(f){return!(bu(f)||(function(u){return!!(Oi["Latin-1 Supplement"](u)&&(u===167||u===169||u===174||u===177||u===188||u===189||u===190||u===215||u===247)||Oi["General Punctuation"](u)&&(u===8214||u===8224||u===8225||u===8240||u===8241||u===8251||u===8252||u===8258||u===8263||u===8264||u===8265||u===8273)||Oi["Letterlike Symbols"](u)||Oi["Number Forms"](u)||Oi["Miscellaneous Technical"](u)&&(u>=8960&&u<=8967||u>=8972&&u<=8991||u>=8996&&u<=9e3||u===9003||u>=9085&&u<=9114||u>=9150&&u<=9165||u===9167||u>=9169&&u<=9179||u>=9186&&u<=9215)||Oi["Control Pictures"](u)&&u!==9251||Oi["Optical Character Recognition"](u)||Oi["Enclosed Alphanumerics"](u)||Oi["Geometric Shapes"](u)||Oi["Miscellaneous Symbols"](u)&&!(u>=9754&&u<=9759)||Oi["Miscellaneous Symbols and Arrows"](u)&&(u>=11026&&u<=11055||u>=11088&&u<=11097||u>=11192&&u<=11243)||Oi["CJK Symbols and Punctuation"](u)||Oi.Katakana(u)||Oi["Private Use Area"](u)||Oi["CJK Compatibility Forms"](u)||Oi["Small Form Variants"](u)||Oi["Halfwidth and Fullwidth Forms"](u)||u===8734||u===8756||u===8757||u>=9984&&u<=10087||u>=10102&&u<=10131||u===65532||u===65533)})(f))}const Wu=yu(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Nh(f){return Wu.test(String.fromCodePoint(f))}function Nd(f,u){return!(!u&&Nh(f)||f>=2304&&f<=3583||f>=3840&&f<=4255||Oi.Khmer(f))}function Nf(f){for(const u of f)if(Nh(u.charCodeAt(0)))return!0;return!1}const hs=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(f){this.pluginStatus=f.pluginStatus,this.pluginURL=f.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(f){this.applyArabicShaping=f.applyArabicShaping,this.processBidirectionalText=f.processBidirectionalText,this.processStyledBidirectionalText=f.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class qi{constructor(u,g){this.zoom=u,g?(this.now=g.now,this.fadeDuration=g.fadeDuration,this.zoomHistory=g.zoomHistory,this.transition=g.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Cc,this.transition={})}isSupportedScript(u){return(function(g,x){for(const E of g)if(!Nd(E.charCodeAt(0),x))return!1;return!0})(u,hs.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const u=this.zoom,g=u-Math.floor(u),x=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:g+(1-g)*x}:{fromScale:.5,toScale:1,t:1-(1-x)*g}}}class Gs{constructor(u,g){this.property=u,this.value=g,this.expression=(function(x,E){if(Oh(x))return new Gu(x,E);if(Bn(x)){const F=Tr(x,E);if(F.result==="error")throw new Error(F.value.map((M=>`${M.key}: ${M.message}`)).join(", "));return F.value}{let F=x;return E.type==="color"&&typeof x=="string"?F=er.parse(x):E.type!=="padding"||typeof x!="number"&&!Array.isArray(x)?E.type==="variableAnchorOffsetCollection"&&Array.isArray(x)&&(F=Js.parse(x)):F=Mo.parse(x),{kind:"constant",evaluate:()=>F}}})(g===void 0?u.specification.default:g,u.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(u,g,x){return this.property.possiblyEvaluate(this,u,g,x)}}class Bh{constructor(u){this.property=u,this.value=new Gs(u,void 0)}transitioned(u,g){return new Lm(this.property,this.value,g,re({},u.transition,this.transition),u.now)}untransitioned(){return new Lm(this.property,this.value,null,{},0)}}class Bf{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitionablePropertyValues)}getValue(u){return ue(this._values[u].value.value)}setValue(u,g){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new Bh(this._values[u].property)),this._values[u].value=new Gs(this._values[u].property,g===null?void 0:ue(g))}getTransition(u){return ue(this._values[u].transition)}setTransition(u,g){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new Bh(this._values[u].property)),this._values[u].transition=ue(g)||void 0}serialize(){const u={};for(const g of Object.keys(this._values)){const x=this.getValue(g);x!==void 0&&(u[g]=x);const E=this.getTransition(g);E!==void 0&&(u[`${g}-transition`]=E)}return u}transitioned(u,g){const x=new Gh(this._properties);for(const E of Object.keys(this._values))x._values[E]=this._values[E].transitioned(u,g._values[E]);return x}untransitioned(){const u=new Gh(this._properties);for(const g of Object.keys(this._values))u._values[g]=this._values[g].untransitioned();return u}}class Lm{constructor(u,g,x,E,F){this.property=u,this.value=g,this.begin=F+E.delay||0,this.end=this.begin+E.duration||0,u.specification.transition&&(E.delay||E.duration)&&(this.prior=x)}possiblyEvaluate(u,g,x){const E=u.now||0,F=this.value.possiblyEvaluate(u,g,x),M=this.prior;if(M){if(E>this.end)return this.prior=null,F;if(this.value.isDataDriven())return this.prior=null,F;if(E<this.begin)return M.possiblyEvaluate(u,g,x);{const B=(E-this.begin)/(this.end-this.begin);return this.property.interpolate(M.possiblyEvaluate(u,g,x),F,(function(H){if(H<=0)return 0;if(H>=1)return 1;const Z=H*H,ee=Z*H;return 4*(H<.5?ee:3*(H-Z)+ee-.75)})(B))}}return F}}class Gh{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitioningPropertyValues)}possiblyEvaluate(u,g,x){const E=new Uu(this._properties);for(const F of Object.keys(this._values))E._values[F]=this._values[F].possiblyEvaluate(u,g,x);return E}hasTransition(){for(const u of Object.keys(this._values))if(this._values[u].prior)return!0;return!1}}class _o{constructor(u){this._properties=u,this._values=Object.create(u.defaultPropertyValues)}hasValue(u){return this._values[u].value!==void 0}getValue(u){return ue(this._values[u].value)}setValue(u,g){this._values[u]=new Gs(this._values[u].property,g===null?void 0:ue(g))}serialize(){const u={};for(const g of Object.keys(this._values)){const x=this.getValue(g);x!==void 0&&(u[g]=x)}return u}possiblyEvaluate(u,g,x){const E=new Uu(this._properties);for(const F of Object.keys(this._values))E._values[F]=this._values[F].possiblyEvaluate(u,g,x);return E}}class ss{constructor(u,g,x){this.property=u,this.value=g,this.parameters=x}isConstant(){return this.value.kind==="constant"}constantOr(u){return this.value.kind==="constant"?this.value.value:u}evaluate(u,g,x,E){return this.property.evaluate(this.value,this.parameters,u,g,x,E)}}class Uu{constructor(u){this._properties=u,this._values=Object.create(u.defaultPossiblyEvaluatedValues)}get(u){return this._values[u]}}class zn{constructor(u){this.specification=u}possiblyEvaluate(u,g){if(u.isDataDriven())throw new Error("Value should not be data driven");return u.expression.evaluate(g)}interpolate(u,g,x){const E=Gn[this.specification.type];return E?E(u,g,x):u}}class ii{constructor(u,g){this.specification=u,this.overrides=g}possiblyEvaluate(u,g,x,E){return new ss(this,u.expression.kind==="constant"||u.expression.kind==="camera"?{kind:"constant",value:u.expression.evaluate(g,null,{},x,E)}:u.expression,g)}interpolate(u,g,x){if(u.value.kind!=="constant"||g.value.kind!=="constant")return u;if(u.value.value===void 0||g.value.value===void 0)return new ss(this,{kind:"constant",value:void 0},u.parameters);const E=Gn[this.specification.type];if(E){const F=E(u.value.value,g.value.value,x);return new ss(this,{kind:"constant",value:F},u.parameters)}return u}evaluate(u,g,x,E,F,M){return u.kind==="constant"?u.value:u.evaluate(g,x,E,F,M)}}class qu extends ii{possiblyEvaluate(u,g,x,E){if(u.value===void 0)return new ss(this,{kind:"constant",value:void 0},g);if(u.expression.kind==="constant"){const F=u.expression.evaluate(g,null,{},x,E),M=u.property.specification.type==="resolvedImage"&&typeof F!="string"?F.name:F,B=this._calculate(M,M,M,g);return new ss(this,{kind:"constant",value:B},g)}if(u.expression.kind==="camera"){const F=this._calculate(u.expression.evaluate({zoom:g.zoom-1}),u.expression.evaluate({zoom:g.zoom}),u.expression.evaluate({zoom:g.zoom+1}),g);return new ss(this,{kind:"constant",value:F},g)}return new ss(this,u.expression,g)}evaluate(u,g,x,E,F,M){if(u.kind==="source"){const B=u.evaluate(g,x,E,F,M);return this._calculate(B,B,B,g)}return u.kind==="composite"?this._calculate(u.evaluate({zoom:Math.floor(g.zoom)-1},x,E),u.evaluate({zoom:Math.floor(g.zoom)},x,E),u.evaluate({zoom:Math.floor(g.zoom)+1},x,E),g):u.value}_calculate(u,g,x,E){return E.zoom>E.zoomHistory.lastIntegerZoom?{from:u,to:g}:{from:x,to:g}}interpolate(u){return u}}class Ku{constructor(u){this.specification=u}possiblyEvaluate(u,g,x,E){if(u.value!==void 0){if(u.expression.kind==="constant"){const F=u.expression.evaluate(g,null,{},x,E);return this._calculate(F,F,F,g)}return this._calculate(u.expression.evaluate(new qi(Math.floor(g.zoom-1),g)),u.expression.evaluate(new qi(Math.floor(g.zoom),g)),u.expression.evaluate(new qi(Math.floor(g.zoom+1),g)),g)}}_calculate(u,g,x,E){return E.zoom>E.zoomHistory.lastIntegerZoom?{from:u,to:g}:{from:x,to:g}}interpolate(u){return u}}class Zu{constructor(u){this.specification=u}possiblyEvaluate(u,g,x,E){return!!u.expression.evaluate(g,null,{},x,E)}interpolate(){return!1}}class D{constructor(u){this.properties=u,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const g in u){const x=u[g];x.specification.overridable&&this.overridableProperties.push(g);const E=this.defaultPropertyValues[g]=new Gs(x,void 0),F=this.defaultTransitionablePropertyValues[g]=new Bh(x);this.defaultTransitioningPropertyValues[g]=F.untransitioned(),this.defaultPossiblyEvaluatedValues[g]=E.possiblyEvaluate({})}}}nn("DataDrivenProperty",ii),nn("DataConstantProperty",zn),nn("CrossFadedDataDrivenProperty",qu),nn("CrossFadedProperty",Ku),nn("ColorRampProperty",Zu);const l="-transition";class y extends $t{constructor(u,g){if(super(),this.id=u.id,this.type=u.type,this._featureFilter={filter:()=>!0,needGeometry:!1},u.type!=="custom"&&(this.metadata=u.metadata,this.minzoom=u.minzoom,this.maxzoom=u.maxzoom,u.type!=="background"&&(this.source=u.source,this.sourceLayer=u["source-layer"],this.filter=u.filter),g.layout&&(this._unevaluatedLayout=new _o(g.layout)),g.paint)){this._transitionablePaint=new Bf(g.paint);for(const x in u.paint)this.setPaintProperty(x,u.paint[x],{validate:!1});for(const x in u.layout)this.setLayoutProperty(x,u.layout[x],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Uu(g.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(u){return u==="visibility"?this.visibility:this._unevaluatedLayout.getValue(u)}setLayoutProperty(u,g,x={}){g!=null&&this._validate(xc,`layers.${this.id}.layout.${u}`,u,g,x)||(u!=="visibility"?this._unevaluatedLayout.setValue(u,g):this.visibility=g)}getPaintProperty(u){return u.endsWith(l)?this._transitionablePaint.getTransition(u.slice(0,-11)):this._transitionablePaint.getValue(u)}setPaintProperty(u,g,x={}){if(g!=null&&this._validate($u,`layers.${this.id}.paint.${u}`,u,g,x))return!1;if(u.endsWith(l))return this._transitionablePaint.setTransition(u.slice(0,-11),g||void 0),!1;{const E=this._transitionablePaint._values[u],F=E.property.specification["property-type"]==="cross-faded-data-driven",M=E.value.isDataDriven(),B=E.value;this._transitionablePaint.setValue(u,g),this._handleSpecialPaintPropertyUpdate(u);const H=this._transitionablePaint._values[u].value;return H.isDataDriven()||M||F||this._handleOverridablePaintPropertyUpdate(u,B,H)}}_handleSpecialPaintPropertyUpdate(u){}_handleOverridablePaintPropertyUpdate(u,g,x){return!1}isHidden(u){return!!(this.minzoom&&u<this.minzoom)||!!(this.maxzoom&&u>=this.maxzoom)||this.visibility==="none"}updateTransitions(u){this._transitioningPaint=this._transitionablePaint.transitioned(u,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(u,g){u.getCrossfadeParameters&&(this._crossfadeParameters=u.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(u,void 0,g)),this.paint=this._transitioningPaint.possiblyEvaluate(u,void 0,g)}serialize(){const u={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(u.layout=u.layout||{},u.layout.visibility=this.visibility),be(u,((g,x)=>!(g===void 0||x==="layout"&&!Object.keys(g).length||x==="paint"&&!Object.keys(g).length)))}_validate(u,g,x,E,F={}){return(!F||F.validate!==!1)&&wc(this,u.call(Ss,{key:g,layerType:this.type,objectKey:x,value:E,styleSpec:Pe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const u in this.paint._values){const g=this.paint.get(u);if(g instanceof ss&&Md(g.property.specification)&&(g.value.kind==="source"||g.value.kind==="composite")&&g.value.isStateDependent)return!0}return!1}}const _={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class S{constructor(u,g){this._structArray=u,this._pos1=g*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class P{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(u,g){return u._trim(),g&&(u.isTransferred=!0,g.push(u.arrayBuffer)),{length:u.length,arrayBuffer:u.arrayBuffer}}static deserialize(u){const g=Object.create(this.prototype);return g.arrayBuffer=u.arrayBuffer,g.length=u.length,g.capacity=u.arrayBuffer.byteLength/g.bytesPerElement,g._refreshViews(),g}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(u){this.reserve(u),this.length=u}reserve(u){if(u>this.capacity){this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const g=this.uint8;this._refreshViews(),g&&this.uint8.set(g)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function G(f,u=1){let g=0,x=0;return{members:f.map((E=>{const F=_[E.type].BYTES_PER_ELEMENT,M=g=W(g,Math.max(u,F)),B=E.components||1;return x=Math.max(x,F),g+=F*B,{name:E.name,type:E.type,components:B,offset:M}})),size:W(g,Math.max(x,u)),alignment:u}}function W(f,u){return Math.ceil(f/u)*u}class K extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,g){const x=this.length;return this.resize(x+1),this.emplace(x,u,g)}emplace(u,g,x){const E=2*u;return this.int16[E+0]=g,this.int16[E+1]=x,u}}K.prototype.bytesPerElement=4,nn("StructArrayLayout2i4",K);class te extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,g,x){const E=this.length;return this.resize(E+1),this.emplace(E,u,g,x)}emplace(u,g,x,E){const F=3*u;return this.int16[F+0]=g,this.int16[F+1]=x,this.int16[F+2]=E,u}}te.prototype.bytesPerElement=6,nn("StructArrayLayout3i6",te);class ae extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,g,x,E){const F=this.length;return this.resize(F+1),this.emplace(F,u,g,x,E)}emplace(u,g,x,E,F){const M=4*u;return this.int16[M+0]=g,this.int16[M+1]=x,this.int16[M+2]=E,this.int16[M+3]=F,u}}ae.prototype.bytesPerElement=8,nn("StructArrayLayout4i8",ae);class le extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,g,x,E,F,M){const B=this.length;return this.resize(B+1),this.emplace(B,u,g,x,E,F,M)}emplace(u,g,x,E,F,M,B){const H=6*u;return this.int16[H+0]=g,this.int16[H+1]=x,this.int16[H+2]=E,this.int16[H+3]=F,this.int16[H+4]=M,this.int16[H+5]=B,u}}le.prototype.bytesPerElement=12,nn("StructArrayLayout2i4i12",le);class xe extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,g,x,E,F,M){const B=this.length;return this.resize(B+1),this.emplace(B,u,g,x,E,F,M)}emplace(u,g,x,E,F,M,B){const H=4*u,Z=8*u;return this.int16[H+0]=g,this.int16[H+1]=x,this.uint8[Z+4]=E,this.uint8[Z+5]=F,this.uint8[Z+6]=M,this.uint8[Z+7]=B,u}}xe.prototype.bytesPerElement=8,nn("StructArrayLayout2i4ub8",xe);class Ee extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,g){const x=this.length;return this.resize(x+1),this.emplace(x,u,g)}emplace(u,g,x){const E=2*u;return this.float32[E+0]=g,this.float32[E+1]=x,u}}Ee.prototype.bytesPerElement=8,nn("StructArrayLayout2f8",Ee);class Fe extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,g,x,E,F,M,B,H,Z,ee){const oe=this.length;return this.resize(oe+1),this.emplace(oe,u,g,x,E,F,M,B,H,Z,ee)}emplace(u,g,x,E,F,M,B,H,Z,ee,oe){const de=10*u;return this.uint16[de+0]=g,this.uint16[de+1]=x,this.uint16[de+2]=E,this.uint16[de+3]=F,this.uint16[de+4]=M,this.uint16[de+5]=B,this.uint16[de+6]=H,this.uint16[de+7]=Z,this.uint16[de+8]=ee,this.uint16[de+9]=oe,u}}Fe.prototype.bytesPerElement=20,nn("StructArrayLayout10ui20",Fe);class Ge extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,g,x,E,F,M,B,H,Z,ee,oe,de){const me=this.length;return this.resize(me+1),this.emplace(me,u,g,x,E,F,M,B,H,Z,ee,oe,de)}emplace(u,g,x,E,F,M,B,H,Z,ee,oe,de,me){const Ce=12*u;return this.int16[Ce+0]=g,this.int16[Ce+1]=x,this.int16[Ce+2]=E,this.int16[Ce+3]=F,this.uint16[Ce+4]=M,this.uint16[Ce+5]=B,this.uint16[Ce+6]=H,this.uint16[Ce+7]=Z,this.int16[Ce+8]=ee,this.int16[Ce+9]=oe,this.int16[Ce+10]=de,this.int16[Ce+11]=me,u}}Ge.prototype.bytesPerElement=24,nn("StructArrayLayout4i4ui4i24",Ge);class Ve extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,g,x){const E=this.length;return this.resize(E+1),this.emplace(E,u,g,x)}emplace(u,g,x,E){const F=3*u;return this.float32[F+0]=g,this.float32[F+1]=x,this.float32[F+2]=E,u}}Ve.prototype.bytesPerElement=12,nn("StructArrayLayout3f12",Ve);class $e extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(u){const g=this.length;return this.resize(g+1),this.emplace(g,u)}emplace(u,g){return this.uint32[1*u+0]=g,u}}$e.prototype.bytesPerElement=4,nn("StructArrayLayout1ul4",$e);class Ke extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,g,x,E,F,M,B,H,Z){const ee=this.length;return this.resize(ee+1),this.emplace(ee,u,g,x,E,F,M,B,H,Z)}emplace(u,g,x,E,F,M,B,H,Z,ee){const oe=10*u,de=5*u;return this.int16[oe+0]=g,this.int16[oe+1]=x,this.int16[oe+2]=E,this.int16[oe+3]=F,this.int16[oe+4]=M,this.int16[oe+5]=B,this.uint32[de+3]=H,this.uint16[oe+8]=Z,this.uint16[oe+9]=ee,u}}Ke.prototype.bytesPerElement=20,nn("StructArrayLayout6i1ul2ui20",Ke);class ze extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,g,x,E,F,M){const B=this.length;return this.resize(B+1),this.emplace(B,u,g,x,E,F,M)}emplace(u,g,x,E,F,M,B){const H=6*u;return this.int16[H+0]=g,this.int16[H+1]=x,this.int16[H+2]=E,this.int16[H+3]=F,this.int16[H+4]=M,this.int16[H+5]=B,u}}ze.prototype.bytesPerElement=12,nn("StructArrayLayout2i2i2i12",ze);class tt extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,g,x,E,F){const M=this.length;return this.resize(M+1),this.emplace(M,u,g,x,E,F)}emplace(u,g,x,E,F,M){const B=4*u,H=8*u;return this.float32[B+0]=g,this.float32[B+1]=x,this.float32[B+2]=E,this.int16[H+6]=F,this.int16[H+7]=M,u}}tt.prototype.bytesPerElement=16,nn("StructArrayLayout2f1f2i16",tt);class rt extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,g,x,E,F,M){const B=this.length;return this.resize(B+1),this.emplace(B,u,g,x,E,F,M)}emplace(u,g,x,E,F,M,B){const H=16*u,Z=4*u,ee=8*u;return this.uint8[H+0]=g,this.uint8[H+1]=x,this.float32[Z+1]=E,this.float32[Z+2]=F,this.int16[ee+6]=M,this.int16[ee+7]=B,u}}rt.prototype.bytesPerElement=16,nn("StructArrayLayout2ub2f2i16",rt);class gt extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,g,x){const E=this.length;return this.resize(E+1),this.emplace(E,u,g,x)}emplace(u,g,x,E){const F=3*u;return this.uint16[F+0]=g,this.uint16[F+1]=x,this.uint16[F+2]=E,u}}gt.prototype.bytesPerElement=6,nn("StructArrayLayout3ui6",gt);class jt extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,g,x,E,F,M,B,H,Z,ee,oe,de,me,Ce,we,Be,He){const ht=this.length;return this.resize(ht+1),this.emplace(ht,u,g,x,E,F,M,B,H,Z,ee,oe,de,me,Ce,we,Be,He)}emplace(u,g,x,E,F,M,B,H,Z,ee,oe,de,me,Ce,we,Be,He,ht){const Qe=24*u,et=12*u,It=48*u;return this.int16[Qe+0]=g,this.int16[Qe+1]=x,this.uint16[Qe+2]=E,this.uint16[Qe+3]=F,this.uint32[et+2]=M,this.uint32[et+3]=B,this.uint32[et+4]=H,this.uint16[Qe+10]=Z,this.uint16[Qe+11]=ee,this.uint16[Qe+12]=oe,this.float32[et+7]=de,this.float32[et+8]=me,this.uint8[It+36]=Ce,this.uint8[It+37]=we,this.uint8[It+38]=Be,this.uint32[et+10]=He,this.int16[Qe+22]=ht,u}}jt.prototype.bytesPerElement=48,nn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",jt);class un extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,g,x,E,F,M,B,H,Z,ee,oe,de,me,Ce,we,Be,He,ht,Qe,et,It,rn,Rn,si,vn,_n,Vn,On){const Mn=this.length;return this.resize(Mn+1),this.emplace(Mn,u,g,x,E,F,M,B,H,Z,ee,oe,de,me,Ce,we,Be,He,ht,Qe,et,It,rn,Rn,si,vn,_n,Vn,On)}emplace(u,g,x,E,F,M,B,H,Z,ee,oe,de,me,Ce,we,Be,He,ht,Qe,et,It,rn,Rn,si,vn,_n,Vn,On,Mn){const Nt=32*u,In=16*u;return this.int16[Nt+0]=g,this.int16[Nt+1]=x,this.int16[Nt+2]=E,this.int16[Nt+3]=F,this.int16[Nt+4]=M,this.int16[Nt+5]=B,this.int16[Nt+6]=H,this.int16[Nt+7]=Z,this.uint16[Nt+8]=ee,this.uint16[Nt+9]=oe,this.uint16[Nt+10]=de,this.uint16[Nt+11]=me,this.uint16[Nt+12]=Ce,this.uint16[Nt+13]=we,this.uint16[Nt+14]=Be,this.uint16[Nt+15]=He,this.uint16[Nt+16]=ht,this.uint16[Nt+17]=Qe,this.uint16[Nt+18]=et,this.uint16[Nt+19]=It,this.uint16[Nt+20]=rn,this.uint16[Nt+21]=Rn,this.uint16[Nt+22]=si,this.uint32[In+12]=vn,this.float32[In+13]=_n,this.float32[In+14]=Vn,this.uint16[Nt+30]=On,this.uint16[Nt+31]=Mn,u}}un.prototype.bytesPerElement=64,nn("StructArrayLayout8i15ui1ul2f2ui64",un);class gn extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u){const g=this.length;return this.resize(g+1),this.emplace(g,u)}emplace(u,g){return this.float32[1*u+0]=g,u}}gn.prototype.bytesPerElement=4,nn("StructArrayLayout1f4",gn);class En extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,g,x){const E=this.length;return this.resize(E+1),this.emplace(E,u,g,x)}emplace(u,g,x,E){const F=3*u;return this.uint16[6*u+0]=g,this.float32[F+1]=x,this.float32[F+2]=E,u}}En.prototype.bytesPerElement=12,nn("StructArrayLayout1ui2f12",En);class bn extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,g,x){const E=this.length;return this.resize(E+1),this.emplace(E,u,g,x)}emplace(u,g,x,E){const F=4*u;return this.uint32[2*u+0]=g,this.uint16[F+2]=x,this.uint16[F+3]=E,u}}bn.prototype.bytesPerElement=8,nn("StructArrayLayout1ul2ui8",bn);class hn extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,g){const x=this.length;return this.resize(x+1),this.emplace(x,u,g)}emplace(u,g,x){const E=2*u;return this.uint16[E+0]=g,this.uint16[E+1]=x,u}}hn.prototype.bytesPerElement=4,nn("StructArrayLayout2ui4",hn);class kn extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u){const g=this.length;return this.resize(g+1),this.emplace(g,u)}emplace(u,g){return this.uint16[1*u+0]=g,u}}kn.prototype.bytesPerElement=2,nn("StructArrayLayout1ui2",kn);class ci extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,g,x,E){const F=this.length;return this.resize(F+1),this.emplace(F,u,g,x,E)}emplace(u,g,x,E,F){const M=4*u;return this.float32[M+0]=g,this.float32[M+1]=x,this.float32[M+2]=E,this.float32[M+3]=F,u}}ci.prototype.bytesPerElement=16,nn("StructArrayLayout4f16",ci);class xn extends S{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new v(this.anchorPointX,this.anchorPointY)}}xn.prototype.size=20;class cn extends Ke{get(u){return new xn(this,u)}}nn("CollisionBoxArray",cn);class oi extends S{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(u){this._structArray.uint8[this._pos1+37]=u}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(u){this._structArray.uint8[this._pos1+38]=u}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(u){this._structArray.uint32[this._pos4+10]=u}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}oi.prototype.size=48;class kr extends jt{get(u){return new oi(this,u)}}nn("PlacedSymbolArray",kr);class gi extends S{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(u){this._structArray.uint32[this._pos4+12]=u}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}gi.prototype.size=64;class Ki extends un{get(u){return new gi(this,u)}}nn("SymbolInstanceArray",Ki);class vr extends gn{getoffsetX(u){return this.float32[1*u+0]}}nn("GlyphOffsetArray",vr);class go extends te{getx(u){return this.int16[3*u+0]}gety(u){return this.int16[3*u+1]}gettileUnitDistanceFromAnchor(u){return this.int16[3*u+2]}}nn("SymbolLineVertexArray",go);class Za extends S{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Za.prototype.size=12;class Zi extends En{get(u){return new Za(this,u)}}nn("TextAnchorOffsetArray",Zi);class Es extends S{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Es.prototype.size=8;class eo extends bn{get(u){return new Es(this,u)}}nn("FeatureIndexArray",eo);class to extends K{}class Go extends K{}class Da extends K{}class id extends le{}class pa extends xe{}class fs extends Ee{}class _r extends Fe{}class rd extends Ge{}class ga extends Ve{}class yi extends $e{}class or extends ze{}class Br extends rt{}class ma extends gt{}class jo extends hn{}const Ho=G([{name:"a_pos",components:2,type:"Int16"}],4),{members:ta}=Ho;class Hi{constructor(u=[]){this.segments=u}prepareSegment(u,g,x,E){let F=this.segments[this.segments.length-1];return u>Hi.MAX_VERTEX_ARRAY_LENGTH&&ce(`Max vertices per segment is ${Hi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${u}`),(!F||F.vertexLength+u>Hi.MAX_VERTEX_ARRAY_LENGTH||F.sortKey!==E)&&(F={vertexOffset:g.length,primitiveOffset:x.length,vertexLength:0,primitiveLength:0},E!==void 0&&(F.sortKey=E),this.segments.push(F)),F}get(){return this.segments}destroy(){for(const u of this.segments)for(const g in u.vaos)u.vaos[g].destroy()}static simpleSegment(u,g,x,E){return new Hi([{vertexOffset:u,primitiveOffset:g,vertexLength:x,primitiveLength:E,vaos:{},sortKey:0}])}}function Fa(f,u){return 256*(f=q(Math.floor(f),0,255))+q(Math.floor(u),0,255)}Hi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,nn("SegmentVector",Hi);const Bd=G([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Gr={exports:{}},jh={exports:{}};jh.exports=function(f,u){var g,x,E,F,M,B,H,Z;for(x=f.length-(g=3&f.length),E=u,M=3432918353,B=461845907,Z=0;Z<x;)H=255&f.charCodeAt(Z)|(255&f.charCodeAt(++Z))<<8|(255&f.charCodeAt(++Z))<<16|(255&f.charCodeAt(++Z))<<24,++Z,E=27492+(65535&(F=5*(65535&(E=(E^=H=(65535&(H=(H=(65535&H)*M+(((H>>>16)*M&65535)<<16)&4294967295)<<15|H>>>17))*B+(((H>>>16)*B&65535)<<16)&4294967295)<<13|E>>>19))+((5*(E>>>16)&65535)<<16)&4294967295))+((58964+(F>>>16)&65535)<<16);switch(H=0,g){case 3:H^=(255&f.charCodeAt(Z+2))<<16;case 2:H^=(255&f.charCodeAt(Z+1))<<8;case 1:E^=H=(65535&(H=(H=(65535&(H^=255&f.charCodeAt(Z)))*M+(((H>>>16)*M&65535)<<16)&4294967295)<<15|H>>>17))*B+(((H>>>16)*B&65535)<<16)&4294967295}return E^=f.length,E=2246822507*(65535&(E^=E>>>16))+((2246822507*(E>>>16)&65535)<<16)&4294967295,E=3266489909*(65535&(E^=E>>>13))+((3266489909*(E>>>16)&65535)<<16)&4294967295,(E^=E>>>16)>>>0};var Gf=jh.exports,jf={exports:{}};jf.exports=function(f,u){for(var g,x=f.length,E=u^x,F=0;x>=4;)g=1540483477*(65535&(g=255&f.charCodeAt(F)|(255&f.charCodeAt(++F))<<8|(255&f.charCodeAt(++F))<<16|(255&f.charCodeAt(++F))<<24))+((1540483477*(g>>>16)&65535)<<16),E=1540483477*(65535&E)+((1540483477*(E>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),x-=4,++F;switch(x){case 3:E^=(255&f.charCodeAt(F+2))<<16;case 2:E^=(255&f.charCodeAt(F+1))<<8;case 1:E=1540483477*(65535&(E^=255&f.charCodeAt(F)))+((1540483477*(E>>>16)&65535)<<16)}return E=1540483477*(65535&(E^=E>>>13))+((1540483477*(E>>>16)&65535)<<16),(E^=E>>>15)>>>0};var ml=Gf,Om=jf.exports;Gr.exports=ml,Gr.exports.murmur3=ml,Gr.exports.murmur2=Om;var od=d(Gr.exports);class Sc{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(u,g,x,E){this.ids.push(Gd(u)),this.positions.push(g,x,E)}getPositions(u){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const g=Gd(u);let x=0,E=this.ids.length-1;for(;x<E;){const M=x+E>>1;this.ids[M]>=g?E=M:x=M+1}const F=[];for(;this.ids[x]===g;)F.push({index:this.positions[3*x],start:this.positions[3*x+1],end:this.positions[3*x+2]}),x++;return F}static serialize(u,g){const x=new Float64Array(u.ids),E=new Uint32Array(u.positions);return ps(x,E,0,x.length-1),g&&g.push(x.buffer,E.buffer),{ids:x,positions:E}}static deserialize(u){const g=new Sc;return g.ids=u.ids,g.positions=u.positions,g.indexed=!0,g}}function Gd(f){const u=+f;return!isNaN(u)&&u<=Number.MAX_SAFE_INTEGER?u:od(String(f))}function ps(f,u,g,x){for(;g<x;){const E=f[g+x>>1];let F=g-1,M=x+1;for(;;){do F++;while(f[F]<E);do M--;while(f[M]>E);if(F>=M)break;ao(f,F,M),ao(u,3*F,3*M),ao(u,3*F+1,3*M+1),ao(u,3*F+2,3*M+2)}M-g<x-M?(ps(f,u,g,M),g=M+1):(ps(f,u,M+1,x),x=M)}}function ao(f,u,g){const x=f[u];f[u]=f[g],f[g]=x}nn("FeaturePositionMap",Sc);class wu{constructor(u,g){this.gl=u.gl,this.location=g}}class sd extends wu{constructor(u,g){super(u,g),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class Hh extends wu{constructor(u,g){super(u,g),this.current=[0,0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3]))}}class zm extends wu{constructor(u,g){super(u,g),this.current=er.transparent}set(u){u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a))}}const Yu=new Float32Array(16);function Yi(f){return[Fa(255*f.r,255*f.g),Fa(255*f.b,255*f.a)]}class Vh{constructor(u,g,x){this.value=u,this.uniformNames=g.map((E=>`u_${E}`)),this.type=x}setUniform(u,g,x){u.set(x.constantOr(this.value))}getBinding(u,g,x){return this.type==="color"?new zm(u,g):new sd(u,g)}}class jd{constructor(u,g){this.uniformNames=g.map((x=>`u_${x}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(u,g){this.pixelRatioFrom=g.pixelRatio,this.pixelRatioTo=u.pixelRatio,this.patternFrom=g.tlbr,this.patternTo=u.tlbr}setUniform(u,g,x,E){const F=E==="u_pattern_to"?this.patternTo:E==="u_pattern_from"?this.patternFrom:E==="u_pixel_ratio_to"?this.pixelRatioTo:E==="u_pixel_ratio_from"?this.pixelRatioFrom:null;F&&u.set(F)}getBinding(u,g,x){return x.substr(0,9)==="u_pattern"?new Hh(u,g):new sd(u,g)}}class yl{constructor(u,g,x,E){this.expression=u,this.type=x,this.maxValue=0,this.paintVertexAttributes=g.map((F=>({name:`a_${F}`,type:"Float32",components:x==="color"?2:1,offset:0}))),this.paintVertexArray=new E}populatePaintArray(u,g,x,E,F){const M=this.paintVertexArray.length,B=this.expression.evaluate(new qi(0),g,{},E,[],F);this.paintVertexArray.resize(u),this._setPaintValue(M,u,B)}updatePaintArray(u,g,x,E){const F=this.expression.evaluate({zoom:0},x,E);this._setPaintValue(u,g,F)}_setPaintValue(u,g,x){if(this.type==="color"){const E=Yi(x);for(let F=u;F<g;F++)this.paintVertexArray.emplace(F,E[0],E[1])}else{for(let E=u;E<g;E++)this.paintVertexArray.emplace(E,x);this.maxValue=Math.max(this.maxValue,Math.abs(x))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Zl{constructor(u,g,x,E,F,M){this.expression=u,this.uniformNames=g.map((B=>`u_${B}_t`)),this.type=x,this.useIntegerZoom=E,this.zoom=F,this.maxValue=0,this.paintVertexAttributes=g.map((B=>({name:`a_${B}`,type:"Float32",components:x==="color"?4:2,offset:0}))),this.paintVertexArray=new M}populatePaintArray(u,g,x,E,F){const M=this.expression.evaluate(new qi(this.zoom),g,{},E,[],F),B=this.expression.evaluate(new qi(this.zoom+1),g,{},E,[],F),H=this.paintVertexArray.length;this.paintVertexArray.resize(u),this._setPaintValue(H,u,M,B)}updatePaintArray(u,g,x,E){const F=this.expression.evaluate({zoom:this.zoom},x,E),M=this.expression.evaluate({zoom:this.zoom+1},x,E);this._setPaintValue(u,g,F,M)}_setPaintValue(u,g,x,E){if(this.type==="color"){const F=Yi(x),M=Yi(E);for(let B=u;B<g;B++)this.paintVertexArray.emplace(B,F[0],F[1],M[0],M[1])}else{for(let F=u;F<g;F++)this.paintVertexArray.emplace(F,x,E);this.maxValue=Math.max(this.maxValue,Math.abs(x),Math.abs(E))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(u,g){const x=this.useIntegerZoom?Math.floor(g.zoom):g.zoom,E=q(this.expression.interpolationFactor(x,this.zoom,this.zoom+1),0,1);u.set(E)}getBinding(u,g,x){return new sd(u,g)}}class ad{constructor(u,g,x,E,F,M){this.expression=u,this.type=g,this.useIntegerZoom=x,this.zoom=E,this.layerId=M,this.zoomInPaintVertexArray=new F,this.zoomOutPaintVertexArray=new F}populatePaintArray(u,g,x){const E=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(u),this.zoomOutPaintVertexArray.resize(u),this._setPaintValues(E,u,g.patterns&&g.patterns[this.layerId],x)}updatePaintArray(u,g,x,E,F){this._setPaintValues(u,g,x.patterns&&x.patterns[this.layerId],F)}_setPaintValues(u,g,x,E){if(!E||!x)return;const{min:F,mid:M,max:B}=x,H=E[F],Z=E[M],ee=E[B];if(H&&Z&&ee)for(let oe=u;oe<g;oe++)this.zoomInPaintVertexArray.emplace(oe,Z.tl[0],Z.tl[1],Z.br[0],Z.br[1],H.tl[0],H.tl[1],H.br[0],H.br[1],Z.pixelRatio,H.pixelRatio),this.zoomOutPaintVertexArray.emplace(oe,Z.tl[0],Z.tl[1],Z.br[0],Z.br[1],ee.tl[0],ee.tl[1],ee.br[0],ee.br[1],Z.pixelRatio,ee.pixelRatio)}upload(u){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,Bd.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,Bd.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Ky{constructor(u,g,x){this.binders={},this._buffers=[];const E=[];for(const F in u.paint._values){if(!x(F))continue;const M=u.paint.get(F);if(!(M instanceof ss&&Md(M.property.specification)))continue;const B=A0(F,u.type),H=M.value,Z=M.property.specification.type,ee=M.property.useIntegerZoom,oe=M.property.specification["property-type"],de=oe==="cross-faded"||oe==="cross-faded-data-driven";if(H.kind==="constant")this.binders[F]=de?new jd(H.value,B):new Vh(H.value,B,Z),E.push(`/u_${F}`);else if(H.kind==="source"||de){const me=$h(F,Z,"source");this.binders[F]=de?new ad(H,Z,ee,g,me,u.id):new yl(H,B,Z,me),E.push(`/a_${F}`)}else{const me=$h(F,Z,"composite");this.binders[F]=new Zl(H,B,Z,ee,g,me),E.push(`/z_${F}`)}}this.cacheKey=E.sort().join("")}getMaxValue(u){const g=this.binders[u];return g instanceof yl||g instanceof Zl?g.maxValue:0}populatePaintArrays(u,g,x,E,F){for(const M in this.binders){const B=this.binders[M];(B instanceof yl||B instanceof Zl||B instanceof ad)&&B.populatePaintArray(u,g,x,E,F)}}setConstantPatternPositions(u,g){for(const x in this.binders){const E=this.binders[x];E instanceof jd&&E.setConstantPatternPositions(u,g)}}updatePaintArrays(u,g,x,E,F){let M=!1;for(const B in u){const H=g.getPositions(B);for(const Z of H){const ee=x.feature(Z.index);for(const oe in this.binders){const de=this.binders[oe];if((de instanceof yl||de instanceof Zl||de instanceof ad)&&de.expression.isStateDependent===!0){const me=E.paint.get(oe);de.expression=me.value,de.updatePaintArray(Z.start,Z.end,ee,u[B],F),M=!0}}}}return M}defines(){const u=[];for(const g in this.binders){const x=this.binders[g];(x instanceof Vh||x instanceof jd)&&u.push(...x.uniformNames.map((E=>`#define HAS_UNIFORM_${E}`)))}return u}getBinderAttributes(){const u=[];for(const g in this.binders){const x=this.binders[g];if(x instanceof yl||x instanceof Zl)for(let E=0;E<x.paintVertexAttributes.length;E++)u.push(x.paintVertexAttributes[E].name);else if(x instanceof ad)for(let E=0;E<Bd.members.length;E++)u.push(Bd.members[E].name)}return u}getBinderUniforms(){const u=[];for(const g in this.binders){const x=this.binders[g];if(x instanceof Vh||x instanceof jd||x instanceof Zl)for(const E of x.uniformNames)u.push(E)}return u}getPaintVertexBuffers(){return this._buffers}getUniforms(u,g){const x=[];for(const E in this.binders){const F=this.binders[E];if(F instanceof Vh||F instanceof jd||F instanceof Zl){for(const M of F.uniformNames)if(g[M]){const B=F.getBinding(u,g[M],M);x.push({name:M,property:E,binding:B})}}}return x}setUniforms(u,g,x,E){for(const{name:F,property:M,binding:B}of g)this.binders[M].setUniform(B,E,x.get(M),F)}updatePaintBuffers(u){this._buffers=[];for(const g in this.binders){const x=this.binders[g];if(u&&x instanceof ad){const E=u.fromScale===2?x.zoomInPaintVertexBuffer:x.zoomOutPaintVertexBuffer;E&&this._buffers.push(E)}else(x instanceof yl||x instanceof Zl)&&x.paintVertexBuffer&&this._buffers.push(x.paintVertexBuffer)}}upload(u){for(const g in this.binders){const x=this.binders[g];(x instanceof yl||x instanceof Zl||x instanceof ad)&&x.upload(u)}this.updatePaintBuffers()}destroy(){for(const u in this.binders){const g=this.binders[u];(g instanceof yl||g instanceof Zl||g instanceof ad)&&g.destroy()}}}class js{constructor(u,g,x=(()=>!0)){this.programConfigurations={};for(const E of u)this.programConfigurations[E.id]=new Ky(E,g,x);this.needsUpload=!1,this._featureMap=new Sc,this._bufferOffset=0}populatePaintArrays(u,g,x,E,F,M){for(const B in this.programConfigurations)this.programConfigurations[B].populatePaintArrays(u,g,E,F,M);g.id!==void 0&&this._featureMap.add(g.id,x,this._bufferOffset,u),this._bufferOffset=u,this.needsUpload=!0}updatePaintArrays(u,g,x,E){for(const F of x)this.needsUpload=this.programConfigurations[F.id].updatePaintArrays(u,this._featureMap,g,F,E)||this.needsUpload}get(u){return this.programConfigurations[u]}upload(u){if(this.needsUpload){for(const g in this.programConfigurations)this.programConfigurations[g].upload(u);this.needsUpload=!1}}destroy(){for(const u in this.programConfigurations)this.programConfigurations[u].destroy()}}function A0(f,u){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[f]||[f.replace(`${u}-`,"").replace(/-/g,"_")]}function $h(f,u,g){const x={color:{source:Ee,composite:ci},number:{source:gn,composite:Ee}},E=(function(F){return{"line-pattern":{source:_r,composite:_r},"fill-pattern":{source:_r,composite:_r},"fill-extrusion-pattern":{source:_r,composite:_r}}[F]})(f);return E&&E[g]||x[u][g]}nn("ConstantBinder",Vh),nn("CrossFadedConstantBinder",jd),nn("SourceExpressionBinder",yl),nn("CrossFadedCompositeBinder",ad),nn("CompositeExpressionBinder",Zl),nn("ProgramConfiguration",Ky,{omit:["_buffers"]}),nn("ProgramConfigurationSet",js);const Oo=8192,Nm=Math.pow(2,14)-1,Bm=-Nm-1;function Rs(f){const u=Oo/f.extent,g=f.loadGeometry();for(let x=0;x<g.length;x++){const E=g[x];for(let F=0;F<E.length;F++){const M=E[F],B=Math.round(M.x*u),H=Math.round(M.y*u);M.x=q(B,Bm,Nm),M.y=q(H,Bm,Nm),(B<M.x||B>M.x+1||H<M.y||H>M.y+1)&&ce("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return g}function Ya(f,u){return{type:f.type,id:f.id,properties:f.properties,geometry:u?Rs(f):[]}}function Hd(f,u,g,x,E){f.emplaceBack(2*u+(x+1)/2,2*g+(E+1)/2)}class Qp{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((g=>g.id)),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new Go,this.indexArray=new ma,this.segments=new Hi,this.programConfigurations=new js(u.layers,u.zoom),this.stateDependentLayerIds=this.layers.filter((g=>g.isStateDependent())).map((g=>g.id))}populate(u,g,x){const E=this.layers[0],F=[];let M=null,B=!1;E.type==="circle"&&(M=E.layout.get("circle-sort-key"),B=!M.isConstant());for(const{feature:H,id:Z,index:ee,sourceLayerIndex:oe}of u){const de=this.layers[0]._featureFilter.needGeometry,me=Ya(H,de);if(!this.layers[0]._featureFilter.filter(new qi(this.zoom),me,x))continue;const Ce=B?M.evaluate(me,{},x):void 0,we={id:Z,properties:H.properties,type:H.type,sourceLayerIndex:oe,index:ee,geometry:de?me.geometry:Rs(H),patterns:{},sortKey:Ce};F.push(we)}B&&F.sort(((H,Z)=>H.sortKey-Z.sortKey));for(const H of F){const{geometry:Z,index:ee,sourceLayerIndex:oe}=H,de=u[ee].feature;this.addFeature(H,Z,ee,x),g.featureIndex.insert(de,Z,ee,oe,this.index)}}update(u,g,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,g,this.stateDependentLayers,x)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,ta),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(u,g,x,E){for(const F of g)for(const M of F){const B=M.x,H=M.y;if(B<0||B>=Oo||H<0||H>=Oo)continue;const Z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,u.sortKey),ee=Z.vertexLength;Hd(this.layoutVertexArray,B,H,-1,-1),Hd(this.layoutVertexArray,B,H,1,-1),Hd(this.layoutVertexArray,B,H,1,1),Hd(this.layoutVertexArray,B,H,-1,1),this.indexArray.emplaceBack(ee,ee+1,ee+2),this.indexArray.emplaceBack(ee,ee+3,ee+2),Z.vertexLength+=4,Z.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,x,{},E)}}function Hf(f,u){for(let g=0;g<f.length;g++)if(Ec(u,f[g]))return!0;for(let g=0;g<u.length;g++)if(Ec(f,u[g]))return!0;return!!tg(f,u)}function Zy(f,u,g){return!!Ec(f,u)||!!Xa(u,f,g)}function eg(f,u){if(f.length===1)return Cu(u,f[0]);for(let g=0;g<u.length;g++){const x=u[g];for(let E=0;E<x.length;E++)if(Ec(f,x[E]))return!0}for(let g=0;g<f.length;g++)if(Cu(u,f[g]))return!0;for(let g=0;g<u.length;g++)if(tg(f,u[g]))return!0;return!1}function Yy(f,u,g){if(f.length>1){if(tg(f,u))return!0;for(let x=0;x<u.length;x++)if(Xa(u[x],f,g))return!0}for(let x=0;x<f.length;x++)if(Xa(f[x],u,g))return!0;return!1}function tg(f,u){if(f.length===0||u.length===0)return!1;for(let g=0;g<f.length-1;g++){const x=f[g],E=f[g+1];for(let F=0;F<u.length-1;F++)if(Gm(x,E,u[F],u[F+1]))return!0}return!1}function Gm(f,u,g,x){return Ie(f,g,x)!==Ie(u,g,x)&&Ie(f,u,g)!==Ie(f,u,x)}function Xa(f,u,g){const x=g*g;if(u.length===1)return f.distSqr(u[0])<x;for(let E=1;E<u.length;E++)if(Xy(f,u[E-1],u[E])<x)return!0;return!1}function Xy(f,u,g){const x=u.distSqr(g);if(x===0)return f.distSqr(u);const E=((f.x-u.x)*(g.x-u.x)+(f.y-u.y)*(g.y-u.y))/x;return f.distSqr(E<0?u:E>1?g:g.sub(u)._mult(E)._add(u))}function Cu(f,u){let g,x,E,F=!1;for(let M=0;M<f.length;M++){g=f[M];for(let B=0,H=g.length-1;B<g.length;H=B++)x=g[B],E=g[H],x.y>u.y!=E.y>u.y&&u.x<(E.x-x.x)*(u.y-x.y)/(E.y-x.y)+x.x&&(F=!F)}return F}function Ec(f,u){let g=!1;for(let x=0,E=f.length-1;x<f.length;E=x++){const F=f[x],M=f[E];F.y>u.y!=M.y>u.y&&u.x<(M.x-F.x)*(u.y-F.y)/(M.y-F.y)+F.x&&(g=!g)}return g}function Jy(f,u,g){const x=g[0],E=g[2];if(f.x<x.x&&u.x<x.x||f.x>E.x&&u.x>E.x||f.y<x.y&&u.y<x.y||f.y>E.y&&u.y>E.y)return!1;const F=Ie(f,u,g[0]);return F!==Ie(f,u,g[1])||F!==Ie(f,u,g[2])||F!==Ie(f,u,g[3])}function ld(f,u,g){const x=u.paint.get(f).value;return x.kind==="constant"?x.value:g.programConfigurations.get(u.id).getMaxValue(f)}function jm(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function ng(f,u,g,x,E){if(!u[0]&&!u[1])return f;const F=v.convert(u)._mult(E);g==="viewport"&&F._rotate(-x);const M=[];for(let B=0;B<f.length;B++)M.push(f[B].sub(F));return M}let Qy,Hm;nn("CircleBucket",Qp,{omit:["layers"]});var ev={get paint(){return Hm=Hm||new D({"circle-radius":new ii(Pe.paint_circle["circle-radius"]),"circle-color":new ii(Pe.paint_circle["circle-color"]),"circle-blur":new ii(Pe.paint_circle["circle-blur"]),"circle-opacity":new ii(Pe.paint_circle["circle-opacity"]),"circle-translate":new zn(Pe.paint_circle["circle-translate"]),"circle-translate-anchor":new zn(Pe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new zn(Pe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new zn(Pe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ii(Pe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ii(Pe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ii(Pe.paint_circle["circle-stroke-opacity"])})},get layout(){return Qy=Qy||new D({"circle-sort-key":new ii(Pe.layout_circle["circle-sort-key"])})}},ya=1e-6,ud=typeof Float32Array<"u"?Float32Array:Array;function ig(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function Ma(f,u,g){var x=u[0],E=u[1],F=u[2],M=u[3],B=u[4],H=u[5],Z=u[6],ee=u[7],oe=u[8],de=u[9],me=u[10],Ce=u[11],we=u[12],Be=u[13],He=u[14],ht=u[15],Qe=g[0],et=g[1],It=g[2],rn=g[3];return f[0]=Qe*x+et*B+It*oe+rn*we,f[1]=Qe*E+et*H+It*de+rn*Be,f[2]=Qe*F+et*Z+It*me+rn*He,f[3]=Qe*M+et*ee+It*Ce+rn*ht,f[4]=(Qe=g[4])*x+(et=g[5])*B+(It=g[6])*oe+(rn=g[7])*we,f[5]=Qe*E+et*H+It*de+rn*Be,f[6]=Qe*F+et*Z+It*me+rn*He,f[7]=Qe*M+et*ee+It*Ce+rn*ht,f[8]=(Qe=g[8])*x+(et=g[9])*B+(It=g[10])*oe+(rn=g[11])*we,f[9]=Qe*E+et*H+It*de+rn*Be,f[10]=Qe*F+et*Z+It*me+rn*He,f[11]=Qe*M+et*ee+It*Ce+rn*ht,f[12]=(Qe=g[12])*x+(et=g[13])*B+(It=g[14])*oe+(rn=g[15])*we,f[13]=Qe*E+et*H+It*de+rn*Be,f[14]=Qe*F+et*Z+It*me+rn*He,f[15]=Qe*M+et*ee+It*Ce+rn*ht,f}Math.hypot||(Math.hypot=function(){for(var f=0,u=arguments.length;u--;)f+=arguments[u]*arguments[u];return Math.sqrt(f)});var Ia,T0=Ma;function rg(f,u,g){var x=u[0],E=u[1],F=u[2],M=u[3];return f[0]=g[0]*x+g[4]*E+g[8]*F+g[12]*M,f[1]=g[1]*x+g[5]*E+g[9]*F+g[13]*M,f[2]=g[2]*x+g[6]*E+g[10]*F+g[14]*M,f[3]=g[3]*x+g[7]*E+g[11]*F+g[15]*M,f}Ia=new ud(4),ud!=Float32Array&&(Ia[0]=0,Ia[1]=0,Ia[2]=0,Ia[3]=0);class Vm extends y{constructor(u){super(u,ev)}createBucket(u){return new Qp(u)}queryRadius(u){const g=u;return ld("circle-radius",this,g)+ld("circle-stroke-width",this,g)+jm(this.paint.get("circle-translate"))}queryIntersectsFeature(u,g,x,E,F,M,B,H){const Z=ng(u,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),M.angle,B),ee=this.paint.get("circle-radius").evaluate(g,x)+this.paint.get("circle-stroke-width").evaluate(g,x),oe=this.paint.get("circle-pitch-alignment")==="map",de=oe?Z:(function(Ce,we){return Ce.map((Be=>cd(Be,we)))})(Z,H),me=oe?ee*B:ee;for(const Ce of E)for(const we of Ce){const Be=oe?we:cd(we,H);let He=me;const ht=rg([],[we.x,we.y,0,1],H);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?He*=ht[3]/M.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(He*=M.cameraToCenterDistance/ht[3]),Zy(de,Be,He))return!0}return!1}}function cd(f,u){const g=rg([],[f.x,f.y,0,1],u);return new v(g[0]/g[3],g[1]/g[3])}class $m extends Qp{}let Wm;nn("HeatmapBucket",$m,{omit:["layers"]});var tv={get paint(){return Wm=Wm||new D({"heatmap-radius":new ii(Pe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ii(Pe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new zn(Pe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Zu(Pe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new zn(Pe.paint_heatmap["heatmap-opacity"])})}};function og(f,{width:u,height:g},x,E){if(E){if(E instanceof Uint8ClampedArray)E=new Uint8Array(E.buffer);else if(E.length!==u*g*x)throw new RangeError(`mismatched image size. expected: ${E.length} but got: ${u*g*x}`)}else E=new Uint8Array(u*g*x);return f.width=u,f.height=g,f.data=E,f}function Vd(f,{width:u,height:g},x){if(u===f.width&&g===f.height)return;const E=og({},{width:u,height:g},x);Wh(f,E,{x:0,y:0},{x:0,y:0},{width:Math.min(f.width,u),height:Math.min(f.height,g)},x),f.width=u,f.height=g,f.data=E.data}function Wh(f,u,g,x,E,F){if(E.width===0||E.height===0)return u;if(E.width>f.width||E.height>f.height||g.x>f.width-E.width||g.y>f.height-E.height)throw new RangeError("out of range source coordinates for image copy");if(E.width>u.width||E.height>u.height||x.x>u.width-E.width||x.y>u.height-E.height)throw new RangeError("out of range destination coordinates for image copy");const M=f.data,B=u.data;if(M===B)throw new Error("srcData equals dstData, so image is already copied");for(let H=0;H<E.height;H++){const Z=((g.y+H)*f.width+g.x)*F,ee=((x.y+H)*u.width+x.x)*F;for(let oe=0;oe<E.width*F;oe++)B[ee+oe]=M[Z+oe]}return u}class sg{constructor(u,g){og(this,u,1,g)}resize(u){Vd(this,u,1)}clone(){return new sg({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,g,x,E,F){Wh(u,g,x,E,F,1)}}class Ja{constructor(u,g){og(this,u,4,g)}resize(u){Vd(this,u,4)}replace(u,g){g?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u}clone(){return new Ja({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,g,x,E,F){Wh(u,g,x,E,F,4)}}function Uh(f){const u={},g=f.resolution||256,x=f.clips?f.clips.length:1,E=f.image||new Ja({width:g,height:x});if(Math.log(g)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${g}`);const F=(M,B,H)=>{u[f.evaluationKey]=H;const Z=f.expression.evaluate(u);E.data[M+B+0]=Math.floor(255*Z.r/Z.a),E.data[M+B+1]=Math.floor(255*Z.g/Z.a),E.data[M+B+2]=Math.floor(255*Z.b/Z.a),E.data[M+B+3]=Math.floor(255*Z.a)};if(f.clips)for(let M=0,B=0;M<x;++M,B+=4*g)for(let H=0,Z=0;H<g;H++,Z+=4){const ee=H/(g-1),{start:oe,end:de}=f.clips[M];F(B,Z,oe*(1-ee)+de*ee)}else for(let M=0,B=0;M<g;M++,B+=4)F(0,B,M/(g-1));return E}nn("AlphaImage",sg),nn("RGBAImage",Ja);const $d="big-fb";class ag extends y{createBucket(u){return new $m(u)}constructor(u){super(u,tv),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Uh({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has($d)&&this.heatmapFbos.delete($d)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Vf;var Um={get paint(){return Vf=Vf||new D({"hillshade-illumination-direction":new zn(Pe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new zn(Pe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new zn(Pe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new zn(Pe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new zn(Pe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new zn(Pe.paint_hillshade["hillshade-accent-color"])})}};class Wd extends y{constructor(u){super(u,Um)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const k0=G([{name:"a_pos",components:2,type:"Int16"}],4),{members:qm}=k0;function $f(f,u,g=2){const x=u&&u.length,E=x?u[0]*g:f.length;let F=lg(f,0,E,g,!0);const M=[];if(!F||F.next===F.prev)return M;let B,H,Z;if(x&&(F=(function(ee,oe,de,me){const Ce=[];for(let we=0,Be=oe.length;we<Be;we++){const He=lg(ee,oe[we]*me,we<Be-1?oe[we+1]*me:ee.length,me,!1);He===He.next&&(He.steiner=!0),Ce.push(Rc(He))}Ce.sort(P0);for(let we=0;we<Ce.length;we++)de=ug(Ce[we],de);return de})(f,u,F,g)),f.length>80*g){B=1/0,H=1/0;let ee=-1/0,oe=-1/0;for(let de=g;de<E;de+=g){const me=f[de],Ce=f[de+1];me<B&&(B=me),Ce<H&&(H=Ce),me>ee&&(ee=me),Ce>oe&&(oe=Ce)}Z=Math.max(ee-B,oe-H),Z=Z!==0?32767/Z:0}return Wf(F,M,g,B,H,Z,0),M}function lg(f,u,g,x,E){let F;if(E===(function(M,B,H,Z){let ee=0;for(let oe=B,de=H-Z;oe<H;oe+=Z)ee+=(M[de]-M[oe])*(M[oe+1]+M[de+1]),de=oe;return ee})(f,u,g,x)>0)for(let M=u;M<g;M+=x)F=Uf(M/x|0,f[M],f[M+1],F);else for(let M=g-x;M>=u;M-=x)F=Uf(M/x|0,f[M],f[M+1],F);return F&&So(F,F.next)&&(Kd(F),F=F.next),F}function Xu(f,u){if(!f)return f;u||(u=f);let g,x=f;do if(g=!1,x.steiner||!So(x,x.next)&&mo(x.prev,x,x.next)!==0)x=x.next;else{if(Kd(x),x=u=x.prev,x===x.next)break;g=!0}while(g||x!==u);return u}function Wf(f,u,g,x,E,F,M){if(!f)return;!M&&F&&(function(H,Z,ee,oe){let de=H;do de.z===0&&(de.z=cg(de.x,de.y,Z,ee,oe)),de.prevZ=de.prev,de.nextZ=de.next,de=de.next;while(de!==H);de.prevZ.nextZ=null,de.prevZ=null,(function(me){let Ce,we=1;do{let Be,He=me;me=null;let ht=null;for(Ce=0;He;){Ce++;let Qe=He,et=0;for(let rn=0;rn<we&&(et++,Qe=Qe.nextZ,Qe);rn++);let It=we;for(;et>0||It>0&&Qe;)et!==0&&(It===0||!Qe||He.z<=Qe.z)?(Be=He,He=He.nextZ,et--):(Be=Qe,Qe=Qe.nextZ,It--),ht?ht.nextZ=Be:me=Be,Be.prevZ=ht,ht=Be;He=Qe}ht.nextZ=null,we*=2}while(Ce>1)})(de)})(f,x,E,F);let B=f;for(;f.prev!==f.next;){const H=f.prev,Z=f.next;if(F?Qa(f,x,E,F):nv(f))u.push(H.i,f.i,Z.i),Kd(f),f=Z.next,B=Z.next;else if((f=Z)===B){M?M===1?Wf(f=iv(Xu(f),u),u,g,x,E,F,2):M===2&&rv(f,u,g,x,E,F):Wf(Xu(f),u,g,x,E,F,1);break}}}function nv(f){const u=f.prev,g=f,x=f.next;if(mo(u,g,x)>=0)return!1;const E=u.x,F=g.x,M=x.x,B=u.y,H=g.y,Z=x.y,ee=E<F?E<M?E:M:F<M?F:M,oe=B<H?B<Z?B:Z:H<Z?H:Z,de=E>F?E>M?E:M:F>M?F:M,me=B>H?B>Z?B:Z:H>Z?H:Z;let Ce=x.next;for(;Ce!==u;){if(Ce.x>=ee&&Ce.x<=de&&Ce.y>=oe&&Ce.y<=me&&dd(E,B,F,H,M,Z,Ce.x,Ce.y)&&mo(Ce.prev,Ce,Ce.next)>=0)return!1;Ce=Ce.next}return!0}function Qa(f,u,g,x){const E=f.prev,F=f,M=f.next;if(mo(E,F,M)>=0)return!1;const B=E.x,H=F.x,Z=M.x,ee=E.y,oe=F.y,de=M.y,me=B<H?B<Z?B:Z:H<Z?H:Z,Ce=ee<oe?ee<de?ee:de:oe<de?oe:de,we=B>H?B>Z?B:Z:H>Z?H:Z,Be=ee>oe?ee>de?ee:de:oe>de?oe:de,He=cg(me,Ce,u,g,x),ht=cg(we,Be,u,g,x);let Qe=f.prevZ,et=f.nextZ;for(;Qe&&Qe.z>=He&&et&&et.z<=ht;){if(Qe.x>=me&&Qe.x<=we&&Qe.y>=Ce&&Qe.y<=Be&&Qe!==E&&Qe!==M&&dd(B,ee,H,oe,Z,de,Qe.x,Qe.y)&&mo(Qe.prev,Qe,Qe.next)>=0||(Qe=Qe.prevZ,et.x>=me&&et.x<=we&&et.y>=Ce&&et.y<=Be&&et!==E&&et!==M&&dd(B,ee,H,oe,Z,de,et.x,et.y)&&mo(et.prev,et,et.next)>=0))return!1;et=et.nextZ}for(;Qe&&Qe.z>=He;){if(Qe.x>=me&&Qe.x<=we&&Qe.y>=Ce&&Qe.y<=Be&&Qe!==E&&Qe!==M&&dd(B,ee,H,oe,Z,de,Qe.x,Qe.y)&&mo(Qe.prev,Qe,Qe.next)>=0)return!1;Qe=Qe.prevZ}for(;et&&et.z<=ht;){if(et.x>=me&&et.x<=we&&et.y>=Ce&&et.y<=Be&&et!==E&&et!==M&&dd(B,ee,H,oe,Z,de,et.x,et.y)&&mo(et.prev,et,et.next)>=0)return!1;et=et.nextZ}return!0}function iv(f,u){let g=f;do{const x=g.prev,E=g.next.next;!So(x,E)&&Yo(x,g,g.next,E)&&qd(x,E)&&qd(E,x)&&(u.push(x.i,g.i,E.i),Kd(g),Kd(g.next),g=f=E),g=g.next}while(g!==f);return Xu(g)}function rv(f,u,g,x,E,F){let M=f;do{let B=M.next.next;for(;B!==M.prev;){if(M.i!==B.i&&ov(M,B)){let H=hd(M,B);return M=Xu(M,M.next),H=Xu(H,H.next),Wf(M,u,g,x,E,F,0),void Wf(H,u,g,x,E,F,0)}B=B.next}M=M.next}while(M!==f)}function P0(f,u){return f.x-u.x}function ug(f,u){const g=(function(E,F){let M=F;const B=E.x,H=E.y;let Z,ee=-1/0;do{if(H<=M.y&&H>=M.next.y&&M.next.y!==M.y){const we=M.x+(H-M.y)*(M.next.x-M.x)/(M.next.y-M.y);if(we<=B&&we>ee&&(ee=we,Z=M.x<M.next.x?M:M.next,we===B))return Z}M=M.next}while(M!==F);if(!Z)return null;const oe=Z,de=Z.x,me=Z.y;let Ce=1/0;M=Z;do{if(B>=M.x&&M.x>=de&&B!==M.x&&dd(H<me?B:ee,H,de,me,H<me?ee:B,H,M.x,M.y)){const we=Math.abs(H-M.y)/(B-M.x);qd(M,E)&&(we<Ce||we===Ce&&(M.x>Z.x||M.x===Z.x&&D0(Z,M)))&&(Z=M,Ce=we)}M=M.next}while(M!==oe);return Z})(f,u);if(!g)return u;const x=hd(g,f);return Xu(x,x.next),Xu(g,g.next)}function D0(f,u){return mo(f.prev,f,u.prev)<0&&mo(u.next,f,f.next)<0}function cg(f,u,g,x,E){return(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-g)*E|0)|f<<8))|f<<4))|f<<2))|f<<1))|(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-x)*E|0)|u<<8))|u<<4))|u<<2))|u<<1))<<1}function Rc(f){let u=f,g=f;do(u.x<g.x||u.x===g.x&&u.y<g.y)&&(g=u),u=u.next;while(u!==f);return g}function dd(f,u,g,x,E,F,M,B){return(E-M)*(u-B)>=(f-M)*(F-B)&&(f-M)*(x-B)>=(g-M)*(u-B)&&(g-M)*(F-B)>=(E-M)*(x-B)}function ov(f,u){return f.next.i!==u.i&&f.prev.i!==u.i&&!(function(g,x){let E=g;do{if(E.i!==g.i&&E.next.i!==g.i&&E.i!==x.i&&E.next.i!==x.i&&Yo(E,E.next,g,x))return!0;E=E.next}while(E!==g);return!1})(f,u)&&(qd(f,u)&&qd(u,f)&&(function(g,x){let E=g,F=!1;const M=(g.x+x.x)/2,B=(g.y+x.y)/2;do E.y>B!=E.next.y>B&&E.next.y!==E.y&&M<(E.next.x-E.x)*(B-E.y)/(E.next.y-E.y)+E.x&&(F=!F),E=E.next;while(E!==g);return F})(f,u)&&(mo(f.prev,f,u.prev)||mo(f,u.prev,u))||So(f,u)&&mo(f.prev,f,f.next)>0&&mo(u.prev,u,u.next)>0)}function mo(f,u,g){return(u.y-f.y)*(g.x-u.x)-(u.x-f.x)*(g.y-u.y)}function So(f,u){return f.x===u.x&&f.y===u.y}function Yo(f,u,g,x){const E=Ud(mo(f,u,g)),F=Ud(mo(f,u,x)),M=Ud(mo(g,x,f)),B=Ud(mo(g,x,u));return E!==F&&M!==B||!(E!==0||!vi(f,g,u))||!(F!==0||!vi(f,x,u))||!(M!==0||!vi(g,f,x))||!(B!==0||!vi(g,u,x))}function vi(f,u,g){return u.x<=Math.max(f.x,g.x)&&u.x>=Math.min(f.x,g.x)&&u.y<=Math.max(f.y,g.y)&&u.y>=Math.min(f.y,g.y)}function Ud(f){return f>0?1:f<0?-1:0}function qd(f,u){return mo(f.prev,f,f.next)<0?mo(f,u,f.next)>=0&&mo(f,f.prev,u)>=0:mo(f,u,f.prev)<0||mo(f,f.next,u)<0}function hd(f,u){const g=qh(f.i,f.x,f.y),x=qh(u.i,u.x,u.y),E=f.next,F=u.prev;return f.next=u,u.prev=f,g.next=E,E.prev=g,x.next=g,g.prev=x,F.next=x,x.prev=F,x}function Uf(f,u,g,x){const E=qh(f,u,g);return x?(E.next=x.next,E.prev=x,x.next.prev=E,x.next=E):(E.prev=E,E.next=E),E}function Kd(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function qh(f,u,g){return{i:f,x:u,y:g,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Hs(f,u,g){const x=g.patternDependencies;let E=!1;for(const F of u){const M=F.paint.get(`${f}-pattern`);M.isConstant()||(E=!0);const B=M.constantOr(null);B&&(E=!0,x[B.to]=!0,x[B.from]=!0)}return E}function sv(f,u,g,x,E){const F=E.patternDependencies;for(const M of u){const B=M.paint.get(`${f}-pattern`).value;if(B.kind!=="constant"){let H=B.evaluate({zoom:x-1},g,{},E.availableImages),Z=B.evaluate({zoom:x},g,{},E.availableImages),ee=B.evaluate({zoom:x+1},g,{},E.availableImages);H=H&&H.name?H.name:H,Z=Z&&Z.name?Z.name:Z,ee=ee&&ee.name?ee.name:ee,F[H]=!0,F[Z]=!0,F[ee]=!0,g.patterns[M.id]={min:H,mid:Z,max:ee}}}return g}class qf{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((g=>g.id)),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Da,this.indexArray=new ma,this.indexArray2=new jo,this.programConfigurations=new js(u.layers,u.zoom),this.segments=new Hi,this.segments2=new Hi,this.stateDependentLayerIds=this.layers.filter((g=>g.isStateDependent())).map((g=>g.id))}populate(u,g,x){this.hasPattern=Hs("fill",this.layers,g);const E=this.layers[0].layout.get("fill-sort-key"),F=!E.isConstant(),M=[];for(const{feature:B,id:H,index:Z,sourceLayerIndex:ee}of u){const oe=this.layers[0]._featureFilter.needGeometry,de=Ya(B,oe);if(!this.layers[0]._featureFilter.filter(new qi(this.zoom),de,x))continue;const me=F?E.evaluate(de,{},x,g.availableImages):void 0,Ce={id:H,properties:B.properties,type:B.type,sourceLayerIndex:ee,index:Z,geometry:oe?de.geometry:Rs(B),patterns:{},sortKey:me};M.push(Ce)}F&&M.sort(((B,H)=>B.sortKey-H.sortKey));for(const B of M){const{geometry:H,index:Z,sourceLayerIndex:ee}=B;if(this.hasPattern){const oe=sv("fill",this.layers,B,this.zoom,g);this.patternFeatures.push(oe)}else this.addFeature(B,H,Z,x,{});g.featureIndex.insert(u[Z].feature,H,Z,ee,this.index)}}update(u,g,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,g,this.stateDependentLayers,x)}addFeatures(u,g,x){for(const E of this.patternFeatures)this.addFeature(E,E.geometry,E.index,g,x)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,qm),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.indexBuffer2=u.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(u,g,x,E,F){for(const M of Jr(g,500)){let B=0;for(const me of M)B+=me.length;const H=this.segments.prepareSegment(B,this.layoutVertexArray,this.indexArray),Z=H.vertexLength,ee=[],oe=[];for(const me of M){if(me.length===0)continue;me!==M[0]&&oe.push(ee.length/2);const Ce=this.segments2.prepareSegment(me.length,this.layoutVertexArray,this.indexArray2),we=Ce.vertexLength;this.layoutVertexArray.emplaceBack(me[0].x,me[0].y),this.indexArray2.emplaceBack(we+me.length-1,we),ee.push(me[0].x),ee.push(me[0].y);for(let Be=1;Be<me.length;Be++)this.layoutVertexArray.emplaceBack(me[Be].x,me[Be].y),this.indexArray2.emplaceBack(we+Be-1,we+Be),ee.push(me[Be].x),ee.push(me[Be].y);Ce.vertexLength+=me.length,Ce.primitiveLength+=me.length}const de=$f(ee,oe);for(let me=0;me<de.length;me+=3)this.indexArray.emplaceBack(Z+de[me],Z+de[me+1],Z+de[me+2]);H.vertexLength+=B,H.primitiveLength+=de.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,x,F,E)}}let dg,av;nn("FillBucket",qf,{omit:["layers","patternFeatures"]});var lv={get paint(){return av=av||new D({"fill-antialias":new zn(Pe.paint_fill["fill-antialias"]),"fill-opacity":new ii(Pe.paint_fill["fill-opacity"]),"fill-color":new ii(Pe.paint_fill["fill-color"]),"fill-outline-color":new ii(Pe.paint_fill["fill-outline-color"]),"fill-translate":new zn(Pe.paint_fill["fill-translate"]),"fill-translate-anchor":new zn(Pe.paint_fill["fill-translate-anchor"]),"fill-pattern":new qu(Pe.paint_fill["fill-pattern"])})},get layout(){return dg=dg||new D({"fill-sort-key":new ii(Pe.layout_fill["fill-sort-key"])})}};class F0 extends y{constructor(u){super(u,lv)}recalculate(u,g){super.recalculate(u,g);const x=this.paint._values["fill-outline-color"];x.value.kind==="constant"&&x.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(u){return new qf(u)}queryRadius(){return jm(this.paint.get("fill-translate"))}queryIntersectsFeature(u,g,x,E,F,M,B){return eg(ng(u,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),M.angle,B),E)}isTileClipped(){return!0}}const uv=G([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),cv=G([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Ju}=uv;var Xo={},hg=h,fg=Ac;function Ac(f,u,g,x,E){this.properties={},this.extent=g,this.type=0,this._pbf=f,this._geometry=-1,this._keys=x,this._values=E,f.readFields(M0,this,u)}function M0(f,u,g){f==1?u.id=g.readVarint():f==2?(function(x,E){for(var F=x.readVarint()+x.pos;x.pos<F;){var M=E._keys[x.readVarint()],B=E._values[x.readVarint()];E.properties[M]=B}})(g,u):f==3?u.type=g.readVarint():f==4&&(u._geometry=g.pos)}function dv(f){for(var u,g,x=0,E=0,F=f.length,M=F-1;E<F;M=E++)x+=((g=f[M]).x-(u=f[E]).x)*(u.y+g.y);return x}Ac.types=["Unknown","Point","LineString","Polygon"],Ac.prototype.loadGeometry=function(){var f=this._pbf;f.pos=this._geometry;for(var u,g=f.readVarint()+f.pos,x=1,E=0,F=0,M=0,B=[];f.pos<g;){if(E<=0){var H=f.readVarint();x=7&H,E=H>>3}if(E--,x===1||x===2)F+=f.readSVarint(),M+=f.readSVarint(),x===1&&(u&&B.push(u),u=[]),u.push(new hg(F,M));else{if(x!==7)throw new Error("unknown command "+x);u&&u.push(u[0].clone())}}return u&&B.push(u),B},Ac.prototype.bbox=function(){var f=this._pbf;f.pos=this._geometry;for(var u=f.readVarint()+f.pos,g=1,x=0,E=0,F=0,M=1/0,B=-1/0,H=1/0,Z=-1/0;f.pos<u;){if(x<=0){var ee=f.readVarint();g=7&ee,x=ee>>3}if(x--,g===1||g===2)(E+=f.readSVarint())<M&&(M=E),E>B&&(B=E),(F+=f.readSVarint())<H&&(H=F),F>Z&&(Z=F);else if(g!==7)throw new Error("unknown command "+g)}return[M,H,B,Z]},Ac.prototype.toGeoJSON=function(f,u,g){var x,E,F=this.extent*Math.pow(2,g),M=this.extent*f,B=this.extent*u,H=this.loadGeometry(),Z=Ac.types[this.type];function ee(me){for(var Ce=0;Ce<me.length;Ce++){var we=me[Ce];me[Ce]=[360*(we.x+M)/F-180,360/Math.PI*Math.atan(Math.exp((180-360*(we.y+B)/F)*Math.PI/180))-90]}}switch(this.type){case 1:var oe=[];for(x=0;x<H.length;x++)oe[x]=H[x][0];ee(H=oe);break;case 2:for(x=0;x<H.length;x++)ee(H[x]);break;case 3:for(H=(function(me){var Ce=me.length;if(Ce<=1)return[me];for(var we,Be,He=[],ht=0;ht<Ce;ht++){var Qe=dv(me[ht]);Qe!==0&&(Be===void 0&&(Be=Qe<0),Be===Qe<0?(we&&He.push(we),we=[me[ht]]):we.push(me[ht]))}return we&&He.push(we),He})(H),x=0;x<H.length;x++)for(E=0;E<H[x].length;E++)ee(H[x][E])}H.length===1?H=H[0]:Z="Multi"+Z;var de={type:"Feature",geometry:{type:Z,coordinates:H},properties:this.properties};return"id"in this&&(de.id=this.id),de};var Kf=fg,Qu=pg;function pg(f,u){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=f,this._keys=[],this._values=[],this._features=[],f.readFields(Ix,this,u),this.length=this._features.length}function Ix(f,u,g){f===15?u.version=g.readVarint():f===1?u.name=g.readString():f===5?u.extent=g.readVarint():f===2?u._features.push(g.pos):f===3?u._keys.push(g.readString()):f===4&&u._values.push((function(x){for(var E=null,F=x.readVarint()+x.pos;x.pos<F;){var M=x.readVarint()>>3;E=M===1?x.readString():M===2?x.readFloat():M===3?x.readDouble():M===4?x.readVarint64():M===5?x.readVarint():M===6?x.readSVarint():M===7?x.readBoolean():null}return E})(g))}pg.prototype.feature=function(f){if(f<0||f>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[f];var u=this._pbf.readVarint()+this._pbf.pos;return new Kf(this._pbf,u,this.extent,this._keys,this._values)};var I0=Qu;function fd(f,u,g){if(f===3){var x=new I0(g,g.readVarint()+g.pos);x.length&&(u[x.name]=x)}}Xo.VectorTile=function(f,u){this.layers=f.readFields(fd,{},u)},Xo.VectorTileFeature=fg,Xo.VectorTileLayer=Qu;const hv=Xo.VectorTileFeature.types,gg=Math.pow(2,13);function pd(f,u,g,x,E,F,M,B){f.emplaceBack(u,g,2*Math.floor(x*gg)+M,E*gg*2,F*gg*2,Math.round(B))}class Kh{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((g=>g.id)),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new id,this.centroidVertexArray=new to,this.indexArray=new ma,this.programConfigurations=new js(u.layers,u.zoom),this.segments=new Hi,this.stateDependentLayerIds=this.layers.filter((g=>g.isStateDependent())).map((g=>g.id))}populate(u,g,x){this.features=[],this.hasPattern=Hs("fill-extrusion",this.layers,g);for(const{feature:E,id:F,index:M,sourceLayerIndex:B}of u){const H=this.layers[0]._featureFilter.needGeometry,Z=Ya(E,H);if(!this.layers[0]._featureFilter.filter(new qi(this.zoom),Z,x))continue;const ee={id:F,sourceLayerIndex:B,index:M,geometry:H?Z.geometry:Rs(E),properties:E.properties,type:E.type,patterns:{}};this.hasPattern?this.features.push(sv("fill-extrusion",this.layers,ee,this.zoom,g)):this.addFeature(ee,ee.geometry,M,x,{}),g.featureIndex.insert(E,ee.geometry,M,B,this.index,!0)}}addFeatures(u,g,x){for(const E of this.features){const{geometry:F}=E;this.addFeature(E,F,E.index,g,x)}}update(u,g,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,g,this.stateDependentLayers,x)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Ju),this.centroidVertexBuffer=u.createVertexBuffer(this.centroidVertexArray,cv.members,!0),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(u,g,x,E,F){for(const M of Jr(g,500)){const B={x:0,y:0,vertexCount:0};let H=0;for(const Ce of M)H+=Ce.length;let Z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Ce of M){if(Ce.length===0||L0(Ce))continue;let we=0;for(let Be=0;Be<Ce.length;Be++){const He=Ce[Be];if(Be>=1){const ht=Ce[Be-1];if(!yo(He,ht)){Z.vertexLength+4>Hi.MAX_VERTEX_ARRAY_LENGTH&&(Z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Qe=He.sub(ht)._perp()._unit(),et=ht.dist(He);we+et>32768&&(we=0),pd(this.layoutVertexArray,He.x,He.y,Qe.x,Qe.y,0,0,we),pd(this.layoutVertexArray,He.x,He.y,Qe.x,Qe.y,0,1,we),B.x+=2*He.x,B.y+=2*He.y,B.vertexCount+=2,we+=et,pd(this.layoutVertexArray,ht.x,ht.y,Qe.x,Qe.y,0,0,we),pd(this.layoutVertexArray,ht.x,ht.y,Qe.x,Qe.y,0,1,we),B.x+=2*ht.x,B.y+=2*ht.y,B.vertexCount+=2;const It=Z.vertexLength;this.indexArray.emplaceBack(It,It+2,It+1),this.indexArray.emplaceBack(It+1,It+2,It+3),Z.vertexLength+=4,Z.primitiveLength+=2}}}}if(Z.vertexLength+H>Hi.MAX_VERTEX_ARRAY_LENGTH&&(Z=this.segments.prepareSegment(H,this.layoutVertexArray,this.indexArray)),hv[u.type]!=="Polygon")continue;const ee=[],oe=[],de=Z.vertexLength;for(const Ce of M)if(Ce.length!==0){Ce!==M[0]&&oe.push(ee.length/2);for(let we=0;we<Ce.length;we++){const Be=Ce[we];pd(this.layoutVertexArray,Be.x,Be.y,0,0,1,1,0),B.x+=Be.x,B.y+=Be.y,B.vertexCount+=1,ee.push(Be.x),ee.push(Be.y)}}const me=$f(ee,oe);for(let Ce=0;Ce<me.length;Ce+=3)this.indexArray.emplaceBack(de+me[Ce],de+me[Ce+2],de+me[Ce+1]);Z.primitiveLength+=me.length/3,Z.vertexLength+=H;for(let Ce=0;Ce<B.vertexCount;Ce++){const we=Math.floor(B.x/B.vertexCount),Be=Math.floor(B.y/B.vertexCount);this.centroidVertexArray.emplaceBack(we,Be)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,x,F,E)}}function yo(f,u){return f.x===u.x&&(f.x<0||f.x>Oo)||f.y===u.y&&(f.y<0||f.y>Oo)}function L0(f){return f.every((u=>u.x<0))||f.every((u=>u.x>Oo))||f.every((u=>u.y<0))||f.every((u=>u.y>Oo))}let Zf;nn("FillExtrusionBucket",Kh,{omit:["layers","features"]});var Km={get paint(){return Zf=Zf||new D({"fill-extrusion-opacity":new zn(Pe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ii(Pe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new zn(Pe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new zn(Pe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new qu(Pe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ii(Pe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ii(Pe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new zn(Pe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Yf extends y{constructor(u){super(u,Km)}createBucket(u){return new Kh(u)}queryRadius(){return jm(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(u,g,x,E,F,M,B,H){const Z=ng(u,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),M.angle,B),ee=this.paint.get("fill-extrusion-height").evaluate(g,x),oe=this.paint.get("fill-extrusion-base").evaluate(g,x),de=(function(Ce,we,Be,He){const ht=[];for(const Qe of Ce){const et=[Qe.x,Qe.y,0,1];rg(et,et,we),ht.push(new v(et[0]/et[3],et[1]/et[3]))}return ht})(Z,H),me=(function(Ce,we,Be,He){const ht=[],Qe=[],et=He[8]*we,It=He[9]*we,rn=He[10]*we,Rn=He[11]*we,si=He[8]*Be,vn=He[9]*Be,_n=He[10]*Be,Vn=He[11]*Be;for(const On of Ce){const Mn=[],Nt=[];for(const In of On){const jn=In.x,di=In.y,mr=He[0]*jn+He[4]*di+He[12],jr=He[1]*jn+He[5]*di+He[13],Ps=He[2]*jn+He[6]*di+He[14],Ws=He[3]*jn+He[7]*di+He[15],Us=Ps+rn,as=Ws+Rn,Na=mr+si,Ba=jr+vn,Ga=Ps+_n,sr=Ws+Vn,Pr=new v((mr+et)/as,(jr+It)/as);Pr.z=Us/as,Mn.push(Pr);const xa=new v(Na/sr,Ba/sr);xa.z=Ga/sr,Nt.push(xa)}ht.push(Mn),Qe.push(Nt)}return[ht,Qe]})(E,oe,ee,H);return(function(Ce,we,Be){let He=1/0;eg(Be,we)&&(He=Xf(Be,we[0]));for(let ht=0;ht<we.length;ht++){const Qe=we[ht],et=Ce[ht];for(let It=0;It<Qe.length-1;It++){const rn=Qe[It],Rn=[rn,Qe[It+1],et[It+1],et[It],rn];Hf(Be,Rn)&&(He=Math.min(He,Xf(Be,Rn)))}}return He!==1/0&&He})(me[0],me[1],de)}}function Yl(f,u){return f.x*u.x+f.y*u.y}function Xf(f,u){if(f.length===1){let g=0;const x=u[g++];let E;for(;!E||x.equals(E);)if(E=u[g++],!E)return 1/0;for(;g<u.length;g++){const F=u[g],M=f[0],B=E.sub(x),H=F.sub(x),Z=M.sub(x),ee=Yl(B,B),oe=Yl(B,H),de=Yl(H,H),me=Yl(Z,B),Ce=Yl(Z,H),we=ee*de-oe*oe,Be=(de*me-oe*Ce)/we,He=(ee*Ce-oe*me)/we,ht=x.z*(1-Be-He)+E.z*Be+F.z*He;if(isFinite(ht))return ht}return 1/0}{let g=1/0;for(const x of u)g=Math.min(g,x.z);return g}}const fv=G([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:vl}=fv,La=G([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:O0}=La,Zm=Xo.VectorTileFeature.types,z0=Math.cos(Math.PI/180*37.5),Ym=Math.pow(2,14)/.5;class mg{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((g=>g.id)),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((g=>{this.gradients[g.id]={}})),this.layoutVertexArray=new pa,this.layoutVertexArray2=new fs,this.indexArray=new ma,this.programConfigurations=new js(u.layers,u.zoom),this.segments=new Hi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((g=>g.isStateDependent())).map((g=>g.id))}populate(u,g,x){this.hasPattern=Hs("line",this.layers,g);const E=this.layers[0].layout.get("line-sort-key"),F=!E.isConstant(),M=[];for(const{feature:B,id:H,index:Z,sourceLayerIndex:ee}of u){const oe=this.layers[0]._featureFilter.needGeometry,de=Ya(B,oe);if(!this.layers[0]._featureFilter.filter(new qi(this.zoom),de,x))continue;const me=F?E.evaluate(de,{},x):void 0,Ce={id:H,properties:B.properties,type:B.type,sourceLayerIndex:ee,index:Z,geometry:oe?de.geometry:Rs(B),patterns:{},sortKey:me};M.push(Ce)}F&&M.sort(((B,H)=>B.sortKey-H.sortKey));for(const B of M){const{geometry:H,index:Z,sourceLayerIndex:ee}=B;if(this.hasPattern){const oe=sv("line",this.layers,B,this.zoom,g);this.patternFeatures.push(oe)}else this.addFeature(B,H,Z,x,{});g.featureIndex.insert(u[Z].feature,H,Z,ee,this.index)}}update(u,g,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,g,this.stateDependentLayers,x)}addFeatures(u,g,x){for(const E of this.patternFeatures)this.addFeature(E,E.geometry,E.index,g,x)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=u.createVertexBuffer(this.layoutVertexArray2,O0)),this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,vl),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(u){if(u.properties&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_end"))return{start:+u.properties.mapbox_clip_start,end:+u.properties.mapbox_clip_end}}addFeature(u,g,x,E,F){const M=this.layers[0].layout,B=M.get("line-join").evaluate(u,{}),H=M.get("line-cap"),Z=M.get("line-miter-limit"),ee=M.get("line-round-limit");this.lineClips=this.lineFeatureClips(u);for(const oe of g)this.addLine(oe,u,B,H,Z,ee);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,x,F,E)}addLine(u,g,x,E,F,M){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let He=0;He<u.length-1;He++)this.totalDistance+=u[He].dist(u[He+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const B=Zm[g.type]==="Polygon";let H=u.length;for(;H>=2&&u[H-1].equals(u[H-2]);)H--;let Z=0;for(;Z<H-1&&u[Z].equals(u[Z+1]);)Z++;if(H<(B?3:2))return;x==="bevel"&&(F=1.05);const ee=this.overscaling<=16?15*Oo/(512*this.overscaling):0,oe=this.segments.prepareSegment(10*H,this.layoutVertexArray,this.indexArray);let de,me,Ce,we,Be;this.e1=this.e2=-1,B&&(de=u[H-2],Be=u[Z].sub(de)._unit()._perp());for(let He=Z;He<H;He++){if(Ce=He===H-1?B?u[Z+1]:void 0:u[He+1],Ce&&u[He].equals(Ce))continue;Be&&(we=Be),de&&(me=de),de=u[He],Be=Ce?Ce.sub(de)._unit()._perp():we,we=we||Be;let ht=we.add(Be);ht.x===0&&ht.y===0||ht._unit();const Qe=we.x*Be.x+we.y*Be.y,et=ht.x*Be.x+ht.y*Be.y,It=et!==0?1/et:1/0,rn=2*Math.sqrt(2-2*et),Rn=et<z0&&me&&Ce,si=we.x*Be.y-we.y*Be.x>0;if(Rn&&He>Z){const Vn=de.dist(me);if(Vn>2*ee){const On=de.sub(de.sub(me)._mult(ee/Vn)._round());this.updateDistance(me,On),this.addCurrentVertex(On,we,0,0,oe),me=On}}const vn=me&&Ce;let _n=vn?x:B?"butt":E;if(vn&&_n==="round"&&(It<M?_n="miter":It<=2&&(_n="fakeround")),_n==="miter"&&It>F&&(_n="bevel"),_n==="bevel"&&(It>2&&(_n="flipbevel"),It<F&&(_n="miter")),me&&this.updateDistance(me,de),_n==="miter")ht._mult(It),this.addCurrentVertex(de,ht,0,0,oe);else if(_n==="flipbevel"){if(It>100)ht=Be.mult(-1);else{const Vn=It*we.add(Be).mag()/we.sub(Be).mag();ht._perp()._mult(Vn*(si?-1:1))}this.addCurrentVertex(de,ht,0,0,oe),this.addCurrentVertex(de,ht.mult(-1),0,0,oe)}else if(_n==="bevel"||_n==="fakeround"){const Vn=-Math.sqrt(It*It-1),On=si?Vn:0,Mn=si?0:Vn;if(me&&this.addCurrentVertex(de,we,On,Mn,oe),_n==="fakeround"){const Nt=Math.round(180*rn/Math.PI/20);for(let In=1;In<Nt;In++){let jn=In/Nt;if(jn!==.5){const mr=jn-.5;jn+=jn*mr*(jn-1)*((1.0904+Qe*(Qe*(3.55645-1.43519*Qe)-3.2452))*mr*mr+(.848013+Qe*(.215638*Qe-1.06021)))}const di=Be.sub(we)._mult(jn)._add(we)._unit()._mult(si?-1:1);this.addHalfVertex(de,di.x,di.y,!1,si,0,oe)}}Ce&&this.addCurrentVertex(de,Be,-On,-Mn,oe)}else if(_n==="butt")this.addCurrentVertex(de,ht,0,0,oe);else if(_n==="square"){const Vn=me?1:-1;this.addCurrentVertex(de,ht,Vn,Vn,oe)}else _n==="round"&&(me&&(this.addCurrentVertex(de,we,0,0,oe),this.addCurrentVertex(de,we,1,1,oe,!0)),Ce&&(this.addCurrentVertex(de,Be,-1,-1,oe,!0),this.addCurrentVertex(de,Be,0,0,oe)));if(Rn&&He<H-1){const Vn=de.dist(Ce);if(Vn>2*ee){const On=de.add(Ce.sub(de)._mult(ee/Vn)._round());this.updateDistance(de,On),this.addCurrentVertex(On,Be,0,0,oe),de=On}}}}addCurrentVertex(u,g,x,E,F,M=!1){const B=g.y*E-g.x,H=-g.y-g.x*E;this.addHalfVertex(u,g.x+g.y*x,g.y-g.x*x,M,!1,x,F),this.addHalfVertex(u,B,H,M,!0,-E,F),this.distance>Ym/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(u,g,x,E,F,M))}addHalfVertex({x:u,y:g},x,E,F,M,B,H){const Z=.5*(this.lineClips?this.scaledDistance*(Ym-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((u<<1)+(F?1:0),(g<<1)+(M?1:0),Math.round(63*x)+128,Math.round(63*E)+128,1+(B===0?0:B<0?-1:1)|(63&Z)<<2,Z>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ee=H.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ee),H.primitiveLength++),M?this.e2=ee:this.e1=ee}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(u,g){this.distance+=u.dist(g),this.updateScaledDistance()}}let yg,pv;nn("LineBucket",mg,{omit:["layers","patternFeatures"]});var Tc={get paint(){return pv=pv||new D({"line-opacity":new ii(Pe.paint_line["line-opacity"]),"line-color":new ii(Pe.paint_line["line-color"]),"line-translate":new zn(Pe.paint_line["line-translate"]),"line-translate-anchor":new zn(Pe.paint_line["line-translate-anchor"]),"line-width":new ii(Pe.paint_line["line-width"]),"line-gap-width":new ii(Pe.paint_line["line-gap-width"]),"line-offset":new ii(Pe.paint_line["line-offset"]),"line-blur":new ii(Pe.paint_line["line-blur"]),"line-dasharray":new Ku(Pe.paint_line["line-dasharray"]),"line-pattern":new qu(Pe.paint_line["line-pattern"]),"line-gradient":new Zu(Pe.paint_line["line-gradient"])})},get layout(){return yg=yg||new D({"line-cap":new zn(Pe.layout_line["line-cap"]),"line-join":new ii(Pe.layout_line["line-join"]),"line-miter-limit":new zn(Pe.layout_line["line-miter-limit"]),"line-round-limit":new zn(Pe.layout_line["line-round-limit"]),"line-sort-key":new ii(Pe.layout_line["line-sort-key"])})}};class As extends ii{possiblyEvaluate(u,g){return g=new qi(Math.floor(g.zoom),{now:g.now,fadeDuration:g.fadeDuration,zoomHistory:g.zoomHistory,transition:g.transition}),super.possiblyEvaluate(u,g)}evaluate(u,g,x,E){return g=re({},g,{zoom:Math.floor(g.zoom)}),super.evaluate(u,g,x,E)}}let Jf;class N0 extends y{constructor(u){super(u,Tc),this.gradientVersion=0,Jf||(Jf=new As(Tc.paint.properties["line-width"].specification),Jf.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(u){if(u==="line-gradient"){const g=this.gradientExpression();this.stepInterpolant=!!(function(x){return x._styleExpression!==void 0})(g)&&g._styleExpression.expression instanceof Wt,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(u,g){super.recalculate(u,g),this.paint._values["line-floorwidth"]=Jf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)}createBucket(u){return new mg(u)}queryRadius(u){const g=u,x=Vs(ld("line-width",this,g),ld("line-gap-width",this,g)),E=ld("line-offset",this,g);return x/2+Math.abs(E)+jm(this.paint.get("line-translate"))}queryIntersectsFeature(u,g,x,E,F,M,B){const H=ng(u,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),M.angle,B),Z=B/2*Vs(this.paint.get("line-width").evaluate(g,x),this.paint.get("line-gap-width").evaluate(g,x)),ee=this.paint.get("line-offset").evaluate(g,x);return ee&&(E=(function(oe,de){const me=[];for(let Ce=0;Ce<oe.length;Ce++){const we=oe[Ce],Be=[];for(let He=0;He<we.length;He++){const ht=we[He-1],Qe=we[He],et=we[He+1],It=He===0?new v(0,0):Qe.sub(ht)._unit()._perp(),rn=He===we.length-1?new v(0,0):et.sub(Qe)._unit()._perp(),Rn=It._add(rn)._unit(),si=Rn.x*rn.x+Rn.y*rn.y;si!==0&&Rn._mult(1/si),Be.push(Rn._mult(de)._add(Qe))}me.push(Be)}return me})(E,ee*B)),(function(oe,de,me){for(let Ce=0;Ce<de.length;Ce++){const we=de[Ce];if(oe.length>=3){for(let Be=0;Be<we.length;Be++)if(Ec(oe,we[Be]))return!0}if(Yy(oe,we,me))return!0}return!1})(H,E,Z)}isTileClipped(){return!0}}function Vs(f,u){return u>0?u+2*f:f}const Lx=G([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),gv=G([{name:"a_projected_pos",components:3,type:"Float32"}],4);G([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const mv=G([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);G([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Eo=G([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),bl=G([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function gd(f,u,g){return f.sections.forEach((x=>{x.text=(function(E,F,M){const B=F.layout.get("text-transform").evaluate(M,{});return B==="uppercase"?E=E.toLocaleUpperCase():B==="lowercase"&&(E=E.toLocaleLowerCase()),hs.applyArabicShaping&&(E=hs.applyArabicShaping(E)),E})(x.text,u,g)})),f}G([{name:"triangle",components:3,type:"Uint16"}]),G([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),G([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),G([{type:"Float32",name:"offsetX"}]),G([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),G([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Qf={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Jo=24,yv=Xi,B0=function(f,u,g,x,E){var F,M,B=8*E-x-1,H=(1<<B)-1,Z=H>>1,ee=-7,oe=E-1,de=-1,me=f[u+oe];for(oe+=de,F=me&(1<<-ee)-1,me>>=-ee,ee+=B;ee>0;F=256*F+f[u+oe],oe+=de,ee-=8);for(M=F&(1<<-ee)-1,F>>=-ee,ee+=x;ee>0;M=256*M+f[u+oe],oe+=de,ee-=8);if(F===0)F=1-Z;else{if(F===H)return M?NaN:1/0*(me?-1:1);M+=Math.pow(2,x),F-=Z}return(me?-1:1)*M*Math.pow(2,F-x)},vg=function(f,u,g,x,E,F){var M,B,H,Z=8*F-E-1,ee=(1<<Z)-1,oe=ee>>1,de=E===23?Math.pow(2,-24)-Math.pow(2,-77):0,me=0,Ce=1,we=u<0||u===0&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(B=isNaN(u)?1:0,M=ee):(M=Math.floor(Math.log(u)/Math.LN2),u*(H=Math.pow(2,-M))<1&&(M--,H*=2),(u+=M+oe>=1?de/H:de*Math.pow(2,1-oe))*H>=2&&(M++,H/=2),M+oe>=ee?(B=0,M=ee):M+oe>=1?(B=(u*H-1)*Math.pow(2,E),M+=oe):(B=u*Math.pow(2,oe-1)*Math.pow(2,E),M=0));E>=8;f[g+me]=255&B,me+=Ce,B/=256,E-=8);for(M=M<<E|B,Z+=E;Z>0;f[g+me]=255&M,me+=Ce,M/=256,Z-=8);f[g+me-Ce]|=128*we};function Xi(f){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(f)?f:new Uint8Array(f||0),this.pos=0,this.type=0,this.length=this.buf.length}Xi.Varint=0,Xi.Fixed64=1,Xi.Bytes=2,Xi.Fixed32=5;var Xl=4294967296,vv=1/Xl,Ro=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function kc(f){return f.type===Xi.Bytes?f.readVarint()+f.pos:f.pos+1}function xl(f,u,g){return g?4294967296*u+(f>>>0):4294967296*(u>>>0)+(f>>>0)}function Zd(f,u,g){var x=u<=16383?1:u<=2097151?2:u<=268435455?3:Math.floor(Math.log(u)/(7*Math.LN2));g.realloc(x);for(var E=g.pos-1;E>=f;E--)g.buf[E+x]=g.buf[E]}function Pc(f,u){for(var g=0;g<f.length;g++)u.writeVarint(f[g])}function bv(f,u){for(var g=0;g<f.length;g++)u.writeSVarint(f[g])}function xv(f,u){for(var g=0;g<f.length;g++)u.writeFloat(f[g])}function ec(f,u){for(var g=0;g<f.length;g++)u.writeDouble(f[g])}function G0(f,u){for(var g=0;g<f.length;g++)u.writeBoolean(f[g])}function Yd(f,u){for(var g=0;g<f.length;g++)u.writeFixed32(f[g])}function bg(f,u){for(var g=0;g<f.length;g++)u.writeSFixed32(f[g])}function xg(f,u){for(var g=0;g<f.length;g++)u.writeFixed64(f[g])}function ep(f,u){for(var g=0;g<f.length;g++)u.writeSFixed64(f[g])}function wg(f,u){return(f[u]|f[u+1]<<8|f[u+2]<<16)+16777216*f[u+3]}function Zh(f,u,g){f[g]=u,f[g+1]=u>>>8,f[g+2]=u>>>16,f[g+3]=u>>>24}function tp(f,u){return(f[u]|f[u+1]<<8|f[u+2]<<16)+(f[u+3]<<24)}Xi.prototype={destroy:function(){this.buf=null},readFields:function(f,u,g){for(g=g||this.length;this.pos<g;){var x=this.readVarint(),E=x>>3,F=this.pos;this.type=7&x,f(E,u,this),this.pos===F&&this.skip(x)}return u},readMessage:function(f,u){return this.readFields(f,u,this.readVarint()+this.pos)},readFixed32:function(){var f=wg(this.buf,this.pos);return this.pos+=4,f},readSFixed32:function(){var f=tp(this.buf,this.pos);return this.pos+=4,f},readFixed64:function(){var f=wg(this.buf,this.pos)+wg(this.buf,this.pos+4)*Xl;return this.pos+=8,f},readSFixed64:function(){var f=wg(this.buf,this.pos)+tp(this.buf,this.pos+4)*Xl;return this.pos+=8,f},readFloat:function(){var f=B0(this.buf,this.pos,!0,23,4);return this.pos+=4,f},readDouble:function(){var f=B0(this.buf,this.pos,!0,52,8);return this.pos+=8,f},readVarint:function(f){var u,g,x=this.buf;return u=127&(g=x[this.pos++]),g<128?u:(u|=(127&(g=x[this.pos++]))<<7,g<128?u:(u|=(127&(g=x[this.pos++]))<<14,g<128?u:(u|=(127&(g=x[this.pos++]))<<21,g<128?u:(function(E,F,M){var B,H,Z=M.buf;if(B=(112&(H=Z[M.pos++]))>>4,H<128||(B|=(127&(H=Z[M.pos++]))<<3,H<128)||(B|=(127&(H=Z[M.pos++]))<<10,H<128)||(B|=(127&(H=Z[M.pos++]))<<17,H<128)||(B|=(127&(H=Z[M.pos++]))<<24,H<128)||(B|=(1&(H=Z[M.pos++]))<<31,H<128))return xl(E,B,F);throw new Error("Expected varint not more than 10 bytes")})(u|=(15&(g=x[this.pos]))<<28,f,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var f=this.readVarint();return f%2==1?(f+1)/-2:f/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var f=this.readVarint()+this.pos,u=this.pos;return this.pos=f,f-u>=12&&Ro?(function(g,x,E){return Ro.decode(g.subarray(x,E))})(this.buf,u,f):(function(g,x,E){for(var F="",M=x;M<E;){var B,H,Z,ee=g[M],oe=null,de=ee>239?4:ee>223?3:ee>191?2:1;if(M+de>E)break;de===1?ee<128&&(oe=ee):de===2?(192&(B=g[M+1]))==128&&(oe=(31&ee)<<6|63&B)<=127&&(oe=null):de===3?(H=g[M+2],(192&(B=g[M+1]))==128&&(192&H)==128&&((oe=(15&ee)<<12|(63&B)<<6|63&H)<=2047||oe>=55296&&oe<=57343)&&(oe=null)):de===4&&(H=g[M+2],Z=g[M+3],(192&(B=g[M+1]))==128&&(192&H)==128&&(192&Z)==128&&((oe=(15&ee)<<18|(63&B)<<12|(63&H)<<6|63&Z)<=65535||oe>=1114112)&&(oe=null)),oe===null?(oe=65533,de=1):oe>65535&&(oe-=65536,F+=String.fromCharCode(oe>>>10&1023|55296),oe=56320|1023&oe),F+=String.fromCharCode(oe),M+=de}return F})(this.buf,u,f)},readBytes:function(){var f=this.readVarint()+this.pos,u=this.buf.subarray(this.pos,f);return this.pos=f,u},readPackedVarint:function(f,u){if(this.type!==Xi.Bytes)return f.push(this.readVarint(u));var g=kc(this);for(f=f||[];this.pos<g;)f.push(this.readVarint(u));return f},readPackedSVarint:function(f){if(this.type!==Xi.Bytes)return f.push(this.readSVarint());var u=kc(this);for(f=f||[];this.pos<u;)f.push(this.readSVarint());return f},readPackedBoolean:function(f){if(this.type!==Xi.Bytes)return f.push(this.readBoolean());var u=kc(this);for(f=f||[];this.pos<u;)f.push(this.readBoolean());return f},readPackedFloat:function(f){if(this.type!==Xi.Bytes)return f.push(this.readFloat());var u=kc(this);for(f=f||[];this.pos<u;)f.push(this.readFloat());return f},readPackedDouble:function(f){if(this.type!==Xi.Bytes)return f.push(this.readDouble());var u=kc(this);for(f=f||[];this.pos<u;)f.push(this.readDouble());return f},readPackedFixed32:function(f){if(this.type!==Xi.Bytes)return f.push(this.readFixed32());var u=kc(this);for(f=f||[];this.pos<u;)f.push(this.readFixed32());return f},readPackedSFixed32:function(f){if(this.type!==Xi.Bytes)return f.push(this.readSFixed32());var u=kc(this);for(f=f||[];this.pos<u;)f.push(this.readSFixed32());return f},readPackedFixed64:function(f){if(this.type!==Xi.Bytes)return f.push(this.readFixed64());var u=kc(this);for(f=f||[];this.pos<u;)f.push(this.readFixed64());return f},readPackedSFixed64:function(f){if(this.type!==Xi.Bytes)return f.push(this.readSFixed64());var u=kc(this);for(f=f||[];this.pos<u;)f.push(this.readSFixed64());return f},skip:function(f){var u=7&f;if(u===Xi.Varint)for(;this.buf[this.pos++]>127;);else if(u===Xi.Bytes)this.pos=this.readVarint()+this.pos;else if(u===Xi.Fixed32)this.pos+=4;else{if(u!==Xi.Fixed64)throw new Error("Unimplemented type: "+u);this.pos+=8}},writeTag:function(f,u){this.writeVarint(f<<3|u)},realloc:function(f){for(var u=this.length||16;u<this.pos+f;)u*=2;if(u!==this.length){var g=new Uint8Array(u);g.set(this.buf),this.buf=g,this.length=u}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(f){this.realloc(4),Zh(this.buf,f,this.pos),this.pos+=4},writeSFixed32:function(f){this.realloc(4),Zh(this.buf,f,this.pos),this.pos+=4},writeFixed64:function(f){this.realloc(8),Zh(this.buf,-1&f,this.pos),Zh(this.buf,Math.floor(f*vv),this.pos+4),this.pos+=8},writeSFixed64:function(f){this.realloc(8),Zh(this.buf,-1&f,this.pos),Zh(this.buf,Math.floor(f*vv),this.pos+4),this.pos+=8},writeVarint:function(f){(f=+f||0)>268435455||f<0?(function(u,g){var x,E;if(u>=0?(x=u%4294967296|0,E=u/4294967296|0):(E=~(-u/4294967296),4294967295^(x=~(-u%4294967296))?x=x+1|0:(x=0,E=E+1|0)),u>=18446744073709552e3||u<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");g.realloc(10),(function(F,M,B){B.buf[B.pos++]=127&F|128,F>>>=7,B.buf[B.pos++]=127&F|128,F>>>=7,B.buf[B.pos++]=127&F|128,F>>>=7,B.buf[B.pos++]=127&F|128,B.buf[B.pos]=127&(F>>>=7)})(x,0,g),(function(F,M){var B=(7&F)<<4;M.buf[M.pos++]|=B|((F>>>=3)?128:0),F&&(M.buf[M.pos++]=127&F|((F>>>=7)?128:0),F&&(M.buf[M.pos++]=127&F|((F>>>=7)?128:0),F&&(M.buf[M.pos++]=127&F|((F>>>=7)?128:0),F&&(M.buf[M.pos++]=127&F|((F>>>=7)?128:0),F&&(M.buf[M.pos++]=127&F)))))})(E,g)})(f,this):(this.realloc(4),this.buf[this.pos++]=127&f|(f>127?128:0),f<=127||(this.buf[this.pos++]=127&(f>>>=7)|(f>127?128:0),f<=127||(this.buf[this.pos++]=127&(f>>>=7)|(f>127?128:0),f<=127||(this.buf[this.pos++]=f>>>7&127))))},writeSVarint:function(f){this.writeVarint(f<0?2*-f-1:2*f)},writeBoolean:function(f){this.writeVarint(!!f)},writeString:function(f){f=String(f),this.realloc(4*f.length),this.pos++;var u=this.pos;this.pos=(function(x,E,F){for(var M,B,H=0;H<E.length;H++){if((M=E.charCodeAt(H))>55295&&M<57344){if(!B){M>56319||H+1===E.length?(x[F++]=239,x[F++]=191,x[F++]=189):B=M;continue}if(M<56320){x[F++]=239,x[F++]=191,x[F++]=189,B=M;continue}M=B-55296<<10|M-56320|65536,B=null}else B&&(x[F++]=239,x[F++]=191,x[F++]=189,B=null);M<128?x[F++]=M:(M<2048?x[F++]=M>>6|192:(M<65536?x[F++]=M>>12|224:(x[F++]=M>>18|240,x[F++]=M>>12&63|128),x[F++]=M>>6&63|128),x[F++]=63&M|128)}return F})(this.buf,f,this.pos);var g=this.pos-u;g>=128&&Zd(u,g,this),this.pos=u-1,this.writeVarint(g),this.pos+=g},writeFloat:function(f){this.realloc(4),vg(this.buf,f,this.pos,!0,23,4),this.pos+=4},writeDouble:function(f){this.realloc(8),vg(this.buf,f,this.pos,!0,52,8),this.pos+=8},writeBytes:function(f){var u=f.length;this.writeVarint(u),this.realloc(u);for(var g=0;g<u;g++)this.buf[this.pos++]=f[g]},writeRawMessage:function(f,u){this.pos++;var g=this.pos;f(u,this);var x=this.pos-g;x>=128&&Zd(g,x,this),this.pos=g-1,this.writeVarint(x),this.pos+=x},writeMessage:function(f,u,g){this.writeTag(f,Xi.Bytes),this.writeRawMessage(u,g)},writePackedVarint:function(f,u){u.length&&this.writeMessage(f,Pc,u)},writePackedSVarint:function(f,u){u.length&&this.writeMessage(f,bv,u)},writePackedBoolean:function(f,u){u.length&&this.writeMessage(f,G0,u)},writePackedFloat:function(f,u){u.length&&this.writeMessage(f,xv,u)},writePackedDouble:function(f,u){u.length&&this.writeMessage(f,ec,u)},writePackedFixed32:function(f,u){u.length&&this.writeMessage(f,Yd,u)},writePackedSFixed32:function(f,u){u.length&&this.writeMessage(f,bg,u)},writePackedFixed64:function(f,u){u.length&&this.writeMessage(f,xg,u)},writePackedSFixed64:function(f,u){u.length&&this.writeMessage(f,ep,u)},writeBytesField:function(f,u){this.writeTag(f,Xi.Bytes),this.writeBytes(u)},writeFixed32Field:function(f,u){this.writeTag(f,Xi.Fixed32),this.writeFixed32(u)},writeSFixed32Field:function(f,u){this.writeTag(f,Xi.Fixed32),this.writeSFixed32(u)},writeFixed64Field:function(f,u){this.writeTag(f,Xi.Fixed64),this.writeFixed64(u)},writeSFixed64Field:function(f,u){this.writeTag(f,Xi.Fixed64),this.writeSFixed64(u)},writeVarintField:function(f,u){this.writeTag(f,Xi.Varint),this.writeVarint(u)},writeSVarintField:function(f,u){this.writeTag(f,Xi.Varint),this.writeSVarint(u)},writeStringField:function(f,u){this.writeTag(f,Xi.Bytes),this.writeString(u)},writeFloatField:function(f,u){this.writeTag(f,Xi.Fixed32),this.writeFloat(u)},writeDoubleField:function(f,u){this.writeTag(f,Xi.Fixed64),this.writeDouble(u)},writeBooleanField:function(f,u){this.writeVarintField(f,!!u)}};var Xm=d(yv);const np=3;function j0(f,u,g){f===1&&g.readMessage(Ox,u)}function Ox(f,u,g){if(f===3){const{id:x,bitmap:E,width:F,height:M,left:B,top:H,advance:Z}=g.readMessage(zx,{});u.push({id:x,bitmap:new sg({width:F+2*np,height:M+2*np},E),metrics:{width:F,height:M,left:B,top:H,advance:Z}})}}function zx(f,u,g){f===1?u.id=g.readVarint():f===2?u.bitmap=g.readBytes():f===3?u.width=g.readVarint():f===4?u.height=g.readVarint():f===5?u.left=g.readSVarint():f===6?u.top=g.readSVarint():f===7&&(u.advance=g.readVarint())}const Lr=np;function lo(f){let u=0,g=0;for(const M of f)u+=M.w*M.h,g=Math.max(g,M.w);f.sort(((M,B)=>B.h-M.h));const x=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(u/.95)),g),h:1/0}];let E=0,F=0;for(const M of f)for(let B=x.length-1;B>=0;B--){const H=x[B];if(!(M.w>H.w||M.h>H.h)){if(M.x=H.x,M.y=H.y,F=Math.max(F,M.y+M.h),E=Math.max(E,M.x+M.w),M.w===H.w&&M.h===H.h){const Z=x.pop();B<x.length&&(x[B]=Z)}else M.h===H.h?(H.x+=M.w,H.w-=M.w):M.w===H.w?(H.y+=M.h,H.h-=M.h):(x.push({x:H.x+M.w,y:H.y,w:H.w-M.w,h:M.h}),H.y+=M.h,H.h-=M.h);break}}return{w:E,h:F,fill:u/(E*F)||0}}const Ei=1;class gr{constructor(u,{pixelRatio:g,version:x,stretchX:E,stretchY:F,content:M,textFitWidth:B,textFitHeight:H}){this.paddedRect=u,this.pixelRatio=g,this.stretchX=E,this.stretchY=F,this.content=M,this.version=x,this.textFitWidth=B,this.textFitHeight=H}get tl(){return[this.paddedRect.x+Ei,this.paddedRect.y+Ei]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ei,this.paddedRect.y+this.paddedRect.h-Ei]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ei)/this.pixelRatio,(this.paddedRect.h-2*Ei)/this.pixelRatio]}}class $r{constructor(u,g){const x={},E={};this.haveRenderCallbacks=[];const F=[];this.addImages(u,x,F),this.addImages(g,E,F);const{w:M,h:B}=lo(F),H=new Ja({width:M||1,height:B||1});for(const Z in u){const ee=u[Z],oe=x[Z].paddedRect;Ja.copy(ee.data,H,{x:0,y:0},{x:oe.x+Ei,y:oe.y+Ei},ee.data)}for(const Z in g){const ee=g[Z],oe=E[Z].paddedRect,de=oe.x+Ei,me=oe.y+Ei,Ce=ee.data.width,we=ee.data.height;Ja.copy(ee.data,H,{x:0,y:0},{x:de,y:me},ee.data),Ja.copy(ee.data,H,{x:0,y:we-1},{x:de,y:me-1},{width:Ce,height:1}),Ja.copy(ee.data,H,{x:0,y:0},{x:de,y:me+we},{width:Ce,height:1}),Ja.copy(ee.data,H,{x:Ce-1,y:0},{x:de-1,y:me},{width:1,height:we}),Ja.copy(ee.data,H,{x:0,y:0},{x:de+Ce,y:me},{width:1,height:we})}this.image=H,this.iconPositions=x,this.patternPositions=E}addImages(u,g,x){for(const E in u){const F=u[E],M={x:0,y:0,w:F.data.width+2*Ei,h:F.data.height+2*Ei};x.push(M),g[E]=new gr(M,F),F.hasRenderCallback&&this.haveRenderCallbacks.push(E)}}patchUpdatedImages(u,g){u.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const x in u.updatedImages)this.patchUpdatedImage(this.iconPositions[x],u.getImage(x),g),this.patchUpdatedImage(this.patternPositions[x],u.getImage(x),g)}patchUpdatedImage(u,g,x){if(!u||!g||u.version===g.version)return;u.version=g.version;const[E,F]=u.tl;x.update(g.data,void 0,{x:E,y:F})}}var Ts;nn("ImagePosition",gr),nn("ImageAtlas",$r),s.ah=void 0,(Ts=s.ah||(s.ah={}))[Ts.none=0]="none",Ts[Ts.horizontal=1]="horizontal",Ts[Ts.vertical=2]="vertical",Ts[Ts.horizontalOnly=3]="horizontalOnly";const _u=-17;class Dc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(u,g){const x=new Dc;return x.scale=u||1,x.fontStack=g,x}static forImage(u){const g=new Dc;return g.imageName=u,g}}class Xd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(u,g){const x=new Xd;for(let E=0;E<u.sections.length;E++){const F=u.sections[E];F.image?x.addImageSection(F):x.addTextSection(F,g)}return x}length(){return this.text.length}getSection(u){return this.sections[this.sectionIndex[u]]}getSectionIndex(u){return this.sectionIndex[u]}getCharCode(u){return this.text.charCodeAt(u)}verticalizePunctuation(){this.text=(function(u){let g="";for(let x=0;x<u.length;x++){const E=u.charCodeAt(x+1)||null,F=u.charCodeAt(x-1)||null;g+=E&&xu(E)&&!Qf[u[x+1]]||F&&xu(F)&&!Qf[u[x-1]]||!Qf[u[x]]?u[x]:Qf[u[x]]}return g})(this.text)}trim(){let u=0;for(let x=0;x<this.text.length&&Ao[this.text.charCodeAt(x)];x++)u++;let g=this.text.length;for(let x=this.text.length-1;x>=0&&x>=u&&Ao[this.text.charCodeAt(x)];x--)g--;this.text=this.text.substring(u,g),this.sectionIndex=this.sectionIndex.slice(u,g)}substring(u,g){const x=new Xd;return x.text=this.text.substring(u,g),x.sectionIndex=this.sectionIndex.slice(u,g),x.sections=this.sections,x}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((u,g)=>Math.max(u,this.sections[g].scale)),0)}addTextSection(u,g){this.text+=u.text,this.sections.push(Dc.forText(u.scale,u.fontStack||g));const x=this.sections.length-1;for(let E=0;E<u.text.length;++E)this.sectionIndex.push(x)}addImageSection(u){const g=u.image?u.image.name:"";if(g.length===0)return void ce("Can't add FormattedSection with an empty image.");const x=this.getNextImageSectionCharCode();x?(this.text+=String.fromCharCode(x),this.sections.push(Dc.forImage(g)),this.sectionIndex.push(this.sections.length-1)):ce("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function wl(f,u,g,x,E,F,M,B,H,Z,ee,oe,de,me,Ce){const we=Xd.fromFeature(f,E);let Be;oe===s.ah.vertical&&we.verticalizePunctuation();const{processBidirectionalText:He,processStyledBidirectionalText:ht}=hs;if(He&&we.sections.length===1){Be=[];const It=He(we.toString(),Cg(we,Z,F,u,x,me));for(const rn of It){const Rn=new Xd;Rn.text=rn,Rn.sections=we.sections;for(let si=0;si<rn.length;si++)Rn.sectionIndex.push(0);Be.push(Rn)}}else if(ht){Be=[];const It=ht(we.text,we.sectionIndex,Cg(we,Z,F,u,x,me));for(const rn of It){const Rn=new Xd;Rn.text=rn[0],Rn.sectionIndex=rn[1],Rn.sections=we.sections,Be.push(Rn)}}else Be=(function(It,rn){const Rn=[],si=It.text;let vn=0;for(const _n of rn)Rn.push(It.substring(vn,_n)),vn=_n;return vn<si.length&&Rn.push(It.substring(vn,si.length)),Rn})(we,Cg(we,Z,F,u,x,me));const Qe=[],et={positionedLines:Qe,text:we.toString(),top:ee[1],bottom:ee[1],left:ee[0],right:ee[0],writingMode:oe,iconsInText:!1,verticalizable:!1};return(function(It,rn,Rn,si,vn,_n,Vn,On,Mn,Nt,In,jn){let di=0,mr=_u,jr=0,Ps=0;const Ws=On==="right"?1:On==="left"?0:.5;let Us=0;for(const sr of vn){sr.trim();const Pr=sr.getMaxScale(),xa=(Pr-1)*Jo,qs={positionedGlyphs:[],lineOffset:0};It.positionedLines[Us]=qs;const ms=qs.positionedGlyphs;let ns=0;if(!sr.length()){mr+=_n,++Us;continue}for(let nl=0;nl<sr.length();nl++){const ar=sr.getSection(nl),Sr=sr.getSectionIndex(nl),no=sr.getCharCode(nl);let wa=0,vo=null,vd=null,Sl=null,nc=Jo;const tu=!(Mn===s.ah.horizontal||!In&&!bu(no)||In&&(Ao[no]||(as=no,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(as)))));if(ar.imageName){const nu=si[ar.imageName];if(!nu)continue;Sl=ar.imageName,It.iconsInText=It.iconsInText||!0,vd=nu.paddedRect;const Ds=nu.displaySize;ar.scale=ar.scale*Jo/jn,vo={width:Ds[0],height:Ds[1],left:Ei,top:-Lr,advance:tu?Ds[1]:Ds[0]},wa=xa+(Jo-Ds[1]*ar.scale),nc=vo.advance;const El=tu?Ds[0]*ar.scale-Jo*Pr:Ds[1]*ar.scale-Jo*Pr;El>0&&El>ns&&(ns=El)}else{const nu=Rn[ar.fontStack],Ds=nu&&nu[no];if(Ds&&Ds.rect)vd=Ds.rect,vo=Ds.metrics;else{const El=rn[ar.fontStack],sf=El&&El[no];if(!sf)continue;vo=sf.metrics}wa=(Pr-ar.scale)*Jo}tu?(It.verticalizable=!0,ms.push({glyph:no,imageName:Sl,x:di,y:mr+wa,vertical:tu,scale:ar.scale,fontStack:ar.fontStack,sectionIndex:Sr,metrics:vo,rect:vd}),di+=nc*ar.scale+Nt):(ms.push({glyph:no,imageName:Sl,x:di,y:mr+wa,vertical:tu,scale:ar.scale,fontStack:ar.fontStack,sectionIndex:Sr,metrics:vo,rect:vd}),di+=vo.advance*ar.scale+Nt)}ms.length!==0&&(jr=Math.max(di-Nt,jr),H0(ms,0,ms.length-1,Ws,ns)),di=0;const _l=_n*Pr+ns;qs.lineOffset=Math.max(ns,xa),mr+=_l,Ps=Math.max(_l,Ps),++Us}var as;const Na=mr-_u,{horizontalAlign:Ba,verticalAlign:Ga}=Xh(Vn);(function(sr,Pr,xa,qs,ms,ns,_l,nl,ar){const Sr=(Pr-xa)*ms;let no=0;no=ns!==_l?-nl*qs-_u:(-qs*ar+.5)*_l;for(const wa of sr)for(const vo of wa.positionedGlyphs)vo.x+=Sr,vo.y+=no})(It.positionedLines,Ws,Ba,Ga,jr,Ps,_n,Na,vn.length),It.top+=-Ga*Na,It.bottom=It.top+Na,It.left+=-Ba*jr,It.right=It.left+jr})(et,u,g,x,Be,M,B,H,oe,Z,de,Ce),!(function(It){for(const rn of It)if(rn.positionedGlyphs.length!==0)return!1;return!0})(Qe)&&et}const Ao={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Jd={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Yh={40:!0};function Jm(f,u,g,x,E,F){if(u.imageName){const M=x[u.imageName];return M?M.displaySize[0]*u.scale*Jo/F+E:0}{const M=g[u.fontStack],B=M&&M[f];return B?B.metrics.advance*u.scale+E:0}}function Cl(f,u,g,x){const E=Math.pow(f-u,2);return x?f<u?E/2:2*E:E+Math.abs(g)*g}function ip(f,u,g){let x=0;return f===10&&(x-=1e4),g&&(x+=150),f!==40&&f!==65288||(x+=50),u!==41&&u!==65289||(x+=50),x}function rp(f,u,g,x,E,F){let M=null,B=Cl(u,g,E,F);for(const H of x){const Z=Cl(u-H.x,g,E,F)+H.badness;Z<=B&&(M=H,B=Z)}return{index:f,x:u,priorBreak:M,badness:B}}function el(f){return f?el(f.priorBreak).concat(f.index):[]}function Cg(f,u,g,x,E,F){if(!f)return[];const M=[],B=(function(oe,de,me,Ce,we,Be){let He=0;for(let ht=0;ht<oe.length();ht++){const Qe=oe.getSection(ht);He+=Jm(oe.getCharCode(ht),Qe,Ce,we,de,Be)}return He/Math.max(1,Math.ceil(He/me))})(f,u,g,x,E,F),H=f.text.indexOf("")>=0;let Z=0;for(let oe=0;oe<f.length();oe++){const de=f.getSection(oe),me=f.getCharCode(oe);if(Ao[me]||(Z+=Jm(me,de,x,E,u,F)),oe<f.length()-1){const Ce=!((ee=me)<11904)&&(!!Oi["CJK Compatibility Forms"](ee)||!!Oi["CJK Compatibility"](ee)||!!Oi["CJK Strokes"](ee)||!!Oi["CJK Symbols and Punctuation"](ee)||!!Oi["Enclosed CJK Letters and Months"](ee)||!!Oi["Halfwidth and Fullwidth Forms"](ee)||!!Oi["Ideographic Description Characters"](ee)||!!Oi["Vertical Forms"](ee)||vu.test(String.fromCodePoint(ee)));(Jd[me]||Ce||de.imageName||oe!==f.length()-2&&Yh[f.getCharCode(oe+1)])&&M.push(rp(oe+1,Z,B,M,ip(me,f.getCharCode(oe+1),Ce&&H),!1))}}var ee;return el(rp(f.length(),Z,B,M,0,!0))}function Xh(f){let u=.5,g=.5;switch(f){case"right":case"top-right":case"bottom-right":u=1;break;case"left":case"top-left":case"bottom-left":u=0}switch(f){case"bottom":case"bottom-right":case"bottom-left":g=1;break;case"top":case"top-right":case"top-left":g=0}return{horizontalAlign:u,verticalAlign:g}}function H0(f,u,g,x,E){if(!x&&!E)return;const F=f[g],M=(f[g].x+F.metrics.advance*F.scale)*x;for(let B=u;B<=g;B++)f[B].x-=M,f[B].y+=E}function Jh(f,u,g){const{horizontalAlign:x,verticalAlign:E}=Xh(g),F=u[0]-f.displaySize[0]*x,M=u[1]-f.displaySize[1]*E;return{image:f,top:M,bottom:M+f.displaySize[1],left:F,right:F+f.displaySize[0]}}function _g(f){var u,g;let x=f.left,E=f.top,F=f.right-x,M=f.bottom-E;const B=(u=f.image.textFitWidth)!==null&&u!==void 0?u:"stretchOrShrink",H=(g=f.image.textFitHeight)!==null&&g!==void 0?g:"stretchOrShrink",Z=(f.image.content[2]-f.image.content[0])/(f.image.content[3]-f.image.content[1]);if(H==="proportional"){if(B==="stretchOnly"&&F/M<Z||B==="proportional"){const ee=Math.ceil(M*Z);x*=ee/F,F=ee}}else if(B==="proportional"&&H==="stretchOnly"&&Z!==0&&F/M>Z){const ee=Math.ceil(F/Z);E*=ee/M,M=ee}return{x1:x,y1:E,x2:x+F,y2:E+M}}function md(f,u,g,x,E,F){const M=f.image;let B;if(M.content){const Be=M.content,He=M.pixelRatio||1;B=[Be[0]/He,Be[1]/He,M.displaySize[0]-Be[2]/He,M.displaySize[1]-Be[3]/He]}const H=u.left*F,Z=u.right*F;let ee,oe,de,me;g==="width"||g==="both"?(me=E[0]+H-x[3],oe=E[0]+Z+x[1]):(me=E[0]+(H+Z-M.displaySize[0])/2,oe=me+M.displaySize[0]);const Ce=u.top*F,we=u.bottom*F;return g==="height"||g==="both"?(ee=E[1]+Ce-x[0],de=E[1]+we+x[2]):(ee=E[1]+(Ce+we-M.displaySize[1])/2,de=ee+M.displaySize[1]),{image:M,top:ee,right:oe,bottom:de,left:me,collisionPadding:B}}const Qo=255,va=128,Jl=Qo*va;function Fc(f,u){const{expression:g}=u;if(g.kind==="constant")return{kind:"constant",layoutSize:g.evaluate(new qi(f+1))};if(g.kind==="source")return{kind:"source"};{const{zoomStops:x,interpolationType:E}=g;let F=0;for(;F<x.length&&x[F]<=f;)F++;F=Math.max(0,F-1);let M=F;for(;M<x.length&&x[M]<f+1;)M++;M=Math.min(x.length-1,M);const B=x[F],H=x[M];return g.kind==="composite"?{kind:"composite",minZoom:B,maxZoom:H,interpolationType:E}:{kind:"camera",minZoom:B,maxZoom:H,minSize:g.evaluate(new qi(B)),maxSize:g.evaluate(new qi(H)),interpolationType:E}}}function Sg(f,u,g){let x="never";const E=f.get(u);return E?x=E:f.get(g)&&(x="always"),x}const wv=Xo.VectorTileFeature.types,V0=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Qd(f,u,g,x,E,F,M,B,H,Z,ee,oe,de){const me=B?Math.min(Jl,Math.round(B[0])):0,Ce=B?Math.min(Jl,Math.round(B[1])):0;f.emplaceBack(u,g,Math.round(32*x),Math.round(32*E),F,M,(me<<1)+(H?1:0),Ce,16*Z,16*ee,256*oe,256*de)}function Eg(f,u,g){f.emplaceBack(u.x,u.y,g),f.emplaceBack(u.x,u.y,g),f.emplaceBack(u.x,u.y,g),f.emplaceBack(u.x,u.y,g)}function Ql(f){for(const u of f.sections)if(Nf(u.text))return!0;return!1}class Qm{constructor(u){this.layoutVertexArray=new rd,this.indexArray=new ma,this.programConfigurations=u,this.segments=new Hi,this.dynamicLayoutVertexArray=new ga,this.opacityVertexArray=new yi,this.hasVisibleVertices=!1,this.placedSymbolArray=new kr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(u,g,x,E){this.isEmpty()||(x&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Lx.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,g),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,gv.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,V0,!0),this.opacityVertexBuffer.itemSize=1),(x||E)&&this.programConfigurations.upload(u))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}nn("SymbolBuffers",Qm);class Oa{constructor(u,g,x){this.layoutVertexArray=new u,this.layoutAttributes=g,this.indexArray=new x,this.segments=new Hi,this.collisionVertexArray=new Br}upload(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,mv.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}nn("CollisionBuffers",Oa);class Qh{constructor(u){this.collisionBoxArray=u.collisionBoxArray,this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((M=>M.id)),this.index=u.index,this.pixelRatio=u.pixelRatio,this.sourceLayerIndex=u.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ig([]),this.placementViewportMatrix=ig([]);const g=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Fc(this.zoom,g["text-size"]),this.iconSizeData=Fc(this.zoom,g["icon-size"]);const x=this.layers[0].layout,E=x.get("symbol-sort-key"),F=x.get("symbol-z-order");this.canOverlap=Sg(x,"text-overlap","text-allow-overlap")!=="never"||Sg(x,"icon-overlap","icon-allow-overlap")!=="never"||x.get("text-ignore-placement")||x.get("icon-ignore-placement"),this.sortFeaturesByKey=F!=="viewport-y"&&!E.isConstant(),this.sortFeaturesByY=(F==="viewport-y"||F==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,x.get("symbol-placement")==="point"&&(this.writingModes=x.get("text-writing-mode").map((M=>s.ah[M]))),this.stateDependentLayerIds=this.layers.filter((M=>M.isStateDependent())).map((M=>M.id)),this.sourceID=u.sourceID}createArrays(){this.text=new Qm(new js(this.layers,this.zoom,(u=>/^text/.test(u)))),this.icon=new Qm(new js(this.layers,this.zoom,(u=>/^icon/.test(u)))),this.glyphOffsetArray=new vr,this.lineVertexArray=new go,this.symbolInstances=new Ki,this.textAnchorOffsets=new Zi}calculateGlyphDependencies(u,g,x,E,F){for(let M=0;M<u.length;M++)if(g[u.charCodeAt(M)]=!0,(x||E)&&F){const B=Qf[u.charAt(M)];B&&(g[B.charCodeAt(0)]=!0)}}populate(u,g,x){const E=this.layers[0],F=E.layout,M=F.get("text-font"),B=F.get("text-field"),H=F.get("icon-image"),Z=(B.value.kind!=="constant"||B.value.value instanceof Xs&&!B.value.value.isEmpty()||B.value.value.toString().length>0)&&(M.value.kind!=="constant"||M.value.value.length>0),ee=H.value.kind!=="constant"||!!H.value.value||Object.keys(H.parameters).length>0,oe=F.get("symbol-sort-key");if(this.features=[],!Z&&!ee)return;const de=g.iconDependencies,me=g.glyphDependencies,Ce=g.availableImages,we=new qi(this.zoom);for(const{feature:Be,id:He,index:ht,sourceLayerIndex:Qe}of u){const et=E._featureFilter.needGeometry,It=Ya(Be,et);if(!E._featureFilter.filter(we,It,x))continue;let rn,Rn;if(et||(It.geometry=Rs(Be)),Z){const vn=E.getValueAndResolveTokens("text-field",It,x,Ce),_n=Xs.factory(vn),Vn=this.hasRTLText=this.hasRTLText||Ql(_n);(!Vn||hs.getRTLTextPluginStatus()==="unavailable"||Vn&&hs.isParsed())&&(rn=gd(_n,E,It))}if(ee){const vn=E.getValueAndResolveTokens("icon-image",It,x,Ce);Rn=vn instanceof Ns?vn:Ns.fromString(vn)}if(!rn&&!Rn)continue;const si=this.sortFeaturesByKey?oe.evaluate(It,{},x):void 0;if(this.features.push({id:He,text:rn,icon:Rn,index:ht,sourceLayerIndex:Qe,geometry:It.geometry,properties:Be.properties,type:wv[Be.type],sortKey:si}),Rn&&(de[Rn.name]=!0),rn){const vn=M.evaluate(It,{},x).join(","),_n=F.get("text-rotation-alignment")!=="viewport"&&F.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(s.ah.vertical)>=0;for(const Vn of rn.sections)if(Vn.image)de[Vn.image.name]=!0;else{const On=Se(rn.toString()),Mn=Vn.fontStack||vn,Nt=me[Mn]=me[Mn]||{};this.calculateGlyphDependencies(Vn.text,Nt,_n,this.allowVerticalPlacement,On)}}}F.get("symbol-placement")==="line"&&(this.features=(function(Be){const He={},ht={},Qe=[];let et=0;function It(vn){Qe.push(Be[vn]),et++}function rn(vn,_n,Vn){const On=ht[vn];return delete ht[vn],ht[_n]=On,Qe[On].geometry[0].pop(),Qe[On].geometry[0]=Qe[On].geometry[0].concat(Vn[0]),On}function Rn(vn,_n,Vn){const On=He[_n];return delete He[_n],He[vn]=On,Qe[On].geometry[0].shift(),Qe[On].geometry[0]=Vn[0].concat(Qe[On].geometry[0]),On}function si(vn,_n,Vn){const On=Vn?_n[0][_n[0].length-1]:_n[0][0];return`${vn}:${On.x}:${On.y}`}for(let vn=0;vn<Be.length;vn++){const _n=Be[vn],Vn=_n.geometry,On=_n.text?_n.text.toString():null;if(!On){It(vn);continue}const Mn=si(On,Vn),Nt=si(On,Vn,!0);if(Mn in ht&&Nt in He&&ht[Mn]!==He[Nt]){const In=Rn(Mn,Nt,Vn),jn=rn(Mn,Nt,Qe[In].geometry);delete He[Mn],delete ht[Nt],ht[si(On,Qe[jn].geometry,!0)]=jn,Qe[In].geometry=null}else Mn in ht?rn(Mn,Nt,Vn):Nt in He?Rn(Mn,Nt,Vn):(It(vn),He[Mn]=et-1,ht[Nt]=et-1)}return Qe.filter((vn=>vn.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((Be,He)=>Be.sortKey-He.sortKey))}update(u,g,x){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,g,this.layers,x),this.icon.programConfigurations.updatePaintArrays(u,g,this.layers,x))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u)),this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(u,g){const x=this.lineVertexArray.length;if(u.segment!==void 0){let E=u.dist(g[u.segment+1]),F=u.dist(g[u.segment]);const M={};for(let B=u.segment+1;B<g.length;B++)M[B]={x:g[B].x,y:g[B].y,tileUnitDistanceFromAnchor:E},B<g.length-1&&(E+=g[B+1].dist(g[B]));for(let B=u.segment||0;B>=0;B--)M[B]={x:g[B].x,y:g[B].y,tileUnitDistanceFromAnchor:F},B>0&&(F+=g[B-1].dist(g[B]));for(let B=0;B<g.length;B++){const H=M[B];this.lineVertexArray.emplaceBack(H.x,H.y,H.tileUnitDistanceFromAnchor)}}return{lineStartIndex:x,lineLength:this.lineVertexArray.length-x}}addSymbols(u,g,x,E,F,M,B,H,Z,ee,oe,de){const me=u.indexArray,Ce=u.layoutVertexArray,we=u.segments.prepareSegment(4*g.length,Ce,me,this.canOverlap?M.sortKey:void 0),Be=this.glyphOffsetArray.length,He=we.vertexLength,ht=this.allowVerticalPlacement&&B===s.ah.vertical?Math.PI/2:0,Qe=M.text&&M.text.sections;for(let et=0;et<g.length;et++){const{tl:It,tr:rn,bl:Rn,br:si,tex:vn,pixelOffsetTL:_n,pixelOffsetBR:Vn,minFontScaleX:On,minFontScaleY:Mn,glyphOffset:Nt,isSDF:In,sectionIndex:jn}=g[et],di=we.vertexLength,mr=Nt[1];Qd(Ce,H.x,H.y,It.x,mr+It.y,vn.x,vn.y,x,In,_n.x,_n.y,On,Mn),Qd(Ce,H.x,H.y,rn.x,mr+rn.y,vn.x+vn.w,vn.y,x,In,Vn.x,_n.y,On,Mn),Qd(Ce,H.x,H.y,Rn.x,mr+Rn.y,vn.x,vn.y+vn.h,x,In,_n.x,Vn.y,On,Mn),Qd(Ce,H.x,H.y,si.x,mr+si.y,vn.x+vn.w,vn.y+vn.h,x,In,Vn.x,Vn.y,On,Mn),Eg(u.dynamicLayoutVertexArray,H,ht),me.emplaceBack(di,di+1,di+2),me.emplaceBack(di+1,di+2,di+3),we.vertexLength+=4,we.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Nt[0]),et!==g.length-1&&jn===g[et+1].sectionIndex||u.programConfigurations.populatePaintArrays(Ce.length,M,M.index,{},de,Qe&&Qe[jn])}u.placedSymbolArray.emplaceBack(H.x,H.y,Be,this.glyphOffsetArray.length-Be,He,Z,ee,H.segment,x?x[0]:0,x?x[1]:0,E[0],E[1],B,0,!1,0,oe)}_addCollisionDebugVertex(u,g,x,E,F,M){return g.emplaceBack(0,0),u.emplaceBack(x.x,x.y,E,F,Math.round(M.x),Math.round(M.y))}addCollisionDebugVertices(u,g,x,E,F,M,B){const H=F.segments.prepareSegment(4,F.layoutVertexArray,F.indexArray),Z=H.vertexLength,ee=F.layoutVertexArray,oe=F.collisionVertexArray,de=B.anchorX,me=B.anchorY;this._addCollisionDebugVertex(ee,oe,M,de,me,new v(u,g)),this._addCollisionDebugVertex(ee,oe,M,de,me,new v(x,g)),this._addCollisionDebugVertex(ee,oe,M,de,me,new v(x,E)),this._addCollisionDebugVertex(ee,oe,M,de,me,new v(u,E)),H.vertexLength+=4;const Ce=F.indexArray;Ce.emplaceBack(Z,Z+1),Ce.emplaceBack(Z+1,Z+2),Ce.emplaceBack(Z+2,Z+3),Ce.emplaceBack(Z+3,Z),H.primitiveLength+=4}addDebugCollisionBoxes(u,g,x,E){for(let F=u;F<g;F++){const M=this.collisionBoxArray.get(F);this.addCollisionDebugVertices(M.x1,M.y1,M.x2,M.y2,E?this.textCollisionBox:this.iconCollisionBox,M.anchorPoint,x)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Oa(or,Eo.members,jo),this.iconCollisionBox=new Oa(or,Eo.members,jo);for(let u=0;u<this.symbolInstances.length;u++){const g=this.symbolInstances.get(u);this.addDebugCollisionBoxes(g.textBoxStartIndex,g.textBoxEndIndex,g,!0),this.addDebugCollisionBoxes(g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g,!0),this.addDebugCollisionBoxes(g.iconBoxStartIndex,g.iconBoxEndIndex,g,!1),this.addDebugCollisionBoxes(g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex,g,!1)}}_deserializeCollisionBoxesForSymbol(u,g,x,E,F,M,B,H,Z){const ee={};for(let oe=g;oe<x;oe++){const de=u.get(oe);ee.textBox={x1:de.x1,y1:de.y1,x2:de.x2,y2:de.y2,anchorPointX:de.anchorPointX,anchorPointY:de.anchorPointY},ee.textFeatureIndex=de.featureIndex;break}for(let oe=E;oe<F;oe++){const de=u.get(oe);ee.verticalTextBox={x1:de.x1,y1:de.y1,x2:de.x2,y2:de.y2,anchorPointX:de.anchorPointX,anchorPointY:de.anchorPointY},ee.verticalTextFeatureIndex=de.featureIndex;break}for(let oe=M;oe<B;oe++){const de=u.get(oe);ee.iconBox={x1:de.x1,y1:de.y1,x2:de.x2,y2:de.y2,anchorPointX:de.anchorPointX,anchorPointY:de.anchorPointY},ee.iconFeatureIndex=de.featureIndex;break}for(let oe=H;oe<Z;oe++){const de=u.get(oe);ee.verticalIconBox={x1:de.x1,y1:de.y1,x2:de.x2,y2:de.y2,anchorPointX:de.anchorPointX,anchorPointY:de.anchorPointY},ee.verticalIconFeatureIndex=de.featureIndex;break}return ee}deserializeCollisionBoxes(u){this.collisionArrays=[];for(let g=0;g<this.symbolInstances.length;g++){const x=this.symbolInstances.get(g);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,x.textBoxStartIndex,x.textBoxEndIndex,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x.iconBoxStartIndex,x.iconBoxEndIndex,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(u,g){const x=u.placedSymbolArray.get(g),E=x.vertexStartIndex+4*x.numGlyphs;for(let F=x.vertexStartIndex;F<E;F+=4)u.indexArray.emplaceBack(F,F+1,F+2),u.indexArray.emplaceBack(F+1,F+2,F+3)}getSortedSymbolIndexes(u){if(this.sortedAngle===u&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const g=Math.sin(u),x=Math.cos(u),E=[],F=[],M=[];for(let B=0;B<this.symbolInstances.length;++B){M.push(B);const H=this.symbolInstances.get(B);E.push(0|Math.round(g*H.anchorX+x*H.anchorY)),F.push(H.featureIndex)}return M.sort(((B,H)=>E[B]-E[H]||F[H]-F[B])),M}addToSortKeyRanges(u,g){const x=this.sortKeyRanges[this.sortKeyRanges.length-1];x&&x.sortKey===g?x.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:g,symbolInstanceStart:u,symbolInstanceEnd:u+1})}sortFeatures(u){if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u),this.sortedAngle=u,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const g of this.symbolInstanceIndexes){const x=this.symbolInstances.get(g);this.featureSortOrder.push(x.featureIndex),[x.rightJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.leftJustifiedTextSymbolIndex].forEach(((E,F,M)=>{E>=0&&M.indexOf(E)===F&&this.addIndicesForPlacedSymbol(this.text,E)})),x.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,x.verticalPlacedTextSymbolIndex),x.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.placedIconSymbolIndex),x.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Cv,_v;nn("SymbolBucket",Qh,{omit:["layers","collisionBoxArray","features","compareText"]}),Qh.MAX_GLYPHS=65535,Qh.addDynamicAttributes=Eg;var tc={get paint(){return _v=_v||new D({"icon-opacity":new ii(Pe.paint_symbol["icon-opacity"]),"icon-color":new ii(Pe.paint_symbol["icon-color"]),"icon-halo-color":new ii(Pe.paint_symbol["icon-halo-color"]),"icon-halo-width":new ii(Pe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ii(Pe.paint_symbol["icon-halo-blur"]),"icon-translate":new zn(Pe.paint_symbol["icon-translate"]),"icon-translate-anchor":new zn(Pe.paint_symbol["icon-translate-anchor"]),"text-opacity":new ii(Pe.paint_symbol["text-opacity"]),"text-color":new ii(Pe.paint_symbol["text-color"],{runtimeType:fr,getOverride:f=>f.textColor,hasOverride:f=>!!f.textColor}),"text-halo-color":new ii(Pe.paint_symbol["text-halo-color"]),"text-halo-width":new ii(Pe.paint_symbol["text-halo-width"]),"text-halo-blur":new ii(Pe.paint_symbol["text-halo-blur"]),"text-translate":new zn(Pe.paint_symbol["text-translate"]),"text-translate-anchor":new zn(Pe.paint_symbol["text-translate-anchor"])})},get layout(){return Cv=Cv||new D({"symbol-placement":new zn(Pe.layout_symbol["symbol-placement"]),"symbol-spacing":new zn(Pe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new zn(Pe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ii(Pe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new zn(Pe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new zn(Pe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new zn(Pe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new zn(Pe.layout_symbol["icon-ignore-placement"]),"icon-optional":new zn(Pe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new zn(Pe.layout_symbol["icon-rotation-alignment"]),"icon-size":new ii(Pe.layout_symbol["icon-size"]),"icon-text-fit":new zn(Pe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new zn(Pe.layout_symbol["icon-text-fit-padding"]),"icon-image":new ii(Pe.layout_symbol["icon-image"]),"icon-rotate":new ii(Pe.layout_symbol["icon-rotate"]),"icon-padding":new ii(Pe.layout_symbol["icon-padding"]),"icon-keep-upright":new zn(Pe.layout_symbol["icon-keep-upright"]),"icon-offset":new ii(Pe.layout_symbol["icon-offset"]),"icon-anchor":new ii(Pe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new zn(Pe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new zn(Pe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new zn(Pe.layout_symbol["text-rotation-alignment"]),"text-field":new ii(Pe.layout_symbol["text-field"]),"text-font":new ii(Pe.layout_symbol["text-font"]),"text-size":new ii(Pe.layout_symbol["text-size"]),"text-max-width":new ii(Pe.layout_symbol["text-max-width"]),"text-line-height":new zn(Pe.layout_symbol["text-line-height"]),"text-letter-spacing":new ii(Pe.layout_symbol["text-letter-spacing"]),"text-justify":new ii(Pe.layout_symbol["text-justify"]),"text-radial-offset":new ii(Pe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new zn(Pe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new ii(Pe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new ii(Pe.layout_symbol["text-anchor"]),"text-max-angle":new zn(Pe.layout_symbol["text-max-angle"]),"text-writing-mode":new zn(Pe.layout_symbol["text-writing-mode"]),"text-rotate":new ii(Pe.layout_symbol["text-rotate"]),"text-padding":new zn(Pe.layout_symbol["text-padding"]),"text-keep-upright":new zn(Pe.layout_symbol["text-keep-upright"]),"text-transform":new ii(Pe.layout_symbol["text-transform"]),"text-offset":new ii(Pe.layout_symbol["text-offset"]),"text-allow-overlap":new zn(Pe.layout_symbol["text-allow-overlap"]),"text-overlap":new zn(Pe.layout_symbol["text-overlap"]),"text-ignore-placement":new zn(Pe.layout_symbol["text-ignore-placement"]),"text-optional":new zn(Pe.layout_symbol["text-optional"])})}};class Rg{constructor(u){if(u.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=u.property.overrides?u.property.overrides.runtimeType:wo,this.defaultValue=u}evaluate(u){if(u.formattedSection){const g=this.defaultValue.property.overrides;if(g&&g.hasOverride(u.formattedSection))return g.getOverride(u.formattedSection)}return u.feature&&u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default}eachChild(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}nn("FormatSectionOverride",Rg,{omit:["defaultValue"]});class op extends y{constructor(u){super(u,tc)}recalculate(u,g){if(super.recalculate(u,g),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const x=this.layout.get("text-writing-mode");if(x){const E=[];for(const F of x)E.indexOf(F)<0&&E.push(F);this.layout._values["text-writing-mode"]=E}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(u,g,x,E){const F=this.layout.get(u).evaluate(g,{},x,E),M=this._unevaluatedLayout._values[u];return M.isDataDriven()||Bn(M.value)||!F?F:(function(B,H){return H.replace(/{([^{}]+)}/g,((Z,ee)=>B&&ee in B?String(B[ee]):""))})(g.properties,F)}createBucket(u){return new Qh(u)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const u of tc.paint.overridableProperties){if(!op.hasPaintOverride(this.layout,u))continue;const g=this.paint.get(u),x=new Rg(g),E=new Ft(x,g.property.specification);let F=null;F=g.value.kind==="constant"||g.value.kind==="source"?new Ui("source",E):new zr("composite",E,g.value.zoomStops),this.paint._values[u]=new ss(g.property,F,g.parameters)}}_handleOverridablePaintPropertyUpdate(u,g,x){return!(!this.layout||g.isDataDriven()||x.isDataDriven())&&op.hasPaintOverride(this.layout,u)}static hasPaintOverride(u,g){const x=u.get("text-field"),E=tc.paint.properties[g];let F=!1;const M=B=>{for(const H of B)if(E.overrides&&E.overrides.hasOverride(H))return void(F=!0)};if(x.value.kind==="constant"&&x.value.value instanceof Xs)M(x.value.value.sections);else if(x.value.kind==="source"){const B=Z=>{F||(Z instanceof Co&&ro(Z.value)===sa?M(Z.value.sections):Z instanceof Io?M(Z.sections):Z.eachChild(B))},H=x.value;H._styleExpression&&B(H._styleExpression.expression)}return F}}let ef;var $0={get paint(){return ef=ef||new D({"background-color":new zn(Pe.paint_background["background-color"]),"background-pattern":new Ku(Pe.paint_background["background-pattern"]),"background-opacity":new zn(Pe.paint_background["background-opacity"])})}};class Ag extends y{constructor(u){super(u,$0)}}let Sv;var W0={get paint(){return Sv=Sv||new D({"raster-opacity":new zn(Pe.paint_raster["raster-opacity"]),"raster-hue-rotate":new zn(Pe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new zn(Pe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new zn(Pe.paint_raster["raster-brightness-max"]),"raster-saturation":new zn(Pe.paint_raster["raster-saturation"]),"raster-contrast":new zn(Pe.paint_raster["raster-contrast"]),"raster-resampling":new zn(Pe.paint_raster["raster-resampling"]),"raster-fade-duration":new zn(Pe.paint_raster["raster-fade-duration"])})}};class ey extends y{constructor(u){super(u,W0)}}class Ev extends y{constructor(u){super(u,{}),this.onAdd=g=>{this.implementation.onAdd&&this.implementation.onAdd(g,g.painter.context.gl)},this.onRemove=g=>{this.implementation.onRemove&&this.implementation.onRemove(g,g.painter.context.gl)},this.implementation=u}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Nx{constructor(u){this._methodToThrottle=u,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Rv=63710088e-1;class eh{constructor(u,g){if(isNaN(u)||isNaN(g))throw new Error(`Invalid LngLat object: (${u}, ${g})`);if(this.lng=+u,this.lat=+g,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new eh(ie(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(u){const g=Math.PI/180,x=this.lat*g,E=u.lat*g,F=Math.sin(x)*Math.sin(E)+Math.cos(x)*Math.cos(E)*Math.cos((u.lng-this.lng)*g);return Rv*Math.acos(Math.min(F,1))}static convert(u){if(u instanceof eh)return u;if(Array.isArray(u)&&(u.length===2||u.length===3))return new eh(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&typeof u=="object"&&u!==null)return new eh(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Av=2*Math.PI*Rv;function Tv(f){return Av*Math.cos(f*Math.PI/180)}function tf(f){return(180+f)/360}function Tg(f){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360)))/360}function sp(f,u){return f/Tv(u)}function ty(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}class nf{constructor(u,g,x=0){this.x=+u,this.y=+g,this.z=+x}static fromLngLat(u,g=0){const x=eh.convert(u);return new nf(tf(x.lng),Tg(x.lat),sp(g,x.lat))}toLngLat(){return new eh(360*this.x-180,ty(this.y))}toAltitude(){return this.z*Tv(ty(this.y))}meterInMercatorCoordinateUnits(){return 1/Av*(u=ty(this.y),1/Math.cos(u*Math.PI/180));var u}}function ny(f,u,g){var x=2*Math.PI*6378137/256/Math.pow(2,g);return[f*x-2*Math.PI*6378137/2,u*x-2*Math.PI*6378137/2]}class ap{constructor(u,g,x){if(!(function(E,F,M){return!(E<0||E>25||M<0||M>=Math.pow(2,E)||F<0||F>=Math.pow(2,E))})(u,g,x))throw new Error(`x=${g}, y=${x}, z=${u} outside of bounds. 0<=x<${Math.pow(2,u)}, 0<=y<${Math.pow(2,u)} 0<=z<=25 `);this.z=u,this.x=g,this.y=x,this.key=rf(0,u,u,g,x)}equals(u){return this.z===u.z&&this.x===u.x&&this.y===u.y}url(u,g,x){const E=(M=this.y,B=this.z,H=ny(256*(F=this.x),256*(M=Math.pow(2,B)-M-1),B),Z=ny(256*(F+1),256*(M+1),B),H[0]+","+H[1]+","+Z[0]+","+Z[1]);var F,M,B,H,Z;const ee=(function(oe,de,me){let Ce,we="";for(let Be=oe;Be>0;Be--)Ce=1<<Be-1,we+=(de&Ce?1:0)+(me&Ce?2:0);return we})(this.z,this.x,this.y);return u[(this.x+this.y)%u.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(x==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,g>1?"@2x":"").replace(/{quadkey}/g,ee).replace(/{bbox-epsg-3857}/g,E)}isChildOf(u){const g=this.z-u.z;return g>0&&u.x===this.x>>g&&u.y===this.y>>g}getTilePoint(u){const g=Math.pow(2,this.z);return new v((u.x*g-this.x)*Oo,(u.y*g-this.y)*Oo)}toString(){return`${this.z}/${this.x}/${this.y}`}}class iy{constructor(u,g){this.wrap=u,this.canonical=g,this.key=rf(u,g.z,g.z,g.x,g.y)}}class ba{constructor(u,g,x,E,F){if(u<x)throw new Error(`overscaledZ should be >= z; overscaledZ = ${u}; z = ${x}`);this.overscaledZ=u,this.wrap=g,this.canonical=new ap(x,+E,+F),this.key=rf(g,u,x,E,F)}clone(){return new ba(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)}scaledTo(u){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const g=this.canonical.z-u;return u>this.canonical.z?new ba(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ba(u,this.wrap,u,this.canonical.x>>g,this.canonical.y>>g)}calculateScaledKey(u,g){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const x=this.canonical.z-u;return u>this.canonical.z?rf(this.wrap*+g,u,this.canonical.z,this.canonical.x,this.canonical.y):rf(this.wrap*+g,u,u,this.canonical.x>>x,this.canonical.y>>x)}isChildOf(u){if(u.wrap!==this.wrap)return!1;const g=this.canonical.z-u.canonical.z;return u.overscaledZ===0||u.overscaledZ<this.overscaledZ&&u.canonical.x===this.canonical.x>>g&&u.canonical.y===this.canonical.y>>g}children(u){if(this.overscaledZ>=u)return[new ba(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const g=this.canonical.z+1,x=2*this.canonical.x,E=2*this.canonical.y;return[new ba(g,this.wrap,g,x,E),new ba(g,this.wrap,g,x+1,E),new ba(g,this.wrap,g,x,E+1),new ba(g,this.wrap,g,x+1,E+1)]}isLessThan(u){return this.wrap<u.wrap||!(this.wrap>u.wrap)&&(this.overscaledZ<u.overscaledZ||!(this.overscaledZ>u.overscaledZ)&&(this.canonical.x<u.canonical.x||!(this.canonical.x>u.canonical.x)&&this.canonical.y<u.canonical.y))}wrapped(){return new ba(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(u){return new ba(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new iy(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(u){return this.canonical.getTilePoint(new nf(u.x-this.wrap,u.y))}}function rf(f,u,g,x,E){(f*=2)<0&&(f=-1*f-1);const F=1<<g;return(F*F*f+F*E+x).toString(36)+g.toString(36)+u.toString(36)}nn("CanonicalTileID",ap),nn("OverscaledTileID",ba,{omit:["posMatrix"]});class ry{constructor(u,g,x,E=1,F=1,M=1,B=0){if(this.uid=u,g.height!==g.width)throw new RangeError("DEM tiles must be square");if(x&&!["mapbox","terrarium","custom"].includes(x))return void ce(`"${x}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=g.height;const H=this.dim=g.height-2;switch(this.data=new Uint32Array(g.data.buffer),x){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=E,this.greenFactor=F,this.blueFactor=M,this.baseShift=B;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let Z=0;Z<H;Z++)this.data[this._idx(-1,Z)]=this.data[this._idx(0,Z)],this.data[this._idx(H,Z)]=this.data[this._idx(H-1,Z)],this.data[this._idx(Z,-1)]=this.data[this._idx(Z,0)],this.data[this._idx(Z,H)]=this.data[this._idx(Z,H-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(H,-1)]=this.data[this._idx(H-1,0)],this.data[this._idx(-1,H)]=this.data[this._idx(0,H-1)],this.data[this._idx(H,H)]=this.data[this._idx(H-1,H-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let Z=0;Z<H;Z++)for(let ee=0;ee<H;ee++){const oe=this.get(Z,ee);oe>this.max&&(this.max=oe),oe<this.min&&(this.min=oe)}}get(u,g){const x=new Uint8Array(this.data.buffer),E=4*this._idx(u,g);return this.unpack(x[E],x[E+1],x[E+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(u,g){if(u<-1||u>=this.dim+1||g<-1||g>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(g+1)*this.stride+(u+1)}unpack(u,g,x){return u*this.redFactor+g*this.greenFactor+x*this.blueFactor-this.baseShift}getPixels(){return new Ja({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(u,g,x){if(this.dim!==u.dim)throw new Error("dem dimension mismatch");let E=g*this.dim,F=g*this.dim+this.dim,M=x*this.dim,B=x*this.dim+this.dim;switch(g){case-1:E=F-1;break;case 1:F=E+1}switch(x){case-1:M=B-1;break;case 1:B=M+1}const H=-g*this.dim,Z=-x*this.dim;for(let ee=M;ee<B;ee++)for(let oe=E;oe<F;oe++)this.data[this._idx(oe,ee)]=u.data[this._idx(oe+H,ee+Z)]}}nn("DEMData",ry);class Wr{constructor(u){this._stringToNumber={},this._numberToString=[];for(let g=0;g<u.length;g++){const x=u[g];this._stringToNumber[x]=g,this._numberToString[g]=x}}encode(u){return this._stringToNumber[u]}decode(u){if(u>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${u} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[u]}}class oy{constructor(u,g,x,E,F){this.type="Feature",this._vectorTileFeature=u,u._z=g,u._x=x,u._y=E,this.properties=u.properties,this.id=F}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(u){this._geometry=u}toJSON(){const u={geometry:this.geometry};for(const g in this)g!=="_geometry"&&g!=="_vectorTileFeature"&&(u[g]=this[g]);return u}}class U0{constructor(u,g){this.tileID=u,this.x=u.canonical.x,this.y=u.canonical.y,this.z=u.canonical.z,this.grid=new po(Oo,16,0),this.grid3D=new po(Oo,16,0),this.featureIndexArray=new eo,this.promoteId=g}insert(u,g,x,E,F,M){const B=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(x,E,F);const H=M?this.grid3D:this.grid;for(let Z=0;Z<g.length;Z++){const ee=g[Z],oe=[1/0,1/0,-1/0,-1/0];for(let de=0;de<ee.length;de++){const me=ee[de];oe[0]=Math.min(oe[0],me.x),oe[1]=Math.min(oe[1],me.y),oe[2]=Math.max(oe[2],me.x),oe[3]=Math.max(oe[3],me.y)}oe[0]<Oo&&oe[1]<Oo&&oe[2]>=0&&oe[3]>=0&&H.insert(B,oe[0],oe[1],oe[2],oe[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Xo.VectorTile(new Xm(this.rawTileData)).layers,this.sourceLayerCoder=new Wr(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(u,g,x,E){this.loadVTLayers();const F=u.params||{},M=Oo/u.tileSize/u.scale,B=Ff(F.filter),H=u.queryGeometry,Z=u.queryPadding*M,ee=kg(H),oe=this.grid.query(ee.minX-Z,ee.minY-Z,ee.maxX+Z,ee.maxY+Z),de=kg(u.cameraQueryGeometry),me=this.grid3D.query(de.minX-Z,de.minY-Z,de.maxX+Z,de.maxY+Z,((Be,He,ht,Qe)=>(function(et,It,rn,Rn,si){for(const _n of et)if(It<=_n.x&&rn<=_n.y&&Rn>=_n.x&&si>=_n.y)return!0;const vn=[new v(It,rn),new v(It,si),new v(Rn,si),new v(Rn,rn)];if(et.length>2){for(const _n of vn)if(Ec(et,_n))return!0}for(let _n=0;_n<et.length-1;_n++)if(Jy(et[_n],et[_n+1],vn))return!0;return!1})(u.cameraQueryGeometry,Be-Z,He-Z,ht+Z,Qe+Z)));for(const Be of me)oe.push(Be);oe.sort(Bx);const Ce={};let we;for(let Be=0;Be<oe.length;Be++){const He=oe[Be];if(He===we)continue;we=He;const ht=this.featureIndexArray.get(He);let Qe=null;this.loadMatchingFeature(Ce,ht.bucketIndex,ht.sourceLayerIndex,ht.featureIndex,B,F.layers,F.availableImages,g,x,E,((et,It,rn)=>(Qe||(Qe=Rs(et)),It.queryIntersectsFeature(H,et,rn,Qe,this.z,u.transform,M,u.pixelPosMatrix))))}return Ce}loadMatchingFeature(u,g,x,E,F,M,B,H,Z,ee,oe){const de=this.bucketLayerIDs[g];if(M&&!(function(Be,He){for(let ht=0;ht<Be.length;ht++)if(He.indexOf(Be[ht])>=0)return!0;return!1})(M,de))return;const me=this.sourceLayerCoder.decode(x),Ce=this.vtLayers[me].feature(E);if(F.needGeometry){const Be=Ya(Ce,!0);if(!F.filter(new qi(this.tileID.overscaledZ),Be,this.tileID.canonical))return}else if(!F.filter(new qi(this.tileID.overscaledZ),Ce))return;const we=this.getId(Ce,me);for(let Be=0;Be<de.length;Be++){const He=de[Be];if(M&&M.indexOf(He)<0)continue;const ht=H[He];if(!ht)continue;let Qe={};we&&ee&&(Qe=ee.getState(ht.sourceLayer||"_geojsonTileLayer",we));const et=re({},Z[He]);et.paint=lp(et.paint,ht.paint,Ce,Qe,B),et.layout=lp(et.layout,ht.layout,Ce,Qe,B);const It=!oe||oe(Ce,ht,Qe);if(!It)continue;const rn=new oy(Ce,this.z,this.x,this.y,we);rn.layer=et;let Rn=u[He];Rn===void 0&&(Rn=u[He]=[]),Rn.push({featureIndex:E,feature:rn,intersectionZ:It})}}lookupSymbolFeatures(u,g,x,E,F,M,B,H){const Z={};this.loadVTLayers();const ee=Ff(F);for(const oe of u)this.loadMatchingFeature(Z,x,E,oe,ee,M,B,H,g);return Z}hasLayer(u){for(const g of this.bucketLayerIDs)for(const x of g)if(u===x)return!0;return!1}getId(u,g){let x=u.id;return this.promoteId&&(x=u.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[g]],typeof x=="boolean"&&(x=Number(x))),x}}function lp(f,u,g,x,E){return ne(f,((F,M)=>{const B=u instanceof Uu?u.get(M):null;return B&&B.evaluate?B.evaluate(g,x,E):B}))}function kg(f){let u=1/0,g=1/0,x=-1/0,E=-1/0;for(const F of f)u=Math.min(u,F.x),g=Math.min(g,F.y),x=Math.max(x,F.x),E=Math.max(E,F.y);return{minX:u,minY:g,maxX:x,maxY:E}}function Bx(f,u){return u-f}function q0(f,u,g,x,E){const F=[];for(let M=0;M<f.length;M++){const B=f[M];let H;for(let Z=0;Z<B.length-1;Z++){let ee=B[Z],oe=B[Z+1];ee.x<u&&oe.x<u||(ee.x<u?ee=new v(u,ee.y+(u-ee.x)/(oe.x-ee.x)*(oe.y-ee.y))._round():oe.x<u&&(oe=new v(u,ee.y+(u-ee.x)/(oe.x-ee.x)*(oe.y-ee.y))._round()),ee.y<g&&oe.y<g||(ee.y<g?ee=new v(ee.x+(g-ee.y)/(oe.y-ee.y)*(oe.x-ee.x),g)._round():oe.y<g&&(oe=new v(ee.x+(g-ee.y)/(oe.y-ee.y)*(oe.x-ee.x),g)._round()),ee.x>=x&&oe.x>=x||(ee.x>=x?ee=new v(x,ee.y+(x-ee.x)/(oe.x-ee.x)*(oe.y-ee.y))._round():oe.x>=x&&(oe=new v(x,ee.y+(x-ee.x)/(oe.x-ee.x)*(oe.y-ee.y))._round()),ee.y>=E&&oe.y>=E||(ee.y>=E?ee=new v(ee.x+(E-ee.y)/(oe.y-ee.y)*(oe.x-ee.x),E)._round():oe.y>=E&&(oe=new v(ee.x+(E-ee.y)/(oe.y-ee.y)*(oe.x-ee.x),E)._round()),H&&ee.equals(H[H.length-1])||(H=[ee],F.push(H)),H.push(oe)))))}}return F}nn("FeatureIndex",U0,{omit:["rawTileData","sourceLayerCoder"]});class eu extends v{constructor(u,g,x,E){super(u,g),this.angle=x,E!==void 0&&(this.segment=E)}clone(){return new eu(this.x,this.y,this.angle,this.segment)}}function th(f,u,g,x,E){if(u.segment===void 0||g===0)return!0;let F=u,M=u.segment+1,B=0;for(;B>-g/2;){if(M--,M<0)return!1;B-=f[M].dist(F),F=f[M]}B+=f[M].dist(f[M+1]),M++;const H=[];let Z=0;for(;B<g/2;){const ee=f[M],oe=f[M+1];if(!oe)return!1;let de=f[M-1].angleTo(ee)-ee.angleTo(oe);for(de=Math.abs((de+3*Math.PI)%(2*Math.PI)-Math.PI),H.push({distance:B,angleDelta:de}),Z+=de;B-H[0].distance>x;)Z-=H.shift().angleDelta;if(Z>E)return!1;M++,B+=ee.dist(oe)}return!0}function sy(f){let u=0;for(let g=0;g<f.length-1;g++)u+=f[g].dist(f[g+1]);return u}function Pg(f,u,g){return f?.6*u*g:0}function ay(f,u){return Math.max(f?f.right-f.left:0,u?u.right-u.left:0)}function nh(f,u,g,x,E,F){const M=Pg(g,E,F),B=ay(g,x)*F;let H=0;const Z=sy(f)/2;for(let ee=0;ee<f.length-1;ee++){const oe=f[ee],de=f[ee+1],me=oe.dist(de);if(H+me>Z){const Ce=(Z-H)/me,we=Gn.number(oe.x,de.x,Ce),Be=Gn.number(oe.y,de.y,Ce),He=new eu(we,Be,de.angleTo(oe),ee);return He._round(),!M||th(f,He,B,M,u)?He:void 0}H+=me}}function Mc(f,u,g,x,E,F,M,B,H){const Z=Pg(x,F,M),ee=ay(x,E),oe=ee*M,de=f[0].x===0||f[0].x===H||f[0].y===0||f[0].y===H;return u-oe<u/4&&(u=oe+u/4),up(f,de?u/2*B%u:(ee/2+2*F)*M*B%u,u,Z,g,oe,de,!1,H)}function up(f,u,g,x,E,F,M,B,H){const Z=F/2,ee=sy(f);let oe=0,de=u-g,me=[];for(let Ce=0;Ce<f.length-1;Ce++){const we=f[Ce],Be=f[Ce+1],He=we.dist(Be),ht=Be.angleTo(we);for(;de+g<oe+He;){de+=g;const Qe=(de-oe)/He,et=Gn.number(we.x,Be.x,Qe),It=Gn.number(we.y,Be.y,Qe);if(et>=0&&et<H&&It>=0&&It<H&&de-Z>=0&&de+Z<=ee){const rn=new eu(et,It,ht,Ce);rn._round(),x&&!th(f,rn,F,x,E)||me.push(rn)}}oe+=He}return B||me.length||M||(me=up(f,oe/2,g,x,E,F,M,!0,H)),me}nn("Anchor",eu);const cp=Ei;function kv(f,u,g,x){const E=[],F=f.image,M=F.pixelRatio,B=F.paddedRect.w-2*cp,H=F.paddedRect.h-2*cp;let Z={x1:f.left,y1:f.top,x2:f.right,y2:f.bottom};const ee=F.stretchX||[[0,B]],oe=F.stretchY||[[0,H]],de=(Nt,In)=>Nt+In[1]-In[0],me=ee.reduce(de,0),Ce=oe.reduce(de,0),we=B-me,Be=H-Ce;let He=0,ht=me,Qe=0,et=Ce,It=0,rn=we,Rn=0,si=Be;if(F.content&&x){const Nt=F.content,In=Nt[2]-Nt[0],jn=Nt[3]-Nt[1];(F.textFitWidth||F.textFitHeight)&&(Z=_g(f)),He=Dg(ee,0,Nt[0]),Qe=Dg(oe,0,Nt[1]),ht=Dg(ee,Nt[0],Nt[2]),et=Dg(oe,Nt[1],Nt[3]),It=Nt[0]-He,Rn=Nt[1]-Qe,rn=In-ht,si=jn-et}const vn=Z.x1,_n=Z.y1,Vn=Z.x2-vn,On=Z.y2-_n,Mn=(Nt,In,jn,di)=>{const mr=Fg(Nt.stretch-He,ht,Vn,vn),jr=ly(Nt.fixed-It,rn,Nt.stretch,me),Ps=Fg(In.stretch-Qe,et,On,_n),Ws=ly(In.fixed-Rn,si,In.stretch,Ce),Us=Fg(jn.stretch-He,ht,Vn,vn),as=ly(jn.fixed-It,rn,jn.stretch,me),Na=Fg(di.stretch-Qe,et,On,_n),Ba=ly(di.fixed-Rn,si,di.stretch,Ce),Ga=new v(mr,Ps),sr=new v(Us,Ps),Pr=new v(Us,Na),xa=new v(mr,Na),qs=new v(jr/M,Ws/M),ms=new v(as/M,Ba/M),ns=u*Math.PI/180;if(ns){const ar=Math.sin(ns),Sr=Math.cos(ns),no=[Sr,-ar,ar,Sr];Ga._matMult(no),sr._matMult(no),xa._matMult(no),Pr._matMult(no)}const _l=Nt.stretch+Nt.fixed,nl=In.stretch+In.fixed;return{tl:Ga,tr:sr,bl:xa,br:Pr,tex:{x:F.paddedRect.x+cp+_l,y:F.paddedRect.y+cp+nl,w:jn.stretch+jn.fixed-_l,h:di.stretch+di.fixed-nl},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:qs,pixelOffsetBR:ms,minFontScaleX:rn/M/Vn,minFontScaleY:si/M/On,isSDF:g}};if(x&&(F.stretchX||F.stretchY)){const Nt=Pv(ee,we,me),In=Pv(oe,Be,Ce);for(let jn=0;jn<Nt.length-1;jn++){const di=Nt[jn],mr=Nt[jn+1];for(let jr=0;jr<In.length-1;jr++)E.push(Mn(di,In[jr],mr,In[jr+1]))}}else E.push(Mn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:B+1},{fixed:0,stretch:H+1}));return E}function Dg(f,u,g){let x=0;for(const E of f)x+=Math.max(u,Math.min(g,E[1]))-Math.max(u,Math.min(g,E[0]));return x}function Pv(f,u,g){const x=[{fixed:-cp,stretch:0}];for(const[E,F]of f){const M=x[x.length-1];x.push({fixed:E-M.stretch,stretch:M.stretch}),x.push({fixed:E-M.stretch,stretch:M.stretch+(F-E)})}return x.push({fixed:u+cp,stretch:g}),x}function Fg(f,u,g,x){return f/u*g+x}function ly(f,u,g,x){return f-u*g/x}class za{constructor(u,g,x,E,F,M,B,H,Z,ee){var oe;if(this.boxStartIndex=u.length,Z){let de=M.top,me=M.bottom;const Ce=M.collisionPadding;Ce&&(de-=Ce[1],me+=Ce[3]);let we=me-de;we>0&&(we=Math.max(10,we),this.circleDiameter=we)}else{const de=!((oe=M.image)===null||oe===void 0)&&oe.content&&(M.image.textFitWidth||M.image.textFitHeight)?_g(M):{x1:M.left,y1:M.top,x2:M.right,y2:M.bottom};de.y1=de.y1*B-H[0],de.y2=de.y2*B+H[2],de.x1=de.x1*B-H[3],de.x2=de.x2*B+H[1];const me=M.collisionPadding;if(me&&(de.x1-=me[0]*B,de.y1-=me[1]*B,de.x2+=me[2]*B,de.y2+=me[3]*B),ee){const Ce=new v(de.x1,de.y1),we=new v(de.x2,de.y1),Be=new v(de.x1,de.y2),He=new v(de.x2,de.y2),ht=ee*Math.PI/180;Ce._rotate(ht),we._rotate(ht),Be._rotate(ht),He._rotate(ht),de.x1=Math.min(Ce.x,we.x,Be.x,He.x),de.x2=Math.max(Ce.x,we.x,Be.x,He.x),de.y1=Math.min(Ce.y,we.y,Be.y,He.y),de.y2=Math.max(Ce.y,we.y,Be.y,He.y)}u.emplaceBack(g.x,g.y,de.x1,de.y1,de.x2,de.y2,x,E,F)}this.boxEndIndex=u.length}}class K0{constructor(u=[],g=((x,E)=>x<E?-1:x>E?1:0)){if(this.data=u,this.length=this.data.length,this.compare=g,this.length>0)for(let x=(this.length>>1)-1;x>=0;x--)this._down(x)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;const u=this.data[0],g=this.data.pop();return--this.length>0&&(this.data[0]=g,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:g,compare:x}=this,E=g[u];for(;u>0;){const F=u-1>>1,M=g[F];if(x(E,M)>=0)break;g[u]=M,u=F}g[u]=E}_down(u){const{data:g,compare:x}=this,E=this.length>>1,F=g[u];for(;u<E;){let M=1+(u<<1);const B=M+1;if(B<this.length&&x(g[B],g[M])<0&&(M=B),x(g[M],F)>=0)break;g[u]=g[M],u=M}g[u]=F}}function Z0(f,u=1,g=!1){let x=1/0,E=1/0,F=-1/0,M=-1/0;const B=f[0];for(let me=0;me<B.length;me++){const Ce=B[me];(!me||Ce.x<x)&&(x=Ce.x),(!me||Ce.y<E)&&(E=Ce.y),(!me||Ce.x>F)&&(F=Ce.x),(!me||Ce.y>M)&&(M=Ce.y)}const H=Math.min(F-x,M-E);let Z=H/2;const ee=new K0([],of);if(H===0)return new v(x,E);for(let me=x;me<F;me+=H)for(let Ce=E;Ce<M;Ce+=H)ee.push(new Ti(me+Z,Ce+Z,Z,f));let oe=(function(me){let Ce=0,we=0,Be=0;const He=me[0];for(let ht=0,Qe=He.length,et=Qe-1;ht<Qe;et=ht++){const It=He[ht],rn=He[et],Rn=It.x*rn.y-rn.x*It.y;we+=(It.x+rn.x)*Rn,Be+=(It.y+rn.y)*Rn,Ce+=3*Rn}return new Ti(we/Ce,Be/Ce,0,me)})(f),de=ee.length;for(;ee.length;){const me=ee.pop();(me.d>oe.d||!oe.d)&&(oe=me,g&&console.log("found best %d after %d probes",Math.round(1e4*me.d)/1e4,de)),me.max-oe.d<=u||(Z=me.h/2,ee.push(new Ti(me.p.x-Z,me.p.y-Z,Z,f)),ee.push(new Ti(me.p.x+Z,me.p.y-Z,Z,f)),ee.push(new Ti(me.p.x-Z,me.p.y+Z,Z,f)),ee.push(new Ti(me.p.x+Z,me.p.y+Z,Z,f)),de+=4)}return g&&(console.log(`num probes: ${de}`),console.log(`best distance: ${oe.d}`)),oe.p}function of(f,u){return u.max-f.max}function Ti(f,u,g,x){this.p=new v(f,u),this.h=g,this.d=(function(E,F){let M=!1,B=1/0;for(let H=0;H<F.length;H++){const Z=F[H];for(let ee=0,oe=Z.length,de=oe-1;ee<oe;de=ee++){const me=Z[ee],Ce=Z[de];me.y>E.y!=Ce.y>E.y&&E.x<(Ce.x-me.x)*(E.y-me.y)/(Ce.y-me.y)+me.x&&(M=!M),B=Math.min(B,Xy(E,me,Ce))}}return(M?1:-1)*Math.sqrt(B)})(this.p,x),this.max=this.d+this.h*Math.SQRT2}var ks;s.aq=void 0,(ks=s.aq||(s.aq={}))[ks.center=1]="center",ks[ks.left=2]="left",ks[ks.right=3]="right",ks[ks.top=4]="top",ks[ks.bottom=5]="bottom",ks[ks["top-left"]=6]="top-left",ks[ks["top-right"]=7]="top-right",ks[ks["bottom-left"]=8]="bottom-left",ks[ks["bottom-right"]=9]="bottom-right";const gs=7,es=Number.POSITIVE_INFINITY;function dp(f,u){return u[1]!==es?(function(g,x,E){let F=0,M=0;switch(x=Math.abs(x),E=Math.abs(E),g){case"top-right":case"top-left":case"top":M=E-gs;break;case"bottom-right":case"bottom-left":case"bottom":M=-E+gs}switch(g){case"top-right":case"bottom-right":case"right":F=-x;break;case"top-left":case"bottom-left":case"left":F=x}return[F,M]})(f,u[0],u[1]):(function(g,x){let E=0,F=0;x<0&&(x=0);const M=x/Math.SQRT2;switch(g){case"top-right":case"top-left":F=M-gs;break;case"bottom-right":case"bottom-left":F=-M+gs;break;case"bottom":F=-x+gs;break;case"top":F=x-gs}switch(g){case"top-right":case"bottom-right":E=-M;break;case"top-left":case"bottom-left":E=M;break;case"left":E=x;break;case"right":E=-x}return[E,F]})(f,u[0])}function yd(f,u,g){var x;const E=f.layout,F=(x=E.get("text-variable-anchor-offset"))===null||x===void 0?void 0:x.evaluate(u,{},g);if(F){const B=F.values,H=[];for(let Z=0;Z<B.length;Z+=2){const ee=H[Z]=B[Z],oe=B[Z+1].map((de=>de*Jo));ee.startsWith("top")?oe[1]-=gs:ee.startsWith("bottom")&&(oe[1]+=gs),H[Z+1]=oe}return new Js(H)}const M=E.get("text-variable-anchor");if(M){let B;B=f._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[E.get("text-radial-offset").evaluate(u,{},g)*Jo,es]:E.get("text-offset").evaluate(u,{},g).map((Z=>Z*Jo));const H=[];for(const Z of M)H.push(Z,dp(Z,B));return new Js(H)}return null}function uy(f){switch(f){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function yr(f,u,g,x,E,F,M,B,H,Z,ee){let oe=F.textMaxSize.evaluate(u,{});oe===void 0&&(oe=M);const de=f.layers[0].layout,me=de.get("icon-offset").evaluate(u,{},ee),Ce=Mg(g.horizontal),we=M/24,Be=f.tilePixelRatio*we,He=f.tilePixelRatio*oe/24,ht=f.tilePixelRatio*B,Qe=f.tilePixelRatio*de.get("symbol-spacing"),et=de.get("text-padding")*f.tilePixelRatio,It=(function(Nt,In,jn,di=1){const mr=Nt.get("icon-padding").evaluate(In,{},jn),jr=mr&&mr.values;return[jr[0]*di,jr[1]*di,jr[2]*di,jr[3]*di]})(de,u,ee,f.tilePixelRatio),rn=de.get("text-max-angle")/180*Math.PI,Rn=de.get("text-rotation-alignment")!=="viewport"&&de.get("symbol-placement")!=="point",si=de.get("icon-rotation-alignment")==="map"&&de.get("symbol-placement")!=="point",vn=de.get("symbol-placement"),_n=Qe/2,Vn=de.get("icon-text-fit");let On;x&&Vn!=="none"&&(f.allowVerticalPlacement&&g.vertical&&(On=md(x,g.vertical,Vn,de.get("icon-text-fit-padding"),me,we)),Ce&&(x=md(x,Ce,Vn,de.get("icon-text-fit-padding"),me,we)));const Mn=(Nt,In)=>{In.x<0||In.x>=Oo||In.y<0||In.y>=Oo||(function(jn,di,mr,jr,Ps,Ws,Us,as,Na,Ba,Ga,sr,Pr,xa,qs,ms,ns,_l,nl,ar,Sr,no,wa,vo,vd){const Sl=jn.addToLineVertexArray(di,mr);let nc,tu,nu,Ds,El=0,sf=0,Y0=0,Ng=0,pp=-1,gp=-1;const Ic={};let af=od("");if(jn.allowVerticalPlacement&&jr.vertical){const na=as.layout.get("text-rotate").evaluate(Sr,{},vo)+90;nu=new za(Na,di,Ba,Ga,sr,jr.vertical,Pr,xa,qs,na),Us&&(Ds=new za(Na,di,Ba,Ga,sr,Us,ns,_l,qs,na))}if(Ps){const na=as.layout.get("icon-rotate").evaluate(Sr,{}),il=as.layout.get("icon-text-fit")!=="none",Rl=kv(Ps,na,wa,il),ia=Us?kv(Us,na,wa,il):void 0;tu=new za(Na,di,Ba,Ga,sr,Ps,ns,_l,!1,na),El=4*Rl.length;const Al=jn.iconSizeData;let Tl=null;Al.kind==="source"?(Tl=[va*as.layout.get("icon-size").evaluate(Sr,{})],Tl[0]>Jl&&ce(`${jn.layerIds[0]}: Value for "icon-size" is >= ${Qo}. Reduce your "icon-size".`)):Al.kind==="composite"&&(Tl=[va*no.compositeIconSizes[0].evaluate(Sr,{},vo),va*no.compositeIconSizes[1].evaluate(Sr,{},vo)],(Tl[0]>Jl||Tl[1]>Jl)&&ce(`${jn.layerIds[0]}: Value for "icon-size" is >= ${Qo}. Reduce your "icon-size".`)),jn.addSymbols(jn.icon,Rl,Tl,ar,nl,Sr,s.ah.none,di,Sl.lineStartIndex,Sl.lineLength,-1,vo),pp=jn.icon.placedSymbolArray.length-1,ia&&(sf=4*ia.length,jn.addSymbols(jn.icon,ia,Tl,ar,nl,Sr,s.ah.vertical,di,Sl.lineStartIndex,Sl.lineLength,-1,vo),gp=jn.icon.placedSymbolArray.length-1)}const X0=Object.keys(jr.horizontal);for(const na of X0){const il=jr.horizontal[na];if(!nc){af=od(il.text);const ia=as.layout.get("text-rotate").evaluate(Sr,{},vo);nc=new za(Na,di,Ba,Ga,sr,il,Pr,xa,qs,ia)}const Rl=il.positionedLines.length===1;if(Y0+=cy(jn,di,il,Ws,as,qs,Sr,ms,Sl,jr.vertical?s.ah.horizontal:s.ah.horizontalOnly,Rl?X0:[na],Ic,pp,no,vo),Rl)break}jr.vertical&&(Ng+=cy(jn,di,jr.vertical,Ws,as,qs,Sr,ms,Sl,s.ah.vertical,["vertical"],Ic,gp,no,vo));const J0=nc?nc.boxStartIndex:jn.collisionBoxArray.length,Q0=nc?nc.boxEndIndex:jn.collisionBoxArray.length,eb=nu?nu.boxStartIndex:jn.collisionBoxArray.length,tb=nu?nu.boxEndIndex:jn.collisionBoxArray.length,Fv=tu?tu.boxStartIndex:jn.collisionBoxArray.length,nb=tu?tu.boxEndIndex:jn.collisionBoxArray.length,ib=Ds?Ds.boxStartIndex:jn.collisionBoxArray.length,hy=Ds?Ds.boxEndIndex:jn.collisionBoxArray.length;let ic=-1;const fy=(na,il)=>na&&na.circleDiameter?Math.max(na.circleDiameter,il):il;ic=fy(nc,ic),ic=fy(nu,ic),ic=fy(tu,ic),ic=fy(Ds,ic);const py=ic>-1?1:0;py&&(ic*=vd/Jo),jn.glyphOffsetArray.length>=Qh.MAX_GLYPHS&&ce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Sr.sortKey!==void 0&&jn.addToSortKeyRanges(jn.symbolInstances.length,Sr.sortKey);const Mv=yd(as,Sr,vo),[gy,Iv]=(function(na,il){const Rl=na.length,ia=il==null?void 0:il.values;if((ia==null?void 0:ia.length)>0)for(let Al=0;Al<ia.length;Al+=2){const Tl=ia[Al+1];na.emplaceBack(s.aq[ia[Al]],Tl[0],Tl[1])}return[Rl,na.length]})(jn.textAnchorOffsets,Mv);jn.symbolInstances.emplaceBack(di.x,di.y,Ic.right>=0?Ic.right:-1,Ic.center>=0?Ic.center:-1,Ic.left>=0?Ic.left:-1,Ic.vertical||-1,pp,gp,af,J0,Q0,eb,tb,Fv,nb,ib,hy,Ba,Y0,Ng,El,sf,py,0,Pr,ic,gy,Iv)})(f,In,Nt,g,x,E,On,f.layers[0],f.collisionBoxArray,u.index,u.sourceLayerIndex,f.index,Be,[et,et,et,et],Rn,H,ht,It,si,me,u,F,Z,ee,M)};if(vn==="line")for(const Nt of q0(u.geometry,0,0,Oo,Oo)){const In=Mc(Nt,Qe,rn,g.vertical||Ce,x,24,He,f.overscaling,Oo);for(const jn of In)Ce&&Dv(f,Ce.text,_n,jn)||Mn(Nt,jn)}else if(vn==="line-center"){for(const Nt of u.geometry)if(Nt.length>1){const In=nh(Nt,rn,g.vertical||Ce,x,24,He);In&&Mn(Nt,In)}}else if(u.type==="Polygon")for(const Nt of Jr(u.geometry,0)){const In=Z0(Nt,16);Mn(Nt[0],new eu(In.x,In.y,0))}else if(u.type==="LineString")for(const Nt of u.geometry)Mn(Nt,new eu(Nt[0].x,Nt[0].y,0));else if(u.type==="Point")for(const Nt of u.geometry)for(const In of Nt)Mn([In],new eu(In.x,In.y,0))}function cy(f,u,g,x,E,F,M,B,H,Z,ee,oe,de,me,Ce){const we=(function(ht,Qe,et,It,rn,Rn,si,vn){const _n=It.layout.get("text-rotate").evaluate(Rn,{})*Math.PI/180,Vn=[];for(const On of Qe.positionedLines)for(const Mn of On.positionedGlyphs){if(!Mn.rect)continue;const Nt=Mn.rect||{};let In=Lr+1,jn=!0,di=1,mr=0;const jr=(rn||vn)&&Mn.vertical,Ps=Mn.metrics.advance*Mn.scale/2;if(vn&&Qe.verticalizable&&(mr=On.lineOffset/2-(Mn.imageName?-(Jo-Mn.metrics.width*Mn.scale)/2:(Mn.scale-1)*Jo)),Mn.imageName){const ar=si[Mn.imageName];jn=ar.sdf,di=ar.pixelRatio,In=Ei/di}const Ws=rn?[Mn.x+Ps,Mn.y]:[0,0];let Us=rn?[0,0]:[Mn.x+Ps+et[0],Mn.y+et[1]-mr],as=[0,0];jr&&(as=Us,Us=[0,0]);const Na=Mn.metrics.isDoubleResolution?2:1,Ba=(Mn.metrics.left-In)*Mn.scale-Ps+Us[0],Ga=(-Mn.metrics.top-In)*Mn.scale+Us[1],sr=Ba+Nt.w/Na*Mn.scale/di,Pr=Ga+Nt.h/Na*Mn.scale/di,xa=new v(Ba,Ga),qs=new v(sr,Ga),ms=new v(Ba,Pr),ns=new v(sr,Pr);if(jr){const ar=new v(-Ps,Ps-_u),Sr=-Math.PI/2,no=Jo/2-Ps,wa=new v(5-_u-no,-(Mn.imageName?no:0)),vo=new v(...as);xa._rotateAround(Sr,ar)._add(wa)._add(vo),qs._rotateAround(Sr,ar)._add(wa)._add(vo),ms._rotateAround(Sr,ar)._add(wa)._add(vo),ns._rotateAround(Sr,ar)._add(wa)._add(vo)}if(_n){const ar=Math.sin(_n),Sr=Math.cos(_n),no=[Sr,-ar,ar,Sr];xa._matMult(no),qs._matMult(no),ms._matMult(no),ns._matMult(no)}const _l=new v(0,0),nl=new v(0,0);Vn.push({tl:xa,tr:qs,bl:ms,br:ns,tex:Nt,writingMode:Qe.writingMode,glyphOffset:Ws,sectionIndex:Mn.sectionIndex,isSDF:jn,pixelOffsetTL:_l,pixelOffsetBR:nl,minFontScaleX:0,minFontScaleY:0})}return Vn})(0,g,B,E,F,M,x,f.allowVerticalPlacement),Be=f.textSizeData;let He=null;Be.kind==="source"?(He=[va*E.layout.get("text-size").evaluate(M,{})],He[0]>Jl&&ce(`${f.layerIds[0]}: Value for "text-size" is >= ${Qo}. Reduce your "text-size".`)):Be.kind==="composite"&&(He=[va*me.compositeTextSizes[0].evaluate(M,{},Ce),va*me.compositeTextSizes[1].evaluate(M,{},Ce)],(He[0]>Jl||He[1]>Jl)&&ce(`${f.layerIds[0]}: Value for "text-size" is >= ${Qo}. Reduce your "text-size".`)),f.addSymbols(f.text,we,He,B,F,M,Z,u,H.lineStartIndex,H.lineLength,de,Ce);for(const ht of ee)oe[ht]=f.text.placedSymbolArray.length-1;return 4*we.length}function Mg(f){for(const u in f)return f[u];return null}function Dv(f,u,g,x){const E=f.compareText;if(u in E){const F=E[u];for(let M=F.length-1;M>=0;M--)if(x.dist(F[M])<g)return!0}else E[u]=[];return E[u].push(x),!1}const Ig=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Lg{static from(u){if(!(u instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[g,x]=new Uint8Array(u,0,2);if(g!==219)throw new Error("Data does not appear to be in a KDBush format.");const E=x>>4;if(E!==1)throw new Error(`Got v${E} data when expected v1.`);const F=Ig[15&x];if(!F)throw new Error("Unrecognized array type.");const[M]=new Uint16Array(u,2,1),[B]=new Uint32Array(u,4,1);return new Lg(B,M,F,u)}constructor(u,g=64,x=Float64Array,E){if(isNaN(u)||u<0)throw new Error(`Unpexpected numItems value: ${u}.`);this.numItems=+u,this.nodeSize=Math.min(Math.max(+g,2),65535),this.ArrayType=x,this.IndexArrayType=u<65536?Uint16Array:Uint32Array;const F=Ig.indexOf(this.ArrayType),M=2*u*this.ArrayType.BYTES_PER_ELEMENT,B=u*this.IndexArrayType.BYTES_PER_ELEMENT,H=(8-B%8)%8;if(F<0)throw new Error(`Unexpected typed array class: ${x}.`);E&&E instanceof ArrayBuffer?(this.data=E,this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+B+H,2*u),this._pos=2*u,this._finished=!0):(this.data=new ArrayBuffer(8+M+B+H),this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+B+H,2*u),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+F]),new Uint16Array(this.data,2,1)[0]=g,new Uint32Array(this.data,4,1)[0]=u)}add(u,g){const x=this._pos>>1;return this.ids[x]=x,this.coords[this._pos++]=u,this.coords[this._pos++]=g,x}finish(){const u=this._pos>>1;if(u!==this.numItems)throw new Error(`Added ${u} items when expected ${this.numItems}.`);return tl(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(u,g,x,E){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:F,coords:M,nodeSize:B}=this,H=[0,F.length-1,0],Z=[];for(;H.length;){const ee=H.pop()||0,oe=H.pop()||0,de=H.pop()||0;if(oe-de<=B){for(let Be=de;Be<=oe;Be++){const He=M[2*Be],ht=M[2*Be+1];He>=u&&He<=x&&ht>=g&&ht<=E&&Z.push(F[Be])}continue}const me=de+oe>>1,Ce=M[2*me],we=M[2*me+1];Ce>=u&&Ce<=x&&we>=g&&we<=E&&Z.push(F[me]),(ee===0?u<=Ce:g<=we)&&(H.push(de),H.push(me-1),H.push(1-ee)),(ee===0?x>=Ce:E>=we)&&(H.push(me+1),H.push(oe),H.push(1-ee))}return Z}within(u,g,x){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:E,coords:F,nodeSize:M}=this,B=[0,E.length-1,0],H=[],Z=x*x;for(;B.length;){const ee=B.pop()||0,oe=B.pop()||0,de=B.pop()||0;if(oe-de<=M){for(let Be=de;Be<=oe;Be++)ts(F[2*Be],F[2*Be+1],u,g)<=Z&&H.push(E[Be]);continue}const me=de+oe>>1,Ce=F[2*me],we=F[2*me+1];ts(Ce,we,u,g)<=Z&&H.push(E[me]),(ee===0?u-x<=Ce:g-x<=we)&&(B.push(de),B.push(me-1),B.push(1-ee)),(ee===0?u+x>=Ce:g+x>=we)&&(B.push(me+1),B.push(oe),B.push(1-ee))}return H}}function tl(f,u,g,x,E,F){if(E-x<=g)return;const M=x+E>>1;hp(f,u,M,x,E,F),tl(f,u,g,x,M-1,1-F),tl(f,u,g,M+1,E,1-F)}function hp(f,u,g,x,E,F){for(;E>x;){if(E-x>600){const Z=E-x+1,ee=g-x+1,oe=Math.log(Z),de=.5*Math.exp(2*oe/3),me=.5*Math.sqrt(oe*de*(Z-de)/Z)*(ee-Z/2<0?-1:1);hp(f,u,g,Math.max(x,Math.floor(g-ee*de/Z+me)),Math.min(E,Math.floor(g+(Z-ee)*de/Z+me)),F)}const M=u[2*g+F];let B=x,H=E;for(ih(f,u,x,g),u[2*E+F]>M&&ih(f,u,x,E);B<H;){for(ih(f,u,B,H),B++,H--;u[2*B+F]<M;)B++;for(;u[2*H+F]>M;)H--}u[2*x+F]===M?ih(f,u,x,H):(H++,ih(f,u,H,E)),H<=g&&(x=H+1),g<=H&&(E=H-1)}}function ih(f,u,g,x){To(f,g,x),To(u,2*g,2*x),To(u,2*g+1,2*x+1)}function To(f,u,g){const x=f[u];f[u]=f[g],f[g]=x}function ts(f,u,g,x){const E=f-g,F=u-x;return E*E+F*F}var dy;s.bg=void 0,(dy=s.bg||(s.bg={})).create="create",dy.load="load",dy.fullLoad="fullLoad";let Og=null,fp=[];const Ur=1e3/60,zg="loadTime",$s="fullLoadTime",Gx={mark(f){performance.mark(f)},frame(f){const u=f;Og!=null&&fp.push(u-Og),Og=u},clearMetrics(){Og=null,fp=[],performance.clearMeasures(zg),performance.clearMeasures($s);for(const f in s.bg)performance.clearMarks(s.bg[f])},getPerformanceMetrics(){performance.measure(zg,s.bg.create,s.bg.load),performance.measure($s,s.bg.create,s.bg.fullLoad);const f=performance.getEntriesByName(zg)[0].duration,u=performance.getEntriesByName($s)[0].duration,g=fp.length,x=1/(fp.reduce(((F,M)=>F+M),0)/g/1e3),E=fp.filter((F=>F>Ur)).reduce(((F,M)=>F+(M-Ur)/Ur),0);return{loadTime:f,fullLoadTime:u,fps:x,percentDroppedFrames:E/(g+E)*100,totalFrames:g}}};s.$=class extends ae{},s.A=ud,s.B=Of,s.C=function(f){if(fe==null){const u=f.navigator?f.navigator.userAgent:null;fe=!!f.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return fe},s.D=zn,s.E=$t,s.F=class{constructor(f,u){this.target=f,this.mapId=u,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Nx((()=>this.process())),this.subscription=(function(g,x,E,F){return g.addEventListener(x,E,!1),{unsubscribe:()=>{g.removeEventListener(x,E,!1)}}})(this.target,"message",(g=>this.receive(g))),this.globalScope=Te(self)?f:window}registerMessageHandler(f,u){this.messageHandlers[f]=u}sendAsync(f,u){return new Promise(((g,x)=>{const E=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[E]={resolve:g,reject:x},u&&u.signal.addEventListener("abort",(()=>{delete this.resolveRejects[E];const B={id:E,type:"<cancel>",origin:location.origin,targetMapId:f.targetMapId,sourceMapId:this.mapId};this.target.postMessage(B)}),{once:!0});const F=[],M=Object.assign(Object.assign({},f),{id:E,sourceMapId:this.mapId,origin:location.origin,data:Ka(f.data,F)});this.target.postMessage(M,{transfer:F})}))}receive(f){const u=f.data,g=u.id;if(!(u.origin!=="file://"&&location.origin!=="file://"&&u.origin!=="resource://android"&&location.origin!=="resource://android"&&u.origin!==location.origin||u.targetMapId&&this.mapId!==u.targetMapId)){if(u.type==="<cancel>"){delete this.tasks[g];const x=this.abortControllers[g];return delete this.abortControllers[g],void(x&&x.abort())}if(Te(self)||u.mustQueue)return this.tasks[g]=u,this.taskQueue.push(g),void this.invoker.trigger();this.processTask(g,u)}}process(){if(this.taskQueue.length===0)return;const f=this.taskQueue.shift(),u=this.tasks[f];delete this.tasks[f],this.taskQueue.length>0&&this.invoker.trigger(),u&&this.processTask(f,u)}processTask(f,u){return a(this,void 0,void 0,(function*(){if(u.type==="<response>"){const E=this.resolveRejects[f];return delete this.resolveRejects[f],E?void(u.error?E.reject(mu(u.error)):E.resolve(mu(u.data))):void 0}if(!this.messageHandlers[u.type])return void this.completeTask(f,new Error(`Could not find a registered handler for ${u.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const g=mu(u.data),x=new AbortController;this.abortControllers[f]=x;try{const E=yield this.messageHandlers[u.type](u.sourceMapId,g,x);this.completeTask(f,null,E)}catch(E){this.completeTask(f,E)}}))}completeTask(f,u,g){const x=[];delete this.abortControllers[f];const E={id:f,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:u?Ka(u):null,data:Ka(g,x)};this.target.postMessage(E,{transfer:x})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},s.G=Vt,s.H=function(){var f=new ud(16);return ud!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0),f[0]=1,f[5]=1,f[10]=1,f[15]=1,f},s.I=gr,s.J=function(f,u,g){var x,E,F,M,B,H,Z,ee,oe,de,me,Ce,we=g[0],Be=g[1],He=g[2];return u===f?(f[12]=u[0]*we+u[4]*Be+u[8]*He+u[12],f[13]=u[1]*we+u[5]*Be+u[9]*He+u[13],f[14]=u[2]*we+u[6]*Be+u[10]*He+u[14],f[15]=u[3]*we+u[7]*Be+u[11]*He+u[15]):(E=u[1],F=u[2],M=u[3],B=u[4],H=u[5],Z=u[6],ee=u[7],oe=u[8],de=u[9],me=u[10],Ce=u[11],f[0]=x=u[0],f[1]=E,f[2]=F,f[3]=M,f[4]=B,f[5]=H,f[6]=Z,f[7]=ee,f[8]=oe,f[9]=de,f[10]=me,f[11]=Ce,f[12]=x*we+B*Be+oe*He+u[12],f[13]=E*we+H*Be+de*He+u[13],f[14]=F*we+Z*Be+me*He+u[14],f[15]=M*we+ee*Be+Ce*He+u[15]),f},s.K=function(f,u,g){var x=g[0],E=g[1],F=g[2];return f[0]=u[0]*x,f[1]=u[1]*x,f[2]=u[2]*x,f[3]=u[3]*x,f[4]=u[4]*E,f[5]=u[5]*E,f[6]=u[6]*E,f[7]=u[7]*E,f[8]=u[8]*F,f[9]=u[9]*F,f[10]=u[10]*F,f[11]=u[11]*F,f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15],f},s.L=Ma,s.M=function(f,u){const g={};for(let x=0;x<u.length;x++){const E=u[x];E in f&&(g[E]=f[E])}return g},s.N=eh,s.O=tf,s.P=v,s.Q=Tg,s.R=Ja,s.S=ba,s.T=Bf,s.U=$,s.V=U,s.W=De,s.X=Oo,s.Y=G,s.Z=nf,s._=a,s.a=yt,s.a$=function(f,u){var g=f[0],x=f[1],E=f[2],F=f[3],M=f[4],B=f[5],H=f[6],Z=f[7],ee=f[8],oe=f[9],de=f[10],me=f[11],Ce=f[12],we=f[13],Be=f[14],He=f[15],ht=u[0],Qe=u[1],et=u[2],It=u[3],rn=u[4],Rn=u[5],si=u[6],vn=u[7],_n=u[8],Vn=u[9],On=u[10],Mn=u[11],Nt=u[12],In=u[13],jn=u[14],di=u[15];return Math.abs(g-ht)<=ya*Math.max(1,Math.abs(g),Math.abs(ht))&&Math.abs(x-Qe)<=ya*Math.max(1,Math.abs(x),Math.abs(Qe))&&Math.abs(E-et)<=ya*Math.max(1,Math.abs(E),Math.abs(et))&&Math.abs(F-It)<=ya*Math.max(1,Math.abs(F),Math.abs(It))&&Math.abs(M-rn)<=ya*Math.max(1,Math.abs(M),Math.abs(rn))&&Math.abs(B-Rn)<=ya*Math.max(1,Math.abs(B),Math.abs(Rn))&&Math.abs(H-si)<=ya*Math.max(1,Math.abs(H),Math.abs(si))&&Math.abs(Z-vn)<=ya*Math.max(1,Math.abs(Z),Math.abs(vn))&&Math.abs(ee-_n)<=ya*Math.max(1,Math.abs(ee),Math.abs(_n))&&Math.abs(oe-Vn)<=ya*Math.max(1,Math.abs(oe),Math.abs(Vn))&&Math.abs(de-On)<=ya*Math.max(1,Math.abs(de),Math.abs(On))&&Math.abs(me-Mn)<=ya*Math.max(1,Math.abs(me),Math.abs(Mn))&&Math.abs(Ce-Nt)<=ya*Math.max(1,Math.abs(Ce),Math.abs(Nt))&&Math.abs(we-In)<=ya*Math.max(1,Math.abs(we),Math.abs(In))&&Math.abs(Be-jn)<=ya*Math.max(1,Math.abs(Be),Math.abs(jn))&&Math.abs(He-di)<=ya*Math.max(1,Math.abs(He),Math.abs(di))},s.a0=Hi,s.a1=ap,s.a2=Tt,s.a3=f=>{const u=window.document.createElement("video");return u.muted=!0,new Promise((g=>{u.onloadstart=()=>{g(u)};for(const x of f){const E=window.document.createElement("source");Lt(x)||(u.crossOrigin="Anonymous"),E.src=x,u.appendChild(E)}}))},s.a4=function(){return J++},s.a5=cn,s.a6=Qh,s.a7=Ff,s.a8=Ya,s.a9=oy,s.aA=function(f){if(f.type==="custom")return new Ev(f);switch(f.type){case"background":return new Ag(f);case"circle":return new Vm(f);case"fill":return new F0(f);case"fill-extrusion":return new Yf(f);case"heatmap":return new ag(f);case"hillshade":return new Wd(f);case"line":return new N0(f);case"raster":return new ey(f);case"symbol":return new op(f)}},s.aB=ue,s.aC=function(f,u){if(!f)return[{command:"setStyle",args:[u]}];let g=[];try{if(!dn(f.version,u.version))return[{command:"setStyle",args:[u]}];dn(f.center,u.center)||g.push({command:"setCenter",args:[u.center]}),dn(f.zoom,u.zoom)||g.push({command:"setZoom",args:[u.zoom]}),dn(f.bearing,u.bearing)||g.push({command:"setBearing",args:[u.bearing]}),dn(f.pitch,u.pitch)||g.push({command:"setPitch",args:[u.pitch]}),dn(f.sprite,u.sprite)||g.push({command:"setSprite",args:[u.sprite]}),dn(f.glyphs,u.glyphs)||g.push({command:"setGlyphs",args:[u.glyphs]}),dn(f.transition,u.transition)||g.push({command:"setTransition",args:[u.transition]}),dn(f.light,u.light)||g.push({command:"setLight",args:[u.light]}),dn(f.terrain,u.terrain)||g.push({command:"setTerrain",args:[u.terrain]}),dn(f.sky,u.sky)||g.push({command:"setSky",args:[u.sky]}),dn(f.projection,u.projection)||g.push({command:"setProjection",args:[u.projection]});const x={},E=[];(function(M,B,H,Z){let ee;for(ee in B=B||{},M=M||{})Object.prototype.hasOwnProperty.call(M,ee)&&(Object.prototype.hasOwnProperty.call(B,ee)||ai(ee,H,Z));for(ee in B)Object.prototype.hasOwnProperty.call(B,ee)&&(Object.prototype.hasOwnProperty.call(M,ee)?dn(M[ee],B[ee])||(M[ee].type==="geojson"&&B[ee].type==="geojson"&&ri(M,B,ee)?An(H,{command:"setGeoJSONSourceData",args:[ee,B[ee].data]}):Gi(ee,B,H,Z)):Cn(ee,B,H))})(f.sources,u.sources,E,x);const F=[];f.layers&&f.layers.forEach((M=>{"source"in M&&x[M.source]?g.push({command:"removeLayer",args:[M.id]}):F.push(M)})),g=g.concat(E),(function(M,B,H){B=B||[];const Z=(M=M||[]).map(Si),ee=B.map(Si),oe=M.reduce(lr,{}),de=B.reduce(lr,{}),me=Z.slice(),Ce=Object.create(null);let we,Be,He,ht,Qe;for(let et=0,It=0;et<Z.length;et++)we=Z[et],Object.prototype.hasOwnProperty.call(de,we)?It++:(An(H,{command:"removeLayer",args:[we]}),me.splice(me.indexOf(we,It),1));for(let et=0,It=0;et<ee.length;et++)we=ee[ee.length-1-et],me[me.length-1-et]!==we&&(Object.prototype.hasOwnProperty.call(oe,we)?(An(H,{command:"removeLayer",args:[we]}),me.splice(me.lastIndexOf(we,me.length-It),1)):It++,ht=me[me.length-et],An(H,{command:"addLayer",args:[de[we],ht]}),me.splice(me.length-et,0,we),Ce[we]=!0);for(let et=0;et<ee.length;et++)if(we=ee[et],Be=oe[we],He=de[we],!Ce[we]&&!dn(Be,He))if(dn(Be.source,He.source)&&dn(Be["source-layer"],He["source-layer"])&&dn(Be.type,He.type)){for(Qe in ji(Be.layout,He.layout,H,we,null,"setLayoutProperty"),ji(Be.paint,He.paint,H,we,null,"setPaintProperty"),dn(Be.filter,He.filter)||An(H,{command:"setFilter",args:[we,He.filter]}),dn(Be.minzoom,He.minzoom)&&dn(Be.maxzoom,He.maxzoom)||An(H,{command:"setLayerZoomRange",args:[we,He.minzoom,He.maxzoom]}),Be)Object.prototype.hasOwnProperty.call(Be,Qe)&&Qe!=="layout"&&Qe!=="paint"&&Qe!=="filter"&&Qe!=="metadata"&&Qe!=="minzoom"&&Qe!=="maxzoom"&&(Qe.indexOf("paint.")===0?ji(Be[Qe],He[Qe],H,we,Qe.slice(6),"setPaintProperty"):dn(Be[Qe],He[Qe])||An(H,{command:"setLayerProperty",args:[we,Qe,He[Qe]]}));for(Qe in He)Object.prototype.hasOwnProperty.call(He,Qe)&&!Object.prototype.hasOwnProperty.call(Be,Qe)&&Qe!=="layout"&&Qe!=="paint"&&Qe!=="filter"&&Qe!=="metadata"&&Qe!=="minzoom"&&Qe!=="maxzoom"&&(Qe.indexOf("paint.")===0?ji(Be[Qe],He[Qe],H,we,Qe.slice(6),"setPaintProperty"):dn(Be[Qe],He[Qe])||An(H,{command:"setLayerProperty",args:[we,Qe,He[Qe]]}))}else An(H,{command:"removeLayer",args:[we]}),ht=me[me.lastIndexOf(we)+1],An(H,{command:"addLayer",args:[He,ht]})})(F,u.layers,g)}catch(x){console.warn("Unable to compute style diff:",x),g=[{command:"setStyle",args:[u]}]}return g},s.aD=function(f){const u=[],g=f.id;return g===void 0&&u.push({message:`layers.${g}: missing required property "id"`}),f.render===void 0&&u.push({message:`layers.${g}: missing required method "render"`}),f.renderingMode&&f.renderingMode!=="2d"&&f.renderingMode!=="3d"&&u.push({message:`layers.${g}: property "renderingMode" must be either "2d" or "3d"`}),u},s.aE=function f(u,g){if(Array.isArray(u)){if(!Array.isArray(g)||u.length!==g.length)return!1;for(let x=0;x<u.length;x++)if(!f(u[x],g[x]))return!1;return!0}if(typeof u=="object"&&u!==null&&g!==null){if(typeof g!="object"||Object.keys(u).length!==Object.keys(g).length)return!1;for(const x in u)if(!f(u[x],g[x]))return!1;return!0}return u===g},s.aF=ne,s.aG=be,s.aH=class extends wu{constructor(f,u){super(f,u),this.current=0}set(f){this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}},s.aI=sd,s.aJ=class extends wu{constructor(f,u){super(f,u),this.current=Yu}set(f){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let u=1;u<16;u++)if(f[u]!==this.current[u]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}},s.aK=Hh,s.aL=zm,s.aM=er,s.aN=class extends wu{constructor(f,u){super(f,u),this.current=[0,0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2]))}},s.aO=class extends wu{constructor(f,u){super(f,u),this.current=[0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1]))}},s.aP=function(f,u,g,x,E,F,M){var B=1/(u-g),H=1/(x-E),Z=1/(F-M);return f[0]=-2*B,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*H,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*Z,f[11]=0,f[12]=(u+g)*B,f[13]=(E+x)*H,f[14]=(M+F)*Z,f[15]=1,f},s.aQ=T0,s.aR=class extends tt{},s.aS=bl,s.aT=class extends gt{},s.aU=$d,s.aV=function(f){return f<=1?1:Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))},s.aW=Uh,s.aX=to,s.aY=ma,s.aZ=class extends kn{},s.a_=function(f,u){return f[0]===u[0]&&f[1]===u[1]&&f[2]===u[2]&&f[3]===u[3]&&f[4]===u[4]&&f[5]===u[5]&&f[6]===u[6]&&f[7]===u[7]&&f[8]===u[8]&&f[9]===u[9]&&f[10]===u[10]&&f[11]===u[11]&&f[12]===u[12]&&f[13]===u[13]&&f[14]===u[14]&&f[15]===u[15]},s.aa=function(f){const u={};if(f.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((g,x,E,F)=>{const M=E||F;return u[x]=!M||M.toLowerCase(),""})),u["max-age"]){const g=parseInt(u["max-age"],10);isNaN(g)?delete u["max-age"]:u["max-age"]=g}return u},s.ab=function(f,u){const g=[];for(const x in f)x in u||g.push(x);return g},s.ac=q,s.ad=function(f,u,g){var x=Math.sin(g),E=Math.cos(g),F=u[0],M=u[1],B=u[2],H=u[3],Z=u[4],ee=u[5],oe=u[6],de=u[7];return u!==f&&(f[8]=u[8],f[9]=u[9],f[10]=u[10],f[11]=u[11],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[0]=F*E+Z*x,f[1]=M*E+ee*x,f[2]=B*E+oe*x,f[3]=H*E+de*x,f[4]=Z*E-F*x,f[5]=ee*E-M*x,f[6]=oe*E-B*x,f[7]=de*E-H*x,f},s.ae=function(f){var u=new ud(16);return u[0]=f[0],u[1]=f[1],u[2]=f[2],u[3]=f[3],u[4]=f[4],u[5]=f[5],u[6]=f[6],u[7]=f[7],u[8]=f[8],u[9]=f[9],u[10]=f[10],u[11]=f[11],u[12]=f[12],u[13]=f[13],u[14]=f[14],u[15]=f[15],u},s.af=rg,s.ag=function(f,u){let g=0,x=0;if(f.kind==="constant")x=f.layoutSize;else if(f.kind!=="source"){const{interpolationType:E,minZoom:F,maxZoom:M}=f,B=E?q(Ut.interpolationFactor(E,u,F,M),0,1):0;f.kind==="camera"?x=Gn.number(f.minSize,f.maxSize,B):g=B}return{uSizeT:g,uSize:x}},s.ai=function(f,{uSize:u,uSizeT:g},{lowerSize:x,upperSize:E}){return f.kind==="source"?x/va:f.kind==="composite"?Gn.number(x/va,E/va,g):u},s.aj=Eg,s.ak=function(f,u,g,x){const E=u.y-f.y,F=u.x-f.x,M=x.y-g.y,B=x.x-g.x,H=M*F-B*E;if(H===0)return null;const Z=(B*(f.y-g.y)-M*(f.x-g.x))/H;return new v(f.x+Z*F,f.y+Z*E)},s.al=q0,s.am=Hf,s.an=ig,s.ao=function(f){let u=1/0,g=1/0,x=-1/0,E=-1/0;for(const F of f)u=Math.min(u,F.x),g=Math.min(g,F.y),x=Math.max(x,F.x),E=Math.max(E,F.y);return[u,g,x,E]},s.ap=Jo,s.ar=Sg,s.as=function(f,u){var g=u[0],x=u[1],E=u[2],F=u[3],M=u[4],B=u[5],H=u[6],Z=u[7],ee=u[8],oe=u[9],de=u[10],me=u[11],Ce=u[12],we=u[13],Be=u[14],He=u[15],ht=g*B-x*M,Qe=g*H-E*M,et=g*Z-F*M,It=x*H-E*B,rn=x*Z-F*B,Rn=E*Z-F*H,si=ee*we-oe*Ce,vn=ee*Be-de*Ce,_n=ee*He-me*Ce,Vn=oe*Be-de*we,On=oe*He-me*we,Mn=de*He-me*Be,Nt=ht*Mn-Qe*On+et*Vn+It*_n-rn*vn+Rn*si;return Nt?(f[0]=(B*Mn-H*On+Z*Vn)*(Nt=1/Nt),f[1]=(E*On-x*Mn-F*Vn)*Nt,f[2]=(we*Rn-Be*rn+He*It)*Nt,f[3]=(de*rn-oe*Rn-me*It)*Nt,f[4]=(H*_n-M*Mn-Z*vn)*Nt,f[5]=(g*Mn-E*_n+F*vn)*Nt,f[6]=(Be*et-Ce*Rn-He*Qe)*Nt,f[7]=(ee*Rn-de*et+me*Qe)*Nt,f[8]=(M*On-B*_n+Z*si)*Nt,f[9]=(x*_n-g*On-F*si)*Nt,f[10]=(Ce*rn-we*et+He*ht)*Nt,f[11]=(oe*et-ee*rn-me*ht)*Nt,f[12]=(B*vn-M*Vn-H*si)*Nt,f[13]=(g*Vn-x*vn+E*si)*Nt,f[14]=(we*Qe-Ce*It-Be*ht)*Nt,f[15]=(ee*It-oe*Qe+de*ht)*Nt,f):null},s.at=uy,s.au=Xh,s.av=Lg,s.aw=function(){const f={},u=Pe.$version;for(const g in Pe.$root){const x=Pe.$root[g];if(x.required){let E=null;E=g==="version"?u:x.type==="array"?[]:{},E!=null&&(f[g]=E)}}return f},s.ax=Cc,s.ay=en,s.az=function(f){f=f.slice();const u=Object.create(null);for(let g=0;g<f.length;g++)u[f[g].id]=f[g];for(let g=0;g<f.length;g++)"ref"in f[g]&&(f[g]=wn(f[g],u[f[g].ref]));return f},s.b=he,s.b0=function(f,u){return f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[4]=u[4],f[5]=u[5],f[6]=u[6],f[7]=u[7],f[8]=u[8],f[9]=u[9],f[10]=u[10],f[11]=u[11],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15],f},s.b1=function(f,u,g){return f[0]=u[0]*g[0],f[1]=u[1]*g[1],f[2]=u[2]*g[2],f[3]=u[3]*g[3],f},s.b2=function(f,u){return f[0]*u[0]+f[1]*u[1]+f[2]*u[2]+f[3]*u[3]},s.b3=ie,s.b4=iy,s.b5=sp,s.b6=function(f,u,g,x,E){var F,M=1/Math.tan(u/2);return f[0]=M/g,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=M,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,E!=null&&E!==1/0?(f[10]=(E+x)*(F=1/(x-E)),f[14]=2*E*x*F):(f[10]=-1,f[14]=-2*x),f},s.b7=function(f,u,g){var x=Math.sin(g),E=Math.cos(g),F=u[4],M=u[5],B=u[6],H=u[7],Z=u[8],ee=u[9],oe=u[10],de=u[11];return u!==f&&(f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[4]=F*E+Z*x,f[5]=M*E+ee*x,f[6]=B*E+oe*x,f[7]=H*E+de*x,f[8]=Z*E-F*x,f[9]=ee*E-M*x,f[10]=oe*E-B*x,f[11]=de*E-H*x,f},s.b8=Y,s.b9=X,s.bA=yv,s.bB=function(f){return f.message===Le},s.bC=Ci,s.bD=hs,s.ba=function(f){return f*Math.PI/180},s.bb=function(f,u){const{x:g,y:x}=nf.fromLngLat(u);return!(f<0||f>25||x<0||x>=1||g<0||g>=1)},s.bc=function(f,u){return f[0]=u[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=u[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=u[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},s.bd=class extends te{},s.be=Rv,s.bf=Gx,s.bh=Xt,s.bi=function(f,u){yt.REGISTERED_PROTOCOLS[f]=u},s.bj=function(f){delete yt.REGISTERED_PROTOCOLS[f]},s.bk=function(f,u){const g={};for(let E=0;E<f.length;E++){const F=u&&u[f[E].id]||Wa(f[E]);u&&(u[f[E].id]=F);let M=g[F];M||(M=g[F]=[]),M.push(f[E])}const x=[];for(const E in g)x.push(g[E]);return x},s.bl=nn,s.bm=Wr,s.bn=U0,s.bo=$r,s.bp=function(f){f.bucket.createArrays(),f.bucket.tilePixelRatio=Oo/(512*f.bucket.overscaling),f.bucket.compareText={},f.bucket.iconsNeedLinear=!1;const u=f.bucket.layers[0],g=u.layout,x=u._unevaluatedLayout._values,E={layoutIconSize:x["icon-size"].possiblyEvaluate(new qi(f.bucket.zoom+1),f.canonical),layoutTextSize:x["text-size"].possiblyEvaluate(new qi(f.bucket.zoom+1),f.canonical),textMaxSize:x["text-size"].possiblyEvaluate(new qi(18))};if(f.bucket.textSizeData.kind==="composite"){const{minZoom:Z,maxZoom:ee}=f.bucket.textSizeData;E.compositeTextSizes=[x["text-size"].possiblyEvaluate(new qi(Z),f.canonical),x["text-size"].possiblyEvaluate(new qi(ee),f.canonical)]}if(f.bucket.iconSizeData.kind==="composite"){const{minZoom:Z,maxZoom:ee}=f.bucket.iconSizeData;E.compositeIconSizes=[x["icon-size"].possiblyEvaluate(new qi(Z),f.canonical),x["icon-size"].possiblyEvaluate(new qi(ee),f.canonical)]}const F=g.get("text-line-height")*Jo,M=g.get("text-rotation-alignment")!=="viewport"&&g.get("symbol-placement")!=="point",B=g.get("text-keep-upright"),H=g.get("text-size");for(const Z of f.bucket.features){const ee=g.get("text-font").evaluate(Z,{},f.canonical).join(","),oe=H.evaluate(Z,{},f.canonical),de=E.layoutTextSize.evaluate(Z,{},f.canonical),me=E.layoutIconSize.evaluate(Z,{},f.canonical),Ce={horizontal:{},vertical:void 0},we=Z.text;let Be,He=[0,0];if(we){const et=we.toString(),It=g.get("text-letter-spacing").evaluate(Z,{},f.canonical)*Jo,rn=_c(et)?It:0,Rn=g.get("text-anchor").evaluate(Z,{},f.canonical),si=yd(u,Z,f.canonical);if(!si){const On=g.get("text-radial-offset").evaluate(Z,{},f.canonical);He=On?dp(Rn,[On*Jo,es]):g.get("text-offset").evaluate(Z,{},f.canonical).map((Mn=>Mn*Jo))}let vn=M?"center":g.get("text-justify").evaluate(Z,{},f.canonical);const _n=g.get("symbol-placement")==="point"?g.get("text-max-width").evaluate(Z,{},f.canonical)*Jo:1/0,Vn=()=>{f.bucket.allowVerticalPlacement&&Se(et)&&(Ce.vertical=wl(we,f.glyphMap,f.glyphPositions,f.imagePositions,ee,_n,F,Rn,"left",rn,He,s.ah.vertical,!0,de,oe))};if(!M&&si){const On=new Set;if(vn==="auto")for(let Nt=0;Nt<si.values.length;Nt+=2)On.add(uy(si.values[Nt]));else On.add(vn);let Mn=!1;for(const Nt of On)if(!Ce.horizontal[Nt])if(Mn)Ce.horizontal[Nt]=Ce.horizontal[0];else{const In=wl(we,f.glyphMap,f.glyphPositions,f.imagePositions,ee,_n,F,"center",Nt,rn,He,s.ah.horizontal,!1,de,oe);In&&(Ce.horizontal[Nt]=In,Mn=In.positionedLines.length===1)}Vn()}else{vn==="auto"&&(vn=uy(Rn));const On=wl(we,f.glyphMap,f.glyphPositions,f.imagePositions,ee,_n,F,Rn,vn,rn,He,s.ah.horizontal,!1,de,oe);On&&(Ce.horizontal[vn]=On),Vn(),Se(et)&&M&&B&&(Ce.vertical=wl(we,f.glyphMap,f.glyphPositions,f.imagePositions,ee,_n,F,Rn,vn,rn,He,s.ah.vertical,!1,de,oe))}}let ht=!1;if(Z.icon&&Z.icon.name){const et=f.imageMap[Z.icon.name];et&&(Be=Jh(f.imagePositions[Z.icon.name],g.get("icon-offset").evaluate(Z,{},f.canonical),g.get("icon-anchor").evaluate(Z,{},f.canonical)),ht=!!et.sdf,f.bucket.sdfIcons===void 0?f.bucket.sdfIcons=ht:f.bucket.sdfIcons!==ht&&ce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(et.pixelRatio!==f.bucket.pixelRatio||g.get("icon-rotate").constantOr(1)!==0)&&(f.bucket.iconsNeedLinear=!0))}const Qe=Mg(Ce.horizontal)||Ce.vertical;f.bucket.iconsInText=!!Qe&&Qe.iconsInText,(Qe||Be)&&yr(f.bucket,Z,Ce,Be,f.imageMap,E,de,me,He,ht,f.canonical)}f.showCollisionBoxes&&f.bucket.generateCollisionDebugBuffers()},s.bq=mg,s.br=qf,s.bs=Kh,s.bt=Xo,s.bu=Xm,s.bv=class{constructor(f){this._marks={start:[f.url,"start"].join("#"),end:[f.url,"end"].join("#"),measure:f.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let f=performance.getEntriesByName(this._marks.measure);return f.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),f=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),f}},s.bw=function(f,u,g,x,E){return a(this,void 0,void 0,(function*(){if(U())try{return yield De(f,u,g,x,E)}catch{}return(function(F,M,B,H,Z){const ee=F.width,oe=F.height;Ye&&_e||(Ye=new OffscreenCanvas(ee,oe),_e=Ye.getContext("2d",{willReadFrequently:!0})),Ye.width=ee,Ye.height=oe,_e.drawImage(F,0,0,ee,oe);const de=_e.getImageData(M,B,H,Z);return _e.clearRect(0,0,ee,oe),de.data})(f,u,g,x,E)}))},s.bx=ry,s.by=d,s.bz=h,s.c=Oe,s.d=f=>a(void 0,void 0,void 0,(function*(){if(f.byteLength===0)return createImageBitmap(new ImageData(1,1));const u=new Blob([new Uint8Array(f)],{type:"image/png"});try{return createImageBitmap(u)}catch(g){throw new Error(`Could not load image because of ${g.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),s.e=re,s.f=f=>new Promise(((u,g)=>{const x=new Image;x.onload=()=>{u(x),URL.revokeObjectURL(x.src),x.onload=null,window.requestAnimationFrame((()=>{x.src=Re}))},x.onerror=()=>g(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const E=new Blob([new Uint8Array(f)],{type:"image/png"});x.src=f.byteLength?URL.createObjectURL(E):Re})),s.g=xt,s.h=(f,u)=>it(re(f,{type:"json"}),u),s.i=Te,s.j=Mt,s.k=Tn,s.l=(f,u)=>it(re(f,{type:"arrayBuffer"}),u),s.m=it,s.n=function(f){return new Xm(f).readFields(j0,[])},s.o=sg,s.p=lo,s.q=D,s.r=qa,s.s=Lt,s.t=wc,s.u=Ss,s.v=Pe,s.w=ce,s.x=function([f,u,g]){return u+=90,u*=Math.PI/180,g*=Math.PI/180,{x:f*Math.cos(u)*Math.sin(g),y:f*Math.sin(u)*Math.sin(g),z:f*Math.cos(g)}},s.y=Gn,s.z=qi})),r("worker",["./shared"],(function(s){class a{constructor(pe){this.keyCache={},pe&&this.replace(pe)}replace(pe){this._layerConfigs={},this._layers={},this.update(pe,[])}update(pe,ge){for(const Ne of pe){this._layerConfigs[Ne.id]=Ne;const Je=this._layers[Ne.id]=s.aA(Ne);Je._featureFilter=s.a7(Je.filter),this.keyCache[Ne.id]&&delete this.keyCache[Ne.id]}for(const Ne of ge)delete this.keyCache[Ne],delete this._layerConfigs[Ne],delete this._layers[Ne];this.familiesBySource={};const ke=s.bk(Object.values(this._layerConfigs),this.keyCache);for(const Ne of ke){const Je=Ne.map((Ct=>this._layers[Ct.id])),nt=Je[0];if(nt.visibility==="none")continue;const ct=nt.source||"";let Ue=this.familiesBySource[ct];Ue||(Ue=this.familiesBySource[ct]={});const Pt=nt.sourceLayer||"_geojsonTileLayer";let Zt=Ue[Pt];Zt||(Zt=Ue[Pt]=[]),Zt.push(Je)}}}class d{constructor(pe){const ge={},ke=[];for(const ct in pe){const Ue=pe[ct],Pt=ge[ct]={};for(const Zt in Ue){const Ct=Ue[+Zt];if(!Ct||Ct.bitmap.width===0||Ct.bitmap.height===0)continue;const pn={x:0,y:0,w:Ct.bitmap.width+2,h:Ct.bitmap.height+2};ke.push(pn),Pt[Zt]={rect:pn,metrics:Ct.metrics}}}const{w:Ne,h:Je}=s.p(ke),nt=new s.o({width:Ne||1,height:Je||1});for(const ct in pe){const Ue=pe[ct];for(const Pt in Ue){const Zt=Ue[+Pt];if(!Zt||Zt.bitmap.width===0||Zt.bitmap.height===0)continue;const Ct=ge[ct][Pt].rect;s.o.copy(Zt.bitmap,nt,{x:0,y:0},{x:Ct.x+1,y:Ct.y+1},Zt.bitmap)}}this.image=nt,this.positions=ge}}s.bl("GlyphAtlas",d);class h{constructor(pe){this.tileID=new s.S(pe.tileID.overscaledZ,pe.tileID.wrap,pe.tileID.canonical.z,pe.tileID.canonical.x,pe.tileID.canonical.y),this.uid=pe.uid,this.zoom=pe.zoom,this.pixelRatio=pe.pixelRatio,this.tileSize=pe.tileSize,this.source=pe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=pe.showCollisionBoxes,this.collectResourceTiming=!!pe.collectResourceTiming,this.returnDependencies=!!pe.returnDependencies,this.promoteId=pe.promoteId,this.inFlightDependencies=[]}parse(pe,ge,ke,Ne){return s._(this,void 0,void 0,(function*(){this.status="parsing",this.data=pe,this.collisionBoxArray=new s.a5;const Je=new s.bm(Object.keys(pe.layers).sort()),nt=new s.bn(this.tileID,this.promoteId);nt.bucketLayerIDs=[];const ct={},Ue={featureIndex:nt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ke},Pt=ge.familiesBySource[this.source];for(const Li in Pt){const xr=pe.layers[Li];if(!xr)continue;xr.version===1&&s.w(`Vector tile source "${this.source}" layer "${Li}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const wr=Je.encode(Li),No=[];for(let io=0;io<xr.length;io++){const Xr=xr.feature(io),dl=nt.getId(Xr,Li);No.push({feature:Xr,id:dl,index:io,sourceLayerIndex:wr})}for(const io of Pt[Li]){const Xr=io[0];Xr.source!==this.source&&s.w(`layer.source = ${Xr.source} does not equal this.source = ${this.source}`),Xr.minzoom&&this.zoom<Math.floor(Xr.minzoom)||Xr.maxzoom&&this.zoom>=Xr.maxzoom||Xr.visibility!=="none"&&(m(io,this.zoom,ke),(ct[Xr.id]=Xr.createBucket({index:nt.bucketLayerIDs.length,layers:io,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:wr,sourceID:this.source})).populate(No,Ue,this.tileID.canonical),nt.bucketLayerIDs.push(io.map((dl=>dl.id))))}}const Zt=s.aF(Ue.glyphDependencies,(Li=>Object.keys(Li).map(Number)));this.inFlightDependencies.forEach((Li=>Li==null?void 0:Li.abort())),this.inFlightDependencies=[];let Ct=Promise.resolve({});if(Object.keys(Zt).length){const Li=new AbortController;this.inFlightDependencies.push(Li),Ct=Ne.sendAsync({type:"GG",data:{stacks:Zt,source:this.source,tileID:this.tileID,type:"glyphs"}},Li)}const pn=Object.keys(Ue.iconDependencies);let $n=Promise.resolve({});if(pn.length){const Li=new AbortController;this.inFlightDependencies.push(Li),$n=Ne.sendAsync({type:"GI",data:{icons:pn,source:this.source,tileID:this.tileID,type:"icons"}},Li)}const Qn=Object.keys(Ue.patternDependencies);let Ii=Promise.resolve({});if(Qn.length){const Li=new AbortController;this.inFlightDependencies.push(Li),Ii=Ne.sendAsync({type:"GI",data:{icons:Qn,source:this.source,tileID:this.tileID,type:"patterns"}},Li)}const[Wn,xi,Fi]=yield Promise.all([Ct,$n,Ii]),co=new d(Wn),Rr=new s.bo(xi,Fi);for(const Li in ct){const xr=ct[Li];xr instanceof s.a6?(m(xr.layers,this.zoom,ke),s.bp({bucket:xr,glyphMap:Wn,glyphPositions:co.positions,imageMap:xi,imagePositions:Rr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):xr.hasPattern&&(xr instanceof s.bq||xr instanceof s.br||xr instanceof s.bs)&&(m(xr.layers,this.zoom,ke),xr.addFeatures(Ue,this.tileID.canonical,Rr.patternPositions))}return this.status="done",{buckets:Object.values(ct).filter((Li=>!Li.isEmpty())),featureIndex:nt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:co.image,imageAtlas:Rr,glyphMap:this.returnDependencies?Wn:null,iconMap:this.returnDependencies?xi:null,glyphPositions:this.returnDependencies?co.positions:null}}))}}function m(je,pe,ge){const ke=new s.z(pe);for(const Ne of je)Ne.recalculate(ke,ge)}class v{constructor(pe,ge,ke){this.actor=pe,this.layerIndex=ge,this.availableImages=ke,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(pe,ge){return s._(this,void 0,void 0,(function*(){const ke=yield s.l(pe.request,ge);try{return{vectorTile:new s.bt.VectorTile(new s.bu(ke.data)),rawData:ke.data,cacheControl:ke.cacheControl,expires:ke.expires}}catch(Ne){const Je=new Uint8Array(ke.data);let nt=`Unable to parse the tile at ${pe.request.url}, `;throw nt+=Je[0]===31&&Je[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ne.message}`,new Error(nt)}}))}loadTile(pe){return s._(this,void 0,void 0,(function*(){const ge=pe.uid,ke=!!(pe&&pe.request&&pe.request.collectResourceTiming)&&new s.bv(pe.request),Ne=new h(pe);this.loading[ge]=Ne;const Je=new AbortController;Ne.abort=Je;try{const nt=yield this.loadVectorTile(pe,Je);if(delete this.loading[ge],!nt)return null;const ct=nt.rawData,Ue={};nt.expires&&(Ue.expires=nt.expires),nt.cacheControl&&(Ue.cacheControl=nt.cacheControl);const Pt={};if(ke){const Ct=ke.finish();Ct&&(Pt.resourceTiming=JSON.parse(JSON.stringify(Ct)))}Ne.vectorTile=nt.vectorTile;const Zt=Ne.parse(nt.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[ge]=Ne,this.fetching[ge]={rawTileData:ct,cacheControl:Ue,resourceTiming:Pt};try{const Ct=yield Zt;return s.e({rawTileData:ct.slice(0)},Ct,Ue,Pt)}finally{delete this.fetching[ge]}}catch(nt){throw delete this.loading[ge],Ne.status="done",this.loaded[ge]=Ne,nt}}))}reloadTile(pe){return s._(this,void 0,void 0,(function*(){const ge=pe.uid;if(!this.loaded||!this.loaded[ge])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ke=this.loaded[ge];if(ke.showCollisionBoxes=pe.showCollisionBoxes,ke.status==="parsing"){const Ne=yield ke.parse(ke.vectorTile,this.layerIndex,this.availableImages,this.actor);let Je;if(this.fetching[ge]){const{rawTileData:nt,cacheControl:ct,resourceTiming:Ue}=this.fetching[ge];delete this.fetching[ge],Je=s.e({rawTileData:nt.slice(0)},Ne,ct,Ue)}else Je=Ne;return Je}if(ke.status==="done"&&ke.vectorTile)return ke.parse(ke.vectorTile,this.layerIndex,this.availableImages,this.actor)}))}abortTile(pe){return s._(this,void 0,void 0,(function*(){const ge=this.loading,ke=pe.uid;ge&&ge[ke]&&ge[ke].abort&&(ge[ke].abort.abort(),delete ge[ke])}))}removeTile(pe){return s._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[pe.uid]&&delete this.loaded[pe.uid]}))}}class w{constructor(){this.loaded={}}loadTile(pe){return s._(this,void 0,void 0,(function*(){const{uid:ge,encoding:ke,rawImageData:Ne,redFactor:Je,greenFactor:nt,blueFactor:ct,baseShift:Ue}=pe,Pt=Ne.width+2,Zt=Ne.height+2,Ct=s.b(Ne)?new s.R({width:Pt,height:Zt},yield s.bw(Ne,-1,-1,Pt,Zt)):Ne,pn=new s.bx(ge,Ct,ke,Je,nt,ct,Ue);return this.loaded=this.loaded||{},this.loaded[ge]=pn,pn}))}removeTile(pe){const ge=this.loaded,ke=pe.uid;ge&&ge[ke]&&delete ge[ke]}}function R(je,pe){if(je.length!==0){L(je[0],pe);for(var ge=1;ge<je.length;ge++)L(je[ge],!pe)}}function L(je,pe){for(var ge=0,ke=0,Ne=0,Je=je.length,nt=Je-1;Ne<Je;nt=Ne++){var ct=(je[Ne][0]-je[nt][0])*(je[nt][1]+je[Ne][1]),Ue=ge+ct;ke+=Math.abs(ge)>=Math.abs(ct)?ge-Ue+ct:ct-Ue+ge,ge=Ue}ge+ke>=0!=!!pe&&je.reverse()}var O=s.by((function je(pe,ge){var ke,Ne=pe&&pe.type;if(Ne==="FeatureCollection")for(ke=0;ke<pe.features.length;ke++)je(pe.features[ke],ge);else if(Ne==="GeometryCollection")for(ke=0;ke<pe.geometries.length;ke++)je(pe.geometries[ke],ge);else if(Ne==="Feature")je(pe.geometry,ge);else if(Ne==="Polygon")R(pe.coordinates,ge);else if(Ne==="MultiPolygon")for(ke=0;ke<pe.coordinates.length;ke++)R(pe.coordinates[ke],ge);return pe}));const z=s.bt.VectorTileFeature.prototype.toGeoJSON;var $={exports:{}},U=s.bz,Y=s.bt.VectorTileFeature,X=q;function q(je,pe){this.options=pe||{},this.features=je,this.length=je.length}function ie(je,pe){this.id=typeof je.id=="number"?je.id:void 0,this.type=je.type,this.rawGeometry=je.type===1?[je.geometry]:je.geometry,this.properties=je.tags,this.extent=pe||4096}q.prototype.feature=function(je){return new ie(this.features[je],this.options.extent)},ie.prototype.loadGeometry=function(){var je=this.rawGeometry;this.geometry=[];for(var pe=0;pe<je.length;pe++){for(var ge=je[pe],ke=[],Ne=0;Ne<ge.length;Ne++)ke.push(new U(ge[Ne][0],ge[Ne][1]));this.geometry.push(ke)}return this.geometry},ie.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var je=this.geometry,pe=1/0,ge=-1/0,ke=1/0,Ne=-1/0,Je=0;Je<je.length;Je++)for(var nt=je[Je],ct=0;ct<nt.length;ct++){var Ue=nt[ct];pe=Math.min(pe,Ue.x),ge=Math.max(ge,Ue.x),ke=Math.min(ke,Ue.y),Ne=Math.max(Ne,Ue.y)}return[pe,ke,ge,Ne]},ie.prototype.toGeoJSON=Y.prototype.toGeoJSON;var re=s.bA,J=X;function ne(je){var pe=new re;return(function(ge,ke){for(var Ne in ge.layers)ke.writeMessage(3,be,ge.layers[Ne])})(je,pe),pe.finish()}function be(je,pe){var ge;pe.writeVarintField(15,je.version||1),pe.writeStringField(1,je.name||""),pe.writeVarintField(5,je.extent||4096);var ke={keys:[],values:[],keycache:{},valuecache:{}};for(ge=0;ge<je.length;ge++)ke.feature=je.feature(ge),pe.writeMessage(2,ue,ke);var Ne=ke.keys;for(ge=0;ge<Ne.length;ge++)pe.writeStringField(3,Ne[ge]);var Je=ke.values;for(ge=0;ge<Je.length;ge++)pe.writeMessage(4,fe,Je[ge])}function ue(je,pe){var ge=je.feature;ge.id!==void 0&&pe.writeVarintField(1,ge.id),pe.writeMessage(2,ve,je),pe.writeVarintField(3,ge.type),pe.writeMessage(4,Te,ge)}function ve(je,pe){var ge=je.feature,ke=je.keys,Ne=je.values,Je=je.keycache,nt=je.valuecache;for(var ct in ge.properties){var Ue=ge.properties[ct],Pt=Je[ct];if(Ue!==null){Pt===void 0&&(ke.push(ct),Je[ct]=Pt=ke.length-1),pe.writeVarint(Pt);var Zt=typeof Ue;Zt!=="string"&&Zt!=="boolean"&&Zt!=="number"&&(Ue=JSON.stringify(Ue));var Ct=Zt+":"+Ue,pn=nt[Ct];pn===void 0&&(Ne.push(Ue),nt[Ct]=pn=Ne.length-1),pe.writeVarint(pn)}}}function ce(je,pe){return(pe<<3)+(7&je)}function Ie(je){return je<<1^je>>31}function Te(je,pe){for(var ge=je.loadGeometry(),ke=je.type,Ne=0,Je=0,nt=ge.length,ct=0;ct<nt;ct++){var Ue=ge[ct],Pt=1;ke===1&&(Pt=Ue.length),pe.writeVarint(ce(1,Pt));for(var Zt=ke===3?Ue.length-1:Ue.length,Ct=0;Ct<Zt;Ct++){Ct===1&&ke!==1&&pe.writeVarint(ce(2,Zt-1));var pn=Ue[Ct].x-Ne,$n=Ue[Ct].y-Je;pe.writeVarint(Ie(pn)),pe.writeVarint(Ie($n)),Ne+=pn,Je+=$n}ke===3&&pe.writeVarint(ce(7,1))}}function fe(je,pe){var ge=typeof je;ge==="string"?pe.writeStringField(1,je):ge==="boolean"?pe.writeBooleanField(7,je):ge==="number"&&(je%1!=0?pe.writeDoubleField(3,je):je<0?pe.writeSVarintField(6,je):pe.writeVarintField(5,je))}$.exports=ne,$.exports.fromVectorTileJs=ne,$.exports.fromGeojsonVt=function(je,pe){pe=pe||{};var ge={};for(var ke in je)ge[ke]=new J(je[ke].features,pe),ge[ke].name=ke,ge[ke].version=pe.version,ge[ke].extent=pe.extent;return ne({layers:ge})},$.exports.GeoJSONWrapper=J;var he=s.by($.exports);const Re={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:je=>je},De=Math.fround||(Ye=new Float32Array(1),je=>(Ye[0]=+je,Ye[0]));var Ye;const _e=3,Le=5,Oe=6;class yt{constructor(pe){this.options=Object.assign(Object.create(Re),pe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(pe){const{log:ge,minZoom:ke,maxZoom:Ne}=this.options;ge&&console.time("total time");const Je=`prepare ${pe.length} points`;ge&&console.time(Je),this.points=pe;const nt=[];for(let Ue=0;Ue<pe.length;Ue++){const Pt=pe[Ue];if(!Pt.geometry)continue;const[Zt,Ct]=Pt.geometry.coordinates,pn=De(Xt(Zt)),$n=De(en(Ct));nt.push(pn,$n,1/0,Ue,-1,1),this.options.reduce&&nt.push(0)}let ct=this.trees[Ne+1]=this._createTree(nt);ge&&console.timeEnd(Je);for(let Ue=Ne;Ue>=ke;Ue--){const Pt=+Date.now();ct=this.trees[Ue]=this._createTree(this._cluster(ct,Ue)),ge&&console.log("z%d: %d clusters in %dms",Ue,ct.numItems,+Date.now()-Pt)}return ge&&console.timeEnd("total time"),this}getClusters(pe,ge){let ke=((pe[0]+180)%360+360)%360-180;const Ne=Math.max(-90,Math.min(90,pe[1]));let Je=pe[2]===180?180:((pe[2]+180)%360+360)%360-180;const nt=Math.max(-90,Math.min(90,pe[3]));if(pe[2]-pe[0]>=360)ke=-180,Je=180;else if(ke>Je){const Ct=this.getClusters([ke,Ne,180,nt],ge),pn=this.getClusters([-180,Ne,Je,nt],ge);return Ct.concat(pn)}const ct=this.trees[this._limitZoom(ge)],Ue=ct.range(Xt(ke),en(nt),Xt(Je),en(Ne)),Pt=ct.data,Zt=[];for(const Ct of Ue){const pn=this.stride*Ct;Zt.push(Pt[pn+Le]>1?xt(Pt,pn,this.clusterProps):this.points[Pt[pn+_e]])}return Zt}getChildren(pe){const ge=this._getOriginId(pe),ke=this._getOriginZoom(pe),Ne="No cluster with the specified id.",Je=this.trees[ke];if(!Je)throw new Error(Ne);const nt=Je.data;if(ge*this.stride>=nt.length)throw new Error(Ne);const ct=this.options.radius/(this.options.extent*Math.pow(2,ke-1)),Ue=Je.within(nt[ge*this.stride],nt[ge*this.stride+1],ct),Pt=[];for(const Zt of Ue){const Ct=Zt*this.stride;nt[Ct+4]===pe&&Pt.push(nt[Ct+Le]>1?xt(nt,Ct,this.clusterProps):this.points[nt[Ct+_e]])}if(Pt.length===0)throw new Error(Ne);return Pt}getLeaves(pe,ge,ke){const Ne=[];return this._appendLeaves(Ne,pe,ge=ge||10,ke=ke||0,0),Ne}getTile(pe,ge,ke){const Ne=this.trees[this._limitZoom(pe)],Je=Math.pow(2,pe),{extent:nt,radius:ct}=this.options,Ue=ct/nt,Pt=(ke-Ue)/Je,Zt=(ke+1+Ue)/Je,Ct={features:[]};return this._addTileFeatures(Ne.range((ge-Ue)/Je,Pt,(ge+1+Ue)/Je,Zt),Ne.data,ge,ke,Je,Ct),ge===0&&this._addTileFeatures(Ne.range(1-Ue/Je,Pt,1,Zt),Ne.data,Je,ke,Je,Ct),ge===Je-1&&this._addTileFeatures(Ne.range(0,Pt,Ue/Je,Zt),Ne.data,-1,ke,Je,Ct),Ct.features.length?Ct:null}getClusterExpansionZoom(pe){let ge=this._getOriginZoom(pe)-1;for(;ge<=this.options.maxZoom;){const ke=this.getChildren(pe);if(ge++,ke.length!==1)break;pe=ke[0].properties.cluster_id}return ge}_appendLeaves(pe,ge,ke,Ne,Je){const nt=this.getChildren(ge);for(const ct of nt){const Ue=ct.properties;if(Ue&&Ue.cluster?Je+Ue.point_count<=Ne?Je+=Ue.point_count:Je=this._appendLeaves(pe,Ue.cluster_id,ke,Ne,Je):Je<Ne?Je++:pe.push(ct),pe.length===ke)break}return Je}_createTree(pe){const ge=new s.av(pe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ke=0;ke<pe.length;ke+=this.stride)ge.add(pe[ke],pe[ke+1]);return ge.finish(),ge.data=pe,ge}_addTileFeatures(pe,ge,ke,Ne,Je,nt){for(const ct of pe){const Ue=ct*this.stride,Pt=ge[Ue+Le]>1;let Zt,Ct,pn;if(Pt)Zt=Vt(ge,Ue,this.clusterProps),Ct=ge[Ue],pn=ge[Ue+1];else{const Ii=this.points[ge[Ue+_e]];Zt=Ii.properties;const[Wn,xi]=Ii.geometry.coordinates;Ct=Xt(Wn),pn=en(xi)}const $n={type:1,geometry:[[Math.round(this.options.extent*(Ct*Je-ke)),Math.round(this.options.extent*(pn*Je-Ne))]],tags:Zt};let Qn;Qn=Pt||this.options.generateId?ge[Ue+_e]:this.points[ge[Ue+_e]].id,Qn!==void 0&&($n.id=Qn),nt.features.push($n)}}_limitZoom(pe){return Math.max(this.options.minZoom,Math.min(Math.floor(+pe),this.options.maxZoom+1))}_cluster(pe,ge){const{radius:ke,extent:Ne,reduce:Je,minPoints:nt}=this.options,ct=ke/(Ne*Math.pow(2,ge)),Ue=pe.data,Pt=[],Zt=this.stride;for(let Ct=0;Ct<Ue.length;Ct+=Zt){if(Ue[Ct+2]<=ge)continue;Ue[Ct+2]=ge;const pn=Ue[Ct],$n=Ue[Ct+1],Qn=pe.within(Ue[Ct],Ue[Ct+1],ct),Ii=Ue[Ct+Le];let Wn=Ii;for(const xi of Qn){const Fi=xi*Zt;Ue[Fi+2]>ge&&(Wn+=Ue[Fi+Le])}if(Wn>Ii&&Wn>=nt){let xi,Fi=pn*Ii,co=$n*Ii,Rr=-1;const Li=((Ct/Zt|0)<<5)+(ge+1)+this.points.length;for(const xr of Qn){const wr=xr*Zt;if(Ue[wr+2]<=ge)continue;Ue[wr+2]=ge;const No=Ue[wr+Le];Fi+=Ue[wr]*No,co+=Ue[wr+1]*No,Ue[wr+4]=Li,Je&&(xi||(xi=this._map(Ue,Ct,!0),Rr=this.clusterProps.length,this.clusterProps.push(xi)),Je(xi,this._map(Ue,wr)))}Ue[Ct+4]=Li,Pt.push(Fi/Wn,co/Wn,1/0,Li,-1,Wn),Je&&Pt.push(Rr)}else{for(let xi=0;xi<Zt;xi++)Pt.push(Ue[Ct+xi]);if(Wn>1)for(const xi of Qn){const Fi=xi*Zt;if(!(Ue[Fi+2]<=ge)){Ue[Fi+2]=ge;for(let co=0;co<Zt;co++)Pt.push(Ue[Fi+co])}}}}return Pt}_getOriginId(pe){return pe-this.points.length>>5}_getOriginZoom(pe){return(pe-this.points.length)%32}_map(pe,ge,ke){if(pe[ge+Le]>1){const nt=this.clusterProps[pe[ge+Oe]];return ke?Object.assign({},nt):nt}const Ne=this.points[pe[ge+_e]].properties,Je=this.options.map(Ne);return ke&&Je===Ne?Object.assign({},Je):Je}}function xt(je,pe,ge){return{type:"Feature",id:je[pe+_e],properties:Vt(je,pe,ge),geometry:{type:"Point",coordinates:[(ke=je[pe],360*(ke-.5)),it(je[pe+1])]}};var ke}function Vt(je,pe,ge){const ke=je[pe+Le],Ne=ke>=1e4?`${Math.round(ke/1e3)}k`:ke>=1e3?Math.round(ke/100)/10+"k":ke,Je=je[pe+Oe],nt=Je===-1?{}:Object.assign({},ge[Je]);return Object.assign(nt,{cluster:!0,cluster_id:je[pe+_e],point_count:ke,point_count_abbreviated:Ne})}function Xt(je){return je/360+.5}function en(je){const pe=Math.sin(je*Math.PI/180),ge=.5-.25*Math.log((1+pe)/(1-pe))/Math.PI;return ge<0?0:ge>1?1:ge}function it(je){const pe=(180-360*je)*Math.PI/180;return 360*Math.atan(Math.exp(pe))/Math.PI-90}function Lt(je,pe,ge,ke){let Ne=ke;const Je=pe+(ge-pe>>1);let nt,ct=ge-pe;const Ue=je[pe],Pt=je[pe+1],Zt=je[ge],Ct=je[ge+1];for(let pn=pe+3;pn<ge;pn+=3){const $n=St(je[pn],je[pn+1],Ue,Pt,Zt,Ct);if($n>Ne)nt=pn,Ne=$n;else if($n===Ne){const Qn=Math.abs(pn-Je);Qn<ct&&(nt=pn,ct=Qn)}}Ne>ke&&(nt-pe>3&&Lt(je,pe,nt,ke),je[nt+2]=Ne,ge-nt>3&&Lt(je,nt,ge,ke))}function St(je,pe,ge,ke,Ne,Je){let nt=Ne-ge,ct=Je-ke;if(nt!==0||ct!==0){const Ue=((je-ge)*nt+(pe-ke)*ct)/(nt*nt+ct*ct);Ue>1?(ge=Ne,ke=Je):Ue>0&&(ge+=nt*Ue,ke+=ct*Ue)}return nt=je-ge,ct=pe-ke,nt*nt+ct*ct}function lt(je,pe,ge,ke){const Ne={id:je??null,type:pe,geometry:ge,tags:ke,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(pe==="Point"||pe==="MultiPoint"||pe==="LineString")Tn(Ne,ge);else if(pe==="Polygon")Tn(Ne,ge[0]);else if(pe==="MultiLineString")for(const Je of ge)Tn(Ne,Je);else if(pe==="MultiPolygon")for(const Je of ge)Tn(Ne,Je[0]);return Ne}function Tn(je,pe){for(let ge=0;ge<pe.length;ge+=3)je.minX=Math.min(je.minX,pe[ge]),je.minY=Math.min(je.minY,pe[ge+1]),je.maxX=Math.max(je.maxX,pe[ge]),je.maxY=Math.max(je.maxY,pe[ge+1])}function Mt(je,pe,ge,ke){if(!pe.geometry)return;const Ne=pe.geometry.coordinates;if(Ne&&Ne.length===0)return;const Je=pe.geometry.type,nt=Math.pow(ge.tolerance/((1<<ge.maxZoom)*ge.extent),2);let ct=[],Ue=pe.id;if(ge.promoteId?Ue=pe.properties[ge.promoteId]:ge.generateId&&(Ue=ke||0),Je==="Point")$t(Ne,ct);else if(Je==="MultiPoint")for(const Pt of Ne)$t(Pt,ct);else if(Je==="LineString")Pe(Ne,ct,nt,!1);else if(Je==="MultiLineString"){if(ge.lineMetrics){for(const Pt of Ne)ct=[],Pe(Pt,ct,nt,!1),je.push(lt(Ue,"LineString",ct,pe.properties));return}yn(Ne,ct,nt,!1)}else if(Je==="Polygon")yn(Ne,ct,nt,!0);else{if(Je!=="MultiPolygon"){if(Je==="GeometryCollection"){for(const Pt of pe.geometry.geometries)Mt(je,{id:Ue,geometry:Pt,properties:pe.properties},ge,ke);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Pt of Ne){const Zt=[];yn(Pt,Zt,nt,!0),ct.push(Zt)}}je.push(lt(Ue,Je,ct,pe.properties))}function $t(je,pe){pe.push(wn(je[0]),dn(je[1]),0)}function Pe(je,pe,ge,ke){let Ne,Je,nt=0;for(let Ue=0;Ue<je.length;Ue++){const Pt=wn(je[Ue][0]),Zt=dn(je[Ue][1]);pe.push(Pt,Zt,0),Ue>0&&(nt+=ke?(Ne*Zt-Pt*Je)/2:Math.sqrt(Math.pow(Pt-Ne,2)+Math.pow(Zt-Je,2))),Ne=Pt,Je=Zt}const ct=pe.length-3;pe[2]=1,Lt(pe,0,ct,ge),pe[ct+2]=1,pe.size=Math.abs(nt),pe.start=0,pe.end=pe.size}function yn(je,pe,ge,ke){for(let Ne=0;Ne<je.length;Ne++){const Je=[];Pe(je[Ne],Je,ge,ke),pe.push(Je)}}function wn(je){return je/360+.5}function dn(je){const pe=Math.sin(je*Math.PI/180),ge=.5-.25*Math.log((1+pe)/(1-pe))/Math.PI;return ge<0?0:ge>1?1:ge}function An(je,pe,ge,ke,Ne,Je,nt,ct){if(ke/=pe,Je>=(ge/=pe)&&nt<ke)return je;if(nt<ge||Je>=ke)return null;const Ue=[];for(const Pt of je){const Zt=Pt.geometry;let Ct=Pt.type;const pn=Ne===0?Pt.minX:Pt.minY,$n=Ne===0?Pt.maxX:Pt.maxY;if(pn>=ge&&$n<ke){Ue.push(Pt);continue}if($n<ge||pn>=ke)continue;let Qn=[];if(Ct==="Point"||Ct==="MultiPoint")Cn(Zt,Qn,ge,ke,Ne);else if(Ct==="LineString")ai(Zt,Qn,ge,ke,Ne,!1,ct.lineMetrics);else if(Ct==="MultiLineString")ri(Zt,Qn,ge,ke,Ne,!1);else if(Ct==="Polygon")ri(Zt,Qn,ge,ke,Ne,!0);else if(Ct==="MultiPolygon")for(const Ii of Zt){const Wn=[];ri(Ii,Wn,ge,ke,Ne,!0),Wn.length&&Qn.push(Wn)}if(Qn.length){if(ct.lineMetrics&&Ct==="LineString"){for(const Ii of Qn)Ue.push(lt(Pt.id,Ct,Ii,Pt.tags));continue}Ct!=="LineString"&&Ct!=="MultiLineString"||(Qn.length===1?(Ct="LineString",Qn=Qn[0]):Ct="MultiLineString"),Ct!=="Point"&&Ct!=="MultiPoint"||(Ct=Qn.length===3?"Point":"MultiPoint"),Ue.push(lt(Pt.id,Ct,Qn,Pt.tags))}}return Ue.length?Ue:null}function Cn(je,pe,ge,ke,Ne){for(let Je=0;Je<je.length;Je+=3){const nt=je[Je+Ne];nt>=ge&&nt<=ke&&ji(pe,je[Je],je[Je+1],je[Je+2])}}function ai(je,pe,ge,ke,Ne,Je,nt){let ct=Gi(je);const Ue=Ne===0?Si:lr;let Pt,Zt,Ct=je.start;for(let Wn=0;Wn<je.length-3;Wn+=3){const xi=je[Wn],Fi=je[Wn+1],co=je[Wn+2],Rr=je[Wn+3],Li=je[Wn+4],xr=Ne===0?xi:Fi,wr=Ne===0?Rr:Li;let No=!1;nt&&(Pt=Math.sqrt(Math.pow(xi-Rr,2)+Math.pow(Fi-Li,2))),xr<ge?wr>ge&&(Zt=Ue(ct,xi,Fi,Rr,Li,ge),nt&&(ct.start=Ct+Pt*Zt)):xr>ke?wr<ke&&(Zt=Ue(ct,xi,Fi,Rr,Li,ke),nt&&(ct.start=Ct+Pt*Zt)):ji(ct,xi,Fi,co),wr<ge&&xr>=ge&&(Zt=Ue(ct,xi,Fi,Rr,Li,ge),No=!0),wr>ke&&xr<=ke&&(Zt=Ue(ct,xi,Fi,Rr,Li,ke),No=!0),!Je&&No&&(nt&&(ct.end=Ct+Pt*Zt),pe.push(ct),ct=Gi(je)),nt&&(Ct+=Pt)}let pn=je.length-3;const $n=je[pn],Qn=je[pn+1],Ii=Ne===0?$n:Qn;Ii>=ge&&Ii<=ke&&ji(ct,$n,Qn,je[pn+2]),pn=ct.length-3,Je&&pn>=3&&(ct[pn]!==ct[0]||ct[pn+1]!==ct[1])&&ji(ct,ct[0],ct[1],ct[2]),ct.length&&pe.push(ct)}function Gi(je){const pe=[];return pe.size=je.size,pe.start=je.start,pe.end=je.end,pe}function ri(je,pe,ge,ke,Ne,Je){for(const nt of je)ai(nt,pe,ge,ke,Ne,Je,!1)}function ji(je,pe,ge,ke){je.push(pe,ge,ke)}function Si(je,pe,ge,ke,Ne,Je){const nt=(Je-pe)/(ke-pe);return ji(je,Je,ge+(Ne-ge)*nt,1),nt}function lr(je,pe,ge,ke,Ne,Je){const nt=(Je-ge)/(Ne-ge);return ji(je,pe+(ke-pe)*nt,Je,1),nt}function Tt(je,pe){const ge=[];for(let ke=0;ke<je.length;ke++){const Ne=je[ke],Je=Ne.type;let nt;if(Je==="Point"||Je==="MultiPoint"||Je==="LineString")nt=Ji(Ne.geometry,pe);else if(Je==="MultiLineString"||Je==="Polygon"){nt=[];for(const ct of Ne.geometry)nt.push(Ji(ct,pe))}else if(Je==="MultiPolygon"){nt=[];for(const ct of Ne.geometry){const Ue=[];for(const Pt of ct)Ue.push(Ji(Pt,pe));nt.push(Ue)}}ge.push(lt(Ne.id,Je,nt,Ne.tags))}return ge}function Ji(je,pe){const ge=[];ge.size=je.size,je.start!==void 0&&(ge.start=je.start,ge.end=je.end);for(let ke=0;ke<je.length;ke+=3)ge.push(je[ke]+pe,je[ke+1],je[ke+2]);return ge}function Qi(je,pe){if(je.transformed)return je;const ge=1<<je.z,ke=je.x,Ne=je.y;for(const Je of je.features){const nt=Je.geometry,ct=Je.type;if(Je.geometry=[],ct===1)for(let Ue=0;Ue<nt.length;Ue+=2)Je.geometry.push(Vr(nt[Ue],nt[Ue+1],pe,ge,ke,Ne));else for(let Ue=0;Ue<nt.length;Ue++){const Pt=[];for(let Zt=0;Zt<nt[Ue].length;Zt+=2)Pt.push(Vr(nt[Ue][Zt],nt[Ue][Zt+1],pe,ge,ke,Ne));Je.geometry.push(Pt)}}return je.transformed=!0,je}function Vr(je,pe,ge,ke,Ne,Je){return[Math.round(ge*(je*ke-Ne)),Math.round(ge*(pe*ke-Je))]}function wo(je,pe,ge,ke,Ne){const Je=pe===Ne.maxZoom?0:Ne.tolerance/((1<<pe)*Ne.extent),nt={features:[],numPoints:0,numSimplified:0,numFeatures:je.length,source:null,x:ge,y:ke,z:pe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const ct of je)ln(nt,ct,Je,Ne);return nt}function ln(je,pe,ge,ke){const Ne=pe.geometry,Je=pe.type,nt=[];if(je.minX=Math.min(je.minX,pe.minX),je.minY=Math.min(je.minY,pe.minY),je.maxX=Math.max(je.maxX,pe.maxX),je.maxY=Math.max(je.maxY,pe.maxY),Je==="Point"||Je==="MultiPoint")for(let ct=0;ct<Ne.length;ct+=3)nt.push(Ne[ct],Ne[ct+1]),je.numPoints++,je.numSimplified++;else if(Je==="LineString")Nn(nt,Ne,je,ge,!1,!1);else if(Je==="MultiLineString"||Je==="Polygon")for(let ct=0;ct<Ne.length;ct++)Nn(nt,Ne[ct],je,ge,Je==="Polygon",ct===0);else if(Je==="MultiPolygon")for(let ct=0;ct<Ne.length;ct++){const Ue=Ne[ct];for(let Pt=0;Pt<Ue.length;Pt++)Nn(nt,Ue[Pt],je,ge,!0,Pt===0)}if(nt.length){let ct=pe.tags||null;if(Je==="LineString"&&ke.lineMetrics){ct={};for(const Pt in pe.tags)ct[Pt]=pe.tags[Pt];ct.mapbox_clip_start=Ne.start/Ne.size,ct.mapbox_clip_end=Ne.end/Ne.size}const Ue={geometry:nt,type:Je==="Polygon"||Je==="MultiPolygon"?3:Je==="LineString"||Je==="MultiLineString"?2:1,tags:ct};pe.id!==null&&(Ue.id=pe.id),je.features.push(Ue)}}function Nn(je,pe,ge,ke,Ne,Je){const nt=ke*ke;if(ke>0&&pe.size<(Ne?nt:ke))return void(ge.numPoints+=pe.length/3);const ct=[];for(let Ue=0;Ue<pe.length;Ue+=3)(ke===0||pe[Ue+2]>nt)&&(ge.numSimplified++,ct.push(pe[Ue],pe[Ue+1])),ge.numPoints++;Ne&&(function(Ue,Pt){let Zt=0;for(let Ct=0,pn=Ue.length,$n=pn-2;Ct<pn;$n=Ct,Ct+=2)Zt+=(Ue[Ct]-Ue[$n])*(Ue[Ct+1]+Ue[$n+1]);if(Zt>0===Pt)for(let Ct=0,pn=Ue.length;Ct<pn/2;Ct+=2){const $n=Ue[Ct],Qn=Ue[Ct+1];Ue[Ct]=Ue[pn-2-Ct],Ue[Ct+1]=Ue[pn-1-Ct],Ue[pn-2-Ct]=$n,Ue[pn-1-Ct]=Qn}})(ct,Je),je.push(ct)}const qn={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class fr{constructor(pe,ge){const ke=(ge=this.options=(function(Je,nt){for(const ct in nt)Je[ct]=nt[ct];return Je})(Object.create(qn),ge)).debug;if(ke&&console.time("preprocess data"),ge.maxZoom<0||ge.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ge.promoteId&&ge.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ne=(function(Je,nt){const ct=[];if(Je.type==="FeatureCollection")for(let Ue=0;Ue<Je.features.length;Ue++)Mt(ct,Je.features[Ue],nt,Ue);else Mt(ct,Je.type==="Feature"?Je:{geometry:Je},nt);return ct})(pe,ge);this.tiles={},this.tileCoords=[],ke&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ge.indexMaxZoom,ge.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ne=(function(Je,nt){const ct=nt.buffer/nt.extent;let Ue=Je;const Pt=An(Je,1,-1-ct,ct,0,-1,2,nt),Zt=An(Je,1,1-ct,2+ct,0,-1,2,nt);return(Pt||Zt)&&(Ue=An(Je,1,-ct,1+ct,0,-1,2,nt)||[],Pt&&(Ue=Tt(Pt,1).concat(Ue)),Zt&&(Ue=Ue.concat(Tt(Zt,-1)))),Ue})(Ne,ge),Ne.length&&this.splitTile(Ne,0,0,0),ke&&(Ne.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(pe,ge,ke,Ne,Je,nt,ct){const Ue=[pe,ge,ke,Ne],Pt=this.options,Zt=Pt.debug;for(;Ue.length;){Ne=Ue.pop(),ke=Ue.pop(),ge=Ue.pop(),pe=Ue.pop();const Ct=1<<ge,pn=us(ge,ke,Ne);let $n=this.tiles[pn];if(!$n&&(Zt>1&&console.time("creation"),$n=this.tiles[pn]=wo(pe,ge,ke,Ne,Pt),this.tileCoords.push({z:ge,x:ke,y:Ne}),Zt)){Zt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ge,ke,Ne,$n.numFeatures,$n.numPoints,$n.numSimplified),console.timeEnd("creation"));const No=`z${ge}`;this.stats[No]=(this.stats[No]||0)+1,this.total++}if($n.source=pe,Je==null){if(ge===Pt.indexMaxZoom||$n.numPoints<=Pt.indexMaxPoints)continue}else{if(ge===Pt.maxZoom||ge===Je)continue;if(Je!=null){const No=Je-ge;if(ke!==nt>>No||Ne!==ct>>No)continue}}if($n.source=null,pe.length===0)continue;Zt>1&&console.time("clipping");const Qn=.5*Pt.buffer/Pt.extent,Ii=.5-Qn,Wn=.5+Qn,xi=1+Qn;let Fi=null,co=null,Rr=null,Li=null,xr=An(pe,Ct,ke-Qn,ke+Wn,0,$n.minX,$n.maxX,Pt),wr=An(pe,Ct,ke+Ii,ke+xi,0,$n.minX,$n.maxX,Pt);pe=null,xr&&(Fi=An(xr,Ct,Ne-Qn,Ne+Wn,1,$n.minY,$n.maxY,Pt),co=An(xr,Ct,Ne+Ii,Ne+xi,1,$n.minY,$n.maxY,Pt),xr=null),wr&&(Rr=An(wr,Ct,Ne-Qn,Ne+Wn,1,$n.minY,$n.maxY,Pt),Li=An(wr,Ct,Ne+Ii,Ne+xi,1,$n.minY,$n.maxY,Pt),wr=null),Zt>1&&console.timeEnd("clipping"),Ue.push(Fi||[],ge+1,2*ke,2*Ne),Ue.push(co||[],ge+1,2*ke,2*Ne+1),Ue.push(Rr||[],ge+1,2*ke+1,2*Ne),Ue.push(Li||[],ge+1,2*ke+1,2*Ne+1)}}getTile(pe,ge,ke){pe=+pe,ge=+ge,ke=+ke;const Ne=this.options,{extent:Je,debug:nt}=Ne;if(pe<0||pe>24)return null;const ct=1<<pe,Ue=us(pe,ge=ge+ct&ct-1,ke);if(this.tiles[Ue])return Qi(this.tiles[Ue],Je);nt>1&&console.log("drilling down to z%d-%d-%d",pe,ge,ke);let Pt,Zt=pe,Ct=ge,pn=ke;for(;!Pt&&Zt>0;)Zt--,Ct>>=1,pn>>=1,Pt=this.tiles[us(Zt,Ct,pn)];return Pt&&Pt.source?(nt>1&&(console.log("found parent tile z%d-%d-%d",Zt,Ct,pn),console.time("drilling down")),this.splitTile(Pt.source,Zt,Ct,pn,pe,ge,ke),nt>1&&console.timeEnd("drilling down"),this.tiles[Ue]?Qi(this.tiles[Ue],Je):null):null}}function us(je,pe,ge){return 32*((1<<je)*ge+pe)+je}function pi(je,pe){return pe?je.properties[pe]:je.id}function oa(je,pe){if(je==null)return!0;if(je.type==="Feature")return pi(je,pe)!=null;if(je.type==="FeatureCollection"){const ge=new Set;for(const ke of je.features){const Ne=pi(ke,pe);if(Ne==null||ge.has(Ne))return!1;ge.add(Ne)}return!0}return!1}function sa(je,pe){const ge=new Map;if(je!=null)if(je.type==="Feature")ge.set(pi(je,pe),je);else for(const ke of je.features)ge.set(pi(ke,pe),ke);return ge}class Ys extends v{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(pe,ge){return s._(this,void 0,void 0,(function*(){const ke=pe.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ne=this._geoJSONIndex.getTile(ke.z,ke.x,ke.y);if(!Ne)return null;const Je=new class{constructor(ct){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.X,this.length=ct.length,this._features=ct}feature(ct){return new class{constructor(Ue){this._feature=Ue,this.extent=s.X,this.type=Ue.type,this.properties=Ue.tags,"id"in Ue&&!isNaN(Ue.id)&&(this.id=parseInt(Ue.id,10))}loadGeometry(){if(this._feature.type===1){const Ue=[];for(const Pt of this._feature.geometry)Ue.push([new s.P(Pt[0],Pt[1])]);return Ue}{const Ue=[];for(const Pt of this._feature.geometry){const Zt=[];for(const Ct of Pt)Zt.push(new s.P(Ct[0],Ct[1]));Ue.push(Zt)}return Ue}}toGeoJSON(Ue,Pt,Zt){return z.call(this,Ue,Pt,Zt)}}(this._features[ct])}}(Ne.features);let nt=he(Je);return nt.byteOffset===0&&nt.byteLength===nt.buffer.byteLength||(nt=new Uint8Array(nt)),{vectorTile:Je,rawData:nt.buffer}}))}loadData(pe){return s._(this,void 0,void 0,(function*(){var ge;(ge=this._pendingRequest)===null||ge===void 0||ge.abort();const ke=!!(pe&&pe.request&&pe.request.collectResourceTiming)&&new s.bv(pe.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(pe,this._pendingRequest),this._geoJSONIndex=pe.cluster?new yt((function({superclusterOptions:nt,clusterProperties:ct}){if(!ct||!nt)return nt;const Ue={},Pt={},Zt={accumulated:null,zoom:0},Ct={properties:null},pn=Object.keys(ct);for(const $n of pn){const[Qn,Ii]=ct[$n],Wn=s.bC(Ii),xi=s.bC(typeof Qn=="string"?[Qn,["accumulated"],["get",$n]]:Qn);Ue[$n]=Wn.value,Pt[$n]=xi.value}return nt.map=$n=>{Ct.properties=$n;const Qn={};for(const Ii of pn)Qn[Ii]=Ue[Ii].evaluate(Zt,Ct);return Qn},nt.reduce=($n,Qn)=>{Ct.properties=Qn;for(const Ii of pn)Zt.accumulated=$n[Ii],$n[Ii]=Pt[Ii].evaluate(Zt,Ct)},nt})(pe)).load((yield this._pendingData).features):(Ne=yield this._pendingData,new fr(Ne,pe.geojsonVtOptions)),this.loaded={};const Je={};if(ke){const nt=ke.finish();nt&&(Je.resourceTiming={},Je.resourceTiming[pe.source]=JSON.parse(JSON.stringify(nt)))}return Je}catch(Je){if(delete this._pendingRequest,s.bB(Je))return{abandoned:!0};throw Je}var Ne}))}getData(){return s._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(pe){const ge=this.loaded;return ge&&ge[pe.uid]?super.reloadTile(pe):this.loadTile(pe)}loadAndProcessGeoJSON(pe,ge){return s._(this,void 0,void 0,(function*(){let ke=yield this.loadGeoJSON(pe,ge);if(delete this._pendingRequest,typeof ke!="object")throw new Error(`Input data given to '${pe.source}' is not a valid GeoJSON object.`);if(O(ke,!0),pe.filter){const Ne=s.bC(pe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ne.result==="error")throw new Error(Ne.value.map((nt=>`${nt.key}: ${nt.message}`)).join(", "));ke={type:"FeatureCollection",features:ke.features.filter((nt=>Ne.value.evaluate({zoom:0},nt)))}}return ke}))}loadGeoJSON(pe,ge){return s._(this,void 0,void 0,(function*(){const{promoteId:ke}=pe;if(pe.request){const Ne=yield s.h(pe.request,ge);return this._dataUpdateable=oa(Ne.data,ke)?sa(Ne.data,ke):void 0,Ne.data}if(typeof pe.data=="string")try{const Ne=JSON.parse(pe.data);return this._dataUpdateable=oa(Ne,ke)?sa(Ne,ke):void 0,Ne}catch{throw new Error(`Input data given to '${pe.source}' is not a valid GeoJSON object.`)}if(!pe.dataDiff)throw new Error(`Input data given to '${pe.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${pe.source}`);return(function(Ne,Je,nt){var ct,Ue,Pt,Zt;if(Je.removeAll&&Ne.clear(),Je.remove)for(const Ct of Je.remove)Ne.delete(Ct);if(Je.add)for(const Ct of Je.add){const pn=pi(Ct,nt);pn!=null&&Ne.set(pn,Ct)}if(Je.update)for(const Ct of Je.update){let pn=Ne.get(Ct.id);if(pn==null)continue;const $n=!Ct.removeAllProperties&&(((ct=Ct.removeProperties)===null||ct===void 0?void 0:ct.length)>0||((Ue=Ct.addOrUpdateProperties)===null||Ue===void 0?void 0:Ue.length)>0);if((Ct.newGeometry||Ct.removeAllProperties||$n)&&(pn=Object.assign({},pn),Ne.set(Ct.id,pn),$n&&(pn.properties=Object.assign({},pn.properties))),Ct.newGeometry&&(pn.geometry=Ct.newGeometry),Ct.removeAllProperties)pn.properties={};else if(((Pt=Ct.removeProperties)===null||Pt===void 0?void 0:Pt.length)>0)for(const Qn of Ct.removeProperties)Object.prototype.hasOwnProperty.call(pn.properties,Qn)&&delete pn.properties[Qn];if(((Zt=Ct.addOrUpdateProperties)===null||Zt===void 0?void 0:Zt.length)>0)for(const{key:Qn,value:Ii}of Ct.addOrUpdateProperties)pn.properties[Qn]=Ii}})(this._dataUpdateable,pe.dataDiff,ke),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(pe){return s._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(pe){return this._geoJSONIndex.getClusterExpansionZoom(pe.clusterId)}getClusterChildren(pe){return this._geoJSONIndex.getChildren(pe.clusterId)}getClusterLeaves(pe){return this._geoJSONIndex.getLeaves(pe.clusterId,pe.limit,pe.offset)}}class zs{constructor(pe){this.self=pe,this.actor=new s.F(pe),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ge,ke)=>{if(this.externalWorkerSourceTypes[ge])throw new Error(`Worker source with name "${ge}" already registered.`);this.externalWorkerSourceTypes[ge]=ke},this.self.addProtocol=s.bi,this.self.removeProtocol=s.bj,this.self.registerRTLTextPlugin=ge=>{if(s.bD.isParsed())throw new Error("RTL text plugin already registered.");s.bD.setMethods(ge)},this.actor.registerMessageHandler("LDT",((ge,ke)=>this._getDEMWorkerSource(ge,ke.source).loadTile(ke))),this.actor.registerMessageHandler("RDT",((ge,ke)=>s._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(ge,ke.source).removeTile(ke)})))),this.actor.registerMessageHandler("GCEZ",((ge,ke)=>s._(this,void 0,void 0,(function*(){return this._getWorkerSource(ge,ke.type,ke.source).getClusterExpansionZoom(ke)})))),this.actor.registerMessageHandler("GCC",((ge,ke)=>s._(this,void 0,void 0,(function*(){return this._getWorkerSource(ge,ke.type,ke.source).getClusterChildren(ke)})))),this.actor.registerMessageHandler("GCL",((ge,ke)=>s._(this,void 0,void 0,(function*(){return this._getWorkerSource(ge,ke.type,ke.source).getClusterLeaves(ke)})))),this.actor.registerMessageHandler("LD",((ge,ke)=>this._getWorkerSource(ge,ke.type,ke.source).loadData(ke))),this.actor.registerMessageHandler("GD",((ge,ke)=>this._getWorkerSource(ge,ke.type,ke.source).getData())),this.actor.registerMessageHandler("LT",((ge,ke)=>this._getWorkerSource(ge,ke.type,ke.source).loadTile(ke))),this.actor.registerMessageHandler("RT",((ge,ke)=>this._getWorkerSource(ge,ke.type,ke.source).reloadTile(ke))),this.actor.registerMessageHandler("AT",((ge,ke)=>this._getWorkerSource(ge,ke.type,ke.source).abortTile(ke))),this.actor.registerMessageHandler("RMT",((ge,ke)=>this._getWorkerSource(ge,ke.type,ke.source).removeTile(ke))),this.actor.registerMessageHandler("RS",((ge,ke)=>s._(this,void 0,void 0,(function*(){if(!this.workerSources[ge]||!this.workerSources[ge][ke.type]||!this.workerSources[ge][ke.type][ke.source])return;const Ne=this.workerSources[ge][ke.type][ke.source];delete this.workerSources[ge][ke.type][ke.source],Ne.removeSource!==void 0&&Ne.removeSource(ke)})))),this.actor.registerMessageHandler("RM",(ge=>s._(this,void 0,void 0,(function*(){delete this.layerIndexes[ge],delete this.availableImages[ge],delete this.workerSources[ge],delete this.demWorkerSources[ge]})))),this.actor.registerMessageHandler("SR",((ge,ke)=>s._(this,void 0,void 0,(function*(){this.referrer=ke})))),this.actor.registerMessageHandler("SRPS",((ge,ke)=>this._syncRTLPluginState(ge,ke))),this.actor.registerMessageHandler("IS",((ge,ke)=>s._(this,void 0,void 0,(function*(){this.self.importScripts(ke)})))),this.actor.registerMessageHandler("SI",((ge,ke)=>this._setImages(ge,ke))),this.actor.registerMessageHandler("UL",((ge,ke)=>s._(this,void 0,void 0,(function*(){this._getLayerIndex(ge).update(ke.layers,ke.removedIds)})))),this.actor.registerMessageHandler("SL",((ge,ke)=>s._(this,void 0,void 0,(function*(){this._getLayerIndex(ge).replace(ke)}))))}_setImages(pe,ge){return s._(this,void 0,void 0,(function*(){this.availableImages[pe]=ge;for(const ke in this.workerSources[pe]){const Ne=this.workerSources[pe][ke];for(const Je in Ne)Ne[Je].availableImages=ge}}))}_syncRTLPluginState(pe,ge){return s._(this,void 0,void 0,(function*(){if(s.bD.isParsed())return s.bD.getState();if(ge.pluginStatus!=="loading")return s.bD.setState(ge),ge;const ke=ge.pluginURL;if(this.self.importScripts(ke),s.bD.isParsed()){const Ne={pluginStatus:"loaded",pluginURL:ke};return s.bD.setState(Ne),Ne}throw s.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${ke}`)}))}_getAvailableImages(pe){let ge=this.availableImages[pe];return ge||(ge=[]),ge}_getLayerIndex(pe){let ge=this.layerIndexes[pe];return ge||(ge=this.layerIndexes[pe]=new a),ge}_getWorkerSource(pe,ge,ke){if(this.workerSources[pe]||(this.workerSources[pe]={}),this.workerSources[pe][ge]||(this.workerSources[pe][ge]={}),!this.workerSources[pe][ge][ke]){const Ne={sendAsync:(Je,nt)=>(Je.targetMapId=pe,this.actor.sendAsync(Je,nt))};switch(ge){case"vector":this.workerSources[pe][ge][ke]=new v(Ne,this._getLayerIndex(pe),this._getAvailableImages(pe));break;case"geojson":this.workerSources[pe][ge][ke]=new Ys(Ne,this._getLayerIndex(pe),this._getAvailableImages(pe));break;default:this.workerSources[pe][ge][ke]=new this.externalWorkerSourceTypes[ge](Ne,this._getLayerIndex(pe),this._getAvailableImages(pe))}}return this.workerSources[pe][ge][ke]}_getDEMWorkerSource(pe,ge){return this.demWorkerSources[pe]||(this.demWorkerSources[pe]={}),this.demWorkerSources[pe][ge]||(this.demWorkerSources[pe][ge]=new w),this.demWorkerSources[pe][ge]}}return s.i(self)&&(self.worker=new zs(self)),zs})),r("index",["exports","./shared"],(function(s,a){var d="4.7.1";let h,m;const v={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:D=>new Promise(((l,y)=>{const _=requestAnimationFrame(l);D.signal.addEventListener("abort",(()=>{cancelAnimationFrame(_),y(a.c())}))})),getImageData(D,l=0){return this.getImageCanvasContext(D).getImageData(-l,-l,D.width+2*l,D.height+2*l)},getImageCanvasContext(D){const l=window.document.createElement("canvas"),y=l.getContext("2d",{willReadFrequently:!0});if(!y)throw new Error("failed to create canvas 2d context");return l.width=D.width,l.height=D.height,y.drawImage(D,0,0,D.width,D.height),y},resolveURL:D=>(h||(h=document.createElement("a")),h.href=D,h.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(m==null&&(m=matchMedia("(prefers-reduced-motion: reduce)")),m.matches)}};class w{static testProp(l){if(!w.docStyle)return l[0];for(let y=0;y<l.length;y++)if(l[y]in w.docStyle)return l[y];return l[0]}static create(l,y,_){const S=window.document.createElement(l);return y!==void 0&&(S.className=y),_&&_.appendChild(S),S}static createNS(l,y){return window.document.createElementNS(l,y)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(l,y){l.style[w.transformProp]=y}static addEventListener(l,y,_,S={}){l.addEventListener(y,_,"passive"in S?S:S.capture)}static removeEventListener(l,y,_,S={}){l.removeEventListener(y,_,"passive"in S?S:S.capture)}static suppressClickInternal(l){l.preventDefault(),l.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",w.suppressClickInternal,!0)}),0)}static getScale(l){const y=l.getBoundingClientRect();return{x:y.width/l.offsetWidth||1,y:y.height/l.offsetHeight||1,boundingClientRect:y}}static getPoint(l,y,_){const S=y.boundingClientRect;return new a.P((_.clientX-S.left)/y.x-l.clientLeft,(_.clientY-S.top)/y.y-l.clientTop)}static mousePos(l,y){const _=w.getScale(l);return w.getPoint(l,_,y)}static touchPos(l,y){const _=[],S=w.getScale(l);for(let P=0;P<y.length;P++)_.push(w.getPoint(l,S,y[P]));return _}static mouseButton(l){return l.button}static remove(l){l.parentNode&&l.parentNode.removeChild(l)}}w.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);const R={supported:!1,testSupport:function(D){!z&&O&&($?U(D):L=D)}};let L,O,z=!1,$=!1;function U(D){const l=D.createTexture();D.bindTexture(D.TEXTURE_2D,l);try{if(D.texImage2D(D.TEXTURE_2D,0,D.RGBA,D.RGBA,D.UNSIGNED_BYTE,O),D.isContextLost())return;R.supported=!0}catch{}D.deleteTexture(l),z=!0}var Y;typeof document<"u"&&(O=document.createElement("img"),O.onload=()=>{L&&U(L),L=null,$=!0},O.onerror=()=>{z=!0,L=null},O.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(D){let l,y,_,S;D.resetRequestQueue=()=>{l=[],y=0,_=0,S={}},D.addThrottleControl=K=>{const te=_++;return S[te]=K,te},D.removeThrottleControl=K=>{delete S[K],G()},D.getImage=(K,te,ae=!0)=>new Promise(((le,xe)=>{R.supported&&(K.headers||(K.headers={}),K.headers.accept="image/webp,*/*"),a.e(K,{type:"image"}),l.push({abortController:te,requestParameters:K,supportImageRefresh:ae,state:"queued",onError:Ee=>{xe(Ee)},onSuccess:Ee=>{le(Ee)}}),G()}));const P=K=>a._(this,void 0,void 0,(function*(){K.state="running";const{requestParameters:te,supportImageRefresh:ae,onError:le,onSuccess:xe,abortController:Ee}=K,Fe=ae===!1&&!a.i(self)&&!a.g(te.url)&&(!te.headers||Object.keys(te.headers).reduce((($e,Ke)=>$e&&Ke==="accept"),!0));y++;const Ge=Fe?W(te,Ee):a.m(te,Ee);try{const $e=yield Ge;delete K.abortController,K.state="completed",$e.data instanceof HTMLImageElement||a.b($e.data)?xe($e):$e.data&&xe({data:yield(Ve=$e.data,typeof createImageBitmap=="function"?a.d(Ve):a.f(Ve)),cacheControl:$e.cacheControl,expires:$e.expires})}catch($e){delete K.abortController,le($e)}finally{y--,G()}var Ve})),G=()=>{const K=(()=>{for(const te of Object.keys(S))if(S[te]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let te=y;te<K&&l.length>0;te++){const ae=l.shift();ae.abortController.signal.aborted?te--:P(ae)}},W=(K,te)=>new Promise(((ae,le)=>{const xe=new Image,Ee=K.url,Fe=K.credentials;Fe&&Fe==="include"?xe.crossOrigin="use-credentials":(Fe&&Fe==="same-origin"||!a.s(Ee))&&(xe.crossOrigin="anonymous"),te.signal.addEventListener("abort",(()=>{xe.src="",le(a.c())})),xe.fetchPriority="high",xe.onload=()=>{xe.onerror=xe.onload=null,ae({data:xe})},xe.onerror=()=>{xe.onerror=xe.onload=null,te.signal.aborted||le(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},xe.src=Ee}))})(Y||(Y={})),Y.resetRequestQueue();class X{constructor(l){this._transformRequestFn=l}transformRequest(l,y){return this._transformRequestFn&&this._transformRequestFn(l,y)||{url:l}}setTransformRequest(l){this._transformRequestFn=l}}function q(D){var l=new a.A(3);return l[0]=D[0],l[1]=D[1],l[2]=D[2],l}var ie,re=function(D,l,y){return D[0]=l[0]-y[0],D[1]=l[1]-y[1],D[2]=l[2]-y[2],D};ie=new a.A(3),a.A!=Float32Array&&(ie[0]=0,ie[1]=0,ie[2]=0);var J=function(D){var l=D[0],y=D[1];return l*l+y*y};function ne(D){const l=[];if(typeof D=="string")l.push({id:"default",url:D});else if(D&&D.length>0){const y=[];for(const{id:_,url:S}of D){const P=`${_}${S}`;y.indexOf(P)===-1&&(y.push(P),l.push({id:_,url:S}))}}return l}function be(D,l,y){const _=D.split("?");return _[0]+=`${l}${y}`,_.join("?")}(function(){var D=new a.A(2);a.A!=Float32Array&&(D[0]=0,D[1]=0)})();class ue{constructor(l,y,_,S){this.context=l,this.format=_,this.texture=l.gl.createTexture(),this.update(y,S)}update(l,y,_){const{width:S,height:P}=l,G=!(this.size&&this.size[0]===S&&this.size[1]===P||_),{context:W}=this,{gl:K}=W;if(this.useMipmap=!!(y&&y.useMipmap),K.bindTexture(K.TEXTURE_2D,this.texture),W.pixelStoreUnpackFlipY.set(!1),W.pixelStoreUnpack.set(1),W.pixelStoreUnpackPremultiplyAlpha.set(this.format===K.RGBA&&(!y||y.premultiply!==!1)),G)this.size=[S,P],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||a.b(l)?K.texImage2D(K.TEXTURE_2D,0,this.format,this.format,K.UNSIGNED_BYTE,l):K.texImage2D(K.TEXTURE_2D,0,this.format,S,P,0,this.format,K.UNSIGNED_BYTE,l.data);else{const{x:te,y:ae}=_||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||a.b(l)?K.texSubImage2D(K.TEXTURE_2D,0,te,ae,K.RGBA,K.UNSIGNED_BYTE,l):K.texSubImage2D(K.TEXTURE_2D,0,te,ae,S,P,K.RGBA,K.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&K.generateMipmap(K.TEXTURE_2D)}bind(l,y,_){const{context:S}=this,{gl:P}=S;P.bindTexture(P.TEXTURE_2D,this.texture),_!==P.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(_=P.LINEAR),l!==this.filter&&(P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MAG_FILTER,l),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MIN_FILTER,_||l),this.filter=l),y!==this.wrap&&(P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_S,y),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_T,y),this.wrap=y)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}function ve(D){const{userImage:l}=D;return!!(l&&l.render&&l.render())&&(D.data.replace(new Uint8Array(l.data.buffer)),!0)}class ce extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:y,promiseResolve:_}of this.requestors)_(this._getImagesForIds(y));this.requestors=[]}}getImage(l){const y=this.images[l];if(y&&!y.data&&y.spriteData){const _=y.spriteData;y.data=new a.R({width:_.width,height:_.height},_.context.getImageData(_.x,_.y,_.width,_.height).data),y.spriteData=null}return y}addImage(l,y){if(this.images[l])throw new Error(`Image id ${l} already exist, use updateImage instead`);this._validate(l,y)&&(this.images[l]=y)}_validate(l,y){let _=!0;const S=y.data||y.spriteData;return this._validateStretch(y.stretchX,S&&S.width)||(this.fire(new a.j(new Error(`Image "${l}" has invalid "stretchX" value`))),_=!1),this._validateStretch(y.stretchY,S&&S.height)||(this.fire(new a.j(new Error(`Image "${l}" has invalid "stretchY" value`))),_=!1),this._validateContent(y.content,y)||(this.fire(new a.j(new Error(`Image "${l}" has invalid "content" value`))),_=!1),_}_validateStretch(l,y){if(!l)return!0;let _=0;for(const S of l){if(S[0]<_||S[1]<S[0]||y<S[1])return!1;_=S[1]}return!0}_validateContent(l,y){if(!l)return!0;if(l.length!==4)return!1;const _=y.spriteData,S=_&&_.width||y.data.width,P=_&&_.height||y.data.height;return!(l[0]<0||S<l[0]||l[1]<0||P<l[1]||l[2]<0||S<l[2]||l[3]<0||P<l[3]||l[2]<l[0]||l[3]<l[1])}updateImage(l,y,_=!0){const S=this.getImage(l);if(_&&(S.data.width!==y.data.width||S.data.height!==y.data.height))throw new Error(`size mismatch between old image (${S.data.width}x${S.data.height}) and new image (${y.data.width}x${y.data.height}).`);y.version=S.version+1,this.images[l]=y,this.updatedImages[l]=!0}removeImage(l){const y=this.images[l];delete this.images[l],delete this.patterns[l],y.userImage&&y.userImage.onRemove&&y.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l){return new Promise(((y,_)=>{let S=!0;if(!this.isLoaded())for(const P of l)this.images[P]||(S=!1);this.isLoaded()||S?y(this._getImagesForIds(l)):this.requestors.push({ids:l,promiseResolve:y})}))}_getImagesForIds(l){const y={};for(const _ of l){let S=this.getImage(_);S||(this.fire(new a.k("styleimagemissing",{id:_})),S=this.getImage(_)),S?y[_]={data:S.data.clone(),pixelRatio:S.pixelRatio,sdf:S.sdf,version:S.version,stretchX:S.stretchX,stretchY:S.stretchY,content:S.content,textFitWidth:S.textFitWidth,textFitHeight:S.textFitHeight,hasRenderCallback:!!(S.userImage&&S.userImage.render)}:a.w(`Image "${_}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return y}getPixelSize(){const{width:l,height:y}=this.atlasImage;return{width:l,height:y}}getPattern(l){const y=this.patterns[l],_=this.getImage(l);if(!_)return null;if(y&&y.position.version===_.version)return y.position;if(y)y.position.version=_.version;else{const S={w:_.data.width+2,h:_.data.height+2,x:0,y:0},P=new a.I(S,_);this.patterns[l]={bin:S,position:P}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const y=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ue(l,this.atlasImage,y.RGBA),this.atlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const P in this.patterns)l.push(this.patterns[P].bin);const{w:y,h:_}=a.p(l),S=this.atlasImage;S.resize({width:y||1,height:_||1});for(const P in this.patterns){const{bin:G}=this.patterns[P],W=G.x+1,K=G.y+1,te=this.getImage(P).data,ae=te.width,le=te.height;a.R.copy(te,S,{x:0,y:0},{x:W,y:K},{width:ae,height:le}),a.R.copy(te,S,{x:0,y:le-1},{x:W,y:K-1},{width:ae,height:1}),a.R.copy(te,S,{x:0,y:0},{x:W,y:K+le},{width:ae,height:1}),a.R.copy(te,S,{x:ae-1,y:0},{x:W-1,y:K},{width:1,height:le}),a.R.copy(te,S,{x:0,y:0},{x:W+ae,y:K},{width:1,height:le})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const y of l){if(this.callbackDispatchedThisFrame[y])continue;this.callbackDispatchedThisFrame[y]=!0;const _=this.getImage(y);_||a.w(`Image with ID: "${y}" was not found`),ve(_)&&this.updateImage(y,_)}}}const Ie=1e20;function Te(D,l,y,_,S,P,G,W,K){for(let te=l;te<l+_;te++)fe(D,y*P+te,P,S,G,W,K);for(let te=y;te<y+S;te++)fe(D,te*P+l,1,_,G,W,K)}function fe(D,l,y,_,S,P,G){P[0]=0,G[0]=-Ie,G[1]=Ie,S[0]=D[l];for(let W=1,K=0,te=0;W<_;W++){S[W]=D[l+W*y];const ae=W*W;do{const le=P[K];te=(S[W]-S[le]+ae-le*le)/(W-le)/2}while(te<=G[K]&&--K>-1);K++,P[K]=W,G[K]=te,G[K+1]=Ie}for(let W=0,K=0;W<_;W++){for(;G[K+1]<W;)K++;const te=P[K],ae=W-te;D[l+W*y]=S[te]+ae*ae}}class he{constructor(l,y){this.requestManager=l,this.localIdeographFontFamily=y,this.entries={}}setURL(l){this.url=l}getGlyphs(l){return a._(this,void 0,void 0,(function*(){const y=[];for(const P in l)for(const G of l[P])y.push(this._getAndCacheGlyphsPromise(P,G));const _=yield Promise.all(y),S={};for(const{stack:P,id:G,glyph:W}of _)S[P]||(S[P]={}),S[P][G]=W&&{id:W.id,bitmap:W.bitmap.clone(),metrics:W.metrics};return S}))}_getAndCacheGlyphsPromise(l,y){return a._(this,void 0,void 0,(function*(){let _=this.entries[l];_||(_=this.entries[l]={glyphs:{},requests:{},ranges:{}});let S=_.glyphs[y];if(S!==void 0)return{stack:l,id:y,glyph:S};if(S=this._tinySDF(_,l,y),S)return _.glyphs[y]=S,{stack:l,id:y,glyph:S};const P=Math.floor(y/256);if(256*P>65535)throw new Error("glyphs > 65535 not supported");if(_.ranges[P])return{stack:l,id:y,glyph:S};if(!this.url)throw new Error("glyphsUrl is not set");if(!_.requests[P]){const W=he.loadGlyphRange(l,P,this.url,this.requestManager);_.requests[P]=W}const G=yield _.requests[P];for(const W in G)this._doesCharSupportLocalGlyph(+W)||(_.glyphs[+W]=G[+W]);return _.ranges[P]=!0,{stack:l,id:y,glyph:G[y]||null}}))}_doesCharSupportLocalGlyph(l){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(l))}_tinySDF(l,y,_){const S=this.localIdeographFontFamily;if(!S||!this._doesCharSupportLocalGlyph(_))return;let P=l.tinySDF;if(!P){let W="400";/bold/i.test(y)?W="900":/medium/i.test(y)?W="500":/light/i.test(y)&&(W="200"),P=l.tinySDF=new he.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:S,fontWeight:W})}const G=P.draw(String.fromCharCode(_));return{id:_,bitmap:new a.o({width:G.width||60,height:G.height||60},G.data),metrics:{width:G.glyphWidth/2||24,height:G.glyphHeight/2||24,left:G.glyphLeft/2+.5||0,top:G.glyphTop/2-27.5||-8,advance:G.glyphAdvance/2||24,isDoubleResolution:!0}}}}he.loadGlyphRange=function(D,l,y,_){return a._(this,void 0,void 0,(function*(){const S=256*l,P=S+255,G=_.transformRequest(y.replace("{fontstack}",D).replace("{range}",`${S}-${P}`),"Glyphs"),W=yield a.l(G,new AbortController);if(!W||!W.data)throw new Error(`Could not load glyph range. range: ${l}, ${S}-${P}`);const K={};for(const te of a.n(W.data))K[te.id]=te;return K}))},he.TinySDF=class{constructor({fontSize:D=24,buffer:l=3,radius:y=8,cutoff:_=.25,fontFamily:S="sans-serif",fontWeight:P="normal",fontStyle:G="normal"}={}){this.buffer=l,this.cutoff=_,this.radius=y;const W=this.size=D+4*l,K=this._createCanvas(W),te=this.ctx=K.getContext("2d",{willReadFrequently:!0});te.font=`${G} ${P} ${D}px ${S}`,te.textBaseline="alphabetic",te.textAlign="left",te.fillStyle="black",this.gridOuter=new Float64Array(W*W),this.gridInner=new Float64Array(W*W),this.f=new Float64Array(W),this.z=new Float64Array(W+1),this.v=new Uint16Array(W)}_createCanvas(D){const l=document.createElement("canvas");return l.width=l.height=D,l}draw(D){const{width:l,actualBoundingBoxAscent:y,actualBoundingBoxDescent:_,actualBoundingBoxLeft:S,actualBoundingBoxRight:P}=this.ctx.measureText(D),G=Math.ceil(y),W=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(P-S))),K=Math.min(this.size-this.buffer,G+Math.ceil(_)),te=W+2*this.buffer,ae=K+2*this.buffer,le=Math.max(te*ae,0),xe=new Uint8ClampedArray(le),Ee={data:xe,width:te,height:ae,glyphWidth:W,glyphHeight:K,glyphTop:G,glyphLeft:0,glyphAdvance:l};if(W===0||K===0)return Ee;const{ctx:Fe,buffer:Ge,gridInner:Ve,gridOuter:$e}=this;Fe.clearRect(Ge,Ge,W,K),Fe.fillText(D,Ge,Ge+G);const Ke=Fe.getImageData(Ge,Ge,W,K);$e.fill(Ie,0,le),Ve.fill(0,0,le);for(let ze=0;ze<K;ze++)for(let tt=0;tt<W;tt++){const rt=Ke.data[4*(ze*W+tt)+3]/255;if(rt===0)continue;const gt=(ze+Ge)*te+tt+Ge;if(rt===1)$e[gt]=0,Ve[gt]=Ie;else{const jt=.5-rt;$e[gt]=jt>0?jt*jt:0,Ve[gt]=jt<0?jt*jt:0}}Te($e,0,0,te,ae,te,this.f,this.v,this.z),Te(Ve,Ge,Ge,W,K,te,this.f,this.v,this.z);for(let ze=0;ze<le;ze++){const tt=Math.sqrt($e[ze])-Math.sqrt(Ve[ze]);xe[ze]=Math.round(255-255*(tt/this.radius+this.cutoff))}return Ee}};class Re{constructor(){this.specification=a.v.light.position}possiblyEvaluate(l,y){return a.x(l.expression.evaluate(y))}interpolate(l,y,_){return{x:a.y.number(l.x,y.x,_),y:a.y.number(l.y,y.y,_),z:a.y.number(l.z,y.z,_)}}}let De;class Ye extends a.E{constructor(l){super(),De=De||new a.q({anchor:new a.D(a.v.light.anchor),position:new Re,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.T(De),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,y={}){if(!this._validate(a.r,l,y))for(const _ in l){const S=l[_];_.endsWith("-transition")?this._transitionable.setTransition(_.slice(0,-11),S):this._transitionable.setValue(_,S)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,y,_){return(!_||_.validate!==!1)&&a.t(this,l.call(a.u,{value:y,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}const _e=new a.q({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class Le extends a.E{constructor(l){super(),this._transitionable=new a.T(_e),this.setSky(l),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.z(0))}setSky(l,y={}){if(!this._validate(a.B,l,y)){l||(l={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const _ in l){const S=l[_];_.endsWith("-transition")?this._transitionable.setTransition(_.slice(0,-11),S):this._transitionable.setValue(_,S)}}}getSky(){return this._transitionable.serialize()}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,y,_={}){return(_==null?void 0:_.validate)!==!1&&a.t(this,l.call(a.u,a.e({value:y,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(l){return l<60?0:l<70?(l-60)/10:1}}class Oe{constructor(l,y){this.width=l,this.height=y,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(l,y){const _=l.join(",")+String(y);return this.dashEntry[_]||(this.dashEntry[_]=this.addDash(l,y)),this.dashEntry[_]}getDashRanges(l,y,_){const S=[];let P=l.length%2==1?-l[l.length-1]*_:0,G=l[0]*_,W=!0;S.push({left:P,right:G,isDash:W,zeroLength:l[0]===0});let K=l[0];for(let te=1;te<l.length;te++){W=!W;const ae=l[te];P=K*_,K+=ae,G=K*_,S.push({left:P,right:G,isDash:W,zeroLength:ae===0})}return S}addRoundDash(l,y,_){const S=y/2;for(let P=-_;P<=_;P++){const G=this.width*(this.nextRow+_+P);let W=0,K=l[W];for(let te=0;te<this.width;te++){te/K.right>1&&(K=l[++W]);const ae=Math.abs(te-K.left),le=Math.abs(te-K.right),xe=Math.min(ae,le);let Ee;const Fe=P/_*(S+1);if(K.isDash){const Ge=S-Math.abs(Fe);Ee=Math.sqrt(xe*xe+Ge*Ge)}else Ee=S-Math.sqrt(xe*xe+Fe*Fe);this.data[G+te]=Math.max(0,Math.min(255,Ee+128))}}}addRegularDash(l){for(let W=l.length-1;W>=0;--W){const K=l[W],te=l[W+1];K.zeroLength?l.splice(W,1):te&&te.isDash===K.isDash&&(te.left=K.left,l.splice(W,1))}const y=l[0],_=l[l.length-1];y.isDash===_.isDash&&(y.left=_.left-this.width,_.right=y.right+this.width);const S=this.width*this.nextRow;let P=0,G=l[P];for(let W=0;W<this.width;W++){W/G.right>1&&(G=l[++P]);const K=Math.abs(W-G.left),te=Math.abs(W-G.right),ae=Math.min(K,te);this.data[S+W]=Math.max(0,Math.min(255,(G.isDash?ae:-ae)+128))}}addDash(l,y){const _=y?7:0,S=2*_+1;if(this.nextRow+S>this.height)return a.w("LineAtlas out of space"),null;let P=0;for(let W=0;W<l.length;W++)P+=l[W];if(P!==0){const W=this.width/P,K=this.getDashRanges(l,this.width,W);y?this.addRoundDash(K,W,_):this.addRegularDash(K)}const G={y:(this.nextRow+_+.5)/this.height,height:2*_/this.height,width:P};return this.nextRow+=S,this.dirty=!0,G}bind(l){const y=l.gl;this.texture?(y.bindTexture(y.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,y.texSubImage2D(y.TEXTURE_2D,0,0,0,this.width,this.height,y.ALPHA,y.UNSIGNED_BYTE,this.data))):(this.texture=y.createTexture(),y.bindTexture(y.TEXTURE_2D,this.texture),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.REPEAT),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.REPEAT),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR),y.texImage2D(y.TEXTURE_2D,0,y.ALPHA,this.width,this.height,0,y.ALPHA,y.UNSIGNED_BYTE,this.data))}}const yt="maplibre_preloaded_worker_pool";class xt{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<xt.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach((y=>{y.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[yt]}numActive(){return Object.keys(this.active).length}}const Vt=Math.floor(v.hardwareConcurrency/2);let Xt,en;function it(){return Xt||(Xt=new xt),Xt}xt.workerCount=a.C(globalThis)?Math.max(Math.min(Vt,3),1):1;class Lt{constructor(l,y){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=y;const _=this.workerPool.acquire(y);for(let S=0;S<_.length;S++){const P=new a.F(_[S],y);P.name=`Worker ${S}`,this.actors.push(P)}if(!this.actors.length)throw new Error("No actors found")}broadcast(l,y){const _=[];for(const S of this.actors)_.push(S.sendAsync({type:l,data:y}));return Promise.all(_)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(l=!0){this.actors.forEach((y=>{y.remove()})),this.actors=[],l&&this.workerPool.release(this.id)}registerMessageHandler(l,y){for(const _ of this.actors)_.registerMessageHandler(l,y)}}function St(){return en||(en=new Lt(it(),a.G),en.registerMessageHandler("GR",((D,l,y)=>a.m(l,y)))),en}function lt(D,l){const y=a.H();return a.J(y,y,[1,1,0]),a.K(y,y,[.5*D.width,.5*D.height,1]),a.L(y,y,D.calculatePosMatrix(l.toUnwrapped()))}function Tn(D,l,y,_,S,P){const G=(function(le,xe,Ee){if(le)for(const Fe of le){const Ge=xe[Fe];if(Ge&&Ge.source===Ee&&Ge.type==="fill-extrusion")return!0}else for(const Fe in xe){const Ge=xe[Fe];if(Ge.source===Ee&&Ge.type==="fill-extrusion")return!0}return!1})(S&&S.layers,l,D.id),W=P.maxPitchScaleFactor(),K=D.tilesIn(_,W,G);K.sort(Mt);const te=[];for(const le of K)te.push({wrappedTileID:le.tileID.wrapped().key,queryResults:le.tile.queryRenderedFeatures(l,y,D._state,le.queryGeometry,le.cameraQueryGeometry,le.scale,S,P,W,lt(D.transform,le.tileID))});const ae=(function(le){const xe={},Ee={};for(const Fe of le){const Ge=Fe.queryResults,Ve=Fe.wrappedTileID,$e=Ee[Ve]=Ee[Ve]||{};for(const Ke in Ge){const ze=Ge[Ke],tt=$e[Ke]=$e[Ke]||{},rt=xe[Ke]=xe[Ke]||[];for(const gt of ze)tt[gt.featureIndex]||(tt[gt.featureIndex]=!0,rt.push(gt))}}return xe})(te);for(const le in ae)ae[le].forEach((xe=>{const Ee=xe.feature,Fe=D.getFeatureState(Ee.layer["source-layer"],Ee.id);Ee.source=Ee.layer.source,Ee.layer["source-layer"]&&(Ee.sourceLayer=Ee.layer["source-layer"]),Ee.state=Fe}));return ae}function Mt(D,l){const y=D.tileID,_=l.tileID;return y.overscaledZ-_.overscaledZ||y.canonical.y-_.canonical.y||y.wrap-_.wrap||y.canonical.x-_.canonical.x}function $t(D,l,y){return a._(this,void 0,void 0,(function*(){let _=D;if(D.url?_=(yield a.h(l.transformRequest(D.url,"Source"),y)).data:yield v.frameAsync(y),!_)return null;const S=a.M(a.e(_,D),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in _&&_.vector_layers&&(S.vectorLayerIds=_.vector_layers.map((P=>P.id))),S}))}class Pe{constructor(l,y){l&&(y?this.setSouthWest(l).setNorthEast(y):Array.isArray(l)&&(l.length===4?this.setSouthWest([l[0],l[1]]).setNorthEast([l[2],l[3]]):this.setSouthWest(l[0]).setNorthEast(l[1])))}setNorthEast(l){return this._ne=l instanceof a.N?new a.N(l.lng,l.lat):a.N.convert(l),this}setSouthWest(l){return this._sw=l instanceof a.N?new a.N(l.lng,l.lat):a.N.convert(l),this}extend(l){const y=this._sw,_=this._ne;let S,P;if(l instanceof a.N)S=l,P=l;else{if(!(l instanceof Pe))return Array.isArray(l)?l.length===4||l.every(Array.isArray)?this.extend(Pe.convert(l)):this.extend(a.N.convert(l)):l&&("lng"in l||"lon"in l)&&"lat"in l?this.extend(a.N.convert(l)):this;if(S=l._sw,P=l._ne,!S||!P)return this}return y||_?(y.lng=Math.min(S.lng,y.lng),y.lat=Math.min(S.lat,y.lat),_.lng=Math.max(P.lng,_.lng),_.lat=Math.max(P.lat,_.lat)):(this._sw=new a.N(S.lng,S.lat),this._ne=new a.N(P.lng,P.lat)),this}getCenter(){return new a.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.N(this.getWest(),this.getNorth())}getSouthEast(){return new a.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(l){const{lng:y,lat:_}=a.N.convert(l);let S=this._sw.lng<=y&&y<=this._ne.lng;return this._sw.lng>this._ne.lng&&(S=this._sw.lng>=y&&y>=this._ne.lng),this._sw.lat<=_&&_<=this._ne.lat&&S}static convert(l){return l instanceof Pe?l:l&&new Pe(l)}static fromLngLat(l,y=0){const _=360*y/40075017,S=_/Math.cos(Math.PI/180*l.lat);return new Pe(new a.N(l.lng-S,l.lat-_),new a.N(l.lng+S,l.lat+_))}adjustAntiMeridian(){const l=new a.N(this._sw.lng,this._sw.lat),y=new a.N(this._ne.lng,this._ne.lat);return new Pe(l,l.lng>y.lng?new a.N(y.lng+360,y.lat):y)}}class yn{constructor(l,y,_){this.bounds=Pe.convert(this.validateBounds(l)),this.minzoom=y||0,this.maxzoom=_||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const y=Math.pow(2,l.z),_=Math.floor(a.O(this.bounds.getWest())*y),S=Math.floor(a.Q(this.bounds.getNorth())*y),P=Math.ceil(a.O(this.bounds.getEast())*y),G=Math.ceil(a.Q(this.bounds.getSouth())*y);return l.x>=_&&l.x<P&&l.y>=S&&l.y<G}}class wn extends a.E{constructor(l,y,_,S){if(super(),this.id=l,this.dispatcher=_,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.M(y,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},y),this._collectResourceTiming=y.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(S)}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const l=yield $t(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),l&&(a.e(this,l),l.bounds&&(this.tileBounds=new yn(l.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}catch(l){this._tileJSONRequest=null,this.fire(new a.j(l))}}))}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}setSourceProperty(l){this._tileJSONRequest&&this._tileJSONRequest.abort(),l(),this.load()}setTiles(l){return this.setSourceProperty((()=>{this._options.tiles=l})),this}setUrl(l){return this.setSourceProperty((()=>{this.url=l,this._options.url=l})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(l){return a._(this,void 0,void 0,(function*(){const y=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),_={request:this.map._requestManager.transformRequest(y,"Tile"),uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};_.request.collectResourceTiming=this._collectResourceTiming;let S="RT";if(l.actor&&l.state!=="expired"){if(l.state==="loading")return new Promise(((P,G)=>{l.reloadPromise={resolve:P,reject:G}}))}else l.actor=this.dispatcher.getActor(),S="LT";l.abortController=new AbortController;try{const P=yield l.actor.sendAsync({type:S,data:_},l.abortController);if(delete l.abortController,l.aborted)return;this._afterTileLoadWorkerResponse(l,P)}catch(P){if(delete l.abortController,l.aborted)return;if(P&&P.status!==404)throw P;this._afterTileLoadWorkerResponse(l,null)}}))}_afterTileLoadWorkerResponse(l,y){if(y&&y.resourceTiming&&(l.resourceTiming=y.resourceTiming),y&&this.map._refreshExpiredTiles&&l.setExpiryData(y),l.loadVectorData(y,this.map.painter),l.reloadPromise){const _=l.reloadPromise;l.reloadPromise=null,this.loadTile(l).then(_.resolve).catch(_.reject)}}abortTile(l){return a._(this,void 0,void 0,(function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.actor&&(yield l.actor.sendAsync({type:"AT",data:{uid:l.uid,type:this.type,source:this.id}}))}))}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.unloadVectorData(),l.actor&&(yield l.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class dn extends a.E{constructor(l,y,_,S){super(),this.id=l,this.dispatcher=_,this.setEventedParent(S),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},y),a.e(this,a.M(y,["url","scheme","tileSize"]))}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const l=yield $t(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,l&&(a.e(this,l),l.bounds&&(this.tileBounds=new yn(l.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}catch(l){this._tileJSONRequest=null,this.fire(new a.j(l))}}))}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(l){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),l(),this.load()}setTiles(l){return this.setSourceProperty((()=>{this._options.tiles=l})),this}setUrl(l){return this.setSourceProperty((()=>{this.url=l,this._options.url=l})),this}serialize(){return a.e({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l){return a._(this,void 0,void 0,(function*(){const y=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);l.abortController=new AbortController;try{const _=yield Y.getImage(this.map._requestManager.transformRequest(y,"Tile"),l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(_&&_.data){this.map._refreshExpiredTiles&&_.cacheControl&&_.expires&&l.setExpiryData({cacheControl:_.cacheControl,expires:_.expires});const S=this.map.painter.context,P=S.gl,G=_.data;l.texture=this.map.painter.getTileTexture(G.width),l.texture?l.texture.update(G,{useMipmap:!0}):(l.texture=new ue(S,G,P.RGBA,{useMipmap:!0}),l.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE,P.LINEAR_MIPMAP_NEAREST)),l.state="loaded"}}catch(_){if(delete l.abortController,l.aborted)l.state="unloaded";else if(_)throw l.state="errored",_}}))}abortTile(l){return a._(this,void 0,void 0,(function*(){l.abortController&&(l.abortController.abort(),delete l.abortController)}))}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.texture&&this.map.painter.saveTileTexture(l.texture)}))}hasTransition(){return!1}}class An extends dn{constructor(l,y,_,S){super(l,y,_,S),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},y),this.encoding=y.encoding||"mapbox",this.redFactor=y.redFactor,this.greenFactor=y.greenFactor,this.blueFactor=y.blueFactor,this.baseShift=y.baseShift}loadTile(l){return a._(this,void 0,void 0,(function*(){const y=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),_=this.map._requestManager.transformRequest(y,"Tile");l.neighboringTiles=this._getNeighboringTiles(l.tileID),l.abortController=new AbortController;try{const S=yield Y.getImage(_,l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(S&&S.data){const P=S.data;this.map._refreshExpiredTiles&&S.cacheControl&&S.expires&&l.setExpiryData({cacheControl:S.cacheControl,expires:S.expires});const G=a.b(P)&&a.U()?P:yield this.readImageNow(P),W={type:this.type,uid:l.uid,source:this.id,rawImageData:G,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!l.actor||l.state==="expired"){l.actor=this.dispatcher.getActor();const K=yield l.actor.sendAsync({type:"LDT",data:W});l.dem=K,l.needsHillshadePrepare=!0,l.needsTerrainPrepare=!0,l.state="loaded"}}}catch(S){if(delete l.abortController,l.aborted)l.state="unloaded";else if(S)throw l.state="errored",S}}))}readImageNow(l){return a._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&a.V()){const y=l.width+2,_=l.height+2;try{return new a.R({width:y,height:_},yield a.W(l,-1,-1,y,_))}catch{}}return v.getImageData(l,1)}))}_getNeighboringTiles(l){const y=l.canonical,_=Math.pow(2,y.z),S=(y.x-1+_)%_,P=y.x===0?l.wrap-1:l.wrap,G=(y.x+1+_)%_,W=y.x+1===_?l.wrap+1:l.wrap,K={};return K[new a.S(l.overscaledZ,P,y.z,S,y.y).key]={backfilled:!1},K[new a.S(l.overscaledZ,W,y.z,G,y.y).key]={backfilled:!1},y.y>0&&(K[new a.S(l.overscaledZ,P,y.z,S,y.y-1).key]={backfilled:!1},K[new a.S(l.overscaledZ,l.wrap,y.z,y.x,y.y-1).key]={backfilled:!1},K[new a.S(l.overscaledZ,W,y.z,G,y.y-1).key]={backfilled:!1}),y.y+1<_&&(K[new a.S(l.overscaledZ,P,y.z,S,y.y+1).key]={backfilled:!1},K[new a.S(l.overscaledZ,l.wrap,y.z,y.x,y.y+1).key]={backfilled:!1},K[new a.S(l.overscaledZ,W,y.z,G,y.y+1).key]={backfilled:!1}),K}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.demTexture&&this.map.painter.saveTileTexture(l.demTexture),l.fbo&&(l.fbo.destroy(),delete l.fbo),l.dem&&delete l.dem,delete l.neighboringTiles,l.state="unloaded",l.actor&&(yield l.actor.sendAsync({type:"RDT",data:{type:this.type,uid:l.uid,source:this.id}}))}))}}class Cn extends a.E{constructor(l,y,_,S){super(),this.id=l,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=_.getActor(),this.setEventedParent(S),this._data=y.data,this._options=a.e({},y),this._collectResourceTiming=y.collectResourceTiming,y.maxzoom!==void 0&&(this.maxzoom=y.maxzoom),y.type&&(this.type=y.type),y.attribution&&(this.attribution=y.attribution),this.promoteId=y.promoteId;const P=a.X/this.tileSize;y.clusterMaxZoom!==void 0&&this.maxzoom<=y.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${y.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:y.cluster||!1,geojsonVtOptions:{buffer:(y.buffer!==void 0?y.buffer:128)*P,tolerance:(y.tolerance!==void 0?y.tolerance:.375)*P,extent:a.X,maxZoom:this.maxzoom,lineMetrics:y.lineMetrics||!1,generateId:y.generateId||!1},superclusterOptions:{maxZoom:y.clusterMaxZoom!==void 0?y.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,y.clusterMinPoints||2),extent:a.X,radius:(y.clusterRadius||50)*P,log:!1,generateId:y.generateId||!1},clusterProperties:y.clusterProperties,filter:y.filter},y.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return a._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(l){this.map=l,this.load()}setData(l){return this._data=l,this._updateWorkerData(),this}updateData(l){return this._updateWorkerData(l),this}getData(){return a._(this,void 0,void 0,(function*(){const l=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:l})}))}setClusterOptions(l){return this.workerOptions.cluster=l.cluster,l&&(l.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=l.clusterRadius),l.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=l.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(l){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:l,source:this.id}})}getClusterChildren(l){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:l,source:this.id}})}getClusterLeaves(l,y,_){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:l,limit:y,offset:_}})}_updateWorkerData(l){return a._(this,void 0,void 0,(function*(){const y=a.e({type:this.type},this.workerOptions);l?y.dataDiff=l:typeof this._data=="string"?(y.request=this.map._requestManager.transformRequest(v.resolveURL(this._data),"Source"),y.request.collectResourceTiming=this._collectResourceTiming):y.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.k("dataloading",{dataType:"source"}));try{const _=yield this.actor.sendAsync({type:"LD",data:y});if(this._pendingLoads--,this._removed||_.abandoned)return void this.fire(new a.k("dataabort",{dataType:"source"}));let S=null;_.resourceTiming&&_.resourceTiming[this.id]&&(S=_.resourceTiming[this.id].slice(0));const P={dataType:"source"};this._collectResourceTiming&&S&&S.length>0&&a.e(P,{resourceTiming:S}),this.fire(new a.k("data",Object.assign(Object.assign({},P),{sourceDataType:"metadata"}))),this.fire(new a.k("data",Object.assign(Object.assign({},P),{sourceDataType:"content"})))}catch(_){if(this._pendingLoads--,this._removed)return void this.fire(new a.k("dataabort",{dataType:"source"}));this.fire(new a.j(_))}}))}loaded(){return this._pendingLoads===0}loadTile(l){return a._(this,void 0,void 0,(function*(){const y=l.actor?"RT":"LT";l.actor=this.actor;const _={type:this.type,uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};l.abortController=new AbortController;const S=yield this.actor.sendAsync({type:y,data:_},l.abortController);delete l.abortController,l.unloadVectorData(),l.aborted||l.loadVectorData(S,this.map.painter,y==="RT")}))}abortTile(l){return a._(this,void 0,void 0,(function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.aborted=!0}))}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var ai=a.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Gi extends a.E{constructor(l,y,_,S){super(),this.id=l,this.dispatcher=_,this.coordinates=y.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(S),this.options=y}load(l){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const y=yield Y.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,y&&y.data&&(this.image=y.data,l&&(this.coordinates=l),this._finishLoading())}catch(y){this._request=null,this._loaded=!0,this.fire(new a.j(y))}}))}loaded(){return this._loaded}updateImage(l){return l.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=l.url,this.load(l.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(l){this.coordinates=l;const y=l.map(a.Z.fromLngLat);this.tileID=(function(S){let P=1/0,G=1/0,W=-1/0,K=-1/0;for(const xe of S)P=Math.min(P,xe.x),G=Math.min(G,xe.y),W=Math.max(W,xe.x),K=Math.max(K,xe.y);const te=Math.max(W-P,K-G),ae=Math.max(0,Math.floor(-Math.log(te)/Math.LN2)),le=Math.pow(2,ae);return new a.a1(ae,Math.floor((P+W)/2*le),Math.floor((G+K)/2*le))})(y),this.minzoom=this.maxzoom=this.tileID.z;const _=y.map((S=>this.tileID.getTilePoint(S)._round()));return this._boundsArray=new a.$,this._boundsArray.emplaceBack(_[0].x,_[0].y,0,0),this._boundsArray.emplaceBack(_[1].x,_[1].y,a.X,0),this._boundsArray.emplaceBack(_[3].x,_[3].y,0,a.X),this._boundsArray.emplaceBack(_[2].x,_[2].y,a.X,a.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,y=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,ai.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new ue(l,this.image,y.RGBA),this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE));let _=!1;for(const S in this.tiles){const P=this.tiles[S];P.state!=="loaded"&&(P.state="loaded",P.texture=this.texture,_=!0)}_&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(l){return a._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={}):l.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class ri extends Gi{constructor(l,y,_,S){super(l,y,_,S),this.roundZoom=!0,this.type="video",this.options=y}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1;const l=this.options;this.urls=[];for(const y of l.urls)this.urls.push(this.map._requestManager.transformRequest(y,"Source").url);try{const y=yield a.a3(this.urls);if(this._loaded=!0,!y)return;this.video=y,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(y){this.fire(new a.j(y))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(l){if(this.video){const y=this.video.seekable;l<y.start(0)||l>y.end(0)?this.fire(new a.j(new a.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${y.start(0)} and ${y.end(0)}-second mark.`))):this.video.currentTime=l}}getVideo(){return this.video}onAdd(l){this.map||(this.map=l,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const l=this.map.painter.context,y=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,ai.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE),y.texSubImage2D(y.TEXTURE_2D,0,0,0,y.RGBA,y.UNSIGNED_BYTE,this.video)):(this.texture=new ue(l,this.video,y.RGBA),this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE));let _=!1;for(const S in this.tiles){const P=this.tiles[S];P.state!=="loaded"&&(P.state="loaded",P.texture=this.texture,_=!0)}_&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ji extends Gi{constructor(l,y,_,S){super(l,y,_,S),y.coordinates?Array.isArray(y.coordinates)&&y.coordinates.length===4&&!y.coordinates.some((P=>!Array.isArray(P)||P.length!==2||P.some((G=>typeof G!="number"))))||this.fire(new a.j(new a.a2(`sources.${l}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.j(new a.a2(`sources.${l}`,null,'missing required property "coordinates"'))),y.animate&&typeof y.animate!="boolean"&&this.fire(new a.j(new a.a2(`sources.${l}`,null,'optional "animate" property must be a boolean value'))),y.canvas?typeof y.canvas=="string"||y.canvas instanceof HTMLCanvasElement||this.fire(new a.j(new a.a2(`sources.${l}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.j(new a.a2(`sources.${l}`,null,'missing required property "canvas"'))),this.options=y,this.animate=y.animate===void 0||y.animate}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(l){this.map=l,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let l=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,l=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,l=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const y=this.map.painter.context,_=y.gl;this.boundsBuffer||(this.boundsBuffer=y.createVertexBuffer(this._boundsArray,ai.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture?(l||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ue(y,this.canvas,_.RGBA,{premultiply:!0});let S=!1;for(const P in this.tiles){const G=this.tiles[P];G.state!=="loaded"&&(G.state="loaded",G.texture=this.texture,S=!0)}S&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const l of[this.canvas.width,this.canvas.height])if(isNaN(l)||l<=0)return!0;return!1}}const Si={},lr=D=>{switch(D){case"geojson":return Cn;case"image":return Gi;case"raster":return dn;case"raster-dem":return An;case"vector":return wn;case"video":return ri;case"canvas":return ji}return Si[D]},Tt="RTLPluginLoaded";class Ji extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=St()}_syncState(l){return this.status=l,this.dispatcher.broadcast("SRPS",{pluginStatus:l,pluginURL:this.url}).catch((y=>{throw this.status="error",y}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(l){return a._(this,arguments,void 0,(function*(y,_=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=v.resolveURL(y),!this.url)throw new Error(`requested url ${y} is invalid`);if(this.status==="unavailable"){if(!_)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return a._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.k(Tt))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Qi=null;function Vr(){return Qi||(Qi=new Ji),Qi}class wo{constructor(l,y){this.timeAdded=0,this.fadeEndTime=0,this.tileID=l,this.uid=a.a4(),this.uses=0,this.tileSize=y,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(l){const y=l+this.timeAdded;y<this.fadeEndTime||(this.fadeEndTime=y)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(l){this.demTexture&&l.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(l,y,_){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=(function(S,P){const G={};if(!P)return G;for(const W of S){const K=W.layerIds.map((te=>P.getLayer(te))).filter(Boolean);if(K.length!==0){W.layers=K,W.stateDependentLayerIds&&(W.stateDependentLayers=W.stateDependentLayerIds.map((te=>K.filter((ae=>ae.id===te))[0])));for(const te of K)G[te.id]=W}}return G})(l.buckets,y.style),this.hasSymbolBuckets=!1;for(const S in this.buckets){const P=this.buckets[S];if(P instanceof a.a6){if(this.hasSymbolBuckets=!0,!_)break;P.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const S in this.buckets){const P=this.buckets[S];if(P instanceof a.a6&&P.hasRTLText){this.hasRTLText=!0,Vr().lazyLoad();break}}this.queryPadding=0;for(const S in this.buckets){const P=this.buckets[S];this.queryPadding=Math.max(this.queryPadding,y.style.getLayer(S).queryRadius(P))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage)}else this.collisionBoxArray=new a.a5}unloadVectorData(){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(l){return this.buckets[l.id]}upload(l){for(const _ in this.buckets){const S=this.buckets[_];S.uploadPending()&&S.upload(l)}const y=l.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ue(l,this.imageAtlas.image,y.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ue(l,this.glyphAtlasImage,y.ALPHA),this.glyphAtlasImage=null)}prepare(l){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture)}queryRenderedFeatures(l,y,_,S,P,G,W,K,te,ae){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:S,cameraQueryGeometry:P,scale:G,tileSize:this.tileSize,pixelPosMatrix:ae,transform:K,params:W,queryPadding:this.queryPadding*te},l,y,_):{}}querySourceFeatures(l,y){const _=this.latestFeatureIndex;if(!_||!_.rawTileData)return;const S=_.loadVTLayers(),P=y&&y.sourceLayer?y.sourceLayer:"",G=S._geojsonTileLayer||S[P];if(!G)return;const W=a.a7(y&&y.filter),{z:K,x:te,y:ae}=this.tileID.canonical,le={z:K,x:te,y:ae};for(let xe=0;xe<G.length;xe++){const Ee=G.feature(xe);if(W.needGeometry){const Ve=a.a8(Ee,!0);if(!W.filter(new a.z(this.tileID.overscaledZ),Ve,this.tileID.canonical))continue}else if(!W.filter(new a.z(this.tileID.overscaledZ),Ee))continue;const Fe=_.getId(Ee,P),Ge=new a.a9(Ee,K,te,ae,Fe);Ge.tile=le,l.push(Ge)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const y=this.expirationTime;if(l.cacheControl){const _=a.aa(l.cacheControl);_["max-age"]&&(this.expirationTime=Date.now()+1e3*_["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const _=Date.now();let S=!1;if(this.expirationTime>_)S=!1;else if(y)if(this.expirationTime<y)S=!0;else{const P=this.expirationTime-y;P?this.expirationTime=_+Math.max(P,3e4):S=!0}else S=!0;S?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(l,y){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(l).length===0)return;const _=this.latestFeatureIndex.loadVTLayers();for(const S in this.buckets){if(!y.style.hasLayer(S))continue;const P=this.buckets[S],G=P.layers[0].sourceLayer||"_geojsonTileLayer",W=_[G],K=l[G];if(!W||!K||Object.keys(K).length===0)continue;P.update(K,W,this.imageAtlas&&this.imageAtlas.patternPositions||{});const te=y&&y.style&&y.style.getLayer(S);te&&(this.queryPadding=Math.max(this.queryPadding,te.queryRadius(P)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<v.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(l){this.symbolFadeHoldUntil=v.now()+l}setDependencies(l,y){const _={};for(const S of y)_[S]=!0;this.dependencies[l]=_}hasDependency(l,y){for(const _ of l){const S=this.dependencies[_];if(S){for(const P of y)if(S[P])return!0}}return!1}}class ln{constructor(l,y){this.max=l,this.onRemove=y,this.reset()}reset(){for(const l in this.data)for(const y of this.data[l])y.timeout&&clearTimeout(y.timeout),this.onRemove(y.value);return this.data={},this.order=[],this}add(l,y,_){const S=l.wrapped().key;this.data[S]===void 0&&(this.data[S]=[]);const P={value:y,timeout:void 0};if(_!==void 0&&(P.timeout=setTimeout((()=>{this.remove(l,P)}),_)),this.data[S].push(P),this.order.push(S),this.order.length>this.max){const G=this._getAndRemoveByKey(this.order[0]);G&&this.onRemove(G)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const y=this.data[l].shift();return y.timeout&&clearTimeout(y.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),y.value}getByKey(l){const y=this.data[l];return y?y[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,y){if(!this.has(l))return this;const _=l.wrapped().key,S=y===void 0?0:this.data[_].indexOf(y),P=this.data[_][S];return this.data[_].splice(S,1),P.timeout&&clearTimeout(P.timeout),this.data[_].length===0&&delete this.data[_],this.onRemove(P.value),this.order.splice(this.order.indexOf(_),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const y=this._getAndRemoveByKey(this.order[0]);y&&this.onRemove(y)}return this}filter(l){const y=[];for(const _ in this.data)for(const S of this.data[_])l(S.value)||y.push(S);for(const _ of y)this.remove(_.value.tileID,_)}}class Nn{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,y,_){const S=String(y);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][S]=this.stateChanges[l][S]||{},a.e(this.stateChanges[l][S],_),this.deletedStates[l]===null){this.deletedStates[l]={};for(const P in this.state[l])P!==S&&(this.deletedStates[l][P]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][S]===null){this.deletedStates[l][S]={};for(const P in this.state[l][S])_[P]||(this.deletedStates[l][S][P]=null)}else for(const P in _)this.deletedStates[l]&&this.deletedStates[l][S]&&this.deletedStates[l][S][P]===null&&delete this.deletedStates[l][S][P]}removeFeatureState(l,y,_){if(this.deletedStates[l]===null)return;const S=String(y);if(this.deletedStates[l]=this.deletedStates[l]||{},_&&y!==void 0)this.deletedStates[l][S]!==null&&(this.deletedStates[l][S]=this.deletedStates[l][S]||{},this.deletedStates[l][S][_]=null);else if(y!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][S])for(_ in this.deletedStates[l][S]={},this.stateChanges[l][S])this.deletedStates[l][S][_]=null;else this.deletedStates[l][S]=null;else this.deletedStates[l]=null}getState(l,y){const _=String(y),S=a.e({},(this.state[l]||{})[_],(this.stateChanges[l]||{})[_]);if(this.deletedStates[l]===null)return{};if(this.deletedStates[l]){const P=this.deletedStates[l][y];if(P===null)return{};for(const G in P)delete S[G]}return S}initializeTileState(l,y){l.setFeatureState(this.state,y)}coalesceChanges(l,y){const _={};for(const S in this.stateChanges){this.state[S]=this.state[S]||{};const P={};for(const G in this.stateChanges[S])this.state[S][G]||(this.state[S][G]={}),a.e(this.state[S][G],this.stateChanges[S][G]),P[G]=this.state[S][G];_[S]=P}for(const S in this.deletedStates){this.state[S]=this.state[S]||{};const P={};if(this.deletedStates[S]===null)for(const G in this.state[S])P[G]={},this.state[S][G]={};else for(const G in this.deletedStates[S]){if(this.deletedStates[S][G]===null)this.state[S][G]={};else for(const W of Object.keys(this.deletedStates[S][G]))delete this.state[S][G][W];P[G]=this.state[S][G]}_[S]=_[S]||{},a.e(_[S],P)}if(this.stateChanges={},this.deletedStates={},Object.keys(_).length!==0)for(const S in l)l[S].setFeatureState(_,y)}}class qn extends a.E{constructor(l,y,_){super(),this.id=l,this.dispatcher=_,this.on("data",(S=>this._dataHandler(S))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((S,P,G,W)=>{const K=new(lr(P.type))(S,P,G,W);if(K.id!==S)throw new Error(`Expected Source id to be ${S} instead of ${K.id}`);return K})(l,y,_,this),this._tiles={},this._cache=new ln(0,(S=>this._unloadTile(S))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Nn,this._didEmitContent=!1,this._updated=!1}onAdd(l){this.map=l,this._maxTileCacheSize=l?l._maxTileCacheSize:null,this._maxTileCacheZoomLevels=l?l._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(l)}onRemove(l){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(l)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const l in this._tiles){const y=this._tiles[l];if(y.state!=="loaded"&&y.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(l,y,_){return a._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(l),this._tileLoaded(l,y,_)}catch(S){l.state="errored",S.status!==404?this._source.fire(new a.j(S,{tile:l})):this.update(this.transform,this.terrain)}}))}_unloadTile(l){this._source.unloadTile&&this._source.unloadTile(l)}_abortTile(l){this._source.abortTile&&this._source.abortTile(l),this._source.fire(new a.k("dataabort",{tile:l,coord:l.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const y in this._tiles){const _=this._tiles[y];_.upload(l),_.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((l=>l.tileID)).sort(fr).map((l=>l.key))}getRenderableIds(l){const y=[];for(const _ in this._tiles)this._isIdRenderable(_,l)&&y.push(this._tiles[_]);return l?y.sort(((_,S)=>{const P=_.tileID,G=S.tileID,W=new a.P(P.canonical.x,P.canonical.y)._rotate(this.transform.angle),K=new a.P(G.canonical.x,G.canonical.y)._rotate(this.transform.angle);return P.overscaledZ-G.overscaledZ||K.y-W.y||K.x-W.x})).map((_=>_.tileID.key)):y.map((_=>_.tileID)).sort(fr).map((_=>_.key))}hasRenderableParent(l){const y=this.findLoadedParent(l,0);return!!y&&this._isIdRenderable(y.tileID.key)}_isIdRenderable(l,y){return this._tiles[l]&&this._tiles[l].hasData()&&!this._coveredTiles[l]&&(y||!this._tiles[l].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const l in this._tiles)this._tiles[l].state!=="errored"&&this._reloadTile(l,"reloading")}}_reloadTile(l,y){return a._(this,void 0,void 0,(function*(){const _=this._tiles[l];_&&(_.state!=="loading"&&(_.state=y),yield this._loadTile(_,l,y))}))}_tileLoaded(l,y,_){l.timeAdded=v.now(),_==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(y,l),this.getSource().type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),l.aborted||this._source.fire(new a.k("data",{dataType:"source",tile:l,coord:l.tileID}))}_backfillDEM(l){const y=this.getRenderableIds();for(let S=0;S<y.length;S++){const P=y[S];if(l.neighboringTiles&&l.neighboringTiles[P]){const G=this.getTileByID(P);_(l,G),_(G,l)}}function _(S,P){S.needsHillshadePrepare=!0,S.needsTerrainPrepare=!0;let G=P.tileID.canonical.x-S.tileID.canonical.x;const W=P.tileID.canonical.y-S.tileID.canonical.y,K=Math.pow(2,S.tileID.canonical.z),te=P.tileID.key;G===0&&W===0||Math.abs(W)>1||(Math.abs(G)>1&&(Math.abs(G+K)===1?G+=K:Math.abs(G-K)===1&&(G-=K)),P.dem&&S.dem&&(S.dem.backfillBorder(P.dem,G,W),S.neighboringTiles&&S.neighboringTiles[te]&&(S.neighboringTiles[te].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,y,_,S){for(const P in this._tiles){let G=this._tiles[P];if(S[P]||!G.hasData()||G.tileID.overscaledZ<=y||G.tileID.overscaledZ>_)continue;let W=G.tileID;for(;G&&G.tileID.overscaledZ>y+1;){const te=G.tileID.scaledTo(G.tileID.overscaledZ-1);G=this._tiles[te.key],G&&G.hasData()&&(W=te)}let K=W;for(;K.overscaledZ>y;)if(K=K.scaledTo(K.overscaledZ-1),l[K.key]){S[W.key]=W;break}}}findLoadedParent(l,y){if(l.key in this._loadedParentTiles){const _=this._loadedParentTiles[l.key];return _&&_.tileID.overscaledZ>=y?_:null}for(let _=l.overscaledZ-1;_>=y;_--){const S=l.scaledTo(_),P=this._getLoadedTile(S);if(P)return P}}findLoadedSibling(l){return this._getLoadedTile(l)}_getLoadedTile(l){const y=this._tiles[l.key];return y&&y.hasData()?y:this._cache.getByKey(l.wrapped().key)}updateCacheSize(l){const y=Math.ceil(l.width/this._source.tileSize)+1,_=Math.ceil(l.height/this._source.tileSize)+1,S=Math.floor(y*_*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),P=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,S):S;this._cache.setMaxSize(P)}handleWrapJump(l){const y=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,y){const _={};for(const S in this._tiles){const P=this._tiles[S];P.tileID=P.tileID.unwrapTo(P.tileID.wrap+y),_[P.tileID.key]=P}this._tiles=_;for(const S in this._timers)clearTimeout(this._timers[S]),delete this._timers[S];for(const S in this._tiles)this._setTileReloadTimer(S,this._tiles[S])}}_updateCoveredAndRetainedTiles(l,y,_,S,P,G){const W={},K={},te=Object.keys(l),ae=v.now();for(const le of te){const xe=l[le],Ee=this._tiles[le];if(!Ee||Ee.fadeEndTime!==0&&Ee.fadeEndTime<=ae)continue;const Fe=this.findLoadedParent(xe,y),Ge=this.findLoadedSibling(xe),Ve=Fe||Ge||null;Ve&&(this._addTile(Ve.tileID),W[Ve.tileID.key]=Ve.tileID),K[le]=xe}this._retainLoadedChildren(K,S,_,l);for(const le in W)l[le]||(this._coveredTiles[le]=!0,l[le]=W[le]);if(G){const le={},xe={};for(const Ee of P)this._tiles[Ee.key].hasData()?le[Ee.key]=Ee:xe[Ee.key]=Ee;for(const Ee in xe){const Fe=xe[Ee].children(this._source.maxzoom);this._tiles[Fe[0].key]&&this._tiles[Fe[1].key]&&this._tiles[Fe[2].key]&&this._tiles[Fe[3].key]&&(le[Fe[0].key]=l[Fe[0].key]=Fe[0],le[Fe[1].key]=l[Fe[1].key]=Fe[1],le[Fe[2].key]=l[Fe[2].key]=Fe[2],le[Fe[3].key]=l[Fe[3].key]=Fe[3],delete xe[Ee])}for(const Ee in xe){const Fe=xe[Ee],Ge=this.findLoadedParent(Fe,this._source.minzoom),Ve=this.findLoadedSibling(Fe),$e=Ge||Ve||null;if($e){le[$e.tileID.key]=l[$e.tileID.key]=$e.tileID;for(const Ke in le)le[Ke].isChildOf($e.tileID)&&delete le[Ke]}}for(const Ee in this._tiles)le[Ee]||(this._coveredTiles[Ee]=!0)}}update(l,y){if(!this._sourceLoaded||this._paused)return;let _;this.transform=l,this.terrain=y,this.updateCacheSize(l),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?_=l.getVisibleUnwrappedCoordinates(this._source.tileID).map((ae=>new a.S(ae.canonical.z,ae.wrap,ae.canonical.z,ae.canonical.x,ae.canonical.y))):(_=l.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:y}),this._source.hasTile&&(_=_.filter((ae=>this._source.hasTile(ae))))):_=[];const S=l.coveringZoomLevel(this._source),P=Math.max(S-qn.maxOverzooming,this._source.minzoom),G=Math.max(S+qn.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const ae={};for(const le of _)if(le.canonical.z>this._source.minzoom){const xe=le.scaledTo(le.canonical.z-1);ae[xe.key]=xe;const Ee=le.scaledTo(Math.max(this._source.minzoom,Math.min(le.canonical.z,5)));ae[Ee.key]=Ee}_=_.concat(Object.values(ae))}const W=_.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,W&&this.fire(new a.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const K=this._updateRetainedTiles(_,S);us(this._source.type)&&this._updateCoveredAndRetainedTiles(K,P,G,S,_,y);for(const ae in K)this._tiles[ae].clearFadeHold();const te=a.ab(this._tiles,K);for(const ae of te){const le=this._tiles[ae];le.hasSymbolBuckets&&!le.holdingForFade()?le.setHoldDuration(this.map._fadeDuration):le.hasSymbolBuckets&&!le.symbolFadeFinished()||this._removeTile(ae)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForFade()&&this._removeTile(l)}_updateRetainedTiles(l,y){var _;const S={},P={},G=Math.max(y-qn.maxOverzooming,this._source.minzoom),W=Math.max(y+qn.maxUnderzooming,this._source.minzoom),K={};for(const te of l){const ae=this._addTile(te);S[te.key]=te,ae.hasData()||y<this._source.maxzoom&&(K[te.key]=te)}this._retainLoadedChildren(K,y,W,S);for(const te of l){let ae=this._tiles[te.key];if(ae.hasData())continue;if(y+1>this._source.maxzoom){const xe=te.children(this._source.maxzoom)[0],Ee=this.getTile(xe);if(Ee&&Ee.hasData()){S[xe.key]=xe;continue}}else{const xe=te.children(this._source.maxzoom);if(S[xe[0].key]&&S[xe[1].key]&&S[xe[2].key]&&S[xe[3].key])continue}let le=ae.wasRequested();for(let xe=te.overscaledZ-1;xe>=G;--xe){const Ee=te.scaledTo(xe);if(P[Ee.key])break;if(P[Ee.key]=!0,ae=this.getTile(Ee),!ae&&le&&(ae=this._addTile(Ee)),ae){const Fe=ae.hasData();if((Fe||!(!((_=this.map)===null||_===void 0)&&_.cancelPendingTileRequestsWhileZooming)||le)&&(S[Ee.key]=Ee),le=ae.wasRequested(),Fe)break}}}return S}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const l in this._tiles){const y=[];let _,S=this._tiles[l].tileID;for(;S.overscaledZ>0;){if(S.key in this._loadedParentTiles){_=this._loadedParentTiles[S.key];break}y.push(S.key);const P=S.scaledTo(S.overscaledZ-1);if(_=this._getLoadedTile(P),_)break;S=P}for(const P of y)this._loadedParentTiles[P]=_}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const l in this._tiles){const y=this._tiles[l].tileID,_=this._getLoadedTile(y);this._loadedSiblingTiles[y.key]=_}}_addTile(l){let y=this._tiles[l.key];if(y)return y;y=this._cache.getAndRemove(l),y&&(this._setTileReloadTimer(l.key,y),y.tileID=l,this._state.initializeTileState(y,this.map?this.map.painter:null),this._cacheTimers[l.key]&&(clearTimeout(this._cacheTimers[l.key]),delete this._cacheTimers[l.key],this._setTileReloadTimer(l.key,y)));const _=y;return y||(y=new wo(l,this._source.tileSize*l.overscaleFactor()),this._loadTile(y,l.key,y.state)),y.uses++,this._tiles[l.key]=y,_||this._source.fire(new a.k("dataloading",{tile:y,coord:y.tileID,dataType:"source"})),y}_setTileReloadTimer(l,y){l in this._timers&&(clearTimeout(this._timers[l]),delete this._timers[l]);const _=y.getExpiryTimeout();_&&(this._timers[l]=setTimeout((()=>{this._reloadTile(l,"expired"),delete this._timers[l]}),_))}_removeTile(l){const y=this._tiles[l];y&&(y.uses--,delete this._tiles[l],this._timers[l]&&(clearTimeout(this._timers[l]),delete this._timers[l]),y.uses>0||(y.hasData()&&y.state!=="reloading"?this._cache.add(y.tileID,y,y.getExpiryTimeout()):(y.aborted=!0,this._abortTile(y),this._unloadTile(y))))}_dataHandler(l){const y=l.sourceDataType;l.dataType==="source"&&y==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&l.dataType==="source"&&y==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(l);this._cache.reset()}tilesIn(l,y,_){const S=[],P=this.transform;if(!P)return S;const G=_?P.getCameraQueryGeometry(l):l,W=l.map((Fe=>P.pointCoordinate(Fe,this.terrain))),K=G.map((Fe=>P.pointCoordinate(Fe,this.terrain))),te=this.getIds();let ae=1/0,le=1/0,xe=-1/0,Ee=-1/0;for(const Fe of K)ae=Math.min(ae,Fe.x),le=Math.min(le,Fe.y),xe=Math.max(xe,Fe.x),Ee=Math.max(Ee,Fe.y);for(let Fe=0;Fe<te.length;Fe++){const Ge=this._tiles[te[Fe]];if(Ge.holdingForFade())continue;const Ve=Ge.tileID,$e=Math.pow(2,P.zoom-Ge.tileID.overscaledZ),Ke=y*Ge.queryPadding*a.X/Ge.tileSize/$e,ze=[Ve.getTilePoint(new a.Z(ae,le)),Ve.getTilePoint(new a.Z(xe,Ee))];if(ze[0].x-Ke<a.X&&ze[0].y-Ke<a.X&&ze[1].x+Ke>=0&&ze[1].y+Ke>=0){const tt=W.map((gt=>Ve.getTilePoint(gt))),rt=K.map((gt=>Ve.getTilePoint(gt)));S.push({tile:Ge,tileID:Ve,queryGeometry:tt,cameraQueryGeometry:rt,scale:$e})}}return S}getVisibleCoordinates(l){const y=this.getRenderableIds(l).map((_=>this._tiles[_].tileID));for(const _ of y)_.posMatrix=this.transform.calculatePosMatrix(_.toUnwrapped());return y}hasTransition(){if(this._source.hasTransition())return!0;if(us(this._source.type)){const l=v.now();for(const y in this._tiles)if(this._tiles[y].fadeEndTime>=l)return!0}return!1}setFeatureState(l,y,_){this._state.updateState(l=l||"_geojsonTileLayer",y,_)}removeFeatureState(l,y,_){this._state.removeFeatureState(l=l||"_geojsonTileLayer",y,_)}getFeatureState(l,y){return this._state.getState(l=l||"_geojsonTileLayer",y)}setDependencies(l,y,_){const S=this._tiles[l];S&&S.setDependencies(y,_)}reloadTilesForDependencies(l,y){for(const _ in this._tiles)this._tiles[_].hasDependency(l,y)&&this._reloadTile(_,"reloading");this._cache.filter((_=>!_.hasDependency(l,y)))}}function fr(D,l){const y=Math.abs(2*D.wrap)-+(D.wrap<0),_=Math.abs(2*l.wrap)-+(l.wrap<0);return D.overscaledZ-l.overscaledZ||_-y||l.canonical.y-D.canonical.y||l.canonical.x-D.canonical.x}function us(D){return D==="raster"||D==="image"||D==="video"}qn.maxOverzooming=10,qn.maxUnderzooming=3;class pi{constructor(l,y){this.reset(l,y)}reset(l,y){this.points=l||[],this._distances=[0];for(let _=1;_<this.points.length;_++)this._distances[_]=this._distances[_-1]+this.points[_].dist(this.points[_-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(y||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=a.ac(l,0,1);let y=1,_=this._distances[y];const S=l*this.paddedLength+this.padding;for(;_<S&&y<this._distances.length;)_=this._distances[++y];const P=y-1,G=this._distances[P],W=_-G,K=W>0?(S-G)/W:0;return this.points[P].mult(1-K).add(this.points[y].mult(K))}}function oa(D,l){let y=!0;return D==="always"||D!=="never"&&l!=="never"||(y=!1),y}class sa{constructor(l,y,_){const S=this.boxCells=[],P=this.circleCells=[];this.xCellCount=Math.ceil(l/_),this.yCellCount=Math.ceil(y/_);for(let G=0;G<this.xCellCount*this.yCellCount;G++)S.push([]),P.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=y,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/y,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,y,_,S,P){this._forEachCell(y,_,S,P,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(y),this.bboxes.push(_),this.bboxes.push(S),this.bboxes.push(P)}insertCircle(l,y,_,S){this._forEachCell(y-S,_-S,y+S,_+S,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(y),this.circles.push(_),this.circles.push(S)}_insertBoxCell(l,y,_,S,P,G){this.boxCells[P].push(G)}_insertCircleCell(l,y,_,S,P,G){this.circleCells[P].push(G)}_query(l,y,_,S,P,G,W){if(_<0||l>this.width||S<0||y>this.height)return[];const K=[];if(l<=0&&y<=0&&this.width<=_&&this.height<=S){if(P)return[{key:null,x1:l,y1:y,x2:_,y2:S}];for(let te=0;te<this.boxKeys.length;te++)K.push({key:this.boxKeys[te],x1:this.bboxes[4*te],y1:this.bboxes[4*te+1],x2:this.bboxes[4*te+2],y2:this.bboxes[4*te+3]});for(let te=0;te<this.circleKeys.length;te++){const ae=this.circles[3*te],le=this.circles[3*te+1],xe=this.circles[3*te+2];K.push({key:this.circleKeys[te],x1:ae-xe,y1:le-xe,x2:ae+xe,y2:le+xe})}}else this._forEachCell(l,y,_,S,this._queryCell,K,{hitTest:P,overlapMode:G,seenUids:{box:{},circle:{}}},W);return K}query(l,y,_,S){return this._query(l,y,_,S,!1,null)}hitTest(l,y,_,S,P,G){return this._query(l,y,_,S,!0,P,G).length>0}hitTestCircle(l,y,_,S,P){const G=l-_,W=l+_,K=y-_,te=y+_;if(W<0||G>this.width||te<0||K>this.height)return!1;const ae=[];return this._forEachCell(G,K,W,te,this._queryCellCircle,ae,{hitTest:!0,overlapMode:S,circle:{x:l,y,radius:_},seenUids:{box:{},circle:{}}},P),ae.length>0}_queryCell(l,y,_,S,P,G,W,K){const{seenUids:te,hitTest:ae,overlapMode:le}=W,xe=this.boxCells[P];if(xe!==null){const Fe=this.bboxes;for(const Ge of xe)if(!te.box[Ge]){te.box[Ge]=!0;const Ve=4*Ge,$e=this.boxKeys[Ge];if(l<=Fe[Ve+2]&&y<=Fe[Ve+3]&&_>=Fe[Ve+0]&&S>=Fe[Ve+1]&&(!K||K($e))&&(!ae||!oa(le,$e.overlapMode))&&(G.push({key:$e,x1:Fe[Ve],y1:Fe[Ve+1],x2:Fe[Ve+2],y2:Fe[Ve+3]}),ae))return!0}}const Ee=this.circleCells[P];if(Ee!==null){const Fe=this.circles;for(const Ge of Ee)if(!te.circle[Ge]){te.circle[Ge]=!0;const Ve=3*Ge,$e=this.circleKeys[Ge];if(this._circleAndRectCollide(Fe[Ve],Fe[Ve+1],Fe[Ve+2],l,y,_,S)&&(!K||K($e))&&(!ae||!oa(le,$e.overlapMode))){const Ke=Fe[Ve],ze=Fe[Ve+1],tt=Fe[Ve+2];if(G.push({key:$e,x1:Ke-tt,y1:ze-tt,x2:Ke+tt,y2:ze+tt}),ae)return!0}}}return!1}_queryCellCircle(l,y,_,S,P,G,W,K){const{circle:te,seenUids:ae,overlapMode:le}=W,xe=this.boxCells[P];if(xe!==null){const Fe=this.bboxes;for(const Ge of xe)if(!ae.box[Ge]){ae.box[Ge]=!0;const Ve=4*Ge,$e=this.boxKeys[Ge];if(this._circleAndRectCollide(te.x,te.y,te.radius,Fe[Ve+0],Fe[Ve+1],Fe[Ve+2],Fe[Ve+3])&&(!K||K($e))&&!oa(le,$e.overlapMode))return G.push(!0),!0}}const Ee=this.circleCells[P];if(Ee!==null){const Fe=this.circles;for(const Ge of Ee)if(!ae.circle[Ge]){ae.circle[Ge]=!0;const Ve=3*Ge,$e=this.circleKeys[Ge];if(this._circlesCollide(Fe[Ve],Fe[Ve+1],Fe[Ve+2],te.x,te.y,te.radius)&&(!K||K($e))&&!oa(le,$e.overlapMode))return G.push(!0),!0}}}_forEachCell(l,y,_,S,P,G,W,K){const te=this._convertToXCellCoord(l),ae=this._convertToYCellCoord(y),le=this._convertToXCellCoord(_),xe=this._convertToYCellCoord(S);for(let Ee=te;Ee<=le;Ee++)for(let Fe=ae;Fe<=xe;Fe++)if(P.call(this,l,y,_,S,this.xCellCount*Fe+Ee,G,W,K))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,y,_,S,P,G){const W=S-l,K=P-y,te=_+G;return te*te>W*W+K*K}_circleAndRectCollide(l,y,_,S,P,G,W){const K=(G-S)/2,te=Math.abs(l-(S+K));if(te>K+_)return!1;const ae=(W-P)/2,le=Math.abs(y-(P+ae));if(le>ae+_)return!1;if(te<=K||le<=ae)return!0;const xe=te-K,Ee=le-ae;return xe*xe+Ee*Ee<=_*_}}function Ys(D,l,y,_,S){const P=a.H();return l?(a.K(P,P,[1/S,1/S,1]),y||a.ad(P,P,_.angle)):a.L(P,_.labelPlaneMatrix,D),P}function zs(D,l,y,_,S){if(l){const P=a.ae(D);return a.K(P,P,[S,S,1]),y||a.ad(P,P,-_.angle),P}return _.glCoordMatrix}function je(D,l,y,_){let S;_?(S=[D,l,_(D,l),1],a.af(S,S,y)):(S=[D,l,0,1],Ii(S,S,y));const P=S[3];return{point:new a.P(S[0]/P,S[1]/P),signedDistanceFromCamera:P,isOccluded:!1}}function pe(D,l){return .5+D/l*.5}function ge(D,l){return D.x>=-l[0]&&D.x<=l[0]&&D.y>=-l[1]&&D.y<=l[1]}function ke(D,l,y,_,S,P,G,W,K,te,ae,le,xe,Ee,Fe){const Ge=_?D.textSizeData:D.iconSizeData,Ve=a.ag(Ge,y.transform.zoom),$e=[256/y.width*2+1,256/y.height*2+1],Ke=_?D.text.dynamicLayoutVertexArray:D.icon.dynamicLayoutVertexArray;Ke.clear();const ze=D.lineVertexArray,tt=_?D.text.placedSymbolArray:D.icon.placedSymbolArray,rt=y.transform.width/y.transform.height;let gt=!1;for(let jt=0;jt<tt.length;jt++){const un=tt.get(jt);if(un.hidden||un.writingMode===a.ah.vertical&&!gt){Qn(un.numGlyphs,Ke);continue}gt=!1;const gn=je(un.anchorX,un.anchorY,l,Fe);if(!ge(gn.point,$e)){Qn(un.numGlyphs,Ke);continue}const En=pe(y.transform.cameraToCenterDistance,gn.signedDistanceFromCamera),bn=a.ai(Ge,Ve,un),hn=G?bn/En:bn*En,kn={getElevation:Fe,labelPlaneMatrix:S,lineVertexArray:ze,pitchWithMap:G,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:te,tileAnchorPoint:new a.P(un.anchorX,un.anchorY),unwrappedTileID:ae,width:le,height:xe,translation:Ee},ci=nt(kn,un,hn,!1,W,l,P,D.glyphOffsetArray,Ke,rt,K);gt=ci.useVertical,(ci.notEnoughRoom||gt||ci.needsFlipping&&nt(kn,un,hn,!0,W,l,P,D.glyphOffsetArray,Ke,rt,K).notEnoughRoom)&&Qn(un.numGlyphs,Ke)}_?D.text.dynamicLayoutVertexBuffer.updateData(Ke):D.icon.dynamicLayoutVertexBuffer.updateData(Ke)}function Ne(D,l,y,_,S,P,G,W){const K=P.glyphStartIndex+P.numGlyphs,te=P.lineStartIndex,ae=P.lineStartIndex+P.lineLength,le=l.getoffsetX(P.glyphStartIndex),xe=l.getoffsetX(K-1),Ee=pn(D*le,y,_,S,P.segment,te,ae,W,G);if(!Ee)return null;const Fe=pn(D*xe,y,_,S,P.segment,te,ae,W,G);return Fe?W.projectionCache.anyProjectionOccluded?null:{first:Ee,last:Fe}:null}function Je(D,l,y,_){return D===a.ah.horizontal&&Math.abs(y.y-l.y)>Math.abs(y.x-l.x)*_?{useVertical:!0}:(D===a.ah.vertical?l.y<y.y:l.x>y.x)?{needsFlipping:!0}:null}function nt(D,l,y,_,S,P,G,W,K,te,ae){const le=y/24,xe=l.lineOffsetX*le,Ee=l.lineOffsetY*le;let Fe;if(l.numGlyphs>1){const Ge=l.glyphStartIndex+l.numGlyphs,Ve=l.lineStartIndex,$e=l.lineStartIndex+l.lineLength,Ke=Ne(le,W,xe,Ee,_,l,ae,D);if(!Ke)return{notEnoughRoom:!0};const ze=je(Ke.first.point.x,Ke.first.point.y,G,D.getElevation).point,tt=je(Ke.last.point.x,Ke.last.point.y,G,D.getElevation).point;if(S&&!_){const rt=Je(l.writingMode,ze,tt,te);if(rt)return rt}Fe=[Ke.first];for(let rt=l.glyphStartIndex+1;rt<Ge-1;rt++)Fe.push(pn(le*W.getoffsetX(rt),xe,Ee,_,l.segment,Ve,$e,D,ae));Fe.push(Ke.last)}else{if(S&&!_){const Ve=je(D.tileAnchorPoint.x,D.tileAnchorPoint.y,P,D.getElevation).point,$e=l.lineStartIndex+l.segment+1,Ke=new a.P(D.lineVertexArray.getx($e),D.lineVertexArray.gety($e)),ze=je(Ke.x,Ke.y,P,D.getElevation),tt=ze.signedDistanceFromCamera>0?ze.point:(function(gt,jt,un,gn,En,bn){return ct(gt,jt,un,1,En,bn)})(D.tileAnchorPoint,Ke,Ve,0,P,D),rt=Je(l.writingMode,Ve,tt,te);if(rt)return rt}const Ge=pn(le*W.getoffsetX(l.glyphStartIndex),xe,Ee,_,l.segment,l.lineStartIndex,l.lineStartIndex+l.lineLength,D,ae);if(!Ge||D.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Fe=[Ge]}for(const Ge of Fe)a.aj(K,Ge.point,Ge.angle);return{}}function ct(D,l,y,_,S,P){const G=D.add(D.sub(l)._unit()),W=S!==void 0?je(G.x,G.y,S,P.getElevation).point:Pt(G.x,G.y,P).point,K=y.sub(W);return y.add(K._mult(_/K.mag()))}function Ue(D,l,y){const _=l.projectionCache;if(_.projections[D])return _.projections[D];const S=new a.P(l.lineVertexArray.getx(D),l.lineVertexArray.gety(D)),P=Pt(S.x,S.y,l);if(P.signedDistanceFromCamera>0)return _.projections[D]=P.point,_.anyProjectionOccluded=_.anyProjectionOccluded||P.isOccluded,P.point;const G=D-y.direction;return(function(W,K,te,ae,le){return ct(W,K,te,ae,void 0,le)})(y.distanceFromAnchor===0?l.tileAnchorPoint:new a.P(l.lineVertexArray.getx(G),l.lineVertexArray.gety(G)),S,y.previousVertex,y.absOffsetX-y.distanceFromAnchor+1,l)}function Pt(D,l,y){const _=D+y.translation[0],S=l+y.translation[1];let P;return!y.pitchWithMap&&y.projection.useSpecialProjectionForSymbols?(P=y.projection.projectTileCoordinates(_,S,y.unwrappedTileID,y.getElevation),P.point.x=(.5*P.point.x+.5)*y.width,P.point.y=(.5*-P.point.y+.5)*y.height):(P=je(_,S,y.labelPlaneMatrix,y.getElevation),P.isOccluded=!1),P}function Zt(D,l,y){return D._unit()._perp()._mult(l*y)}function Ct(D,l,y,_,S,P,G,W,K){if(W.projectionCache.offsets[D])return W.projectionCache.offsets[D];const te=y.add(l);if(D+K.direction<_||D+K.direction>=S)return W.projectionCache.offsets[D]=te,te;const ae=Ue(D+K.direction,W,K),le=Zt(ae.sub(y),G,K.direction),xe=y.add(le),Ee=ae.add(le);return W.projectionCache.offsets[D]=a.ak(P,te,xe,Ee)||te,W.projectionCache.offsets[D]}function pn(D,l,y,_,S,P,G,W,K){const te=_?D-l:D+l;let ae=te>0?1:-1,le=0;_&&(ae*=-1,le=Math.PI),ae<0&&(le+=Math.PI);let xe,Ee=ae>0?P+S:P+S+1;W.projectionCache.cachedAnchorPoint?xe=W.projectionCache.cachedAnchorPoint:(xe=Pt(W.tileAnchorPoint.x,W.tileAnchorPoint.y,W).point,W.projectionCache.cachedAnchorPoint=xe);let Fe,Ge,Ve=xe,$e=xe,Ke=0,ze=0;const tt=Math.abs(te),rt=[];let gt;for(;Ke+ze<=tt;){if(Ee+=ae,Ee<P||Ee>=G)return null;Ke+=ze,$e=Ve,Ge=Fe;const gn={absOffsetX:tt,direction:ae,distanceFromAnchor:Ke,previousVertex:$e};if(Ve=Ue(Ee,W,gn),y===0)rt.push($e),gt=Ve.sub($e);else{let En;const bn=Ve.sub($e);En=bn.mag()===0?Zt(Ue(Ee+ae,W,gn).sub(Ve),y,ae):Zt(bn,y,ae),Ge||(Ge=$e.add(En)),Fe=Ct(Ee,En,Ve,P,G,Ge,y,W,gn),rt.push(Ge),gt=Fe.sub(Ge)}ze=gt.mag()}const jt=gt._mult((tt-Ke)/ze)._add(Ge||$e),un=le+Math.atan2(Ve.y-$e.y,Ve.x-$e.x);return rt.push(jt),{point:jt,angle:K?un:0,path:rt}}const $n=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Qn(D,l){for(let y=0;y<D;y++){const _=l.length;l.resize(_+4),l.float32.set($n,3*_)}}function Ii(D,l,y){const _=l[0],S=l[1];return D[0]=y[0]*_+y[4]*S+y[12],D[1]=y[1]*_+y[5]*S+y[13],D[3]=y[3]*_+y[7]*S+y[15],D}const Wn=100;class xi{constructor(l,y,_=new sa(l.width+200,l.height+200,25),S=new sa(l.width+200,l.height+200,25)){this.transform=l,this.mapProjection=y,this.grid=_,this.ignoredGrid=S,this.pitchFactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+Wn,this.screenBottomBoundary=l.height+Wn,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(l,y,_,S,P,G,W,K,te,ae,le){const xe=l.anchorPointX+K[0],Ee=l.anchorPointY+K[1],Fe=this.projectAndGetPerspectiveRatio(S,xe,Ee,P,ae),Ge=_*Fe.perspectiveRatio;let Ve;if(G||W)Ve=this._projectCollisionBox(l,Ge,S,P,G,W,K,Fe,ae,le);else{const rt=Fe.point.x+(le?le.x*Ge:0),gt=Fe.point.y+(le?le.y*Ge:0);Ve={allPointsOccluded:!1,box:[rt+l.x1*Ge,gt+l.y1*Ge,rt+l.x2*Ge,gt+l.y2*Ge]}}const[$e,Ke,ze,tt]=Ve.box;return this.mapProjection.useSpecialProjectionForSymbols&&(G?Ve.allPointsOccluded:this.mapProjection.isOccluded(xe,Ee,P))||Fe.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid($e,Ke,ze,tt)||y!=="always"&&this.grid.hitTest($e,Ke,ze,tt,y,te)?{box:[$e,Ke,ze,tt],placeable:!1,offscreen:!1}:{box:[$e,Ke,ze,tt],placeable:!0,offscreen:this.isOffscreen($e,Ke,ze,tt)}}placeCollisionCircles(l,y,_,S,P,G,W,K,te,ae,le,xe,Ee,Fe,Ge,Ve){const $e=[],Ke=new a.P(y.anchorX,y.anchorY),ze=this.getPerspectiveRatio(G,Ke.x,Ke.y,W,Ve),tt=(le?P/ze:P*ze)/a.ap,rt={getElevation:Ve,labelPlaneMatrix:K,lineVertexArray:_,pitchWithMap:le,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:Ke,unwrappedTileID:W,width:this.transform.width,height:this.transform.height,translation:Ge},gt=Ne(tt,S,y.lineOffsetX*tt,y.lineOffsetY*tt,!1,y,!1,rt);let jt=!1,un=!1,gn=!0;if(gt){const En=.5*Ee*ze+Fe,bn=new a.P(-100,-100),hn=new a.P(this.screenRightBoundary,this.screenBottomBoundary),kn=new pi,ci=gt.first,xn=gt.last;let cn=[];for(let gi=ci.path.length-1;gi>=1;gi--)cn.push(ci.path[gi]);for(let gi=1;gi<xn.path.length;gi++)cn.push(xn.path[gi]);const oi=2.5*En;if(te){const gi=this.projectPathToScreenSpace(cn,rt,te);cn=gi.some((Ki=>Ki.signedDistanceFromCamera<=0))?[]:gi.map((Ki=>Ki.point))}let kr=[];if(cn.length>0){const gi=cn[0].clone(),Ki=cn[0].clone();for(let vr=1;vr<cn.length;vr++)gi.x=Math.min(gi.x,cn[vr].x),gi.y=Math.min(gi.y,cn[vr].y),Ki.x=Math.max(Ki.x,cn[vr].x),Ki.y=Math.max(Ki.y,cn[vr].y);kr=gi.x>=bn.x&&Ki.x<=hn.x&&gi.y>=bn.y&&Ki.y<=hn.y?[cn]:Ki.x<bn.x||gi.x>hn.x||Ki.y<bn.y||gi.y>hn.y?[]:a.al([cn],bn.x,bn.y,hn.x,hn.y)}for(const gi of kr){kn.reset(gi,.25*En);let Ki=0;Ki=kn.length<=.5*En?1:Math.ceil(kn.paddedLength/oi)+1;for(let vr=0;vr<Ki;vr++){const go=vr/Math.max(Ki-1,1),Za=kn.lerp(go),Zi=Za.x+Wn,Es=Za.y+Wn;$e.push(Zi,Es,En,0);const eo=Zi-En,to=Es-En,Go=Zi+En,Da=Es+En;if(gn=gn&&this.isOffscreen(eo,to,Go,Da),un=un||this.isInsideGrid(eo,to,Go,Da),l!=="always"&&this.grid.hitTestCircle(Zi,Es,En,l,xe)&&(jt=!0,!ae))return{circles:[],offscreen:!1,collisionDetected:jt}}}}return{circles:!ae&&jt||!un||ze<this.perspectiveRatioCutoff?[]:$e,offscreen:gn,collisionDetected:jt}}projectPathToScreenSpace(l,y,_){return l.map((S=>je(S.x,S.y,_,y.getElevation)))}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const y=[];let _=1/0,S=1/0,P=-1/0,G=-1/0;for(const ae of l){const le=new a.P(ae.x+Wn,ae.y+Wn);_=Math.min(_,le.x),S=Math.min(S,le.y),P=Math.max(P,le.x),G=Math.max(G,le.y),y.push(le)}const W=this.grid.query(_,S,P,G).concat(this.ignoredGrid.query(_,S,P,G)),K={},te={};for(const ae of W){const le=ae.key;if(K[le.bucketInstanceId]===void 0&&(K[le.bucketInstanceId]={}),K[le.bucketInstanceId][le.featureIndex])continue;const xe=[new a.P(ae.x1,ae.y1),new a.P(ae.x2,ae.y1),new a.P(ae.x2,ae.y2),new a.P(ae.x1,ae.y2)];a.am(y,xe)&&(K[le.bucketInstanceId][le.featureIndex]=!0,te[le.bucketInstanceId]===void 0&&(te[le.bucketInstanceId]=[]),te[le.bucketInstanceId].push(le.featureIndex))}return te}insertCollisionBox(l,y,_,S,P,G){(_?this.ignoredGrid:this.grid).insert({bucketInstanceId:S,featureIndex:P,collisionGroupID:G,overlapMode:y},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,y,_,S,P,G){const W=_?this.ignoredGrid:this.grid,K={bucketInstanceId:S,featureIndex:P,collisionGroupID:G,overlapMode:y};for(let te=0;te<l.length;te+=4)W.insertCircle(K,l[te],l[te+1],l[te+2])}projectAndGetPerspectiveRatio(l,y,_,S,P){let G;P?(G=[y,_,P(y,_),1],a.af(G,G,l)):(G=[y,_,0,1],Ii(G,G,l));const W=G[3];return{point:new a.P((G[0]/W+1)/2*this.transform.width+Wn,(-G[1]/W+1)/2*this.transform.height+Wn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/W*.5,isOccluded:!1,signedDistanceFromCamera:W}}getPerspectiveRatio(l,y,_,S,P){const G=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(y,_,S,P):je(y,_,l,P);return .5+this.transform.cameraToCenterDistance/G.signedDistanceFromCamera*.5}isOffscreen(l,y,_,S){return _<Wn||l>=this.screenRightBoundary||S<Wn||y>this.screenBottomBoundary}isInsideGrid(l,y,_,S){return _>=0&&l<this.gridRightBoundary&&S>=0&&y<this.gridBottomBoundary}getViewportMatrix(){const l=a.an([]);return a.J(l,l,[-100,-100,0]),l}_projectCollisionBox(l,y,_,S,P,G,W,K,te,ae){let le=new a.P(1,0),xe=new a.P(0,1);const Ee=new a.P(l.anchorPointX+W[0],l.anchorPointY+W[1]);if(G&&!P){const gn=this.projectAndGetPerspectiveRatio(_,Ee.x+1,Ee.y,S,te).point.sub(K.point).unit(),En=Math.atan(gn.y/gn.x)+(gn.x<0?Math.PI:0),bn=Math.sin(En),hn=Math.cos(En);le=new a.P(hn,bn),xe=new a.P(-bn,hn)}else if(!G&&P){const gn=-this.transform.angle,En=Math.sin(gn),bn=Math.cos(gn);le=new a.P(bn,En),xe=new a.P(-En,bn)}let Fe=K.point,Ge=y;if(P){Fe=Ee;const gn=this.transform.zoom-Math.floor(this.transform.zoom);Ge=Math.pow(2,-gn),Ge*=this.mapProjection.getPitchedTextCorrection(this.transform,Ee,S),ae||(Ge*=a.ac(.5+K.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}ae&&(Fe=Fe.add(le.mult(ae.x*Ge)).add(xe.mult(ae.y*Ge)));const Ve=l.x1*Ge,$e=l.x2*Ge,Ke=(Ve+$e)/2,ze=l.y1*Ge,tt=l.y2*Ge,rt=(ze+tt)/2,gt=[{offsetX:Ve,offsetY:ze},{offsetX:Ke,offsetY:ze},{offsetX:$e,offsetY:ze},{offsetX:$e,offsetY:rt},{offsetX:$e,offsetY:tt},{offsetX:Ke,offsetY:tt},{offsetX:Ve,offsetY:tt},{offsetX:Ve,offsetY:rt}];let jt=[];for(const{offsetX:gn,offsetY:En}of gt)jt.push(new a.P(Fe.x+le.x*gn+xe.x*En,Fe.y+le.y*gn+xe.y*En));let un=!1;if(P){const gn=jt.map((En=>this.projectAndGetPerspectiveRatio(_,En.x,En.y,S,te)));un=gn.some((En=>!En.isOccluded)),jt=gn.map((En=>En.point))}else un=!0;return{box:a.ao(jt),allPointsOccluded:!un}}}function Fi(D,l,y){return l*(a.X/(D.tileSize*Math.pow(2,y-D.tileID.overscaledZ)))}class co{constructor(l,y,_,S){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?y:-y))):S&&_?1:0,this.placed=_}isHidden(){return this.opacity===0&&!this.placed}}class Rr{constructor(l,y,_,S,P){this.text=new co(l?l.text:null,y,_,P),this.icon=new co(l?l.icon:null,y,S,P)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Li{constructor(l,y,_){this.text=l,this.icon=y,this.skipFade=_}}class xr{constructor(){this.invProjMatrix=a.H(),this.viewportMatrix=a.H(),this.circles=[]}}class wr{constructor(l,y,_,S,P){this.bucketInstanceId=l,this.featureIndex=y,this.sourceLayerIndex=_,this.bucketIndex=S,this.tileID=P}}class No{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const y=++this.maxGroupID;this.collisionGroups[l]={ID:y,predicate:_=>_.collisionGroupID===y}}return this.collisionGroups[l]}}function io(D,l,y,_,S){const{horizontalAlign:P,verticalAlign:G}=a.au(D);return new a.P(-(P-.5)*l+_[0]*S,-(G-.5)*y+_[1]*S)}class Xr{constructor(l,y,_,S,P,G){this.transform=l.clone(),this.terrain=_,this.collisionIndex=new xi(this.transform,y),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=S,this.retainedQueryData={},this.collisionGroups=new No(P),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=G,G&&(G.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(l){const y=this.terrain;return y?(_,S)=>y.getElevation(l,_,S):null}getBucketParts(l,y,_,S){const P=_.getBucket(y),G=_.latestFeatureIndex;if(!P||!G||y.id!==P.layerIds[0])return;const W=_.collisionBoxArray,K=P.layers[0].layout,te=P.layers[0].paint,ae=Math.pow(2,this.transform.zoom-_.tileID.overscaledZ),le=_.tileSize/a.X,xe=_.tileID.toUnwrapped(),Ee=this.transform.calculatePosMatrix(xe),Fe=K.get("text-pitch-alignment")==="map",Ge=K.get("text-rotation-alignment")==="map",Ve=Fi(_,1,this.transform.zoom),$e=this.collisionIndex.mapProjection.translatePosition(this.transform,_,te.get("text-translate"),te.get("text-translate-anchor")),Ke=this.collisionIndex.mapProjection.translatePosition(this.transform,_,te.get("icon-translate"),te.get("icon-translate-anchor")),ze=Ys(Ee,Fe,Ge,this.transform,Ve);let tt=null;if(Fe){const gt=zs(Ee,Fe,Ge,this.transform,Ve);tt=a.L([],this.transform.labelPlaneMatrix,gt)}this.retainedQueryData[P.bucketInstanceId]=new wr(P.bucketInstanceId,G,P.sourceLayerIndex,P.index,_.tileID);const rt={bucket:P,layout:K,translationText:$e,translationIcon:Ke,posMatrix:Ee,unwrappedTileID:xe,textLabelPlaneMatrix:ze,labelToScreenMatrix:tt,scale:ae,textPixelRatio:le,holdingForFade:_.holdingForFade(),collisionBoxArray:W,partiallyEvaluatedTextSize:a.ag(P.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(P.sourceID)};if(S)for(const gt of P.sortKeyRanges){const{sortKey:jt,symbolInstanceStart:un,symbolInstanceEnd:gn}=gt;l.push({sortKey:jt,symbolInstanceStart:un,symbolInstanceEnd:gn,parameters:rt})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:P.symbolInstances.length,parameters:rt})}attemptAnchorPlacement(l,y,_,S,P,G,W,K,te,ae,le,xe,Ee,Fe,Ge,Ve,$e,Ke,ze){const tt=a.aq[l.textAnchor],rt=[l.textOffset0,l.textOffset1],gt=io(tt,_,S,rt,P),jt=this.collisionIndex.placeCollisionBox(y,xe,K,te,ae,W,G,Ve,le.predicate,ze,gt);if((!Ke||this.collisionIndex.placeCollisionBox(Ke,xe,K,te,ae,W,G,$e,le.predicate,ze,gt).placeable)&&jt.placeable){let un;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ee.crossTileID]&&this.prevPlacement.placements[Ee.crossTileID]&&this.prevPlacement.placements[Ee.crossTileID].text&&(un=this.prevPlacement.variableOffsets[Ee.crossTileID].anchor),Ee.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Ee.crossTileID]={textOffset:rt,width:_,height:S,anchor:tt,textBoxScale:P,prevAnchor:un},this.markUsedJustification(Fe,tt,Ee,Ge),Fe.allowVerticalPlacement&&(this.markUsedOrientation(Fe,Ge,Ee),this.placedOrientations[Ee.crossTileID]=Ge),{shift:gt,placedGlyphBoxes:jt}}}placeLayerBucketPart(l,y,_){const{bucket:S,layout:P,translationText:G,translationIcon:W,posMatrix:K,unwrappedTileID:te,textLabelPlaneMatrix:ae,labelToScreenMatrix:le,textPixelRatio:xe,holdingForFade:Ee,collisionBoxArray:Fe,partiallyEvaluatedTextSize:Ge,collisionGroup:Ve}=l.parameters,$e=P.get("text-optional"),Ke=P.get("icon-optional"),ze=a.ar(P,"text-overlap","text-allow-overlap"),tt=ze==="always",rt=a.ar(P,"icon-overlap","icon-allow-overlap"),gt=rt==="always",jt=P.get("text-rotation-alignment")==="map",un=P.get("text-pitch-alignment")==="map",gn=P.get("icon-text-fit")!=="none",En=P.get("symbol-z-order")==="viewport-y",bn=tt&&(gt||!S.hasIconData()||Ke),hn=gt&&(tt||!S.hasTextData()||$e);!S.collisionArrays&&Fe&&S.deserializeCollisionBoxes(Fe);const kn=this._getTerrainElevationFunc(this.retainedQueryData[S.bucketInstanceId].tileID),ci=(xn,cn,oi)=>{var kr,gi;if(y[xn.crossTileID])return;if(Ee)return void(this.placements[xn.crossTileID]=new Li(!1,!1,!1));let Ki=!1,vr=!1,go=!0,Za=null,Zi={box:null,placeable:!1,offscreen:null},Es={placeable:!1},eo=null,to=null,Go=null,Da=0,id=0,pa=0;cn.textFeatureIndex?Da=cn.textFeatureIndex:xn.useRuntimeCollisionCircles&&(Da=xn.featureIndex),cn.verticalTextFeatureIndex&&(id=cn.verticalTextFeatureIndex);const fs=cn.textBox;if(fs){const yi=jo=>{let Ho=a.ah.horizontal;if(S.allowVerticalPlacement&&!jo&&this.prevPlacement){const ta=this.prevPlacement.placedOrientations[xn.crossTileID];ta&&(this.placedOrientations[xn.crossTileID]=ta,Ho=ta,this.markUsedOrientation(S,Ho,xn))}return Ho},or=(jo,Ho)=>{if(S.allowVerticalPlacement&&xn.numVerticalGlyphVertices>0&&cn.verticalTextBox){for(const ta of S.writingModes)if(ta===a.ah.vertical?(Zi=Ho(),Es=Zi):Zi=jo(),Zi&&Zi.placeable)break}else Zi=jo()},Br=xn.textAnchorOffsetStartIndex,ma=xn.textAnchorOffsetEndIndex;if(ma===Br){const jo=(Ho,ta)=>{const Hi=this.collisionIndex.placeCollisionBox(Ho,ze,xe,K,te,un,jt,G,Ve.predicate,kn);return Hi&&Hi.placeable&&(this.markUsedOrientation(S,ta,xn),this.placedOrientations[xn.crossTileID]=ta),Hi};or((()=>jo(fs,a.ah.horizontal)),(()=>{const Ho=cn.verticalTextBox;return S.allowVerticalPlacement&&xn.numVerticalGlyphVertices>0&&Ho?jo(Ho,a.ah.vertical):{box:null,offscreen:null}})),yi(Zi&&Zi.placeable)}else{let jo=a.aq[(gi=(kr=this.prevPlacement)===null||kr===void 0?void 0:kr.variableOffsets[xn.crossTileID])===null||gi===void 0?void 0:gi.anchor];const Ho=(Hi,Fa,Bd)=>{const Gr=Hi.x2-Hi.x1,jh=Hi.y2-Hi.y1,Gf=xn.textBoxScale,jf=gn&&rt==="never"?Fa:null;let ml=null,Om=ze==="never"?1:2,od="never";jo&&Om++;for(let Sc=0;Sc<Om;Sc++){for(let Gd=Br;Gd<ma;Gd++){const ps=S.textAnchorOffsets.get(Gd);if(jo&&ps.textAnchor!==jo)continue;const ao=this.attemptAnchorPlacement(ps,Hi,Gr,jh,Gf,jt,un,xe,K,te,Ve,od,xn,S,Bd,G,W,jf,kn);if(ao&&(ml=ao.placedGlyphBoxes,ml&&ml.placeable))return Ki=!0,Za=ao.shift,ml}jo?jo=null:od=ze}return _&&!ml&&(ml={box:this.collisionIndex.placeCollisionBox(fs,"always",xe,K,te,un,jt,G,Ve.predicate,kn,new a.P(0,0)).box,offscreen:!1,placeable:!1}),ml};or((()=>Ho(fs,cn.iconBox,a.ah.horizontal)),(()=>{const Hi=cn.verticalTextBox;return S.allowVerticalPlacement&&(!Zi||!Zi.placeable)&&xn.numVerticalGlyphVertices>0&&Hi?Ho(Hi,cn.verticalIconBox,a.ah.vertical):{box:null,occluded:!0,offscreen:null}})),Zi&&(Ki=Zi.placeable,go=Zi.offscreen);const ta=yi(Zi&&Zi.placeable);if(!Ki&&this.prevPlacement){const Hi=this.prevPlacement.variableOffsets[xn.crossTileID];Hi&&(this.variableOffsets[xn.crossTileID]=Hi,this.markUsedJustification(S,Hi.anchor,xn,ta))}}}if(eo=Zi,Ki=eo&&eo.placeable,go=eo&&eo.offscreen,xn.useRuntimeCollisionCircles){const yi=S.text.placedSymbolArray.get(xn.centerJustifiedTextSymbolIndex),or=a.ai(S.textSizeData,Ge,yi),Br=P.get("text-padding");to=this.collisionIndex.placeCollisionCircles(ze,yi,S.lineVertexArray,S.glyphOffsetArray,or,K,te,ae,le,_,un,Ve.predicate,xn.collisionCircleDiameter,Br,G,kn),to.circles.length&&to.collisionDetected&&!_&&a.w("Collisions detected, but collision boxes are not shown"),Ki=tt||to.circles.length>0&&!to.collisionDetected,go=go&&to.offscreen}if(cn.iconFeatureIndex&&(pa=cn.iconFeatureIndex),cn.iconBox){const yi=or=>this.collisionIndex.placeCollisionBox(or,rt,xe,K,te,un,jt,W,Ve.predicate,kn,gn&&Za?Za:void 0);Es&&Es.placeable&&cn.verticalIconBox?(Go=yi(cn.verticalIconBox),vr=Go.placeable):(Go=yi(cn.iconBox),vr=Go.placeable),go=go&&Go.offscreen}const _r=$e||xn.numHorizontalGlyphVertices===0&&xn.numVerticalGlyphVertices===0,rd=Ke||xn.numIconVertices===0;_r||rd?rd?_r||(vr=vr&&Ki):Ki=vr&&Ki:vr=Ki=vr&&Ki;const ga=vr&&Go.placeable;if(Ki&&eo.placeable&&this.collisionIndex.insertCollisionBox(eo.box,ze,P.get("text-ignore-placement"),S.bucketInstanceId,Es&&Es.placeable&&id?id:Da,Ve.ID),ga&&this.collisionIndex.insertCollisionBox(Go.box,rt,P.get("icon-ignore-placement"),S.bucketInstanceId,pa,Ve.ID),to&&Ki&&this.collisionIndex.insertCollisionCircles(to.circles,ze,P.get("text-ignore-placement"),S.bucketInstanceId,Da,Ve.ID),_&&this.storeCollisionData(S.bucketInstanceId,oi,cn,eo,Go,to),xn.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(S.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[xn.crossTileID]=new Li(Ki||bn,vr||hn,go||S.justReloaded),y[xn.crossTileID]=!0};if(En){if(l.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const xn=S.getSortedSymbolIndexes(this.transform.angle);for(let cn=xn.length-1;cn>=0;--cn){const oi=xn[cn];ci(S.symbolInstances.get(oi),S.collisionArrays[oi],oi)}}else for(let xn=l.symbolInstanceStart;xn<l.symbolInstanceEnd;xn++)ci(S.symbolInstances.get(xn),S.collisionArrays[xn],xn);if(_&&S.bucketInstanceId in this.collisionCircleArrays){const xn=this.collisionCircleArrays[S.bucketInstanceId];a.as(xn.invProjMatrix,K),xn.viewportMatrix=this.collisionIndex.getViewportMatrix()}S.justReloaded=!1}storeCollisionData(l,y,_,S,P,G){if(_.textBox||_.iconBox){let W,K;this.collisionBoxArrays.has(l)?W=this.collisionBoxArrays.get(l):(W=new Map,this.collisionBoxArrays.set(l,W)),W.has(y)?K=W.get(y):(K={text:null,icon:null},W.set(y,K)),_.textBox&&(K.text=S.box),_.iconBox&&(K.icon=P.box)}if(G){let W=this.collisionCircleArrays[l];W===void 0&&(W=this.collisionCircleArrays[l]=new xr);for(let K=0;K<G.circles.length;K+=4)W.circles.push(G.circles[K+0]),W.circles.push(G.circles[K+1]),W.circles.push(G.circles[K+2]),W.circles.push(G.collisionDetected?1:0)}}markUsedJustification(l,y,_,S){let P;P=S===a.ah.vertical?_.verticalPlacedTextSymbolIndex:{left:_.leftJustifiedTextSymbolIndex,center:_.centerJustifiedTextSymbolIndex,right:_.rightJustifiedTextSymbolIndex}[a.at(y)];const G=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex,_.verticalPlacedTextSymbolIndex];for(const W of G)W>=0&&(l.text.placedSymbolArray.get(W).crossTileID=P>=0&&W!==P?0:_.crossTileID)}markUsedOrientation(l,y,_){const S=y===a.ah.horizontal||y===a.ah.horizontalOnly?y:0,P=y===a.ah.vertical?y:0,G=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex];for(const W of G)l.text.placedSymbolArray.get(W).placedOrientation=S;_.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(_.verticalPlacedTextSymbolIndex).placedOrientation=P)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const y=this.prevPlacement;let _=!1;this.prevZoomAdjustment=y?y.zoomAdjustment(this.transform.zoom):0;const S=y?y.symbolFadeChange(l):1,P=y?y.opacities:{},G=y?y.variableOffsets:{},W=y?y.placedOrientations:{};for(const K in this.placements){const te=this.placements[K],ae=P[K];ae?(this.opacities[K]=new Rr(ae,S,te.text,te.icon),_=_||te.text!==ae.text.placed||te.icon!==ae.icon.placed):(this.opacities[K]=new Rr(null,S,te.text,te.icon,te.skipFade),_=_||te.text||te.icon)}for(const K in P){const te=P[K];if(!this.opacities[K]){const ae=new Rr(te,S,!1,!1);ae.isHidden()||(this.opacities[K]=ae,_=_||te.text.placed||te.icon.placed)}}for(const K in G)this.variableOffsets[K]||!this.opacities[K]||this.opacities[K].isHidden()||(this.variableOffsets[K]=G[K]);for(const K in W)this.placedOrientations[K]||!this.opacities[K]||this.opacities[K].isHidden()||(this.placedOrientations[K]=W[K]);if(y&&y.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");_?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=y?y.lastPlacementChangeTime:l)}updateLayerOpacities(l,y){const _={};for(const S of y){const P=S.getBucket(l);P&&S.latestFeatureIndex&&l.id===P.layerIds[0]&&this.updateBucketOpacities(P,S.tileID,_,S.collisionBoxArray)}}updateBucketOpacities(l,y,_,S){l.hasTextData()&&(l.text.opacityVertexArray.clear(),l.text.hasVisibleVertices=!1),l.hasIconData()&&(l.icon.opacityVertexArray.clear(),l.icon.hasVisibleVertices=!1),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const P=l.layers[0],G=P.layout,W=new Rr(null,0,!1,!1,!0),K=G.get("text-allow-overlap"),te=G.get("icon-allow-overlap"),ae=P._unevaluatedLayout.hasValue("text-variable-anchor")||P._unevaluatedLayout.hasValue("text-variable-anchor-offset"),le=G.get("text-rotation-alignment")==="map",xe=G.get("text-pitch-alignment")==="map",Ee=G.get("icon-text-fit")!=="none",Fe=new Rr(null,0,K&&(te||!l.hasIconData()||G.get("icon-optional")),te&&(K||!l.hasTextData()||G.get("text-optional")),!0);!l.collisionArrays&&S&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(S);const Ge=($e,Ke,ze)=>{for(let tt=0;tt<Ke/4;tt++)$e.opacityVertexArray.emplaceBack(ze);$e.hasVisibleVertices=$e.hasVisibleVertices||ze!==cu},Ve=this.collisionBoxArrays.get(l.bucketInstanceId);for(let $e=0;$e<l.symbolInstances.length;$e++){const Ke=l.symbolInstances.get($e),{numHorizontalGlyphVertices:ze,numVerticalGlyphVertices:tt,crossTileID:rt}=Ke;let gt=this.opacities[rt];_[rt]?gt=W:gt||(gt=Fe,this.opacities[rt]=gt),_[rt]=!0;const jt=Ke.numIconVertices>0,un=this.placedOrientations[Ke.crossTileID],gn=un===a.ah.vertical,En=un===a.ah.horizontal||un===a.ah.horizontalOnly;if(ze>0||tt>0){const hn=Ns(gt.text);Ge(l.text,ze,gn?cu:hn),Ge(l.text,tt,En?cu:hn);const kn=gt.text.isHidden();[Ke.rightJustifiedTextSymbolIndex,Ke.centerJustifiedTextSymbolIndex,Ke.leftJustifiedTextSymbolIndex].forEach((cn=>{cn>=0&&(l.text.placedSymbolArray.get(cn).hidden=kn||gn?1:0)})),Ke.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(Ke.verticalPlacedTextSymbolIndex).hidden=kn||En?1:0);const ci=this.variableOffsets[Ke.crossTileID];ci&&this.markUsedJustification(l,ci.anchor,Ke,un);const xn=this.placedOrientations[Ke.crossTileID];xn&&(this.markUsedJustification(l,"left",Ke,xn),this.markUsedOrientation(l,xn,Ke))}if(jt){const hn=Ns(gt.icon),kn=!(Ee&&Ke.verticalPlacedIconSymbolIndex&&gn);Ke.placedIconSymbolIndex>=0&&(Ge(l.icon,Ke.numIconVertices,kn?hn:cu),l.icon.placedSymbolArray.get(Ke.placedIconSymbolIndex).hidden=gt.icon.isHidden()),Ke.verticalPlacedIconSymbolIndex>=0&&(Ge(l.icon,Ke.numVerticalIconVertices,kn?cu:hn),l.icon.placedSymbolArray.get(Ke.verticalPlacedIconSymbolIndex).hidden=gt.icon.isHidden())}const bn=Ve&&Ve.has($e)?Ve.get($e):{text:null,icon:null};if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const hn=l.collisionArrays[$e];if(hn){let kn=new a.P(0,0);if(hn.textBox||hn.verticalTextBox){let ci=!0;if(ae){const xn=this.variableOffsets[rt];xn?(kn=io(xn.anchor,xn.width,xn.height,xn.textOffset,xn.textBoxScale),le&&kn._rotate(xe?this.transform.angle:-this.transform.angle)):ci=!1}if(hn.textBox||hn.verticalTextBox){let xn;hn.textBox&&(xn=gn),hn.verticalTextBox&&(xn=En),dl(l.textCollisionBox.collisionVertexArray,gt.text.placed,!ci||xn,bn.text,kn.x,kn.y)}}if(hn.iconBox||hn.verticalIconBox){const ci=!!(!En&&hn.verticalIconBox);let xn;hn.iconBox&&(xn=ci),hn.verticalIconBox&&(xn=!ci),dl(l.iconCollisionBox.collisionVertexArray,gt.icon.placed,xn,bn.icon,Ee?kn.x:0,Ee?kn.y:0)}}}}if(l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.text.opacityVertexArray.length!==l.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${l.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${l.text.layoutVertexArray.length}) / 4`);if(l.icon.opacityVertexArray.length!==l.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${l.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${l.icon.layoutVertexArray.length}) / 4`);if(l.bucketInstanceId in this.collisionCircleArrays){const $e=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=$e.invProjMatrix,l.placementViewportMatrix=$e.viewportMatrix,l.collisionCircleArray=$e.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,y){const _=this.zoomAtLastRecencyCheck===y?1-this.zoomAdjustment(y):1;return this.zoomAtLastRecencyCheck=y,this.commitTime+this.fadeDuration*_>l}setStale(){this.stale=!0}}function dl(D,l,y,_,S,P){_&&_.length!==0||(_=[0,0,0,0]);const G=_[0]-Wn,W=_[1]-Wn,K=_[2]-Wn,te=_[3]-Wn;D.emplaceBack(l?1:0,y?1:0,S||0,P||0,G,W),D.emplaceBack(l?1:0,y?1:0,S||0,P||0,K,W),D.emplaceBack(l?1:0,y?1:0,S||0,P||0,K,te),D.emplaceBack(l?1:0,y?1:0,S||0,P||0,G,te)}const er=Math.pow(2,25),Bo=Math.pow(2,24),$c=Math.pow(2,17),Xs=Math.pow(2,16),Mo=Math.pow(2,9),Gl=Math.pow(2,8),Js=Math.pow(2,1);function Ns(D){if(D.opacity===0&&!D.placed)return 0;if(D.opacity===1&&D.placed)return 4294967295;const l=D.placed?1:0,y=Math.floor(127*D.opacity);return y*er+l*Bo+y*$c+l*Xs+y*Mo+l*Gl+y*Js+l}const cu=0;function du(){return{isOccluded:(D,l,y)=>!1,getPitchedTextCorrection:(D,l,y)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(D,l,y,_){throw new Error("Not implemented.")},translatePosition:(D,l,y,_)=>(function(S,P,G,W,K=!1){if(!G[0]&&!G[1])return[0,0];const te=K?W==="map"?S.angle:0:W==="viewport"?-S.angle:0;if(te){const ae=Math.sin(te),le=Math.cos(te);G=[G[0]*le-G[1]*ae,G[0]*ae+G[1]*le]}return[K?G[0]:Fi(P,G[0],S.zoom),K?G[1]:Fi(P,G[1],S.zoom)]})(D,l,y,_),getCircleRadiusCorrection:D=>1}}class ro{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&!l.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,y,_,S,P){const G=this._bucketParts;for(;this._currentTileIndex<l.length;)if(y.getBucketParts(G,S,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,P())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,G.sort(((W,K)=>W.sortKey-K.sortKey)));this._currentPartIndex<G.length;)if(y.placeLayerBucketPart(G[this._currentPartIndex],this._seenCrossTileIDs,_),this._currentPartIndex++,P())return!0;return!1}}class hl{constructor(l,y,_,S,P,G,W,K){this.placement=new Xr(l,du(),y,G,W,K),this._currentPlacementIndex=_.length-1,this._forceFullPlacement=S,this._showCollisionBoxes=P,this._done=!1}isDone(){return this._done}continuePlacement(l,y,_){const S=v.now(),P=()=>!this._forceFullPlacement&&v.now()-S>2;for(;this._currentPlacementIndex>=0;){const G=y[l[this._currentPlacementIndex]],W=this.placement.collisionIndex.transform.zoom;if(G.type==="symbol"&&(!G.minzoom||G.minzoom<=W)&&(!G.maxzoom||G.maxzoom>W)){if(this._inProgressLayer||(this._inProgressLayer=new ro(G)),this._inProgressLayer.continuePlacement(_[G.source],this.placement,this._showCollisionBoxes,G,P))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const Co=512/a.X/2;class pr{constructor(l,y,_){this.tileID=l,this.bucketInstanceId=_,this._symbolsByKey={};const S=new Map;for(let P=0;P<y.length;P++){const G=y.get(P),W=G.key,K=S.get(W);K?K.push(G):S.set(W,[G])}for(const[P,G]of S){const W={positions:G.map((K=>({x:Math.floor(K.anchorX*Co),y:Math.floor(K.anchorY*Co)}))),crossTileIDs:G.map((K=>K.crossTileID))};if(W.positions.length>128){const K=new a.av(W.positions.length,16,Uint16Array);for(const{x:te,y:ae}of W.positions)K.add(te,ae);K.finish(),delete W.positions,W.index=K}this._symbolsByKey[P]=W}}getScaledCoordinates(l,y){const{x:_,y:S,z:P}=this.tileID.canonical,{x:G,y:W,z:K}=y.canonical,te=Co/Math.pow(2,K-P),ae=(W*a.X+l.anchorY)*te,le=S*a.X*Co;return{x:Math.floor((G*a.X+l.anchorX)*te-_*a.X*Co),y:Math.floor(ae-le)}}findMatches(l,y,_){const S=this.tileID.canonical.z<y.canonical.z?1:Math.pow(2,this.tileID.canonical.z-y.canonical.z);for(let P=0;P<l.length;P++){const G=l.get(P);if(G.crossTileID)continue;const W=this._symbolsByKey[G.key];if(!W)continue;const K=this.getScaledCoordinates(G,y);if(W.index){const te=W.index.range(K.x-S,K.y-S,K.x+S,K.y+S).sort();for(const ae of te){const le=W.crossTileIDs[ae];if(!_[le]){_[le]=!0,G.crossTileID=le;break}}}else if(W.positions)for(let te=0;te<W.positions.length;te++){const ae=W.positions[te],le=W.crossTileIDs[te];if(Math.abs(ae.x-K.x)<=S&&Math.abs(ae.y-K.y)<=S&&!_[le]){_[le]=!0,G.crossTileID=le;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:l})=>l))}}class hu{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ra{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const y=Math.round((l-this.lng)/360);if(y!==0)for(const _ in this.indexes){const S=this.indexes[_],P={};for(const G in S){const W=S[G];W.tileID=W.tileID.unwrapTo(W.tileID.wrap+y),P[W.tileID.key]=W}this.indexes[_]=P}this.lng=l}addBucket(l,y,_){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===y.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let P=0;P<y.symbolInstances.length;P++)y.symbolInstances.get(P).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const S=this.usedCrossTileIDs[l.overscaledZ];for(const P in this.indexes){const G=this.indexes[P];if(Number(P)>l.overscaledZ)for(const W in G){const K=G[W];K.tileID.isChildOf(l)&&K.findMatches(y.symbolInstances,l,S)}else{const W=G[l.scaledTo(Number(P)).key];W&&W.findMatches(y.symbolInstances,l,S)}}for(let P=0;P<y.symbolInstances.length;P++){const G=y.symbolInstances.get(P);G.crossTileID||(G.crossTileID=_.generate(),S[G.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new pr(l,y.symbolInstances,y.bucketInstanceId),!0}removeBucketCrossTileIDs(l,y){for(const _ of y.getCrossTileIDsLists())for(const S of _)delete this.usedCrossTileIDs[l][S]}removeStaleBuckets(l){let y=!1;for(const _ in this.indexes){const S=this.indexes[_];for(const P in S)l[S[P].bucketInstanceId]||(this.removeBucketCrossTileIDs(_,S[P]),delete S[P],y=!0)}return y}}class Mu{constructor(){this.layerIndexes={},this.crossTileIDs=new hu,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,y,_){let S=this.layerIndexes[l.id];S===void 0&&(S=this.layerIndexes[l.id]=new Ra);let P=!1;const G={};S.handleWrapJump(_);for(const W of y){const K=W.getBucket(l);K&&l.id===K.layerIds[0]&&(K.bucketInstanceId||(K.bucketInstanceId=++this.maxBucketInstanceId),S.addBucket(W.tileID,K,this.crossTileIDs)&&(P=!0),G[K.bucketInstanceId]=!0)}return S.removeStaleBuckets(G)&&(P=!0),P}pruneUnusedLayers(l){const y={};l.forEach((_=>{y[_]=!0}));for(const _ in this.layerIndexes)y[_]||delete this.layerIndexes[_]}}const Cs=(D,l)=>a.t(D,l&&l.filter((y=>y.identifier!=="source.canvas"))),Wc=a.aw();class Pd extends a.E{constructor(l,y={}){super(),this._rtlPluginLoaded=()=>{for(const _ in this.sourceCaches){const S=this.sourceCaches[_].getSource().type;S!=="vector"&&S!=="geojson"||this.sourceCaches[_].reload()}},this.map=l,this.dispatcher=new Lt(it(),l._getMapId()),this.dispatcher.registerMessageHandler("GG",((_,S)=>this.getGlyphs(_,S))),this.dispatcher.registerMessageHandler("GI",((_,S)=>this.getImages(_,S))),this.imageManager=new ce,this.imageManager.setEventedParent(this),this.glyphManager=new he(l._requestManager,y.localIdeographFontFamily),this.lineAtlas=new Oe(256,512),this.crossTileSymbolIndex=new Mu,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",a.ay()),Vr().on(Tt,this._rtlPluginLoaded),this.on("data",(_=>{if(_.dataType!=="source"||_.sourceDataType!=="metadata")return;const S=this.sourceCaches[_.sourceId];if(!S)return;const P=S.getSource();if(P&&P.vectorLayerIds)for(const G in this._layers){const W=this._layers[G];W.source===P.id&&this._validateLayer(W)}}))}loadURL(l,y={},_){this.fire(new a.k("dataloading",{dataType:"style"})),y.validate=typeof y.validate!="boolean"||y.validate;const S=this.map._requestManager.transformRequest(l,"Style");this._loadStyleRequest=new AbortController;const P=this._loadStyleRequest;a.h(S,this._loadStyleRequest).then((G=>{this._loadStyleRequest=null,this._load(G.data,y,_)})).catch((G=>{this._loadStyleRequest=null,G&&!P.signal.aborted&&this.fire(new a.j(G))}))}loadJSON(l,y={},_){this.fire(new a.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,v.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,y.validate=y.validate!==!1,this._load(l,y,_)})).catch((()=>{}))}loadEmpty(){this.fire(new a.k("dataloading",{dataType:"style"})),this._load(Wc,{validate:!1})}_load(l,y,_){var S;const P=y.transformStyle?y.transformStyle(_,l):l;if(!y.validate||!Cs(this,a.u(P))){this._loaded=!0,this.stylesheet=P;for(const G in P.sources)this.addSource(G,P.sources[G],{validate:!1});P.sprite?this._loadSprite(P.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(P.glyphs),this._createLayers(),this.light=new Ye(this.stylesheet.light),this.sky=new Le(this.stylesheet.sky),this.map.setTerrain((S=this.stylesheet.terrain)!==null&&S!==void 0?S:null),this.fire(new a.k("data",{dataType:"style"})),this.fire(new a.k("style.load"))}}_createLayers(){const l=a.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",l),this._order=l.map((y=>y.id)),this._layers={},this._serializedLayers=null;for(const y of l){const _=a.aA(y);_.setEventedParent(this,{layer:{id:y.id}}),this._layers[y.id]=_}}_loadSprite(l,y=!1,_=void 0){let S;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,(function(P,G,W,K){return a._(this,void 0,void 0,(function*(){const te=ne(P),ae=W>1?"@2x":"",le={},xe={};for(const{id:Ee,url:Fe}of te){const Ge=G.transformRequest(be(Fe,ae,".json"),"SpriteJSON");le[Ee]=a.h(Ge,K);const Ve=G.transformRequest(be(Fe,ae,".png"),"SpriteImage");xe[Ee]=Y.getImage(Ve,K)}return yield Promise.all([...Object.values(le),...Object.values(xe)]),(function(Ee,Fe){return a._(this,void 0,void 0,(function*(){const Ge={};for(const Ve in Ee){Ge[Ve]={};const $e=v.getImageCanvasContext((yield Fe[Ve]).data),Ke=(yield Ee[Ve]).data;for(const ze in Ke){const{width:tt,height:rt,x:gt,y:jt,sdf:un,pixelRatio:gn,stretchX:En,stretchY:bn,content:hn,textFitWidth:kn,textFitHeight:ci}=Ke[ze];Ge[Ve][ze]={data:null,pixelRatio:gn,sdf:un,stretchX:En,stretchY:bn,content:hn,textFitWidth:kn,textFitHeight:ci,spriteData:{width:tt,height:rt,x:gt,y:jt,context:$e}}}}return Ge}))})(le,xe)}))})(l,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((P=>{if(this._spriteRequest=null,P)for(const G in P){this._spritesImagesIds[G]=[];const W=this._spritesImagesIds[G]?this._spritesImagesIds[G].filter((K=>!(K in P))):[];for(const K of W)this.imageManager.removeImage(K),this._changedImages[K]=!0;for(const K in P[G]){const te=G==="default"?K:`${G}:${K}`;this._spritesImagesIds[G].push(te),te in this.imageManager.images?this.imageManager.updateImage(te,P[G][K],!1):this.imageManager.addImage(te,P[G][K]),y&&(this._changedImages[te]=!0)}}})).catch((P=>{this._spriteRequest=null,S=P,this.fire(new a.j(S))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),y&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"})),_&&_(S)}))}_unloadSprite(){for(const l of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(l),this._changedImages[l]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}_validateLayer(l){const y=this.sourceCaches[l.source];if(!y)return;const _=l.sourceLayer;if(!_)return;const S=y.getSource();(S.type==="geojson"||S.vectorLayerIds&&S.vectorLayerIds.indexOf(_)===-1)&&this.fire(new a.j(new Error(`Source layer "${_}" does not exist on source "${S.id}" as specified by style layer "${l.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this.sourceCaches)if(!this.sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(l,y=!1){const _=this._serializedAllLayers();if(!l||l.length===0)return Object.values(y?a.aB(_):_);const S=[];for(const P of l)if(_[P]){const G=y?a.aB(_[P]):_[P];S.push(G)}return S}_serializedAllLayers(){let l=this._serializedLayers;if(l)return l;l=this._serializedLayers={};const y=Object.keys(this._layers);for(const _ of y){const S=this._layers[_];S.type!=="custom"&&(l[_]=S.serialize())}return l}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const l in this.sourceCaches)if(this.sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(l){if(!this._loaded)return;const y=this._changed;if(y){const S=Object.keys(this._updatedLayers),P=Object.keys(this._removedLayers);(S.length||P.length)&&this._updateWorkerLayers(S,P);for(const G in this._updatedSources){const W=this._updatedSources[G];if(W==="reload")this._reloadSource(G);else{if(W!=="clear")throw new Error(`Invalid action ${W}`);this._clearSource(G)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const G in this._updatedPaintProps)this._layers[G].updateTransitions(l);this.light.updateTransitions(l),this.sky.updateTransitions(l),this._resetUpdates()}const _={};for(const S in this.sourceCaches){const P=this.sourceCaches[S];_[S]=P.used,P.used=!1}for(const S of this._order){const P=this._layers[S];P.recalculate(l,this._availableImages),!P.isHidden(l.zoom)&&P.source&&(this.sourceCaches[P.source].used=!0)}for(const S in _){const P=this.sourceCaches[S];!!_[S]!=!!P.used&&P.fire(new a.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:S}))}this.light.recalculate(l),this.sky.recalculate(l),this.z=l.zoom,y&&this.fire(new a.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const y in this.sourceCaches)this.sourceCaches[y].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(l,y){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(l,!1),removedIds:y})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(l,y={}){var _;this._checkLoaded();const S=this.serialize();if(l=y.transformStyle?y.transformStyle(S,l):l,((_=y.validate)===null||_===void 0||_)&&Cs(this,a.u(l)))return!1;(l=a.aB(l)).layers=a.az(l.layers);const P=a.aC(S,l),G=this._getOperationsToPerform(P);if(G.unimplemented.length>0)throw new Error(`Unimplemented: ${G.unimplemented.join(", ")}.`);if(G.operations.length===0)return!1;for(const W of G.operations)W();return this.stylesheet=l,this._serializedLayers=null,!0}_getOperationsToPerform(l){const y=[],_=[];for(const S of l)switch(S.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":y.push((()=>this.addLayer.apply(this,S.args)));break;case"removeLayer":y.push((()=>this.removeLayer.apply(this,S.args)));break;case"setPaintProperty":y.push((()=>this.setPaintProperty.apply(this,S.args)));break;case"setLayoutProperty":y.push((()=>this.setLayoutProperty.apply(this,S.args)));break;case"setFilter":y.push((()=>this.setFilter.apply(this,S.args)));break;case"addSource":y.push((()=>this.addSource.apply(this,S.args)));break;case"removeSource":y.push((()=>this.removeSource.apply(this,S.args)));break;case"setLayerZoomRange":y.push((()=>this.setLayerZoomRange.apply(this,S.args)));break;case"setLight":y.push((()=>this.setLight.apply(this,S.args)));break;case"setGeoJSONSourceData":y.push((()=>this.setGeoJSONSourceData.apply(this,S.args)));break;case"setGlyphs":y.push((()=>this.setGlyphs.apply(this,S.args)));break;case"setSprite":y.push((()=>this.setSprite.apply(this,S.args)));break;case"setSky":y.push((()=>this.setSky.apply(this,S.args)));break;case"setTerrain":y.push((()=>this.map.setTerrain.apply(this,S.args)));break;case"setTransition":y.push((()=>{}));break;default:_.push(S.command)}return{operations:y,unimplemented:_}}addImage(l,y){if(this.getImage(l))return this.fire(new a.j(new Error(`An image named "${l}" already exists.`)));this.imageManager.addImage(l,y),this._afterImageUpdated(l)}updateImage(l,y){this.imageManager.updateImage(l,y)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){if(!this.getImage(l))return this.fire(new a.j(new Error(`An image named "${l}" does not exist.`)));this.imageManager.removeImage(l),this._afterImageUpdated(l)}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(l,y,_={}){if(this._checkLoaded(),this.sourceCaches[l]!==void 0)throw new Error(`Source "${l}" already exists.`);if(!y.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(y).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(y.type)>=0&&this._validate(a.u.source,`sources.${l}`,y,null,_))return;this.map&&this.map._collectResourceTiming&&(y.collectResourceTiming=!0);const S=this.sourceCaches[l]=new qn(l,y,this.dispatcher);S.style=this,S.setEventedParent(this,(()=>({isSourceLoaded:S.loaded(),source:S.serialize(),sourceId:l}))),S.onAdd(this.map),this._changed=!0}removeSource(l){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error("There is no source with this ID");for(const _ in this._layers)if(this._layers[_].source===l)return this.fire(new a.j(new Error(`Source "${l}" cannot be removed while layer "${_}" is using it.`)));const y=this.sourceCaches[l];delete this.sourceCaches[l],delete this._updatedSources[l],y.fire(new a.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:l})),y.setEventedParent(null),y.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(l,y){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error(`There is no source with this ID=${l}`);const _=this.sourceCaches[l].getSource();if(_.type!=="geojson")throw new Error(`geojsonSource.type is ${_.type}, which is !== 'geojson`);_.setData(y),this._changed=!0}getSource(l){return this.sourceCaches[l]&&this.sourceCaches[l].getSource()}addLayer(l,y,_={}){this._checkLoaded();const S=l.id;if(this.getLayer(S))return void this.fire(new a.j(new Error(`Layer "${S}" already exists on this map.`)));let P;if(l.type==="custom"){if(Cs(this,a.aD(l)))return;P=a.aA(l)}else{if("source"in l&&typeof l.source=="object"&&(this.addSource(S,l.source),l=a.aB(l),l=a.e(l,{source:S})),this._validate(a.u.layer,`layers.${S}`,l,{arrayIndex:-1},_))return;P=a.aA(l),this._validateLayer(P),P.setEventedParent(this,{layer:{id:S}})}const G=y?this._order.indexOf(y):this._order.length;if(y&&G===-1)this.fire(new a.j(new Error(`Cannot add layer "${S}" before non-existing layer "${y}".`)));else{if(this._order.splice(G,0,S),this._layerOrderChanged=!0,this._layers[S]=P,this._removedLayers[S]&&P.source&&P.type!=="custom"){const W=this._removedLayers[S];delete this._removedLayers[S],W.type!==P.type?this._updatedSources[P.source]="clear":(this._updatedSources[P.source]="reload",this.sourceCaches[P.source].pause())}this._updateLayer(P),P.onAdd&&P.onAdd(this.map)}}moveLayer(l,y){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new a.j(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===y)return;const _=this._order.indexOf(l);this._order.splice(_,1);const S=y?this._order.indexOf(y):this._order.length;y&&S===-1?this.fire(new a.j(new Error(`Cannot move layer "${l}" before non-existing layer "${y}".`))):(this._order.splice(S,0,l),this._layerOrderChanged=!0)}removeLayer(l){this._checkLoaded();const y=this._layers[l];if(!y)return void this.fire(new a.j(new Error(`Cannot remove non-existing layer "${l}".`)));y.setEventedParent(null);const _=this._order.indexOf(l);this._order.splice(_,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=y,delete this._layers[l],this._serializedLayers&&delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],y.onRemove&&y.onRemove(this.map)}getLayer(l){return this._layers[l]}getLayersOrder(){return[...this._order]}hasLayer(l){return l in this._layers}setLayerZoomRange(l,y,_){this._checkLoaded();const S=this.getLayer(l);S?S.minzoom===y&&S.maxzoom===_||(y!=null&&(S.minzoom=y),_!=null&&(S.maxzoom=_),this._updateLayer(S)):this.fire(new a.j(new Error(`Cannot set the zoom range of non-existing layer "${l}".`)))}setFilter(l,y,_={}){this._checkLoaded();const S=this.getLayer(l);if(S){if(!a.aE(S.filter,y))return y==null?(S.filter=void 0,void this._updateLayer(S)):void(this._validate(a.u.filter,`layers.${S.id}.filter`,y,null,_)||(S.filter=a.aB(y),this._updateLayer(S)))}else this.fire(new a.j(new Error(`Cannot filter non-existing layer "${l}".`)))}getFilter(l){return a.aB(this.getLayer(l).filter)}setLayoutProperty(l,y,_,S={}){this._checkLoaded();const P=this.getLayer(l);P?a.aE(P.getLayoutProperty(y),_)||(P.setLayoutProperty(y,_,S),this._updateLayer(P)):this.fire(new a.j(new Error(`Cannot style non-existing layer "${l}".`)))}getLayoutProperty(l,y){const _=this.getLayer(l);if(_)return _.getLayoutProperty(y);this.fire(new a.j(new Error(`Cannot get style of non-existing layer "${l}".`)))}setPaintProperty(l,y,_,S={}){this._checkLoaded();const P=this.getLayer(l);P?a.aE(P.getPaintProperty(y),_)||(P.setPaintProperty(y,_,S)&&this._updateLayer(P),this._changed=!0,this._updatedPaintProps[l]=!0,this._serializedLayers=null):this.fire(new a.j(new Error(`Cannot style non-existing layer "${l}".`)))}getPaintProperty(l,y){return this.getLayer(l).getPaintProperty(y)}setFeatureState(l,y){this._checkLoaded();const _=l.source,S=l.sourceLayer,P=this.sourceCaches[_];if(P===void 0)return void this.fire(new a.j(new Error(`The source '${_}' does not exist in the map's style.`)));const G=P.getSource().type;G==="geojson"&&S?this.fire(new a.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):G!=="vector"||S?(l.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),P.setFeatureState(S,l.id,y)):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(l,y){this._checkLoaded();const _=l.source,S=this.sourceCaches[_];if(S===void 0)return void this.fire(new a.j(new Error(`The source '${_}' does not exist in the map's style.`)));const P=S.getSource().type,G=P==="vector"?l.sourceLayer:void 0;P!=="vector"||G?y&&typeof l.id!="string"&&typeof l.id!="number"?this.fire(new a.j(new Error("A feature id is required to remove its specific state property."))):S.removeFeatureState(G,l.id,y):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(l){this._checkLoaded();const y=l.source,_=l.sourceLayer,S=this.sourceCaches[y];if(S!==void 0)return S.getSource().type!=="vector"||_?(l.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),S.getFeatureState(_,l.id)):void this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.j(new Error(`The source '${y}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const l=a.aF(this.sourceCaches,(P=>P.serialize())),y=this._serializeByIds(this._order,!0),_=this.map.getTerrain()||void 0,S=this.stylesheet;return a.aG({version:S.version,name:S.name,metadata:S.metadata,light:S.light,sky:S.sky,center:S.center,zoom:S.zoom,bearing:S.bearing,pitch:S.pitch,sprite:S.sprite,glyphs:S.glyphs,transition:S.transition,sources:l,layers:y,terrain:_},(P=>P!==void 0))}_updateLayer(l){this._updatedLayers[l.id]=!0,l.source&&!this._updatedSources[l.source]&&this.sourceCaches[l.source].getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",this.sourceCaches[l.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(l){const y=G=>this._layers[G].type==="fill-extrusion",_={},S=[];for(let G=this._order.length-1;G>=0;G--){const W=this._order[G];if(y(W)){_[W]=G;for(const K of l){const te=K[W];if(te)for(const ae of te)S.push(ae)}}}S.sort(((G,W)=>W.intersectionZ-G.intersectionZ));const P=[];for(let G=this._order.length-1;G>=0;G--){const W=this._order[G];if(y(W))for(let K=S.length-1;K>=0;K--){const te=S[K].feature;if(_[te.layer.id]<G)break;P.push(te),S.pop()}else for(const K of l){const te=K[W];if(te)for(const ae of te)P.push(ae.feature)}}return P}queryRenderedFeatures(l,y,_){y&&y.filter&&this._validate(a.u.filter,"queryRenderedFeatures.filter",y.filter,null,y);const S={};if(y&&y.layers){if(!Array.isArray(y.layers))return this.fire(new a.j(new Error("parameters.layers must be an Array."))),[];for(const W of y.layers){const K=this._layers[W];if(!K)return this.fire(new a.j(new Error(`The layer '${W}' does not exist in the map's style and cannot be queried for features.`))),[];S[K.source]=!0}}const P=[];y.availableImages=this._availableImages;const G=this._serializedAllLayers();for(const W in this.sourceCaches)y.layers&&!S[W]||P.push(Tn(this.sourceCaches[W],this._layers,G,l,y,_));return this.placement&&P.push((function(W,K,te,ae,le,xe,Ee){const Fe={},Ge=xe.queryRenderedSymbols(ae),Ve=[];for(const $e of Object.keys(Ge).map(Number))Ve.push(Ee[$e]);Ve.sort(Mt);for(const $e of Ve){const Ke=$e.featureIndex.lookupSymbolFeatures(Ge[$e.bucketInstanceId],K,$e.bucketIndex,$e.sourceLayerIndex,le.filter,le.layers,le.availableImages,W);for(const ze in Ke){const tt=Fe[ze]=Fe[ze]||[],rt=Ke[ze];rt.sort(((gt,jt)=>{const un=$e.featureSortOrder;if(un){const gn=un.indexOf(gt.featureIndex);return un.indexOf(jt.featureIndex)-gn}return jt.featureIndex-gt.featureIndex}));for(const gt of rt)tt.push(gt)}}for(const $e in Fe)Fe[$e].forEach((Ke=>{const ze=Ke.feature,tt=te[W[$e].source].getFeatureState(ze.layer["source-layer"],ze.id);ze.source=ze.layer.source,ze.layer["source-layer"]&&(ze.sourceLayer=ze.layer["source-layer"]),ze.state=tt}));return Fe})(this._layers,G,this.sourceCaches,l,y,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(P)}querySourceFeatures(l,y){y&&y.filter&&this._validate(a.u.filter,"querySourceFeatures.filter",y.filter,null,y);const _=this.sourceCaches[l];return _?(function(S,P){const G=S.getRenderableIds().map((te=>S.getTileByID(te))),W=[],K={};for(let te=0;te<G.length;te++){const ae=G[te],le=ae.tileID.canonical.key;K[le]||(K[le]=!0,ae.querySourceFeatures(W,P))}return W})(_,y):[]}getLight(){return this.light.getLight()}setLight(l,y={}){this._checkLoaded();const _=this.light.getLight();let S=!1;for(const G in l)if(!a.aE(l[G],_[G])){S=!0;break}if(!S)return;const P={now:v.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(l,y),this.light.updateTransitions(P)}getSky(){var l;return(l=this.stylesheet)===null||l===void 0?void 0:l.sky}setSky(l,y={}){const _=this.getSky();let S=!1;if(!l&&!_)return;if(l&&!_)S=!0;else if(!l&&_)S=!0;else for(const G in l)if(!a.aE(l[G],_[G])){S=!0;break}if(!S)return;const P={now:v.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=l,this.sky.setSky(l,y),this.sky.updateTransitions(P)}_validate(l,y,_,S,P={}){return(!P||P.validate!==!1)&&Cs(this,l.call(a.u,a.e({key:y,style:this.serialize(),value:_,styleSpec:a.v},S)))}_remove(l=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Vr().off(Tt,this._rtlPluginLoaded);for(const y in this._layers)this._layers[y].setEventedParent(null);for(const y in this.sourceCaches){const _=this.sourceCaches[y];_.setEventedParent(null),_.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),l&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(l)}_clearSource(l){this.sourceCaches[l].clearTiles()}_reloadSource(l){this.sourceCaches[l].resume(),this.sourceCaches[l].reload()}_updateSources(l){for(const y in this.sourceCaches)this.sourceCaches[y].update(l,this.map.terrain)}_generateCollisionBoxes(){for(const l in this.sourceCaches)this._reloadSource(l)}_updatePlacement(l,y,_,S,P=!1){let G=!1,W=!1;const K={};for(const te of this._order){const ae=this._layers[te];if(ae.type!=="symbol")continue;if(!K[ae.source]){const xe=this.sourceCaches[ae.source];K[ae.source]=xe.getRenderableIds(!0).map((Ee=>xe.getTileByID(Ee))).sort(((Ee,Fe)=>Fe.tileID.overscaledZ-Ee.tileID.overscaledZ||(Ee.tileID.isLessThan(Fe.tileID)?-1:1)))}const le=this.crossTileSymbolIndex.addLayer(ae,K[ae.source],l.center.lng);G=G||le}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((P=P||this._layerOrderChanged||_===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(v.now(),l.zoom))&&(this.pauseablePlacement=new hl(l,this.map.terrain,this._order,P,y,_,S,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,K),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(v.now()),W=!0),G&&this.pauseablePlacement.placement.setStale()),W||G)for(const te of this._order){const ae=this._layers[te];ae.type==="symbol"&&this.placement.updateLayerOpacities(ae,K[ae.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(v.now())}_releaseSymbolFadeTiles(){for(const l in this.sourceCaches)this.sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,y){return a._(this,void 0,void 0,(function*(){const _=yield this.imageManager.getImages(y.icons);this._updateTilesForChangedImages();const S=this.sourceCaches[y.source];return S&&S.setDependencies(y.tileID.key,y.type,y.icons),_}))}getGlyphs(l,y){return a._(this,void 0,void 0,(function*(){const _=yield this.glyphManager.getGlyphs(y.stacks),S=this.sourceCaches[y.source];return S&&S.setDependencies(y.tileID.key,y.type,[""]),_}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(l,y={}){this._checkLoaded(),l&&this._validate(a.u.glyphs,"glyphs",l,null,y)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=l,this.glyphManager.entries={},this.glyphManager.setURL(l))}addSprite(l,y,_={},S){this._checkLoaded();const P=[{id:l,url:y}],G=[...ne(this.stylesheet.sprite),...P];this._validate(a.u.sprite,"sprite",G,null,_)||(this.stylesheet.sprite=G,this._loadSprite(P,!0,S))}removeSprite(l){this._checkLoaded();const y=ne(this.stylesheet.sprite);if(y.find((_=>_.id===l))){if(this._spritesImagesIds[l])for(const _ of this._spritesImagesIds[l])this.imageManager.removeImage(_),this._changedImages[_]=!0;y.splice(y.findIndex((_=>_.id===l)),1),this.stylesheet.sprite=y.length>0?y:void 0,delete this._spritesImagesIds[l],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}else this.fire(new a.j(new Error(`Sprite "${l}" doesn't exists on this map.`)))}getSprite(){return ne(this.stylesheet.sprite)}setSprite(l,y={},_){this._checkLoaded(),l&&this._validate(a.u.sprite,"sprite",l,null,y)||(this.stylesheet.sprite=l,l?this._loadSprite(l,!0,_):(this._unloadSprite(),_&&_(null)))}}var Uo=a.Y([{name:"a_pos",type:"Int16",components:2}]);const aa={prelude:ur(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:ur(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:ur(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ur(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:ur("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ur(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:ur(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ur("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ur("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:ur("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:ur(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:ur(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:ur(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:ur(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:ur(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:ur(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:ur(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ur(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:ur(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:ur(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:ur(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:ur(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:ur(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:ur(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:ur(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:ur(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:ur("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:ur("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:ur("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:ur("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function ur(D,l){const y=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,_=l.match(/attribute ([\w]+) ([\w]+)/g),S=D.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),P=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),G=P?P.concat(S):S,W={};return{fragmentSource:D=D.replace(y,((K,te,ae,le,xe)=>(W[xe]=!0,te==="define"?`
#ifndef HAS_UNIFORM_u_${xe}
varying ${ae} ${le} ${xe};
#else
uniform ${ae} ${le} u_${xe};
#endif
`:`
#ifdef HAS_UNIFORM_u_${xe}
    ${ae} ${le} ${xe} = u_${xe};
#endif
`))),vertexSource:l=l.replace(y,((K,te,ae,le,xe)=>{const Ee=le==="float"?"vec2":"vec4",Fe=xe.match(/color/)?"color":Ee;return W[xe]?te==="define"?`
#ifndef HAS_UNIFORM_u_${xe}
uniform lowp float u_${xe}_t;
attribute ${ae} ${Ee} a_${xe};
varying ${ae} ${le} ${xe};
#else
uniform ${ae} ${le} u_${xe};
#endif
`:Fe==="vec4"?`
#ifndef HAS_UNIFORM_u_${xe}
    ${xe} = a_${xe};
#else
    ${ae} ${le} ${xe} = u_${xe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${xe}
    ${xe} = unpack_mix_${Fe}(a_${xe}, u_${xe}_t);
#else
    ${ae} ${le} ${xe} = u_${xe};
#endif
`:te==="define"?`
#ifndef HAS_UNIFORM_u_${xe}
uniform lowp float u_${xe}_t;
attribute ${ae} ${Ee} a_${xe};
#else
uniform ${ae} ${le} u_${xe};
#endif
`:Fe==="vec4"?`
#ifndef HAS_UNIFORM_u_${xe}
    ${ae} ${le} ${xe} = a_${xe};
#else
    ${ae} ${le} ${xe} = u_${xe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${xe}
    ${ae} ${le} ${xe} = unpack_mix_${Fe}(a_${xe}, u_${xe}_t);
#else
    ${ae} ${le} ${xe} = u_${xe};
#endif
`})),staticAttributes:_,staticUniforms:G}}class Uc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(l,y,_,S,P,G,W,K,te){this.context=l;let ae=this.boundPaintVertexBuffers.length!==S.length;for(let le=0;!ae&&le<S.length;le++)this.boundPaintVertexBuffers[le]!==S[le]&&(ae=!0);!this.vao||this.boundProgram!==y||this.boundLayoutVertexBuffer!==_||ae||this.boundIndexBuffer!==P||this.boundVertexOffset!==G||this.boundDynamicVertexBuffer!==W||this.boundDynamicVertexBuffer2!==K||this.boundDynamicVertexBuffer3!==te?this.freshBind(y,_,S,P,G,W,K,te):(l.bindVertexArray.set(this.vao),W&&W.bind(),P&&P.dynamicDraw&&P.bind(),K&&K.bind(),te&&te.bind())}freshBind(l,y,_,S,P,G,W,K){const te=l.numAttributes,ae=this.context,le=ae.gl;this.vao&&this.destroy(),this.vao=ae.createVertexArray(),ae.bindVertexArray.set(this.vao),this.boundProgram=l,this.boundLayoutVertexBuffer=y,this.boundPaintVertexBuffers=_,this.boundIndexBuffer=S,this.boundVertexOffset=P,this.boundDynamicVertexBuffer=G,this.boundDynamicVertexBuffer2=W,this.boundDynamicVertexBuffer3=K,y.enableAttributes(le,l);for(const xe of _)xe.enableAttributes(le,l);G&&G.enableAttributes(le,l),W&&W.enableAttributes(le,l),K&&K.enableAttributes(le,l),y.bind(),y.setVertexAttribPointers(le,l,P);for(const xe of _)xe.bind(),xe.setVertexAttribPointers(le,l,P);G&&(G.bind(),G.setVertexAttribPointers(le,l,P)),S&&S.bind(),W&&(W.bind(),W.setVertexAttribPointers(le,l,P)),K&&(K.bind(),K.setVertexAttribPointers(le,l,P)),ae.currentNumAttributes=te}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const la=(D,l,y,_,S)=>({u_matrix:D,u_texture:0,u_ele_delta:l,u_fog_matrix:y,u_fog_color:_?_.properties.get("fog-color"):a.aM.white,u_fog_ground_blend:_?_.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:_?_.calculateFogBlendOpacity(S):0,u_horizon_color:_?_.properties.get("horizon-color"):a.aM.white,u_horizon_fog_blend:_?_.properties.get("horizon-fog-blend"):1});function jl(D){const l=[];for(let y=0;y<D.length;y++){if(D[y]===null)continue;const _=D[y].split(" ");l.push(_.pop())}return l}class bt{constructor(l,y,_,S,P,G){const W=l.gl;this.program=W.createProgram();const K=jl(y.staticAttributes),te=_?_.getBinderAttributes():[],ae=K.concat(te),le=aa.prelude.staticUniforms?jl(aa.prelude.staticUniforms):[],xe=y.staticUniforms?jl(y.staticUniforms):[],Ee=_?_.getBinderUniforms():[],Fe=le.concat(xe).concat(Ee),Ge=[];for(const gt of Fe)Ge.indexOf(gt)<0&&Ge.push(gt);const Ve=_?_.defines():[];P&&Ve.push("#define OVERDRAW_INSPECTOR;"),G&&Ve.push("#define TERRAIN3D;");const $e=Ve.concat(aa.prelude.fragmentSource,y.fragmentSource).join(`
`),Ke=Ve.concat(aa.prelude.vertexSource,y.vertexSource).join(`
`),ze=W.createShader(W.FRAGMENT_SHADER);if(W.isContextLost())return void(this.failedToCreate=!0);if(W.shaderSource(ze,$e),W.compileShader(ze),!W.getShaderParameter(ze,W.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${W.getShaderInfoLog(ze)}`);W.attachShader(this.program,ze);const tt=W.createShader(W.VERTEX_SHADER);if(W.isContextLost())return void(this.failedToCreate=!0);if(W.shaderSource(tt,Ke),W.compileShader(tt),!W.getShaderParameter(tt,W.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${W.getShaderInfoLog(tt)}`);W.attachShader(this.program,tt),this.attributes={};const rt={};this.numAttributes=ae.length;for(let gt=0;gt<this.numAttributes;gt++)ae[gt]&&(W.bindAttribLocation(this.program,gt,ae[gt]),this.attributes[ae[gt]]=gt);if(W.linkProgram(this.program),!W.getProgramParameter(this.program,W.LINK_STATUS))throw new Error(`Program failed to link: ${W.getProgramInfoLog(this.program)}`);W.deleteShader(tt),W.deleteShader(ze);for(let gt=0;gt<Ge.length;gt++){const jt=Ge[gt];if(jt&&!rt[jt]){const un=W.getUniformLocation(this.program,jt);un&&(rt[jt]=un)}}this.fixedUniforms=S(l,rt),this.terrainUniforms=((gt,jt)=>({u_depth:new a.aH(gt,jt.u_depth),u_terrain:new a.aH(gt,jt.u_terrain),u_terrain_dim:new a.aI(gt,jt.u_terrain_dim),u_terrain_matrix:new a.aJ(gt,jt.u_terrain_matrix),u_terrain_unpack:new a.aK(gt,jt.u_terrain_unpack),u_terrain_exaggeration:new a.aI(gt,jt.u_terrain_exaggeration)}))(l,rt),this.binderUniforms=_?_.getUniforms(l,rt):[]}draw(l,y,_,S,P,G,W,K,te,ae,le,xe,Ee,Fe,Ge,Ve,$e,Ke){const ze=l.gl;if(this.failedToCreate)return;if(l.program.set(this.program),l.setDepthMode(_),l.setStencilMode(S),l.setColorMode(P),l.setCullFace(G),K){l.activeTexture.set(ze.TEXTURE2),ze.bindTexture(ze.TEXTURE_2D,K.depthTexture),l.activeTexture.set(ze.TEXTURE3),ze.bindTexture(ze.TEXTURE_2D,K.texture);for(const rt in this.terrainUniforms)this.terrainUniforms[rt].set(K[rt])}for(const rt in this.fixedUniforms)this.fixedUniforms[rt].set(W[rt]);Ge&&Ge.setUniforms(l,this.binderUniforms,Ee,{zoom:Fe});let tt=0;switch(y){case ze.LINES:tt=2;break;case ze.TRIANGLES:tt=3;break;case ze.LINE_STRIP:tt=1}for(const rt of xe.get()){const gt=rt.vaos||(rt.vaos={});(gt[te]||(gt[te]=new Uc)).bind(l,this,ae,Ge?Ge.getPaintVertexBuffers():[],le,rt.vertexOffset,Ve,$e,Ke),ze.drawElements(y,rt.primitiveLength*tt,ze.UNSIGNED_SHORT,rt.primitiveOffset*tt*2)}}}function We(D,l,y){const _=1/Fi(y,1,l.transform.tileZoom),S=Math.pow(2,y.tileID.overscaledZ),P=y.tileSize*Math.pow(2,l.transform.tileZoom)/S,G=P*(y.tileID.canonical.x+y.tileID.wrap*S),W=P*y.tileID.canonical.y;return{u_image:0,u_texsize:y.imageAtlasTexture.size,u_scale:[_,D.fromScale,D.toScale],u_fade:D.t,u_pixel_coord_upper:[G>>16,W>>16],u_pixel_coord_lower:[65535&G,65535&W]}}const at=(D,l,y,_)=>{const S=l.style.light,P=S.properties.get("position"),G=[P.x,P.y,P.z],W=(function(){var te=new a.A(9);return a.A!=Float32Array&&(te[1]=0,te[2]=0,te[3]=0,te[5]=0,te[6]=0,te[7]=0),te[0]=1,te[4]=1,te[8]=1,te})();S.properties.get("anchor")==="viewport"&&(function(te,ae){var le=Math.sin(ae),xe=Math.cos(ae);te[0]=xe,te[1]=le,te[2]=0,te[3]=-le,te[4]=xe,te[5]=0,te[6]=0,te[7]=0,te[8]=1})(W,-l.transform.angle),(function(te,ae,le){var xe=ae[0],Ee=ae[1],Fe=ae[2];te[0]=xe*le[0]+Ee*le[3]+Fe*le[6],te[1]=xe*le[1]+Ee*le[4]+Fe*le[7],te[2]=xe*le[2]+Ee*le[5]+Fe*le[8]})(G,G,W);const K=S.properties.get("color");return{u_matrix:D,u_lightpos:G,u_lightintensity:S.properties.get("intensity"),u_lightcolor:[K.r,K.g,K.b],u_vertical_gradient:+y,u_opacity:_}},ft=(D,l,y,_,S,P,G)=>a.e(at(D,l,y,_),We(P,l,G),{u_height_factor:-Math.pow(2,S.overscaledZ)/G.tileSize/8}),Wt=D=>({u_matrix:D}),ei=(D,l,y,_)=>a.e(Wt(D),We(y,l,_)),Et=(D,l)=>({u_matrix:D,u_world:l}),Bt=(D,l,y,_,S)=>a.e(ei(D,l,y,_),{u_world:S}),wt=(D,l,y,_)=>{const S=D.transform;let P,G;if(_.paint.get("circle-pitch-alignment")==="map"){const W=Fi(y,1,S.zoom);P=!0,G=[W,W]}else P=!1,G=S.pixelsToGLUnits;return{u_camera_to_center_distance:S.cameraToCenterDistance,u_scale_with_map:+(_.paint.get("circle-pitch-scale")==="map"),u_matrix:D.translatePosMatrix(l.posMatrix,y,_.paint.get("circle-translate"),_.paint.get("circle-translate-anchor")),u_pitch_with_map:+P,u_device_pixel_ratio:D.pixelRatio,u_extrude_scale:G}},Gt=(D,l,y)=>({u_matrix:D,u_inv_matrix:l,u_camera_to_center_distance:y.cameraToCenterDistance,u_viewport_size:[y.width,y.height]}),ui=(D,l,y=1)=>({u_matrix:D,u_color:l,u_overlay:0,u_overlay_scale:y}),Gn=D=>({u_matrix:D}),Ut=(D,l,y,_)=>({u_matrix:D,u_extrude_scale:Fi(l,1,y),u_intensity:_}),Ri=(D,l,y,_)=>{const S=a.H();a.aP(S,0,D.width,D.height,0,0,1);const P=D.context.gl;return{u_matrix:S,u_world:[P.drawingBufferWidth,P.drawingBufferHeight],u_image:y,u_color_ramp:_,u_opacity:l.paint.get("heatmap-opacity")}};function Ze(D,l){const y=Math.pow(2,l.canonical.z),_=l.canonical.y;return[new a.Z(0,_/y).toLngLat().lat,new a.Z(0,(_+1)/y).toLngLat().lat]}const _t=(D,l,y,_)=>{const S=D.transform;return{u_matrix:Sn(D,l,y,_),u_ratio:1/Fi(l,1,S.zoom),u_device_pixel_ratio:D.pixelRatio,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}},dt=(D,l,y,_,S)=>a.e(_t(D,l,y,S),{u_image:0,u_image_height:_}),vt=(D,l,y,_,S)=>{const P=D.transform,G=Zn(l,P);return{u_matrix:Sn(D,l,y,S),u_texsize:l.imageAtlasTexture.size,u_ratio:1/Fi(l,1,P.zoom),u_device_pixel_ratio:D.pixelRatio,u_image:0,u_scale:[G,_.fromScale,_.toScale],u_fade:_.t,u_units_to_pixels:[1/P.pixelsToGLUnits[0],1/P.pixelsToGLUnits[1]]}},Un=(D,l,y,_,S,P)=>{const G=D.lineAtlas,W=Zn(l,D.transform),K=y.layout.get("line-cap")==="round",te=G.getDash(_.from,K),ae=G.getDash(_.to,K),le=te.width*S.fromScale,xe=ae.width*S.toScale;return a.e(_t(D,l,y,P),{u_patternscale_a:[W/le,-te.height/2],u_patternscale_b:[W/xe,-ae.height/2],u_sdfgamma:G.width/(256*Math.min(le,xe)*D.pixelRatio)/2,u_image:0,u_tex_y_a:te.y,u_tex_y_b:ae.y,u_mix:S.t})};function Zn(D,l){return 1/Fi(D,1,l.tileZoom)}function Sn(D,l,y,_){return D.translatePosMatrix(_?_.posMatrix:l.tileID.posMatrix,l,y.paint.get("line-translate"),y.paint.get("line-translate-anchor"))}const Ai=(D,l,y,_,S)=>{return{u_matrix:D,u_tl_parent:l,u_scale_parent:y,u_buffer_scale:1,u_fade_t:_.mix,u_opacity:_.opacity*S.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:S.paint.get("raster-brightness-min"),u_brightness_high:S.paint.get("raster-brightness-max"),u_saturation_factor:(G=S.paint.get("raster-saturation"),G>0?1-1/(1.001-G):-G),u_contrast_factor:(P=S.paint.get("raster-contrast"),P>0?1/(1-P):1+P),u_spin_weights:dr(S.paint.get("raster-hue-rotate"))};var P,G};function dr(D){D*=Math.PI/180;const l=Math.sin(D),y=Math.cos(D);return[(2*y+1)/3,(-Math.sqrt(3)*l-y+1)/3,(Math.sqrt(3)*l-y+1)/3]}const Jt=(D,l,y,_,S,P,G,W,K,te,ae,le,xe,Ee)=>{const Fe=G.transform;return{u_is_size_zoom_constant:+(D==="constant"||D==="source"),u_is_size_feature_constant:+(D==="constant"||D==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:Fe.cameraToCenterDistance,u_pitch:Fe.pitch/360*2*Math.PI,u_rotate_symbol:+y,u_aspect_ratio:Fe.width/Fe.height,u_fade_change:G.options.fadeDuration?G.symbolFadeChange:1,u_matrix:W,u_label_plane_matrix:K,u_coord_matrix:te,u_is_text:+le,u_pitch_with_map:+_,u_is_along_line:S,u_is_variable_anchor:P,u_texsize:xe,u_texture:0,u_translation:ae,u_pitched_scale:Ee}},Xn=(D,l,y,_,S,P,G,W,K,te,ae,le,xe,Ee,Fe)=>{const Ge=G.transform;return a.e(Jt(D,l,y,_,S,P,G,W,K,te,ae,le,xe,Fe),{u_gamma_scale:_?Math.cos(Ge._pitch)*Ge.cameraToCenterDistance:1,u_device_pixel_ratio:G.pixelRatio,u_is_halo:1})},Or=(D,l,y,_,S,P,G,W,K,te,ae,le,xe,Ee)=>a.e(Xn(D,l,y,_,S,P,G,W,K,te,ae,!0,le,!0,Ee),{u_texsize_icon:xe,u_texture_icon:1}),Io=(D,l,y)=>({u_matrix:D,u_opacity:l,u_color:y}),ua=(D,l,y,_,S,P)=>a.e((function(G,W,K,te){const ae=K.imageManager.getPattern(G.from.toString()),le=K.imageManager.getPattern(G.to.toString()),{width:xe,height:Ee}=K.imageManager.getPixelSize(),Fe=Math.pow(2,te.tileID.overscaledZ),Ge=te.tileSize*Math.pow(2,K.transform.tileZoom)/Fe,Ve=Ge*(te.tileID.canonical.x+te.tileID.wrap*Fe),$e=Ge*te.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ae.tl,u_pattern_br_a:ae.br,u_pattern_tl_b:le.tl,u_pattern_br_b:le.br,u_texsize:[xe,Ee],u_mix:W.t,u_pattern_size_a:ae.displaySize,u_pattern_size_b:le.displaySize,u_scale_a:W.fromScale,u_scale_b:W.toScale,u_tile_units_to_pixels:1/Fi(te,1,K.transform.tileZoom),u_pixel_coord_upper:[Ve>>16,$e>>16],u_pixel_coord_lower:[65535&Ve,65535&$e]}})(_,P,y,S),{u_matrix:D,u_opacity:l}),Mr={fillExtrusion:(D,l)=>({u_matrix:new a.aJ(D,l.u_matrix),u_lightpos:new a.aN(D,l.u_lightpos),u_lightintensity:new a.aI(D,l.u_lightintensity),u_lightcolor:new a.aN(D,l.u_lightcolor),u_vertical_gradient:new a.aI(D,l.u_vertical_gradient),u_opacity:new a.aI(D,l.u_opacity)}),fillExtrusionPattern:(D,l)=>({u_matrix:new a.aJ(D,l.u_matrix),u_lightpos:new a.aN(D,l.u_lightpos),u_lightintensity:new a.aI(D,l.u_lightintensity),u_lightcolor:new a.aN(D,l.u_lightcolor),u_vertical_gradient:new a.aI(D,l.u_vertical_gradient),u_height_factor:new a.aI(D,l.u_height_factor),u_image:new a.aH(D,l.u_image),u_texsize:new a.aO(D,l.u_texsize),u_pixel_coord_upper:new a.aO(D,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(D,l.u_pixel_coord_lower),u_scale:new a.aN(D,l.u_scale),u_fade:new a.aI(D,l.u_fade),u_opacity:new a.aI(D,l.u_opacity)}),fill:(D,l)=>({u_matrix:new a.aJ(D,l.u_matrix)}),fillPattern:(D,l)=>({u_matrix:new a.aJ(D,l.u_matrix),u_image:new a.aH(D,l.u_image),u_texsize:new a.aO(D,l.u_texsize),u_pixel_coord_upper:new a.aO(D,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(D,l.u_pixel_coord_lower),u_scale:new a.aN(D,l.u_scale),u_fade:new a.aI(D,l.u_fade)}),fillOutline:(D,l)=>({u_matrix:new a.aJ(D,l.u_matrix),u_world:new a.aO(D,l.u_world)}),fillOutlinePattern:(D,l)=>({u_matrix:new a.aJ(D,l.u_matrix),u_world:new a.aO(D,l.u_world),u_image:new a.aH(D,l.u_image),u_texsize:new a.aO(D,l.u_texsize),u_pixel_coord_upper:new a.aO(D,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(D,l.u_pixel_coord_lower),u_scale:new a.aN(D,l.u_scale),u_fade:new a.aI(D,l.u_fade)}),circle:(D,l)=>({u_camera_to_center_distance:new a.aI(D,l.u_camera_to_center_distance),u_scale_with_map:new a.aH(D,l.u_scale_with_map),u_pitch_with_map:new a.aH(D,l.u_pitch_with_map),u_extrude_scale:new a.aO(D,l.u_extrude_scale),u_device_pixel_ratio:new a.aI(D,l.u_device_pixel_ratio),u_matrix:new a.aJ(D,l.u_matrix)}),collisionBox:(D,l)=>({u_matrix:new a.aJ(D,l.u_matrix),u_pixel_extrude_scale:new a.aO(D,l.u_pixel_extrude_scale)}),collisionCircle:(D,l)=>({u_matrix:new a.aJ(D,l.u_matrix),u_inv_matrix:new a.aJ(D,l.u_inv_matrix),u_camera_to_center_distance:new a.aI(D,l.u_camera_to_center_distance),u_viewport_size:new a.aO(D,l.u_viewport_size)}),debug:(D,l)=>({u_color:new a.aL(D,l.u_color),u_matrix:new a.aJ(D,l.u_matrix),u_overlay:new a.aH(D,l.u_overlay),u_overlay_scale:new a.aI(D,l.u_overlay_scale)}),clippingMask:(D,l)=>({u_matrix:new a.aJ(D,l.u_matrix)}),heatmap:(D,l)=>({u_extrude_scale:new a.aI(D,l.u_extrude_scale),u_intensity:new a.aI(D,l.u_intensity),u_matrix:new a.aJ(D,l.u_matrix)}),heatmapTexture:(D,l)=>({u_matrix:new a.aJ(D,l.u_matrix),u_world:new a.aO(D,l.u_world),u_image:new a.aH(D,l.u_image),u_color_ramp:new a.aH(D,l.u_color_ramp),u_opacity:new a.aI(D,l.u_opacity)}),hillshade:(D,l)=>({u_matrix:new a.aJ(D,l.u_matrix),u_image:new a.aH(D,l.u_image),u_latrange:new a.aO(D,l.u_latrange),u_light:new a.aO(D,l.u_light),u_shadow:new a.aL(D,l.u_shadow),u_highlight:new a.aL(D,l.u_highlight),u_accent:new a.aL(D,l.u_accent)}),hillshadePrepare:(D,l)=>({u_matrix:new a.aJ(D,l.u_matrix),u_image:new a.aH(D,l.u_image),u_dimension:new a.aO(D,l.u_dimension),u_zoom:new a.aI(D,l.u_zoom),u_unpack:new a.aK(D,l.u_unpack)}),line:(D,l)=>({u_matrix:new a.aJ(D,l.u_matrix),u_ratio:new a.aI(D,l.u_ratio),u_device_pixel_ratio:new a.aI(D,l.u_device_pixel_ratio),u_units_to_pixels:new a.aO(D,l.u_units_to_pixels)}),lineGradient:(D,l)=>({u_matrix:new a.aJ(D,l.u_matrix),u_ratio:new a.aI(D,l.u_ratio),u_device_pixel_ratio:new a.aI(D,l.u_device_pixel_ratio),u_units_to_pixels:new a.aO(D,l.u_units_to_pixels),u_image:new a.aH(D,l.u_image),u_image_height:new a.aI(D,l.u_image_height)}),linePattern:(D,l)=>({u_matrix:new a.aJ(D,l.u_matrix),u_texsize:new a.aO(D,l.u_texsize),u_ratio:new a.aI(D,l.u_ratio),u_device_pixel_ratio:new a.aI(D,l.u_device_pixel_ratio),u_image:new a.aH(D,l.u_image),u_units_to_pixels:new a.aO(D,l.u_units_to_pixels),u_scale:new a.aN(D,l.u_scale),u_fade:new a.aI(D,l.u_fade)}),lineSDF:(D,l)=>({u_matrix:new a.aJ(D,l.u_matrix),u_ratio:new a.aI(D,l.u_ratio),u_device_pixel_ratio:new a.aI(D,l.u_device_pixel_ratio),u_units_to_pixels:new a.aO(D,l.u_units_to_pixels),u_patternscale_a:new a.aO(D,l.u_patternscale_a),u_patternscale_b:new a.aO(D,l.u_patternscale_b),u_sdfgamma:new a.aI(D,l.u_sdfgamma),u_image:new a.aH(D,l.u_image),u_tex_y_a:new a.aI(D,l.u_tex_y_a),u_tex_y_b:new a.aI(D,l.u_tex_y_b),u_mix:new a.aI(D,l.u_mix)}),raster:(D,l)=>({u_matrix:new a.aJ(D,l.u_matrix),u_tl_parent:new a.aO(D,l.u_tl_parent),u_scale_parent:new a.aI(D,l.u_scale_parent),u_buffer_scale:new a.aI(D,l.u_buffer_scale),u_fade_t:new a.aI(D,l.u_fade_t),u_opacity:new a.aI(D,l.u_opacity),u_image0:new a.aH(D,l.u_image0),u_image1:new a.aH(D,l.u_image1),u_brightness_low:new a.aI(D,l.u_brightness_low),u_brightness_high:new a.aI(D,l.u_brightness_high),u_saturation_factor:new a.aI(D,l.u_saturation_factor),u_contrast_factor:new a.aI(D,l.u_contrast_factor),u_spin_weights:new a.aN(D,l.u_spin_weights)}),symbolIcon:(D,l)=>({u_is_size_zoom_constant:new a.aH(D,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(D,l.u_is_size_feature_constant),u_size_t:new a.aI(D,l.u_size_t),u_size:new a.aI(D,l.u_size),u_camera_to_center_distance:new a.aI(D,l.u_camera_to_center_distance),u_pitch:new a.aI(D,l.u_pitch),u_rotate_symbol:new a.aH(D,l.u_rotate_symbol),u_aspect_ratio:new a.aI(D,l.u_aspect_ratio),u_fade_change:new a.aI(D,l.u_fade_change),u_matrix:new a.aJ(D,l.u_matrix),u_label_plane_matrix:new a.aJ(D,l.u_label_plane_matrix),u_coord_matrix:new a.aJ(D,l.u_coord_matrix),u_is_text:new a.aH(D,l.u_is_text),u_pitch_with_map:new a.aH(D,l.u_pitch_with_map),u_is_along_line:new a.aH(D,l.u_is_along_line),u_is_variable_anchor:new a.aH(D,l.u_is_variable_anchor),u_texsize:new a.aO(D,l.u_texsize),u_texture:new a.aH(D,l.u_texture),u_translation:new a.aO(D,l.u_translation),u_pitched_scale:new a.aI(D,l.u_pitched_scale)}),symbolSDF:(D,l)=>({u_is_size_zoom_constant:new a.aH(D,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(D,l.u_is_size_feature_constant),u_size_t:new a.aI(D,l.u_size_t),u_size:new a.aI(D,l.u_size),u_camera_to_center_distance:new a.aI(D,l.u_camera_to_center_distance),u_pitch:new a.aI(D,l.u_pitch),u_rotate_symbol:new a.aH(D,l.u_rotate_symbol),u_aspect_ratio:new a.aI(D,l.u_aspect_ratio),u_fade_change:new a.aI(D,l.u_fade_change),u_matrix:new a.aJ(D,l.u_matrix),u_label_plane_matrix:new a.aJ(D,l.u_label_plane_matrix),u_coord_matrix:new a.aJ(D,l.u_coord_matrix),u_is_text:new a.aH(D,l.u_is_text),u_pitch_with_map:new a.aH(D,l.u_pitch_with_map),u_is_along_line:new a.aH(D,l.u_is_along_line),u_is_variable_anchor:new a.aH(D,l.u_is_variable_anchor),u_texsize:new a.aO(D,l.u_texsize),u_texture:new a.aH(D,l.u_texture),u_gamma_scale:new a.aI(D,l.u_gamma_scale),u_device_pixel_ratio:new a.aI(D,l.u_device_pixel_ratio),u_is_halo:new a.aH(D,l.u_is_halo),u_translation:new a.aO(D,l.u_translation),u_pitched_scale:new a.aI(D,l.u_pitched_scale)}),symbolTextAndIcon:(D,l)=>({u_is_size_zoom_constant:new a.aH(D,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(D,l.u_is_size_feature_constant),u_size_t:new a.aI(D,l.u_size_t),u_size:new a.aI(D,l.u_size),u_camera_to_center_distance:new a.aI(D,l.u_camera_to_center_distance),u_pitch:new a.aI(D,l.u_pitch),u_rotate_symbol:new a.aH(D,l.u_rotate_symbol),u_aspect_ratio:new a.aI(D,l.u_aspect_ratio),u_fade_change:new a.aI(D,l.u_fade_change),u_matrix:new a.aJ(D,l.u_matrix),u_label_plane_matrix:new a.aJ(D,l.u_label_plane_matrix),u_coord_matrix:new a.aJ(D,l.u_coord_matrix),u_is_text:new a.aH(D,l.u_is_text),u_pitch_with_map:new a.aH(D,l.u_pitch_with_map),u_is_along_line:new a.aH(D,l.u_is_along_line),u_is_variable_anchor:new a.aH(D,l.u_is_variable_anchor),u_texsize:new a.aO(D,l.u_texsize),u_texsize_icon:new a.aO(D,l.u_texsize_icon),u_texture:new a.aH(D,l.u_texture),u_texture_icon:new a.aH(D,l.u_texture_icon),u_gamma_scale:new a.aI(D,l.u_gamma_scale),u_device_pixel_ratio:new a.aI(D,l.u_device_pixel_ratio),u_is_halo:new a.aH(D,l.u_is_halo),u_translation:new a.aO(D,l.u_translation),u_pitched_scale:new a.aI(D,l.u_pitched_scale)}),background:(D,l)=>({u_matrix:new a.aJ(D,l.u_matrix),u_opacity:new a.aI(D,l.u_opacity),u_color:new a.aL(D,l.u_color)}),backgroundPattern:(D,l)=>({u_matrix:new a.aJ(D,l.u_matrix),u_opacity:new a.aI(D,l.u_opacity),u_image:new a.aH(D,l.u_image),u_pattern_tl_a:new a.aO(D,l.u_pattern_tl_a),u_pattern_br_a:new a.aO(D,l.u_pattern_br_a),u_pattern_tl_b:new a.aO(D,l.u_pattern_tl_b),u_pattern_br_b:new a.aO(D,l.u_pattern_br_b),u_texsize:new a.aO(D,l.u_texsize),u_mix:new a.aI(D,l.u_mix),u_pattern_size_a:new a.aO(D,l.u_pattern_size_a),u_pattern_size_b:new a.aO(D,l.u_pattern_size_b),u_scale_a:new a.aI(D,l.u_scale_a),u_scale_b:new a.aI(D,l.u_scale_b),u_pixel_coord_upper:new a.aO(D,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(D,l.u_pixel_coord_lower),u_tile_units_to_pixels:new a.aI(D,l.u_tile_units_to_pixels)}),terrain:(D,l)=>({u_matrix:new a.aJ(D,l.u_matrix),u_texture:new a.aH(D,l.u_texture),u_ele_delta:new a.aI(D,l.u_ele_delta),u_fog_matrix:new a.aJ(D,l.u_fog_matrix),u_fog_color:new a.aL(D,l.u_fog_color),u_fog_ground_blend:new a.aI(D,l.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.aI(D,l.u_fog_ground_blend_opacity),u_horizon_color:new a.aL(D,l.u_horizon_color),u_horizon_fog_blend:new a.aI(D,l.u_horizon_fog_blend)}),terrainDepth:(D,l)=>({u_matrix:new a.aJ(D,l.u_matrix),u_ele_delta:new a.aI(D,l.u_ele_delta)}),terrainCoords:(D,l)=>({u_matrix:new a.aJ(D,l.u_matrix),u_texture:new a.aH(D,l.u_texture),u_terrain_coords_id:new a.aI(D,l.u_terrain_coords_id),u_ele_delta:new a.aI(D,l.u_ele_delta)}),sky:(D,l)=>({u_sky_color:new a.aL(D,l.u_sky_color),u_horizon_color:new a.aL(D,l.u_horizon_color),u_horizon:new a.aI(D,l.u_horizon),u_sky_horizon_blend:new a.aI(D,l.u_sky_horizon_blend)})};class Ir{constructor(l,y,_){this.context=l;const S=l.gl;this.buffer=S.createBuffer(),this.dynamicDraw=!!_,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),S.bufferData(S.ELEMENT_ARRAY_BUFFER,y.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete y.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const y=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),y.bufferSubData(y.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ca={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class oo{constructor(l,y,_,S){this.length=y.length,this.attributes=_,this.itemSize=y.bytesPerElement,this.dynamicDraw=S,this.context=l;const P=l.gl;this.buffer=P.createBuffer(),l.bindVertexBuffer.set(this.buffer),P.bufferData(P.ARRAY_BUFFER,y.arrayBuffer,this.dynamicDraw?P.DYNAMIC_DRAW:P.STATIC_DRAW),this.dynamicDraw||delete y.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){if(l.length!==this.length)throw new Error(`Length of new data is ${l.length}, which doesn't match current length of ${this.length}`);const y=this.context.gl;this.bind(),y.bufferSubData(y.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,y){for(let _=0;_<this.attributes.length;_++){const S=y.attributes[this.attributes[_].name];S!==void 0&&l.enableVertexAttribArray(S)}}setVertexAttribPointers(l,y,_){for(let S=0;S<this.attributes.length;S++){const P=this.attributes[S],G=y.attributes[P.name];G!==void 0&&l.vertexAttribPointer(G,P.components,l[ca[P.type]],!1,this.itemSize,P.offset+this.itemSize*(_||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const _s=new WeakMap;function nr(D){var l;if(_s.has(D))return _s.get(D);{const y=(l=D.getParameter(D.VERSION))===null||l===void 0?void 0:l.startsWith("WebGL 2.0");return _s.set(D,y),y}}class $i{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Qs extends $i{getDefault(){return a.aM.transparent}set(l){const y=this.current;(l.r!==y.r||l.g!==y.g||l.b!==y.b||l.a!==y.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class $a extends $i{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class Hl extends $i{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class fl extends $i{getDefault(){return[!0,!0,!0,!0]}set(l){const y=this.current;(l[0]!==y[0]||l[1]!==y[1]||l[2]!==y[2]||l[3]!==y[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Wp extends $i{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class Am extends $i{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class Dh extends $i{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const y=this.current;(l.func!==y.func||l.ref!==y.ref||l.mask!==y.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class Ef extends $i{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const y=this.current;(l[0]!==y[0]||l[1]!==y[1]||l[2]!==y[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class Up extends $i{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const y=this.gl;l?y.enable(y.STENCIL_TEST):y.disable(y.STENCIL_TEST),this.current=l,this.dirty=!1}}class qp extends $i{getDefault(){return[0,1]}set(l){const y=this.current;(l[0]!==y[0]||l[1]!==y[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class Aa extends $i{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const y=this.gl;l?y.enable(y.DEPTH_TEST):y.disable(y.DEPTH_TEST),this.current=l,this.dirty=!1}}class Tm extends $i{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class cs extends $i{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const y=this.gl;l?y.enable(y.BLEND):y.disable(y.BLEND),this.current=l,this.dirty=!1}}class km extends $i{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const y=this.current;(l[0]!==y[0]||l[1]!==y[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class Pm extends $i{getDefault(){return a.aM.transparent}set(l){const y=this.current;(l.r!==y.r||l.g!==y.g||l.b!==y.b||l.a!==y.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Iu extends $i{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class dc extends $i{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const y=this.gl;l?y.enable(y.CULL_FACE):y.disable(y.CULL_FACE),this.current=l,this.dirty=!1}}class Fh extends $i{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class Jr extends $i{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class hc extends $i{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class Kp extends $i{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class Zp extends $i{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const y=this.current;(l[0]!==y[0]||l[1]!==y[1]||l[2]!==y[2]||l[3]!==y[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Rf extends $i{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const y=this.gl;y.bindFramebuffer(y.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class Dm extends $i{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const y=this.gl;y.bindRenderbuffer(y.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Yp extends $i{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const y=this.gl;y.bindTexture(y.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class Fm extends $i{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const y=this.gl;y.bindBuffer(y.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Mh extends $i{getDefault(){return null}set(l){const y=this.gl;y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class pl extends $i{getDefault(){return null}set(l){var y;if(l===this.current&&!this.dirty)return;const _=this.gl;nr(_)?_.bindVertexArray(l):(y=_.getExtension("OES_vertex_array_object"))===null||y===void 0||y.bindVertexArrayOES(l),this.current=l,this.dirty=!1}}class fc extends $i{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const y=this.gl;y.pixelStorei(y.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class Xp extends $i{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const y=this.gl;y.pixelStorei(y.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class Af extends $i{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const y=this.gl;y.pixelStorei(y.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class qc extends $i{constructor(l,y){super(l),this.context=l,this.parent=y}getDefault(){return null}}class Lu extends qc{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const y=this.gl;y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class Ou extends qc{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const y=this.gl;y.framebufferRenderbuffer(y.FRAMEBUFFER,y.DEPTH_ATTACHMENT,y.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Ih extends qc{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const y=this.gl;y.framebufferRenderbuffer(y.FRAMEBUFFER,y.DEPTH_STENCIL_ATTACHMENT,y.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Mm{constructor(l,y,_,S,P){this.context=l,this.width=y,this.height=_;const G=l.gl,W=this.framebuffer=G.createFramebuffer();if(this.colorAttachment=new Lu(l,W),S)this.depthAttachment=P?new Ih(l,W):new Ou(l,W);else if(P)throw new Error("Stencil cannot be set without depth");if(G.checkFramebufferStatus(G.FRAMEBUFFER)!==G.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const l=this.context.gl,y=this.colorAttachment.get();if(y&&l.deleteTexture(y),this.depthAttachment){const _=this.depthAttachment.get();_&&l.deleteRenderbuffer(_)}l.deleteFramebuffer(this.framebuffer)}}class ho{constructor(l,y,_){this.blendFunction=l,this.blendColor=y,this.mask=_}}ho.Replace=[1,0],ho.disabled=new ho(ho.Replace,a.aM.transparent,[!1,!1,!1,!1]),ho.unblended=new ho(ho.Replace,a.aM.transparent,[!0,!0,!0,!0]),ho.alphaBlended=new ho([1,771],a.aM.transparent,[!0,!0,!0,!0]);class Tf{constructor(l){var y,_;if(this.gl=l,this.clearColor=new Qs(this),this.clearDepth=new $a(this),this.clearStencil=new Hl(this),this.colorMask=new fl(this),this.depthMask=new Wp(this),this.stencilMask=new Am(this),this.stencilFunc=new Dh(this),this.stencilOp=new Ef(this),this.stencilTest=new Up(this),this.depthRange=new qp(this),this.depthTest=new Aa(this),this.depthFunc=new Tm(this),this.blend=new cs(this),this.blendFunc=new km(this),this.blendColor=new Pm(this),this.blendEquation=new Iu(this),this.cullFace=new dc(this),this.cullFaceSide=new Fh(this),this.frontFace=new Jr(this),this.program=new hc(this),this.activeTexture=new Kp(this),this.viewport=new Zp(this),this.bindFramebuffer=new Rf(this),this.bindRenderbuffer=new Dm(this),this.bindTexture=new Yp(this),this.bindVertexBuffer=new Fm(this),this.bindElementBuffer=new Mh(this),this.bindVertexArray=new pl(this),this.pixelStoreUnpack=new fc(this),this.pixelStoreUnpackPremultiplyAlpha=new Xp(this),this.pixelStoreUnpackFlipY=new Af(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),nr(l)){this.HALF_FLOAT=l.HALF_FLOAT;const S=l.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(y=l.RGBA16F)!==null&&y!==void 0?y:S==null?void 0:S.RGBA16F_EXT,this.RGB16F=(_=l.RGB16F)!==null&&_!==void 0?_:S==null?void 0:S.RGB16F_EXT,l.getExtension("EXT_color_buffer_float")}else{l.getExtension("EXT_color_buffer_half_float"),l.getExtension("OES_texture_half_float_linear");const S=l.getExtension("OES_texture_half_float");this.HALF_FLOAT=S==null?void 0:S.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,y){return new Ir(this,l,y)}createVertexBuffer(l,y,_){return new oo(this,l,y,_)}createRenderbuffer(l,y,_){const S=this.gl,P=S.createRenderbuffer();return this.bindRenderbuffer.set(P),S.renderbufferStorage(S.RENDERBUFFER,l,y,_),this.bindRenderbuffer.set(null),P}createFramebuffer(l,y,_,S){return new Mm(this,l,y,_,S)}clear({color:l,depth:y,stencil:_}){const S=this.gl;let P=0;l&&(P|=S.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),y!==void 0&&(P|=S.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(y),this.depthMask.set(!0)),_!==void 0&&(P|=S.STENCIL_BUFFER_BIT,this.clearStencil.set(_),this.stencilMask.set(255)),S.clear(P)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){a.aE(l.blendFunction,ho.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}createVertexArray(){var l;return nr(this.gl)?this.gl.createVertexArray():(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.createVertexArrayOES()}deleteVertexArray(l){var y;return nr(this.gl)?this.gl.deleteVertexArray(l):(y=this.gl.getExtension("OES_vertex_array_object"))===null||y===void 0?void 0:y.deleteVertexArrayOES(l)}unbindVAO(){this.bindVertexArray.set(null)}}class Wi{constructor(l,y,_){this.func=l,this.mask=y,this.range=_}}Wi.ReadOnly=!1,Wi.ReadWrite=!0,Wi.disabled=new Wi(519,Wi.ReadOnly,[0,1]);const fu=7680;class ir{constructor(l,y,_,S,P,G){this.test=l,this.ref=y,this.mask=_,this.fail=S,this.depthFail=P,this.pass=G}}ir.disabled=new ir({func:519,mask:0},0,0,fu,fu,fu);class Ar{constructor(l,y,_){this.enable=l,this.mode=y,this.frontFace=_}}let Vl;function Kc(D,l,y,_,S){const P=D.context,G=P.gl,W=D.useProgram("collisionBox"),K=[];let te=0,ae=0;for(let $e=0;$e<_.length;$e++){const Ke=_[$e],ze=l.getTile(Ke).getBucket(y);if(!ze)continue;const tt=S?ze.textCollisionBox:ze.iconCollisionBox,rt=ze.collisionCircleArray;if(rt.length>0){const gt=a.H();a.aQ(gt,ze.placementInvProjMatrix,D.transform.glCoordMatrix),a.aQ(gt,gt,ze.placementViewportMatrix),K.push({circleArray:rt,circleOffset:ae,transform:Ke.posMatrix,invTransform:gt,coord:Ke}),te+=rt.length/4,ae=te}tt&&W.draw(P,G.LINES,Wi.disabled,ir.disabled,D.colorModeForRenderPass(),Ar.disabled,{u_matrix:Ke.posMatrix,u_pixel_extrude_scale:[1/(le=D.transform).width,1/le.height]},D.style.map.terrain&&D.style.map.terrain.getTerrainData(Ke),y.id,tt.layoutVertexBuffer,tt.indexBuffer,tt.segments,null,D.transform.zoom,null,null,tt.collisionVertexBuffer)}var le;if(!S||!K.length)return;const xe=D.useProgram("collisionCircle"),Ee=new a.aR;Ee.resize(4*te),Ee._trim();let Fe=0;for(const $e of K)for(let Ke=0;Ke<$e.circleArray.length/4;Ke++){const ze=4*Ke,tt=$e.circleArray[ze+0],rt=$e.circleArray[ze+1],gt=$e.circleArray[ze+2],jt=$e.circleArray[ze+3];Ee.emplace(Fe++,tt,rt,gt,jt,0),Ee.emplace(Fe++,tt,rt,gt,jt,1),Ee.emplace(Fe++,tt,rt,gt,jt,2),Ee.emplace(Fe++,tt,rt,gt,jt,3)}(!Vl||Vl.length<2*te)&&(Vl=(function($e){const Ke=2*$e,ze=new a.aT;ze.resize(Ke),ze._trim();for(let tt=0;tt<Ke;tt++){const rt=6*tt;ze.uint16[rt+0]=4*tt+0,ze.uint16[rt+1]=4*tt+1,ze.uint16[rt+2]=4*tt+2,ze.uint16[rt+3]=4*tt+2,ze.uint16[rt+4]=4*tt+3,ze.uint16[rt+5]=4*tt+0}return ze})(te));const Ge=P.createIndexBuffer(Vl,!0),Ve=P.createVertexBuffer(Ee,a.aS.members,!0);for(const $e of K){const Ke=Gt($e.transform,$e.invTransform,D.transform);xe.draw(P,G.TRIANGLES,Wi.disabled,ir.disabled,D.colorModeForRenderPass(),Ar.disabled,Ke,D.style.map.terrain&&D.style.map.terrain.getTerrainData($e.coord),y.id,Ve,Ge,a.a0.simpleSegment(0,2*$e.circleOffset,$e.circleArray.length,$e.circleArray.length/2),null,D.transform.zoom,null,null,null)}Ve.destroy(),Ge.destroy()}Ar.disabled=new Ar(!1,1029,2305),Ar.backCCW=new Ar(!0,1029,2305);const Zc=a.an(new Float32Array(16));function Yc(D,l,y,_,S,P){const{horizontalAlign:G,verticalAlign:W}=a.au(D);return new a.P((-(G-.5)*l/S+_[0])*P,(-(W-.5)*y/S+_[1])*P)}function $l(D,l,y,_,S,P){const G=l.tileAnchorPoint.add(new a.P(l.translation[0],l.translation[1]));if(l.pitchWithMap){let W=_.mult(P);y||(W=W.rotate(-S));const K=G.add(W);return je(K.x,K.y,l.labelPlaneMatrix,l.getElevation).point}if(y){const W=Pt(l.tileAnchorPoint.x+1,l.tileAnchorPoint.y,l).point.sub(D),K=Math.atan(W.y/W.x)+(W.x<0?Math.PI:0);return D.add(_.rotate(K))}return D.add(_)}function Dd(D,l,y,_,S,P,G,W,K,te,ae,le,xe,Ee){const Fe=D.text.placedSymbolArray,Ge=D.text.dynamicLayoutVertexArray,Ve=D.icon.dynamicLayoutVertexArray,$e={};Ge.clear();for(let Ke=0;Ke<Fe.length;Ke++){const ze=Fe.get(Ke),tt=ze.hidden||!ze.crossTileID||D.allowVerticalPlacement&&!ze.placedOrientation?null:_[ze.crossTileID];if(tt){const rt=new a.P(ze.anchorX,ze.anchorY),gt={getElevation:Ee,width:S.width,height:S.height,labelPlaneMatrix:P,pitchWithMap:y,projection:ae,tileAnchorPoint:rt,translation:le,unwrappedTileID:xe},jt=y?je(rt.x,rt.y,G,Ee):Pt(rt.x,rt.y,gt),un=pe(S.cameraToCenterDistance,jt.signedDistanceFromCamera);let gn=a.ai(D.textSizeData,K,ze)*un/a.ap;y&&(gn*=D.tilePixelRatio/W);const{width:En,height:bn,anchor:hn,textOffset:kn,textBoxScale:ci}=tt,xn=Yc(hn,En,bn,kn,ci,gn),cn=ae.getPitchedTextCorrection(S,rt.add(new a.P(le[0],le[1])),xe),oi=$l(jt.point,gt,l,xn,S.angle,cn),kr=D.allowVerticalPlacement&&ze.placedOrientation===a.ah.vertical?Math.PI/2:0;for(let gi=0;gi<ze.numGlyphs;gi++)a.aj(Ge,oi,kr);te&&ze.associatedIconIndex>=0&&($e[ze.associatedIconIndex]={shiftedAnchor:oi,angle:kr})}else Qn(ze.numGlyphs,Ge)}if(te){Ve.clear();const Ke=D.icon.placedSymbolArray;for(let ze=0;ze<Ke.length;ze++){const tt=Ke.get(ze);if(tt.hidden)Qn(tt.numGlyphs,Ve);else{const rt=$e[ze];if(rt)for(let gt=0;gt<tt.numGlyphs;gt++)a.aj(Ve,rt.shiftedAnchor,rt.angle);else Qn(tt.numGlyphs,Ve)}}D.icon.dynamicLayoutVertexBuffer.updateData(Ve)}D.text.dynamicLayoutVertexBuffer.updateData(Ge)}function da(D,l,y){return y.iconsInText&&l?"symbolTextAndIcon":D?"symbolSDF":"symbolIcon"}function kf(D,l,y,_,S,P,G,W,K,te,ae,le){const xe=D.context,Ee=xe.gl,Fe=D.transform,Ge=du(),Ve=W==="map",$e=K==="map",Ke=W!=="viewport"&&y.layout.get("symbol-placement")!=="point",ze=Ve&&!$e&&!Ke,tt=!$e&&Ke,rt=!y.layout.get("symbol-sort-key").isConstant();let gt=!1;const jt=D.depthModeForSublayer(0,Wi.ReadOnly),un=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),gn=[],En=Ge.getCircleRadiusCorrection(Fe);for(const bn of _){const hn=l.getTile(bn),kn=hn.getBucket(y);if(!kn)continue;const ci=S?kn.text:kn.icon;if(!ci||!ci.segments.get().length||!ci.hasVisibleVertices)continue;const xn=ci.programConfigurations.get(y.id),cn=S||kn.sdfIcons,oi=S?kn.textSizeData:kn.iconSizeData,kr=$e||Fe.pitch!==0,gi=D.useProgram(da(cn,S,kn),xn),Ki=a.ag(oi,Fe.zoom),vr=D.style.map.terrain&&D.style.map.terrain.getTerrainData(bn);let go,Za,Zi,Es,eo=[0,0],to=null;if(S)Za=hn.glyphAtlasTexture,Zi=Ee.LINEAR,go=hn.glyphAtlasTexture.size,kn.iconsInText&&(eo=hn.imageAtlasTexture.size,to=hn.imageAtlasTexture,Es=kr||D.options.rotating||D.options.zooming||oi.kind==="composite"||oi.kind==="camera"?Ee.LINEAR:Ee.NEAREST);else{const Hi=y.layout.get("icon-size").constantOr(0)!==1||kn.iconsNeedLinear;Za=hn.imageAtlasTexture,Zi=cn||D.options.rotating||D.options.zooming||Hi||kr?Ee.LINEAR:Ee.NEAREST,go=hn.imageAtlasTexture.size}const Go=Fi(hn,1,D.transform.zoom),Da=tt?bn.posMatrix:Zc,id=Ys(Da,$e,Ve,D.transform,Go),pa=zs(Da,$e,Ve,D.transform,Go),fs=zs(bn.posMatrix,$e,Ve,D.transform,Go),_r=Ge.translatePosition(D.transform,hn,P,G),rd=un&&kn.hasTextData(),ga=y.layout.get("icon-text-fit")!=="none"&&rd&&kn.hasIconData();if(Ke){const Hi=D.style.map.terrain?(Bd,Gr)=>D.style.map.terrain.getElevation(bn,Bd,Gr):null,Fa=y.layout.get("text-rotation-alignment")==="map";ke(kn,bn.posMatrix,D,S,id,fs,$e,te,Fa,Ge,bn.toUnwrapped(),Fe.width,Fe.height,_r,Hi)}const yi=bn.posMatrix,or=S&&un||ga,Br=Ke||or?Zc:id,ma=pa,jo=cn&&y.paint.get(S?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ho;Ho=cn?kn.iconsInText?Or(oi.kind,Ki,ze,$e,Ke,or,D,yi,Br,ma,_r,go,eo,En):Xn(oi.kind,Ki,ze,$e,Ke,or,D,yi,Br,ma,_r,S,go,!0,En):Jt(oi.kind,Ki,ze,$e,Ke,or,D,yi,Br,ma,_r,S,go,En);const ta={program:gi,buffers:ci,uniformValues:Ho,atlasTexture:Za,atlasTextureIcon:to,atlasInterpolation:Zi,atlasInterpolationIcon:Es,isSDF:cn,hasHalo:jo};if(rt&&kn.canOverlap){gt=!0;const Hi=ci.segments.get();for(const Fa of Hi)gn.push({segments:new a.a0([Fa]),sortKey:Fa.sortKey,state:ta,terrainData:vr})}else gn.push({segments:ci.segments,sortKey:0,state:ta,terrainData:vr})}gt&&gn.sort(((bn,hn)=>bn.sortKey-hn.sortKey));for(const bn of gn){const hn=bn.state;if(xe.activeTexture.set(Ee.TEXTURE0),hn.atlasTexture.bind(hn.atlasInterpolation,Ee.CLAMP_TO_EDGE),hn.atlasTextureIcon&&(xe.activeTexture.set(Ee.TEXTURE1),hn.atlasTextureIcon&&hn.atlasTextureIcon.bind(hn.atlasInterpolationIcon,Ee.CLAMP_TO_EDGE)),hn.isSDF){const kn=hn.uniformValues;hn.hasHalo&&(kn.u_is_halo=1,zu(hn.buffers,bn.segments,y,D,hn.program,jt,ae,le,kn,bn.terrainData)),kn.u_is_halo=0}zu(hn.buffers,bn.segments,y,D,hn.program,jt,ae,le,hn.uniformValues,bn.terrainData)}}function zu(D,l,y,_,S,P,G,W,K,te){const ae=_.context;S.draw(ae,ae.gl.TRIANGLES,P,G,W,Ar.disabled,K,te,y.id,D.layoutVertexBuffer,D.indexBuffer,l,y.paint,_.transform.zoom,D.programConfigurations.get(y.id),D.dynamicLayoutVertexBuffer,D.opacityVertexBuffer)}function Lh(D,l,y,_){const S=D.context,P=S.gl,G=ir.disabled,W=new ho([P.ONE,P.ONE],a.aM.transparent,[!0,!0,!0,!0]),K=l.getBucket(y);if(!K)return;const te=_.key;let ae=y.heatmapFbos.get(te);ae||(ae=pc(S,l.tileSize,l.tileSize),y.heatmapFbos.set(te,ae)),S.bindFramebuffer.set(ae.framebuffer),S.viewport.set([0,0,l.tileSize,l.tileSize]),S.clear({color:a.aM.transparent});const le=K.programConfigurations.get(y.id),xe=D.useProgram("heatmap",le),Ee=D.style.map.terrain.getTerrainData(_);xe.draw(S,P.TRIANGLES,Wi.disabled,G,W,Ar.disabled,Ut(_.posMatrix,l,D.transform.zoom,y.paint.get("heatmap-intensity")),Ee,y.id,K.layoutVertexBuffer,K.indexBuffer,K.segments,y.paint,D.transform.zoom,le)}function Nu(D,l,y){const _=D.context,S=_.gl;_.setColorMode(D.colorModeForRenderPass());const P=Xc(_,l),G=y.key,W=l.heatmapFbos.get(G);W&&(_.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,W.colorAttachment.get()),_.activeTexture.set(S.TEXTURE1),P.bind(S.LINEAR,S.CLAMP_TO_EDGE),D.useProgram("heatmapTexture").draw(_,S.TRIANGLES,Wi.disabled,ir.disabled,D.colorModeForRenderPass(),Ar.disabled,Ri(D,l,0,1),null,l.id,D.rasterBoundsBuffer,D.quadTriangleIndexBuffer,D.rasterBoundsSegments,l.paint,D.transform.zoom),W.destroy(),l.heatmapFbos.delete(G))}function pc(D,l,y){var _,S;const P=D.gl,G=P.createTexture();P.bindTexture(P.TEXTURE_2D,G),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_S,P.CLAMP_TO_EDGE),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_T,P.CLAMP_TO_EDGE),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MIN_FILTER,P.LINEAR),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MAG_FILTER,P.LINEAR);const W=(_=D.HALF_FLOAT)!==null&&_!==void 0?_:P.UNSIGNED_BYTE,K=(S=D.RGBA16F)!==null&&S!==void 0?S:P.RGBA;P.texImage2D(P.TEXTURE_2D,0,K,l,y,0,P.RGBA,W,null);const te=D.createFramebuffer(l,y,!1,!1);return te.colorAttachment.set(G),te}function Xc(D,l){return l.colorRampTexture||(l.colorRampTexture=new ue(D,l.colorRamp,D.gl.RGBA)),l.colorRampTexture}function Ta(D,l,y,_,S){if(!y||!_||!_.imageAtlas)return;const P=_.imageAtlas.patternPositions;let G=P[y.to.toString()],W=P[y.from.toString()];if(!G&&W&&(G=W),!W&&G&&(W=G),!G||!W){const K=S.getPaintProperty(l);G=P[K],W=P[K]}G&&W&&D.setConstantPatternPositions(G,W)}function gc(D,l,y,_,S,P,G){const W=D.context.gl,K="fill-pattern",te=y.paint.get(K),ae=te&&te.constantOr(1),le=y.getCrossfadeParameters();let xe,Ee,Fe,Ge,Ve;G?(Ee=ae&&!y.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",xe=W.LINES):(Ee=ae?"fillPattern":"fill",xe=W.TRIANGLES);const $e=te.constantOr(null);for(const Ke of _){const ze=l.getTile(Ke);if(ae&&!ze.patternsLoaded())continue;const tt=ze.getBucket(y);if(!tt)continue;const rt=tt.programConfigurations.get(y.id),gt=D.useProgram(Ee,rt),jt=D.style.map.terrain&&D.style.map.terrain.getTerrainData(Ke);ae&&(D.context.activeTexture.set(W.TEXTURE0),ze.imageAtlasTexture.bind(W.LINEAR,W.CLAMP_TO_EDGE),rt.updatePaintBuffers(le)),Ta(rt,K,$e,ze,y);const un=jt?Ke:null,gn=D.translatePosMatrix(un?un.posMatrix:Ke.posMatrix,ze,y.paint.get("fill-translate"),y.paint.get("fill-translate-anchor"));if(G){Ge=tt.indexBuffer2,Ve=tt.segments2;const En=[W.drawingBufferWidth,W.drawingBufferHeight];Fe=Ee==="fillOutlinePattern"&&ae?Bt(gn,D,le,ze,En):Et(gn,En)}else Ge=tt.indexBuffer,Ve=tt.segments,Fe=ae?ei(gn,D,le,ze):Wt(gn);gt.draw(D.context,xe,S,D.stencilModeForClipping(Ke),P,Ar.disabled,Fe,jt,y.id,tt.layoutVertexBuffer,Ge,Ve,y.paint,D.transform.zoom,rt)}}function Pf(D,l,y,_,S,P,G){const W=D.context,K=W.gl,te="fill-extrusion-pattern",ae=y.paint.get(te),le=ae.constantOr(1),xe=y.getCrossfadeParameters(),Ee=y.paint.get("fill-extrusion-opacity"),Fe=ae.constantOr(null);for(const Ge of _){const Ve=l.getTile(Ge),$e=Ve.getBucket(y);if(!$e)continue;const Ke=D.style.map.terrain&&D.style.map.terrain.getTerrainData(Ge),ze=$e.programConfigurations.get(y.id),tt=D.useProgram(le?"fillExtrusionPattern":"fillExtrusion",ze);le&&(D.context.activeTexture.set(K.TEXTURE0),Ve.imageAtlasTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE),ze.updatePaintBuffers(xe)),Ta(ze,te,Fe,Ve,y);const rt=D.translatePosMatrix(Ge.posMatrix,Ve,y.paint.get("fill-extrusion-translate"),y.paint.get("fill-extrusion-translate-anchor")),gt=y.paint.get("fill-extrusion-vertical-gradient"),jt=le?ft(rt,D,gt,Ee,Ge,xe,Ve):at(rt,D,gt,Ee);tt.draw(W,W.gl.TRIANGLES,S,P,G,Ar.backCCW,jt,Ke,y.id,$e.layoutVertexBuffer,$e.indexBuffer,$e.segments,y.paint,D.transform.zoom,ze,D.style.map.terrain&&$e.centroidVertexBuffer)}}function Fd(D,l,y,_,S,P,G){const W=D.context,K=W.gl,te=y.fbo;if(!te)return;const ae=D.useProgram("hillshade"),le=D.style.map.terrain&&D.style.map.terrain.getTerrainData(l);W.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,te.colorAttachment.get()),ae.draw(W,K.TRIANGLES,S,P,G,Ar.disabled,((xe,Ee,Fe,Ge)=>{const Ve=Fe.paint.get("hillshade-shadow-color"),$e=Fe.paint.get("hillshade-highlight-color"),Ke=Fe.paint.get("hillshade-accent-color");let ze=Fe.paint.get("hillshade-illumination-direction")*(Math.PI/180);Fe.paint.get("hillshade-illumination-anchor")==="viewport"&&(ze-=xe.transform.angle);const tt=!xe.options.moving;return{u_matrix:Ge?Ge.posMatrix:xe.transform.calculatePosMatrix(Ee.tileID.toUnwrapped(),tt),u_image:0,u_latrange:Ze(0,Ee.tileID),u_light:[Fe.paint.get("hillshade-exaggeration"),ze],u_shadow:Ve,u_highlight:$e,u_accent:Ke}})(D,y,_,le?l:null),le,_.id,D.rasterBoundsBuffer,D.quadTriangleIndexBuffer,D.rasterBoundsSegments)}function Md(D,l,y,_,S,P){const G=D.context,W=G.gl,K=l.dem;if(K&&K.data){const te=K.dim,ae=K.stride,le=K.getPixels();if(G.activeTexture.set(W.TEXTURE1),G.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||D.getTileTexture(ae),l.demTexture){const Ee=l.demTexture;Ee.update(le,{premultiply:!1}),Ee.bind(W.NEAREST,W.CLAMP_TO_EDGE)}else l.demTexture=new ue(G,le,W.RGBA,{premultiply:!1}),l.demTexture.bind(W.NEAREST,W.CLAMP_TO_EDGE);G.activeTexture.set(W.TEXTURE0);let xe=l.fbo;if(!xe){const Ee=new ue(G,{width:te,height:te,data:null},W.RGBA);Ee.bind(W.LINEAR,W.CLAMP_TO_EDGE),xe=l.fbo=G.createFramebuffer(te,te,!0,!1),xe.colorAttachment.set(Ee.texture)}G.bindFramebuffer.set(xe.framebuffer),G.viewport.set([0,0,te,te]),D.useProgram("hillshadePrepare").draw(G,W.TRIANGLES,_,S,P,Ar.disabled,((Ee,Fe)=>{const Ge=Fe.stride,Ve=a.H();return a.aP(Ve,0,a.X,-a.X,0,0,1),a.J(Ve,Ve,[0,-a.X,0]),{u_matrix:Ve,u_image:1,u_dimension:[Ge,Ge],u_zoom:Ee.overscaledZ,u_unpack:Fe.getUnpackVector()}})(l.tileID,K),null,y.id,D.rasterBoundsBuffer,D.quadTriangleIndexBuffer,D.rasterBoundsSegments),l.needsHillshadePrepare=!1}}function Jc(D,l,y,_,S,P){const G=_.paint.get("raster-fade-duration");if(!P&&G>0){const W=v.now(),K=(W-D.timeAdded)/G,te=l?(W-l.timeAdded)/G:-1,ae=y.getSource(),le=S.coveringZoomLevel({tileSize:ae.tileSize,roundZoom:ae.roundZoom}),xe=!l||Math.abs(l.tileID.overscaledZ-le)>Math.abs(D.tileID.overscaledZ-le),Ee=xe&&D.refreshedUponExpiration?1:a.ac(xe?K:1-te,0,1);return D.refreshedUponExpiration&&K>=1&&(D.refreshedUponExpiration=!1),l?{opacity:1,mix:1-Ee}:{opacity:Ee,mix:0}}return{opacity:1,mix:0}}const fo=new a.aM(1,0,0,1),rr=new a.aM(0,1,0,1),Oh=new a.aM(0,0,1,1),Im=new a.aM(1,0,1,1),Jp=new a.aM(0,1,1,1);function Qc(D,l,y,_){Bu(D,0,l+y/2,D.transform.width,y,_)}function Df(D,l,y,_){Bu(D,l-y/2,0,y,D.transform.height,_)}function Bu(D,l,y,_,S,P){const G=D.context,W=G.gl;W.enable(W.SCISSOR_TEST),W.scissor(l*D.pixelRatio,y*D.pixelRatio,_*D.pixelRatio,S*D.pixelRatio),G.clear({color:P}),W.disable(W.SCISSOR_TEST)}function ut(D,l,y){const _=D.context,S=_.gl,P=y.posMatrix,G=D.useProgram("debug"),W=Wi.disabled,K=ir.disabled,te=D.colorModeForRenderPass(),ae="$debug",le=D.style.map.terrain&&D.style.map.terrain.getTerrainData(y);_.activeTexture.set(S.TEXTURE0);const xe=l.getTileByID(y.key).latestRawTileData,Ee=Math.floor((xe&&xe.byteLength||0)/1024),Fe=l.getTile(y).tileSize,Ge=512/Math.min(Fe,512)*(y.overscaledZ/D.transform.zoom)*.5;let Ve=y.canonical.toString();y.overscaledZ!==y.canonical.z&&(Ve+=` => ${y.overscaledZ}`),(function($e,Ke){$e.initDebugOverlayCanvas();const ze=$e.debugOverlayCanvas,tt=$e.context.gl,rt=$e.debugOverlayCanvas.getContext("2d");rt.clearRect(0,0,ze.width,ze.height),rt.shadowColor="white",rt.shadowBlur=2,rt.lineWidth=1.5,rt.strokeStyle="white",rt.textBaseline="top",rt.font="bold 36px Open Sans, sans-serif",rt.fillText(Ke,5,5),rt.strokeText(Ke,5,5),$e.debugOverlayTexture.update(ze),$e.debugOverlayTexture.bind(tt.LINEAR,tt.CLAMP_TO_EDGE)})(D,`${Ve} ${Ee}kB`),G.draw(_,S.TRIANGLES,W,K,ho.alphaBlended,Ar.disabled,ui(P,a.aM.transparent,Ge),null,ae,D.debugBuffer,D.quadTriangleIndexBuffer,D.debugSegments),G.draw(_,S.LINE_STRIP,W,K,te,Ar.disabled,ui(P,a.aM.red),le,ae,D.debugBuffer,D.tileBorderIndexBuffer,D.debugSegments)}function Ht(D,l,y){const _=D.context,S=_.gl,P=D.colorModeForRenderPass(),G=new Wi(S.LEQUAL,Wi.ReadWrite,D.depthRangeFor3D),W=D.useProgram("terrain"),K=l.getTerrainMesh();_.bindFramebuffer.set(null),_.viewport.set([0,0,D.width,D.height]);for(const te of y){const ae=D.renderToTexture.getTexture(te),le=l.getTerrainData(te.tileID);_.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,ae.texture);const xe=D.transform.calculatePosMatrix(te.tileID.toUnwrapped()),Ee=l.getMeshFrameDelta(D.transform.zoom),Fe=D.transform.calculateFogMatrix(te.tileID.toUnwrapped()),Ge=la(xe,Ee,Fe,D.style.sky,D.transform.pitch);W.draw(_,S.TRIANGLES,G,ir.disabled,P,Ar.backCCW,Ge,le,"terrain",K.vertexBuffer,K.indexBuffer,K.segments)}}class Ft{constructor(l,y,_){this.vertexBuffer=l,this.indexBuffer=y,this.segments=_}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class Bn{constructor(l,y){this.context=new Tf(l),this.transform=y,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=qn.maxUnderzooming+qn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Mu}resize(l,y,_){if(this.width=Math.floor(l*_),this.height=Math.floor(y*_),this.pixelRatio=_,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const S of this.style._order)this.style._layers[S].resize()}setup(){const l=this.context,y=new a.aX;y.emplaceBack(0,0),y.emplaceBack(a.X,0),y.emplaceBack(0,a.X),y.emplaceBack(a.X,a.X),this.tileExtentBuffer=l.createVertexBuffer(y,Uo.members),this.tileExtentSegments=a.a0.simpleSegment(0,0,4,2);const _=new a.aX;_.emplaceBack(0,0),_.emplaceBack(a.X,0),_.emplaceBack(0,a.X),_.emplaceBack(a.X,a.X),this.debugBuffer=l.createVertexBuffer(_,Uo.members),this.debugSegments=a.a0.simpleSegment(0,0,4,5);const S=new a.$;S.emplaceBack(0,0,0,0),S.emplaceBack(a.X,0,a.X,0),S.emplaceBack(0,a.X,0,a.X),S.emplaceBack(a.X,a.X,a.X,a.X),this.rasterBoundsBuffer=l.createVertexBuffer(S,ai.members),this.rasterBoundsSegments=a.a0.simpleSegment(0,0,4,2);const P=new a.aX;P.emplaceBack(0,0),P.emplaceBack(1,0),P.emplaceBack(0,1),P.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(P,Uo.members),this.viewportSegments=a.a0.simpleSegment(0,0,4,2);const G=new a.aZ;G.emplaceBack(0),G.emplaceBack(1),G.emplaceBack(3),G.emplaceBack(2),G.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(G);const W=new a.aY;W.emplaceBack(0,1,2),W.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(W);const K=this.context.gl;this.stencilClearMode=new ir({func:K.ALWAYS,mask:0},0,255,K.ZERO,K.ZERO,K.ZERO)}clearStencil(){const l=this.context,y=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const _=a.H();a.aP(_,0,this.width,this.height,0,0,1),a.K(_,_,[y.drawingBufferWidth,y.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(l,y.TRIANGLES,Wi.disabled,this.stencilClearMode,ho.disabled,Ar.disabled,Gn(_),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(l,y){if(this.currentStencilSource===l.source||!l.isTileClipped()||!y||!y.length)return;this.currentStencilSource=l.source;const _=this.context,S=_.gl;this.nextStencilID+y.length>256&&this.clearStencil(),_.setColorMode(ho.disabled),_.setDepthMode(Wi.disabled);const P=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const G of y){const W=this._tileClippingMaskIDs[G.key]=this.nextStencilID++,K=this.style.map.terrain&&this.style.map.terrain.getTerrainData(G);P.draw(_,S.TRIANGLES,Wi.disabled,new ir({func:S.ALWAYS,mask:0},W,255,S.KEEP,S.KEEP,S.REPLACE),ho.disabled,Ar.disabled,Gn(G.posMatrix),K,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,y=this.context.gl;return new ir({func:y.NOTEQUAL,mask:255},l,255,y.KEEP,y.KEEP,y.REPLACE)}stencilModeForClipping(l){const y=this.context.gl;return new ir({func:y.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,y.KEEP,y.KEEP,y.REPLACE)}stencilConfigForOverlap(l){const y=this.context.gl,_=l.sort(((G,W)=>W.overscaledZ-G.overscaledZ)),S=_[_.length-1].overscaledZ,P=_[0].overscaledZ-S+1;if(P>1){this.currentStencilSource=void 0,this.nextStencilID+P>256&&this.clearStencil();const G={};for(let W=0;W<P;W++)G[W+S]=new ir({func:y.GEQUAL,mask:255},W+this.nextStencilID,255,y.KEEP,y.KEEP,y.REPLACE);return this.nextStencilID+=P,[G,_]}return[{[S]:ir.disabled},_]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new ho([l.CONSTANT_COLOR,l.ONE],new a.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ho.unblended:ho.alphaBlended}depthModeForSublayer(l,y,_){if(!this.opaquePassEnabledForLayer())return Wi.disabled;const S=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new Wi(_||this.context.gl.LEQUAL,y,[S,S])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,y){this.style=l,this.options=y,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(v.now()),this.imageManager.beginFrame();const _=this.style._order,S=this.style.sourceCaches,P={},G={},W={};for(const K in S){const te=S[K];te.used&&te.prepare(this.context),P[K]=te.getVisibleCoordinates(),G[K]=P[K].slice().reverse(),W[K]=te.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let K=0;K<_.length;K++)if(this.style._layers[_[K]].is3D()){this.opaquePassCutoff=K;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const K of _){const te=this.style._layers[K];if(!te.hasOffscreenPass()||te.isHidden(this.transform.zoom))continue;const ae=G[te.source];(te.type==="custom"||ae.length)&&this.renderLayer(this,S[te.source],te,ae)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:y.showOverdrawInspector?a.aM.black:a.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(K,te){const ae=K.context,le=ae.gl,xe=(($e,Ke,ze)=>({u_sky_color:$e.properties.get("sky-color"),u_horizon_color:$e.properties.get("horizon-color"),u_horizon:(Ke.height/2+Ke.getHorizon())*ze,u_sky_horizon_blend:$e.properties.get("sky-horizon-blend")*Ke.height/2*ze}))(te,K.style.map.transform,K.pixelRatio),Ee=new Wi(le.LEQUAL,Wi.ReadWrite,[0,1]),Fe=ir.disabled,Ge=K.colorModeForRenderPass(),Ve=K.useProgram("sky");if(!te.mesh){const $e=new a.aX;$e.emplaceBack(-1,-1),$e.emplaceBack(1,-1),$e.emplaceBack(1,1),$e.emplaceBack(-1,1);const Ke=new a.aY;Ke.emplaceBack(0,1,2),Ke.emplaceBack(0,2,3),te.mesh=new Ft(ae.createVertexBuffer($e,Uo.members),ae.createIndexBuffer(Ke),a.a0.simpleSegment(0,0,$e.length,Ke.length))}Ve.draw(ae,le.TRIANGLES,Ee,Fe,Ge,Ar.disabled,xe,void 0,"sky",te.mesh.vertexBuffer,te.mesh.indexBuffer,te.mesh.segments)})(this,this.style.sky),this._showOverdrawInspector=y.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=_.length-1;this.currentLayer>=0;this.currentLayer--){const K=this.style._layers[_[this.currentLayer]],te=S[K.source],ae=P[K.source];this._renderTileClippingMasks(K,ae),this.renderLayer(this,te,K,ae)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<_.length;this.currentLayer++){const K=this.style._layers[_[this.currentLayer]],te=S[K.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(K))continue;const ae=(K.type==="symbol"?W:G)[K.source];this._renderTileClippingMasks(K,P[K.source]),this.renderLayer(this,te,K,ae)}if(this.options.showTileBoundaries){const K=(function(te,ae){let le=null;const xe=Object.values(te._layers).flatMap((Ve=>Ve.source&&!Ve.isHidden(ae)?[te.sourceCaches[Ve.source]]:[])),Ee=xe.filter((Ve=>Ve.getSource().type==="vector")),Fe=xe.filter((Ve=>Ve.getSource().type!=="vector")),Ge=Ve=>{(!le||le.getSource().maxzoom<Ve.getSource().maxzoom)&&(le=Ve)};return Ee.forEach((Ve=>Ge(Ve))),le||Fe.forEach((Ve=>Ge(Ve))),le})(this.style,this.transform.zoom);K&&(function(te,ae,le){for(let xe=0;xe<le.length;xe++)ut(te,ae,le[xe])})(this,K,K.getVisibleCoordinates())}this.options.showPadding&&(function(K){const te=K.transform.padding;Qc(K,K.transform.height-(te.top||0),3,fo),Qc(K,te.bottom||0,3,rr),Df(K,te.left||0,3,Oh),Df(K,K.transform.width-(te.right||0),3,Im);const ae=K.transform.centerPoint;(function(le,xe,Ee,Fe){Bu(le,xe-1,Ee-10,2,20,Fe),Bu(le,xe-10,Ee-1,20,2,Fe)})(K,ae.x,K.transform.height-ae.y,Jp)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(l){if(!this.style||!this.style.map||!this.style.map.terrain)return;const y=this.terrainFacilitator.matrix,_=this.transform.modelViewProjectionMatrix;let S=this.terrainFacilitator.dirty;S||(S=l?!a.a_(y,_):!a.a$(y,_)),S||(S=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),S&&(a.b0(y,_),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(P,G){const W=P.context,K=W.gl,te=ho.unblended,ae=new Wi(K.LEQUAL,Wi.ReadWrite,[0,1]),le=G.getTerrainMesh(),xe=G.sourceCache.getRenderableTiles(),Ee=P.useProgram("terrainDepth");W.bindFramebuffer.set(G.getFramebuffer("depth").framebuffer),W.viewport.set([0,0,P.width/devicePixelRatio,P.height/devicePixelRatio]),W.clear({color:a.aM.transparent,depth:1});for(const Fe of xe){const Ge=G.getTerrainData(Fe.tileID),Ve={u_matrix:P.transform.calculatePosMatrix(Fe.tileID.toUnwrapped()),u_ele_delta:G.getMeshFrameDelta(P.transform.zoom)};Ee.draw(W,K.TRIANGLES,ae,ir.disabled,te,Ar.backCCW,Ve,Ge,"terrain",le.vertexBuffer,le.indexBuffer,le.segments)}W.bindFramebuffer.set(null),W.viewport.set([0,0,P.width,P.height])})(this,this.style.map.terrain),(function(P,G){const W=P.context,K=W.gl,te=ho.unblended,ae=new Wi(K.LEQUAL,Wi.ReadWrite,[0,1]),le=G.getTerrainMesh(),xe=G.getCoordsTexture(),Ee=G.sourceCache.getRenderableTiles(),Fe=P.useProgram("terrainCoords");W.bindFramebuffer.set(G.getFramebuffer("coords").framebuffer),W.viewport.set([0,0,P.width/devicePixelRatio,P.height/devicePixelRatio]),W.clear({color:a.aM.transparent,depth:1}),G.coordsIndex=[];for(const Ge of Ee){const Ve=G.getTerrainData(Ge.tileID);W.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,xe.texture);const $e={u_matrix:P.transform.calculatePosMatrix(Ge.tileID.toUnwrapped()),u_terrain_coords_id:(255-G.coordsIndex.length)/255,u_texture:0,u_ele_delta:G.getMeshFrameDelta(P.transform.zoom)};Fe.draw(W,K.TRIANGLES,ae,ir.disabled,te,Ar.backCCW,$e,Ve,"terrain",le.vertexBuffer,le.indexBuffer,le.segments),G.coordsIndex.push(Ge.tileID.key)}W.bindFramebuffer.set(null),W.viewport.set([0,0,P.width,P.height])})(this,this.style.map.terrain))}renderLayer(l,y,_,S){if(!_.isHidden(this.transform.zoom)&&(_.type==="background"||_.type==="custom"||(S||[]).length))switch(this.id=_.id,_.type){case"symbol":(function(P,G,W,K,te){if(P.renderPass!=="translucent")return;const ae=ir.disabled,le=P.colorModeForRenderPass();(W._unevaluatedLayout.hasValue("text-variable-anchor")||W._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(xe,Ee,Fe,Ge,Ve,$e,Ke,ze,tt){const rt=Ee.transform,gt=du(),jt=Ve==="map",un=$e==="map";for(const gn of xe){const En=Ge.getTile(gn),bn=En.getBucket(Fe);if(!bn||!bn.text||!bn.text.segments.get().length)continue;const hn=a.ag(bn.textSizeData,rt.zoom),kn=Fi(En,1,Ee.transform.zoom),ci=Ys(gn.posMatrix,un,jt,Ee.transform,kn),xn=Fe.layout.get("icon-text-fit")!=="none"&&bn.hasIconData();if(hn){const cn=Math.pow(2,rt.zoom-En.tileID.overscaledZ),oi=Ee.style.map.terrain?(gi,Ki)=>Ee.style.map.terrain.getElevation(gn,gi,Ki):null,kr=gt.translatePosition(rt,En,Ke,ze);Dd(bn,jt,un,tt,rt,ci,gn.posMatrix,cn,hn,xn,gt,kr,gn.toUnwrapped(),oi)}}})(K,P,W,G,W.layout.get("text-rotation-alignment"),W.layout.get("text-pitch-alignment"),W.paint.get("text-translate"),W.paint.get("text-translate-anchor"),te),W.paint.get("icon-opacity").constantOr(1)!==0&&kf(P,G,W,K,!1,W.paint.get("icon-translate"),W.paint.get("icon-translate-anchor"),W.layout.get("icon-rotation-alignment"),W.layout.get("icon-pitch-alignment"),W.layout.get("icon-keep-upright"),ae,le),W.paint.get("text-opacity").constantOr(1)!==0&&kf(P,G,W,K,!0,W.paint.get("text-translate"),W.paint.get("text-translate-anchor"),W.layout.get("text-rotation-alignment"),W.layout.get("text-pitch-alignment"),W.layout.get("text-keep-upright"),ae,le),G.map.showCollisionBoxes&&(Kc(P,G,W,K,!0),Kc(P,G,W,K,!1))})(l,y,_,S,this.style.placement.variableOffsets);break;case"circle":(function(P,G,W,K){if(P.renderPass!=="translucent")return;const te=W.paint.get("circle-opacity"),ae=W.paint.get("circle-stroke-width"),le=W.paint.get("circle-stroke-opacity"),xe=!W.layout.get("circle-sort-key").isConstant();if(te.constantOr(1)===0&&(ae.constantOr(1)===0||le.constantOr(1)===0))return;const Ee=P.context,Fe=Ee.gl,Ge=P.depthModeForSublayer(0,Wi.ReadOnly),Ve=ir.disabled,$e=P.colorModeForRenderPass(),Ke=[];for(let ze=0;ze<K.length;ze++){const tt=K[ze],rt=G.getTile(tt),gt=rt.getBucket(W);if(!gt)continue;const jt=gt.programConfigurations.get(W.id),un=P.useProgram("circle",jt),gn=gt.layoutVertexBuffer,En=gt.indexBuffer,bn=P.style.map.terrain&&P.style.map.terrain.getTerrainData(tt),hn={programConfiguration:jt,program:un,layoutVertexBuffer:gn,indexBuffer:En,uniformValues:wt(P,tt,rt,W),terrainData:bn};if(xe){const kn=gt.segments.get();for(const ci of kn)Ke.push({segments:new a.a0([ci]),sortKey:ci.sortKey,state:hn})}else Ke.push({segments:gt.segments,sortKey:0,state:hn})}xe&&Ke.sort(((ze,tt)=>ze.sortKey-tt.sortKey));for(const ze of Ke){const{programConfiguration:tt,program:rt,layoutVertexBuffer:gt,indexBuffer:jt,uniformValues:un,terrainData:gn}=ze.state;rt.draw(Ee,Fe.TRIANGLES,Ge,Ve,$e,Ar.disabled,un,gn,W.id,gt,jt,ze.segments,W.paint,P.transform.zoom,tt)}})(l,y,_,S);break;case"heatmap":(function(P,G,W,K){if(W.paint.get("heatmap-opacity")===0)return;const te=P.context;if(P.style.map.terrain){for(const ae of K){const le=G.getTile(ae);G.hasRenderableParent(ae)||(P.renderPass==="offscreen"?Lh(P,le,W,ae):P.renderPass==="translucent"&&Nu(P,W,ae))}te.viewport.set([0,0,P.width,P.height])}else P.renderPass==="offscreen"?(function(ae,le,xe,Ee){const Fe=ae.context,Ge=Fe.gl,Ve=ir.disabled,$e=new ho([Ge.ONE,Ge.ONE],a.aM.transparent,[!0,!0,!0,!0]);(function(Ke,ze,tt){const rt=Ke.gl;Ke.activeTexture.set(rt.TEXTURE1),Ke.viewport.set([0,0,ze.width/4,ze.height/4]);let gt=tt.heatmapFbos.get(a.aU);gt?(rt.bindTexture(rt.TEXTURE_2D,gt.colorAttachment.get()),Ke.bindFramebuffer.set(gt.framebuffer)):(gt=pc(Ke,ze.width/4,ze.height/4),tt.heatmapFbos.set(a.aU,gt))})(Fe,ae,xe),Fe.clear({color:a.aM.transparent});for(let Ke=0;Ke<Ee.length;Ke++){const ze=Ee[Ke];if(le.hasRenderableParent(ze))continue;const tt=le.getTile(ze),rt=tt.getBucket(xe);if(!rt)continue;const gt=rt.programConfigurations.get(xe.id),jt=ae.useProgram("heatmap",gt),{zoom:un}=ae.transform;jt.draw(Fe,Ge.TRIANGLES,Wi.disabled,Ve,$e,Ar.disabled,Ut(ze.posMatrix,tt,un,xe.paint.get("heatmap-intensity")),null,xe.id,rt.layoutVertexBuffer,rt.indexBuffer,rt.segments,xe.paint,ae.transform.zoom,gt)}Fe.viewport.set([0,0,ae.width,ae.height])})(P,G,W,K):P.renderPass==="translucent"&&(function(ae,le){const xe=ae.context,Ee=xe.gl;xe.setColorMode(ae.colorModeForRenderPass());const Fe=le.heatmapFbos.get(a.aU);Fe&&(xe.activeTexture.set(Ee.TEXTURE0),Ee.bindTexture(Ee.TEXTURE_2D,Fe.colorAttachment.get()),xe.activeTexture.set(Ee.TEXTURE1),Xc(xe,le).bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE),ae.useProgram("heatmapTexture").draw(xe,Ee.TRIANGLES,Wi.disabled,ir.disabled,ae.colorModeForRenderPass(),Ar.disabled,Ri(ae,le,0,1),null,le.id,ae.viewportBuffer,ae.quadTriangleIndexBuffer,ae.viewportSegments,le.paint,ae.transform.zoom))})(P,W)})(l,y,_,S);break;case"line":(function(P,G,W,K){if(P.renderPass!=="translucent")return;const te=W.paint.get("line-opacity"),ae=W.paint.get("line-width");if(te.constantOr(1)===0||ae.constantOr(1)===0)return;const le=P.depthModeForSublayer(0,Wi.ReadOnly),xe=P.colorModeForRenderPass(),Ee=W.paint.get("line-dasharray"),Fe=W.paint.get("line-pattern"),Ge=Fe.constantOr(1),Ve=W.paint.get("line-gradient"),$e=W.getCrossfadeParameters(),Ke=Ge?"linePattern":Ee?"lineSDF":Ve?"lineGradient":"line",ze=P.context,tt=ze.gl;let rt=!0;for(const gt of K){const jt=G.getTile(gt);if(Ge&&!jt.patternsLoaded())continue;const un=jt.getBucket(W);if(!un)continue;const gn=un.programConfigurations.get(W.id),En=P.context.program.get(),bn=P.useProgram(Ke,gn),hn=rt||bn.program!==En,kn=P.style.map.terrain&&P.style.map.terrain.getTerrainData(gt),ci=Fe.constantOr(null);if(ci&&jt.imageAtlas){const oi=jt.imageAtlas,kr=oi.patternPositions[ci.to.toString()],gi=oi.patternPositions[ci.from.toString()];kr&&gi&&gn.setConstantPatternPositions(kr,gi)}const xn=kn?gt:null,cn=Ge?vt(P,jt,W,$e,xn):Ee?Un(P,jt,W,Ee,$e,xn):Ve?dt(P,jt,W,un.lineClipsArray.length,xn):_t(P,jt,W,xn);if(Ge)ze.activeTexture.set(tt.TEXTURE0),jt.imageAtlasTexture.bind(tt.LINEAR,tt.CLAMP_TO_EDGE),gn.updatePaintBuffers($e);else if(Ee&&(hn||P.lineAtlas.dirty))ze.activeTexture.set(tt.TEXTURE0),P.lineAtlas.bind(ze);else if(Ve){const oi=un.gradients[W.id];let kr=oi.texture;if(W.gradientVersion!==oi.version){let gi=256;if(W.stepInterpolant){const Ki=G.getSource().maxzoom,vr=gt.canonical.z===Ki?Math.ceil(1<<P.transform.maxZoom-gt.canonical.z):1;gi=a.ac(a.aV(un.maxLineLength/a.X*1024*vr),256,ze.maxTextureSize)}oi.gradient=a.aW({expression:W.gradientExpression(),evaluationKey:"lineProgress",resolution:gi,image:oi.gradient||void 0,clips:un.lineClipsArray}),oi.texture?oi.texture.update(oi.gradient):oi.texture=new ue(ze,oi.gradient,tt.RGBA),oi.version=W.gradientVersion,kr=oi.texture}ze.activeTexture.set(tt.TEXTURE0),kr.bind(W.stepInterpolant?tt.NEAREST:tt.LINEAR,tt.CLAMP_TO_EDGE)}bn.draw(ze,tt.TRIANGLES,le,P.stencilModeForClipping(gt),xe,Ar.disabled,cn,kn,W.id,un.layoutVertexBuffer,un.indexBuffer,un.segments,W.paint,P.transform.zoom,gn,un.layoutVertexBuffer2),rt=!1}})(l,y,_,S);break;case"fill":(function(P,G,W,K){const te=W.paint.get("fill-color"),ae=W.paint.get("fill-opacity");if(ae.constantOr(1)===0)return;const le=P.colorModeForRenderPass(),xe=W.paint.get("fill-pattern"),Ee=P.opaquePassEnabledForLayer()&&!xe.constantOr(1)&&te.constantOr(a.aM.transparent).a===1&&ae.constantOr(0)===1?"opaque":"translucent";if(P.renderPass===Ee){const Fe=P.depthModeForSublayer(1,P.renderPass==="opaque"?Wi.ReadWrite:Wi.ReadOnly);gc(P,G,W,K,Fe,le,!1)}if(P.renderPass==="translucent"&&W.paint.get("fill-antialias")){const Fe=P.depthModeForSublayer(W.getPaintProperty("fill-outline-color")?2:0,Wi.ReadOnly);gc(P,G,W,K,Fe,le,!0)}})(l,y,_,S);break;case"fill-extrusion":(function(P,G,W,K){const te=W.paint.get("fill-extrusion-opacity");if(te!==0&&P.renderPass==="translucent"){const ae=new Wi(P.context.gl.LEQUAL,Wi.ReadWrite,P.depthRangeFor3D);if(te!==1||W.paint.get("fill-extrusion-pattern").constantOr(1))Pf(P,G,W,K,ae,ir.disabled,ho.disabled),Pf(P,G,W,K,ae,P.stencilModeFor3D(),P.colorModeForRenderPass());else{const le=P.colorModeForRenderPass();Pf(P,G,W,K,ae,ir.disabled,le)}}})(l,y,_,S);break;case"hillshade":(function(P,G,W,K){if(P.renderPass!=="offscreen"&&P.renderPass!=="translucent")return;const te=P.context,ae=P.depthModeForSublayer(0,Wi.ReadOnly),le=P.colorModeForRenderPass(),[xe,Ee]=P.renderPass==="translucent"?P.stencilConfigForOverlap(K):[{},K];for(const Fe of Ee){const Ge=G.getTile(Fe);Ge.needsHillshadePrepare!==void 0&&Ge.needsHillshadePrepare&&P.renderPass==="offscreen"?Md(P,Ge,W,ae,ir.disabled,le):P.renderPass==="translucent"&&Fd(P,Fe,Ge,W,ae,xe[Fe.overscaledZ],le)}te.viewport.set([0,0,P.width,P.height])})(l,y,_,S);break;case"raster":(function(P,G,W,K){if(P.renderPass!=="translucent"||W.paint.get("raster-opacity")===0||!K.length)return;const te=P.context,ae=te.gl,le=G.getSource(),xe=P.useProgram("raster"),Ee=P.colorModeForRenderPass(),[Fe,Ge]=le instanceof Gi?[{},K]:P.stencilConfigForOverlap(K),Ve=Ge[Ge.length-1].overscaledZ,$e=!P.options.moving;for(const Ke of Ge){const ze=P.depthModeForSublayer(Ke.overscaledZ-Ve,W.paint.get("raster-opacity")===1?Wi.ReadWrite:Wi.ReadOnly,ae.LESS),tt=G.getTile(Ke);tt.registerFadeDuration(W.paint.get("raster-fade-duration"));const rt=G.findLoadedParent(Ke,0),gt=G.findLoadedSibling(Ke),jt=Jc(tt,rt||gt||null,G,W,P.transform,P.style.map.terrain);let un,gn;const En=W.paint.get("raster-resampling")==="nearest"?ae.NEAREST:ae.LINEAR;te.activeTexture.set(ae.TEXTURE0),tt.texture.bind(En,ae.CLAMP_TO_EDGE,ae.LINEAR_MIPMAP_NEAREST),te.activeTexture.set(ae.TEXTURE1),rt?(rt.texture.bind(En,ae.CLAMP_TO_EDGE,ae.LINEAR_MIPMAP_NEAREST),un=Math.pow(2,rt.tileID.overscaledZ-tt.tileID.overscaledZ),gn=[tt.tileID.canonical.x*un%1,tt.tileID.canonical.y*un%1]):tt.texture.bind(En,ae.CLAMP_TO_EDGE,ae.LINEAR_MIPMAP_NEAREST),tt.texture.useMipmap&&te.extTextureFilterAnisotropic&&P.transform.pitch>20&&ae.texParameterf(ae.TEXTURE_2D,te.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,te.extTextureFilterAnisotropicMax);const bn=P.style.map.terrain&&P.style.map.terrain.getTerrainData(Ke),hn=bn?Ke:null,kn=hn?hn.posMatrix:P.transform.calculatePosMatrix(Ke.toUnwrapped(),$e),ci=Ai(kn,gn||[0,0],un||1,jt,W);le instanceof Gi?xe.draw(te,ae.TRIANGLES,ze,ir.disabled,Ee,Ar.disabled,ci,bn,W.id,le.boundsBuffer,P.quadTriangleIndexBuffer,le.boundsSegments):xe.draw(te,ae.TRIANGLES,ze,Fe[Ke.overscaledZ],Ee,Ar.disabled,ci,bn,W.id,P.rasterBoundsBuffer,P.quadTriangleIndexBuffer,P.rasterBoundsSegments)}})(l,y,_,S);break;case"background":(function(P,G,W,K){const te=W.paint.get("background-color"),ae=W.paint.get("background-opacity");if(ae===0)return;const le=P.context,xe=le.gl,Ee=P.transform,Fe=Ee.tileSize,Ge=W.paint.get("background-pattern");if(P.isPatternMissing(Ge))return;const Ve=!Ge&&te.a===1&&ae===1&&P.opaquePassEnabledForLayer()?"opaque":"translucent";if(P.renderPass!==Ve)return;const $e=ir.disabled,Ke=P.depthModeForSublayer(0,Ve==="opaque"?Wi.ReadWrite:Wi.ReadOnly),ze=P.colorModeForRenderPass(),tt=P.useProgram(Ge?"backgroundPattern":"background"),rt=K||Ee.coveringTiles({tileSize:Fe,terrain:P.style.map.terrain});Ge&&(le.activeTexture.set(xe.TEXTURE0),P.imageManager.bind(P.context));const gt=W.getCrossfadeParameters();for(const jt of rt){const un=K?jt.posMatrix:P.transform.calculatePosMatrix(jt.toUnwrapped()),gn=Ge?ua(un,ae,P,Ge,{tileID:jt,tileSize:Fe},gt):Io(un,ae,te),En=P.style.map.terrain&&P.style.map.terrain.getTerrainData(jt);tt.draw(le,xe.TRIANGLES,Ke,$e,ze,Ar.disabled,gn,En,W.id,P.tileExtentBuffer,P.quadTriangleIndexBuffer,P.tileExtentSegments)}})(l,0,_,S);break;case"custom":(function(P,G,W){const K=P.context,te=W.implementation;if(P.renderPass==="offscreen"){const ae=te.prerender;ae&&(P.setCustomLayerDefaults(),K.setColorMode(P.colorModeForRenderPass()),ae.call(te,K.gl,P.transform.customLayerMatrix()),K.setDirty(),P.setBaseState())}else if(P.renderPass==="translucent"){P.setCustomLayerDefaults(),K.setColorMode(P.colorModeForRenderPass()),K.setStencilMode(ir.disabled);const ae=te.renderingMode==="3d"?new Wi(P.context.gl.LEQUAL,Wi.ReadWrite,P.depthRangeFor3D):P.depthModeForSublayer(0,Wi.ReadOnly);K.setDepthMode(ae),te.render(K.gl,P.transform.customLayerMatrix(),{farZ:P.transform.farZ,nearZ:P.transform.nearZ,fov:P.transform._fov,modelViewProjectionMatrix:P.transform.modelViewProjectionMatrix,projectionMatrix:P.transform.projectionMatrix}),K.setDirty(),P.setBaseState(),K.bindFramebuffer.set(null)}})(l,0,_)}}translatePosMatrix(l,y,_,S,P){if(!_[0]&&!_[1])return l;const G=P?S==="map"?this.transform.angle:0:S==="viewport"?-this.transform.angle:0;if(G){const te=Math.sin(G),ae=Math.cos(G);_=[_[0]*ae-_[1]*te,_[0]*te+_[1]*ae]}const W=[P?_[0]:Fi(y,_[0],this.transform.zoom),P?_[1]:Fi(y,_[1],this.transform.zoom),0],K=new Float32Array(16);return a.J(K,l,W),K}saveTileTexture(l){const y=this._tileTextures[l.size[0]];y?y.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const y=this._tileTextures[l];return y&&y.length>0?y.pop():null}isPatternMissing(l){if(!l)return!1;if(!l.from||!l.to)return!0;const y=this.imageManager.getPattern(l.from.toString()),_=this.imageManager.getPattern(l.to.toString());return!y||!_}useProgram(l,y){this.cache=this.cache||{};const _=l+(y?y.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[_]||(this.cache[_]=new bt(this.context,aa[l],y,Mr[l],this._showOverdrawInspector,this.style.map.terrain)),this.cache[_]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ue(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:l,drawingBufferHeight:y}=this.context.gl;return this.width!==l||this.height!==y}}class Ci{constructor(l,y){this.points=l,this.planes=y}static fromInvProjectionMatrix(l,y,_){const S=Math.pow(2,_),P=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((W=>{const K=1/(W=a.af([],W,l))[3]/y*S;return a.b1(W,W,[K,K,1/W[3],K])})),G=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((W=>{const K=(function(xe,Ee){var Fe=Ee[0],Ge=Ee[1],Ve=Ee[2],$e=Fe*Fe+Ge*Ge+Ve*Ve;return $e>0&&($e=1/Math.sqrt($e)),xe[0]=Ee[0]*$e,xe[1]=Ee[1]*$e,xe[2]=Ee[2]*$e,xe})([],(function(xe,Ee,Fe){var Ge=Ee[0],Ve=Ee[1],$e=Ee[2],Ke=Fe[0],ze=Fe[1],tt=Fe[2];return xe[0]=Ve*tt-$e*ze,xe[1]=$e*Ke-Ge*tt,xe[2]=Ge*ze-Ve*Ke,xe})([],re([],P[W[0]],P[W[1]]),re([],P[W[2]],P[W[1]]))),te=-((ae=K)[0]*(le=P[W[1]])[0]+ae[1]*le[1]+ae[2]*le[2]);var ae,le;return K.concat(te)}));return new Ci(P,G)}}class Ui{constructor(l,y){this.min=l,this.max=y,this.center=(function(_,S,P){return _[0]=.5*S[0],_[1]=.5*S[1],_[2]=.5*S[2],_})([],(function(_,S,P){return _[0]=S[0]+P[0],_[1]=S[1]+P[1],_[2]=S[2]+P[2],_})([],this.min,this.max))}quadrant(l){const y=[l%2==0,l<2],_=q(this.min),S=q(this.max);for(let P=0;P<y.length;P++)_[P]=y[P]?this.min[P]:this.center[P],S[P]=y[P]?this.center[P]:this.max[P];return S[2]=this.max[2],new Ui(_,S)}distanceX(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]}distanceY(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]}intersects(l){const y=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let _=!0;for(let S=0;S<l.planes.length;S++){const P=l.planes[S];let G=0;for(let W=0;W<y.length;W++)a.b2(P,y[W])>=0&&G++;if(G===0)return 0;G!==y.length&&(_=!1)}if(_)return 2;for(let S=0;S<3;S++){let P=Number.MAX_VALUE,G=-Number.MAX_VALUE;for(let W=0;W<l.points.length;W++){const K=l.points[W][S]-this.min[S];P=Math.min(P,K),G=Math.max(G,K)}if(G<0||P>this.max[S]-this.min[S])return 0}return 1}}class zr{constructor(l=0,y=0,_=0,S=0){if(isNaN(l)||l<0||isNaN(y)||y<0||isNaN(_)||_<0||isNaN(S)||S<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=y,this.left=_,this.right=S}interpolate(l,y,_){return y.top!=null&&l.top!=null&&(this.top=a.y.number(l.top,y.top,_)),y.bottom!=null&&l.bottom!=null&&(this.bottom=a.y.number(l.bottom,y.bottom,_)),y.left!=null&&l.left!=null&&(this.left=a.y.number(l.left,y.left,_)),y.right!=null&&l.right!=null&&(this.right=a.y.number(l.right,y.right,_)),this}getCenter(l,y){const _=a.ac((this.left+l-this.right)/2,0,l),S=a.ac((this.top+y-this.bottom)/2,0,y);return new a.P(_,S)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new zr(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Tr=85.051129;class Gu{constructor(l,y,_,S,P){this.tileSize=512,this._renderWorldCopies=P===void 0||!!P,this._minZoom=l||0,this._maxZoom=y||22,this._minPitch=_??0,this._maxPitch=S??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new zr,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const l=new Gu(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return l.apply(this),l}apply(l){this.tileSize=l.tileSize,this.latRange=l.latRange,this.lngRange=l.lngRange,this.width=l.width,this.height=l.height,this._center=l._center,this._elevation=l._elevation,this.minElevationForCurrentTile=l.minElevationForCurrentTile,this.zoom=l.zoom,this.angle=l.angle,this._fov=l._fov,this._pitch=l._pitch,this._unmodified=l._unmodified,this._edgeInsets=l._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(l){const y=-a.b3(l,-180,180)*Math.PI/180;this.angle!==y&&(this._unmodified=!1,this.angle=y,this._calcMatrices(),this.rotationMatrix=(function(){var _=new a.A(4);return a.A!=Float32Array&&(_[1]=0,_[2]=0),_[0]=1,_[3]=1,_})(),(function(_,S,P){var G=S[0],W=S[1],K=S[2],te=S[3],ae=Math.sin(P),le=Math.cos(P);_[0]=G*le+K*ae,_[1]=W*le+te*ae,_[2]=G*-ae+K*le,_[3]=W*-ae+te*le})(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const y=a.ac(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==y&&(this._unmodified=!1,this._pitch=y,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=l/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(l){const y=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==y&&(this._unmodified=!1,this._zoom=y,this.tileZoom=Math.max(0,Math.floor(y)),this.scale=this.zoomScale(y),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(l){l!==this._elevation&&(this._elevation=l,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,y,_){this._unmodified=!1,this._edgeInsets.interpolate(l,y,_),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const y=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,y)}getVisibleUnwrappedCoordinates(l){const y=[new a.b4(0,l)];if(this._renderWorldCopies){const _=this.pointCoordinate(new a.P(0,0)),S=this.pointCoordinate(new a.P(this.width,0)),P=this.pointCoordinate(new a.P(this.width,this.height)),G=this.pointCoordinate(new a.P(0,this.height)),W=Math.floor(Math.min(_.x,S.x,P.x,G.x)),K=Math.floor(Math.max(_.x,S.x,P.x,G.x)),te=1;for(let ae=W-te;ae<=K+te;ae++)ae!==0&&y.push(new a.b4(ae,l))}return y}coveringTiles(l){var y,_;let S=this.coveringZoomLevel(l);const P=S;if(l.minzoom!==void 0&&S<l.minzoom)return[];l.maxzoom!==void 0&&S>l.maxzoom&&(S=l.maxzoom);const G=this.pointCoordinate(this.getCameraPoint()),W=a.Z.fromLngLat(this.center),K=Math.pow(2,S),te=[K*G.x,K*G.y,0],ae=[K*W.x,K*W.y,0],le=Ci.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,S);let xe=l.minzoom||0;!l.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(xe=S);const Ee=l.terrain?2/Math.min(this.tileSize,l.tileSize)*this.tileSize:3,Fe=ze=>({aabb:new Ui([ze*K,0,0],[(ze+1)*K,K,0]),zoom:0,x:0,y:0,wrap:ze,fullyVisible:!1}),Ge=[],Ve=[],$e=S,Ke=l.reparseOverscaled?P:S;if(this._renderWorldCopies)for(let ze=1;ze<=3;ze++)Ge.push(Fe(-ze)),Ge.push(Fe(ze));for(Ge.push(Fe(0));Ge.length>0;){const ze=Ge.pop(),tt=ze.x,rt=ze.y;let gt=ze.fullyVisible;if(!gt){const bn=ze.aabb.intersects(le);if(bn===0)continue;gt=bn===2}const jt=l.terrain?te:ae,un=ze.aabb.distanceX(jt),gn=ze.aabb.distanceY(jt),En=Math.max(Math.abs(un),Math.abs(gn));if(ze.zoom===$e||En>Ee+(1<<$e-ze.zoom)-2&&ze.zoom>=xe){const bn=$e-ze.zoom,hn=te[0]-.5-(tt<<bn),kn=te[1]-.5-(rt<<bn);Ve.push({tileID:new a.S(ze.zoom===$e?Ke:ze.zoom,ze.wrap,ze.zoom,tt,rt),distanceSq:J([ae[0]-.5-tt,ae[1]-.5-rt]),tileDistanceToCamera:Math.sqrt(hn*hn+kn*kn)})}else for(let bn=0;bn<4;bn++){const hn=(tt<<1)+bn%2,kn=(rt<<1)+(bn>>1),ci=ze.zoom+1;let xn=ze.aabb.quadrant(bn);if(l.terrain){const cn=new a.S(ci,ze.wrap,ci,hn,kn),oi=l.terrain.getMinMaxElevation(cn),kr=(y=oi.minElevation)!==null&&y!==void 0?y:this.elevation,gi=(_=oi.maxElevation)!==null&&_!==void 0?_:this.elevation;xn=new Ui([xn.min[0],xn.min[1],kr],[xn.max[0],xn.max[1],gi])}Ge.push({aabb:xn,zoom:ci,x:hn,y:kn,wrap:ze.wrap,fullyVisible:gt})}}return Ve.sort(((ze,tt)=>ze.distanceSq-tt.distanceSq)).map((ze=>ze.tileID))}resize(l,y){this.width=l,this.height=y,this.pixelsToGLUnits=[2/l,-2/y],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const y=a.ac(l.lat,-85.051129,Tr);return new a.P(a.O(l.lng)*this.worldSize,a.Q(y)*this.worldSize)}unproject(l){return new a.Z(l.x/this.worldSize,l.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(l){const y=this.elevation,_=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,S=this.pointLocation(this.centerPoint,l),P=l.getElevationForLngLatZoom(S,this.tileZoom);if(!(this.elevation-P))return;const G=_+y-P,W=Math.cos(this._pitch)*this.cameraToCenterDistance/G/a.b5(1,S.lat),K=this.scaleZoom(W/this.tileSize);this._elevation=P,this._center=S,this.zoom=K}setLocationAtPoint(l,y){const _=this.pointCoordinate(y),S=this.pointCoordinate(this.centerPoint),P=this.locationCoordinate(l),G=new a.Z(P.x-(_.x-S.x),P.y-(_.y-S.y));this.center=this.coordinateLocation(G),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(l,y){return y?this.coordinatePoint(this.locationCoordinate(l),y.getElevationForLngLatZoom(l,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(l))}pointLocation(l,y){return this.coordinateLocation(this.pointCoordinate(l,y))}locationCoordinate(l){return a.Z.fromLngLat(l)}coordinateLocation(l){return l&&l.toLngLat()}pointCoordinate(l,y){if(y){const xe=y.pointCoordinate(l);if(xe!=null)return xe}const _=[l.x,l.y,0,1],S=[l.x,l.y,1,1];a.af(_,_,this.pixelMatrixInverse),a.af(S,S,this.pixelMatrixInverse);const P=_[3],G=S[3],W=_[1]/P,K=S[1]/G,te=_[2]/P,ae=S[2]/G,le=te===ae?0:(0-te)/(ae-te);return new a.Z(a.y.number(_[0]/P,S[0]/G,le)/this.worldSize,a.y.number(W,K,le)/this.worldSize)}coordinatePoint(l,y=0,_=this.pixelMatrix){const S=[l.x*this.worldSize,l.y*this.worldSize,y,1];return a.af(S,S,_),new a.P(S[0]/S[3],S[1]/S[3])}getBounds(){const l=Math.max(0,this.height/2-this.getHorizon());return new Pe().extend(this.pointLocation(new a.P(0,l))).extend(this.pointLocation(new a.P(this.width,l))).extend(this.pointLocation(new a.P(this.width,this.height))).extend(this.pointLocation(new a.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Pe([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(l){l?(this.lngRange=[l.getWest(),l.getEast()],this.latRange=[l.getSouth(),l.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Tr])}calculateTileMatrix(l){const y=l.canonical,_=this.worldSize/this.zoomScale(y.z),S=y.x+Math.pow(2,y.z)*l.wrap,P=a.an(new Float64Array(16));return a.J(P,P,[S*_,y.y*_,0]),a.K(P,P,[_/a.X,_/a.X,1]),P}calculatePosMatrix(l,y=!1){const _=l.key,S=y?this._alignedPosMatrixCache:this._posMatrixCache;if(S[_])return S[_];const P=this.calculateTileMatrix(l);return a.L(P,y?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,P),S[_]=new Float32Array(P),S[_]}calculateFogMatrix(l){const y=l.key,_=this._fogMatrixCache;if(_[y])return _[y];const S=this.calculateTileMatrix(l);return a.L(S,this.fogMatrix,S),_[y]=new Float32Array(S),_[y]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(l,y){y=a.ac(+y,this.minZoom,this.maxZoom);const _={center:new a.N(l.lng,l.lat),zoom:y};let S=this.lngRange;if(!this._renderWorldCopies&&S===null){const ze=179.9999999999;S=[-ze,ze]}const P=this.tileSize*this.zoomScale(_.zoom);let G=0,W=P,K=0,te=P,ae=0,le=0;const{x:xe,y:Ee}=this.size;if(this.latRange){const ze=this.latRange;G=a.Q(ze[1])*P,W=a.Q(ze[0])*P,W-G<Ee&&(ae=Ee/(W-G))}S&&(K=a.b3(a.O(S[0])*P,0,P),te=a.b3(a.O(S[1])*P,0,P),te<K&&(te+=P),te-K<xe&&(le=xe/(te-K)));const{x:Fe,y:Ge}=this.project.call({worldSize:P},l);let Ve,$e;const Ke=Math.max(le||0,ae||0);if(Ke){const ze=new a.P(le?(te+K)/2:Fe,ae?(W+G)/2:Ge);return _.center=this.unproject.call({worldSize:P},ze).wrap(),_.zoom+=this.scaleZoom(Ke),_}if(this.latRange){const ze=Ee/2;Ge-ze<G&&($e=G+ze),Ge+ze>W&&($e=W-ze)}if(S){const ze=(K+te)/2;let tt=Fe;this._renderWorldCopies&&(tt=a.b3(Fe,ze-P/2,ze+P/2));const rt=xe/2;tt-rt<K&&(Ve=K+rt),tt+rt>te&&(Ve=te-rt)}if(Ve!==void 0||$e!==void 0){const ze=new a.P(Ve??Fe,$e??Ge);_.center=this.unproject.call({worldSize:P},ze).wrap()}return _}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const l=this._unmodified,{center:y,zoom:_}=this.getConstrained(this.center,this.zoom);this.center=y,this.zoom=_,this._unmodified=l,this._constraining=!1}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,y=this.point.x,_=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.b5(1,this.center.lat)*this.worldSize;let S=a.an(new Float64Array(16));a.K(S,S,[this.width/2,-this.height/2,1]),a.J(S,S,[1,-1,0]),this.labelPlaneMatrix=S,S=a.an(new Float64Array(16)),a.K(S,S,[1,-1,1]),a.J(S,S,[-1,-1,0]),a.K(S,S,[2/this.width,2/this.height,1]),this.glCoordMatrix=S;const P=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),G=Math.min(this.elevation,this.minElevationForCurrentTile),W=P-G*this._pixelPerMeter/Math.cos(this._pitch),K=G<0?W:P,te=Math.PI/2+this._pitch,ae=this._fov*(.5+l.y/this.height),le=Math.sin(ae)*K/Math.sin(a.ac(Math.PI-te-ae,.01,Math.PI-.01)),xe=this.getHorizon(),Ee=2*Math.atan(xe/this.cameraToCenterDistance)*(.5+l.y/(2*xe)),Fe=Math.sin(Ee)*K/Math.sin(a.ac(Math.PI-te-Ee,.01,Math.PI-.01)),Ge=Math.min(le,Fe);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*Ge+K),this.nearZ=this.height/50,S=new Float64Array(16),a.b6(S,this._fov,this.width/this.height,this.nearZ,this.farZ),S[8]=2*-l.x/this.width,S[9]=2*l.y/this.height,this.projectionMatrix=a.ae(S),a.K(S,S,[1,-1,1]),a.J(S,S,[0,0,-this.cameraToCenterDistance]),a.b7(S,S,this._pitch),a.ad(S,S,this.angle),a.J(S,S,[-y,-_,0]),this.mercatorMatrix=a.K([],S,[this.worldSize,this.worldSize,this.worldSize]),a.K(S,S,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.L(new Float64Array(16),this.labelPlaneMatrix,S),a.J(S,S,[0,0,-this.elevation]),this.modelViewProjectionMatrix=S,this.invModelViewProjectionMatrix=a.as([],S),this.fogMatrix=new Float64Array(16),a.b6(this.fogMatrix,this._fov,this.width/this.height,P,this.farZ),this.fogMatrix[8]=2*-l.x/this.width,this.fogMatrix[9]=2*l.y/this.height,a.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),a.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b7(this.fogMatrix,this.fogMatrix,this._pitch),a.ad(this.fogMatrix,this.fogMatrix,this.angle),a.J(this.fogMatrix,this.fogMatrix,[-y,-_,0]),a.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),a.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=a.L(new Float64Array(16),this.labelPlaneMatrix,S);const Ve=this.width%2/2,$e=this.height%2/2,Ke=Math.cos(this.angle),ze=Math.sin(this.angle),tt=y-Math.round(y)+Ke*Ve+ze*$e,rt=_-Math.round(_)+Ke*$e+ze*Ve,gt=new Float64Array(S);if(a.J(gt,gt,[tt>.5?tt-1:tt,rt>.5?rt-1:rt,0]),this.alignedModelViewProjectionMatrix=gt,S=a.as(new Float64Array(16),this.pixelMatrix),!S)throw new Error("failed to invert matrix");this.pixelMatrixInverse=S,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const l=this.pointCoordinate(new a.P(0,0)),y=[l.x*this.worldSize,l.y*this.worldSize,0,1];return a.af(y,y,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(0,l))}getCameraQueryGeometry(l){const y=this.getCameraPoint();if(l.length===1)return[l[0],y];{let _=y.x,S=y.y,P=y.x,G=y.y;for(const W of l)_=Math.min(_,W.x),S=Math.min(S,W.y),P=Math.max(P,W.x),G=Math.max(G,W.y);return[new a.P(_,S),new a.P(P,S),new a.P(P,G),new a.P(_,G),new a.P(_,S)]}}lngLatToCameraDepth(l,y){const _=this.locationCoordinate(l),S=[_.x*this.worldSize,_.y*this.worldSize,y,1];return a.af(S,S,this.modelViewProjectionMatrix),S[2]/S[3]}}function Wl(D,l){let y,_=!1,S=null,P=null;const G=()=>{S=null,_&&(D.apply(P,y),S=setTimeout(G,l),_=!1)};return(...W)=>(_=!0,P=this,y=W,S||G(),S)}class ea{constructor(l){this._getCurrentHash=()=>{const y=window.location.hash.replace("#","");if(this._hashName){let _;return y.split("&").map((S=>S.split("="))).forEach((S=>{S[0]===this._hashName&&(_=S)})),(_&&_[1]||"").split("/")}return y.split("/")},this._onHashChange=()=>{const y=this._getCurrentHash();if(y.length>=3&&!y.some((_=>isNaN(_)))){const _=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(y[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+y[2],+y[1]],zoom:+y[0],bearing:_,pitch:+(y[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const y=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,y)},this._removeHash=()=>{const y=this._getCurrentHash();if(y.length===0)return;const _=y.join("/");let S=_;S.split("&").length>0&&(S=S.split("&")[0]),this._hashName&&(S=`${this._hashName}=${_}`);let P=window.location.hash.replace(S,"");P.startsWith("#&")?P=P.slice(0,1)+P.slice(2):P==="#"&&(P="");let G=window.location.href.replace(/(#.+)?$/,P);G=G.replace("&&","&"),window.history.replaceState(window.history.state,null,G)},this._updateHash=Wl(this._updateHashUnthrottled,300),this._hashName=l&&encodeURIComponent(l)}addTo(l){return this._map=l,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(l){const y=this._map.getCenter(),_=Math.round(100*this._map.getZoom())/100,S=Math.ceil((_*Math.LN2+Math.log(512/360/.5))/Math.LN10),P=Math.pow(10,S),G=Math.round(y.lng*P)/P,W=Math.round(y.lat*P)/P,K=this._map.getBearing(),te=this._map.getPitch();let ae="";if(ae+=l?`/${G}/${W}/${_}`:`${_}/${W}/${G}`,(K||te)&&(ae+="/"+Math.round(10*K)/10),te&&(ae+=`/${Math.round(te)}`),this._hashName){const le=this._hashName;let xe=!1;const Ee=window.location.hash.slice(1).split("&").map((Fe=>{const Ge=Fe.split("=")[0];return Ge===le?(xe=!0,`${Ge}=${ae}`):Fe})).filter((Fe=>Fe));return xe||Ee.push(`${le}=${ae}`),`#${Ee.join("&")}`}return`#${ae}`}}const mc={linearity:.3,easing:a.b8(0,0,.3,1)},Ff=a.e({deceleration:2500,maxSpeed:1400},mc),Id=a.e({deceleration:20,maxSpeed:1400},mc),zh=a.e({deceleration:1e3,maxSpeed:360},mc),ed=a.e({deceleration:1e3,maxSpeed:90},mc);class Cr{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:v.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,y=v.now();for(;l.length>0&&y-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const y={zoom:0,bearing:0,pitch:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:P}of this._inertiaBuffer)y.zoom+=P.zoomDelta||0,y.bearing+=P.bearingDelta||0,y.pitch+=P.pitchDelta||0,P.panDelta&&y.pan._add(P.panDelta),P.around&&(y.around=P.around),P.pinchAround&&(y.pinchAround=P.pinchAround);const _=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,S={};if(y.pan.mag()){const P=yc(y.pan.mag(),_,a.e({},Ff,l||{}));S.offset=y.pan.mult(P.amount/y.pan.mag()),S.center=this._map.transform.center,Ld(S,P)}if(y.zoom){const P=yc(y.zoom,_,Id);S.zoom=this._map.transform.zoom+P.amount,Ld(S,P)}if(y.bearing){const P=yc(y.bearing,_,zh);S.bearing=this._map.transform.bearing+a.ac(P.amount,-179,179),Ld(S,P)}if(y.pitch){const P=yc(y.pitch,_,ed);S.pitch=this._map.transform.pitch+P.amount,Ld(S,P)}if(S.zoom||S.bearing){const P=y.pinchAround===void 0?y.around:y.pinchAround;S.around=P?this._map.unproject(P):this._map.getCenter()}return this.clear(),a.e(S,{noMoveStart:!0})}}function Ld(D,l){(!D.duration||D.duration<l.duration)&&(D.duration=l.duration,D.easing=l.easing)}function yc(D,l,y){const{maxSpeed:_,linearity:S,deceleration:P}=y,G=a.ac(D*S/(l/1e3),-_,_),W=Math.abs(G)/(P*S);return{easing:y.easing,duration:1e3*W,amount:G*(W/2)}}class Nr extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,y,_,S={}){const P=w.mousePos(y.getCanvas(),_),G=y.unproject(P);super(l,a.e({point:P,lngLat:G,originalEvent:_},S)),this._defaultPrevented=!1,this.target=y}}class pu extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,y,_){const S=l==="touchend"?_.changedTouches:_.touches,P=w.touchPos(y.getCanvasContainer(),S),G=P.map((K=>y.unproject(K))),W=P.reduce(((K,te,ae,le)=>K.add(te.div(le.length))),new a.P(0,0));super(l,{points:P,point:W,lngLats:G,lngLat:y.unproject(W),originalEvent:_}),this._defaultPrevented=!1}}class Wa extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,y,_){super(l,{originalEvent:_}),this._defaultPrevented=!1}}class td{constructor(l,y){this._map=l,this._clickTolerance=y.clickTolerance}reset(){delete this._mousedownPos}wheel(l){return this._firePreventable(new Wa(l.type,this._map,l))}mousedown(l,y){return this._mousedownPos=y,this._firePreventable(new Nr(l.type,this._map,l))}mouseup(l){this._map.fire(new Nr(l.type,this._map,l))}click(l,y){this._mousedownPos&&this._mousedownPos.dist(y)>=this._clickTolerance||this._map.fire(new Nr(l.type,this._map,l))}dblclick(l){return this._firePreventable(new Nr(l.type,this._map,l))}mouseover(l){this._map.fire(new Nr(l.type,this._map,l))}mouseout(l){this._map.fire(new Nr(l.type,this._map,l))}touchstart(l){return this._firePreventable(new pu(l.type,this._map,l))}touchmove(l){this._map.fire(new pu(l.type,this._map,l))}touchend(l){this._map.fire(new pu(l.type,this._map,l))}touchcancel(l){this._map.fire(new pu(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Qr{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(l){this._map.fire(new Nr(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Nr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._ignoreContextMenu||this._map.fire(new Nr(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class qo{constructor(l){this._map=l}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(l){return this.transform.pointLocation(a.P.convert(l),this._map.terrain)}}class ds{constructor(l,y){this._map=l,this._tr=new qo(l),this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=y.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,y){this.isEnabled()&&l.shiftKey&&l.button===0&&(w.disableDrag(),this._startPos=this._lastPos=y,this._active=!0)}mousemoveWindow(l,y){if(!this._active)return;const _=y;if(this._lastPos.equals(_)||!this._box&&_.dist(this._startPos)<this._clickTolerance)return;const S=this._startPos;this._lastPos=_,this._box||(this._box=w.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",l));const P=Math.min(S.x,_.x),G=Math.max(S.x,_.x),W=Math.min(S.y,_.y),K=Math.max(S.y,_.y);w.setTransform(this._box,`translate(${P}px,${W}px)`),this._box.style.width=G-P+"px",this._box.style.height=K-W+"px"}mouseupWindow(l,y){if(!this._active||l.button!==0)return;const _=this._startPos,S=y;if(this.reset(),w.suppressClick(),_.x!==S.x||_.y!==S.y)return this._map.fire(new a.k("boxzoomend",{originalEvent:l})),{cameraAnimation:P=>P.fitScreenCoordinates(_,S,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",l)}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(l,y){return this._map.fire(new a.k(l,{originalEvent:y}))}}function vc(D,l){if(D.length!==l.length)throw new Error(`The number of touches and points are not equal - touches ${D.length}, points ${l.length}`);const y={};for(let _=0;_<D.length;_++)y[D[_].identifier]=l[_];return y}class gl{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(l,y,_){(this.centroid||_.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),_.length===this.numTouches&&(this.centroid=(function(S){const P=new a.P(0,0);for(const G of S)P._add(G);return P.div(S.length)})(y),this.touches=vc(_,y)))}touchmove(l,y,_){if(this.aborted||!this.centroid)return;const S=vc(_,y);for(const P in this.touches){const G=S[P];(!G||G.dist(this.touches[P])>30)&&(this.aborted=!0)}}touchend(l,y,_){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),_.length===0){const S=!this.aborted&&this.centroid;if(this.reset(),S)return S}}}class Od{constructor(l){this.singleTap=new gl(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(l,y,_){this.singleTap.touchstart(l,y,_)}touchmove(l,y,_){this.singleTap.touchmove(l,y,_)}touchend(l,y,_){const S=this.singleTap.touchend(l,y,_);if(S){const P=l.timeStamp-this.lastTime<500,G=!this.lastTap||this.lastTap.dist(S)<30;if(P&&G||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=S,this.count===this.numTaps)return this.reset(),S}}}class gu{constructor(l){this._tr=new qo(l),this._zoomIn=new Od({numTouches:1,numTaps:2}),this._zoomOut=new Od({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,y,_){this._zoomIn.touchstart(l,y,_),this._zoomOut.touchstart(l,y,_)}touchmove(l,y,_){this._zoomIn.touchmove(l,y,_),this._zoomOut.touchmove(l,y,_)}touchend(l,y,_){const S=this._zoomIn.touchend(l,y,_),P=this._zoomOut.touchend(l,y,_),G=this._tr;return S?(this._active=!0,l.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:W=>W.easeTo({duration:300,zoom:G.zoom+1,around:G.unproject(S)},{originalEvent:l})}):P?(this._active=!0,l.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:W=>W.easeTo({duration:300,zoom:G.zoom-1,around:G.unproject(P)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Bs{constructor(l){this._enabled=!!l.enable,this._moveStateManager=l.moveStateManager,this._clickTolerance=l.clickTolerance||1,this._moveFunction=l.move,this._activateOnStart=!!l.activateOnStart,l.assignEvents(this),this.reset()}reset(l){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(l)}_move(...l){const y=this._moveFunction(...l);if(y.bearingDelta||y.pitchDelta||y.around||y.panDelta)return this._active=!0,y}dragStart(l,y){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(l)&&(this._moveStateManager.startMove(l),this._lastPoint=y.length?y[0]:y,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(l,y){if(!this.isEnabled())return;const _=this._lastPoint;if(!_)return;if(l.preventDefault(),!this._moveStateManager.isValidMoveEvent(l))return void this.reset(l);const S=y.length?y[0]:y;return!this._moved&&S.dist(_)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=S,this._move(_,S))}dragEnd(l){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(l)&&(this._moved&&w.suppressClick(),this.reset(l))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Mf={0:1,2:2};class rs{constructor(l){this._correctEvent=l.checkCorrectEvent}startMove(l){const y=w.mouseButton(l);this._eventButton=y}endMove(l){delete this._eventButton}isValidStartEvent(l){return this._correctEvent(l)}isValidMoveEvent(l){return!(function(y,_){const S=Mf[_];return y.buttons===void 0||(y.buttons&S)!==S})(l,this._eventButton)}isValidEndEvent(l){return w.mouseButton(l)===this._eventButton}}class Ul{constructor(){this._firstTouch=void 0}_isOneFingerTouch(l){return l.targetTouches.length===1}_isSameTouchEvent(l){return l.targetTouches[0].identifier===this._firstTouch}startMove(l){this._firstTouch=l.targetTouches[0].identifier}endMove(l){delete this._firstTouch}isValidStartEvent(l){return this._isOneFingerTouch(l)}isValidMoveEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}isValidEndEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}}const ha=D=>{D.mousedown=D.dragStart,D.mousemoveWindow=D.dragMove,D.mouseup=D.dragEnd,D.contextmenu=l=>{l.preventDefault()}},If=({enable:D,clickTolerance:l,bearingDegreesPerPixelMoved:y=.8})=>{const _=new rs({checkCorrectEvent:S=>w.mouseButton(S)===0&&S.ctrlKey||w.mouseButton(S)===2});return new Bs({clickTolerance:l,move:(S,P)=>({bearingDelta:(P.x-S.x)*y}),moveStateManager:_,enable:D,assignEvents:ha})},zd=({enable:D,clickTolerance:l,pitchDegreesPerPixelMoved:y=-.5})=>{const _=new rs({checkCorrectEvent:S=>w.mouseButton(S)===0&&S.ctrlKey||w.mouseButton(S)===2});return new Bs({clickTolerance:l,move:(S,P)=>({pitchDelta:(P.y-S.y)*y}),moveStateManager:_,enable:D,assignEvents:ha})};class Ua{constructor(l,y){this._clickTolerance=l.clickTolerance||1,this._map=y,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(l){return l<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(l,y,_){return this._calculateTransform(l,y,_)}touchmove(l,y,_){if(this._active){if(!this._shouldBePrevented(_.length))return l.preventDefault(),this._calculateTransform(l,y,_);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",l)}}touchend(l,y,_){this._calculateTransform(l,y,_),this._active&&this._shouldBePrevented(_.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,y,_){_.length>0&&(this._active=!0);const S=vc(_,y),P=new a.P(0,0),G=new a.P(0,0);let W=0;for(const te in S){const ae=S[te],le=this._touches[te];le&&(P._add(ae),G._add(ae.sub(le)),W++,S[te]=ae)}if(this._touches=S,this._shouldBePrevented(W)||!G.mag())return;const K=G.div(W);return this._sum._add(K),this._sum.mag()<this._clickTolerance?void 0:{around:P.div(W),panDelta:K}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ju{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(l,y,_){this._firstTwoTouches||_.length<2||(this._firstTwoTouches=[_[0].identifier,_[1].identifier],this._start([y[0],y[1]]))}touchmove(l,y,_){if(!this._firstTwoTouches)return;l.preventDefault();const[S,P]=this._firstTwoTouches,G=Hu(_,y,S),W=Hu(_,y,P);if(!G||!W)return;const K=this._aroundCenter?null:G.add(W).div(2);return this._move([G,W],K,l)}touchend(l,y,_){if(!this._firstTwoTouches)return;const[S,P]=this._firstTwoTouches,G=Hu(_,y,S),W=Hu(_,y,P);G&&W||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Hu(D,l,y){for(let _=0;_<D.length;_++)if(D[_].identifier===y)return l[_]}function nd(D,l){return Math.log(D/l)/Math.LN2}class Lf extends ju{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,y){const _=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(nd(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:nd(this._distance,_),pinchAround:y}}}function fa(D,l){return 180*D.angleWith(l)/Math.PI}class bc extends ju{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,y,_){const S=this._vector;if(this._vector=l[0].sub(l[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:fa(this._vector,S),pinchAround:y}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const y=25/(Math.PI*this._minDiameter)*360,_=fa(l,this._startVector);return Math.abs(_)<y}}function Vu(D){return Math.abs(D.y)>Math.abs(D.x)}class so extends ju{constructor(l){super(),this._currentTouchCount=0,this._map=l}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(l,y,_){super.touchstart(l,y,_),this._currentTouchCount=_.length}_start(l){this._lastPoints=l,Vu(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,y,_){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const S=l[0].sub(this._lastPoints[0]),P=l[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(S,P,_.timeStamp),this._valid?(this._lastPoints=l,this._active=!0,{pitchDelta:(S.y+P.y)/2*-.5}):void 0}gestureBeginsVertically(l,y,_){if(this._valid!==void 0)return this._valid;const S=l.mag()>=2,P=y.mag()>=2;if(!S&&!P)return;if(!S||!P)return this._firstMove===void 0&&(this._firstMove=_),_-this._firstMove<100&&void 0;const G=l.y>0==y.y>0;return Vu(l)&&Vu(y)&&G}}const Ko={panStep:100,bearingStep:15,pitchStep:10};class Lo{constructor(l){this._tr=new qo(l);const y=Ko;this._panStep=y.panStep,this._bearingStep=y.bearingStep,this._pitchStep=y.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let y=0,_=0,S=0,P=0,G=0;switch(l.keyCode){case 61:case 107:case 171:case 187:y=1;break;case 189:case 109:case 173:y=-1;break;case 37:l.shiftKey?_=-1:(l.preventDefault(),P=-1);break;case 39:l.shiftKey?_=1:(l.preventDefault(),P=1);break;case 38:l.shiftKey?S=1:(l.preventDefault(),G=-1);break;case 40:l.shiftKey?S=-1:(l.preventDefault(),G=1);break;default:return}return this._rotationDisabled&&(_=0,S=0),{cameraAnimation:W=>{const K=this._tr;W.easeTo({duration:300,easeId:"keyboardHandler",easing:Zo,zoom:y?Math.round(K.zoom)+y*(l.shiftKey?2:1):K.zoom,bearing:K.bearing+_*this._bearingStep,pitch:K.pitch+S*this._pitchStep,offset:[-P*this._panStep,-G*this._panStep],center:K.center},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Zo(D){return D*(2-D)}const ql=4.000244140625;class os{constructor(l,y){this._onTimeout=_=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(_)},this._map=l,this._tr=new qo(l),this._triggerRenderFrame=y,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(l){return!!this._map.cooperativeGestures.isEnabled()&&!(l.ctrlKey||this._map.cooperativeGestures.isBypassed(l))}wheel(l){if(!this.isEnabled())return;if(this._shouldBePrevented(l))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",l);let y=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const _=v.now(),S=_-(this._lastWheelEventTime||0);this._lastWheelEventTime=_,y!==0&&y%ql==0?this._type="wheel":y!==0&&Math.abs(y)<4?this._type="trackpad":S>400?(this._type=null,this._lastValue=y,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(S*y)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,y+=this._lastValue)),l.shiftKey&&y&&(y/=4),this._type&&(this._lastWheelEvent=l,this._delta-=y,this._active||this._start(l)),l.preventDefault()}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const y=w.mousePos(this._map.getCanvas(),l),_=this._tr;this._around=y.y>_.transform.height/2-_.transform.getHorizon()?a.N.convert(this._aroundCenter?_.center:_.unproject(y)):a.N.convert(_.center),this._aroundPoint=_.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._tr.transform;if(this._delta!==0){const K=this._type==="wheel"&&Math.abs(this._delta)>ql?this._wheelZoomRate:this._defaultZoomRate;let te=2/(1+Math.exp(-Math.abs(this._delta*K)));this._delta<0&&te!==0&&(te=1/te);const ae=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):l.scale;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(ae*te))),this._type==="wheel"&&(this._startZoom=l.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const y=typeof this._targetZoom=="number"?this._targetZoom:l.zoom,_=this._startZoom,S=this._easing;let P,G=!1;const W=v.now()-this._lastWheelEventTime;if(this._type==="wheel"&&_&&S&&W){const K=Math.min(W/200,1),te=S(K);P=a.y.number(_,y,te),K<1?this._frameId||(this._frameId=!0):G=!0}else P=y,G=!0;return this._active=!0,G&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!G,zoomDelta:P-l.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let y=a.b9;if(this._prevEase){const _=this._prevEase,S=(v.now()-_.start)/_.duration,P=_.easing(S+.01)-_.easing(S),G=.27/Math.sqrt(P*P+1e-4)*.01,W=Math.sqrt(.0729-G*G);y=a.b8(G,W,.25,1)}return this._prevEase={start:v.now(),duration:l,easing:y},y}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Ss{constructor(l,y){this._clickZoom=l,this._tapZoom=y}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class qa{constructor(l){this._tr=new qo(l),this.reset()}reset(){this._active=!1}dblclick(l,y){return l.preventDefault(),{cameraAnimation:_=>{_.easeTo({duration:300,zoom:this._tr.zoom+(l.shiftKey?-1:1),around:this._tr.unproject(y)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Of{constructor(){this._tap=new Od({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(l,y,_){if(!this._swipePoint)if(this._tapTime){const S=y[0],P=l.timeStamp-this._tapTime<500,G=this._tapPoint.dist(S)<30;P&&G?_.length>0&&(this._swipePoint=S,this._swipeTouch=_[0].identifier):this.reset()}else this._tap.touchstart(l,y,_)}touchmove(l,y,_){if(this._tapTime){if(this._swipePoint){if(_[0].identifier!==this._swipeTouch)return;const S=y[0],P=S.y-this._swipePoint.y;return this._swipePoint=S,l.preventDefault(),this._active=!0,{zoomDelta:P/128}}}else this._tap.touchmove(l,y,_)}touchend(l,y,_){if(this._tapTime)this._swipePoint&&_.length===0&&this.reset();else{const S=this._tap.touchend(l,y,_);S&&(this._tapTime=l.timeStamp,this._tapPoint=S)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $u{constructor(l,y,_){this._el=l,this._mousePan=y,this._touchPan=_}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class xc{constructor(l,y,_){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=y,this._mousePitch=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class wc{constructor(l,y,_,S){this._el=l,this._touchZoom=y,this._touchRotate=_,this._tapDragZoom=S,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class po{constructor(l,y){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=l,this._options=y,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const l=this._map.getCanvasContainer();l.classList.add("maplibregl-cooperative-gestures"),this._container=w.create("div","maplibregl-cooperative-gesture-screen",l);let y=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(y=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const _=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),S=document.createElement("div");S.className="maplibregl-desktop-message",S.textContent=y,this._container.appendChild(S);const P=document.createElement("div");P.className="maplibregl-mobile-message",P.textContent=_,this._container.appendChild(P),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(w.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(l){return l[this._bypassKey]}notifyGestureBlocked(l,y){this._enabled&&(this._map.fire(new a.k("cooperativegestureprevented",{gestureType:l,originalEvent:y})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const tr=D=>D.zoom||D.drag||D.pitch||D.rotate;class nn extends a.k{}function Kl(D){return D.panDelta&&D.panDelta.mag()||D.zoomDelta||D.bearingDelta||D.pitchDelta}class ka{constructor(l,y){this.handleWindowEvent=S=>{this.handleEvent(S,`${S.type}Window`)},this.handleEvent=(S,P)=>{if(S.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const G=S.type==="renderFrame"?void 0:S,W={needsRenderFrame:!1},K={},te={},ae=S.touches,le=ae?this._getMapTouches(ae):void 0,xe=le?w.touchPos(this._map.getCanvas(),le):w.mousePos(this._map.getCanvas(),S);for(const{handlerName:Ge,handler:Ve,allowed:$e}of this._handlers){if(!Ve.isEnabled())continue;let Ke;this._blockedByActive(te,$e,Ge)?Ve.reset():Ve[P||S.type]&&(Ke=Ve[P||S.type](S,xe,le),this.mergeHandlerResult(W,K,Ke,Ge,G),Ke&&Ke.needsRenderFrame&&this._triggerRenderFrame()),(Ke||Ve.isActive())&&(te[Ge]=Ve)}const Ee={};for(const Ge in this._previousActiveHandlers)te[Ge]||(Ee[Ge]=G);this._previousActiveHandlers=te,(Object.keys(Ee).length||Kl(W))&&(this._changes.push([W,K,Ee]),this._triggerRenderFrame()),(Object.keys(te).length||Kl(W))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Fe}=W;Fe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Fe(this._map))},this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Cr(l),this._bearingSnap=y.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(y);const _=this._el;this._listeners=[[_,"touchstart",{passive:!0}],[_,"touchmove",{passive:!1}],[_,"touchend",void 0],[_,"touchcancel",void 0],[_,"mousedown",void 0],[_,"mousemove",void 0],[_,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[_,"mouseover",void 0],[_,"mouseout",void 0],[_,"dblclick",void 0],[_,"click",void 0],[_,"keydown",{capture:!1}],[_,"keyup",void 0],[_,"wheel",{passive:!1}],[_,"contextmenu",void 0],[window,"blur",void 0]];for(const[S,P,G]of this._listeners)w.addEventListener(S,P,S===document?this.handleWindowEvent:this.handleEvent,G)}destroy(){for(const[l,y,_]of this._listeners)w.removeEventListener(l,y,l===document?this.handleWindowEvent:this.handleEvent,_)}_addDefaultHandlers(l){const y=this._map,_=y.getCanvasContainer();this._add("mapEvent",new td(y,l));const S=y.boxZoom=new ds(y,l);this._add("boxZoom",S),l.interactive&&l.boxZoom&&S.enable();const P=y.cooperativeGestures=new po(y,l.cooperativeGestures);this._add("cooperativeGestures",P),l.cooperativeGestures&&P.enable();const G=new gu(y),W=new qa(y);y.doubleClickZoom=new Ss(W,G),this._add("tapZoom",G),this._add("clickZoom",W),l.interactive&&l.doubleClickZoom&&y.doubleClickZoom.enable();const K=new Of;this._add("tapDragZoom",K);const te=y.touchPitch=new so(y);this._add("touchPitch",te),l.interactive&&l.touchPitch&&y.touchPitch.enable(l.touchPitch);const ae=If(l),le=zd(l);y.dragRotate=new xc(l,ae,le),this._add("mouseRotate",ae,["mousePitch"]),this._add("mousePitch",le,["mouseRotate"]),l.interactive&&l.dragRotate&&y.dragRotate.enable();const xe=(({enable:Ke,clickTolerance:ze})=>{const tt=new rs({checkCorrectEvent:rt=>w.mouseButton(rt)===0&&!rt.ctrlKey});return new Bs({clickTolerance:ze,move:(rt,gt)=>({around:gt,panDelta:gt.sub(rt)}),activateOnStart:!0,moveStateManager:tt,enable:Ke,assignEvents:ha})})(l),Ee=new Ua(l,y);y.dragPan=new $u(_,xe,Ee),this._add("mousePan",xe),this._add("touchPan",Ee,["touchZoom","touchRotate"]),l.interactive&&l.dragPan&&y.dragPan.enable(l.dragPan);const Fe=new bc,Ge=new Lf;y.touchZoomRotate=new wc(_,Ge,Fe,K),this._add("touchRotate",Fe,["touchPan","touchZoom"]),this._add("touchZoom",Ge,["touchPan","touchRotate"]),l.interactive&&l.touchZoomRotate&&y.touchZoomRotate.enable(l.touchZoomRotate);const Ve=y.scrollZoom=new os(y,(()=>this._triggerRenderFrame()));this._add("scrollZoom",Ve,["mousePan"]),l.interactive&&l.scrollZoom&&y.scrollZoom.enable(l.scrollZoom);const $e=y.keyboard=new Lo(y);this._add("keyboard",$e),l.interactive&&l.keyboard&&y.keyboard.enable(),this._add("blockableMapEvent",new Qr(y))}_add(l,y,_){this._handlers.push({handlerName:l,handler:y,allowed:_}),this._handlersById[l]=y}stop(l){if(!this._updatingCamera){for(const{handler:y}of this._handlers)y.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!tr(this._eventsInProgress)||this.isZooming()}_blockedByActive(l,y,_){for(const S in l)if(S!==_&&(!y||y.indexOf(S)<0))return!0;return!1}_getMapTouches(l){const y=[];for(const _ of l)this._el.contains(_.target)&&y.push(_);return y}mergeHandlerResult(l,y,_,S,P){if(!_)return;a.e(l,_);const G={handlerName:S,originalEvent:_.originalEvent||P};_.zoomDelta!==void 0&&(y.zoom=G),_.panDelta!==void 0&&(y.drag=G),_.pitchDelta!==void 0&&(y.pitch=G),_.bearingDelta!==void 0&&(y.rotate=G)}_applyChanges(){const l={},y={},_={};for(const[S,P,G]of this._changes)S.panDelta&&(l.panDelta=(l.panDelta||new a.P(0,0))._add(S.panDelta)),S.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+S.zoomDelta),S.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+S.bearingDelta),S.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+S.pitchDelta),S.around!==void 0&&(l.around=S.around),S.pinchAround!==void 0&&(l.pinchAround=S.pinchAround),S.noInertia&&(l.noInertia=S.noInertia),a.e(y,P),a.e(_,G);this._updateMapTransform(l,y,_),this._changes=[]}_updateMapTransform(l,y,_){const S=this._map,P=S._getTransformForUpdate(),G=S.terrain;if(!(Kl(l)||G&&this._terrainMovement))return this._fireEvents(y,_,!0);let{panDelta:W,zoomDelta:K,bearingDelta:te,pitchDelta:ae,around:le,pinchAround:xe}=l;xe!==void 0&&(le=xe),S._stop(!0),le=le||S.transform.centerPoint;const Ee=P.pointLocation(W?le.sub(W):le);te&&(P.bearing+=te),ae&&(P.pitch+=ae),K&&(P.zoom+=K),G?this._terrainMovement||!y.drag&&!y.zoom?y.drag&&this._terrainMovement?P.center=P.pointLocation(P.centerPoint.sub(W)):P.setLocationAtPoint(Ee,le):(this._terrainMovement=!0,this._map._elevationFreeze=!0,P.setLocationAtPoint(Ee,le)):P.setLocationAtPoint(Ee,le),S._applyUpdatedTransform(P),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(y,_,!0)}_fireEvents(l,y,_){const S=tr(this._eventsInProgress),P=tr(l),G={};for(const le in l){const{originalEvent:xe}=l[le];this._eventsInProgress[le]||(G[`${le}start`]=xe),this._eventsInProgress[le]=l[le]}!S&&P&&this._fireEvent("movestart",P.originalEvent);for(const le in G)this._fireEvent(le,G[le]);P&&this._fireEvent("move",P.originalEvent);for(const le in l){const{originalEvent:xe}=l[le];this._fireEvent(le,xe)}const W={};let K;for(const le in this._eventsInProgress){const{handlerName:xe,originalEvent:Ee}=this._eventsInProgress[le];this._handlersById[xe].isActive()||(delete this._eventsInProgress[le],K=y[xe]||Ee,W[`${le}end`]=K)}for(const le in W)this._fireEvent(le,W[le]);const te=tr(this._eventsInProgress),ae=(S||P)&&!te;if(ae&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const le=this._map._getTransformForUpdate();le.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(le)}if(_&&ae){this._updatingCamera=!0;const le=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),xe=Ee=>Ee!==0&&-this._bearingSnap<Ee&&Ee<this._bearingSnap;!le||!le.essential&&v.prefersReducedMotion?(this._map.fire(new a.k("moveend",{originalEvent:K})),xe(this._map.getBearing())&&this._map.resetNorth()):(xe(le.bearing||this._map.getBearing())&&(le.bearing=0),le.freezeElevation=!0,this._map.easeTo(le,{originalEvent:K})),this._updatingCamera=!1}}_fireEvent(l,y){this._map.fire(new a.k(l,y?{originalEvent:y}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((l=>{delete this._frameId,this.handleEvent(new nn("renderFrame",{timeStamp:l})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class zf extends a.E{constructor(l,y){super(),this._renderFrameCallback=()=>{const _=Math.min((v.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(_)),_<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=y.bearingSnap,this.on("moveend",(()=>{delete this._requestedCameraState}))}getCenter(){return new a.N(this.transform.center.lng,this.transform.center.lat)}setCenter(l,y){return this.jumpTo({center:l},y)}panBy(l,y,_){return l=a.P.convert(l).mult(-1),this.panTo(this.transform.center,a.e({offset:l},y),_)}panTo(l,y,_){return this.easeTo(a.e({center:l},y),_)}getZoom(){return this.transform.zoom}setZoom(l,y){return this.jumpTo({zoom:l},y),this}zoomTo(l,y,_){return this.easeTo(a.e({zoom:l},y),_)}zoomIn(l,y){return this.zoomTo(this.getZoom()+1,l,y),this}zoomOut(l,y){return this.zoomTo(this.getZoom()-1,l,y),this}getBearing(){return this.transform.bearing}setBearing(l,y){return this.jumpTo({bearing:l},y),this}getPadding(){return this.transform.padding}setPadding(l,y){return this.jumpTo({padding:l},y),this}rotateTo(l,y,_){return this.easeTo(a.e({bearing:l},y),_)}resetNorth(l,y){return this.rotateTo(0,a.e({duration:1e3},l),y),this}resetNorthPitch(l,y){return this.easeTo(a.e({bearing:0,pitch:0,duration:1e3},l),y),this}snapToNorth(l,y){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,y):this}getPitch(){return this.transform.pitch}setPitch(l,y){return this.jumpTo({pitch:l},y),this}cameraForBounds(l,y){l=Pe.convert(l).adjustAntiMeridian();const _=y&&y.bearing||0;return this._cameraForBoxAndBearing(l.getNorthWest(),l.getSouthEast(),_,y)}_cameraForBoxAndBearing(l,y,_,S){const P={top:0,bottom:0,right:0,left:0};if(typeof(S=a.e({padding:P,offset:[0,0],maxZoom:this.transform.maxZoom},S)).padding=="number"){const bn=S.padding;S.padding={top:bn,bottom:bn,right:bn,left:bn}}S.padding=a.e(P,S.padding);const G=this.transform,W=G.padding,K=new Pe(l,y),te=G.project(K.getNorthWest()),ae=G.project(K.getNorthEast()),le=G.project(K.getSouthEast()),xe=G.project(K.getSouthWest()),Ee=a.ba(-_),Fe=te.rotate(Ee),Ge=ae.rotate(Ee),Ve=le.rotate(Ee),$e=xe.rotate(Ee),Ke=new a.P(Math.max(Fe.x,Ge.x,$e.x,Ve.x),Math.max(Fe.y,Ge.y,$e.y,Ve.y)),ze=new a.P(Math.min(Fe.x,Ge.x,$e.x,Ve.x),Math.min(Fe.y,Ge.y,$e.y,Ve.y)),tt=Ke.sub(ze),rt=(G.width-(W.left+W.right+S.padding.left+S.padding.right))/tt.x,gt=(G.height-(W.top+W.bottom+S.padding.top+S.padding.bottom))/tt.y;if(gt<0||rt<0)return void a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const jt=Math.min(G.scaleZoom(G.scale*Math.min(rt,gt)),S.maxZoom),un=a.P.convert(S.offset),gn=new a.P((S.padding.left-S.padding.right)/2,(S.padding.top-S.padding.bottom)/2).rotate(a.ba(_)),En=un.add(gn).mult(G.scale/G.zoomScale(jt));return{center:G.unproject(te.add(le).div(2).sub(En)),zoom:jt,bearing:_}}fitBounds(l,y,_){return this._fitInternal(this.cameraForBounds(l,y),y,_)}fitScreenCoordinates(l,y,_,S,P){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.P.convert(l)),this.transform.pointLocation(a.P.convert(y)),_,S),S,P)}_fitInternal(l,y,_){return l?(delete(y=a.e(l,y)).padding,y.linear?this.easeTo(y,_):this.flyTo(y,_)):this}jumpTo(l,y){this.stop();const _=this._getTransformForUpdate();let S=!1,P=!1,G=!1;return"zoom"in l&&_.zoom!==+l.zoom&&(S=!0,_.zoom=+l.zoom),l.center!==void 0&&(_.center=a.N.convert(l.center)),"bearing"in l&&_.bearing!==+l.bearing&&(P=!0,_.bearing=+l.bearing),"pitch"in l&&_.pitch!==+l.pitch&&(G=!0,_.pitch=+l.pitch),l.padding==null||_.isPaddingEqual(l.padding)||(_.padding=l.padding),this._applyUpdatedTransform(_),this.fire(new a.k("movestart",y)).fire(new a.k("move",y)),S&&this.fire(new a.k("zoomstart",y)).fire(new a.k("zoom",y)).fire(new a.k("zoomend",y)),P&&this.fire(new a.k("rotatestart",y)).fire(new a.k("rotate",y)).fire(new a.k("rotateend",y)),G&&this.fire(new a.k("pitchstart",y)).fire(new a.k("pitch",y)).fire(new a.k("pitchend",y)),this.fire(new a.k("moveend",y))}calculateCameraOptionsFromTo(l,y,_,S=0){const P=a.Z.fromLngLat(l,y),G=a.Z.fromLngLat(_,S),W=G.x-P.x,K=G.y-P.y,te=G.z-P.z,ae=Math.hypot(W,K,te);if(ae===0)throw new Error("Can't calculate camera options with same From and To");const le=Math.hypot(W,K),xe=this.transform.scaleZoom(this.transform.cameraToCenterDistance/ae/this.transform.tileSize),Ee=180*Math.atan2(W,-K)/Math.PI;let Fe=180*Math.acos(le/ae)/Math.PI;return Fe=te<0?90-Fe:90+Fe,{center:G.toLngLat(),zoom:xe,pitch:Fe,bearing:Ee}}easeTo(l,y){var _;this._stop(!1,l.easeId),((l=a.e({offset:[0,0],duration:500,easing:a.b9},l)).animate===!1||!l.essential&&v.prefersReducedMotion)&&(l.duration=0);const S=this._getTransformForUpdate(),P=S.zoom,G=S.bearing,W=S.pitch,K=S.padding,te="bearing"in l?this._normalizeBearing(l.bearing,G):G,ae="pitch"in l?+l.pitch:W,le="padding"in l?l.padding:S.padding,xe=a.P.convert(l.offset);let Ee=S.centerPoint.add(xe);const Fe=S.pointLocation(Ee),{center:Ge,zoom:Ve}=S.getConstrained(a.N.convert(l.center||Fe),(_=l.zoom)!==null&&_!==void 0?_:P);this._normalizeCenter(Ge,S);const $e=S.project(Fe),Ke=S.project(Ge).sub($e),ze=S.zoomScale(Ve-P);let tt,rt;l.around&&(tt=a.N.convert(l.around),rt=S.locationPoint(tt));const gt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Ve!==P,this._rotating=this._rotating||G!==te,this._pitching=this._pitching||ae!==W,this._padding=!S.isPaddingEqual(le),this._easeId=l.easeId,this._prepareEase(y,l.noMoveStart,gt),this.terrain&&this._prepareElevation(Ge),this._ease((jt=>{if(this._zooming&&(S.zoom=a.y.number(P,Ve,jt)),this._rotating&&(S.bearing=a.y.number(G,te,jt)),this._pitching&&(S.pitch=a.y.number(W,ae,jt)),this._padding&&(S.interpolatePadding(K,le,jt),Ee=S.centerPoint.add(xe)),this.terrain&&!l.freezeElevation&&this._updateElevation(jt),tt)S.setLocationAtPoint(tt,rt);else{const un=S.zoomScale(S.zoom-P),gn=Ve>P?Math.min(2,ze):Math.max(.5,ze),En=Math.pow(gn,1-jt),bn=S.unproject($e.add(Ke.mult(jt*En)).mult(un));S.setLocationAtPoint(S.renderWorldCopies?bn.wrap():bn,Ee)}this._applyUpdatedTransform(S),this._fireMoveEvents(y)}),(jt=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(y,jt)}),l),this}_prepareEase(l,y,_={}){this._moving=!0,y||_.moving||this.fire(new a.k("movestart",l)),this._zooming&&!_.zooming&&this.fire(new a.k("zoomstart",l)),this._rotating&&!_.rotating&&this.fire(new a.k("rotatestart",l)),this._pitching&&!_.pitching&&this.fire(new a.k("pitchstart",l))}_prepareElevation(l){this._elevationCenter=l,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(l){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const y=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(l<1&&y!==this._elevationTarget){const _=this._elevationTarget-this._elevationStart;this._elevationStart+=l*(_-(y-(_*l+this._elevationStart))/(1-l)),this._elevationTarget=y}this.transform.elevation=a.y.number(this._elevationStart,this._elevationTarget,l)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(l){const y=l.getCameraPosition(),_=this.terrain.getElevationForLngLatZoom(y.lngLat,l.zoom);if(y.altitude<_){const S=this.calculateCameraOptionsFromTo(y.lngLat,_,l.center,l.elevation);return{pitch:S.pitch,zoom:S.zoom}}return{}}_applyUpdatedTransform(l){const y=[];if(this.terrain&&y.push((S=>this._elevateCameraIfInsideTerrain(S))),this.transformCameraUpdate&&y.push((S=>this.transformCameraUpdate(S))),!y.length)return;const _=l.clone();for(const S of y){const P=_.clone(),{center:G,zoom:W,pitch:K,bearing:te,elevation:ae}=S(P);G&&(P.center=G),W!==void 0&&(P.zoom=W),K!==void 0&&(P.pitch=K),te!==void 0&&(P.bearing=te),ae!==void 0&&(P.elevation=ae),_.apply(P)}this.transform.apply(_)}_fireMoveEvents(l){this.fire(new a.k("move",l)),this._zooming&&this.fire(new a.k("zoom",l)),this._rotating&&this.fire(new a.k("rotate",l)),this._pitching&&this.fire(new a.k("pitch",l))}_afterEase(l,y){if(this._easeId&&y&&this._easeId===y)return;delete this._easeId;const _=this._zooming,S=this._rotating,P=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,_&&this.fire(new a.k("zoomend",l)),S&&this.fire(new a.k("rotateend",l)),P&&this.fire(new a.k("pitchend",l)),this.fire(new a.k("moveend",l))}flyTo(l,y){var _;if(!l.essential&&v.prefersReducedMotion){const cn=a.M(l,["center","zoom","bearing","pitch","around"]);return this.jumpTo(cn,y)}this.stop(),l=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.b9},l);const S=this._getTransformForUpdate(),P=S.zoom,G=S.bearing,W=S.pitch,K=S.padding,te="bearing"in l?this._normalizeBearing(l.bearing,G):G,ae="pitch"in l?+l.pitch:W,le="padding"in l?l.padding:S.padding,xe=a.P.convert(l.offset);let Ee=S.centerPoint.add(xe);const Fe=S.pointLocation(Ee),{center:Ge,zoom:Ve}=S.getConstrained(a.N.convert(l.center||Fe),(_=l.zoom)!==null&&_!==void 0?_:P);this._normalizeCenter(Ge,S);const $e=S.zoomScale(Ve-P),Ke=S.project(Fe),ze=S.project(Ge).sub(Ke);let tt=l.curve;const rt=Math.max(S.width,S.height),gt=rt/$e,jt=ze.mag();if("minZoom"in l){const cn=a.ac(Math.min(l.minZoom,P,Ve),S.minZoom,S.maxZoom),oi=rt/S.zoomScale(cn-P);tt=Math.sqrt(oi/jt*2)}const un=tt*tt;function gn(cn){const oi=(gt*gt-rt*rt+(cn?-1:1)*un*un*jt*jt)/(2*(cn?gt:rt)*un*jt);return Math.log(Math.sqrt(oi*oi+1)-oi)}function En(cn){return(Math.exp(cn)-Math.exp(-cn))/2}function bn(cn){return(Math.exp(cn)+Math.exp(-cn))/2}const hn=gn(!1);let kn=function(cn){return bn(hn)/bn(hn+tt*cn)},ci=function(cn){return rt*((bn(hn)*(En(oi=hn+tt*cn)/bn(oi))-En(hn))/un)/jt;var oi},xn=(gn(!0)-hn)/tt;if(Math.abs(jt)<1e-6||!isFinite(xn)){if(Math.abs(rt-gt)<1e-6)return this.easeTo(l,y);const cn=gt<rt?-1:1;xn=Math.abs(Math.log(gt/rt))/tt,ci=()=>0,kn=oi=>Math.exp(cn*tt*oi)}return l.duration="duration"in l?+l.duration:1e3*xn/("screenSpeed"in l?+l.screenSpeed/tt:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0),this._zooming=!0,this._rotating=G!==te,this._pitching=ae!==W,this._padding=!S.isPaddingEqual(le),this._prepareEase(y,!1),this.terrain&&this._prepareElevation(Ge),this._ease((cn=>{const oi=cn*xn,kr=1/kn(oi);S.zoom=cn===1?Ve:P+S.scaleZoom(kr),this._rotating&&(S.bearing=a.y.number(G,te,cn)),this._pitching&&(S.pitch=a.y.number(W,ae,cn)),this._padding&&(S.interpolatePadding(K,le,cn),Ee=S.centerPoint.add(xe)),this.terrain&&!l.freezeElevation&&this._updateElevation(cn);const gi=cn===1?Ge:S.unproject(Ke.add(ze.mult(ci(oi))).mult(kr));S.setLocationAtPoint(S.renderWorldCopies?gi.wrap():gi,Ee),this._applyUpdatedTransform(S),this._fireMoveEvents(y)}),(()=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(y)}),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,y){var _;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const S=this._onEaseEnd;delete this._onEaseEnd,S.call(this,y)}return l||(_=this.handlers)===null||_===void 0||_.stop(!1),this}_ease(l,y,_){_.animate===!1||_.duration===0?(l(1),y()):(this._easeStart=v.now(),this._easeOptions=_,this._onEaseFrame=l,this._onEaseEnd=y,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(l,y){l=a.b3(l,-180,180);const _=Math.abs(l-y);return Math.abs(l-360-y)<_&&(l-=360),Math.abs(l+360-y)<_&&(l+=360),l}_normalizeCenter(l,y){if(!y.renderWorldCopies||y.lngRange)return;const _=l.lng-y.center.lng;l.lng+=_>180?-360:_<-180?360:0}queryTerrainElevation(l){return this.terrain?this.terrain.getElevationForLngLatZoom(a.N.convert(l),this.transform.tileZoom)-this.transform.elevation:null}}const Ka={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class mu{constructor(l=Ka){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=y=>{!y||y.sourceDataType!=="metadata"&&y.sourceDataType!=="visibility"&&y.dataType!=="style"&&y.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=l}getDefaultPosition(){return"bottom-right"}onAdd(l){return this._map=l,this._compact=this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(l,y){const _=this._map._getUIString(`AttributionControl.${y}`);l.title=_,l.setAttribute("aria-label",_)}_updateAttributions(){if(!this._map.style)return;let l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map((S=>typeof S!="string"?"":S))):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){const S=this._map.style.stylesheet;this.styleOwner=S.owner,this.styleId=S.id}const y=this._map.style.sourceCaches;for(const S in y){const P=y[S];if(P.used||P.usedForTerrain){const G=P.getSource();G.attribution&&l.indexOf(G.attribution)<0&&l.push(G.attribution)}}l=l.filter((S=>String(S).trim())),l.sort(((S,P)=>S.length-P.length)),l=l.filter(((S,P)=>{for(let G=P+1;G<l.length;G++)if(l[G].indexOf(S)>=0)return!1;return!0}));const _=l.join(" | ");_!==this._attribHTML&&(this._attribHTML=_,l.length?(this._innerContainer.innerHTML=_,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Cc{constructor(l={}){this._updateCompact=()=>{const y=this._container.children;if(y.length){const _=y[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&_.classList.add("maplibregl-compact"):_.classList.remove("maplibregl-compact")}},this.options=l}getDefaultPosition(){return"bottom-left"}onAdd(l){this._map=l,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl");const y=w.create("a","maplibregl-ctrl-logo");return y.target="_blank",y.rel="noopener nofollow",y.href="https://maplibre.org/",y.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),y.setAttribute("rel","noopener nofollow"),this._container.appendChild(y),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Oi{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const y=++this._id;return this._queue.push({callback:l,id:y,cancelled:!1}),y}remove(l){const y=this._currentlyRunning,_=y?this._queue.concat(y):this._queue;for(const S of _)if(S.id===l)return void(S.cancelled=!0)}run(l=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const y=this._currentlyRunning=this._queue;this._queue=[];for(const _ of y)if(!_.cancelled&&(_.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Se=a.Y([{name:"a_pos3d",type:"Int16",components:3}]);class _c extends a.E{constructor(l){super(),this.sourceCache=l,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,l.usedForTerrain=!0,l.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(l,y){this.sourceCache.update(l,y),this._renderableTilesKeys=[];const _={};for(const S of l.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:y}))_[S.key]=!0,this._renderableTilesKeys.push(S.key),this._tiles[S.key]||(S.posMatrix=new Float64Array(16),a.aP(S.posMatrix,0,a.X,0,a.X,0,1),this._tiles[S.key]=new wo(S,this.tileSize));for(const S in this._tiles)_[S]||delete this._tiles[S]}freeRtt(l){for(const y in this._tiles){const _=this._tiles[y];(!l||_.tileID.equals(l)||_.tileID.isChildOf(l)||l.isChildOf(_.tileID))&&(_.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((l=>this.getTileByID(l)))}getTileByID(l){return this._tiles[l]}getTerrainCoords(l){const y={};for(const _ of this._renderableTilesKeys){const S=this._tiles[_].tileID;if(S.canonical.equals(l.canonical)){const P=l.clone();P.posMatrix=new Float64Array(16),a.aP(P.posMatrix,0,a.X,0,a.X,0,1),y[_]=P}else if(S.canonical.isChildOf(l.canonical)){const P=l.clone();P.posMatrix=new Float64Array(16);const G=S.canonical.z-l.canonical.z,W=S.canonical.x-(S.canonical.x>>G<<G),K=S.canonical.y-(S.canonical.y>>G<<G),te=a.X>>G;a.aP(P.posMatrix,0,te,0,te,0,1),a.J(P.posMatrix,P.posMatrix,[-W*te,-K*te,0]),y[_]=P}else if(l.canonical.isChildOf(S.canonical)){const P=l.clone();P.posMatrix=new Float64Array(16);const G=l.canonical.z-S.canonical.z,W=l.canonical.x-(l.canonical.x>>G<<G),K=l.canonical.y-(l.canonical.y>>G<<G),te=a.X>>G;a.aP(P.posMatrix,0,a.X,0,a.X,0,1),a.J(P.posMatrix,P.posMatrix,[W*te,K*te,0]),a.K(P.posMatrix,P.posMatrix,[1/2**G,1/2**G,0]),y[_]=P}}return y}getSourceTile(l,y){const _=this.sourceCache._source;let S=l.overscaledZ-this.deltaZoom;if(S>_.maxzoom&&(S=_.maxzoom),S<_.minzoom)return null;this._sourceTileCache[l.key]||(this._sourceTileCache[l.key]=l.scaledTo(S).key);let P=this.sourceCache.getTileByID(this._sourceTileCache[l.key]);if((!P||!P.dem)&&y)for(;S>=_.minzoom&&(!P||!P.dem);)P=this.sourceCache.getTileByID(l.scaledTo(S--).key);return P}tilesAfterTime(l=Date.now()){return Object.values(this._tiles).filter((y=>y.timeAdded>=l))}}class yu{constructor(l,y,_){this.painter=l,this.sourceCache=new _c(y),this.options=_,this.exaggeration=typeof _.exaggeration=="number"?_.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(l,y,_,S=a.X){var P;if(!(y>=0&&y<S&&_>=0&&_<S))return 0;const G=this.getTerrainData(l),W=(P=G.tile)===null||P===void 0?void 0:P.dem;if(!W)return 0;const K=(function(Fe,Ge,Ve){var $e=Ge[0],Ke=Ge[1];return Fe[0]=Ve[0]*$e+Ve[4]*Ke+Ve[12],Fe[1]=Ve[1]*$e+Ve[5]*Ke+Ve[13],Fe})([],[y/S*a.X,_/S*a.X],G.u_terrain_matrix),te=[K[0]*W.dim,K[1]*W.dim],ae=Math.floor(te[0]),le=Math.floor(te[1]),xe=te[0]-ae,Ee=te[1]-le;return W.get(ae,le)*(1-xe)*(1-Ee)+W.get(ae+1,le)*xe*(1-Ee)+W.get(ae,le+1)*(1-xe)*Ee+W.get(ae+1,le+1)*xe*Ee}getElevationForLngLatZoom(l,y){if(!a.bb(y,l.wrap()))return 0;const{tileID:_,mercatorX:S,mercatorY:P}=this._getOverscaledTileIDFromLngLatZoom(l,y);return this.getElevation(_,S%a.X,P%a.X,a.X)}getElevation(l,y,_,S=a.X){return this.getDEMElevation(l,y,_,S)*this.exaggeration}getTerrainData(l){if(!this._emptyDemTexture){const S=this.painter.context,P=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ue(S,P,S.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ue(S,new a.R({width:1,height:1}),S.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(S.gl.NEAREST,S.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.an([])}const y=this.sourceCache.getSourceTile(l,!0);if(y&&y.dem&&(!y.demTexture||y.needsTerrainPrepare)){const S=this.painter.context;y.demTexture=this.painter.getTileTexture(y.dem.stride),y.demTexture?y.demTexture.update(y.dem.getPixels(),{premultiply:!1}):y.demTexture=new ue(S,y.dem.getPixels(),S.gl.RGBA,{premultiply:!1}),y.demTexture.bind(S.gl.NEAREST,S.gl.CLAMP_TO_EDGE),y.needsTerrainPrepare=!1}const _=y&&y+y.tileID.key+l.key;if(_&&!this._demMatrixCache[_]){const S=this.sourceCache.sourceCache._source.maxzoom;let P=l.canonical.z-y.tileID.canonical.z;l.overscaledZ>l.canonical.z&&(l.canonical.z>=S?P=l.canonical.z-S:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const G=l.canonical.x-(l.canonical.x>>P<<P),W=l.canonical.y-(l.canonical.y>>P<<P),K=a.bc(new Float64Array(16),[1/(a.X<<P),1/(a.X<<P),0]);a.J(K,K,[G*a.X,W*a.X,0]),this._demMatrixCache[l.key]={matrix:K,coord:l}}return{u_depth:2,u_terrain:3,u_terrain_dim:y&&y.dem&&y.dem.dim||1,u_terrain_matrix:_?this._demMatrixCache[l.key].matrix:this._emptyDemMatrix,u_terrain_unpack:y&&y.dem&&y.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(y&&y.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:y}}getFramebuffer(l){const y=this.painter,_=y.width/devicePixelRatio,S=y.height/devicePixelRatio;return!this._fbo||this._fbo.width===_&&this._fbo.height===S||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ue(y.context,{width:_,height:S,data:null},y.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(y.context.gl.NEAREST,y.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ue(y.context,{width:_,height:S,data:null},y.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(y.context.gl.NEAREST,y.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=y.context.createFramebuffer(_,S,!0,!1),this._fbo.depthAttachment.set(y.context.createRenderbuffer(y.context.gl.DEPTH_COMPONENT16,_,S))),this._fbo.colorAttachment.set(l==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const l=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const y=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let P=0,G=0;P<this._coordsTextureSize;P++)for(let W=0;W<this._coordsTextureSize;W++,G+=4)y[G+0]=255&W,y[G+1]=255&P,y[G+2]=W>>8<<4|P>>8,y[G+3]=0;const _=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(y.buffer)),S=new ue(l,_,l.gl.RGBA,{premultiply:!1});return S.bind(l.gl.NEAREST,l.gl.CLAMP_TO_EDGE),this._coordsTexture=S,S}pointCoordinate(l){this.painter.maybeDrawDepthAndCoords(!0);const y=new Uint8Array(4),_=this.painter.context,S=_.gl,P=Math.round(l.x*this.painter.pixelRatio/devicePixelRatio),G=Math.round(l.y*this.painter.pixelRatio/devicePixelRatio),W=Math.round(this.painter.height/devicePixelRatio);_.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),S.readPixels(P,W-G-1,1,1,S.RGBA,S.UNSIGNED_BYTE,y),_.bindFramebuffer.set(null);const K=y[0]+(y[2]>>4<<8),te=y[1]+((15&y[2])<<8),ae=this.coordsIndex[255-y[3]],le=ae&&this.sourceCache.getTileByID(ae);if(!le)return null;const xe=this._coordsTextureSize,Ee=(1<<le.tileID.canonical.z)*xe;return new a.Z((le.tileID.canonical.x*xe+K)/Ee+le.tileID.wrap,(le.tileID.canonical.y*xe+te)/Ee,this.getElevation(le.tileID,K,te,xe))}depthAtPoint(l){const y=new Uint8Array(4),_=this.painter.context,S=_.gl;return _.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),S.readPixels(l.x,this.painter.height/devicePixelRatio-l.y-1,1,1,S.RGBA,S.UNSIGNED_BYTE,y),_.bindFramebuffer.set(null),(y[0]/16777216+y[1]/65536+y[2]/256+y[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const l=this.painter.context,y=new a.bd,_=new a.aY,S=this.meshSize,P=a.X/S,G=S*S;for(let le=0;le<=S;le++)for(let xe=0;xe<=S;xe++)y.emplaceBack(xe*P,le*P,0);for(let le=0;le<G;le+=S+1)for(let xe=0;xe<S;xe++)_.emplaceBack(xe+le,S+xe+le+1,S+xe+le+2),_.emplaceBack(xe+le,S+xe+le+2,xe+le+1);const W=y.length,K=W+2*(S+1);for(const le of[0,1])for(let xe=0;xe<=S;xe++)for(const Ee of[0,1])y.emplaceBack(xe*P,le*a.X,Ee);for(let le=0;le<2*S;le+=2)_.emplaceBack(K+le,K+le+1,K+le+3),_.emplaceBack(K+le,K+le+3,K+le+2),_.emplaceBack(W+le,W+le+3,W+le+1),_.emplaceBack(W+le,W+le+2,W+le+3);const te=y.length,ae=te+2*(S+1);for(const le of[0,1])for(let xe=0;xe<=S;xe++)for(const Ee of[0,1])y.emplaceBack(le*a.X,xe*P,Ee);for(let le=0;le<2*S;le+=2)_.emplaceBack(te+le,te+le+1,te+le+3),_.emplaceBack(te+le,te+le+3,te+le+2),_.emplaceBack(ae+le,ae+le+3,ae+le+1),_.emplaceBack(ae+le,ae+le+2,ae+le+3);return this._mesh=new Ft(l.createVertexBuffer(y,Se.members),l.createIndexBuffer(_),a.a0.simpleSegment(0,0,y.length,_.length)),this._mesh}getMeshFrameDelta(l){return 2*Math.PI*a.be/Math.pow(2,l)/5}getMinTileElevationForLngLatZoom(l,y){var _;const{tileID:S}=this._getOverscaledTileIDFromLngLatZoom(l,y);return(_=this.getMinMaxElevation(S).minElevation)!==null&&_!==void 0?_:0}getMinMaxElevation(l){const y=this.getTerrainData(l).tile,_={minElevation:null,maxElevation:null};return y&&y.dem&&(_.minElevation=y.dem.min*this.exaggeration,_.maxElevation=y.dem.max*this.exaggeration),_}_getOverscaledTileIDFromLngLatZoom(l,y){const _=a.Z.fromLngLat(l.wrap()),S=(1<<y)*a.X,P=_.x*S,G=_.y*S,W=Math.floor(P/a.X),K=Math.floor(G/a.X);return{tileID:new a.S(y,0,y,W,K),mercatorX:P,mercatorY:G}}}class Pa{constructor(l,y,_){this._context=l,this._size=y,this._tileSize=_,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const l of this._objects)l.texture.destroy(),l.fbo.destroy()}_createObject(l){const y=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),_=new ue(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return _.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),y.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),y.colorAttachment.set(_.texture),{id:l,fbo:y,texture:_,stamp:-1,inUse:!1}}getObjectForId(l){return this._objects[l]}useObject(l){l.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((y=>l.id!==y)),this._recentlyUsed.push(l.id)}stampObject(l){l.stamp=++this._stamp}getOrCreateFreeObject(){for(const y of this._recentlyUsed)if(!this._objects[y].inUse)return this._objects[y];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const l=this._createObject(this._objects.length);return this._objects.push(l),l}freeObject(l){l.inUse=!1}freeAllObjects(){for(const l of this._objects)this.freeObject(l)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((l=>!l.inUse))===!1}}const Pi={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class vu{constructor(l,y){this.painter=l,this.terrain=y,this.pool=new Pa(l.context,30,y.sourceCache.tileSize*y.qualityFactor)}destruct(){this.pool.destruct()}getTexture(l){return this.pool.getObjectForId(l.rtt[this._stacks.length-1].id).texture}prepareForRender(l,y){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=l._order.filter((_=>!l._layers[_].isHidden(y))),this._coordsDescendingInv={};for(const _ in l.sourceCaches){this._coordsDescendingInv[_]={};const S=l.sourceCaches[_].getVisibleCoordinates();for(const P of S){const G=this.terrain.sourceCache.getTerrainCoords(P);for(const W in G)this._coordsDescendingInv[_][W]||(this._coordsDescendingInv[_][W]=[]),this._coordsDescendingInv[_][W].push(G[W])}}this._coordsDescendingInvStr={};for(const _ of l._order){const S=l._layers[_],P=S.source;if(Pi[S.type]&&!this._coordsDescendingInvStr[P]){this._coordsDescendingInvStr[P]={};for(const G in this._coordsDescendingInv[P])this._coordsDescendingInvStr[P][G]=this._coordsDescendingInv[P][G].map((W=>W.key)).sort().join()}}for(const _ of this._renderableTiles)for(const S in this._coordsDescendingInvStr){const P=this._coordsDescendingInvStr[S][_.tileID.key];P&&P!==_.rttCoords[S]&&(_.rtt=[])}}renderLayer(l){if(l.isHidden(this.painter.transform.zoom))return!1;const y=l.type,_=this.painter,S=this._renderableLayerIds[this._renderableLayerIds.length-1]===l.id;if(Pi[y]&&(this._prevType&&Pi[this._prevType]||this._stacks.push([]),this._prevType=y,this._stacks[this._stacks.length-1].push(l.id),!S))return!0;if(Pi[this._prevType]||Pi[y]&&S){this._prevType=y;const P=this._stacks.length-1,G=this._stacks[P]||[];for(const W of this._renderableTiles){if(this.pool.isFull()&&(Ht(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(W),W.rtt[P]){const te=this.pool.getObjectForId(W.rtt[P].id);if(te.stamp===W.rtt[P].stamp){this.pool.useObject(te);continue}}const K=this.pool.getOrCreateFreeObject();this.pool.useObject(K),this.pool.stampObject(K),W.rtt[P]={id:K.id,stamp:K.stamp},_.context.bindFramebuffer.set(K.fbo.framebuffer),_.context.clear({color:a.aM.transparent,stencil:0}),_.currentStencilSource=void 0;for(let te=0;te<G.length;te++){const ae=_.style._layers[G[te]],le=ae.source?this._coordsDescendingInv[ae.source][W.tileID.key]:[W.tileID];_.context.viewport.set([0,0,K.fbo.width,K.fbo.height]),_._renderTileClippingMasks(ae,le),_.renderLayer(_,_.style.sourceCaches[ae.source],ae,le),ae.source&&(W.rttCoords[ae.source]=this._coordsDescendingInvStr[ae.source][W.tileID.key])}}return Ht(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Pi[y]}return!1}}const bu={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},xu=d,Wu={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Ka,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Nh=D=>{D.touchstart=D.dragStart,D.touchmoveWindow=D.dragMove,D.touchend=D.dragEnd},Nd={showCompass:!0,showZoom:!0,visualizePitch:!1};class Nf{constructor(l,y,_=!1){this.mousedown=G=>{this.startMouse(a.e({},G,{ctrlKey:!0,preventDefault:()=>G.preventDefault()}),w.mousePos(this.element,G)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=G=>{this.moveMouse(G,w.mousePos(this.element,G))},this.mouseup=G=>{this.mouseRotate.dragEnd(G),this.mousePitch&&this.mousePitch.dragEnd(G),this.offTemp()},this.touchstart=G=>{G.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,G.targetTouches)[0],this.startTouch(G,this._startPos),w.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.addEventListener(window,"touchend",this.touchend))},this.touchmove=G=>{G.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,G.targetTouches)[0],this.moveTouch(G,this._lastPos))},this.touchend=G=>{G.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const S=l.dragRotate._mouseRotate.getClickTolerance(),P=l.dragRotate._mousePitch.getClickTolerance();this.element=y,this.mouseRotate=If({clickTolerance:S,enable:!0}),this.touchRotate=(({enable:G,clickTolerance:W,bearingDegreesPerPixelMoved:K=.8})=>{const te=new Ul;return new Bs({clickTolerance:W,move:(ae,le)=>({bearingDelta:(le.x-ae.x)*K}),moveStateManager:te,enable:G,assignEvents:Nh})})({clickTolerance:S,enable:!0}),this.map=l,_&&(this.mousePitch=zd({clickTolerance:P,enable:!0}),this.touchPitch=(({enable:G,clickTolerance:W,pitchDegreesPerPixelMoved:K=-.5})=>{const te=new Ul;return new Bs({clickTolerance:W,move:(ae,le)=>({pitchDelta:(le.y-ae.y)*K}),moveStateManager:te,enable:G,assignEvents:Nh})})({clickTolerance:P,enable:!0})),w.addEventListener(y,"mousedown",this.mousedown),w.addEventListener(y,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(y,"touchcancel",this.reset)}startMouse(l,y){this.mouseRotate.dragStart(l,y),this.mousePitch&&this.mousePitch.dragStart(l,y),w.disableDrag()}startTouch(l,y){this.touchRotate.dragStart(l,y),this.touchPitch&&this.touchPitch.dragStart(l,y),w.disableDrag()}moveMouse(l,y){const _=this.map,{bearingDelta:S}=this.mouseRotate.dragMove(l,y)||{};if(S&&_.setBearing(_.getBearing()+S),this.mousePitch){const{pitchDelta:P}=this.mousePitch.dragMove(l,y)||{};P&&_.setPitch(_.getPitch()+P)}}moveTouch(l,y){const _=this.map,{bearingDelta:S}=this.touchRotate.dragMove(l,y)||{};if(S&&_.setBearing(_.getBearing()+S),this.touchPitch){const{pitchDelta:P}=this.touchPitch.dragMove(l,y)||{};P&&_.setPitch(_.getPitch()+P)}}off(){const l=this.element;w.removeEventListener(l,"mousedown",this.mousedown),w.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend),w.removeEventListener(l,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend)}}let hs;function qi(D,l,y){const _=new a.N(D.lng,D.lat);if(D=new a.N(D.lng,D.lat),l){const S=new a.N(D.lng-360,D.lat),P=new a.N(D.lng+360,D.lat),G=y.locationPoint(D).distSqr(l);y.locationPoint(S).distSqr(l)<G?D=S:y.locationPoint(P).distSqr(l)<G&&(D=P)}for(;Math.abs(D.lng-y.center.lng)>180;){const S=y.locationPoint(D);if(S.x>=0&&S.y>=0&&S.x<=y.width&&S.y<=y.height)break;D.lng>y.center.lng?D.lng-=360:D.lng+=360}return D.lng!==_.lng&&y.locationPoint(D).y>y.height/2-y.getHorizon()?D:_}const Gs={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Bh(D,l,y){const _=D.classList;for(const S in Gs)_.remove(`maplibregl-${y}-anchor-${S}`);_.add(`maplibregl-${y}-anchor-${l}`)}class Bf extends a.E{constructor(l){if(super(),this._onKeyPress=y=>{const _=y.code,S=y.charCode||y.keyCode;_!=="Space"&&_!=="Enter"&&S!==32&&S!==13||this.togglePopup()},this._onMapClick=y=>{const _=y.originalEvent.target,S=this._element;this._popup&&(_===S||S.contains(_))&&this.togglePopup()},this._update=y=>{var _;if(!this._map)return;const S=this._map.loaded()&&!this._map.isMoving();((y==null?void 0:y.type)==="terrain"||(y==null?void 0:y.type)==="render"&&!S)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?qi(this._lngLat,this._flatPos,this._map.transform):(_=this._lngLat)===null||_===void 0?void 0:_.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let P="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?P=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(P=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let G="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?G="rotateX(0deg)":this._pitchAlignment==="map"&&(G=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||y&&y.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${Gs[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${G} ${P}`),v.frameAsync(new AbortController).then((()=>{this._updateOpacity(y&&y.type==="moveend")})).catch((()=>{}))},this._onMove=y=>{if(!this._isDragging){const _=this._clickTolerance||this._map._clickTolerance;this._isDragging=y.point.dist(this._pointerdownPos)>=_}this._isDragging&&(this._pos=y.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.k("dragstart"))),this.fire(new a.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.k("dragend")),this._state="inactive"},this._addDragHandler=y=>{this._element.contains(y.originalEvent.target)&&(y.preventDefault(),this._positionDelta=y.point.sub(this._pos).add(this._offset),this._pointerdownPos=y.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._subpixelPositioning=l&&l.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment!=="auto"?l.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(l==null?void 0:l.opacity,l==null?void 0:l.opacityWhenCovered),l&&l.element)this._element=l.element,this._offset=a.P.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div");const y=w.createNS("http://www.w3.org/2000/svg","svg"),_=41,S=27;y.setAttributeNS(null,"display","block"),y.setAttributeNS(null,"height",`${_}px`),y.setAttributeNS(null,"width",`${S}px`),y.setAttributeNS(null,"viewBox",`0 0 ${S} ${_}`);const P=w.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"stroke","none"),P.setAttributeNS(null,"stroke-width","1"),P.setAttributeNS(null,"fill","none"),P.setAttributeNS(null,"fill-rule","evenodd");const G=w.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"fill-rule","nonzero");const W=w.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"transform","translate(3.0, 29.0)"),W.setAttributeNS(null,"fill","#000000");const K=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const $e of K){const Ke=w.createNS("http://www.w3.org/2000/svg","ellipse");Ke.setAttributeNS(null,"opacity","0.04"),Ke.setAttributeNS(null,"cx","10.5"),Ke.setAttributeNS(null,"cy","5.80029008"),Ke.setAttributeNS(null,"rx",$e.rx),Ke.setAttributeNS(null,"ry",$e.ry),W.appendChild(Ke)}const te=w.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"fill",this._color);const ae=w.createNS("http://www.w3.org/2000/svg","path");ae.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),te.appendChild(ae);const le=w.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"opacity","0.25"),le.setAttributeNS(null,"fill","#000000");const xe=w.createNS("http://www.w3.org/2000/svg","path");xe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),le.appendChild(xe);const Ee=w.createNS("http://www.w3.org/2000/svg","g");Ee.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ee.setAttributeNS(null,"fill","#FFFFFF");const Fe=w.createNS("http://www.w3.org/2000/svg","g");Fe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ge=w.createNS("http://www.w3.org/2000/svg","circle");Ge.setAttributeNS(null,"fill","#000000"),Ge.setAttributeNS(null,"opacity","0.25"),Ge.setAttributeNS(null,"cx","5.5"),Ge.setAttributeNS(null,"cy","5.5"),Ge.setAttributeNS(null,"r","5.4999962");const Ve=w.createNS("http://www.w3.org/2000/svg","circle");Ve.setAttributeNS(null,"fill","#FFFFFF"),Ve.setAttributeNS(null,"cx","5.5"),Ve.setAttributeNS(null,"cy","5.5"),Ve.setAttributeNS(null,"r","5.4999962"),Fe.appendChild(Ge),Fe.appendChild(Ve),G.appendChild(W),G.appendChild(te),G.appendChild(le),G.appendChild(Ee),G.appendChild(Fe),y.appendChild(G),y.setAttributeNS(null,"height",_*this._scale+"px"),y.setAttributeNS(null,"width",S*this._scale+"px"),this._element.appendChild(y),this._offset=a.P.convert(l&&l.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(y=>{y.preventDefault()})),this._element.addEventListener("mousedown",(y=>{y.preventDefault()})),Bh(this._element,this._anchor,"marker"),l&&l.className)for(const y of l.className.split(" "))this._element.classList.add(y);this._popup=null}addTo(l){return this.remove(),this._map=l,this._element.setAttribute("aria-label",l._getUIString("Marker.Title")),l.getCanvasContainer().appendChild(this._element),l.on("move",this._update),l.on("moveend",this._update),l.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=a.N.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const S=Math.abs(13.5)/Math.SQRT2;l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[S,-1*(38.1-13.5+S)],"bottom-right":[-S,-1*(38.1-13.5+S)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(l){return this._subpixelPositioning=l,this}getPopup(){return this._popup}togglePopup(){const l=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:l?(l.isOpen()?l.remove():(l.setLngLat(this._lngLat),l.addTo(this._map)),this):this}_updateOpacity(l=!1){var y,_;if(!(!((y=this._map)===null||y===void 0)&&y.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(l)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const S=this._map,P=S.terrain.depthAtPoint(this._pos),G=S.terrain.getElevationForLngLatZoom(this._lngLat,S.transform.tileZoom);if(S.transform.lngLatToCameraDepth(this._lngLat,G)-P<.006)return void(this._element.style.opacity=this._opacity);const W=-this._offset.y/S.transform._pixelPerMeter,K=Math.sin(S.getPitch()*Math.PI/180)*W,te=S.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),ae=S.transform.lngLatToCameraDepth(this._lngLat,G+K)-te>.006;!((_=this._popup)===null||_===void 0)&&_.isOpen()&&ae&&this._popup.remove(),this._element.style.opacity=ae?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(l){return this._offset=a.P.convert(l),this._update(),this}addClassName(l){this._element.classList.add(l)}removeClassName(l){this._element.classList.remove(l)}toggleClassName(l){return this._element.classList.toggle(l)}setDraggable(l){return this._draggable=!!l,this._map&&(l?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l&&l!=="auto"?l:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(l,y){return l===void 0&&y===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),l!==void 0&&(this._opacity=l),y!==void 0&&(this._opacityWhenCovered=y),this._map&&this._updateOpacity(!0),this}}const Lm={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Gh=0,_o=!1;const ss={maxWidth:100,unit:"metric"};function Uu(D,l,y){const _=y&&y.maxWidth||100,S=D._container.clientHeight/2,P=D.unproject([0,S]),G=D.unproject([_,S]),W=P.distanceTo(G);if(y&&y.unit==="imperial"){const K=3.2808*W;K>5280?zn(l,_,K/5280,D._getUIString("ScaleControl.Miles")):zn(l,_,K,D._getUIString("ScaleControl.Feet"))}else y&&y.unit==="nautical"?zn(l,_,W/1852,D._getUIString("ScaleControl.NauticalMiles")):W>=1e3?zn(l,_,W/1e3,D._getUIString("ScaleControl.Kilometers")):zn(l,_,W,D._getUIString("ScaleControl.Meters"))}function zn(D,l,y,_){const S=(function(P){const G=Math.pow(10,`${Math.floor(P)}`.length-1);let W=P/G;return W=W>=10?10:W>=5?5:W>=3?3:W>=2?2:W>=1?1:(function(K){const te=Math.pow(10,Math.ceil(-Math.log(K)/Math.LN10));return Math.round(K*te)/te})(W),G*W})(y);D.style.width=l*(S/y)+"px",D.innerHTML=`${S}&nbsp;${_}`}const ii={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},qu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ku(D){if(D){if(typeof D=="number"){const l=Math.round(Math.abs(D)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,D),"top-left":new a.P(l,l),"top-right":new a.P(-l,l),bottom:new a.P(0,-D),"bottom-left":new a.P(l,-l),"bottom-right":new a.P(-l,-l),left:new a.P(D,0),right:new a.P(-D,0)}}if(D instanceof a.P||Array.isArray(D)){const l=a.P.convert(D);return{center:l,top:l,"top-left":l,"top-right":l,bottom:l,"bottom-left":l,"bottom-right":l,left:l,right:l}}return{center:a.P.convert(D.center||[0,0]),top:a.P.convert(D.top||[0,0]),"top-left":a.P.convert(D["top-left"]||[0,0]),"top-right":a.P.convert(D["top-right"]||[0,0]),bottom:a.P.convert(D.bottom||[0,0]),"bottom-left":a.P.convert(D["bottom-left"]||[0,0]),"bottom-right":a.P.convert(D["bottom-right"]||[0,0]),left:a.P.convert(D.left||[0,0]),right:a.P.convert(D.right||[0,0])}}return Ku(new a.P(0,0))}const Zu=d;s.AJAXError=a.bh,s.Evented=a.E,s.LngLat=a.N,s.MercatorCoordinate=a.Z,s.Point=a.P,s.addProtocol=a.bi,s.config=a.a,s.removeProtocol=a.bj,s.AttributionControl=mu,s.BoxZoomHandler=ds,s.CanvasSource=ji,s.CooperativeGesturesHandler=po,s.DoubleClickZoomHandler=Ss,s.DragPanHandler=$u,s.DragRotateHandler=xc,s.EdgeInsets=zr,s.FullscreenControl=class extends a.E{constructor(D={}){super(),this._onFullscreenChange=()=>{var l;let y=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((l=y==null?void 0:y.shadowRoot)===null||l===void 0)&&l.fullscreenElement;)y=y.shadowRoot.fullscreenElement;y===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,D&&D.container&&(D.container instanceof HTMLElement?this._container=D.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(D){return this._map=D,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const D=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon",D).setAttribute("aria-hidden","true"),D.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const D=this._getTitle();this._fullscreenButton.setAttribute("aria-label",D),this._fullscreenButton.title=D}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},s.GeoJSONSource=Cn,s.GeolocateControl=class extends a.E{constructor(D){super(),this._onSuccess=l=>{if(this._map){if(this._isOutOfMapMaxBounds(l))return this._setErrorState(),this.fire(new a.k("outofmaxbounds",l)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=l,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(l),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(l),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.k("geolocate",l)),this._finish()}},this._updateCamera=l=>{const y=new a.N(l.coords.longitude,l.coords.latitude),_=l.coords.accuracy,S=this._map.getBearing(),P=a.e({bearing:S},this.options.fitBoundsOptions),G=Pe.fromLngLat(y,_);this._map.fitBounds(G,P,{geolocateSource:!0})},this._updateMarker=l=>{if(l){const y=new a.N(l.coords.longitude,l.coords.latitude);this._accuracyCircleMarker.setLngLat(y).addTo(this._map),this._userLocationDotMarker.setLngLat(y).addTo(this._map),this._accuracy=l.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=l=>{if(this._map){if(this.options.trackUserLocation)if(l.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const y=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=y,this._geolocateButton.setAttribute("aria-label",y),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(l.code===3&&_o)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.k("error",l)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(l=>l.preventDefault())),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=l=>{if(this._map){if(l===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const y=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=y,this._geolocateButton.setAttribute("aria-label",y)}else{const y=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=y,this._geolocateButton.setAttribute("aria-label",y)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Bf({element:this._dotElement}),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Bf({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(y=>{y.geolocateSource||this._watchState!=="ACTIVE_LOCK"||y.originalEvent&&y.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.k("trackuserlocationend")),this.fire(new a.k("userlocationlostfocus")))}))}},this.options=a.e({},Lm,D)}onAdd(D){return this._map=D,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return a._(this,arguments,void 0,(function*(l=!1){if(hs!==void 0&&!l)return hs;if(window.navigator.permissions===void 0)return hs=!!window.navigator.geolocation,hs;try{hs=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{hs=!!window.navigator.geolocation}return hs}))})().then((l=>this._finishSetupUI(l))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Gh=0,_o=!1}_isOutOfMapMaxBounds(D){const l=this._map.getMaxBounds(),y=D.coords;return l&&(y.longitude<l.getWest()||y.longitude>l.getEast()||y.latitude<l.getSouth()||y.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const D=this._map.getBounds(),l=D.getSouthEast(),y=D.getNorthEast(),_=l.distanceTo(y),S=Math.ceil(this._accuracy/(_/this._map._container.clientHeight)*2);this._circleElement.style.width=`${S}px`,this._circleElement.style.height=`${S}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Gh--,_o=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.k("trackuserlocationstart")),this.fire(new a.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let D;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Gh++,Gh>1?(D={maximumAge:6e5,timeout:0},_o=!0):(D=this.options.positionOptions,_o=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,D)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},s.Hash=ea,s.ImageSource=Gi,s.KeyboardHandler=Lo,s.LngLatBounds=Pe,s.LogoControl=Cc,s.Map=class extends zf{constructor(D){a.bf.mark(a.bg.create);const l=Object.assign(Object.assign({},Wu),D);if(l.minZoom!=null&&l.maxZoom!=null&&l.minZoom>l.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(l.minPitch!=null&&l.maxPitch!=null&&l.minPitch>l.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(l.minPitch!=null&&l.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(l.maxPitch!=null&&l.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Gu(l.minZoom,l.maxZoom,l.minPitch,l.maxPitch,l.renderWorldCopies),{bearingSnap:l.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Oi,this._controls=[],this._mapId=a.a4(),this._contextLost=y=>{y.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.k("webglcontextlost",{originalEvent:y}))},this._contextRestored=y=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.k("webglcontextrestored",{originalEvent:y}))},this._onMapScroll=y=>{if(y.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=l.interactive,this._maxTileCacheSize=l.maxTileCacheSize,this._maxTileCacheZoomLevels=l.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=l.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=l.preserveDrawingBuffer===!0,this._antialias=l.antialias===!0,this._trackResize=l.trackResize===!0,this._bearingSnap=l.bearingSnap,this._refreshExpiredTiles=l.refreshExpiredTiles===!0,this._fadeDuration=l.fadeDuration,this._crossSourceCollisions=l.crossSourceCollisions===!0,this._collectResourceTiming=l.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},bu),l.locale),this._clickTolerance=l.clickTolerance,this._overridePixelRatio=l.pixelRatio,this._maxCanvasSize=l.maxCanvasSize,this.transformCameraUpdate=l.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=l.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=Y.addThrottleControl((()=>this.isMoving())),this._requestManager=new X(l.transformRequest),typeof l.container=="string"){if(this._container=document.getElementById(l.container),!this._container)throw new Error(`Container '${l.container}' not found.`)}else{if(!(l.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=l.container}if(l.maxBounds&&this.setMaxBounds(l.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))).on("moveend",(()=>this._update(!1))).on("zoom",(()=>this._update(!0))).on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})).once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let y=!1;const _=Wl((S=>{this._trackResize&&!this._removed&&(this.resize(S),this.redraw())}),50);this._resizeObserver=new ResizeObserver((S=>{y?_(S):y=!0})),this._resizeObserver.observe(this._container)}this.handlers=new ka(this,l),this._hash=l.hash&&new ea(typeof l.hash=="string"&&l.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:l.center,zoom:l.zoom,bearing:l.bearing,pitch:l.pitch}),l.bounds&&(this.resize(),this.fitBounds(l.bounds,a.e({},l.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=l.localIdeographFontFamily,this._validateStyle=l.validateStyle,l.style&&this.setStyle(l.style,{localIdeographFontFamily:l.localIdeographFontFamily}),l.attributionControl&&this.addControl(new mu(typeof l.attributionControl=="boolean"?void 0:l.attributionControl)),l.maplibreLogo&&this.addControl(new Cc,l.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(y=>{this._update(y.dataType==="style"),this.fire(new a.k(`${y.dataType}data`,y))})),this.on("dataloading",(y=>{this.fire(new a.k(`${y.dataType}dataloading`,y))})),this.on("dataabort",(y=>{this.fire(new a.k("sourcedataabort",y))}))}_getMapId(){return this._mapId}addControl(D,l){if(l===void 0&&(l=D.getDefaultPosition?D.getDefaultPosition():"top-right"),!D||!D.onAdd)return this.fire(new a.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const y=D.onAdd(this);this._controls.push(D);const _=this._controlPositions[l];return l.indexOf("bottom")!==-1?_.insertBefore(y,_.firstChild):_.appendChild(y),this}removeControl(D){if(!D||!D.onRemove)return this.fire(new a.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(D);return l>-1&&this._controls.splice(l,1),D.onRemove(this),this}hasControl(D){return this._controls.indexOf(D)>-1}calculateCameraOptionsFromTo(D,l,y,_){return _==null&&this.terrain&&(_=this.terrain.getElevationForLngLatZoom(y,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(D,l,y,_)}resize(D){var l;const y=this._containerDimensions(),_=y[0],S=y[1],P=this._getClampedPixelRatio(_,S);if(this._resizeCanvas(_,S,P),this.painter.resize(_,S,P),this.painter.overLimit()){const W=this.painter.context.gl;this._maxCanvasSize=[W.drawingBufferWidth,W.drawingBufferHeight];const K=this._getClampedPixelRatio(_,S);this._resizeCanvas(_,S,K),this.painter.resize(_,S,K)}this.transform.resize(_,S),(l=this._requestedCameraState)===null||l===void 0||l.resize(_,S);const G=!this._moving;return G&&(this.stop(),this.fire(new a.k("movestart",D)).fire(new a.k("move",D))),this.fire(new a.k("resize",D)),G&&this.fire(new a.k("moveend",D)),this}_getClampedPixelRatio(D,l){const{0:y,1:_}=this._maxCanvasSize,S=this.getPixelRatio(),P=D*S,G=l*S;return Math.min(P>y?y/P:1,G>_?_/G:1)*S}getPixelRatio(){var D;return(D=this._overridePixelRatio)!==null&&D!==void 0?D:devicePixelRatio}setPixelRatio(D){this._overridePixelRatio=D,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(D){return this.transform.setMaxBounds(Pe.convert(D)),this._update()}setMinZoom(D){if((D=D??-2)>=-2&&D<=this.transform.maxZoom)return this.transform.minZoom=D,this._update(),this.getZoom()<D&&this.setZoom(D),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(D){if((D=D??22)>=this.transform.minZoom)return this.transform.maxZoom=D,this._update(),this.getZoom()>D&&this.setZoom(D),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(D){if((D=D??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(D>=0&&D<=this.transform.maxPitch)return this.transform.minPitch=D,this._update(),this.getPitch()<D&&this.setPitch(D),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(D){if((D=D??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(D>=this.transform.minPitch)return this.transform.maxPitch=D,this._update(),this.getPitch()>D&&this.setPitch(D),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(D){return this.transform.renderWorldCopies=D,this._update()}project(D){return this.transform.locationPoint(a.N.convert(D),this.style&&this.terrain)}unproject(D){return this.transform.pointLocation(a.P.convert(D),this.terrain)}isMoving(){var D;return this._moving||((D=this.handlers)===null||D===void 0?void 0:D.isMoving())}isZooming(){var D;return this._zooming||((D=this.handlers)===null||D===void 0?void 0:D.isZooming())}isRotating(){var D;return this._rotating||((D=this.handlers)===null||D===void 0?void 0:D.isRotating())}_createDelegatedListener(D,l,y){if(D==="mouseenter"||D==="mouseover"){let _=!1;return{layers:l,listener:y,delegates:{mousemove:P=>{const G=l.filter((K=>this.getLayer(K))),W=G.length!==0?this.queryRenderedFeatures(P.point,{layers:G}):[];W.length?_||(_=!0,y.call(this,new Nr(D,this,P.originalEvent,{features:W}))):_=!1},mouseout:()=>{_=!1}}}}if(D==="mouseleave"||D==="mouseout"){let _=!1;return{layers:l,listener:y,delegates:{mousemove:G=>{const W=l.filter((K=>this.getLayer(K)));(W.length!==0?this.queryRenderedFeatures(G.point,{layers:W}):[]).length?_=!0:_&&(_=!1,y.call(this,new Nr(D,this,G.originalEvent)))},mouseout:G=>{_&&(_=!1,y.call(this,new Nr(D,this,G.originalEvent)))}}}}{const _=S=>{const P=l.filter((W=>this.getLayer(W))),G=P.length!==0?this.queryRenderedFeatures(S.point,{layers:P}):[];G.length&&(S.features=G,y.call(this,S),delete S.features)};return{layers:l,listener:y,delegates:{[D]:_}}}}_saveDelegatedListener(D,l){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[D]=this._delegatedListeners[D]||[],this._delegatedListeners[D].push(l)}_removeDelegatedListener(D,l,y){if(!this._delegatedListeners||!this._delegatedListeners[D])return;const _=this._delegatedListeners[D];for(let S=0;S<_.length;S++){const P=_[S];if(P.listener===y&&P.layers.length===l.length&&P.layers.every((G=>l.includes(G)))){for(const G in P.delegates)this.off(G,P.delegates[G]);return void _.splice(S,1)}}}on(D,l,y){if(y===void 0)return super.on(D,l);const _=this._createDelegatedListener(D,typeof l=="string"?[l]:l,y);this._saveDelegatedListener(D,_);for(const S in _.delegates)this.on(S,_.delegates[S]);return this}once(D,l,y){if(y===void 0)return super.once(D,l);const _=typeof l=="string"?[l]:l,S=this._createDelegatedListener(D,_,y);for(const P in S.delegates){const G=S.delegates[P];S.delegates[P]=(...W)=>{this._removeDelegatedListener(D,_,y),G(...W)}}this._saveDelegatedListener(D,S);for(const P in S.delegates)this.once(P,S.delegates[P]);return this}off(D,l,y){return y===void 0?super.off(D,l):(this._removeDelegatedListener(D,typeof l=="string"?[l]:l,y),this)}queryRenderedFeatures(D,l){if(!this.style)return[];let y;const _=D instanceof a.P||Array.isArray(D),S=_?D:[[0,0],[this.transform.width,this.transform.height]];if(l=l||(_?{}:D)||{},S instanceof a.P||typeof S[0]=="number")y=[a.P.convert(S)];else{const P=a.P.convert(S[0]),G=a.P.convert(S[1]);y=[P,new a.P(G.x,P.y),G,new a.P(P.x,G.y),P]}return this.style.queryRenderedFeatures(y,l,this.transform)}querySourceFeatures(D,l){return this.style.querySourceFeatures(D,l)}setStyle(D,l){return(l=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&D?(this._diffStyle(D,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._updateStyle(D,l))}setTransformRequest(D){return this._requestManager.setTransformRequest(D),this}_getUIString(D){const l=this._locale[D];if(l==null)throw new Error(`Missing UI string '${D}'`);return l}_updateStyle(D,l){if(l.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(D,l)));const y=this.style&&l.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!D)),D?(this.style=new Pd(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof D=="string"?this.style.loadURL(D,l,y):this.style.loadJSON(D,l,y),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Pd(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(D,l){if(typeof D=="string"){const y=this._requestManager.transformRequest(D,"Style");a.h(y,new AbortController).then((_=>{this._updateDiff(_.data,l)})).catch((_=>{_&&this.fire(new a.j(_))}))}else typeof D=="object"&&this._updateDiff(D,l)}_updateDiff(D,l){try{this.style.setState(D,l)&&this._update(!0)}catch(y){a.w(`Unable to perform style diff: ${y.message||y.error||y}.  Rebuilding the style from scratch.`),this._updateStyle(D,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(D,l){return this._lazyInitEmptyStyle(),this.style.addSource(D,l),this._update(!0)}isSourceLoaded(D){const l=this.style&&this.style.sourceCaches[D];if(l!==void 0)return l.loaded();this.fire(new a.j(new Error(`There is no source with ID '${D}'`)))}setTerrain(D){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),D){const l=this.style.sourceCaches[D.source];if(!l)throw new Error(`cannot load terrain, because there exists no source with ID: ${D.source}`);this.terrain===null&&l.reload();for(const y in this.style._layers){const _=this.style._layers[y];_.type==="hillshade"&&_.source===D.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new yu(this.painter,l,D),this.painter.renderToTexture=new vu(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=y=>{y.dataType==="style"?this.terrain.sourceCache.freeRtt():y.dataType==="source"&&y.tile&&(y.sourceId!==D.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(y.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new a.k("terrain",{terrain:D})),this}getTerrain(){var D,l;return(l=(D=this.terrain)===null||D===void 0?void 0:D.options)!==null&&l!==void 0?l:null}areTilesLoaded(){const D=this.style&&this.style.sourceCaches;for(const l in D){const y=D[l]._tiles;for(const _ in y){const S=y[_];if(S.state!=="loaded"&&S.state!=="errored")return!1}}return!0}removeSource(D){return this.style.removeSource(D),this._update(!0)}getSource(D){return this.style.getSource(D)}addImage(D,l,y={}){const{pixelRatio:_=1,sdf:S=!1,stretchX:P,stretchY:G,content:W,textFitWidth:K,textFitHeight:te}=y;if(this._lazyInitEmptyStyle(),!(l instanceof HTMLImageElement||a.b(l))){if(l.width===void 0||l.height===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:ae,height:le,data:xe}=l,Ee=l;return this.style.addImage(D,{data:new a.R({width:ae,height:le},new Uint8Array(xe)),pixelRatio:_,stretchX:P,stretchY:G,content:W,textFitWidth:K,textFitHeight:te,sdf:S,version:0,userImage:Ee}),Ee.onAdd&&Ee.onAdd(this,D),this}}{const{width:ae,height:le,data:xe}=v.getImageData(l);this.style.addImage(D,{data:new a.R({width:ae,height:le},xe),pixelRatio:_,stretchX:P,stretchY:G,content:W,textFitWidth:K,textFitHeight:te,sdf:S,version:0})}}updateImage(D,l){const y=this.style.getImage(D);if(!y)return this.fire(new a.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const _=l instanceof HTMLImageElement||a.b(l)?v.getImageData(l):l,{width:S,height:P,data:G}=_;if(S===void 0||P===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(S!==y.data.width||P!==y.data.height)return this.fire(new a.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const W=!(l instanceof HTMLImageElement||a.b(l));return y.data.replace(G,W),this.style.updateImage(D,y),this}getImage(D){return this.style.getImage(D)}hasImage(D){return D?!!this.style.getImage(D):(this.fire(new a.j(new Error("Missing required image id"))),!1)}removeImage(D){this.style.removeImage(D)}loadImage(D){return Y.getImage(this._requestManager.transformRequest(D,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(D,l){return this._lazyInitEmptyStyle(),this.style.addLayer(D,l),this._update(!0)}moveLayer(D,l){return this.style.moveLayer(D,l),this._update(!0)}removeLayer(D){return this.style.removeLayer(D),this._update(!0)}getLayer(D){return this.style.getLayer(D)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(D,l,y){return this.style.setLayerZoomRange(D,l,y),this._update(!0)}setFilter(D,l,y={}){return this.style.setFilter(D,l,y),this._update(!0)}getFilter(D){return this.style.getFilter(D)}setPaintProperty(D,l,y,_={}){return this.style.setPaintProperty(D,l,y,_),this._update(!0)}getPaintProperty(D,l){return this.style.getPaintProperty(D,l)}setLayoutProperty(D,l,y,_={}){return this.style.setLayoutProperty(D,l,y,_),this._update(!0)}getLayoutProperty(D,l){return this.style.getLayoutProperty(D,l)}setGlyphs(D,l={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(D,l),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(D,l,y={}){return this._lazyInitEmptyStyle(),this.style.addSprite(D,l,y,(_=>{_||this._update(!0)})),this}removeSprite(D){return this._lazyInitEmptyStyle(),this.style.removeSprite(D),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(D,l={}){return this._lazyInitEmptyStyle(),this.style.setSprite(D,l,(y=>{y||this._update(!0)})),this}setLight(D,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(D,l),this._update(!0)}getLight(){return this.style.getLight()}setSky(D){return this._lazyInitEmptyStyle(),this.style.setSky(D),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(D,l){return this.style.setFeatureState(D,l),this._update()}removeFeatureState(D,l){return this.style.removeFeatureState(D,l),this._update()}getFeatureState(D){return this.style.getFeatureState(D)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let D=0,l=0;return this._container&&(D=this._container.clientWidth||400,l=this._container.clientHeight||300),[D,l]}_setupContainer(){const D=this._container;D.classList.add("maplibregl-map");const l=this._canvasContainer=w.create("div","maplibregl-canvas-container",D);this._interactive&&l.classList.add("maplibregl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const y=this._containerDimensions(),_=this._getClampedPixelRatio(y[0],y[1]);this._resizeCanvas(y[0],y[1],_);const S=this._controlContainer=w.create("div","maplibregl-control-container",D),P=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((G=>{P[G]=w.create("div",`maplibregl-ctrl-${G} `,S)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(D,l,y){this._canvas.width=Math.floor(y*D),this._canvas.height=Math.floor(y*l),this._canvas.style.width=`${D}px`,this._canvas.style.height=`${l}px`}_setupPainter(){const D={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let l=null;this._canvas.addEventListener("webglcontextcreationerror",(_=>{l={requestedAttributes:D},_&&(l.statusMessage=_.statusMessage,l.type=_.type)}),{once:!0});const y=this._canvas.getContext("webgl2",D)||this._canvas.getContext("webgl",D);if(!y){const _="Failed to initialize WebGL";throw l?(l.message=_,new Error(JSON.stringify(l))):new Error(_)}this.painter=new Bn(y,this.transform),R.testSupport(y)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(D){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||D,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(D){return this._update(),this._renderTaskQueue.add(D)}_cancelRenderFrame(D){this._renderTaskQueue.remove(D)}_render(D){const l=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(D),this._removed)return;let y=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const S=this.transform.zoom,P=v.now();this.style.zoomHistory.update(S,P);const G=new a.z(S,{now:P,fadeDuration:l,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),W=G.crossFadingFactor();W===1&&W===this._crossFadingFactor||(y=!0,this._crossFadingFactor=W),this.style.update(G)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,l,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:l,showPadding:this.showPadding}),this.fire(new a.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.bf.mark(a.bg.load),this.fire(new a.k("load"))),this.style&&(this.style.hasTransitions()||y)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const _=this._sourcesDirty||this._styleDirty||this._placementDirty;return _||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.k("idle")),!this._loaded||this._fullyLoaded||_||(this._fullyLoaded=!0,a.bf.mark(a.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var D;this._hash&&this._hash.remove();for(const y of this._controls)y.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Y.removeThrottleControl(this._imageQueueHandle),(D=this._resizeObserver)===null||D===void 0||D.disconnect();const l=this.painter.context.gl.getExtension("WEBGL_lose_context");l!=null&&l.loseContext&&l.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),a.bf.clearMetrics(),this._removed=!0,this.fire(new a.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,v.frameAsync(this._frameRequest).then((D=>{a.bf.frame(D),this._frameRequest=null,this._render(D)})).catch((()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(D){this._showTileBoundaries!==D&&(this._showTileBoundaries=D,this._update())}get showPadding(){return!!this._showPadding}set showPadding(D){this._showPadding!==D&&(this._showPadding=D,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(D){this._showCollisionBoxes!==D&&(this._showCollisionBoxes=D,D?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(D){this._showOverdrawInspector!==D&&(this._showOverdrawInspector=D,this._update())}get repaint(){return!!this._repaint}set repaint(D){this._repaint!==D&&(this._repaint=D,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(D){this._vertices=D,this._update()}get version(){return xu}getCameraTargetElevation(){return this.transform.elevation}},s.MapMouseEvent=Nr,s.MapTouchEvent=pu,s.MapWheelEvent=Wa,s.Marker=Bf,s.NavigationControl=class{constructor(D){this._updateZoomButtons=()=>{const l=this._map.getZoom(),y=l===this._map.getMaxZoom(),_=l===this._map.getMinZoom();this._zoomInButton.disabled=y,this._zoomOutButton.disabled=_,this._zoomInButton.setAttribute("aria-disabled",y.toString()),this._zoomOutButton.setAttribute("aria-disabled",_.toString())},this._rotateCompassArrow=()=>{const l=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=l},this._setButtonTitle=(l,y)=>{const _=this._map._getUIString(`NavigationControl.${y}`);l.title=_,l.setAttribute("aria-label",_)},this.options=a.e({},Nd,D),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(l=>l.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(l=>this._map.zoomIn({},{originalEvent:l}))),w.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(l=>this._map.zoomOut({},{originalEvent:l}))),w.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(l=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:l}):this._map.resetNorth({},{originalEvent:l})})),this._compassIcon=w.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(D){return this._map=D,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Nf(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(D,l){const y=w.create("button",D,this._container);return y.type="button",y.addEventListener("click",l),y}},s.Popup=class extends a.E{constructor(D){super(),this.remove=()=>(this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.k("close"))),this),this._onMouseUp=l=>{this._update(l.point)},this._onMouseMove=l=>{this._update(l.point)},this._onDrag=l=>{this._update(l.point)},this._update=l=>{var y;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=w.create("div","maplibregl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const W of this.options.className.split(" "))this._container.classList.add(W);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?qi(this._lngLat,this._flatPos,this._map.transform):(y=this._lngLat)===null||y===void 0?void 0:y.wrap(),this._trackPointer&&!l)return;const _=this._flatPos=this._pos=this._trackPointer&&l?l:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&l?l:this._map.transform.locationPoint(this._lngLat));let S=this.options.anchor;const P=Ku(this.options.offset);if(!S){const W=this._container.offsetWidth,K=this._container.offsetHeight;let te;te=_.y+P.bottom.y<K?["top"]:_.y>this._map.transform.height-K?["bottom"]:[],_.x<W/2?te.push("left"):_.x>this._map.transform.width-W/2&&te.push("right"),S=te.length===0?"bottom":te.join("-")}let G=_.add(P[S]);this.options.subpixelPositioning||(G=G.round()),w.setTransform(this._container,`${Gs[S]} translate(${G.x}px,${G.y}px)`),Bh(this._container,S,"popup")},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(ii),D)}addTo(D){return this._map&&this.remove(),this._map=D,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(D){return this._lngLat=a.N.convert(D),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(D){return this.setDOMContent(document.createTextNode(D))}setHTML(D){const l=document.createDocumentFragment(),y=document.createElement("body");let _;for(y.innerHTML=D;_=y.firstChild,_;)l.appendChild(_);return this.setDOMContent(l)}getMaxWidth(){var D;return(D=this._container)===null||D===void 0?void 0:D.style.maxWidth}setMaxWidth(D){return this.options.maxWidth=D,this._update(),this}setDOMContent(D){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(D),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(D){return this._container&&this._container.classList.add(D),this}removeClassName(D){return this._container&&this._container.classList.remove(D),this}setOffset(D){return this.options.offset=D,this._update(),this}toggleClassName(D){if(this._container)return this._container.classList.toggle(D)}setSubpixelPositioning(D){this.options.subpixelPositioning=D}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const D=this._container.querySelector(qu);D&&D.focus()}},s.RasterDEMTileSource=An,s.RasterTileSource=dn,s.ScaleControl=class{constructor(D){this._onMove=()=>{Uu(this._map,this._container,this.options)},this.setUnit=l=>{this.options.unit=l,Uu(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},ss),D)}getDefaultPosition(){return"bottom-left"}onAdd(D){return this._map=D,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale",D.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},s.ScrollZoomHandler=os,s.Style=Pd,s.TerrainControl=class{constructor(D){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=D}onAdd(D){return this._map=D,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},s.TwoFingersTouchPitchHandler=so,s.TwoFingersTouchRotateHandler=bc,s.TwoFingersTouchZoomHandler=Lf,s.TwoFingersTouchZoomRotateHandler=wc,s.VectorTileSource=wn,s.VideoSource=ri,s.addSourceType=(D,l)=>a._(void 0,void 0,void 0,(function*(){if(lr(D))throw new Error(`A source type called "${D}" already exists.`);((y,_)=>{Si[y]=_})(D,l)})),s.clearPrewarmedResources=function(){const D=Xt;D&&(D.isPreloaded()&&D.numActive()===1?(D.release(yt),Xt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},s.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},s.getRTLTextPluginStatus=function(){return Vr().getRTLTextPluginStatus()},s.getVersion=function(){return Zu},s.getWorkerCount=function(){return xt.workerCount},s.getWorkerUrl=function(){return a.a.WORKER_URL},s.importScriptInWorkers=function(D){return St().broadcast("IS",D)},s.prewarm=function(){it().acquire(yt)},s.setMaxParallelImageRequests=function(D){a.a.MAX_PARALLEL_IMAGE_REQUESTS=D},s.setRTLTextPlugin=function(D,l){return Vr().setRTLTextPlugin(D,l)},s.setWorkerCount=function(D){xt.workerCount=D},s.setWorkerUrl=function(D){a.a.WORKER_URL=D}}));var o=n;return o}))})(YC)),YC.exports}var xN=YY();const ja=Ol(xN);function tw(e,t){var n=xN.MercatorCoordinate.fromLngLat(t);return{x:n.x,y:e.getContainer().clientHeight-n.y}}function wN(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=wN(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function Fo(){for(var e,t,n=0,i="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=wN(e))&&(i&&(i+=" "),i+=t);return i}var XY=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function DP(e){if(typeof e!="string")return!1;var t=XY;return t.includes(e)}var JY=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],QY=new Set(JY);function CN(e){return typeof e!="string"?!1:QY.has(e)}function _N(e){return typeof e=="string"&&e.startsWith("data-")}function xh(e){if(typeof e!="object"||e===null)return{};var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(CN(n)||_N(n))&&(t[n]=e[n]);return t}function w1(e){if(e==null)return null;if(I.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return xh(t)}return typeof e=="object"&&!Array.isArray(e)?xh(e):null}function Tu(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(CN(n)||_N(n)||DP(n))&&(t[n]=e[n]);return t}function eX(e){return e==null?null:I.isValidElement(e)?Tu(e.props):typeof e=="object"&&!Array.isArray(e)?Tu(e):null}var tX=["children","width","height","viewBox","className","style","title","desc"];function bT(){return bT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},bT.apply(null,arguments)}function nX(e,t){if(e==null)return{};var n,i,r=iX(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function iX(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}var FP=I.forwardRef((e,t)=>{var{children:n,width:i,height:r,viewBox:o,className:s,style:a,title:d,desc:h}=e,m=nX(e,tX),v=o||{width:i,height:r,x:0,y:0},w=Fo("recharts-surface",s);return I.createElement("svg",bT({},Tu(m),{className:w,width:i,height:r,style:a,viewBox:"".concat(v.x," ").concat(v.y," ").concat(v.width," ").concat(v.height),ref:t}),I.createElement("title",null,d),I.createElement("desc",null,h),n)}),rX=["children","className"];function xT(){return xT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},xT.apply(null,arguments)}function oX(e,t){if(e==null)return{};var n,i,r=sX(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function sX(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}var ku=I.forwardRef((e,t)=>{var{children:n,className:i}=e,r=oX(e,rX),o=Fo("recharts-layer",i);return I.createElement("g",xT({className:o},Tu(r),{ref:t}),n)}),SN=I.createContext(null),aX=()=>I.useContext(SN);function ls(e){return function(){return e}}const EN=Math.cos,A_=Math.sin,Cf=Math.sqrt,T_=Math.PI,i2=2*T_,wT=Math.PI,CT=2*wT,Bv=1e-6,lX=CT-Bv;function RN(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function uX(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return RN;const n=10**t;return function(i){this._+=i[0];for(let r=1,o=i.length;r<o;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}class cX{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?RN:uX(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,o,s){this._append`C${+t},${+n},${+i},${+r},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,i,r,o){if(t=+t,n=+n,i=+i,r=+r,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,d=i-t,h=r-n,m=s-t,v=a-n,w=m*m+v*v;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(w>Bv)if(!(Math.abs(v*d-h*m)>Bv)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let R=i-s,L=r-a,O=d*d+h*h,z=R*R+L*L,$=Math.sqrt(O),U=Math.sqrt(w),Y=o*Math.tan((wT-Math.acos((O+w-z)/(2*$*U)))/2),X=Y/U,q=Y/$;Math.abs(X-1)>Bv&&this._append`L${t+X*m},${n+X*v}`,this._append`A${o},${o},0,0,${+(v*R>m*L)},${this._x1=t+q*d},${this._y1=n+q*h}`}}arc(t,n,i,r,o,s){if(t=+t,n=+n,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(r),d=i*Math.sin(r),h=t+a,m=n+d,v=1^s,w=s?r-o:o-r;this._x1===null?this._append`M${h},${m}`:(Math.abs(this._x1-h)>Bv||Math.abs(this._y1-m)>Bv)&&this._append`L${h},${m}`,i&&(w<0&&(w=w%CT+CT),w>lX?this._append`A${i},${i},0,1,${v},${t-a},${n-d}A${i},${i},0,1,${v},${this._x1=h},${this._y1=m}`:w>Bv&&this._append`A${i},${i},0,${+(w>=wT)},${v},${this._x1=t+i*Math.cos(o)},${this._y1=n+i*Math.sin(o)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function MP(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new cX(t)}function IP(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function AN(e){this._context=e}AN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function r2(e){return new AN(e)}function TN(e){return e[0]}function kN(e){return e[1]}function PN(e,t){var n=ls(!0),i=null,r=r2,o=null,s=MP(a);e=typeof e=="function"?e:e===void 0?TN:ls(e),t=typeof t=="function"?t:t===void 0?kN:ls(t);function a(d){var h,m=(d=IP(d)).length,v,w=!1,R;for(i==null&&(o=r(R=s())),h=0;h<=m;++h)!(h<m&&n(v=d[h],h,d))===w&&((w=!w)?o.lineStart():o.lineEnd()),w&&o.point(+e(v,h,d),+t(v,h,d));if(R)return o=null,R+""||null}return a.x=function(d){return arguments.length?(e=typeof d=="function"?d:ls(+d),a):e},a.y=function(d){return arguments.length?(t=typeof d=="function"?d:ls(+d),a):t},a.defined=function(d){return arguments.length?(n=typeof d=="function"?d:ls(!!d),a):n},a.curve=function(d){return arguments.length?(r=d,i!=null&&(o=r(i)),a):r},a.context=function(d){return arguments.length?(d==null?i=o=null:o=r(i=d),a):i},a}function yC(e,t,n){var i=null,r=ls(!0),o=null,s=r2,a=null,d=MP(h);e=typeof e=="function"?e:e===void 0?TN:ls(+e),t=typeof t=="function"?t:ls(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?kN:ls(+n);function h(v){var w,R,L,O=(v=IP(v)).length,z,$=!1,U,Y=new Array(O),X=new Array(O);for(o==null&&(a=s(U=d())),w=0;w<=O;++w){if(!(w<O&&r(z=v[w],w,v))===$)if($=!$)R=w,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),L=w-1;L>=R;--L)a.point(Y[L],X[L]);a.lineEnd(),a.areaEnd()}$&&(Y[w]=+e(z,w,v),X[w]=+t(z,w,v),a.point(i?+i(z,w,v):Y[w],n?+n(z,w,v):X[w]))}if(U)return a=null,U+""||null}function m(){return PN().defined(r).curve(s).context(o)}return h.x=function(v){return arguments.length?(e=typeof v=="function"?v:ls(+v),i=null,h):e},h.x0=function(v){return arguments.length?(e=typeof v=="function"?v:ls(+v),h):e},h.x1=function(v){return arguments.length?(i=v==null?null:typeof v=="function"?v:ls(+v),h):i},h.y=function(v){return arguments.length?(t=typeof v=="function"?v:ls(+v),n=null,h):t},h.y0=function(v){return arguments.length?(t=typeof v=="function"?v:ls(+v),h):t},h.y1=function(v){return arguments.length?(n=v==null?null:typeof v=="function"?v:ls(+v),h):n},h.lineX0=h.lineY0=function(){return m().x(e).y(t)},h.lineY1=function(){return m().x(e).y(n)},h.lineX1=function(){return m().x(i).y(t)},h.defined=function(v){return arguments.length?(r=typeof v=="function"?v:ls(!!v),h):r},h.curve=function(v){return arguments.length?(s=v,o!=null&&(a=s(o)),h):s},h.context=function(v){return arguments.length?(v==null?o=a=null:a=s(o=v),h):o},h}class DN{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function dX(e){return new DN(e,!0)}function hX(e){return new DN(e,!1)}const LP={draw(e,t){const n=Cf(t/T_);e.moveTo(n,0),e.arc(0,0,n,0,i2)}},fX={draw(e,t){const n=Cf(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},FN=Cf(1/3),pX=FN*2,gX={draw(e,t){const n=Cf(t/pX),i=n*FN;e.moveTo(0,-n),e.lineTo(i,0),e.lineTo(0,n),e.lineTo(-i,0),e.closePath()}},mX={draw(e,t){const n=Cf(t),i=-n/2;e.rect(i,i,n,n)}},yX=.8908130915292852,MN=A_(T_/10)/A_(7*T_/10),vX=A_(i2/10)*MN,bX=-EN(i2/10)*MN,xX={draw(e,t){const n=Cf(t*yX),i=vX*n,r=bX*n;e.moveTo(0,-n),e.lineTo(i,r);for(let o=1;o<5;++o){const s=i2*o/5,a=EN(s),d=A_(s);e.lineTo(d*n,-a*n),e.lineTo(a*i-d*r,d*i+a*r)}e.closePath()}},BE=Cf(3),wX={draw(e,t){const n=-Cf(t/(BE*3));e.moveTo(0,n*2),e.lineTo(-BE*n,-n),e.lineTo(BE*n,-n),e.closePath()}},sh=-.5,ah=Cf(3)/2,_T=1/Cf(12),CX=(_T/2+1)*3,_X={draw(e,t){const n=Cf(t/CX),i=n/2,r=n*_T,o=i,s=n*_T+n,a=-o,d=s;e.moveTo(i,r),e.lineTo(o,s),e.lineTo(a,d),e.lineTo(sh*i-ah*r,ah*i+sh*r),e.lineTo(sh*o-ah*s,ah*o+sh*s),e.lineTo(sh*a-ah*d,ah*a+sh*d),e.lineTo(sh*i+ah*r,sh*r-ah*i),e.lineTo(sh*o+ah*s,sh*s-ah*o),e.lineTo(sh*a+ah*d,sh*d-ah*a),e.closePath()}};function SX(e,t){let n=null,i=MP(r);e=typeof e=="function"?e:ls(e||LP),t=typeof t=="function"?t:ls(t===void 0?64:+t);function r(){let o;if(n||(n=o=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return r.type=function(o){return arguments.length?(e=typeof o=="function"?o:ls(o),r):e},r.size=function(o){return arguments.length?(t=typeof o=="function"?o:ls(+o),r):t},r.context=function(o){return arguments.length?(n=o??null,r):n},r}function k_(){}function P_(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function IN(e){this._context=e}IN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:P_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:P_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function EX(e){return new IN(e)}function LN(e){this._context=e}LN.prototype={areaStart:k_,areaEnd:k_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:P_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function RX(e){return new LN(e)}function ON(e){this._context=e}ON.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:P_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function AX(e){return new ON(e)}function zN(e){this._context=e}zN.prototype={areaStart:k_,areaEnd:k_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function TX(e){return new zN(e)}function $I(e){return e<0?-1:1}function WI(e,t,n){var i=e._x1-e._x0,r=t-e._x1,o=(e._y1-e._y0)/(i||r<0&&-0),s=(n-e._y1)/(r||i<0&&-0),a=(o*r+s*i)/(i+r);return($I(o)+$I(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function UI(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function GE(e,t,n){var i=e._x0,r=e._y0,o=e._x1,s=e._y1,a=(o-i)/3;e._context.bezierCurveTo(i+a,r+a*t,o-a,s-a*n,o,s)}function D_(e){this._context=e}D_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:GE(this,this._t0,UI(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,GE(this,UI(this,n=WI(this,e,t)),n);break;default:GE(this,this._t0,n=WI(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function NN(e){this._context=new BN(e)}(NN.prototype=Object.create(D_.prototype)).point=function(e,t){D_.prototype.point.call(this,t,e)};function BN(e){this._context=e}BN.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,o){this._context.bezierCurveTo(t,e,i,n,o,r)}};function kX(e){return new D_(e)}function PX(e){return new NN(e)}function GN(e){this._context=e}GN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=qI(e),r=qI(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function qI(e){var t,n=e.length-1,i,r=new Array(n),o=new Array(n),s=new Array(n);for(r[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,o[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=r[t]/o[t-1],o[t]-=i,s[t]-=i*s[t-1];for(r[n-1]=s[n-1]/o[n-1],t=n-2;t>=0;--t)r[t]=(s[t]-r[t+1])/o[t];for(o[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-r[t+1];return[r,o]}function DX(e){return new GN(e)}function o2(e,t){this._context=e,this._t=t}o2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function FX(e){return new o2(e,.5)}function MX(e){return new o2(e,0)}function IX(e){return new o2(e,1)}function qb(e,t){if((s=e.length)>1)for(var n=1,i,r,o=e[t[0]],s,a=o.length;n<s;++n)for(r=o,o=e[t[n]],i=0;i<a;++i)o[i][1]+=o[i][0]=isNaN(r[i][1])?r[i][0]:r[i][1]}function ST(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function LX(e,t){return e[t]}function OX(e){const t=[];return t.key=e,t}function zX(){var e=ls([]),t=ST,n=qb,i=LX;function r(o){var s=Array.from(e.apply(this,arguments),OX),a,d=s.length,h=-1,m;for(const v of o)for(a=0,++h;a<d;++a)(s[a][h]=[0,+i(v,s[a].key,h,o)]).data=v;for(a=0,m=IP(t(s));a<d;++a)s[m[a]].index=a;return n(s,m),s}return r.keys=function(o){return arguments.length?(e=typeof o=="function"?o:ls(Array.from(o)),r):e},r.value=function(o){return arguments.length?(i=typeof o=="function"?o:ls(+o),r):i},r.order=function(o){return arguments.length?(t=o==null?ST:typeof o=="function"?o:ls(Array.from(o)),r):t},r.offset=function(o){return arguments.length?(n=o??qb,r):n},r}function NX(e,t){if((i=e.length)>0){for(var n,i,r=0,o=e[0].length,s;r<o;++r){for(s=n=0;n<i;++n)s+=e[n][r][1]||0;if(s)for(n=0;n<i;++n)e[n][r][1]/=s}qb(e,t)}}function BX(e,t){if((r=e.length)>0){for(var n=0,i=e[t[0]],r,o=i.length;n<o;++n){for(var s=0,a=0;s<r;++s)a+=e[s][n][1]||0;i[n][1]+=i[n][0]=-a/2}qb(e,t)}}function GX(e,t){if(!(!((s=e.length)>0)||!((o=(r=e[t[0]]).length)>0))){for(var n=0,i=1,r,o,s;i<o;++i){for(var a=0,d=0,h=0;a<s;++a){for(var m=e[t[a]],v=m[i][1]||0,w=m[i-1][1]||0,R=(v-w)/2,L=0;L<a;++L){var O=e[t[L]],z=O[i][1]||0,$=O[i-1][1]||0;R+=z-$}d+=v,h+=R*v}r[i-1][1]+=r[i-1][0]=n,d&&(n-=h/d)}r[i-1][1]+=r[i-1][0]=n,qb(e,t)}}var jE={},HE={},KI;function jX(){return KI||(KI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(HE)),HE}var VE={},ZI;function jN(){return ZI||(ZI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(VE)),VE}var $E={},YI;function OP(){return YI||(YI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var i;return typeof n=="string"||typeof n=="symbol"?n:Object.is((i=n==null?void 0:n.valueOf)==null?void 0:i.call(n),-0)?"-0":String(n)}e.toKey=t})($E)),$E}var WE={},UE={},XI;function HX(){return XI||(XI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(t).join(",");const i=String(n);return i==="0"&&Object.is(Number(n),-0)?"-0":i}e.toString=t})(UE)),UE}var JI;function zP(){return JI||(JI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HX(),n=OP();function i(r){if(Array.isArray(r))return r.map(n.toKey);if(typeof r=="symbol")return[r];r=t.toString(r);const o=[],s=r.length;if(s===0)return o;let a=0,d="",h="",m=!1;for(r.charCodeAt(0)===46&&(o.push(""),a++);a<s;){const v=r[a];h?v==="\\"&&a+1<s?(a++,d+=r[a]):v===h?h="":d+=v:m?v==='"'||v==="'"?h=v:v==="]"?(m=!1,o.push(d),d=""):d+=v:v==="["?(m=!0,d&&(o.push(d),d="")):v==="."?d&&(o.push(d),d=""):d+=v,a++}return d&&o.push(d),o}e.toPath=i})(WE)),WE}var QI;function NP(){return QI||(QI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jX(),n=jN(),i=OP(),r=zP();function o(a,d,h){if(a==null)return h;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return h;const m=a[d];return m===void 0?n.isDeepKey(d)?o(a,r.toPath(d),h):h:m}case"number":case"symbol":{typeof d=="number"&&(d=i.toKey(d));const m=a[d];return m===void 0?h:m}default:{if(Array.isArray(d))return s(a,d,h);if(Object.is(d==null?void 0:d.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return h;const m=a[d];return m===void 0?h:m}}}function s(a,d,h){if(d.length===0)return h;let m=a;for(let v=0;v<d.length;v++){if(m==null||t.isUnsafeProperty(d[v]))return h;m=m[d[v]]}return m===void 0?h:m}e.get=o})(jE)),jE}var qE,eL;function VX(){return eL||(eL=1,qE=NP().get),qE}var $X=VX();const Kb=Ol($X);var _d=e=>e===0?0:e>0?1:-1,bf=e=>typeof e=="number"&&e!=+e,am=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,fi=e=>(typeof e=="number"||e instanceof Number)&&!bf(e),Lp=e=>fi(e)||typeof e=="string",WX=0,jw=e=>{var t=++WX;return"".concat(e||"").concat(t)},xf=function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!fi(t)&&typeof t!="string")return i;var o;if(am(t)){if(n==null)return i;var s=t.indexOf("%");o=n*parseFloat(t.slice(0,s))/100}else o=+t;return bf(o)&&(o=i),r&&n!=null&&o>n&&(o=n),o},HN=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},i=0;i<t;i++)if(!n[e[i]])n[e[i]]=!0;else return!0;return!1};function Vo(e,t,n){return fi(e)&&fi(t)?e+n*(t-e):t}function VN(e,t,n){if(!(!e||!e.length))return e.find(i=>i&&(typeof t=="function"?t(i):Kb(i,t))===n)}var bs=e=>e===null||typeof e>"u",C1=e=>bs(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function UX(e){return e!=null}function _1(){}var qX=["type","size","sizeType"];function ET(){return ET=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ET.apply(null,arguments)}function tL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function nL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tL(Object(n),!0).forEach(function(i){KX(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tL(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function KX(e,t,n){return(t=ZX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZX(e){var t=YX(e,"string");return typeof t=="symbol"?t:t+""}function YX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XX(e,t){if(e==null)return{};var n,i,r=JX(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function JX(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}var $N={symbolCircle:LP,symbolCross:fX,symbolDiamond:gX,symbolSquare:mX,symbolStar:xX,symbolTriangle:wX,symbolWye:_X},QX=Math.PI/180,eJ=e=>{var t="symbol".concat(C1(e));return $N[t]||LP},tJ=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*QX;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.tan(i)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},nJ=(e,t)=>{$N["symbol".concat(C1(e))]=t},BP=e=>{var{type:t="circle",size:n=64,sizeType:i="area"}=e,r=XX(e,qX),o=nL(nL({},r),{},{type:t,size:n,sizeType:i}),s="circle";typeof t=="string"&&(s=t);var a=()=>{var w=eJ(s),R=SX().type(w).size(tJ(n,i,s)),L=R();if(L!==null)return L},{className:d,cx:h,cy:m}=o,v=Tu(o);return fi(h)&&fi(m)&&fi(n)?I.createElement("path",ET({},v,{className:Fo("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(m,")"),d:a()})):null};BP.registerSymbol=nJ;var WN=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,GP=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(I.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var i={};return Object.keys(n).forEach(r=>{DP(r)&&(i[r]=(o=>n[r](n,o)))}),i},iJ=(e,t,n)=>i=>(e(t,n,i),null),s2=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var i=null;return Object.keys(e).forEach(r=>{var o=e[r];DP(r)&&typeof o=="function"&&(i||(i={}),i[r]=iJ(o,t,n))}),i};function iL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function rJ(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iL(Object(n),!0).forEach(function(i){oJ(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iL(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function oJ(e,t,n){return(t=sJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sJ(e){var t=aJ(e,"string");return typeof t=="symbol"?t:t+""}function aJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zl(e,t){var n=rJ({},e),i=t,r=Object.keys(t),o=r.reduce((s,a)=>(s[a]===void 0&&i[a]!==void 0&&(s[a]=i[a]),s),n);return o}function F_(){return F_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},F_.apply(null,arguments)}function rL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function lJ(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rL(Object(n),!0).forEach(function(i){uJ(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rL(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function uJ(e,t,n){return(t=cJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cJ(e){var t=dJ(e,"string");return typeof t=="symbol"?t:t+""}function dJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uh=32,hJ={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function fJ(e){var{data:t,iconType:n,inactiveColor:i}=e,r=uh/2,o=uh/6,s=uh/3,a=t.inactive?i:t.color,d=n??t.type;if(d==="none")return null;if(d==="plainline"){var h;return I.createElement("line",{strokeWidth:4,fill:"none",stroke:a,strokeDasharray:(h=t.payload)===null||h===void 0?void 0:h.strokeDasharray,x1:0,y1:r,x2:uh,y2:r,className:"recharts-legend-icon"})}if(d==="line")return I.createElement("path",{strokeWidth:4,fill:"none",stroke:a,d:"M0,".concat(r,"h").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*s,",").concat(r,`
            H`).concat(uh,"M").concat(2*s,",").concat(r,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(s,",").concat(r),className:"recharts-legend-icon"});if(d==="rect")return I.createElement("path",{stroke:"none",fill:a,d:"M0,".concat(uh/8,"h").concat(uh,"v").concat(uh*3/4,"h").concat(-uh,"z"),className:"recharts-legend-icon"});if(I.isValidElement(t.legendIcon)){var m=lJ({},t);return delete m.legendIcon,I.cloneElement(t.legendIcon,m)}return I.createElement(BP,{fill:a,cx:r,cy:r,size:uh,sizeType:"diameter",type:d})}function pJ(e){var{payload:t,iconSize:n,layout:i,formatter:r,inactiveColor:o,iconType:s}=e,a={x:0,y:0,width:uh,height:uh},d={display:i==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((m,v)=>{var w=m.formatter||r,R=Fo({"recharts-legend-item":!0,["legend-item-".concat(v)]:!0,inactive:m.inactive});if(m.type==="none")return null;var L=m.inactive?o:m.color,O=w?w(m.value,m,v):m.value;return I.createElement("li",F_({className:R,style:d,key:"legend-item-".concat(v)},s2(e,m,v)),I.createElement(FP,{width:n,height:n,viewBox:a,style:h,"aria-label":"".concat(O," legend icon")},I.createElement(fJ,{data:m,iconType:s,inactiveColor:o})),I.createElement("span",{className:"recharts-legend-item-text",style:{color:L}},O))})}var gJ=e=>{var t=zl(e,hJ),{payload:n,layout:i,align:r}=t;if(!n||!n.length)return null;var o={padding:0,margin:0,textAlign:i==="horizontal"?r:"left"};return I.createElement("ul",{className:"recharts-default-legend",style:o},I.createElement(pJ,F_({},t,{payload:n})))},KE={},ZE={},oL;function mJ(){return oL||(oL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,i){const r=new Map;for(let o=0;o<n.length;o++){const s=n[o],a=i(s);r.has(a)||r.set(a,s)}return Array.from(r.values())}e.uniqBy=t})(ZE)),ZE}var YE={},sL;function UN(){return sL||(sL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(YE)),YE}var XE={},JE={},QE={},aL;function yJ(){return aL||(aL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(QE)),QE}var lL;function jP(){return lL||(lL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yJ();function n(i){return i!=null&&typeof i!="function"&&t.isLength(i.length)}e.isArrayLike=n})(JE)),JE}var eR={},uL;function vJ(){return uL||(uL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(eR)),eR}var cL;function bJ(){return cL||(cL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jP(),n=vJ();function i(r){return n.isObjectLike(r)&&t.isArrayLike(r)}e.isArrayLikeObject=i})(XE)),XE}var tR={},nR={},dL;function xJ(){return dL||(dL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NP();function n(i){return function(r){return t.get(r,i)}}e.property=n})(nR)),nR}var iR={},rR={},oR={},sR={},hL;function qN(){return hL||(hL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(sR)),sR}var aR={},fL;function KN(){return fL||(fL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(aR)),aR}var lR={},pL;function ZN(){return pL||(pL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,i){return n===i||Number.isNaN(n)&&Number.isNaN(i)}e.eq=t})(lR)),lR}var gL;function wJ(){return gL||(gL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qN(),n=KN(),i=ZN();function r(m,v,w){return typeof w!="function"?r(m,v,()=>{}):o(m,v,function R(L,O,z,$,U,Y){const X=w(L,O,z,$,U,Y);return X!==void 0?!!X:o(L,O,R,Y)},new Map)}function o(m,v,w,R){if(v===m)return!0;switch(typeof v){case"object":return s(m,v,w,R);case"function":return Object.keys(v).length>0?o(m,{...v},w,R):i.eq(m,v);default:return t.isObject(m)?typeof v=="string"?v==="":!0:i.eq(m,v)}}function s(m,v,w,R){if(v==null)return!0;if(Array.isArray(v))return d(m,v,w,R);if(v instanceof Map)return a(m,v,w,R);if(v instanceof Set)return h(m,v,w,R);const L=Object.keys(v);if(m==null)return L.length===0;if(L.length===0)return!0;if(R!=null&&R.has(v))return R.get(v)===m;R==null||R.set(v,m);try{for(let O=0;O<L.length;O++){const z=L[O];if(!n.isPrimitive(m)&&!(z in m)||v[z]===void 0&&m[z]!==void 0||v[z]===null&&m[z]!==null||!w(m[z],v[z],z,m,v,R))return!1}return!0}finally{R==null||R.delete(v)}}function a(m,v,w,R){if(v.size===0)return!0;if(!(m instanceof Map))return!1;for(const[L,O]of v.entries()){const z=m.get(L);if(w(z,O,L,m,v,R)===!1)return!1}return!0}function d(m,v,w,R){if(v.length===0)return!0;if(!Array.isArray(m))return!1;const L=new Set;for(let O=0;O<v.length;O++){const z=v[O];let $=!1;for(let U=0;U<m.length;U++){if(L.has(U))continue;const Y=m[U];let X=!1;if(w(Y,z,O,m,v,R)&&(X=!0),X){L.add(U),$=!0;break}}if(!$)return!1}return!0}function h(m,v,w,R){return v.size===0?!0:m instanceof Set?d([...m],[...v],w,R):!1}e.isMatchWith=r,e.isSetMatch=h})(oR)),oR}var mL;function YN(){return mL||(mL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wJ();function n(i,r){return t.isMatchWith(i,r,()=>{})}e.isMatch=n})(rR)),rR}var uR={},cR={},dR={},yL;function CJ(){return yL||(yL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(i=>Object.prototype.propertyIsEnumerable.call(n,i))}e.getSymbols=t})(dR)),dR}var hR={},vL;function XN(){return vL||(vL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(hR)),hR}var fR={},bL;function JN(){return bL||(bL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",i="[object Number]",r="[object Boolean]",o="[object Arguments]",s="[object Symbol]",a="[object Date]",d="[object Map]",h="[object Set]",m="[object Array]",v="[object Function]",w="[object ArrayBuffer]",R="[object Object]",L="[object Error]",O="[object DataView]",z="[object Uint8Array]",$="[object Uint8ClampedArray]",U="[object Uint16Array]",Y="[object Uint32Array]",X="[object BigUint64Array]",q="[object Int8Array]",ie="[object Int16Array]",re="[object Int32Array]",J="[object BigInt64Array]",ne="[object Float32Array]",be="[object Float64Array]";e.argumentsTag=o,e.arrayBufferTag=w,e.arrayTag=m,e.bigInt64ArrayTag=J,e.bigUint64ArrayTag=X,e.booleanTag=r,e.dataViewTag=O,e.dateTag=a,e.errorTag=L,e.float32ArrayTag=ne,e.float64ArrayTag=be,e.functionTag=v,e.int16ArrayTag=ie,e.int32ArrayTag=re,e.int8ArrayTag=q,e.mapTag=d,e.numberTag=i,e.objectTag=R,e.regexpTag=t,e.setTag=h,e.stringTag=n,e.symbolTag=s,e.uint16ArrayTag=U,e.uint32ArrayTag=Y,e.uint8ArrayTag=z,e.uint8ClampedArrayTag=$})(fR)),fR}var pR={},xL;function _J(){return xL||(xL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(pR)),pR}var wL;function QN(){return wL||(wL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CJ(),n=XN(),i=JN(),r=KN(),o=_J();function s(m,v){return a(m,void 0,m,new Map,v)}function a(m,v,w,R=new Map,L=void 0){const O=L==null?void 0:L(m,v,w,R);if(O!==void 0)return O;if(r.isPrimitive(m))return m;if(R.has(m))return R.get(m);if(Array.isArray(m)){const z=new Array(m.length);R.set(m,z);for(let $=0;$<m.length;$++)z[$]=a(m[$],$,w,R,L);return Object.hasOwn(m,"index")&&(z.index=m.index),Object.hasOwn(m,"input")&&(z.input=m.input),z}if(m instanceof Date)return new Date(m.getTime());if(m instanceof RegExp){const z=new RegExp(m.source,m.flags);return z.lastIndex=m.lastIndex,z}if(m instanceof Map){const z=new Map;R.set(m,z);for(const[$,U]of m)z.set($,a(U,$,w,R,L));return z}if(m instanceof Set){const z=new Set;R.set(m,z);for(const $ of m)z.add(a($,void 0,w,R,L));return z}if(typeof Buffer<"u"&&Buffer.isBuffer(m))return m.subarray();if(o.isTypedArray(m)){const z=new(Object.getPrototypeOf(m)).constructor(m.length);R.set(m,z);for(let $=0;$<m.length;$++)z[$]=a(m[$],$,w,R,L);return z}if(m instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&m instanceof SharedArrayBuffer)return m.slice(0);if(m instanceof DataView){const z=new DataView(m.buffer.slice(0),m.byteOffset,m.byteLength);return R.set(m,z),d(z,m,w,R,L),z}if(typeof File<"u"&&m instanceof File){const z=new File([m],m.name,{type:m.type});return R.set(m,z),d(z,m,w,R,L),z}if(typeof Blob<"u"&&m instanceof Blob){const z=new Blob([m],{type:m.type});return R.set(m,z),d(z,m,w,R,L),z}if(m instanceof Error){const z=new m.constructor;return R.set(m,z),z.message=m.message,z.name=m.name,z.stack=m.stack,z.cause=m.cause,d(z,m,w,R,L),z}if(m instanceof Boolean){const z=new Boolean(m.valueOf());return R.set(m,z),d(z,m,w,R,L),z}if(m instanceof Number){const z=new Number(m.valueOf());return R.set(m,z),d(z,m,w,R,L),z}if(m instanceof String){const z=new String(m.valueOf());return R.set(m,z),d(z,m,w,R,L),z}if(typeof m=="object"&&h(m)){const z=Object.create(Object.getPrototypeOf(m));return R.set(m,z),d(z,m,w,R,L),z}return m}function d(m,v,w=m,R,L){const O=[...Object.keys(v),...t.getSymbols(v)];for(let z=0;z<O.length;z++){const $=O[z],U=Object.getOwnPropertyDescriptor(m,$);(U==null||U.writable)&&(m[$]=a(v[$],$,w,R,L))}}function h(m){switch(n.getTag(m)){case i.argumentsTag:case i.arrayTag:case i.arrayBufferTag:case i.dataViewTag:case i.booleanTag:case i.dateTag:case i.float32ArrayTag:case i.float64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.mapTag:case i.numberTag:case i.objectTag:case i.regexpTag:case i.setTag:case i.stringTag:case i.symbolTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=s,e.cloneDeepWithImpl=a,e.copyProperties=d})(cR)),cR}var CL;function SJ(){return CL||(CL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QN();function n(i){return t.cloneDeepWithImpl(i,void 0,i,new Map,void 0)}e.cloneDeep=n})(uR)),uR}var _L;function EJ(){return _L||(_L=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YN(),n=SJ();function i(r){return r=n.cloneDeep(r),o=>t.isMatch(o,r)}e.matches=i})(iR)),iR}var gR={},mR={},yR={},SL;function RJ(){return SL||(SL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QN(),n=JN();function i(r,o){return t.cloneDeepWith(r,(s,a,d,h)=>{const m=o==null?void 0:o(s,a,d,h);if(m!==void 0)return m;if(typeof r=="object")switch(Object.prototype.toString.call(r)){case n.numberTag:case n.stringTag:case n.booleanTag:{const v=new r.constructor(r==null?void 0:r.valueOf());return t.copyProperties(v,r),v}case n.argumentsTag:{const v={};return t.copyProperties(v,r),v.length=r.length,v[Symbol.iterator]=r[Symbol.iterator],v}default:return}})}e.cloneDeepWith=i})(yR)),yR}var EL;function AJ(){return EL||(EL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RJ();function n(i){return t.cloneDeepWith(i)}e.cloneDeep=n})(mR)),mR}var vR={},bR={},RL;function eB(){return RL||(RL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(i,r=Number.MAX_SAFE_INTEGER){switch(typeof i){case"number":return Number.isInteger(i)&&i>=0&&i<r;case"symbol":return!1;case"string":return t.test(i)}}e.isIndex=n})(bR)),bR}var xR={},AL;function TJ(){return AL||(AL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XN();function n(i){return i!==null&&typeof i=="object"&&t.getTag(i)==="[object Arguments]"}e.isArguments=n})(xR)),xR}var TL;function kJ(){return TL||(TL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jN(),n=eB(),i=TJ(),r=zP();function o(s,a){let d;if(Array.isArray(a)?d=a:typeof a=="string"&&t.isDeepKey(a)&&(s==null?void 0:s[a])==null?d=r.toPath(a):d=[a],d.length===0)return!1;let h=s;for(let m=0;m<d.length;m++){const v=d[m];if((h==null||!Object.hasOwn(h,v))&&!((Array.isArray(h)||i.isArguments(h))&&n.isIndex(v)&&v<h.length))return!1;h=h[v]}return!0}e.has=o})(vR)),vR}var kL;function PJ(){return kL||(kL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YN(),n=OP(),i=AJ(),r=NP(),o=kJ();function s(a,d){switch(typeof a){case"object":{Object.is(a==null?void 0:a.valueOf(),-0)&&(a="-0");break}case"number":{a=n.toKey(a);break}}return d=i.cloneDeep(d),function(h){const m=r.get(h,a);return m===void 0?o.has(h,a):d===void 0?m===void 0:t.isMatch(m,d)}}e.matchesProperty=s})(gR)),gR}var PL;function DJ(){return PL||(PL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UN(),n=xJ(),i=EJ(),r=PJ();function o(s){if(s==null)return t.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?r.matchesProperty(s[0],s[1]):i.matches(s);case"string":case"symbol":case"number":return n.property(s)}}e.iteratee=o})(tR)),tR}var DL;function FJ(){return DL||(DL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mJ(),n=UN(),i=bJ(),r=DJ();function o(s,a=n.identity){return i.isArrayLikeObject(s)?t.uniqBy(Array.from(s),r.iteratee(a)):[]}e.uniqBy=o})(KE)),KE}var wR,FL;function MJ(){return FL||(FL=1,wR=FJ().uniqBy),wR}var IJ=MJ();const ML=Ol(IJ);function tB(e,t,n){return t===!0?ML(e,n):typeof t=="function"?ML(e,t):e}var CR={exports:{}},_R={},SR={exports:{}},ER={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IL;function LJ(){if(IL)return ER;IL=1;var e=ux();function t(v,w){return v===w&&(v!==0||1/v===1/w)||v!==v&&w!==w}var n=typeof Object.is=="function"?Object.is:t,i=e.useState,r=e.useEffect,o=e.useLayoutEffect,s=e.useDebugValue;function a(v,w){var R=w(),L=i({inst:{value:R,getSnapshot:w}}),O=L[0].inst,z=L[1];return o(function(){O.value=R,O.getSnapshot=w,d(O)&&z({inst:O})},[v,R,w]),r(function(){return d(O)&&z({inst:O}),v(function(){d(O)&&z({inst:O})})},[v]),s(R),R}function d(v){var w=v.getSnapshot;v=v.value;try{var R=w();return!n(v,R)}catch{return!0}}function h(v,w){return w()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:a;return ER.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,ER}var LL;function OJ(){return LL||(LL=1,SR.exports=LJ()),SR.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OL;function zJ(){if(OL)return _R;OL=1;var e=ux(),t=OJ();function n(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var i=typeof Object.is=="function"?Object.is:n,r=t.useSyncExternalStore,o=e.useRef,s=e.useEffect,a=e.useMemo,d=e.useDebugValue;return _R.useSyncExternalStoreWithSelector=function(h,m,v,w,R){var L=o(null);if(L.current===null){var O={hasValue:!1,value:null};L.current=O}else O=L.current;L=a(function(){function $(ie){if(!U){if(U=!0,Y=ie,ie=w(ie),R!==void 0&&O.hasValue){var re=O.value;if(R(re,ie))return X=re}return X=ie}if(re=X,i(Y,ie))return re;var J=w(ie);return R!==void 0&&R(re,J)?(Y=ie,re):(Y=ie,X=J)}var U=!1,Y,X,q=v===void 0?null:v;return[function(){return $(m())},q===null?void 0:function(){return $(q())}]},[m,v,w,R]);var z=r(h,L[0],L[1]);return s(function(){O.hasValue=!0,O.value=z},[z]),d(z),z},_R}var zL;function NJ(){return zL||(zL=1,CR.exports=zJ()),CR.exports}var BJ=NJ(),HP=I.createContext(null),GJ=e=>e,Zs=()=>{var e=I.useContext(HP);return e?e.store.dispatch:GJ},XC=()=>{},jJ=()=>XC,HJ=(e,t)=>e===t;function bi(e){var t=I.useContext(HP);return BJ.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:jJ,t?t.store.getState:XC,t?t.store.getState:XC,t?e:XC,HJ)}function VJ(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function $J(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function WJ(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(i=>typeof i=="function"?`function ${i.name||"unnamed"}()`:typeof i).join(", ");throw new TypeError(`${t}[${n}]`)}}var NL=e=>Array.isArray(e)?e:[e];function UJ(e){const t=Array.isArray(e[0])?e[0]:e;return WJ(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function qJ(e,t){const n=[],{length:i}=e;for(let r=0;r<i;r++)n.push(e[r].apply(null,t));return n}var KJ=class{constructor(e){this.value=e}deref(){return this.value}},ZJ=typeof WeakRef<"u"?WeakRef:KJ,YJ=0,BL=1;function vC(){return{s:YJ,v:void 0,o:null,p:null}}function nB(e,t={}){let n=vC();const{resultEqualityCheck:i}=t;let r,o=0;function s(){var v;let a=n;const{length:d}=arguments;for(let w=0,R=d;w<R;w++){const L=arguments[w];if(typeof L=="function"||typeof L=="object"&&L!==null){let O=a.o;O===null&&(a.o=O=new WeakMap);const z=O.get(L);z===void 0?(a=vC(),O.set(L,a)):a=z}else{let O=a.p;O===null&&(a.p=O=new Map);const z=O.get(L);z===void 0?(a=vC(),O.set(L,a)):a=z}}const h=a;let m;if(a.s===BL)m=a.v;else if(m=e.apply(null,arguments),o++,i){const w=((v=r==null?void 0:r.deref)==null?void 0:v.call(r))??r;w!=null&&i(w,m)&&(m=w,o!==0&&o--),r=typeof m=="object"&&m!==null||typeof m=="function"?new ZJ(m):m}return h.s=BL,h.v=m,m}return s.clearCache=()=>{n=vC(),s.resetResultsCount()},s.resultsCount=()=>o,s.resetResultsCount=()=>{o=0},s}function XJ(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,i=(...r)=>{let o=0,s=0,a,d={},h=r.pop();typeof h=="object"&&(d=h,h=r.pop()),VJ(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const m={...n,...d},{memoize:v,memoizeOptions:w=[],argsMemoize:R=nB,argsMemoizeOptions:L=[]}=m,O=NL(w),z=NL(L),$=UJ(r),U=v(function(){return o++,h.apply(null,arguments)},...O),Y=R(function(){s++;const q=qJ($,arguments);return a=U.apply(null,q),a},...z);return Object.assign(Y,{resultFunc:h,memoizedResultFunc:U,dependencies:$,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>a,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:v,argsMemoize:R})};return Object.assign(i,{withTypes:()=>i}),i}var Ot=XJ(nB),JJ=Object.assign((e,t=Ot)=>{$J(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),i=n.map(o=>e[o]);return t(i,(...o)=>o.reduce((s,a,d)=>(s[n[d]]=a,s),{}))},{withTypes:()=>JJ}),RR={},AR={},TR={},GL;function QJ(){return GL||(GL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return typeof i=="symbol"?1:i===null?2:i===void 0?3:i!==i?4:0}const n=(i,r,o)=>{if(i!==r){const s=t(i),a=t(r);if(s===a&&s===0){if(i<r)return o==="desc"?1:-1;if(i>r)return o==="desc"?-1:1}return o==="desc"?a-s:s-a}return 0};e.compareValues=n})(TR)),TR}var kR={},PR={},jL;function iB(){return jL||(jL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(PR)),PR}var HL;function eQ(){return HL||(HL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iB(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function r(o,s){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||t.isSymbol(o)?!0:typeof o=="string"&&(i.test(o)||!n.test(o))||s!=null&&Object.hasOwn(s,o)}e.isKey=r})(kR)),kR}var VL;function tQ(){return VL||(VL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QJ(),n=eQ(),i=zP();function r(o,s,a,d){if(o==null)return[];a=d?void 0:a,Array.isArray(o)||(o=Object.values(o)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(a)||(a=a==null?[]:[a]),a=a.map(R=>String(R));const h=(R,L)=>{let O=R;for(let z=0;z<L.length&&O!=null;++z)O=O[L[z]];return O},m=(R,L)=>L==null||R==null?L:typeof R=="object"&&"key"in R?Object.hasOwn(L,R.key)?L[R.key]:h(L,R.path):typeof R=="function"?R(L):Array.isArray(R)?h(L,R):typeof L=="object"?L[R]:L,v=s.map(R=>(Array.isArray(R)&&R.length===1&&(R=R[0]),R==null||typeof R=="function"||Array.isArray(R)||n.isKey(R)?R:{key:R,path:i.toPath(R)}));return o.map(R=>({original:R,criteria:v.map(L=>m(L,R))})).slice().sort((R,L)=>{for(let O=0;O<v.length;O++){const z=t.compareValues(R.criteria[O],L.criteria[O],a[O]);if(z!==0)return z}return 0}).map(R=>R.original)}e.orderBy=r})(AR)),AR}var DR={},$L;function nQ(){return $L||($L=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,i=1){const r=[],o=Math.floor(i),s=(a,d)=>{for(let h=0;h<a.length;h++){const m=a[h];Array.isArray(m)&&d<o?s(m,d+1):r.push(m)}};return s(n,0),r}e.flatten=t})(DR)),DR}var FR={},WL;function rB(){return WL||(WL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eB(),n=jP(),i=qN(),r=ZN();function o(s,a,d){return i.isObject(d)&&(typeof a=="number"&&n.isArrayLike(d)&&t.isIndex(a)&&a<d.length||typeof a=="string"&&a in d)?r.eq(d[a],s):!1}e.isIterateeCall=o})(FR)),FR}var UL;function iQ(){return UL||(UL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tQ(),n=nQ(),i=rB();function r(o,...s){const a=s.length;return a>1&&i.isIterateeCall(o,s[0],s[1])?s=[]:a>2&&i.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),t.orderBy(o,n.flatten(s),["asc"])}e.sortBy=r})(RR)),RR}var MR,qL;function rQ(){return qL||(qL=1,MR=iQ().sortBy),MR}var oQ=rQ();const a2=Ol(oQ);var oB=e=>e.legend.settings,sQ=e=>e.legend.size,aQ=e=>e.legend.payload,lQ=Ot([aQ,oB],(e,t)=>{var{itemSorter:n}=t,i=e.flat(1);return n?a2(i,n):i});function uQ(){return bi(lQ)}var bC=1;function sB(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=I.useState({height:0,left:0,top:0,width:0}),i=I.useCallback(r=>{if(r!=null){var o=r.getBoundingClientRect(),s={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(s.height-t.height)>bC||Math.abs(s.left-t.left)>bC||Math.abs(s.top-t.top)>bC||Math.abs(s.width-t.width)>bC)&&n({height:s.height,left:s.left,top:s.top,width:s.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,i]}function ru(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var cQ=typeof Symbol=="function"&&Symbol.observable||"@@observable",KL=cQ,IR=()=>Math.random().toString(36).substring(7).split("").join("."),dQ={INIT:`@@redux/INIT${IR()}`,REPLACE:`@@redux/REPLACE${IR()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${IR()}`},M_=dQ;function VP(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function aB(e,t,n){if(typeof e!="function")throw new Error(ru(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ru(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ru(1));return n(aB)(e,t)}let i=e,r=t,o=new Map,s=o,a=0,d=!1;function h(){s===o&&(s=new Map,o.forEach((z,$)=>{s.set($,z)}))}function m(){if(d)throw new Error(ru(3));return r}function v(z){if(typeof z!="function")throw new Error(ru(4));if(d)throw new Error(ru(5));let $=!0;h();const U=a++;return s.set(U,z),function(){if($){if(d)throw new Error(ru(6));$=!1,h(),s.delete(U),o=null}}}function w(z){if(!VP(z))throw new Error(ru(7));if(typeof z.type>"u")throw new Error(ru(8));if(typeof z.type!="string")throw new Error(ru(17));if(d)throw new Error(ru(9));try{d=!0,r=i(r,z)}finally{d=!1}return(o=s).forEach(U=>{U()}),z}function R(z){if(typeof z!="function")throw new Error(ru(10));i=z,w({type:M_.REPLACE})}function L(){const z=v;return{subscribe($){if(typeof $!="object"||$===null)throw new Error(ru(11));function U(){const X=$;X.next&&X.next(m())}return U(),{unsubscribe:z(U)}},[KL](){return this}}}return w({type:M_.INIT}),{dispatch:w,subscribe:v,getState:m,replaceReducer:R,[KL]:L}}function hQ(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:M_.INIT})>"u")throw new Error(ru(12));if(typeof n(void 0,{type:M_.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ru(13))})}function lB(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const s=t[o];typeof e[s]=="function"&&(n[s]=e[s])}const i=Object.keys(n);let r;try{hQ(n)}catch(o){r=o}return function(s={},a){if(r)throw r;let d=!1;const h={};for(let m=0;m<i.length;m++){const v=i[m],w=n[v],R=s[v],L=w(R,a);if(typeof L>"u")throw a&&a.type,new Error(ru(14));h[v]=L,d=d||L!==R}return d=d||i.length!==Object.keys(s).length,d?h:s}}function I_(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...i)=>t(n(...i)))}function fQ(...e){return t=>(n,i)=>{const r=t(n,i);let o=()=>{throw new Error(ru(15))};const s={getState:r.getState,dispatch:(d,...h)=>o(d,...h)},a=e.map(d=>d(s));return o=I_(...a)(r.dispatch),{...r,dispatch:o}}}function uB(e){return VP(e)&&"type"in e&&typeof e.type=="string"}var cB=Symbol.for("immer-nothing"),ZL=Symbol.for("immer-draftable"),lc=Symbol.for("immer-state");function ff(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Sd=Object,Zb=Sd.getPrototypeOf,L_="constructor",l2="prototype",RT="configurable",O_="enumerable",JC="writable",Hw="value",lm=e=>!!e&&!!e[lc];function wf(e){var t;return e?dB(e)||u2(e)||!!e[ZL]||!!((t=e[L_])!=null&&t[ZL])||c2(e)||d2(e):!1}var pQ=Sd[l2][L_].toString(),YL=new WeakMap;function dB(e){if(!e||!$P(e))return!1;const t=Zb(e);if(t===null||t===Sd[l2])return!0;const n=Sd.hasOwnProperty.call(t,L_)&&t[L_];if(n===Object)return!0;if(!yb(n))return!1;let i=YL.get(n);return i===void 0&&(i=Function.toString.call(n),YL.set(n,i)),i===pQ}function S1(e,t,n=!0){E1(e)===0?(n?Reflect.ownKeys(e):Sd.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((i,r)=>t(r,i,e))}function E1(e){const t=e[lc];return t?t.type_:u2(e)?1:c2(e)?2:d2(e)?3:0}var XL=(e,t,n=E1(e))=>n===2?e.has(t):Sd[l2].hasOwnProperty.call(e,t),AT=(e,t,n=E1(e))=>n===2?e.get(t):e[t],z_=(e,t,n,i=E1(e))=>{i===2?e.set(t,n):i===3?e.add(n):e[t]=n};function gQ(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var u2=Array.isArray,c2=e=>e instanceof Map,d2=e=>e instanceof Set,$P=e=>typeof e=="object",yb=e=>typeof e=="function",LR=e=>typeof e=="boolean",$g=e=>e.copy_||e.base_,WP=e=>e.modified_?e.copy_:e.base_;function TT(e,t){if(c2(e))return new Map(e);if(d2(e))return new Set(e);if(u2(e))return Array[l2].slice.call(e);const n=dB(e);if(t===!0||t==="class_only"&&!n){const i=Sd.getOwnPropertyDescriptors(e);delete i[lc];let r=Reflect.ownKeys(i);for(let o=0;o<r.length;o++){const s=r[o],a=i[s];a[JC]===!1&&(a[JC]=!0,a[RT]=!0),(a.get||a.set)&&(i[s]={[RT]:!0,[JC]:!0,[O_]:a[O_],[Hw]:e[s]})}return Sd.create(Zb(e),i)}else{const i=Zb(e);if(i!==null&&n)return{...e};const r=Sd.create(i);return Sd.assign(r,e)}}function UP(e,t=!1){return h2(e)||lm(e)||!wf(e)||(E1(e)>1&&Sd.defineProperties(e,{set:xC,add:xC,clear:xC,delete:xC}),Sd.freeze(e),t&&S1(e,(n,i)=>{UP(i,!0)},!1)),e}function mQ(){ff(2)}var xC={[Hw]:mQ};function h2(e){return e===null||!$P(e)?!0:Sd.isFrozen(e)}var N_="MapSet",kT="Patches",hB={};function Yb(e){const t=hB[e];return t||ff(0,e),t}var yQ=e=>!!hB[e],Vw,fB=()=>Vw,vQ=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:yQ(N_)?Yb(N_):void 0});function JL(e,t){t&&(e.patchPlugin_=Yb(kT),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function PT(e){DT(e),e.drafts_.forEach(bQ),e.drafts_=null}function DT(e){e===Vw&&(Vw=e.parent_)}var QL=e=>Vw=vQ(Vw,e);function bQ(e){const t=e[lc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function e5(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[lc].modified_&&(PT(t),ff(4)),wf(e)&&(e=t5(t,e));const{patchPlugin_:r}=t;r&&r.generateReplacementPatches_(n[lc].base_,e,t)}else e=t5(t,n);return xQ(t,e,!0),PT(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==cB?e:void 0}function t5(e,t){if(h2(t))return t;const n=t[lc];if(!n)return qP(t,e.handledSet_,e);if(!f2(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:i}=n;if(i)for(;i.length>0;)i.pop()(e);mB(n,e)}return n.copy_}function xQ(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&UP(t,n)}function pB(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var f2=(e,t)=>e.scope_===t,wQ=[];function gB(e,t,n,i){const r=$g(e),o=e.type_;if(i!==void 0&&AT(r,i,o)===t){z_(r,i,n,o);return}if(!e.draftLocations_){const a=e.draftLocations_=new Map;S1(r,(d,h)=>{if(lm(h)){const m=a.get(h)||[];m.push(d),a.set(h,m)}})}const s=e.draftLocations_.get(t)??wQ;for(const a of s)z_(r,a,n,o)}function CQ(e,t,n){e.callbacks_.push(function(r){var a;const o=t;if(!o||!f2(o,r))return;(a=r.mapSetPlugin_)==null||a.fixSetContents(o);const s=WP(o);gB(e,o.draft_??o,s,n),mB(o,r)})}function mB(e,t){var i;if(e.modified_&&!e.finalized_&&(e.type_===3||(((i=e.assigned_)==null?void 0:i.size)??0)>0)){const{patchPlugin_:r}=t;if(r){const o=r.getPath(e);o&&r.generatePatches_(e,o,t)}pB(e)}}function _Q(e,t,n){const{scope_:i}=e;if(lm(n)){const r=n[lc];f2(r,i)&&r.callbacks_.push(function(){QC(e);const s=WP(r);gB(e,n,s,t)})}else wf(n)&&e.callbacks_.push(function(){const o=$g(e);AT(o,t,e.type_)===n&&i.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&qP(AT(e.copy_,t,e.type_),i.handledSet_,i)})}function qP(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||lm(e)||t.has(e)||!wf(e)||h2(e)||(t.add(e),S1(e,(i,r)=>{if(lm(r)){const o=r[lc];if(f2(o,n)){const s=WP(o);z_(e,i,s,e.type_),pB(o)}}else wf(r)&&qP(r,t,n)})),e}function SQ(e,t){const n=u2(e),i={type_:n?1:0,scope_:t?t.scope_:fB(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let r=i,o=KP;n&&(r=[i],o=$w);const{revoke:s,proxy:a}=Proxy.revocable(r,o);return i.draft_=a,i.revoke_=s,[a,i]}var KP={get(e,t){if(t===lc)return e;const n=$g(e);if(!XL(n,t,e.type_))return EQ(e,n,t);const i=n[t];if(e.finalized_||!wf(i))return i;if(i===OR(e.base_,t)){QC(e);const r=e.type_===1?+t:t,o=MT(e.scope_,i,e,r);return e.copy_[r]=o}return i},has(e,t){return t in $g(e)},ownKeys(e){return Reflect.ownKeys($g(e))},set(e,t,n){const i=yB($g(e),t);if(i!=null&&i.set)return i.set.call(e.draft_,n),!0;if(!e.modified_){const r=OR($g(e),t),o=r==null?void 0:r[lc];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(gQ(n,r)&&(n!==void 0||XL(e.base_,t,e.type_)))return!0;QC(e),FT(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),_Q(e,t,n)),!0},deleteProperty(e,t){return QC(e),OR(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),FT(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=$g(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i&&{[JC]:!0,[RT]:e.type_!==1||t!=="length",[O_]:i[O_],[Hw]:n[t]}},defineProperty(){ff(11)},getPrototypeOf(e){return Zb(e.base_)},setPrototypeOf(){ff(12)}},$w={};S1(KP,(e,t)=>{$w[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}});$w.deleteProperty=function(e,t){return $w.set.call(this,e,t,void 0)};$w.set=function(e,t,n){return KP.set.call(this,e[0],t,n,e[0])};function OR(e,t){const n=e[lc];return(n?$g(n):e)[t]}function EQ(e,t,n){var r;const i=yB(t,n);return i?Hw in i?i[Hw]:(r=i.get)==null?void 0:r.call(e.draft_):void 0}function yB(e,t){if(!(t in e))return;let n=Zb(e);for(;n;){const i=Object.getOwnPropertyDescriptor(n,t);if(i)return i;n=Zb(n)}}function FT(e){e.modified_||(e.modified_=!0,e.parent_&&FT(e.parent_))}function QC(e){e.copy_||(e.assigned_=new Map,e.copy_=TT(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var RQ=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,i,r)=>{if(yb(n)&&!yb(i)){const s=i;i=n;const a=this;return function(h=s,...m){return a.produce(h,v=>i.call(this,v,...m))}}yb(i)||ff(6),r!==void 0&&!yb(r)&&ff(7);let o;if(wf(n)){const s=QL(this),a=MT(s,n,void 0);let d=!0;try{o=i(a),d=!1}finally{d?PT(s):DT(s)}return JL(s,r),e5(o,s)}else if(!n||!$P(n)){if(o=i(n),o===void 0&&(o=n),o===cB&&(o=void 0),this.autoFreeze_&&UP(o,!0),r){const s=[],a=[];Yb(kT).generateReplacementPatches_(n,o,{patches_:s,inversePatches_:a}),r(s,a)}return o}else ff(1,n)},this.produceWithPatches=(n,i)=>{if(yb(n))return(a,...d)=>this.produceWithPatches(a,h=>n(h,...d));let r,o;return[this.produce(n,i,(a,d)=>{r=a,o=d}),r,o]},LR(t==null?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),LR(t==null?void 0:t.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),LR(t==null?void 0:t.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){wf(t)||ff(8),lm(t)&&(t=yf(t));const n=QL(this),i=MT(n,t,void 0);return i[lc].isManual_=!0,DT(n),i}finishDraft(t,n){const i=t&&t[lc];(!i||!i.isManual_)&&ff(9);const{scope_:r}=i;return JL(r,n),e5(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,n){let i;for(i=n.length-1;i>=0;i--){const o=n[i];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}i>-1&&(n=n.slice(i+1));const r=Yb(kT).applyPatches_;return lm(t)?r(t,n):this.produce(t,o=>r(o,n))}};function MT(e,t,n,i){const[r,o]=c2(t)?Yb(N_).proxyMap_(t,n):d2(t)?Yb(N_).proxySet_(t,n):SQ(t,n);return((n==null?void 0:n.scope_)??fB()).drafts_.push(r),o.callbacks_=(n==null?void 0:n.callbacks_)??[],o.key_=i,n&&i!==void 0?CQ(n,o,i):o.callbacks_.push(function(d){var m;(m=d.mapSetPlugin_)==null||m.fixSetContents(o);const{patchPlugin_:h}=d;o.modified_&&h&&h.generatePatches_(o,[],d)}),r}function yf(e){return lm(e)||ff(10,e),vB(e)}function vB(e){if(!wf(e)||h2(e))return e;const t=e[lc];let n,i=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=TT(e,t.scope_.immer_.useStrictShallowCopy_),i=t.scope_.immer_.shouldUseStrictIteration()}else n=TT(e,!0);return S1(n,(r,o)=>{z_(n,r,vB(o))},i),t&&(t.finalized_=!1),n}var AQ=new RQ,bB=AQ.produce;function xB(e){return({dispatch:n,getState:i})=>r=>o=>typeof o=="function"?o(n,i,e):r(o)}var TQ=xB(),kQ=xB,PQ=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?I_:I_.apply(null,arguments)};function wh(e,t){function n(...i){if(t){let r=t(...i);if(!r)throw new Error(Rd(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:i[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=i=>uB(i)&&i.type===e,n}var wB=class bw extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,bw.prototype)}static get[Symbol.species](){return bw}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new bw(...t[0].concat(this)):new bw(...t.concat(this))}};function n5(e){return wf(e)?bB(e,()=>{}):e}function wC(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function DQ(e){return typeof e=="boolean"}var FQ=()=>function(t){const{thunk:n=!0,immutableCheck:i=!0,serializableCheck:r=!0,actionCreatorCheck:o=!0}=t??{};let s=new wB;return n&&(DQ(n)?s.push(TQ):s.push(kQ(n.extraArgument))),s},CB="RTK_autoBatch",Ms=()=>e=>({payload:e,meta:{[CB]:!0}}),i5=e=>t=>{setTimeout(t,e)},_B=(e={type:"raf"})=>t=>(...n)=>{const i=t(...n);let r=!0,o=!1,s=!1;const a=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:i5(10):e.type==="callback"?e.queueNotification:i5(e.timeout),h=()=>{s=!1,o&&(o=!1,a.forEach(m=>m()))};return Object.assign({},i,{subscribe(m){const v=()=>r&&m(),w=i.subscribe(v);return a.add(m),()=>{w(),a.delete(m)}},dispatch(m){var v;try{return r=!((v=m==null?void 0:m.meta)!=null&&v[CB]),o=!r,o&&(s||(s=!0,d(h))),i.dispatch(m)}finally{r=!0}}})},MQ=e=>function(n){const{autoBatch:i=!0}=n??{};let r=new wB(e);return i&&r.push(_B(typeof i=="object"?i:void 0)),r};function IQ(e){const t=FQ(),{reducer:n=void 0,middleware:i,devTools:r=!0,preloadedState:o=void 0,enhancers:s=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(VP(n))a=lB(n);else throw new Error(Rd(1));let d;typeof i=="function"?d=i(t):d=t();let h=I_;r&&(h=PQ({trace:!1,...typeof r=="object"&&r}));const m=fQ(...d),v=MQ(m);let w=typeof s=="function"?s(v):v();const R=h(...w);return aB(a,o,R)}function SB(e){const t={},n=[];let i;const r={addCase(o,s){const a=typeof o=="string"?o:o.type;if(!a)throw new Error(Rd(28));if(a in t)throw new Error(Rd(29));return t[a]=s,r},addAsyncThunk(o,s){return s.pending&&(t[o.pending.type]=s.pending),s.rejected&&(t[o.rejected.type]=s.rejected),s.fulfilled&&(t[o.fulfilled.type]=s.fulfilled),s.settled&&n.push({matcher:o.settled,reducer:s.settled}),r},addMatcher(o,s){return n.push({matcher:o,reducer:s}),r},addDefaultCase(o){return i=o,r}};return e(r),[t,n,i]}function LQ(e){return typeof e=="function"}function OQ(e,t){let[n,i,r]=SB(t),o;if(LQ(e))o=()=>n5(e());else{const a=n5(e);o=()=>a}function s(a=o(),d){let h=[n[d.type],...i.filter(({matcher:m})=>m(d)).map(({reducer:m})=>m)];return h.filter(m=>!!m).length===0&&(h=[r]),h.reduce((m,v)=>{if(v)if(lm(m)){const R=v(m,d);return R===void 0?m:R}else{if(wf(m))return bB(m,w=>v(w,d));{const w=v(m,d);if(w===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return w}}return m},a)}return s.getInitialState=o,s}var zQ="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",NQ=(e=21)=>{let t="",n=e;for(;n--;)t+=zQ[Math.random()*64|0];return t},BQ=Symbol.for("rtk-slice-createasyncthunk");function GQ(e,t){return`${e}/${t}`}function jQ({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[BQ];return function(r){const{name:o,reducerPath:s=o}=r;if(!o)throw new Error(Rd(11));const a=(typeof r.reducers=="function"?r.reducers(VQ()):r.reducers)||{},d=Object.keys(a),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},m={addCase(X,q){const ie=typeof X=="string"?X:X.type;if(!ie)throw new Error(Rd(12));if(ie in h.sliceCaseReducersByType)throw new Error(Rd(13));return h.sliceCaseReducersByType[ie]=q,m},addMatcher(X,q){return h.sliceMatchers.push({matcher:X,reducer:q}),m},exposeAction(X,q){return h.actionCreators[X]=q,m},exposeCaseReducer(X,q){return h.sliceCaseReducersByName[X]=q,m}};d.forEach(X=>{const q=a[X],ie={reducerName:X,type:GQ(o,X),createNotation:typeof r.reducers=="function"};WQ(q)?qQ(ie,q,m,t):$Q(ie,q,m)});function v(){const[X={},q=[],ie=void 0]=typeof r.extraReducers=="function"?SB(r.extraReducers):[r.extraReducers],re={...X,...h.sliceCaseReducersByType};return OQ(r.initialState,J=>{for(let ne in re)J.addCase(ne,re[ne]);for(let ne of h.sliceMatchers)J.addMatcher(ne.matcher,ne.reducer);for(let ne of q)J.addMatcher(ne.matcher,ne.reducer);ie&&J.addDefaultCase(ie)})}const w=X=>X,R=new Map,L=new WeakMap;let O;function z(X,q){return O||(O=v()),O(X,q)}function $(){return O||(O=v()),O.getInitialState()}function U(X,q=!1){function ie(J){let ne=J[X];return typeof ne>"u"&&q&&(ne=wC(L,ie,$)),ne}function re(J=w){const ne=wC(R,q,()=>new WeakMap);return wC(ne,J,()=>{const be={};for(const[ue,ve]of Object.entries(r.selectors??{}))be[ue]=HQ(ve,J,()=>wC(L,J,$),q);return be})}return{reducerPath:X,getSelectors:re,get selectors(){return re(ie)},selectSlice:ie}}const Y={name:o,reducer:z,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:$,...U(s),injectInto(X,{reducerPath:q,...ie}={}){const re=q??s;return X.inject({reducerPath:re,reducer:z},ie),{...Y,...U(re,!0)}}};return Y}}function HQ(e,t,n,i){function r(o,...s){let a=t(o);return typeof a>"u"&&i&&(a=n()),e(a,...s)}return r.unwrapped=e,r}var Vc=jQ();function VQ(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function $Q({type:e,reducerName:t,createNotation:n},i,r){let o,s;if("reducer"in i){if(n&&!UQ(i))throw new Error(Rd(17));o=i.reducer,s=i.prepare}else o=i;r.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,s?wh(e,s):wh(e))}function WQ(e){return e._reducerDefinitionType==="asyncThunk"}function UQ(e){return e._reducerDefinitionType==="reducerWithPrepare"}function qQ({type:e,reducerName:t},n,i,r){if(!r)throw new Error(Rd(18));const{payloadCreator:o,fulfilled:s,pending:a,rejected:d,settled:h,options:m}=n,v=r(e,o,m);i.exposeAction(t,v),s&&i.addCase(v.fulfilled,s),a&&i.addCase(v.pending,a),d&&i.addCase(v.rejected,d),h&&i.addMatcher(v.settled,h),i.exposeCaseReducer(t,{fulfilled:s||CC,pending:a||CC,rejected:d||CC,settled:h||CC})}function CC(){}var KQ="task",EB="listener",RB="completed",ZP="cancelled",ZQ=`task-${ZP}`,YQ=`task-${RB}`,IT=`${EB}-${ZP}`,XQ=`${EB}-${RB}`,p2=class{constructor(e){uE(this,"name","TaskAbortError");uE(this,"message");this.code=e,this.message=`${KQ} ${ZP} (reason: ${e})`}},YP=(e,t)=>{if(typeof e!="function")throw new TypeError(Rd(32))},B_=()=>{},AB=(e,t=B_)=>(e.catch(t),e),TB=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Kv=e=>{if(e.aborted)throw new p2(e.reason)};function kB(e,t){let n=B_;return new Promise((i,r)=>{const o=()=>r(new p2(e.reason));if(e.aborted){o();return}n=TB(e,o),t.finally(()=>n()).then(i,r)}).finally(()=>{n=B_})}var JQ=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof p2?"cancelled":"rejected",error:n}}finally{t==null||t()}},G_=e=>t=>AB(kB(e,t).then(n=>(Kv(e),n))),PB=e=>{const t=G_(e);return n=>t(new Promise(i=>setTimeout(i,n)))},{assign:Tb}=Object,r5={},g2="listenerMiddleware",QQ=(e,t)=>{const n=i=>TB(e,()=>i.abort(e.reason));return(i,r)=>{YP(i);const o=new AbortController;n(o);const s=JQ(async()=>{Kv(e),Kv(o.signal);const a=await i({pause:G_(o.signal),delay:PB(o.signal),signal:o.signal});return Kv(o.signal),a},()=>o.abort(YQ));return r!=null&&r.autoJoin&&t.push(s.catch(B_)),{result:G_(e)(s),cancel(){o.abort(ZQ)}}}},eee=(e,t)=>{const n=async(i,r)=>{Kv(t);let o=()=>{};const a=[new Promise((d,h)=>{let m=e({predicate:i,effect:(v,w)=>{w.unsubscribe(),d([v,w.getState(),w.getOriginalState()])}});o=()=>{m(),h()}})];r!=null&&a.push(new Promise(d=>setTimeout(d,r,null)));try{const d=await kB(t,Promise.race(a));return Kv(t),d}finally{o()}};return(i,r)=>AB(n(i,r))},DB=e=>{let{type:t,actionCreator:n,matcher:i,predicate:r,effect:o}=e;if(t)r=wh(t).match;else if(n)t=n.type,r=n.match;else if(i)r=i;else if(!r)throw new Error(Rd(21));return YP(o),{predicate:r,type:t,effect:o}},FB=Tb(e=>{const{type:t,predicate:n,effect:i}=DB(e);return{id:NQ(),effect:i,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Rd(22))}}},{withTypes:()=>FB}),o5=(e,t)=>{const{type:n,effect:i,predicate:r}=DB(t);return Array.from(e.values()).find(o=>(typeof n=="string"?o.type===n:o.predicate===r)&&o.effect===i)},LT=e=>{e.pending.forEach(t=>{t.abort(IT)})},tee=(e,t)=>()=>{for(const n of t.keys())LT(n);e.clear()},s5=(e,t,n)=>{try{e(t,n)}catch(i){setTimeout(()=>{throw i},0)}},MB=Tb(wh(`${g2}/add`),{withTypes:()=>MB}),nee=wh(`${g2}/removeAll`),IB=Tb(wh(`${g2}/remove`),{withTypes:()=>IB}),iee=(...e)=>{console.error(`${g2}/error`,...e)},R1=(e={})=>{const t=new Map,n=new Map,i=R=>{const L=n.get(R)??0;n.set(R,L+1)},r=R=>{const L=n.get(R)??1;L===1?n.delete(R):n.set(R,L-1)},{extra:o,onError:s=iee}=e;YP(s);const a=R=>(R.unsubscribe=()=>t.delete(R.id),t.set(R.id,R),L=>{R.unsubscribe(),L!=null&&L.cancelActive&&LT(R)}),d=R=>{const L=o5(t,R)??FB(R);return a(L)};Tb(d,{withTypes:()=>d});const h=R=>{const L=o5(t,R);return L&&(L.unsubscribe(),R.cancelActive&&LT(L)),!!L};Tb(h,{withTypes:()=>h});const m=async(R,L,O,z)=>{const $=new AbortController,U=eee(d,$.signal),Y=[];try{R.pending.add($),i(R),await Promise.resolve(R.effect(L,Tb({},O,{getOriginalState:z,condition:(X,q)=>U(X,q).then(Boolean),take:U,delay:PB($.signal),pause:G_($.signal),extra:o,signal:$.signal,fork:QQ($.signal,Y),unsubscribe:R.unsubscribe,subscribe:()=>{t.set(R.id,R)},cancelActiveListeners:()=>{R.pending.forEach((X,q,ie)=>{X!==$&&(X.abort(IT),ie.delete(X))})},cancel:()=>{$.abort(IT),R.pending.delete($)},throwIfCancelled:()=>{Kv($.signal)}})))}catch(X){X instanceof p2||s5(s,X,{raisedBy:"effect"})}finally{await Promise.all(Y),$.abort(XQ),r(R),R.pending.delete($)}},v=tee(t,n);return{middleware:R=>L=>O=>{if(!uB(O))return L(O);if(MB.match(O))return d(O.payload);if(nee.match(O)){v();return}if(IB.match(O))return h(O.payload);let z=R.getState();const $=()=>{if(z===r5)throw new Error(Rd(23));return z};let U;try{if(U=L(O),t.size>0){const Y=R.getState(),X=Array.from(t.values());for(const q of X){let ie=!1;try{ie=q.predicate(O,Y,z)}catch(re){ie=!1,s5(s,re,{raisedBy:"predicate"})}ie&&m(q,O,R,$)}}}finally{z=r5}return U},startListening:d,stopListening:h,clearListeners:v}};function Rd(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var ree={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},LB=Vc({name:"chartLayout",initialState:ree,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,i,r,o;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(i=t.payload.right)!==null&&i!==void 0?i:0,e.margin.bottom=(r=t.payload.bottom)!==null&&r!==void 0?r:0,e.margin.left=(o=t.payload.left)!==null&&o!==void 0?o:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:oee,setLayout:see,setChartSize:aee,setScale:lee}=LB.actions,uee=LB.reducer;function OB(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function a5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function bb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?a5(Object(n),!0).forEach(function(i){cee(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function cee(e,t,n){return(t=dee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dee(e){var t=hee(e,"string");return typeof t=="symbol"?t:t+""}function hee(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ea(e,t,n){return bs(e)||bs(t)?n:Lp(t)?Kb(e,t,n):typeof t=="function"?t(e):n}var fee=(e,t,n)=>{if(t&&n){var{width:i,height:r}=n,{align:o,verticalAlign:s,layout:a}=t;if((a==="vertical"||a==="horizontal"&&s==="middle")&&o!=="center"&&fi(e[o]))return bb(bb({},e),{},{[o]:e[o]+(i||0)});if((a==="horizontal"||a==="vertical"&&o==="center")&&s!=="middle"&&fi(e[s]))return bb(bb({},e),{},{[s]:e[s]+(r||0)})}return e},$p=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",l5=1e-4,pee=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,i=e.range(),r=Math.min(i[0],i[1])-l5,o=Math.max(i[0],i[1])+l5,s=e(t[0]),a=e(t[n-1]);(s<r||s>o||a<r||a>o)&&e.domain([t[0],t[n-1]])}},gee=(e,t)=>{if(!t||t.length!==2||!fi(t[0])||!fi(t[1]))return e;var n=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]),r=[e[0],e[1]];return(!fi(e[0])||e[0]<n)&&(r[0]=n),(!fi(e[1])||e[1]>i)&&(r[1]=i),r[0]>i&&(r[0]=i),r[1]<n&&(r[1]=n),r},mee=e=>{var t=e.length;if(!(t<=0))for(var n=0,i=e[0].length;n<i;++n)for(var r=0,o=0,s=0;s<t;++s){var a=bf(e[s][n][1])?e[s][n][0]:e[s][n][1];a>=0?(e[s][n][0]=r,e[s][n][1]=r+a,r=e[s][n][1]):(e[s][n][0]=o,e[s][n][1]=o+a,o=e[s][n][1])}},yee=e=>{var t=e.length;if(!(t<=0))for(var n=0,i=e[0].length;n<i;++n)for(var r=0,o=0;o<t;++o){var s=bf(e[o][n][1])?e[o][n][0]:e[o][n][1];s>=0?(e[o][n][0]=r,e[o][n][1]=r+s,r=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},vee={sign:mee,expand:NX,none:qb,silhouette:BX,wiggle:GX,positive:yee},bee=(e,t,n)=>{var i=vee[n],r=zX().keys(t).value((o,s)=>Number(Ea(o,s,0))).order(ST).offset(i);return r(e)};function zB(e){return e==null?void 0:String(e)}function j_(e){var{axis:t,ticks:n,bandSize:i,entry:r,index:o,dataKey:s}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!bs(r[t.dataKey])){var a=VN(n,"value",r[t.dataKey]);if(a)return a.coordinate+i/2}return n[o]?n[o].coordinate+i/2:null}var d=Ea(r,bs(s)?t.dataKey:s);return bs(d)?null:t.scale(d)}var u5=e=>{var{axis:t,ticks:n,offset:i,bandSize:r,entry:o,index:s}=e;if(t.type==="category")return n[s]?n[s].coordinate+i:null;var a=Ea(o,t.dataKey,t.scale.domain()[s]);return bs(a)?null:t.scale(a)-r/2+i},xee=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var i=Math.min(n[0],n[1]),r=Math.max(n[0],n[1]);return i<=0&&r>=0?0:r<0?r:i}return n[0]},wee=e=>{var t=e.flat(2).filter(fi);return[Math.min(...t),Math.max(...t)]},Cee=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],_ee=(e,t,n)=>{if(e!=null)return Cee(Object.keys(e).reduce((i,r)=>{var o=e[r],{stackedData:s}=o,a=s.reduce((d,h)=>{var m=OB(h,t,n),v=wee(m);return[Math.min(d[0],v[0]),Math.max(d[1],v[1])]},[1/0,-1/0]);return[Math.min(a[0],i[0]),Math.max(a[1],i[1])]},[1/0,-1/0]))},c5=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,d5=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Dy=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!n||i>0)return i}if(e&&t&&t.length>=2){for(var r=a2(t,m=>m.coordinate),o=1/0,s=1,a=r.length;s<a;s++){var d=r[s],h=r[s-1];o=Math.min((d.coordinate||0)-(h.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0};function h5(e){var{tooltipEntrySettings:t,dataKey:n,payload:i,value:r,name:o}=e;return bb(bb({},t),{},{dataKey:n,payload:i,value:r,name:o})}function bx(e,t){if(e)return String(e);if(typeof t=="string")return t}var See=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},Eee=(e,t)=>t==="centric"?e.angle:e.radius,vm=e=>e.layout.width,bm=e=>e.layout.height,Ree=e=>e.layout.scale,NB=e=>e.layout.margin,m2=Ot(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),y2=Ot(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Aee="data-recharts-item-index",Tee="data-recharts-item-data-key",A1=60;function f5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function _C(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?f5(Object(n),!0).forEach(function(i){kee(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function kee(e,t,n){return(t=Pee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pee(e){var t=Dee(e,"string");return typeof t=="symbol"?t:t+""}function Dee(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fee=e=>e.brush.height;function Mee(e){var t=y2(e);return t.reduce((n,i)=>{if(i.orientation==="left"&&!i.mirror&&!i.hide){var r=typeof i.width=="number"?i.width:A1;return n+r}return n},0)}function Iee(e){var t=y2(e);return t.reduce((n,i)=>{if(i.orientation==="right"&&!i.mirror&&!i.hide){var r=typeof i.width=="number"?i.width:A1;return n+r}return n},0)}function Lee(e){var t=m2(e);return t.reduce((n,i)=>i.orientation==="top"&&!i.mirror&&!i.hide?n+i.height:n,0)}function Oee(e){var t=m2(e);return t.reduce((n,i)=>i.orientation==="bottom"&&!i.mirror&&!i.hide?n+i.height:n,0)}var Nl=Ot([vm,bm,NB,Fee,Mee,Iee,Lee,Oee,oB,sQ],(e,t,n,i,r,o,s,a,d,h)=>{var m={left:(n.left||0)+r,right:(n.right||0)+o},v={top:(n.top||0)+s,bottom:(n.bottom||0)+a},w=_C(_C({},v),m),R=w.bottom;w.bottom+=i,w=fee(w,d,h);var L=e-w.left-w.right,O=t-w.top-w.bottom;return _C(_C({brushBottom:R},w),{},{width:Math.max(L,0),height:Math.max(O,0)})}),zee=Ot(Nl,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),XP=Ot(vm,bm,(e,t)=>({x:0,y:0,width:e,height:t})),Nee=I.createContext(null),uu=()=>I.useContext(Nee)!=null,v2=e=>e.brush,b2=Ot([v2,Nl,NB],(e,t,n)=>({height:e.height,x:fi(e.x)?e.x:t.left,y:fi(e.y)?e.y:t.top+t.height+t.brushBottom-((n==null?void 0:n.bottom)||0),width:fi(e.width)?e.width:t.width})),zR={},NR={},BR={},p5;function Bee(){return p5||(p5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,i,{signal:r,edges:o}={}){let s,a=null;const d=o!=null&&o.includes("leading"),h=o==null||o.includes("trailing"),m=()=>{a!==null&&(n.apply(s,a),s=void 0,a=null)},v=()=>{h&&m(),O()};let w=null;const R=()=>{w!=null&&clearTimeout(w),w=setTimeout(()=>{w=null,v()},i)},L=()=>{w!==null&&(clearTimeout(w),w=null)},O=()=>{L(),s=void 0,a=null},z=()=>{m()},$=function(...U){if(r!=null&&r.aborted)return;s=this,a=U;const Y=w==null;R(),d&&Y&&m()};return $.schedule=R,$.cancel=O,$.flush=z,r==null||r.addEventListener("abort",O,{once:!0}),$}e.debounce=t})(BR)),BR}var g5;function Gee(){return g5||(g5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Bee();function n(i,r=0,o={}){typeof o!="object"&&(o={});const{leading:s=!1,trailing:a=!0,maxWait:d}=o,h=Array(2);s&&(h[0]="leading"),a&&(h[1]="trailing");let m,v=null;const w=t.debounce(function(...O){m=i.apply(this,O),v=null},r,{edges:h}),R=function(...O){return d!=null&&(v===null&&(v=Date.now()),Date.now()-v>=d)?(m=i.apply(this,O),v=Date.now(),w.cancel(),w.schedule(),m):(w.apply(this,O),m)},L=()=>(w.flush(),m);return R.cancel=w.cancel,R.flush=L,R}e.debounce=n})(NR)),NR}var m5;function jee(){return m5||(m5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Gee();function n(i,r=0,o={}){const{leading:s=!0,trailing:a=!0}=o;return t.debounce(i,r,{leading:s,maxWait:r,trailing:a})}e.throttle=n})(zR)),zR}var GR,y5;function Hee(){return y5||(y5=1,GR=jee().throttle),GR}var Vee=Hee();const $ee=Ol(Vee);var v5=function(t,n){for(var i=arguments.length,r=new Array(i>2?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(n.replace(/%s/g,()=>r[s++]))}},BB=(e,t,n)=>{var{width:i="100%",height:r="100%",aspect:o,maxHeight:s}=n,a=am(i)?e:Number(i),d=am(r)?t:Number(r);return o&&o>0&&(a?d=a/o:d&&(a=d*o),s&&d!=null&&d>s&&(d=s)),{calculatedWidth:a,calculatedHeight:d}},Wee={width:0,height:0,overflow:"visible"},Uee={width:0,overflowX:"visible"},qee={height:0,overflowY:"visible"},Kee={},Zee=e=>{var{width:t,height:n}=e,i=am(t),r=am(n);return i&&r?Wee:i?Uee:r?qee:Kee};function Yee(e){var{width:t,height:n,aspect:i}=e,r=t,o=n;return r===void 0&&o===void 0?(r="100%",o="100%"):r===void 0?r=i&&i>0?void 0:"100%":o===void 0&&(o=i&&i>0?void 0:"100%"),{width:r,height:o}}function ws(e){return Number.isFinite(e)}function Fy(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function OT(){return OT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},OT.apply(null,arguments)}function b5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function x5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?b5(Object(n),!0).forEach(function(i){Xee(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Xee(e,t,n){return(t=Jee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jee(e){var t=Qee(e,"string");return typeof t=="symbol"?t:t+""}function Qee(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GB=I.createContext({width:-1,height:-1});function ete(e){return Fy(e.width)&&Fy(e.height)}function jB(e){var{children:t,width:n,height:i}=e,r=I.useMemo(()=>({width:n,height:i}),[n,i]);return ete(r)?I.createElement(GB.Provider,{value:r},t):null}var JP=()=>I.useContext(GB),tte=I.forwardRef((e,t)=>{var{aspect:n,initialDimension:i={width:-1,height:-1},width:r,height:o,minWidth:s=0,minHeight:a,maxHeight:d,children:h,debounce:m=0,id:v,className:w,onResize:R,style:L={}}=e,O=I.useRef(null),z=I.useRef();z.current=R,I.useImperativeHandle(t,()=>O.current);var[$,U]=I.useState({containerWidth:i.width,containerHeight:i.height}),Y=I.useCallback((J,ne)=>{U(be=>{var ue=Math.round(J),ve=Math.round(ne);return be.containerWidth===ue&&be.containerHeight===ve?be:{containerWidth:ue,containerHeight:ve}})},[]);I.useEffect(()=>{if(O.current==null||typeof ResizeObserver>"u")return _1;var J=ve=>{var ce,{width:Ie,height:Te}=ve[0].contentRect;Y(Ie,Te),(ce=z.current)===null||ce===void 0||ce.call(z,Ie,Te)};m>0&&(J=$ee(J,m,{trailing:!0,leading:!1}));var ne=new ResizeObserver(J),{width:be,height:ue}=O.current.getBoundingClientRect();return Y(be,ue),ne.observe(O.current),()=>{ne.disconnect()}},[Y,m]);var{containerWidth:X,containerHeight:q}=$;v5(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:ie,calculatedHeight:re}=BB(X,q,{width:r,height:o,aspect:n,maxHeight:d});return v5(ie!=null&&ie>0||re!=null&&re>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,ie,re,r,o,s,a,n),I.createElement("div",{id:v?"".concat(v):void 0,className:Fo("recharts-responsive-container",w),style:x5(x5({},L),{},{width:r,height:o,minWidth:s,minHeight:a,maxHeight:d}),ref:O},I.createElement("div",{style:Zee({width:r,height:o})},I.createElement(jB,{width:ie,height:re},h)))}),e_=I.forwardRef((e,t)=>{var n=JP();if(Fy(n.width)&&Fy(n.height))return e.children;var{width:i,height:r}=Yee({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:o,calculatedHeight:s}=BB(void 0,void 0,{width:i,height:r,aspect:e.aspect,maxHeight:e.maxHeight});return fi(o)&&fi(s)?I.createElement(jB,{width:o,height:s},e.children):I.createElement(tte,OT({},e,{width:i,height:r,ref:t}))});function HB(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var x2=()=>{var e,t=uu(),n=bi(zee),i=bi(b2),r=(e=bi(v2))===null||e===void 0?void 0:e.padding;return!t||!i||!r?n:{width:i.width-r.left-r.right,height:i.height-r.top-r.bottom,x:r.left,y:r.top}},nte={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},ite=()=>{var e;return(e=bi(Nl))!==null&&e!==void 0?e:nte},VB=()=>bi(vm),$B=()=>bi(bm),rte=()=>bi(e=>e.layout.margin),Yr=e=>e.layout.layoutType,x0=()=>bi(Yr),ote=()=>{var e=x0();if(e==="horizontal"||e==="vertical")return e},ste=()=>{var e=x0();return e!==void 0},w2=e=>{var t=Zs(),n=uu(),{width:i,height:r}=e,o=JP(),s=i,a=r;return o&&(s=o.width>0?o.width:i,a=o.height>0?o.height:r),I.useEffect(()=>{!n&&Fy(s)&&Fy(a)&&t(aee({width:s,height:a}))},[t,n,s,a]),null},WB=Symbol.for("immer-nothing"),w5=Symbol.for("immer-draftable"),Td=Symbol.for("immer-state");function pf(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ww=Object.getPrototypeOf;function Xb(e){return!!e&&!!e[Td]}function s0(e){var t;return e?UB(e)||Array.isArray(e)||!!e[w5]||!!((t=e.constructor)!=null&&t[w5])||T1(e)||_2(e):!1}var ate=Object.prototype.constructor.toString(),C5=new WeakMap;function UB(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let i=C5.get(n);return i===void 0&&(i=Function.toString.call(n),C5.set(n,i)),i===ate}function H_(e,t,n=!0){C2(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((i,r)=>t(r,i,e))}function C2(e){const t=e[Td];return t?t.type_:Array.isArray(e)?1:T1(e)?2:_2(e)?3:0}function zT(e,t){return C2(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function qB(e,t,n){const i=C2(e);i===2?e.set(t,n):i===3?e.add(n):e[t]=n}function lte(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function T1(e){return e instanceof Map}function _2(e){return e instanceof Set}function Gv(e){return e.copy_||e.base_}function NT(e,t){if(T1(e))return new Map(e);if(_2(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=UB(e);if(t===!0||t==="class_only"&&!n){const i=Object.getOwnPropertyDescriptors(e);delete i[Td];let r=Reflect.ownKeys(i);for(let o=0;o<r.length;o++){const s=r[o],a=i[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(i[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[s]})}return Object.create(Ww(e),i)}else{const i=Ww(e);if(i!==null&&n)return{...e};const r=Object.create(i);return Object.assign(r,e)}}function QP(e,t=!1){return S2(e)||Xb(e)||!s0(e)||(C2(e)>1&&Object.defineProperties(e,{set:SC,add:SC,clear:SC,delete:SC}),Object.freeze(e),t&&Object.values(e).forEach(n=>QP(n,!0))),e}function ute(){pf(2)}var SC={value:ute};function S2(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var cte={};function a0(e){const t=cte[e];return t||pf(0,e),t}var Uw;function KB(){return Uw}function dte(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function _5(e,t){t&&(a0("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function BT(e){GT(e),e.drafts_.forEach(hte),e.drafts_=null}function GT(e){e===Uw&&(Uw=e.parent_)}function S5(e){return Uw=dte(Uw,e)}function hte(e){const t=e[Td];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function E5(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Td].modified_&&(BT(t),pf(4)),s0(e)&&(e=V_(t,e),t.parent_||$_(t,e)),t.patches_&&a0("Patches").generateReplacementPatches_(n[Td].base_,e,t.patches_,t.inversePatches_)):e=V_(t,n,[]),BT(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==WB?e:void 0}function V_(e,t,n){if(S2(t))return t;const i=e.immer_.shouldUseStrictIteration(),r=t[Td];if(!r)return H_(t,(o,s)=>R5(e,r,t,o,s,n),i),t;if(r.scope_!==e)return t;if(!r.modified_)return $_(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const o=r.copy_;let s=o,a=!1;r.type_===3&&(s=new Set(o),o.clear(),a=!0),H_(s,(d,h)=>R5(e,r,o,d,h,n,a),i),$_(e,o,!1),n&&e.patches_&&a0("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function R5(e,t,n,i,r,o,s){if(r==null||typeof r!="object"&&!s)return;const a=S2(r);if(!(a&&!s)){if(Xb(r)){const d=o&&t&&t.type_!==3&&!zT(t.assigned_,i)?o.concat(i):void 0,h=V_(e,r,d);if(qB(n,i,h),Xb(h))e.canAutoFreeze_=!1;else return}else s&&n.add(r);if(s0(r)&&!a){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[i]===r&&a)return;V_(e,r),(!t||!t.scope_.parent_)&&typeof i!="symbol"&&(T1(n)?n.has(i):Object.prototype.propertyIsEnumerable.call(n,i))&&$_(e,r)}}}function $_(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&QP(t,n)}function fte(e,t){const n=Array.isArray(e),i={type_:n?1:0,scope_:t?t.scope_:KB(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,o=eD;n&&(r=[i],o=qw);const{revoke:s,proxy:a}=Proxy.revocable(r,o);return i.draft_=a,i.revoke_=s,a}var eD={get(e,t){if(t===Td)return e;const n=Gv(e);if(!zT(n,t))return pte(e,n,t);const i=n[t];return e.finalized_||!s0(i)?i:i===jR(e.base_,t)?(HR(e),e.copy_[t]=HT(i,e)):i},has(e,t){return t in Gv(e)},ownKeys(e){return Reflect.ownKeys(Gv(e))},set(e,t,n){const i=ZB(Gv(e),t);if(i!=null&&i.set)return i.set.call(e.draft_,n),!0;if(!e.modified_){const r=jR(Gv(e),t),o=r==null?void 0:r[Td];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(lte(n,r)&&(n!==void 0||zT(e.base_,t)))return!0;HR(e),jT(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return jR(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,HR(e),jT(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Gv(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:i.enumerable,value:n[t]}},defineProperty(){pf(11)},getPrototypeOf(e){return Ww(e.base_)},setPrototypeOf(){pf(12)}},qw={};H_(eD,(e,t)=>{qw[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});qw.deleteProperty=function(e,t){return qw.set.call(this,e,t,void 0)};qw.set=function(e,t,n){return eD.set.call(this,e[0],t,n,e[0])};function jR(e,t){const n=e[Td];return(n?Gv(n):e)[t]}function pte(e,t,n){var r;const i=ZB(t,n);return i?"value"in i?i.value:(r=i.get)==null?void 0:r.call(e.draft_):void 0}function ZB(e,t){if(!(t in e))return;let n=Ww(e);for(;n;){const i=Object.getOwnPropertyDescriptor(n,t);if(i)return i;n=Ww(n)}}function jT(e){e.modified_||(e.modified_=!0,e.parent_&&jT(e.parent_))}function HR(e){e.copy_||(e.copy_=NT(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var gte=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,n,i)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const s=this;return function(d=o,...h){return s.produce(d,m=>n.call(this,m,...h))}}typeof n!="function"&&pf(6),i!==void 0&&typeof i!="function"&&pf(7);let r;if(s0(t)){const o=S5(this),s=HT(t,void 0);let a=!0;try{r=n(s),a=!1}finally{a?BT(o):GT(o)}return _5(o,i),E5(r,o)}else if(!t||typeof t!="object"){if(r=n(t),r===void 0&&(r=t),r===WB&&(r=void 0),this.autoFreeze_&&QP(r,!0),i){const o=[],s=[];a0("Patches").generateReplacementPatches_(t,r,o,s),i(o,s)}return r}else pf(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...a)=>this.produceWithPatches(s,d=>t(d,...a));let i,r;return[this.produce(t,n,(s,a)=>{i=s,r=a}),i,r]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){s0(e)||pf(8),Xb(e)&&(e=mte(e));const t=S5(this),n=HT(e,void 0);return n[Td].isManual_=!0,GT(t),n}finishDraft(e,t){const n=e&&e[Td];(!n||!n.isManual_)&&pf(9);const{scope_:i}=n;return _5(i,t),E5(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(r.path.length===0&&r.op==="replace"){e=r.value;break}}n>-1&&(t=t.slice(n+1));const i=a0("Patches").applyPatches_;return Xb(e)?i(e,t):this.produce(e,r=>i(r,t))}};function HT(e,t){const n=T1(e)?a0("MapSet").proxyMap_(e,t):_2(e)?a0("MapSet").proxySet_(e,t):fte(e,t);return(t?t.scope_:KB()).drafts_.push(n),n}function mte(e){return Xb(e)||pf(10,e),YB(e)}function YB(e){if(!s0(e)||S2(e))return e;const t=e[Td];let n,i=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=NT(e,t.scope_.immer_.useStrictShallowCopy_),i=t.scope_.immer_.shouldUseStrictIteration()}else n=NT(e,!0);return H_(n,(r,o)=>{qB(n,r,YB(o))},i),t&&(t.finalized_=!1),n}var yte=new gte;yte.produce;var vte={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},XB=Vc({name:"legend",initialState:vte,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Ms()},replaceLegendPayload:{reducer(e,t){var{prev:n,next:i}=t.payload,r=yf(e).payload.indexOf(n);r>-1&&(e.payload[r]=i)},prepare:Ms()},removeLegendPayload:{reducer(e,t){var n=yf(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:Ms()}}}),{setLegendSize:A5,setLegendSettings:bte,addLegendPayload:xte,replaceLegendPayload:wte,removeLegendPayload:Cte}=XB.actions,_te=XB.reducer,Ste=["contextPayload"];function VT(){return VT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},VT.apply(null,arguments)}function T5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function Jb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?T5(Object(n),!0).forEach(function(i){Ete(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Ete(e,t,n){return(t=Rte(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rte(e){var t=Ate(e,"string");return typeof t=="symbol"?t:t+""}function Ate(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tte(e,t){if(e==null)return{};var n,i,r=kte(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function kte(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function Pte(e){return e.value}function Dte(e){var{contextPayload:t}=e,n=Tte(e,Ste),i=tB(t,e.payloadUniqBy,Pte),r=Jb(Jb({},n),{},{payload:i});return I.isValidElement(e.content)?I.cloneElement(e.content,r):typeof e.content=="function"?I.createElement(e.content,r):I.createElement(gJ,r)}function Fte(e,t,n,i,r,o){var{layout:s,align:a,verticalAlign:d}=t,h,m;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(a==="center"&&s==="vertical"?h={left:((i||0)-o.width)/2}:h=a==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(d==="middle"?m={top:((r||0)-o.height)/2}:m=d==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Jb(Jb({},h),m)}function Mte(e){var t=Zs();return I.useEffect(()=>{t(bte(e))},[t,e]),null}function Ite(e){var t=Zs();return I.useEffect(()=>(t(A5(e)),()=>{t(A5({width:0,height:0}))}),[t,e]),null}function Lte(e,t,n,i){return e==="vertical"&&fi(t)?{height:t}:e==="horizontal"?{width:n||i}:null}var Ote={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function JB(e){var t=zl(e,Ote),n=uQ(),i=aX(),r=rte(),{width:o,height:s,wrapperStyle:a,portal:d}=t,[h,m]=sB([n]),v=VB(),w=$B();if(v==null||w==null)return null;var R=v-((r==null?void 0:r.left)||0)-((r==null?void 0:r.right)||0),L=Lte(t.layout,s,o,R),O=d?a:Jb(Jb({position:"absolute",width:(L==null?void 0:L.width)||o||"auto",height:(L==null?void 0:L.height)||s||"auto"},Fte(a,t,r,v,w,h)),a),z=d??i;if(z==null||n==null)return null;var $=I.createElement("div",{className:"recharts-legend-wrapper",style:O,ref:m},I.createElement(Mte,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!d&&I.createElement(Ite,{width:h.width,height:h.height}),I.createElement(Dte,VT({},t,L,{margin:r,chartWidth:v,chartHeight:w,contextPayload:n})));return b0.createPortal($,z)}JB.displayName="Legend";function $T(){return $T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},$T.apply(null,arguments)}function k5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function VR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?k5(Object(n),!0).forEach(function(i){zte(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function zte(e,t,n){return(t=Nte(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nte(e){var t=Bte(e,"string");return typeof t=="symbol"?t:t+""}function Bte(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gte(e){return Array.isArray(e)&&Lp(e[0])&&Lp(e[1])?e.join(" ~ "):e}var jte=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:i={},labelStyle:r={},payload:o,formatter:s,itemSorter:a,wrapperClassName:d,labelClassName:h,label:m,labelFormatter:v,accessibilityLayer:w=!1}=e,R=()=>{if(o&&o.length){var q={padding:0,margin:0},ie=(a?a2(o,a):o).map((re,J)=>{if(re.type==="none")return null;var ne=re.formatter||s||Gte,{value:be,name:ue}=re,ve=be,ce=ue;if(ne){var Ie=ne(be,ue,re,J,o);if(Array.isArray(Ie))[ve,ce]=Ie;else if(Ie!=null)ve=Ie;else return null}var Te=VR({display:"block",paddingTop:4,paddingBottom:4,color:re.color||"#000"},i);return I.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(J),style:Te},Lp(ce)?I.createElement("span",{className:"recharts-tooltip-item-name"},ce):null,Lp(ce)?I.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,I.createElement("span",{className:"recharts-tooltip-item-value"},ve),I.createElement("span",{className:"recharts-tooltip-item-unit"},re.unit||""))});return I.createElement("ul",{className:"recharts-tooltip-item-list",style:q},ie)}return null},L=VR({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),O=VR({margin:0},r),z=!bs(m),$=z?m:"",U=Fo("recharts-default-tooltip",d),Y=Fo("recharts-tooltip-label",h);z&&v&&o!==void 0&&o!==null&&($=v(m,o));var X=w?{role:"status","aria-live":"assertive"}:{};return I.createElement("div",$T({className:U,style:L},X),I.createElement("p",{className:Y,style:O},I.isValidElement($)?$:"".concat($)),R())},nw="recharts-tooltip-wrapper",Hte={visibility:"hidden"};function Vte(e){var{coordinate:t,translateX:n,translateY:i}=e;return Fo(nw,{["".concat(nw,"-right")]:fi(n)&&t&&fi(t.x)&&n>=t.x,["".concat(nw,"-left")]:fi(n)&&t&&fi(t.x)&&n<t.x,["".concat(nw,"-bottom")]:fi(i)&&t&&fi(t.y)&&i>=t.y,["".concat(nw,"-top")]:fi(i)&&t&&fi(t.y)&&i<t.y})}function P5(e){var{allowEscapeViewBox:t,coordinate:n,key:i,offsetTopLeft:r,position:o,reverseDirection:s,tooltipDimension:a,viewBox:d,viewBoxDimension:h}=e;if(o&&fi(o[i]))return o[i];var m=n[i]-a-(r>0?r:0),v=n[i]+r;if(t[i])return s[i]?m:v;var w=d[i];if(w==null)return 0;if(s[i]){var R=m,L=w;return R<L?Math.max(v,w):Math.max(m,w)}if(h==null)return 0;var O=v+a,z=w+h;return O>z?Math.max(m,w):Math.max(v,w)}function $te(e){var{translateX:t,translateY:n,useTranslate3d:i}=e;return{transform:i?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function Wte(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:i,position:r,reverseDirection:o,tooltipBox:s,useTranslate3d:a,viewBox:d}=e,h,m,v;return s.height>0&&s.width>0&&n?(m=P5({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:i,position:r,reverseDirection:o,tooltipDimension:s.width,viewBox:d,viewBoxDimension:d.width}),v=P5({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:i,position:r,reverseDirection:o,tooltipDimension:s.height,viewBox:d,viewBoxDimension:d.height}),h=$te({translateX:m,translateY:v,useTranslate3d:a})):h=Hte,{cssProperties:h,cssClasses:Vte({translateX:m,translateY:v,coordinate:n})}}function D5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function EC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?D5(Object(n),!0).forEach(function(i){WT(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function WT(e,t,n){return(t=Ute(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ute(e){var t=qte(e,"string");return typeof t=="symbol"?t:t+""}function qte(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Kte extends I.PureComponent{constructor(){super(...arguments),WT(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),WT(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,i,r,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==null&&n!==void 0?n:0,y:(r=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&r!==void 0?r:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:i,animationEasing:r,children:o,coordinate:s,hasPayload:a,isAnimationActive:d,offset:h,position:m,reverseDirection:v,useTranslate3d:w,viewBox:R,wrapperStyle:L,lastBoundingBox:O,innerRef:z,hasPortalFromProps:$}=this.props,{cssClasses:U,cssProperties:Y}=Wte({allowEscapeViewBox:n,coordinate:s,offsetTopLeft:h,position:m,reverseDirection:v,tooltipBox:{height:O.height,width:O.width},useTranslate3d:w,viewBox:R}),X=$?{}:EC(EC({transition:d&&t?"transform ".concat(i,"ms ").concat(r):void 0},Y),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&a?"visible":"hidden",position:"absolute",top:0,left:0}),q=EC(EC({},X),{},{visibility:!this.state.dismissed&&t&&a?"visible":"hidden"},L);return I.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:U,style:q,ref:z},o)}}var QB=()=>{var e;return(e=bi(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function UT(){return UT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},UT.apply(null,arguments)}function F5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function M5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?F5(Object(n),!0).forEach(function(i){Zte(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Zte(e,t,n){return(t=Yte(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yte(e){var t=Xte(e,"string");return typeof t=="symbol"?t:t+""}function Xte(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var I5={curveBasisClosed:RX,curveBasisOpen:AX,curveBasis:EX,curveBumpX:dX,curveBumpY:hX,curveLinearClosed:TX,curveLinear:r2,curveMonotoneX:kX,curveMonotoneY:PX,curveNatural:DX,curveStep:FX,curveStepAfter:IX,curveStepBefore:MX},W_=e=>ws(e.x)&&ws(e.y),L5=e=>e.base!=null&&W_(e.base)&&W_(e),iw=e=>e.x,rw=e=>e.y,Jte=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(C1(e));return(n==="curveMonotone"||n==="curveBump")&&t?I5["".concat(n).concat(t==="vertical"?"Y":"X")]:I5[n]||r2},Qte=e=>{var{type:t="linear",points:n=[],baseLine:i,layout:r,connectNulls:o=!1}=e,s=Jte(t,r),a=o?n.filter(W_):n,d;if(Array.isArray(i)){var h=n.map((R,L)=>M5(M5({},R),{},{base:i[L]}));r==="vertical"?d=yC().y(rw).x1(iw).x0(R=>R.base.x):d=yC().x(iw).y1(rw).y0(R=>R.base.y);var m=d.defined(L5).curve(s),v=o?h.filter(L5):h;return m(v)}r==="vertical"&&fi(i)?d=yC().y(rw).x1(iw).x0(i):fi(i)?d=yC().x(iw).y1(rw).y0(i):d=PN().x(iw).y(rw);var w=d.defined(W_).curve(s);return w(a)},Ew=e=>{var{className:t,points:n,path:i,pathRef:r}=e;if((!n||!n.length)&&!i)return null;var o=n&&n.length?Qte(e):i;return I.createElement("path",UT({},xh(e),GP(e),{className:Fo("recharts-curve",t),d:o===null?void 0:o,ref:r}))},ene=["x","y","top","left","width","height","className"];function qT(){return qT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},qT.apply(null,arguments)}function O5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function tne(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?O5(Object(n),!0).forEach(function(i){nne(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function nne(e,t,n){return(t=ine(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ine(e){var t=rne(e,"string");return typeof t=="symbol"?t:t+""}function rne(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function one(e,t){if(e==null)return{};var n,i,r=sne(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function sne(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}var ane=(e,t,n,i,r,o)=>"M".concat(e,",").concat(r,"v").concat(i,"M").concat(o,",").concat(t,"h").concat(n),lne=e=>{var{x:t=0,y:n=0,top:i=0,left:r=0,width:o=0,height:s=0,className:a}=e,d=one(e,ene),h=tne({x:t,y:n,top:i,left:r,width:o,height:s},d);return!fi(t)||!fi(n)||!fi(o)||!fi(s)||!fi(i)||!fi(r)?null:I.createElement("path",qT({},Tu(h),{className:Fo("recharts-cross",a),d:ane(t,n,o,s,i,r)}))};function une(e,t,n,i){var r=i/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-r:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-r,width:e==="horizontal"?i:n.width-1,height:e==="horizontal"?n.height-1:i}}function z5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function N5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?z5(Object(n),!0).forEach(function(i){cne(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function cne(e,t,n){return(t=dne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dne(e){var t=hne(e,"string");return typeof t=="symbol"?t:t+""}function hne(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fne=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),e8=(e,t,n)=>e.map(i=>"".concat(fne(i)," ").concat(t,"ms ").concat(n)).join(","),pne=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,i)=>n.filter(r=>i.includes(r))),Kw=(e,t)=>Object.keys(t).reduce((n,i)=>N5(N5({},n),{},{[i]:e(i,t[i])}),{});function B5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function rl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?B5(Object(n),!0).forEach(function(i){gne(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function gne(e,t,n){return(t=mne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mne(e){var t=yne(e,"string");return typeof t=="symbol"?t:t+""}function yne(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var U_=(e,t,n)=>e+(t-e)*n,KT=e=>{var{from:t,to:n}=e;return t!==n},t8=(e,t,n)=>{var i=Kw((r,o)=>{if(KT(o)){var[s,a]=e(o.from,o.to,o.velocity);return rl(rl({},o),{},{from:s,velocity:a})}return o},t);return n<1?Kw((r,o)=>KT(o)?rl(rl({},o),{},{velocity:U_(o.velocity,i[r].velocity,n),from:U_(o.from,i[r].from,n)}):o,t):t8(e,i,n-1)};function vne(e,t,n,i,r,o){var s,a=i.reduce((w,R)=>rl(rl({},w),{},{[R]:{from:e[R],velocity:0,to:t[R]}}),{}),d=()=>Kw((w,R)=>R.from,a),h=()=>!Object.values(a).filter(KT).length,m=null,v=w=>{s||(s=w);var R=w-s,L=R/n.dt;a=t8(n,a,L),r(rl(rl(rl({},e),t),d())),s=w,h()||(m=o.setTimeout(v))};return()=>(m=o.setTimeout(v),()=>{var w;(w=m)===null||w===void 0||w()})}function bne(e,t,n,i,r,o,s){var a=null,d=r.reduce((v,w)=>rl(rl({},v),{},{[w]:[e[w],t[w]]}),{}),h,m=v=>{h||(h=v);var w=(v-h)/i,R=Kw((O,z)=>U_(...z,n(w)),d);if(o(rl(rl(rl({},e),t),R)),w<1)a=s.setTimeout(m);else{var L=Kw((O,z)=>U_(...z,n(1)),d);o(rl(rl(rl({},e),t),L))}};return()=>(a=s.setTimeout(m),()=>{var v;(v=a)===null||v===void 0||v()})}const xne=(e,t,n,i,r,o)=>{var s=pne(e,t);return n==null?()=>(r(rl(rl({},e),t)),()=>{}):n.isStepper===!0?vne(e,t,n,s,r,o):bne(e,t,n,i,s,r,o)};var q_=1e-4,n8=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],i8=(e,t)=>e.map((n,i)=>n*t**i).reduce((n,i)=>n+i),G5=(e,t)=>n=>{var i=n8(e,t);return i8(i,n)},wne=(e,t)=>n=>{var i=n8(e,t),r=[...i.map((o,s)=>o*s).slice(1),0];return i8(r,n)},Cne=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var r,o=n[0].split("(");if(o[0]==="cubic-bezier"&&((r=o[1])===null||r===void 0?void 0:r.split(")")[0].split(",").length)===4){var s=o[1].split(")")[0].split(",").map(a=>parseFloat(a));return[s[0],s[1],s[2],s[3]]}}}return n.length===4?n:[0,0,1,1]},_ne=(e,t,n,i)=>{var r=G5(e,n),o=G5(t,i),s=wne(e,n),a=h=>h>1?1:h<0?0:h,d=h=>{for(var m=h>1?1:h,v=m,w=0;w<8;++w){var R=r(v)-m,L=s(v);if(Math.abs(R-m)<q_||L<q_)return o(v);v=a(v-R/L)}return o(v)};return d.isStepper=!1,d},j5=function(){return _ne(...Cne(...arguments))},Sne=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:i=8,dt:r=17}=t,o=(s,a,d)=>{var h=-(s-a)*n,m=d*i,v=d+(h-m)*r/1e3,w=d*r/1e3+s;return Math.abs(w-a)<q_&&Math.abs(v)<q_?[a,0]:[w,v]};return o.isStepper=!0,o.dt=r,o},Ene=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return j5(e);case"spring":return Sne();default:if(e.split("(")[0]==="cubic-bezier")return j5(e)}return typeof e=="function"?e:null};function Rne(e){var t,n=()=>null,i=!1,r=null,o=s=>{if(!i){if(Array.isArray(s)){if(!s.length)return;var a=s,[d,...h]=a;if(typeof d=="number"){r=e.setTimeout(o.bind(null,h),d);return}o(d),r=e.setTimeout(o.bind(null,h));return}typeof s=="string"&&(t=s,n(t)),typeof s=="object"&&(t=s,n(t)),typeof s=="function"&&s()}};return{stop:()=>{i=!0},start:s=>{i=!1,r&&(r(),r=null),o(s)},subscribe:s=>(n=s,()=>{n=()=>null}),getTimeoutController:()=>e}}class Ane{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=performance.now(),r=null,o=s=>{s-i>=n?t(s):typeof requestAnimationFrame=="function"&&(r=requestAnimationFrame(o))};return r=requestAnimationFrame(o),()=>{r!=null&&cancelAnimationFrame(r)}}}function Tne(){return Rne(new Ane)}var kne=I.createContext(Tne);function Pne(e,t){var n=I.useContext(kne);return I.useMemo(()=>t??n(e),[e,t,n])}var Dne=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),xx={devToolsEnabled:!1,isSsr:Dne()},Fne={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},H5={t:0},$R={t:1};function k1(e){var t=zl(e,Fne),{isActive:n,canBegin:i,duration:r,easing:o,begin:s,onAnimationEnd:a,onAnimationStart:d,children:h}=t,m=n==="auto"?!xx.isSsr:n,v=Pne(t.animationId,t.animationManager),[w,R]=I.useState(m?H5:$R),L=I.useRef(null);return I.useEffect(()=>{m||R($R)},[m]),I.useEffect(()=>{if(!m||!i)return _1;var O=xne(H5,$R,Ene(o),r,R,v.getTimeoutController()),z=()=>{L.current=O()};return v.start([d,s,z,r,a]),()=>{v.stop(),L.current&&L.current(),a()}},[m,i,r,o,s,d,a,v]),h(w.t)}function P1(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=I.useRef(jw(t)),i=I.useRef(e);return i.current!==e&&(n.current=jw(t),i.current=e),n.current}var Mne=["radius"],Ine=["radius"];function V5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function $5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?V5(Object(n),!0).forEach(function(i){Lne(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Lne(e,t,n){return(t=One(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function One(e){var t=zne(e,"string");return typeof t=="symbol"?t:t+""}function zne(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K_(){return K_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},K_.apply(null,arguments)}function W5(e,t){if(e==null)return{};var n,i,r=Nne(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Nne(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}var U5=(e,t,n,i,r)=>{var o=Math.min(Math.abs(n)/2,Math.abs(i)/2),s=i>=0?1:-1,a=n>=0?1:-1,d=i>=0&&n>=0||i<0&&n<0?1:0,h;if(o>0&&r instanceof Array){for(var m=[0,0,0,0],v=0,w=4;v<w;v++)m[v]=r[v]>o?o:r[v];h="M".concat(e,",").concat(t+s*m[0]),m[0]>0&&(h+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(d,",").concat(e+a*m[0],",").concat(t)),h+="L ".concat(e+n-a*m[1],",").concat(t),m[1]>0&&(h+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(d,`,
        `).concat(e+n,",").concat(t+s*m[1])),h+="L ".concat(e+n,",").concat(t+i-s*m[2]),m[2]>0&&(h+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(d,`,
        `).concat(e+n-a*m[2],",").concat(t+i)),h+="L ".concat(e+a*m[3],",").concat(t+i),m[3]>0&&(h+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+i-s*m[3])),h+="Z"}else if(o>0&&r===+r&&r>0){var R=Math.min(o,r);h="M ".concat(e,",").concat(t+s*R,`
            A `).concat(R,",").concat(R,",0,0,").concat(d,",").concat(e+a*R,",").concat(t,`
            L `).concat(e+n-a*R,",").concat(t,`
            A `).concat(R,",").concat(R,",0,0,").concat(d,",").concat(e+n,",").concat(t+s*R,`
            L `).concat(e+n,",").concat(t+i-s*R,`
            A `).concat(R,",").concat(R,",0,0,").concat(d,",").concat(e+n-a*R,",").concat(t+i,`
            L `).concat(e+a*R,",").concat(t+i,`
            A `).concat(R,",").concat(R,",0,0,").concat(d,",").concat(e,",").concat(t+i-s*R," Z")}else h="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return h},q5={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},r8=e=>{var t=zl(e,q5),n=I.useRef(null),[i,r]=I.useState(-1);I.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var he=n.current.getTotalLength();he&&r(he)}catch{}},[]);var{x:o,y:s,width:a,height:d,radius:h,className:m}=t,{animationEasing:v,animationDuration:w,animationBegin:R,isAnimationActive:L,isUpdateAnimationActive:O}=t,z=I.useRef(a),$=I.useRef(d),U=I.useRef(o),Y=I.useRef(s),X=I.useMemo(()=>({x:o,y:s,width:a,height:d,radius:h}),[o,s,a,d,h]),q=P1(X,"rectangle-");if(o!==+o||s!==+s||a!==+a||d!==+d||a===0||d===0)return null;var ie=Fo("recharts-rectangle",m);if(!O){var re=Tu(t),{radius:J}=re,ne=W5(re,Mne);return I.createElement("path",K_({},ne,{radius:typeof h=="number"?h:void 0,className:ie,d:U5(o,s,a,d,h)}))}var be=z.current,ue=$.current,ve=U.current,ce=Y.current,Ie="0px ".concat(i===-1?1:i,"px"),Te="".concat(i,"px 0px"),fe=e8(["strokeDasharray"],w,typeof v=="string"?v:q5.animationEasing);return I.createElement(k1,{animationId:q,key:q,canBegin:i>0,duration:w,easing:v,isActive:O,begin:R},he=>{var Re=Vo(be,a,he),De=Vo(ue,d,he),Ye=Vo(ve,o,he),_e=Vo(ce,s,he);n.current&&(z.current=Re,$.current=De,U.current=Ye,Y.current=_e);var Le;L?he>0?Le={transition:fe,strokeDasharray:Te}:Le={strokeDasharray:Ie}:Le={strokeDasharray:Te};var Oe=Tu(t),{radius:yt}=Oe,xt=W5(Oe,Ine);return I.createElement("path",K_({},xt,{radius:typeof h=="number"?h:void 0,className:ie,d:U5(Ye,_e,Re,De,h),ref:n,style:$5($5({},Le),t.style)}))})};function K5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function Z5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?K5(Object(n),!0).forEach(function(i){Bne(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Bne(e,t,n){return(t=Gne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gne(e){var t=jne(e,"string");return typeof t=="symbol"?t:t+""}function jne(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Z_=Math.PI/180,Hne=e=>e*180/Math.PI,au=(e,t,n,i)=>({x:e+Math.cos(-Z_*i)*n,y:t+Math.sin(-Z_*i)*n}),Vne=function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(i.left||0)-(i.right||0)),Math.abs(n-(i.top||0)-(i.bottom||0)))/2},$ne=(e,t)=>{var{x:n,y:i}=e,{x:r,y:o}=t;return Math.sqrt((n-r)**2+(i-o)**2)},Wne=(e,t)=>{var{x:n,y:i}=e,{cx:r,cy:o}=t,s=$ne({x:n,y:i},{x:r,y:o});if(s<=0)return{radius:s,angle:0};var a=(n-r)/s,d=Math.acos(a);return i>o&&(d=2*Math.PI-d),{radius:s,angle:Hne(d),angleInRadian:d}},Une=e=>{var{startAngle:t,endAngle:n}=e,i=Math.floor(t/360),r=Math.floor(n/360),o=Math.min(i,r);return{startAngle:t-o*360,endAngle:n-o*360}},qne=(e,t)=>{var{startAngle:n,endAngle:i}=t,r=Math.floor(n/360),o=Math.floor(i/360),s=Math.min(r,o);return e+s*360},Kne=(e,t)=>{var{chartX:n,chartY:i}=e,{radius:r,angle:o}=Wne({x:n,y:i},t),{innerRadius:s,outerRadius:a}=t;if(r<s||r>a||r===0)return null;var{startAngle:d,endAngle:h}=Une(t),m=o,v;if(d<=h){for(;m>h;)m-=360;for(;m<d;)m+=360;v=m>=d&&m<=h}else{for(;m>d;)m-=360;for(;m<h;)m+=360;v=m>=h&&m<=d}return v?Z5(Z5({},t),{},{radius:r,angle:qne(m,t)}):null};function o8(e){var{cx:t,cy:n,radius:i,startAngle:r,endAngle:o}=e,s=au(t,n,i,r),a=au(t,n,i,o);return{points:[s,a],cx:t,cy:n,radius:i,startAngle:r,endAngle:o}}function ZT(){return ZT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ZT.apply(null,arguments)}var Zne=(e,t)=>{var n=_d(t-e),i=Math.min(Math.abs(t-e),359.999);return n*i},RC=e=>{var{cx:t,cy:n,radius:i,angle:r,sign:o,isExternal:s,cornerRadius:a,cornerIsExternal:d}=e,h=a*(s?1:-1)+i,m=Math.asin(a/h)/Z_,v=d?r:r+o*m,w=au(t,n,h,v),R=au(t,n,i,v),L=d?r-o*m:r,O=au(t,n,h*Math.cos(m*Z_),L);return{center:w,circleTangency:R,lineTangency:O,theta:m}},s8=e=>{var{cx:t,cy:n,innerRadius:i,outerRadius:r,startAngle:o,endAngle:s}=e,a=Zne(o,s),d=o+a,h=au(t,n,r,o),m=au(t,n,r,d),v="M ".concat(h.x,",").concat(h.y,`
    A `).concat(r,",").concat(r,`,0,
    `).concat(+(Math.abs(a)>180),",").concat(+(o>d),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(i>0){var w=au(t,n,i,o),R=au(t,n,i,d);v+="L ".concat(R.x,",").concat(R.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(a)>180),",").concat(+(o<=d),`,
            `).concat(w.x,",").concat(w.y," Z")}else v+="L ".concat(t,",").concat(n," Z");return v},Yne=e=>{var{cx:t,cy:n,innerRadius:i,outerRadius:r,cornerRadius:o,forceCornerRadius:s,cornerIsExternal:a,startAngle:d,endAngle:h}=e,m=_d(h-d),{circleTangency:v,lineTangency:w,theta:R}=RC({cx:t,cy:n,radius:r,angle:d,sign:m,cornerRadius:o,cornerIsExternal:a}),{circleTangency:L,lineTangency:O,theta:z}=RC({cx:t,cy:n,radius:r,angle:h,sign:-m,cornerRadius:o,cornerIsExternal:a}),$=a?Math.abs(d-h):Math.abs(d-h)-R-z;if($<0)return s?"M ".concat(w.x,",").concat(w.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):s8({cx:t,cy:n,innerRadius:i,outerRadius:r,startAngle:d,endAngle:h});var U="M ".concat(w.x,",").concat(w.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(r,",").concat(r,",0,").concat(+($>180),",").concat(+(m<0),",").concat(L.x,",").concat(L.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(O.x,",").concat(O.y,`
  `);if(i>0){var{circleTangency:Y,lineTangency:X,theta:q}=RC({cx:t,cy:n,radius:i,angle:d,sign:m,isExternal:!0,cornerRadius:o,cornerIsExternal:a}),{circleTangency:ie,lineTangency:re,theta:J}=RC({cx:t,cy:n,radius:i,angle:h,sign:-m,isExternal:!0,cornerRadius:o,cornerIsExternal:a}),ne=a?Math.abs(d-h):Math.abs(d-h)-q-J;if(ne<0&&o===0)return"".concat(U,"L").concat(t,",").concat(n,"Z");U+="L".concat(re.x,",").concat(re.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(ie.x,",").concat(ie.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(ne>180),",").concat(+(m>0),",").concat(Y.x,",").concat(Y.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(X.x,",").concat(X.y,"Z")}else U+="L".concat(t,",").concat(n,"Z");return U},Xne={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},a8=e=>{var t=zl(e,Xne),{cx:n,cy:i,innerRadius:r,outerRadius:o,cornerRadius:s,forceCornerRadius:a,cornerIsExternal:d,startAngle:h,endAngle:m,className:v}=t;if(o<r||h===m)return null;var w=Fo("recharts-sector",v),R=o-r,L=xf(s,R,0,!0),O;return L>0&&Math.abs(h-m)<360?O=Yne({cx:n,cy:i,innerRadius:r,outerRadius:o,cornerRadius:Math.min(L,R/2),forceCornerRadius:a,cornerIsExternal:d,startAngle:h,endAngle:m}):O=s8({cx:n,cy:i,innerRadius:r,outerRadius:o,startAngle:h,endAngle:m}),I.createElement("path",ZT({},Tu(t),{className:w,d:O}))};function Jne(e,t,n){if(e==="horizontal")return[{x:t.x,y:n.top},{x:t.x,y:n.top+n.height}];if(e==="vertical")return[{x:n.left,y:t.y},{x:n.left+n.width,y:t.y}];if(WN(t)){if(e==="centric"){var{cx:i,cy:r,innerRadius:o,outerRadius:s,angle:a}=t,d=au(i,r,o,a),h=au(i,r,s,a);return[{x:d.x,y:d.y},{x:h.x,y:h.y}]}return o8(t)}}var WR={},UR={},qR={},Y5;function Qne(){return Y5||(Y5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iB();function n(i){return t.isSymbol(i)?NaN:Number(i)}e.toNumber=n})(qR)),qR}var X5;function eie(){return X5||(X5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qne();function n(i){return i?(i=t.toNumber(i),i===1/0||i===-1/0?(i<0?-1:1)*Number.MAX_VALUE:i===i?i:0):i===0?i:0}e.toFinite=n})(UR)),UR}var J5;function tie(){return J5||(J5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rB(),n=eie();function i(r,o,s){s&&typeof s!="number"&&t.isIterateeCall(r,o,s)&&(o=s=void 0),r=n.toFinite(r),o===void 0?(o=r,r=0):o=n.toFinite(o),s=s===void 0?r<o?1:-1:n.toFinite(s);const a=Math.max(Math.ceil((o-r)/(s||1)),0),d=new Array(a);for(let h=0;h<a;h++)d[h]=r,r+=s;return d}e.range=i})(WR)),WR}var KR,Q5;function nie(){return Q5||(Q5=1,KR=tie().range),KR}var iie=nie();const l8=Ol(iie);function Ty(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function rie(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function tD(e){let t,n,i;e.length!==2?(t=Ty,n=(a,d)=>Ty(e(a),d),i=(a,d)=>e(a)-d):(t=e===Ty||e===rie?e:oie,n=e,i=e);function r(a,d,h=0,m=a.length){if(h<m){if(t(d,d)!==0)return m;do{const v=h+m>>>1;n(a[v],d)<0?h=v+1:m=v}while(h<m)}return h}function o(a,d,h=0,m=a.length){if(h<m){if(t(d,d)!==0)return m;do{const v=h+m>>>1;n(a[v],d)<=0?h=v+1:m=v}while(h<m)}return h}function s(a,d,h=0,m=a.length){const v=r(a,d,h,m-1);return v>h&&i(a[v-1],d)>-i(a[v],d)?v-1:v}return{left:r,center:s,right:o}}function oie(){return 0}function u8(e){return e===null?NaN:+e}function*sie(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const aie=tD(Ty),D1=aie.right;tD(u8).center;class eO extends Map{constructor(t,n=cie){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(tO(this,t))}has(t){return super.has(tO(this,t))}set(t,n){return super.set(lie(this,t),n)}delete(t){return super.delete(uie(this,t))}}function tO({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function lie({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function uie({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function cie(e){return e!==null&&typeof e=="object"?e.valueOf():e}function die(e=Ty){if(e===Ty)return c8;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function c8(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const hie=Math.sqrt(50),fie=Math.sqrt(10),pie=Math.sqrt(2);function Y_(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),s=o>=hie?10:o>=fie?5:o>=pie?2:1;let a,d,h;return r<0?(h=Math.pow(10,-r)/s,a=Math.round(e*h),d=Math.round(t*h),a/h<e&&++a,d/h>t&&--d,h=-h):(h=Math.pow(10,r)*s,a=Math.round(e/h),d=Math.round(t/h),a*h<e&&++a,d*h>t&&--d),d<a&&.5<=n&&n<2?Y_(e,t,n*2):[a,d,h]}function YT(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[r,o,s]=i?Y_(t,e,n):Y_(e,t,n);if(!(o>=r))return[];const a=o-r+1,d=new Array(a);if(i)if(s<0)for(let h=0;h<a;++h)d[h]=(o-h)/-s;else for(let h=0;h<a;++h)d[h]=(o-h)*s;else if(s<0)for(let h=0;h<a;++h)d[h]=(r+h)/-s;else for(let h=0;h<a;++h)d[h]=(r+h)*s;return d}function XT(e,t,n){return t=+t,e=+e,n=+n,Y_(e,t,n)[2]}function JT(e,t,n){t=+t,e=+e,n=+n;const i=t<e,r=i?XT(t,e,n):XT(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function nO(e,t){let n;for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);return n}function iO(e,t){let n;for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);return n}function d8(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=r===void 0?c8:die(r);i>n;){if(i-n>600){const d=i-n+1,h=t-n+1,m=Math.log(d),v=.5*Math.exp(2*m/3),w=.5*Math.sqrt(m*v*(d-v)/d)*(h-d/2<0?-1:1),R=Math.max(n,Math.floor(t-h*v/d+w)),L=Math.min(i,Math.floor(t+(d-h)*v/d+w));d8(e,t,R,L,r)}const o=e[t];let s=n,a=i;for(ow(e,n,t),r(e[i],o)>0&&ow(e,n,i);s<a;){for(ow(e,s,a),++s,--a;r(e[s],o)<0;)++s;for(;r(e[a],o)>0;)--a}r(e[n],o)===0?ow(e,n,a):(++a,ow(e,a,i)),a<=t&&(n=a+1),t<=a&&(i=a-1)}return e}function ow(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function gie(e,t,n){if(e=Float64Array.from(sie(e)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return iO(e);if(t>=1)return nO(e);var i,r=(i-1)*t,o=Math.floor(r),s=nO(d8(e,o).subarray(0,o+1)),a=iO(e.subarray(o+1));return s+(a-s)*(r-o)}}function mie(e,t,n=u8){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,o=Math.floor(r),s=+n(e[o],o,e),a=+n(e[o+1],o+1,e);return s+(a-s)*(r-o)}}function yie(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(r);++i<r;)o[i]=e+i*n;return o}function Th(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function xm(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const QT=Symbol("implicit");function nD(){var e=new eO,t=[],n=[],i=QT;function r(o){let s=e.get(o);if(s===void 0){if(i!==QT)return i;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return r.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new eO;for(const s of o)e.has(s)||e.set(s,t.push(s)-1);return r},r.range=function(o){return arguments.length?(n=Array.from(o),r):n.slice()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.copy=function(){return nD(t,n).unknown(i)},Th.apply(r,arguments),r}function iD(){var e=nD().unknown(void 0),t=e.domain,n=e.range,i=0,r=1,o,s,a=!1,d=0,h=0,m=.5;delete e.unknown;function v(){var w=t().length,R=r<i,L=R?r:i,O=R?i:r;o=(O-L)/Math.max(1,w-d+h*2),a&&(o=Math.floor(o)),L+=(O-L-o*(w-d))*m,s=o*(1-d),a&&(L=Math.round(L),s=Math.round(s));var z=yie(w).map(function($){return L+o*$});return n(R?z.reverse():z)}return e.domain=function(w){return arguments.length?(t(w),v()):t()},e.range=function(w){return arguments.length?([i,r]=w,i=+i,r=+r,v()):[i,r]},e.rangeRound=function(w){return[i,r]=w,i=+i,r=+r,a=!0,v()},e.bandwidth=function(){return s},e.step=function(){return o},e.round=function(w){return arguments.length?(a=!!w,v()):a},e.padding=function(w){return arguments.length?(d=Math.min(1,h=+w),v()):d},e.paddingInner=function(w){return arguments.length?(d=Math.min(1,w),v()):d},e.paddingOuter=function(w){return arguments.length?(h=+w,v()):h},e.align=function(w){return arguments.length?(m=Math.max(0,Math.min(1,w)),v()):m},e.copy=function(){return iD(t(),[i,r]).round(a).paddingInner(d).paddingOuter(h).align(m)},Th.apply(v(),arguments)}function h8(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return h8(t())},e}function vie(){return h8(iD.apply(null,arguments).paddingInner(1))}function rD(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function f8(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function F1(){}var Zw=.7,X_=1/Zw,kb="\\s*([+-]?\\d+)\\s*",Yw="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bie=/^#([0-9a-f]{3,8})$/,xie=new RegExp(`^rgb\\(${kb},${kb},${kb}\\)$`),wie=new RegExp(`^rgb\\(${Fp},${Fp},${Fp}\\)$`),Cie=new RegExp(`^rgba\\(${kb},${kb},${kb},${Yw}\\)$`),_ie=new RegExp(`^rgba\\(${Fp},${Fp},${Fp},${Yw}\\)$`),Sie=new RegExp(`^hsl\\(${Yw},${Fp},${Fp}\\)$`),Eie=new RegExp(`^hsla\\(${Yw},${Fp},${Fp},${Yw}\\)$`),rO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rD(F1,Xw,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:oO,formatHex:oO,formatHex8:Rie,formatHsl:Aie,formatRgb:sO,toString:sO});function oO(){return this.rgb().formatHex()}function Rie(){return this.rgb().formatHex8()}function Aie(){return p8(this).formatHsl()}function sO(){return this.rgb().formatRgb()}function Xw(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=bie.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?aO(t):n===3?new zc(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?AC(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?AC(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=xie.exec(e))?new zc(t[1],t[2],t[3],1):(t=wie.exec(e))?new zc(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Cie.exec(e))?AC(t[1],t[2],t[3],t[4]):(t=_ie.exec(e))?AC(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Sie.exec(e))?cO(t[1],t[2]/100,t[3]/100,1):(t=Eie.exec(e))?cO(t[1],t[2]/100,t[3]/100,t[4]):rO.hasOwnProperty(e)?aO(rO[e]):e==="transparent"?new zc(NaN,NaN,NaN,0):null}function aO(e){return new zc(e>>16&255,e>>8&255,e&255,1)}function AC(e,t,n,i){return i<=0&&(e=t=n=NaN),new zc(e,t,n,i)}function Tie(e){return e instanceof F1||(e=Xw(e)),e?(e=e.rgb(),new zc(e.r,e.g,e.b,e.opacity)):new zc}function ek(e,t,n,i){return arguments.length===1?Tie(e):new zc(e,t,n,i??1)}function zc(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}rD(zc,ek,f8(F1,{brighter(e){return e=e==null?X_:Math.pow(X_,e),new zc(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Zw:Math.pow(Zw,e),new zc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new zc(Zv(this.r),Zv(this.g),Zv(this.b),J_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:lO,formatHex:lO,formatHex8:kie,formatRgb:uO,toString:uO}));function lO(){return`#${Wv(this.r)}${Wv(this.g)}${Wv(this.b)}`}function kie(){return`#${Wv(this.r)}${Wv(this.g)}${Wv(this.b)}${Wv((isNaN(this.opacity)?1:this.opacity)*255)}`}function uO(){const e=J_(this.opacity);return`${e===1?"rgb(":"rgba("}${Zv(this.r)}, ${Zv(this.g)}, ${Zv(this.b)}${e===1?")":`, ${e})`}`}function J_(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Zv(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Wv(e){return e=Zv(e),(e<16?"0":"")+e.toString(16)}function cO(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new gf(e,t,n,i)}function p8(e){if(e instanceof gf)return new gf(e.h,e.s,e.l,e.opacity);if(e instanceof F1||(e=Xw(e)),!e)return new gf;if(e instanceof gf)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),o=Math.max(t,n,i),s=NaN,a=o-r,d=(o+r)/2;return a?(t===o?s=(n-i)/a+(n<i)*6:n===o?s=(i-t)/a+2:s=(t-n)/a+4,a/=d<.5?o+r:2-o-r,s*=60):a=d>0&&d<1?0:s,new gf(s,a,d,e.opacity)}function Pie(e,t,n,i){return arguments.length===1?p8(e):new gf(e,t,n,i??1)}function gf(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}rD(gf,Pie,f8(F1,{brighter(e){return e=e==null?X_:Math.pow(X_,e),new gf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Zw:Math.pow(Zw,e),new gf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new zc(ZR(e>=240?e-240:e+120,r,i),ZR(e,r,i),ZR(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new gf(dO(this.h),TC(this.s),TC(this.l),J_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=J_(this.opacity);return`${e===1?"hsl(":"hsla("}${dO(this.h)}, ${TC(this.s)*100}%, ${TC(this.l)*100}%${e===1?")":`, ${e})`}`}}));function dO(e){return e=(e||0)%360,e<0?e+360:e}function TC(e){return Math.max(0,Math.min(1,e||0))}function ZR(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const oD=e=>()=>e;function Die(e,t){return function(n){return e+n*t}}function Fie(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Mie(e){return(e=+e)==1?g8:function(t,n){return n-t?Fie(t,n,e):oD(isNaN(t)?n:t)}}function g8(e,t){var n=t-e;return n?Die(e,n):oD(isNaN(e)?t:e)}const hO=(function e(t){var n=Mie(t);function i(r,o){var s=n((r=ek(r)).r,(o=ek(o)).r),a=n(r.g,o.g),d=n(r.b,o.b),h=g8(r.opacity,o.opacity);return function(m){return r.r=s(m),r.g=a(m),r.b=d(m),r.opacity=h(m),r+""}}return i.gamma=e,i})(1);function Iie(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(o){for(r=0;r<n;++r)i[r]=e[r]*(1-o)+t[r]*o;return i}}function Lie(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Oie(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),o=new Array(n),s;for(s=0;s<i;++s)r[s]=wx(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<i;++s)o[s]=r[s](a);return o}}function zie(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Q_(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Nie(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=wx(e[r],t[r]):i[r]=t[r];return function(o){for(r in n)i[r]=n[r](o);return i}}var tk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,YR=new RegExp(tk.source,"g");function Bie(e){return function(){return e}}function Gie(e){return function(t){return e(t)+""}}function jie(e,t){var n=tk.lastIndex=YR.lastIndex=0,i,r,o,s=-1,a=[],d=[];for(e=e+"",t=t+"";(i=tk.exec(e))&&(r=YR.exec(t));)(o=r.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(i=i[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,d.push({i:s,x:Q_(i,r)})),n=YR.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?d[0]?Gie(d[0].x):Bie(t):(t=d.length,function(h){for(var m=0,v;m<t;++m)a[(v=d[m]).i]=v.x(h);return a.join("")})}function wx(e,t){var n=typeof t,i;return t==null||n==="boolean"?oD(t):(n==="number"?Q_:n==="string"?(i=Xw(t))?(t=i,hO):jie:t instanceof Xw?hO:t instanceof Date?zie:Lie(t)?Iie:Array.isArray(t)?Oie:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Nie:Q_)(e,t)}function sD(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Hie(e,t){t===void 0&&(t=e,e=wx);for(var n=0,i=t.length-1,r=t[0],o=new Array(i<0?0:i);n<i;)o[n]=e(r,r=t[++n]);return function(s){var a=Math.max(0,Math.min(i-1,Math.floor(s*=i)));return o[a](s-a)}}function Vie(e){return function(){return e}}function eS(e){return+e}var fO=[0,1];function sc(e){return e}function nk(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Vie(isNaN(t)?NaN:.5)}function $ie(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function Wie(e,t,n){var i=e[0],r=e[1],o=t[0],s=t[1];return r<i?(i=nk(r,i),o=n(s,o)):(i=nk(i,r),o=n(o,s)),function(a){return o(i(a))}}function Uie(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),o=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)r[s]=nk(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var d=D1(e,a,1,i)-1;return o[d](r[d](a))}}function M1(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function E2(){var e=fO,t=fO,n=wx,i,r,o,s=sc,a,d,h;function m(){var w=Math.min(e.length,t.length);return s!==sc&&(s=$ie(e[0],e[w-1])),a=w>2?Uie:Wie,d=h=null,v}function v(w){return w==null||isNaN(w=+w)?o:(d||(d=a(e.map(i),t,n)))(i(s(w)))}return v.invert=function(w){return s(r((h||(h=a(t,e.map(i),Q_)))(w)))},v.domain=function(w){return arguments.length?(e=Array.from(w,eS),m()):e.slice()},v.range=function(w){return arguments.length?(t=Array.from(w),m()):t.slice()},v.rangeRound=function(w){return t=Array.from(w),n=sD,m()},v.clamp=function(w){return arguments.length?(s=w?!0:sc,m()):s!==sc},v.interpolate=function(w){return arguments.length?(n=w,m()):n},v.unknown=function(w){return arguments.length?(o=w,v):o},function(w,R){return i=w,r=R,m()}}function aD(){return E2()(sc,sc)}function qie(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function tS(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Qb(e){return e=tS(Math.abs(e)),e?e[1]:NaN}function Kie(e,t){return function(n,i){for(var r=n.length,o=[],s=0,a=e[0],d=0;r>0&&a>0&&(d+a+1>i&&(a=Math.max(1,i-d)),o.push(n.substring(r-=a,r+a)),!((d+=a+1)>i));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function Zie(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Yie=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Jw(e){if(!(t=Yie.exec(e)))throw new Error("invalid format: "+e);var t;return new lD({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Jw.prototype=lD.prototype;function lD(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}lD.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Xie(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var m8;function Jie(e,t){var n=tS(e,t);if(!n)return e+"";var i=n[0],r=n[1],o=r-(m8=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+tS(e,Math.max(0,t+o-1))[0]}function pO(e,t){var n=tS(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const gO={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:qie,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>pO(e*100,t),r:pO,s:Jie,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function mO(e){return e}var yO=Array.prototype.map,vO=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Qie(e){var t=e.grouping===void 0||e.thousands===void 0?mO:Kie(yO.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?mO:Zie(yO.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function h(v){v=Jw(v);var w=v.fill,R=v.align,L=v.sign,O=v.symbol,z=v.zero,$=v.width,U=v.comma,Y=v.precision,X=v.trim,q=v.type;q==="n"?(U=!0,q="g"):gO[q]||(Y===void 0&&(Y=12),X=!0,q="g"),(z||w==="0"&&R==="=")&&(z=!0,w="0",R="=");var ie=O==="$"?n:O==="#"&&/[boxX]/.test(q)?"0"+q.toLowerCase():"",re=O==="$"?i:/[%p]/.test(q)?s:"",J=gO[q],ne=/[defgprs%]/.test(q);Y=Y===void 0?6:/[gprs]/.test(q)?Math.max(1,Math.min(21,Y)):Math.max(0,Math.min(20,Y));function be(ue){var ve=ie,ce=re,Ie,Te,fe;if(q==="c")ce=J(ue)+ce,ue="";else{ue=+ue;var he=ue<0||1/ue<0;if(ue=isNaN(ue)?d:J(Math.abs(ue),Y),X&&(ue=Xie(ue)),he&&+ue==0&&L!=="+"&&(he=!1),ve=(he?L==="("?L:a:L==="-"||L==="("?"":L)+ve,ce=(q==="s"?vO[8+m8/3]:"")+ce+(he&&L==="("?")":""),ne){for(Ie=-1,Te=ue.length;++Ie<Te;)if(fe=ue.charCodeAt(Ie),48>fe||fe>57){ce=(fe===46?r+ue.slice(Ie+1):ue.slice(Ie))+ce,ue=ue.slice(0,Ie);break}}}U&&!z&&(ue=t(ue,1/0));var Re=ve.length+ue.length+ce.length,De=Re<$?new Array($-Re+1).join(w):"";switch(U&&z&&(ue=t(De+ue,De.length?$-ce.length:1/0),De=""),R){case"<":ue=ve+ue+ce+De;break;case"=":ue=ve+De+ue+ce;break;case"^":ue=De.slice(0,Re=De.length>>1)+ve+ue+ce+De.slice(Re);break;default:ue=De+ve+ue+ce;break}return o(ue)}return be.toString=function(){return v+""},be}function m(v,w){var R=h((v=Jw(v),v.type="f",v)),L=Math.max(-8,Math.min(8,Math.floor(Qb(w)/3)))*3,O=Math.pow(10,-L),z=vO[8+L/3];return function($){return R(O*$)+z}}return{format:h,formatPrefix:m}}var kC,uD,y8;ere({thousands:",",grouping:[3],currency:["$",""]});function ere(e){return kC=Qie(e),uD=kC.format,y8=kC.formatPrefix,kC}function tre(e){return Math.max(0,-Qb(Math.abs(e)))}function nre(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Qb(t)/3)))*3-Qb(Math.abs(e)))}function ire(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Qb(t)-Qb(e))+1}function v8(e,t,n,i){var r=JT(e,t,n),o;switch(i=Jw(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(o=nre(r,s))&&(i.precision=o),y8(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=ire(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=tre(r))&&(i.precision=o-(i.type==="%")*2);break}}return uD(i)}function Gy(e){var t=e.domain;return e.ticks=function(n){var i=t();return YT(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return v8(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,o=i.length-1,s=i[r],a=i[o],d,h,m=10;for(a<s&&(h=s,s=a,a=h,h=r,r=o,o=h);m-- >0;){if(h=XT(s,a,n),h===d)return i[r]=s,i[o]=a,t(i);if(h>0)s=Math.floor(s/h)*h,a=Math.ceil(a/h)*h;else if(h<0)s=Math.ceil(s*h)/h,a=Math.floor(a*h)/h;else break;d=h}return e},e}function b8(){var e=aD();return e.copy=function(){return M1(e,b8())},Th.apply(e,arguments),Gy(e)}function x8(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,eS),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return x8(e).unknown(t)},e=arguments.length?Array.from(e,eS):[0,1],Gy(n)}function w8(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],o=e[i],s;return o<r&&(s=n,n=i,i=s,s=r,r=o,o=s),e[n]=t.floor(r),e[i]=t.ceil(o),e}function bO(e){return Math.log(e)}function xO(e){return Math.exp(e)}function rre(e){return-Math.log(-e)}function ore(e){return-Math.exp(-e)}function sre(e){return isFinite(e)?+("1e"+e):e<0?0:e}function are(e){return e===10?sre:e===Math.E?Math.exp:t=>Math.pow(e,t)}function lre(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function wO(e){return(t,n)=>-e(-t,n)}function cD(e){const t=e(bO,xO),n=t.domain;let i=10,r,o;function s(){return r=lre(i),o=are(i),n()[0]<0?(r=wO(r),o=wO(o),e(rre,ore)):e(bO,xO),t}return t.base=function(a){return arguments.length?(i=+a,s()):i},t.domain=function(a){return arguments.length?(n(a),s()):n()},t.ticks=a=>{const d=n();let h=d[0],m=d[d.length-1];const v=m<h;v&&([h,m]=[m,h]);let w=r(h),R=r(m),L,O;const z=a==null?10:+a;let $=[];if(!(i%1)&&R-w<z){if(w=Math.floor(w),R=Math.ceil(R),h>0){for(;w<=R;++w)for(L=1;L<i;++L)if(O=w<0?L/o(-w):L*o(w),!(O<h)){if(O>m)break;$.push(O)}}else for(;w<=R;++w)for(L=i-1;L>=1;--L)if(O=w>0?L/o(-w):L*o(w),!(O<h)){if(O>m)break;$.push(O)}$.length*2<z&&($=YT(h,m,z))}else $=YT(w,R,Math.min(R-w,z)).map(o);return v?$.reverse():$},t.tickFormat=(a,d)=>{if(a==null&&(a=10),d==null&&(d=i===10?"s":","),typeof d!="function"&&(!(i%1)&&(d=Jw(d)).precision==null&&(d.trim=!0),d=uD(d)),a===1/0)return d;const h=Math.max(1,i*a/t.ticks().length);return m=>{let v=m/o(Math.round(r(m)));return v*i<i-.5&&(v*=i),v<=h?d(m):""}},t.nice=()=>n(w8(n(),{floor:a=>o(Math.floor(r(a))),ceil:a=>o(Math.ceil(r(a)))})),t}function C8(){const e=cD(E2()).domain([1,10]);return e.copy=()=>M1(e,C8()).base(e.base()),Th.apply(e,arguments),e}function CO(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function _O(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function dD(e){var t=1,n=e(CO(t),_O(t));return n.constant=function(i){return arguments.length?e(CO(t=+i),_O(t)):t},Gy(n)}function _8(){var e=dD(E2());return e.copy=function(){return M1(e,_8()).constant(e.constant())},Th.apply(e,arguments)}function SO(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ure(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function cre(e){return e<0?-e*e:e*e}function hD(e){var t=e(sc,sc),n=1;function i(){return n===1?e(sc,sc):n===.5?e(ure,cre):e(SO(n),SO(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},Gy(t)}function fD(){var e=hD(E2());return e.copy=function(){return M1(e,fD()).exponent(e.exponent())},Th.apply(e,arguments),e}function dre(){return fD.apply(null,arguments).exponent(.5)}function EO(e){return Math.sign(e)*e*e}function hre(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function S8(){var e=aD(),t=[0,1],n=!1,i;function r(o){var s=hre(e(o));return isNaN(s)?i:n?Math.round(s):s}return r.invert=function(o){return e.invert(EO(o))},r.domain=function(o){return arguments.length?(e.domain(o),r):e.domain()},r.range=function(o){return arguments.length?(e.range((t=Array.from(o,eS)).map(EO)),r):t.slice()},r.rangeRound=function(o){return r.range(o).round(!0)},r.round=function(o){return arguments.length?(n=!!o,r):n},r.clamp=function(o){return arguments.length?(e.clamp(o),r):e.clamp()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.copy=function(){return S8(e.domain(),t).round(n).clamp(e.clamp()).unknown(i)},Th.apply(r,arguments),Gy(r)}function E8(){var e=[],t=[],n=[],i;function r(){var s=0,a=Math.max(1,t.length);for(n=new Array(a-1);++s<a;)n[s-1]=mie(e,s/a);return o}function o(s){return s==null||isNaN(s=+s)?i:t[D1(n,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Ty),r()},o.range=function(s){return arguments.length?(t=Array.from(s),r()):t.slice()},o.unknown=function(s){return arguments.length?(i=s,o):i},o.quantiles=function(){return n.slice()},o.copy=function(){return E8().domain(e).range(t).unknown(i)},Th.apply(o,arguments)}function R8(){var e=0,t=1,n=1,i=[.5],r=[0,1],o;function s(d){return d!=null&&d<=d?r[D1(i,d,0,n)]:o}function a(){var d=-1;for(i=new Array(n);++d<n;)i[d]=((d+1)*t-(d-n)*e)/(n+1);return s}return s.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,a()):[e,t]},s.range=function(d){return arguments.length?(n=(r=Array.from(d)).length-1,a()):r.slice()},s.invertExtent=function(d){var h=r.indexOf(d);return h<0?[NaN,NaN]:h<1?[e,i[0]]:h>=n?[i[n-1],t]:[i[h-1],i[h]]},s.unknown=function(d){return arguments.length&&(o=d),s},s.thresholds=function(){return i.slice()},s.copy=function(){return R8().domain([e,t]).range(r).unknown(o)},Th.apply(Gy(s),arguments)}function A8(){var e=[.5],t=[0,1],n,i=1;function r(o){return o!=null&&o<=o?t[D1(e,o,0,i)]:n}return r.domain=function(o){return arguments.length?(e=Array.from(o),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(o){return arguments.length?(t=Array.from(o),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},r.unknown=function(o){return arguments.length?(n=o,r):n},r.copy=function(){return A8().domain(e).range(t).unknown(n)},Th.apply(r,arguments)}const XR=new Date,JR=new Date;function al(e,t,n,i){function r(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return r.floor=o=>(e(o=new Date(+o)),o),r.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),r.round=o=>{const s=r(o),a=r.ceil(o);return o-s<a-o?s:a},r.offset=(o,s)=>(t(o=new Date(+o),s==null?1:Math.floor(s)),o),r.range=(o,s,a)=>{const d=[];if(o=r.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return d;let h;do d.push(h=new Date(+o)),t(o,a),e(o);while(h<o&&o<s);return d},r.filter=o=>al(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););}),n&&(r.count=(o,s)=>(XR.setTime(+o),JR.setTime(+s),e(XR),e(JR),Math.floor(n(XR,JR))),r.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?r.filter(i?s=>i(s)%o===0:s=>r.count(0,s)%o===0):r)),r}const nS=al(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);nS.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?al(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):nS);nS.range;const Yg=1e3,ph=Yg*60,Xg=ph*60,um=Xg*24,pD=um*7,RO=um*30,QR=um*365,Uv=al(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Yg)},(e,t)=>(t-e)/Yg,e=>e.getUTCSeconds());Uv.range;const gD=al(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Yg)},(e,t)=>{e.setTime(+e+t*ph)},(e,t)=>(t-e)/ph,e=>e.getMinutes());gD.range;const mD=al(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ph)},(e,t)=>(t-e)/ph,e=>e.getUTCMinutes());mD.range;const yD=al(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Yg-e.getMinutes()*ph)},(e,t)=>{e.setTime(+e+t*Xg)},(e,t)=>(t-e)/Xg,e=>e.getHours());yD.range;const vD=al(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Xg)},(e,t)=>(t-e)/Xg,e=>e.getUTCHours());vD.range;const I1=al(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ph)/um,e=>e.getDate()-1);I1.range;const R2=al(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/um,e=>e.getUTCDate()-1);R2.range;const T8=al(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/um,e=>Math.floor(e/um));T8.range;function w0(e){return al(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ph)/pD)}const A2=w0(0),iS=w0(1),fre=w0(2),pre=w0(3),ex=w0(4),gre=w0(5),mre=w0(6);A2.range;iS.range;fre.range;pre.range;ex.range;gre.range;mre.range;function C0(e){return al(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/pD)}const T2=C0(0),rS=C0(1),yre=C0(2),vre=C0(3),tx=C0(4),bre=C0(5),xre=C0(6);T2.range;rS.range;yre.range;vre.range;tx.range;bre.range;xre.range;const bD=al(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());bD.range;const xD=al(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());xD.range;const cm=al(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());cm.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:al(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});cm.range;const dm=al(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());dm.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:al(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});dm.range;function k8(e,t,n,i,r,o){const s=[[Uv,1,Yg],[Uv,5,5*Yg],[Uv,15,15*Yg],[Uv,30,30*Yg],[o,1,ph],[o,5,5*ph],[o,15,15*ph],[o,30,30*ph],[r,1,Xg],[r,3,3*Xg],[r,6,6*Xg],[r,12,12*Xg],[i,1,um],[i,2,2*um],[n,1,pD],[t,1,RO],[t,3,3*RO],[e,1,QR]];function a(h,m,v){const w=m<h;w&&([h,m]=[m,h]);const R=v&&typeof v.range=="function"?v:d(h,m,v),L=R?R.range(h,+m+1):[];return w?L.reverse():L}function d(h,m,v){const w=Math.abs(m-h)/v,R=tD(([,,z])=>z).right(s,w);if(R===s.length)return e.every(JT(h/QR,m/QR,v));if(R===0)return nS.every(Math.max(JT(h,m,v),1));const[L,O]=s[w/s[R-1][2]<s[R][2]/w?R-1:R];return L.every(O)}return[a,d]}const[wre,Cre]=k8(dm,xD,T2,T8,vD,mD),[_re,Sre]=k8(cm,bD,A2,I1,yD,gD);function eA(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function tA(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function sw(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Ere(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,o=e.days,s=e.shortDays,a=e.months,d=e.shortMonths,h=aw(r),m=lw(r),v=aw(o),w=lw(o),R=aw(s),L=lw(s),O=aw(a),z=lw(a),$=aw(d),U=lw(d),Y={a:he,A:Re,b:De,B:Ye,c:null,d:FO,e:FO,f:Kre,g:roe,G:soe,H:Wre,I:Ure,j:qre,L:P8,m:Zre,M:Yre,p:_e,q:Le,Q:LO,s:OO,S:Xre,u:Jre,U:Qre,V:eoe,w:toe,W:noe,x:null,X:null,y:ioe,Y:ooe,Z:aoe,"%":IO},X={a:Oe,A:yt,b:xt,B:Vt,c:null,d:MO,e:MO,f:doe,g:woe,G:_oe,H:loe,I:uoe,j:coe,L:F8,m:hoe,M:foe,p:Xt,q:en,Q:LO,s:OO,S:poe,u:goe,U:moe,V:yoe,w:voe,W:boe,x:null,X:null,y:xoe,Y:Coe,Z:Soe,"%":IO},q={a:be,A:ue,b:ve,B:ce,c:Ie,d:PO,e:PO,f:jre,g:kO,G:TO,H:DO,I:DO,j:zre,L:Gre,m:Ore,M:Nre,p:ne,q:Lre,Q:Vre,s:$re,S:Bre,u:Pre,U:Dre,V:Fre,w:kre,W:Mre,x:Te,X:fe,y:kO,Y:TO,Z:Ire,"%":Hre};Y.x=ie(n,Y),Y.X=ie(i,Y),Y.c=ie(t,Y),X.x=ie(n,X),X.X=ie(i,X),X.c=ie(t,X);function ie(it,Lt){return function(St){var lt=[],Tn=-1,Mt=0,$t=it.length,Pe,yn,wn;for(St instanceof Date||(St=new Date(+St));++Tn<$t;)it.charCodeAt(Tn)===37&&(lt.push(it.slice(Mt,Tn)),(yn=AO[Pe=it.charAt(++Tn)])!=null?Pe=it.charAt(++Tn):yn=Pe==="e"?" ":"0",(wn=Lt[Pe])&&(Pe=wn(St,yn)),lt.push(Pe),Mt=Tn+1);return lt.push(it.slice(Mt,Tn)),lt.join("")}}function re(it,Lt){return function(St){var lt=sw(1900,void 0,1),Tn=J(lt,it,St+="",0),Mt,$t;if(Tn!=St.length)return null;if("Q"in lt)return new Date(lt.Q);if("s"in lt)return new Date(lt.s*1e3+("L"in lt?lt.L:0));if(Lt&&!("Z"in lt)&&(lt.Z=0),"p"in lt&&(lt.H=lt.H%12+lt.p*12),lt.m===void 0&&(lt.m="q"in lt?lt.q:0),"V"in lt){if(lt.V<1||lt.V>53)return null;"w"in lt||(lt.w=1),"Z"in lt?(Mt=tA(sw(lt.y,0,1)),$t=Mt.getUTCDay(),Mt=$t>4||$t===0?rS.ceil(Mt):rS(Mt),Mt=R2.offset(Mt,(lt.V-1)*7),lt.y=Mt.getUTCFullYear(),lt.m=Mt.getUTCMonth(),lt.d=Mt.getUTCDate()+(lt.w+6)%7):(Mt=eA(sw(lt.y,0,1)),$t=Mt.getDay(),Mt=$t>4||$t===0?iS.ceil(Mt):iS(Mt),Mt=I1.offset(Mt,(lt.V-1)*7),lt.y=Mt.getFullYear(),lt.m=Mt.getMonth(),lt.d=Mt.getDate()+(lt.w+6)%7)}else("W"in lt||"U"in lt)&&("w"in lt||(lt.w="u"in lt?lt.u%7:"W"in lt?1:0),$t="Z"in lt?tA(sw(lt.y,0,1)).getUTCDay():eA(sw(lt.y,0,1)).getDay(),lt.m=0,lt.d="W"in lt?(lt.w+6)%7+lt.W*7-($t+5)%7:lt.w+lt.U*7-($t+6)%7);return"Z"in lt?(lt.H+=lt.Z/100|0,lt.M+=lt.Z%100,tA(lt)):eA(lt)}}function J(it,Lt,St,lt){for(var Tn=0,Mt=Lt.length,$t=St.length,Pe,yn;Tn<Mt;){if(lt>=$t)return-1;if(Pe=Lt.charCodeAt(Tn++),Pe===37){if(Pe=Lt.charAt(Tn++),yn=q[Pe in AO?Lt.charAt(Tn++):Pe],!yn||(lt=yn(it,St,lt))<0)return-1}else if(Pe!=St.charCodeAt(lt++))return-1}return lt}function ne(it,Lt,St){var lt=h.exec(Lt.slice(St));return lt?(it.p=m.get(lt[0].toLowerCase()),St+lt[0].length):-1}function be(it,Lt,St){var lt=R.exec(Lt.slice(St));return lt?(it.w=L.get(lt[0].toLowerCase()),St+lt[0].length):-1}function ue(it,Lt,St){var lt=v.exec(Lt.slice(St));return lt?(it.w=w.get(lt[0].toLowerCase()),St+lt[0].length):-1}function ve(it,Lt,St){var lt=$.exec(Lt.slice(St));return lt?(it.m=U.get(lt[0].toLowerCase()),St+lt[0].length):-1}function ce(it,Lt,St){var lt=O.exec(Lt.slice(St));return lt?(it.m=z.get(lt[0].toLowerCase()),St+lt[0].length):-1}function Ie(it,Lt,St){return J(it,t,Lt,St)}function Te(it,Lt,St){return J(it,n,Lt,St)}function fe(it,Lt,St){return J(it,i,Lt,St)}function he(it){return s[it.getDay()]}function Re(it){return o[it.getDay()]}function De(it){return d[it.getMonth()]}function Ye(it){return a[it.getMonth()]}function _e(it){return r[+(it.getHours()>=12)]}function Le(it){return 1+~~(it.getMonth()/3)}function Oe(it){return s[it.getUTCDay()]}function yt(it){return o[it.getUTCDay()]}function xt(it){return d[it.getUTCMonth()]}function Vt(it){return a[it.getUTCMonth()]}function Xt(it){return r[+(it.getUTCHours()>=12)]}function en(it){return 1+~~(it.getUTCMonth()/3)}return{format:function(it){var Lt=ie(it+="",Y);return Lt.toString=function(){return it},Lt},parse:function(it){var Lt=re(it+="",!1);return Lt.toString=function(){return it},Lt},utcFormat:function(it){var Lt=ie(it+="",X);return Lt.toString=function(){return it},Lt},utcParse:function(it){var Lt=re(it+="",!0);return Lt.toString=function(){return it},Lt}}}var AO={"-":"",_:" ",0:"0"},Bl=/^\s*\d+/,Rre=/^%/,Are=/[\\^$*+?|[\]().{}]/g;function uo(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(t)+r:r)}function Tre(e){return e.replace(Are,"\\$&")}function aw(e){return new RegExp("^(?:"+e.map(Tre).join("|")+")","i")}function lw(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function kre(e,t,n){var i=Bl.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function Pre(e,t,n){var i=Bl.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function Dre(e,t,n){var i=Bl.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function Fre(e,t,n){var i=Bl.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function Mre(e,t,n){var i=Bl.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function TO(e,t,n){var i=Bl.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function kO(e,t,n){var i=Bl.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Ire(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Lre(e,t,n){var i=Bl.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function Ore(e,t,n){var i=Bl.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function PO(e,t,n){var i=Bl.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function zre(e,t,n){var i=Bl.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function DO(e,t,n){var i=Bl.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function Nre(e,t,n){var i=Bl.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function Bre(e,t,n){var i=Bl.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function Gre(e,t,n){var i=Bl.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function jre(e,t,n){var i=Bl.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function Hre(e,t,n){var i=Rre.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function Vre(e,t,n){var i=Bl.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function $re(e,t,n){var i=Bl.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function FO(e,t){return uo(e.getDate(),t,2)}function Wre(e,t){return uo(e.getHours(),t,2)}function Ure(e,t){return uo(e.getHours()%12||12,t,2)}function qre(e,t){return uo(1+I1.count(cm(e),e),t,3)}function P8(e,t){return uo(e.getMilliseconds(),t,3)}function Kre(e,t){return P8(e,t)+"000"}function Zre(e,t){return uo(e.getMonth()+1,t,2)}function Yre(e,t){return uo(e.getMinutes(),t,2)}function Xre(e,t){return uo(e.getSeconds(),t,2)}function Jre(e){var t=e.getDay();return t===0?7:t}function Qre(e,t){return uo(A2.count(cm(e)-1,e),t,2)}function D8(e){var t=e.getDay();return t>=4||t===0?ex(e):ex.ceil(e)}function eoe(e,t){return e=D8(e),uo(ex.count(cm(e),e)+(cm(e).getDay()===4),t,2)}function toe(e){return e.getDay()}function noe(e,t){return uo(iS.count(cm(e)-1,e),t,2)}function ioe(e,t){return uo(e.getFullYear()%100,t,2)}function roe(e,t){return e=D8(e),uo(e.getFullYear()%100,t,2)}function ooe(e,t){return uo(e.getFullYear()%1e4,t,4)}function soe(e,t){var n=e.getDay();return e=n>=4||n===0?ex(e):ex.ceil(e),uo(e.getFullYear()%1e4,t,4)}function aoe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+uo(t/60|0,"0",2)+uo(t%60,"0",2)}function MO(e,t){return uo(e.getUTCDate(),t,2)}function loe(e,t){return uo(e.getUTCHours(),t,2)}function uoe(e,t){return uo(e.getUTCHours()%12||12,t,2)}function coe(e,t){return uo(1+R2.count(dm(e),e),t,3)}function F8(e,t){return uo(e.getUTCMilliseconds(),t,3)}function doe(e,t){return F8(e,t)+"000"}function hoe(e,t){return uo(e.getUTCMonth()+1,t,2)}function foe(e,t){return uo(e.getUTCMinutes(),t,2)}function poe(e,t){return uo(e.getUTCSeconds(),t,2)}function goe(e){var t=e.getUTCDay();return t===0?7:t}function moe(e,t){return uo(T2.count(dm(e)-1,e),t,2)}function M8(e){var t=e.getUTCDay();return t>=4||t===0?tx(e):tx.ceil(e)}function yoe(e,t){return e=M8(e),uo(tx.count(dm(e),e)+(dm(e).getUTCDay()===4),t,2)}function voe(e){return e.getUTCDay()}function boe(e,t){return uo(rS.count(dm(e)-1,e),t,2)}function xoe(e,t){return uo(e.getUTCFullYear()%100,t,2)}function woe(e,t){return e=M8(e),uo(e.getUTCFullYear()%100,t,2)}function Coe(e,t){return uo(e.getUTCFullYear()%1e4,t,4)}function _oe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?tx(e):tx.ceil(e),uo(e.getUTCFullYear()%1e4,t,4)}function Soe(){return"+0000"}function IO(){return"%"}function LO(e){return+e}function OO(e){return Math.floor(+e/1e3)}var cb,I8,L8;Eoe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Eoe(e){return cb=Ere(e),I8=cb.format,cb.parse,L8=cb.utcFormat,cb.utcParse,cb}function Roe(e){return new Date(e)}function Aoe(e){return e instanceof Date?+e:+new Date(+e)}function wD(e,t,n,i,r,o,s,a,d,h){var m=aD(),v=m.invert,w=m.domain,R=h(".%L"),L=h(":%S"),O=h("%I:%M"),z=h("%I %p"),$=h("%a %d"),U=h("%b %d"),Y=h("%B"),X=h("%Y");function q(ie){return(d(ie)<ie?R:a(ie)<ie?L:s(ie)<ie?O:o(ie)<ie?z:i(ie)<ie?r(ie)<ie?$:U:n(ie)<ie?Y:X)(ie)}return m.invert=function(ie){return new Date(v(ie))},m.domain=function(ie){return arguments.length?w(Array.from(ie,Aoe)):w().map(Roe)},m.ticks=function(ie){var re=w();return e(re[0],re[re.length-1],ie??10)},m.tickFormat=function(ie,re){return re==null?q:h(re)},m.nice=function(ie){var re=w();return(!ie||typeof ie.range!="function")&&(ie=t(re[0],re[re.length-1],ie??10)),ie?w(w8(re,ie)):m},m.copy=function(){return M1(m,wD(e,t,n,i,r,o,s,a,d,h))},m}function Toe(){return Th.apply(wD(_re,Sre,cm,bD,A2,I1,yD,gD,Uv,I8).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function koe(){return Th.apply(wD(wre,Cre,dm,xD,T2,R2,vD,mD,Uv,L8).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function k2(){var e=0,t=1,n,i,r,o,s=sc,a=!1,d;function h(v){return v==null||isNaN(v=+v)?d:s(r===0?.5:(v=(o(v)-n)*r,a?Math.max(0,Math.min(1,v)):v))}h.domain=function(v){return arguments.length?([e,t]=v,n=o(e=+e),i=o(t=+t),r=n===i?0:1/(i-n),h):[e,t]},h.clamp=function(v){return arguments.length?(a=!!v,h):a},h.interpolator=function(v){return arguments.length?(s=v,h):s};function m(v){return function(w){var R,L;return arguments.length?([R,L]=w,s=v(R,L),h):[s(0),s(1)]}}return h.range=m(wx),h.rangeRound=m(sD),h.unknown=function(v){return arguments.length?(d=v,h):d},function(v){return o=v,n=v(e),i=v(t),r=n===i?0:1/(i-n),h}}function jy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function O8(){var e=Gy(k2()(sc));return e.copy=function(){return jy(e,O8())},xm.apply(e,arguments)}function z8(){var e=cD(k2()).domain([1,10]);return e.copy=function(){return jy(e,z8()).base(e.base())},xm.apply(e,arguments)}function N8(){var e=dD(k2());return e.copy=function(){return jy(e,N8()).constant(e.constant())},xm.apply(e,arguments)}function CD(){var e=hD(k2());return e.copy=function(){return jy(e,CD()).exponent(e.exponent())},xm.apply(e,arguments)}function Poe(){return CD.apply(null,arguments).exponent(.5)}function B8(){var e=[],t=sc;function n(i){if(i!=null&&!isNaN(i=+i))return t((D1(e,i,1)-1)/(e.length-1))}return n.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let r of i)r!=null&&!isNaN(r=+r)&&e.push(r);return e.sort(Ty),n},n.interpolator=function(i){return arguments.length?(t=i,n):t},n.range=function(){return e.map((i,r)=>t(r/(e.length-1)))},n.quantiles=function(i){return Array.from({length:i+1},(r,o)=>gie(e,o/i))},n.copy=function(){return B8(t).domain(e)},xm.apply(n,arguments)}function P2(){var e=0,t=.5,n=1,i=1,r,o,s,a,d,h=sc,m,v=!1,w;function R(O){return isNaN(O=+O)?w:(O=.5+((O=+m(O))-o)*(i*O<i*o?a:d),h(v?Math.max(0,Math.min(1,O)):O))}R.domain=function(O){return arguments.length?([e,t,n]=O,r=m(e=+e),o=m(t=+t),s=m(n=+n),a=r===o?0:.5/(o-r),d=o===s?0:.5/(s-o),i=o<r?-1:1,R):[e,t,n]},R.clamp=function(O){return arguments.length?(v=!!O,R):v},R.interpolator=function(O){return arguments.length?(h=O,R):h};function L(O){return function(z){var $,U,Y;return arguments.length?([$,U,Y]=z,h=Hie(O,[$,U,Y]),R):[h(0),h(.5),h(1)]}}return R.range=L(wx),R.rangeRound=L(sD),R.unknown=function(O){return arguments.length?(w=O,R):w},function(O){return m=O,r=O(e),o=O(t),s=O(n),a=r===o?0:.5/(o-r),d=o===s?0:.5/(s-o),i=o<r?-1:1,R}}function G8(){var e=Gy(P2()(sc));return e.copy=function(){return jy(e,G8())},xm.apply(e,arguments)}function j8(){var e=cD(P2()).domain([.1,1,10]);return e.copy=function(){return jy(e,j8()).base(e.base())},xm.apply(e,arguments)}function H8(){var e=dD(P2());return e.copy=function(){return jy(e,H8()).constant(e.constant())},xm.apply(e,arguments)}function _D(){var e=hD(P2());return e.copy=function(){return jy(e,_D()).exponent(e.exponent())},xm.apply(e,arguments)}function Doe(){return _D.apply(null,arguments).exponent(.5)}const xw=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:iD,scaleDiverging:G8,scaleDivergingLog:j8,scaleDivergingPow:_D,scaleDivergingSqrt:Doe,scaleDivergingSymlog:H8,scaleIdentity:x8,scaleImplicit:QT,scaleLinear:b8,scaleLog:C8,scaleOrdinal:nD,scalePoint:vie,scalePow:fD,scaleQuantile:E8,scaleQuantize:R8,scaleRadial:S8,scaleSequential:O8,scaleSequentialLog:z8,scaleSequentialPow:CD,scaleSequentialQuantile:B8,scaleSequentialSqrt:Poe,scaleSequentialSymlog:N8,scaleSqrt:dre,scaleSymlog:_8,scaleThreshold:A8,scaleTime:Toe,scaleUtc:koe,tickFormat:v8},Symbol.toStringTag,{value:"Module"}));var Hy=e=>e.chartData,Foe=Ot([Hy],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),L1=(e,t,n,i)=>i?Foe(e):Hy(e);function My(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(ws(t)&&ws(n))return!0}return!1}function zO(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function V8(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,i]=e,r,o;if(ws(n))r=n;else if(typeof n=="function")return;if(ws(i))o=i;else if(typeof i=="function")return;var s=[r,o];if(My(s))return s}}function Moe(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var i=e(t,n);if(My(i))return zO(i,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[r,o]=e,s,a;if(r==="auto")t!=null&&(s=Math.min(...t));else if(fi(r))s=r;else if(typeof r=="function")try{t!=null&&(s=r(t==null?void 0:t[0]))}catch{}else if(typeof r=="string"&&c5.test(r)){var d=c5.exec(r);if(d==null||t==null)s=void 0;else{var h=+d[1];s=t[0]-h}}else s=t==null?void 0:t[0];if(o==="auto")t!=null&&(a=Math.max(...t));else if(fi(o))a=o;else if(typeof o=="function")try{t!=null&&(a=o(t==null?void 0:t[1]))}catch{}else if(typeof o=="string"&&d5.test(o)){var m=d5.exec(o);if(m==null||t==null)a=void 0;else{var v=+m[1];a=t[1]+v}}else a=t==null?void 0:t[1];var w=[s,a];if(My(w))return t==null?w:zO(w,t,n)}}}var Cx=1e9,Ioe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},ED,Is=!0,Ch="[DecimalError] ",Yv=Ch+"Invalid argument: ",SD=Ch+"Exponent out of range: ",_x=Math.floor,jv=Math.pow,Loe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Cd,Fl=1e7,ys=7,$8=9007199254740991,oS=_x($8/ys),ni={};ni.absoluteValue=ni.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};ni.comparedTo=ni.cmp=function(e){var t,n,i,r,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(i=o.d.length,r=e.d.length,t=0,n=i<r?i:r;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return i===r?0:i>r^o.s<0?1:-1};ni.decimalPlaces=ni.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*ys;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};ni.dividedBy=ni.div=function(e){return tm(this,new this.constructor(e))};ni.dividedToIntegerBy=ni.idiv=function(e){var t=this,n=t.constructor;return is(tm(t,new n(e),0,1),n.precision)};ni.equals=ni.eq=function(e){return!this.cmp(e)};ni.exponent=function(){return Va(this)};ni.greaterThan=ni.gt=function(e){return this.cmp(e)>0};ni.greaterThanOrEqualTo=ni.gte=function(e){return this.cmp(e)>=0};ni.isInteger=ni.isint=function(){return this.e>this.d.length-2};ni.isNegative=ni.isneg=function(){return this.s<0};ni.isPositive=ni.ispos=function(){return this.s>0};ni.isZero=function(){return this.s===0};ni.lessThan=ni.lt=function(e){return this.cmp(e)<0};ni.lessThanOrEqualTo=ni.lte=function(e){return this.cmp(e)<1};ni.logarithm=ni.log=function(e){var t,n=this,i=n.constructor,r=i.precision,o=r+5;if(e===void 0)e=new i(10);else if(e=new i(e),e.s<1||e.eq(Cd))throw Error(Ch+"NaN");if(n.s<1)throw Error(Ch+(n.s?"NaN":"-Infinity"));return n.eq(Cd)?new i(0):(Is=!1,t=tm(Qw(n,o),Qw(e,o),o),Is=!0,is(t,r))};ni.minus=ni.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?q8(t,e):W8(t,(e.s=-e.s,e))};ni.modulo=ni.mod=function(e){var t,n=this,i=n.constructor,r=i.precision;if(e=new i(e),!e.s)throw Error(Ch+"NaN");return n.s?(Is=!1,t=tm(n,e,0,1).times(e),Is=!0,n.minus(t)):is(new i(n),r)};ni.naturalExponential=ni.exp=function(){return U8(this)};ni.naturalLogarithm=ni.ln=function(){return Qw(this)};ni.negated=ni.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};ni.plus=ni.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?W8(t,e):q8(t,(e.s=-e.s,e))};ni.precision=ni.sd=function(e){var t,n,i,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Yv+e);if(t=Va(r)+1,i=r.d.length-1,n=i*ys+1,i=r.d[i],i){for(;i%10==0;i/=10)n--;for(i=r.d[0];i>=10;i/=10)n++}return e&&t>n?t:n};ni.squareRoot=ni.sqrt=function(){var e,t,n,i,r,o,s,a=this,d=a.constructor;if(a.s<1){if(!a.s)return new d(0);throw Error(Ch+"NaN")}for(e=Va(a),Is=!1,r=Math.sqrt(+a),r==0||r==1/0?(t=kp(a.d),(t.length+e)%2==0&&(t+="0"),r=Math.sqrt(t),e=_x((e+1)/2)-(e<0||e%2),r==1/0?t="5e"+e:(t=r.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),i=new d(t)):i=new d(r.toString()),n=d.precision,r=s=n+3;;)if(o=i,i=o.plus(tm(a,o,s+2)).times(.5),kp(o.d).slice(0,s)===(t=kp(i.d)).slice(0,s)){if(t=t.slice(s-3,s+1),r==s&&t=="4999"){if(is(o,n+1,0),o.times(o).eq(a)){i=o;break}}else if(t!="9999")break;s+=4}return Is=!0,is(i,n)};ni.times=ni.mul=function(e){var t,n,i,r,o,s,a,d,h,m=this,v=m.constructor,w=m.d,R=(e=new v(e)).d;if(!m.s||!e.s)return new v(0);for(e.s*=m.s,n=m.e+e.e,d=w.length,h=R.length,d<h&&(o=w,w=R,R=o,s=d,d=h,h=s),o=[],s=d+h,i=s;i--;)o.push(0);for(i=h;--i>=0;){for(t=0,r=d+i;r>i;)a=o[r]+R[i]*w[r-i-1]+t,o[r--]=a%Fl|0,t=a/Fl|0;o[r]=(o[r]+t)%Fl|0}for(;!o[--s];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,Is?is(e,v.precision):e};ni.toDecimalPlaces=ni.todp=function(e,t){var n=this,i=n.constructor;return n=new i(n),e===void 0?n:(Op(e,0,Cx),t===void 0?t=i.rounding:Op(t,0,8),is(n,e+Va(n)+1,t))};ni.toExponential=function(e,t){var n,i=this,r=i.constructor;return e===void 0?n=l0(i,!0):(Op(e,0,Cx),t===void 0?t=r.rounding:Op(t,0,8),i=is(new r(i),e+1,t),n=l0(i,!0,e+1)),n};ni.toFixed=function(e,t){var n,i,r=this,o=r.constructor;return e===void 0?l0(r):(Op(e,0,Cx),t===void 0?t=o.rounding:Op(t,0,8),i=is(new o(r),e+Va(r)+1,t),n=l0(i.abs(),!1,e+Va(i)+1),r.isneg()&&!r.isZero()?"-"+n:n)};ni.toInteger=ni.toint=function(){var e=this,t=e.constructor;return is(new t(e),Va(e)+1,t.rounding)};ni.toNumber=function(){return+this};ni.toPower=ni.pow=function(e){var t,n,i,r,o,s,a=this,d=a.constructor,h=12,m=+(e=new d(e));if(!e.s)return new d(Cd);if(a=new d(a),!a.s){if(e.s<1)throw Error(Ch+"Infinity");return a}if(a.eq(Cd))return a;if(i=d.precision,e.eq(Cd))return is(a,i);if(t=e.e,n=e.d.length-1,s=t>=n,o=a.s,s){if((n=m<0?-m:m)<=$8){for(r=new d(Cd),t=Math.ceil(i/ys+4),Is=!1;n%2&&(r=r.times(a),BO(r.d,t)),n=_x(n/2),n!==0;)a=a.times(a),BO(a.d,t);return Is=!0,e.s<0?new d(Cd).div(r):is(r,i)}}else if(o<0)throw Error(Ch+"NaN");return o=o<0&&e.d[Math.max(t,n)]&1?-1:1,a.s=1,Is=!1,r=e.times(Qw(a,i+h)),Is=!0,r=U8(r),r.s=o,r};ni.toPrecision=function(e,t){var n,i,r=this,o=r.constructor;return e===void 0?(n=Va(r),i=l0(r,n<=o.toExpNeg||n>=o.toExpPos)):(Op(e,1,Cx),t===void 0?t=o.rounding:Op(t,0,8),r=is(new o(r),e,t),n=Va(r),i=l0(r,e<=n||n<=o.toExpNeg,e)),i};ni.toSignificantDigits=ni.tosd=function(e,t){var n=this,i=n.constructor;return e===void 0?(e=i.precision,t=i.rounding):(Op(e,1,Cx),t===void 0?t=i.rounding:Op(t,0,8)),is(new i(n),e,t)};ni.toString=ni.valueOf=ni.val=ni.toJSON=ni[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Va(e),n=e.constructor;return l0(e,t<=n.toExpNeg||t>=n.toExpPos)};function W8(e,t){var n,i,r,o,s,a,d,h,m=e.constructor,v=m.precision;if(!e.s||!t.s)return t.s||(t=new m(e)),Is?is(t,v):t;if(d=e.d,h=t.d,s=e.e,r=t.e,d=d.slice(),o=s-r,o){for(o<0?(i=d,o=-o,a=h.length):(i=h,r=s,a=d.length),s=Math.ceil(v/ys),a=s>a?s+1:a+1,o>a&&(o=a,i.length=1),i.reverse();o--;)i.push(0);i.reverse()}for(a=d.length,o=h.length,a-o<0&&(o=a,i=h,h=d,d=i),n=0;o;)n=(d[--o]=d[o]+h[o]+n)/Fl|0,d[o]%=Fl;for(n&&(d.unshift(n),++r),a=d.length;d[--a]==0;)d.pop();return t.d=d,t.e=r,Is?is(t,v):t}function Op(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Yv+e)}function kp(e){var t,n,i,r=e.length-1,o="",s=e[0];if(r>0){for(o+=s,t=1;t<r;t++)i=e[t]+"",n=ys-i.length,n&&(o+=_y(n)),o+=i;s=e[t],i=s+"",n=ys-i.length,n&&(o+=_y(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}var tm=(function(){function e(i,r){var o,s=0,a=i.length;for(i=i.slice();a--;)o=i[a]*r+s,i[a]=o%Fl|0,s=o/Fl|0;return s&&i.unshift(s),i}function t(i,r,o,s){var a,d;if(o!=s)d=o>s?1:-1;else for(a=d=0;a<o;a++)if(i[a]!=r[a]){d=i[a]>r[a]?1:-1;break}return d}function n(i,r,o){for(var s=0;o--;)i[o]-=s,s=i[o]<r[o]?1:0,i[o]=s*Fl+i[o]-r[o];for(;!i[0]&&i.length>1;)i.shift()}return function(i,r,o,s){var a,d,h,m,v,w,R,L,O,z,$,U,Y,X,q,ie,re,J,ne=i.constructor,be=i.s==r.s?1:-1,ue=i.d,ve=r.d;if(!i.s)return new ne(i);if(!r.s)throw Error(Ch+"Division by zero");for(d=i.e-r.e,re=ve.length,q=ue.length,R=new ne(be),L=R.d=[],h=0;ve[h]==(ue[h]||0);)++h;if(ve[h]>(ue[h]||0)&&--d,o==null?U=o=ne.precision:s?U=o+(Va(i)-Va(r))+1:U=o,U<0)return new ne(0);if(U=U/ys+2|0,h=0,re==1)for(m=0,ve=ve[0],U++;(h<q||m)&&U--;h++)Y=m*Fl+(ue[h]||0),L[h]=Y/ve|0,m=Y%ve|0;else{for(m=Fl/(ve[0]+1)|0,m>1&&(ve=e(ve,m),ue=e(ue,m),re=ve.length,q=ue.length),X=re,O=ue.slice(0,re),z=O.length;z<re;)O[z++]=0;J=ve.slice(),J.unshift(0),ie=ve[0],ve[1]>=Fl/2&&++ie;do m=0,a=t(ve,O,re,z),a<0?($=O[0],re!=z&&($=$*Fl+(O[1]||0)),m=$/ie|0,m>1?(m>=Fl&&(m=Fl-1),v=e(ve,m),w=v.length,z=O.length,a=t(v,O,w,z),a==1&&(m--,n(v,re<w?J:ve,w))):(m==0&&(a=m=1),v=ve.slice()),w=v.length,w<z&&v.unshift(0),n(O,v,z),a==-1&&(z=O.length,a=t(ve,O,re,z),a<1&&(m++,n(O,re<z?J:ve,z))),z=O.length):a===0&&(m++,O=[0]),L[h++]=m,a&&O[0]?O[z++]=ue[X]||0:(O=[ue[X]],z=1);while((X++<q||O[0]!==void 0)&&U--)}return L[0]||L.shift(),R.e=d,is(R,s?o+Va(R)+1:o)}})();function U8(e,t){var n,i,r,o,s,a,d=0,h=0,m=e.constructor,v=m.precision;if(Va(e)>16)throw Error(SD+Va(e));if(!e.s)return new m(Cd);for(Is=!1,a=v,s=new m(.03125);e.abs().gte(.1);)e=e.times(s),h+=5;for(i=Math.log(jv(2,h))/Math.LN10*2+5|0,a+=i,n=r=o=new m(Cd),m.precision=a;;){if(r=is(r.times(e),a),n=n.times(++d),s=o.plus(tm(r,n,a)),kp(s.d).slice(0,a)===kp(o.d).slice(0,a)){for(;h--;)o=is(o.times(o),a);return m.precision=v,t==null?(Is=!0,is(o,v)):o}o=s}}function Va(e){for(var t=e.e*ys,n=e.d[0];n>=10;n/=10)t++;return t}function nA(e,t,n){if(t>e.LN10.sd())throw Is=!0,n&&(e.precision=n),Error(Ch+"LN10 precision limit exceeded");return is(new e(e.LN10),t)}function _y(e){for(var t="";e--;)t+="0";return t}function Qw(e,t){var n,i,r,o,s,a,d,h,m,v=1,w=10,R=e,L=R.d,O=R.constructor,z=O.precision;if(R.s<1)throw Error(Ch+(R.s?"NaN":"-Infinity"));if(R.eq(Cd))return new O(0);if(t==null?(Is=!1,h=z):h=t,R.eq(10))return t==null&&(Is=!0),nA(O,h);if(h+=w,O.precision=h,n=kp(L),i=n.charAt(0),o=Va(R),Math.abs(o)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)R=R.times(e),n=kp(R.d),i=n.charAt(0),v++;o=Va(R),i>1?(R=new O("0."+n),o++):R=new O(i+"."+n.slice(1))}else return d=nA(O,h+2,z).times(o+""),R=Qw(new O(i+"."+n.slice(1)),h-w).plus(d),O.precision=z,t==null?(Is=!0,is(R,z)):R;for(a=s=R=tm(R.minus(Cd),R.plus(Cd),h),m=is(R.times(R),h),r=3;;){if(s=is(s.times(m),h),d=a.plus(tm(s,new O(r),h)),kp(d.d).slice(0,h)===kp(a.d).slice(0,h))return a=a.times(2),o!==0&&(a=a.plus(nA(O,h+2,z).times(o+""))),a=tm(a,new O(v),h),O.precision=z,t==null?(Is=!0,is(a,z)):a;a=d,r+=2}}function NO(e,t){var n,i,r;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length),i=0;t.charCodeAt(i)===48;)++i;for(r=t.length;t.charCodeAt(r-1)===48;)--r;if(t=t.slice(i,r),t){if(r-=i,n=n-i-1,e.e=_x(n/ys),e.d=[],i=(n+1)%ys,n<0&&(i+=ys),i<r){for(i&&e.d.push(+t.slice(0,i)),r-=ys;i<r;)e.d.push(+t.slice(i,i+=ys));t=t.slice(i),i=ys-t.length}else i-=r;for(;i--;)t+="0";if(e.d.push(+t),Is&&(e.e>oS||e.e<-oS))throw Error(SD+n)}else e.s=0,e.e=0,e.d=[0];return e}function is(e,t,n){var i,r,o,s,a,d,h,m,v=e.d;for(s=1,o=v[0];o>=10;o/=10)s++;if(i=t-s,i<0)i+=ys,r=t,h=v[m=0];else{if(m=Math.ceil((i+1)/ys),o=v.length,m>=o)return e;for(h=o=v[m],s=1;o>=10;o/=10)s++;i%=ys,r=i-ys+s}if(n!==void 0&&(o=jv(10,s-r-1),a=h/o%10|0,d=t<0||v[m+1]!==void 0||h%o,d=n<4?(a||d)&&(n==0||n==(e.s<0?3:2)):a>5||a==5&&(n==4||d||n==6&&(i>0?r>0?h/jv(10,s-r):0:v[m-1])%10&1||n==(e.s<0?8:7))),t<1||!v[0])return d?(o=Va(e),v.length=1,t=t-o-1,v[0]=jv(10,(ys-t%ys)%ys),e.e=_x(-t/ys)||0):(v.length=1,v[0]=e.e=e.s=0),e;if(i==0?(v.length=m,o=1,m--):(v.length=m+1,o=jv(10,ys-i),v[m]=r>0?(h/jv(10,s-r)%jv(10,r)|0)*o:0),d)for(;;)if(m==0){(v[0]+=o)==Fl&&(v[0]=1,++e.e);break}else{if(v[m]+=o,v[m]!=Fl)break;v[m--]=0,o=1}for(i=v.length;v[--i]===0;)v.pop();if(Is&&(e.e>oS||e.e<-oS))throw Error(SD+Va(e));return e}function q8(e,t){var n,i,r,o,s,a,d,h,m,v,w=e.constructor,R=w.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new w(e),Is?is(t,R):t;if(d=e.d,v=t.d,i=t.e,h=e.e,d=d.slice(),s=h-i,s){for(m=s<0,m?(n=d,s=-s,a=v.length):(n=v,i=h,a=d.length),r=Math.max(Math.ceil(R/ys),a)+2,s>r&&(s=r,n.length=1),n.reverse(),r=s;r--;)n.push(0);n.reverse()}else{for(r=d.length,a=v.length,m=r<a,m&&(a=r),r=0;r<a;r++)if(d[r]!=v[r]){m=d[r]<v[r];break}s=0}for(m&&(n=d,d=v,v=n,t.s=-t.s),a=d.length,r=v.length-a;r>0;--r)d[a++]=0;for(r=v.length;r>s;){if(d[--r]<v[r]){for(o=r;o&&d[--o]===0;)d[o]=Fl-1;--d[o],d[r]+=Fl}d[r]-=v[r]}for(;d[--a]===0;)d.pop();for(;d[0]===0;d.shift())--i;return d[0]?(t.d=d,t.e=i,Is?is(t,R):t):new w(0)}function l0(e,t,n){var i,r=Va(e),o=kp(e.d),s=o.length;return t?(n&&(i=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+_y(i):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(r<0?"e":"e+")+r):r<0?(o="0."+_y(-r-1)+o,n&&(i=n-s)>0&&(o+=_y(i))):r>=s?(o+=_y(r+1-s),n&&(i=n-r-1)>0&&(o=o+"."+_y(i))):((i=r+1)<s&&(o=o.slice(0,i)+"."+o.slice(i)),n&&(i=n-s)>0&&(r+1===s&&(o+="."),o+=_y(i))),e.s<0?"-"+o:o}function BO(e,t){if(e.length>t)return e.length=t,!0}function K8(e){var t,n,i;function r(o){var s=this;if(!(s instanceof r))return new r(o);if(s.constructor=r,o instanceof r){s.s=o.s,s.e=o.e,s.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(Yv+o);if(o>0)s.s=1;else if(o<0)o=-o,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(o===~~o&&o<1e7){s.e=0,s.d=[o];return}return NO(s,o.toString())}else if(typeof o!="string")throw Error(Yv+o);if(o.charCodeAt(0)===45?(o=o.slice(1),s.s=-1):s.s=1,Loe.test(o))NO(s,o);else throw Error(Yv+o)}if(r.prototype=ni,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.clone=K8,r.config=r.set=Ooe,e===void 0&&(e={}),e)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<i.length;)e.hasOwnProperty(n=i[t++])||(e[n]=this[n]);return r.config(e),r}function Ooe(e){if(!e||typeof e!="object")throw Error(Ch+"Object expected");var t,n,i,r=["precision",1,Cx,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<r.length;t+=3)if((i=e[n=r[t]])!==void 0)if(_x(i)===i&&i>=r[t+1]&&i<=r[t+2])this[n]=i;else throw Error(Yv+n+": "+i);if((i=e[n="LN10"])!==void 0)if(i==Math.LN10)this[n]=new this(i);else throw Error(Yv+n+": "+i);return this}var ED=K8(Ioe);Cd=new ED(1);const zo=ED;var zoe=e=>e,Z8={},Y8=e=>e===Z8,GO=e=>function t(){return arguments.length===0||arguments.length===1&&Y8(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},X8=(e,t)=>e===1?t:GO(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=i.filter(s=>s!==Z8).length;return o>=e?t(...i):X8(e-o,GO(function(){for(var s=arguments.length,a=new Array(s),d=0;d<s;d++)a[d]=arguments[d];var h=i.map(m=>Y8(m)?a.shift():m);return t(...h,...a)}))}),Noe=e=>X8(e.length,e),ik=(e,t)=>{for(var n=[],i=e;i<t;++i)n[i-e]=i;return n},Boe=Noe((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),Goe=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(!n.length)return zoe;var r=n.reverse(),o=r[0],s=r.slice(1);return function(){return s.reduce((a,d)=>d(a),o(...arguments))}},rk=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join("");function J8(e){var t;return e===0?t=1:t=Math.floor(new zo(e).abs().log(10).toNumber())+1,t}function Q8(e,t,n){for(var i=new zo(e),r=0,o=[];i.lt(t)&&r<1e5;)o.push(i.toNumber()),i=i.add(n),r++;return o}var eG=e=>{var[t,n]=e,[i,r]=[t,n];return t>n&&([i,r]=[n,t]),[i,r]},tG=(e,t,n)=>{if(e.lte(0))return new zo(0);var i=J8(e.toNumber()),r=new zo(10).pow(i),o=e.div(r),s=i!==1?.05:.1,a=new zo(Math.ceil(o.div(s).toNumber())).add(n).mul(s),d=a.mul(r);return t?new zo(d.toNumber()):new zo(Math.ceil(d.toNumber()))},joe=(e,t,n)=>{var i=new zo(1),r=new zo(e);if(!r.isint()&&n){var o=Math.abs(e);o<1?(i=new zo(10).pow(J8(e)-1),r=new zo(Math.floor(r.div(i).toNumber())).mul(i)):o>1&&(r=new zo(Math.floor(e)))}else e===0?r=new zo(Math.floor((t-1)/2)):n||(r=new zo(Math.floor(e)));var s=Math.floor((t-1)/2),a=Goe(Boe(d=>r.add(new zo(d-s).mul(i)).toNumber()),ik);return a(0,t)},nG=function(t,n,i,r){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(i-1)))return{step:new zo(0),tickMin:new zo(0),tickMax:new zo(0)};var s=tG(new zo(n).sub(t).div(i-1),r,o),a;t<=0&&n>=0?a=new zo(0):(a=new zo(t).add(n).div(2),a=a.sub(new zo(a).mod(s)));var d=Math.ceil(a.sub(t).div(s).toNumber()),h=Math.ceil(new zo(n).sub(a).div(s).toNumber()),m=d+h+1;return m>i?nG(t,n,i,r,o+1):(m<i&&(h=n>0?h+(i-m):h,d=n>0?d:d+(i-m)),{step:s,tickMin:a.sub(new zo(d).mul(s)),tickMax:a.add(new zo(h).mul(s))})},Hoe=function(t){var[n,i]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(r,2),[a,d]=eG([n,i]);if(a===-1/0||d===1/0){var h=d===1/0?[a,...ik(0,r-1).map(()=>1/0)]:[...ik(0,r-1).map(()=>-1/0),d];return n>i?rk(h):h}if(a===d)return joe(a,r,o);var{step:m,tickMin:v,tickMax:w}=nG(a,d,s,o,0),R=Q8(v,w.add(new zo(.1).mul(m)),m);return n>i?rk(R):R},Voe=function(t,n){var[i,r]=t,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,a]=eG([i,r]);if(s===-1/0||a===1/0)return[i,r];if(s===a)return[s];var d=Math.max(n,2),h=tG(new zo(a).sub(s).div(d-1),o,0),m=[...Q8(new zo(s),new zo(a),h),a];return o===!1&&(m=m.map(v=>Math.round(v))),i>r?rk(m):m},iG=e=>e.rootProps.maxBarSize,$oe=e=>e.rootProps.barGap,rG=e=>e.rootProps.barCategoryGap,Woe=e=>e.rootProps.barSize,D2=e=>e.rootProps.stackOffset,oG=e=>e.rootProps.reverseStackOrder,RD=e=>e.options.chartName,AD=e=>e.rootProps.syncId,sG=e=>e.rootProps.syncMethod,TD=e=>e.options.eventEmitter,Uoe=e=>e.rootProps.baseValue,Ml={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},qg={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},wd={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},F2=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},qoe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:qg.angleAxisId,includeHidden:!1,name:void 0,reversed:qg.reversed,scale:qg.scale,tick:qg.tick,tickCount:void 0,ticks:void 0,type:qg.type,unit:void 0},Koe={allowDataOverflow:wd.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:wd.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:wd.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:wd.scale,tick:wd.tick,tickCount:wd.tickCount,ticks:void 0,type:wd.type,unit:void 0},Zoe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:qg.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:qg.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:qg.scale,tick:qg.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Yoe={allowDataOverflow:wd.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:wd.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:wd.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:wd.scale,tick:wd.tick,tickCount:wd.tickCount,ticks:void 0,type:"category",unit:void 0},kD=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?Zoe:qoe,PD=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?Yoe:Koe,M2=e=>e.polarOptions,DD=Ot([vm,bm,Nl],Vne),aG=Ot([M2,DD],(e,t)=>{if(e!=null)return xf(e.innerRadius,t,0)}),lG=Ot([M2,DD],(e,t)=>{if(e!=null)return xf(e.outerRadius,t,t*.8)}),Xoe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},uG=Ot([M2],Xoe);Ot([kD,uG],F2);var cG=Ot([DD,aG,lG],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});Ot([PD,cG],F2);var dG=Ot([Yr,M2,aG,lG,vm,bm],(e,t,n,i,r,o)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||i==null)){var{cx:s,cy:a,startAngle:d,endAngle:h}=t;return{cx:xf(s,r,r/2),cy:xf(a,o,o/2),innerRadius:n,outerRadius:i,startAngle:d,endAngle:h,clockWise:!1}}}),ll=(e,t)=>t,I2=(e,t,n)=>n;function L2(e){return e==null?void 0:e.id}function hG(e,t,n){var{chartData:i=[]}=t,{allowDuplicatedCategory:r,dataKey:o}=n,s=new Map;return e.forEach(a=>{var d,h=(d=a.data)!==null&&d!==void 0?d:i;if(!(h==null||h.length===0)){var m=L2(a);h.forEach((v,w)=>{var R=o==null||r?w:String(Ea(v,o,null)),L=Ea(v,a.dataKey,0),O;s.has(R)?O=s.get(R):O={},Object.assign(O,{[m]:L}),s.set(R,O)})}}),Array.from(s.values())}function O2(e){return e.stackId!=null&&e.dataKey!=null}var z2=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function N2(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function Joe(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}var ul=e=>{var t=Yr(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Sx=e=>e.tooltip.settings.axisId;function jO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function sS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jO(Object(n),!0).forEach(function(i){Qoe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jO(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Qoe(e,t,n){return(t=ese(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ese(e){var t=tse(e,"string");return typeof t=="symbol"?t:t+""}function tse(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ok=[0,"auto"],Pl={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},fG=(e,t)=>e.cartesianAxis.xAxis[t],wm=(e,t)=>{var n=fG(e,t);return n??Pl},Dl={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:ok,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:A1},pG=(e,t)=>e.cartesianAxis.yAxis[t],Cm=(e,t)=>{var n=pG(e,t);return n??Dl},nse={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},FD=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??nse},uc=(e,t,n)=>{switch(t){case"xAxis":return wm(e,n);case"yAxis":return Cm(e,n);case"zAxis":return FD(e,n);case"angleAxis":return kD(e,n);case"radiusAxis":return PD(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},ise=(e,t,n)=>{switch(t){case"xAxis":return wm(e,n);case"yAxis":return Cm(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},O1=(e,t,n)=>{switch(t){case"xAxis":return wm(e,n);case"yAxis":return Cm(e,n);case"angleAxis":return kD(e,n);case"radiusAxis":return PD(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},gG=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function mG(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var z1=e=>e.graphicalItems.cartesianItems,rse=Ot([ll,I2],mG),yG=(e,t,n)=>e.filter(n).filter(i=>(t==null?void 0:t.includeHidden)===!0?!0:!i.hide),N1=Ot([z1,uc,rse],yG,{memoizeOptions:{resultEqualityCheck:N2}}),vG=Ot([N1],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(O2)),bG=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),ose=Ot([N1],bG),xG=e=>e.map(t=>t.data).filter(Boolean).flat(1),sse=Ot([N1],xG,{memoizeOptions:{resultEqualityCheck:N2}}),wG=(e,t)=>{var{chartData:n=[],dataStartIndex:i,dataEndIndex:r}=t;return e.length>0?e:n.slice(i,r+1)},MD=Ot([sse,L1],wG),CG=(e,t,n)=>(t==null?void 0:t.dataKey)!=null?e.map(i=>({value:Ea(i,t.dataKey)})):n.length>0?n.map(i=>i.dataKey).flatMap(i=>e.map(r=>({value:Ea(r,i)}))):e.map(i=>({value:i})),B2=Ot([MD,uc,N1],CG);function _G(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function t_(e){if(Lp(e)||e instanceof Date){var t=Number(e);if(ws(t))return t}}function HO(e){if(Array.isArray(e)){var t=[t_(e[0]),t_(e[1])];return My(t)?t:void 0}var n=t_(e);if(n!=null)return[n,n]}function hm(e){return e.map(t_).filter(UX)}function ase(e,t,n){return!n||typeof t!="number"||bf(t)?[]:n.length?hm(n.flatMap(i=>{var r=Ea(e,i.dataKey),o,s;if(Array.isArray(r)?[o,s]=r:o=s=r,!(!ws(o)||!ws(s)))return[t-o,t+s]})):[]}var cl=e=>{var t=ul(e),n=Sx(e);return O1(e,t,n)},B1=Ot([cl],e=>e==null?void 0:e.dataKey),lse=Ot([vG,L1,cl],hG),SG=(e,t,n,i)=>{var r={},o=t.reduce((s,a)=>(a.stackId==null||(s[a.stackId]==null&&(s[a.stackId]=[]),s[a.stackId].push(a)),s),r);return Object.fromEntries(Object.entries(o).map(s=>{var[a,d]=s,h=i?[...d].reverse():d,m=h.map(L2);return[a,{stackedData:bee(e,m,n),graphicalItems:h}]}))},e1=Ot([lse,vG,D2,oG],SG),EG=(e,t,n,i)=>{var{dataStartIndex:r,dataEndIndex:o}=t;if(i==null&&n!=="zAxis"){var s=_ee(e,r,o);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},use=Ot([uc],e=>e.allowDataOverflow),ID=e=>{var t;if(e==null||!("domain"in e))return ok;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=hm(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:ok},RG=Ot([uc],ID),AG=Ot([RG,use],V8),cse=Ot([e1,Hy,ll,AG],EG,{memoizeOptions:{resultEqualityCheck:z2}}),LD=e=>e.errorBars,dse=(e,t,n)=>e.flatMap(i=>t[i.id]).filter(Boolean).filter(i=>_G(n,i)),aS=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=n.filter(Boolean);if(r.length!==0){var o=r.flat(),s=Math.min(...o),a=Math.max(...o);return[s,a]}},TG=(e,t,n,i,r)=>{var o,s;if(n.length>0&&e.forEach(a=>{n.forEach(d=>{var h,m,v=(h=i[d.id])===null||h===void 0?void 0:h.filter($=>_G(r,$)),w=Ea(a,(m=t.dataKey)!==null&&m!==void 0?m:d.dataKey),R=ase(a,w,v);if(R.length>=2){var L=Math.min(...R),O=Math.max(...R);(o==null||L<o)&&(o=L),(s==null||O>s)&&(s=O)}var z=HO(w);z!=null&&(o=o==null?z[0]:Math.min(o,z[0]),s=s==null?z[1]:Math.max(s,z[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(a=>{var d=HO(Ea(a,t.dataKey));d!=null&&(o=o==null?d[0]:Math.min(o,d[0]),s=s==null?d[1]:Math.max(s,d[1]))}),ws(o)&&ws(s))return[o,s]},hse=Ot([MD,uc,ose,LD,ll],TG,{memoizeOptions:{resultEqualityCheck:z2}});function fse(e){var{value:t}=e;if(Lp(t)||t instanceof Date)return t}var pse=(e,t,n)=>{var i=e.map(fse).filter(r=>r!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&HN(i))?l8(0,e.length):t.allowDuplicatedCategory?i:Array.from(new Set(i))},kG=e=>e.referenceElements.dots,Ex=(e,t,n)=>e.filter(i=>i.ifOverflow==="extendDomain").filter(i=>t==="xAxis"?i.xAxisId===n:i.yAxisId===n),gse=Ot([kG,ll,I2],Ex),PG=e=>e.referenceElements.areas,mse=Ot([PG,ll,I2],Ex),DG=e=>e.referenceElements.lines,yse=Ot([DG,ll,I2],Ex),FG=(e,t)=>{var n=hm(e.map(i=>t==="xAxis"?i.x:i.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},vse=Ot(gse,ll,FG),MG=(e,t)=>{var n=hm(e.flatMap(i=>[t==="xAxis"?i.x1:i.y1,t==="xAxis"?i.x2:i.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},bse=Ot([mse,ll],MG);function xse(e){var t;if(e.x!=null)return hm([e.x]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(i=>i.x);return n==null||n.length===0?[]:hm(n)}function wse(e){var t;if(e.y!=null)return hm([e.y]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(i=>i.y);return n==null||n.length===0?[]:hm(n)}var IG=(e,t)=>{var n=e.flatMap(i=>t==="xAxis"?xse(i):wse(i));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Cse=Ot([yse,ll],IG),_se=Ot(vse,Cse,bse,(e,t,n)=>aS(e,n,t)),LG=(e,t,n,i,r,o,s,a)=>{if(n!=null)return n;var d=s==="vertical"&&a==="xAxis"||s==="horizontal"&&a==="yAxis",h=d?aS(i,o,r):aS(o,r);return Moe(t,h,e.allowDataOverflow)},Sse=Ot([uc,RG,AG,cse,hse,_se,Yr,ll],LG,{memoizeOptions:{resultEqualityCheck:z2}}),Ese=[0,1],OG=(e,t,n,i,r,o,s)=>{if(!((e==null||n==null||n.length===0)&&s===void 0)){var{dataKey:a,type:d}=e,h=$p(t,o);if(h&&a==null){var m;return l8(0,(m=n==null?void 0:n.length)!==null&&m!==void 0?m:0)}return d==="category"?pse(i,e,h):r==="expand"?Ese:s}},OD=Ot([uc,Yr,MD,B2,D2,ll,Sse],OG),zG=(e,t,n,i,r)=>{if(e!=null){var{scale:o,type:s}=e;if(o==="auto")return t==="radial"&&r==="radiusAxis"?"band":t==="radial"&&r==="angleAxis"?"linear":s==="category"&&i&&(i.indexOf("LineChart")>=0||i.indexOf("AreaChart")>=0||i.indexOf("ComposedChart")>=0&&!n)?"point":s==="category"?"band":"linear";if(typeof o=="string"){var a="scale".concat(C1(o));return a in xw?a:"point"}}},G1=Ot([uc,Yr,gG,RD,ll],zG);function Rse(e){if(e!=null){if(e in xw)return xw[e]();var t="scale".concat(C1(e));if(t in xw)return xw[t]()}}function zD(e,t,n,i){if(!(n==null||i==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(i);var r=Rse(t);if(r!=null){var o=r.domain(n).range(i);return pee(o),o}}}var NG=(e,t,n)=>{var i=ID(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(i)&&(i[0]==="auto"||i[1]==="auto")&&My(e))return Hoe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&My(e))return Voe(e,t.tickCount,t.allowDecimals)}},ND=Ot([OD,O1,G1],NG),BG=(e,t,n,i)=>{if(i!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&My(t)&&Array.isArray(n)&&n.length>0){var r=t[0],o=n[0],s=t[1],a=n[n.length-1];return[Math.min(r,o),Math.max(s,a)]}return t},Ase=Ot([uc,OD,ND,ll],BG),Tse=Ot(B2,uc,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,i=Array.from(hm(e.map(a=>a.value))).sort((a,d)=>a-d);if(i.length<2)return 1/0;var r=i[i.length-1]-i[0];if(r===0)return 1/0;for(var o=0;o<i.length-1;o++){var s=i[o+1]-i[o];n=Math.min(n,s)}return n/r}}),GG=Ot(Tse,Yr,rG,Nl,(e,t,n,i)=>i,(e,t,n,i,r)=>{if(!ws(e))return 0;var o=t==="vertical"?i.height:i.width;if(r==="gap")return e*o/2;if(r==="no-gap"){var s=xf(n,e*o),a=e*o/2;return a-s-(a-s)/o*s}return 0}),kse=(e,t)=>{var n=wm(e,t);return n==null||typeof n.padding!="string"?0:GG(e,"xAxis",t,n.padding)},Pse=(e,t)=>{var n=Cm(e,t);return n==null||typeof n.padding!="string"?0:GG(e,"yAxis",t,n.padding)},Dse=Ot(wm,kse,(e,t)=>{var n,i;if(e==null)return{left:0,right:0};var{padding:r}=e;return typeof r=="string"?{left:t,right:t}:{left:((n=r.left)!==null&&n!==void 0?n:0)+t,right:((i=r.right)!==null&&i!==void 0?i:0)+t}}),Fse=Ot(Cm,Pse,(e,t)=>{var n,i;if(e==null)return{top:0,bottom:0};var{padding:r}=e;return typeof r=="string"?{top:t,bottom:t}:{top:((n=r.top)!==null&&n!==void 0?n:0)+t,bottom:((i=r.bottom)!==null&&i!==void 0?i:0)+t}}),Mse=Ot([Nl,Dse,b2,v2,(e,t,n)=>n],(e,t,n,i,r)=>{var{padding:o}=i;return r?[o.left,n.width-o.right]:[e.left+t.left,e.left+e.width-t.right]}),Ise=Ot([Nl,Yr,Fse,b2,v2,(e,t,n)=>n],(e,t,n,i,r,o)=>{var{padding:s}=r;return o?[i.height-s.bottom,s.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),j1=(e,t,n,i)=>{var r;switch(t){case"xAxis":return Mse(e,n,i);case"yAxis":return Ise(e,n,i);case"zAxis":return(r=FD(e,n))===null||r===void 0?void 0:r.range;case"angleAxis":return uG(e);case"radiusAxis":return cG(e,n);default:return}},jG=Ot([uc,j1],F2),Rx=Ot([uc,G1,Ase,jG],zD);Ot([N1,LD,ll],dse);function HG(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var G2=(e,t)=>t,j2=(e,t,n)=>n,Lse=Ot(m2,G2,j2,(e,t,n)=>e.filter(i=>i.orientation===t).filter(i=>i.mirror===n).sort(HG)),Ose=Ot(y2,G2,j2,(e,t,n)=>e.filter(i=>i.orientation===t).filter(i=>i.mirror===n).sort(HG)),VG=(e,t)=>({width:e.width,height:t.height}),zse=(e,t)=>{var n=typeof t.width=="number"?t.width:A1;return{width:n,height:e.height}},$G=Ot(Nl,wm,VG),Nse=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},Bse=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},Gse=Ot(bm,Nl,Lse,G2,j2,(e,t,n,i,r)=>{var o={},s;return n.forEach(a=>{var d=VG(t,a);s==null&&(s=Nse(t,i,e));var h=i==="top"&&!r||i==="bottom"&&r;o[a.id]=s-Number(h)*d.height,s+=(h?-1:1)*d.height}),o}),jse=Ot(vm,Nl,Ose,G2,j2,(e,t,n,i,r)=>{var o={},s;return n.forEach(a=>{var d=zse(t,a);s==null&&(s=Bse(t,i,e));var h=i==="left"&&!r||i==="right"&&r;o[a.id]=s-Number(h)*d.width,s+=(h?-1:1)*d.width}),o}),Hse=(e,t)=>{var n=wm(e,t);if(n!=null)return Gse(e,n.orientation,n.mirror)},Vse=Ot([Nl,wm,Hse,(e,t)=>t],(e,t,n,i)=>{if(t!=null){var r=n==null?void 0:n[i];return r==null?{x:e.left,y:0}:{x:e.left,y:r}}}),$se=(e,t)=>{var n=Cm(e,t);if(n!=null)return jse(e,n.orientation,n.mirror)},Wse=Ot([Nl,Cm,$se,(e,t)=>t],(e,t,n,i)=>{if(t!=null){var r=n==null?void 0:n[i];return r==null?{x:0,y:e.top}:{x:r,y:e.top}}}),WG=Ot(Nl,Cm,(e,t)=>{var n=typeof t.width=="number"?t.width:A1;return{width:n,height:e.height}}),VO=(e,t,n)=>{switch(t){case"xAxis":return $G(e,n).width;case"yAxis":return WG(e,n).height;default:return}},UG=(e,t,n,i)=>{if(n!=null){var{allowDuplicatedCategory:r,type:o,dataKey:s}=n,a=$p(e,i),d=t.map(h=>h.value);if(s&&a&&o==="category"&&r&&HN(d))return d}},BD=Ot([Yr,B2,uc,ll],UG),qG=(e,t,n,i)=>{if(!(n==null||n.dataKey==null)){var{type:r,scale:o}=n,s=$p(e,i);if(s&&(r==="number"||o!=="auto"))return t.map(a=>a.value)}},GD=Ot([Yr,B2,O1,ll],qG);Ot([Yr,ise,G1,Rx,BD,GD,j1,ND,ll],(e,t,n,i,r,o,s,a,d)=>{if(t!=null){var h=$p(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:o,duplicateDomain:r,isCategorical:h,niceTicks:a,range:s,realScaleType:n,scale:i}}});var Use=(e,t,n,i,r,o,s,a,d)=>{if(!(t==null||i==null)){var h=$p(e,d),{type:m,ticks:v,tickCount:w}=t,R=n==="scaleBand"&&typeof i.bandwidth=="function"?i.bandwidth()/2:2,L=m==="category"&&i.bandwidth?i.bandwidth()/R:0;L=d==="angleAxis"&&o!=null&&o.length>=2?_d(o[0]-o[1])*2*L:L;var O=v||r;if(O){var z=O.map(($,U)=>{var Y=s?s.indexOf($):$;return{index:U,coordinate:i(Y)+L,value:$,offset:L}});return z.filter($=>ws($.coordinate))}return h&&a?a.map(($,U)=>({coordinate:i($)+L,value:$,index:U,offset:L})).filter($=>ws($.coordinate)):i.ticks?i.ticks(w).map($=>({coordinate:i($)+L,value:$,offset:L})):i.domain().map(($,U)=>({coordinate:i($)+L,value:s?s[$]:$,index:U,offset:L}))}},KG=Ot([Yr,O1,G1,Rx,ND,j1,BD,GD,ll],Use),qse=(e,t,n,i,r,o,s)=>{if(!(t==null||n==null||i==null||i[0]===i[1])){var a=$p(e,s),{tickCount:d}=t,h=0;return h=s==="angleAxis"&&(i==null?void 0:i.length)>=2?_d(i[0]-i[1])*2*h:h,a&&o?o.map((m,v)=>({coordinate:n(m)+h,value:m,index:v,offset:h})):n.ticks?n.ticks(d).map(m=>({coordinate:n(m)+h,value:m,offset:h})):n.domain().map((m,v)=>({coordinate:n(m)+h,value:r?r[m]:m,index:v,offset:h}))}},zp=Ot([Yr,O1,Rx,j1,BD,GD,ll],qse),Np=Ot(uc,Rx,(e,t)=>{if(!(e==null||t==null))return sS(sS({},e),{},{scale:t})}),Kse=Ot([uc,G1,OD,jG],zD);Ot((e,t,n)=>FD(e,n),Kse,(e,t)=>{if(!(e==null||t==null))return sS(sS({},e),{},{scale:t})});var Zse=Ot([Yr,m2,y2],(e,t,n)=>{switch(e){case"horizontal":return t.some(i=>i.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(i=>i.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),ZG=e=>e.options.defaultTooltipEventType,YG=e=>e.options.validateTooltipEventTypes;function XG(e,t,n){if(e==null)return t;var i=e?"axis":"item";return n==null?t:n.includes(i)?i:t}function jD(e,t){var n=ZG(e),i=YG(e);return XG(t,n,i)}function Yse(e){return bi(t=>jD(t,e))}var JG=(e,t)=>{var n,i=Number(t);if(!(bf(i)||t==null))return i>=0?e==null||(n=e[i])===null||n===void 0?void 0:n.value:void 0},Xse=e=>e.tooltip.settings,Ry={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Jse={itemInteraction:{click:Ry,hover:Ry},axisInteraction:{click:Ry,hover:Ry},keyboardInteraction:Ry,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},QG=Vc({name:"tooltip",initialState:Jse,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Ms()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:n,next:i}=t.payload,r=yf(e).tooltipItemPayloads.indexOf(n);r>-1&&(e.tooltipItemPayloads[r]=i)},prepare:Ms()},removeTooltipEntrySettings:{reducer(e,t){var n=yf(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:Ms()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Qse,replaceTooltipEntrySettings:eae,removeTooltipEntrySettings:tae,setTooltipSettingsState:nae,setActiveMouseOverItemIndex:ej,mouseLeaveItem:iae,mouseLeaveChart:tj,setActiveClickItemIndex:rae,setMouseOverAxisIndex:nj,setMouseClickAxisIndex:oae,setSyncInteraction:sk,setKeyboardInteraction:ak}=QG.actions,sae=QG.reducer;function $O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function PC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$O(Object(n),!0).forEach(function(i){aae(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$O(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function aae(e,t,n){return(t=lae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lae(e){var t=uae(e,"string");return typeof t=="symbol"?t:t+""}function uae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cae(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function dae(e){return e.index!=null}var ij=(e,t,n,i)=>{if(t==null)return Ry;var r=cae(e,t,n);if(r==null)return Ry;if(r.active)return r;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var o=e.settings.active===!0;if(dae(r)){if(o)return PC(PC({},r),{},{active:!0})}else if(i!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:i,graphicalItemId:void 0};return PC(PC({},Ry),{},{coordinate:r.coordinate})};function hae(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var n=Number(e);return Number.isFinite(n)?n:void 0}function fae(e,t){var n=hae(e),i=t[0],r=t[1];if(n===void 0)return!1;var o=Math.min(i,r),s=Math.max(i,r);return n>=o&&n<=s}function pae(e,t,n){if(n==null||t==null)return!0;var i=Ea(e,t);return i==null||!My(n)?!0:fae(i,n)}var HD=(e,t,n,i)=>{var r=e==null?void 0:e.index;if(r==null)return null;var o=Number(r);if(!ws(o))return r;var s=0,a=1/0;t.length>0&&(a=t.length-1);var d=Math.max(s,Math.min(o,a)),h=t[d];return h==null||pae(h,n,i)?String(d):null},rj=(e,t,n,i,r,o,s,a)=>{if(!(o==null||a==null)){var d=s[0],h=d==null?void 0:a(d.positions,o);if(h!=null)return h;var m=r==null?void 0:r[Number(o)];if(m)switch(n){case"horizontal":return{x:m.coordinate,y:(i.top+t)/2};default:return{x:(i.left+e)/2,y:m.coordinate}}}},oj=(e,t,n,i)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var r;return n==="hover"?r=e.itemInteraction.hover.dataKey:r=e.itemInteraction.click.dataKey,r==null&&i!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(o=>{var s;return((s=o.settings)===null||s===void 0?void 0:s.dataKey)===r})},H1=e=>e.options.tooltipPayloadSearcher,Ax=e=>e.tooltip;function WO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function UO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WO(Object(n),!0).forEach(function(i){gae(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WO(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function gae(e,t,n){return(t=mae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mae(e){var t=yae(e,"string");return typeof t=="symbol"?t:t+""}function yae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vae(e,t){return e??t}var sj=(e,t,n,i,r,o,s)=>{if(!(t==null||o==null)){var{chartData:a,computedData:d,dataStartIndex:h,dataEndIndex:m}=n,v=[];return e.reduce((w,R)=>{var L,{dataDefinedOnItem:O,settings:z}=R,$=vae(O,a),U=Array.isArray($)?OB($,h,m):$,Y=(L=z==null?void 0:z.dataKey)!==null&&L!==void 0?L:i,X=z==null?void 0:z.nameKey,q;if(i&&Array.isArray(U)&&!Array.isArray(U[0])&&s==="axis"?q=VN(U,i,r):q=o(U,t,d,X),Array.isArray(q))q.forEach(re=>{var J=UO(UO({},z),{},{name:re.name,unit:re.unit,color:void 0,fill:void 0});w.push(h5({tooltipEntrySettings:J,dataKey:re.dataKey,payload:re.payload,value:Ea(re.payload,re.dataKey),name:re.name}))});else{var ie;w.push(h5({tooltipEntrySettings:z,dataKey:Y,payload:q,value:Ea(q,Y),name:(ie=Ea(q,X))!==null&&ie!==void 0?ie:z==null?void 0:z.name}))}return w},v)}},VD=Ot([cl,Yr,gG,RD,ul],zG),bae=Ot([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),xae=Ot([ul,Sx],mG),V1=Ot([bae,cl,xae],yG,{memoizeOptions:{resultEqualityCheck:N2}}),wae=Ot([V1],e=>e.filter(O2)),Cae=Ot([V1],xG,{memoizeOptions:{resultEqualityCheck:N2}}),Tx=Ot([Cae,Hy],wG),_ae=Ot([wae,Hy,cl],hG),$D=Ot([Tx,cl,V1],CG),aj=Ot([cl],ID),Sae=Ot([cl],e=>e.allowDataOverflow),lj=Ot([aj,Sae],V8),Eae=Ot([V1],e=>e.filter(O2)),Rae=Ot([_ae,Eae,D2,oG],SG),Aae=Ot([Rae,Hy,ul,lj],EG),Tae=Ot([V1],bG),kae=Ot([Tx,cl,Tae,LD,ul],TG,{memoizeOptions:{resultEqualityCheck:z2}}),Pae=Ot([kG,ul,Sx],Ex),Dae=Ot([Pae,ul],FG),Fae=Ot([PG,ul,Sx],Ex),Mae=Ot([Fae,ul],MG),Iae=Ot([DG,ul,Sx],Ex),Lae=Ot([Iae,ul],IG),Oae=Ot([Dae,Lae,Mae],aS),zae=Ot([cl,aj,lj,Aae,kae,Oae,Yr,ul],LG),$1=Ot([cl,Yr,Tx,$D,D2,ul,zae],OG),Nae=Ot([$1,cl,VD],NG),Bae=Ot([cl,$1,Nae,ul],BG),uj=e=>{var t=ul(e),n=Sx(e),i=!1;return j1(e,t,n,i)},cj=Ot([cl,uj],F2),dj=Ot([cl,VD,Bae,cj],zD),Gae=Ot([Yr,$D,cl,ul],UG),jae=Ot([Yr,$D,cl,ul],qG),Hae=(e,t,n,i,r,o,s,a)=>{if(t){var{type:d}=t,h=$p(e,a);if(i){var m=n==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,v=d==="category"&&i.bandwidth?i.bandwidth()/m:0;return v=a==="angleAxis"&&r!=null&&(r==null?void 0:r.length)>=2?_d(r[0]-r[1])*2*v:v,h&&s?s.map((w,R)=>({coordinate:i(w)+v,value:w,index:R,offset:v})):i.domain().map((w,R)=>({coordinate:i(w)+v,value:o?o[w]:w,index:R,offset:v}))}}},_m=Ot([Yr,cl,VD,dj,uj,Gae,jae,ul],Hae),WD=Ot([ZG,YG,Xse],(e,t,n)=>XG(n.shared,e,t)),hj=e=>e.tooltip.settings.trigger,UD=e=>e.tooltip.settings.defaultIndex,W1=Ot([Ax,WD,hj,UD],ij),u0=Ot([W1,Tx,B1,$1],HD),fj=Ot([_m,u0],JG),pj=Ot([W1],e=>{if(e)return e.dataKey});Ot([W1],e=>{if(e)return e.graphicalItemId});var gj=Ot([Ax,WD,hj,UD],oj),Vae=Ot([vm,bm,Yr,Nl,_m,UD,gj,H1],rj),$ae=Ot([W1,Vae],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),Wae=Ot([W1],e=>e.active),Uae=Ot([gj,u0,Hy,B1,fj,H1,WD],sj),qae=Ot([Uae],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function qO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function KO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qO(Object(n),!0).forEach(function(i){Kae(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qO(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Kae(e,t,n){return(t=Zae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zae(e){var t=Yae(e,"string");return typeof t=="symbol"?t:t+""}function Yae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xae=()=>bi(cl),Jae=()=>{var e=Xae(),t=bi(_m),n=bi(dj);return Dy(!e||!n?void 0:KO(KO({},e),{},{scale:n}),t)};function ZO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function db(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZO(Object(n),!0).forEach(function(i){Qae(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZO(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Qae(e,t,n){return(t=ele(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ele(e){var t=tle(e,"string");return typeof t=="symbol"?t:t+""}function tle(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nle=(e,t,n,i)=>{var r=t.find(o=>o&&o.index===n);if(r){if(e==="horizontal")return{x:r.coordinate,y:i.chartY};if(e==="vertical")return{x:i.chartX,y:r.coordinate}}return{x:0,y:0}},ile=(e,t,n,i)=>{var r=t.find(h=>h&&h.index===n);if(r){if(e==="centric"){var o=r.coordinate,{radius:s}=i;return db(db(db({},i),au(i.cx,i.cy,s,o)),{},{angle:o,radius:s})}var a=r.coordinate,{angle:d}=i;return db(db(db({},i),au(i.cx,i.cy,a,d)),{},{angle:d,radius:a})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function rle(e,t){var{chartX:n,chartY:i}=e;return n>=t.left&&n<=t.left+t.width&&i>=t.top&&i<=t.top+t.height}var mj=(e,t,n,i,r)=>{var o,s=-1,a=(o=t==null?void 0:t.length)!==null&&o!==void 0?o:0;if(a<=1||e==null)return 0;if(i==="angleAxis"&&r!=null&&Math.abs(Math.abs(r[1]-r[0])-360)<=1e-6)for(var d=0;d<a;d++){var h=d>0?n[d-1].coordinate:n[a-1].coordinate,m=n[d].coordinate,v=d>=a-1?n[0].coordinate:n[d+1].coordinate,w=void 0;if(_d(m-h)!==_d(v-m)){var R=[];if(_d(v-m)===_d(r[1]-r[0])){w=v;var L=m+r[1]-r[0];R[0]=Math.min(L,(L+h)/2),R[1]=Math.max(L,(L+h)/2)}else{w=h;var O=v+r[1]-r[0];R[0]=Math.min(m,(O+m)/2),R[1]=Math.max(m,(O+m)/2)}var z=[Math.min(m,(w+m)/2),Math.max(m,(w+m)/2)];if(e>z[0]&&e<=z[1]||e>=R[0]&&e<=R[1]){({index:s}=n[d]);break}}else{var $=Math.min(h,v),U=Math.max(h,v);if(e>($+m)/2&&e<=(U+m)/2){({index:s}=n[d]);break}}}else if(t){for(var Y=0;Y<a;Y++)if(Y===0&&e<=(t[Y].coordinate+t[Y+1].coordinate)/2||Y>0&&Y<a-1&&e>(t[Y].coordinate+t[Y-1].coordinate)/2&&e<=(t[Y].coordinate+t[Y+1].coordinate)/2||Y===a-1&&e>(t[Y].coordinate+t[Y-1].coordinate)/2){({index:s}=t[Y]);break}}return s},yj=()=>bi(RD),qD=(e,t)=>t,vj=(e,t,n)=>n,KD=(e,t,n,i)=>i,ole=Ot(_m,e=>a2(e,t=>t.coordinate)),ZD=Ot([Ax,qD,vj,KD],ij),YD=Ot([ZD,Tx,B1,$1],HD),sle=(e,t,n)=>{if(t!=null){var i=Ax(e);return t==="axis"?n==="hover"?i.axisInteraction.hover.dataKey:i.axisInteraction.click.dataKey:n==="hover"?i.itemInteraction.hover.dataKey:i.itemInteraction.click.dataKey}},bj=Ot([Ax,qD,vj,KD],oj),lS=Ot([vm,bm,Yr,Nl,_m,KD,bj,H1],rj),ale=Ot([ZD,lS],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),xj=Ot([_m,YD],JG),lle=Ot([bj,YD,Hy,B1,xj,H1,qD],sj),ule=Ot([ZD,YD],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),cle=(e,t,n,i,r,o,s)=>{if(!(!e||!n||!i||!r)&&rle(e,s)){var a=See(e,t),d=mj(a,o,r,n,i),h=nle(t,r,d,e);return{activeIndex:String(d),activeCoordinate:h}}},dle=(e,t,n,i,r,o,s)=>{if(!(!e||!i||!r||!o||!n)){var a=Kne(e,n);if(a){var d=Eee(a,t),h=mj(d,s,o,i,r),m=ile(t,o,h,a);return{activeIndex:String(h),activeCoordinate:m}}}},hle=(e,t,n,i,r,o,s,a)=>{if(!(!e||!t||!i||!r||!o))return t==="horizontal"||t==="vertical"?cle(e,t,i,r,o,s,a):dle(e,t,n,i,r,o,s)},fle=Ot(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,n)=>n,(e,t,n)=>{if(t!=null){var i=e[t];if(i!=null)return n?i.panoramaElementId:i.elementId}}),ple=Ot(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(i=>parseInt(i,10)).concat(Object.values(Ml)),n=Array.from(new Set(t));return n.sort((i,r)=>i-r)},{memoizeOptions:{resultEqualityCheck:Joe}});function YO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function XO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YO(Object(n),!0).forEach(function(i){gle(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YO(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function gle(e,t,n){return(t=mle(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mle(e){var t=yle(e,"string");return typeof t=="symbol"?t:t+""}function yle(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vle={},ble={zIndexMap:Object.values(Ml).reduce((e,t)=>XO(XO({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),vle)},xle=new Set(Object.values(Ml));function wle(e){return xle.has(e)}var wj=Vc({name:"zIndex",initialState:ble,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Ms()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!wle(n)&&delete e.zIndexMap[n])},prepare:Ms()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:n,elementId:i,isPanorama:r}=t.payload;e.zIndexMap[n]?r?e.zIndexMap[n].panoramaElementId=i:e.zIndexMap[n].elementId=i:e.zIndexMap[n]={consumers:0,elementId:r?void 0:i,panoramaElementId:r?i:void 0}},prepare:Ms()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(t.payload.isPanorama?e.zIndexMap[n].panoramaElementId=void 0:e.zIndexMap[n].elementId=void 0)},prepare:Ms()}}}),{registerZIndexPortal:Cle,unregisterZIndexPortal:_le,registerZIndexPortalId:Sle,unregisterZIndexPortalId:Ele}=wj.actions,Rle=wj.reducer;function kh(e){var{zIndex:t,children:n}=e,i=ste(),r=i&&t!==void 0&&t!==0,o=uu(),s=Zs();I.useLayoutEffect(()=>r?(s(Cle({zIndex:t})),()=>{s(_le({zIndex:t}))}):_1,[s,t,r]);var a=bi(h=>fle(h,t,o));if(!r)return n;if(!a)return null;var d=document.getElementById(a);return d?b0.createPortal(n,d):null}function lk(){return lk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},lk.apply(null,arguments)}function JO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function DC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JO(Object(n),!0).forEach(function(i){Ale(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JO(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Ale(e,t,n){return(t=Tle(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tle(e){var t=kle(e,"string");return typeof t=="symbol"?t:t+""}function kle(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ple(e){var{cursor:t,cursorComp:n,cursorProps:i}=e;return I.isValidElement(t)?I.cloneElement(t,i):I.createElement(n,i)}function Dle(e){var t,{coordinate:n,payload:i,index:r,offset:o,tooltipAxisBandSize:s,layout:a,cursor:d,tooltipEventType:h,chartName:m}=e,v=n,w=i,R=r;if(!d||!v||m!=="ScatterChart"&&h!=="axis")return null;var L,O,z;if(m==="ScatterChart")L=v,O=lne,z=Ml.cursorLine;else if(m==="BarChart")L=une(a,v,o,s),O=r8,z=Ml.cursorRectangle;else if(a==="radial"&&WN(v)){var{cx:$,cy:U,radius:Y,startAngle:X,endAngle:q}=o8(v);L={cx:$,cy:U,startAngle:X,endAngle:q,innerRadius:Y,outerRadius:Y},O=a8,z=Ml.cursorLine}else L={points:Jne(a,v,o)},O=Ew,z=Ml.cursorLine;var ie=typeof d=="object"&&"className"in d?d.className:void 0,re=DC(DC(DC(DC({stroke:"#ccc",pointerEvents:"none"},o),L),w1(d)),{},{payload:w,payloadIndex:R,className:Fo("recharts-tooltip-cursor",ie)});return I.createElement(kh,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:z},I.createElement(Ple,{cursor:d,cursorComp:O,cursorProps:re}))}function Fle(e){var t=Jae(),n=ite(),i=x0(),r=yj();return t==null||n==null||i==null||r==null?null:I.createElement(Dle,lk({},e,{offset:n,layout:i,tooltipAxisBandSize:t,chartName:r}))}var Cj=I.createContext(null),Mle=()=>I.useContext(Cj),iA={exports:{}},QO;function Ile(){return QO||(QO=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function r(d,h,m){this.fn=d,this.context=h,this.once=m||!1}function o(d,h,m,v,w){if(typeof m!="function")throw new TypeError("The listener must be a function");var R=new r(m,v||d,w),L=n?n+h:h;return d._events[L]?d._events[L].fn?d._events[L]=[d._events[L],R]:d._events[L].push(R):(d._events[L]=R,d._eventsCount++),d}function s(d,h){--d._eventsCount===0?d._events=new i:delete d._events[h]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var h=[],m,v;if(this._eventsCount===0)return h;for(v in m=this._events)t.call(m,v)&&h.push(n?v.slice(1):v);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(m)):h},a.prototype.listeners=function(h){var m=n?n+h:h,v=this._events[m];if(!v)return[];if(v.fn)return[v.fn];for(var w=0,R=v.length,L=new Array(R);w<R;w++)L[w]=v[w].fn;return L},a.prototype.listenerCount=function(h){var m=n?n+h:h,v=this._events[m];return v?v.fn?1:v.length:0},a.prototype.emit=function(h,m,v,w,R,L){var O=n?n+h:h;if(!this._events[O])return!1;var z=this._events[O],$=arguments.length,U,Y;if(z.fn){switch(z.once&&this.removeListener(h,z.fn,void 0,!0),$){case 1:return z.fn.call(z.context),!0;case 2:return z.fn.call(z.context,m),!0;case 3:return z.fn.call(z.context,m,v),!0;case 4:return z.fn.call(z.context,m,v,w),!0;case 5:return z.fn.call(z.context,m,v,w,R),!0;case 6:return z.fn.call(z.context,m,v,w,R,L),!0}for(Y=1,U=new Array($-1);Y<$;Y++)U[Y-1]=arguments[Y];z.fn.apply(z.context,U)}else{var X=z.length,q;for(Y=0;Y<X;Y++)switch(z[Y].once&&this.removeListener(h,z[Y].fn,void 0,!0),$){case 1:z[Y].fn.call(z[Y].context);break;case 2:z[Y].fn.call(z[Y].context,m);break;case 3:z[Y].fn.call(z[Y].context,m,v);break;case 4:z[Y].fn.call(z[Y].context,m,v,w);break;default:if(!U)for(q=1,U=new Array($-1);q<$;q++)U[q-1]=arguments[q];z[Y].fn.apply(z[Y].context,U)}}return!0},a.prototype.on=function(h,m,v){return o(this,h,m,v,!1)},a.prototype.once=function(h,m,v){return o(this,h,m,v,!0)},a.prototype.removeListener=function(h,m,v,w){var R=n?n+h:h;if(!this._events[R])return this;if(!m)return s(this,R),this;var L=this._events[R];if(L.fn)L.fn===m&&(!w||L.once)&&(!v||L.context===v)&&s(this,R);else{for(var O=0,z=[],$=L.length;O<$;O++)(L[O].fn!==m||w&&!L[O].once||v&&L[O].context!==v)&&z.push(L[O]);z.length?this._events[R]=z.length===1?z[0]:z:s(this,R)}return this},a.prototype.removeAllListeners=function(h){var m;return h?(m=n?n+h:h,this._events[m]&&s(this,m)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a})(iA)),iA.exports}var Lle=Ile();const Ole=Ol(Lle);var t1=new Ole,uk="recharts.syncEvent.tooltip",e3="recharts.syncEvent.brush";function XD(e,t){if(t){var n=Number.parseInt(t,10);if(!bf(n))return e==null?void 0:e[n]}}var zle={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},_j=Vc({name:"options",initialState:zle,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Nle=_j.reducer,{createEventEmitter:Ble}=_j.actions;function Gle(e){return e.tooltip.syncInteraction}var jle={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Sj=Vc({name:"chartData",initialState:jle,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:i}=t.payload;n!=null&&(e.dataStartIndex=n),i!=null&&(e.dataEndIndex=i)}}}),{setChartData:t3,setDataStartEndIndexes:Hle,setComputedData:WDe}=Sj.actions,Vle=Sj.reducer,$le=["x","y"];function n3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function hb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?n3(Object(n),!0).forEach(function(i){Wle(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Wle(e,t,n){return(t=Ule(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ule(e){var t=qle(e,"string");return typeof t=="symbol"?t:t+""}function qle(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kle(e,t){if(e==null)return{};var n,i,r=Zle(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Zle(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function Yle(){var e=bi(AD),t=bi(TD),n=Zs(),i=bi(sG),r=bi(_m),o=x0(),s=x2(),a=bi(d=>d.rootProps.className);I.useEffect(()=>{if(e==null)return _1;var d=(h,m,v)=>{if(t!==v&&e===h){if(i==="index"){var w;if(s&&m!==null&&m!==void 0&&(w=m.payload)!==null&&w!==void 0&&w.coordinate&&m.payload.sourceViewBox){var R=m.payload.coordinate,{x:L,y:O}=R,z=Kle(R,$le),{x:$,y:U,width:Y,height:X}=m.payload.sourceViewBox,q=hb(hb({},z),{},{x:s.x+(Y?(L-$)/Y:0)*s.width,y:s.y+(X?(O-U)/X:0)*s.height});n(hb(hb({},m),{},{payload:hb(hb({},m.payload),{},{coordinate:q})}))}else n(m);return}if(r!=null){var ie;if(typeof i=="function"){var re={activeTooltipIndex:m.payload.index==null?void 0:Number(m.payload.index),isTooltipActive:m.payload.active,activeIndex:m.payload.index==null?void 0:Number(m.payload.index),activeLabel:m.payload.label,activeDataKey:m.payload.dataKey,activeCoordinate:m.payload.coordinate},J=i(r,re);ie=r[J]}else i==="value"&&(ie=r.find(fe=>String(fe.value)===m.payload.label));var{coordinate:ne}=m.payload;if(ie==null||m.payload.active===!1||ne==null||s==null){n(sk({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:be,y:ue}=ne,ve=Math.min(be,s.x+s.width),ce=Math.min(ue,s.y+s.height),Ie={x:o==="horizontal"?ie.coordinate:ve,y:o==="horizontal"?ce:ie.coordinate},Te=sk({active:m.payload.active,coordinate:Ie,dataKey:m.payload.dataKey,index:String(ie.index),label:m.payload.label,sourceViewBox:m.payload.sourceViewBox,graphicalItemId:m.payload.graphicalItemId});n(Te)}}};return t1.on(uk,d),()=>{t1.off(uk,d)}},[a,n,t,e,i,r,o,s])}function Xle(){var e=bi(AD),t=bi(TD),n=Zs();I.useEffect(()=>{if(e==null)return _1;var i=(r,o,s)=>{t!==s&&e===r&&n(Hle(o))};return t1.on(e3,i),()=>{t1.off(e3,i)}},[n,t,e])}function Jle(){var e=Zs();I.useEffect(()=>{e(Ble())},[e]),Yle(),Xle()}function Qle(e,t,n,i,r,o){var s=bi(R=>sle(R,e,t)),a=bi(TD),d=bi(AD),h=bi(sG),m=bi(Gle),v=m==null?void 0:m.active,w=x2();I.useEffect(()=>{if(!v&&d!=null&&a!=null){var R=sk({active:o,coordinate:n,dataKey:s,index:r,label:typeof i=="number"?String(i):i,sourceViewBox:w,graphicalItemId:void 0});t1.emit(uk,d,R,a)}},[v,n,s,r,i,a,d,h,o,w])}function i3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function r3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?i3(Object(n),!0).forEach(function(i){eue(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function eue(e,t,n){return(t=tue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tue(e){var t=nue(e,"string");return typeof t=="symbol"?t:t+""}function nue(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iue(e){return e.dataKey}function rue(e,t){return I.isValidElement(e)?I.cloneElement(e,t):typeof e=="function"?I.createElement(e,t):I.createElement(jte,t)}var o3=[],oue={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function n_(e){var t,n,i=zl(e,oue),{active:r,allowEscapeViewBox:o,animationDuration:s,animationEasing:a,content:d,filterNull:h,isAnimationActive:m,offset:v,payloadUniqBy:w,position:R,reverseDirection:L,useTranslate3d:O,wrapperStyle:z,cursor:$,shared:U,trigger:Y,defaultIndex:X,portal:q,axisId:ie}=i,re=Zs(),J=typeof X=="number"?String(X):X;I.useEffect(()=>{re(nae({shared:U,trigger:Y,axisId:ie,active:r,defaultIndex:J}))},[re,U,Y,ie,r,J]);var ne=x2(),be=QB(),ue=Yse(U),{activeIndex:ve,isActive:ce}=(t=bi(Xt=>ule(Xt,ue,Y,J)))!==null&&t!==void 0?t:{},Ie=bi(Xt=>lle(Xt,ue,Y,J)),Te=bi(Xt=>xj(Xt,ue,Y,J)),fe=bi(Xt=>ale(Xt,ue,Y,J)),he=Ie,Re=Mle(),De=(n=r??ce)!==null&&n!==void 0?n:!1,[Ye,_e]=sB([he,De]),Le=ue==="axis"?Te:void 0;Qle(ue,Y,fe,Le,ve,De);var Oe=q??Re;if(Oe==null||ne==null||ue==null)return null;var yt=he??o3;De||(yt=o3),h&&yt.length&&(yt=tB(yt.filter(Xt=>Xt.value!=null&&(Xt.hide!==!0||i.includeHidden)),w,iue));var xt=yt.length>0,Vt=I.createElement(Kte,{allowEscapeViewBox:o,animationDuration:s,animationEasing:a,isAnimationActive:m,active:De,coordinate:fe,hasPayload:xt,offset:v,position:R,reverseDirection:L,useTranslate3d:O,viewBox:ne,wrapperStyle:z,lastBoundingBox:Ye,innerRef:_e,hasPortalFromProps:!!q},rue(d,r3(r3({},i),{},{payload:yt,label:Le,active:De,activeIndex:ve,coordinate:fe,accessibilityLayer:be})));return I.createElement(I.Fragment,null,b0.createPortal(Vt,Oe),De&&I.createElement(Fle,{cursor:$,tooltipEventType:ue,coordinate:fe,payload:yt,index:ve}))}var Ej=e=>null;Ej.displayName="Cell";function sue(e,t,n){return(t=aue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aue(e){var t=lue(e,"string");return typeof t=="symbol"?t:t+""}function lue(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class uue{constructor(t){sue(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var i=this.cache.keys().next().value;i!=null&&this.cache.delete(i)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function s3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function cue(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?s3(Object(n),!0).forEach(function(i){due(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function due(e,t,n){return(t=hue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hue(e){var t=fue(e,"string");return typeof t=="symbol"?t:t+""}function fue(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pue={cacheSize:2e3,enableCache:!0},Rj=cue({},pue),a3=new uue(Rj.cacheSize),gue={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},l3="recharts_measurement_span";function mue(e,t){var n=t.fontSize||"",i=t.fontFamily||"",r=t.fontWeight||"",o=t.fontStyle||"",s=t.letterSpacing||"",a=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(i,"|").concat(r,"|").concat(o,"|").concat(s,"|").concat(a)}var u3=(e,t)=>{try{var n=document.getElementById(l3);n||(n=document.createElement("span"),n.setAttribute("id",l3),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,gue,t),n.textContent="".concat(e);var i=n.getBoundingClientRect();return{width:i.width,height:i.height}}catch{return{width:0,height:0}}},Rw=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||xx.isSsr)return{width:0,height:0};if(!Rj.enableCache)return u3(t,n);var i=mue(t,n),r=a3.get(i);if(r)return r;var o=u3(t,n);return a3.set(i,o),o},c3=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,d3=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,yue=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,vue=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Aj={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},bue=Object.keys(Aj),xb="NaN";function xue(e,t){return e*Aj[t]}class Oc{static parse(t){var n,[,i,r]=(n=vue.exec(t))!==null&&n!==void 0?n:[];return new Oc(parseFloat(i),r??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,bf(t)&&(this.unit=""),n!==""&&!yue.test(n)&&(this.num=NaN,this.unit=""),bue.includes(n)&&(this.num=xue(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new Oc(NaN,""):new Oc(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Oc(NaN,""):new Oc(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Oc(NaN,""):new Oc(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Oc(NaN,""):new Oc(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return bf(this.num)}}function Tj(e){if(e.includes(xb))return xb;for(var t=e;t.includes("*")||t.includes("/");){var n,[,i,r,o]=(n=c3.exec(t))!==null&&n!==void 0?n:[],s=Oc.parse(i??""),a=Oc.parse(o??""),d=r==="*"?s.multiply(a):s.divide(a);if(d.isNaN())return xb;t=t.replace(c3,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,[,m,v,w]=(h=d3.exec(t))!==null&&h!==void 0?h:[],R=Oc.parse(m??""),L=Oc.parse(w??""),O=v==="+"?R.add(L):R.subtract(L);if(O.isNaN())return xb;t=t.replace(d3,O.toString())}return t}var h3=/\(([^()]*)\)/;function wue(e){for(var t=e,n;(n=h3.exec(t))!=null;){var[,i]=n;t=t.replace(h3,Tj(i))}return t}function Cue(e){var t=e.replace(/\s+/g,"");return t=wue(t),t=Tj(t),t}function _ue(e){try{return Cue(e)}catch{return xb}}function rA(e){var t=_ue(e.slice(5,-1));return t===xb?"":t}var Sue=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Eue=["dx","dy","angle","className","breakAll"];function ck(){return ck=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ck.apply(null,arguments)}function f3(e,t){if(e==null)return{};var n,i,r=Rue(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Rue(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}var kj=/[ \f\n\r\t\v\u2028\u2029]+/,Pj=e=>{var{children:t,breakAll:n,style:i}=e;try{var r=[];bs(t)||(n?r=t.toString().split(""):r=t.toString().split(kj));var o=r.map(a=>({word:a,width:Rw(a,i).width})),s=n?0:Rw("",i).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch{return null}};function Aue(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var Dj=(e,t,n,i)=>e.reduce((r,o)=>{var{word:s,width:a}=o,d=r[r.length-1];if(d&&a!=null&&(t==null||i||d.width+a+n<Number(t)))d.words.push(s),d.width+=a+n;else{var h={words:[s],width:a};r.push(h)}return r},[]),Fj=e=>e.reduce((t,n)=>t.width>n.width?t:n),Tue="",p3=(e,t,n,i,r,o,s,a)=>{var d=e.slice(0,t),h=Pj({breakAll:n,style:i,children:d+Tue});if(!h)return[!1,[]];var m=Dj(h.wordsWithComputedWidth,o,s,a),v=m.length>r||Fj(m).width>Number(o);return[v,m]},kue=(e,t,n,i,r)=>{var{maxLines:o,children:s,style:a,breakAll:d}=e,h=fi(o),m=String(s),v=Dj(t,i,n,r);if(!h||r)return v;var w=v.length>o||Fj(v).width>Number(i);if(!w)return v;for(var R=0,L=m.length-1,O=0,z;R<=L&&O<=m.length-1;){var $=Math.floor((R+L)/2),U=$-1,[Y,X]=p3(m,U,d,a,o,i,n,r),[q]=p3(m,$,d,a,o,i,n,r);if(!Y&&!q&&(R=$+1),Y&&q&&(L=$-1),!Y&&q){z=X;break}O++}return z||v},g3=e=>{var t=bs(e)?[]:e.toString().split(kj);return[{words:t,width:void 0}]},Pue=e=>{var{width:t,scaleToFit:n,children:i,style:r,breakAll:o,maxLines:s}=e;if((t||n)&&!xx.isSsr){var a,d,h=Pj({breakAll:o,children:i,style:r});if(h){var{wordsWithComputedWidth:m,spaceWidth:v}=h;a=m,d=v}else return g3(i);return kue({breakAll:o,children:i,maxLines:s,style:r},a,d,t,!!n)}return g3(i)},Mj="#808080",Due={angle:0,breakAll:!1,capHeight:"0.71em",fill:Mj,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},JD=I.forwardRef((e,t)=>{var n=zl(e,Due),{x:i,y:r,lineHeight:o,capHeight:s,fill:a,scaleToFit:d,textAnchor:h,verticalAnchor:m}=n,v=f3(n,Sue),w=I.useMemo(()=>Pue({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:d,style:v.style,width:v.width}),[v.breakAll,v.children,v.maxLines,d,v.style,v.width]),{dx:R,dy:L,angle:O,className:z,breakAll:$}=v,U=f3(v,Eue);if(!Lp(i)||!Lp(r)||w.length===0)return null;var Y=Number(i)+(fi(R)?R:0),X=Number(r)+(fi(L)?L:0);if(!ws(Y)||!ws(X))return null;var q;switch(m){case"start":q=rA("calc(".concat(s,")"));break;case"middle":q=rA("calc(".concat((w.length-1)/2," * -").concat(o," + (").concat(s," / 2))"));break;default:q=rA("calc(".concat(w.length-1," * -").concat(o,")"));break}var ie=[];if(d){var re=w[0].width,{width:J}=v;ie.push("scale(".concat(fi(J)&&fi(re)?J/re:1,")"))}return O&&ie.push("rotate(".concat(O,", ").concat(Y,", ").concat(X,")")),ie.length&&(U.transform=ie.join(" ")),I.createElement("text",ck({},Tu(U),{ref:t,x:Y,y:X,className:Fo("recharts-text",z),textAnchor:h,fill:a.includes("url")?Mj:a}),w.map((ne,be)=>{var ue=ne.words.join($?"":" ");return I.createElement("tspan",{x:Y,dy:be===0?q:o,key:"".concat(ue,"-").concat(be)},ue)}))});JD.displayName="Text";var Fue=["labelRef"];function Mue(e,t){if(e==null)return{};var n,i,r=Iue(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Iue(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function m3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function _a(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?m3(Object(n),!0).forEach(function(i){Lue(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Lue(e,t,n){return(t=Oue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oue(e){var t=zue(e,"string");return typeof t=="symbol"?t:t+""}function zue(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kg(){return Kg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Kg.apply(null,arguments)}var Ij=I.createContext(null),Nue=e=>{var{x:t,y:n,upperWidth:i,lowerWidth:r,width:o,height:s,children:a}=e,d=I.useMemo(()=>({x:t,y:n,upperWidth:i,lowerWidth:r,width:o,height:s}),[t,n,i,r,o,s]);return I.createElement(Ij.Provider,{value:d},a)},Lj=()=>{var e=I.useContext(Ij),t=x2();return e||HB(t)},Bue=I.createContext(null),Gue=()=>{var e=I.useContext(Bue),t=bi(dG);return e||t},jue=e=>{var{value:t,formatter:n}=e,i=bs(e.children)?t:e.children;return typeof n=="function"?n(i):i},QD=e=>e!=null&&typeof e=="function",Hue=(e,t)=>{var n=_d(t-e),i=Math.min(Math.abs(t-e),360);return n*i},Vue=(e,t,n,i,r)=>{var{offset:o,className:s}=e,{cx:a,cy:d,innerRadius:h,outerRadius:m,startAngle:v,endAngle:w,clockWise:R}=r,L=(h+m)/2,O=Hue(v,w),z=O>=0?1:-1,$,U;switch(t){case"insideStart":$=v+z*o,U=R;break;case"insideEnd":$=w-z*o,U=!R;break;case"end":$=w+z*o,U=R;break;default:throw new Error("Unsupported position ".concat(t))}U=O<=0?U:!U;var Y=au(a,d,L,$),X=au(a,d,L,$+(U?1:-1)*359),q="M".concat(Y.x,",").concat(Y.y,`
    A`).concat(L,",").concat(L,",0,1,").concat(U?0:1,`,
    `).concat(X.x,",").concat(X.y),ie=bs(e.id)?jw("recharts-radial-line-"):e.id;return I.createElement("text",Kg({},i,{dominantBaseline:"central",className:Fo("recharts-radial-bar-label",s)}),I.createElement("defs",null,I.createElement("path",{id:ie,d:q})),I.createElement("textPath",{xlinkHref:"#".concat(ie)},n))},$ue=(e,t,n)=>{var{cx:i,cy:r,innerRadius:o,outerRadius:s,startAngle:a,endAngle:d}=e,h=(a+d)/2;if(n==="outside"){var{x:m,y:v}=au(i,r,s+t,h);return{x:m,y:v,textAnchor:m>=i?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"end"};var w=(o+s)/2,{x:R,y:L}=au(i,r,w,h);return{x:R,y:L,textAnchor:"middle",verticalAnchor:"middle"}},dk=e=>"cx"in e&&fi(e.cx),Wue=(e,t)=>{var{parentViewBox:n,offset:i,position:r}=e,o;n!=null&&!dk(n)&&(o=n);var{x:s,y:a,upperWidth:d,lowerWidth:h,height:m}=t,v=s,w=s+(d-h)/2,R=(v+w)/2,L=(d+h)/2,O=v+d/2,z=m>=0?1:-1,$=z*i,U=z>0?"end":"start",Y=z>0?"start":"end",X=d>=0?1:-1,q=X*i,ie=X>0?"end":"start",re=X>0?"start":"end";if(r==="top"){var J={x:v+d/2,y:a-$,textAnchor:"middle",verticalAnchor:U};return _a(_a({},J),o?{height:Math.max(a-o.y,0),width:d}:{})}if(r==="bottom"){var ne={x:w+h/2,y:a+m+$,textAnchor:"middle",verticalAnchor:Y};return _a(_a({},ne),o?{height:Math.max(o.y+o.height-(a+m),0),width:h}:{})}if(r==="left"){var be={x:R-q,y:a+m/2,textAnchor:ie,verticalAnchor:"middle"};return _a(_a({},be),o?{width:Math.max(be.x-o.x,0),height:m}:{})}if(r==="right"){var ue={x:R+L+q,y:a+m/2,textAnchor:re,verticalAnchor:"middle"};return _a(_a({},ue),o?{width:Math.max(o.x+o.width-ue.x,0),height:m}:{})}var ve=o?{width:L,height:m}:{};return r==="insideLeft"?_a({x:R+q,y:a+m/2,textAnchor:re,verticalAnchor:"middle"},ve):r==="insideRight"?_a({x:R+L-q,y:a+m/2,textAnchor:ie,verticalAnchor:"middle"},ve):r==="insideTop"?_a({x:v+d/2,y:a+$,textAnchor:"middle",verticalAnchor:Y},ve):r==="insideBottom"?_a({x:w+h/2,y:a+m-$,textAnchor:"middle",verticalAnchor:U},ve):r==="insideTopLeft"?_a({x:v+q,y:a+$,textAnchor:re,verticalAnchor:Y},ve):r==="insideTopRight"?_a({x:v+d-q,y:a+$,textAnchor:ie,verticalAnchor:Y},ve):r==="insideBottomLeft"?_a({x:w+q,y:a+m-$,textAnchor:re,verticalAnchor:U},ve):r==="insideBottomRight"?_a({x:w+h-q,y:a+m-$,textAnchor:ie,verticalAnchor:U},ve):r&&typeof r=="object"&&(fi(r.x)||am(r.x))&&(fi(r.y)||am(r.y))?_a({x:s+xf(r.x,L),y:a+xf(r.y,m),textAnchor:"end",verticalAnchor:"end"},ve):_a({x:O,y:a+m/2,textAnchor:"middle",verticalAnchor:"middle"},ve)},Uue={angle:0,offset:5,zIndex:Ml.label,position:"middle",textBreakAll:!1};function Sy(e){var t=zl(e,Uue),{viewBox:n,position:i,value:r,children:o,content:s,className:a="",textBreakAll:d,labelRef:h}=t,m=Gue(),v=Lj(),w=i==="center"?v:m??v,R,L,O;if(n==null?R=w:dk(n)?R=n:R=HB(n),!R||bs(r)&&bs(o)&&!I.isValidElement(s)&&typeof s!="function")return null;var z=_a(_a({},t),{},{viewBox:R});if(I.isValidElement(s)){var{labelRef:$}=z,U=Mue(z,Fue);return I.cloneElement(s,U)}if(typeof s=="function"){if(L=I.createElement(s,z),I.isValidElement(L))return L}else L=jue(t);var Y=Tu(t);if(dk(R)){if(i==="insideStart"||i==="insideEnd"||i==="end")return Vue(t,i,L,Y,R);O=$ue(R,t.offset,t.position)}else O=Wue(t,R);return I.createElement(kh,{zIndex:t.zIndex},I.createElement(JD,Kg({ref:h,className:Fo("recharts-label",a)},Y,O,{textAnchor:Aue(Y.textAnchor)?Y.textAnchor:O.textAnchor,breakAll:d}),L))}Sy.displayName="Label";var que=(e,t,n)=>{if(!e)return null;var i={viewBox:t,labelRef:n};return e===!0?I.createElement(Sy,Kg({key:"label-implicit"},i)):Lp(e)?I.createElement(Sy,Kg({key:"label-implicit",value:e},i)):I.isValidElement(e)?e.type===Sy?I.cloneElement(e,_a({key:"label-implicit"},i)):I.createElement(Sy,Kg({key:"label-implicit",content:e},i)):QD(e)?I.createElement(Sy,Kg({key:"label-implicit",content:e},i)):e&&typeof e=="object"?I.createElement(Sy,Kg({},e,{key:"label-implicit"},i)):null};function Kue(e){var{label:t,labelRef:n}=e,i=Lj();return que(t,i,n)||null}var oA={},sA={},y3;function Zue(){return y3||(y3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(sA)),sA}var aA={},v3;function Yue(){return v3||(v3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(aA)),aA}var b3;function Xue(){return b3||(b3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zue(),n=Yue(),i=jP();function r(o){if(i.isArrayLike(o))return t.last(n.toArray(o))}e.last=r})(oA)),oA}var lA,x3;function Jue(){return x3||(x3=1,lA=Xue().last),lA}var Que=Jue();const ece=Ol(Que);var tce=["valueAccessor"],nce=["dataKey","clockWise","id","textBreakAll","zIndex"];function uS(){return uS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},uS.apply(null,arguments)}function w3(e,t){if(e==null)return{};var n,i,r=ice(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ice(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}var rce=e=>Array.isArray(e.value)?ece(e.value):e.value,Oj=I.createContext(void 0),eF=Oj.Provider,zj=I.createContext(void 0);zj.Provider;function oce(){return I.useContext(Oj)}function sce(){return I.useContext(zj)}function i_(e){var{valueAccessor:t=rce}=e,n=w3(e,tce),{dataKey:i,clockWise:r,id:o,textBreakAll:s,zIndex:a}=n,d=w3(n,nce),h=oce(),m=sce(),v=h||m;return!v||!v.length?null:I.createElement(kh,{zIndex:a??Ml.label},I.createElement(ku,{className:"recharts-label-list"},v.map((w,R)=>{var L,O=bs(i)?t(w,R):Ea(w&&w.payload,i),z=bs(o)?{}:{id:"".concat(o,"-").concat(R)};return I.createElement(Sy,uS({key:"label-".concat(R)},Tu(w),d,z,{fill:(L=n.fill)!==null&&L!==void 0?L:w.fill,parentViewBox:w.parentViewBox,value:O,textBreakAll:s,viewBox:w.viewBox,index:R,zIndex:0}))})))}i_.displayName="LabelList";function tF(e){var{label:t}=e;return t?t===!0?I.createElement(i_,{key:"labelList-implicit"}):I.isValidElement(t)||QD(t)?I.createElement(i_,{key:"labelList-implicit",content:t}):typeof t=="object"?I.createElement(i_,uS({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function hk(){return hk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},hk.apply(null,arguments)}var Nj=e=>{var{cx:t,cy:n,r:i,className:r}=e,o=Fo("recharts-dot",r);return fi(t)&&fi(n)&&fi(i)?I.createElement("circle",hk({},xh(e),GP(e),{className:o,cx:t,cy:n,r:i})):null},ace={radiusAxis:{},angleAxis:{}},Bj=Vc({name:"polarAxis",initialState:ace,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:UDe,removeRadiusAxis:qDe,addAngleAxis:KDe,removeAngleAxis:ZDe}=Bj.actions,lce=Bj.reducer,uA={exports:{}},Po={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C3;function uce(){if(C3)return Po;C3=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),R=Symbol.for("react.offscreen"),L;L=Symbol.for("react.module.reference");function O(z){if(typeof z=="object"&&z!==null){var $=z.$$typeof;switch($){case e:switch(z=z.type,z){case n:case r:case i:case h:case m:return z;default:switch(z=z&&z.$$typeof,z){case a:case s:case d:case w:case v:case o:return z;default:return $}}case t:return $}}}return Po.ContextConsumer=s,Po.ContextProvider=o,Po.Element=e,Po.ForwardRef=d,Po.Fragment=n,Po.Lazy=w,Po.Memo=v,Po.Portal=t,Po.Profiler=r,Po.StrictMode=i,Po.Suspense=h,Po.SuspenseList=m,Po.isAsyncMode=function(){return!1},Po.isConcurrentMode=function(){return!1},Po.isContextConsumer=function(z){return O(z)===s},Po.isContextProvider=function(z){return O(z)===o},Po.isElement=function(z){return typeof z=="object"&&z!==null&&z.$$typeof===e},Po.isForwardRef=function(z){return O(z)===d},Po.isFragment=function(z){return O(z)===n},Po.isLazy=function(z){return O(z)===w},Po.isMemo=function(z){return O(z)===v},Po.isPortal=function(z){return O(z)===t},Po.isProfiler=function(z){return O(z)===r},Po.isStrictMode=function(z){return O(z)===i},Po.isSuspense=function(z){return O(z)===h},Po.isSuspenseList=function(z){return O(z)===m},Po.isValidElementType=function(z){return typeof z=="string"||typeof z=="function"||z===n||z===r||z===i||z===h||z===m||z===R||typeof z=="object"&&z!==null&&(z.$$typeof===w||z.$$typeof===v||z.$$typeof===o||z.$$typeof===s||z.$$typeof===d||z.$$typeof===L||z.getModuleId!==void 0)},Po.typeOf=O,Po}var _3;function cce(){return _3||(_3=1,uA.exports=uce()),uA.exports}var dce=cce(),S3=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",E3=null,cA=null,Gj=e=>{if(e===E3&&Array.isArray(cA))return cA;var t=[];return I.Children.forEach(e,n=>{bs(n)||(dce.isFragment(n)?t=t.concat(Gj(n.props.children)):t.push(n))}),cA=t,E3=e,t};function hce(e,t){var n=[],i=[];return Array.isArray(t)?i=t.map(r=>S3(r)):i=[S3(t)],Gj(e).forEach(r=>{var o=Kb(r,"type.displayName")||Kb(r,"type.name");o&&i.indexOf(o)!==-1&&n.push(r)}),n}var nF=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,dA={},R3;function fce(){return R3||(R3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var r;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const o=n[Symbol.toStringTag];return o==null||!((r=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&r.writable)?!1:n.toString()===`[object ${o}]`}let i=n;for(;Object.getPrototypeOf(i)!==null;)i=Object.getPrototypeOf(i);return Object.getPrototypeOf(n)===i}e.isPlainObject=t})(dA)),dA}var hA,A3;function pce(){return A3||(A3=1,hA=fce().isPlainObject),hA}var gce=pce();const mce=Ol(gce);function T3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function k3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?T3(Object(n),!0).forEach(function(i){yce(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function yce(e,t,n){return(t=vce(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vce(e){var t=bce(e,"string");return typeof t=="symbol"?t:t+""}function bce(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cS(){return cS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},cS.apply(null,arguments)}var P3=(e,t,n,i,r)=>{var o=n-i,s;return s="M ".concat(e,",").concat(t),s+="L ".concat(e+n,",").concat(t),s+="L ".concat(e+n-o/2,",").concat(t+r),s+="L ".concat(e+n-o/2-i,",").concat(t+r),s+="L ".concat(e,",").concat(t," Z"),s},xce={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},wce=e=>{var t=zl(e,xce),{x:n,y:i,upperWidth:r,lowerWidth:o,height:s,className:a}=t,{animationEasing:d,animationDuration:h,animationBegin:m,isUpdateAnimationActive:v}=t,w=I.useRef(null),[R,L]=I.useState(-1),O=I.useRef(r),z=I.useRef(o),$=I.useRef(s),U=I.useRef(n),Y=I.useRef(i),X=P1(e,"trapezoid-");if(I.useEffect(()=>{if(w.current&&w.current.getTotalLength)try{var Ie=w.current.getTotalLength();Ie&&L(Ie)}catch{}},[]),n!==+n||i!==+i||r!==+r||o!==+o||s!==+s||r===0&&o===0||s===0)return null;var q=Fo("recharts-trapezoid",a);if(!v)return I.createElement("g",null,I.createElement("path",cS({},Tu(t),{className:q,d:P3(n,i,r,o,s)})));var ie=O.current,re=z.current,J=$.current,ne=U.current,be=Y.current,ue="0px ".concat(R===-1?1:R,"px"),ve="".concat(R,"px 0px"),ce=e8(["strokeDasharray"],h,d);return I.createElement(k1,{animationId:X,key:X,canBegin:R>0,duration:h,easing:d,isActive:v,begin:m},Ie=>{var Te=Vo(ie,r,Ie),fe=Vo(re,o,Ie),he=Vo(J,s,Ie),Re=Vo(ne,n,Ie),De=Vo(be,i,Ie);w.current&&(O.current=Te,z.current=fe,$.current=he,U.current=Re,Y.current=De);var Ye=Ie>0?{transition:ce,strokeDasharray:ve}:{strokeDasharray:ue};return I.createElement("path",cS({},Tu(t),{className:q,d:P3(Re,De,Te,fe,he),ref:w,style:k3(k3({},Ye),t.style)}))})},Cce=["option","shapeType","propTransformer","activeClassName"];function _ce(e,t){if(e==null)return{};var n,i,r=Sce(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Sce(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function D3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function dS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?D3(Object(n),!0).forEach(function(i){Ece(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Ece(e,t,n){return(t=Rce(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rce(e){var t=Ace(e,"string");return typeof t=="symbol"?t:t+""}function Ace(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tce(e,t){return dS(dS({},t),e)}function kce(e,t){return e==="symbols"}function F3(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return I.createElement(r8,n);case"trapezoid":return I.createElement(wce,n);case"sector":return I.createElement(a8,n);case"symbols":if(kce(t))return I.createElement(BP,n);break;case"curve":return I.createElement(Ew,n);default:return null}}function Pce(e){return I.isValidElement(e)?e.props:e}function jj(e){var{option:t,shapeType:n,propTransformer:i=Tce,activeClassName:r="recharts-active-shape"}=e,o=_ce(e,Cce),s;if(I.isValidElement(t))s=I.cloneElement(t,dS(dS({},o),Pce(t)));else if(typeof t=="function")s=t(o,o.index);else if(mce(t)&&typeof t!="boolean"){var a=i(t,o);s=I.createElement(F3,{shapeType:n,elementProps:a})}else{var d=o;s=I.createElement(F3,{shapeType:n,elementProps:d})}return o.isActive?I.createElement(ku,{className:r},s):s}var Hj=(e,t,n)=>{var i=Zs();return(r,o)=>s=>{e==null||e(r,o,s),i(ej({activeIndex:String(o),activeDataKey:t,activeCoordinate:r.tooltipPosition,activeGraphicalItemId:n}))}},Vj=e=>{var t=Zs();return(n,i)=>r=>{e==null||e(n,i,r),t(iae())}},$j=(e,t,n)=>{var i=Zs();return(r,o)=>s=>{e==null||e(r,o,s),i(rae({activeIndex:String(o),activeDataKey:t,activeCoordinate:r.tooltipPosition,activeGraphicalItemId:n}))}};function iF(e){var{tooltipEntrySettings:t}=e,n=Zs(),i=uu(),r=I.useRef(null);return I.useLayoutEffect(()=>{i||(r.current===null?n(Qse(t)):r.current!==t&&n(eae({prev:r.current,next:t})),r.current=t)},[t,n,i]),I.useLayoutEffect(()=>()=>{r.current&&(n(tae(r.current)),r.current=null)},[n]),null}function rF(e){var{legendPayload:t}=e,n=Zs(),i=uu(),r=I.useRef(null);return I.useLayoutEffect(()=>{i||(r.current===null?n(xte(t)):r.current!==t&&n(wte({prev:r.current,next:t})),r.current=t)},[n,i,t]),I.useLayoutEffect(()=>()=>{r.current&&(n(Cte(r.current)),r.current=null)},[n]),null}var fA,Dce=()=>{var[e]=I.useState(()=>jw("uid-"));return e},Fce=(fA=XV.useId)!==null&&fA!==void 0?fA:Dce;function Wj(e,t){var n=Fce();return t||(e?"".concat(e,"-").concat(n):n)}var Mce=I.createContext(void 0),oF=e=>{var{id:t,type:n,children:i}=e,r=Wj("recharts-".concat(n),t);return I.createElement(Mce.Provider,{value:r},i(r))},Ice={cartesianItems:[],polarItems:[]},Uj=Vc({name:"graphicalItems",initialState:Ice,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Ms()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:i}=t.payload,r=yf(e).cartesianItems.indexOf(n);r>-1&&(e.cartesianItems[r]=i)},prepare:Ms()},removeCartesianGraphicalItem:{reducer(e,t){var n=yf(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:Ms()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Ms()},removePolarGraphicalItem:{reducer(e,t){var n=yf(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:Ms()}}}),{addCartesianGraphicalItem:Lce,replaceCartesianGraphicalItem:Oce,removeCartesianGraphicalItem:zce,addPolarGraphicalItem:YDe,removePolarGraphicalItem:XDe}=Uj.actions,Nce=Uj.reducer,Bce=e=>{var t=Zs(),n=I.useRef(null);return I.useLayoutEffect(()=>{n.current===null?t(Lce(e)):n.current!==e&&t(Oce({prev:n.current,next:e})),n.current=e},[t,e]),I.useLayoutEffect(()=>()=>{n.current&&(t(zce(n.current)),n.current=null)},[t]),null},sF=I.memo(Bce),Gce=["points"];function M3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function pA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?M3(Object(n),!0).forEach(function(i){jce(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function jce(e,t,n){return(t=Hce(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hce(e){var t=Vce(e,"string");return typeof t=="symbol"?t:t+""}function Vce(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hS(){return hS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},hS.apply(null,arguments)}function $ce(e,t){if(e==null)return{};var n,i,r=Wce(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Wce(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function Uce(e){var{option:t,dotProps:n,className:i}=e;if(I.isValidElement(t))return I.cloneElement(t,n);if(typeof t=="function")return t(n);var r=Fo(i,typeof t!="boolean"?t.className:""),o=n??{},{points:s}=o,a=$ce(o,Gce);return I.createElement(Nj,hS({},a,{className:r}))}function qce(e,t){return e==null?!1:t?!0:e.length===1}function qj(e){var{points:t,dot:n,className:i,dotClassName:r,dataKey:o,baseProps:s,needClip:a,clipPathId:d,zIndex:h=Ml.scatter}=e;if(!qce(t,n))return null;var m=nF(n),v=eX(n),w=t.map((L,O)=>{var z,$,U=pA(pA(pA({r:3},s),v),{},{index:O,cx:(z=L.x)!==null&&z!==void 0?z:void 0,cy:($=L.y)!==null&&$!==void 0?$:void 0,dataKey:o,value:L.value,payload:L.payload,points:t});return I.createElement(Uce,{key:"dot-".concat(O),option:n,dotProps:U,className:r})}),R={};return a&&d!=null&&(R.clipPath="url(#clipPath-".concat(m?"":"dots-").concat(d,")")),I.createElement(kh,{zIndex:h},I.createElement(ku,hS({className:i},R),w))}function I3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function L3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?I3(Object(n),!0).forEach(function(i){Kce(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Kce(e,t,n){return(t=Zce(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zce(e){var t=Yce(e,"string");return typeof t=="symbol"?t:t+""}function Yce(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xce={xAxis:{},yAxis:{},zAxis:{}},Kj=Vc({name:"cartesianAxis",initialState:Xce,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Ms()},replaceXAxis:{reducer(e,t){var{prev:n,next:i}=t.payload;e.xAxis[n.id]!==void 0&&(n.id!==i.id&&delete e.xAxis[n.id],e.xAxis[i.id]=i)},prepare:Ms()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Ms()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Ms()},replaceYAxis:{reducer(e,t){var{prev:n,next:i}=t.payload;e.yAxis[n.id]!==void 0&&(n.id!==i.id&&delete e.yAxis[n.id],e.yAxis[i.id]=i)},prepare:Ms()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Ms()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Ms()},replaceZAxis:{reducer(e,t){var{prev:n,next:i}=t.payload;e.zAxis[n.id]!==void 0&&(n.id!==i.id&&delete e.zAxis[n.id],e.zAxis[i.id]=i)},prepare:Ms()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Ms()},updateYAxisWidth(e,t){var{id:n,width:i}=t.payload,r=e.yAxis[n];if(r){var o=r.widthHistory||[];if(o.length===3&&o[0]===o[2]&&i===o[1]&&i!==r.width&&Math.abs(i-o[0])<=1)return;var s=[...o,i].slice(-3);e.yAxis[n]=L3(L3({},e.yAxis[n]),{},{width:i,widthHistory:s})}}}}),{addXAxis:Jce,replaceXAxis:Qce,removeXAxis:ede,addYAxis:tde,replaceYAxis:nde,removeYAxis:ide,addZAxis:JDe,replaceZAxis:QDe,removeZAxis:eFe,updateYAxisWidth:rde}=Kj.actions,ode=Kj.reducer,sde=Ot([Nl],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),ade=Ot([sde,vm,bm],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),H2=()=>bi(ade),lde=()=>bi(qae);function O3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function gA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?O3(Object(n),!0).forEach(function(i){ude(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function ude(e,t,n){return(t=cde(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cde(e){var t=dde(e,"string");return typeof t=="symbol"?t:t+""}function dde(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hde=e=>{var{point:t,childIndex:n,mainColor:i,activeDot:r,dataKey:o,clipPath:s}=e;if(r===!1||t.x==null||t.y==null)return null;var a={index:n,dataKey:o,cx:t.x,cy:t.y,r:4,fill:i??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},d=gA(gA(gA({},a),w1(r)),GP(r)),h;return I.isValidElement(r)?h=I.cloneElement(r,d):typeof r=="function"?h=r(d):h=I.createElement(Nj,d),I.createElement(ku,{className:"recharts-active-dot",clipPath:s},h)};function fk(e){var{points:t,mainColor:n,activeDot:i,itemDataKey:r,clipPath:o,zIndex:s=Ml.activeDot}=e,a=bi(u0),d=lde();if(t==null||d==null)return null;var h=t.find(m=>d.includes(m.payload));return bs(h)?null:I.createElement(kh,{zIndex:s},I.createElement(hde,{point:h,childIndex:Number(a),mainColor:n,dataKey:r,activeDot:i,clipPath:o}))}var fde="Invariant failed";function pde(e,t){throw new Error(fde)}var gde=["x","y"];function pk(){return pk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},pk.apply(null,arguments)}function z3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function uw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?z3(Object(n),!0).forEach(function(i){mde(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function mde(e,t,n){return(t=yde(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yde(e){var t=vde(e,"string");return typeof t=="symbol"?t:t+""}function vde(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bde(e,t){if(e==null)return{};var n,i,r=xde(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function xde(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function wde(e,t){var{x:n,y:i}=e,r=bde(e,gde),o="".concat(n),s=parseInt(o,10),a="".concat(i),d=parseInt(a,10),h="".concat(t.height||r.height),m=parseInt(h,10),v="".concat(t.width||r.width),w=parseInt(v,10);return uw(uw(uw(uw(uw({},t),r),s?{x:s}:{}),d?{y:d}:{}),{},{height:m,width:w,name:t.name,radius:t.radius})}function fS(e){return I.createElement(jj,pk({shapeType:"rectangle",propTransformer:wde,activeClassName:"recharts-active-bar"},e))}var Cde=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(i,r)=>{if(fi(t))return t;var o=fi(i)||bs(i);return o?t(i,r):(o||pde(),n)}},_de={},Zj=Vc({name:"errorBars",initialState:_de,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:i}=t.payload;e[n]||(e[n]=[]),e[n].push(i)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:i,next:r}=t.payload;e[n]&&(e[n]=e[n].map(o=>o.dataKey===i.dataKey&&o.direction===i.direction?r:o))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:i}=t.payload;e[n]&&(e[n]=e[n].filter(r=>r.dataKey!==i.dataKey||r.direction!==i.direction))}}}),{addErrorBar:tFe,replaceErrorBar:nFe,removeErrorBar:iFe}=Zj.actions,Sde=Zj.reducer,Ede=["children"];function Rde(e,t){if(e==null)return{};var n,i,r=Ade(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ade(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}var Tde={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},kde=I.createContext(Tde);function Yj(e){var{children:t}=e,n=Rde(e,Ede);return I.createElement(kde.Provider,{value:n},t)}function V2(e,t){var n,i,r=bi(h=>wm(h,e)),o=bi(h=>Cm(h,t)),s=(n=r==null?void 0:r.allowDataOverflow)!==null&&n!==void 0?n:Pl.allowDataOverflow,a=(i=o==null?void 0:o.allowDataOverflow)!==null&&i!==void 0?i:Dl.allowDataOverflow,d=s||a;return{needClip:d,needClipX:s,needClipY:a}}function aF(e){var{xAxisId:t,yAxisId:n,clipPathId:i}=e,r=H2(),{needClipX:o,needClipY:s,needClip:a}=V2(t,n);if(!a||!r)return null;var{x:d,y:h,width:m,height:v}=r;return I.createElement("clipPath",{id:"clipPath-".concat(i)},I.createElement("rect",{x:o?d:d-m/2,y:s?h:h-v/2,width:o?m:m*2,height:s?v:v*2}))}function Pde(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&ws(e.zIndex)?e.zIndex:t}var mA={exports:{}},yA={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N3;function Dde(){if(N3)return yA;N3=1;var e=ux();function t(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,r=e.useRef,o=e.useEffect,s=e.useMemo,a=e.useDebugValue;return yA.useSyncExternalStoreWithSelector=function(d,h,m,v,w){var R=r(null);if(R.current===null){var L={hasValue:!1,value:null};R.current=L}else L=R.current;R=s(function(){function z(q){if(!$){if($=!0,U=q,q=v(q),w!==void 0&&L.hasValue){var ie=L.value;if(w(ie,q))return Y=ie}return Y=q}if(ie=Y,n(U,q))return ie;var re=v(q);return w!==void 0&&w(ie,re)?(U=q,ie):(U=q,Y=re)}var $=!1,U,Y,X=m===void 0?null:m;return[function(){return z(h())},X===null?void 0:function(){return z(X())}]},[h,m,v,w]);var O=i(d,R[0],R[1]);return o(function(){L.hasValue=!0,L.value=O},[O]),a(O),O},yA}var B3;function Fde(){return B3||(B3=1,mA.exports=Dde()),mA.exports}Fde();function Mde(e){e()}function Ide(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Mde(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let i=e;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0;const r=t={callback:n,next:null,prev:t};return r.prev?r.prev.next=r:e=r,function(){!i||e===null||(i=!1,r.next?r.next.prev=r.prev:t=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}var G3={notify(){},get:()=>[]};function Lde(e,t){let n,i=G3,r=0,o=!1;function s(O){m();const z=i.subscribe(O);let $=!1;return()=>{$||($=!0,z(),v())}}function a(){i.notify()}function d(){L.onStateChange&&L.onStateChange()}function h(){return o}function m(){r++,n||(n=e.subscribe(d),i=Ide())}function v(){r--,n&&r===0&&(n(),n=void 0,i.clear(),i=G3)}function w(){o||(o=!0,m())}function R(){o&&(o=!1,v())}const L={addNestedSub:s,notifyNestedSubs:a,handleChangeWrapper:d,isSubscribed:h,trySubscribe:w,tryUnsubscribe:R,getListeners:()=>i};return L}var Ode=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zde=Ode(),Nde=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Bde=Nde(),Gde=()=>zde||Bde?I.useLayoutEffect:I.useEffect,jde=Gde();function j3(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Hde(e,t){if(j3(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!j3(e[n[r]],t[n[r]]))return!1;return!0}var vA=Symbol.for("react-redux-context"),bA=typeof globalThis<"u"?globalThis:{};function Vde(){if(!I.createContext)return{};const e=bA[vA]??(bA[vA]=new Map);let t=e.get(I.createContext);return t||(t=I.createContext(null),e.set(I.createContext,t)),t}var $de=Vde();function Wde(e){const{children:t,context:n,serverState:i,store:r}=e,o=I.useMemo(()=>{const d=Lde(r);return{store:r,subscription:d,getServerState:i?()=>i:void 0}},[r,i]),s=I.useMemo(()=>r.getState(),[r]);jde(()=>{const{subscription:d}=o;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),s!==r.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[o,s]);const a=n||$de;return I.createElement(a.Provider,{value:o},t)}var Ude=Wde,qde=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function Kde(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function U1(e,t){var n=new Set([...Object.keys(e),...Object.keys(t)]);for(var i of n)if(qde.has(i)){if(e[i]==null&&t[i]==null)continue;if(!Hde(e[i],t[i]))return!1}else if(!Kde(e[i],t[i]))return!1;return!0}var Zde=["onMouseEnter","onMouseLeave","onClick"],Yde=["value","background","tooltipPosition"],Xde=["id"],Jde=["onMouseEnter","onClick","onMouseLeave"];function fm(){return fm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},fm.apply(null,arguments)}function H3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function oc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?H3(Object(n),!0).forEach(function(i){Qde(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Qde(e,t,n){return(t=ehe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ehe(e){var t=the(e,"string");return typeof t=="symbol"?t:t+""}function the(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pS(e,t){if(e==null)return{};var n,i,r=nhe(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function nhe(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}var ihe=e=>{var{dataKey:t,name:n,fill:i,legendType:r,hide:o}=e;return[{inactive:o,dataKey:t,type:r,color:i,value:bx(n,t),payload:e}]},rhe=I.memo(e=>{var{dataKey:t,stroke:n,strokeWidth:i,fill:r,name:o,hide:s,unit:a,tooltipType:d}=e,h={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:r,dataKey:t,nameKey:void 0,name:bx(o,t),hide:s,type:d,color:r,unit:a}};return I.createElement(iF,{tooltipEntrySettings:h})});function ohe(e){var t=bi(u0),{data:n,dataKey:i,background:r,allOtherBarProps:o}=e,{onMouseEnter:s,onMouseLeave:a,onClick:d}=o,h=pS(o,Zde),m=Hj(s,i),v=Vj(a),w=$j(d,i);if(!r||n==null)return null;var R=w1(r);return I.createElement(kh,{zIndex:Pde(r,Ml.barBackground)},n.map((L,O)=>{var{value:z,background:$,tooltipPosition:U}=L,Y=pS(L,Yde);if(!$)return null;var X=m(L,O),q=v(L,O),ie=w(L,O),re=oc(oc(oc(oc(oc({option:r,isActive:String(O)===t},Y),{},{fill:"#eee"},$),R),s2(h,L,O)),{},{onMouseEnter:X,onMouseLeave:q,onClick:ie,dataKey:i,index:O,className:"recharts-bar-background-rectangle"});return I.createElement(fS,fm({key:"background-bar-".concat(O)},re))}))}function she(e){var{showLabels:t,children:n,rects:i}=e,r=i==null?void 0:i.map(o=>{var s={x:o.x,y:o.y,width:o.width,lowerWidth:o.width,upperWidth:o.width,height:o.height};return oc(oc({},s),{},{value:o.value,payload:o.payload,parentViewBox:o.parentViewBox,viewBox:s,fill:o.fill})});return I.createElement(eF,{value:t?r:void 0},n)}function ahe(e){var{shape:t,activeBar:n,baseProps:i,entry:r,index:o,dataKey:s}=e,a=bi(u0),d=bi(pj),h=n&&String(o)===a&&(d==null||s===d),m=h?n:t;return h?I.createElement(kh,{zIndex:Ml.activeBar},I.createElement(fS,fm({},i,{name:String(i.name)},r,{isActive:h,option:m,index:o,dataKey:s}))):I.createElement(fS,fm({},i,{name:String(i.name)},r,{isActive:h,option:m,index:o,dataKey:s}))}function lhe(e){var{shape:t,baseProps:n,entry:i,index:r,dataKey:o}=e;return I.createElement(fS,fm({},n,{name:String(n.name)},i,{isActive:!1,option:t,index:r,dataKey:o}))}function uhe(e){var t,{data:n,props:i}=e,r=(t=xh(i))!==null&&t!==void 0?t:{},{id:o}=r,s=pS(r,Xde),{shape:a,dataKey:d,activeBar:h}=i,{onMouseEnter:m,onClick:v,onMouseLeave:w}=i,R=pS(i,Jde),L=Hj(m,d),O=Vj(w),z=$j(v,d);return n?I.createElement(I.Fragment,null,n.map(($,U)=>I.createElement(ku,fm({key:"rectangle-".concat($==null?void 0:$.x,"-").concat($==null?void 0:$.y,"-").concat($==null?void 0:$.value,"-").concat(U),className:"recharts-bar-rectangle"},s2(R,$,U),{onMouseEnter:L($,U),onMouseLeave:O($,U),onClick:z($,U)}),h?I.createElement(ahe,{shape:a,activeBar:h,baseProps:s,entry:$,index:U,dataKey:d}):I.createElement(lhe,{shape:a,baseProps:s,entry:$,index:U,dataKey:d})))):null}function che(e){var{props:t,previousRectanglesRef:n}=e,{data:i,layout:r,isAnimationActive:o,animationBegin:s,animationDuration:a,animationEasing:d,onAnimationEnd:h,onAnimationStart:m}=t,v=n.current,w=P1(t,"recharts-bar-"),[R,L]=I.useState(!1),O=!R,z=I.useCallback(()=>{typeof h=="function"&&h(),L(!1)},[h]),$=I.useCallback(()=>{typeof m=="function"&&m(),L(!0)},[m]);return I.createElement(she,{showLabels:O,rects:i},I.createElement(k1,{animationId:w,begin:s,duration:a,isActive:o,easing:d,onAnimationEnd:z,onAnimationStart:$,key:w},U=>{var Y=U===1?i:i==null?void 0:i.map((X,q)=>{var ie=v&&v[q];if(ie)return oc(oc({},X),{},{x:Vo(ie.x,X.x,U),y:Vo(ie.y,X.y,U),width:Vo(ie.width,X.width,U),height:Vo(ie.height,X.height,U)});if(r==="horizontal"){var re=Vo(0,X.height,U),J=Vo(X.stackedBarStart,X.y,U);return oc(oc({},X),{},{y:J,height:re})}var ne=Vo(0,X.width,U),be=Vo(X.stackedBarStart,X.x,U);return oc(oc({},X),{},{width:ne,x:be})});return U>0&&(n.current=Y??null),Y==null?null:I.createElement(ku,null,I.createElement(uhe,{props:t,data:Y}))}),I.createElement(tF,{label:t.label}),t.children)}function dhe(e){var t=I.useRef(null);return I.createElement(che,{previousRectanglesRef:t,props:e})}var Xj=0,hhe=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:Ea(e,t)}};class fhe extends I.PureComponent{render(){var{hide:t,data:n,dataKey:i,className:r,xAxisId:o,yAxisId:s,needClip:a,background:d,id:h}=this.props;if(t||n==null)return null;var m=Fo("recharts-bar",r),v=h;return I.createElement(ku,{className:m,id:h},a&&I.createElement("defs",null,I.createElement(aF,{clipPathId:v,xAxisId:o,yAxisId:s})),I.createElement(ku,{className:"recharts-bar-rectangles",clipPath:a?"url(#clipPath-".concat(v,")"):void 0},I.createElement(ohe,{data:n,dataKey:i,background:d,allOtherBarProps:this.props}),I.createElement(dhe,this.props)))}}var phe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:Xj,xAxisId:0,yAxisId:0,zIndex:Ml.bar};function ghe(e){var{xAxisId:t,yAxisId:n,hide:i,legendType:r,minPointSize:o,activeBar:s,animationBegin:a,animationDuration:d,animationEasing:h,isAnimationActive:m}=e,{needClip:v}=V2(t,n),w=x0(),R=uu(),L=hce(e.children,Ej),O=bi(U=>Vhe(U,t,n,R,e.id,L));if(w!=="vertical"&&w!=="horizontal")return null;var z,$=O==null?void 0:O[0];return $==null||$.height==null||$.width==null?z=0:z=w==="vertical"?$.height/2:$.width/2,I.createElement(Yj,{xAxisId:t,yAxisId:n,data:O,dataPointFormatter:hhe,errorBarOffset:z},I.createElement(fhe,fm({},e,{layout:w,needClip:v,data:O,xAxisId:t,yAxisId:n,hide:i,legendType:r,minPointSize:o,activeBar:s,animationBegin:a,animationDuration:d,animationEasing:h,isAnimationActive:m})))}function mhe(e){var{layout:t,barSettings:{dataKey:n,minPointSize:i},pos:r,bandSize:o,xAxis:s,yAxis:a,xAxisTicks:d,yAxisTicks:h,stackedData:m,displayedData:v,offset:w,cells:R,parentViewBox:L,dataStartIndex:O}=e,z=t==="horizontal"?a:s,$=m?z.scale.domain():null,U=xee({numericAxis:z}),Y=z.scale(U);return v.map((X,q)=>{var ie,re,J,ne,be,ue;m?ie=gee(m[q+O],$):(ie=Ea(X,n),Array.isArray(ie)||(ie=[U,ie]));var ve=Cde(i,Xj)(ie[1],q);if(t==="horizontal"){var ce,[Ie,Te]=[a.scale(ie[0]),a.scale(ie[1])];re=u5({axis:s,ticks:d,bandSize:o,offset:r.offset,entry:X,index:q}),J=(ce=Te??Ie)!==null&&ce!==void 0?ce:void 0,ne=r.size;var fe=Ie-Te;if(be=bf(fe)?0:fe,ue={x:re,y:w.top,width:ne,height:w.height},Math.abs(ve)>0&&Math.abs(be)<Math.abs(ve)){var he=_d(be||ve)*(Math.abs(ve)-Math.abs(be));J-=he,be+=he}}else{var[Re,De]=[s.scale(ie[0]),s.scale(ie[1])];if(re=Re,J=u5({axis:a,ticks:h,bandSize:o,offset:r.offset,entry:X,index:q}),ne=De-Re,be=r.size,ue={x:w.left,y:J,width:w.width,height:be},Math.abs(ve)>0&&Math.abs(ne)<Math.abs(ve)){var Ye=_d(ne||ve)*(Math.abs(ve)-Math.abs(ne));ne+=Ye}}if(re==null||J==null||ne==null||be==null)return null;var _e=oc(oc({},X),{},{stackedBarStart:Y,x:re,y:J,width:ne,height:be,value:m?ie:ie[1],payload:X,background:ue,tooltipPosition:{x:re+ne/2,y:J+be/2},parentViewBox:L},R&&R[q]&&R[q].props);return _e}).filter(Boolean)}function yhe(e){var t=zl(e,phe),n=uu();return I.createElement(oF,{id:t.id,type:"bar"},i=>I.createElement(I.Fragment,null,I.createElement(rF,{legendPayload:ihe(t)}),I.createElement(rhe,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),I.createElement(sF,{type:"bar",id:i,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:zB(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),I.createElement(kh,{zIndex:t.zIndex},I.createElement(ghe,fm({},t,{id:i})))))}var Jj=I.memo(yhe,U1);Jj.displayName="Bar";function V3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function FC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?V3(Object(n),!0).forEach(function(i){vhe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function vhe(e,t,n){return(t=bhe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bhe(e){var t=xhe(e,"string");return typeof t=="symbol"?t:t+""}function xhe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var whe=(e,t)=>t,Che=(e,t,n)=>n,_he=(e,t,n,i)=>i,She=(e,t,n,i,r)=>r,q1=Ot([z1,She],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),Ehe=Ot([q1],e=>e==null?void 0:e.maxBarSize),Rhe=(e,t,n,i,r,o)=>o,$3=(e,t,n)=>{var i=n??e;if(!bs(i))return xf(i,t,0)},Ahe=Ot([Yr,z1,whe,Che,_he],(e,t,n,i,r)=>t.filter(o=>e==="horizontal"?o.xAxisId===n:o.yAxisId===i).filter(o=>o.isPanorama===r).filter(o=>o.hide===!1).filter(o=>o.type==="bar")),The=(e,t,n,i)=>{var r=Yr(e);return r==="horizontal"?e1(e,"yAxis",n,i):e1(e,"xAxis",t,i)},khe=(e,t,n)=>{var i=Yr(e);return i==="horizontal"?VO(e,"xAxis",t):VO(e,"yAxis",n)},Phe=(e,t,n)=>{var i={},r=e.filter(O2),o=e.filter(h=>h.stackId==null),s=r.reduce((h,m)=>(h[m.stackId]||(h[m.stackId]=[]),h[m.stackId].push(m),h),i),a=Object.entries(s).map(h=>{var[m,v]=h,w=v.map(L=>L.dataKey),R=$3(t,n,v[0].barSize);return{stackId:m,dataKeys:w,barSize:R}}),d=o.map(h=>{var m=[h.dataKey].filter(w=>w!=null),v=$3(t,n,h.barSize);return{stackId:void 0,dataKeys:m,barSize:v}});return[...a,...d]},Dhe=Ot([Ahe,Woe,khe],Phe),Fhe=(e,t,n,i,r)=>{var o,s,a=q1(e,t,n,i,r);if(a!=null){var d=Yr(e),h=iG(e),{maxBarSize:m}=a,v=bs(m)?h:m,w,R;return d==="horizontal"?(w=Np(e,"xAxis",t,i),R=zp(e,"xAxis",t,i)):(w=Np(e,"yAxis",n,i),R=zp(e,"yAxis",n,i)),(o=(s=Dy(w,R,!0))!==null&&s!==void 0?s:v)!==null&&o!==void 0?o:0}},Qj=(e,t,n,i)=>{var r=Yr(e),o,s;return r==="horizontal"?(o=Np(e,"xAxis",t,i),s=zp(e,"xAxis",t,i)):(o=Np(e,"yAxis",n,i),s=zp(e,"yAxis",n,i)),Dy(o,s)};function Mhe(e,t,n,i,r){var o=i.length;if(!(o<1)){var s=xf(e,n,0,!0),a,d=[];if(ws(i[0].barSize)){var h=!1,m=n/o,v=i.reduce(($,U)=>$+(U.barSize||0),0);v+=(o-1)*s,v>=n&&(v-=(o-1)*s,s=0),v>=n&&m>0&&(h=!0,m*=.9,v=o*m);var w=(n-v)/2>>0,R={offset:w-s,size:0};a=i.reduce(($,U)=>{var Y,X={stackId:U.stackId,dataKeys:U.dataKeys,position:{offset:R.offset+R.size+s,size:h?m:(Y=U.barSize)!==null&&Y!==void 0?Y:0}},q=[...$,X];return R=q[q.length-1].position,q},d)}else{var L=xf(t,n,0,!0);n-2*L-(o-1)*s<=0&&(s=0);var O=(n-2*L-(o-1)*s)/o;O>1&&(O>>=0);var z=ws(r)?Math.min(O,r):O;a=i.reduce(($,U,Y)=>[...$,{stackId:U.stackId,dataKeys:U.dataKeys,position:{offset:L+(O+s)*Y+(O-z)/2,size:z}}],d)}return a}}var Ihe=(e,t,n,i,r,o,s)=>{var a=bs(s)?t:s,d=Mhe(n,i,r!==o?r:o,e,a);return r!==o&&d!=null&&(d=d.map(h=>FC(FC({},h),{},{position:FC(FC({},h.position),{},{offset:h.position.offset-r/2})}))),d},Lhe=Ot([Dhe,iG,$oe,rG,Fhe,Qj,Ehe],Ihe),Ohe=(e,t,n,i)=>Np(e,"xAxis",t,i),zhe=(e,t,n,i)=>Np(e,"yAxis",n,i),Nhe=(e,t,n,i)=>zp(e,"xAxis",t,i),Bhe=(e,t,n,i)=>zp(e,"yAxis",n,i),Ghe=Ot([Lhe,q1],(e,t)=>{if(!(e==null||t==null)){var n=e.find(i=>i.stackId===t.stackId&&t.dataKey!=null&&i.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),jhe=(e,t)=>{var n=L2(t);if(!(!e||n==null||t==null)){var{stackId:i}=t;if(i!=null){var r=e[i];if(r){var{stackedData:o}=r;if(o)return o.find(s=>s.key===n)}}}},Hhe=Ot([The,q1],jhe),Vhe=Ot([Nl,XP,Ohe,zhe,Nhe,Bhe,Ghe,Yr,L1,Qj,Hhe,q1,Rhe],(e,t,n,i,r,o,s,a,d,h,m,v,w)=>{var{chartData:R,dataStartIndex:L,dataEndIndex:O}=d;if(!(v==null||s==null||t==null||a!=="horizontal"&&a!=="vertical"||n==null||i==null||r==null||o==null||h==null)){var{data:z}=v,$;if(z!=null&&z.length>0?$=z:$=R==null?void 0:R.slice(L,O+1),$!=null)return mhe({layout:a,barSettings:v,pos:s,parentViewBox:t,bandSize:h,xAxis:n,yAxis:i,xAxisTicks:r,yAxisTicks:o,stackedData:m,displayedData:$,offset:e,cells:w,dataStartIndex:L})}}),$he=e=>{var{chartData:t}=e,n=Zs(),i=uu();return I.useEffect(()=>i?()=>{}:(n(t3(t)),()=>{n(t3(void 0))}),[t,n,i]),null},W3={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},e9=Vc({name:"brush",initialState:W3,reducers:{setBrushSettings(e,t){return t.payload==null?W3:t.payload}}}),{setBrushSettings:rFe}=e9.actions,Whe=e9.reducer;function Uhe(e,t,n){return(t=qhe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qhe(e){var t=Khe(e,"string");return typeof t=="symbol"?t:t+""}function Khe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class lF{static create(t){return new lF(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(i)switch(i){case"start":return this.scale(t);case"middle":{var r=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+r}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(t)+o}default:return this.scale(t)}if(n){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}return this.scale(t)}}isInRange(t){var n=this.range(),i=n[0],r=n[n.length-1];return i<=r?t>=i&&t<=r:t>=r&&t<=i}}Uhe(lF,"EPS",1e-4);function Zhe(e){return(e%180+180)%180}var Yhe=function(t){var{width:n,height:i}=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=Zhe(r),s=o*Math.PI/180,a=Math.atan(i/n),d=s>a&&s<Math.PI-a?i/Math.sin(s):n/Math.cos(s);return Math.abs(d)},Xhe={dots:[],areas:[],lines:[]},t9=Vc({name:"referenceElements",initialState:Xhe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=yf(e).dots.findIndex(i=>i===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=yf(e).areas.findIndex(i=>i===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=yf(e).lines.findIndex(i=>i===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:oFe,removeDot:sFe,addArea:aFe,removeArea:lFe,addLine:uFe,removeLine:cFe}=t9.actions,Jhe=t9.reducer,Qhe=I.createContext(void 0),efe=e=>{var{children:t}=e,[n]=I.useState("".concat(jw("recharts"),"-clip")),i=H2();if(i==null)return null;var{x:r,y:o,width:s,height:a}=i;return I.createElement(Qhe.Provider,{value:n},I.createElement("defs",null,I.createElement("clipPath",{id:n},I.createElement("rect",{x:r,y:o,height:a,width:s}))),t)};function n9(e,t){if(t<1)return[];if(t===1)return e;for(var n=[],i=0;i<e.length;i+=t)n.push(e[i]);return n}function tfe(e,t,n){var i={width:e.width+t.width,height:e.height+t.height};return Yhe(i,n)}function nfe(e,t,n){var i=n==="width",{x:r,y:o,width:s,height:a}=e;return t===1?{start:i?r:o,end:i?r+s:o+a}:{start:i?r+s:o+a,end:i?r:o}}function gS(e,t,n,i,r){if(e*t<e*i||e*t>e*r)return!1;var o=n();return e*(t-e*o/2-i)>=0&&e*(t+e*o/2-r)<=0}function ife(e,t){return n9(e,t+1)}function rfe(e,t,n,i,r){for(var o=(i||[]).slice(),{start:s,end:a}=t,d=0,h=1,m=s,v=function(){var L=i==null?void 0:i[d];if(L===void 0)return{v:n9(i,h)};var O=d,z,$=()=>(z===void 0&&(z=n(L,O)),z),U=L.coordinate,Y=d===0||gS(e,U,$,m,a);Y||(d=0,m=s,h+=1),Y&&(m=U+e*($()/2+r),d+=h)},w;h<=o.length;)if(w=v(),w)return w.v;return[]}function U3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function Ru(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?U3(Object(n),!0).forEach(function(i){ofe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function ofe(e,t,n){return(t=sfe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sfe(e){var t=afe(e,"string");return typeof t=="symbol"?t:t+""}function afe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lfe(e,t,n,i,r){for(var o=(i||[]).slice(),s=o.length,{start:a}=t,{end:d}=t,h=function(w){var R=o[w],L,O=()=>(L===void 0&&(L=n(R,w)),L);if(w===s-1){var z=e*(R.coordinate+e*O()/2-d);o[w]=R=Ru(Ru({},R),{},{tickCoord:z>0?R.coordinate-z*e:R.coordinate})}else o[w]=R=Ru(Ru({},R),{},{tickCoord:R.coordinate});if(R.tickCoord!=null){var $=gS(e,R.tickCoord,O,a,d);$&&(d=R.tickCoord-e*(O()/2+r),o[w]=Ru(Ru({},R),{},{isShow:!0}))}},m=s-1;m>=0;m--)h(m);return o}function ufe(e,t,n,i,r,o){var s=(i||[]).slice(),a=s.length,{start:d,end:h}=t;if(o){var m=i[a-1],v=n(m,a-1),w=e*(m.coordinate+e*v/2-h);if(s[a-1]=m=Ru(Ru({},m),{},{tickCoord:w>0?m.coordinate-w*e:m.coordinate}),m.tickCoord!=null){var R=gS(e,m.tickCoord,()=>v,d,h);R&&(h=m.tickCoord-e*(v/2+r),s[a-1]=Ru(Ru({},m),{},{isShow:!0}))}}for(var L=o?a-1:a,O=function(U){var Y=s[U],X,q=()=>(X===void 0&&(X=n(Y,U)),X);if(U===0){var ie=e*(Y.coordinate-e*q()/2-d);s[U]=Y=Ru(Ru({},Y),{},{tickCoord:ie<0?Y.coordinate-ie*e:Y.coordinate})}else s[U]=Y=Ru(Ru({},Y),{},{tickCoord:Y.coordinate});if(Y.tickCoord!=null){var re=gS(e,Y.tickCoord,q,d,h);re&&(d=Y.tickCoord+e*(q()/2+r),s[U]=Ru(Ru({},Y),{},{isShow:!0}))}},z=0;z<L;z++)O(z);return s}function cfe(e,t,n){var{tick:i,ticks:r,viewBox:o,minTickGap:s,orientation:a,interval:d,tickFormatter:h,unit:m,angle:v}=e;if(!r||!r.length||!i)return[];if(fi(d)||xx.isSsr){var w;return(w=ife(r,fi(d)?d:0))!==null&&w!==void 0?w:[]}var R=[],L=a==="top"||a==="bottom"?"width":"height",O=m&&L==="width"?Rw(m,{fontSize:t,letterSpacing:n}):{width:0,height:0},z=(Y,X)=>{var q=typeof h=="function"?h(Y.value,X):Y.value;return L==="width"?tfe(Rw(q,{fontSize:t,letterSpacing:n}),O,v):Rw(q,{fontSize:t,letterSpacing:n})[L]},$=r.length>=2?_d(r[1].coordinate-r[0].coordinate):1,U=nfe(o,$,L);return d==="equidistantPreserveStart"?rfe($,U,z,r,s):(d==="preserveStart"||d==="preserveStartEnd"?R=ufe($,U,z,r,s,d==="preserveStartEnd"):R=lfe($,U,z,r,s),R.filter(Y=>Y.isShow))}var dfe=e=>{var{ticks:t,label:n,labelGapWithTick:i=5,tickSize:r=0,tickMargin:o=0}=e,s=0;if(t){Array.from(t).forEach(m=>{if(m){var v=m.getBoundingClientRect();v.width>s&&(s=v.width)}});var a=n?n.getBoundingClientRect().width:0,d=r+o,h=s+d+a+(n?i:0);return Math.round(h)}return 0},hfe=["axisLine","width","height","className","hide","ticks","axisType"];function ffe(e,t){if(e==null)return{};var n,i,r=pfe(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pfe(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function c0(){return c0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c0.apply(null,arguments)}function q3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function Ha(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?q3(Object(n),!0).forEach(function(i){gfe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function gfe(e,t,n){return(t=mfe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mfe(e){var t=yfe(e,"string");return typeof t=="symbol"?t:t+""}function yfe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xv={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Ml.axis};function vfe(e){var{x:t,y:n,width:i,height:r,orientation:o,mirror:s,axisLine:a,otherSvgProps:d}=e;if(!a)return null;var h=Ha(Ha(Ha({},d),xh(a)),{},{fill:"none"});if(o==="top"||o==="bottom"){var m=+(o==="top"&&!s||o==="bottom"&&s);h=Ha(Ha({},h),{},{x1:t,y1:n+m*r,x2:t+i,y2:n+m*r})}else{var v=+(o==="left"&&!s||o==="right"&&s);h=Ha(Ha({},h),{},{x1:t+v*i,y1:n,x2:t+v*i,y2:n+r})}return I.createElement("line",c0({},h,{className:Fo("recharts-cartesian-axis-line",Kb(a,"className"))}))}function bfe(e,t,n,i,r,o,s,a,d){var h,m,v,w,R,L,O=a?-1:1,z=e.tickSize||s,$=fi(e.tickCoord)?e.tickCoord:e.coordinate;switch(o){case"top":h=m=e.coordinate,w=n+ +!a*r,v=w-O*z,L=v-O*d,R=$;break;case"left":v=w=e.coordinate,m=t+ +!a*i,h=m-O*z,R=h-O*d,L=$;break;case"right":v=w=e.coordinate,m=t+ +a*i,h=m+O*z,R=h+O*d,L=$;break;default:h=m=e.coordinate,w=n+ +a*r,v=w+O*z,L=v+O*d,R=$;break}return{line:{x1:h,y1:v,x2:m,y2:w},tick:{x:R,y:L}}}function xfe(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function wfe(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function Cfe(e){var{option:t,tickProps:n,value:i}=e,r,o=Fo(n.className,"recharts-cartesian-axis-tick-value");if(I.isValidElement(t))r=I.cloneElement(t,Ha(Ha({},n),{},{className:o}));else if(typeof t=="function")r=t(Ha(Ha({},n),{},{className:o}));else{var s="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(s=Fo(s,t==null?void 0:t.className)),r=I.createElement(JD,c0({},n,{className:s}),i)}return r}var _fe=I.forwardRef((e,t)=>{var{ticks:n=[],tick:i,tickLine:r,stroke:o,tickFormatter:s,unit:a,padding:d,tickTextProps:h,orientation:m,mirror:v,x:w,y:R,width:L,height:O,tickSize:z,tickMargin:$,fontSize:U,letterSpacing:Y,getTicksConfig:X,events:q,axisType:ie}=e,re=cfe(Ha(Ha({},X),{},{ticks:n}),U,Y),J=xfe(m,v),ne=wfe(m,v),be=xh(X),ue=w1(i),ve={};typeof r=="object"&&(ve=r);var ce=Ha(Ha({},be),{},{fill:"none"},ve),Ie=re.map(he=>Ha({entry:he},bfe(he,w,R,L,O,m,z,v,$))),Te=Ie.map(he=>{var{entry:Re,line:De}=he;return I.createElement(ku,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(Re.value,"-").concat(Re.coordinate,"-").concat(Re.tickCoord)},r&&I.createElement("line",c0({},ce,De,{className:Fo("recharts-cartesian-axis-tick-line",Kb(r,"className"))})))}),fe=Ie.map((he,Re)=>{var{entry:De,tick:Ye}=he,_e=Ha(Ha(Ha(Ha({textAnchor:J,verticalAnchor:ne},be),{},{stroke:"none",fill:o},ue),Ye),{},{index:Re,payload:De,visibleTicksCount:re.length,tickFormatter:s,padding:d},h);return I.createElement(ku,c0({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(De.value,"-").concat(De.coordinate,"-").concat(De.tickCoord)},s2(q,De,Re)),i&&I.createElement(Cfe,{option:i,tickProps:_e,value:"".concat(typeof s=="function"?s(De.value,Re):De.value).concat(a||"")}))});return I.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(ie,"-ticks")},fe.length>0&&I.createElement(kh,{zIndex:Ml.label},I.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(ie,"-tick-labels"),ref:t},fe)),Te.length>0&&I.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(ie,"-tick-lines")},Te))}),Sfe=I.forwardRef((e,t)=>{var{axisLine:n,width:i,height:r,className:o,hide:s,ticks:a,axisType:d}=e,h=ffe(e,hfe),[m,v]=I.useState(""),[w,R]=I.useState(""),L=I.useRef(null);I.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var z;return dfe({ticks:L.current,label:(z=e.labelRef)===null||z===void 0?void 0:z.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var O=I.useCallback(z=>{if(z){var $=z.getElementsByClassName("recharts-cartesian-axis-tick-value");L.current=$;var U=$[0];if(U){var Y=window.getComputedStyle(U),X=Y.fontSize,q=Y.letterSpacing;(X!==m||q!==w)&&(v(X),R(q))}}},[m,w]);return s||i!=null&&i<=0||r!=null&&r<=0?null:I.createElement(kh,{zIndex:e.zIndex},I.createElement(ku,{className:Fo("recharts-cartesian-axis",o)},I.createElement(vfe,{x:e.x,y:e.y,width:i,height:r,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:xh(e)}),I.createElement(_fe,{ref:O,axisType:d,events:h,fontSize:m,getTicksConfig:e,height:e.height,letterSpacing:w,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:a,unit:e.unit,width:e.width,x:e.x,y:e.y}),I.createElement(Nue,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},I.createElement(Kue,{label:e.label,labelRef:e.labelRef}),e.children)))}),uF=I.forwardRef((e,t)=>{var n=zl(e,Xv);return I.createElement(Sfe,c0({},n,{ref:t}))});uF.displayName="CartesianAxis";var i9=(e,t,n,i)=>Np(e,"xAxis",t,i),r9=(e,t,n,i)=>zp(e,"xAxis",t,i),o9=(e,t,n,i)=>Np(e,"yAxis",n,i),s9=(e,t,n,i)=>zp(e,"yAxis",n,i),Efe=Ot([Yr,i9,o9,r9,s9],(e,t,n,i,r)=>$p(e,"xAxis")?Dy(t,i,!1):Dy(n,r,!1)),Rfe=(e,t,n,i,r)=>r;function Afe(e){return e.type==="line"}var Tfe=Ot([z1,Rfe],(e,t)=>e.filter(Afe).find(n=>n.id===t)),kfe=Ot([Yr,i9,o9,r9,s9,Tfe,Efe,L1],(e,t,n,i,r,o,s,a)=>{var{chartData:d,dataStartIndex:h,dataEndIndex:m}=a;if(!(o==null||t==null||n==null||i==null||r==null||i.length===0||r.length===0||s==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:v,data:w}=o,R;if(w!=null&&w.length>0?R=w:R=d==null?void 0:d.slice(h,m+1),R!=null)return Zfe({layout:e,xAxis:t,yAxis:n,xAxisTicks:i,yAxisTicks:r,dataKey:v,bandSize:s,displayedData:R})}});function a9(e){var t=w1(e),n=3,i=2;if(t!=null){var{r,strokeWidth:o}=t,s=Number(r),a=Number(o);return(Number.isNaN(s)||s<0)&&(s=n),(Number.isNaN(a)||a<0)&&(a=i),{r:s,strokeWidth:a}}return{r:n,strokeWidth:i}}var Pfe=["id"],Dfe=["type","layout","connectNulls","needClip","shape"],Ffe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function n1(){return n1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},n1.apply(null,arguments)}function K3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function _p(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?K3(Object(n),!0).forEach(function(i){Mfe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Mfe(e,t,n){return(t=Ife(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ife(e){var t=Lfe(e,"string");return typeof t=="symbol"?t:t+""}function Lfe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cF(e,t){if(e==null)return{};var n,i,r=Ofe(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ofe(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}var zfe=e=>{var{dataKey:t,name:n,stroke:i,legendType:r,hide:o}=e;return[{inactive:o,dataKey:t,type:r,color:i,value:bx(n,t),payload:e}]},Nfe=I.memo(e=>{var{dataKey:t,data:n,stroke:i,strokeWidth:r,fill:o,name:s,hide:a,unit:d,tooltipType:h}=e,m={dataDefinedOnItem:n,positions:void 0,settings:{stroke:i,strokeWidth:r,fill:o,dataKey:t,nameKey:void 0,name:bx(s,t),hide:a,type:h,color:i,unit:d}};return I.createElement(iF,{tooltipEntrySettings:m})}),l9=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function Bfe(e,t){for(var n=e.length%2!==0?[...e,0]:e,i=[],r=0;r<t;++r)i=[...i,...n];return i}var Gfe=(e,t,n)=>{var i=n.reduce((v,w)=>v+w);if(!i)return l9(t,e);for(var r=Math.floor(e/i),o=e%i,s=t-e,a=[],d=0,h=0;d<n.length;h+=n[d],++d)if(h+n[d]>o){a=[...n.slice(0,d),o-h];break}var m=a.length%2===0?[0,s]:[s];return[...Bfe(n,r),...a,...m].map(v=>"".concat(v,"px")).join(", ")};function jfe(e){var{clipPathId:t,points:n,props:i}=e,{dot:r,dataKey:o,needClip:s}=i,{id:a}=i,d=cF(i,Pfe),h=xh(d);return I.createElement(qj,{points:n,dot:r,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:o,baseProps:h,needClip:s,clipPathId:t})}function Hfe(e){var{showLabels:t,children:n,points:i}=e,r=I.useMemo(()=>i==null?void 0:i.map(o=>{var s,a,d={x:(s=o.x)!==null&&s!==void 0?s:0,y:(a=o.y)!==null&&a!==void 0?a:0,width:0,lowerWidth:0,upperWidth:0,height:0};return _p(_p({},d),{},{value:o.value,payload:o.payload,viewBox:d,parentViewBox:void 0,fill:void 0})}),[i]);return I.createElement(eF,{value:t?r:void 0},n)}function Z3(e){var{clipPathId:t,pathRef:n,points:i,strokeDasharray:r,props:o}=e,{type:s,layout:a,connectNulls:d,needClip:h,shape:m}=o,v=cF(o,Dfe),w=_p(_p({},Tu(v)),{},{fill:"none",className:"recharts-line-curve",clipPath:h?"url(#clipPath-".concat(t,")"):void 0,points:i,type:s,layout:a,connectNulls:d,strokeDasharray:r??o.strokeDasharray});return I.createElement(I.Fragment,null,(i==null?void 0:i.length)>1&&I.createElement(jj,n1({shapeType:"curve",option:m},w,{pathRef:n})),I.createElement(jfe,{points:i,clipPathId:t,props:o}))}function Vfe(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function $fe(e){var{clipPathId:t,props:n,pathRef:i,previousPointsRef:r,longestAnimatedLengthRef:o}=e,{points:s,strokeDasharray:a,isAnimationActive:d,animationBegin:h,animationDuration:m,animationEasing:v,animateNewValues:w,width:R,height:L,onAnimationEnd:O,onAnimationStart:z}=n,$=r.current,U=P1(s,"recharts-line-"),Y=I.useRef(U),[X,q]=I.useState(!1),ie=!X,re=I.useCallback(()=>{typeof O=="function"&&O(),q(!1)},[O]),J=I.useCallback(()=>{typeof z=="function"&&z(),q(!0)},[z]),ne=Vfe(i.current),be=I.useRef(0);Y.current!==U&&(be.current=o.current,Y.current=U);var ue=be.current;return I.createElement(Hfe,{points:s,showLabels:ie},n.children,I.createElement(k1,{animationId:U,begin:h,duration:m,isActive:d,easing:v,onAnimationEnd:re,onAnimationStart:J,key:U},ve=>{var ce=Vo(ue,ne+ue,ve),Ie=Math.min(ce,ne),Te;if(d)if(a){var fe="".concat(a).split(/[,\s]+/gim).map(De=>parseFloat(De));Te=Gfe(Ie,ne,fe)}else Te=l9(ne,Ie);else Te=a==null?void 0:String(a);if(ve>0&&ne>0&&(r.current=s,o.current=Math.max(o.current,Ie)),$){var he=$.length/s.length,Re=ve===1?s:s.map((De,Ye)=>{var _e=Math.floor(Ye*he);if($[_e]){var Le=$[_e];return _p(_p({},De),{},{x:Vo(Le.x,De.x,ve),y:Vo(Le.y,De.y,ve)})}return w?_p(_p({},De),{},{x:Vo(R*2,De.x,ve),y:Vo(L/2,De.y,ve)}):_p(_p({},De),{},{x:De.x,y:De.y})});return r.current=Re,I.createElement(Z3,{props:n,points:Re,clipPathId:t,pathRef:i,strokeDasharray:Te})}return I.createElement(Z3,{props:n,points:s,clipPathId:t,pathRef:i,strokeDasharray:Te})}),I.createElement(tF,{label:n.label}))}function Wfe(e){var{clipPathId:t,props:n}=e,i=I.useRef(null),r=I.useRef(0),o=I.useRef(null);return I.createElement($fe,{props:n,clipPathId:t,previousPointsRef:i,longestAnimatedLengthRef:r,pathRef:o})}var Ufe=(e,t)=>{var n,i;return{x:(n=e.x)!==null&&n!==void 0?n:void 0,y:(i=e.y)!==null&&i!==void 0?i:void 0,value:e.value,errorVal:Ea(e.payload,t)}};class qfe extends I.Component{render(){var{hide:t,dot:n,points:i,className:r,xAxisId:o,yAxisId:s,top:a,left:d,width:h,height:m,id:v,needClip:w,zIndex:R}=this.props;if(t)return null;var L=Fo("recharts-line",r),O=v,{r:z,strokeWidth:$}=a9(n),U=nF(n),Y=z*2+$,X=w?"url(#clipPath-".concat(U?"":"dots-").concat(O,")"):void 0;return I.createElement(kh,{zIndex:R},I.createElement(ku,{className:L},w&&I.createElement("defs",null,I.createElement(aF,{clipPathId:O,xAxisId:o,yAxisId:s}),!U&&I.createElement("clipPath",{id:"clipPath-dots-".concat(O)},I.createElement("rect",{x:d-Y/2,y:a-Y/2,width:h+Y,height:m+Y}))),I.createElement(Yj,{xAxisId:o,yAxisId:s,data:i,dataPointFormatter:Ufe,errorBarOffset:0},I.createElement(Wfe,{props:this.props,clipPathId:O}))),I.createElement(fk,{activeDot:this.props.activeDot,points:i,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:X}))}}var u9={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Ml.line,type:"linear"};function Kfe(e){var t=zl(e,u9),{activeDot:n,animateNewValues:i,animationBegin:r,animationDuration:o,animationEasing:s,connectNulls:a,dot:d,hide:h,isAnimationActive:m,label:v,legendType:w,xAxisId:R,yAxisId:L,id:O}=t,z=cF(t,Ffe),{needClip:$}=V2(R,L),U=H2(),Y=x0(),X=uu(),q=bi(be=>kfe(be,R,L,X,O));if(Y!=="horizontal"&&Y!=="vertical"||q==null||U==null)return null;var{height:ie,width:re,x:J,y:ne}=U;return I.createElement(qfe,n1({},z,{id:O,connectNulls:a,dot:d,activeDot:n,animateNewValues:i,animationBegin:r,animationDuration:o,animationEasing:s,isAnimationActive:m,hide:h,label:v,legendType:w,xAxisId:R,yAxisId:L,points:q,layout:Y,height:ie,width:re,left:J,top:ne,needClip:$}))}function Zfe(e){var{layout:t,xAxis:n,yAxis:i,xAxisTicks:r,yAxisTicks:o,dataKey:s,bandSize:a,displayedData:d}=e;return d.map((h,m)=>{var v=Ea(h,s);if(t==="horizontal"){var w=j_({axis:n,ticks:r,bandSize:a,entry:h,index:m}),R=bs(v)?null:i.scale(v);return{x:w,y:R,value:v,payload:h}}var L=bs(v)?null:n.scale(v),O=j_({axis:i,ticks:o,bandSize:a,entry:h,index:m});return L==null||O==null?null:{x:L,y:O,value:v,payload:h}}).filter(Boolean)}function Yfe(e){var t=zl(e,u9),n=uu();return I.createElement(oF,{id:t.id,type:"line"},i=>I.createElement(I.Fragment,null,I.createElement(rF,{legendPayload:zfe(t)}),I.createElement(Nfe,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),I.createElement(sF,{type:"line",id:i,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:n}),I.createElement(Kfe,n1({},t,{id:i}))))}var mS=I.memo(Yfe,U1);mS.displayName="Line";var c9=(e,t,n,i)=>Np(e,"xAxis",t,i),d9=(e,t,n,i)=>zp(e,"xAxis",t,i),h9=(e,t,n,i)=>Np(e,"yAxis",n,i),f9=(e,t,n,i)=>zp(e,"yAxis",n,i),Xfe=Ot([Yr,c9,h9,d9,f9],(e,t,n,i,r)=>$p(e,"xAxis")?Dy(t,i,!1):Dy(n,r,!1)),Jfe=(e,t,n,i,r)=>r,p9=Ot([z1,Jfe],(e,t)=>e.filter(n=>n.type==="area").find(n=>n.id===t)),Qfe=(e,t,n,i,r)=>{var o,s=p9(e,t,n,i,r);if(s!=null){var a=Yr(e),d=$p(a,"xAxis"),h;if(d?h=e1(e,"yAxis",n,i):h=e1(e,"xAxis",t,i),h!=null){var{stackId:m}=s,v=L2(s);if(!(m==null||v==null)){var w=(o=h[m])===null||o===void 0?void 0:o.stackedData;return w==null?void 0:w.find(R=>R.key===v)}}}},epe=Ot([Yr,c9,h9,d9,f9,Qfe,L1,Xfe,p9,Uoe],(e,t,n,i,r,o,s,a,d,h)=>{var{chartData:m,dataStartIndex:v,dataEndIndex:w}=s;if(!(d==null||e!=="horizontal"&&e!=="vertical"||t==null||n==null||i==null||r==null||i.length===0||r.length===0||a==null)){var{data:R}=d,L;if(R&&R.length>0?L=R:L=m==null?void 0:m.slice(v,w+1),L!=null)return bpe({layout:e,xAxis:t,yAxis:n,xAxisTicks:i,yAxisTicks:r,dataStartIndex:v,areaSettings:d,stackedData:o,displayedData:L,chartBaseValue:h,bandSize:a})}}),tpe=["id"],npe=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function Jv(){return Jv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Jv.apply(null,arguments)}function g9(e,t){if(e==null)return{};var n,i,r=ipe(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ipe(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function Y3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function wb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Y3(Object(n),!0).forEach(function(i){rpe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function rpe(e,t,n){return(t=ope(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ope(e){var t=spe(e,"string");return typeof t=="symbol"?t:t+""}function spe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yS(e,t){return e&&e!=="none"?e:t}var ape=e=>{var{dataKey:t,name:n,stroke:i,fill:r,legendType:o,hide:s}=e;return[{inactive:s,dataKey:t,type:o,color:yS(i,r),value:bx(n,t),payload:e}]},lpe=I.memo(e=>{var{dataKey:t,data:n,stroke:i,strokeWidth:r,fill:o,name:s,hide:a,unit:d,tooltipType:h}=e,m={dataDefinedOnItem:n,positions:void 0,settings:{stroke:i,strokeWidth:r,fill:o,dataKey:t,nameKey:void 0,name:bx(s,t),hide:a,type:h,color:yS(i,o),unit:d}};return I.createElement(iF,{tooltipEntrySettings:m})});function upe(e){var{clipPathId:t,points:n,props:i}=e,{needClip:r,dot:o,dataKey:s}=i,a=xh(i);return I.createElement(qj,{points:n,dot:o,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:s,baseProps:a,needClip:r,clipPathId:t})}function cpe(e){var{showLabels:t,children:n,points:i}=e,r=i.map(o=>{var s,a,d={x:(s=o.x)!==null&&s!==void 0?s:0,y:(a=o.y)!==null&&a!==void 0?a:0,width:0,lowerWidth:0,upperWidth:0,height:0};return wb(wb({},d),{},{value:o.value,payload:o.payload,parentViewBox:void 0,viewBox:d,fill:void 0})});return I.createElement(eF,{value:t?r:void 0},n)}function X3(e){var{points:t,baseLine:n,needClip:i,clipPathId:r,props:o}=e,{layout:s,type:a,stroke:d,connectNulls:h,isRange:m}=o,{id:v}=o,w=g9(o,tpe),R=xh(w),L=Tu(w);return I.createElement(I.Fragment,null,(t==null?void 0:t.length)>1&&I.createElement(ku,{clipPath:i?"url(#clipPath-".concat(r,")"):void 0},I.createElement(Ew,Jv({},L,{id:v,points:t,connectNulls:h,type:a,baseLine:n,layout:s,stroke:"none",className:"recharts-area-area"})),d!=="none"&&I.createElement(Ew,Jv({},R,{className:"recharts-area-curve",layout:s,type:a,connectNulls:h,fill:"none",points:t})),d!=="none"&&m&&I.createElement(Ew,Jv({},R,{className:"recharts-area-curve",layout:s,type:a,connectNulls:h,fill:"none",points:n}))),I.createElement(upe,{points:t,props:w,clipPathId:r}))}function dpe(e){var{alpha:t,baseLine:n,points:i,strokeWidth:r}=e,o=i[0].y,s=i[i.length-1].y;if(!ws(o)||!ws(s))return null;var a=t*Math.abs(o-s),d=Math.max(...i.map(h=>h.x||0));return fi(n)?d=Math.max(n,d):n&&Array.isArray(n)&&n.length&&(d=Math.max(...n.map(h=>h.x||0),d)),fi(d)?I.createElement("rect",{x:0,y:o<s?o:o-a,width:d+(r?parseInt("".concat(r),10):1),height:Math.floor(a)}):null}function hpe(e){var{alpha:t,baseLine:n,points:i,strokeWidth:r}=e,o=i[0].x,s=i[i.length-1].x;if(!ws(o)||!ws(s))return null;var a=t*Math.abs(o-s),d=Math.max(...i.map(h=>h.y||0));return fi(n)?d=Math.max(n,d):n&&Array.isArray(n)&&n.length&&(d=Math.max(...n.map(h=>h.y||0),d)),fi(d)?I.createElement("rect",{x:o<s?o:o-a,y:0,width:a,height:Math.floor(d+(r?parseInt("".concat(r),10):1))}):null}function fpe(e){var{alpha:t,layout:n,points:i,baseLine:r,strokeWidth:o}=e;return n==="vertical"?I.createElement(dpe,{alpha:t,points:i,baseLine:r,strokeWidth:o}):I.createElement(hpe,{alpha:t,points:i,baseLine:r,strokeWidth:o})}function ppe(e){var{needClip:t,clipPathId:n,props:i,previousPointsRef:r,previousBaselineRef:o}=e,{points:s,baseLine:a,isAnimationActive:d,animationBegin:h,animationDuration:m,animationEasing:v,onAnimationStart:w,onAnimationEnd:R}=i,L=I.useMemo(()=>({points:s,baseLine:a}),[s,a]),O=P1(L,"recharts-area-"),z=ote(),[$,U]=I.useState(!1),Y=!$,X=I.useCallback(()=>{typeof R=="function"&&R(),U(!1)},[R]),q=I.useCallback(()=>{typeof w=="function"&&w(),U(!0)},[w]);if(z==null)return null;var ie=r.current,re=o.current;return I.createElement(cpe,{showLabels:Y,points:s},i.children,I.createElement(k1,{animationId:O,begin:h,duration:m,isActive:d,easing:v,onAnimationEnd:X,onAnimationStart:q,key:O},J=>{if(ie){var ne=ie.length/s.length,be=J===1?s:s.map((ve,ce)=>{var Ie=Math.floor(ce*ne);if(ie[Ie]){var Te=ie[Ie];return wb(wb({},ve),{},{x:Vo(Te.x,ve.x,J),y:Vo(Te.y,ve.y,J)})}return ve}),ue;return fi(a)?ue=Vo(re,a,J):bs(a)||bf(a)?ue=Vo(re,0,J):ue=a.map((ve,ce)=>{var Ie=Math.floor(ce*ne);if(Array.isArray(re)&&re[Ie]){var Te=re[Ie];return wb(wb({},ve),{},{x:Vo(Te.x,ve.x,J),y:Vo(Te.y,ve.y,J)})}return ve}),J>0&&(r.current=be,o.current=ue),I.createElement(X3,{points:be,baseLine:ue,needClip:t,clipPathId:n,props:i})}return J>0&&(r.current=s,o.current=a),I.createElement(ku,null,d&&I.createElement("defs",null,I.createElement("clipPath",{id:"animationClipPath-".concat(n)},I.createElement(fpe,{alpha:J,points:s,baseLine:a,layout:z,strokeWidth:i.strokeWidth}))),I.createElement(ku,{clipPath:"url(#animationClipPath-".concat(n,")")},I.createElement(X3,{points:s,baseLine:a,needClip:t,clipPathId:n,props:i})))}),I.createElement(tF,{label:i.label}))}function gpe(e){var{needClip:t,clipPathId:n,props:i}=e,r=I.useRef(null),o=I.useRef();return I.createElement(ppe,{needClip:t,clipPathId:n,props:i,previousPointsRef:r,previousBaselineRef:o})}class mpe extends I.PureComponent{render(){var{hide:t,dot:n,points:i,className:r,top:o,left:s,needClip:a,xAxisId:d,yAxisId:h,width:m,height:v,id:w,baseLine:R,zIndex:L}=this.props;if(t)return null;var O=Fo("recharts-area",r),z=w,{r:$,strokeWidth:U}=a9(n),Y=nF(n),X=$*2+U,q=a?"url(#clipPath-".concat(Y?"":"dots-").concat(z,")"):void 0;return I.createElement(kh,{zIndex:L},I.createElement(ku,{className:O},a&&I.createElement("defs",null,I.createElement(aF,{clipPathId:z,xAxisId:d,yAxisId:h}),!Y&&I.createElement("clipPath",{id:"clipPath-dots-".concat(z)},I.createElement("rect",{x:s-X/2,y:o-X/2,width:m+X,height:v+X}))),I.createElement(gpe,{needClip:a,clipPathId:z,props:this.props})),I.createElement(fk,{points:i,mainColor:yS(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:q}),this.props.isRange&&Array.isArray(R)&&I.createElement(fk,{points:R,mainColor:yS(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:q}))}}var m9={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:Ml.area};function ype(e){var t,n=zl(e,m9),{activeDot:i,animationBegin:r,animationDuration:o,animationEasing:s,connectNulls:a,dot:d,fill:h,fillOpacity:m,hide:v,isAnimationActive:w,legendType:R,stroke:L,xAxisId:O,yAxisId:z}=n,$=g9(n,npe),U=x0(),Y=yj(),{needClip:X}=V2(O,z),q=uu(),{points:ie,isRange:re,baseLine:J}=(t=bi(Ie=>epe(Ie,O,z,q,e.id)))!==null&&t!==void 0?t:{},ne=H2();if(U!=="horizontal"&&U!=="vertical"||ne==null||Y!=="AreaChart"&&Y!=="ComposedChart")return null;var{height:be,width:ue,x:ve,y:ce}=ne;return!ie||!ie.length?null:I.createElement(mpe,Jv({},$,{activeDot:i,animationBegin:r,animationDuration:o,animationEasing:s,baseLine:J,connectNulls:a,dot:d,fill:h,fillOpacity:m,height:be,hide:v,layout:U,isAnimationActive:w==="auto"?!xx.isSsr:w,isRange:re,legendType:R,needClip:X,points:ie,stroke:L,width:ue,left:ve,top:ce,xAxisId:O,yAxisId:z}))}var vpe=(e,t,n,i,r)=>{var o=n??t;if(fi(o))return o;var s=e==="horizontal"?r:i,a=s.scale.domain();if(s.type==="number"){var d=Math.max(a[0],a[1]),h=Math.min(a[0],a[1]);return o==="dataMin"?h:o==="dataMax"||d<0?d:Math.max(Math.min(a[0],a[1]),0)}return o==="dataMin"?a[0]:o==="dataMax"?a[1]:a[0]};function bpe(e){var{areaSettings:{connectNulls:t,baseValue:n,dataKey:i},stackedData:r,layout:o,chartBaseValue:s,xAxis:a,yAxis:d,displayedData:h,dataStartIndex:m,xAxisTicks:v,yAxisTicks:w,bandSize:R}=e,L=r&&r.length,O=vpe(o,s,n,a,d),z=o==="horizontal",$=!1,U=h.map((X,q)=>{var ie;L?ie=r[m+q]:(ie=Ea(X,i),Array.isArray(ie)?$=!0:ie=[O,ie]);var re=ie[1]==null||L&&!t&&Ea(X,i)==null;return z?{x:j_({axis:a,ticks:v,bandSize:R,entry:X,index:q}),y:re?null:d.scale(ie[1]),value:ie,payload:X}:{x:re?null:a.scale(ie[1]),y:j_({axis:d,ticks:w,bandSize:R,entry:X,index:q}),value:ie,payload:X}}),Y;return L||$?Y=U.map(X=>{var q=Array.isArray(X.value)?X.value[0]:null;return z?{x:X.x,y:q!=null&&X.y!=null?d.scale(q):null,payload:X.payload}:{x:q!=null?a.scale(q):null,y:X.y,payload:X.payload}}):Y=z?d.scale(O):a.scale(O),{points:U,baseLine:Y,isRange:$}}function xpe(e){var t=zl(e,m9),n=uu();return I.createElement(oF,{id:t.id,type:"area"},i=>I.createElement(I.Fragment,null,I.createElement(rF,{legendPayload:ape(t)}),I.createElement(lpe,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),I.createElement(sF,{type:"area",id:i,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:zB(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:n,connectNulls:t.connectNulls}),I.createElement(ype,Jv({},t,{id:i}))))}var y9=I.memo(xpe,U1);y9.displayName="Area";var wpe=["domain","range"],Cpe=["domain","range"];function J3(e,t){if(e==null)return{};var n,i,r=_pe(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function _pe(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function Q3(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function v9(e,t){if(e===t)return!0;var{domain:n,range:i}=e,r=J3(e,wpe),{domain:o,range:s}=t,a=J3(t,Cpe);return!Q3(n,o)||!Q3(i,s)?!1:U1(r,a)}var Spe=["dangerouslySetInnerHTML","ticks"],Epe=["id"];function gk(){return gk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},gk.apply(null,arguments)}function e4(e,t){if(e==null)return{};var n,i,r=Rpe(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Rpe(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function Ape(e){var t=Zs(),n=I.useRef(null);return I.useLayoutEffect(()=>{n.current===null?t(Jce(e)):n.current!==e&&t(Qce({prev:n.current,next:e})),n.current=e},[e,t]),I.useLayoutEffect(()=>()=>{n.current&&(t(ede(n.current)),n.current=null)},[t]),null}var Tpe=e=>{var{xAxisId:t,className:n}=e,i=bi(XP),r=uu(),o="xAxis",s=bi(z=>Rx(z,o,t,r)),a=bi(z=>KG(z,o,t,r)),d=bi(z=>$G(z,t)),h=bi(z=>Vse(z,t)),m=bi(z=>fG(z,t));if(d==null||h==null||m==null)return null;var{dangerouslySetInnerHTML:v,ticks:w}=e,R=e4(e,Spe),{id:L}=m,O=e4(m,Epe);return I.createElement(uF,gk({},R,O,{scale:s,x:h.x,y:h.y,width:d.width,height:d.height,className:Fo("recharts-".concat(o," ").concat(o),n),viewBox:i,ticks:a,axisType:o}))},kpe={allowDataOverflow:Pl.allowDataOverflow,allowDecimals:Pl.allowDecimals,allowDuplicatedCategory:Pl.allowDuplicatedCategory,angle:Pl.angle,axisLine:Xv.axisLine,height:Pl.height,hide:!1,includeHidden:Pl.includeHidden,interval:Pl.interval,minTickGap:Pl.minTickGap,mirror:Pl.mirror,orientation:Pl.orientation,padding:Pl.padding,reversed:Pl.reversed,scale:Pl.scale,tick:Pl.tick,tickCount:Pl.tickCount,tickLine:Xv.tickLine,tickSize:Xv.tickSize,type:Pl.type,xAxisId:0},Ppe=e=>{var t=zl(e,kpe);return I.createElement(I.Fragment,null,I.createElement(Ape,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),I.createElement(Tpe,t))},Aw=I.memo(Ppe,v9);Aw.displayName="XAxis";var Dpe=["dangerouslySetInnerHTML","ticks"],Fpe=["id"];function mk(){return mk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},mk.apply(null,arguments)}function t4(e,t){if(e==null)return{};var n,i,r=Mpe(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Mpe(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function Ipe(e){var t=Zs(),n=I.useRef(null);return I.useLayoutEffect(()=>{n.current===null?t(tde(e)):n.current!==e&&t(nde({prev:n.current,next:e})),n.current=e},[e,t]),I.useLayoutEffect(()=>()=>{n.current&&(t(ide(n.current)),n.current=null)},[t]),null}var Lpe=e=>{var{yAxisId:t,className:n,width:i,label:r}=e,o=I.useRef(null),s=I.useRef(null),a=bi(XP),d=uu(),h=Zs(),m="yAxis",v=bi(q=>Rx(q,m,t,d)),w=bi(q=>WG(q,t)),R=bi(q=>Wse(q,t)),L=bi(q=>KG(q,m,t,d)),O=bi(q=>pG(q,t));if(I.useLayoutEffect(()=>{if(!(i!=="auto"||!w||QD(r)||I.isValidElement(r)||O==null)){var q=o.current;if(q){var ie=q.getCalculatedWidth();Math.round(w.width)!==Math.round(ie)&&h(rde({id:t,width:ie}))}}},[L,w,h,r,t,i,O]),w==null||R==null||O==null)return null;var{dangerouslySetInnerHTML:z,ticks:$}=e,U=t4(e,Dpe),{id:Y}=O,X=t4(O,Fpe);return I.createElement(uF,mk({},U,X,{ref:o,labelRef:s,scale:v,x:R.x,y:R.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:w.width,height:w.height,className:Fo("recharts-".concat(m," ").concat(m),n),viewBox:a,ticks:L,axisType:m}))},Ope={allowDataOverflow:Dl.allowDataOverflow,allowDecimals:Dl.allowDecimals,allowDuplicatedCategory:Dl.allowDuplicatedCategory,angle:Dl.angle,axisLine:Xv.axisLine,hide:!1,includeHidden:Dl.includeHidden,interval:Dl.interval,minTickGap:Dl.minTickGap,mirror:Dl.mirror,orientation:Dl.orientation,padding:Dl.padding,reversed:Dl.reversed,scale:Dl.scale,tick:Dl.tick,tickCount:Dl.tickCount,tickLine:Xv.tickLine,tickSize:Xv.tickSize,type:Dl.type,width:Dl.width,yAxisId:0},zpe=e=>{var t=zl(e,Ope);return I.createElement(I.Fragment,null,I.createElement(Ipe,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),I.createElement(Lpe,t))},Tw=I.memo(zpe,v9);Tw.displayName="YAxis";var Npe=(e,t)=>t,dF=Ot([Npe,Yr,dG,ul,cj,_m,ole,Nl],hle),hF=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,i=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/i)}},b9=wh("mouseClick"),x9=R1();x9.startListening({actionCreator:b9,effect:(e,t)=>{var n=e.payload,i=dF(t.getState(),hF(n));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(oae({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}});var yk=wh("mouseMove"),w9=R1(),MC=null;w9.startListening({actionCreator:yk,effect:(e,t)=>{var n=e.payload;MC!==null&&cancelAnimationFrame(MC);var i=hF(n);MC=requestAnimationFrame(()=>{var r=t.getState(),o=jD(r,r.tooltip.settings.shared);if(o==="axis"){var s=dF(r,i);(s==null?void 0:s.activeIndex)!=null?t.dispatch(nj({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(tj())}MC=null})}});var n4={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},C9=Vc({name:"rootProps",initialState:n4,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:n4.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),Bpe=C9.reducer,{updateOptions:Gpe}=C9.actions,_9=Vc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:dFe}=_9.actions,jpe=_9.reducer,S9=wh("keyDown"),E9=wh("focus"),fF=R1();fF.startListening({actionCreator:S9,effect:(e,t)=>{var n=t.getState(),i=n.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:r}=n.tooltip,o=e.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var s=HD(r,Tx(n),B1(n),$1(n)),a=s==null?-1:Number(s);if(!(!Number.isFinite(a)||a<0)){var d=_m(n);if(o==="Enter"){var h=lS(n,"axis","hover",String(r.index));t.dispatch(ak({active:!r.active,activeIndex:r.index,activeDataKey:r.dataKey,activeCoordinate:h}));return}var m=Zse(n),v=m==="left-to-right"?1:-1,w=o==="ArrowRight"?1:-1,R=a+w*v;if(!(d==null||R>=d.length||R<0)){var L=lS(n,"axis","hover",String(R));t.dispatch(ak({active:!0,activeIndex:R.toString(),activeDataKey:void 0,activeCoordinate:L}))}}}}}});fF.startListening({actionCreator:E9,effect:(e,t)=>{var n=t.getState(),i=n.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:r}=n.tooltip;if(!r.active&&r.index==null){var o="0",s=lS(n,"axis","hover",String(o));t.dispatch(ak({activeDataKey:void 0,active:!0,activeIndex:o,activeCoordinate:s}))}}}});var lh=wh("externalEvent"),R9=R1(),xA=new Map;R9.startListening({actionCreator:lh,effect:(e,t)=>{var{handler:n,reactEvent:i}=e.payload;if(n!=null){i.persist();var r=i.type,o=xA.get(r);o!==void 0&&cancelAnimationFrame(o);var s=requestAnimationFrame(()=>{try{var a=t.getState(),d={activeCoordinate:$ae(a),activeDataKey:pj(a),activeIndex:u0(a),activeLabel:fj(a),activeTooltipIndex:u0(a),isTooltipActive:Wae(a)};n(d,i)}finally{xA.delete(r)}});xA.set(r,s)}}});var Hpe=Ot([Ax],e=>e.tooltipItemPayloads),Vpe=Ot([Hpe,H1,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,i)=>{var r=e.find(a=>a.settings.dataKey===i);if(r!=null){var{positions:o}=r;if(o!=null){var s=t(o,n);return s}}}),A9=wh("touchMove"),T9=R1();T9.startListening({actionCreator:A9,effect:(e,t)=>{var n=e.payload;if(!(n.touches==null||n.touches.length===0)){var i=t.getState(),r=jD(i,i.tooltip.settings.shared);if(r==="axis"){var o=dF(i,hF({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(o==null?void 0:o.activeIndex)!=null&&t.dispatch(nj({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(r==="item"){var s,a=n.touches[0];if(document.elementFromPoint==null)return;var d=document.elementFromPoint(a.clientX,a.clientY);if(!d||!d.getAttribute)return;var h=d.getAttribute(Aee),m=(s=d.getAttribute(Tee))!==null&&s!==void 0?s:void 0,v=Vpe(t.getState(),h,m);t.dispatch(ej({activeDataKey:m,activeIndex:h,activeCoordinate:v}))}}}});var $pe=lB({brush:Whe,cartesianAxis:ode,chartData:Vle,errorBars:Sde,graphicalItems:Nce,layout:uee,legend:_te,options:Nle,polarAxis:lce,polarOptions:jpe,referenceElements:Jhe,rootProps:Bpe,tooltip:sae,zIndex:Rle}),Wpe=function(t){return IQ({reducer:$pe,preloadedState:t,middleware:n=>{var i;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([x9.middleware,w9.middleware,fF.middleware,R9.middleware,T9.middleware])},enhancers:n=>{var i=n;return typeof n=="function"&&(i=n()),i.concat(_B({type:"raf"}))},devTools:xx.devToolsEnabled})};function Upe(e){var{preloadedState:t,children:n,reduxStoreName:i}=e,r=uu(),o=I.useRef(null);if(r)return n;o.current==null&&(o.current=Wpe(t));var s=HP;return I.createElement(Ude,{context:s,store:o.current},n)}function qpe(e){var{layout:t,margin:n}=e,i=Zs(),r=uu();return I.useEffect(()=>{r||(i(see(t)),i(oee(n)))},[i,r,t,n]),null}var Kpe=I.memo(qpe,U1);function Zpe(e){var t=Zs();return I.useEffect(()=>{t(Gpe(e))},[t,e]),null}function i4(e){var{zIndex:t,isPanorama:n}=e,i=n?"recharts-zindex-panorama-":"recharts-zindex-",r=Wj("".concat(i).concat(t)),o=Zs();return I.useLayoutEffect(()=>(o(Sle({zIndex:t,elementId:r,isPanorama:n})),()=>{o(Ele({zIndex:t,isPanorama:n}))}),[o,t,r,n]),I.createElement("g",{tabIndex:-1,id:r})}function r4(e){var{children:t,isPanorama:n}=e,i=bi(ple);if(!i||i.length===0)return t;var r=i.filter(s=>s<0),o=i.filter(s=>s>0);return I.createElement(I.Fragment,null,r.map(s=>I.createElement(i4,{key:s,zIndex:s,isPanorama:n})),t,o.map(s=>I.createElement(i4,{key:s,zIndex:s,isPanorama:n})))}var Ype=["children"];function Xpe(e,t){if(e==null)return{};var n,i,r=Jpe(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Jpe(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function vS(){return vS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},vS.apply(null,arguments)}var Qpe={width:"100%",height:"100%",display:"block"},ege=I.forwardRef((e,t)=>{var n=VB(),i=$B(),r=QB();if(!Fy(n)||!Fy(i))return null;var{children:o,otherAttributes:s,title:a,desc:d}=e,h,m;return s!=null&&(typeof s.tabIndex=="number"?h=s.tabIndex:h=r?0:void 0,typeof s.role=="string"?m=s.role:m=r?"application":void 0),I.createElement(FP,vS({},s,{title:a,desc:d,role:m,tabIndex:h,width:n,height:i,style:Qpe,ref:t}),o)}),tge=e=>{var{children:t}=e,n=bi(b2);if(!n)return null;var{width:i,height:r,y:o,x:s}=n;return I.createElement(FP,{width:i,height:r,x:s,y:o},t)},o4=I.forwardRef((e,t)=>{var{children:n}=e,i=Xpe(e,Ype),r=uu();return r?I.createElement(tge,null,I.createElement(r4,{isPanorama:!0},n)):I.createElement(ege,vS({ref:t},i),I.createElement(r4,{isPanorama:!1},n))});function nge(){var e=Zs(),[t,n]=I.useState(null),i=bi(Ree);return I.useEffect(()=>{if(t!=null){var r=t.getBoundingClientRect(),o=r.width/t.offsetWidth;ws(o)&&o!==i&&e(lee(o))}},[t,e,i]),n}function s4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function ige(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?s4(Object(n),!0).forEach(function(i){rge(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s4(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function rge(e,t,n){return(t=oge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oge(e){var t=sge(e,"string");return typeof t=="symbol"?t:t+""}function sge(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function d0(){return d0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},d0.apply(null,arguments)}var age=()=>(Jle(),null);function bS(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var lge=I.forwardRef((e,t)=>{var n,i,r=I.useRef(null),[o,s]=I.useState({containerWidth:bS((n=e.style)===null||n===void 0?void 0:n.width),containerHeight:bS((i=e.style)===null||i===void 0?void 0:i.height)}),a=I.useCallback((h,m)=>{s(v=>{var w=Math.round(h),R=Math.round(m);return v.containerWidth===w&&v.containerHeight===R?v:{containerWidth:w,containerHeight:R}})},[]),d=I.useCallback(h=>{if(typeof t=="function"&&t(h),h!=null&&typeof ResizeObserver<"u"){var{width:m,height:v}=h.getBoundingClientRect();a(m,v);var w=L=>{var{width:O,height:z}=L[0].contentRect;a(O,z)},R=new ResizeObserver(w);R.observe(h),r.current=R}},[t,a]);return I.useEffect(()=>()=>{var h=r.current;h!=null&&h.disconnect()},[a]),I.createElement(I.Fragment,null,I.createElement(w2,{width:o.containerWidth,height:o.containerHeight}),I.createElement("div",d0({ref:d},e)))}),uge=I.forwardRef((e,t)=>{var{width:n,height:i}=e,[r,o]=I.useState({containerWidth:bS(n),containerHeight:bS(i)}),s=I.useCallback((d,h)=>{o(m=>{var v=Math.round(d),w=Math.round(h);return m.containerWidth===v&&m.containerHeight===w?m:{containerWidth:v,containerHeight:w}})},[]),a=I.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null){var{width:h,height:m}=d.getBoundingClientRect();s(h,m)}},[t,s]);return I.createElement(I.Fragment,null,I.createElement(w2,{width:r.containerWidth,height:r.containerHeight}),I.createElement("div",d0({ref:a},e)))}),cge=I.forwardRef((e,t)=>{var{width:n,height:i}=e;return I.createElement(I.Fragment,null,I.createElement(w2,{width:n,height:i}),I.createElement("div",d0({ref:t},e)))}),dge=I.forwardRef((e,t)=>{var{width:n,height:i}=e;return am(n)||am(i)?I.createElement(uge,d0({},e,{ref:t})):I.createElement(cge,d0({},e,{ref:t}))});function hge(e){return e===!0?lge:dge}var fge=I.forwardRef((e,t)=>{var{children:n,className:i,height:r,onClick:o,onContextMenu:s,onDoubleClick:a,onMouseDown:d,onMouseEnter:h,onMouseLeave:m,onMouseMove:v,onMouseUp:w,onTouchEnd:R,onTouchMove:L,onTouchStart:O,style:z,width:$,responsive:U,dispatchTouchEvents:Y=!0}=e,X=I.useRef(null),q=Zs(),[ie,re]=I.useState(null),[J,ne]=I.useState(null),be=nge(),ue=JP(),ve=(ue==null?void 0:ue.width)>0?ue.width:$,ce=(ue==null?void 0:ue.height)>0?ue.height:r,Ie=I.useCallback(it=>{be(it),typeof t=="function"&&t(it),re(it),ne(it),it!=null&&(X.current=it)},[be,t,re,ne]),Te=I.useCallback(it=>{q(b9(it)),q(lh({handler:o,reactEvent:it}))},[q,o]),fe=I.useCallback(it=>{q(yk(it)),q(lh({handler:h,reactEvent:it}))},[q,h]),he=I.useCallback(it=>{q(tj()),q(lh({handler:m,reactEvent:it}))},[q,m]),Re=I.useCallback(it=>{q(yk(it)),q(lh({handler:v,reactEvent:it}))},[q,v]),De=I.useCallback(()=>{q(E9())},[q]),Ye=I.useCallback(it=>{q(S9(it.key))},[q]),_e=I.useCallback(it=>{q(lh({handler:s,reactEvent:it}))},[q,s]),Le=I.useCallback(it=>{q(lh({handler:a,reactEvent:it}))},[q,a]),Oe=I.useCallback(it=>{q(lh({handler:d,reactEvent:it}))},[q,d]),yt=I.useCallback(it=>{q(lh({handler:w,reactEvent:it}))},[q,w]),xt=I.useCallback(it=>{q(lh({handler:O,reactEvent:it}))},[q,O]),Vt=I.useCallback(it=>{Y&&q(A9(it)),q(lh({handler:L,reactEvent:it}))},[q,Y,L]),Xt=I.useCallback(it=>{q(lh({handler:R,reactEvent:it}))},[q,R]),en=hge(U);return I.createElement(Cj.Provider,{value:ie},I.createElement(SN.Provider,{value:J},I.createElement(en,{width:ve??(z==null?void 0:z.width),height:ce??(z==null?void 0:z.height),className:Fo("recharts-wrapper",i),style:ige({position:"relative",cursor:"default",width:ve,height:ce},z),onClick:Te,onContextMenu:_e,onDoubleClick:Le,onFocus:De,onKeyDown:Ye,onMouseDown:Oe,onMouseEnter:fe,onMouseLeave:he,onMouseMove:Re,onMouseUp:yt,onTouchEnd:Xt,onTouchMove:Vt,onTouchStart:xt,ref:Ie},I.createElement(age,null),n)))}),pge=["width","height","responsive","children","className","style","compact","title","desc"];function gge(e,t){if(e==null)return{};var n,i,r=mge(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function mge(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}var yge=I.forwardRef((e,t)=>{var{width:n,height:i,responsive:r,children:o,className:s,style:a,compact:d,title:h,desc:m}=e,v=gge(e,pge),w=xh(v);return d?I.createElement(I.Fragment,null,I.createElement(w2,{width:n,height:i}),I.createElement(o4,{otherAttributes:w,title:h,desc:m},o)):I.createElement(fge,{className:s,style:a,width:n,height:i,responsive:r??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},I.createElement(o4,{otherAttributes:w,title:h,desc:m,ref:t},I.createElement(efe,null,o)))});function vk(){return vk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},vk.apply(null,arguments)}var vge={top:5,right:5,bottom:5,left:5},bge={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:vge,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},pF=I.forwardRef(function(t,n){var i,r=zl(t.categoricalChartProps,bge),{chartName:o,defaultTooltipEventType:s,validateTooltipEventTypes:a,tooltipPayloadSearcher:d,categoricalChartProps:h}=t,m={chartName:o,defaultTooltipEventType:s,validateTooltipEventTypes:a,tooltipPayloadSearcher:d,eventEmitter:void 0};return I.createElement(Upe,{preloadedState:{options:m},reduxStoreName:(i=h.id)!==null&&i!==void 0?i:o},I.createElement($he,{chartData:h.data}),I.createElement(Kpe,{layout:r.layout,margin:r.margin}),I.createElement(Zpe,{baseValue:r.baseValue,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),I.createElement(yge,vk({},r,{ref:n})))}),xge=["axis"],k9=I.forwardRef((e,t)=>I.createElement(pF,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:xge,tooltipPayloadSearcher:XD,categoricalChartProps:e,ref:t})),wge=["axis","item"],Cge=I.forwardRef((e,t)=>I.createElement(pF,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:wge,tooltipPayloadSearcher:XD,categoricalChartProps:e,ref:t})),_ge=["axis"],Sge=I.forwardRef((e,t)=>I.createElement(pF,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:_ge,tooltipPayloadSearcher:XD,categoricalChartProps:e,ref:t}));function Ege({onClose:e}){const[t,n]=I.useState("overview"),i=[{month:"Jan",utilization:65,capacity:100,traffic:58},{month:"Feb",utilization:68,capacity:100,traffic:62},{month:"Mar",utilization:71,capacity:100,traffic:65},{month:"Apr",utilization:69,capacity:100,traffic:63},{month:"May",utilization:74,capacity:100,traffic:70},{month:"Jun",utilization:72,capacity:100,traffic:68}],r=[{vendor:"CISCO",count:385,percentage:45},{vendor:"HUAWEI",count:299,percentage:35},{vendor:"NOKIA",count:172,percentage:20}],o=[{region:"Jakarta",links:245,utilization:78},{region:"Surabaya",links:189,utilization:72},{region:"Bandung",links:156,utilization:68},{region:"Medan",links:134,utilization:65},{region:"Makassar",links:98,utilization:62}];return T.jsx("div",{style:{position:"fixed",top:"16px",bottom:"16px",left:"304px",right:"16px",zIndex:1001},children:T.jsxs("div",{style:{height:"100%",background:"linear-gradient(145deg, rgba(255,255,255,0.95), rgba(240,240,240,0.9))",backdropFilter:"blur(20px)",borderRadius:"20px",border:"1px solid rgba(255,255,255,0.3)",boxShadow:"0 20px 40px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8)",display:"flex",flexDirection:"column",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[T.jsx("div",{style:{padding:"20px 24px",borderBottom:"1px solid rgba(0,0,0,0.05)"},children:T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[T.jsx("div",{style:{background:"linear-gradient(135deg, #3B82F6, #8B5CF6)",padding:"8px",borderRadius:"8px"},children:T.jsx(dN,{style:{width:"20px",height:"20px",color:"white"}})}),T.jsxs("div",{children:[T.jsx("h2",{style:{fontSize:"18px",color:"#1F2937",fontWeight:"700",margin:0},children:"Analytics Dashboard"}),T.jsx("p",{style:{fontSize:"12px",color:"#6B7280",margin:0},children:"Network Performance & Insights"})]})]}),T.jsx("button",{onClick:e,style:{background:"linear-gradient(145deg, rgba(255,255,255,0.9), rgba(240,240,240,0.7))",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.3)",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:T.jsx(Tp,{style:{width:"16px",height:"16px",color:"#6B7280"}})})]})}),T.jsx("div",{style:{padding:"12px 24px",borderBottom:"1px solid rgba(0,0,0,0.05)"},children:T.jsx("div",{style:{display:"flex",gap:"8px",background:"rgba(0,0,0,0.03)",padding:"4px",borderRadius:"8px"},children:["overview","performance","vendors","regions"].map(s=>T.jsx("button",{onClick:()=>n(s),style:{flex:1,padding:"8px 16px",borderRadius:"6px",border:"none",cursor:"pointer",fontSize:"13px",fontWeight:"500",background:t===s?"white":"transparent",color:t===s?"#1F2937":"#6B7280",boxShadow:t===s?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.2s ease",textTransform:"capitalize"},children:s},s))})}),T.jsxs("div",{style:{flex:1,overflow:"auto",padding:"24px"},children:[t==="overview"&&T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px"},children:[T.jsxs("div",{style:{background:"linear-gradient(135deg, #EFF6FF, #DBEAFE)",borderRadius:"12px",border:"1px solid #BFDBFE",padding:"16px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"8px"},children:[T.jsx("div",{style:{background:"#3B82F6",padding:"8px",borderRadius:"8px"},children:T.jsx(cN,{style:{width:"16px",height:"16px",color:"white"}})}),T.jsx("span",{style:{fontSize:"12px",color:"#2563EB"},children:"+12%"})]}),T.jsx("div",{style:{fontSize:"28px",color:"#1F2937",marginBottom:"4px",fontWeight:"700"},children:"1,247"}),T.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:"Total Links"})]}),T.jsxs("div",{style:{background:"linear-gradient(135deg, #F0FDF4, #DCFCE7)",borderRadius:"12px",border:"1px solid #BBF7D0",padding:"16px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"8px"},children:[T.jsx("div",{style:{background:"#10B981",padding:"8px",borderRadius:"8px"},children:T.jsx(pN,{style:{width:"16px",height:"16px",color:"white"}})}),T.jsx("span",{style:{fontSize:"12px",color:"#059669"},children:"+8%"})]}),T.jsx("div",{style:{fontSize:"28px",color:"#1F2937",marginBottom:"4px",fontWeight:"700"},children:"72%"}),T.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:"Avg Utilization"})]}),T.jsxs("div",{style:{background:"linear-gradient(135deg, #FAF5FF, #F3E8FF)",borderRadius:"12px",border:"1px solid #E9D5FF",padding:"16px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"8px"},children:[T.jsx("div",{style:{background:"#8B5CF6",padding:"8px",borderRadius:"8px"},children:T.jsx(gN,{style:{width:"16px",height:"16px",color:"white"}})}),T.jsx("span",{style:{fontSize:"12px",color:"#7C3AED"},children:"+15%"})]}),T.jsx("div",{style:{fontSize:"28px",color:"#1F2937",marginBottom:"4px",fontWeight:"700"},children:"856"}),T.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:"Active NE"})]}),T.jsxs("div",{style:{background:"linear-gradient(135deg, #FFF7ED, #FFEDD5)",borderRadius:"12px",border:"1px solid #FED7AA",padding:"16px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"8px"},children:[T.jsx("div",{style:{background:"#F97316",padding:"8px",borderRadius:"8px"},children:T.jsx(TP,{style:{width:"16px",height:"16px",color:"white"}})}),T.jsx("span",{style:{fontSize:"12px",color:"#EA580C"},children:"+5%"})]}),T.jsx("div",{style:{fontSize:"28px",color:"#1F2937",marginBottom:"4px",fontWeight:"700"},children:"12.5 Tbps"}),T.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:"Total Capacity"})]})]}),T.jsxs("div",{style:{background:"rgba(255,255,255,0.5)",backdropFilter:"blur(4px)",borderRadius:"12px",border:"1px solid rgba(0,0,0,0.05)",padding:"16px"},children:[T.jsx("h3",{style:{fontSize:"14px",color:"#1F2937",marginBottom:"16px",fontWeight:"600"},children:"Network Utilization Trend"}),T.jsx(e_,{width:"100%",height:250,children:T.jsxs(Sge,{data:i,children:[T.jsx("defs",{children:T.jsxs("linearGradient",{id:"colorUtil",x1:"0",y1:"0",x2:"0",y2:"1",children:[T.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),T.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),T.jsx(Aw,{dataKey:"month",tick:{fontSize:12},stroke:"#9ca3af"}),T.jsx(Tw,{tick:{fontSize:12},stroke:"#9ca3af"}),T.jsx(n_,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px"}}),T.jsx(y9,{type:"monotone",dataKey:"utilization",stroke:"#3b82f6",strokeWidth:2,fill:"url(#colorUtil)"})]})})]})]}),t==="performance"&&T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[T.jsxs("div",{style:{background:"rgba(255,255,255,0.5)",backdropFilter:"blur(4px)",borderRadius:"12px",border:"1px solid rgba(0,0,0,0.05)",padding:"16px"},children:[T.jsx("h3",{style:{fontSize:"14px",color:"#1F2937",marginBottom:"16px",fontWeight:"600"},children:"Performance Metrics Comparison"}),T.jsx(e_,{width:"100%",height:300,children:T.jsxs(k9,{data:i,children:[T.jsx(Aw,{dataKey:"month",tick:{fontSize:12},stroke:"#9ca3af"}),T.jsx(Tw,{tick:{fontSize:12},stroke:"#9ca3af"}),T.jsx(n_,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px"}}),T.jsx(JB,{}),T.jsx(mS,{type:"monotone",dataKey:"utilization",stroke:"#3b82f6",strokeWidth:2}),T.jsx(mS,{type:"monotone",dataKey:"traffic",stroke:"#10b981",strokeWidth:2})]})})]}),T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:[T.jsxs("div",{style:{background:"rgba(255,255,255,0.5)",backdropFilter:"blur(4px)",borderRadius:"12px",border:"1px solid rgba(0,0,0,0.05)",padding:"16px"},children:[T.jsx("h4",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"12px",fontWeight:"600"},children:"Latency"}),T.jsx("div",{style:{fontSize:"28px",color:"#1F2937",marginBottom:"4px",fontWeight:"700"},children:"12.3 ms"}),T.jsx("div",{style:{fontSize:"12px",color:"#10B981"},children:" 5% from last month"})]}),T.jsxs("div",{style:{background:"rgba(255,255,255,0.5)",backdropFilter:"blur(4px)",borderRadius:"12px",border:"1px solid rgba(0,0,0,0.05)",padding:"16px"},children:[T.jsx("h4",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"12px",fontWeight:"600"},children:"Packet Loss"}),T.jsx("div",{style:{fontSize:"28px",color:"#1F2937",marginBottom:"4px",fontWeight:"700"},children:"0.01%"}),T.jsx("div",{style:{fontSize:"12px",color:"#10B981"},children:" 2% from last month"})]}),T.jsxs("div",{style:{background:"rgba(255,255,255,0.5)",backdropFilter:"blur(4px)",borderRadius:"12px",border:"1px solid rgba(0,0,0,0.05)",padding:"16px"},children:[T.jsx("h4",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"12px",fontWeight:"600"},children:"Availability"}),T.jsx("div",{style:{fontSize:"28px",color:"#1F2937",marginBottom:"4px",fontWeight:"700"},children:"99.98%"}),T.jsx("div",{style:{fontSize:"12px",color:"#10B981"},children:" 0.1% from last month"})]})]})]}),t==="vendors"&&T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[T.jsxs("div",{style:{background:"rgba(255,255,255,0.5)",backdropFilter:"blur(4px)",borderRadius:"12px",border:"1px solid rgba(0,0,0,0.05)",padding:"16px"},children:[T.jsx("h3",{style:{fontSize:"14px",color:"#1F2937",marginBottom:"16px",fontWeight:"600"},children:"Vendor Distribution"}),T.jsx(e_,{width:"100%",height:250,children:T.jsxs(Cge,{data:r,children:[T.jsx(Aw,{dataKey:"vendor",tick:{fontSize:12},stroke:"#9ca3af"}),T.jsx(Tw,{tick:{fontSize:12},stroke:"#9ca3af"}),T.jsx(n_,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px"}}),T.jsx(Jj,{dataKey:"count",fill:"#3b82f6",radius:[8,8,0,0]})]})})]}),T.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:r.map(s=>T.jsxs("div",{style:{background:"rgba(255,255,255,0.5)",backdropFilter:"blur(4px)",borderRadius:"12px",border:"1px solid rgba(0,0,0,0.05)",padding:"16px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[T.jsx("span",{style:{fontSize:"14px",color:"#1F2937",fontWeight:"600"},children:s.vendor}),T.jsxs("span",{style:{fontSize:"12px",color:"#6B7280"},children:[s.percentage,"%"]})]}),T.jsx("div",{style:{fontSize:"20px",color:"#1F2937",marginBottom:"8px",fontWeight:"700"},children:s.count}),T.jsx("div",{style:{width:"100%",height:"8px",background:"#E5E7EB",borderRadius:"4px",overflow:"hidden"},children:T.jsx("div",{style:{height:"100%",background:"#3B82F6",width:`${s.percentage}%`}})})]},s.vendor))})]}),t==="regions"&&T.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:T.jsxs("div",{style:{background:"rgba(255,255,255,0.5)",backdropFilter:"blur(4px)",borderRadius:"12px",border:"1px solid rgba(0,0,0,0.05)",padding:"16px"},children:[T.jsx("h3",{style:{fontSize:"14px",color:"#1F2937",marginBottom:"16px",fontWeight:"600"},children:"Regional Performance"}),T.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:o.map(s=>T.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",background:"rgba(255,255,255,0.5)",borderRadius:"8px"},children:T.jsxs("div",{style:{flex:1},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[T.jsx("span",{style:{fontSize:"14px",color:"#1F2937",fontWeight:"500"},children:s.region}),T.jsxs("span",{style:{fontSize:"12px",color:"#6B7280"},children:[s.links," links"]})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[T.jsx("div",{style:{flex:1,height:"8px",background:"#E5E7EB",borderRadius:"4px",overflow:"hidden"},children:T.jsx("div",{style:{height:"100%",background:s.utilization>75?"#F59E0B":"#10B981",width:`${s.utilization}%`}})}),T.jsxs("span",{style:{fontSize:"12px",color:"#6B7280",width:"48px",textAlign:"right"},children:[s.utilization,"%"]})]})]})},s.region))})]})})]})]})})}const Rge=({isOpen:e,onClose:t,onUpload:n})=>{const[i,r]=I.useState(null),[o,s]=I.useState(!1),[a,d]=I.useState(null),[h,m]=I.useState(!1),v=I.useRef(null),w=U=>{if(U.target.files&&U.target.files[0]){const Y=U.target.files[0];Y.name.endsWith(".csv")?(r(Y),d(null)):d("File harus berformat .csv")}},R=U=>{U.preventDefault(),m(!0)},L=U=>{U.preventDefault(),m(!1)},O=U=>{if(U.preventDefault(),m(!1),U.dataTransfer.files&&U.dataTransfer.files[0]){const Y=U.dataTransfer.files[0];Y.name.endsWith(".csv")?(r(Y),d(null)):d("File harus berformat .csv")}},z=async()=>{if(!i){d("Silakan upload file CSV terlebih dahulu!");return}s(!0),d(null);try{const U=await i.text();n(U),s(!1),t(),r(null)}catch{d("Gagal membaca file CSV. Pastikan format file benar."),s(!1)}},$=()=>{r(null),d(null),v.current&&(v.current.value="")};return e?T.jsxs("div",{className:"modal-overlay",onClick:t,children:[T.jsxs("div",{className:"modal-content",onClick:U=>U.stopPropagation(),children:[T.jsxs("div",{className:"modal-header",children:[T.jsx("h2",{children:" Upload Data CSV"}),T.jsx("button",{className:"close-button",onClick:t,children:T.jsx(Tp,{})})]}),T.jsxs("div",{className:"modal-body",children:[T.jsxs("div",{className:`drag-drop-area ${h?"dragging":""} ${i?"has-file":""}`,onDragOver:R,onDragLeave:L,onDrop:O,onClick:()=>{var U;return(U=v.current)==null?void 0:U.click()},children:[T.jsx("input",{ref:v,type:"file",accept:".csv",onChange:w,style:{display:"none"}}),i?T.jsxs(T.Fragment,{children:[T.jsx(Sw,{className:"upload-icon success"}),T.jsx("p",{className:"file-selected",children:T.jsxs("strong",{children:[" ",i.name]})}),T.jsxs("p",{className:"file-size",children:[(i.size/1024).toFixed(2)," KB"]}),T.jsx("button",{type:"button",className:"change-file-button",onClick:U=>{U.stopPropagation(),$()},children:"Ganti File"})]}):T.jsxs(T.Fragment,{children:[T.jsx(Sw,{className:"upload-icon"}),T.jsx("p",{className:"drag-text",children:T.jsx("strong",{children:"Drag & drop file CSV di sini"})}),T.jsx("p",{className:"or-text",children:"atau"}),T.jsx("button",{type:"button",className:"browse-button",children:"Pilih File"}),T.jsxs("p",{className:"help-text",children:["File harus memiliki kolom: ",T.jsx("strong",{children:"node, latitude, longitude"})]})]})]}),a&&T.jsx("div",{className:"error-message",children:a}),T.jsxs("div",{className:"info-box",children:[T.jsx("p",{children:T.jsx("strong",{children:" Info:"})}),T.jsxs("ul",{children:[T.jsx("li",{children:"Setiap node merepresentasikan STO (Sentral Telepon Otomat)"}),T.jsx("li",{children:"Titik akan ditampilkan berdasarkan koordinat latitude/longitude"}),T.jsx("li",{children:"Koneksi antar node akan digenerate otomatis berdasarkan kedekatan geografis"})]})]})]}),T.jsxs("div",{className:"modal-footer",children:[T.jsx("button",{className:"button secondary",onClick:t,disabled:o,children:"Batal"}),T.jsx("button",{className:"button primary",onClick:z,disabled:o||!i,children:o?T.jsx(T.Fragment,{children:" Memproses..."}):T.jsxs(T.Fragment,{children:[T.jsx(Sw,{})," Upload & Visualisasi"]})})]})]}),T.jsx("style",{children:`
        .modal-overlay {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.6);
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 1000;
          backdrop-filter: blur(4px);
        }

        .modal-content {
          background: white;
          border-radius: 12px;
          max-width: 600px;
          width: 90%;
          max-height: 90vh;
          overflow-y: auto;
          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        .modal-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 20px 24px;
          border-bottom: 1px solid #e0e0e0;
        }

        .modal-header h2 {
          margin: 0;
          font-size: 1.5rem;
          color: #333;
        }

        .close-button {
          background: none;
          border: none;
          font-size: 1.5rem;
          cursor: pointer;
          padding: 4px;
          color: #666;
          transition: color 0.2s;
        }

        .close-button:hover {
          color: #333;
        }

        .modal-body {
          padding: 24px;
        }

        .drag-drop-area {
          border: 3px dashed #ccc;
          border-radius: 12px;
          padding: 60px 40px;
          text-align: center;
          cursor: pointer;
          transition: all 0.3s ease;
          background: #fafafa;
          margin-bottom: 20px;
        }

        .drag-drop-area:hover {
          border-color: #007bff;
          background: #f0f8ff;
        }

        .drag-drop-area.dragging {
          border-color: #007bff;
          background: #e3f2fd;
          transform: scale(1.02);
        }

        .drag-drop-area.has-file {
          border-color: #28a745;
          background: #f0fff4;
        }

        .upload-icon {
          font-size: 4rem;
          color: #007bff;
          margin-bottom: 16px;
        }

        .upload-icon.success {
          color: #28a745;
        }

        .drag-text {
          font-size: 1.1rem;
          color: #333;
          margin: 12px 0 8px 0;
        }

        .or-text {
          color: #999;
          margin: 12px 0;
          font-size: 0.9rem;
        }

        .browse-button {
          background: #007bff;
          color: white;
          border: none;
          padding: 10px 24px;
          border-radius: 6px;
          font-size: 1rem;
          cursor: pointer;
          transition: background 0.2s;
          margin: 8px 0;
        }

        .browse-button:hover {
          background: #0056b3;
        }

        .file-selected {
          font-size: 1.2rem;
          color: #28a745;
          margin: 12px 0 8px 0;
        }

        .file-size {
          color: #666;
          font-size: 0.9rem;
          margin-bottom: 16px;
        }

        .change-file-button {
          background: #6c757d;
          color: white;
          border: none;
          padding: 8px 20px;
          border-radius: 6px;
          font-size: 0.9rem;
          cursor: pointer;
          transition: background 0.2s;
        }

        .change-file-button:hover {
          background: #545b62;
        }

        .help-text {
          display: block;
          font-size: 0.85rem;
          color: #666;
          margin-top: 12px;
        }

        .error-message {
          background: #fee;
          border: 1px solid #fcc;
          color: #c33;
          padding: 12px;
          border-radius: 6px;
          margin-top: 16px;
        }

        .info-box {
          background: #f0f8ff;
          border: 1px solid #b8daff;
          border-radius: 6px;
          padding: 12px;
          margin-top: 16px;
          font-size: 0.9rem;
          color: #004085;
        }

        .info-box ul {
          margin: 8px 0 0 0;
          padding-left: 20px;
        }

        .info-box li {
          margin-bottom: 4px;
        }

        .modal-footer {
          display: flex;
          justify-content: flex-end;
          gap: 12px;
          padding: 20px 24px;
          border-top: 1px solid #e0e0e0;
        }

        .button {
          padding: 10px 20px;
          border: none;
          border-radius: 6px;
          font-size: 1rem;
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: 8px;
          transition: all 0.2s;
        }

        .button.primary {
          background: #007bff;
          color: white;
        }

        .button.primary:hover:not(:disabled) {
          background: #0056b3;
        }

        .button.secondary {
          background: #6c757d;
          color: white;
        }

        .button.secondary:hover:not(:disabled) {
          background: #545b62;
        }

        .button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }
      `})]}):null};function Age({onSearch:e,suggestions:t=[],platformFilters:n=[],onFilterClick:i,onClearFilter:r}){const[o,s]=I.useState(""),[a,d]=I.useState(""),[h,m]=I.useState(""),[v,w]=I.useState(!1),[R,L]=I.useState(!1),[O,z]=I.useState(!1),[$,U]=I.useState([]),[Y,X]=I.useState(-1),[q,ie]=I.useState(null),re=I.useRef(null),J=I.useRef(null);I.useEffect(()=>{if(o.trim().length>0){const Te=t.filter(fe=>{var he,Re;return fe.label.toLowerCase().includes(o.toLowerCase())||fe.type.toLowerCase().includes(o.toLowerCase())||((he=fe.metadata)==null?void 0:he.witel)&&fe.metadata.witel.toLowerCase().includes(o.toLowerCase())||((Re=fe.metadata)==null?void 0:Re.sto)&&fe.metadata.sto.toLowerCase().includes(o.toLowerCase())}).slice(0,10);U(Te),z(Te.length>0)}else U([]),z(!1);X(-1)},[o,t]),I.useEffect(()=>{const Te=fe=>{J.current&&!J.current.contains(fe.target)&&re.current&&!re.current.contains(fe.target)&&z(!1)};return document.addEventListener("mousedown",Te),()=>document.removeEventListener("mousedown",Te)},[]);const ne=()=>{o.trim()&&(e(o,q||void 0),z(!1))},be=Te=>{s(Te.label),ie(Te),z(!1),e(Te.label,Te)},ue=Te=>{Te.key==="Enter"?Y>=0&&$[Y]?be($[Y]):ne():Te.key==="ArrowDown"?(Te.preventDefault(),X(fe=>fe<$.length-1?fe+1:fe)):Te.key==="ArrowUp"?(Te.preventDefault(),X(fe=>fe>0?fe-1:-1)):Te.key==="Escape"&&z(!1)},ve=()=>{L(!R),R&&(d(""),m(""))},ce=()=>{a.trim()&&h.trim()&&e(`Route: ${a}  ${h}`)},Ie=Te=>{R?a?h||m(Te):d(Te):(i&&i(Te),s(Te)),w(!1)};return R?T.jsx("div",{style:{position:"fixed",top:"16px",left:"50%",transform:"translateX(-50%)",zIndex:999,width:"100%",maxWidth:"896px",padding:"0 16px"},children:T.jsxs("div",{style:{background:"linear-gradient(145deg, rgba(255,255,255,0.95), rgba(240,240,240,0.9))",backdropFilter:"blur(20px)",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.3)",boxShadow:"0 20px 40px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8)"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flex:1},children:[T.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"28px",height:"28px",borderRadius:"50%",background:"linear-gradient(135deg, #D1FAE5, #A7F3D0)",flexShrink:0},children:T.jsx(t2,{style:{width:"14px",height:"14px",color:"#059669"}})}),T.jsx("input",{placeholder:"Start point...",value:a,onChange:Te=>d(Te.target.value),style:{border:"none",background:"transparent",height:"32px",fontSize:"14px",outline:"none",padding:0,flex:1,color:"#1F2937",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'}}),a&&T.jsx("button",{onClick:()=>d(""),style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#9CA3AF"},children:T.jsx(Tp,{style:{width:"14px",height:"14px"}})})]}),T.jsx("div",{style:{fontSize:"14px",color:"#9CA3AF"},children:""}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flex:1},children:[T.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"28px",height:"28px",borderRadius:"50%",background:"linear-gradient(135deg, #FEE2E2, #FECACA)",flexShrink:0},children:T.jsx(mY,{style:{width:"14px",height:"14px",color:"#DC2626"}})}),T.jsx("input",{placeholder:"Destination...",value:h,onChange:Te=>m(Te.target.value),style:{border:"none",background:"transparent",height:"32px",fontSize:"14px",outline:"none",padding:0,flex:1,color:"#1F2937",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'}}),h&&T.jsx("button",{onClick:()=>m(""),style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#9CA3AF"},children:T.jsx(Tp,{style:{width:"14px",height:"14px"}})})]}),T.jsx("div",{style:{height:"16px",width:"1px",background:"#E5E7EB"}}),T.jsx("button",{onClick:()=>w(!v),style:{background:v?"linear-gradient(135deg, #4F46E520, #3B82F610)":"linear-gradient(145deg, rgba(255,255,255,0.9), rgba(240,240,240,0.7))",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.3)",padding:"6px",cursor:"pointer",color:v?"#4F46E5":"#6B7280"},children:T.jsx(gT,{style:{width:"16px",height:"16px"}})}),T.jsx("button",{onClick:ve,style:{background:"linear-gradient(145deg, rgba(255,255,255,0.9), rgba(240,240,240,0.7))",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.3)",padding:"6px",cursor:"pointer",color:"#6B7280"},children:T.jsx(Tp,{style:{width:"16px",height:"16px"}})}),T.jsx("button",{onClick:ce,disabled:!a||!h,style:{background:!a||!h?"linear-gradient(135deg, #9CA3AF, #6B7280)":"linear-gradient(135deg, #8B5CF6, #7C3AED)",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.3)",padding:"6px 12px",cursor:!a||!h?"not-allowed":"pointer",color:"#FFFFFF",fontSize:"12px",fontWeight:"600",opacity:!a||!h?.5:1},children:"Find Route"})]}),v&&T.jsxs("div",{style:{borderTop:"1px solid rgba(0,0,0,0.05)",padding:"12px"},children:[T.jsxs("div",{style:{fontSize:"12px",color:"#6B7280",fontWeight:"600",marginBottom:"8px"},children:["Quick Select ",a?h?"":"(Destination)":"(Start)",":"]}),T.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:["Jakarta PE1","Surabaya PE2","Bandung PE3","Medan PE4","Semarang PE5"].map(Te=>T.jsx("button",{onClick:()=>Ie(Te),style:{fontSize:"12px",padding:"6px 12px",background:"rgba(255,255,255,0.6)",borderRadius:"8px",color:"#374151",border:"1px solid rgba(0,0,0,0.05)",cursor:"pointer"},children:Te},Te))})]})]})}):T.jsx("div",{style:{position:"fixed",top:"16px",left:"50%",transform:"translateX(-50%)",zIndex:999,width:"100%",maxWidth:"448px",padding:"0 16px"},children:T.jsxs("div",{style:{background:"linear-gradient(145deg, rgba(255,255,255,0.95), rgba(240,240,240,0.9))",backdropFilter:"blur(20px)",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.3)",boxShadow:"0 20px 40px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8)",position:"relative"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px"},children:[T.jsx(pY,{style:{width:"16px",height:"16px",color:"#9CA3AF",flexShrink:0}}),T.jsx("input",{ref:re,placeholder:"Search STO ",value:o,onChange:Te=>{s(Te.target.value),ie(null),Te.target.value===""&&r&&r()},onKeyDown:ue,onFocus:()=>{$.length>0&&z(!0)},style:{border:"none",background:"transparent",height:"32px",fontSize:"14px",outline:"none",padding:0,flex:1,color:"#1F2937",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'}}),o&&T.jsx("button",{onClick:()=>{s(""),ie(null),z(!1),r&&r()},style:{background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#9CA3AF"},title:"Clear search and filters",children:T.jsx(Tp,{style:{width:"14px",height:"14px"}})}),T.jsx("div",{style:{height:"16px",width:"1px",background:"#E5E7EB"}}),T.jsx("button",{onClick:()=>w(!v),title:"Filters",style:{background:v?"linear-gradient(135deg, #4F46E520, #3B82F610)":"linear-gradient(145deg, rgba(255,255,255,0.9), rgba(240,240,240,0.7))",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.3)",padding:"6px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:v?"#4F46E5":"#6B7280",transition:"all 0.2s ease"},children:T.jsx(gT,{style:{width:"16px",height:"16px"}})}),T.jsx("button",{onClick:ve,title:"Route Planning",style:{background:"linear-gradient(145deg, rgba(255,255,255,0.9), rgba(240,240,240,0.7))",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.3)",padding:"6px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"#6B7280",transition:"all 0.2s ease"},children:T.jsx(fY,{style:{width:"16px",height:"16px"}})}),T.jsx("button",{onClick:ne,style:{background:"linear-gradient(135deg, #4F46E5, #3B82F6)",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.3)",padding:"6px 12px",cursor:"pointer",color:"#FFFFFF",fontSize:"12px",fontWeight:"600",transition:"all 0.2s ease"},children:"Search"})]}),v&&T.jsxs("div",{style:{borderTop:"1px solid rgba(0,0,0,0.05)",padding:"12px"},children:[T.jsxs("div",{style:{fontSize:"12px",color:"#6B7280",fontWeight:"600",marginBottom:"8px"},children:["Platform Filters ",n.length>0?`(${n.length} available)`:"",":"]}),T.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:n.length>0?n.map(Te=>T.jsx("button",{onClick:()=>Ie(Te),style:{fontSize:"12px",padding:"6px 12px",background:"rgba(255,255,255,0.6)",backdropFilter:"blur(4px)",borderRadius:"8px",color:"#374151",transition:"all 0.2s",border:"1px solid rgba(0,0,0,0.05)",cursor:"pointer"},onMouseEnter:fe=>{fe.currentTarget.style.background="rgba(79, 70, 229, 0.15)",fe.currentTarget.style.borderColor="rgba(79, 70, 229, 0.3)"},onMouseLeave:fe=>{fe.currentTarget.style.background="rgba(255,255,255,0.6)",fe.currentTarget.style.borderColor="rgba(0,0,0,0.05)"},children:Te},Te)):T.jsx("div",{style:{fontSize:"11px",color:"#9CA3AF",fontStyle:"italic"},children:"No platforms available. Please select a layer first."})})]}),O&&$.length>0&&T.jsx("div",{ref:J,style:{position:"absolute",top:"100%",left:"16px",right:"16px",marginTop:"8px",background:"linear-gradient(145deg, rgba(255,255,255,0.98), rgba(240,240,240,0.95))",backdropFilter:"blur(20px)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.3)",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",maxHeight:"320px",overflowY:"auto",zIndex:1e3},children:$.map((Te,fe)=>{var he,Re;return T.jsx("div",{onClick:()=>be(Te),style:{padding:"10px 14px",cursor:"pointer",borderBottom:fe<$.length-1?"1px solid rgba(0,0,0,0.05)":"none",background:Y===fe?"rgba(79, 70, 229, 0.1)":"transparent",transition:"background 0.15s ease",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},onMouseEnter:De=>{De.currentTarget.style.background="rgba(79, 70, 229, 0.1)"},onMouseLeave:De=>{Y!==fe&&(De.currentTarget.style.background="transparent")},children:T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[T.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:Te.type==="capacity"?"#FF6B35":Te.type==="sirkit"?"#4ECDC4":Te.type==="multilayer"?"#9B59B6":Te.type==="nodeedges"?"#00BFFF":"#999999",flexShrink:0}}),T.jsxs("div",{style:{flex:1},children:[T.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:"#1F2937",marginBottom:"2px"},children:Te.label}),T.jsxs("div",{style:{fontSize:"11px",color:"#6B7280"},children:[Te.type==="capacity"&&" Capacity Node",Te.type==="sirkit"&&" Sirkit Node",Te.type==="multilayer"&&" Multilayer Node",Te.type==="nodeedges"&&" Network Node",((he=Te.metadata)==null?void 0:he.witel)&&`  ${Te.metadata.witel}`,((Re=Te.metadata)==null?void 0:Re.sto)&&`  ${Te.metadata.sto}`]})]})]})},Te.id)})})]})})}function Tge({kpiData:e,onClose:t}){const[n,i]=I.useState("counter");return T.jsx("div",{style:{position:"fixed",top:"16px",bottom:"16px",right:"16px",width:"384px",zIndex:1e3},children:T.jsxs("div",{style:{height:"100%",background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(4px)",borderRadius:"16px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",border:"1px solid rgba(229, 231, 235, 0.5)",display:"flex",flexDirection:"column",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[T.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid rgba(229, 231, 235, 0.5)"},children:[T.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:T.jsx("button",{onClick:t,style:{background:"transparent",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",transition:"background-color 0.2s"},onMouseEnter:r=>{r.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.05)"},onMouseLeave:r=>{r.currentTarget.style.backgroundColor="transparent"},children:T.jsx(Tp,{style:{width:"16px",height:"16px",color:"#6B7280"}})})}),T.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"4px",background:"rgba(243, 244, 246, 0.5)",borderRadius:"8px",padding:"4px"},children:["counter","analysis","business"].map(r=>T.jsx("button",{onClick:()=>i(r),style:{padding:"6px 12px",fontSize:"12px",fontWeight:"500",border:"none",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s",background:n===r?"white":"transparent",color:n===r?"#111827":"#6B7280",boxShadow:n===r?"0 1px 2px rgba(0, 0, 0, 0.05)":"none"},children:r.charAt(0).toUpperCase()+r.slice(1)},r))})]}),T.jsx("div",{style:{flex:1,overflow:"auto",padding:"16px"},children:T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px"},children:[T.jsxs("div",{style:{background:"linear-gradient(135deg, #ECFEFF 0%, #CFFAFE 100%)",borderRadius:"12px",border:"1px solid rgba(6, 182, 212, 0.3)",padding:"16px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"8px"},children:[T.jsx("div",{style:{background:"#06B6D4",borderRadius:"8px",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:T.jsx(pN,{style:{width:"16px",height:"16px",color:"white"}})}),T.jsxs("div",{style:{fontSize:"12px",color:"#0E7490"},children:["+",e.revenue.change,"%"]})]}),T.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:"#111827",marginBottom:"4px"},children:e.revenue.value}),T.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:"BKIS Revenue"})]}),T.jsxs("div",{style:{background:"linear-gradient(135deg, #F0FDF4 0%, #DCFCE7 100%)",borderRadius:"12px",border:"1px solid rgba(34, 197, 94, 0.3)",padding:"16px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"8px"},children:[T.jsx("div",{style:{background:"#22C55E",borderRadius:"8px",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:T.jsx(cN,{style:{width:"16px",height:"16px",color:"white"}})}),T.jsxs("div",{style:{fontSize:"12px",color:"#15803D"},children:["+",e.utilization.change,"%"]})]}),T.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:"#111827",marginBottom:"4px"},children:e.utilization.value}),T.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:"Network Utilization"})]}),T.jsxs("div",{style:{background:"linear-gradient(135deg, #FAF5FF 0%, #F3E8FF 100%)",borderRadius:"12px",border:"1px solid rgba(168, 85, 247, 0.3)",padding:"16px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"8px"},children:[T.jsx("div",{style:{background:"#A855F7",borderRadius:"8px",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:T.jsx(gN,{style:{width:"16px",height:"16px",color:"white"}})}),T.jsxs("div",{style:{fontSize:"12px",color:"#7E22CE"},children:["+",e.customerCount.change,"%"]})]}),T.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:"#111827",marginBottom:"4px"},children:e.customerCount.value}),T.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:"Customer Count"})]}),T.jsxs("div",{style:{background:"linear-gradient(135deg, #FFF7ED 0%, #FFEDD5 100%)",borderRadius:"12px",border:"1px solid rgba(249, 115, 22, 0.3)",padding:"16px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"8px"},children:[T.jsx("div",{style:{background:"#F97316",borderRadius:"8px",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:T.jsx(TP,{style:{width:"16px",height:"16px",color:"white"}})}),T.jsxs("div",{style:{fontSize:"12px",color:"#C2410C"},children:["+",e.bandwidth.change,"%"]})]}),T.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:"#111827",marginBottom:"4px"},children:e.bandwidth.value}),T.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:"Bandwidth Usage"})]})]}),T.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",borderRadius:"12px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"16px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[T.jsx("h3",{style:{margin:0,fontSize:"14px",fontWeight:"600",color:"#111827"},children:"Historical Trend"}),T.jsx("span",{style:{fontSize:"12px",color:"#3B82F6"},children:"6 Months"})]}),T.jsx(e_,{width:"100%",height:150,children:T.jsxs(k9,{data:e.historicalTrend,children:[T.jsx(Aw,{dataKey:"month",tick:{fontSize:10},stroke:"#9ca3af"}),T.jsx(Tw,{tick:{fontSize:10},stroke:"#9ca3af"}),T.jsx(n_,{contentStyle:{fontSize:12,backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px"}}),T.jsx(mS,{type:"monotone",dataKey:"value",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",r:3}})]})})]}),T.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",borderRadius:"12px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"16px"},children:[T.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"14px",fontWeight:"600",color:"#111827"},children:"Network Summary"}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:"Total Links"}),T.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:"#111827"},children:"1,247"})]}),T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:"Active NE"}),T.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:"#111827"},children:"856"})]}),T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:"Total Capacity"}),T.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:"#111827"},children:"12.5 Tbps"})]}),T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:"Avg Utilization"}),T.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:"#22C55E"},children:"68%"})]})]})]}),T.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",borderRadius:"12px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"16px"},children:[T.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"14px",fontWeight:"600",color:"#111827"},children:"Vendor Distribution"}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[T.jsx("div",{style:{flex:"0 0 45%",height:"8px",background:"#3B82F6",borderRadius:"9999px"}}),T.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:"CISCO"}),T.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:"#111827",marginLeft:"auto"},children:"45%"})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[T.jsx("div",{style:{flex:"0 0 35%",height:"8px",background:"#EC4899",borderRadius:"9999px"}}),T.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:"HUAWEI"}),T.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:"#111827",marginLeft:"auto"},children:"35%"})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[T.jsx("div",{style:{flex:"0 0 20%",height:"8px",background:"#A855F7",borderRadius:"9999px"}}),T.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:"NOKIA"}),T.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:"#111827",marginLeft:"auto"},children:"20%"})]})]})]})]})})]})})}var h0=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,n){const i=t?this.allAsyncListeners:this.allSyncListeners;let r=i.get(e);return!r&&n&&(r=new Set,i.set(e,r)),r}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,n=!1){this.getListeners(e,n,!0).add(t)}removeEventListener(e,t,n=!1){const i=this.getListeners(e,n,!1);i&&(i.delete(t),i.size===0&&(n?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){this.getGlobalListeners(t).add(e)}removeGlobalListener(e,t=!1){this.getGlobalListeners(t).delete(e)}dispatchEvent(e){this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){const n=e.type;if(t&&"event"in e){const a=e.event;a instanceof Event&&(e.eventPath=a.composedPath())}const{frameworkOverrides:i}=this,r=a=>{const d=i?()=>i.wrapIncoming(a):a;t?this.dispatchAsync(d):d()},o=this.getListeners(n,t,!1);if(((o==null?void 0:o.size)??0)>0){const a=new Set(o);for(const d of a)o!=null&&o.has(d)&&r(()=>d(e))}const s=this.getGlobalListeners(t);if(s.size>0){const a=new Set(s);for(const d of a)r(()=>d(n,e))}}getGlobalListeners(e){return e?this.globalAsyncListeners:this.globalSyncListeners}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(t):t(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[];for(const t of e)t()}};function nm(e){return e==null||e===""?null:e}function Dn(e){return e!=null&&e!==""}function vs(e){return!Dn(e)}function bk(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function i1(e,t){const n=e?JSON.stringify(e):null,i=t?JSON.stringify(t):null;return n===i}function kge(e,t,n={}){n.transform&&(e=n.transform(e),t=n.transform(t));const i=e==null,r=t==null;if(e!=null&&e.toNumber&&(e=e.toNumber()),t!=null&&t.toNumber&&(t=t.toNumber()),i&&r)return 0;if(i)return-1;if(r)return 1;function o(s,a){return s>a?1:s<a?-1:0}if(typeof e!="string"||!n.accentedCompare)return o(e,t);try{return e.localeCompare(t)}catch{return o(e,t)}}var Pge=/[&<>"']/g,Dge={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function kx(e){return(e==null?void 0:e.toString().toString())??null}function kw(e){var t;return((t=kx(e))==null?void 0:t.replace(Pge,n=>Dge[n]))??null}function a4(e){return typeof e=="string"&&e.startsWith("=")&&e.length>1}function wp(e){return e.eRootDiv.getRootNode()}function Os(e){return wp(e).activeElement}function Il(e){const{gos:t,eRootDiv:n}=e;let i=null;const r=t.get("getDocument");return r&&Dn(r)?i=r():n&&(i=n.ownerDocument),i&&Dn(i)?i:document}function gF(e){const t=Os(e);return t===null||t===Il(e).body}function P9(e){return Il(e).defaultView||window}function mF(e){let t=null,n=null;try{t=Il(e).fullscreenElement}catch{}finally{t||(t=wp(e));const i=t.querySelector("body");i?n=i:t instanceof ShadowRoot?n=t:t instanceof Document?n=t==null?void 0:t.documentElement:n=t}return n}function Fge(e){const t=mF(e);return(t==null?void 0:t.clientWidth)??(window.innerWidth||-1)}function Mge(e){const t=mF(e);return(t==null?void 0:t.clientHeight)??(window.innerHeight||-1)}function _f(e,t,n){n==null||typeof n=="string"&&n==""?D9(e,t):Sf(e,t,n)}function Sf(e,t,n){e.setAttribute(F9(t),n.toString())}function D9(e,t){e.removeAttribute(F9(t))}function F9(e){return`aria-${e}`}function f0(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function Ige(e){const t=e==null?void 0:e.direction;return t==="asc"?"ascending":t==="desc"?"descending":t==="mixed"?"other":"none"}function Lge(e){return e.getAttribute("aria-label")}function nx(e,t){_f(e,"label",t)}function r1(e,t){_f(e,"labelledby",t)}function M9(e,t){_f(e,"live",t)}function Oge(e,t){_f(e,"atomic",t)}function zge(e,t){_f(e,"relevant",t)}function yF(e,t){_f(e,"invalid",t)}function Nge(e,t){_f(e,"disabled",t)}function I9(e,t){_f(e,"hidden",t)}function xk(e,t){Sf(e,"expanded",t)}function Bge(e,t){Sf(e,"setsize",t)}function Gge(e,t){Sf(e,"posinset",t)}function jge(e,t){Sf(e,"rowcount",t)}function L9(e,t){Sf(e,"rowindex",t)}function Hge(e,t){Sf(e,"rowspan",t)}function Vge(e,t){Sf(e,"colcount",t)}function O9(e,t){Sf(e,"colindex",t)}function $ge(e,t){Sf(e,"colspan",t)}function Wge(e,t){Sf(e,"sort",t)}function Uge(e){D9(e,"sort")}function z9(e,t){_f(e,"selected",t)}function qge(e,t){_f(e,"controls",t)}function Kge(e,t){qge(e,t.id),r1(t,e.id)}function l4(e,t){_f(e,"owns",t)}function $2(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var Zge="[tabindex], input, select, button, textarea, [href]",N9="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function Pw(e){return!e||!e.matches("input, select, button, textarea")||!e.matches(N9)?!1:Sm(e)}function $o(e,t,n={}){const{skipAriaHidden:i}=n;e.classList.toggle("ag-hidden",!t),i||I9(e,!t)}function Yge(e,t,n={}){const{skipAriaHidden:i}=n;e.classList.toggle("ag-invisible",!t),i||I9(e,!t)}function o1(e,t){const n="disabled",i=t?o=>o.setAttribute(n,""):o=>o.removeAttribute(n);i(e);const r=e.querySelectorAll("input")??[];for(const o of r)i(o)}function Qv(e,t,n){let i=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof n=="number"){if(++i>n)break}else if(e===n)break}return!1}function _0(e){const{height:t,width:n,borderTopWidth:i,borderRightWidth:r,borderBottomWidth:o,borderLeftWidth:s,paddingTop:a,paddingRight:d,paddingBottom:h,paddingLeft:m,marginTop:v,marginRight:w,marginBottom:R,marginLeft:L,boxSizing:O}=window.getComputedStyle(e),z=Number.parseFloat;return{height:z(t||"0"),width:z(n||"0"),borderTopWidth:z(i||"0"),borderRightWidth:z(r||"0"),borderBottomWidth:z(o||"0"),borderLeftWidth:z(s||"0"),paddingTop:z(a||"0"),paddingRight:z(d||"0"),paddingBottom:z(h||"0"),paddingLeft:z(m||"0"),marginTop:z(v||"0"),marginRight:z(w||"0"),marginBottom:z(R||"0"),marginLeft:z(L||"0"),boxSizing:O}}function vF(e){const t=_0(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom-t.borderTopWidth-t.borderBottomWidth:t.height}function s1(e){const t=_0(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight-t.borderLeftWidth-t.borderRightWidth:t.width}function B9(e){const{height:t,marginBottom:n,marginTop:i}=_0(e);return Math.floor(t+n+i)}function xS(e){const{width:t,marginLeft:n,marginRight:i}=_0(e);return Math.floor(t+n+i)}function G9(e){const t=e.getBoundingClientRect(),{borderTopWidth:n,borderLeftWidth:i,borderRightWidth:r,borderBottomWidth:o}=_0(e);return{top:t.top+(n||0),left:t.left+(i||0),right:t.right+(r||0),bottom:t.bottom+(o||0)}}function wS(e,t){let n=e.scrollLeft;return t&&(n=Math.abs(n)),n}function CS(e,t,n){n&&(t*=-1),e.scrollLeft=t}function jc(e){for(;e!=null&&e.firstChild;)e.firstChild.remove()}function Iy(e){e!=null&&e.parentNode&&e.remove()}function bF(e){return!!e.offsetParent}function Sm(e){return e.checkVisibility?e.checkVisibility({checkVisibilityCSS:!0}):!(!bF(e)||window.getComputedStyle(e).visibility!=="visible")}function xF(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function r_(e){return()=>{const t=e();return t?wF(t)||j9(t):!0}}function wF(e){return e.clientWidth<e.scrollWidth}function j9(e){return e.clientHeight<e.scrollHeight}function _S(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):Mp(e,t)}function Mp(e,t){t=CF(t),e.style.width=t,e.style.maxWidth=t,e.style.minWidth=t}function Dw(e,t){t=CF(t),e.style.height=t,e.style.maxHeight=t,e.style.minHeight=t}function CF(e){return typeof e=="number"?`${e}px`:e}function _F(e){return e instanceof Node||e instanceof HTMLElement}function Nc(e,t,n){n==null||n===""?e.removeAttribute(t):e.setAttribute(t,n.toString())}function Em(e,t,n){const r=P9(e).ResizeObserver,o=r?new r(n):null;return o==null||o.observe(t),()=>o==null?void 0:o.disconnect()}function Rm(e,t){const n=P9(e);n.requestAnimationFrame?n.requestAnimationFrame(t):n.webkitRequestAnimationFrame?n.webkitRequestAnimationFrame(t):n.setTimeout(t,0)}var H9="data-ref",wA;function u4(){return wA??(wA=document.createTextNode(" ")),wA.cloneNode()}function ky(e){const{attrs:t,children:n,cls:i,ref:r,role:o,tag:s}=e,a=document.createElement(s);if(i&&(a.className=i),r&&a.setAttribute(H9,r),o&&a.setAttribute("role",o),t)for(const d of Object.keys(t))a.setAttribute(d,t[d]);if(n)if(typeof n=="string")a.textContent=n;else{let d=!0;for(const h of n)h&&(typeof h=="string"?(a.appendChild(document.createTextNode(h)),d=!1):typeof h=="function"?a.appendChild(h()):(d&&(a.appendChild(u4()),d=!1),a.append(ky(h)),a.appendChild(u4())))}return a}var Xge=["touchstart","touchend","touchmove","touchcancel","scroll"],Jge=["wheel"],CA={},V9=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return n=>{if(typeof CA[n]=="boolean")return CA[n];const i=document.createElement(e[n]||"div");return n="on"+n,CA[n]=n in i}})();function Qge(e,t){return!t||!e?!1:tme(t).indexOf(e)>=0}function eme(e){const t=[];let n=e.target;for(;n;)t.push(n),n=n.parentElement;return t}function tme(e){const t=e;return t.path?t.path:t.composedPath?t.composedPath():eme(t)}function nme(e,t,n){const i=ime(t);let r;i!=null&&(r={passive:i}),e.addEventListener(t,n,r)}var ime=e=>{const t=Xge.includes(e),n=Jge.includes(e);if(t)return!0;if(n)return!1};function $9(e,t,n){if(n===0)return!1;const i=Math.abs(e.clientX-t.clientX),r=Math.abs(e.clientY-t.clientY);return Math.max(i,r)<=n}var Pb=(e,t)=>{const n=e.identifier;for(let i=0,r=t.length;i<r;++i){const o=t[i];if(o.identifier===n)return o}return null};function a1(e,t){return e.gos.isElementInThisInstance(t.target)}function rme(e,t,n){const r=e.getBoundingClientRect().height,o=Fge(n)-2,s=Mge(n)-2;if(!e.offsetParent)return;const d=G9(e.offsetParent),{clientY:h,clientX:m}=t;let v=h-d.top-r/2,w=m-d.left-10;const R=Il(n),L=R.defaultView||window,O=L.pageYOffset||R.documentElement.scrollTop,z=L.pageXOffset||R.documentElement.scrollLeft;o>0&&w+e.clientWidth>o+z&&(w=o+z-e.clientWidth),w<0&&(w=0),s>0&&v+e.clientHeight>s+O&&(v=s+O-e.clientHeight),v<0&&(v=0),e.style.left=`${w}px`,e.style.top=`${v}px`}var o_=(e,...t)=>{for(const n of t){const[i,r,o,s]=n;i.addEventListener(r,o,s),e.push(n)}},SF=e=>{if(e){for(const[t,n,i,r]of e)t.removeEventListener(n,i,r);e.length=0}},Cb=e=>{e.cancelable&&e.preventDefault()};function ome(e,t){return t}function W9(e){return(e==null?void 0:e.getLocaleTextFunc())??ome}function sme(e,t,n,i){const r=t[n];return e.getLocaleTextFunc()(n,typeof r=="function"?r(i):r,i)}function ame(e){return(t,n,i)=>e({key:t,defaultValue:n,variableValues:i})}function lme(e){return(t,n,i)=>{let r=e==null?void 0:e[t];if(r&&(i!=null&&i.length)){let o=0;for(;!(o>=i.length||r.indexOf("${variable}")===-1);)r=r.replace("${variable}",i[o++])}return r??n}}var cc=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.beans=e,this.stubContext=e.context,this.eventSvc=e.eventSvc,this.gos=e.gos}destroy(){const{destroyFunctions:e}=this;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,n){this.localEventService||(this.localEventService=new h0),this.localEventService.addEventListener(e,t,n)}removeEventListener(e,t,n){var i;(i=this.localEventService)==null||i.removeEventListener(e,t,n)}dispatchLocalEvent(e){var t;(t=this.localEventService)==null||t.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventSvc,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const n=[];for(const i of Object.keys(t)){const r=t[i];r&&n.push(this._setupListener(e,i,r))}return n}_setupListener(e,t,n){if(this.destroyed)return()=>null;let i;if(ume(e))e.__addEventListener(t,n),i=()=>(e.__removeEventListener(t,n),null);else{const r=cme(e);e instanceof HTMLElement?nme(e,t,n):r?e.addListener(t,n):e.addEventListener(t,n),i=r?()=>(e.removeListener(t,n),null):()=>(e.removeEventListener(t,n),null)}return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(r=>r!==i),null)}setupPropertyListener(e,t){const{gos:n}=this;n.addPropertyEventListener(e,t);const i=()=>(n.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(r=>r!==i),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupPropertyListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const n=e.join("-")+this.propertyListenerId++,i=r=>{if(r.changeSet){if(r.changeSet&&r.changeSet.id===this.lastChangeSetIdLookup[n])return;this.lastChangeSetIdLookup[n]=r.changeSet.id}const o={type:"propertyChanged",changeSet:r.changeSet,source:r.source};t(o)};for(const r of e)this.setupPropertyListener(r,i)}getLocaleTextFunc(){return W9(this.beans.localeSvc)}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createOptionalManagedBean(e,t){return e?this.createManagedBean(e,t):void 0}createManagedBean(e,t){const n=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),n}createBean(e,t,n){return(t||this.stubContext).createBean(e,n)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};function ume(e){return e.__addEventListener!==void 0}function cme(e){return e.eventServiceType==="global"}var Yt=class extends cc{},wk=new Set,W2=(e,t)=>{wk.has(t)||(wk.add(t),e())};W2._set=wk;var dme={pending:!1,funcs:[]},hme={pending:!1,funcs:[]};function Ck(e,t="setTimeout",n){const i=t==="raf"?hme:dme;if(i.funcs.push(e),i.pending)return;i.pending=!0;const r=()=>{const o=i.funcs.slice();i.funcs.length=0,i.pending=!1;for(const s of o)s()};t==="raf"?Rm(n,r):window.setTimeout(r,0)}function Ll(e,t,n){let i;return function(...r){const o=this;return window.clearTimeout(i),i=window.setTimeout(function(){e.isAlive()&&t.apply(o,r)},n),i}}function c4(e,t){let n=0;return function(...i){const r=this,o=Date.now();o-n<t||(n=o,e.apply(r,i))}}function fme(e,t,n,i=100){const r=Date.now();let o=null,s=!1;const a=()=>{o!=null&&(window.clearInterval(o),o=null)};e.addDestroyFunc(a);const d=()=>{const h=Date.now()-r>i;(t()||h)&&(n(),s=!0,a())};d(),s||(o=window.setInterval(d,10))}var U9=new Set(["__proto__","constructor","prototype"]);function pme(e,t){if(e!=null){if(Array.isArray(e)){for(let n=0;n<e.length;n++)t(n.toString(),e[n]);return}for(const n of Object.keys(e).filter(i=>!U9.has(i)))t(n,e[n])}}function ac(e,t,n=!0,i=!1){Dn(t)&&pme(t,(r,o)=>{let s=e[r];s!==o&&(i&&s==null&&o!=null&&typeof o=="object"&&o.constructor===Object&&(s={},e[r]=s),d4(o)&&d4(s)&&!Array.isArray(s)?ac(s,o,n,i):(n||o!==void 0)&&(e[r]=o))})}function d4(e){return typeof e=="object"&&e!==null}var EF=class Vg{static applyGlobalGridOptions(t){if(!Vg.gridOptions)return{...t};let n={};return ac(n,Vg.gridOptions,!0,!0),Vg.mergeStrategy==="deep"?ac(n,t,!0,!0):n={...n,...t},Vg.gridOptions.context&&(n.context=Vg.gridOptions.context),t.context&&(Vg.mergeStrategy==="deep"&&n.context&&ac(t.context,n.context,!0,!0),n.context=t.context),n}static applyGlobalGridOption(t,n){if(Vg.mergeStrategy==="deep"){const i=q9(t);if(i&&typeof i=="object"&&typeof n=="object")return Vg.applyGlobalGridOptions({[t]:n})[t]}return n}};EF.gridOptions=void 0;EF.mergeStrategy="shallow";var RF=EF;function q9(e){var t;return(t=RF.gridOptions)==null?void 0:t[e]}var K9={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,cellFlashDuration:500,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,refreshAfterGroupEdit:!1,rowDragInsertDelay:500,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1,enableFilterHandlers:!1},Z9="https://www.ag-grid.com";function p0(e,t,...n){e.get("debug")&&console.log("AG Grid: "+t,...n)}function Fw(e,...t){W2(()=>console.warn("AG Grid: "+e,...t),e+(t==null?void 0:t.join("")))}function Db(e,...t){W2(()=>console.error("AG Grid: "+e,...t),e+(t==null?void 0:t.join("")))}var Y9=new Set,SS={},e0={},s_,X9=!1,J9=!1,gme=!1;function mme(e){const[t,n]=e.version.split(".")||[],[i,r]=s_.split(".")||[];return t===i&&n===r}function yme(e){var i;s_||(s_=e.version);const t=r=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${r} Please update all modules to the same version.`;e.version?mme(e)||Db(t(`'${e.moduleName}' is version ${e.version} but the other modules are version ${s_}.`)):Db(t(`'${e.moduleName}' is incompatible.`));const n=(i=e.validate)==null?void 0:i.call(e);n&&!n.isValid&&Db(`${n.message}`)}function l1(e,t,n=!1){n||(X9=!0),yme(e);const i=e.rowModels??["all"];Y9.add(e);let r;t!==void 0?(J9=!0,e0[t]===void 0&&(e0[t]={}),r=e0[t]):r=SS;for(const o of i)r[o]===void 0&&(r[o]={}),r[o][e.moduleName]=e;if(e.dependsOn)for(const o of e.dependsOn)l1(o,t,n)}function vme(e){delete e0[e]}function _k(e,t,n){const i=r=>{var o,s,a;return!!((o=SS[r])!=null&&o[e])||!!((a=(s=e0[t])==null?void 0:s[r])!=null&&a[e])};return i(n)||i("all")}function AF(){return J9}function bme(e,t){const n=e0[e]??{};return[...Object.values(SS.all??{}),...Object.values(n.all??{}),...Object.values(SS[t]??{}),...Object.values(n[t]??{})]}function xme(){return new Set(Y9)}function wme(e,t){const n=e0[e]??{};return[...Object.values(n.all??{}),...Object.values(n[t]??{})]}function Cme(){return X9}function Q9(){return gme}var _me=class{static register(e){l1(e,void 0)}static registerModules(e){for(const t of e)l1(t,void 0)}},Fn="35.0.0",h4=2e3,f4=100,e7="_version_",a_=null,Fb=`${Z9}/javascript-data-grid`;function Sme(e){a_=e}function Eme(e){Fb=e}function t7(e,t,n){return(a_==null?void 0:a_(e,t))??[kme(e,t,n)]}function TF(e,t,n,i,r){e(`${i?"warning":"error"} #${t}`,...t7(t,n,r))}function Rme(e){if(!e)return String(e);const t={};for(const n of Object.keys(e))typeof e[n]!="object"&&typeof e[n]!="function"&&(t[n]=e[n]);return JSON.stringify(t)}function Ame(e){let t=e;return e instanceof Error?t=e.toString():typeof e=="object"&&(t=Rme(e)),t}function l_(e){return e===void 0?"undefined":e===null?"null":e}function Sk(e,t){return`${e}?${t.toString()}`}function Tme(e,t,n){const i=Array.from(t.entries()).sort((o,s)=>s[1].length-o[1].length);let r=Sk(e,t);for(const[o,s]of i){if(o===e7)continue;const a=r.length-n;if(a<=0)break;const d="...",h=a+d.length,m=s.length-h>f4?s.slice(0,s.length-h)+d:s.slice(0,f4)+d;t.set(o,m),r=Sk(e,t)}return r}function n7(e,t){const n=new URLSearchParams;if(n.append(e7,Fn),t)for(const o of Object.keys(t))n.append(o,Ame(t[o]));const i=`${Fb}/errors/${e}`,r=Sk(i,n);return r.length<=h4?r:Tme(i,n,h4)}var kme=(e,t,n)=>{const i=n7(e,t);return`${`${n?n+` 
`:""}Visit ${i}`}${n?"":` 
  Alternatively register the ValidationModule to see the full message in the console.`}`};function an(...e){TF(Fw,e[0],e[1],!0)}function Do(...e){TF(Db,e[0],e[1],!1)}function ww(e,t,n){TF(Db,e,t,!1,n)}function Pme(e,t){const n=t[0];return`error #${n} `+t7(n,t[1],e).join(" ")}function Ip(...e){return Pme(void 0,e)}function i7(e,t){return e.get("rowModelType")===t}function Ks(e,t){return i7(e,"clientSide")}function Px(e,t){return i7(e,"serverSide")}function lu(e,t){return e.get("domLayout")===t}function t0(e){return RS(e)!==void 0}function r7(e){return typeof e.get("getRowHeight")=="function"}function Dme(e,t){return t?!e.get("enableStrictPivotColumnOrder"):e.get("maintainColumnOrder")}function Fme({gos:e,formula:t}){const n=e.get("rowNumbers");return n||!!(t!=null&&t.active)&&n!==!1}function Ly(e,t,n=!1,i){const{gos:r,environment:o}=e;if(i==null&&(i=o.getDefaultRowHeight()),r7(r)){if(n)return{height:i,estimated:!0};const d={node:t,data:t.data},h=r.getCallback("getRowHeight")(d);if(Ek(h))return h===0&&an(23),{height:Math.max(1,h),estimated:!1}}if(t.detail&&r.get("masterDetail"))return Mme(r);const s=r.get("rowHeight");return{height:s&&Ek(s)?s:i,estimated:!1}}function Mme(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};const t=e.get("detailRowHeight");return Ek(t)?{height:t,estimated:!1}:{height:300,estimated:!1}}function n0(e){const{environment:t,gos:n}=e,i=n.get("rowHeight");if(!i||vs(i))return t.getDefaultRowHeight();const r=t.refreshRowHeightVariable();return r!==-1?r:(an(24),t.getDefaultRowHeight())}function Ek(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}function o7(e,t,n){const i=t[e.getDomDataKey()];return i?i[n]:void 0}function g0(e,t,n,i){const r=e.getDomDataKey();let o=t[r];vs(o)&&(o={},t[r]=o),o[n]=i}function Mb(e){return e.get("ensureDomOrder")?!1:e.get("animateRows")}function s7(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||lu(e,"print"))}function Ep(e){const t=e.get("autoGroupColumnDef");return!(t!=null&&t.comparator)&&!e.get("treeData")}function Rk(e){const t=e.get("groupAggFiltering");if(typeof t=="function")return e.getCallback("groupAggFiltering");if(t===!0)return()=>!0}function a7(e){return e.get("grandTotalRow")}function l7(e,t){return t?!1:e.get("groupDisplayType")==="groupRows"}function u7(e,t,n){return!!t.group&&!t.footer&&l7(e,n)}function ix(e){const t=e.getCallback("getRowId");return t===void 0?t:n=>{let i=t(n);return typeof i!="string"&&(W2(()=>an(25,{id:i}),"getRowIdString"),i=String(i)),i}}function Ime(e,t){const n=e.get("groupHideParentOfSingleChild");return!!(n===!0||n==="leafGroupsOnly"&&t.leafGroup||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren")&&t.leafGroup)}function Lme(e){const t=e.get("maxConcurrentDatasourceRequests");return t>0?t:void 0}function Ib(e){return(e==null?void 0:e.checkboxes)??!0}function u_(e){return(e==null?void 0:e.mode)==="multiRow"&&(e.headerCheckbox??!0)}function ES(e){if(typeof e=="object")return e.checkboxLocation??"selectionColumn"}function _A(e){return(e==null?void 0:e.hideDisabledCheckboxes)??!1}function Ome(e){return typeof e.get("rowSelection")!="string"}function Oy(e){const t=e.get("cellSelection");return t!==void 0?!!t:e.get("enableRangeSelection")}function Lb(e){const t=e.get("cellSelection")??!1;return(typeof t=="object"&&t.enableColumnSelection)??!1}function c7(e){const t=e.get("rowSelection")??"single";if(typeof t=="string"){const n=e.get("suppressRowClickSelection"),i=e.get("suppressRowDeselection");return n&&i?!1:n?"enableDeselection":i?"enableSelection":!0}return t.mode==="singleRow"||t.mode==="multiRow"?t.enableClickSelection??!1:!1}function zme(e){const t=c7(e);return t===!0||t==="enableSelection"}function Nme(e){const t=c7(e);return t===!0||t==="enableDeselection"}function Ak(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("isRowSelectable"):t==null?void 0:t.isRowSelectable}function RS(e){const t="beanName"in e&&e.beanName==="gos"?e.get("rowSelection"):e.rowSelection;if(typeof t=="string")switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}switch(t==null?void 0:t.mode){case"multiRow":case"singleRow":return t.mode;default:return}}function AS(e){return RS(e)==="multiRow"}function Bme(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("rowMultiSelectWithClick"):(t==null?void 0:t.enableSelectionWithoutKeys)??!1}function TS(e){const t=e.get("rowSelection");if(typeof t=="string"){const n=e.get("groupSelectsChildren"),i=e.get("groupSelectsFiltered");return n&&i?"filteredDescendants":n?"descendants":"self"}return(t==null?void 0:t.mode)==="multiRow"?t.groupSelects:void 0}function d7(e,t=!0){const n=e.get("rowSelection");return typeof n!="object"?t?"all":void 0:n.mode==="multiRow"?n.selectAll:"all"}function Gme(e){const t=e.get("rowSelection");return typeof t=="string"?!1:(t==null?void 0:t.mode)==="multiRow"?t.ctrlASelectsRows??!1:!1}function u1(e){const t=TS(e);return t==="descendants"||t==="filteredDescendants"}function p4(e){const t=e.get("rowSelection");return typeof t=="object"&&t.masterSelects||"self"}function jme(e){return e.isModuleRegistered("SetFilter")&&!e.get("suppressSetFilterByDefault")}function Ed(e){return e.get("columnMenu")==="legacy"}function Hme(e){return!Ed(e)}function Vme(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)}function $me(e,t,n){typeof e!="object"&&(e={});const i={...e};for(const r of n){const o=t[r];typeof o<"u"&&(i[r]=o)}return i}function Wme(e,t){if(!e)return;const n={};let i=!1;for(const s of Object.keys(e))n[s]=e[s],i=!0;if(!i)return;const r={type:"gridOptionsChanged",options:n};t.dispatchEvent(r);const o={type:"componentStateChanged",...n};t.dispatchEvent(o)}function ki(e,t){return e.addCommon(t)}function c_(e,t){var n;return e[t]??((n=e.gridOptions)==null?void 0:n[t])??q9(t)??K9[t]}function Ume({gos:e},t){return t.button===2||t.ctrlKey&&e.get("allowContextMenuWithControlKey")}var qme={resizable:!0,sortable:!0},Kme=0;function h7(){return Kme++}function zy(e){return e instanceof S0}var Zme=["asc","desc",null],Yme=[{type:"absolute",direction:"asc"},{type:"absolute",direction:"desc"},null],S0=class extends Yt{constructor(e,t,n,i){super(),this.colDef=e,this.userProvidedColDef=t,this.colId=n,this.primary=i,this.isColumn=!0,this.instanceId=h7(),this.autoHeaderHeight=null,this.sortDef=mf(),this._wasSortExplicitlyRemoved=!1,this.moving=!1,this.resizing=!1,this.menuVisible=!1,this.formulaRef=null,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.colEventSvc=new h0,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.flex=null,this.colIdSanitised=kw(n)}destroy(){var e;super.destroy(),(e=this.beans.rowSpanSvc)==null||e.deregister(this)}getInstanceId(){return this.instanceId}initState(){const{colDef:e,beans:{sortSvc:t,pinnedCols:n,colFlex:i}}=this;t==null||t.initCol(this);const r=e.hide;r!==void 0?this.visible=!r:this.visible=!e.initialHide,n==null||n.initCol(this),i==null||i.initCol(this)}setColDef(e,t,n){var r;const i=e.spanRows!==this.colDef.spanRows;this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),i&&((r=this.beans.rowSpanSvc)==null||r.deregister(this),this.initRowSpan()),this.dispatchColEvent("colDefChanged",n)}getUserProvidedColDef(){return this.userProvidedColDef}getParent(){return this.parent}getOriginalParent(){return this.originalParent}postConstruct(){this.initState(),this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.initRowSpan(),this.addPivotListener()}initDotNotation(){const{gos:e,colDef:{field:t,tooltipField:n}}=this,i=e.get("suppressFieldDotNotation");this.fieldContainsDots=Dn(t)&&t.includes(".")&&!i,this.tooltipFieldContainsDots=Dn(n)&&n.includes(".")&&!i}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=e.minWidth??this.beans.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){var e;(e=this.beans.tooltipSvc)==null||e.initCol(this)}initRowSpan(){var e;this.colDef.spanRows&&((e=this.beans.rowSpanSvc)==null||e.register(this))}addPivotListener(){const e=this.beans.pivotColDefSvc,t=this.colDef.pivotValueColumn;!e||!t||this.addManagedListeners(t,{colDefChanged:n=>{const i=e.recreateColDef(this.colDef);this.setColDef(i,i,n.source)}})}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t;const n=e.width,i=e.initialWidth;return n!=null?t=n:i!=null?t=i:t=200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){var t;return((t=this.beans.showRowGroupCols)==null?void 0:t.isRowGroupDisplayed(this,e))??!1}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}__addEventListener(e,t){this.colEventSvc.addEventListener(e,t)}__removeEventListener(e,t){this.colEventSvc.removeEventListener(e,t)}addEventListener(e,t){var i,r,o;this.frameworkEventListenerService=(r=(i=this.beans.frameworkOverrides).createLocalEventListenerWrapper)==null?void 0:r.call(i,this.frameworkEventListenerService,this.colEventSvc);const n=((o=this.frameworkEventListenerService)==null?void 0:o.wrap(e,t))??t;this.colEventSvc.addEventListener(e,n)}removeEventListener(e,t){var i;const n=((i=this.frameworkEventListenerService)==null?void 0:i.unwrap(e,t))??t;this.colEventSvc.removeEventListener(e,n)}createColumnFunctionCallbackParams(e){return ki(this.gos,{node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){var t;return((t=this.beans.cellNavigation)==null?void 0:t.isSuppressNavigable(this,e))??!1}isCellEditable(e){var t;return((t=this.beans.editSvc)==null?void 0:t.isCellEditable({rowNode:e,column:this}))??!1}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){var t;return((t=this.beans.selectionSvc)==null?void 0:t.isCellCheckboxSelection(this,e))??!1}isSuppressPaste(e){var t;return this.isColumnFunc(e,((t=this.colDef)==null?void 0:t.suppressPaste)??null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??qme[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){const n=this.createColumnFunctionCallbackParams(e);return t(n)}return!1}createColumnEvent(e,t){return ki(this.gos,{type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sortDef.direction}getSortDef(){return this.sortDef.direction?this.sortDef:null}getColDefAllowedSortTypes(){const e=[],{sort:t,initialSort:n}=this.colDef,i=t===null?t:pm(t==null?void 0:t.type),r=n===null?n:pm(n==null?void 0:n.type);return i&&e.push(i),r&&e.push(r),e}getSortingOrder(){const e=this.getColDefAllowedSortTypes().includes("absolute")?Yme:Zme;return(this.colDef.sortingOrder??this.gos.get("sortingOrder")??e).map(t=>mf(t))}getAvailableSortTypes(){const e=this.getSortingOrder().reduce((t,n)=>(n.direction&&t.push(n.type),t),this.getColDefAllowedSortTypes());return new Set(e)}get wasSortExplicitlyRemoved(){return this._wasSortExplicitlyRemoved}setSortDef(e,t=!1){t||(this._wasSortExplicitlyRemoved=!e.direction),this.sortDef=e}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.getSort()==="asc"}isSortDescending(){return this.getSort()==="desc"}isSortNone(){return vs(this.getSort())}isSorting(){return Dn(this.getSort())}getSortIndex(){return this.sortIndex}isMenuVisible(){return this.menuVisible}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchColEvent("leftChanged",t))}isFilterActive(){return this.filterActive}isHovered(){var e;return an(261),!!((e=this.beans.colHover)!=null&&e.isHovered(this))}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.dispatchColEvent("firstRightPinnedChanged",t))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.dispatchColEvent("lastLeftPinnedChanged",t))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){const n=e===!0;this.visible!==n&&(this.visible=n,this.dispatchColEvent("visibleChanged",t)),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getFirstRealParent(){let e=this.getOriginalParent();for(;e!=null&&e.isPadding();)e=e.getOriginalParent();return e}getColumnGroupPaddingInfo(){let e=this.getParent();if(!(e!=null&&e.isPadding()))return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let n=!0;for(;e;){if(!e.isPadding()){n=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:n}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return ki(this.gos,{node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(vs(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),n=this.colDef.colSpan(t);return Math.max(n,1)}getRowSpan(e){if(vs(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),n=this.colDef.rowSpan(t);return Math.max(n,1)}setActualWidth(e,t,n=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex!=null&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),n||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.dispatchColEvent("widthChanged",e)}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex}isRowGroupActive(){return this.rowGroupActive}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}isAllowFormula(){return this.colDef.allowFormula===!0}dispatchColEvent(e,t,n){const i=this.createColumnEvent(e,t);n&&ac(i,n),this.colEventSvc.dispatchEvent(i)}dispatchStateUpdatedEvent(e){this.colEventSvc.dispatchEvent({type:"columnStateUpdated",key:e})}};function mf(e){return Ob(e)?{direction:e.direction,type:e.type}:{direction:U2(e),type:pm(e)}}function Py(e){return e==="asc"||e==="desc"||e===null}function kF(e){return e==="default"||e==="absolute"}function Ob(e){if(!e||typeof e!="object")return!1;const t=e;return kF(t.type)&&Py(t.direction)}function d_(e,t){return e?t?e.type===t.type&&e.direction===t.direction:e?e.direction===null:!0:t?t.direction===null:!0}function U2(e){return Py(e)?e:null}function pm(e){return kF(e)?e:"default"}function Au(e){return e instanceof h_}var h_=class extends Yt{constructor(e,t,n,i){super(),this.colGroupDef=e,this.groupId=t,this.padding=n,this.level=i,this.isColumn=!1,this.expandable=!1,this.instanceId=h7(),this.expandableListenerRemoveCallback=null,this.expanded=!!(e!=null&&e.openByDefault)}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}forEachLeafColumn(e){if(this.children)for(const t of this.children)zy(t)?e(t):Au(t)&&t.forEachLeafColumn(e)}addLeafColumns(e){if(this.children)for(const t of this.children)zy(t)?e.push(t):Au(t)&&t.addLeafColumns(e)}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);for(const t of this.getLeafColumns())t.__addEventListener("visibleChanged",e);this.expandableListenerRemoveCallback=()=>{for(const t of this.getLeafColumns())t.__removeEventListener("visibleChanged",e);this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,n=!1;const i=this.findChildrenRemovingPadding();for(let o=0,s=i.length;o<s;o++){const a=i[o];if(!a.isVisible())continue;const d=a.getColumnGroupShow();d==="open"?(e=!0,n=!0):d==="closed"?(t=!0,n=!0):(e=!0,t=!0)}const r=e&&t&&n;this.expandable!==r&&(this.expandable=r,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=n=>{for(const i of n)Au(i)&&i.isPadding()?t(i.children):e.push(i)};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},Xme={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function g4(e,t,n){const i={},r=e.gos;return Object.assign(i,r.get("defaultColGroupDef")),Object.assign(i,t),r.validateColDef(i,n),i}var Jme=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=bk(e);let n=0;for(;;){let i=e??t;if(i?n!==0&&(i+="_"+n):i=n,!this.existingKeys[i]){const r=String(i);return e&&n>0&&an(273,{providedId:e,usedId:r}),this.existingKeys[r]=!0,r}n++}}};function Wo(e){if(e!=null&&e.length)return e[e.length-1]}function Vy(e,t,n){if(e===t)return!0;if(!e||!t)return e==null&&t==null;const i=e.length;if(i!==t.length)return!1;for(let r=0;r<i;r++)if(e[r]!==t[r]&&!(n!=null&&n(e[r],t[r])))return!1;return!0}function cw(e,t){if(e){for(const n of e)if(t(n))return!0}}function Bp(e,t){const n=e.indexOf(t);n>=0&&e.splice(n,1)}function m4(e,t,n){for(let i=0;i<t.length;i++)Bp(e,t[i]);for(let i=t.length-1;i>=0;i--)e.splice(n,0,t[i])}var q2="ag-Grid-AutoColumn",f7="ag-Grid-SelectionColumn",p7="ag-Grid-RowNumbersColumn";function g7(e){const t=[],n=i=>{for(let r=0;r<i.length;r++){const o=i[r];zy(o)?t.push(o):Au(o)&&n(o.getChildren())}};return n(e),t}function Wg(e){return e.reduce((t,n)=>t+n.getActualWidth(),0)}function kS(e,t,n){const i={};if(!t)return;rm(null,t,o=>{i[o.getInstanceId()]=o}),n&&rm(null,n,o=>{i[o.getInstanceId()]=null});const r=Object.values(i).filter(o=>o!=null);e.context.destroyBeans(r)}function PF(e){return e.getId().startsWith(q2)}function $y(e){const t=typeof e=="string"?e:"getColId"in e?e.getColId():e.colId;return(t==null?void 0:t.startsWith(f7))??!1}function im(e){const t=typeof e=="string"?e:"getColId"in e?e.getColId():e.colId;return(t==null?void 0:t.startsWith(p7))??!1}function Qme(e){return $y(e)||im(e)}function PS(e){let t=[];return e instanceof Array?t=e:typeof e=="string"&&(t=e.split(",")),t}function eye(e,t){return Vy(e,t,(n,i)=>n.getColId()===i.getColId())}function tye(e){e.map={};for(const t of e.list)e.map[t.getId()]=t}function zb(e){return e==="optionsUpdated"?"gridOptionsChanged":e}function Mw(e,t){const n=e===t,i=e.getColDef()===t,r=e.getColId()==t;return n||i||r}var nye=(e,t)=>(n,i)=>{const r={value1:void 0,value2:void 0};let o=!1;return e&&(e[n]!==void 0&&(r.value1=e[n],o=!0),Dn(i)&&e[i]!==void 0&&(r.value2=e[i],o=!0)),!o&&t&&(t[n]!==void 0&&(r.value1=t[n]),Dn(i)&&t[i]!==void 0&&(r.value2=t[i])),r};function iye(e,t){const n={...e,sort:void 0,colId:t},i=m7(e);return i&&(n.sort=i.direction,n.sortType=i.type),n}function m7(e){const{sort:t,initialSort:n}=e,i=Ob(t)||Py(t),r=Ob(n)||Py(n);return i?mf(t):r?mf(n):null}var rye=(e,t)=>{Au(e)&&e.setupExpandable(),e.originalParent=t};function oye(e,t=null,n,i,r){const o=new Jme,{existingCols:s,existingGroups:a,existingColKeys:d}=sye(i);o.addExistingKeys(d);const h=y7(e,t,0,n,s,o,a,r),{colGroupSvc:m}=e,v=(m==null?void 0:m.findMaxDepth(h,0))??0,w=m?m.balanceColumnTree(h,0,v,o):h;return rm(null,w,rye),{columnTree:w,treeDepth:v}}function sye(e){const t=[],n=[],i=[];return e&&rm(null,e,r=>{if(Au(r)){const o=r;n.push(o)}else{const o=r;i.push(o.getId()),t.push(o)}}),{existingCols:t,existingGroups:n,existingColKeys:i}}function y7(e,t,n,i,r,o,s,a){if(!t)return[];const{colGroupSvc:d}=e,h=new Array(t.length);for(let m=0;m<h.length;m++){const v=t[m];d&&hye(v)?h[m]=d.createProvidedColumnGroup(i,v,n,r,o,s,a):h[m]=aye(e,i,v,r,o,a)}return h}function aye(e,t,n,i,r,o){var d;const s=uye(n,i);s&&(i==null||i.splice(s.idx,1));let a=s==null?void 0:s.column;if(a){const h=Tk(e,n,a.getColId());a.setColDef(h,n,o),lye(e,a,h,o)}else{const h=r.getUniqueKey(n.colId,n.field),m=Tk(e,n,h);a=new S0(m,n,h,t),e.context.createBean(a)}return(d=e.dataTypeSvc)==null||d.addColumnListeners(a),a}function v7(e,t,n,i,r,o,s,a){const{sortSvc:d,pinnedCols:h,colFlex:m}=e;n!==void 0&&t.setVisible(!n,a),d&&(d.updateColSort(t,i,a),r!==void 0&&d.setColSortIndex(t,r)),o!==void 0&&(h==null||h.setColPinned(t,o)),s!==void 0&&(m==null||m.setColFlex(t,s))}function lye(e,t,n,i){v7(e,t,n.hide,n.sort,n.sortIndex,n.pinned,n.flex,i);const r=t.getFlex();if(!(r!=null&&r>0))if(n.width!=null)t.setActualWidth(n.width,i);else{const o=t.getActualWidth();t.setActualWidth(o,i)}}function uye(e,t){if(t)for(let n=0;n<t.length;n++){const i=t[n].getUserProvidedColDef();if(!i)continue;if(e.colId!=null){if(t[n].getId()===e.colId)return{idx:n,column:t[n]};continue}if(e.field!=null){if(i.field===e.field)return{idx:n,column:t[n]};continue}if(i===e)return{idx:n,column:t[n]}}}function Tk(e,t,n,i){const{gos:r,dataTypeSvc:o}=e,s={},a=r.get("defaultColDef");ac(s,a,!1,!0);const d=cye(e,s,t,n);d&&dye(e,d,s);const h=s.cellDataType;ac(s,t,!1,!0),h!==void 0&&(s.cellDataType=h);const m=r.get("autoGroupColumnDef"),v=Ep(r);return t.rowGroup&&m&&v&&ac(s,{sort:m.sort,initialSort:m.initialSort},!1,!0),o==null||o.postProcess(s),o==null||o.validateColDef(s),r.validateColDef(s,n,i),s}function cye(e,t,n,i){var s;const r=(s=e.dataTypeSvc)==null?void 0:s.updateColDefAndGetColumnType(t,n,i),o=n.type??r??t.type;return t.type=o,o?PS(o):void 0}function dye(e,t,n){if(!t.length)return;const i=Object.assign({},Xme),r=e.gos.get("columnTypes")||{};for(const o of Object.keys(r)){const s=r[o];o in i?an(34,{key:o}):(s.type&&an(35),i[o]=s)}for(const o of t){const s=i[o.trim()];s?ac(n,s,!1,!0):an(36,{t:o})}}function hye(e){return e.children!==void 0}function rm(e,t,n){if(t)for(let i=0;i<t.length;i++){const r=t[i];Au(r)&&rm(r,r.getChildren(),n),n(r,e)}}function b7(e,t){const n=[],i=[],r=[];return e.forEach(s=>{const a=s.getColDef().lockPosition;a==="right"?r.push(s):a==="left"||a===!0?n.push(s):i.push(s)}),t.get("enableRtl")?[...r,...i,...n]:[...n,...i,...r]}function x7(e,t){let n=!0;return rm(null,t,i=>{if(!Au(i))return;const r=i,o=r.getColGroupDef();if(!(o==null?void 0:o.marryChildren))return;const a=[];for(const w of r.getLeafColumns()){const R=e.indexOf(w);a.push(R)}const d=Math.max.apply(Math,a),h=Math.min.apply(Math,a),m=d-h,v=r.getLeafColumns().length-1;m>v&&(n=!1)}),n}function w7(e,t){if(!e||e.length==0)return;const n=t(e[0]);for(let i=1;i<e.length;i++)if(n!==t(e[i]))return;return n}function C7(e,t,n){if(!t.length)return;const i=t.length===1?t[0]:null,r=w7(t,o=>o.getPinned());e.dispatchEvent({type:"columnPinned",pinned:r??null,columns:t,column:i,source:n})}function fye(e,t,n){if(!t.length)return;const i=t.length===1?t[0]:null,r=w7(t,o=>o.isVisible());e.dispatchEvent({type:"columnVisible",visible:r,columns:t,column:i,source:n})}function pye(e,t,n,i){e.dispatchEvent({type:t,columns:n,column:n&&n.length==1?n[0]:null,source:i})}function rx(e,t,n,i,r=null){t!=null&&t.length&&e.dispatchEvent({type:"columnResized",columns:t,column:t.length===1?t[0]:null,flexColumns:r,finished:n,source:i})}function vf(e,t,n){var q;const{colModel:i,rowGroupColsSvc:r,pivotColsSvc:o,autoColSvc:s,selectionColSvc:a,colAnimation:d,visibleCols:h,pivotResultCols:m,environment:v,valueColsSvc:w,eventSvc:R,gos:L}=e,O=i.getColDefCols()??[],z=a==null?void 0:a.getColumns();if(!O.length&&!(z!=null&&z.length))return!1;if(t!=null&&t.state&&!t.state.forEach)return an(32),!1;const $=(ie,re,J,ne,be)=>{if(!ie)return;const ue=nye(re,t.defaultState),ve=ue("flex").value1,ce=ue("sort").value1,Ie=ue("sortType").value1,Te=Py(ce)||kF(Ie),fe=pm(Ie),he=U2(ce),Re=Te?{type:fe,direction:he}:void 0;if(v7(e,ie,ue("hide").value1,Re,ue("sortIndex").value1,ue("pinned").value1,ve,n),ve==null){const De=ue("width").value1;if(De!=null){const Ye=ie.getColDef().minWidth??v.getDefaultColumnMinWidth();Ye!=null&&De>=Ye&&ie.setActualWidth(De,n)}}be||!ie.isPrimary()||(w==null||w.syncColumnWithState(ie,n,ue),r==null||r.syncColumnWithState(ie,n,ue,J),o==null||o.syncColumnWithState(ie,n,ue,ne))},U=(ie,re,J)=>{var _e,Le;const ne=_7(e,n),be=re.slice(),ue={},ve={},ce=[],Ie=[],Te=[];let fe=0;const he=(r==null?void 0:r.columns.slice())??[],Re=(o==null?void 0:o.columns.slice())??[];for(const Oe of ie){const yt=Oe.colId;if(yt.startsWith(q2)){ce.push(Oe),Te.push(Oe);continue}if($y(yt)){Ie.push(Oe),Te.push(Oe);continue}const Vt=J(yt);Vt?($(Vt,Oe,ue,ve,!1),Bp(be,Vt)):(Te.push(Oe),fe+=1)}const De=Oe=>$(Oe,null,ue,ve,!1);be.forEach(De),r==null||r.sortColumns(y4.bind(r,ue,he)),o==null||o.sortColumns(y4.bind(o,ve,Re)),i.refreshCols(!1,n);const Ye=(Oe,yt,xt=[])=>{for(const Vt of yt){const Xt=Oe(Vt.colId);Bp(xt,Xt),$(Xt,Vt,null,null,!0)}xt.forEach(De)};return Ye(Oe=>(s==null?void 0:s.getColumn(Oe))??null,ce,(_e=s==null?void 0:s.getColumns())==null?void 0:_e.slice()),Ye(Oe=>(a==null?void 0:a.getColumn(Oe))??null,Ie,(Le=a==null?void 0:a.getColumns())==null?void 0:Le.slice()),mye(t,i,L),h.refresh(n),R.dispatchEvent({type:"columnEverythingChanged",source:n}),ne(),{unmatchedAndAutoStates:Te,unmatchedCount:fe}};d==null||d.start();let{unmatchedAndAutoStates:Y,unmatchedCount:X}=U(t.state||[],O,ie=>i.getColDefCol(ie));if(Y.length>0||Dn(t.defaultState)){const ie=((q=m==null?void 0:m.getPivotResultCols())==null?void 0:q.list)??[];X=U(Y,ie,re=>(m==null?void 0:m.getPivotResultCol(re))??null).unmatchedCount}return d==null||d.finish(),X===0}function gye(e,t){var U,Y;const{colModel:n,autoColSvc:i,selectionColSvc:r,eventSvc:o,gos:s}=e,a=n.getColDefCols();if(!(a!=null&&a.length))return;const d=n.getColDefColTree(),h=g7(d),m=[];let v=1e3,w=1e3;const R=X=>{const q=S7(X);vs(q.rowGroupIndex)&&q.rowGroup&&(q.rowGroupIndex=v++),vs(q.pivotIndex)&&q.pivot&&(q.pivotIndex=w++),m.push(q)};(U=i==null?void 0:i.getColumns())==null||U.forEach(R),(Y=r==null?void 0:r.getColumns())==null||Y.forEach(R),h==null||h.forEach(R),vf(e,{state:m},t);const L=(i==null?void 0:i.getColumns())??[],$=[...(r==null?void 0:r.getColumns())??[],...L,...a].map(X=>({colId:X.colId}));vf(e,{state:$,applyOrder:!0},t),o.dispatchEvent(ki(s,{type:"columnsReset",source:t}))}function _7(e,t){const{rowGroupColsSvc:n,pivotColsSvc:i,valueColsSvc:r,colModel:o,sortSvc:s,eventSvc:a}=e,d={rowGroupColumns:(n==null?void 0:n.columns.slice())??[],pivotColumns:(i==null?void 0:i.columns.slice())??[],valueColumns:(r==null?void 0:r.columns.slice())??[]},h=DS(e),m={};for(const v of h)m[v.colId]=v;return()=>{const v=(ie,re,J,ne)=>{const be=re.map(ne),ue=J.map(ne);if(Vy(be,ue))return;const ce=new Set(re);for(const Te of J)ce.delete(Te)||ce.add(Te);const Ie=[...ce];a.dispatchEvent({type:ie,columns:Ie,column:Ie.length===1?Ie[0]:null,source:t})},w=ie=>{const re=[];return o.forAllCols(J=>{const ne=m[J.getColId()];ne&&ie(ne,J)&&re.push(J)}),re},R=ie=>ie.getColId();v("columnRowGroupChanged",d.rowGroupColumns,(n==null?void 0:n.columns)??[],R),v("columnPivotChanged",d.pivotColumns,(i==null?void 0:i.columns)??[],R);const O=w((ie,re)=>{const J=ie.aggFunc!=null,ne=J!=re.isValueActive(),be=J&&ie.aggFunc!=re.getAggFunc();return ne||be});O.length>0&&pye(a,"columnValueChanged",O,t),rx(a,w((ie,re)=>ie.width!=re.getActualWidth()),!0,t),C7(a,w((ie,re)=>ie.pinned!=re.getPinned()),t),fye(a,w((ie,re)=>ie.hide==re.isVisible()),t);const X=w((ie,re)=>!d_(re.getSortDef(),{type:pm(ie.sortType),direction:U2(ie.sort)})||ie.sortIndex!=re.getSortIndex());X.length>0&&(s==null||s.dispatchSortChangedEvents(t,X));const q=DS(e);vye(h,q,t,o,a)}}function DS(e){const{colModel:t,rowGroupColsSvc:n,pivotColsSvc:i}=e,r=t.getColDefCols();if(vs(r)||!t.isAlive())return[];const o=n==null?void 0:n.columns,s=i==null?void 0:i.columns,a=[],d=m=>{var O;const v=m.isRowGroupActive()&&o?o.indexOf(m):null,w=m.isPivotActive()&&s?s.indexOf(m):null,R=m.isValueActive()?m.getAggFunc():null,L=m.getSortIndex()!=null?m.getSortIndex():null;a.push({colId:m.getColId(),width:m.getActualWidth(),hide:!m.isVisible(),pinned:m.getPinned(),sort:m.getSort(),sortType:(O=m.getSortDef())==null?void 0:O.type,sortIndex:L,aggFunc:R,rowGroup:m.isRowGroupActive(),rowGroupIndex:v,pivot:m.isPivotActive(),pivotIndex:w,flex:m.getFlex()??null})};t.forAllCols(m=>d(m));const h=new Map(t.getCols().map((m,v)=>[m.getColId(),v]));return a.sort((m,v)=>{const w=h.has(m.colId)?h.get(m.colId):-1,R=h.has(v.colId)?h.get(v.colId):-1;return w-R}),a}function S7(e){const t=(z,$)=>z??$??null,n=e.getColDef(),i=mf(t(n.sort,n.initialSort)),r=i.direction,o=i.type,s=t(n.sortIndex,n.initialSortIndex),a=t(n.hide,n.initialHide),d=t(n.pinned,n.initialPinned),h=t(n.width,n.initialWidth),m=t(n.flex,n.initialFlex);let v=t(n.rowGroupIndex,n.initialRowGroupIndex),w=t(n.rowGroup,n.initialRowGroup);v==null&&!w&&(v=null,w=null);let R=t(n.pivotIndex,n.initialPivotIndex),L=t(n.pivot,n.initialPivot);R==null&&!L&&(R=null,L=null);const O=t(n.aggFunc,n.initialAggFunc);return{colId:e.getColId(),sort:r,sortType:o,sortIndex:s,hide:a,pinned:d,width:h,flex:m,rowGroup:w,rowGroupIndex:v,pivot:L,pivotIndex:R,aggFunc:O}}function mye(e,t,n){if(!e.applyOrder||!e.state)return;const i=[];for(const r of e.state)r.colId!=null&&i.push(r.colId);yye(t.cols,i,t,n)}function yye(e,t,n,i){if(e==null)return;let r=[];const o={};for(const a of t){if(o[a])continue;const d=e.map[a];d&&(r.push(d),o[a]=!0)}let s=0;for(const a of e.list){const d=a.getColId();if(o[d]!=null)continue;d.startsWith(q2)?r.splice(s++,0,a):r.push(a)}if(r=b7(r,i),!x7(r,n.getColTree())){an(39);return}e.list=r}function vye(e,t,n,i,r){const o={};for(const m of t)o[m.colId]=m;const s={};for(const m of e)o[m.colId]&&(s[m.colId]=!0);const a=e.filter(m=>s[m.colId]),d=t.filter(m=>s[m.colId]),h=[];d.forEach((m,v)=>{const w=a==null?void 0:a[v];if(w&&w.colId!==m.colId){const R=i.getCol(w.colId);R&&h.push(R)}}),h.length&&r.dispatchEvent({type:"columnMoved",columns:h,column:h.length===1?h[0]:null,finished:!0,source:n})}var y4=(e,t,n,i)=>{const r=e[n.getId()],o=e[i.getId()],s=r!=null,a=o!=null;if(s&&a)return r-o;if(s)return-1;if(a)return 1;const d=t.indexOf(n),h=t.indexOf(i),m=d>=0,v=h>=0;return m&&v?d-h:m?-1:1},bye=class extends Yt{constructor(){super(...arguments),this.beanName="colModel",this.pivotMode=!1,this.ready=!1,this.changeEventsDispatching=!1}postConstruct(){this.pivotMode=this.gos.get("pivotMode"),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents","rowNumbers","hidePaddedHeaderRows"],e=>this.refreshAll(zb(e.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],this.recreateColumnDefs.bind(this)),this.addManagedPropertyListener("pivotMode",e=>this.setPivotMode(this.gos.get("pivotMode"),zb(e.source)))}createColsFromColDefs(e){var U,Y,X;const{beans:t}=this,{valueCache:n,colAutosize:i,rowGroupColsSvc:r,pivotColsSvc:o,valueColsSvc:s,visibleCols:a,eventSvc:d,groupHierarchyColSvc:h}=t,m=this.colDefs?_7(t,e):void 0;n==null||n.expire();const v=(U=this.colDefCols)==null?void 0:U.list,w=(Y=this.colDefCols)==null?void 0:Y.tree,R=oye(t,this.colDefs,!0,w,e);kS(t,(X=this.colDefCols)==null?void 0:X.tree,R.columnTree);const L=R.columnTree,O=R.treeDepth,z=g7(L),$={};for(const q of z)$[q.getId()]=q;this.colDefCols={tree:L,treeDepth:O,list:z,map:$},this.createColumnsForService([h],this.colDefCols,e),r==null||r.extractCols(e,v),o==null||o.extractCols(e,v),s==null||s.extractCols(e,v),this.ready=!0,this.changeEventsDispatching=!0,this.refreshCols(!0,e),this.changeEventsDispatching=!1,a.refresh(e),d.dispatchEvent({type:"columnEverythingChanged",source:e}),m&&(this.changeEventsDispatching=!0,m(),this.changeEventsDispatching=!1),d.dispatchEvent({type:"newColumnsLoaded",source:e}),e==="gridInitializing"&&(i==null||i.applyAutosizeStrategy())}refreshCols(e,t){var z;if(!this.colDefCols)return;const n=(z=this.cols)==null?void 0:z.tree;this.saveColOrder();const{autoColSvc:i,selectionColSvc:r,rowNumbersSvc:o,quickFilter:s,pivotResultCols:a,showRowGroupCols:d,rowAutoHeight:h,visibleCols:m,colViewport:v,eventSvc:w,formula:R}=this.beans,L=this.selectCols(a,this.colDefCols);R==null||R.setFormulasActive(L),this.createColumnsForService([i,r,o],L,t);const O=Dme(this.gos,this.showingPivotResult);(!e||O)&&this.restoreColOrder(L),this.positionLockedCols(L),d==null||d.refresh(),s==null||s.refreshCols(),this.setColSpanActive(),h==null||h.setAutoHeightActive(L),m.clear(),v.clear(),Vy(n,this.cols.tree)||w.dispatchEvent({type:"gridColumnsChanged"})}createColumnsForService(e,t,n){for(const i of e)i&&(i.createColumns(t,r=>{this.lastOrder=r(this.lastOrder),this.lastPivotOrder=r(this.lastPivotOrder)},n),i.addColumns(t))}selectCols(e,t){const n=(e==null?void 0:e.getPivotResultCols())??null;this.showingPivotResult=n!=null;const{map:i,list:r,tree:o,treeDepth:s}=n??t;return this.cols={list:r.slice(),map:{...i},tree:o.slice(),treeDepth:s},n&&(n.list.some(d=>{var h;return((h=this.cols)==null?void 0:h.map[d.getColId()])!==void 0})||(this.lastPivotOrder=null)),this.cols}getColsToShow(){if(!this.cols)return[];const{beans:e,showingPivotResult:t,cols:n}=this,{valueColsSvc:i,selectionColSvc:r}=e,o=this.isPivotMode()&&!t,s=r==null?void 0:r.isSelectionColumnEnabled(),a=Fme(e),d=i==null?void 0:i.columns;return n.list.filter(m=>{const v=PF(m);if(o){const w=d==null?void 0:d.includes(m);return v||w||s&&$y(m)||a&&im(m)}else return v||m.isVisible()})}refreshAll(e){this.ready&&(this.refreshCols(!1,e),this.beans.visibleCols.refresh(e))}setColsVisible(e,t=!1,n){vf(this.beans,{state:e.map(i=>({colId:typeof i=="string"?i:i.getColId(),hide:!t}))},n)}restoreColOrder(e){const t=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!t)return;const n=t.filter(v=>e.map[v.getId()]!=null);if(n.length===0)return;if(n.length===e.list.length){e.list=n;return}const i=v=>{const w=v.getOriginalParent();return w?w.getChildren().length>1?!0:i(w):!1};if(!n.some(v=>i(v))){const v=new Set(n);for(const w of e.list)v.has(w)||n.push(w);e.list=n;return}const r=new Map;for(let v=0;v<n.length;v++){const w=n[v];r.set(w,v)}const o=e.list.filter(v=>!r.has(v));if(o.length===0){e.list=n;return}const s=(v,w)=>{const R=w?w.getOriginalParent():v.getOriginalParent();if(!R)return null;let L=null,O=null;for(const z of R.getChildren())if(!(z===w||z===v)){if(z instanceof S0){const $=r.get(z);if($==null)continue;(L==null||L<$)&&(L=$,O=z);continue}z.forEachLeafColumn($=>{const U=r.get($);U!=null&&(L==null||L<U)&&(L=U,O=$)})}return O??s(v,R)},a=[],d=new Map;for(const v of o){const w=s(v,null);if(w==null){a.push(v);continue}const R=d.get(w);R===void 0?d.set(w,v):Array.isArray(R)?R.push(v):d.set(w,[R,v])}const h=new Array(e.list.length);let m=h.length-1;for(let v=a.length-1;v>=0;v--)h[m--]=a[v];for(let v=n.length-1;v>=0;v--){const w=n[v],R=d.get(w);if(R)if(Array.isArray(R))for(let L=R.length-1;L>=0;L--){const O=R[L];h[m--]=O}else h[m--]=R;h[m--]=w}e.list=h}positionLockedCols(e){e.list=b7(e.list,this.gos)}saveColOrder(){var e,t;this.showingPivotResult?this.lastPivotOrder=((e=this.cols)==null?void 0:e.list)??null:this.lastOrder=((t=this.cols)==null?void 0:t.list)??null}getColumnDefs(e){var t,n;return this.colDefCols&&((n=this.beans.colDefFactory)==null?void 0:n.getColumnDefs(this.colDefCols.list,this.showingPivotResult,this.lastOrder,((t=this.cols)==null?void 0:t.list)??[],e))}setColSpanActive(){var e;this.colSpanActive=!!((e=this.cols)!=null&&e.list.some(t=>t.getColDef().colSpan!=null))}isPivotMode(){return this.pivotMode}setPivotMode(e,t){if(e===this.pivotMode||(this.pivotMode=e,!this.ready))return;this.refreshCols(!1,t);const{visibleCols:n,eventSvc:i}=this.beans;n.refresh(t),i.dispatchEvent({type:"columnPivotModeChanged"})}isPivotActive(){var t;const e=(t=this.beans.pivotColsSvc)==null?void 0:t.columns;return this.pivotMode&&!!(e!=null&&e.length)}recreateColumnDefs(e){var n;if(!this.cols)return;(n=this.beans.autoColSvc)==null||n.updateColumns(e);const t=zb(e.source);this.createColsFromColDefs(t)}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){var e;kS(this.beans,(e=this.colDefCols)==null?void 0:e.tree),super.destroy()}getColTree(){var e;return((e=this.cols)==null?void 0:e.tree)??[]}getColDefColTree(){var e;return((e=this.colDefCols)==null?void 0:e.tree)??[]}getColDefCols(){var e;return((e=this.colDefCols)==null?void 0:e.list)??null}getCols(){var e;return((e=this.cols)==null?void 0:e.list)??[]}forAllCols(e){var o,s,a,d,h;const{pivotResultCols:t,autoColSvc:n,selectionColSvc:i,groupHierarchyColSvc:r}=this.beans;cw((o=this.colDefCols)==null?void 0:o.list,e)||cw((s=n==null?void 0:n.columns)==null?void 0:s.list,e)||cw((a=i==null?void 0:i.columns)==null?void 0:a.list,e)||cw((d=r==null?void 0:r.columns)==null?void 0:d.list,e)||cw((h=t==null?void 0:t.getPivotResultCols())==null?void 0:h.list,e)}getColsForKeys(e){return e?e.map(t=>this.getCol(t)).filter(t=>t!=null):[]}getColDefCol(e){var t;return(t=this.colDefCols)!=null&&t.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColById(e){var t;return((t=this.cols)==null?void 0:t.map[e])??null}getColFromCollection(e,t){if(t==null)return null;const{map:n,list:i}=t;if(typeof e=="string"&&n[e])return n[e];for(let a=0;a<i.length;a++)if(Mw(i[a],e))return i[a];const{autoColSvc:r,selectionColSvc:o,groupHierarchyColSvc:s}=this.beans;return(r==null?void 0:r.getColumn(e))??(o==null?void 0:o.getColumn(e))??(s==null?void 0:s.getColumn(e))??null}},E7=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let n;return typeof t!="number"?n=0:n=t+1,this.existingIds[e]=n,n}},Dx=class extends Yt{};function K1(e,t,n){return n&&e.addDestroyFunc(()=>t.destroyBean(n)),n??e}var Yn=null;function v4(e){return typeof(e==null?void 0:e.getGui)=="function"}var Z1=class{constructor(e){this.cssClassStates={},this.getGui=e}toggleCss(e,t){var i;if(!e)return;if(e.includes(" ")){const r=(e||"").split(" ");if(r.length>1){for(const o of r)this.toggleCss(o,t);return}}this.cssClassStates[e]!==t&&e.length&&((i=this.getGui())==null||i.classList.toggle(e,t),this.cssClassStates[e]=t)}},xye=0,Fx=class extends cc{constructor(e,t){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=xye++,this.cssManager=new Z1(()=>this.eGui),this.componentSelectors=new Map((t??[]).map(n=>[n.selector,n])),e&&this.setTemplate(e)}preConstruct(){var t,n;this.wireTemplate(this.getGui());const e="component-"+((n=(t=Object.getPrototypeOf(this))==null?void 0:t.constructor)==null?void 0:n.name);for(const i of this.css??[])this.beans.environment.addGlobalCSS(i,e)}wireTemplate(e,t){e&&this.gos&&(this.applyElementsToComponent(e),this.createChildComponentsFromTags(e,t))}getCompId(){return this.compId}getDataRefAttribute(e){return e.getAttribute?e.getAttribute(H9):null}applyElementsToComponent(e,t,n,i=null){if(t===void 0&&(t=this.getDataRefAttribute(e)),t){const r=this[t];if(r===Yn)this[t]=i??e;else{const o=n==null?void 0:n[t];if(!this.suppressDataRefValidation&&!o)throw new Error(`data-ref: ${t} on ${this.constructor.name} with ${r}`)}}}createChildComponentsFromTags(e,t){const n=[];for(const i of e.childNodes??[])n.push(i);for(const i of n){if(!(i instanceof HTMLElement))continue;const r=this.createComponentFromElement(i,o=>{const s=o.getGui();if(s)for(const a of i.attributes??[])s.setAttribute(a.name,a.value)},t);if(r){if(r.addItems&&i.children.length){this.createChildComponentsFromTags(i,t);const o=Array.prototype.slice.call(i.children);r.addItems(o)}this.swapComponentForNode(r,e,i)}else i.childNodes&&this.createChildComponentsFromTags(i,t)}}createComponentFromElement(e,t,n){const i=e.nodeName,r=this.getDataRefAttribute(e),o=i.indexOf("AG-")===0,s=o?this.componentSelectors.get(i):null;let a=null;if(s){const d=n&&r?n[r]:void 0;a=new s.component(d),a.setParentComponent(this),this.createBean(a,null,t)}else if(o)throw new Error(`selector: ${i}`);return this.applyElementsToComponent(e,r,n,a),a}swapComponentForNode(e,t,n){const i=e.getGui();t.replaceChild(i,n),t.insertBefore(document.createComment(n.nodeName),i),this.addDestroyFunc(this.destroyBean.bind(this,e))}activateTabIndex(e,t){const n=t??this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui());for(const i of e)i.setAttribute("tabindex",n.toString())}setTemplate(e,t,n){let i;typeof e=="string"||e==null?i=xF(e):i=ky(e),this.setTemplateFromElement(i,t,n)}setTemplateFromElement(e,t,n,i=!1){if(this.eGui=e,this.suppressDataRefValidation=i,t)for(let r=0;r<t.length;r++){const o=t[r];this.componentSelectors.set(o.selector,o)}this.wireTemplate(e,n)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}getContainerAndElement(e,t){let n=t;return e==null?null:(n||(n=this.eGui),_F(e)?{element:e,parent:n}:{element:e.getGui(),parent:n})}prependChild(e,t){const{element:n,parent:i}=this.getContainerAndElement(e,t)||{};!n||!i||i.insertAdjacentElement("afterbegin",n)}appendChild(e,t){const{element:n,parent:i}=this.getContainerAndElement(e,t)||{};!n||!i||i.appendChild(n)}isDisplayed(){return this.displayed}setVisible(e,t={}){if(e!==this.visible){this.visible=e;const{skipAriaHidden:n}=t;Yge(this.eGui,e,{skipAriaHidden:n})}}setDisplayed(e,t={}){if(e!==this.displayed){this.displayed=e;const{skipAriaHidden:n}=t;$o(this.eGui,e,{skipAriaHidden:n});const i={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(i)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),super.destroy()}addGuiEventListener(e,t,n){this.eGui.addEventListener(e,t,n),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,t))}addCss(e){this.cssManager.toggleCss(e,!0)}removeCss(e){this.cssManager.toggleCss(e,!1)}toggleCss(e,t){this.cssManager.toggleCss(e,t)}registerCSS(e){this.css||(this.css=[]),this.css.push(e)}},ra=class extends Fx{};function R7(e){return typeof e=="object"&&!!e.component}function wye(e,t){return new Fr(n=>{n(window.setInterval(e,t))})}var Fr=class Cw{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(n=>this.onDone(n),n=>this.onReject(n))}static all(t){return t.length?new Cw(n=>{let i=t.length;const r=new Array(i);t.forEach((o,s)=>{o.then(a=>{r[s]=a,i--,i===0&&n(r)})})}):Cw.resolve()}static resolve(t=null){return new Cw(n=>n(t))}then(t){return new Cw(n=>{this.status===1?n(t(this.resolution)):this.waiters.push(i=>n(t(i)))})}onDone(t){this.status=1,this.resolution=t;for(const n of this.waiters)n(t)}onReject(t){}};function Cye(e){return e?e.prototype&&"getGui"in e.prototype:!1}function A7(e,t,n,i){const{name:r}=n;let o,s,a,d,h,m;if(t){const v=t,w=v[r+"Selector"],R=w?w(i):null,L=O=>{typeof O=="string"?o=O:O!=null&&O!==!0&&(e.isFrameworkComponent(O)?a=O:s=O)};R?(L(R.component),d=R.params,h=R.popup,m=R.popupPosition):L(v[r])}return{compName:o,jsComp:s,fwComp:a,paramsFromSelector:d,popupFromSelector:h,popupPositionFromSelector:m}}var _ye=class extends Yt{constructor(){super(...arguments),this.beanName="userCompFactory"}wireBeans(e){this.agCompUtils=e.agCompUtils,this.registry=e.registry,this.frameworkCompWrapper=e.frameworkCompWrapper,this.gridOptions=e.gridOptions}getCompDetailsFromGridOptions(e,t,n,i=!1){return this.getCompDetails(this.gridOptions,e,t,n,i)}getCompDetails(e,t,n,i,r=!1){var Y;const{name:o,cellRenderer:s}=t;let{compName:a,jsComp:d,fwComp:h,paramsFromSelector:m,popupFromSelector:v,popupPositionFromSelector:w}=A7(this.beans.frameworkOverrides,e,t,i),R,L;const O=X=>{const q=this.registry.getUserComponent(o,X);q&&(d=q.componentFromFramework?void 0:q.component,h=q.componentFromFramework?q.component:void 0,R=q.params,L=q.processParams)};if(a!=null&&O(a),d==null&&h==null&&n!=null&&O(n),d&&s&&!Cye(d)&&(d=(Y=this.agCompUtils)==null?void 0:Y.adaptFunction(t,d)),!d&&!h){const{validation:X}=this.beans;r&&(a!==n||!n)?a?X!=null&&X.isProvidedUserComp(a)||Do(50,{compName:a}):n?X||Do(260,{...this.gos.getModuleErrorParams(),propName:o,compName:n}):Do(216,{name:o}):n&&!X&&Do(146,{comp:n});return}const z=this.mergeParams(e,t,i,m,R,L),$=d==null,U=d??h;return{componentFromFramework:$,componentClass:U,params:z,type:t,popupFromSelector:v,popupPositionFromSelector:w,newAgStackInstance:()=>this.newAgStackInstance(U,$,z,t)}}newAgStackInstance(e,t,n,i){var a;const r=!t;let o;r?o=new e:o=this.frameworkCompWrapper.wrap(e,i.mandatoryMethods,i.optionalMethods,i),this.createBean(o);const s=(a=o.init)==null?void 0:a.call(o,n);return s==null?Fr.resolve(o):s.then(()=>o)}mergeParams(e,t,n,i=null,r,o){const s={...n,...r},a=e,d=a==null?void 0:a[t.name+"Params"];if(typeof d=="function"){const h=d(n);ac(s,h)}else typeof d=="object"&&ac(s,d);return ac(s,i),o?o(s):s}},Sye={name:"dateComponent",mandatoryMethods:["getDate","setDate"],optionalMethods:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","refresh"]},Eye={name:"dragAndDropImageComponent",mandatoryMethods:["setIcon","setLabel"]},Rye={name:"headerComponent",optionalMethods:["refresh"]},Aye={name:"innerHeaderComponent"},Tye={name:"innerHeaderGroupComponent"},kye={name:"headerGroupComponent"},Pye={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},Dye={name:"loadingCellRenderer",cellRenderer:!0},Fye={name:"cellEditor",mandatoryMethods:["getValue"],optionalMethods:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},Mye={name:"tooltipComponent"},DF={name:"filter",mandatoryMethods:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethods:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},Iye={name:"floatingFilterComponent",mandatoryMethods:["onParentModelChanged"],optionalMethods:["afterGuiAttached","refresh"]},Lye={name:"fullWidthCellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},Oye={name:"loadingCellRenderer",cellRenderer:!0},zye={name:"groupRowRenderer",optionalMethods:["afterGuiAttached"],cellRenderer:!0},Nye={name:"detailCellRenderer",optionalMethods:["refresh"],cellRenderer:!0};function Bye(e,t){return e.getCompDetailsFromGridOptions(Eye,"agDragAndDropImage",t,!0)}function Gye(e,t,n){return e.getCompDetails(t,Rye,"agColumnHeader",n)}function jye(e,t,n){return e.getCompDetails(t,Aye,void 0,n)}function Hye(e,t){const n=t.columnGroup.getColGroupDef();return e.getCompDetails(n,kye,"agColumnGroupHeader",t)}function Vye(e,t,n){return e.getCompDetails(t,Tye,void 0,n)}function $ye(e,t){return e.getCompDetailsFromGridOptions(Lye,void 0,t,!0)}function Wye(e,t){return e.getCompDetailsFromGridOptions(Oye,"agLoadingCellRenderer",t,!0)}function Uye(e,t){return e.getCompDetailsFromGridOptions(zye,"agGroupRowRenderer",t,!0)}function qye(e,t){return e.getCompDetailsFromGridOptions(Nye,"agDetailCellRenderer",t,!0)}function b4(e,t,n){return e.getCompDetails(t,Pye,void 0,n)}function x4(e,t,n){return e.getCompDetails(t,Dye,"agSkeletonCellRenderer",n,!0)}function T7(e,t,n){return e.getCompDetails(t,Fye,"agCellEditor",n,!0)}function Kye(e,t,n,i){const r=t.filter;return R7(r)&&(t={filter:r.component,filterParams:t.filterParams}),e.getCompDetails(t,DF,i,n,!0)}function Zye(e,t,n){return e.getCompDetails(t,Sye,"agDateInput",n,!0)}function Yye(e,t){return e.getCompDetails(t.colDef,Mye,"agTooltipComponent",t,!0)}function Xye(e,t,n,i){return e.getCompDetails(t,Iye,i,n)}function k7(e,t){return A7(e,t,DF)}function SA(e,t,n){return e.mergeParams(t,DF,n)}function c1(e){const t=e;return(t==null?void 0:t.getFrameworkComponentInstance)!=null?t.getFrameworkComponentInstance():e}function Jye(e){return typeof e=="object"&&!!e.getComp}var kt={BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESCAPE:"Escape",SPACE:" ",LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",DELETE:"Delete",F2:"F2",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",PAGE_HOME:"Home",PAGE_END:"End",A:"KeyA",C:"KeyC",D:"KeyD",V:"KeyV",X:"KeyX",Y:"KeyY",Z:"KeyZ"},Qye=65,eve=67,tve=86,nve=68,ive=90,rve=89;function P7(e){const{keyCode:t}=e;let n;switch(t){case Qye:n=kt.A;break;case eve:n=kt.C;break;case tve:n=kt.V;break;case nve:n=kt.D;break;case ive:n=kt.Z;break;case rve:n=kt.Y;break;default:n=e.code}return n}var FF=class extends Fx{isPopup(){return!0}setParentComponent(e){e.addCss("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;(e==null?void 0:e.isAlive())&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},EA,RA,AA,TA,kk,Pk,kA;function Wy(){return EA===void 0&&(EA=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),EA}function d1(){return RA===void 0&&(RA=/(firefox)/i.test(navigator.userAgent)),RA}function D7(){return AA===void 0&&(AA=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),AA}function i0(){return TA===void 0&&(TA=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),TA}function Dk(e){if(!e)return null;const t=e.tabIndex,n=e.getAttribute("tabIndex");return t===-1&&(n===null||n===""&&!d1())?null:t.toString()}function ove(){if(kA!==void 0)return kA;if(!document.body)return-1;let e=1e6;const t=d1()?6e6:1e9,n=document.createElement("div");for(document.body.appendChild(n);;){const i=e*2;if(n.style.height=i+"px",i>t||n.clientHeight!==i)break;e=i}return n.remove(),kA=e,e}function sve(){return Pk==null&&F7(),Pk}function F7(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let n=t.offsetWidth-t.clientWidth;n===0&&t.clientWidth===0&&(n=null),t.parentNode&&t.remove(),n!=null&&(Pk=n,kk=n===0)}function M7(){return kk==null&&F7(),kk}var Fk=!1,FS=0;function ave(e){FS>0||(e.addEventListener("keydown",MS),e.addEventListener("mousedown",MS))}function lve(e){FS>0||(e.removeEventListener("keydown",MS),e.removeEventListener("mousedown",MS))}function MS(e){const t=Fk,n=e.type==="keydown";n&&(e.ctrlKey||e.metaKey||e.altKey)||t!==n&&(Fk=n)}function uve(e){const t=Il(e);return ave(t),FS++,()=>{FS--,lve(t)}}function I7(){return Fk}function Nb(e,t,n=!1){const i=Zge;let r=N9;t&&(r+=", "+t),n&&(r+=', [tabindex="-1"]');const o=Array.prototype.slice.apply(e.querySelectorAll(i)).filter(d=>Sm(d)),s=Array.prototype.slice.apply(e.querySelectorAll(r));return s.length?((d,h)=>d.filter(m=>h.indexOf(m)===-1))(o,s):o}function m0(e,t=!1,n=!1,i=!1){const r=Nb(e,i?".ag-tab-guard":null,n),o=t?Wo(r):r[0];return o?(o.focus({preventScroll:!0}),!0):!1}function E0(e,t,n,i){const r=Nb(t,n?':not([tabindex="-1"])':null),o=Os(e);let s;n?s=r.findIndex(d=>d.contains(o)):s=r.indexOf(o);const a=s+(i?-1:1);return a<0||a>=r.length?null:r[a]}function L7(e,t=5){let n=0;for(;e&&Dk(e)===null&&++n<=t;)e=e.parentElement;return Dk(e)===null?null:e}var cve="ag-focus-managed",O7=class extends cc{constructor(e,t={isStopPropagation:()=>!1,stopPropagation:()=>{}},n={}){super(),this.eFocusable=e,this.stopPropagationCallbacks=t,this.callbacks=n,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:i=>{if(i.defaultPrevented)return;const r=E0(this.beans,this.eFocusable,!1,i.shiftKey);r&&(r.focus(),i.preventDefault())},...n}}postConstruct(){const{eFocusable:e,callbacks:{onFocusIn:t,onFocusOut:n}}=this;e.classList.add(cve),this.addKeyDownListeners(e),t&&this.addManagedElementListeners(e,{focusin:t}),n&&this.addManagedElementListeners(e,{focusout:n})}addKeyDownListeners(e){this.addManagedElementListeners(e,{keydown:t=>{if(t.defaultPrevented||this.stopPropagationCallbacks.isStopPropagation(t))return;const{callbacks:n}=this;if(n.shouldStopEventPropagation(t)){this.stopPropagationCallbacks.stopPropagation(t);return}t.key===kt.TAB?n.onTabKeyDown(t):n.handleKeyDown&&n.handleKeyDown(t)}})}},Bb={TAB_GUARD:"ag-tab-guard",TAB_GUARD_TOP:"ag-tab-guard-top",TAB_GUARD_BOTTOM:"ag-tab-guard-bottom"},z7=class extends cc{constructor(e,t){super(),this.stopPropagationCallbacks=t,this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:n,eTopGuard:i,eBottomGuard:r,focusTrapActive:o,forceFocusOutWhenTabGuardsAreEmpty:s,isFocusableContainer:a,focusInnerElement:d,onFocusIn:h,onFocusOut:m,shouldStopEventPropagation:v,onTabKeyDown:w,handleKeyDown:R,isEmpty:L,eFocusableElement:O}=e;this.comp=n,this.eTopGuard=i,this.eBottomGuard=r,this.providedFocusInnerElement=d,this.eFocusableElement=O,this.focusTrapActive=!!o,this.forceFocusOutWhenTabGuardsAreEmpty=!!s,this.isFocusableContainer=!!a,this.providedFocusIn=h,this.providedFocusOut=m,this.providedShouldStopEventPropagation=v,this.providedOnTabKeyDown=w,this.providedHandleKeyDown=R,this.providedIsEmpty=L}postConstruct(){this.createManagedBean(new O7(this.eFocusableElement,this.stopPropagationCallbacks,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards();for(const e of[this.eTopGuard,this.eBottomGuard])this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)})}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&(this.providedIsEmpty?this.providedIsEmpty():Nb(this.eFocusableElement,".ag-tab-guard").length===0)){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;!(this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t))&&this.forceFocusOutWhenTabGuardsAreEmpty&&this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}findNextElementOutsideAndFocus(e){var d;const t=Il(this.beans),n=Nb(t.body,null,!0),i=n.indexOf(e?this.eTopGuard:this.eBottomGuard);if(i===-1)return;let r,o;e?(r=0,o=i):(r=i+1,o=n.length);const s=n.slice(r,o),a=this.gos.get("tabIndex");s.sort((h,m)=>{const v=Number.parseInt(h.getAttribute("tabindex")||"0"),w=Number.parseInt(m.getAttribute("tabindex")||"0");return w===a?1:v===a?-1:v===0?1:w===0?-1:v-w}),(d=s[e?s.length-1:0])==null||d.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const n=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),n&&(n.focus(),e.preventDefault())}focusInnerElement(e=!1){const t=Nb(this.eFocusableElement);return this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(-1,1)),t.length?(t[e?t.length-1:0].focus({preventScroll:!0}),!0):!1}getNextFocusableElement(e){return E0(this.beans,this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},dve=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.includes("x"),this.scrollVertically=e.scrollAxis.includes("y"),this.scrollByTick=e.scrollByTick??20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}get scrolling(){return this.tickingInterval!==null}check(e,t=!1){const n=t||this.shouldSkipVerticalScroll();if(n&&this.shouldSkipHorizontalScroll())return;const i=this.scrollContainer.getBoundingClientRect(),r=this.scrollByTick;this.tickLeft=e.clientX<i.left+r,this.tickRight=e.clientX>i.right-r,this.tickUp=e.clientY<i.top+r&&!n,this.tickDown=e.clientY>i.bottom-r&&!n,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},N7="ag-resizer-wrapper",by=(e,t)=>({tag:"div",ref:`${e}Resizer`,cls:`ag-resizer ag-resizer-${t}`}),hve={tag:"div",cls:N7,children:[by("eTopLeft","topLeft"),by("eTop","top"),by("eTopRight","topRight"),by("eRight","right"),by("eBottomRight","bottomRight"),by("eBottom","bottom"),by("eBottomLeft","bottomLeft"),by("eLeft","left")]},fve=class extends cc{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config={popup:!1,...t}}wireBeans(e){this.popupSvc=e.popupSvc,this.dragSvc=e.dragSvc}center(e){const{clientHeight:t,clientWidth:n}=this.offsetParent,i=n/2-this.getWidth()/2,r=t/2-this.getHeight()/2;this.offsetElement(i,r,e)}initialisePosition(e){if(this.positioned)return;const{centered:t,forcePopupParentAsOffsetParent:n,minWidth:i,width:r,minHeight:o,height:s,x:a,y:d}=this.config;this.offsetParent||this.setOffsetParent();let h=0,m=0;const v=Sm(this.element);if(v){const w=this.findBoundaryElement(),R=window.getComputedStyle(w);if(R.minWidth!=null){const L=w.offsetWidth-this.element.offsetWidth;m=Number.parseInt(R.minWidth,10)-L}if(R.minHeight!=null){const L=w.offsetHeight-this.element.offsetHeight;h=Number.parseInt(R.minHeight,10)-L}}if(this.minHeight=o||h,this.minWidth=i||m,r&&this.setWidth(r),s&&this.setHeight(s),(!r||!s)&&this.refreshSize(),t)this.center(e);else if(a||d)this.offsetElement(a,d,e);else if(v&&n){let w=this.boundaryEl,R=!0;if(w||(w=this.findBoundaryElement(),R=!1),w){const L=Number.parseFloat(w.style.top),O=Number.parseFloat(w.style.left);R?this.offsetElement(Number.isNaN(O)?0:O,Number.isNaN(L)?0:L,e):this.setPosition(O,L)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){var i,r;if(!this.config.popup||e===this.movable)return;this.movable=e;const n=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?((i=this.dragSvc)==null||i.addDragSource(n),this.moveElementDragListener=n):((r=this.dragSvc)==null||r.removeDragSource(n),this.moveElementDragListener=void 0)}setResizable(e){var t;if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}for(const n of Object.keys(e)){const i=!!e[n],r=this.getResizerElement(n),o={dragStartPixels:0,eElement:r,onDragStart:s=>this.onResizeStart(s,n),onDragging:this.onResize.bind(this),onDragStop:s=>this.onResizeEnd(s,n)};(i||!this.isAlive()&&!i)&&(i?((t=this.dragSvc)==null||t.addDragSource(o),this.resizeListeners.push(o),r.style.pointerEvents="all"):r.style.pointerEvents="none",this.resizable[n]=i)}}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,n=this.element;let i=!1;if(typeof e=="string"&&e.includes("%"))Dw(n,e),e=B9(n),i=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const r=this.getAvailableHeight();r&&e>r&&(e=r)}this.getHeight()!==e&&(i?(n.style.maxHeight="unset",n.style.minHeight="unset"):t?Dw(n,e):(n.style.height=`${e}px`,n.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:Number.parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:n}=this.offsetParent;if(!n)return null;const i=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),o=e?this.position.y:i.top,s=e?0:r.top;let a=0;if(t){const h=this.element.parentElement;if(h){const{bottom:m}=h.getBoundingClientRect();a=m-i.bottom}}return n+s-o-a}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:n}=this.config;let i=!1;if(typeof e=="string"&&e.includes("%"))Mp(t,e),e=xS(t),i=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:r}=this.offsetParent,o=n?this.position.x:this.element.getBoundingClientRect().left;r&&e+o>r&&(e=r-o)}this.getWidth()!==e&&(i?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?Mp(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:Number.parseFloat(e)))}offsetElement(e=0,t=0,n){var o;const{forcePopupParentAsOffsetParent:i}=this.config,r=i?this.boundaryEl:this.element;r&&((o=this.popupSvc)==null||o.positionPopup({ePopup:r,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t}),postProcessCallback:n}),this.setPosition(Number.parseFloat(r.style.left),Number.parseFloat(r.style.top)))}constrainSizeToAvailableHeight(e){var n,i;if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const r=this.getAvailableHeight();this.element.style.setProperty("max-height",`${r}px`)};e&&this.popupSvc?((n=this.resizeObserverSubscriber)==null||n.call(this),this.resizeObserverSubscriber=Em(this.beans,(i=this.popupSvc)==null?void 0:i.getPopupParent(),t)):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:n,isTop:i,anywhereWithin:r,topBuffer:o}=e,s=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y,d=this.shouldSkipX(t,!!n,!!r,s)?0:s,h=this.shouldSkipY(t,!!i,o,a)?0:a;return{movementX:d,movementY:h}}shouldSkipX(e,t,n,i){const r=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),s=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:r.left;let d=a<=0&&o.left>=e.clientX||o.right<=e.clientX&&o.right<=s.right;return d?!0:(t?d=i<0&&e.clientX>a+o.left||i>0&&e.clientX<a+o.left:n?d=i<0&&e.clientX>s.right||i>0&&e.clientX<a+o.left:d=i<0&&e.clientX>s.right||i>0&&e.clientX<s.right,d)}shouldSkipY(e,t,n=0,i){const r=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),s=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:r.top;let d=a<=0&&o.top>=e.clientY||o.bottom<=e.clientY&&o.bottom<=s.bottom;return d?!0:(t?d=i<0&&e.clientY>a+o.top+n||i>0&&e.clientY<a+o.top:d=i<0&&e.clientY>s.bottom||i>0&&e.clientY<s.bottom,d)}createResizeMap(){const e=t=>({element:this.element.querySelector(`[data-ref=${t}Resizer]`)});this.resizerMap={topLeft:e("eTopLeft"),top:e("eTop"),topRight:e("eTopRight"),right:e("eRight"),bottomRight:e("eBottomRight"),bottom:e("eBottom"),bottomLeft:e("eBottomLeft"),left:e("eLeft")}}addResizers(){if(this.resizersAdded)return;const e=this.element;e&&(e.appendChild(ky(hve)),this.createResizeMap(),this.resizersAdded=!0)}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(`.${N7}`);e==null||e.remove(),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:n,forcePopupParentAsOffsetParent:i}=this.config;!n&&!i&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(n=>!n.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,n=0;for(const i of e){const r=!!i.style.flex&&i.style.flex!=="0 0 auto";if(i===this.element)continue;let o=this.minHeight||0,s=this.minWidth||0;if(r){const a=window.getComputedStyle(i);a.minHeight&&(o=Number.parseInt(a.minHeight,10)),a.minWidth&&(s=Number.parseInt(a.minWidth,10))}else o=i.offsetHeight,s=i.offsetWidth;t+=o,n+=s}return{height:t,width:n}}applySizeToSiblings(e){let t=null;const n=this.getSiblings();if(n){for(let i=0;i<n.length;i++){const r=n[i];r!==t&&(e?r.style.height=`${r.offsetHeight}px`:r.style.width=`${r.offsetWidth}px`,r.style.flex="0 0 auto",r===this.element&&(t=n[i+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:n}=this.config,{isTop:i,isRight:r,isBottom:o,isLeft:s}=this.currentResizer,a=r||s,d=o||i,{movementX:h,movementY:m}=this.calculateMouseMovement({e,isLeft:s,isTop:i}),v=this.position.x,w=this.position.y;let R=0,L=0;if(a&&h){const O=s?-1:1,z=this.getWidth(),$=z+h*O;let U=!1;s&&(R=z-$,(v+R<=0||$<=this.minWidth)&&(U=!0,R=0)),U||this.setWidth($)}if(d&&m){const O=i?-1:1,z=this.getHeight(),$=z+m*O;let U=!1;i?(L=z-$,(w+L<=0||$<=this.minHeight)&&(U=!0,L=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&z<$&&this.getMinSizeOfSiblings().height+$>this.element.parentElement.offsetHeight&&(U=!0),U||this.setHeight($)}this.updateDragStartPosition(e.clientX,e.clientY),((t||n)&&R||L)&&this.offsetElement(v+R,w+L)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:n}=this.position;let i;this.config.calculateTopBuffer&&(i=this.config.calculateTopBuffer());const{movementX:r,movementY:o}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:i});this.offsetElement(t+r,n+o),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent&&this.popupSvc?this.offsetParent=this.popupSvc.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){var e;for(;this.resizeListeners.length;){const t=this.resizeListeners.pop();(e=this.dragSvc)==null||e.removeDragSource(t)}}destroy(){var e;super.destroy(),this.moveElementDragListener&&((e=this.dragSvc)==null||e.removeDragSource(this.moveElementDragListener)),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},MF="T",pve=new RegExp(`[${MF} ]`),gve=new RegExp(`^\\d{4}-\\d{2}-\\d{2}(${MF}\\d{2}:\\d{2}:\\d{2}\\D?)?`);function Rp(e,t){return e.toString().padStart(t,"0")}function Ad(e,t=!0,n=MF){if(!e)return null;let i=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(r=>Rp(r,2)).join("-");return t&&(i+=n+[e.getHours(),e.getMinutes(),e.getSeconds()].map(r=>Rp(r,2)).join(":")),i}function IC(e,t=!0){return e?t?[String(e.getFullYear()),String(e.getMonth()+1),Rp(e.getDate(),2),Rp(e.getHours(),2),`:${Rp(e.getMinutes(),2)}`,`:${Rp(e.getSeconds(),2)}`]:[e.getFullYear(),e.getMonth()+1,Rp(e.getDate(),2)].map(String):null}var PA=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"},w4=["January","February","March","April","May","June","July","August","September","October","November","December"],DA=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Mk(e,t){if(t==null)return Ad(e,!1);const n=Rp(e.getFullYear(),4),i={YYYY:()=>n.slice(n.length-4,n.length),YY:()=>n.slice(n.length-2,n.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>w4[e.getMonth()],MMM:()=>w4[e.getMonth()].slice(0,3),MM:()=>Rp(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${PA(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${PA(e.getDate())}`,DD:()=>Rp(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>DA[e.getDay()],ddd:()=>DA[e.getDay()].slice(0,3),dd:()=>DA[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${PA(e.getDay())}`,d:()=>`${e.getDay()}`},r=new RegExp(Object.keys(i).join("|"),"g");return t.replace(r,o=>o in i?i[o]():o)}function f_(e,t=!1){return!!Hc(e,t)}function mve(e){return f_(e,!0)}function Hc(e,t=!1,n){if(!e||!n&&!gve.test(e))return null;const[i,r]=e.split(pve);if(!i)return null;const o=i.split("-").map(R=>Number.parseInt(R,10));if(o.filter(R=>!isNaN(R)).length!==3)return null;const[s,a,d]=o,h=new Date(s,a-1,d);if(h.getFullYear()!==s||h.getMonth()!==a-1||h.getDate()!==d||!r&&t)return null;if(!r||r==="00:00:00")return h;const[m,v,w]=r.split(":").map(R=>Number.parseInt(R,10));if(m>=0&&m<24)h.setHours(m);else if(t)return null;if(v>=0&&v<60)h.setMinutes(v);else if(t)return null;if(w>=0&&w<60)h.setSeconds(w);else if(t)return null;return h}function Ik(e){const{inputValue:t,allSuggestions:n,hideIrrelevant:i,filterByPercentageOfBestMatch:r}=e;let o=(n??[]).map((d,h)=>({value:d,relevance:yve(t,d),idx:h}));if(o.sort((d,h)=>d.relevance-h.relevance),i&&(o=o.filter(d=>d.relevance<Math.max(d.value.length,t.length))),o.length>0&&r&&r>0){const h=o[0].relevance*r;o=o.filter(m=>h-m.relevance<0)}const s=[],a=[];for(const d of o)s.push(d.value),a.push(d.idx);return{values:s,indices:a}}function yve(e,t){const n=e.length,i=t.length;if(i===0)return n||0;let r=e.toLocaleLowerCase(),o=t.toLocaleLowerCase(),s;e.length<t.length&&(s=o,o=r,r=s,s=t,t=e,e=s);let a=new Uint16Array(i+1),d=new Uint16Array(i+1);for(let v=0;v<=i;v++)a[v]=v;let h=0;const m=n/2-10;for(let v=1;v<=n;v++){const w=e[v-1],R=r[v-1];d[0]=v;for(let L=1;L<=i;L++){const O=t[L-1],z=o[L-1];if(R!==z){const $=d[L-1],U=a[L],Y=a[L-1];let X=$<U?$:U;Y<X&&(X=Y),d[L]=X+1|0;continue}if(h++,w===O&&h++,v>1&&L>1){const $=e[v-2],U=r[v-2],Y=t[L-2],X=o[L-2];U===X&&(h++,$===Y&&h++)}v<m&&h++,d[L]=a[L-1]}s=a,a=d,d=s}return a[i]/(h+1)}function B7(e){var n;return e.altKey||e.ctrlKey||e.metaKey?!1:((n=e.key)==null?void 0:n.length)===1}var vve=".ag-label{white-space:nowrap}:where(.ag-ltr) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-label-align-right) .ag-label{order:1}:where(.ag-ltr) :where(.ag-label-align-right) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) :where(.ag-label-align-right) .ag-label{margin-right:var(--ag-spacing)}.ag-label-align-right>*{flex:none}.ag-label-align-top{align-items:flex-start;flex-direction:column;>*{align-self:stretch}}.ag-label-ellipsis{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-label-align-top) .ag-label{margin-bottom:calc(var(--ag-spacing)*.5)}",bve=class extends Fx{constructor(e,t,n){super(t,n),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{},this.registerCSS(vve)}postConstruct(){this.addCss("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:n,labelAlignment:i,disabled:r,labelEllipsis:o}=this.config;r!=null&&this.setDisabled(r),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),n!=null&&this.setLabelWidth(n),o!=null&&this.setLabelEllipsis(o),this.setLabelAlignment(i||this.labelAlignment),this.refreshLabel()}refreshLabel(){const{label:e,eLabel:t}=this;jc(t),typeof e=="string"?t.innerText=e+this.labelSeparator:e&&t.appendChild(e),e===""?($o(t,!1),f0(t,"presentation")):($o(t,!0),f0(t,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){const e=this.eLabel;return e.id=e.id||`ag-${this.getCompId()}-label`,e.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){const n=this.getGui().classList;return n.toggle("ag-label-align-left",e==="left"),n.toggle("ag-label-align-right",e==="right"),n.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(_S(this.eLabel,e),this)}setDisabled(e){e=!!e;const t=this.getGui();return o1(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},G7=class extends bve{constructor(e,t,n,i){super(e,t,n),this.className=i}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:n,ariaLabel:i}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),n!=null&&this.onValueChange(n),i!=null&&this.setAriaLabel(i),this.className&&this.addCss(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),n=this.getLabel();n==null||n==""||Lge(e)!==null?r1(e,""):r1(e,t??"")}setAriaLabel(e){return nx(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return Mp(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}};function xve(e){return{tag:"div",role:"presentation",children:[{tag:"div",ref:"eLabel",cls:"ag-input-field-label"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-input-wrapper",role:"presentation",children:[{tag:e,ref:"eInput",cls:"ag-input-field-input"}]}]}}var qv=class extends G7{constructor(e,t,n="text",i="input"){super(e,(e==null?void 0:e.template)??xve(i),[],t),this.inputType=n,this.displayFieldTag=i,this.eLabel=Yn,this.eWrapper=Yn,this.eInput=Yn}postConstruct(){super.postConstruct(),this.setInputType(this.inputType);const{eLabel:e,eWrapper:t,eInput:n,className:i}=this;e.classList.add(`${i}-label`),t.classList.add(`${i}-input-wrapper`),n.classList.add(`${i}-input`),this.addCss("ag-input-field"),n.id=n.id||`ag-${this.getCompId()}-input`;const{inputName:r,inputWidth:o,inputPlaceholder:s,autoComplete:a,tabIndex:d}=this.config;r!=null&&this.setInputName(r),o!=null&&this.setInputWidth(o),s!=null&&this.setInputPlaceholder(s),a!=null&&this.setAutoComplete(a),this.addInputListeners(),this.activateTabIndex([n],d)}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(e){this.displayFieldTag==="input"&&(this.inputType=e,Nc(this.eInput,"type",e))}getInputElement(){return this.eInput}getWrapperElement(){return this.eWrapper}setInputWidth(e){return _S(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){const t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return Nc(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return nx(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return o1(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)Nc(this.eInput,"autocomplete",null);else{const t=typeof e=="string"?e:"off";Nc(this.eInput,"autocomplete",t)}return this}},IF=class extends qv{constructor(e,t="ag-checkbox",n="checkbox"){super(e,t,n),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t,name:n}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t),n!=null&&this.setName(n)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){const t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){if(this.isSelected()===e)return;this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0;const n=this.eInput;n.checked=e,n.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue)}dispatchChange(e,t,n){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:n});const i=this.getInputElement();this.eventSvc.dispatchEvent({type:"checkboxChanged",id:i.id,name:i.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),n=this.selected=e.target.checked;this.refreshSelectedClass(n),this.dispatchChange(n,t,e)}refreshSelectedClass(e){const t=this.eWrapper.classList;t.toggle("ag-checked",e===!0),t.toggle("ag-indeterminate",e==null)}},LF={selector:"AG-CHECKBOX",component:IF},wve=class extends IF{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){const t=this.eInput;e.selected&&e.name&&t.name&&t.name===e.name&&e.id&&t.id!==e.id&&this.setValue(!1,!0)}},R0=class extends qv{constructor(e,t="ag-text-field",n="text"){super(e,t,n)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){const n=this.eInput;return n.value!==e&&(n.value=Dn(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}setCustomValidity(e){const t=this.eInput,n=e.length>0;t.setCustomValidity(e),n&&t.reportValidity(),yF(t,n)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`),t=n=>{B7(n)&&n.key&&!e.test(n.key)&&n.preventDefault()};this.addManagedListeners(this.eInput,{keydown:t,paste:n=>{var r;const i=(r=n.clipboardData)==null?void 0:r.getData("text");i!=null&&i.split("").some(o=>!e.test(o))&&n.preventDefault()}})}},K2={selector:"AG-INPUT-TEXT-FIELD",component:R0},Cve=class extends qv{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const n=super.setValue(e,t);return this.eInput.value=e,n}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},_ve={selector:"AG-INPUT-TEXT-AREA",component:Cve},OF=class extends R0{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct();const e=this.eInput;this.addManagedListeners(e,{blur:()=>{const o=Number.parseFloat(e.value),s=isNaN(o)?"":this.normalizeValue(o.toString());this.value!==s&&this.setValue(s)},wheel:this.onWheel.bind(this)}),e.step="any";const{precision:t,min:n,max:i,step:r}=this.config;typeof t=="number"&&this.setPrecision(t),typeof n=="number"&&this.setMin(n),typeof i=="number"&&this.setMax(i),typeof r=="number"&&this.setStep(r)}onWheel(e){Os(this.beans)===this.eInput&&e.preventDefault()}normalizeValue(e){return e===""?"":(this.precision!=null&&(e=this.adjustPrecision(e)),e)}adjustPrecision(e,t){const n=this.precision;if(n==null)return e;if(t){const r=Number.parseFloat(e).toFixed(n);return Number.parseFloat(r).toString()}const i=String(e).split(".");if(i.length>1){if(i[1].length<=n)return e;if(n>0)return`${i[0]}.${i[1].slice(0,n)}`}return i[0]}setMin(e){return this.min===e?this:(this.min=e,Nc(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,Nc(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,Nc(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(n=>super.setValue(n,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,n){if(Dn(n)){let i=this.isScientificNotation(n);if(i&&this.eInput.validity.valid)return e(n);if(!i){n=this.adjustPrecision(n);const r=this.normalizeValue(n);i=n!=r}if(i)return t(n)}return e(n)}getValue(e=!1){const t=this.eInput;if(!t.validity.valid&&!e)return;const n=t.value;return this.isScientificNotation(n)?this.adjustPrecision(n,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},Sve={selector:"AG-INPUT-NUMBER-FIELD",component:OF},Eve=class extends R0{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();const e=Wy();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){Os(this.beans)===this.eInput&&e.preventDefault()}setMin(e){const t=e instanceof Date?Ad(e??null,!!this.includeTime)??void 0:e;return this.min===t?this:(this.min=t,Nc(this.eInput,"min",t),this)}setMax(e){const t=e instanceof Date?Ad(e??null,!!this.includeTime)??void 0:e;return this.max===t?this:(this.max=t,Nc(this.eInput,"max",t),this)}setStep(e){return this.step===e?this:(this.step=e,Nc(this.eInput,"step",e),this)}setIncludeTime(e){return this.includeTime===e?this:(this.includeTime=e,super.setInputType(e?"datetime-local":"date"),e&&this.setStep(1),this)}getDate(){if(this.eInput.validity.valid)return Hc(this.getValue())??void 0}setDate(e,t){this.setValue(Ad(e??null,this.includeTime),t)}},j7={selector:"AG-INPUT-DATE-FIELD",component:Eve},Rve=".ag-list-item{align-items:center;display:flex;height:var(--ag-list-item-height);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;&.ag-active-item{background-color:var(--ag-row-hover-color)}}",Ave="ag-active-item",Tve=(e,t)=>({tag:"div",cls:`ag-list-item ag-${e}-list-item`,attrs:{role:"option"},children:[{tag:"span",ref:"eText",children:t}]}),kve=class extends Fx{constructor(e,t,n){super(Tve(e,t)),this.label=t,this.value=n,this.eText=Yn}postConstruct(){this.createTooltip(),this.addEventListeners()}setHighlighted(e){const t=this.getGui();t.classList.toggle(Ave,e),z9(t,e),this.dispatchLocalEvent({type:"itemHighlighted",highlighted:e})}getHeight(){return this.getGui().clientHeight}setIndex(e,t){const n=this.getGui();Gge(n,e),Bge(n,t)}createTooltip(){const e={getTooltipValue:()=>this.label,getGui:()=>this.getGui(),getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>wF(this.eText)},t=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("highlightTooltipFeature",!1,e,this));t&&(this.tooltipFeature=t)}addEventListeners(){const e=this.getParentComponent();e&&(this.addGuiEventListener("mouseover",()=>{e.highlightItem(this)}),this.addGuiEventListener("mousedown",t=>{t.preventDefault(),t.stopPropagation(),e.setValue(this.value)}))}},Pve=class extends Fx{constructor(e="default"){super({tag:"div",cls:`ag-list ag-${e}-list`}),this.cssIdentifier=e,this.options=[],this.listItems=[],this.highlightedItem=null,this.registerCSS(Rve)}postConstruct(){const e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()})}handleKeyDown(e){const t=e.key;switch(t){case kt.ENTER:if(!this.highlightedItem)this.setValue(this.getValue());else{const n=this.listItems.indexOf(this.highlightedItem);this.setValueByIndex(n)}break;case kt.DOWN:case kt.UP:e.preventDefault(),this.navigate(t);break;case kt.PAGE_DOWN:case kt.PAGE_UP:case kt.PAGE_HOME:case kt.PAGE_END:e.preventDefault(),this.navigateToPage(t);break}}addOptions(e){for(const t of e)this.addOption(t);return this}addOption(e){const{value:t,text:n}=e,i=n??t;return this.options.push({value:t,text:i}),this.renderOption(t,i),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0);for(const e of this.listItems)e.destroy();jc(this.getGui()),this.listItems=[],this.refreshAriaRole()}updateOptions(e){const t=this.options!==e;return t&&(this.clearOptions(),this.addOptions(e)),t}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;const n=this.options.findIndex(i=>i.value===e);if(n!==-1){const i=this.options[n];this.value=i.value,this.displayValue=i.text,this.highlightItem(this.listItems[n]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.listItems[e])}highlightItem(e){const t=e.getGui();if(!Sm(t))return;this.clearHighlighted(),e.setHighlighted(!0),this.highlightedItem=e;const n=this.getGui(),{scrollTop:i,clientHeight:r}=n,{offsetTop:o,offsetHeight:s}=t;(o+s>i+r||o<i)&&t.scrollIntoView({block:"nearest"})}hideItemTooltip(){var e,t;(t=(e=this.highlightedItem)==null?void 0:e.tooltipFeature)==null||t.attemptToHideTooltip()}destroy(){this.hideItemTooltip(),super.destroy()}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}clearHighlighted(){var e;(e=this.highlightedItem)==null||e.setHighlighted(!1),this.highlightedItem=null}renderOption(e,t){const n=new kve(this.cssIdentifier,t,e);n.setParentComponent(this);const i=this.createManagedBean(n);this.listItems.push(i),this.getGui().appendChild(i.getGui())}navigate(e){const t=e===kt.DOWN;let n;const{listItems:i,highlightedItem:r}=this;if(!r)n=t?i[0]:Wo(i);else{let s=i.indexOf(r)+(t?1:-1);s=Math.min(Math.max(s,0),i.length-1),n=i[s]}this.highlightItem(n)}navigateToPage(e){const{listItems:t,highlightedItem:n}=this;if(!n||t.length===0)return;const i=t.indexOf(n),r=this.options.length-1,o=t[0].getHeight(),s=Math.floor(this.getGui().clientHeight/o);let a=-1;e===kt.PAGE_HOME?a=0:e===kt.PAGE_END?a=r:e===kt.PAGE_DOWN?a=Math.min(i+s,r):e===kt.PAGE_UP&&(a=Math.max(i-s,0)),a!==-1&&this.highlightItem(t[a])}refreshAriaRole(){f0(this.getGui(),this.options.length===0?"presentation":"listbox")}updateIndices(){this.refreshAriaRole();const e=this.listItems,t=e.length;e.forEach((n,i)=>{n.setIndex(i+1,t)})}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},Dve=".ag-picker-field-display{flex:1 1 auto}.ag-picker-field{align-items:center;display:flex}.ag-picker-field-icon{border:0;cursor:pointer;display:flex;margin:0;padding:0}.ag-picker-field-wrapper{background-color:var(--ag-picker-button-background-color);border:var(--ag-picker-button-border);border-radius:5px;min-height:max(var(--ag-list-item-height),calc(var(--ag-spacing)*4));overflow:hidden;&:where(.ag-picker-has-focus),&:where(:focus-within){background-color:var(--ag-picker-button-focus-background-color);border:var(--ag-picker-button-focus-border);box-shadow:var(--ag-focus-shadow);&:where(.invalid){box-shadow:var(--ag-focus-error-shadow)}}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:disabled{opacity:.5}}",Fve={tag:"div",cls:"ag-picker-field",role:"presentation",children:[{tag:"div",ref:"eLabel"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-picker-field-wrapper ag-picker-collapsed",children:[{tag:"div",ref:"eDisplayField",cls:"ag-picker-field-display"},{tag:"div",ref:"eIcon",cls:"ag-picker-field-icon",attrs:{"aria-hidden":"true"}}]}]},Mve=class extends G7{constructor(e){if(super(e,(e==null?void 0:e.template)||Fve,(e==null?void 0:e.agComponents)||[],e==null?void 0:e.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=Yn,this.eWrapper=Yn,this.eDisplayField=Yn,this.eIcon=Yn,this.registerCSS(Dve),this.ariaRole=e==null?void 0:e.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:n,variableWidth:i,minPickerWidth:r,maxPickerWidth:o}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!i,n!=null&&this.setPickerMaxHeight(n),r!=null&&this.setPickerMinWidth(r),o!=null&&this.setPickerMaxWidth(o)}postConstruct(){super.postConstruct(),this.setupAria();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon:n,inputWidth:i}=this.config;if(n){const r=this.beans.iconSvc.createIconNoSpan(n);r&&this.eIcon.appendChild(r)}i!=null&&this.setInputWidth(i)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),xk(e,!1),this.ariaRole&&f0(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&(e==null?void 0:e.target)===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case kt.UP:case kt.DOWN:case kt.ENTER:case kt.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case kt.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));const t=this.getLocaleTextFunc(),{config:{pickerAriaLabelKey:n,pickerAriaLabelValue:i,modalPicker:r=!0},maxPickerHeight:o,minPickerWidth:s,maxPickerWidth:a,variableWidth:d,beans:h,eWrapper:m}=this,v={modal:r,eChild:e,closeOnEsc:!0,closedCallback:()=>{const O=gF(h);this.beforeHidePicker(),O&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(n,i),anchorToElement:m};e.style.position="absolute";const w=h.popupSvc,R=w.addPopup(v);d?(s&&(e.style.minWidth=s),e.style.width=CF(xS(m)),a&&(e.style.maxWidth=a)):_S(e,a??xS(m));const L=o??`${vF(w.getPopupParent())}px`;return e.style.setProperty("max-height",L),this.alignPickerToComponent(),R.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerGap:e,config:{pickerType:t},beans:{popupSvc:n,gos:i},eWrapper:r,pickerComponent:o}=this,s=i.get("enableRtl")?"right":"left";n.positionPopupByComponent({type:t,eventSource:r,ePopup:o.getGui(),position:"under",alignSide:s,keepWithinBounds:!0,nudgeY:e})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;const t=this.getAriaElement();xk(t,e);const n=this.eWrapper.classList;n.toggle("ag-picker-expanded",e),n.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){var t;(t=this.pickerComponent)!=null&&t.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&(this.hideCurrentPicker(),this.dispatchLocalEvent({type:"pickerHidden"}))}setInputWidth(e){return _S(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},Ive=".ag-select{align-items:center;display:flex;&.ag-disabled{opacity:.5}}:where(.ag-select){.ag-picker-field-wrapper{cursor:default}&.ag-disabled .ag-picker-field-wrapper:focus{box-shadow:none}&:not(.ag-cell-editor,.ag-label-align-top){min-height:var(--ag-list-item-height)}.ag-picker-field-display{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-picker-field-icon{align-items:center;display:flex}}:where(.ag-ltr) :where(.ag-select){.ag-picker-field-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding)/2);padding-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-select){.ag-picker-field-wrapper{padding-left:var(--ag-spacing);padding-right:calc(var(--ag-cell-horizontal-padding)/2)}}.ag-select-list{background-color:var(--ag-picker-list-background-color);border:var(--ag-picker-list-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);overflow:hidden auto}.ag-select-list-item{cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none;:where(span){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}:where(.ag-ltr) .ag-select-list-item{padding-left:calc(var(--ag-cell-horizontal-padding)/2)}:where(.ag-rtl) .ag-select-list-item{padding-right:calc(var(--ag-cell-horizontal-padding)/2)}",zF=class extends Mve{constructor(e){super({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"selectOpen",ariaRole:"combobox",...e}),this.registerCSS(Ive)}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{shouldDisplayTooltip:r_(()=>this.eDisplayField),getGui:()=>this.getGui()})),super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:t,placeholder:n}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),n&&t==null&&(this.eDisplayField.textContent=n),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){const e=this.createBean(new Pve("select"));this.listComponent=e,e.setParentComponent(this);const t=e.getAriaElement(),n=`ag-select-list-${e.getCompId()}`;t.setAttribute("id",n),Kge(this.getAriaElement(),t),e.addManagedElementListeners(e.getGui(),{mousedown:i=>{i==null||i.preventDefault()}}),e.addManagedListeners(e,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})},fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}beforeHidePicker(){var e;(e=this.listComponent)==null||e.hideItemTooltip(),super.beforeHidePicker()}onKeyDown(e){var n;const{key:t}=e;switch(t===kt.TAB&&this.hidePicker(),t){case kt.ENTER:case kt.UP:case kt.DOWN:case kt.PAGE_UP:case kt.PAGE_DOWN:case kt.PAGE_HOME:case kt.PAGE_END:e.preventDefault(),this.isPickerDisplayed?(n=this.listComponent)==null||n.handleKeyDown(e):super.onKeyDown(e);break;case kt.ESCAPE:super.onKeyDown(e);break;case kt.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e);break}}showPicker(){const e=this.listComponent;e&&(super.showPicker(),e.refreshHighlighted())}addOptions(e){for(const t of e)this.addOption(t);return this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){var e;return(e=this.listComponent)==null||e.clearOptions(),this.setValue(void 0,!0),this}updateOptions(e){var t;return(t=this.listComponent)!=null&&t.updateOptions(e)&&this.setValue(void 0,!0),this}setValue(e,t,n){const{listComponent:i,config:{placeholder:r},eDisplayField:o,tooltipFeature:s}=this;if(this.value===e||!i)return this;if(n||i.setValue(e,!0),i.getValue()===this.getValue())return this;let d=i.getDisplayValue();return d==null&&r&&(d=r),o.textContent=d,s==null||s.setTooltipAndRefresh(d??null),super.setValue(e,t)}destroy(){this.listComponent=this.destroyBean(this.listComponent),super.destroy()}},Lve={selector:"AG-SELECT",component:zF},Ove=':where(.ag-root-wrapper,.ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart),:where(.ag-root-wrapper,.ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]){box-sizing:border-box;&:after,&:before{box-sizing:border-box}&:where(div,span,label):focus-visible{box-shadow:inset var(--ag-focus-shadow);outline:none;&:where(.invalid){box-shadow:inset var(--ag-focus-error-shadow)}}&:where(button){color:inherit}}:where(.ag-root-wrapper,ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]) ::-ms-clear{display:none}.ag-hidden{display:none!important}.ag-invisible{visibility:hidden!important}.ag-tab-guard{display:block;height:0;position:absolute;width:0}.ag-tab-guard-top{top:1px}.ag-tab-guard-bottom{bottom:1px}.ag-measurement-container{height:0;overflow:hidden;visibility:hidden;width:0}.ag-measurement-element-border{display:inline-block;&:before{border-left:var(--ag-internal-measurement-border);content:"";display:block}}.ag-popup-child{top:0;z-index:5;&:where(:not(.ag-tooltip-custom)){box-shadow:var(--ag-popup-shadow)}}.ag-input-wrapper,.ag-picker-field-wrapper{align-items:center;display:flex;flex:1 1 auto;line-height:normal;position:relative}.ag-input-field{align-items:center;display:flex;flex-direction:row}.ag-input-field-input:where(:not([type=checkbox],[type=radio])){flex:1 1 auto;min-width:0;width:100%}.ag-chart,.ag-dnd-ghost,.ag-external,.ag-popup,.ag-root-wrapper{cursor:default;line-height:normal;white-space:normal;-webkit-font-smoothing:antialiased;background-color:var(--ag-background-color);color:var(--ag-text-color);color-scheme:var(--ag-browser-color-scheme);font-family:var(--ag-font-family);font-size:var(--ag-font-size);--ag-indentation-level:0}:where(.ag-icon):before{align-items:center;background-color:currentcolor;color:inherit;content:"";display:flex;font-family:inherit;font-size:var(--ag-icon-size);font-style:normal;font-variant:normal;height:var(--ag-icon-size);justify-content:center;line-height:var(--ag-icon-size);-webkit-mask-size:contain;mask-size:contain;text-transform:none;width:var(--ag-icon-size)}.ag-icon{background-position:50%;background-repeat:no-repeat;background-size:contain;color:var(--ag-icon-color);display:block;height:var(--ag-icon-size);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-icon-size)}.ag-disabled,[disabled]{.ag-icon{opacity:.5}&.ag-icon-grip{opacity:.35}}.ag-resizer{pointer-events:none;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:1}:where(.ag-resizer){&.ag-resizer-topLeft{cursor:nwse-resize;height:5px;left:0;top:0;width:5px}&.ag-resizer-top{cursor:ns-resize;height:5px;left:5px;right:5px;top:0}&.ag-resizer-topRight{cursor:nesw-resize;height:5px;right:0;top:0;width:5px}&.ag-resizer-right{bottom:5px;cursor:ew-resize;right:0;top:5px;width:5px}&.ag-resizer-bottomRight{bottom:0;cursor:nwse-resize;height:5px;right:0;width:5px}&.ag-resizer-bottom{bottom:0;cursor:ns-resize;height:5px;left:5px;right:5px}&.ag-resizer-bottomLeft{bottom:0;cursor:nesw-resize;height:5px;left:0;width:5px}&.ag-resizer-left{bottom:5px;cursor:ew-resize;left:0;top:5px;width:5px}}',j6,H6,NF=typeof window!="object"||!((H6=(j6=window==null?void 0:window.document)==null?void 0:j6.fonts)!=null&&H6.forEach),ox=(e,t,n,i,r,o)=>{if(NF)return;i&&(e=`@layer ${CSS.escape(i).replaceAll("\\.",".")} { ${e} }`);let s=Gb.map.get(t);if(s||(s=[],Gb.map.set(t,s)),s.some(m=>m.css===e))return;const a=document.createElement("style");o&&a.setAttribute("nonce",o),a.dataset.agGlobalCss=n,a.textContent=e;const d={css:e,el:a,priority:r};let h;for(const m of s){if(m.priority>r)break;h=m}if(h){h.el.insertAdjacentElement("afterend",a);const m=s.indexOf(h);s.splice(m+1,0,d)}else t.insertBefore(a,t.querySelector(":not(title, meta)")),s.push(d)},H7=(e,t,n,i)=>{ox(Ove,e,"shared",t,0,n),i==null||i.forEach((r,o)=>r.forEach(s=>ox(s,e,o,t,0,n)))},zve=e=>{Gb.grids.add(e)},Nve=e=>{if(Gb.grids.delete(e),Gb.grids.size===0){Gb.map=new WeakMap;for(const t of document.head.querySelectorAll("style[data-ag-global-css]"))t.remove()}},C4,Gb=(C4=typeof window=="object"?window:{}).agStyleInjectionState??(C4.agStyleInjectionState={map:new WeakMap,grids:new Set}),Gp=e=>new V7(e),Ey="$default",Bve=0,V7=class{constructor({feature:e,params:t,modeParams:n={},css:i,cssImports:r}){this.feature=e,this.css=i,this.cssImports=r,this.modeParams={[Ey]:{...n[Ey]??{},...t??{}},...n}}use(e,t,n){let i=this._inject;if(i==null){let{css:r}=this;if(r){const o=`ag-theme-${this.feature??"part"}-${++Bve}`;typeof r=="function"&&(r=r()),r=`:where(.${o}) {
${r}
}
`;for(const s of this.cssImports??[])r=`@import url(${JSON.stringify(s)});
${r}`;i={css:r,class:o}}else i=!1;this._inject=i}return i&&e&&ox(i.css,e,i.class,t,1,n),i?i.class:!1}},Gve=e=>e.replace(/[A-Z]/g,t=>`-${t}`).toLowerCase(),$7=e=>`--ag-${Gve(e)}`,jp=e=>`var(${$7(e)})`,jve=(e,t,n)=>Math.max(t,Math.min(n,e)),Hve=e=>{const t=new Map;return n=>{const i=n;return t.has(i)||t.set(i,e(n)),t.get(i)}},Cp=e=>({ref:"accentColor",mix:e}),ch=e=>({ref:"foregroundColor",mix:e}),fh=e=>({ref:"foregroundColor",mix:e,onto:"backgroundColor"}),Vve=e=>({ref:"foregroundColor",mix:e,onto:"headerBackgroundColor"}),Bc={ref:"backgroundColor"},_b={ref:"foregroundColor"},Zg={ref:"accentColor"},IS={backgroundColor:"#fff",foregroundColor:"#181d1f",borderColor:ch(.15),chromeBackgroundColor:fh(.02),browserColorScheme:"light"},$ve={...IS,textColor:_b,accentColor:"#2196f3",invalidColor:"#e02525",fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],subtleTextColor:{ref:"textColor",mix:.5},borderWidth:1,borderRadius:4,spacing:8,fontSize:14,focusShadow:{spread:3,color:Cp(.5)},focusErrorShadow:{spread:3,color:{ref:"invalidColor",onto:"backgroundColor",mix:.5}},popupShadow:"0 0 16px #00000026",cardShadow:"0 1px 4px 1px #00000018",dropdownShadow:{ref:"cardShadow"},listItemHeight:{calc:"max(iconSize, dataFontSize) + widgetVerticalSpacing"},dragAndDropImageBackgroundColor:Bc,dragAndDropImageBorder:!0,dragAndDropImageNotAllowedBorder:{color:{ref:"invalidColor",onto:"dragAndDropImageBackgroundColor",mix:.5}},dragAndDropImageShadow:{ref:"popupShadow"},iconSize:16,iconColor:"inherit",toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonOnBackgroundColor:Zg,toggleButtonOffBackgroundColor:fh(.3),toggleButtonSwitchBackgroundColor:Bc,toggleButtonSwitchInset:2,tooltipBackgroundColor:{ref:"chromeBackgroundColor"},tooltipErrorBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.1},tooltipTextColor:{ref:"textColor"},tooltipErrorTextColor:{ref:"invalidColor"},tooltipBorder:!0,tooltipErrorBorder:{color:{ref:"invalidColor",onto:"backgroundColor",mix:.25}}},Wve=["colorScheme","color","length","scale","borderStyle","border","shadow","image","fontFamily","fontWeight","duration"],Uve=Hve(e=>(e=e.toLowerCase(),Wve.find(t=>e.endsWith(t.toLowerCase()))??"length")),Z2=e=>typeof e=="object"&&(e!=null&&e.ref)?jp(e.ref):typeof e=="string"?e:typeof e=="number"?String(e):!1,BF=e=>{if(typeof e=="string")return e;if(e&&"ref"in e){const t=jp(e.ref);return e.mix==null?t:`color-mix(in srgb, ${e.onto?jp(e.onto):"transparent"}, ${t} ${jve(e.mix*100,0,100)}%)`}return!1},qve=Z2,Sb=e=>typeof e=="string"?e:typeof e=="number"?`${e}px`:e&&"calc"in e?`calc(${e.calc.replace(/ ?[*/+] ?/g," $& ").replace(/-?\b[a-z][a-z0-9]*\b(?![-(])/gi,n=>n[0]==="-"?n:" "+jp(n)+" ")})`:e&&"ref"in e?jp(e.ref):!1,Kve=Z2,Lk=(e,t)=>typeof e=="string"?e:e===!0?Lk({},t):e===!1?t==="columnBorder"?Lk({color:"transparent"},t):"none":e&&"ref"in e?jp(e.ref):W7(e.style??"solid")+" "+Sb(e.width??{ref:"borderWidth"})+" "+BF(e.color??{ref:"borderColor"}),Zve=e=>typeof e=="string"?e:e===!1?"none":e&&"ref"in e?jp(e.ref):[Sb(e.offsetX??0),Sb(e.offsetY??0),Sb(e.radius??0),Sb(e.spread??0),BF(e.color??{ref:"foregroundColor"})].join(" "),W7=Z2,U7=e=>typeof e=="string"?e.includes(",")?e:_4(e):e&&"googleFont"in e?U7(e.googleFont):e&&"ref"in e?jp(e.ref):Array.isArray(e)?e.map(t=>(typeof t=="object"&&"googleFont"in t&&(t=t.googleFont),_4(t))).join(", "):!1,_4=e=>/^[\w-]+$|\w\(/.test(e)?e:JSON.stringify(e),Yve=Z2,q7=e=>typeof e=="string"?e:e&&"url"in e?`url(${JSON.stringify(e.url)})`:e&&"svg"in e?q7({url:`data:image/svg+xml,${encodeURIComponent(e.svg)}`}):e&&"ref"in e?jp(e.ref):!1,Xve=(e,t,n)=>typeof e=="string"?e:typeof e=="number"?(e>=10&&n.warn(104,{value:e,param:t}),`${e}s`):e&&"ref"in e?jp(e.ref):!1,Jve={color:BF,colorScheme:qve,length:Sb,scale:Kve,border:Lk,borderStyle:W7,shadow:Zve,image:q7,fontFamily:U7,fontWeight:Yve,duration:Xve},Qve=(e,t,n)=>{const i=Uve(e);return Jve[i](t,e,n)},e0e=e=>new K7(e),K7=class Z7{constructor(t,n=[]){this.themeLogger=t,this.parts=n}withPart(t){return typeof t=="function"&&(t=t()),t instanceof V7?new Z7(this.themeLogger,[...this.parts,t]):(this.themeLogger.preInitErr(259,"Invalid part",{part:t}),this)}withoutPart(t){return this.withPart(Gp({feature:t}))}withParams(t,n=Ey){return this.withPart(Gp({modeParams:{[n]:t}}))}_startUse({styleContainer:t,cssLayer:n,nonce:i,loadThemeGoogleFonts:r,moduleCss:o}){if(NF)return;n0e(),H7(t,n,i,o);const s=t0e(this);if(s.length>0)for(const a of s)r&&i0e(a,i);for(const a of this.parts)a.use(t,n,i)}_getCssClass(){return this._cssClassCache??(this._cssClassCache=S4(this.parts).map(t=>t.use(void 0,void 0,void 0)).filter(Boolean).join(" "))}_getModeParams(){let t=this._paramsCache;if(!t){const n={[Ey]:{...$ve}};for(const i of S4(this.parts))for(const r of Object.keys(i.modeParams)){const o=i.modeParams[r];if(o){const s=n[r]??(n[r]={}),a=new Set;for(const d of Object.keys(o)){const h=o[d];h!==void 0&&(s[d]=h,a.add(d))}if(r===Ey)for(const d of Object.keys(n)){const h=n[d];if(d!==Ey)for(const m of a)delete h[m]}}}this._paramsCache=t=n}return t}_getPerInstanceCss(t){const n="##SELECTOR##";let i=this._paramsCssCache;if(!i){let r="",o="";const s=this._getModeParams();for(const d of Object.keys(s)){const h=s[d];if(d!==Ey){const v=`:where([data-ag-theme-mode="${typeof CSS=="object"?CSS.escape(d):d}"]) & {
`;r+=v,o+=v}for(const m of Object.keys(h).sort()){const v=h[m],w=Qve(m,v,this.themeLogger);if(w===!1)this.themeLogger.error(107,{key:m,value:v});else{const R=$7(m),L=R.replace("--ag-","--ag-inherited-");r+=`	${R}: var(${L}, ${w});
`,o+=`	${L}: var(${R});
`}}d!==Ey&&(r+=`}
`,o+=`}
`)}let a=`${n} {
${r}}
`;a+=`:has(> ${n}):not(${n}) {
${o}}
`,this._paramsCssCache=i=a}return i.replaceAll(n,`:where(.${t})`)}},S4=e=>{const t=new Map;for(const i of e)t.set(i.feature,i);const n=[];for(const i of e)(!i.feature||t.get(i.feature)===i)&&n.push(i);return n},t0e=e=>{const t=new Set,n=o=>{if(Array.isArray(o))o.forEach(n);else{const s=o==null?void 0:o.googleFont;typeof s=="string"&&t.add(s)}};return Object.values(e._getModeParams()).flatMap(o=>Object.values(o)).forEach(n),Array.from(t).sort()},E4=!1,n0e=()=>{if(!E4){E4=!0;for(const e of Array.from(document.head.querySelectorAll('style[data-ag-scope="legacy"]')))e.remove()}},i0e=async(e,t)=>{const n=`@import url('https://${r0e}/css2?family=${encodeURIComponent(e)}:wght@100;200;300;400;500;600;700;800;900&display=swap');
`;ox(n,document.head,`googleFont:${e}`,void 0,0,t)},r0e="fonts.googleapis.com",o0e=1,s0e=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,this.instanceId=o0e++,e!=null&&e.beanClasses&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){this.id=e.id,this.beans.context=this,this.destroyCallback=e.destroyCallback;for(const t of Object.keys(e.providedBeanInstances))this.beans[t]=e.providedBeanInstances[t];for(const t of e.beanClasses){const n=new t;n.beanName?this.beans[n.beanName]=n:console.error(`Bean ${t.name} is missing beanName`),this.createdBeans.push(n)}for(const t of e.derivedBeans??[]){const{beanName:n,bean:i}=t(this);this.beans[n]=i,this.createdBeans.push(i)}e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){return this.initBeans([e],t),e}initBeans(e,t){var i,r,o,s;const n=this.beans;for(const a of e)(i=a.preWireBeans)==null||i.call(a,n),(r=a.wireBeans)==null||r.call(a,n);for(const a of e)(o=a.preConstruct)==null||o.call(a);t&&e.forEach(t);for(const a of e)(s=a.postConstruct)==null||s.call(a)}getBeans(){return this.beans}getBean(e){return this.beans[e]}getId(){return this.id}destroy(){var t;if(this.destroyed)return;this.destroyed=!0;const e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[],(t=this.destroyCallback)==null||t.call(this)}destroyBean(e){var t;(t=e==null?void 0:e.destroy)==null||t.call(e)}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},a0e=0,R4={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},l0e=class extends cc{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.sizesMeasured=!1,this.paramsClass=`ag-theme-params-${++a0e}`,this.globalCSS=[]}wireBeans(e){this.eRootDiv=e.eRootDiv}postConstruct(){const{gos:e,eRootDiv:t}=this;e.setInstanceDomData(t);const n=e.get("themeStyleContainer"),i=typeof ShadowRoot<"u",r=i&&t.getRootNode()instanceof ShadowRoot;this.eStyleContainer=(typeof n=="function"?n():n)??(r?t:document.head),!n&&!r&&i&&u0e(t,this.shadowRootError.bind(this),this.addDestroyFunc.bind(this)),this.cssLayer=e.get("themeCssLayer"),this.styleNonce=e.get("styleNonce"),this.addManagedPropertyListener("theme",()=>this.handleThemeChange()),this.handleThemeChange(),this.getSizeEl(R4),this.initVariables(),this.addDestroyFunc(()=>Nve(this)),this.mutationObserver=new MutationObserver(()=>{this.fireStylesChangedEvent("themeChanged")}),this.addDestroyFunc(()=>this.mutationObserver.disconnect())}applyThemeClasses(e,t=[]){const{theme:n}=this;let i;n?i=`${this.paramsClass} ${n._getCssClass()}`:i=this.applyLegacyThemeClasses();for(const r of Array.from(e.classList))r.startsWith("ag-theme-")&&e.classList.remove(r);if(i){const r=e.className;e.className=`${r}${r?" ":""}${i}${t!=null&&t.length?" "+t.join(" "):""}`}}applyLegacyThemeClasses(){let e="";this.mutationObserver.disconnect();let t=this.eRootDiv;for(;t;){let n=!1;for(const i of Array.from(t.classList))i.startsWith("ag-theme-")&&(n=!0,e=e?`${e} ${i}`:i);n&&this.mutationObserver.observe(t,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement}return e}addGlobalCSS(e,t){this.theme?ox(e,this.eStyleContainer,t,this.cssLayer,0,this.styleNonce):this.globalCSS.push([e,t])}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(R4)}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(t!=null)return t;const n=this.measureSizeEl(e);return n==="detached"||n==="no-styles"?(e.cacheDefault&&this.lastKnownValues.set(e,e.defaultValue),e.defaultValue):(this.lastKnownValues.set(e,n),n)}measureSizeEl(e){const t=this.getSizeEl(e);if(t.offsetParent==null)return"detached";const n=t.offsetWidth;return n===FA?"no-styles":(this.sizesMeasured=!0,n)}getMeasurementContainer(){let e=this.eMeasurementContainer;return e||(e=this.eMeasurementContainer=ky({tag:"div",cls:"ag-measurement-container"}),this.eRootDiv.appendChild(e)),e}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;const n=this.getMeasurementContainer();t=ky({tag:"div"});const{border:i,noWarn:r}=e;i?(t.className="ag-measurement-element-border",t.style.setProperty("--ag-internal-measurement-border",`var(${e.cssName}, solid ${FA}px)`)):t.style.width=`var(${e.cssName}, ${FA}px)`,n.appendChild(t),this.sizeEls.set(e,t);let o=this.measureSizeEl(e);o==="no-styles"&&!r&&this.varError(e);const s=Em(this.beans,t,()=>{const a=this.measureSizeEl(e);a==="detached"||a==="no-styles"||(this.lastKnownValues.set(e,a),a!==o&&(o=a,this.fireStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>s()),t}handleThemeChange(){const{gos:e,theme:t}=this,n=e.get("theme");let i;if(n==="legacy")i=void 0;else{const r=n??this.getDefaultTheme();r instanceof K7?i=r:this.themeError(r)}i!==t&&this.handleNewTheme(i),this.postProcessThemeChange(i,n)}handleNewTheme(e){const{gos:t,eRootDiv:n,globalCSS:i}=this,r=this.getAdditionalCss();if(e){zve(this),H7(this.eStyleContainer,this.cssLayer,this.styleNonce,r);for(const[s,a]of i)ox(s,this.eStyleContainer,a,this.cssLayer,0,this.styleNonce);i.length=0}this.theme=e,e==null||e._startUse({loadThemeGoogleFonts:t.get("loadThemeGoogleFonts"),styleContainer:this.eStyleContainer,cssLayer:this.cssLayer,nonce:this.styleNonce,moduleCss:r});let o=this.eParamsStyle;if(!o){o=this.eParamsStyle=ky({tag:"style"});const s=t.get("styleNonce");s&&o.setAttribute("nonce",s),n.appendChild(o)}NF||(o.textContent=(e==null?void 0:e._getPerInstanceCss(this.paramsClass))||""),this.applyThemeClasses(n),this.fireStylesChangedEvent("themeChanged")}fireStylesChangedEvent(e){this.eventSvc.dispatchEvent({type:"stylesChanged",[e]:!0})}},FA=15538,u0e=(e,t,n)=>{let i=60;const r=setInterval(()=>{typeof ShadowRoot<"u"&&e.getRootNode()instanceof ShadowRoot&&(t(),clearInterval(r)),(bF(e)||--i<0)&&clearInterval(r)},1e3);n(()=>clearInterval(r))},c0e=class extends cc{constructor(){super(...arguments),this.beanName="registry"}registerDynamicBeans(e){if(e){this.dynamicBeans??(this.dynamicBeans={});for(const t of Object.keys(e))this.dynamicBeans[t]=e[t]}}createDynamicBean(e,t,...n){if(!this.dynamicBeans)throw new Error(this.getDynamicError(e,!0));const i=this.dynamicBeans[e];if(i==null){if(t)throw new Error(this.getDynamicError(e,!1));return}return new i(...n)}},d0e=class extends cc{constructor(){super(...arguments),this.beanName="eventSvc",this.eventServiceType="global",this.globalSvc=new h0}addListener(e,t,n){this.globalSvc.addEventListener(e,t,n)}removeListener(e,t,n){this.globalSvc.removeEventListener(e,t,n)}addGlobalListener(e,t=!1){this.globalSvc.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalSvc.removeGlobalListener(e,t)}dispatchEvent(e){this.globalSvc.dispatchEvent(this.gos.addCommon(e))}dispatchEventOnce(e){this.globalSvc.dispatchEventOnce(this.gos.addCommon(e))}},Y7=class extends cc{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}postConstruct(){this.refreshTooltip()}setBrowserTooltip(e,t){const n="title",i=this.ctrl.getGui();i&&(e!=null&&(e!=""||t)?i.setAttribute(n,e):i.removeAttribute(n))}updateTooltipText(){const{getTooltipValue:e}=this.ctrl;e&&(this.tooltip=e())}createTooltipFeatureIfNeeded(){if(this.tooltipManager==null){const e=this.beans.registry.createDynamicBean("tooltipStateManager",!0,this.ctrl,()=>this.tooltip);e&&(this.tooltipManager=this.createBean(e,this.beans.context))}}attemptToShowTooltip(){var e;(e=this.tooltipManager)==null||e.prepareToShowTooltip()}attemptToHideTooltip(){var e;(e=this.tooltipManager)==null||e.hideTooltip()}setTooltipAndRefresh(e){this.tooltip=e,this.refreshTooltip()}refreshTooltip(e){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)):(this.setBrowserTooltip(e?"":null,e),this.createTooltipFeatureIfNeeded())}destroy(){this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context),super.destroy()}},h0e=1e3,f0e=1e3,A4=100,T4,LC=!1,p0e=class extends cc{constructor(e,t){super(),this.tooltipCtrl=e,this.getTooltipValue=t,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(e){this.popupSvc=e.popupSvc}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const e=this.tooltipCtrl.getGui();this.tooltipTrigger===0&&this.addManagedListeners(e,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(e,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(e,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(e,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(e){const t=this.gos.get(e);return Math.max(200,t)}getTooltipDelay(e){var t,n,i,r;return e==="show"?((n=(t=this.tooltipCtrl).getTooltipShowDelayOverride)==null?void 0:n.call(t))??this.getGridOptionsTooltipDelay("tooltipShowDelay"):((r=(i=this.tooltipCtrl).getTooltipHideDelayOverride)==null?void 0:r.call(i))??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const e=this.gos.get("tooltipTrigger");return!e||e==="hover"?0:1}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!i0()&&(LC?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},A4):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){var r;const t=e.relatedTarget,n=this.tooltipCtrl.getGui(),i=(r=this.tooltipComp)==null?void 0:r.getGui();this.isInteractingWithTooltip||n.contains(t)||this.interactionEnabled&&(i!=null&&i.contains(t))||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(e){if(this.state!=0||LC)return;let t=0;e&&(t=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),t),this.state=1}isLastTooltipHiddenRecently(){return Date.now()-T4<h0e}setToDoNothing(e){!e&&this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.clearEventHandlers(),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){var r,o;const e=this.getTooltipValue(),t=this.tooltipCtrl;if(!Dn(e)||t.shouldDisplayTooltip&&!t.shouldDisplayTooltip()){this.setToDoNothing();return}const n=this.gos.addCommon({location:((r=t.getLocation)==null?void 0:r.call(t))??"UNKNOWN",value:e,hideTooltipCallback:()=>this.hideTooltip(!0),...(o=t.getAdditionalParams)==null?void 0:o.call(t)});this.state=2,this.tooltipInstanceCount++;const i=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.createTooltipComp(n,i)}hideTooltip(e){!e&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),T4=Date.now()),this.eventSvc.dispatchEvent({type:"tooltipHide",parentGui:this.tooltipCtrl.getGui()}),e&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(e,t){var s;if(this.state!==2||this.tooltipInstanceCount!==e){this.destroyBean(t);return}const i=t.getGui();this.tooltipComp=t,i.classList.contains("ag-tooltip")||i.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&i.classList.add("ag-tooltip-animate"),this.interactionEnabled&&i.classList.add("ag-tooltip-interactive");const r=this.getLocaleTextFunc(),o=(s=this.popupSvc)==null?void 0:s.addPopup({eChild:i,ariaLabel:r("ariaLabelTooltip","Tooltip")});if(o&&(this.tooltipPopupDestroyFunc=o.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){const a=()=>this.setToDoNothing();[this.onBodyScrollEventCallback]=this.addManagedEventListeners({bodyScroll:a}),this.setEventHandlers(a)}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(i,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(Il(this.beans),{keydown:a=>{i.contains(a==null?void 0:a.target)||this.onKeyDown()}}),this.tooltipTrigger===1&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(i,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventSvc.dispatchEvent({type:"tooltipShow",tooltipGui:i,parentGui:this.tooltipCtrl.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){var n;const e=(n=this.tooltipComp)==null?void 0:n.getGui(),t=Os(this.beans);return!!e&&e.contains(t)}onTooltipFocusOut(e){const t=this.tooltipCtrl.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,t.contains(e.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){var t,n;const e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?(t=this.popupSvc)==null||t.positionPopupUnderMouseEvent({...e,mouseEvent:this.lastMouseEvent}):(n=this.popupSvc)==null||n.positionPopupByComponent({...e,eventSource:this.tooltipCtrl.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5})}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const e=this.tooltipPopupDestroyFunc,t=this.tooltipComp,n=this.tooltipTrigger===0?f0e:0;window.setTimeout(()=>{e(),this.destroyBean(t)},n),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){for(const e of[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener])e&&e();this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){LC=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},A4)}unlockService(){LC=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}},g0e=class extends Y7{constructor(e,t,n){super(e,n),this.highlightTracker=t,this.onHighlight=this.onHighlight.bind(this)}postConstruct(){super.postConstruct(),this.wireHighlightListeners()}wireHighlightListeners(){this.addManagedPropertyListener("tooltipTrigger",({currentValue:e})=>{this.setTooltipMode(e)}),this.setTooltipMode(this.gos.get("tooltipTrigger")),this.highlightTracker.addEventListener("itemHighlighted",this.onHighlight)}onHighlight(e){this.tooltipMode===1&&(e.highlighted?this.attemptToShowTooltip():this.attemptToHideTooltip())}setTooltipMode(e="focus"){this.tooltipMode=e==="focus"?1:0}destroy(){this.highlightTracker.removeEventListener("itemHighlighted",this.onHighlight),super.destroy()}},OC=0,m0e=200,y0e=class extends cc{constructor(){super(...arguments),this.beanName="popupSvc",this.popupList=[]}postConstruct(){this.addManagedEventListeners({stylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){const e=this.gos.get("popupParent");return e||this.getDefaultPopupParent()}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:n,nudgeY:i,skipObserver:r}=e;this.positionPopup({ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:!0,skipObserver:r,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.additionalParams,e.type,e.ePopup,null,e.mouseEvent)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:r,eventSource:o,alignSide:s="left",position:a="over",type:d}=e,h=o.getBoundingClientRect(),m=this.getParentRect();this.setAlignedTo(o,t);const v=()=>{let w=h.left-m.left;s==="right"&&(w-=t.offsetWidth-h.width);let R;return a==="over"?(R=h.top-m.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,h,m,e.nudgeY||0)==="under"?R=h.top-m.top+h.height:R=h.top-t.offsetHeight-(i||0)*2-m.top),{x:w,y:R}};this.positionPopup({ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:r,updatePosition:v,postProcessCallback:()=>this.callPostProcessPopup(e.additionalParams,d,t,o,null)})}positionPopupForMenu(e){const{eventSource:t,ePopup:n,event:i}=e,r=t.getBoundingClientRect(),o=this.getParentRect();this.setAlignedTo(t,n);let s=!1;const a=()=>{const d=this.keepXYWithinBounds(n,r.top-o.top,0),h=n.clientWidth>0?n.clientWidth:200;s||(n.style.minWidth=`${h}px`,s=!0);const v=o.right-o.left-h;let w;return this.gos.get("enableRtl")?(w=L(),w<0&&(w=R(),this.setAlignedStyles(n,"left")),w>v&&(w=0,this.setAlignedStyles(n,"right"))):(w=R(),w>v&&(w=L(),this.setAlignedStyles(n,"right")),w<0&&(w=0,this.setAlignedStyles(n,"left"))),{x:w,y:d};function R(){return r.right-o.left-2}function L(){return r.left-o.left-h}};this.positionPopup({ePopup:n,keepWithinBounds:!0,updatePosition:a,postProcessCallback:()=>this.callPostProcessPopup(e.additionalParams,"subMenu",n,t,i instanceof MouseEvent?i:void 0)})}shouldRenderUnderOrAbove(e,t,n,i){const r=n.bottom-t.bottom,o=t.top-n.top,s=e.offsetHeight+i;return r>s?"under":o>s||o>r?"above":"under"}setAlignedStyles(e,t){const n=this.getPopupIndex(e);if(n===-1)return;const i=this.popupList[n],{alignedToElement:r}=i;if(!r)return;const o=["right","left","over","above","under"];for(const s of o)r.classList.remove(`ag-has-popup-positioned-${s}`),e.classList.remove(`ag-popup-positioned-${s}`);t&&(r.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}setAlignedTo(e,t){const n=this.getPopupIndex(t);if(n!==-1){const i=this.popupList[n];i.alignedToElement=e}}positionPopup(e){const{ePopup:t,keepWithinBounds:n,nudgeX:i,nudgeY:r,skipObserver:o,updatePosition:s}=e,a={width:0,height:0},d=(h=!1)=>{let{x:m,y:v}=s();h&&t.clientWidth===a.width&&t.clientHeight===a.height||(a.width=t.clientWidth,a.height=t.clientHeight,i&&(m+=i),r&&(v+=r),n&&(m=this.keepXYWithinBounds(t,m,1),v=this.keepXYWithinBounds(t,v,0)),t.style.left=`${m}px`,t.style.top=`${v}px`,e.postProcessCallback&&e.postProcessCallback())};if(d(),!o){const h=Em(this.beans,t,()=>d(!0));setTimeout(()=>h(),m0e)}}getParentRect(){const e=Il(this.beans);let t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),G9(t)}keepXYWithinBounds(e,t,n){const i=n===0,r=i?"clientHeight":"clientWidth",o=i?"top":"left",s=i?"height":"width",a=i?"scrollTop":"scrollLeft",d=Il(this.beans),h=d.documentElement,m=this.getPopupParent(),v=e.getBoundingClientRect(),w=m.getBoundingClientRect(),R=d.documentElement.getBoundingClientRect(),L=m===d.body,O=Math.ceil(v[s]);let $=L?(i?B9:xS)(h)+h[a]:m[r];L&&($-=Math.abs(R[o]-w[o]));const U=$-O;return Math.min(Math.max(t,0),Math.max(U,0))}addPopup(e){const{eChild:t,ariaLabel:n,ariaOwns:i,alwaysOnTop:r,positionCallback:o,anchorToElement:s}=e,a=this.getPopupIndex(t);if(a!==-1)return{hideFunc:this.popupList[a].hideFunc};this.initialisePopupPosition(t);const d=this.createPopupWrapper(t,!!r,n,i),h=this.addEventListenersToPopup({...e,wrapperEl:d});return o&&o(),this.addPopupToPopupList(t,d,h,s),{hideFunc:h}}initialisePopupPosition(e){const n=this.getPopupParent().getBoundingClientRect();Dn(e.style.top)||(e.style.top=`${n.top*-1}px`),Dn(e.style.left)||(e.style.left=`${n.left*-1}px`)}createPopupWrapper(e,t,n,i){const r=this.getPopupParent(),{environment:o,gos:s}=this.beans,a=ky({tag:"div"});return o.applyThemeClasses(a),a.classList.add("ag-popup"),e.classList.add(s.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||f0(e,"dialog"),n?nx(e,n):i&&(e.id||(e.id=`popup-component-${OC}`),l4(i,e.id)),a.appendChild(e),r.appendChild(a),t?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),a}addEventListenersToPopup(e){const t=this.beans,n=Il(t),{wrapperEl:i,eChild:r,closedCallback:o,afterGuiAttached:s,closeOnEsc:a,modal:d,ariaOwns:h}=e;let m=!1;const v=O=>{if(!i.contains(Os(t)))return;O.key===kt.ESCAPE&&!this.isStopPropagation(O)&&L({keyboardEvent:O})},w=O=>L({mouseEvent:O}),R=O=>L({touchEvent:O}),L=(O={})=>{const{mouseEvent:z,touchEvent:$,keyboardEvent:U,forceHide:Y}=O;!Y&&(this.isEventFromCurrentPopup({mouseEvent:z,touchEvent:$},r)||m)||(m=!0,i.remove(),n.removeEventListener("keydown",v),n.removeEventListener("mousedown",w),n.removeEventListener("touchstart",R),n.removeEventListener("contextmenu",w),this.eventSvc.removeListener("dragStarted",w),o&&o(z||$||U),this.removePopupFromPopupList(r,h))};return s&&s({hidePopup:L}),window.setTimeout(()=>{a&&n.addEventListener("keydown",v),d&&(n.addEventListener("mousedown",w),this.eventSvc.addListener("dragStarted",w),n.addEventListener("touchstart",R),n.addEventListener("contextmenu",w))},0),L}addPopupToPopupList(e,t,n,i){this.popupList.push({element:e,wrapper:t,hideFunc:n,instanceId:OC,isAnchored:!!i}),i&&this.setPopupPositionRelatedToElement(e,i),OC=OC+1}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){const n=this.getPopupIndex(e);if(n===-1)return;const i=this.popupList[n];if(i.stopAnchoringPromise&&i.stopAnchoringPromise.then(o=>o&&o()),i.stopAnchoringPromise=void 0,i.isAnchored=!1,!t)return;const r=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:i.hideFunc});return i.stopAnchoringPromise=r,i.isAnchored=!0,r}removePopupFromPopupList(e,t){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),t&&l4(t,null),this.popupList=this.popupList.filter(n=>n.element!==e)}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),n=t.getBoundingClientRect(),{element:i,ePopup:r}=e,o=i.getBoundingClientRect(),s=v=>Number.parseInt(v.substring(0,v.length-1),10),a=(v,w)=>{const R=n[v]-o[v],L=s(r.style[v]);return{initialDiff:R,lastDiff:R,initial:L,last:L,direction:w}},d=a("top",0),h=a("left",1),m=this.beans.frameworkOverrides;return new Fr(v=>{m.wrapIncoming(()=>{wye(()=>{const w=t.getBoundingClientRect(),R=i.getBoundingClientRect();if(R.top==0&&R.left==0&&R.height==0&&R.width==0){e.hidePopup();return}const O=(z,$)=>{const U=s(r.style[$]);z.last!==U&&(z.initial=U,z.last=U);const Y=w[$]-R[$];if(Y!=z.lastDiff){const X=this.keepXYWithinBounds(r,z.initial+z.initialDiff-Y,z.direction);r.style[$]=`${X}px`,z.last=X}z.lastDiff=Y};O(d,"top"),O(h,"left")},200).then(w=>{v(()=>{w!=null&&window.clearInterval(w)})})},"popupPositioning")})}isEventFromCurrentPopup(e,t){const{mouseEvent:n,touchEvent:i}=e,r=n||i;if(!r)return!1;const o=this.getPopupIndex(t);if(o===-1)return!1;for(let s=o;s<this.popupList.length;s++){const a=this.popupList[s];if(Qge(a.element,r))return!0}return this.isElementWithinCustomPopup(r.target)}isElementWithinCustomPopup(e){const t=Il(this.beans);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const n=this.getWrapper(e);n&&(n.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(n))}bringPopupToFront(e){const t=this.getPopupParent(),n=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),i=n.length,r=this.getWrapper(e);if(!r||i<=1||!t.contains(e))return;const o=[],s=[];for(const w of n)w!==r&&(w.classList.contains("ag-always-on-top")?s.push(w):o.push(w));const a=[],d=s.length,v=r.classList.contains("ag-always-on-top")||!d?[...o,...s,r]:[...o,r,...s];for(let w=0;w<=i;w++){const R=v[w];if(n[w]===v[w]||R===r)continue;const L=R.querySelectorAll("div");for(const O of L)O.scrollTop!==0&&a.push([O,O.scrollTop]);w===0?t.insertAdjacentElement("afterbegin",R):v[w-1].insertAdjacentElement("afterend",R)}for(;a.length;){const w=a.pop();w[0].scrollTop=w[1]}}handleThemeChange(e){if(e.themeChanged){const t=this.beans.environment;for(const n of this.popupList)t.applyThemeClasses(n.wrapper)}}},v0e=class extends FF{constructor(){super({tag:"div",cls:"ag-tooltip"})}init(e){const{value:t}=e,n=this.getGui();n.textContent=kx(t);const i=e.location.replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase();n.classList.add(`ag-${i}-tooltip`)}},X7=(e,t)=>{if(t!=null&&(e!=null&&e.setPointerCapture))try{return e.setPointerCapture(t),e.hasPointerCapture(t)}catch{}return!1},b0e=(e,t)=>{if(typeof PointerEvent>"u"||!(t instanceof PointerEvent))return null;const n=t.pointerId;if(!X7(e,n))return null;const i={eElement:e,pointerId:n,onLost(r){w0e(i,r)}};return e.addEventListener("lostpointercapture",i.onLost),i},x0e=e=>{if(!e)return;J7(e);const{eElement:t,pointerId:n}=e;if(t){try{t.releasePointerCapture(n)}catch{}e.eElement=null}},J7=e=>{const{eElement:t,onLost:n}=e;t&&n&&(t.removeEventListener("lostpointercapture",n),e.onLost=null)},w0e=(e,t)=>{J7(e);const{eElement:n,pointerId:i}=e;n&&t.pointerId===i&&X7(n,i)},vp,Sp,MA={passive:!0},xy={passive:!1},bp=e=>{if(!Sp)Sp=new WeakSet;else if(Sp.has(e))return!1;return Sp.add(e),!0},C0e=class extends cc{constructor(){super(...arguments),this.beanName="dragSvc",this.dragging=!1,this.drag=null,this.dragSources=[]}get startTarget(){var e;return((e=this.drag)==null?void 0:e.start.target)??null}isPointer(){return!!(vp!=null&&vp.has(wp(this.beans)))}hasPointerCapture(){var t,n,i;const e=(t=this.drag)==null?void 0:t.pointerCapture;return!!(e&&((i=(n=this.beans.eRootDiv).hasPointerCapture)!=null&&i.call(n,e.pointerId)))}destroy(){this.drag&&this.cancelDrag();const e=this.dragSources;for(const t of e)k4(t);e.length=0,super.destroy()}removeDragSource(e){const t=this.dragSources;for(let n=0,i=t.length;n<i;++n){const r=t[n];if(r.params===e){t.splice(n,1),k4(r);break}}}addDragSource(e){if(!this.isAlive())return;const{eElement:t,includeTouch:n}=e,i=[];let r;if(n){const h=t.style;h&&(r=h.touchAction,h.touchAction="none")}const o={handlers:i,params:e,oldTouchAction:r};this.dragSources.push(o),o_(i,[t,"pointerdown",h=>this.onPointerDown(e,h),xy],[t,"mousedown",h=>this.onMouseDown(e,h)]);const d=this.gos.get("suppressTouch");n&&!d&&o_(i,[t,"touchstart",m=>this.onTouchStart(e,m),xy])}cancelDrag(e){var n,i;const t=this.drag;e??(e=t==null?void 0:t.eElement),e&&this.eventSvc.dispatchEvent({type:"dragCancelled",target:e}),(i=t==null?void 0:(n=t.params).onDragCancel)==null||i.call(n),this.destroyDrag()}shouldPreventMouseEvent(e){const t=e.type;return(t==="mousemove"||t==="pointermove")&&e.cancelable&&a1(this.beans,e)&&!Pw(LA(e))}initDrag(e,...t){this.drag=e;const n=this.beans,i=a=>this.onScroll(a),r=a=>this.onKeyDown(a),o=wp(n),s=Il(n);o_(e.handlers,[o,"contextmenu",Cb],[o,"keydown",r],[s,"scroll",i,{capture:!0}],[s.defaultView||window,"scroll",i],...t)}destroyDrag(){this.dragging=!1;const e=this.drag;if(e){const t=e.rootEl;(vp==null?void 0:vp.get(t))===e&&vp.delete(t),this.drag=null,x0e(e.pointerCapture),SF(e.handlers)}}onPointerDown(e,t){if(this.isPointer())return;const n=this.beans;if(Sp!=null&&Sp.has(t))return;const i=t.pointerType;if(i==="touch"&&(n.gos.get("suppressTouch")||!e.includeTouch||(e.stopPropagationForTouch&&t.stopPropagation(),Pw(LA(t))))||!t.isPrimary||i==="mouse"&&t.button!==0)return;this.destroyDrag();const r=wp(n),o=e.eElement,s=t.pointerId,a=new IA(r,e,t,s);vp??(vp=new WeakMap),vp.set(r,a);const d=w=>{w.pointerId===s&&this.onMouseOrPointerMove(w)},h=w=>{w.pointerId===s&&this.onMouseOrPointerUp(w)},m=w=>{w.pointerId===s&&bp(w)&&this.cancelDrag()},v=w=>this.draggingPreventDefault(w);this.initDrag(a,[r,"pointerup",h],[r,"pointercancel",m],[r,"pointermove",d,xy],[r,"touchmove",v,xy],[o,"mousemove",v,xy]),e.dragStartPixels===0?this.onMouseOrPointerMove(t):bp(t)}onTouchStart(e,t){if(this.gos.get("suppressTouch")||!e.includeTouch||!bp(t)||Pw(LA(t)))return;if(e.stopPropagationForTouch&&t.stopPropagation(),this.isPointer()){this.dragging&&Cb(t);return}this.destroyDrag();const i=this.beans,r=wp(i),o=new IA(r,e,t.touches[0]),s=w=>this.onTouchMove(w),a=w=>this.onTouchUp(w),d=w=>this.onTouchCancel(w),h=w=>this.draggingPreventDefault(w),m=wp(i),v=t.target??e.eElement;this.initDrag(o,[v,"touchmove",s,MA],[v,"touchend",a,MA],[v,"touchcancel",d,MA],[m,"touchmove",h,xy],[m,"touchend",a,xy],[m,"touchcancel",d,xy]),e.dragStartPixels===0&&this.onMove(o.start)}draggingPreventDefault(e){this.dragging&&Cb(e)}onMouseDown(e,t){if(t.button!==0||Sp!=null&&Sp.has(t)||this.isPointer())return;const n=this.beans;this.destroyDrag();const i=new IA(wp(n),e,t),r=a=>this.onMouseOrPointerMove(a),o=a=>this.onMouseOrPointerUp(a),s=wp(n);this.initDrag(i,[s,"mousemove",r],[s,"mouseup",o]),e.dragStartPixels===0?this.onMouseOrPointerMove(t):bp(t)}onScroll(e){var i,r;if(!bp(e))return;const t=this.drag,n=t==null?void 0:t.lastDrag;n&&this.dragging&&((r=(i=t.params)==null?void 0:i.onDragging)==null||r.call(i,n))}onMouseOrPointerMove(e){var t;bp(e)&&(Wy()&&((t=Il(this.beans).getSelection())==null||t.removeAllRanges()),this.shouldPreventMouseEvent(e)&&Cb(e),this.onMove(e))}onTouchCancel(e){const t=this.drag;!t||!bp(e)||Pb(t.start,e.changedTouches)&&this.cancelDrag()}onTouchMove(e){const t=this.drag;if(!t||!bp(e))return;const n=Pb(t.start,e.touches);n&&(this.onMove(n),this.draggingPreventDefault(e))}onMove(e){var i,r,o;const t=this.drag;if(!t)return;t.lastDrag=e;const n=t.params;if(!this.dragging){const s=t.start,d=n.dragStartPixels??4;if($9(e,s,d)||(this.dragging=!0,n.capturePointer&&(t.pointerCapture=b0e(this.beans.eRootDiv,e)),this.eventSvc.dispatchEvent({type:"dragStarted",target:n.eElement}),(i=n.onDragStart)==null||i.call(n,s),this.drag!==t)||((r=n.onDragging)==null||r.call(n,s),this.drag!==t))return}(o=n.onDragging)==null||o.call(n,e)}onTouchUp(e){const t=this.drag;t&&bp(e)&&this.onUp(Pb(t.start,e.changedTouches))}onMouseOrPointerUp(e){bp(e)&&this.onUp(e)}onUp(e){var n,i;const t=this.drag;t&&(e||(e=t.lastDrag),e&&this.dragging&&(this.dragging=!1,(i=(n=t.params).onDragStop)==null||i.call(n,e),this.eventSvc.dispatchEvent({type:"dragStopped",target:t.params.eElement})),this.destroyDrag())}onKeyDown(e){e.key===kt.ESCAPE&&this.cancelDrag()}},k4=e=>{SF(e.handlers);const t=e.oldTouchAction;if(t!=null){const n=e.params.eElement.style;n&&(n.touchAction=t)}},IA=class{constructor(e,t,n,i=null){this.rootEl=e,this.params=t,this.start=n,this.pointerId=i,this.handlers=[],this.lastDrag=null,this.pointerCapture=null,this.eElement=t.eElement}},LA=e=>{const t=e.target;return t instanceof Element?t:null},_0e=class extends cc{constructor(){super(...arguments),this.beanName="dragAndDrop",this.dragSourceAndParamsList=[],this.dragItem=null,this.dragInitialSourcePointerOffsetX=0,this.dragInitialSourcePointerOffsetY=0,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.dragSource=null,this.dragImageCompPromise=null,this.dragImageComp=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.dropTargets=[],this.externalDropZoneCount=0,this.lastDropTarget=null}addDragSource(e,t=!1){const n={capturePointer:!0,dragSource:e,eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:i=>this.onDragStart(e,i),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push(n),this.beans.dragSvc.addDragSource(n)}setDragImageCompIcon(e,t=!1){const n=this.dragImageComp;n&&(t||this.dragImageLastIcon!==e)&&(this.dragImageLastIcon=e,n.setIcon(e,t))}removeDragSource(e){var i;const{dragSourceAndParamsList:t,beans:n}=this;for(let r=0,o=t.length;r<o;r++)if(t[r].dragSource===e){const s=t[r];(i=n.dragSvc)==null||i.removeDragSource(s),t.splice(r,1);break}}destroy(){const{dragSourceAndParamsList:e,dropTargets:t,beans:n}=this,i=n.dragSvc;for(const r of e)i==null||i.removeDragSource(r);e.length=0,t.length=0,this.externalDropZoneCount=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){const e=this.lastMouseEvent;e&&this.onDragging(e,!0)}onDragStart(e,t){var i;this.lastMouseEvent=t,this.dragSource=e,this.dragItem=e.getDragItem();const n=e.eElement.getBoundingClientRect();this.dragInitialSourcePointerOffsetX=t.clientX-n.left,this.dragInitialSourcePointerOffsetY=t.clientY-n.top,(i=e.onDragStarted)==null||i.call(e),this.createAndUpdateDragImageComp(e)}onDragStop(e){var i,r;const{dragSource:t,lastDropTarget:n}=this;if((i=t==null?void 0:t.onDragStopped)==null||i.call(t),n){const o=this.dropTargetEvent(n,e,!1);(r=n.onDragStop)==null||r.call(n,o)}this.clearDragAndDropProperties()}onDragCancel(){var i,r;const{dragSource:e,lastDropTarget:t,lastMouseEvent:n}=this;if((i=e==null?void 0:e.onDragCancelled)==null||i.call(e),t&&n){const o=this.dropTargetEvent(t,n,!1);(r=t.onDragCancel)==null||r.call(t,o)}this.clearDragAndDropProperties()}onDragging(e,t=!1){var a,d,h;this.positionDragImageComp(e);const n=this.findCurrentDropTarget(e),{lastDropTarget:i,dragSource:r,dragItem:o}=this;let s=!1;if(n!==i){if(s=!0,i){const m=this.dropTargetEvent(i,e,t);(a=i.onDragLeave)==null||a.call(i,m)}if(i!==null&&!n?this.handleExit(r,o):i===null&&n&&this.handleEnter(r,o),n){const m=this.dropTargetEvent(n,e,t);(d=n.onDragEnter)==null||d.call(n,m)}this.lastDropTarget=n}else if(n){const m=this.dropTargetEvent(n,e,t);(h=n.onDragging)==null||h.call(n,m),m!=null&&m.changed&&(s=!0)}this.lastMouseEvent=e,s&&this.updateDragImageComp()}clearDragAndDropProperties(){this.removeDragImageComp(this.dragImageComp),this.dragImageCompPromise=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.lastDropTarget=null,this.dragItem=null,this.dragInitialSourcePointerOffsetX=0,this.dragInitialSourcePointerOffsetY=0,this.dragSource=null}getAllContainersFromDropTarget(e){var o;const t=e.getContainer(),n=(o=e.getSecondaryContainers)==null?void 0:o.call(e),i=n==null?void 0:n.length;if(!i)return[[t]];const r=new Array(i+1);r[0]=[t];for(let s=0;s<i;++s)r[s+1]=n[s];return r}isMouseOnDropTarget(e,t){const n=this.getAllContainersFromDropTarget(t);let i=!1;const r=(a,d)=>{for(const h of d){const{width:m,height:v,left:w,right:R,top:L,bottom:O}=h.getBoundingClientRect();if(m===0||v===0)return!1;const z=a.clientX>=w&&a.clientX<R,$=a.clientY>=L&&a.clientY<O;if(!z||!$)return!1}return!0};for(const a of n)if(r(e,a)){i=!0;break}const{eElement:o,type:s}=this.dragSource;return t.targetContainsSource&&!t.getContainer().contains(o)?!1:i&&t.isInterestedIn(s,o)}findCurrentDropTarget(e){const t=[],n=this.dropTargets;for(let s=0,a=n.length;s<a;++s){const d=n[s];this.isMouseOnDropTarget(e,d)&&t.push(d)}const i=t.length;if(i===0)return null;if(i===1)return t[0];const o=wp(this.beans).elementsFromPoint(e.clientX,e.clientY);for(let s=0,a=o.length;s<a;++s){const d=o[s];for(let h=0,m=t.length;h<m;h++){const v=t[h],w=this.getAllContainersFromDropTarget(v);let R=!1;for(let L=0,O=w.length;L<O&&!R;L++){const z=w[L];for(let $=0,U=z.length;$<U;$++)if(z[$]===d){R=!0;break}}if(R)return v}}return null}addDropTarget(e){this.dropTargets.push(e),e.external&&this.externalDropZoneCount++}removeDropTarget(e){const t=e.getContainer(),n=this.dropTargets;let i=0;for(let r=0,o=n.length;r<o;++r){const s=n[r];if(s.getContainer()===t){s.external&&--this.externalDropZoneCount;continue}i!==r&&(n[i]=s),++i}n.length=i}hasExternalDropZones(){return this.externalDropZoneCount>0}findExternalZone(e){const t=this.dropTargets;for(let n=0,i=t.length;n<i;++n){const r=t[n];if(r.external&&r.getContainer()===e)return r}return null}dropTargetEvent(e,t,n){const{dragSource:i,dragItem:r,lastDraggingEvent:o,lastMouseEvent:s,dragInitialSourcePointerOffsetX:a,dragInitialSourcePointerOffsetY:d}=this,h=e.getContainer(),m=h.getBoundingClientRect(),{clientX:v,clientY:w}=t,R=v-((s==null?void 0:s.clientX)||0),L=w-((s==null?void 0:s.clientY)||0),O=this.createEvent({event:t,x:v-m.left,y:w-m.top,vDirection:L>0?"down":L<0?"up":null,hDirection:R<0?"left":R>0?"right":null,initialSourcePointerOffsetX:a,initialSourcePointerOffsetY:d,dragSource:i,fromNudge:n,dragItem:r,dropZoneTarget:h,dropTarget:(o==null?void 0:o.dropTarget)??null,changed:!!(o!=null&&o.changed)});return this.lastDraggingEvent=O,O}positionDragImageComp(e){var n;const t=(n=this.dragImageComp)==null?void 0:n.getGui();t&&rme(t,e,this.beans)}removeDragImageComp(e){var t;this.dragImageComp===e&&(this.dragImageComp=null),e&&((t=e.getGui())==null||t.remove(),this.destroyBean(e))}createAndUpdateDragImageComp(e){const t=this.createDragImageComp(e)??null;this.dragImageCompPromise=t,t==null||t.then(n=>{if(t!==this.dragImageCompPromise||!this.lastMouseEvent||!this.isAlive()){this.destroyBean(n);return}this.dragImageCompPromise=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0;const i=this.dragImageComp;i!==n&&(this.dragImageComp=n,this.removeDragImageComp(i)),n&&(this.appendDragImageComp(n),this.updateDragImageComp())})}appendDragImageComp(e){var r;const t=e.getGui(),n=t.style;n.position="absolute",n.zIndex="9999",(r=this.beans.dragSvc)!=null&&r.hasPointerCapture()&&(n.pointerEvents="none"),this.gos.setInstanceDomData(t),this.beans.environment.applyThemeClasses(t),n.top="20px",n.left="20px";const i=mF(this.beans);i?i.appendChild(t):this.warnNoBody()}updateDragImageComp(){var s;const{dragImageComp:e,dragSource:t,lastDropTarget:n,lastDraggingEvent:i,dragImageLastLabel:r}=this;if(!e)return;this.setDragImageCompIcon(((s=n==null?void 0:n.getIconName)==null?void 0:s.call(n,i))??null);let o=t==null?void 0:t.dragItemName;typeof o=="function"&&(o=o(i)),o||(o=""),r!==o&&(this.dragImageLastLabel=o,e.setLabel(o))}},S0e=class extends cc{constructor(e,t){super(),this.comp=e,this.stopPropagationCallbacks=t}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:t,eBottomGuard:n,eFocusableElement:i,stopPropagationCallbacks:r}=this,o=[t,n],s={setTabIndex:$=>{for(const U of o)$==null?U.removeAttribute("tabindex"):U.setAttribute("tabindex",$)}};this.addTabGuards(t,n);const{focusTrapActive:a=!1,onFocusIn:d,onFocusOut:h,focusInnerElement:m,handleKeyDown:v,onTabKeyDown:w,shouldStopEventPropagation:R,isEmpty:L,forceFocusOutWhenTabGuardsAreEmpty:O,isFocusableContainer:z}=e;this.tabGuardCtrl=this.createManagedBean(new z7({comp:s,focusTrapActive:a,eTopGuard:t,eBottomGuard:n,eFocusableElement:i,onFocusIn:d,onFocusOut:h,focusInnerElement:m,handleKeyDown:v,onTabKeyDown:w,shouldStopEventPropagation:R,isEmpty:L,forceFocusOutWhenTabGuardsAreEmpty:O,isFocusableContainer:z},r))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){const t=Il(this.beans).createElement("div"),n=e==="top"?Bb.TAB_GUARD_TOP:Bb.TAB_GUARD_BOTTOM;return t.classList.add(Bb.TAB_GUARD,n),f0(t,"presentation"),t}addTabGuards(e,t){const n=this.eFocusableElement;n.prepend(e),n.append(t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];jc(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,n){_F(t)||(t=t.getGui());const{eBottomGuard:i}=this;i?i.before(t):e(t,n)}destroy(){const{eTopGuard:e,eBottomGuard:t}=this;Iy(e),Iy(t),super.destroy()}},E0e=class extends Fx{initialiseTabGuard(e,t){this.tabGuardFeature=this.createManagedBean(new S0e(this,t)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(e=!1){this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,t){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,t)}},R0e=class extends _0e{createEvent(e){return ki(this.gos,e)}createDragImageComp(e){const{gos:t,beans:n}=this,i=Bye(n.userCompFactory,ki(t,{dragSource:e}));return i==null?void 0:i.newAgStackInstance()}handleEnter(e,t){var n;(n=e==null?void 0:e.onGridEnter)==null||n.call(e,t)}handleExit(e,t){var n;(n=e==null?void 0:e.onGridExit)==null||n.call(e,t)}warnNoBody(){an(54)}isDropZoneWithinThisGrid(e){return this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody.contains(e.dropZoneTarget)}registerGridDropTarget(e,t){const n={getContainer:e,isInterestedIn:i=>i===1||i===0,getIconName:()=>"notAllowed"};this.addDropTarget(n),t.addDestroyFunc(()=>this.removeDropTarget(n))}};function Q7(e,t){return e+"_"+t}function Sa(e){return e instanceof h1}var h1=class extends Yt{constructor(e,t,n,i){super(),this.providedColumnGroup=e,this.groupId=t,this.partId=n,this.pinned=i,this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.colIdSanitised=kw(this.getUniqueId())}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}getUniqueId(){return Q7(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){for(const e of this.displayedChildren)Sa(e)&&e.checkLeft();if(this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const t=Wo(this.displayedChildren).getLeft();this.setLeft(t)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;for(const t of this.displayedChildren??[])e+=t.getActualWidth();return e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;for(const t of this.displayedChildren)t.isResizable()&&(e=!0);return e}getMinWidth(){let e=0;for(const t of this.displayedChildren)e+=t.getMinWidth();return e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){var e;return!!((e=this.getColGroupDef())!=null&&e.autoHeaderHeight)}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){for(const t of this.displayedChildren??[])zy(t)?e.push(t):Sa(t)&&t.addDisplayedLeafColumns(e)}addLeafColumns(e){for(const t of this.children??[])zy(t)?e.push(t):Sa(t)&&t.addLeafColumns(e)}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return!this.isPadding()||!(e!=null&&e.isPadding())?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){var n;this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}for(const i of this.children??[]){if(Sa(i)&&!((n=i.displayedChildren)!=null&&n.length))continue;switch(i.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(i);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(i);break;default:this.displayedChildren.push(i);break}}this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},P4="row-group-",GF="t-",jF="b-",A0e=0,Ny=class{constructor(e){this.id=void 0,this.destroyed=!1,this._groupData=void 0,this.master=!1,this.detail=void 0,this.rowIndex=null,this.field=null,this.rowGroupColumn=null,this.key=null,this.sourceRowIndex=-1,this._leafs=void 0,this.childrenMapped=null,this.treeParent=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=A0e++,this.alreadyRendered=!1,this.formulaRowIndex=null,this.hovered=!1,this.__selected=!1,this.beans=e}get groupData(){var t,n;const e=this._groupData;return e!==void 0?e:this.footer?(t=this.sibling)==null?void 0:t.groupData:((n=this.beans.groupStage)==null?void 0:n.loadGroupData(this))??null}set groupData(e){this._groupData=e}get allLeafChildren(){var t,n;const e=this._leafs;return e===void 0?((n=(t=this.beans.groupStage)==null?void 0:t.loadLeafs)==null?void 0:n.call(t,this))??null:e}set allLeafChildren(e){this._leafs=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){var a,d,h;const{valueCache:n,eventSvc:i}=this.beans,r=this.data;this.data=e,n==null||n.onDataChanged(),this.updateDataOnDetailNode(),this.resetQuickFilterAggregateText();const o=this.createDataChangedEvent(e,r,t);if((a=this.__localEventService)==null||a.dispatchEvent(o),this.sibling){this.sibling.data=e;const m=this.sibling.createDataChangedEvent(e,r,t);(d=this.sibling.__localEventService)==null||d.dispatchEvent(m)}i.dispatchEvent({type:"rowNodeDataChanged",node:this});const s=this.pinnedSibling;s&&(s.data=e,(h=s.__localEventService)==null||h.dispatchEvent(s.createDataChangedEvent(e,r,t)),i.dispatchEvent({type:"rowNodeDataChanged",node:s}))}updateDataOnDetailNode(){const e=this.detailNode;e&&(e.data=this.data)}createDataChangedEvent(e,t,n){return{type:"dataChanged",node:this,oldData:t,newData:e,update:n}}getRowIndexString(){return this.rowIndex==null?(Do(13),null):this.rowPinned==="top"?GF+this.rowIndex:this.rowPinned==="bottom"?jF+this.rowIndex:this.rowIndex.toString()}setDataAndId(e,t){var s,a;const{selectionSvc:n}=this.beans,i=(s=n==null?void 0:n.createDaemonNode)==null?void 0:s.call(n,this),r=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),n&&(n.updateRowSelectable(this),n.syncInRowNode(this,i));const o=this.createDataChangedEvent(e,r,!1);(a=this.__localEventService)==null||a.dispatchEvent(o)}setId(e){var n;const t=ix(this.beans.gos);if(t)if(this.data){const i=((n=this.parent)==null?void 0:n.getRoute())??[];this.id=t({data:this.data,parentKeys:i.length>0?i:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(P4)&&Do(14,{groupPrefix:P4})}else this.id=void 0;else this.id=e}setRowTop(e){if(this.oldRowTop=this.rowTop,this.rowTop===e)return;this.rowTop=e,this.dispatchRowEvent("topChanged");const t=e!==null;this.displayed!==t&&(this.displayed=t,this.dispatchRowEvent("displayedChanged"))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(e){this.hovered=e}isHovered(){return this.hovered}setRowHeight(e,t=!1){this.rowHeight=e,this.rowHeightEstimated=t,this.dispatchRowEvent("heightChanged")}setExpanded(e,t,n){var i;(i=this.beans.expansionSvc)==null||i.setExpanded(this,e,t,n)}setDataValue(e,t,n){var m;const{colModel:i,valueSvc:r,gos:o,editSvc:s}=this.beans,a=typeof e!="string"?e:i.getCol(e)??i.getColDefCol(e);if(!a)return!1;const d=r.getValueForDisplay({column:a,node:this,source:"api"}).value;if(o.get("readOnlyEdit")){const{beans:{eventSvc:v},data:w,rowIndex:R,rowPinned:L}=this;return v.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:R,rowPinned:L,column:a,colDef:a.colDef,data:w,node:this,oldValue:d,newValue:t,value:t,source:n}),!1}if(s&&!s.committing){const v=s.setDataValue({rowNode:this,column:a},t,n);if(v!=null)return v}const h=r.setValue(this,a,t,n);return this.dispatchCellChangedEvent(a,t,d),h&&((m=this.pinnedSibling)==null||m.dispatchCellChangedEvent(a,t,d)),h}updateHasChildren(){var n;let e=this.group&&!this.footer||!!((n=this.childrenAfterGroup)!=null&&n.length);const{rowChildrenSvc:t}=this.beans;t&&(e=t.getHasChildrenValue(this)),e!==this.__hasChildren&&(this.__hasChildren=!!e,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(e,t,n){var r;const i={type:"cellChanged",node:this,column:e,newValue:t,oldValue:n};(r=this.__localEventService)==null||r.dispatchEvent(i)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){var e;return((e=this.beans.expansionSvc)==null?void 0:e.isExpandable(this))??!1}isSelected(){if(this.footer)return this.sibling.isSelected();const e=this.rowPinned&&this.pinnedSibling;return e?e.isSelected():this.__selected}depthFirstSearch(e){const t=this.childrenAfterGroup;if(t)for(let n=0,i=t.length;n<i;++n)t[n].depthFirstSearch(e);e(this)}dispatchRowEvent(e){var t;(t=this.__localEventService)==null||t.dispatchEvent({type:e,node:this})}setSelected(e,t=!1,n="api"){var i;(i=this.beans.selectionSvc)==null||i.setNodesSelected({nodes:[this],newValue:e,clearSelection:t,source:n})}isRowPinned(){return!!this.rowPinned}__addEventListener(e,t){(this.__localEventService??(this.__localEventService=new h0)).addEventListener(e,t)}__removeEventListener(e,t){this.removeLocalListener(e,t)}addEventListener(e,t){var r,o,s,a;(r=this.beans.validation)==null||r.checkRowEvents(e);const n=this.__localEventService??(this.__localEventService=new h0);this.frameworkEventListenerService=(s=(o=this.beans.frameworkOverrides).createLocalEventListenerWrapper)==null?void 0:s.call(o,this.frameworkEventListenerService,n);const i=((a=this.frameworkEventListenerService)==null?void 0:a.wrap(e,t))??t;n.addEventListener(e,i)}removeEventListener(e,t){var i;const n=((i=this.frameworkEventListenerService)==null?void 0:i.unwrap(e,t))??t;this.removeLocalListener(e,n)}removeLocalListener(e,t){const n=this.__localEventService;n&&(n.removeEventListener(e,t),n.noRegisteredListenersExist()&&(this.__localEventService=null))}isFullWidthCell(){if(an(61),this.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this}):!1}getRoute(){if(this.level===-1)return[];if(this.key==null)return;const e=[];let t=this;for(;(t==null?void 0:t.key)!=null;)e.push(t.key),t=t.parent;return e.reverse()}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.dispatchRowEvent("rowIndexChanged"))}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.dispatchRowEvent("allChildrenCountChanged"))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.dispatchRowEvent("uiLevelChanged"))}getFirstChild(){var t;const e=this.childStore;return e?e.getFirstNode():((t=this.childrenAfterSort)==null?void 0:t[0])??null}_destroy(e){if(this.destroyed)return!1;if(this.destroyed=!0,e?this.clearRowTopAndRowIndex():(this.setRowTop(null),this.setRowIndex(null)),!this.footer){const t=this.detailNode;t&&t._destroy(e);const n=this.sibling;n&&n._destroy(e)}return!0}};function T0e(e,t,n){return ki(t,{type:n,node:e,data:e.data,rowIndex:e.rowIndex,rowPinned:e.rowPinned})}var k0e=new Set(["__autoHeights","__checkAutoHeightsDebounced","__localEventService","__objectId","_groupData","_leafs","childStore","groupValue","oldRowTop","sticky","treeNodeFlags","treeParent"]),P0e=(e,t)=>{const n=new Ny(t);for(const i of Object.keys(e))k0e.has(i)||(n[i]=e[i]);return n.oldRowTop=null,n},Ok=(e,t,n)=>{if(!n)return;let i=n.rowIndex;if(i==null)return;i+=t;const r=e.getRowCount();for(;i>=0&&i<r;){const o=e.getRow(i);if(!o||!o.footer&&!o.detail)return o;i+=t}},eH={agSetColumnFilter:"agSetColumnFilterHandler",agMultiColumnFilter:"agMultiColumnFilterHandler",agGroupColumnFilter:"agGroupColumnFilterHandler",agNumberColumnFilter:"agNumberColumnFilterHandler",agDateColumnFilter:"agDateColumnFilterHandler",agTextColumnFilter:"agTextColumnFilterHandler"},D0e=new Set(Object.values(eH));function wy(e,t){const n=e.filterUi;if(!n)return null;if(n.created)return n.promise;if(t)return null;const i=n.create(n.refreshed),r=n;return r.created=!0,r.promise=i,i}function F0e(e,t,n,i,r,o,s){var a;return(a=t.refresh)==null||a.call(t,{...n,model:i,source:o,additionalEventAttributes:s}),e().then(d=>{if(d){const{filter:h,filterParams:m}=d;tH(h,m,i,r,o,s)}})}function tH(e,t,n,i,r,o){var s;(s=e==null?void 0:e.refresh)==null||s.call(e,{...t,model:n,state:i,source:r,additionalEventAttributes:o})}function nH(e,t,n,i){const r=e();r!=null&&r.created&&r.promise.then(o=>{const s=t();tH(o,r.filterParams,s,n()??{model:s},"ui",i)})}function D4(e){var w;let t,n=!1,i;const{action:r,filterParams:o,getFilterUi:s,getModel:a,getState:d,updateState:h,updateModel:m,processModelToApply:v}=e;switch(r){case"apply":{const R=d();i=(R==null?void 0:R.model)??null,v&&(i=v(i)),t={state:R==null?void 0:R.state,model:i},n=!0;break}case"clear":{t={model:null},(w=o==null?void 0:o.buttons)!=null&&w.includes("apply")||(n=!0,i=null);break}case"reset":{t={model:null},n=!0,i=null;break}case"cancel":{t={model:a()};break}}h(t),n?m(i):nH(s,a,d,{fromAction:r})}function kl(e,t){return e[t]??null}function _h(e){return ky(e)}function M0e(e){return{tag:"div",cls:e}}var I0e=class extends ra{constructor(e){const{className:t="ag-filter-apply-panel"}=e??{};super(M0e(t)),this.listeners=[],this.validationMessage=null,this.className=t}updateButtons(e,t){const n=this.buttons;if(this.buttons=e,n===e)return;const i=this.getGui();jc(i);let r;this.destroyListeners();const o=document.createDocumentFragment(),s=this.className,a=({type:h,label:m})=>{const v=$=>{this.dispatchLocalEvent({type:h,event:$})};["apply","clear","reset","cancel"].includes(h)||an(75);const w=h==="apply",L=_h({tag:"button",attrs:{type:w&&t?"submit":"button"},ref:`${h}FilterButton`,cls:`ag-button ag-standard-button ${s}-button${w?" "+s+"-apply-button":""}`,children:m});this.activateTabIndex([L]),w&&(r=L);const O=$=>{$.key===kt.ENTER&&($.preventDefault(),v($))},z=this.listeners;L.addEventListener("click",v),z.push(()=>L.removeEventListener("click",v)),L.addEventListener("keydown",O),z.push(()=>L.removeEventListener("keydown",O)),o.append(L)};for(const h of e)a(h);this.eApply=r;const d=this.validationTooltipFeature;r&&!d?this.validationTooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eApply,getLocation:()=>"advancedFilter",getTooltipShowDelayOverride:()=>1e3})):!r&&d&&(this.validationTooltipFeature=this.destroyBean(d)),i.append(o)}getApplyButton(){return this.eApply}updateValidity(e,t=null){var i;const n=this.eApply;n&&(o1(n,!e),this.validationMessage=t,(i=this.validationTooltipFeature)==null||i.setTooltipAndRefresh(this.validationMessage))}destroyListeners(){for(const e of this.listeners)e();this.listeners=[]}destroy(){this.destroyListeners(),super.destroy()}},L0e={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd",filterSummaryInactive:"is (All)",filterSummaryContains:"contains",filterSummaryNotContains:"does not contain",filterSummaryTextEquals:"equals",filterSummaryTextNotEqual:"does not equal",filterSummaryStartsWith:"begins with",filterSummaryEndsWith:"ends with",filterSummaryBlank:"is blank",filterSummaryNotBlank:"is not blank",filterSummaryEquals:"=",filterSummaryNotEqual:"!=",filterSummaryGreaterThan:">",filterSummaryGreaterThanOrEqual:">=",filterSummaryLessThan:"<",filterSummaryLessThanOrEqual:"<=",filterSummaryInRange:"between",filterSummaryInRangeValues:e=>`(${e[0]}, ${e[1]})`,filterSummaryTextQuote:e=>`"${e[0]}"`,minDateValidation:e=>`Date must be after ${e[0]}`,maxDateValidation:e=>`Date must be before ${e[0]}`,strictMinValueValidation:e=>`Must be greater than ${e[0]}`,strictMaxValueValidation:e=>`Must be less than ${e[0]}`};function Ap(e,t,n){return sme(e,L0e,t,n)}function HF(e,t){const{debounceMs:n}=e;return Y2(e)?(n!=null&&an(71),0):n??t}function Y2(e){var t;return(((t=e.buttons)==null?void 0:t.indexOf("apply"))??-1)>=0}function iH(e,t,n,i){let r=Ap(e,n);if(typeof t=="function"){const o=Ap(e,i);r=t({filterOptionKey:i,filterOption:o,placeholder:r})}else typeof t=="string"&&(r=t);return r}var O0e=class extends ra{constructor(e,t,n,i,r,o){super(),this.column=e,this.wrapper=t,this.eventParent=n,this.updateModel=i,this.isGlobalButtons=r,this.enableGlobalButtonCheck=o,this.hidePopup=null,this.applyActive=!1}postConstruct(){const{comp:e,params:t}=this.wrapper,n=t,i=n.useForm,r=i?"form":"div";this.setTemplate({tag:r,cls:"ag-filter-wrapper"}),i&&this.addManagedElementListeners(this.getGui(),{submit:o=>{o==null||o.preventDefault()},keydown:this.handleKeyDown.bind(this)}),this.appendChild(e.getGui()),this.params=n,this.resetButtonsPanel(n),this.addManagedListeners(this.eventParent,{filterParamsChanged:({column:o,params:s})=>{o===this.column&&this.resetButtonsPanel(s,this.params)},filterStateChanged:({column:o,state:s})=>{var a;o===this.column&&((a=this.eButtons)==null||a.updateValidity(s.valid!==!1))},filterAction:({column:o,action:s,event:a})=>{o===this.column&&this.afterAction(s,a)},...this.enableGlobalButtonCheck?{filterGlobalButtons:({isGlobal:o})=>{if(o!==this.isGlobalButtons){this.isGlobalButtons=o;const s=this.params;this.resetButtonsPanel(s,s,!0)}}}:void 0})}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup)}resetButtonsPanel(e,t,n){const{buttons:i,readOnly:r}=t??{},{buttons:o,readOnly:s,useForm:a}=e;if(!n&&r===s&&i1(i,o))return;const d=o&&o.length>0&&!e.readOnly&&!this.isGlobalButtons;let h=this.eButtons;if(d){const m=o.map(v=>{const w=`${v}Filter`;return{type:v,label:Ap(this,w)}});if(this.applyActive=Y2(this.params),!h){h=this.createBean(new I0e),this.appendChild(h.getGui());const v=this.column,w=R=>({event:L})=>{this.updateModel(v,R,{fromButtons:!0}),this.afterAction(R,L)};h==null||h.addManagedListeners(h,{apply:w("apply"),clear:w("clear"),reset:w("reset"),cancel:w("cancel")}),this.eButtons=h}h.updateButtons(m,a)}else this.applyActive=!1,h&&(Iy(h.getGui()),this.eButtons=this.destroyBean(h))}close(e){const t=this.hidePopup;if(!t)return;const n=e,i=n==null?void 0:n.key;let r;(i===kt.ENTER||i===kt.SPACE)&&(r={keyboardEvent:n}),t(r),this.hidePopup=null}afterAction(e,t){const{params:n,applyActive:i}=this,r=n==null?void 0:n.closeOnApply;switch(e){case"apply":{t==null||t.preventDefault(),r&&i&&this.close(t);break}case"reset":{r&&i&&this.close();break}case"cancel":{r&&this.close(t);break}}}handleKeyDown(e){!e.defaultPrevented&&e.key===kt.ENTER&&this.applyActive&&(this.updateModel(this.column,"apply",{fromButtons:!0}),this.afterAction("apply",e))}destroy(){this.hidePopup=null,this.eButtons=this.destroyBean(this.eButtons)}},z0e={tag:"div",cls:"ag-filter"},N0e=class extends ra{constructor(e,t,n){super(z0e),this.column=e,this.source=t,this.enableGlobalButtonCheck=n,this.wrapper=null}postConstruct(){var e;(e=this.beans.colFilter)==null||e.activeFilterComps.add(this),this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return this.wrapper!=null}getFilter(){var e;return((e=this.wrapper)==null?void 0:e.then(t=>t.comp))??null}afterInit(){var e;return((e=this.wrapper)==null?void 0:e.then(()=>{}))??Fr.resolve()}afterGuiAttached(e){var t;this.afterGuiAttachedParams=e,(t=this.wrapper)==null||t.then(n=>{var i,r,o;(i=this.comp)==null||i.afterGuiAttached(e),(o=(r=n==null?void 0:n.comp)==null?void 0:r.afterGuiAttached)==null||o.call(r,e)})}afterGuiDetached(){var e;(e=this.wrapper)==null||e.then(t=>{var n,i;(i=(n=t==null?void 0:t.comp)==null?void 0:n.afterGuiDetached)==null||i.call(n)})}createFilter(e){const{column:t,source:n,beans:{colFilter:i}}=this,r=i.getFilterUiForDisplay(t)??null;this.wrapper=r,r==null||r.then(o=>{var h;if(!o)return;const{isHandler:s,comp:a}=o;let d;if(s){const m=!!this.enableGlobalButtonCheck,v=this.createBean(new O0e(t,o,i,i.updateModel.bind(i),m&&i.isGlobalButtons,m));this.comp=v,d=v.getGui()}else d=a.getGui(),Dn(d)||an(69,{guiFromFilter:d});this.appendChild(d),e?this.eventSvc.dispatchEvent({type:"filterOpened",column:t,source:n,eGui:this.getGui()}):(h=a.afterGuiAttached)==null||h.call(a,this.afterGuiAttachedParams)})}onFilterDestroyed(e){const{source:t,column:n}=e;(t==="api"||t==="paramsUpdated")&&n.getId()===this.column.getId()&&this.beans.colModel.getColDefCol(this.column)&&(jc(this.getGui()),this.comp=this.destroyBean(this.comp),this.createFilter())}destroy(){var e;(e=this.beans.colFilter)==null||e.activeFilterComps.delete(this),this.eventSvc.dispatchEvent({type:"filterClosed",column:this.column}),this.wrapper=null,this.comp=this.destroyBean(this.comp),this.afterGuiAttachedParams=void 0,super.destroy()}},F4={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},M4=["january","february","march","april","may","june","july","august","september","october","november","december"];function B0e(e,t){return e==null?-1:t==null?1:Number.parseFloat(e)-Number.parseFloat(t)}function I4(e){return e instanceof Date&&!isNaN(e.getTime())}var zk={number:()=>{},boolean:()=>({maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(e,t)=>t,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(e,t)=>t===!1,numberOfInputs:0}]}),date:()=>({isValidDate:I4}),dateString:({dataTypeDefinition:e})=>({comparator:(t,n)=>{const i=e.dateParser(n);return n==null||i<t?-1:i>t?1:0},isValidDate:t=>typeof t=="string"&&I4(e.dateParser(t))}),dateTime:e=>zk.date(e),dateTimeString:e=>zk.dateString(e),object:()=>{},text:()=>{}},Nk={number:()=>({comparator:B0e}),boolean:({t:e})=>({valueFormatter:t=>Dn(t.value)?e(String(t.value),t.value?"True":"False"):e("blanks","(Blanks)")}),date:({formatValue:e,t})=>({valueFormatter:n=>{const i=e(n);return Dn(i)?i:t("blanks","(Blanks)")},treeList:!0,treeListFormatter:(n,i)=>{if(n==="NaN")return t("invalidDate","Invalid Date");if(i===1&&n!=null){const r=M4[Number(n)-1];return t(r,F4[r])}return n??t("blanks","(Blanks)")},treeListPathGetter:n=>IC(n,!1)}),dateString:({formatValue:e,dataTypeDefinition:t,t:n})=>({valueFormatter:i=>{const r=e(i);return Dn(r)?r:n("blanks","(Blanks)")},treeList:!0,treeListPathGetter:i=>IC(t.dateParser(i??void 0),!1),treeListFormatter:(i,r)=>{if(r===1&&i!=null){const o=M4[Number(i)-1];return n(o,F4[o])}return i??n("blanks","(Blanks)")}}),dateTime:e=>{const t=Nk.date(e);return t.treeListPathGetter=IC,t},dateTimeString(e){const t=e.dataTypeDefinition.dateParser,n=Nk.dateString(e);return n.treeListPathGetter=i=>IC(t(i??void 0)),n},object:({formatValue:e,t})=>({valueFormatter:n=>{const i=e(n);return Dn(i)?i:t("blanks","(Blanks)")}}),text:()=>{}};function G0e(e,t,n,i,r,o,s){let a=t,d=n;const h=e==="agSetColumnFilter";!d&&i.baseDataType==="object"&&!h&&(d=({column:R,node:L})=>r({column:R,node:L,value:o.valueSvc.getValue(R,L)}));const v=(h?Nk:zk)[i.baseDataType],w=v({dataTypeDefinition:i,formatValue:r,t:s});return a=typeof t=="object"?{...w,...t}:w,{filterParams:a,filterValueGetter:d}}var j0e={boolean:"agTextColumnFilter",date:"agDateColumnFilter",dateString:"agDateColumnFilter",dateTime:"agDateColumnFilter",dateTimeString:"agDateColumnFilter",number:"agNumberColumnFilter",object:"agTextColumnFilter",text:"agTextColumnFilter"},H0e={boolean:"agTextColumnFloatingFilter",date:"agDateColumnFloatingFilter",dateString:"agDateColumnFloatingFilter",dateTime:"agDateColumnFloatingFilter",dateTimeString:"agDateColumnFloatingFilter",number:"agNumberColumnFloatingFilter",object:"agTextColumnFloatingFilter",text:"agTextColumnFloatingFilter"};function V0e(e,t=!1){return(t?H0e:j0e)[e??"text"]}var $0e=class extends fve{},rH="__ag_Grid_Stop_Propagation";function y0(e){e[rH]=!0}function om(e){return e[rH]===!0}var VF={isStopPropagation:om,stopPropagation:y0},Y1=class extends O7{constructor(e,t){super(e,VF,t)}},W0e=class extends ra{constructor(e,t){super(),this.filterNameKey=e,this.cssIdentifier=t,this.applyActive=!1,this.debouncePending=!1,this.defaultDebounceMs=0}postConstruct(){const e={tag:"div",cls:`ag-filter-body-wrapper ag-${this.cssIdentifier}-body-wrapper`,children:[this.createBodyTemplate()]};this.setTemplate(e,this.getAgComponents()),this.createManagedBean(new Y1(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=this.createBean(new $0e(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}))}handleKeyDown(e){}init(e){const t=e;this.setParams(t),this.setModelIntoUi(t.state.model,!0).then(()=>this.updateUiVisibility())}areStatesEqual(e,t){return e===t}refresh(e){const t=e,n=this.params;this.params=t;const{source:i,state:r,additionalEventAttributes:o}=t;i==="colDef"&&this.updateParams(t,n);const s=this.state;this.state=r;const a=o==null?void 0:o.fromAction;return(a&&a!=="apply"||r.model!==s.model||!this.areStatesEqual(r.state,s.state))&&this.setModelIntoUi(r.model),!0}setParams(e){this.params=e,this.state=e.state,this.commonUpdateParams(e)}updateParams(e,t){this.commonUpdateParams(e,t)}commonUpdateParams(e,t){this.applyActive=Y2(e),this.setupApplyDebounced()}doesFilterPass(e){an(283);const{getHandler:t,model:n,column:i}=this.params;return t().doesFilterPass({...e,model:n,handlerParams:this.beans.colFilter.getHandlerParams(i)})}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return an(284),this.params.model!=null}setupApplyDebounced(){const e=HF(this.params,this.defaultDebounceMs),t=Ll(this,this.checkApplyDebounce.bind(this),e);this.applyDebounced=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.doApplyModel())}getModel(){return an(285),this.params.model}setModel(e){an(286);const{beans:t,params:n}=this;return t.colFilter.setModelForColumnLegacy(n.column,e)}applyModel(e="api"){return this.doApplyModel()}canApply(e){return!0}doApplyModel(e){const{params:t,state:{valid:n=!0,model:i}}=this;if(!n)return!1;const r=!this.areModelsEqual(t.model,i);return r&&t.onAction("apply",e),r}onNewRowsLoaded(){}onUiChanged(e,t=!1){this.updateUiVisibility();const n=this.getModelFromUi(),i={model:n,state:this.getState(),valid:this.canApply(n)};this.state=i;const{params:r,gos:o,eventSvc:s,applyActive:a}=this;r.onStateChange(i),r.onUiChange(this.getUiChangeEventParams()),o.get("enableFilterHandlers")||s.dispatchEvent({type:"filterModified",column:r.column,filterInstance:this}),i.valid&&(e??(e=a?void 0:"debounce"),e==="immediately"?this.doApplyModel({afterFloatingFilter:t,afterDataChange:!1}):e==="debounce"&&this.applyDebounced())}getState(){}getUiChangeEventParams(){}afterGuiAttached(e){this.lastContainerType=e==null?void 0:e.container,this.refreshFilterResizer(e==null?void 0:e.container)}refreshFilterResizer(e){const{positionableFeature:t,gos:n}=this;if(!t)return;const i=e==="floatingFilter"||e==="columnFilter";i?(t.restoreLastSize(),t.setResizable(n.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(t.removeSizeFromEl(),t.setResizable(!1)),t.constrainSizeToAvailableHeight(i)}afterGuiDetached(){var e;this.checkApplyDebounce(),(e=this.positionableFeature)==null||e.constrainSizeToAvailableHeight(!1)}destroy(){this.positionableFeature=this.destroyBean(this.positionableFeature),super.destroy()}translate(e,t){return Ap(this,e,t)}getPositionableElement(){return this.getGui()}areModelsEqual(e,t){return e===t||e==null&&t==null?!0:e==null||t==null?!1:this.areNonNullModelsEqual(e,t)}};function oH(e){return!!e.operator}function U0e(e,t,n){if(t==null)return null;let i=null;const{compName:r,jsComp:o,fwComp:s}=k7(e,t);return r?i={agSetColumnFilter:"agSetColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[r]:o==null&&s==null&&t.filter===!0&&(i=n()),i}var p_={AUTO_HEIGHT:"ag-layout-auto-height",NORMAL:"ag-layout-normal",PRINT:"ag-layout-print"},$F=class extends Yt{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.gos.get("domLayout"),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},n=t.autoHeight?p_.AUTO_HEIGHT:t.print?p_.PRINT:p_.NORMAL;this.view.updateLayoutClasses(n,t)}},Cy="Viewport",L4="fakeVScrollComp",OA=["fakeHScrollComp","centerHeader","topCenter","bottomCenter","stickyTopCenter","stickyBottomCenter"],O4=100,zA=150,q0e=class extends Yt{constructor(e){super(),this.clearRetryListenerFncs=[],this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.lastIsHorizontalScrollShowing=!1,this.scrollTimer=0,this.isScrollActive=!1,this.isVerticalPositionInvalidated=!0,this.isHorizontalPositionInvalidated=!0,this.eBodyViewport=e,this.resetLastHScrollDebounced=Ll(this,()=>this.lastScrollSource[1]=null,zA),this.resetLastVScrollDebounced=Ll(this,()=>this.lastScrollSource[0]=null,zA)}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.animationFrameSvc=e.animationFrameSvc,this.visibleCols=e.visibleCols}destroy(){super.destroy(),this.clearRetryListenerFncs=[],window.clearTimeout(this.scrollTimer)}postConstruct(){this.enableRtl=this.gos.get("enableRtl");const e=this.invalidateVerticalScroll.bind(this),t=this.invalidateHorizontalScroll.bind(this);this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),bodyHeightChanged:e,scrollGapChanged:t}),this.addManagedElementListeners(this.eBodyViewport,{scroll:e}),this.ctrlsSvc.whenReady(this,n=>{this.centerRowsCtrl=n.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}invalidateHorizontalScroll(){this.isHorizontalPositionInvalidated=!0}invalidateVerticalScroll(){this.isVerticalPositionInvalidated=!0}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.eViewport,{scroll:this.onHScroll.bind(this,Cy)});for(const e of OA){const t=this.ctrlsSvc.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){const e=this.ctrlsSvc.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),n=t?Ll(this,this.onVScroll.bind(this,Cy),O4):this.onVScroll.bind(this,Cy),i=t?Ll(this,this.onVScroll.bind(this,L4),O4):this.onVScroll.bind(this,L4);this.addManagedElementListeners(this.eBodyViewport,{scroll:n}),this.registerScrollPartner(e,i)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){this.centerRowsCtrl!=null&&(e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(const t of[...OA,Cy]){if(this.lastScrollSource[1]===t)continue;const n=this.getViewportForSource(t);CS(n,e,this.enableRtl)}}getViewportForSource(e){return e===Cy?this.centerRowsCtrl.eViewport:this.ctrlsSvc.get(e).eViewport}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(t===0?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;const t=this.centerRowsCtrl.eViewport,{scrollLeft:n}=t;if(this.shouldBlockScrollUpdate(1,n,!0))return;const i=wS(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(i),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;if(e===Cy?t=this.eBodyViewport.scrollTop:t=this.ctrlsSvc.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(0,t,!0))return;const{animationFrameSvc:n}=this;n==null||n.setScrollTop(t),this.nextScrollTop=t,e===Cy?this.ctrlsSvc.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,n!=null&&n.active?n.schedule():this.scrollGridIfNeeded(!0),this.resetLastVScrollDebounced()}doHorizontalScroll(e){const t=this.ctrlsSvc.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}isScrolling(){return this.isScrollActive}fireScrollEvent(e){const t={type:"bodyScroll",direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.isScrollActive=!0,this.eventSvc.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=window.setTimeout(()=>{this.scrollTimer=0,this.isScrollActive=!1,this.eventSvc.dispatchEvent({...t,type:"bodyScrollEnd"})},zA)}shouldBlockScrollUpdate(e,t,n=!1){return n&&!i0()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){const t=vF(this.eBodyViewport),{scrollHeight:n}=this.eBodyViewport;return e<0||e+t>n}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:n}=this.centerRowsCtrl.eViewport;if(this.enableRtl){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>n}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){const e=this.scrollLeft;let t=!1;for(const n of OA)if(this.getViewportForSource(n).scrollLeft!==e){t=!0;break}t&&this.onHScroll(Cy)}scrollGridIfNeeded(e=!1){const t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,e&&this.invalidateVerticalScroll(),this.redrawRowsAfterScroll()),t}setHorizontalScrollPosition(e,t=!1){const i=this.centerRowsCtrl.eViewport.scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl?e=e>0?0:i:e=Math.min(Math.max(e,0),i)),CS(this.centerRowsCtrl.eViewport,Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.invalidateVerticalScroll(),this.eBodyViewport.scrollTop=e}getVScrollPosition(){if(!this.isVerticalPositionInvalidated){const{lastOffsetHeight:n,lastScrollTop:i}=this;return{top:i,bottom:i+n}}this.isVerticalPositionInvalidated=!1;const{scrollTop:e,offsetHeight:t}=this.eBodyViewport;return this.lastScrollTop=e,this.lastOffsetHeight=t,{top:e,bottom:e+t}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.isHorizontalPositionInvalidated&&(this.lastIsHorizontalScrollShowing=this.centerRowsCtrl.isHorizontalScrollShowing(),this.isHorizontalPositionInvalidated=!1),this.lastIsHorizontalScrollShowing}scrollHorizontally(e){const t=this.centerRowsCtrl.eViewport.scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.eViewport.scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){const{rowModel:n}=this.beans,i=n.getRowCount();let r=-1;for(let o=0;o<i;o++){const s=n.getRow(o);if(typeof e=="function"){if(s&&e(s)){r=o;break}}else if(e===s||e===s.data){r=o;break}}r>=0&&this.ensureIndexVisible(r,t)}ensureIndexVisible(e,t,n=0){if(lu(this.gos,"print"))return;const{rowModel:i}=this.beans,r=i.getRowCount();if(typeof e!="number"||e<0||e>=r){an(88,{index:e});return}this.clearRetryListeners();const{frameworkOverrides:o,pageBounds:s,rowContainerHeight:a,rowRenderer:d}=this.beans;o.wrapIncoming(()=>{var L,O;const h=this.ctrlsSvc.getGridBodyCtrl(),m=i.getRow(e);let v,w,R=0;this.invalidateVerticalScroll();do{const{stickyTopHeight:z,stickyBottomHeight:$}=h,U=m.rowTop,Y=m.rowHeight,X=s.getPixelOffset(),q=m.rowTop-X,ie=q+m.rowHeight,re=this.getVScrollPosition(),J=a.divStretchOffset,ne=re.top+J,be=re.bottom+J,ue=be-ne,ve=a.getScrollPositionForPixel(q),ce=a.getScrollPositionForPixel(ie-ue),Ie=Math.min((ve+ce)/2,q),Te=ne+z>q,fe=be-$<ie;let he=null;t==="top"?he=ve-z:t==="bottom"?he=ce+$:t==="middle"?he=Ie:Te?he=ve-z:fe&&(ce-ve>ue?he=ve-z:he=ce+$),he!==null&&(this.setVerticalScrollPosition(he),d.redraw({afterScroll:!0})),v=U!==m.rowTop||Y!==m.rowHeight,w=z!==h.stickyTopHeight||$!==h.stickyBottomHeight,R++}while((v||w)&&R<10);if((L=this.animationFrameSvc)==null||L.flushAllFrames(),n<10&&(m!=null&&m.stub||!((O=this.beans.rowAutoHeight)!=null&&O.areRowsMeasured()))){const z=this.getVScrollPosition().top;this.clearRetryListenerFncs=this.addManagedEventListeners({bodyScroll:()=>{const $=this.getVScrollPosition().top;z!==$&&this.clearRetryListeners()},modelUpdated:()=>{this.clearRetryListeners(),!(e>=i.getRowCount())&&this.ensureIndexVisible(e,t,n+1)}})}})}clearRetryListeners(){for(const e of this.clearRetryListenerFncs)e();this.clearRetryListenerFncs=[]}ensureColumnVisible(e,t="auto"){const{colModel:n,frameworkOverrides:i}=this.beans,r=n.getCol(e);if(!r||r.isPinned()||!this.visibleCols.isColDisplayed(r))return;const o=this.getPositionedHorizontalScroll(r,t);i.wrapIncoming(()=>{var s;o!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(o),this.centerRowsCtrl.onHorizontalViewportChanged(),(s=this.animationFrameSvc)==null||s.flushAllFrames()})}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:n,columnAfterEnd:i}=this.isColumnOutsideViewport(e),r=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),o=this.centerRowsCtrl.getCenterWidth(),s=this.enableRtl;let a=(s?n:i)||r,d=s?i:n;t!=="auto"&&(a=t==="start",d=t==="end");const h=t==="middle";if(a||d||h){const{colLeft:m,colMiddle:v,colRight:w}=this.getColumnBounds(e);return h?v-o/2:a?s?w:m:s?m-o:w-o}return null}isColumnOutsideViewport(e){const{start:t,end:n}=this.getViewportBounds(),{colLeft:i,colRight:r}=this.getColumnBounds(e),o=this.enableRtl,s=o?t>r:n<r,a=o?n<i:t>i;return{columnBeforeStart:s,columnAfterEnd:a}}getColumnBounds(e){const t=this.enableRtl,n=this.visibleCols.bodyWidth,i=e.getActualWidth(),r=e.getLeft(),o=t?-1:1,s=t?n-r:r,a=s+i*o,d=s+i/2*o;return{colLeft:s,colMiddle:d,colRight:a}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),n=t,i=e+t;return{start:n,end:i,width:e}}},WF=class extends Yt{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=lu(this.gos,"print"),{visibleCols:t,scrollVisibleSvc:n}=this.beans,i=t.bodyWidth,r=t.getColsLeftWidth(),o=t.getDisplayedColumnsRightWidth();let s;e?s=i+r+o:(s=i,this.addSpacer&&(this.gos.get("enableRtl")?r:o)===0&&n.verticalScrollShowing&&(s+=n.getScrollbarWidth())),this.callback(s)}},K0e=class extends Yt{constructor(e){super(),this.centerContainerCtrl=e}wireBeans(e){this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const{beans:e,centerContainerCtrl:t,gridBodyCtrl:n}=this,i=()=>{Rm(e,()=>{this.onCenterViewportResized()})};t.registerViewportResizeListener(i),n.registerBodyViewportResizeListener(i)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleSvc.updateScrollGap(),this.centerContainerCtrl.isViewportInTheDOMTree()){const{pinnedCols:e,colFlex:t}=this.beans;e==null||e.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const n=this.centerContainerCtrl.getCenterWidth();n!==this.centerWidth&&(this.centerWidth=n,t==null||t.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.scrollFeature.checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=this.gridBodyCtrl.eBodyViewport,t=vF(e);this.bodyHeight!==t&&(this.bodyHeight=t,this.eventSvc.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){if(!this.isAlive())return;const e={horizontalScrollShowing:this.centerContainerCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleSvc.setScrollsVisible(e)}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.beans.colViewport.setScrollPosition(e,t)}};function g_(e,t,n,i){var o;const r=(o=t.getColDef().cellRendererParams)==null?void 0:o.suppressMouseEventHandling;return sH(e,t,n,i,r)}function Z0e(e,t,n,i){const r=t==null?void 0:t.suppressMouseEventHandling;return sH(e,void 0,n,i,r)}function sH(e,t,n,i,r){return r?r(ki(e,{column:t,node:n,event:i})):!1}function aH(e,t,n){let i=t;for(;i;){const r=o7(e,i,n);if(r)return r;i=i.parentElement}return null}var LS="cellCtrl";function UF(e,t){return aH(e,t,LS)}var OS="renderedRow";function Y0e(e,t){return aH(e,t,OS)}function Bk(e,t,n,i,r){const o=i?i.getColDef().suppressKeyboardEvent:void 0;if(!o)return!1;const s=ki(e,{event:t,editing:r,column:i,node:n,data:n.data,colDef:i.getColDef()});return!!(o&&o(s))}function X0e(e){const{pinnedRowModel:t,rowModel:n,rangeSvc:i,visibleCols:r}=e;if(!i||r.allCols.length===0)return;const o=(t==null?void 0:t.isEmpty("top"))??!0,s=(t==null?void 0:t.isEmpty("bottom"))??!0,a=o?null:"top";let d,h;s?(d=null,h=n.getRowCount()-1):(d="bottom",h=(t==null?void 0:t.getPinnedBottomRowCount())??-1),i.setCellRange({rowStartIndex:0,rowStartPinned:a,rowEndIndex:h,rowEndPinned:d})}var J0e=class extends Yt{constructor(e){super(),this.element=e}postConstruct(){var e;this.addKeyboardListeners(),this.addMouseListeners(),(e=this.beans.touchSvc)==null||e.mockRowContextMenu(this),this.editSvc=this.beans.editSvc}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){const t=["dblclick","contextmenu","mouseover","mouseout","click",V9("touchstart")?"touchstart":"mousedown"];for(const n of t){const i=this.processMouseEvent.bind(this,n);this.addManagedElementListeners(this.element,{[n]:i})}}processMouseEvent(e,t){var r;if(!a1(this.beans,t)||om(t))return;const{cellCtrl:n,rowCtrl:i}=this.getControlsForEventTarget(t.target);e==="contextmenu"?(n!=null&&n.column&&n.dispatchCellContextMenuEvent(t),(r=this.beans.contextMenuSvc)==null||r.handleContextMenuMouseEvent(t,void 0,i,n)):(n&&n.onMouseEvent(e,t),i&&i.onMouseEvent(e,t))}getControlsForEventTarget(e){const{gos:t}=this;return{cellCtrl:UF(t,e),rowCtrl:Y0e(t,e)}}processKeyboardEvent(e,t){const{cellCtrl:n,rowCtrl:i}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(n?this.processCellKeyboardEvent(n,e,t):i!=null&&i.isFullWidth()&&this.processFullWidthRowKeyboardEvent(i,e,t))}processCellKeyboardEvent(e,t,n){var o,s;const i=((o=this.editSvc)==null?void 0:o.isEditing(e,{withOpenEditor:!0}))??!1;!Bk(this.gos,n,e.rowNode,e.column,i)&&t==="keydown"&&(!i&&((s=this.beans.navigation)!=null&&s.handlePageScrollingKey(n))||e.onKeyDown(n),this.doGridOperations(n,i),B7(n)&&e.processCharacter(n)),t==="keydown"&&this.eventSvc.dispatchEvent(e.createEvent(n,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,n){const{rowNode:i}=e,{focusSvc:r,navigation:o}=this.beans,s=r.getFocusedCell(),a=s==null?void 0:s.column;if(!Bk(this.gos,n,i,a,!1)){const h=n.key;if(t==="keydown")switch(h){case kt.PAGE_HOME:case kt.PAGE_END:case kt.PAGE_UP:case kt.PAGE_DOWN:o==null||o.handlePageScrollingKey(n,!0);break;case kt.LEFT:case kt.RIGHT:if(!this.gos.get("embedFullWidthRows"))break;case kt.UP:case kt.DOWN:e.onKeyboardNavigate(n);break;case kt.TAB:e.onTabKeyDown(n);break}}t==="keydown"&&this.eventSvc.dispatchEvent(e.createRowEvent("cellKeyDown",n))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!a1(this.beans,e))return;const n=P7(e),{clipboardSvc:i,undoRedo:r}=this.beans;if(n===kt.A)return this.onCtrlAndA(e);if(n===kt.C)return this.onCtrlAndC(i,e);if(n===kt.D)return this.onCtrlAndD(i,e);if(n===kt.V)return this.onCtrlAndV(i,e);if(n===kt.X)return this.onCtrlAndX(i,e);if(n===kt.Y)return this.onCtrlAndY(r);if(n===kt.Z)return this.onCtrlAndZ(r,e)}onCtrlAndA(e){const{beans:{rowModel:t,rangeSvc:n,selectionSvc:i},gos:r}=this;n&&Oy(r)&&!Gme(r)&&t.isRowsToRender()?X0e(this.beans):i&&i.selectAllRowNodes({source:"keyboardSelectAll",selectAll:d7(r)}),e.preventDefault()}onCtrlAndC(e,t){var i;if(!e||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:n}=this.getControlsForEventTarget(t.target);(i=this.editSvc)!=null&&i.isEditing(n,{withOpenEditor:!0})||(t.preventDefault(),e.copyToClipboard())}onCtrlAndX(e,t){var i;if(!e||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:n}=this.getControlsForEventTarget(t.target);(i=this.editSvc)!=null&&i.isEditing(n,{withOpenEditor:!0})||(t.preventDefault(),e.cutToClipboard(void 0,"ui"))}onCtrlAndV(e,t){var i;const{cellCtrl:n}=this.getControlsForEventTarget(t.target);(i=this.editSvc)!=null&&i.isEditing(n,{withOpenEditor:!0})||e&&!this.gos.get("suppressClipboardPaste")&&e.pasteFromClipboard()}onCtrlAndD(e,t){e&&!this.gos.get("suppressClipboardPaste")&&e.copyRangeDown(),t.preventDefault()}onCtrlAndZ(e,t){!this.gos.get("undoRedoCellEditing")||!e||(t.preventDefault(),t.shiftKey?e.redo("ui"):e.undo("ui"))}onCtrlAndY(e){e==null||e.redo("ui")}},lH=class extends Yt{constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this,this.beans.rowContainerHeight)})}onHeightChanged(e){const t=e.uiContainerHeight,n=t!=null?`${t}px`:"";this.eContainer.style.height=n,this.eViewport&&(this.eViewport.style.height=n)}},zC=e=>e.topRowCtrls,NC=e=>e.getStickyTopRowCtrls(),BC=e=>e.getStickyBottomRowCtrls(),GC=e=>e.bottomRowCtrls,jC=e=>e.allRowCtrls,NA=e=>e.getCtrls("top"),BA=e=>e.getCtrls("center"),GA=e=>e.getCtrls("bottom"),Q0e={center:{type:"center",name:"center-cols",getRowCtrls:jC,getSpannedRowCtrls:BA},left:{type:"left",name:"pinned-left-cols",pinnedType:"left",getRowCtrls:jC,getSpannedRowCtrls:BA},right:{type:"right",name:"pinned-right-cols",pinnedType:"right",getRowCtrls:jC,getSpannedRowCtrls:BA},fullWidth:{type:"fullWidth",name:"full-width",fullWidth:!0,getRowCtrls:jC},topCenter:{type:"center",name:"floating-top",getRowCtrls:zC,getSpannedRowCtrls:NA},topLeft:{type:"left",name:"pinned-left-floating",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:zC,getSpannedRowCtrls:NA},topRight:{type:"right",name:"pinned-right-floating",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:zC,getSpannedRowCtrls:NA},topFullWidth:{type:"fullWidth",name:"floating-top-full-width",fullWidth:!0,getRowCtrls:zC},stickyTopCenter:{type:"center",name:"sticky-top",getRowCtrls:NC},stickyTopLeft:{type:"left",name:"pinned-left-sticky-top",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:NC},stickyTopRight:{type:"right",name:"pinned-right-sticky-top",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:NC},stickyTopFullWidth:{type:"fullWidth",name:"sticky-top-full-width",fullWidth:!0,getRowCtrls:NC},stickyBottomCenter:{type:"center",name:"sticky-bottom",getRowCtrls:BC},stickyBottomLeft:{type:"left",name:"pinned-left-sticky-bottom",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:BC},stickyBottomRight:{type:"right",name:"pinned-right-sticky-bottom",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:BC},stickyBottomFullWidth:{type:"fullWidth",name:"sticky-bottom-full-width",fullWidth:!0,getRowCtrls:BC},bottomCenter:{type:"center",name:"floating-bottom",getRowCtrls:GC,getSpannedRowCtrls:GA},bottomLeft:{type:"left",name:"pinned-left-floating-bottom",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:GC,getSpannedRowCtrls:GA},bottomRight:{type:"right",name:"pinned-right-floating-bottom",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:GC,getSpannedRowCtrls:GA},bottomFullWidth:{type:"fullWidth",name:"floating-bottom-full-width",fullWidth:!0,getRowCtrls:GC}};function uH(e){return`ag-${X1(e).name}-viewport`}function m_(e){const t=X1(e);return t.container??`ag-${t.name}-container`}function ebe(e){return`ag-${X1(e).name}-spanned-cells-container`}function X1(e){return Q0e[e]}var tbe=["topCenter","topLeft","topRight"],nbe=["bottomCenter","bottomLeft","bottomRight"],ibe=["center","left","right"],rbe=["center","left","right","fullWidth"],obe=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],sbe=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],abe=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],cH=["stickyTopCenter","stickyTopLeft","stickyTopRight"],dH=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],lbe=[...cH,"stickyTopFullWidth",...dH,"stickyBottomFullWidth"],ube=[...tbe,...nbe,...ibe,...cH,...dH],cbe=class extends Yt{constructor(e){super(),this.name=e,this.visible=!0,this.EMPTY_CTRLS=[],this.options=X1(e)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new K0e(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.beans.ctrlsSvc.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}setComp(e,t,n,i){this.comp=e,this.eContainer=t,this.eSpannedContainer=n,this.eViewport=i,this.createManagedBean(new J0e(this.eViewport??this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const{pinnedCols:r,rangeSvc:o}=this.beans,s=()=>this.onPinnedWidthChanged();this.forContainers(sbe,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(r==null?void 0:r.createPinnedWidthFeature(!0,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:s})}),this.forContainers(abe,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(r==null?void 0:r.createPinnedWidthFeature(!1,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:s})}),this.forContainers(rbe,()=>this.createManagedBean(new lH(this.eContainer,this.name==="center"?i:void 0))),o&&this.forContainers(ube,()=>this.createManagedBean(o.createDragListenerFeature(this.eContainer))),this.forContainers(obe,()=>this.createManagedBean(new WF(a=>this.comp.setContainerWidth(`${a}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}addListeners(){const{spannedRowRenderer:e,gos:t}=this.beans,n=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({displayedColumnsChanged:n,displayedColumnsWidthChanged:n,displayedRowsChanged:i=>this.onDisplayedRowsChanged(i.afterScroll)}),n(),this.onDisplayedRowsChanged(),e&&this.options.getSpannedRowCtrls&&t.get("enableCellSpan")&&this.addManagedListeners(e,{spannedRowsUpdated:()=>{const i=this.options.getSpannedRowCtrls(e);i&&this.comp.setSpannedRowCtrls(i,!1)}})}listenOnDomOrder(){if(lbe.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const t=()=>{const n=this.gos.get("ensureDomOrder"),i=lu(this.gos,"print");this.comp.setDomOrder(n||i)};this.addManagedPropertyListener("domLayout",t),t()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const{dragSvc:e}=this.beans;if(!e)return;const t=n=>{e.dragging&&n.cancelable&&n.preventDefault()};this.eContainer.addEventListener("touchmove",t,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",t))}onHorizontalViewportChanged(e=!1){const t=this.getCenterWidth(),n=this.getCenterViewportScrollLeft();this.beans.colViewport.setScrollPosition(t,n,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return s1(this.eViewport)}getCenterViewportScrollLeft(){return wS(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=Em(this.beans,this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return bF(this.eViewport)}getViewportScrollLeft(){return wS(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||wF(this.eViewport)}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){CS(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){const t=this.options.getRowCtrls(this.beans.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}const n=lu(this.gos,"print"),r=this.gos.get("embedFullWidthRows")||n,o=t.filter(s=>{const a=s.isFullWidth();return this.options.fullWidth?!r&&a:r||!a});this.comp.setRowCtrls({rowCtrls:o,useFlushSync:e})}},dbe="ag-force-vertical-scroll",hbe="ag-selectable",fbe="ag-column-moving",pbe=class extends Yt{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colModel=e.colModel,this.scrollVisibleSvc=e.scrollVisibleSvc,this.pinnedRowModel=e.pinnedRowModel,this.filterManager=e.filterManager,this.rowGroupColsSvc=e.rowGroupColsSvc}setComp(e,t,n,i,r,o,s){var a,d;this.comp=e,this.eGridBody=t,this.eBodyViewport=n,this.eTop=i,this.eBottom=r,this.eStickyTop=o,this.eStickyBottom=s,this.eCenterColsViewport=n.querySelector(`.${uH("center")}`),this.eFullWidthContainer=n.querySelector(`.${m_("fullWidth")}`),this.eStickyTopFullWidthContainer=o.querySelector(`.${m_("stickyTopFullWidth")}`),this.eStickyBottomFullWidthContainer=s.querySelector(`.${m_("stickyBottomFullWidth")}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",h=>this.setCellTextSelection(h.currentValue)),this.createManagedBean(new $F(this.comp)),this.scrollFeature=this.createManagedBean(new q0e(n)),(a=this.beans.rowDragSvc)==null||a.setupRowDrag(n,this),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([i,n,r,o,s]),this.setGridRootRole(),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),(d=this.filterManager)==null||d.setupAdvFilterHeaderComp(i),this.ctrlsSvc.register("gridBodyCtrl",this)}addEventListeners(){const e=this.setFloatingHeights.bind(this),t=this.setGridRootRole.bind(this),n=this.toggleRowResizeStyles.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.updateScrollingClasses.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,pinnedRowsChanged:e,headerHeightChanged:this.setStickyTopOffsetTop.bind(this),columnRowGroupChanged:t,columnPivotChanged:t,rowResizeStarted:n,rowResizeEnded:n}),this.addManagedPropertyListener("treeData",t)}toggleRowResizeStyles(e){const t=e.type==="rowResizeStarted";this.eBodyViewport.classList.toggle("ag-prevent-animation",t)}onGridColumnsChanged(){const e=this.beans.colModel.getCols();this.comp.setColumnCount(e.length)}onScrollVisibilityChanged(){const{scrollVisibleSvc:e}=this,t=e.verticalScrollShowing;this.setVerticalScrollPaddingVisible(t),this.setStickyWidth(t),this.setStickyBottomOffsetBottom();const n=t&&e.getScrollbarWidth()||0,i=M7()?16:0,r=`calc(100% + ${n+i}px)`;Rm(this.beans,()=>this.comp.setBodyViewportWidth(r)),this.updateScrollingClasses()}setGridRootRole(){const{rowGroupColsSvc:e,colModel:t,gos:n}=this;let i=n.get("treeData");if(!i){const r=t.isPivotMode();i=(e?e.columns.length:0)>=(r?2:1)}this.comp.setGridRootRole(i?"treegrid":"grid")}addFocusListeners(e){for(const t of e)this.addManagedElementListeners(t,{focusin:n=>{const{target:i}=n,r=Qv(i,"ag-root",t);t.classList.toggle("ag-has-focus",!r)},focusout:n=>{const{target:i,relatedTarget:r}=n,o=t.contains(r),s=Qv(r,"ag-root",t);Qv(i,"ag-root",t)||(!o||s)&&t.classList.remove("ag-has-focus")}})}setColumnMovingCss(e){this.comp.setColumnMovingCss(fbe,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(hbe,e)}updateScrollingClasses(){const{eGridBody:{classList:e},scrollVisibleSvc:t}=this;e.toggle("ag-body-vertical-content-no-gap",!t.verticalScrollGap),e.toggle("ag-body-horizontal-content-no-gap",!t.horizontalScrollGap)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){var e;(e=this.beans.editSvc)==null||e.addStopEditingWhenGridLosesFocus([this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom])}updateRowCount(){var r,o;const e=(((r=this.ctrlsSvc.getHeaderRowContainerCtrl())==null?void 0:r.getRowCount())??0)+(((o=this.filterManager)==null?void 0:o.getHeaderRowCount())??0),{rowModel:t}=this.beans,n=t.isLastRowIndexKnown()?t.getRowCount():-1,i=n===-1?-1:e+n;this.comp.setRowCount(i)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),t=e?dbe:null,n=lu(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||n&&j9(this.eBodyViewport)}setupRowAnimationCssClass(){const{rowContainerHeight:e,environment:t}=this.beans;let n=t.sizesMeasured;const i=()=>{const r=n&&Mb(this.gos)&&!e.stretching,o=r?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(o,r)};i(),this.addManagedEventListeners({heightScaleChanged:i}),this.addManagedPropertyListener("animateRows",i),this.addManagedEventListeners({stylesChanged:()=>{!n&&t.sizesMeasured&&(n=!0,i())}})}addBodyViewportListener(){const{eBodyViewport:e,eStickyTop:t,eStickyBottom:n,eTop:i,eBottom:r,beans:{popupSvc:o,touchSvc:s}}=this,a=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(e,{contextmenu:a}),s==null||s.mockBodyContextMenu(this,a),this.addManagedElementListeners(e,{wheel:this.onBodyViewportWheel.bind(this,o)});const d=this.onStickyWheel.bind(this);for(const m of[t,n,i,r])this.addManagedElementListeners(m,{wheel:d});const h=this.onHorizontalWheel.bind(this);for(const m of["left","right","topLeft","topRight","bottomLeft","bottomRight"])this.addManagedElementListeners(this.ctrlsSvc.get(m).eContainer,{wheel:h});this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){const{deltaX:t,deltaY:n,shiftKey:i}=e;(i||Math.abs(t)>Math.abs(n))&&a1(this.beans,e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaY:t}=e;this.scrollVertically(t)>0&&e.preventDefault()}onHorizontalWheel(e){const{deltaX:t,deltaY:n,shiftKey:i}=e;(i||Math.abs(t)>Math.abs(n))&&this.scrollGridBodyToMatchEvent(e)}scrollGridBodyToMatchEvent(e){const{deltaX:t,deltaY:n}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||n})}onBodyViewportContextMenu(e,t,n){var r;if(!e&&!n)return;this.gos.get("preventDefaultOnContextMenu")&&(e||n).preventDefault();const{target:i}=e||t;(i===this.eBodyViewport||i===this.ctrlsSvc.get("center").eViewport)&&((r=this.beans.contextMenuSvc)==null||r.showContextMenu({mouseEvent:e,touchEvent:n,value:null,anchorToElement:this.eGridBody,source:"ui"}))}onBodyViewportWheel(e,t){this.gos.get("suppressScrollWhenPopupsAreOpen")&&e!=null&&e.hasAnchoredPopup()&&t.preventDefault()}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.scrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}setFloatingHeights(){const{pinnedRowModel:e,beans:{environment:t}}=this,n=e==null?void 0:e.getPinnedTopTotalHeight(),i=e==null?void 0:e.getPinnedBottomTotalHeight(),r=t.getPinnedRowBorderWidth(),o=t.getRowBorderWidth(),s=r-o,a=n?s+n:0,d=i?s+i:0;this.comp.setTopHeight(a),this.comp.setBottomHeight(d),this.comp.setTopInvisible(a<=0),this.comp.setBottomInvisible(d<=0),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{const t=this.scrollVisibleSvc.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}setStickyTopOffsetTop(){var r,o;const t=this.ctrlsSvc.get("gridHeaderCtrl").headerHeight+(((r=this.filterManager)==null?void 0:r.getHeaderHeight())??0),n=((o=this.pinnedRowModel)==null?void 0:o.getPinnedTopTotalHeight())??0;let i=0;t>0&&(i+=t),n>0&&(i+=n),i>0&&(i+=1),this.comp.setStickyTopTop(`${i}px`)}setStickyBottomOffsetBottom(){const{pinnedRowModel:e,scrollVisibleSvc:t,comp:n}=this,i=(e==null?void 0:e.getPinnedBottomTotalHeight())??0,o=t.horizontalScrollShowing&&t.getScrollbarWidth()||0,s=i+o;n.setStickyBottomBottom(`${s}px`)}};function gbe(e,t){var n;return((n=UF(e,t.target))==null?void 0:n.getFocusedCellPosition())??null}function z4(e,t){const n=lu(e.gos,"normal"),i=t;let r,o;i.clientX!=null||i.clientY!=null?(r=i.clientX,o=i.clientY):(r=i.x,o=i.y);const{pageFirstPixel:s}=e.pageBounds.getCurrentPagePixelRange();if(o+=s,n){const a=e.ctrlsSvc.getScrollFeature(),d=a.getVScrollPosition(),h=a.getHScrollPosition();r+=h.left,o+=d.top}return{x:r,y:o}}var hH=class extends ra{constructor(e,t){super(),this.direction=t,this.eViewport=Yn,this.eContainer=Yn,this.hideTimeout=0,this.setTemplate(e)}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.toggleCss("ag-apple-scrollbar",D7()||i0())}destroy(){super.destroy(),window.clearTimeout(this.hideTimeout)}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=M7(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.toggleCss("ag-scrollbar-active",!0),n=()=>this.toggleCss("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:n,touchend:n})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),Rm(this.beans,()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=0),this.toggleCss("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.toggleCss("ag-scrollbar-scrolling",!1),this.hideTimeout=0},400)}})}attemptSettingScrollPosition(e){const t=this.eViewport;fme(this,()=>Sm(t),()=>this.setScrollPosition(e),100)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}},mbe={tag:"div",cls:"ag-body-horizontal-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eLeftSpacer",cls:"ag-horizontal-left-spacer"},{tag:"div",ref:"eViewport",cls:"ag-body-horizontal-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-horizontal-scroll-container"}]},{tag:"div",ref:"eRightSpacer",cls:"ag-horizontal-right-spacer"}]},ybe=class extends hH{constructor(){super(mbe,"horizontal"),this.eLeftSpacer=Yn,this.eRightSpacer=Yn,this.setScrollVisibleDebounce=0}wireBeans(e){this.visibleCols=e.visibleCols,this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.refreshCompBottom.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.beans.ctrlsSvc.register("fakeHScrollComp",this),this.createManagedBean(new WF(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}destroy(){window.clearTimeout(this.setScrollVisibleDebounce),super.destroy()}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}refreshCompBottom(){var t;if(!this.invisibleScrollbar)return;const e=((t=this.beans.pinnedRowModel)==null?void 0:t.getPinnedBottomTotalHeight())??0;this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleSvc.verticalScrollShowing;let t=this.visibleCols.getDisplayedColumnsRightWidth();const n=!this.enableRtl&&e,i=this.scrollVisibleSvc.getScrollbarWidth();n&&(t+=i),Mp(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=i);let r=this.visibleCols.getColsLeftWidth();this.enableRtl&&e&&(r+=i),Mp(this.eLeftSpacer,r),this.eLeftSpacer.classList.toggle("ag-scroller-corner",r<=i)}setScrollVisible(){const e=this.scrollVisibleSvc.horizontalScrollShowing,t=this.invisibleScrollbar,n=this.gos.get("suppressHorizontalScroll"),i=e&&this.scrollVisibleSvc.getScrollbarWidth()||0,o=n?0:i===0&&t?16:i,s=()=>{this.setScrollVisibleDebounce=0,this.toggleCss("ag-scrollbar-invisible",t),Dw(this.getGui(),o),Dw(this.eViewport,o),Dw(this.eContainer,o),o||this.eContainer.style.setProperty("min-height","1px"),this.setVisible(e,{skipAriaHidden:!0})};window.clearTimeout(this.setScrollVisibleDebounce),e?this.setScrollVisibleDebounce=window.setTimeout(s,100):s()}getScrollPosition(){return wS(this.eViewport,this.enableRtl)}setScrollPosition(e){Sm(this.eViewport)||this.attemptSettingScrollPosition(e),CS(this.eViewport,e,this.enableRtl)}},vbe={tag:"div",cls:"ag-body-vertical-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eViewport",cls:"ag-body-vertical-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-vertical-scroll-container"}]}]},bbe=class extends hH{constructor(){super(vbe,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new lH(this.eContainer));const{ctrlsSvc:e}=this.beans;e.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this,e)})}setScrollVisible(){const{scrollVisibleSvc:e}=this.beans,t=e.verticalScrollShowing,n=this.invisibleScrollbar,i=t&&e.getScrollbarWidth()||0,r=i===0&&n?16:i;this.toggleCss("ag-scrollbar-invisible",n),Mp(this.getGui(),r),Mp(this.eViewport,r),Mp(this.eContainer,r),this.setDisplayed(t,{skipAriaHidden:!0})}onRowContainerHeightChanged(e){const n=e.getGridBodyCtrl().eBodyViewport,i=this.getScrollPosition(),r=n.scrollTop;i!=r&&this.setScrollPosition(r,!0)}getScrollPosition(){return this.eViewport.scrollTop}setScrollPosition(e,t){!t&&!Sm(this.eViewport)&&this.attemptSettingScrollPosition(e),this.eViewport.scrollTop=e}},xbe="ag-column-first",wbe="ag-column-last";function fH(e,t,n,i){return vs(e)?[]:_be(e.headerClass,e,t,n,i)}function pH(e,t,n){e.toggleCss(xbe,n.isColAtEdge(t,"first")),e.toggleCss(wbe,n.isColAtEdge(t,"last"))}function Cbe(e,t,n,i){return ki(t,{colDef:e,column:n,columnGroup:i})}function _be(e,t,n,i,r){if(vs(e))return[];let o;if(typeof e=="function"){const s=Cbe(t,n,i,r);o=e(s)}else o=e;return typeof o=="string"?[o]:Array.isArray(o)?[...o]:[]}function Sbe(e){const{rowIndex:t,rowPinned:n,column:i}=e;return`${t}.${n??"null"}.${i.getId()}`}function qF(e,t){const n=e.column===t.column,i=e.rowPinned===t.rowPinned,r=e.rowIndex===t.rowIndex;return n&&i&&r}function Ebe(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(Dn(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}function Rbe(e,t){return!e&&!t?!0:!e||!t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}function Abe(e){let t=0,n;const{pinnedRowModel:i,rowModel:r,pageBounds:o}=e;return i!=null&&i.getPinnedTopRowCount()?n="top":r.getRowCount()?(n=null,t=o.getFirstRow()):i!=null&&i.getPinnedBottomRowCount()&&(n="bottom"),n===void 0?null:{rowIndex:t,rowPinned:n}}function Tbe(e){let t,n=null;const{pinnedRowModel:i,pageBounds:r}=e,o=i==null?void 0:i.getPinnedBottomRowCount(),s=i==null?void 0:i.getPinnedTopRowCount();return o?(n="bottom",t=o-1):e.rowModel.getRowCount()?t=r.getLastRow():s&&(n="top",t=s-1),t===void 0?null:{rowIndex:t,rowPinned:n}}function gm(e,t){var n,i;switch(t.rowPinned){case"top":return(n=e.pinnedRowModel)==null?void 0:n.getPinnedTopRow(t.rowIndex);case"bottom":return(i=e.pinnedRowModel)==null?void 0:i.getPinnedBottomRow(t.rowIndex);default:return e.rowModel.getRow(t.rowIndex)}}function Eb(e,t){var r;const n=(r=e.spannedRowRenderer)==null?void 0:r.getCellByPosition(t);if(n)return n;const i=e.rowRenderer.getRowByPosition(t);return i?i.getCellCtrl(t.column):null}function kbe(e,t,n){const{rowModel:i,pinnedRowModel:r}=e;let o;return o??(o=i==null?void 0:i.getRowNode(t)),n?o??(o=r==null?void 0:r.getPinnedRowById(t,n)):(o??(o=r==null?void 0:r.getPinnedRowById(t,"top")),o??(o=r==null?void 0:r.getPinnedRowById(t,"bottom"))),o}function zS(e,t,n=!1){const{rowIndex:i,rowPinned:r}=t,{pageBounds:o,pinnedRowModel:s,rowModel:a}=e;if(i===0)return r==="top"?null:r==="bottom"&&a.isRowsToRender()?{rowIndex:o.getLastRow(),rowPinned:null}:s!=null&&s.isRowsToRender("top")?{rowIndex:s.getPinnedTopRowCount()-1,rowPinned:"top"}:null;if(n){const d=r?void 0:a.getRow(i);return gH(e,d,!0)??{rowIndex:i-1,rowPinned:r}}return{rowIndex:i-1,rowPinned:r}}function N4(e,t,n=!1){const{rowIndex:i,rowPinned:r}=t,{pageBounds:o,pinnedRowModel:s,rowModel:a}=e;if(Pbe(e,t))return r==="bottom"?null:r==="top"&&a.isRowsToRender()?{rowIndex:o.getFirstRow(),rowPinned:null}:s!=null&&s.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;if(n){const d=r?void 0:a.getRow(i);return gH(e,d)??{rowIndex:i+1,rowPinned:r}}return{rowIndex:i+1,rowPinned:r}}function gH(e,t,n=!1){const{gos:i,rowRenderer:r}=e;if(!(t!=null&&t.sticky)||!s7(i))return;const o=r.getStickyTopRowCtrls(),s=r.getStickyBottomRowCtrls(),a=!s.some(v=>v.rowNode.rowIndex===t.rowIndex),d=a?o:s,h=(n?-1:1)*(a?-1:1);let m;for(let v=0;v<d.length;v++)if(d[v].rowNode.rowIndex===t.rowIndex){m=d[v+h];break}return m?{rowIndex:m.rowNode.rowIndex,rowPinned:null}:void 0}function Pbe(e,t){const{rowPinned:n,rowIndex:i}=t,{pinnedRowModel:r,pageBounds:o}=e;return n==="top"?((r==null?void 0:r.getPinnedTopRowCount())??0)-1<=i:n==="bottom"?((r==null?void 0:r.getPinnedBottomRowCount())??0)-1<=i:o.getLastRow()<=i}function Dbe(e,t,n){t.addManagedElementListeners(n,{keydown:i=>{if(!i.defaultPrevented&&i.key===kt.TAB){const r=i.shiftKey;E0(e,n,!1,r)||sx(e,r)&&i.preventDefault()}}})}function Fbe(e,t){return e.ctrlsSvc.get("gridCtrl").focusInnerElement(t)}function r0(e){var t;return e.gos.get("suppressHeaderFocus")||!!((t=e.overlays)!=null&&t.exclusive)}function X2(e){var t;return e.gos.get("suppressCellFocus")||!!((t=e.overlays)!=null&&t.exclusive)}function sx(e,t,n=!1){const i=e.ctrlsSvc.get("gridCtrl");return!n&&i.focusNextInnerContainer(t)?!0:((n||!t&&!i.isDetailGrid())&&i.forceFocusOutOfContainer(t),!1)}function Mbe(e,t){const n=e.focusSvc,i=n.getFocusedCell();if(i&&t&&qF(i,t)){const{rowIndex:r,rowPinned:o,column:s}=t;gF(e)&&n.setFocusedCell({rowIndex:r,column:s,rowPinned:o,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!I7()})}}function Pp(e){var t;return((t=e.ctrlsSvc.getHeaderRowContainerCtrl())==null?void 0:t.getRowCount())??0}function KF(e){const t=[],n=e.ctrlsSvc.getHeaderRowContainerCtrls();for(const i of n){if(!i)continue;const r=i.getGroupRowCount()||0;for(let o=0;o<r;o++){const s=i.getGroupRowCtrlAtIndex(o),a=t[o];if(s){const d=Ibe(e,s);(a==null||d>a)&&(t[o]=d)}}}return t}function Ibe(e,t){let i=e.colModel.isPivotMode()?Obe(e):yH(e);const r=t.getHeaderCellCtrls();for(const o of r){const{column:s}=o,a=s.getAutoHeaderHeight();a!=null&&a>i&&s.isAutoHeaderHeight()&&(i=a)}return i}function ZF(e){let n=e.colModel.isPivotMode()?Lbe(e):J1(e);return e.colModel.forAllCols(i=>{const r=i.getAutoHeaderHeight();r!=null&&r>n&&i.isAutoHeaderHeight()&&(n=r)}),n}function J1(e){return e.gos.get("headerHeight")??e.environment.getDefaultHeaderHeight()}function mH(e){return e.gos.get("floatingFiltersHeight")??J1(e)}function yH(e){return e.gos.get("groupHeaderHeight")??J1(e)}function Lbe(e){return e.gos.get("pivotHeaderHeight")??J1(e)}function Obe(e){return e.gos.get("pivotGroupHeaderHeight")??yH(e)}function zbe(e,t){return e.headerRowIndex===t.headerRowIndex&&e.column===t.column}var Nbe=class extends Yt{setComp(e,t,n){this.comp=e,this.eGui=t;const{beans:i}=this,{headerNavigation:r,touchSvc:o,ctrlsSvc:s}=i;r&&this.createManagedBean(new Y1(n,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this,i),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this,i)}),this.onPivotModeChanged(i),this.setupHeaderHeight();const a=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:a}),o==null||o.mockHeaderContextMenu(this,a),s.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({headerRowsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>Rm(this.beans,()=>e()),stylesChanged:e,advancedFilterEnabledChanged:e})}setHeaderHeight(){var o;const{beans:e}=this;let t=0;const n=KF(e).reduce((s,a)=>s+a,0),i=ZF(e);if((o=e.filterManager)!=null&&o.hasFloatingFilters()&&(t+=mH(e)),t+=n,t+=i,this.headerHeight===t)return;this.headerHeight=t;const r=`${t+1}px`;this.comp.setHeightAndMinHeight(r),this.eventSvc.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(e){const t=e.colModel.isPivotMode();this.comp.toggleCss("ag-pivot-on",t),this.comp.toggleCss("ag-pivot-off",!t)}onDisplayedColumnsChanged(e){const n=e.visibleCols.allCols.some(i=>i.isSpanHeaderHeight());this.comp.toggleCss("ag-header-allow-overflow",n)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),n=e.shiftKey,i=n!==t?"LEFT":"RIGHT",{beans:r}=this,{headerNavigation:o,focusSvc:s}=r;(o.navigateHorizontally(i,!0,e)||!n&&s.focusOverlay(!1)||sx(r,n,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;const{headerNavigation:n}=this.beans;switch(e.key){case kt.LEFT:t="LEFT";case kt.RIGHT:{Dn(t)||(t="RIGHT"),n.navigateHorizontally(t,!1,e)&&e.preventDefault();break}case kt.UP:t="UP";case kt.DOWN:{Dn(t)||(t="DOWN"),n.navigateVertically(t,e)&&e.preventDefault();break}default:return}}onFocusOut(e){const{relatedTarget:t}=e,{eGui:n,beans:i}=this;!t&&n.contains(Os(i))||n.contains(t)||(i.focusSvc.focusedHeader=null)}onHeaderContextMenu(e,t,n){var s;const{menuSvc:i,ctrlsSvc:r}=this.beans;if(!e&&!n||!(i!=null&&i.isHeaderContextMenuEnabled()))return;const{target:o}=e??t;(o===this.eGui||o===((s=r.getHeaderRowContainerCtrl())==null?void 0:s.eViewport))&&i.showHeaderContextMenu(void 0,e,n)}},YF=class extends Yt{constructor(e,t,n,i){super(),this.columnOrGroup=e,this.eCell=t,this.colsSpanning=i,this.columnOrGroup=e,this.ariaEl=t.querySelector("[role=columnheader]")||t,this.beans=n}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){const{beans:e,colsSpanning:t}=this;return e.gos.get("enableRtl")&&t?Wo(t):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const{gos:e,colAnimation:t}=this.beans,n=e.get("suppressColumnMoveAnimation"),i=Dn(this.columnOrGroup.getOldLeft());(t==null?void 0:t.isActive())&&i&&!n?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=this.modifyLeftForPrintLayout(e,e.getOldLeft()),n=this.modifyLeftForPrintLayout(e,e.getLeft());this.setLeft(t),this.actualLeft=n,this.beans.colAnimation.executeNextVMTurn(()=>{this.actualLeft===n&&this.setLeft(n)})}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){const{gos:n,visibleCols:i}=this.beans;if(!lu(n,"print")||e.getPinned()==="left")return t;const o=i.getColsLeftWidth();if(e.getPinned()==="right"){const s=i.bodyWidth;return o+s+t}return o+t}setLeft(e){if(Dn(e)&&(this.eCell.style.left=`${e}px`),Sa(this.columnOrGroup)){const t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&$ge(this.ariaEl,t.length)}}},Bbe=0,vH="headerCtrl",XF=class extends Yt{constructor(e,t){super(),this.column=e,this.rowCtrl=t,this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.reAttemptToFocus=!1,this.instanceId=e.getUniqueId()+"-"+Bbe++}postConstruct(){const e=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],e),this.addManagedEventListeners({overlayExclusiveChanged:e})}setComp(e,t,n,i,r){t.setAttribute("col-id",this.column.colIdSanitised),this.wireComp(e,t,n,i,r),this.reAttemptToFocus&&(this.reAttemptToFocus=!1,this.focus(this.lastFocusEvent??void 0))}shouldStopEventPropagation(e){const{headerRowIndex:t,column:n}=this.beans.focusSvc.focusedHeader,i=n.getDefinition(),r=i==null?void 0:i.suppressHeaderKeyboardEvent;if(!Dn(r))return!1;const o=ki(this.gos,{colDef:i,column:n,headerRowIndex:t,event:e});return!!r(o)}getWrapperHasFocus(){return Os(this.beans)===this.eGui}setGui(e,t){this.eGui=e,this.addDomData(t),t.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),t.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}refreshHeaderStyles(){const e=this.column.getDefinition();if(!e)return;const{headerStyle:t}=e;let n;if(typeof t=="function"){const i=this.getHeaderClassParams();n=t(i)}else n=t;n&&this.comp.setUserStyles(n)}onGuiFocus(){this.eventSvc.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(e){const{wrapperElement:t,checkMeasuringCallback:n,compBean:i}=e,{beans:r}=this,o=v=>{if(!this.isAlive()||!i.isAlive())return;const{paddingTop:w,paddingBottom:R,borderBottomWidth:L,borderTopWidth:O}=_0(this.eGui),z=w+R+L+O,U=t.offsetHeight+z;if(v<5){const Y=Il(r),X=!(Y!=null&&Y.contains(t)),q=U==0;if(X||q){Ck(()=>o(v+1),"raf",r);return}}this.setColHeaderHeight(this.column,U)};let s=!1,a;const d=()=>{const v=this.column.isAutoHeaderHeight();v&&!s&&h(),!v&&s&&m()},h=()=>{s=!0,this.comp.toggleCss("ag-header-cell-auto-height",!0),o(0),a=Em(this.beans,t,()=>o(0))},m=()=>{s=!1,a&&a(),this.comp.toggleCss("ag-header-cell-auto-height",!1),a=void 0};d(),i.addDestroyFunc(()=>m()),i.addManagedListeners(this.column,{widthChanged:()=>s&&o(0)}),i.addManagedEventListeners({sortChanged:()=>{s&&window.setTimeout(()=>o(0))}}),n&&n(d)}onDisplayedColumnsChanged(){const{comp:e,column:t,beans:n,eGui:i}=this;!e||!t||!i||(pH(e,t,n.visibleCols),O9(i,n.visibleCols.getAriaColIndex(t)))}addResizeAndMoveKeyboardListeners(e){e.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const e=r0(this.beans);this.eGui&&Nc(this.eGui,"tabindex",e?null:"-1")}onGuiKeyDown(e){var s,a;const t=Os(this.beans),n=e.key===kt.LEFT||e.key===kt.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),t!==this.eGui||!e.shiftKey&&!e.altKey&&!e.ctrlKey&&!e.metaKey)return;if((this.isResizing||n)&&(e.preventDefault(),e.stopImmediatePropagation()),(e.ctrlKey||e.metaKey)&&P7(e)===kt.C)return(s=this.beans.clipboardSvc)==null?void 0:s.copyToClipboard();if(!n)return;const o=e.key===kt.LEFT!==this.gos.get("enableRtl")?"left":"right";if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const d=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(d,e.shiftKey),(a=this.resizeFeature)==null||a.toggleColumnResizing(!0)}else this.moveHeader(o)}moveHeader(e){var t;(t=this.beans.colMoves)==null||t.moveHeader(e,this.eGui,this.column,this.rowCtrl.pinned,this)}getViewportAdjustedResizeDiff(e){const t=this.getResizeDiff(e),{pinnedCols:n}=this.beans;return n?n.getHeaderResizeDiff(t,this.column):t}getResizeDiff(e){const{gos:t,column:n}=this;let i=e.key===kt.LEFT!==t.get("enableRtl");const r=n.getPinned(),o=t.get("enableRtl");return r&&o!==(r==="right")&&(i=!i),(i?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{var e;(e=this.resizeFeature)==null||e.toggleColumnResizing(!1)},150))}handleKeyDown(e){const t=this.getWrapperHasFocus();switch(e.key){case kt.PAGE_DOWN:case kt.PAGE_UP:case kt.PAGE_HOME:case kt.PAGE_END:t&&e.preventDefault()}}addDomData(e){const t=vH,{eGui:n,gos:i}=this;g0(i,n,t,this),e.addDestroyFunc(()=>g0(i,n,t,null))}focus(e){if(!this.isAlive())return!1;const{eGui:t}=this;return t?(this.lastFocusEvent=e||null,t.focus()):this.reAttemptToFocus=!0,!0}focusThis(){this.beans.focusSvc.focusedHeader={headerRowIndex:this.rowCtrl.rowIndex,column:this.column}}removeDragSource(){var e;this.dragSource&&((e=this.beans.dragAndDrop)==null||e.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,n){const i=e??t,{menuSvc:r,gos:o}=this.beans;o.get("preventDefaultOnContextMenu")&&i.preventDefault(),r!=null&&r.isHeaderContextMenuEnabled(n)&&r.showHeaderContextMenu(n,e,t),this.dispatchColumnMouseEvent("columnHeaderContextMenu",n)}dispatchColumnMouseEvent(e,t){this.eventSvc.dispatchEvent({type:e,column:t})}setColHeaderHeight(e,t){if(!e.setAutoHeaderHeight(t))return;const{eventSvc:n}=this;e.isColumn?n.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"}):n.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.rowCtrl=null}},Gbe=class extends XF{constructor(){super(...arguments),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map}wireComp(e,t,n,i,r){this.comp=e;const{rowCtrl:o,column:s,beans:a}=this,{colResize:d,context:h,colHover:m,rangeSvc:v}=a,w=K1(this,h,r);this.setGui(t,w),this.updateState(),this.setupWidth(w),this.setupMovingCss(w),this.setupMenuClass(w),this.setupSortableClass(w),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:i,checkMeasuringCallback:L=>this.setRefreshFunction("measuring",L),compBean:w}),this.addColumnHoverListener(w),this.setupFilterClass(w),this.setupStylesFromColDef(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(w),this.setupSelectAll(w),this.setupUserComp(),this.refreshAria(),d?this.resizeFeature=w.createManagedBean(d.createResizeFeature(o.pinned,s,n,e,this)):$o(n,!1),m==null||m.createHoverFeature(w,[s],t),v==null||v.createRangeHighlightFeature(w,s,e),w.createManagedBean(new YF(s,t,a)),w.createManagedBean(new Y1(t,{shouldStopEventPropagation:L=>this.shouldStopEventPropagation(L),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(w),w.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader","enableAdvancedFilter"],()=>this.refresh()),w.addManagedListeners(s,{colDefChanged:()=>this.refresh(),formulaRefChanged:()=>this.refresh(),headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const R=()=>this.checkDisplayName();w.addManagedEventListeners({columnValueChanged:R,columnRowGroupChanged:R,columnPivotChanged:R,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),w.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){var n;(n=this.beans.colResize)==null||n.resizeHeader(this.column,e,t)}getHeaderClassParams(){const{column:e,beans:t}=this,n=e.colDef;return ki(t.gos,{colDef:n,column:e,floatingFilter:!1})}setupUserComp(){const e=this.lookupUserCompDetails();e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){const e=this.createParams(),t=this.column.getColDef();return Gye(this.beans.userCompFactory,t,e)}createParams(){const{menuSvc:e,sortSvc:t,colFilter:n,gos:i}=this.beans;return ki(i,{column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&!!(e!=null&&e.isHeaderFilterButtonEnabled(this.column)),enableFilterIcon:!!n&&(!this.openFilterEnabled||Ed(this.gos)),showColumnMenu:(o,s)=>{e==null||e.showColumnMenu({column:this.column,buttonElement:o,positionBy:"button",onClosedCallback:s})},showColumnMenuAfterMouseClick:(o,s)=>{e==null||e.showColumnMenu({column:this.column,mouseEvent:o,positionBy:"mouse",onClosedCallback:s})},showFilter:o=>{e==null||e.showFilterMenu({column:this.column,buttonElement:o,containerType:"columnFilter",positionBy:"button"})},progressSort:o=>{t==null||t.progressSort(this.column,!!o,"uiColumnSorted")},setSort:(o,s)=>{t==null||t.setSortForColumn(this.column,mf(o),!!s,"uiColumnSorted")},eGridHeader:this.eGui,setTooltip:(o,s)=>{i.assertModuleRegistered("Tooltip",3),this.setupTooltip(o,s)}})}setupSelectAll(e){var n;const{selectionSvc:t}=this.beans;t&&(this.selectAllFeature=e.createOptionalManagedBean(t.createSelectAllFeature(this.column)),(n=this.selectAllFeature)==null||n.setComp(this),e.addManagedPropertyListener("rowSelection",()=>{var r;const i=t.createSelectAllFeature(this.column);i&&!this.selectAllFeature?(this.selectAllFeature=e.createManagedBean(i),(r=this.selectAllFeature)==null||r.setComp(this),this.comp.refreshSelectAllGui()):this.selectAllFeature&&!i&&(this.comp.removeSelectAllGui(),this.selectAllFeature=this.destroyBean(this.selectAllFeature))}))}getSelectAllGui(){var e;return(e=this.selectAllFeature)==null?void 0:e.getCheckboxGui()}handleKeyDown(e){var t;super.handleKeyDown(e),e.key===kt.SPACE?(t=this.selectAllFeature)==null||t.onSpaceKeyDown(e):e.key===kt.ENTER?this.onEnterKeyDown(e):e.key===kt.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){var s,a;const{column:t,gos:n,sortable:i,beans:r}=this;let o=!1;(e.ctrlKey||e.metaKey)&&(o=this.showMenuOnKeyPress(e,!0)),o||(!e.altKey&&Lb(n)?(s=r.rangeSvc)==null||s.handleColumnSelection(t,e):i&&((a=r.sortSvc)==null||a.progressSort(t,e.shiftKey,"uiColumnSorted")))}showMenuOnKeyPress(e,t){const n=this.comp.getUserCompInstance();return B4(n)&&n.onMenuKeyboardShortcut(t)?(e.preventDefault(),!0):!1}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription()),I7()&&this.setActiveHeader(!0)}onFocusOut(e){this.eGui.contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){var n;this.tooltipFeature=(n=this.beans.tooltipSvc)==null?void 0:n.setupHeaderTooltip(this.tooltipFeature,this,e,t)}setupStylesFromColDef(){this.setRefreshFunction("headerStyles",this.refreshHeaderStyles.bind(this)),this.refreshHeaderStyles()}setupClassesFromColDef(){const e=()=>{const t=this.column.getColDef(),n=fH(t,this.gos,this.column,null),i=this.userHeaderClasses;this.userHeaderClasses=new Set(n);for(const r of n)i.has(r)?i.delete(r):this.comp.toggleCss(r,!0);for(const r of i)this.comp.toggleCss(r,!1)};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){var t;this.dragSourceElement=e,this.removeDragSource(),!(!e||!this.draggable)&&(this.dragSource=((t=this.beans.colMoves)==null?void 0:t.setDragSourceForHeader(e,this.column,this.displayName))??null)}updateState(){const{menuSvc:e}=this.beans;this.menuEnabled=!!(e!=null&&e.isColumnMenuInHeaderEnabled(this.column)),this.openFilterEnabled=!!(e!=null&&e.isFilterMenuInHeaderEnabled(this.column)),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria();for(const e of Object.values(this.refreshFunctions))e()}refreshHeaderComp(){const e=this.lookupUserCompDetails();if(!e)return;(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==e.componentClass?this.attemptHeaderCompRefresh(e.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){const t=()=>{const n=this.column.getActualWidth();this.comp.setWidth(`${n}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){const t=()=>{this.comp.toggleCss("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){const t=()=>{var n;(n=this.comp)==null||n.toggleCss("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){const t=()=>{this.comp.toggleCss("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){const t=()=>{const n=this.column.isFilterActive();this.comp.toggleCss("ag-header-cell-filtered",n),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){const e=()=>{const t=!!this.column.getColDef().wrapHeaderText;this.comp.toggleCss("ag-header-cell-wrap-text",t)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){const e=this.column.getHighlighted(),t=e===0,n=e===1;this.comp.toggleCss("ag-header-highlight-before",t),this.comp.toggleCss("ag-header-highlight-after",n)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){var w;const{eGui:e,column:t,comp:n,beans:i}=this,r=KF(this.beans),o=r.reduce((R,L)=>R+L,0)===0;if(n.toggleCss("ag-header-parent-hidden",o),!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),n.toggleCss("ag-header-span-height",!1),n.toggleCss("ag-header-span-total",!1);return}const{numberOfParents:s,isSpanningTotal:a}=this.column.getColumnGroupPaddingInfo();n.toggleCss("ag-header-span-height",s>0);const d=ZF(i);if(s===0){n.toggleCss("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${d}px`);return}n.toggleCss("ag-header-span-total",a);const h=(((w=this.column.getFirstRealParent())==null?void 0:w.getLevel())??-1)+1,m=r.length-h;let v=0;for(let R=0;R<m;R++)v+=r[r.length-1-R];e.style.setProperty("top",`${-v}px`),e.style.setProperty("height",`${d+v}px`)}refreshAriaSort(){var o;let e=null;const{beans:t,column:n,comp:i,sortable:r}=this;if(r){const s=this.getLocaleTextFunc(),a=((o=t.sortSvc)==null?void 0:o.getDisplaySortForColumn(n))??null;i.setAriaSort(Ige(a)),e=s("ariaSortableColumn","Press ENTER to sort")}else i.setAriaSort();this.setAriaDescriptionProperty("sort",e)}refreshAriaMenu(){let e=null;this.menuEnabled&&(e=this.getLocaleTextFunc()("ariaMenuColumn","Press ALT DOWN to open column menu")),this.setAriaDescriptionProperty("menu",e)}refreshAriaFilterButton(){let e=null;const{openFilterEnabled:t,gos:n}=this;t&&!Ed(n)&&(e=this.getLocaleTextFunc()("ariaFilterColumn","Press CTRL ENTER to open filter")),this.setAriaDescriptionProperty("filterButton",e)}refreshAriaFiltered(){let e=null;this.column.isFilterActive()&&(e=this.getLocaleTextFunc()("ariaColumnFiltered","Column Filtered")),this.setAriaDescriptionProperty("filter",e)}refreshAriaCellSelection(){var o;let e=null;const{gos:t,column:n,beans:i}=this;if(Lb(t)){const s=this.getLocaleTextFunc(),a=(o=i.rangeSvc)==null?void 0:o.isColumnInAnyRange(n);e=s("ariaColumnCellSelection",`Press CTRL+SPACE to ${a?"de":""}select all visible cells in this column`)}this.setAriaDescriptionProperty("cellSelection",e)}setAriaDescriptionProperty(e,t){const n=this.ariaDescriptionProperties;t!=null?n.set(e,t):n.delete(e)}announceAriaDescription(){var r;const{beans:e,eGui:t,ariaDescriptionProperties:n}=this;if(!t.contains(Os(e)))return;const i=Array.from(n.keys()).sort((o,s)=>o==="filter"?-1:s.charCodeAt(0)-o.charCodeAt(0)).map(o=>n.get(o)).join(". ");(r=e.ariaAnnounce)==null||r.announceValue(i,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered(),this.refreshAriaCellSelection()}addColumnHoverListener(e){var t;(t=this.beans.colHover)==null||t.addHeaderColumnHoverListener(e,this.comp,this.column)}addActiveHeaderMouseListeners(e){const t=r=>this.handleMouseOverChange(r.type==="mouseenter"),n=()=>{this.setActiveHeader(!0),this.dispatchColumnMouseEvent("columnHeaderClicked",this.column)},i=r=>this.handleContextMenuMouseEvent(r,void 0,this.column);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:n,contextmenu:i})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.toggleCss("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return B4(t)?t.getAnchorElementForMenu(e):this.eGui}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function B4(e){return typeof(e==null?void 0:e.getAnchorElementForMenu)=="function"&&typeof e.onMenuKeyboardShortcut=="function"}var jbe=0,jA=class extends Yt{constructor(e,t,n){super(),this.rowIndex=e,this.pinned=t,this.type=n,this.instanceId=jbe++,this.comp=null,this.allCtrls=[];let i="ag-header-row-column";n==="group"?i="ag-header-row-group":n==="filter"&&(i="ag-header-row-filter"),this.headerRowClass=`ag-header-row ${i}`}setRowIndex(e){var t;this.rowIndex=e,(t=this.comp)==null||t.setRowIndex(this.getAriaRowIndex()),this.onRowHeightChanged()}postConstruct(){this.isPrintLayout=lu(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return this.comp?this.allCtrls.every(e=>e.eGui!=null):!1}setComp(e,t,n=!0){this.comp=e,t=K1(this,this.beans.context,t),n&&(this.setRowIndex(this.rowIndex),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){const t=this.onRowHeightChanged.bind(this),n=this.onDisplayedColumnsChanged.bind(this);e.addManagedEventListeners({columnResized:this.setWidth.bind(this),displayedColumnsChanged:n,virtualColumnsChanged:i=>this.onVirtualColumnsChanged(i.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,stylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",n),e.addManagedPropertyListener("ensureDomOrder",i=>this.isEnsureDomOrder=i.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}onDisplayedColumnsChanged(){this.isPrintLayout=lu(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}setWidth(){if(!this.comp)return;const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{visibleCols:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){if(!this.comp)return;const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){let e=0;const t=KF(this.beans);for(let r=0;r<t.length;r++){if(r===this.rowIndex&&this.type==="group")return{topOffset:e,rowHeight:t[r]};e+=t[r]}const n=ZF(this.beans);if(this.type==="column")return{topOffset:e,rowHeight:n};e+=n;const i=mH(this.beans);return{topOffset:e,rowHeight:i}}onVirtualColumnsChanged(e=!1){if(!this.comp)return;const t=this.getUpdatedHeaderCtrls(),n=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,n,e)}getUpdatedHeaderCtrls(){const e=this.ctrlsById;this.ctrlsById=new Map;const t=this.getColumnsInViewport();for(const i of t)this.recycleAndCreateHeaderCtrls(i,this.ctrlsById,e);const n=i=>{const{focusSvc:r,visibleCols:o}=this.beans;return r.isHeaderWrapperFocused(i)?o.isVisible(i.column):!1};if(e)for(const[i,r]of e)n(r)?this.ctrlsById.set(i,r):this.destroyBean(r);return this.allCtrls=Array.from(this.ctrlsById.values()),this.allCtrls}getHeaderCellCtrls(){return this.allCtrls}recycleAndCreateHeaderCtrls(e,t,n){if(e.isEmptyGroup())return;const i=e.getUniqueId();let r;if(n&&(r=n.get(i),n.delete(i)),r&&r.column!=e&&(this.destroyBean(r),r=void 0),r==null)switch(this.type){case"filter":{r=this.createBean(this.beans.registry.createDynamicBean("headerFilterCellCtrl",!0,e,this));break}case"group":r=this.createBean(this.beans.registry.createDynamicBean("headerGroupCellCtrl",!0,e,this));break;default:r=this.createBean(new Gbe(e,this));break}t.set(i,r)}getColumnsInViewport(){if(!this.isPrintLayout)return this.getComponentsToRender();if(this.pinned)return[];const e=[];for(const t of["left",null,"right"])e.push(...this.getComponentsToRender(t));return e}getComponentsToRender(e=this.pinned){return this.type==="group"?this.beans.colViewport.getHeadersToRender(e,this.rowIndex):this.beans.colViewport.getColumnHeadersToRender(e)}focusHeader(e,t){const n=this.allCtrls.find(r=>r.column==e);return n?n.focus(t):!1}destroy(){this.allCtrls=this.destroyBeans(this.allCtrls),this.ctrlsById=void 0,this.comp=null,super.destroy()}},Hbe=class extends Yt{constructor(e){super(),this.pinned=e,this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[]}setComp(e,t){this.comp=e,this.eViewport=t;const{pinnedCols:n,ctrlsSvc:i,colModel:r,colMoves:o}=this.beans;this.setupCenterWidth(),n==null||n.setupHeaderPinnedWidth(this),this.setupDragAndDrop(o,this.eViewport);const s=this.refresh.bind(this,!0);this.addManagedEventListeners({displayedColumnsChanged:s,advancedFilterEnabledChanged:s});const a=`${typeof this.pinned=="string"?this.pinned:"center"}Header`;i.register(a,this),r.ready&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){const{focusSvc:t,filterManager:n,visibleCols:i}=this.beans;let r=0;const o=t.getFocusHeaderToUseAfterRefresh(),s=()=>{const v=i.headerGroupRowCount;r=v,e||(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls));const w=this.groupsRowCtrls.length;if(w!==v){if(w>v){for(let R=v;R<w;R++)this.destroyBean(this.groupsRowCtrls[R]);this.groupsRowCtrls.length=v;return}for(let R=w;R<v;R++){const L=this.createBean(new jA(R,this.pinned,"group"));this.groupsRowCtrls.push(L)}}},a=()=>{const v=r++;if(this.hidden){this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl);return}this.columnsRowCtrl==null||!e?(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.columnsRowCtrl=this.createBean(new jA(v,this.pinned,"column"))):this.columnsRowCtrl.rowIndex!==v&&this.columnsRowCtrl.setRowIndex(v)},d=()=>{this.includeFloatingFilter=!!(n!=null&&n.hasFloatingFilters())&&!this.hidden;const v=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){v();return}e||v();const w=r++;this.filtersRowCtrl?this.filtersRowCtrl.rowIndex!==w&&this.filtersRowCtrl.setRowIndex(w):this.filtersRowCtrl=this.createBean(new jA(w,this.pinned,"filter"))},h=this.getAllCtrls();s(),a(),d();const m=this.getAllCtrls();this.comp.setCtrls(m),this.restoreFocusOnHeader(t,o),h.length!==m.length&&this.beans.eventSvc.dispatchEvent({type:"headerRowsChanged"})}getHeaderCtrlForColumn(e){const t=n=>n==null?void 0:n.getHeaderCellCtrls().find(i=>i.column===e);if(zy(e))return t(this.columnsRowCtrl);if(this.groupsRowCtrls.length!==0)for(let n=0;n<this.groupsRowCtrls.length;n++){const i=t(this.groupsRowCtrls[n]);if(i)return i}}getHtmlElementForColumnHeader(e){var t;return((t=this.getHeaderCtrlForColumn(e))==null?void 0:t.eGui)??null}getRowType(e){var t;return(t=this.getAllCtrls()[e])==null?void 0:t.type}focusHeader(e,t,n){const r=this.getAllCtrls()[e];return r?r.focusHeader(t,n):!1}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}destroy(){this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl),this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls),super.destroy()}setupDragAndDrop(e,t){const n=e==null?void 0:e.createBodyDropTarget(this.pinned,t);n&&this.createManagedBean(n)}restoreFocusOnHeader(e,t){if(!t)return;const{column:n}=t;n.getPinned()==this.pinned&&e.focusHeaderPosition({headerPosition:t,scroll:!1})}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new WF(e=>this.comp.setCenterWidth(`${e}px`),!0))}},Vbe=class extends Yt{constructor(){super(...arguments),this.beanName="menuSvc"}postConstruct(){const{enterpriseMenuFactory:e,filterMenuFactory:t}=this.beans;this.activeMenuFactory=e??t}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){this.showColumnMenuCommon(j4(this.beans),e,e.containerType,!0)}showHeaderContextMenu(e,t,n){var i;(i=this.activeMenuFactory)==null||i.showMenuAfterContextMenuEvent(e,t,n)}hidePopupMenu(){var e,t;(e=this.beans.contextMenuSvc)==null||e.hideActiveMenu(),(t=this.activeMenuFactory)==null||t.hideActiveMenu()}hideFilterMenu(){var e;(e=j4(this.beans))==null||e.hideActiveMenu()}isColumnMenuInHeaderEnabled(e){var n;const{suppressHeaderMenuButton:t}=e.getColDef();return!t&&!!((n=this.activeMenuFactory)!=null&&n.isMenuEnabled(e))&&(Ed(this.gos)||!!this.beans.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){var t;return!e.getColDef().suppressHeaderFilterButton&&!!((t=this.beans.filterManager)!=null&&t.isFilterAllowed(e))}isHeaderContextMenuEnabled(e){const t=e&&zy(e)?e.getColDef():e==null?void 0:e.getColGroupDef();return!(t!=null&&t.suppressHeaderContextMenu)&&this.gos.get("columnMenu")==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(i0()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!Ed(this.gos)&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){var t;return!!((t=this.beans.filterManager)!=null&&t.isFilterAllowed(e))&&!Ed(this.gos)&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isFloatingFilterButtonEnabled(e){return!e.getColDef().suppressFloatingFilterButton}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos,t=e.get("suppressMenuHide");return Ed(e)?e.exists("suppressMenuHide")?t:!1:t}showColumnMenuCommon(e,t,n,i){const{positionBy:r,onClosedCallback:o}=t,s=t.column;if(r==="button"){const{buttonElement:a}=t;e==null||e.showMenuAfterButtonClick(s,a,n,o,i)}else if(r==="mouse"){const{mouseEvent:a}=t;e==null||e.showMenuAfterMouseEvent(s,a,n,o,i)}else if(s){const a=this.beans,d=a.ctrlsSvc;d.getScrollFeature().ensureColumnVisible(s,"auto"),Rm(a,()=>{var m;const h=(m=d.getHeaderRowContainerCtrl(s.getPinned()))==null?void 0:m.getHeaderCtrlForColumn(s);h&&(e==null||e.showMenuAfterButtonClick(s,h.getAnchorElementForMenu(i),n,o,i))})}}};function G4(e,t,n){e.menuVisible!==t&&(e.menuVisible=t,e.dispatchColEvent("menuVisibleChanged",n))}function j4(e){const{enterpriseMenuFactory:t,filterMenuFactory:n,gos:i}=e;return t&&Ed(i)?t:n}var J2=class extends FF{constructor(){super(...arguments),this.errorMessages=null}init(e){this.params=e,this.initialiseEditor(e),this.eEditor.onValueChange(()=>e.validate())}destroy(){this.errorMessages=null}},Q2=class extends ra{constructor(){super()}};function $be(e,t,n){const i=Gc(e,t,n);if(i){const{className:o}=i;if(typeof o=="string"&&o.includes("ag-icon")||typeof o=="object"&&o["ag-icon"])return i}const r=_h({tag:"span"});return r.appendChild(i),r}function Gc(e,t,n){var o;let i=null;e==="smallDown"?an(262):e==="smallLeft"?an(263):e==="smallRight"&&an(264);const r=n==null?void 0:n.getColDef().icons;if(r&&(i=r[e]),t.gos&&!i){const s=t.gos.get("icons");s&&(i=s[e])}if(i){let s;if(typeof i=="function")s=i();else if(typeof i=="string")s=i;else{an(38,{iconName:e});return}if(typeof s=="string")return xF(s);if(_F(s))return s;an(133,{iconName:e});return}else{const s=t.registry.getIcon(e);return s||(o=t.validation)==null||o.validateIcon(e),_h({tag:"span",cls:`ag-icon ag-icon-${s??e}`,role:"presentation",attrs:{unselectable:"on"}})}}var Wbe={tag:"div",cls:"ag-overlay-loading-center",children:[{tag:"span",ref:"eLoadingIcon",cls:"ag-loading-icon"},{tag:"span",ref:"eLoadingText",cls:"ag-loading-text"}]},Ube=class extends Q2{constructor(){super(...arguments),this.eLoadingIcon=Yn,this.eLoadingText=Yn}init(e){var r,o;const{beans:t,gos:n}=this,i=nm((r=n.get("overlayLoadingTemplate"))==null?void 0:r.trim());if(this.setTemplate(i??Wbe),!i){const s=Gc("overlayLoading",t,null);s&&this.eLoadingIcon.appendChild(s);const a=((o=e.loading)==null?void 0:o.overlayText)??this.getLocaleTextFunc()("loadingOoo","Loading...");this.eLoadingText.textContent=a,t.ariaAnnounce.announceValue(a,"overlay")}}},qbe={tag:"div",cls:"ag-overlay-exporting-center",children:[{tag:"span",ref:"eExportingIcon",cls:"ag-loading-icon"},{tag:"span",ref:"eExportingText",cls:"ag-exporting-text"}]},Kbe=class extends Q2{constructor(){super(...arguments),this.eExportingIcon=Yn,this.eExportingText=Yn}init(e){var r;const{beans:t}=this;this.setTemplate(qbe);const n=Gc("overlayExporting",t,null);n&&this.eExportingIcon.appendChild(n);const i=((r=e.exporting)==null?void 0:r.overlayText)??this.getLocaleTextFunc()("exportingOoo","Exporting...");this.eExportingText.textContent=i,t.ariaAnnounce.announceValue(i,"overlay")}},Zbe={tag:"span",cls:"ag-overlay-no-rows-center"},Ybe=class extends Q2{init(e){var r,o;const{beans:t,gos:n}=this,i=nm((r=n.get("overlayNoRowsTemplate"))==null?void 0:r.trim());if(this.setTemplate(i??Zbe),!i){const s=((o=e.noRows)==null?void 0:o.overlayText)??this.getLocaleTextFunc()("noRowsToShow","No Rows To Show");this.getGui().textContent=s,t.ariaAnnounce.announceValue(s,"overlay")}}},Xbe={tag:"span",cls:"ag-overlay-no-matching-rows-center"},Jbe=class extends Q2{init(e){var i;const{beans:t}=this;this.setTemplate(Xbe);const n=((i=e.noMatchingRows)==null?void 0:i.overlayText)??this.getLocaleTextFunc()("noMatchingRows","No Matching Rows");this.getGui().textContent=n,t.ariaAnnounce.announceValue(n,"overlay")}},Qbe=".ag-dnd-ghost{align-items:center;background-color:var(--ag-drag-and-drop-image-background-color);border:var(--ag-drag-and-drop-image-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-drag-and-drop-image-shadow);color:var(--ag-text-color);cursor:move;display:flex;font-weight:500;gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);text-overflow:ellipsis;transform:translateY(calc(var(--ag-spacing)*2));white-space:nowrap}.ag-dnd-ghost-not-allowed{border:var(--ag-drag-and-drop-image-not-allowed-border)}",exe={tag:"div",children:[{tag:"div",ref:"eGhost",cls:"ag-dnd-ghost ag-unselectable",children:[{tag:"span",ref:"eIcon",cls:"ag-dnd-ghost-icon ag-shake-left-to-right"},{tag:"div",ref:"eLabel",cls:"ag-dnd-ghost-label"}]}]},txe=class extends ra{constructor(){super(),this.dragSource=null,this.eIcon=Yn,this.eLabel=Yn,this.eGhost=Yn,this.registerCSS(Qbe)}postConstruct(){const e=t=>$be(t,this.beans,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate(exe),this.beans.environment.applyThemeClasses(this.eGhost)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t){const{eGhost:n,eIcon:i,dragSource:r,dropIconMap:o,gos:s}=this;jc(i);let a=null;e||(e=r!=null&&r.getDefaultIconName?r.getDefaultIconName():"notAllowed"),a=o[e],n.classList.toggle("ag-dnd-ghost-not-allowed",e==="notAllowed"),i.classList.toggle("ag-shake-left-to-right",t),!(a===o.hide&&s.get("suppressDragLeaveHidesColumns"))&&a&&i.appendChild(a)}setLabel(e){this.eLabel.textContent=e}},nxe=".ag-checkbox-cell{height:100%}",ixe={tag:"div",cls:"ag-cell-wrapper ag-checkbox-cell",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},rxe=class extends ra{constructor(){super(ixe,[LF]),this.eCheckbox=Yn,this.registerCSS(nxe)}init(e){this.refresh(e);const{eCheckbox:t,beans:n}=this,i=t.getInputElement();i.setAttribute("tabindex","-1"),M9(i,"polite"),this.addManagedListeners(i,{click:r=>{if(y0(r),t.isDisabled())return;const o=t.getValue();this.onCheckboxChanged(o)},dblclick:r=>{y0(r)}}),this.addManagedElementListeners(e.eGridCell,{keydown:r=>{if(r.key===kt.SPACE&&!t.isDisabled()){e.eGridCell===Os(n)&&t.toggle();const o=t.getValue();this.onCheckboxChanged(o),r.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let t,n=!0;const{value:i,column:r,node:o}=e;if(o.group&&r)if(typeof i=="boolean")t=i;else{const v=r.getColId();v.startsWith(q2)?t=i==null||i===""?void 0:i==="true":o.aggData&&o.aggData[v]!==void 0||o.sourceRowIndex>=0?t=i??void 0:n=!1}else t=i??void 0;const{eCheckbox:s}=this;if(!n){s.setDisplayed(!1);return}s.setValue(t);const a=e.disabled??!(r!=null&&r.isCellEditable(o));s.setDisabled(a);const d=this.getLocaleTextFunc(),h=$2(d,t),m=a?h:`${d("ariaToggleCellValue","Press SPACE to toggle cell value")} (${h})`;s.setInputAriaLabel(m)}onCheckboxChanged(e){const{params:t}=this,{column:n,node:i,value:r}=t,{editSvc:o}=this.beans;if(!n)return;const s={rowNode:i,column:n};o==null||o.dispatchCellEvent(s,null,"cellEditingStarted",{value:r});const a=i.setDataValue(n,e,"ui");o==null||o.dispatchCellEvent(s,null,"cellEditingStopped",{oldValue:r,newValue:e,valueChanged:a}),a||this.updateCheckbox(t)}},H4=class{constructor(e,t){this.beans=e,this.floating=t,this.all=new Set,this.visible=new Set,this.order=[],this.queued=new Set}size(){return this.visible.size}add(e){const{all:t,visible:n,order:i}=this;t.has(e)||(t.add(e),n.add(e),i.push(e),this.sort())}delete(e){this.all.delete(e),this.visible.delete(e),this.queued.delete(e.id),Bp(this.order,e)}has(e){return this.visible.has(e)}forEach(e){this.order.forEach(e)}getByIndex(e){return this.order[e]}getById(e){for(const t of this.visible)if(t.id==e)return t}clear(){const{all:e,visible:t,order:n,queued:i}=this;e.clear(),i.clear(),t.clear(),n.length=0}sort(){const{sortSvc:e,rowNodeSorter:t,gos:n}=this.beans,i=(e==null?void 0:e.getSortOptions())??[],r=axe(this.order);if(this.order.sort((s,a)=>{var d,h;return(((d=s.pinnedSibling)==null?void 0:d.rowIndex)??0)-(((h=a.pinnedSibling)==null?void 0:h.rowIndex)??0)}),this.order=(t==null?void 0:t.doFullSort(this.order,i))??this.order,!r)return;const o=a7(n);o==="bottom"||o==="pinnedBottom"?this.order.push(r):this.order.unshift(r)}hide(e){const{all:t,visible:n}=this,i=n.size;return t.forEach(r=>e(r)?n.delete(r):n.add(r)),this.order=Array.from(n),this.sort(),i!=n.size}queue(e){this.queued.add(e)}unqueue(e){this.queued.delete(e)}forEachQueued(e){this.queued.forEach(e)}};function bH(e){var n;if(e.level===-1)return!0;const t=e.parent;return(n=t==null?void 0:t.childrenAfterSort)!=null&&n.some(i=>i==e)?bH(t):!1}function HA(e,t){const{gos:n,rowModel:i,filterManager:r}=e;return Px(n)?!i.getRowNode(t.id):r!=null&&r.isAnyFilterPresent()?!bH(t):n.get("pivotMode")?!t.group:!1}function oxe(e){return!!e.footer&&e.level===-1}function sxe(e){return!!e.pinnedSibling&&oxe(e.pinnedSibling)}function axe(e){var n;const t=e.findIndex(sxe);if(t>-1)return(n=e.splice(t,1))==null?void 0:n[0]}var V4=class extends Yt{postConstruct(){const{gos:e,beans:t}=this;this.top=new H4(t,"top"),this.bottom=new H4(t,"bottom");const n=r=>HA(t,r.pinnedSibling),i=()=>{const r=e.get("isRowPinned");r&&e.get("enableRowPinning")&&t.rowModel.forEachNode(o=>this.pinRow(o,r(o)),!0),this.refreshRowPositions(),this.dispatchRowPinnedEvents()};this.addManagedEventListeners({stylesChanged:this.onGridStylesChanges.bind(this),modelUpdated:({keepRenderedRows:r})=>{this.tryToEmptyQueues(),this.pinGrandTotalRow();let o=!1;this.forContainers(a=>{o||(o=a.hide(n))});const s=this.refreshRowPositions();(!r||s||o)&&this.dispatchRowPinnedEvents()},columnRowGroupChanged:()=>{this.forContainers(uxe),this.refreshRowPositions()},rowNodeDataChanged:({node:r})=>{const o=e.get("isRowPinnable");((o==null?void 0:o(r))??!0)||this.pinRow(r,null)},firstDataRendered:i}),this.addManagedPropertyListener("pivotMode",()=>{this.forContainers(r=>r.hide(n)),this.dispatchRowPinnedEvents()}),this.addManagedPropertyListener("grandTotalRow",({currentValue:r})=>{this._grandTotalPinned=r==="pinnedBottom"?"bottom":r==="pinnedTop"?"top":null}),this.addManagedPropertyListener("isRowPinned",i)}destroy(){this.reset(!1),super.destroy()}reset(e=!0){this.forContainers(t=>{const n=[];t.forEach(i=>n.push(i)),n.forEach(i=>this.pinRow(i,null)),t.clear()}),e&&this.dispatchRowPinnedEvents()}pinRow(e,t,n){var s;if(e.footer&&e.level>-1)return;if(e.footer&&e.level===-1){this._grandTotalPinned=t,dxe(this.beans);return}const i=e.rowPinned??((s=e.pinnedSibling)==null?void 0:s.rowPinned);if(i!=null&&t!=null&&t!=i){const a=e.rowPinned?e:e.pinnedSibling,d=e.rowPinned?e.pinnedSibling:e;this.pinRow(a,null,n),this.pinRow(d,t,n);return}const o=n&&cxe(this.beans,e,n);if(o){o.forEach(a=>this.pinRow(a,t));return}if(t==null){const a=e.rowPinned?e:e.pinnedSibling,d=this.findPinnedRowNode(a);if(!d)return;d.delete(a);const h=a.pinnedSibling;VA(a),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(h)}else{const a=$4(this.beans,e,t),d=this.getContainer(t);d.add(a),HA(this.beans,e)&&d.hide(h=>HA(this.beans,h.pinnedSibling)),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(e)}}isManual(){return!0}isEmpty(e){return this.getContainer(e).size()===0}isRowsToRender(e){return!this.isEmpty(e)}ensureRowHeightsValid(){let e=!1,t=0;const n=i=>{if(i.rowHeightEstimated){const r=Ly(this.beans,i);i.setRowTop(t),i.setRowHeight(r.height),t+=r.height,e=!0}};return this.bottom.forEach(n),t=0,this.top.forEach(n),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}getPinnedTopTotalHeight(){return W4(this.top)}getPinnedBottomTotalHeight(){return W4(this.bottom)}getPinnedTopRowCount(){return this.top.size()}getPinnedBottomRowCount(){return this.bottom.size()}getPinnedTopRow(e){return this.top.getByIndex(e)}getPinnedBottomRow(e){return this.bottom.getByIndex(e)}getPinnedRowById(e,t){return this.getContainer(t).getById(e)}forEachPinnedRow(e,t){this.getContainer(e).forEach(t)}getPinnedState(){const e=t=>{const n=[];return this.forEachPinnedRow(t,i=>n.push(i.pinnedSibling.id)),n};return{top:e("top"),bottom:e("bottom")}}setPinnedState(e){this.forContainers((t,n)=>{for(const i of e[n]){const r=this.beans.rowModel.getRowNode(i);r?this.pinRow(r,n):t.queue(i)}})}getGrandTotalPinned(){return this._grandTotalPinned}setGrandTotalPinned(e){this._grandTotalPinned=e}tryToEmptyQueues(){this.forContainers((e,t)=>{const n=new Set;e.forEachQueued(i=>{const r=this.beans.rowModel.getRowNode(i);r&&n.add(r)});for(const i of n)e.unqueue(i.id),this.pinRow(i,t)})}pinGrandTotalRow(){var a;const{gos:e,beans:t,_grandTotalPinned:n}=this,i=t.rowModel;if(!Ks(e))return;const r=(a=i.rootNode)==null?void 0:a.sibling;if(!r)return;const o=r.pinnedSibling,s=o&&this.findPinnedRowNode(o);if(n){if(s&&s.floating!==n&&(s.delete(o),VA(o)),!s||s.floating!==n){const d=$4(t,r,n);this.getContainer(n).add(d)}}else{if(!s)return;s.delete(o),VA(o)}}onGridStylesChanges(e){e.rowHeightChanged&&this.forContainers(t=>t.forEach(n=>n.setRowHeight(n.rowHeight,!0)))}getContainer(e){return e==="top"?this.top:this.bottom}findPinnedRowNode(e){if(this.top.has(e))return this.top;if(this.bottom.has(e))return this.bottom}refreshRowPositions(e){const t=i=>lxe(this.beans,i);if(e)return t(this.getContainer(e));let n=!1;return this.forContainers(i=>{const r=t(i);n||(n=r)}),n}forContainers(e){e(this.top,"top"),e(this.bottom,"bottom")}dispatchRowPinnedEvents(e){this.eventSvc.dispatchEvent({type:"pinnedRowsChanged"}),e==null||e.dispatchRowEvent("rowPinned")}};function lxe(e,t){let n=0,i=!1;return t.forEach((r,o)=>{if(i||(i=r.rowTop!==n),r.setRowTop(n),r.rowHeightEstimated||r.rowHeight==null){const s=Ly(e,r).height;i||(i=r.rowHeight!==s),r.setRowHeight(s)}r.setRowIndex(o),n+=r.rowHeight}),i}function $4(e,t,n){if(t.pinnedSibling)return t.pinnedSibling;const i=P0e(t,e);i.setRowTop(null),i.setRowIndex(null),i.rowPinned=n;const r=n==="top"?GF:jF;return i.id=`${r}${n}-${t.id}`,i.pinnedSibling=t,t.pinnedSibling=i,i}function VA(e){if(!e.pinnedSibling)return;e.rowPinned=null,e._destroy(!1);const t=e.pinnedSibling;e.pinnedSibling=void 0,t&&(t.pinnedSibling=void 0,t.rowPinned=null)}function uxe(e){const t=new Set;e.forEach(n=>{n.group&&t.add(n)}),t.forEach(n=>e.delete(n))}function cxe(e,t,n){var o;const{rowSpanSvc:i}=e,r=(n&&(i==null?void 0:i.isCellSpanning(n,t)))??!1;if(n&&r)return(o=i==null?void 0:i.getCellSpan(n,t))==null?void 0:o.spannedNodes}function W4(e){const t=e.size();if(t===0)return 0;const n=e.getByIndex(t-1);return n===void 0?0:n.rowTop+n.rowHeight}function dxe({gos:e,rowModel:t}){Ks(e)&&t.refreshModel({step:"map"})}var U4=class extends Yt{constructor(){super(...arguments),this.nextId=0,this.pinnedTopRows={cache:{},order:[]},this.pinnedBottomRows={cache:{},order:[]}}postConstruct(){const e=this.gos;this.setPinnedRowData(e.get("pinnedTopRowData"),"top"),this.setPinnedRowData(e.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",t=>this.setPinnedRowData(t.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",t=>this.setPinnedRowData(t.currentValue,"bottom")),this.addManagedEventListeners({stylesChanged:this.onGridStylesChanges.bind(this)})}reset(){}isEmpty(e){return this.getCache(e).order.length===0}isRowsToRender(e){return!this.isEmpty(e)}isManual(){return!1}pinRow(e,t){}onGridStylesChanges(e){if(e.rowHeightChanged){const t=n=>{n.setRowHeight(n.rowHeight,!0)};dw(this.pinnedBottomRows,t),dw(this.pinnedTopRows,t)}}ensureRowHeightsValid(){let e=!1,t=0;const n=i=>{if(i.rowHeightEstimated){const r=Ly(this.beans,i);i.setRowTop(t),i.setRowHeight(r.height),t+=r.height,e=!0}};return dw(this.pinnedBottomRows,n),t=0,dw(this.pinnedTopRows,n),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventSvc.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){var m;const n=this.getCache(t);if(e===void 0){n.order.length=0,n.cache={};return}const i=ix(this.gos),r=t==="top"?GF:jF,o=new Set(n.order),s=[],a=new Set;let d=0,h=-1;for(const v of e){const w=(i==null?void 0:i({data:v,level:0,rowPinned:t}))??r+this.nextId++;if(a.has(w)){an(96,{id:w,data:v});continue}h++,a.add(w),s.push(w);const R=Iw(n,w);if(R!==void 0)R.data!==v&&R.updateData(v),d+=this.setRowTopAndRowIndex(R,d,h),o.delete(w);else{const L=new Ny(this.beans);L.id=w,L.data=v,L.rowPinned=t,d+=this.setRowTopAndRowIndex(L,d,h),n.cache[w]=L,n.order.push(w)}}for(const v of o)(m=Iw(n,v))==null||m.clearRowTopAndRowIndex(),delete n.cache[v];n.order=s}setRowTopAndRowIndex(e,t,n){return e.setRowTop(t),e.setRowHeight(Ly(this.beans,e).height),e.setRowIndex(n),e.rowHeight}getPinnedTopTotalHeight(){return q4(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return q4(this.pinnedBottomRows)}getPinnedTopRowCount(){return jk(this.pinnedTopRows)}getPinnedBottomRowCount(){return jk(this.pinnedBottomRows)}getPinnedTopRow(e){return Gk(this.pinnedTopRows,e)}getPinnedBottomRow(e){return Gk(this.pinnedBottomRows,e)}getPinnedRowById(e,t){return Iw(this.getCache(t),e)}forEachPinnedRow(e,t){return dw(this.getCache(e),t)}getCache(e){return e==="top"?this.pinnedTopRows:this.pinnedBottomRows}getPinnedState(){return{top:[],bottom:[]}}setPinnedState(){}getGrandTotalPinned(){}setGrandTotalPinned(){}};function q4(e){const t=jk(e);if(t===0)return 0;const n=Gk(e,t-1);return n===void 0?0:n.rowTop+n.rowHeight}function Iw(e,t){return e.cache[t]}function Gk(e,t){return Iw(e,e.order[t])}function dw(e,t){e.order.forEach((n,i)=>{const r=Iw(e,n);r&&t(r,i)})}function jk(e){return e.order.length}var hxe=class extends Yt{constructor(){super(...arguments),this.beanName="pinnedRowModel"}postConstruct(){const{gos:e}=this,t=()=>{const n=e.get("enableRowPinning"),i=a7(e),o=!!n||(i==="pinnedBottom"||i==="pinnedTop"),s=o?this.inner instanceof U4:this.inner instanceof V4;this.inner&&s&&this.destroyBean(this.inner),(s||!this.inner)&&(this.inner=this.createManagedBean(o?new V4:new U4))};this.addManagedPropertyListeners(["enableRowPinning","grandTotalRow"],t),t()}reset(){return this.inner.reset()}isEmpty(e){return this.inner.isEmpty(e)}isManual(){return this.inner.isManual()}isRowsToRender(e){return this.inner.isRowsToRender(e)}pinRow(e,t,n){return this.inner.pinRow(e,t,n)}ensureRowHeightsValid(){return this.inner.ensureRowHeightsValid()}getPinnedRowById(e,t){return this.inner.getPinnedRowById(e,t)}getPinnedTopTotalHeight(){return this.inner.getPinnedTopTotalHeight()}getPinnedBottomTotalHeight(){return this.inner.getPinnedBottomTotalHeight()}getPinnedTopRowCount(){return this.inner.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.inner.getPinnedBottomRowCount()}getPinnedTopRow(e){return this.inner.getPinnedTopRow(e)}getPinnedBottomRow(e){return this.inner.getPinnedBottomRow(e)}forEachPinnedRow(e,t){return this.inner.forEachPinnedRow(e,t)}getPinnedState(){return this.inner.getPinnedState()}setPinnedState(e){return this.inner.setPinnedState(e)}setGrandTotalPinned(e){return this.inner.setGrandTotalPinned(e)}getGrandTotalPinned(){return this.inner.getGrandTotalPinned()}},NS=e=>{let t=e.childrenAfterGroup;for(;t!=null&&t.length;){const n=t[0];if(n.sourceRowIndex>=0)return n;t=n.childrenAfterGroup}},fxe=(e,t,n,i)=>{if(!t.size||!e)return!1;let r=!1;const o=e.length??0;let s=-1;n&&(s=n.sourceRowIndex,n=s<0?NS(n):null,n&&(s=n.sourceRowIndex)),s<0||s>=o?s=o:i||++s;let a=s,d=Math.min(s,o-1);for(const v of t){const w=v.sourceRowIndex;w<a&&(a=w),w>d&&(d=w)}let h=a;for(let v=a;v<s;++v){const w=e[v];t.has(w)||(w.sourceRowIndex!==h&&(w.sourceRowIndex=h,e[h]=w,r=!0),++h)}let m=d;for(let v=d;v>=s;--v){const w=e[v];t.has(w)||(w.sourceRowIndex!==m&&(w.sourceRowIndex=m,e[m]=w,r=!0),--m)}for(const v of t)v.sourceRowIndex!==h&&(v.sourceRowIndex=h,e[h]=v,r=!0),++h;return r},y_=class{constructor(){this.reordered=!1,this.removals=[],this.updates=new Set,this.adds=new Set}};function Q1(e){return!!(e.rowPinned&&e.pinnedSibling)}function dh(e,t,n,i){const r=t==="top";if(!n)return dh(e,t,r?e.getPinnedTopRow(0):e.getPinnedBottomRow(0),i);if(!i){const d=r?e.getPinnedTopRowCount():e.getPinnedBottomRowCount();return dh(e,t,n,r?e.getPinnedTopRow(d-1):e.getPinnedBottomRow(d-1))}let o=!1,s=!1;const a=[];return e.forEachPinnedRow(t,d=>{if(d===n&&!o){o=!0,a.push(d);return}if(o&&d===i){s=!0,a.push(d);return}o&&!s&&a.push(d)}),a}var pxe={tag:"div",cls:"ag-selection-checkbox",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},gxe=class extends ra{constructor(){super(pxe,[LF]),this.eCheckbox=Yn}postConstruct(){this.eCheckbox.setPassive(!0)}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.getLocaleTextFunc(),{rowNode:t,eCheckbox:n}=this,i=t.isSelected(),r=$2(e,i),[o,s]=t.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],a=e(o,s);n.setValue(i,!0),n.setInputAriaLabel(`${a} (${r})`)}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getWrapperElement(),{dblclick:y0,click:i=>{var r;y0(i),!this.eCheckbox.isDisabled()&&((r=this.beans.selectionSvc)==null||r.handleSelectionEvent(i,this.rowNode,"checkboxSelected"))}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),this.addManagedPropertyListener("rowSelection",({currentValue:i,previousValue:r})=>{const o=typeof i=="object"?_A(i):void 0,s=typeof r=="object"?_A(r):void 0;o!==s&&this.onSelectableChanged()}),Ak(this.gos)||typeof this.getIsVisible()=="function"){const i=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:i}),this.addManagedListeners(this.rowNode,{dataChanged:i,cellChanged:i}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}showOrHideSelect(){const{column:e,rowNode:t,overrides:n,gos:i}=this,r=t.selectable,o=this.getIsVisible();let s;if(typeof o=="function"){const v=n==null?void 0:n.callbackParams;if(!e)s=o({...v,node:t,data:t.data});else{const w=e.createColumnFunctionCallbackParams(t);s=o({...v,...w})}}else s=o??!1;const a=r&&!s||!r&&s,d=r||s,h=i.get("rowSelection"),m=h&&typeof h!="string"?!_A(h):!!(e!=null&&e.getColDef().showDisabledCheckboxes);this.setVisible(d&&(a?m:!0)),this.setDisplayed(d&&(a?m:!0)),d&&this.eCheckbox.setDisabled(a),n!=null&&n.removeHidden&&this.setDisplayed(d)}getIsVisible(){var n,i;const e=this.overrides;if(e)return e.isVisible;const t=this.gos.get("rowSelection");return t&&typeof t!="string"?Ib(t):(i=(n=this.column)==null?void 0:n.getColDef())==null?void 0:i.checkboxSelection}},mxe=class{constructor(e,t){this.rowModel=e,this.pinnedRowModel=t,this.selectAll=!1,this.rootId=null,this.endId=null,this.cachedRange=[]}reset(){this.rootId=null,this.endId=null,this.cachedRange.length=0}setRoot(e){this.rootId=e.id,this.endId=null,this.cachedRange.length=0}setEndRange(e){this.endId=e.id,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){const e=this.getRoot(),t=this.getEnd();if(e==null||t==null)return this.cachedRange;this.cachedRange=this.getNodesInRange(e,t)??[]}return this.cachedRange}isInRange(e){return this.rootId===null?!1:this.getRange().some(t=>t.id===e.id)}getRoot(e){if(this.rootId)return this.getRowNode(this.rootId);if(e)return this.setRoot(e),e}getEnd(){if(this.endId)return this.getRowNode(this.endId)}getRowNode(e){let t;const{rowModel:n,pinnedRowModel:i}=this;return t??(t=n.getRowNode(e)),i!=null&&i.isManual()&&(t??(t=i.getPinnedRowById(e,"top")),t??(t=i.getPinnedRowById(e,"bottom"))),t}truncate(e){const t=this.getRange();if(t.length===0)return{keep:[],discard:[]};const n=t[0].id===this.rootId,i=t.findIndex(r=>r.id===e.id);if(i>-1){const r=t.slice(0,i),o=t.slice(i+1);return this.setEndRange(e),n?{keep:r,discard:o}:{keep:o,discard:r}}else return{keep:t,discard:[]}}extend(e,t=!1){const n=this.getRoot();if(n==null){const r=this.getRange().slice();return t&&e.depthFirstSearch(o=>!o.group&&r.push(o)),r.push(e),this.setRoot(e),{keep:r,discard:[]}}const i=this.getNodesInRange(n,e);if(!i)return this.setRoot(e),{keep:[e],discard:[]};if(i.find(r=>r.id===this.endId))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{const r=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:r}}}getNodesInRange(e,t){const{pinnedRowModel:n,rowModel:i}=this;if(!(n!=null&&n.isManual()))return i.getNodesInRangeForSelection(e,t);if(e.rowPinned==="top"&&!t.rowPinned)return dh(n,"top",e,void 0).concat(i.getNodesInRangeForSelection(i.getRow(0),t)??[]);if(e.rowPinned==="bottom"&&!t.rowPinned){const r=dh(n,"bottom",void 0,e),o=i.getRowCount(),s=i.getRow(o-1);return(i.getNodesInRangeForSelection(t,s)??[]).concat(r)}if(!e.rowPinned&&!t.rowPinned)return i.getNodesInRangeForSelection(e,t);if(e.rowPinned==="top"&&t.rowPinned==="top")return dh(n,"top",e,t);if(e.rowPinned==="bottom"&&t.rowPinned==="top"){const r=dh(n,"top",t,void 0),o=dh(n,"bottom",void 0,e),s=i.getRow(0),a=i.getRow(i.getRowCount()-1);return r.concat(i.getNodesInRangeForSelection(s,a)??[]).concat(o)}if(!e.rowPinned&&t.rowPinned==="top")return dh(n,"top",t,void 0).concat(i.getNodesInRangeForSelection(i.getRow(0),e)??[]);if(e.rowPinned==="top"&&t.rowPinned==="bottom"){const r=dh(n,"top",e,void 0),o=dh(n,"bottom",void 0,t),s=i.getRow(0),a=i.getRow(i.getRowCount()-1);return r.concat(i.getNodesInRangeForSelection(s,a)??[]).concat(o)}if(e.rowPinned==="bottom"&&t.rowPinned==="bottom")return dh(n,"bottom",e,t);if(!e.rowPinned&&t.rowPinned==="bottom"){const r=dh(n,"bottom",void 0,t),o=i.getRow(i.getRowCount());return(i.getNodesInRangeForSelection(e,o)??[]).concat(r)}return null}},yxe=class extends Yt{constructor(e){super(),this.column=e,this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1}onSpaceKeyDown(e){const t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(Os(this.beans))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e;const t=this.createManagedBean(new IF);this.cbSelectAll=t,t.addCss("ag-header-select-all"),f0(t.getGui(),"presentation"),this.showOrHideSelectAll();const n=this.updateStateOfCheckbox.bind(this);this.addManagedEventListeners({newColumnsLoaded:()=>this.showOrHideSelectAll(),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:n,paginationChanged:n,modelUpdated:n}),this.addManagedPropertyListener("rowSelection",({currentValue:i,previousValue:r})=>{const o=s=>typeof s=="string"||!s||s.mode==="singleRow"?void 0:s.selectAll;o(i)!==o(r)&&this.showOrHideSelectAll(),this.updateStateOfCheckbox()}),this.addManagedListeners(t,{fieldValueChanged:this.onCbSelectAll.bind(this)}),t.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onDisplayedColumnsChanged(e){this.isAlive()&&this.showOrHideSelectAll(e.source==="uiColumnMoved")}showOrHideSelectAll(e=!1){const t=this.isCheckboxSelection();this.cbSelectAllVisible=t,this.cbSelectAll.setDisplayed(t),t&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel(e)}updateStateOfCheckbox(){if(!this.cbSelectAllVisible||this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.getSelectAllMode(),t=this.beans.selectionSvc,n=this.cbSelectAll,i=t.getSelectAllState(e);n.setValue(i);const r=t.hasNodesToSelect(e);n.setDisabled(!r),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(e=!1){const t=this.getLocaleTextFunc(),{headerCellCtrl:n,cbSelectAll:i,cbSelectAllVisible:r}=this,o=i.getValue(),s=$2(t,o),a=t("ariaRowSelectAll","Press Space to toggle all rows selection");n.setAriaDescriptionProperty("selectAll",r?`${a} (${s})`:null),i.setInputAriaLabel(t("ariaHeaderSelection","Column with Header Selection")),e||n.announceAriaDescription()}checkSelectionType(e){return AS(this.gos)?!0:(an(128,{feature:e}),!1)}checkRightRowModelType(e){const{gos:t,rowModel:n}=this.beans;return Ks(t)||Px(t)?!0:(an(129,{feature:e,rowModel:n.getType()}),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.getSelectAllMode();let n="uiSelectAll";t==="currentPage"?n="uiSelectAllCurrentPage":t==="filtered"&&(n="uiSelectAllFiltered");const i={source:n,selectAll:t},r=this.beans.selectionSvc;e?r.selectAllRowNodes(i):r.deselectAllRowNodes(i)}isCheckboxSelection(){const{column:e,gos:t,beans:n}=this,o=typeof t.get("rowSelection")=="object"?"headerCheckbox":"headerCheckboxSelection";return xH(n,e)&&this.checkRightRowModelType(o)&&this.checkSelectionType(o)}getSelectAllMode(){const e=d7(this.gos,!1);if(e)return e;const{headerCheckboxSelectionCurrentPageOnly:t,headerCheckboxSelectionFilteredOnly:n}=this.column.getColDef();return t?"currentPage":n?"filtered":"all"}destroy(){super.destroy(),this.cbSelectAll=void 0,this.headerCellCtrl=void 0}};function xH({gos:e,selectionColSvc:t},n){const i=e.get("rowSelection"),r=n.getColDef(),{headerCheckboxSelection:o}=r;let s=!1;if(typeof i=="object"){const d=$y(n),h=PF(n);(ES(i)==="autoGroupColumn"&&h||d&&(t!=null&&t.isSelectionColumnEnabled()))&&(s=u_(i))}else typeof o=="function"?s=o(ki(e,{column:n,colDef:r})):s=!!o;return s}var vxe=class extends Yt{postConstruct(){const{gos:e,beans:t}=this;this.selectionCtx=new mxe(t.rowModel,t.pinnedRowModel),this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],()=>{const n=Ak(e);n!==this.isRowSelectable&&(this.isRowSelectable=n,this.updateSelectable())}),this.isRowSelectable=Ak(e),this.addManagedEventListeners({cellValueChanged:n=>this.updateRowSelectable(n.node),rowNodeDataChanged:n=>this.updateRowSelectable(n.node)})}destroy(){super.destroy(),this.selectionCtx.reset()}createCheckboxSelectionComponent(){return new gxe}createSelectAllFeature(e){if(xH(this.beans,e))return new yxe(e)}isMultiSelect(){return AS(this.gos)}onRowCtrlSelected(e,t,n){const i=!!e.rowNode.isSelected();e.forEachGui(n,r=>{r.rowComp.toggleCss("ag-row-selected",i);const o=r.element;z9(o,i),o.contains(Os(this.beans))&&t(r)})}announceAriaRowSelection(e){var o,s;if(this.isRowSelectionBlocked(e))return;const t=e.isSelected(),n=(o=this.beans.editSvc)==null?void 0:o.isEditing({rowNode:e});if(!e.selectable||n)return;const r=this.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row`);(s=this.beans.ariaAnnounce)==null||s.announceValue(r,"rowSelection")}isRowSelectionBlocked(e){return!e.selectable||e.rowPinned&&!Q1(e)||!t0(this.gos)}updateRowSelectable(e,t){var i;const n=e.rowPinned&&e.pinnedSibling?e.pinnedSibling.selectable:((i=this.isRowSelectable)==null?void 0:i.call(this,e))??!0;return this.setRowSelectable(e,n,t),n}setRowSelectable(e,t,n){if(e.selectable!==t){if(e.selectable=t,e.dispatchRowEvent("selectableChanged"),n)return;if(u1(this.gos)){const r=this.calculateSelectedFromChildren(e);this.setNodesSelected({nodes:[e],newValue:r??!1,source:"selectableChanged"});return}e.isSelected()&&!e.selectable&&this.setNodesSelected({nodes:[e],newValue:!1,source:"selectableChanged"})}}calculateSelectedFromChildren(e){var i;let t=!1,n=!1;if(!((i=e.childrenAfterGroup)!=null&&i.length))return e.selectable?e.__selected:null;for(let r=0;r<e.childrenAfterGroup.length;r++){const o=e.childrenAfterGroup[r];let s=o.isSelected();if(!o.selectable){const a=this.calculateSelectedFromChildren(o);if(a===null)continue;s=a}switch(s){case!0:t=!0;break;case!1:n=!0;break;default:return}}if(!(t&&n))return t?!0:n?!1:e.selectable?e.__selected:null}selectRowNode(e,t,n,i="api"){if(t&&e.destroyed)return!1;const r=!e.selectable&&t,o=e.__selected===t;if(r||o)return!1;e.__selected=t,e.dispatchRowEvent("rowSelected");const s=e.sibling;s&&s.footer&&s.__localEventService&&s.dispatchRowEvent("rowSelected");const a=e.pinnedSibling;return a!=null&&a.rowPinned&&a.__localEventService&&a.dispatchRowEvent("rowSelected"),this.eventSvc.dispatchEvent({...T0e(e,this.gos,"rowSelected"),event:n||null,source:i}),!0}isCellCheckboxSelection(e,t){const n=this.gos.get("rowSelection");if(n&&typeof n!="string"){const i=$y(e)&&Ib(n);return e.isColumnFunc(t,i)}else return e.isColumnFunc(t,e.colDef.checkboxSelection)}inferNodeSelections(e,t,n,i){const{gos:r,selectionCtx:o}=this,s=e.isSelected(),a=u1(r),d=zme(r),h=Nme(r),m=this.isMultiSelect(),v=i==="rowClicked";if(v&&!(d||h))return null;if(t&&n&&m){const w=o.getRoot();if(w)if(w.isSelected()){const R=o.isInRange(e)?o.truncate(e):o.extend(e,a);return{deselect:R.discard,select:R.keep,reset:!1}}else{const R=o.extend(e,a);return{select:[],deselect:R.keep,reset:!1}}else return null}else if(t&&m){const w=o.selectAll?this.beans.rowModel.getRow(0):void 0,R=o.getRoot(w),L=o.isInRange(e)?o.truncate(e):o.extend(e,a);return{select:L.keep,deselect:L.discard,reset:o.selectAll||!!(R&&!R.isSelected())}}else if(n){if(v){const w=!s;return w&&!d||!w&&!h?null:(o.setRoot(e),{node:e,newValue:w,clearSelection:!1})}return o.setRoot(e),{node:e,newValue:!s,clearSelection:!m}}else{o.setRoot(e);const w=Bme(r),R=TS(r)==="filteredDescendants",L=v&&(!w||!d);if(R&&s===void 0&&Ks(r))return{node:e,newValue:!1,checkFilteredNodes:!0,clearSelection:!m||L};if(v){const O=s?!w:d;return O===s&&!L||O&&!d||!O&&!h?null:{node:e,newValue:O,clearSelection:!m||L,keepDescendants:e.group&&a}}return{node:e,newValue:!s,clearSelection:!m||L}}}},bxe=class extends E0e{initialiseTabGuard(t){super.initialiseTabGuard(t,VF)}},xxe=class extends z7{constructor(e){super(e,VF)}},wxe=500,Cxe=550,HC,_xe=e=>{if(!HC)HC=new WeakSet;else if(HC.has(e))return!1;return HC.add(e),!0},Hv=class{constructor(e,t=!1){this.eElement=e,this.preventClick=t,this.startListener=null,this.handlers=[],this.eventSvc=void 0,this.touchStart=null,this.lastTapTime=null,this.longPressTimer=0,this.moved=!1}addEventListener(e,t){let n=this.eventSvc;if(!n){if(n===null)return;this.eventSvc=n=new h0;const i=this.onTouchStart.bind(this);this.startListener=i,this.eElement.addEventListener("touchstart",i,{passive:!0})}n.addEventListener(e,t)}removeEventListener(e,t){var n;(n=this.eventSvc)==null||n.removeEventListener(e,t)}onTouchStart(e){if(this.touchStart||!_xe(e))return;const t=e.touches[0];this.touchStart=t;const n=this.handlers;if(!n.length){const i=this.eElement,r=i.ownerDocument,o=this.onTouchMove.bind(this),s=this.onTouchEnd.bind(this),a=this.onTouchCancel.bind(this),d={passive:!0},h={passive:!1};o_(n,[i,"touchmove",o,d],[r,"touchcancel",a,d],[r,"touchend",s,h],[r,"contextmenu",Cb,h])}this.clearLongPress(),this.longPressTimer=window.setTimeout(()=>{var i;this.longPressTimer=0,this.touchStart===t&&!this.moved&&(this.moved=!0,(i=this.eventSvc)==null||i.dispatchEvent({type:"longTap",touchStart:t,touchEvent:e}))},Cxe)}onTouchMove(e){const{moved:t,touchStart:n}=this;if(!t&&n){const i=Pb(n,e.touches);i&&!$9(i,n,4)&&(this.clearLongPress(),this.moved=!0)}}onTouchEnd(e){var n;const t=this.touchStart;!t||!Pb(t,e.changedTouches)||(this.moved||((n=this.eventSvc)==null||n.dispatchEvent({type:"tap",touchStart:t}),this.checkDoubleTap(t)),this.preventClick&&Cb(e),this.cancel())}onTouchCancel(e){const t=this.touchStart;!t||!Pb(t,e.changedTouches)||(this.lastTapTime=null,this.cancel())}checkDoubleTap(e){var i;let t=Date.now();const n=this.lastTapTime;n&&t-n>wxe&&((i=this.eventSvc)==null||i.dispatchEvent({type:"doubleTap",touchStart:e}),t=null),this.lastTapTime=t}cancel(){this.clearLongPress(),SF(this.handlers),this.touchStart=null}clearLongPress(){window.clearTimeout(this.longPressTimer),this.longPressTimer=0,this.moved=!1}destroy(){const e=this.startListener;e&&(this.startListener=null,this.eElement.removeEventListener("touchstart",e)),this.cancel(),this.eElement=null,this.eventSvc=null}},wH=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.batchFrameworkComps=!1,this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t(),this.baseDocLink=`${Z9}/${this.frameworkName}-data-grid`,Eme(this.baseDocLink)}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return this.baseDocLink+(e?"/"+e:"")}};function Sxe(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionSvc").api}}var Exe=["licenseManager","environment","eventSvc","gos","paginationAutoPageSizeSvc","apiFunctionSvc","gridApi","registry","agCompUtils","userCompFactory","rowContainerHeight","horizontalResizeSvc","localeSvc","pinnedRowModel","dragSvc","colGroupSvc","visibleCols","popupSvc","selectionSvc","colFilter","quickFilter","filterManager","colModel","headerNavigation","pageBounds","pagination","pageBoundsListener","rowSpanSvc","stickyRowSvc","rowRenderer","expressionSvc","alignedGridsSvc","navigation","valueCache","valueSvc","autoWidthCalc","filterMenuFactory","dragAndDrop","focusSvc","cellNavigation","cellStyles","scrollVisibleSvc","sortSvc","colHover","colAnimation","autoColSvc","selectionColSvc","changeDetectionSvc","animationFrameSvc","undoRedo","colDefFactory","rowStyleSvc","rowNodeBlockLoader","rowNodeSorter","ctrlsSvc","pinnedCols","dataTypeSvc","syncSvc","overlays","stateSvc","expansionSvc","apiEventSvc","ariaAnnounce","menuSvc","colMoves","colAutosize","colFlex","colResize","pivotColsSvc","valueColsSvc","rowGroupColsSvc","colNames","colViewport","pivotResultCols","showRowGroupCols","validation"],K4=Object.fromEntries(Exe.map((e,t)=>[e,t]));function Rxe(e,t){const n=(e.beanName?K4[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER,i=(t.beanName?K4[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return n-i}function Axe(e,t){return(e==null?void 0:e.beanName)==="gridDestroySvc"?-1:(t==null?void 0:t.beanName)==="gridDestroySvc"?1:0}var Txe=class extends Yt{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}setComp(e,t,n){this.view=e,this.eGridHostDiv=t,this.eGui=n,this.eGui.setAttribute("grid-id",this.beans.context.getId());const{dragAndDrop:i,ctrlsSvc:r}=this.beans;i==null||i.registerGridDropTarget(()=>this.eGui,this),this.createManagedBean(new $F(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr");const o=Em(this.beans,this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>o()),r.register("gridCtrl",this)}isDetailGrid(){var t;const e=L7(this.getGui());return((t=e==null?void 0:e.getAttribute("row-id"))==null?void 0:t.startsWith("detail"))||!1}getOptionalSelectors(){var t,n,i,r,o;const e=this.beans;return{paginationSelector:(t=e.pagination)==null?void 0:t.getPaginationSelector(),gridHeaderDropZonesSelector:(n=e.registry)==null?void 0:n.getSelector("AG-GRID-HEADER-DROP-ZONES"),sideBarSelector:(i=e.sideBar)==null?void 0:i.getSelector(),statusBarSelector:(r=e.registry)==null?void 0:r.getSelector("AG-STATUS-BAR"),watermarkSelector:(o=e.licenseManager)==null?void 0:o.getWatermarkSelector()}}onGridSizeChanged(){this.eventSvc.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){const{view:t}=this;if(e===!1)t.setCursor(null);else{const n=e===1?"ew-resize":"ns-resize";t.setCursor(n)}}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),{indexWithFocus:n,nextIndex:i}=this.getNextFocusableIndex(t,e);if(i<0||i>=t.length)return!1;if(i===0){if(n>0){const{visibleCols:r,focusSvc:o}=this.beans,s=r.allCols,a=Wo(s);if(o.focusGridView({column:a,backwards:!0}))return!0}return!1}return this.focusContainer(t[i],e)}focusInnerElement(e){const t=this.gos.getCallback("focusGridInnerElement");if(t!=null&&t({fromBottom:!!e}))return!0;const n=this.getFocusableContainers(),{focusSvc:i,visibleCols:r}=this.beans,o=r.allCols;if(e){if(n.length>1)return this.focusContainer(Wo(n),e);const s=Wo(o);if(i.focusGridView({column:s,backwards:e}))return!0}if(this.gos.get("headerHeight")===0||r0(this.beans)){if(i.focusGridView({column:o[0],backwards:e}))return!0;for(let s=1;s<n.length;s++)if(m0(n[s].getGui(),e))return!0;return!1}return i.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){const t=this.view.getFocusableContainers(),{nextIndex:n}=this.getNextFocusableIndex(t,e),i=t[n];i?this.focusContainer(i):this.forceFocusOutOfContainer(e)}isFocusable(){var t,n;const e=this.beans;return!X2(e)||!r0(e)||!!((n=(t=e.sideBar)==null?void 0:t.comp)!=null&&n.isDisplayed())}getNextFocusableIndex(e,t){const n=Os(this.beans),i=e.findIndex(o=>o.getGui().contains(n)),r=i+(t?-1:1);return{indexWithFocus:i,nextIndex:r}}focusContainer(e,t){var i,r;(i=e.setAllowFocus)==null||i.call(e,!0);const n=m0(e.getGui(),t,!1,!0);return(r=e.setAllowFocus)==null||r.call(e,!1),n}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},Bi=(e,t)=>{for(const n of Object.keys(t))t[n]=e;return t},Z4={dispatchEvent:"CommunityCore",...Bi("CommunityCore",{destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,isModuleRegistered:0}),...Bi("GridState",{getState:0,setState:0}),...Bi("SharedRowSelection",{setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0}),...Bi("RowApi",{redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRowIndex:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0}),...Bi("ScrollApi",{getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0}),...Bi("KeyboardNavigation",{getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0}),...Bi("EventApi",{addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0}),...Bi("ValueCache",{expireValueCache:0}),...Bi("CellApi",{getCellValue:0}),...Bi("SharedMenu",{showColumnMenu:0,hidePopupMenu:0}),...Bi("Sort",{onSortChanged:0}),...Bi("PinnedRow",{getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,forEachPinnedRow:0}),...Bi("Overlay",{showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0}),...Bi("RenderApi",{setGridAriaProperty:0,refreshCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0}),...Bi("HighlightChanges",{flashCells:0}),...Bi("RowDrag",{addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getRowDropPositionIndicator:0,setRowDropPositionIndicator:0}),...Bi("ColumnApi",{getColumnDefs:0,getColumnDef:0,getDisplayNameForColumn:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnsVisible:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0}),...Bi("ColumnAutoSize",{sizeColumnsToFit:0,autoSizeColumns:0,autoSizeAllColumns:0}),...Bi("ColumnGroup",{setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumnGroup:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0}),...Bi("ColumnMove",{moveColumnByIndex:0,moveColumns:0}),...Bi("ColumnResize",{setColumnWidths:0}),...Bi("ColumnHover",{isColumnHovered:0}),...Bi("EditCore",{getCellEditorInstances:0,getEditingCells:0,getEditRowValues:0,stopEditing:0,startEditingCell:0,isEditing:0,validateEdit:0}),...Bi("BatchEdit",{startBatchEdit:0,cancelBatchEdit:0,commitBatchEdit:0,isBatchEditing:0}),...Bi("UndoRedoEdit",{undoCellEditing:0,redoCellEditing:0,getCurrentUndoSize:0,getCurrentRedoSize:0}),...Bi("FilterCore",{isAnyFilterPresent:0,onFilterChanged:0}),...Bi("ColumnFilter",{isColumnFilterPresent:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,hideColumnFilter:0,getColumnFilterHandler:0,doFilterAction:0}),...Bi("QuickFilter",{isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0}),...Bi("Find",{findGetActiveMatch:0,findGetTotalMatches:0,findGoTo:0,findNext:0,findPrevious:0,findGetNumMatches:0,findGetParts:0,findClearActive:0,findRefresh:0}),...Bi("Pagination",{paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0}),...Bi("CsrmSsrmSharedApi",{expandAll:0,collapseAll:0}),...Bi("SsrmInfiniteSharedApi",{setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...Bi("ClientSideRowModelApi",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0,onRowHeightChanged:0,resetRowHeights:0}),...Bi("CsvExport",{getDataAsCsv:0,exportDataAsCsv:0}),...Bi("InfiniteRowModel",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...Bi("AdvancedFilter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...Bi("IntegratedCharts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...Bi("Clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...Bi("ExcelExport",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...Bi("SharedMasterDetail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...Bi("ContextMenu",{showContextMenu:0}),...Bi("ColumnMenu",{showColumnChooser:0,hideColumnChooser:0}),...Bi("CellSelection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...Bi("SharedRowGrouping",{setRowGroupColumns:0,removeRowGroupColumns:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0}),...Bi("SharedAggregation",{addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0}),...Bi("SharedPivot",{isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumns:0,addValueColumns:0,setPivotColumns:0,removePivotColumns:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...Bi("ServerSideRowModelApi",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0,onRowHeightChanged:0,resetRowHeights:0}),...Bi("SideBar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...Bi("StatusBar",{getStatusPanel:0}),...Bi("AiToolkit",{getStructuredSchema:0})},$A={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},kxe=(e,t)=>e.eventSvc.dispatchEvent(t),CH=class{};Reflect.defineProperty(CH,"name",{value:"GridApi"});var Pxe=class extends Yt{constructor(){super(),this.beanName="apiFunctionSvc",this.api=new CH,this.fns={...$A,dispatchEvent:kxe},this.preDestroyLink="";const{api:e}=this;for(const t of Object.keys(Z4))e[t]=this.makeApi(t)[t]}postConstruct(){this.preDestroyLink=this.beans.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){var r;const{fns:n,beans:i}=this;n!==$A&&(n[e]=((r=i==null?void 0:i.validation)==null?void 0:r.validateApiFunction(e,t))??t)}makeApi(e){return{[e]:(...t)=>{const{beans:n,fns:{[e]:i}}=this;return i?i(n,...t):this.apiNotFound(e)}}}apiNotFound(e){const{beans:t,gos:n,preDestroyLink:i}=this;if(!t)an(26,{fnName:e,preDestroyLink:i});else{const r=Z4[e];n.assertModuleRegistered(r,`api.${e}`)&&an(27,{fnName:e,module:r})}}destroy(){super.destroy(),this.fns=$A,this.beans=null}};function Dxe(e){return e.context.getId()}function Fxe(e){e.gridDestroySvc.destroy()}function Mxe(e){return e.gridDestroySvc.destroyCalled}function Ixe(e,t){return e.gos.get(t)}function Lxe(e,t,n){_H(e,{[t]:n})}function _H(e,t){e.gos.updateGridOptions({options:t})}function Oxe(e,t){const n=t.replace(/Module$/,"");return e.gos.isModuleRegistered(n)}var zxe={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{draggable:"true"}},Nxe=class extends ra{constructor(e,t,n){super(zxe),this.rowNode=e,this.column=t,this.eCell=n}postConstruct(){this.getGui().appendChild(Gc("rowDrag",this.beans,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const{rowNode:t,column:n,eCell:i,gos:r}=this,o=n.getColDef().dndSourceOnRowDrag,s=e.dataTransfer;if(s.setDragImage(i,0,0),o){const a=ki(r,{rowNode:t,dragEvent:e});o(a)}else try{const a=JSON.stringify(t.data);s.setData("application/json",a),s.setData("text/plain",a)}catch{}}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}};function Bxe(e,t){var n,i;(i=(n=e.rowDragSvc)==null?void 0:n.rowDragFeature)==null||i.addRowDropZone(t)}function Gxe(e,t){var i,r;const n=(i=e.dragAndDrop)==null?void 0:i.findExternalZone(t.getContainer());n&&((r=e.dragAndDrop)==null||r.removeDropTarget(n))}function jxe(e,t){var n,i;return(i=(n=e.rowDragSvc)==null?void 0:n.rowDragFeature)==null?void 0:i.getRowDropZone(t)}function Hxe(e){const t=e.rowDropHighlightSvc;return t?{row:t.row,dropIndicatorPosition:t.position}:{row:null,dropIndicatorPosition:"none"}}function Vxe(e,t){const n=e.rowDropHighlightSvc;if(!n)return;const i=t==null?void 0:t.row;let r=t==null?void 0:t.dropIndicatorPosition;r!=="above"&&r!=="below"&&r!=="inside"&&(r="none");const o=i==null?void 0:i.rowIndex;o==null||r==="none"?n.clear():n.set(i,r)}var $xe=class extends C0e{shouldPreventMouseEvent(e){return this.gos.get("enableCellTextSelection")&&super.shouldPreventMouseEvent(e)}},Wxe=class extends Yt{constructor(){super(...arguments),this.beanName="horizontalResizeSvc"}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0},{dragSvc:n}=this.beans;return n.addDragSource(t),()=>n.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const n=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(n)}setResizeIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(1),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},Uxe={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{"aria-hidden":"true"}},VC={skipAriaHidden:!0},qxe=class extends ra{constructor(e,t,n,i,r,o=!1){super(),this.cellValueFn=e,this.rowNode=t,this.column=n,this.customGui=i,this.dragStartPixels=r,this.alwaysVisible=o,this.dragSource=null,this.disabled=!1}isCustomGui(){return this.customGui!=null}postConstruct(){const{beans:e,customGui:t}=this;t?this.setDragElement(t,this.dragStartPixels):(this.setTemplate(Uxe),this.getGui().appendChild(Gc("rowDrag",e,null)),this.addDragSource()),this.alwaysVisible||this.initCellDrag()}initCellDrag(){const{beans:e,rowNode:t}=this,n=this.refreshVisibility.bind(this);this.addManagedListeners(e.eventSvc,{rowDragVisibilityChanged:n}),this.addManagedListeners(t,{dataChanged:n,cellChanged:n}),this.refreshVisibility()}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}refreshVisibility(){if(this.alwaysVisible)return;const{beans:e,column:t,rowNode:n}=this,{gos:i,dragAndDrop:r,rowDragSvc:o}=e,s=o==null?void 0:o.visibility;let d=!(s==="suppress"||s==="hidden"&&!(r!=null&&r.hasExternalDropZones())),h=d;if(d&&!this.isCustomGui()&&t){const m=t.getColDef().rowDrag;if(m===!1)d=!1;else{const v=typeof m=="function";h=t.isRowDrag(n),d=v||h}}d&&h&&n.footer&&i.get("rowDragManaged")&&(h=!1,d=!0),h&&(h=d),d||this.setDisplayed(d,VC),h||this.setVisible(h,VC),this.setDisabled(!h||s==="disabled"&&!(r!=null&&r.hasExternalDropZones())),d&&this.setDisplayed(d,VC),h&&this.setVisible(h,VC)}setDisabled(e){var t,n;e!==this.disabled&&(this.disabled=e,(n=(t=this.getGui())==null?void 0:t.classList)==null||n.toggle("ag-drag-handle-disabled",e))}getSelectedNodes(){var i;const e=this.rowNode;if(!this.gos.get("rowDragMultiRow"))return[e];const n=((i=this.beans.selectionSvc)==null?void 0:i.getSelectedNodes())??[];return n.indexOf(e)!==-1?n:[e]}getDragItem(){const{column:e,rowNode:t}=this;return{rowNode:t,rowNodes:this.getSelectedNodes(),columns:e?[e]:void 0,defaultTextValue:this.cellValueFn()}}addDragSource(e=4){if(this.dragSource&&this.removeDragSource(),this.gos.get("rowDragManaged")&&this.rowNode.footer)return;const t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:i=>{i==null||i.preventDefault()}})[0]);const n=this.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:i=>this.getDragItemName(i,n),getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDrop.addDragSource(this.dragSource,!0)}getDragItemName(e,t){var s,a,d,h;const n=(e==null?void 0:e.dragItem)||this.getDragItem(),i=(((s=e==null?void 0:e.dropTarget)==null?void 0:s.rows.length)??((a=n.rowNodes)==null?void 0:a.length))||1,r=((h=(d=this.column)==null?void 0:d.getColDef())==null?void 0:h.rowDragText)??this.gos.get("rowDragText");if(r)return r(n,i);if(i!==1)return`${i} ${t("rowDragRows","rows")}`;const o=this.cellValueFn();return o||`1 ${t("rowDragRow","rows")}`}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},f1=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}depthFirstSearchChangedPath(e,t){const{rowNode:n,children:i}=e;if(i)for(let r=0;r<i.length;++r)this.depthFirstSearchChangedPath(i[r],t);t(n)}depthFirstSearchEverything(e,t,n){const i=e.childrenAfterGroup;if(i)for(let r=0,o=i.length;r<o;++r){const s=i[r];s.childrenAfterGroup?this.depthFirstSearchEverything(s,t,n):n&&t(s)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,n=!1){this.active&&!n?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,n=0;for(;!this.mapToItems[t.id];){const i={rowNode:t,children:null};this.mapToItems[t.id]=i,n++,t=t.parent}return n}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let n=e;for(;n;){this.nodeIdsToColumns[n.id]||(this.nodeIdsToColumns[n.id]={});for(const i of t)this.nodeIdsToColumns[n.id][i.getId()]=!0;n=n.parent}}linkPathItems(e,t){let n=e;for(let i=0;i<t;i++){const r=this.mapToItems[n.id],o=this.mapToItems[n.parent.id];o.children||(o.children=[]),o.children.push(r),n=n.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const n=this.createPathItems(e);this.linkPathItems(e,n),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const n=this.nodeIdsToColumns[e.id];return t.filter(r=>n[r.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const n=this.nodeIdsToColumns[e.id];return t.filter(r=>!n[r.getId()])}},Kxe=.25,Zxe=class extends Yt{constructor(e){super(),this.eContainer=e,this.lastDraggingEvent=null,this.autoScroll=null,this.autoScrollChanged=!1,this.autoScrollChanging=!1,this.autoScrollOldV=null}postConstruct(){const e=this.beans;e.ctrlsSvc.whenReady(this,t=>{const n=()=>t.gridBodyCtrl.scrollFeature.getVScrollPosition().top,i=new dve({scrollContainer:t.gridBodyCtrl.eBodyViewport,scrollAxis:"y",getVerticalPosition:n,setVerticalPosition:r=>t.gridBodyCtrl.scrollFeature.setVerticalScrollPosition(r),onScrollCallback:()=>{var s;const r=n();if(this.autoScrollOldV!==r){this.autoScrollOldV=r,this.autoScrollChanging=!0;return}const o=this.autoScrollChanging;this.autoScrollChanged=o,this.autoScrollChanging=!1,o&&((s=e.dragAndDrop)==null||s.nudge(),this.autoScrollChanged=!1)}});this.autoScroll=i,this.clearAutoScroll()})}destroy(){super.destroy(),this.clearAutoScroll(),this.autoScroll=null,this.lastDraggingEvent=null,this.eContainer=null}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(e){var t;return((t=e==null?void 0:e.dropTarget)==null?void 0:t.allowed)===!1||this.beans.rowDragSvc.visibility!=="visible"?"notAllowed":"move"}getRowNodes(e){var n;if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const i=(n=this.beans.selectionSvc)==null?void 0:n.getSelectedNodes();if(i&&i.indexOf(t)>=0)return i.slice().sort(Yxe)}return[t]}onDragEnter(e){this.dragging(e,!0)}onDragging(e){this.dragging(e,!1)}dragging(e,t){var a;const{lastDraggingEvent:n,beans:i}=this;if(t){const d=this.getRowNodes(e);e.dragItem.rowNodes=d,X4(d,!0)}this.lastDraggingEvent=e;const r=e.fromNudge,o=this.makeRowsDrop(n,e,r,!1);(a=i.rowDropHighlightSvc)==null||a.fromDrag(e),t&&this.dispatchGridEvent("rowDragEnter",e),this.dispatchGridEvent("rowDragMove",e);const s=this.autoScroll;o!=null&&o.rowDragManaged&&o.moved&&o.allowed&&o.sameGrid&&!o.suppressMoveWhenRowDragging&&(!r&&!(s!=null&&s.scrolling)||this.autoScrollChanged)&&this.dropRows(o),s==null||s.check(e.event)}isFromThisGrid(e){return e.dragSource.dragSourceDomDataKey===this.gos.getDomDataKey()}makeRowsDrop(e,t,n,i){const{beans:r,gos:o}=this,s=this.newRowsDrop(t,i),a=r.rowModel;if(t.dropTarget=s,t.changed=!1,!s)return null;let{sameGrid:d,rootNode:h,source:m,target:v}=s;v??(v=a.getRow(a.getRowCount()-1)??null);const w=this.beans.groupEditSvc,R=!!(w!=null&&w.canSetParent(s));let L=null;if(v!=null&&v.footer){const z=Ok(a,-1,v)??Ok(a,1,v);R&&(L=v.sibling??h),v=z??null}v!=null&&v.detail&&(v=v.parent),s.moved&&(s.moved=m!==v);let O=.5;if(v&&(d&&s.moved&&(L||!R)?O=m.rowIndex>v.rowIndex?-.5:.5:O=(s.y-v.rowTop-v.rowHeight/2)/v.rowHeight||0),!R&&d&&v&&s.moved&&Ks(o)){const z=Xxe(a,s);z&&(O=m.rowIndex>z.rowIndex?-.5:.5,v=z,s.moved&&(s.moved=m!==v))}return s.target=v,s.newParent=L,s.pointerPos=Jxe(v,s.y),s.yDelta=O,w==null||w.fixRowsDrop(s,R,n,O),this.validateRowsDrop(s,R,i),t.changed||(t.changed=Y4(e==null?void 0:e.dropTarget,s)),s}newRowsDrop(e,t){const{beans:n,gos:i}=this,r=n.rowModel.rootNode,o=Ks(i)?i.get("rowDragManaged"):!1,s=i.get("suppressMoveWhenRowDragging"),a=this.isFromThisGrid(e);let{rowNode:d,rowNodes:h}=e.dragItem;if(h||(h=d?[d]:[]),d||(d=h[0]),!d||!r)return null;const m=this.beans.dragAndDrop.isDropZoneWithinThisGrid(e);let v=!0;o&&(!h.length||n.rowDragSvc.visibility!=="visible"||(s||!a)&&!m)&&(v=!1);const w=z4(n,e).y,R=this.getOverNode(w);return{api:n.gridApi,context:n.gridOptions.context,draggingEvent:e,rowDragManaged:o,suppressMoveWhenRowDragging:s,sameGrid:a,withinGrid:m,treeData:!1,rootNode:r,moved:d!==R,y:w,overNode:R,overIndex:(R==null?void 0:R.rowIndex)??-1,pointerPos:"none",position:"none",source:d,target:R??null,newParent:null,rows:h,allowed:v,highlight:!t&&o&&s&&(m||!a),yDelta:0,inside:!1,droppedManaged:!1}}validateRowsDrop(e,t,n){var R;const{source:i,target:r,yDelta:o,inside:s,moved:a,rowDragManaged:d,suppressMoveWhenRowDragging:h}=e;e.moved&&(e.moved=i!==r);const{position:m,fallbackPosition:v}=this.computeDropPosition(a,s,o);e.position=m,t||(e.newParent=null),this.enforceSuppressMoveWhenRowDragging(e,h,"initial");const w=(!d||e.allowed)&&this.gos.get("isRowValidDropPosition");w&&this.applyDropValidator(e,t,n,d,w),d&&(e.rows=this.filterRows(e)),(R=this.beans.groupEditSvc)==null||R.clearNewSameParent(e,t),this.enforceSuppressMoveWhenRowDragging(e,h,"final"),e.position==="inside"&&(!e.allowed||!e.newParent)&&(e.position=v)}computeDropPosition(e,t,n){const i=n<0?"above":"below";return e?{position:t?"inside":i,fallbackPosition:i}:{position:"none",fallbackPosition:i}}enforceSuppressMoveWhenRowDragging(e,t,n){if(t){if(n==="initial"){e.moved||(e.allowed=!1);return}(!e.rows.length||e.position==="none")&&(e.allowed=!1)}}applyDropValidator(e,t,n,i,r){var a;(a=this.beans.groupEditSvc)==null||a.clearNewSameParent(e,t);const o=r(e);if(!o){e.allowed=!1;return}if(typeof o!="object")return;o.rows!==void 0&&(e.rows=o.rows??[]),t&&o.newParent!==void 0&&(e.newParent=o.newParent),o.target!==void 0&&(e.target=o.target),o.position&&(e.position=o.position),o.allowed!==void 0?e.allowed=o.allowed:i||(e.allowed=!0);const s=e.draggingEvent;o.changed&&s&&(s.changed=!0),!n&&o.highlight!==void 0&&(e.highlight=o.highlight)}addRowDropZone(e){if(!e.getContainer()){an(55);return}const t=this.beans.dragAndDrop;if(t.findExternalZone(e.getContainer())){an(56);return}const n=e.fromGrid?e:{getContainer:e.getContainer,onDragEnter:e.onDragEnter&&(r=>e.onDragEnter(this.rowDragEvent("rowDragEnter",r))),onDragLeave:e.onDragLeave&&(r=>e.onDragLeave(this.rowDragEvent("rowDragLeave",r))),onDragging:e.onDragging&&(r=>e.onDragging(this.rowDragEvent("rowDragMove",r))),onDragStop:e.onDragStop&&(r=>e.onDragStop(this.rowDragEvent("rowDragEnd",r))),onDragCancel:e.onDragCancel&&(r=>e.onDragCancel(this.rowDragEvent("rowDragCancel",r)))},i={isInterestedIn:r=>r===2,getIconName:()=>"move",external:!0,...n};t.addDropTarget(i),this.addDestroyFunc(()=>t.removeDropTarget(i))}getRowDropZone(e){return{getContainer:this.getContainer.bind(this),onDragEnter:n=>{var i;this.onDragEnter(n),(i=e==null?void 0:e.onDragEnter)==null||i.call(e,this.rowDragEvent("rowDragEnter",n))},onDragLeave:n=>{var i;this.onDragLeave(n),(i=e==null?void 0:e.onDragLeave)==null||i.call(e,this.rowDragEvent("rowDragLeave",n))},onDragging:n=>{var i;this.onDragging(n),(i=e==null?void 0:e.onDragging)==null||i.call(e,this.rowDragEvent("rowDragMove",n))},onDragStop:n=>{var i;this.onDragStop(n),(i=e==null?void 0:e.onDragStop)==null||i.call(e,this.rowDragEvent("rowDragEnd",n))},onDragCancel:n=>{var i;this.onDragCancel(n),(i=e==null?void 0:e.onDragCancel)==null||i.call(e,this.rowDragEvent("rowDragCancel",n))},fromGrid:!0}}getOverNode(e){const{pageBounds:t,rowModel:n}=this.beans,r=e>t.getCurrentPagePixelRange().pageLastPixel?-1:n.getRowIndexAtPixel(e);return r>=0?n.getRow(r):void 0}rowDragEvent(e,t){const n=this.beans,{dragItem:i,dropTarget:r,event:o,vDirection:s}=t,a=(r==null?void 0:r.rootNode)===n.rowModel.rootNode,d=a?r.y:z4(n,t).y,h=a?r.overNode:this.getOverNode(d),m=a?r.overIndex:(h==null?void 0:h.rowIndex)??-1;return{api:n.gridApi,context:n.gridOptions.context,type:e,event:o,node:i.rowNode,nodes:i.rowNodes,overIndex:m,overNode:h,y:d,vDirection:s,rowsDrop:r}}dispatchGridEvent(e,t){const n=this.rowDragEvent(e,t);this.eventSvc.dispatchEvent(n)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e,!1)}onDragStop(e){var i;const t=((i=this.lastDraggingEvent)==null?void 0:i.dropTarget)??null,n=this.makeRowsDrop(this.lastDraggingEvent,e,!1,!0);this.dispatchGridEvent("rowDragEnd",e),n!=null&&n.allowed&&n.rowDragManaged&&(!(t!=null&&t.droppedManaged)||Y4(t,n))&&this.dropRows(n),this.stopDragging(e,!0)}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e,!0)}stopDragging(e,t){var n,i;this.clearAutoScroll(),(n=this.beans.groupEditSvc)==null||n.stopDragging(t),(i=this.beans.rowDropHighlightSvc)==null||i.fromDrag(null),X4(e.dragItem.rowNodes,!1),this.lastDraggingEvent=null}clearAutoScroll(){var e;(e=this.autoScroll)==null||e.ensureCleared(),this.autoScrollChanged=!1,this.autoScrollChanging=!1,this.autoScrollOldV=null}dropRows(e){return e.droppedManaged=!0,e.sameGrid?this.csrmMoveRows(e):this.csrmAddRows(e)}csrmAddRows({position:e,target:t,rows:n}){const i=ix(this.gos),r=this.beans.rowModel,o=n.filter(({data:a,rowPinned:d})=>!r.getRowNode((i==null?void 0:i({data:a,level:0,rowPinned:d}))??a.id)).map(({data:a})=>a);if(o.length===0)return!1;let s;if(t){const a=t.sourceRowIndex>=0?t:NS(t);a&&(s=a.sourceRowIndex+(e==="above"?0:1))}return r.updateRowData({add:o,addIndex:s}),!0}filterRows(e){const{groupEditSvc:t}=this.beans,{rows:n,sameGrid:i}=e;let r;for(let o=0,s=n.length;o<s;++o){let a=!0;const d=n[o];(!d||d.footer||i&&d.destroyed&&!d.group||!this.csrmGetLeaf(d))&&(a=!1),a&&t&&!t.canDropRow(d,e)&&(a=!1),a?r==null||r.push(d):r??(r=n.slice(0,o))}return r??n}csrmMoveRows(e){const t=this.beans.groupEditSvc;return t!=null&&t.isGroupingDrop(e)?t.dropGroupEdit(e):this.csrmMoveRowsReorder(e)}csrmMoveRowsReorder({position:e,target:t,rows:n,newParent:i,rootNode:r}){let o=!1;const s=new Set;for(const w of n){i&&w.parent!==i&&(w.treeParent=i,o=!0);const R=this.csrmGetLeaf(w);R&&s.add(R)}if(!o&&s.size===0)return!1;const a=this.beans.focusSvc,d=a.getFocusedCell(),h=d&&Eb(this.beans,d);if(s.size&&fxe(r._leafs,s,t,e==="above")&&(o=!0),!o)return!1;const m=this.beans.rowModel,v=new y_;return v.reordered=!0,m.refreshModel({step:"group",keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedPath:new f1(!1,r),changedRowNodes:v}),h?h.focusCell():a.clearFocusedCell(),!0}csrmGetLeaf(e){if(e.sourceRowIndex>=0)return e.destroyed?void 0:e;const t=this.beans.groupEditSvc;return t?t.csrmFirstLeaf(e):NS(e)}},Y4=(e,t)=>e!==t&&(!e||e.sameGrid!==t.sameGrid||e.allowed!==t.allowed||e.position!==t.position||e.target!==t.target||e.source!==t.source||e.newParent!==t.newParent||!Vy(e.rows,t.rows)),Yxe=({rowIndex:e},{rowIndex:t})=>e!==null&&t!==null?e-t:0,X4=(e,t)=>{for(let n=0,i=(e==null?void 0:e.length)||0;n<i;++n){const r=e[n];r.dragging!==t&&(r.dragging=t,r.dispatchRowEvent("draggingChanged"))}},Xxe=(e,t)=>{let n=null,i=t.target;if(i&&t.rows.indexOf(i)<0)return null;const r=t.source;if(!i||!r)return null;let o=i.rowIndex-r.rowIndex;const s=o<0?-1:1;o=t.suppressMoveWhenRowDragging?Math.abs(o):1;const a=new Set(t.rows);do{const d=Ok(e,s,i);if(!d)break;a.has(d)||(n=d,--o),i=d}while(o>0);return n},Jxe=(e,t)=>{const n=e==null?void 0:e.rowTop,i=(e==null?void 0:e.rowHeight)??0;if(n==null||!i||i<=0)return"none";const r=t-n,o=i*Kxe;return r<=o?"above":r>=i-o?"below":"inside"},Qxe=class extends Yt{constructor(){super(...arguments),this.beanName="rowDragSvc",this.rowDragFeature=null,this.visibility="suppress"}setupRowDrag(e,t){const n=t.createManagedBean(new Zxe(e)),i=this.beans.dragAndDrop;i.addDropTarget(n),t.addDestroyFunc(()=>i.removeDropTarget(n)),this.rowDragFeature=n;const r=()=>this.refreshVisibility();this.addManagedPropertyListeners(["rowDragManaged","suppressRowDrag","refreshAfterGroupEdit"],r),this.addManagedEventListeners({newColumnsLoaded:r,columnRowGroupChanged:r,columnPivotModeChanged:r,sortChanged:r,filterChanged:r}),this.visibility=this.computeVisibility()}createRowDragComp(e,t,n,i,r,o){return new qxe(e,t,n,i,r,o)}createRowDragCompForRow(e,t){if(Oy(this.gos))return;const n=this.getLocaleTextFunc();return this.createRowDragComp(()=>`1 ${n("rowDragRow","row")}`,e,void 0,t,void 0,!0)}createRowDragCompForCell(e,t,n,i,r,o){const s=this.gos;return s.get("rowDragManaged")&&(!Ks(s)||s.get("pagination"))?void 0:this.createRowDragComp(n,e,t,i,r,o)}cancelRowDrag(){var e,t;(e=this.rowDragFeature)!=null&&e.lastDraggingEvent&&((t=this.beans.dragSvc)==null||t.cancelDrag())}computeVisibility(){var r,o,s,a;const e=this.beans,t=e.gos;if(t.get("suppressRowDrag"))return"suppress";if(!t.get("rowDragManaged"))return"visible";const i=e.colModel.isPivotMode();return(i||(o=(r=e.rowGroupColsSvc)==null?void 0:r.columns)!=null&&o.length)&&!t.get("refreshAfterGroupEdit")?"hidden":i||(s=e.filterManager)!=null&&s.isAnyFilterPresent()||(a=e.sortSvc)!=null&&a.isSortActive()?"disabled":"visible"}refreshVisibility(){var n;const e=this.visibility,t=this.computeVisibility();e!==t&&(this.visibility=t,(n=this.eventSvc)==null||n.dispatchEvent({type:"rowDragVisibilityChanged"}))}},ewe=class extends Yt{constructor(){super(...arguments),this.beanName="rowDropHighlightSvc",this.uiLevel=0,this.dragging=!1,this.row=null,this.position="none"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this)})}onModelUpdated(){const e=this.row,t=this.dragging;!e||(e==null?void 0:e.rowIndex)===null||this.position==="none"?this.clear():this.set(e,this.position),this.dragging=t}destroy(){this.clear(),super.destroy()}clear(){const e=this.row;this.dragging=!1,e&&(this.uiLevel=0,this.position="none",this.row=null,e.dispatchRowEvent("rowHighlightChanged"))}set(e,t){const n=e!==this.row,i=e.uiLevel,r=t!==this.position,o=i!==this.uiLevel;this.dragging=!1,(n||r||o)&&(n&&this.clear(),this.uiLevel=i,this.position=t,this.row=e,e.dispatchRowEvent("rowHighlightChanged"))}fromDrag(e){const t=e==null?void 0:e.dropTarget;if(t){const{highlight:n,target:i,position:r}=t;if(n&&i&&r!=="none"){this.set(i,r),this.dragging=!0;return}}this.dragging&&this.clear()}},SH={moduleName:"Drag",version:Fn,beans:[$xe]},twe={moduleName:"DragAndDrop",version:Fn,dynamicBeans:{dndSourceComp:Nxe},icons:{rowDrag:"grip"}},EH={moduleName:"SharedDragAndDrop",version:Fn,beans:[R0e],dependsOn:[SH],userComponents:{agDragAndDropImage:txe},icons:{columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",rowDrag:"grip"}},nwe={moduleName:"RowDrag",version:Fn,beans:[ewe,Qxe],apiFunctions:{addRowDropZone:Bxe,removeRowDropZone:Gxe,getRowDropZoneParams:jxe,getRowDropPositionIndicator:Hxe,setRowDropPositionIndicator:Vxe},dependsOn:[EH]},iwe={moduleName:"HorizontalResize",version:Fn,beans:[Wxe],dependsOn:[SH]},rwe=":where(.ag-ltr) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:left .2s}.ag-header-group-cell{transition:left .2s,width .2s}}:where(.ag-rtl) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:right .2s}.ag-header-group-cell{transition:right .2s,width .2s}}",owe=class extends Yt{constructor(){super(...arguments),this.beanName="colAnimation",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){if(this.active)return;const{gos:e}=this;e.get("suppressColumnMoveAnimation")||e.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount,{gridBodyCtrl:t}=this;t.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&t.setColumnMovingCss(!1)})}flush(e,t){const{executeNextFuncs:n,executeLaterFuncs:i}=this;if(n.length===0&&i.length===0){e(),t();return}const r=o=>{for(;o.length;){const s=o.pop();s&&s()}};this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e(),r(n)},0),window.setTimeout(()=>{t(),r(i)},200)})}};function swe(e,t,n){var i;(i=e.colMoves)==null||i.moveColumnByIndex(t,n,"api")}function awe(e,t,n){var i;(i=e.colMoves)==null||i.moveColumns(t,n,"api")}var lwe=class extends Yt{constructor(e){super(),this.pinned=e,this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[]}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;if(t)for(const n of t)n.isPrimary()&&(n.isAnyFunctionActive()||(n.isAllowValue()?this.columnsToAggregate.push(n):n.isAllowRowGroup()?this.columnsToGroup.push(n):n.isAllowPivot()&&this.columnsToPivot.push(n)))}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){const{valueColsSvc:t,rowGroupColsSvc:n,pivotColsSvc:i}=this.beans;this.columnsToAggregate.length>0&&(t==null||t.addColumns(this.columnsToAggregate,"toolPanelDragAndDrop")),this.columnsToGroup.length>0&&(n==null||n.addColumns(this.columnsToGroup,"toolPanelDragAndDrop")),this.columnsToPivot.length>0&&(i==null||i.addColumns(this.columnsToPivot,"toolPanelDragAndDrop"))}onDragCancel(){this.clearColumnsList()}};function uwe(e,t){!t||t.length<=1||t.filter(i=>e.indexOf(i)<0).length>0||t.sort((i,r)=>{const o=e.indexOf(i),s=e.indexOf(r);return o-s})}function cwe(e){var n;const t=[...e];for(const i of e){let r=null,o=i.getParent();for(;o!=null&&o.getDisplayedLeafColumns().length===1;)r=o,o=o.getParent();if(r!=null){const a=!!((n=r.getColGroupDef())!=null&&n.marryChildren)?r.getProvidedColumnGroup().getLeafColumns():r.getLeafColumns();for(const d of a)t.includes(d)||t.push(d)}}return t}function dwe(e,t,n,i){const r=i.allCols;let o=null,s=null;for(let a=0;a<e.length;a++){const d=e[a],h=n.getProposedColumnOrder(t,d);if(!n.doesOrderPassRules(h))continue;const m=h.filter(w=>r.includes(w));if(s===null)s=m;else if(!Vy(m,s))break;const v=fwe(h);(o===null||v<o.fragCount)&&(o={move:d,fragCount:v})}return o}function RH(e){const{isFromHeader:t,fromLeft:n,xPosition:i,fromEnter:r,fakeEvent:o,pinned:s,gos:a,colModel:d,colMoves:h,visibleCols:m}=e;let{allMovingColumns:v}=e;t&&(v=cwe(v));const w=v.slice();uwe(d.getCols(),w);const R=gwe({movingCols:w,draggingRight:n,xPosition:i,pinned:s,gos:a,colModel:d,visibleCols:m}),L=hwe(w,d);if(R.length===0)return;const O=R[0];if(L!==null&&(t||!r)&&!o&&(!n&&O>=L||n&&O<=L))return;const $=dwe(R,w,h,m);if(!$)return;const U=$.move;if(!(U>d.getCols().length-w.length))return{columns:w,toIndex:U}}function AH(e){const{columns:t,toIndex:n}=RH(e)||{},{finished:i,colMoves:r}=e;return!t||n==null?null:(r.moveColumns(t,n,"uiColumnMoved",i),i?null:{columns:t,toIndex:n})}function hwe(e,t){const n=t.getCols(),i=e.map(d=>n.indexOf(d)).sort((d,h)=>d-h),r=i[0];return Wo(i)-r!==i.length-1?null:r}function fwe(e){function t(i){const r=[];let o=i.getOriginalParent();for(;o!=null;)r.push(o),o=o.getOriginalParent();return r}let n=0;for(let i=0;i<e.length-1;i++){let r=t(e[i]),o=t(e[i+1]);[r,o]=r.length>o.length?[r,o]:[o,r];for(const s of r)o.indexOf(s)===-1&&n++}return n}function pwe(e,t){switch(t){case"left":return e.leftCols;case"right":return e.rightCols;default:return e.centerCols}}function gwe(e){const{movingCols:t,draggingRight:n,xPosition:i,pinned:r,gos:o,colModel:s,visibleCols:a}=e;if(o.get("suppressMovableColumns")||t.some(Y=>Y.getColDef().suppressMovable))return[];const h=pwe(a,r),m=s.getCols(),v=h.filter(Y=>t.includes(Y)),w=h.filter(Y=>!t.includes(Y)),R=m.filter(Y=>!t.includes(Y));let L=0,O=i;if(n){let Y=0;for(const X of v)Y+=X.getActualWidth();O-=Y}if(O>0){for(let Y=0;Y<w.length;Y++){const X=w[Y];if(O-=X.getActualWidth(),O<0)break;L++}n&&L++}let z;if(L>0){const Y=w[L-1];z=R.indexOf(Y)+1}else z=R.indexOf(w[0]),z===-1&&(z=0);const $=[z],U=(Y,X)=>Y-X;if(n){let Y=z+1;const X=m.length-1;for(;Y<=X;)$.push(Y),Y++;$.sort(U)}else{let Y=z;const X=m.length-1;let q=m[Y];for(;Y<=X&&h.indexOf(q)<0;)Y++,$.push(Y),q=m[Y];Y=z-1;const ie=0;for(;Y>=ie;)$.push(Y),Y--;$.sort(U).reverse()}return $}function Hk(e){var h;const{pinned:t,fromKeyboard:n,gos:i,ctrlsSvc:r,useHeaderRow:o,skipScrollPadding:s}=e;let a=(h=r.getHeaderRowContainerCtrl(t))==null?void 0:h.eViewport,{x:d}=e;return a?(n&&(d-=a.getBoundingClientRect().left),i.get("enableRtl")&&(o&&(a=a.querySelector(".ag-header-row")),d=a.clientWidth-d),t==null&&!s&&(d+=r.get("center").getCenterViewportScrollLeft()),d):0}function WA(e,t){for(const n of e)n.moving=t,n.dispatchColEvent("movingChanged","uiColumnMoved")}var J4=7,Vk=100,$C=Vk/2,mwe=5,ywe=100,vwe=class extends Yt{constructor(e){super(),this.pinned=e,this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.isCenterContainer=!Dn(e)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){const{pinned:e,lastDraggingEvent:t}=this,{dragItem:n}=t||{},i=(n==null?void 0:n.columns)??[];for(const r of i){const o=r.getPinned();if(r.getColDef().lockPinned){if(o==e)return"move";continue}const s=n==null?void 0:n.containerType;if(s===e||!e)return"move";if(e&&(!o||s!==e))return"pinned"}return"notAllowed"}onDragEnter(e){const t=e.dragItem,n=t.columns;if(e.dragSource.type===0)this.setColumnsVisible(n,!0,"uiColumnDragged");else{const r=t.visibleState,o=(n||[]).filter(s=>r[s.getId()]&&!s.isVisible());this.setColumnsVisible(o,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(n,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,n=!1,i=!1){const{gos:r,ctrlsSvc:o}=this.beans,s=r.get("suppressMoveWhenColumnDragging");if(i&&!s){this.finishColumnMoving();return}if(this.lastDraggingEvent=e,!e||!i&&vs(e.hDirection))return;const a=Hk({x:e.x,pinned:this.pinned,gos:r,ctrlsSvc:o});t||this.checkCenterForScrolling(a),s?this.handleColumnDragWhileSuppressingMovement(e,t,n,a,i):this.handleColumnDragWhileAllowingMovement(e,t,n,a,i)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.updateDragItemContainerType(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,n){if(!(e!=null&&e.length))return;const i=e.filter(r=>!r.getColDef().lockVisible);i.length&&this.beans.colModel.setColsVisible(i,t,n)}finishColumnMoving(){this.clearHighlighted();const e=this.lastMovedInfo;if(!e)return;const{columns:t,toIndex:n}=e;this.beans.colMoves.moveColumns(t,n,"uiColumnMoved",!0)}updateDragItemContainerType(){const{lastDraggingEvent:e}=this;if(this.gos.get("suppressMoveWhenColumnDragging")||!e)return;const t=e.dragItem;t&&(t.containerType=this.pinned)}handleColumnDragWhileSuppressingMovement(e,t,n,i,r){const o=this.getAllMovingColumns(e,!0);if(r){const s=this.isAttemptingToPin(o);s&&this.attemptToPinColumns(o,void 0,!0);const{fromLeft:a,xPosition:d}=this.getNormalisedXPositionInfo(o,s)||{};if(a==null||d==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns:o,xPosition:d,fromEnter:t,fakeEvent:n,fromLeft:a})}else{if(!this.beans.dragAndDrop.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(o,i)}}handleColumnDragWhileAllowingMovement(e,t,n,i,r){const o=this.getAllMovingColumns(e),s=this.normaliseDirection(e.hDirection)==="right",a=e.dragSource.type===1,d=this.getMoveColumnParams({allMovingColumns:o,isFromHeader:a,xPosition:i,fromLeft:s,fromEnter:t,fakeEvent:n}),h=AH({...d,finished:r});h&&(this.lastMovedInfo=h)}getAllMovingColumns(e,t=!1){const n=e.dragSource.getDragItem();let i=null;t?(i=n.columnsInSplit,i||(i=n.columns)):i=n.columns;const r=o=>o.getColDef().lockPinned?o.getPinned()==this.pinned:!0;return i?i.filter(r):[]}getMoveColumnParams(e){const{allMovingColumns:t,isFromHeader:n,xPosition:i,fromLeft:r,fromEnter:o,fakeEvent:s}=e,{gos:a,colModel:d,colMoves:h,visibleCols:m}=this.beans;return{allMovingColumns:t,isFromHeader:n,fromLeft:r,xPosition:i,pinned:this.pinned,fromEnter:o,fakeEvent:s,gos:a,colModel:d,colMoves:h,visibleCols:m}}highlightHoveredColumn(e,t){var m;const{gos:n,colModel:i}=this.beans,r=n.get("enableRtl"),o=i.getCols().filter(v=>v.isVisible()&&v.getPinned()===this.pinned);let s=null,a=null,d=null;for(const v of o){if(a=v.getActualWidth(),s=this.getNormalisedColumnLeft(v,0,r),s!=null){const w=s+a;if(s<=t&&w>=t){d=v;break}}s=null,a=null}if(d)e.indexOf(d)!==-1&&(d=null);else{for(let v=o.length-1;v>=0;v--){const w=o[v],R=o[v].getParent();if(!R){d=w;break}const L=R==null?void 0:R.getDisplayedLeafColumns();if(L.length){d=Wo(L);break}}if(!d)return;s=this.getNormalisedColumnLeft(d,0,r),a=d.getActualWidth()}if(((m=this.lastHighlightedColumn)==null?void 0:m.column)!==d&&this.clearHighlighted(),d==null||s==null||a==null)return;let h;t-s<a/2?h=0:h=1,Q4(d,h),this.lastHighlightedColumn={column:d,position:h}}getNormalisedXPositionInfo(e,t){const{gos:n,visibleCols:i}=this.beans,r=n.get("enableRtl"),{firstMovingCol:o,column:s,position:a}=this.getColumnMoveAndTargetInfo(e,t,r);if(!o||!s||a==null)return;const d=i.allCols,h=d.indexOf(o),m=d.indexOf(s),v=a===0,w=h<m||h===m&&!v;let R=0;if(v?w&&(R-=1):w||(R+=1),m+R===h)return;const L=d[m+R];if(!L)return;const O=this.getNormalisedColumnLeft(L,20,r);return{fromLeft:w,xPosition:O}}getColumnMoveAndTargetInfo(e,t,n){const i=this.lastHighlightedColumn||{},{firstMovingCol:r,lastMovingCol:o}=bwe(e);if(!r||!o||i.column||!t)return{firstMovingCol:r,...i};const a=this.getPinDirection()==="left";return{firstMovingCol:r,position:a?1:0,column:a!==n?r:o}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case"left":return"right";case"right":return"left"}return e}getNormalisedColumnLeft(e,t,n){const{gos:i,ctrlsSvc:r}=this.beans,o=e.getLeft();if(o==null)return null;const s=e.getActualWidth();return Hk({x:n?o+s-t:o+t,pinned:e.getPinned(),useHeaderRow:n,skipScrollPadding:!0,gos:i,ctrlsSvc:r})}isAttemptingToPin(e){const t=this.needToMoveLeft||this.needToMoveRight,n=this.failedMoveAttempts>J4;return t&&n||e.some(i=>i.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){const{allMovingColumns:t,xPosition:n,fromEnter:i,fakeEvent:r,fromLeft:o}=e,s=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:n,fromLeft:o,fromEnter:i,fakeEvent:r}),{columns:a,toIndex:d}=RH(s)||{};a&&d!=null&&(this.lastMovedInfo={columns:a,toIndex:d}),this.finishColumnMoving()}clearHighlighted(){const{lastHighlightedColumn:e}=this;e&&(Q4(e.column,null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;const t=this.beans.ctrlsSvc.get("center"),n=t.getCenterViewportScrollLeft(),i=n+t.getCenterWidth();let r,o;this.gos.get("enableRtl")?(r=e<n+$C,o=e>i-$C):(o=e<n+$C,r=e>i-$C),this.needToMoveRight=r,this.needToMoveLeft=o,o||r?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),ywe),this.beans.dragAndDrop.setDragImageCompIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.beans.dragAndDrop.setDragImageCompIcon(this.getIconName()))}moveInterval(){var i;let e;this.intervalCount++,e=10+this.intervalCount*mwe,e>Vk&&(e=Vk);let t=null;const n=this.gridBodyCon.scrollFeature;if(this.needToMoveLeft?t=n.scrollHorizontally(-e):this.needToMoveRight&&(t=n.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const{pinnedCols:r,dragAndDrop:o,gos:s}=this.beans;if(this.failedMoveAttempts<=J4+1||!r)return;if(o.setDragImageCompIcon("pinned"),!s.get("suppressMoveWhenColumnDragging")){const a=(i=this.lastDraggingEvent)==null?void 0:i.dragItem.columns;this.attemptToPinColumns(a,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left")return"left";if(this.needToMoveRight||this.pinned==="right")return"right"}attemptToPinColumns(e,t,n=!1){const i=(e||[]).filter(s=>!s.getColDef().lockPinned);if(!i.length)return 0;n&&(t=this.getPinDirection());const{pinnedCols:r,dragAndDrop:o}=this.beans;return r==null||r.setColsPinned(i,t,"uiColumnDragged"),n&&o.nudge(),i.length}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}};function Q4(e,t){e.highlighted!==t&&(e.highlighted=t,e.dispatchColEvent("headerHighlightChanged","uiColumnMoved"))}function bwe(e){const t=e.length;let n,i;for(let r=0;r<t;r++){if(!n){const o=e[r];o.getLeft()!=null&&(n=o)}if(!i){const o=e[t-1-r];o.getLeft()!=null&&(i=o)}if(n&&i)break}return{firstMovingCol:n,lastMovingCol:i}}var xwe=class extends Yt{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){const{ctrlsSvc:e,dragAndDrop:t}=this.beans,n=this.pinned;e.whenReady(this,i=>{let r;const o=i.gridBodyCtrl.eBodyViewport;switch(n){case"left":r=[[o,i.left.eContainer],[i.bottomLeft.eContainer],[i.topLeft.eContainer]];break;case"right":r=[[o,i.right.eContainer],[i.bottomRight.eContainer],[i.topRight.eContainer]];break;default:r=[[o,i.center.eViewport],[i.bottomCenter.eViewport],[i.topCenter.eViewport]];break}this.eSecondaryContainers=r}),this.moveColumnFeature=this.createManagedBean(new vwe(n)),this.bodyDropPivotTarget=this.createManagedBean(new lwe(n)),t.addDropTarget(this),this.addDestroyFunc(()=>t.removeDropTarget(this))}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.beans.colModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},wwe=class extends Yt{constructor(){super(...arguments),this.beanName="colMoves"}moveColumnByIndex(e,t,n){const i=this.beans.colModel.getCols();if(!i)return;const r=i[e];this.moveColumns([r],t,n)}moveColumns(e,t,n,i=!0){const{colModel:r,colAnimation:o,visibleCols:s,eventSvc:a}=this.beans,d=r.getCols();if(!d)return;if(t>d.length-e.length){an(30,{toIndex:t});return}o==null||o.start();const h=r.getColsForKeys(e);this.doesMovePassRules(h,t)&&(m4(r.getCols(),h,t),s.refresh(n),a.dispatchEvent({type:"columnMoved",columns:h,column:h.length===1?h[0]:null,toIndex:t,finished:i,source:n})),o==null||o.finish()}doesMovePassRules(e,t){const n=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(n)}doesOrderPassRules(e){const{colModel:t,gos:n}=this.beans;return!(!x7(e,t.getColTree())||!(r=>{const o=h=>h?h==="left"||h===!0?-1:1:0,s=n.get("enableRtl");let a=s?1:-1,d=!0;for(const h of r){const m=o(h.getColDef().lockPosition);s?m>a&&(d=!1):m<a&&(d=!1),a=m}return d})(e))}getProposedColumnOrder(e,t){const i=this.beans.colModel.getCols().slice();return m4(i,e,t),i}createBodyDropTarget(e,t){return new xwe(e,t)}moveHeader(e,t,n,i,r){const{ctrlsSvc:o,gos:s,colModel:a,visibleCols:d,focusSvc:h}=this.beans,m=t.getBoundingClientRect(),v=m.left,w=Sa(n),R=w?m.width:n.getActualWidth(),L=e==="left"!==s.get("enableRtl"),O=Hk({x:L?v-20:v+R+20,pinned:i,fromKeyboard:!0,gos:s,ctrlsSvc:o}),z=h.focusedHeader;AH({allMovingColumns:w?n.getLeafColumns():[n],isFromHeader:!0,fromLeft:e==="right",xPosition:O,pinned:i,fromEnter:!1,fakeEvent:!1,gos:s,colModel:a,colMoves:this,visibleCols:d,finished:!0});let $;if(w){const U=n.getDisplayedLeafColumns();$=L?U[0]:Wo(U)}else $=n;if(o.getScrollFeature().ensureColumnVisible($,"auto"),(!r.isAlive()||s.get("ensureDomOrder"))&&z){let U;if(w){const Y=n.getGroupId(),X=n.getLeafColumns();if(!X.length)return;const q=X[0].getParent();if(!q)return;U=Cwe(q,Y)}else U=n;U&&h.focusHeaderPosition({headerPosition:{...z,column:U}})}}setDragSourceForHeader(e,t,n){const{gos:i,colModel:r,dragAndDrop:o,visibleCols:s}=this.beans;let a=!i.get("suppressDragLeaveHidesColumns");const d=Sa(t),h=d?t.getProvidedColumnGroup().getLeafColumns():[t],v={type:1,eElement:e,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:d?()=>Swe(t,s.allCols):()=>_we(t),dragItemName:n,onDragStarted:()=>{a=!i.get("suppressDragLeaveHidesColumns"),WA(h,!0)},onDragStopped:()=>WA(h,!1),onDragCancelled:()=>WA(h,!1),onGridEnter:w=>{if(a){const{columns:R=[],visibleState:L}=w??{},O=d?$=>!L||L[$.getColId()]:()=>!0,z=R.filter($=>!$.getColDef().lockVisible&&O($));r.setColsVisible(z,!0,"uiColumnMoved")}},onGridExit:w=>{var R;if(a){const L=((R=w==null?void 0:w.columns)==null?void 0:R.filter(O=>!O.getColDef().lockVisible))||[];r.setColsVisible(L,!1,"uiColumnMoved")}}};return o.addDragSource(v,!0),v}};function Cwe(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}}function _we(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t,containerType:e.pinned}}function Swe(e,t){var a;const n=e.getProvidedColumnGroup().getLeafColumns(),i={};for(const d of n)i[d.getId()]=d.isVisible();const r=[];for(const d of t)n.indexOf(d)>=0&&(r.push(d),Bp(n,d));for(const d of n)r.push(d);const o=[],s=e.getLeafColumns();for(const d of r)s.indexOf(d)!==-1&&o.push(d);return{columns:r,columnsInSplit:o,visibleState:i,containerType:(a=o[0])==null?void 0:a.pinned}}var Ewe={moduleName:"ColumnMove",version:Fn,beans:[wwe,owe],apiFunctions:{moveColumnByIndex:swe,moveColumns:awe},dependsOn:[EH],css:[rwe]},Rwe=class extends Yt{constructor(){super(...arguments),this.beanName="autoWidthCalc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){const n=this.getHeaderCellForColumn(e);if(!n)return-1;const i=this.beans.rowRenderer.getAllCellsNotSpanningForColumn(e);return t||i.push(n),this.getPreferredWidthForElements(i)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.getPreferredWidthForElements([t]):-1}getPreferredWidthForElements(e,t){const n=document.createElement("form");n.style.position="fixed";const i=this.centerRowContainerCtrl.eContainer;for(const o of e)this.cloneItemIntoDummy(o,n);i.appendChild(n);const r=n.offsetWidth;return n.remove(),t=t??this.gos.get("autoSizePadding"),r+t}getHeaderCellForColumn(e){let t=null;for(const n of this.beans.ctrlsSvc.getHeaderRowContainerCtrls()){const i=n.getHtmlElementForColumnHeader(e);i!=null&&(t=i)}return t}cloneItemIntoDummy(e,t){const n=e.cloneNode(!0);n.style.width="",n.style.position="static",n.style.left="";const i=document.createElement("div"),r=i.classList;["ag-header-cell","ag-header-group-cell"].some(a=>n.classList.contains(a))?(r.add("ag-header","ag-header-row"),i.style.position="static"):r.add("ag-row");let s=e.parentElement;for(;s;){if(["ag-header-row","ag-row"].some(d=>s.classList.contains(d))){for(let d=0;d<s.classList.length;d++){const h=s.classList[d];h!="ag-row-position-absolute"&&r.add(h)}break}s=s.parentElement}i.appendChild(n),t.appendChild(i)}},TH={moduleName:"AutoWidth",version:Fn,beans:[Rwe]};function Awe(e,t,n=!0,i="api"){var r;(r=e.colResize)==null||r.setColumnWidths(t,!1,n,i)}var Twe=class extends Yt{constructor(e,t,n,i){super(),this.comp=e,this.eResize=t,this.pinned=n,this.columnGroup=i}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const{horizontalResizeSvc:e,gos:t,colAutosize:n}=this.beans,i=e.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});this.addDestroyFunc(i),!t.get("suppressAutoSize")&&n&&this.addDestroyFunc(n.addColumnGroupResize(this.eResize,this.columnGroup,()=>this.resizeLeafColumnsToFit("uiColumnResized")))}onResizeStart(e){const{columnsToResize:t,resizeStartWidth:n,resizeRatios:i,groupAfterColumns:r,groupAfterStartWidth:o,groupAfterRatios:s}=this.getInitialValues(e);this.resizeCols=t,this.resizeStartWidth=n,this.resizeRatios=i,this.resizeTakeFromCols=r,this.resizeTakeFromStartWidth=o,this.resizeTakeFromRatios=s,this.toggleColumnResizing(!0)}onResizing(e,t,n="uiColumnResized"){const i=this.normaliseDragChange(t),r=this.resizeStartWidth+i;this.resizeColumnsFromLocalValues(r,n,e)}getInitialValues(e){var d;const t=h=>h.reduce((m,v)=>m+v.getActualWidth(),0),n=(h,m)=>h.map(v=>v.getActualWidth()/m),i=this.getColumnsToResize(),r=t(i),o=n(i,r),s={columnsToResize:i,resizeStartWidth:r,resizeRatios:o};let a=null;if(e&&(a=((d=this.beans.colGroupSvc)==null?void 0:d.getGroupAtDirection(this.columnGroup,"After"))??null),a){const h=a.getDisplayedLeafColumns(),m=s.groupAfterColumns=h.filter(w=>w.isResizable()),v=s.groupAfterStartWidth=t(m);s.groupAfterRatios=n(m,v)}else s.groupAfterColumns=void 0,s.groupAfterStartWidth=void 0,s.groupAfterRatios=void 0;return s}resizeLeafColumnsToFit(e){const t=this.beans.autoWidthCalc.getPreferredWidthForColumnGroup(this.columnGroup),n=this.getInitialValues();t>n.resizeStartWidth&&this.resizeColumns(n,t,e,!0)}resizeColumnsFromLocalValues(e,t,n=!0){if(!this.resizeCols||!this.resizeRatios)return;const i={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols,groupAfterStartWidth:this.resizeTakeFromStartWidth,groupAfterRatios:this.resizeTakeFromRatios};this.resizeColumns(i,e,t,n)}resizeColumns(e,t,n,i=!0){var v;const{columnsToResize:r,resizeStartWidth:o,resizeRatios:s,groupAfterColumns:a,groupAfterStartWidth:d,groupAfterRatios:h}=e,m=[];if(m.push({columns:r,ratios:s,width:t}),a){const w=t-o;m.push({columns:a,ratios:h,width:d-w})}(v=this.beans.colResize)==null||v.resizeColumnSets({resizeSets:m,finished:i,source:n}),i&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.toggleCss("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}},kwe=class extends Yt{constructor(e,t,n,i,r){super(),this.pinned=e,this.column=t,this.eResize=n,this.comp=i,this.ctrl=r}postConstruct(){const e=[];let t,n;const i=()=>{if($o(this.eResize,t),!t)return;const{horizontalResizeSvc:s,colAutosize:a}=this.beans,d=s.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});e.push(d),n&&a&&e.push(a.addColumnAutosizeListeners(this.eResize,this.column))},r=()=>{for(const s of e)s();e.length=0},o=()=>{const s=this.column.isResizable(),a=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(s!==t||a!==n)&&(t=s,n=a,r(),i())};o(),this.addDestroyFunc(r),this.ctrl.setRefreshFunction("resize",o)}onResizing(e,t){const{column:n,lastResizeAmount:i,resizeStartWidth:r,beans:o}=this,s=this.normaliseResizeAmount(t),a=r+s,d=[{key:n,newWidth:a}],{pinnedCols:h,ctrlsSvc:m,colResize:v}=o;if(this.column.getPinned()){const w=(h==null?void 0:h.leftWidth)??0,R=(h==null?void 0:h.rightWidth)??0,L=s1(m.getGridBodyCtrl().eBodyViewport)-50;if(w+R+(s-i)>L)return}this.lastResizeAmount=s,v==null||v.setColumnWidths(d,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.column.resizing=e,this.comp.toggleCss("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const n=this.pinned!=="left",i=this.pinned==="right";return this.gos.get("enableRtl")?n&&(t*=-1):i&&(t*=-1),t}},Pwe=class extends Yt{constructor(){super(...arguments),this.beanName="colResize"}setColumnWidths(e,t,n,i){const r=[],{colModel:o,gos:s,visibleCols:a}=this.beans;for(const d of e){const h=o.getColDefCol(d.key)||o.getCol(d.key);if(!h)continue;if(r.push({width:d.newWidth,ratios:[1],columns:[h]}),s.get("colResizeDefault")==="shift"&&(t=!t),t){const v=a.getColAfter(h);if(!v)continue;const w=h.getActualWidth()-d.newWidth,R=v.getActualWidth()+w;r.push({width:R,ratios:[1],columns:[v]})}}r.length!==0&&this.resizeColumnSets({resizeSets:r,finished:n,source:i})}resizeColumnSets(e){const{resizeSets:t,finished:n,source:i}=e;if(!(!t||t.every(m=>Dwe(m)))){if(n){const m=t&&t.length>0?t[0].columns:null;rx(this.eventSvc,m,n,i)}return}const o=[],s=[];for(const m of t){const{width:v,columns:w,ratios:R}=m,L={},O={};for(const U of w)s.push(U);let z=!0,$=0;for(;z;){if($++,$>1e3){Do(31);break}z=!1;const U=[];let Y=0,X=v;w.forEach((ie,re)=>{if(O[ie.getId()])X-=L[ie.getId()];else{U.push(ie);const ne=R[re];Y+=ne}});const q=1/Y;U.forEach((ie,re)=>{const J=re===U.length-1;let ne;J?ne=X:(ne=Math.round(R[re]*v*q),X-=ne);const be=ie.getMinWidth(),ue=ie.getMaxWidth();ne<be?(ne=be,O[ie.getId()]=!0,z=!0):ue>0&&ne>ue&&(ne=ue,O[ie.getId()]=!0,z=!0),L[ie.getId()]=ne})}for(const U of w){const Y=L[U.getId()];U.getActualWidth()!==Y&&(U.setActualWidth(Y,i),o.push(U))}}const a=o.length>0;let d=[];if(a){const{colFlex:m,visibleCols:v,colViewport:w}=this.beans;d=(m==null?void 0:m.refreshFlexedColumns({resizingCols:s,skipSetLeft:!0}))??[],v.setLeftValues(i),v.updateBodyWidths(),w.checkViewportColumns()}const h=s.concat(d);(a||n)&&rx(this.eventSvc,h,n,i,d)}resizeHeader(e,t,n){if(!e.isResizable())return;const i=e.getActualWidth(),r=e.getMinWidth(),o=e.getMaxWidth(),s=Math.min(Math.max(i+t,r),o);this.setColumnWidths([{key:e,newWidth:s}],n,!0,"uiColumnResized")}createResizeFeature(e,t,n,i,r){return new kwe(e,t,n,i,r)}createGroupResizeFeature(e,t,n,i){return new Twe(e,t,n,i)}};function Dwe(e){const{columns:t,width:n}=e;let i=0,r=0,o=!0;for(const d of t){const h=d.getMinWidth();i+=h||0;const m=d.getMaxWidth();m>0?r+=m:o=!1}const s=n>=i,a=!o||n<=r;return s&&a}var Fwe={moduleName:"ColumnResize",version:Fn,beans:[Pwe],apiFunctions:{setColumnWidths:Awe},dependsOn:[iwe,TH]},Mwe=class extends Yt{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);for(const t of this.columnGroup.getLeafColumns())t.__addEventListener("widthChanged",e),t.__addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.__removeEventListener("widthChanged",e),t.__removeEventListener("visibleChanged",e)})}removeListenersOnChildrenColumns(){for(const e of this.removeChildListenersFuncs)e();this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.toggleCss("ag-hidden",e===0)}},Iwe=class extends XF{constructor(){super(...arguments),this.onSuppressColMoveChange=()=>{!this.isAlive()||this.isSuppressMoving()?this.removeDragSource():this.dragSource||this.setDragSource(this.eGui)}}wireComp(e,t,n,i,r){const{column:o,beans:s}=this,{context:a,colNames:d,colHover:h,rangeSvc:m,colResize:v}=s;this.comp=e,r=K1(this,a,r),this.setGui(t,r),this.displayName=d.getDisplayNameForColumnGroup(o,"header"),this.refreshHeaderStyles(),this.addClasses(),this.setupMovingCss(r),this.setupExpandable(r),this.setupTooltip(),this.refreshAnnouncement(),this.setupAutoHeight({wrapperElement:i,compBean:r}),this.setupUserComp(),this.addHeaderMouseListeners(r,i),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();const w=this.rowCtrl.pinned,R=o.getProvidedColumnGroup().getLeafColumns();h==null||h.createHoverFeature(r,R,t),m==null||m.createRangeHighlightFeature(r,o,e),r.createManagedBean(new YF(o,t,s)),r.createManagedBean(new Mwe(e,o)),v?this.resizeFeature=r.createManagedBean(v.createGroupResizeFeature(e,n,w,o)):e.setResizableDisplayed(!1),r.createManagedBean(new Y1(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(r,R),this.addManagedEventListeners({cellSelectionChanged:()=>this.refreshAnnouncement()}),r.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(r),r.addDestroyFunc(()=>this.clearComponent())}getHeaderClassParams(){const{column:e,beans:t}=this,n=e.getDefinition();return ki(t.gos,{colDef:n,columnGroup:e,floatingFilter:!1})}refreshMaxHeaderHeight(){const{gos:e,comp:t}=this,n=e.get("groupHeaderHeight");n!=null?n===0?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(n):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const n of t)e.addManagedListeners(n,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,n)})}onLeafColumnHighlightChanged(e){const t=this.column.getDisplayedLeafColumns(),n=t[0]===e,i=Wo(t)===e;if(!n&&!i)return;const r=e.getHighlighted(),o=!!this.rowCtrl.getHeaderCellCtrls().find(d=>d.column.isMoving());let s=!1,a=!1;if(o){const d=this.beans.gos.get("enableRtl"),h=r===1,m=r===0;n&&(d?a=h:s=m),i&&(d?s=m:a=h)}this.comp.toggleCss("ag-header-highlight-before",s),this.comp.toggleCss("ag-header-highlight-after",a)}resizeHeader(e,t){const{resizeFeature:n}=this;if(!n)return;const i=n.getInitialValues(t);n.resizeColumns(i,i.resizeStartWidth+e,"uiColumnResized",!0)}resizeLeafColumnsToFit(e){var t;(t=this.resizeFeature)==null||t.resizeLeafColumnsToFit(e)}setupUserComp(){const{colGroupSvc:e,userCompFactory:t,gos:n,enterpriseMenuFactory:i}=this.beans,r=this.column,o=r.getProvidedColumnGroup(),s=ki(n,{displayName:this.displayName,columnGroup:r,setExpanded:d=>{e.setColumnGroupOpened(o,d,"gridInitializing")},setTooltip:(d,h)=>{n.assertModuleRegistered("Tooltip",3),this.setupTooltip(d,h)},showColumnMenu:(d,h)=>i==null?void 0:i.showMenuAfterButtonClick(o,d,"columnMenu",h),showColumnMenuAfterMouseClick:(d,h)=>i==null?void 0:i.showMenuAfterMouseEvent(o,d,"columnMenu",h),eGridHeader:this.eGui}),a=Hye(t,s);a&&this.comp.setUserCompDetails(a)}addHeaderMouseListeners(e,t){const{column:n,comp:i,beans:{rangeSvc:r},gos:o}=this,s=m=>this.handleMouseOverChange(m.type==="mouseenter"),a=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",n.getProvidedColumnGroup()),d=m=>this.handleContextMenuMouseEvent(m,void 0,n.getProvidedColumnGroup());e.addManagedListeners(this.eGui,{mouseenter:s,mouseleave:s,click:a,contextmenu:d}),i.toggleCss("ag-header-group-cell-selectable",Lb(o));const h=r==null?void 0:r.createHeaderGroupCellMouseListenerFeature(this.column,t);h&&this.createManagedBean(h)}handleMouseOverChange(e){this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t){var n;this.tooltipFeature=(n=this.beans.tooltipSvc)==null?void 0:n.setupHeaderGroupTooltip(this.tooltipFeature,this,e,t)}setupExpandable(e){const t=this.column.getProvidedColumnGroup();this.refreshExpanded();const n=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:n,expandableChanged:n})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0),this.refreshHeaderStyles()}addClasses(){const{column:e}=this,t=e.getColGroupDef(),n=fH(t,this.gos,null,e);e.isPadding()?(n.push("ag-header-group-cell-no-group"),e.getLeafColumns().every(r=>r.isSpanHeaderHeight())&&n.push("ag-header-span-height")):(n.push("ag-header-group-cell-with-group"),t!=null&&t.wrapHeaderText&&n.push("ag-header-cell-wrap-text"));for(const i of n)this.comp.toggleCss(i,!0)}setupMovingCss(e){const{column:t}=this,i=t.getProvidedColumnGroup().getLeafColumns(),r=()=>this.comp.toggleCss("ag-header-cell-moving",t.isMoving());for(const o of i)e.addManagedListeners(o,{movingChanged:r});r()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription())}handleKeyDown(e){var a;if(super.handleKeyDown(e),!this.getWrapperHasFocus())return;const{column:n,expandable:i,gos:r,beans:o}=this,s=Lb(r);if(e.key==kt.ENTER){if(s&&!e.altKey)(a=o.rangeSvc)==null||a.handleColumnSelection(n,e);else if(i){const d=!n.isExpanded();o.colGroupSvc.setColumnGroupOpened(n.getProvidedColumnGroup(),d,"uiColumnExpanded")}}}refreshAnnouncement(){var o;let e;const{gos:t,column:n,beans:i}=this;if(Lb(t)){const s=this.getLocaleTextFunc(),a=(o=i.rangeSvc)==null?void 0:o.isColumnInAnyRange(n);e=s("ariaColumnCellSelection",`Press CTRL+SPACE to ${a?"de":""}select all visible cells in this column group`)}this.ariaAnnouncement=e}announceAriaDescription(){var i;const{beans:e,eGui:t,ariaAnnouncement:n}=this;!n||!t.contains(Os(e))||(i=e.ariaAnnounce)==null||i.announceValue(n,"columnHeader")}setDragSource(e){var t;!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),e&&(this.dragSource=((t=this.beans.colMoves)==null?void 0:t.setDragSourceForHeader(e,this.column,this.displayName))??null))}isSuppressMoving(){return this.gos.get("suppressMovableColumns")||this.column.getLeafColumns().some(e=>e.getColDef().suppressMovable||e.getColDef().lockPosition)}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function Lwe(e,t,n){var i;(i=e.colGroupSvc)==null||i.setColumnGroupOpened(t,n,"api")}function Owe(e,t,n){var i;return((i=e.colGroupSvc)==null?void 0:i.getColumnGroup(t,n))??null}function zwe(e,t){var n;return((n=e.colGroupSvc)==null?void 0:n.getProvidedColGroup(t))??null}function Nwe(e,t,n){return e.colNames.getDisplayNameForColumnGroup(t,n)||""}function Bwe(e){var t;return((t=e.colGroupSvc)==null?void 0:t.getColumnGroupState())??[]}function Gwe(e,t){var n;(n=e.colGroupSvc)==null||n.setColumnGroupState(t,"api")}function jwe(e){var t;(t=e.colGroupSvc)==null||t.resetColumnGroupState("api")}function Hwe(e){return e.visibleCols.treeLeft}function Vwe(e){return e.visibleCols.treeCenter}function $we(e){return e.visibleCols.treeRight}function Wwe(e){return e.visibleCols.getAllTrees()}function Uwe(e,t){for(let n=0;n<t.length;n++){const i=e.indexOf(t[n]);i>=0&&(e[i]=e[e.length-1],e.pop())}}var qwe=class extends Yt{constructor(){super(...arguments),this.beanName="visibleCols",this.colsAndGroupsMap={},this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.headerGroupRowCount=0,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.isBodyWidthDirty=!0}refresh(e,t=!1){const{colFlex:n,colModel:i,colGroupSvc:r,colViewport:o,selectionColSvc:s}=this.beans;t||this.buildTrees(i,r),r==null||r.updateOpenClosedVisibility(),this.leftCols=UA(this.treeLeft),this.centerCols=UA(this.treeCenter),this.rightCols=UA(this.treeRight),s==null||s.refreshVisibility(this.leftCols,this.centerCols,this.rightCols),this.joinColsAriaOrder(i),this.joinCols(),this.headerGroupRowCount=this.getHeaderRowCount(),this.setLeftValues(e),this.autoHeightCols=this.allCols.filter(a=>a.isAutoHeight()),n==null||n.refreshFlexedColumns(),this.updateBodyWidths(),this.setFirstRightAndLastLeftPinned(i,this.leftCols,this.rightCols,e),o.checkViewportColumns(!1),this.eventSvc.dispatchEvent({type:"displayedColumnsChanged",source:e})}getHeaderRowCount(){if(!this.gos.get("hidePaddedHeaderRows"))return this.beans.colModel.cols.treeDepth;let e=0;for(const t of this.allCols){let n=t.getParent();for(;n;){if(!n.isPadding()){const i=n.getProvidedColumnGroup().getLevel()+1;i>e&&(e=i);break}n=n.getParent()}}return e}updateBodyWidths(){const e=Wg(this.centerCols),t=Wg(this.leftCols),n=Wg(this.rightCols);this.isBodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==n)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=n,this.eventSvc.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventSvc.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e,t,n,i){let r,o;this.gos.get("enableRtl")?(r=t?t[0]:null,o=n?Wo(n):null):(r=t?Wo(t):null,o=n?n[0]:null);for(const s of e.getCols())s.setLastLeftPinned(s===r,i),s.setFirstRightPinned(s===o,i)}buildTrees(e,t){const n=e.getColsToShow(),i=n.filter(d=>d.getPinned()=="left"),r=n.filter(d=>d.getPinned()=="right"),o=n.filter(d=>d.getPinned()!="left"&&d.getPinned()!="right"),s=new E7,a=d=>t?t.createColumnGroups(d):d.columns;this.treeLeft=a({columns:i,idCreator:s,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=a({columns:r,idCreator:s,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=a({columns:o,idCreator:s,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.ariaOrderColumns=[]}joinColsAriaOrder(e){const t=e.getCols(),n=[],i=[],r=[];for(const o of t){const s=o.getPinned();s?s===!0||s==="left"?n.push(o):r.push(o):i.push(o)}this.ariaOrderColumns=n.concat(i).concat(r)}getAriaColIndex(e){let t;return Sa(e)?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}setLeftValuesOfGroups(){for(const e of[this.treeLeft,this.treeRight,this.treeCenter])for(const t of e)Sa(t)&&t.checkLeft()}setLeftValuesOfCols(e){const{colModel:t}=this.beans;if(!t.getColDefCols())return;const i=t.getCols().slice(0),r=this.gos.get("enableRtl");for(const o of[this.leftCols,this.rightCols,this.centerCols]){if(r){let s=Wg(o);for(const a of o)s-=a.getActualWidth(),a.setLeft(s,e)}else{let s=0;for(const a of o)a.setLeft(s,e),s+=a.getActualWidth()}Uwe(i,o)}for(const o of i)o.setLeft(null,e)}joinCols(){this.gos.get("enableRtl")?this.allCols=this.rightCols.concat(this.centerCols).concat(this.leftCols):this.allCols=this.leftCols.concat(this.centerCols).concat(this.rightCols)}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}isColDisplayed(e){return this.allCols.indexOf(e)>=0}getLeftColsForRow(e){const{leftCols:t,beans:{colModel:n}}=this;return n.colSpanActive?this.getColsForRow(e,t):t}getRightColsForRow(e){const{rightCols:t,beans:{colModel:n}}=this;return n.colSpanActive?this.getColsForRow(e,t):t}getColsForRow(e,t,n,i){const r=[];let o=null;for(let s=0;s<t.length;s++){const a=t[s],d=t.length-s,h=Math.min(a.getColSpan(e),d),m=[a];if(h>1){const w=h-1;for(let R=1;R<=w;R++)m.push(t[s+R]);s+=w}let v;if(n){v=!1;for(const w of m)n(w)&&(v=!0)}else v=!0;v&&(r.length===0&&o&&(i&&i(a))&&r.push(o),r.push(a)),o=a}return r}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getColBefore(e){const t=this.allCols,n=t.indexOf(e);return n>0?t[n-1]:null}isPinningLeft(){return this.leftCols.length>0}isPinningRight(){return this.rightCols.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};o0(this.treeCenter,!1,e),o0(this.treeLeft,!1,e),o0(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["leftCols","centerCols","rightCols"];e&&t.reverse();for(let n=0;n<t.length;n++){const i=this[t[n]];if(i.length)return e?Wo(i):i[0]}return null}getColAfter(e){const t=this.allCols,n=t.indexOf(e);return n<t.length-1?t[n+1]:null}getColsLeftWidth(){return Wg(this.leftCols)}getDisplayedColumnsRightWidth(){return Wg(this.rightCols)}isColAtEdge(e,t){const n=this.allCols;if(!n.length)return!1;const i=t==="first";let r;if(Sa(e)){const o=e.getDisplayedLeafColumns();if(!o.length)return!1;r=i?o[0]:Wo(o)}else r=e;return(i?n[0]:Wo(n))===r}};function o0(e,t,n){if(e)for(let i=0;i<e.length;i++){const r=e[i];if(Sa(r)){const o=t?r.getDisplayedChildren():r.getChildren();o0(o,t,n)}n(r)}}function UA(e){const t=[];return o0(e,!0,n=>{zy(n)&&t.push(n)}),t}var Kwe=class extends Yt{constructor(){super(...arguments),this.beanName="colGroupSvc"}getColumnGroupState(){const e=[],t=this.beans.colModel.getColTree();return rm(null,t,n=>{Au(n)&&e.push({groupId:n.getGroupId(),open:n.isExpanded()})}),e}resetColumnGroupState(e){const t=this.beans.colModel.getColDefColTree();if(!t)return;const n=[];rm(null,t,i=>{if(Au(i)){const r=i.getColGroupDef(),o={groupId:i.getGroupId(),open:r?r.openByDefault:void 0};n.push(o)}}),this.setColumnGroupState(n,e)}setColumnGroupState(e,t){const{colModel:n,colAnimation:i,visibleCols:r,eventSvc:o}=this.beans;if(!n.getColTree().length)return;i==null||i.start();const a=[];for(const d of e){const h=d.groupId,m=d.open,v=this.getProvidedColGroup(h);v&&v.isExpanded()!==m&&(v.setExpanded(m),a.push(v))}r.refresh(t,!0),a.length&&o.dispatchEvent({type:"columnGroupOpened",columnGroup:a.length===1?a[0]:void 0,columnGroups:a}),i==null||i.finish()}setColumnGroupOpened(e,t,n){let i;Au(e)?i=e.getId():i=e||"",this.setColumnGroupState([{groupId:i,open:t}],n)}getProvidedColGroup(e){let t=null;return rm(null,this.beans.colModel.getColTree(),n=>{Au(n)&&n.getId()===e&&(t=n)}),t}getGroupAtDirection(e,t){const n=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),i=e.getDisplayedLeafColumns(),r=t==="After"?Wo(i):i[0],o=`getCol${t}`;for(;;){const s=this.beans.visibleCols[o](r);if(!s)return null;const a=this.getColGroupAtLevel(s,n);if(a!==e)return a}}getColGroupAtLevel(e,t){let n=e.getParent(),i,r;for(;i=n.getProvidedColumnGroup().getLevel(),r=n.getPaddingLevel(),!(i+r<=t);)n=n.getParent();return n}updateOpenClosedVisibility(){const e=this.beans.visibleCols.getAllTrees();o0(e,!1,t=>{Sa(t)&&t.calculateDisplayedColumns()})}getColumnGroup(e,t){if(!e)return null;if(Sa(e))return e;const n=this.beans.visibleCols.getAllTrees(),i=typeof t=="number";let r=null;return o0(n,!1,o=>{if(Sa(o)){const s=o;let a;i?a=e===s.getGroupId()&&t===s.getPartId():a=e===s.getGroupId(),a&&(r=s)}}),r}createColumnGroups(e){const{columns:t,idCreator:n,pinned:i,oldDisplayedGroups:r,isStandaloneStructure:o}=e,s=this.mapOldGroupsById(r),a=[];let d=t;for(;d.length;){const h=d;d=[];let m=0;const v=w=>{const R=m;m=w;const L=h[R],z=(Sa(L)?L.getProvidedColumnGroup():L).getOriginalParent();if(z==null){for(let U=R;U<w;U++)a.push(h[U]);return}const $=this.createColumnGroup(z,n,s,i,o);for(let U=R;U<w;U++)$.addChild(h[U]);d.push($)};for(let w=1;w<h.length;w++){const R=h[w],O=(Sa(R)?R.getProvidedColumnGroup():R).getOriginalParent(),z=h[m],U=(Sa(z)?z.getProvidedColumnGroup():z).getOriginalParent();O!==U&&v(w)}m<h.length&&v(h.length)}return o||this.setupParentsIntoCols(a,null),a}createProvidedColumnGroup(e,t,n,i,r,o,s){const a=r.getUniqueKey(t.groupId||null,null),d=g4(this.beans,t,a),h=new h_(d,a,!1,n);this.createBean(h);const m=this.findExistingGroup(t,o);m&&o.splice(m.idx,1);const v=m==null?void 0:m.group;v&&h.setExpanded(v.isExpanded());const w=y7(this.beans,d.children,n+1,e,i,r,o,s);return h.setChildren(w),h}balanceColumnTree(e,t,n,i){const r=[];for(let o=0;o<e.length;o++){const s=e[o];if(Au(s)){const a=s,d=this.balanceColumnTree(a.getChildren(),t+1,n,i);a.setChildren(d),r.push(a)}else{let a,d;for(let h=t;h<n;h++){const m=i.getUniqueKey(null,null),v=g4(this.beans,null,m),w=new h_(v,m,!0,h);this.createBean(w),d&&d.setChildren([w]),d=w,a||(a=d)}if(a&&d)if(r.push(a),e.some(m=>Au(m))){d.setChildren([s]);continue}else{d.setChildren(e);break}r.push(s)}}return r}findDepth(e){let t=0,n=e;for(;n!=null&&n[0]&&Au(n[0]);)t++,n=n[0].getChildren();return t}findMaxDepth(e,t){let n=t;for(let i=0;i<e.length;i++){const r=e[i];if(Au(r)){const o=r,s=this.findMaxDepth(o.getChildren(),t+1);n<s&&(n=s)}}return n}balanceTreeForAutoCols(e,t){const n=[];for(const i of e){let r=i;for(let o=t-1;o>=0;o--){const s=new h_(null,`FAKE_PATH_${i.getId()}}_${o}`,!0,o);this.createBean(s),s.setChildren([r]),r.originalParent=s,r=s}t===0&&(i.originalParent=null),n.push(r)}return n}findExistingGroup(e,t){if(e.groupId!=null)for(let i=0;i<t.length;i++){const r=t[i];if(r.getColGroupDef()&&r.getId()===e.groupId)return{idx:i,group:r}}}createColumnGroup(e,t,n,i,r){const o=e.getGroupId(),s=t.getInstanceIdForKey(o),a=Q7(o,s);let d=n[a];return d&&d.getProvidedColumnGroup()!==e&&(d=null),Dn(d)?d.reset():(d=new h1(e,o,s,i),r||this.createBean(d)),d}mapOldGroupsById(e){const t={},n=i=>{for(const r of i)if(Sa(r)){const o=r;t[r.getUniqueId()]=o,n(o.getChildren())}};return e&&n(e),t}setupParentsIntoCols(e,t){for(const n of e??[])if(n.parent!==t&&(this.beans.colViewport.colsWithinViewportHash=""),n.parent=t,Sa(n)){const i=n;this.setupParentsIntoCols(i.getChildren(),i)}}},Zwe={moduleName:"ColumnGroup",version:Fn,dynamicBeans:{headerGroupCellCtrl:Iwe},beans:[Kwe],apiFunctions:{getAllDisplayedColumnGroups:Wwe,getCenterDisplayedColumnGroups:Vwe,getColumnGroup:Owe,getColumnGroupState:Bwe,getDisplayNameForColumnGroup:Nwe,getLeftDisplayedColumnGroups:Hwe,getProvidedColumnGroup:zwe,getRightDisplayedColumnGroups:$we,resetColumnGroupState:jwe,setColumnGroupOpened:Lwe,setColumnGroupState:Gwe}},Ywe={tag:"div",cls:"ag-skeleton-container"},Xwe=class extends ra{constructor(){super(Ywe)}init(t){const n=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",n),this.addDestroyFunc(()=>r1(t.eParentOfValue)),r1(t.eParentOfValue,n),t.deferRender?this.setupLoading(t):t.node.failedLoad?this.setupFailed():this.setupLoading(t)}setupFailed(){const t=this.getLocaleTextFunc();this.getGui().textContent=t("loadingError","ERR");const n=t("ariaSkeletonCellLoadingFailed","Row failed to load");nx(this.getGui(),n)}setupLoading(t){const n=_h({tag:"div",cls:"ag-skeleton-effect"}),i=t.node.rowIndex;if(i!=null){const s=75+25*(i%2===0?Math.sin(i):Math.cos(i));n.style.width=`${s}%`}this.getGui().appendChild(n);const r=this.getLocaleTextFunc(),o=t.deferRender?r("ariaDeferSkeletonCellLoading","Cell is loading"):r("ariaSkeletonCellLoading","Row data is loading");nx(this.getGui(),o)}refresh(t){return!1}},Jwe={moduleName:"CheckboxCellRenderer",version:Fn,userComponents:{agCheckboxCellRenderer:rxe}},Qwe={moduleName:"SkeletonCellRenderer",version:Fn,userComponents:{agSkeletonCellRenderer:Xwe}};function e1e(e,t){const n=e.colModel.getColDefCol(t);return n?n.getColDef():null}function t1e(e){return e.colModel.getColumnDefs(!0)}function n1e(e,t,n){return e.colNames.getDisplayNameForColumn(t,n)||""}function i1e(e,t){return e.colModel.getColDefCol(t)}function r1e(e){return e.colModel.getColDefCols()}function o1e(e,t){return vf(e,t,"api")}function s1e(e){return DS(e)}function a1e(e){gye(e,"api")}function l1e(e){return e.visibleCols.isPinningLeft()||e.visibleCols.isPinningRight()}function u1e(e){return e.visibleCols.isPinningLeft()}function c1e(e){return e.visibleCols.isPinningRight()}function d1e(e,t){return e.visibleCols.getColAfter(t)}function h1e(e,t){return e.visibleCols.getColBefore(t)}function f1e(e,t,n){e.colModel.setColsVisible(t,n,"api")}function p1e(e,t,n){var i;(i=e.pinnedCols)==null||i.setColsPinned(t,n,"api")}function g1e(e){return e.colModel.getCols()}function m1e(e){return e.visibleCols.leftCols}function y1e(e){return e.visibleCols.centerCols}function v1e(e){return e.visibleCols.rightCols}function b1e(e){return e.visibleCols.allCols}function x1e(e){return e.colViewport.getViewportColumns()}function $k(e,t){if(!e)return;const n=e,i={};for(const r of Object.keys(n)){if(t&&t.indexOf(r)>=0||U9.has(r))continue;const o=n[r];typeof o=="object"&&o!==null&&o.constructor===Object?i[r]=$k(o):i[r]=o}return i}var w1e=class extends Yt{constructor(){super(...arguments),this.beanName="colDefFactory"}wireBeans(e){this.rowGroupColsSvc=e.rowGroupColsSvc,this.pivotColsSvc=e.pivotColsSvc}getColumnDefs(e,t,n,i,r=!1){var d,h;const o=e.slice();t?o.sort((m,v)=>n.indexOf(m)-n.indexOf(v)):(n||r)&&o.sort((m,v)=>i.indexOf(m)-i.indexOf(v));const s=(d=this.rowGroupColsSvc)==null?void 0:d.columns,a=(h=this.pivotColsSvc)==null?void 0:h.columns;return this.buildColumnDefs(o,s,a)}buildColumnDefs(e,t=[],n=[]){const i=[],r={};for(const o of e){const s=this.createDefFromColumn(o,t,n);let a=!0,d=s,h=o.getOriginalParent(),m=null;for(;h;){let v=null;if(h.isPadding()){h=h.getOriginalParent();continue}const w=r[h.getGroupId()];if(w){w.children.push(d),a=!1;break}if(v=this.createDefFromGroup(h),v&&(v.children=[d],r[v.groupId]=v,d=v,h=h.getOriginalParent()),h!=null&&m===h){a=!1;break}m=h}a&&i.push(d)}return i}createDefFromGroup(e){const t=$k(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,n){const i=$k(e.getColDef());return i.colId=e.getColId(),i.width=e.getActualWidth(),i.rowGroup=e.isRowGroupActive(),i.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,i.pivot=e.isPivotActive(),i.pivotIndex=e.isPivotActive()?n.indexOf(e):null,i.aggFunc=e.isValueActive()?e.getAggFunc():null,i.hide=e.isVisible()?void 0:!0,i.pinned=e.isPinned()?e.getPinned():null,i.sort=e.getSortDef(),i.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,i}},C1e=class extends Yt{constructor(){super(...arguments),this.beanName="colFlex",this.columnsHidden=!1}refreshFlexedColumns(e={}){const t=e.source??"flex";e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth);const n=this.flexViewportWidth,{visibleCols:i,colDelayRenderSvc:r}=this.beans,o=i.centerCols;let s=-1;if(e.resizingCols){const O=new Set(e.resizingCols);for(let z=o.length-1;z>=0;z--)if(O.has(o[z])){s=z;break}}let a=!1;const d=o.map((O,z)=>{const $=O.getFlex(),U=$!=null&&$>0&&z>s;return a||(a=U),{col:O,isFlex:U,flex:Math.max(0,$??0),initialSize:O.getActualWidth(),min:O.getMinWidth(),max:O.getMaxWidth(),targetSize:0}});if(a?(r==null||r.hideColumns("colFlex"),this.columnsHidden=!0):this.columnsHidden&&this.revealColumns(r),!n||!a)return[];let h=d.length,m=d.reduce((O,z)=>O+z.flex,0),v=n;const w=(O,z)=>{O.frozenSize=z,O.col.setActualWidth(z,t),v-=z,m-=O.flex,h-=1},R=O=>O.frozenSize!=null;for(const O of d)O.isFlex||w(O,O.initialSize);for(;h>0;){const O=Math.round(m<1?v*m:v);let z,$=0,U=0;for(const q of d){if(R(q))continue;z=q,U+=O*(q.flex/m);const ie=U-$,re=Math.round(ie);q.targetSize=re,$+=re}z&&(z.targetSize+=O-$);let Y=0;for(const q of d){if(R(q))continue;const ie=q.targetSize,re=Math.min(Math.max(ie,q.min),q.max);Y+=re-ie,q.violationType=re===ie?void 0:re<ie?"max":"min",q.targetSize=re}const X=Y===0?"all":Y>0?"min":"max";for(const q of d)R(q)||(X==="all"||q.violationType===X)&&w(q,q.targetSize)}e.skipSetLeft||i.setLeftValues(t),e.updateBodyWidths&&i.updateBodyWidths();const L=d.filter(O=>O.isFlex&&!O.violationType).map(O=>O.col);if(e.fireResizedEvent){const O=d.filter($=>$.initialSize!==$.frozenSize).map($=>$.col),z=d.filter($=>$.flex).map($=>$.col);rx(this.eventSvc,O,!0,t,z)}return this.revealColumns(r),L}revealColumns(e){this.columnsHidden&&(e==null||e.revealColumns("colFlex"),this.columnsHidden=!1)}initCol(e){const{flex:t,initialFlex:n}=e.colDef;t!==void 0?e.flex=t:n!==void 0&&(e.flex=n)}setColFlex(e,t){e.flex=t??null,e.dispatchStateUpdatedEvent("flex")}};function Lw(e,t,n){if(!t||!e)return;if(!n)return e[t];const i=t.split(".");let r=e;for(let o=0;o<i.length;o++){if(r==null)return;r=r[i[o]]}return r}var _1e=["dateTimeString","dateString","text","number","boolean","date"],S1e=class extends Yt{constructor(){super(...arguments),this.beanName="dataTypeSvc",this.dataTypeDefinitions={},this.isPendingInference=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[],this.columnDefinitionPropsPerDataType={number(){return{cellEditor:"agNumberCellEditor"}},boolean(){return{cellEditor:"agCheckboxCellEditor",cellRenderer:"agCheckboxCellRenderer",getFindText:()=>null,suppressKeyboardEvent:e=>!!e.colDef.editable&&e.event.key===kt.SPACE}},date({formatValue:e}){return{cellEditor:"agDateCellEditor",keyCreator:e}},dateString({formatValue:e}){return{cellEditor:"agDateStringCellEditor",keyCreator:e}},dateTime(e){return this.date(e)},dateTimeString(e){return this.dateString(e)},object({formatValue:e,colModel:t,colId:n}){return{cellEditorParams:{useFormatter:!0},comparator:(i,r)=>{const o=t.getColDefCol(n),s=o==null?void 0:o.getColDef();if(!o||!s)return 0;const a=i==null?"":e({column:o,node:null,value:i}),d=r==null?"":e({column:o,node:null,value:r});return a===d?0:a>d?1:-1},keyCreator:e}},text(){return{}}}}wireBeans(e){this.colModel=e.colModel}postConstruct(){this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.colModel.recreateColumnDefs(e)})}processDataTypeDefinitions(){const e=this.getDefaultDataTypes(),t={},n={},i=m=>v=>{const{column:w,node:R,value:L}=v;let O=w.getColDef().valueFormatter;return O===m.groupSafeValueFormatter&&(O=m.valueFormatter),this.beans.valueSvc.formatValue(w,R,L,O)};for(const m of Object.keys(e)){const v=e[m],w={...v,groupSafeValueFormatter:n6(v,this.gos)};t[m]=w,n[m]=i(w)}const r=this.gos.get("dataTypeDefinitions")??{},o={};for(const m of Object.keys(r)){const v=r[m],w=this.processDataTypeDefinition(v,r,[m],e);w&&(t[m]=w,v.dataTypeMatcher&&(o[m]=v.dataTypeMatcher),n[m]=i(w))}const{valueParser:s,valueFormatter:a}=e.object,{valueParser:d,valueFormatter:h}=t.object;this.hasObjectValueParser=d!==s,this.hasObjectValueFormatter=h!==a,this.formatValueFuncs=n,this.dataTypeDefinitions=t,this.dataTypeMatchers=this.sortKeysInMatchers(o,e)}sortKeysInMatchers(e,t){const n={...e};for(const i of _1e)delete n[i],n[i]=e[i]??t[i].dataTypeMatcher;return n}processDataTypeDefinition(e,t,n,i){let r;const o=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let s=i[o];const a=t[o];if(s&&a&&(s=a),!t6(e,s,o))return;r=e6(s,e)}else{if(n.includes(o)){an(44);return}const s=t[o];if(!t6(e,s,o))return;const a=this.processDataTypeDefinition(s,t,[...n,o],i);if(!a)return;r=e6(a,e)}return{...r,groupSafeValueFormatter:n6(r,this.gos)}}updateColDefAndGetColumnType(e,t,n){let{cellDataType:i}=t;const{field:r}=t;if(i===void 0&&(i=e.cellDataType),(i==null||i===!0)&&(i=this.canInferCellDataType(e,t)?this.inferCellDataType(r,n):!1),!i){e.cellDataType=!1;return}const o=this.dataTypeDefinitions[i];if(!o){an(47,{cellDataType:i});return}return e.cellDataType=i,o.groupSafeValueFormatter&&(e.valueFormatter=o.groupSafeValueFormatter),o.valueParser&&(e.valueParser=o.valueParser),o.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,i,o,n),o.columnTypes}addColumnListeners(e){if(!this.isPendingInference)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const n=i=>{t.add(i.key)};e.__addEventListener("columnStateUpdated",n),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.__removeEventListener("columnStateUpdated",n))}canInferCellDataType(e,t){const{gos:n}=this;if(!Ks(n))return!1;const i={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(qA(t,i))return!1;const r=t.type===null?e.type:t.type;if(r){const o=n.get("columnTypes")??{};if(PS(r).some(a=>{const d=o[a.trim()];return d&&qA(d,i)}))return!1}return!qA(e,i)}inferCellDataType(e,t){if(!e)return;let n;const i=this.getInitialData();if(i){const o=e.includes(".")&&!this.gos.get("suppressFieldDotNotation");n=Lw(i,e,o)}else this.initWaitForRowData(t);return n==null?void 0:Object.keys(this.dataTypeMatchers).find(o=>this.dataTypeMatchers[o](n))??"object"}getInitialData(){var t;const e=this.gos.get("rowData");if(e!=null&&e.length)return e[0];if(this.initialData)return this.initialData;{const n=(t=this.beans.rowModel.rootNode)==null?void 0:t._leafs;if(n!=null&&n.length)return n[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isPendingInference)return;this.isPendingInference=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions,{colAutosize:n,eventSvc:i}=this.beans;t&&n&&(n.shouldQueueResizeOperations=!0);const[r]=this.addManagedEventListeners({rowDataUpdateStarted:o=>{const{firstRowData:s}=o;s&&(r==null||r(),this.isPendingInference=!1,this.processColumnsPendingInference(s,t),this.columnStateUpdatesPendingInference={},t&&(n==null||n.processResizeOperations()),i.dispatchEvent({type:"dataTypesInferred"}))}})}processColumnsPendingInference(e,t){this.initialData=e;const n=[];this.destroyColumnStateUpdateListeners();const i={},r={};for(const o of Object.keys(this.columnStateUpdatesPendingInference)){const s=this.columnStateUpdatesPendingInference[o],a=this.colModel.getCol(o);if(!a)return;const d=a.getColDef();if(!this.resetColDefIntoCol(a,"cellDataTypeInferred"))return;const h=a.getColDef();if(t&&h.type&&h.type!==d.type){const m=R1e(a,s);m.rowGroup&&m.rowGroupIndex==null&&(i[o]=m),m.pivot&&m.pivotIndex==null&&(r[o]=m),n.push(m)}}t&&n.push(...this.generateColumnStateForRowGroupAndPivotIndexes(i,r)),n.length&&vf(this.beans,{state:n},"cellDataTypeInferred"),this.initialData=null}generateColumnStateForRowGroupAndPivotIndexes(e,t){const n={},{rowGroupColsSvc:i,pivotColsSvc:r}=this.beans;return i==null||i.restoreColumnOrder(n,e),r==null||r.restoreColumnOrder(n,t),Object.values(n)}resetColDefIntoCol(e,t){const n=e.getUserProvidedColDef();if(!n)return!1;const i=Tk(this.beans,n,e.getColId());return e.setColDef(i,n,t),!0}getDateStringTypeDefinition(e){const{dateString:t}=this.dataTypeDefinitions;return e?this.getDataTypeDefinition(e)??t:t}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDateIncludesTimeFlag(e){return e==="dateTime"||e==="dateTimeString"}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){var t;return(t=this.getDataTypeDefinition(e))==null?void 0:t.baseDataType}checkType(e,t){var i,r;if(t==null)return!0;const n=(i=this.getDataTypeDefinition(e))==null?void 0:i.dataTypeMatcher;return!n||e.getColDef().allowFormula&&((r=this.beans.formula)!=null&&r.isFormula(t))?!0:n(t)}validateColDef(e){const t=n=>an(48,{property:n});if(e.cellDataType==="object"){const{object:n}=this.dataTypeDefinitions;e.valueFormatter===n.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&t("Formatter"),e.editable&&e.valueParser===n.valueParser&&!this.hasObjectValueParser&&t("Parser")}}postProcess(e){var s;const t=e.cellDataType;if(!t||typeof t!="string")return;const{dataTypeDefinitions:n,beans:i,formatValueFuncs:r}=this,o=n[t];o&&((s=i.colFilter)==null||s.setColDefPropsForDataType(e,o,r[t]))}getFormatValue(e){return this.formatValueFuncs[e]}isColPendingInference(e){return this.isPendingInference&&!!this.columnStateUpdatesPendingInference[e]}setColDefPropertiesForBaseDataType(e,t,n,i){const r=this.formatValueFuncs[t],o=this.columnDefinitionPropsPerDataType[n.baseDataType]({colDef:e,cellDataType:t,colModel:this.colModel,dataTypeDefinition:n,colId:i,formatValue:r});Object.assign(e,o)}getDateObjectTypeDef(e){const t=this.getLocaleTextFunc(),n=this.getDateIncludesTimeFlag(e);return{baseDataType:e,valueParser:i=>Hc(i.newValue&&String(i.newValue)),valueFormatter:i=>i.value==null?"":!(i.value instanceof Date)||isNaN(i.value.getTime())?t("invalidDate","Invalid Date"):Ad(i.value,n)??"",dataTypeMatcher:i=>i instanceof Date}}getDateStringTypeDef(e){const t=this.getDateIncludesTimeFlag(e);return{baseDataType:e,dateParser:n=>Hc(n)??void 0,dateFormatter:n=>Ad(n??null,t)??void 0,valueParser:n=>f_(String(n.newValue))?n.newValue:null,valueFormatter:n=>f_(String(n.value))?String(n.value):"",dataTypeMatcher:n=>typeof n=="string"&&f_(n)}}getDefaultDataTypes(){const e=this.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:t=>{var n,i;return((i=(n=t.newValue)==null?void 0:n.trim)==null?void 0:i.call(n))===""?null:Number(t.newValue)},valueFormatter:t=>t.value==null?"":typeof t.value!="number"||isNaN(t.value)?e("invalidNumber","Invalid Number"):String(t.value),dataTypeMatcher:t=>typeof t=="number"},text:{baseDataType:"text",valueParser:t=>t.newValue===""?null:bk(t.newValue),dataTypeMatcher:t=>typeof t=="string"},boolean:{baseDataType:"boolean",valueParser:t=>{var n,i;return t.newValue==null?t.newValue:((i=(n=t.newValue)==null?void 0:n.trim)==null?void 0:i.call(n))===""?null:String(t.newValue).toLowerCase()==="true"},valueFormatter:t=>t.value==null?"":String(t.value),dataTypeMatcher:t=>typeof t=="boolean"},date:this.getDateObjectTypeDef("date"),dateString:this.getDateStringTypeDef("dateString"),dateTime:this.getDateObjectTypeDef("dateTime"),dateTimeString:{...this.getDateStringTypeDef("dateTimeString"),dataTypeMatcher:t=>typeof t=="string"&&mve(t)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:t=>bk(t.value)??""}}}destroyColumnStateUpdateListeners(){for(const e of this.columnStateUpdateListenerDestroyFuncs)e();this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}};function e6(e,t){const n={...e,...t};return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(n.columnTypes=[...PS(e.columnTypes),...PS(t.columnTypes)]),n}function t6(e,t,n){return t?t.baseDataType!==e.baseDataType?(an(46),!1):!0:(an(45,{parentCellDataType:n}),!1)}function n6(e,t){if(e.valueFormatter)return n=>{var i,r;if((i=n.node)!=null&&i.group){const o=(n.colDef.pivotValueColumn??n.column).getAggFunc();if(o){if(o==="first"||o==="last")return e.valueFormatter(n);if(e.baseDataType==="number"&&o!=="count"){if(typeof n.value=="number")return e.valueFormatter(n);if(typeof n.value=="object"){if(!n.value)return;if("toNumber"in n.value)return e.valueFormatter({...n,value:n.value.toNumber()});if("value"in n.value)return e.valueFormatter({...n,value:n.value.value})}}return}}else if(t.get("groupHideOpenParents")&&n.column.isRowGroupActive()&&typeof n.value=="string"&&!((r=e.dataTypeMatcher)!=null&&r.call(e,n.value)))return;return e.valueFormatter(n)}}function E1e(e,t,n,i){if(!t[n])return!1;const r=e[n];return r===null?(t[n]=!1,!1):i===void 0?!!r:r===i}function qA(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([n,i])=>E1e(e,t,n,i))}function R1e(e,t){const n=S7(e);for(const i of t)delete n[i],i==="rowGroup"?delete n.rowGroupIndex:i==="pivot"&&delete n.pivotIndex;return n}var A1e={moduleName:"DataType",version:Fn,beans:[S1e],dependsOn:[Jwe]},T1e={moduleName:"ColumnFlex",version:Fn,beans:[C1e]},kH={moduleName:"ColumnApi",version:Fn,beans:[w1e],apiFunctions:{getColumnDef:e1e,getDisplayNameForColumn:n1e,getColumn:i1e,getColumns:r1e,applyColumnState:o1e,getColumnState:s1e,resetColumnState:a1e,isPinning:l1e,isPinningLeft:u1e,isPinningRight:c1e,getDisplayedColAfter:d1e,getDisplayedColBefore:h1e,setColumnsVisible:f1e,setColumnsPinned:p1e,getAllGridColumns:g1e,getDisplayedLeftColumns:m1e,getDisplayedCenterColumns:y1e,getDisplayedRightColumns:v1e,getAllDisplayedColumns:b1e,getAllDisplayedVirtualColumns:x1e,getColumnDefs:t1e}};function k1e(e){if(!e||e==null)return null;const t=/([a-z])([A-Z])/g,n=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(n,"$1 $2$3").replace(/\./g," ").split(" ").map(r=>r.substring(0,1).toUpperCase()+(r.length>1?r.substring(1,r.length):"")).join(" ")}var P1e=class extends Yt{constructor(){super(...arguments),this.beanName="colNames"}getDisplayNameForColumn(e,t,n=!1){if(!e)return null;const i=this.getHeaderName(e.getColDef(),e,null,null,t),{aggColNameSvc:r}=this.beans;return n&&r?r.getHeaderName(e,i):i}getDisplayNameForProvidedColumnGroup(e,t,n){const i=t==null?void 0:t.getColGroupDef();return i?this.getHeaderName(i,null,e,t,n):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,n,i,r){var s;const o=e.headerValueGetter;if(o){const a=ki(this.gos,{colDef:e,column:t,columnGroup:n,providedColumnGroup:i,location:r});return typeof o=="function"?o(a):typeof o=="string"?((s=this.beans.expressionSvc)==null?void 0:s.evaluate(o,a))??null:""}else{if(e.headerName!=null)return e.headerName;if(e.field)return k1e(e.field)}return""}},D1e=class extends Yt{constructor(){super(...arguments),this.beanName="colViewport",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.columnsToRenderLeft=[],this.columnsToRenderRight=[],this.columnsToRenderCenter=[]}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,n=!1){const{visibleCols:i}=this,r=i.isBodyWidthDirty;if(!(e===this.scrollWidth&&t===this.scrollPosition&&!r)){if(this.scrollWidth=e,this.scrollPosition=t,i.isBodyWidthDirty=!0,this.gos.get("enableRtl")){const s=i.bodyWidth;this.viewportLeft=s-t-e,this.viewportRight=s-t}else this.viewportLeft=t,this.viewportRight=e+t;this.colModel.ready&&this.checkViewportColumns(n)}}getColumnHeadersToRender(e){switch(e){case"left":return this.columnsToRenderLeft;case"right":return this.columnsToRenderRight;default:return this.columnsToRenderCenter}}getHeadersToRender(e,t){let n;switch(e){case"left":n=this.rowsOfHeadersToRenderLeft[t];break;case"right":n=this.rowsOfHeadersToRenderRight[t];break;default:n=this.rowsOfHeadersToRenderCenter[t];break}return n??[]}extractViewportColumns(){const e=this.visibleCols.centerCols;this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()||F1e(e)?!0:this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,n=t+e.getActualWidth(),i=this.viewportLeft-200,r=this.viewportRight+200,o=t<i&&n<i,s=t>r&&n>r;return!o&&!s}getViewportColumns(){const{leftCols:e,rightCols:t}=this.visibleCols;return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.colModel.colSpanActive)return this.colsWithinViewport;const t=o=>{const s=o.getLeft();return Dn(s)&&s>this.viewportLeft},n=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),{visibleCols:i}=this,r=i.centerCols;return i.getColsForRow(e,r,n,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventSvc.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}calculateHeaderRows(){const{leftCols:e,rightCols:t}=this.visibleCols;this.columnsToRenderLeft=e,this.columnsToRenderRight=t,this.columnsToRenderCenter=this.colsWithinViewport;const n=i=>{const r=new Set,o={};for(const s of i){let a=s.getParent();const d=s.isSpanHeaderHeight();for(;a&&!r.has(a);){if(d&&a.isPadding()){a=a.getParent();continue}const m=a.getProvidedColumnGroup().getLevel();o[m]??(o[m]=[]),o[m].push(a),r.add(a),a=a.getParent()}}return o};this.rowsOfHeadersToRenderLeft=n(e),this.rowsOfHeadersToRenderRight=n(t),this.rowsOfHeadersToRenderCenter=n(this.headerColsWithinViewport)}extractViewport(){const e=i=>`${i.getId()}-${i.getPinned()||"normal"}`;this.extractViewportColumns();const t=this.getViewportColumns().map(e).join("#"),n=this.colsWithinViewportHash!==t;return n&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),n}};function F1e(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}var M1e=class extends Yt{constructor(){super(...arguments),this.beanName="agCompUtils"}adaptFunction(e,t){if(!e.cellRenderer)return null;class n{refresh(){return!1}getGui(){return this.eGui}init(r){const o=t(r),s=typeof o;if(s==="string"||s==="number"||s==="boolean"){this.eGui=xF("<span>"+o+"</span>");return}if(o==null){this.eGui=_h({tag:"span"});return}this.eGui=o}}return n}},I1e={moduleName:"CellRendererFunction",version:Fn,beans:[M1e]},L1e=class extends c0e{constructor(){super(...arguments),this.agGridDefaults={},this.agGridDefaultOverrides={},this.jsComps={},this.selectors={},this.icons={}}postConstruct(){const e=this.gos.get("components");if(e!=null)for(const t of Object.keys(e))this.jsComps[t]=e[t]}registerModule(e){const{icons:t,userComponents:n,dynamicBeans:i,selectors:r}=e;if(n){const o=(s,a,d,h)=>{this.agGridDefaults[s]=a,(d||h)&&(this.agGridDefaultOverrides[s]={params:d,processParams:h})};for(const s of Object.keys(n)){let a=n[s];if(Jye(a)&&(a=a.getComp(this.beans)),typeof a=="object"){const{classImp:d,params:h,processParams:m}=a;o(s,d,h,m)}else o(s,a)}}this.registerDynamicBeans(i);for(const o of r??[])this.selectors[o.selector]=o;if(t)for(const o of Object.keys(t))this.icons[o]=t[o]}getUserComponent(e,t){var a;const n=(d,h,m,v)=>({componentFromFramework:h,component:d,params:m,processParams:v}),{frameworkOverrides:i}=this.beans,r=i.frameworkComponent(t,this.gos.get("components"));if(r!=null)return n(r,!0);const o=this.jsComps[t];if(o){const d=i.isFrameworkComponent(o);return n(o,d)}const s=this.agGridDefaults[t];if(s){const d=this.agGridDefaultOverrides[t];return n(s,!1,d==null?void 0:d.params,d==null?void 0:d.processParams)}return(a=this.beans.validation)==null||a.missingUserComponent(e,t,this.agGridDefaults,this.jsComps),null}getSelector(e){return this.selectors[e]}getIcon(e){return this.icons[e]}getDynamicError(e,t){var n;return t?Ip(279,{name:e}):((n=this.beans.validation)==null?void 0:n.missingDynamicBean(e))??Ip(256)}},O1e=23,z1e=class extends Yt{constructor(){super(...arguments),this.beanName="ctrlsSvc",this.params={},this.ready=!1,this.readyCallbacks=[]}postConstruct(){var e,t;this.addEventListener("ready",()=>{if(this.updateReady(),this.ready){for(const n of this.readyCallbacks)n(this.params);this.readyCallbacks.length=0}},((t=(e=this.beans.frameworkOverrides).runWhenReadyAsync)==null?void 0:t.call(e))??!1)}updateReady(){const e=Object.values(this.params);this.ready=e.length===O1e&&e.every(t=>(t==null?void 0:t.isAlive())??!1)}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{const n=this.readyCallbacks.indexOf(t);n>=0&&this.readyCallbacks.splice(n,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:n}=this.params;return[e,n,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}getScrollFeature(){return this.getGridBodyCtrl().scrollFeature}},N1e='.ag-aria-description-container{border:0;z-index:9999;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ag-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text}.ag-shake-left-to-right{animation-direction:alternate;animation-duration:.2s;animation-iteration-count:infinite;animation-name:ag-shake-left-to-right}@keyframes ag-shake-left-to-right{0%{padding-left:6px;padding-right:2px}to{padding-left:2px;padding-right:6px}}.ag-body-horizontal-scroll-viewport,.ag-body-vertical-scroll-viewport,.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:hidden;position:relative}.ag-viewport{position:relative}.ag-spanning-container{position:absolute;top:0;z-index:1}.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{overflow-x:auto;-ms-overflow-style:none!important;scrollbar-width:none!important;&::-webkit-scrollbar{display:none!important}}.ag-body-viewport{display:flex;overflow-x:hidden;&:where(.ag-layout-normal){overflow-y:auto;-webkit-overflow-scrolling:touch}}.ag-floating-bottom-container,.ag-floating-top-container,.ag-sticky-bottom-container,.ag-sticky-top-container{min-height:1px}.ag-center-cols-viewport{min-height:100%;width:100%}.ag-body-horizontal-scroll-viewport{overflow-x:scroll}.ag-body-vertical-scroll-viewport{overflow-y:scroll}.ag-body-container,.ag-body-horizontal-scroll-container,.ag-body-vertical-scroll-container,.ag-center-cols-container,.ag-floating-bottom-container,.ag-floating-bottom-full-width-container,.ag-floating-top-container,.ag-full-width-container,.ag-header-container,.ag-pinned-left-cols-container,.ag-pinned-right-cols-container,.ag-sticky-bottom-container,.ag-sticky-top-container{position:relative}.ag-floating-bottom-container,.ag-floating-top-container,.ag-header-container,.ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top,.ag-sticky-bottom-container,.ag-sticky-top-container{height:100%;white-space:nowrap}.ag-center-cols-container,.ag-pinned-right-cols-container{display:block}.ag-body-horizontal-scroll-container{height:100%}.ag-body-vertical-scroll-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container,.ag-full-width-container,.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{pointer-events:none;position:absolute;top:0}:where(.ag-ltr) .ag-floating-bottom-full-width-container,:where(.ag-ltr) .ag-floating-top-full-width-container,:where(.ag-ltr) .ag-full-width-container,:where(.ag-ltr) .ag-sticky-bottom-full-width-container,:where(.ag-ltr) .ag-sticky-top-full-width-container{left:0}:where(.ag-rtl) .ag-floating-bottom-full-width-container,:where(.ag-rtl) .ag-floating-top-full-width-container,:where(.ag-rtl) .ag-full-width-container,:where(.ag-rtl) .ag-sticky-bottom-full-width-container,:where(.ag-rtl) .ag-sticky-top-full-width-container{right:0}.ag-full-width-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container{display:inline-block;height:100%;overflow:hidden;width:100%}.ag-body{display:flex;flex:1 1 auto;flex-direction:row!important;min-height:0;position:relative}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:flex;min-height:0;min-width:0;position:relative;&:where(.ag-scrollbar-invisible){bottom:0;position:absolute;&:where(.ag-apple-scrollbar){opacity:0;transition:opacity .4s;visibility:hidden;&:where(.ag-scrollbar-scrolling,.ag-scrollbar-active){opacity:1;visibility:visible}}}}.ag-body-horizontal-scroll{width:100%;&:where(.ag-scrollbar-invisible){left:0;right:0}}.ag-body-vertical-scroll{height:100%;&:where(.ag-scrollbar-invisible){top:0;z-index:10}}:where(.ag-ltr) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){right:0}}:where(.ag-rtl) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){left:0}}.ag-force-vertical-scroll{overflow-y:scroll!important}.ag-horizontal-left-spacer,.ag-horizontal-right-spacer{height:100%;min-width:0;overflow-x:scroll;&:where(.ag-scroller-corner){overflow-x:hidden}}:where(.ag-row-animation) .ag-row{transition:transform .4s,top .4s,opacity .2s;&:where(.ag-after-created){transition:transform .4s,top .4s,height .4s,opacity .2s}}:where(.ag-row-animation.ag-prevent-animation) .ag-row{transition:none!important;&:where(.ag-row.ag-after-created){transition:none!important}}:where(.ag-row-no-animation) .ag-row{transition:none}.ag-row-loading{align-items:center;display:flex}.ag-row-position-absolute{position:absolute}.ag-row-position-relative{position:relative}.ag-full-width-row{overflow:hidden;pointer-events:all}.ag-row-inline-editing{z-index:1}.ag-row-dragging{z-index:2}.ag-stub-cell{align-items:center;display:flex}.ag-cell{display:inline-block;height:100%;position:absolute;white-space:nowrap;&:focus-visible{box-shadow:none}}.ag-cell-value{flex:1 1 auto}.ag-cell-value:not(.ag-allow-overflow),.ag-group-value{overflow:hidden;text-overflow:ellipsis}.ag-cell-wrap-text{white-space:normal;word-break:break-word}:where(.ag-cell) .ag-icon{display:inline-block;vertical-align:middle}.ag-floating-top{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-top:not(.ag-invisible)){border-bottom:var(--ag-pinned-row-border)}.ag-floating-bottom{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-bottom:not(.ag-invisible)){border-top:var(--ag-pinned-row-border)}.ag-sticky-bottom,.ag-sticky-top{background-color:var(--ag-data-background-color);display:flex;height:0;overflow:hidden;position:absolute;width:100%;z-index:1}.ag-opacity-zero{opacity:0!important}.ag-cell-label-container{align-items:center;display:flex;flex-direction:row-reverse;height:100%;justify-content:space-between;width:100%}:where(.ag-right-aligned-header){.ag-cell-label-container{flex-direction:row}.ag-header-cell-text{text-align:end}}.ag-column-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr){direction:ltr;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row}}:where(.ag-rtl){direction:rtl;text-align:right;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row-reverse}.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{display:block}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(180deg)}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(-180deg)}}:where(.ag-ltr) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-left:var(--ag-row-group-indent-size)}:where(.ag-rtl) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-right:var(--ag-row-group-indent-size)}:where(.ag-ltr) .ag-row-group-leaf-indent{margin-left:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}:where(.ag-rtl) .ag-row-group-leaf-indent{margin-right:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-value-change-delta{padding:0 2px}.ag-value-change-delta-up{color:var(--ag-value-change-delta-up-color)}.ag-value-change-delta-down{color:var(--ag-value-change-delta-down-color)}.ag-value-change-value{background-color:transparent;border-radius:1px;padding-left:1px;padding-right:1px;transition:background-color 1s}.ag-value-change-value-highlight{background-color:var(--ag-value-change-value-highlight-background-color);transition:background-color .1s}.ag-cell-data-changed{background-color:var(--ag-value-change-value-highlight-background-color)!important}.ag-cell-data-changed-animation{background-color:transparent}.ag-cell-highlight{background-color:var(--ag-range-selection-highlight-color)!important}.ag-row,.ag-spanned-row{color:var(--ag-cell-text-color);font-family:var(--ag-cell-font-family);font-size:var(--ag-data-font-size);white-space:nowrap;--ag-internal-content-line-height:calc(min(var(--ag-row-height), var(--ag-line-height, 1000px)) - var(--ag-internal-row-border-width, 1px) - 2px)}.ag-row{background-color:var(--ag-data-background-color);border-bottom:var(--ag-row-border);height:var(--ag-row-height);width:100%;&.ag-row-editing-invalid{background-color:var(--ag-full-row-edit-invalid-background-color)}}:where(.ag-body-vertical-content-no-gap>div>div>div,.ag-body-vertical-content-no-gap>div>div>div>div)>.ag-row-last{border-bottom-color:transparent}.ag-sticky-bottom{border-top:var(--ag-row-border);box-sizing:content-box!important}.ag-group-contracted,.ag-group-expanded{cursor:pointer}.ag-cell,.ag-full-width-row .ag-cell-wrapper.ag-row-group{border:1px solid transparent;line-height:var(--ag-internal-content-line-height);-webkit-font-smoothing:subpixel-antialiased}:where(.ag-ltr) .ag-cell{border-right:var(--ag-column-border)}:where(.ag-rtl) .ag-cell{border-left:var(--ag-column-border)}.ag-spanned-cell-wrapper{background-color:var(--ag-data-background-color);position:absolute}.ag-spanned-cell-wrapper>.ag-spanned-cell{display:block;position:relative}:where(.ag-ltr) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-right-color:transparent}:where(.ag-rtl) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-left-color:transparent}.ag-cell-wrapper{align-items:center;display:flex;>:where(:not(.ag-cell-value,.ag-group-value)){align-items:center;display:flex;height:var(--ag-internal-content-line-height)}&:where(.ag-row-group){align-items:flex-start}:where(.ag-full-width-row) &:where(.ag-row-group){align-items:center;height:100%}}:where(.ag-ltr) .ag-cell-wrapper{padding-left:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-rtl) .ag-cell-wrapper{padding-right:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-cell-wrap-text:not(.ag-cell-auto-height)) .ag-cell-wrapper{align-items:normal;height:100%;:where(.ag-cell-value){height:100%}}:where(.ag-ltr) .ag-row>.ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-row>.ag-cell-wrapper.ag-row-group{padding-right:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-cell-focus:not(.ag-cell-range-selected):focus-within,.ag-cell-range-single-cell,.ag-cell-range-single-cell.ag-cell-range-handle,.ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),.ag-context-menu-open .ag-full-width-row.ag-row-focus .ag-cell-wrapper.ag-row-group,.ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group{border:1px solid;border-color:var(--ag-range-selection-border-color);border-style:var(--ag-range-selection-border-style);outline:initial}.ag-full-width-row.ag-row-focus:focus{box-shadow:none}:where(.ag-ltr) .ag-group-contracted,:where(.ag-ltr) .ag-group-expanded,:where(.ag-ltr) .ag-row-drag,:where(.ag-ltr) .ag-selection-checkbox{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-contracted,:where(.ag-rtl) .ag-group-expanded,:where(.ag-rtl) .ag-row-drag,:where(.ag-rtl) .ag-selection-checkbox{margin-left:var(--ag-cell-widget-spacing)}.ag-drag-handle-disabled{opacity:.35;pointer-events:none}:where(.ag-ltr) .ag-group-child-count{margin-left:3px}:where(.ag-rtl) .ag-group-child-count{margin-right:3px}.ag-row-highlight-above:after,.ag-row-highlight-below:after,.ag-row-highlight-inside:after{background-color:var(--ag-row-drag-indicator-color);border-radius:calc(var(--ag-row-drag-indicator-width)/2);content:"";height:var(--ag-row-drag-indicator-width);pointer-events:none;position:absolute;width:calc(100% - 1px)}:where(.ag-ltr) .ag-row-highlight-above:after,:where(.ag-ltr) .ag-row-highlight-below:after,:where(.ag-ltr) .ag-row-highlight-inside:after{left:1px}:where(.ag-rtl) .ag-row-highlight-above:after,:where(.ag-rtl) .ag-row-highlight-below:after,:where(.ag-rtl) .ag-row-highlight-inside:after{right:1px}.ag-row-highlight-above:after{top:0}.ag-row-highlight-below:after{bottom:0}.ag-row-highlight-indent:after{display:block;width:auto}:where(.ag-ltr) .ag-row-highlight-indent:after{left:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size));right:1px}:where(.ag-rtl) .ag-row-highlight-indent:after{left:1px;right:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size))}.ag-row-highlight-inside:after{background-color:var(--ag-selected-row-background-color);border:1px solid var(--ag-range-selection-border-color);display:block;height:auto;inset:0;width:auto}.ag-body,.ag-floating-bottom,.ag-floating-top{background-color:var(--ag-data-background-color)}.ag-row-odd{background-color:var(--ag-odd-row-background-color)}.ag-row-selected:before{background-color:var(--ag-selected-row-background-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-full-width-row.ag-row-group:before,.ag-row-hover:not(.ag-full-width-row):before{background-color:var(--ag-row-hover-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-row-selected:before{background-color:var(--ag-row-hover-color);background-image:linear-gradient(var(--ag-selected-row-background-color),var(--ag-selected-row-background-color))}.ag-row.ag-full-width-row.ag-row-group>*{position:relative}.ag-column-hover{background-color:var(--ag-column-hover-color)}.ag-header-range-highlight{background-color:var(--ag-range-header-highlight-color)}.ag-right-aligned-cell{font-variant-numeric:tabular-nums}:where(.ag-ltr) .ag-right-aligned-cell{text-align:right}:where(.ag-rtl) .ag-right-aligned-cell{text-align:left}.ag-right-aligned-cell .ag-cell-value,.ag-right-aligned-cell .ag-group-value{margin-left:auto}:where(.ag-ltr) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-ltr) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level));padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}:where(.ag-rtl) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-rtl) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-row>.ag-cell-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-row-dragging{cursor:move;opacity:.5}.ag-details-row{background-color:var(--ag-data-background-color);padding:calc(var(--ag-spacing)*3.75)}.ag-layout-auto-height,.ag-layout-print{.ag-center-cols-container,.ag-center-cols-viewport{min-height:150px}}.ag-overlay-exporting-wrapper,.ag-overlay-loading-wrapper,.ag-overlay-modal-wrapper{background-color:var(--ag-modal-overlay-background-color)}.ag-skeleton-container{align-content:center;height:100%;width:100%}.ag-skeleton-effect{animation:ag-skeleton-loading 1.5s ease-in-out .5s infinite;background-color:var(--ag-row-loading-skeleton-effect-color);border-radius:.25rem;height:1em;width:100%}:where(.ag-ltr) .ag-right-aligned-cell .ag-skeleton-effect{margin-left:auto}:where(.ag-rtl) .ag-right-aligned-cell .ag-skeleton-effect{margin-right:auto}@keyframes ag-skeleton-loading{0%{background-color:var(--ag-row-loading-skeleton-effect-color)}50%{background-color:color-mix(in srgb,transparent,var(--ag-row-loading-skeleton-effect-color) 40%)}to{background-color:var(--ag-row-loading-skeleton-effect-color)}}.ag-loading{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-loading{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-loading{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-ltr) .ag-loading-icon{padding-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-loading-icon{padding-left:var(--ag-cell-widget-spacing)}.ag-icon-loading{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ag-header{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);color:var(--ag-header-text-color);display:flex;font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;white-space:nowrap;width:100%}.ag-header-row{height:var(--ag-header-height);position:absolute}.ag-floating-filter-button-button,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,:where(.ag-header-cell-sortable) .ag-header-cell-label,:where(.ag-header-group-cell-selectable) .ag-header-cell-comp-wrapper{cursor:pointer}:where(.ag-ltr) .ag-header-expand-icon{margin-left:4px}:where(.ag-rtl) .ag-header-expand-icon{margin-right:4px}.ag-header-row:where(:not(:first-child)){:where(.ag-header-cell:not(.ag-header-span-height.ag-header-span-total,.ag-header-parent-hidden),.ag-header-group-cell.ag-header-group-cell-with-group){border-top:var(--ag-header-row-border)}}.ag-header-row:where(:not(.ag-header-row-column-group)){overflow:hidden}:where(.ag-header.ag-header-allow-overflow) .ag-header-row{overflow:visible}.ag-header-cell{display:inline-flex;overflow:hidden}.ag-header-group-cell{contain:paint;display:flex}.ag-header-cell,.ag-header-group-cell{align-items:center;gap:var(--ag-cell-widget-spacing);height:100%;padding:0 var(--ag-cell-horizontal-padding);position:absolute}@property --ag-internal-moving-color{syntax:"<color>";inherits:false;initial-value:transparent}@property --ag-internal-hover-color{syntax:"<color>";inherits:false;initial-value:transparent}.ag-header-cell:where(:not(.ag-floating-filter)),.ag-header-group-cell{&:before{background-image:linear-gradient(var(--ag-internal-hover-color),var(--ag-internal-hover-color)),linear-gradient(var(--ag-internal-moving-color),var(--ag-internal-moving-color));content:"";inset:0;position:absolute;--ag-internal-moving-color:transparent;--ag-internal-hover-color:transparent;transition:--ag-internal-moving-color var(--ag-header-cell-background-transition-duration),--ag-internal-hover-color var(--ag-header-cell-background-transition-duration)}&:where(:hover):before{--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}&:where(.ag-header-cell-moving):before{--ag-internal-moving-color:var(--ag-header-cell-moving-background-color);--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}}:where(.ag-header-cell:not(.ag-floating-filter) *,.ag-header-group-cell *){position:relative;z-index:1}.ag-header-cell-menu-button:where(:not(.ag-header-menu-always-show)){opacity:0;transition:opacity .2s}.ag-header-cell-filter-button,:where(.ag-header-cell.ag-header-active) .ag-header-cell-menu-button{opacity:1}.ag-header-cell-label,.ag-header-group-cell-label{align-items:center;align-self:stretch;display:flex;flex:1 1 auto;overflow:hidden;padding:5px 0}:where(.ag-ltr) .ag-sort-indicator-icon{padding-left:var(--ag-spacing)}:where(.ag-rtl) .ag-sort-indicator-icon{padding-right:var(--ag-spacing)}.ag-header-cell-label{text-overflow:ellipsis}.ag-header-group-cell-label.ag-sticky-label{flex:none;max-width:100%;overflow:visible;position:sticky}:where(.ag-ltr) .ag-header-group-cell-label.ag-sticky-label{left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-header-group-cell-label.ag-sticky-label{right:var(--ag-cell-horizontal-padding)}.ag-header-cell-text,.ag-header-group-text{overflow:hidden;text-overflow:ellipsis}.ag-header-cell-text{word-break:break-word}.ag-header-cell-comp-wrapper{width:100%}:where(.ag-header-group-cell) .ag-header-cell-comp-wrapper{display:flex}:where(.ag-header-cell:not(.ag-header-cell-auto-height)) .ag-header-cell-comp-wrapper{align-items:center;display:flex;height:100%}.ag-header-cell-wrap-text .ag-header-cell-comp-wrapper{white-space:normal}.ag-header-cell-comp-wrapper-limited-height>*{overflow:hidden}:where(.ag-right-aligned-header) .ag-header-cell-label{flex-direction:row-reverse}:where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-col-ref{color:var(--ag-subtle-text-color)}}:where(.ag-ltr) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-col-ref{margin-right:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-col-ref{margin-left:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-header-cell.ag-right-aligned-header){.ag-header-col-ref{color:var(--ag-subtle-text-color)}}:where(.ag-ltr) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-col-ref{margin-left:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-col-ref{margin-right:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-header-cell:after,.ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{content:"";height:var(--ag-header-column-border-height);position:absolute;top:calc(50% - var(--ag-header-column-border-height)*.5);z-index:1}:where(.ag-ltr) .ag-header-cell:after,:where(.ag-ltr) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-right:var(--ag-header-column-border);right:0}:where(.ag-rtl) .ag-header-cell:after,:where(.ag-rtl) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-left:var(--ag-header-column-border);left:0}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-column-drag-indicator-color);border-radius:calc(var(--ag-column-drag-indicator-width)/2);content:"";height:100%;position:absolute;top:0;width:var(--ag-column-drag-indicator-width)}:where(.ag-ltr) .ag-header-highlight-before:after{left:0}:where(.ag-rtl) .ag-header-highlight-before:after{right:0}:where(.ag-ltr) .ag-header-highlight-after:after{right:0;:where(.ag-pinned-left-header) &{right:1px}}:where(.ag-rtl) .ag-header-highlight-after:after{left:0;:where(.ag-pinned-left-header) &{left:1px}}.ag-header-cell-resize{align-items:center;cursor:ew-resize;display:flex;height:100%;position:absolute;top:0;width:8px;z-index:2;&:after{background-color:var(--ag-header-column-resize-handle-color);content:"";height:var(--ag-header-column-resize-handle-height);position:absolute;top:calc(50% - var(--ag-header-column-resize-handle-height)*.5);width:var(--ag-header-column-resize-handle-width);z-index:1}}:where(.ag-ltr) .ag-header-cell-resize{right:-3px;&:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-rtl) .ag-header-cell-resize{left:-3px;&:after{right:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-header-cell.ag-header-span-height) .ag-header-cell-resize:after{height:calc(100% - var(--ag-spacing)*4);top:calc(var(--ag-spacing)*2)}.ag-header-group-cell-no-group:where(.ag-header-span-height){display:none}.ag-sort-indicator-container{display:flex;gap:var(--ag-spacing)}.ag-layout-print{&.ag-body{display:block;height:unset}&.ag-root-wrapper{display:inline-block}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:none}&.ag-force-vertical-scroll{overflow-y:visible!important}}@media print{.ag-root-wrapper.ag-layout-print{display:table;.ag-body-horizontal-scroll-viewport,.ag-body-viewport,.ag-center-cols-container,.ag-center-cols-viewport,.ag-root,.ag-root-wrapper-body,.ag-virtual-list-viewport{display:block!important;height:auto!important;overflow:hidden!important}.ag-cell,.ag-row{-moz-column-break-inside:avoid;break-inside:avoid}}}ag-grid,ag-grid-angular{display:block}.ag-root-wrapper{border:var(--ag-wrapper-border);border-radius:var(--ag-wrapper-border-radius);display:flex;flex-direction:column;overflow:hidden;position:relative;&.ag-layout-normal{height:100%}}.ag-root-wrapper-body{display:flex;flex-direction:row;&.ag-layout-normal{flex:1 1 auto;height:0;min-height:0}}.ag-root{display:flex;flex-direction:column;position:relative;&.ag-layout-auto-height,&.ag-layout-normal{flex:1 1 auto;overflow:hidden;width:0}&.ag-layout-normal{height:100%}}.ag-drag-handle{color:var(--ag-drag-handle-color);cursor:grab;:where(.ag-icon){color:var(--ag-drag-handle-color)}}.ag-chart-menu-icon,.ag-chart-settings-next,.ag-chart-settings-prev,.ag-column-group-icons,.ag-column-select-header-icon,.ag-filter-toolpanel-expand,.ag-floating-filter-button-button,.ag-group-title-bar-icon,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,.ag-panel-title-bar-button-icon,.ag-set-filter-group-icons,:where(.ag-group-contracted) .ag-icon,:where(.ag-group-expanded) .ag-icon{background-color:var(--ag-icon-button-background-color);border-radius:var(--ag-icon-button-border-radius);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-background-color);color:var(--ag-icon-button-color);&:hover{background-color:var(--ag-icon-button-hover-background-color);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-hover-background-color);color:var(--ag-icon-button-hover-color)}}:where(.ag-filter-active,.ag-filter-toolpanel-group-instance-header-icon,.ag-filter-toolpanel-instance-header-icon){position:relative;&:after{background-color:var(--ag-icon-button-active-indicator-color);border-radius:50%;content:"";height:6px;position:absolute;top:-1px;width:6px}}:where(.ag-ltr) :where(.ag-filter-active,.ag-filter-toolpanel-group-instance-header-icon,.ag-filter-toolpanel-instance-header-icon){&:after{right:-1px}}:where(.ag-rtl) :where(.ag-filter-active,.ag-filter-toolpanel-group-instance-header-icon,.ag-filter-toolpanel-instance-header-icon){&:after{left:-1px}}.ag-filter-active{background-image:linear-gradient(var(--ag-icon-button-active-background-color),var(--ag-icon-button-active-background-color));border-radius:1px;outline:solid var(--ag-icon-button-background-spread) var(--ag-icon-button-active-background-color);:where(.ag-icon-filter){clip-path:path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z");color:var(--ag-icon-button-active-color)}}.ag-menu{background-color:var(--ag-menu-background-color);border:var(--ag-menu-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-menu-shadow);color:var(--ag-menu-text-color);max-height:100%;overflow-y:auto;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}',B1e={wrapperBorder:!0,rowBorder:!0,headerRowBorder:!0,footerRowBorder:{ref:"rowBorder"},columnBorder:{style:"solid",width:1,color:"transparent"},headerColumnBorder:!1,headerColumnBorderHeight:"100%",pinnedColumnBorder:!0,pinnedRowBorder:!0,sidePanelBorder:!0,sideBarPanelWidth:250,sideBarBackgroundColor:{ref:"chromeBackgroundColor"},sideButtonBarBackgroundColor:{ref:"sideBarBackgroundColor"},sideButtonBarTopPadding:0,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineColor:"transparent",sideButtonSelectedUnderlineTransitionDuration:0,sideButtonBackgroundColor:"transparent",sideButtonTextColor:{ref:"textColor"},sideButtonHoverBackgroundColor:{ref:"sideButtonBackgroundColor"},sideButtonHoverTextColor:{ref:"sideButtonTextColor"},sideButtonSelectedBackgroundColor:Bc,sideButtonSelectedTextColor:{ref:"sideButtonTextColor"},sideButtonBorder:"solid 1px transparent",sideButtonSelectedBorder:!0,sideButtonLeftPadding:{ref:"spacing"},sideButtonRightPadding:{ref:"spacing"},sideButtonVerticalPadding:{calc:"spacing * 3"},headerBackgroundColor:{ref:"chromeBackgroundColor"},headerFontFamily:{ref:"fontFamily"},cellFontFamily:{ref:"fontFamily"},headerFontWeight:500,headerFontSize:{ref:"fontSize"},dataFontSize:{ref:"fontSize"},headerTextColor:{ref:"textColor"},headerCellHoverBackgroundColor:"transparent",headerCellMovingBackgroundColor:{ref:"headerCellHoverBackgroundColor"},headerCellBackgroundTransitionDuration:"0.2s",cellTextColor:{ref:"textColor"},rangeSelectionBorderStyle:"solid",rangeSelectionBorderColor:Zg,rangeSelectionBackgroundColor:Cp(.2),rangeSelectionChartBackgroundColor:"#0058FF1A",rangeSelectionChartCategoryBackgroundColor:"#00FF841A",rangeSelectionHighlightColor:Cp(.5),rangeHeaderHighlightColor:Vve(.08),rowNumbersSelectedColor:Cp(.5),rowHoverColor:Cp(.08),columnHoverColor:Cp(.05),selectedRowBackgroundColor:Cp(.12),modalOverlayBackgroundColor:{ref:"backgroundColor",mix:.66},dataBackgroundColor:Bc,oddRowBackgroundColor:{ref:"dataBackgroundColor"},wrapperBorderRadius:8,cellHorizontalPadding:{calc:"spacing * 2 * cellHorizontalPaddingScale"},cellWidgetSpacing:{calc:"spacing * 1.5"},cellHorizontalPaddingScale:1,rowGroupIndentSize:{calc:"cellWidgetSpacing + iconSize"},valueChangeDeltaUpColor:"#43a047",valueChangeDeltaDownColor:"#e53935",valueChangeValueHighlightBackgroundColor:"#16a08580",rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.25 * rowVerticalPaddingScale"},rowVerticalPaddingScale:1,headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4 * headerVerticalPaddingScale"},headerVerticalPaddingScale:1,paginationPanelHeight:{ref:"rowHeight",calc:"max(rowHeight, 22px)"},dragHandleColor:ch(.7),headerColumnResizeHandleHeight:"30%",headerColumnResizeHandleWidth:2,headerColumnResizeHandleColor:{ref:"borderColor"},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 1.5"},widgetHorizontalSpacing:{calc:"spacing * 1.5"},widgetVerticalSpacing:{ref:"spacing"},iconButtonColor:{ref:"iconColor"},iconButtonBackgroundColor:"transparent",iconButtonBackgroundSpread:4,iconButtonBorderRadius:1,iconButtonHoverColor:{ref:"iconButtonColor"},iconButtonHoverBackgroundColor:ch(.1),iconButtonActiveColor:Zg,iconButtonActiveBackgroundColor:Cp(.28),iconButtonActiveIndicatorColor:Zg,menuBorder:{color:ch(.2)},menuBackgroundColor:fh(.03),menuTextColor:fh(.95),menuShadow:{ref:"popupShadow"},menuSeparatorColor:{ref:"borderColor"},setFilterIndentSize:{ref:"iconSize"},chartMenuPanelWidth:260,chartMenuLabelColor:ch(.8),dialogShadow:{ref:"popupShadow"},cellEditingBorder:{color:Zg},cellEditingShadow:{ref:"cardShadow"},fullRowEditInvalidBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.25},dialogBorder:{color:ch(.2)},panelBackgroundColor:Bc,panelTitleBarHeight:{ref:"headerHeight"},panelTitleBarBackgroundColor:{ref:"headerBackgroundColor"},panelTitleBarIconColor:{ref:"headerTextColor"},panelTitleBarTextColor:{ref:"headerTextColor"},panelTitleBarFontWeight:{ref:"headerFontWeight"},panelTitleBarBorder:!0,columnSelectIndentSize:{ref:"iconSize"},toolPanelSeparatorBorder:!0,columnDropCellBackgroundColor:ch(.07),columnDropCellTextColor:{ref:"textColor"},columnDropCellDragHandleColor:{ref:"textColor"},columnDropCellBorder:{color:ch(.13)},selectCellBackgroundColor:ch(.07),selectCellBorder:{color:ch(.13)},advancedFilterBuilderButtonBarBorder:!0,advancedFilterBuilderIndentSize:{calc:"spacing * 2 + iconSize"},advancedFilterBuilderJoinPillColor:"#f08e8d",advancedFilterBuilderColumnPillColor:"#a6e194",advancedFilterBuilderOptionPillColor:"#f3c08b",advancedFilterBuilderValuePillColor:"#85c0e4",filterPanelApplyButtonColor:Bc,filterPanelApplyButtonBackgroundColor:Zg,filterPanelCardSubtleColor:{ref:"textColor",mix:.7},filterPanelCardSubtleHoverColor:{ref:"textColor"},findMatchColor:_b,findMatchBackgroundColor:"#ffff00",findActiveMatchColor:_b,findActiveMatchBackgroundColor:"#ffa500",filterToolPanelGroupIndent:{ref:"spacing"},rowLoadingSkeletonEffectColor:ch(.15),statusBarLabelColor:_b,statusBarLabelFontWeight:500,statusBarValueColor:_b,statusBarValueFontWeight:500,pinnedSourceRowTextColor:{ref:"textColor"},pinnedSourceRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedSourceRowFontWeight:600,pinnedRowFontWeight:600,pinnedRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedRowTextColor:{ref:"textColor"},rowDragIndicatorColor:{ref:"rangeSelectionBorderColor"},rowDragIndicatorWidth:2,columnDragIndicatorColor:{ref:"accentColor"},columnDragIndicatorWidth:2},G1e=".ag-cell-batch-edit{background-color:var(--ag-cell-batch-edit-background-color);color:var(--ag-cell-batch-edit-text-color);display:inherit}.ag-row-batch-edit{background-color:var(--ag-row-batch-edit-background-color);color:var(--ag-row-batch-edit-text-color)}",PH={cellBatchEditBackgroundColor:"rgba(220 181 139 / 16%)",cellBatchEditTextColor:"#422f00",rowBatchEditBackgroundColor:{ref:"cellBatchEditBackgroundColor"},rowBatchEditTextColor:{ref:"cellBatchEditTextColor"}},j1e={...PH,cellBatchEditTextColor:"#f3d0b3"},H1e=()=>Gp({feature:"batchEditStyle",params:PH,css:G1e}),V1e=H1e(),$1e=":where(.ag-button){background:none;border:none;color:inherit;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0;text-indent:inherit;text-shadow:inherit;text-transform:inherit;word-spacing:inherit;&:disabled{cursor:default}&:focus-visible{box-shadow:var(--ag-focus-shadow);outline:none}}.ag-standard-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--ag-button-background-color);border:var(--ag-button-border);border-radius:var(--ag-button-border-radius);color:var(--ag-button-text-color);cursor:pointer;font-weight:var(--ag-button-font-weight);padding:var(--ag-button-vertical-padding) var(--ag-button-horizontal-padding);&:hover{background-color:var(--ag-button-hover-background-color);border:var(--ag-button-hover-border);color:var(--ag-button-hover-text-color)}&:active{background-color:var(--ag-button-active-background-color);border:var(--ag-button-active-border);color:var(--ag-button-active-text-color)}&:disabled{background-color:var(--ag-button-disabled-background-color);border:var(--ag-button-disabled-border);color:var(--ag-button-disabled-text-color)}}",W1e={buttonTextColor:"inherit",buttonFontWeight:"normal",buttonBackgroundColor:"transparent",buttonBorder:!1,buttonBorderRadius:{ref:"borderRadius"},buttonHorizontalPadding:{calc:"spacing * 2"},buttonVerticalPadding:{ref:"spacing"},buttonHoverTextColor:{ref:"buttonTextColor"},buttonHoverBackgroundColor:{ref:"buttonBackgroundColor"},buttonHoverBorder:{ref:"buttonBorder"},buttonActiveTextColor:{ref:"buttonHoverTextColor"},buttonActiveBackgroundColor:{ref:"buttonHoverBackgroundColor"},buttonActiveBorder:{ref:"buttonHoverBorder"},buttonDisabledTextColor:{ref:"inputDisabledTextColor"},buttonDisabledBackgroundColor:{ref:"inputDisabledBackgroundColor"},buttonDisabledBorder:{ref:"inputDisabledBorder"}},U1e=()=>Gp({feature:"buttonStyle",params:{...W1e,buttonBackgroundColor:Bc,buttonBorder:!0,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBorder:{color:Zg}},css:$1e}),q1e=U1e(),K1e=".ag-column-drop-vertical-empty-message{align-items:center;border:dashed var(--ag-border-width);border-color:var(--ag-border-color);display:flex;inset:0;justify-content:center;margin:calc(var(--ag-spacing)*1.5) calc(var(--ag-spacing)*2);overflow:hidden;padding:calc(var(--ag-spacing)*2);position:absolute}",Z1e=()=>Gp({feature:"columnDropStyle",css:K1e}),DH=Z1e(),Y1e={warn:(...e)=>{an(e[0],e[1])},error:(...e)=>{Do(e[0],e[1])},preInitErr:(...e)=>{ww(e[0],e[2],e[1])}},X1e=()=>e0e(Y1e).withParams(B1e).withPart(q1e).withPart(DH).withPart(V1e),J1e='.ag-checkbox-input-wrapper,.ag-radio-button-input-wrapper{background-color:var(--ag-checkbox-unchecked-background-color);border:solid var(--ag-checkbox-border-width) var(--ag-checkbox-unchecked-border-color);flex:none;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);:where(input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-icon-size);margin:0;opacity:0;width:var(--ag-icon-size)}&:after{content:"";display:block;inset:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;pointer-events:none;position:absolute}&:where(.ag-checked){background-color:var(--ag-checkbox-checked-background-color);border-color:var(--ag-checkbox-checked-border-color);&:after{background-color:var(--ag-checkbox-checked-shape-color)}}&:where(:focus-within,:active){box-shadow:var(--ag-focus-shadow)}&:where(.ag-disabled){filter:grayscale();opacity:.5}}.ag-checkbox-input-wrapper{border-radius:var(--ag-checkbox-border-radius);&:where(.ag-checked):after{-webkit-mask-image:var(--ag-checkbox-checked-shape-image);mask-image:var(--ag-checkbox-checked-shape-image)}&:where(.ag-indeterminate){background-color:var(--ag-checkbox-indeterminate-background-color);border-color:var(--ag-checkbox-indeterminate-border-color);&:after{background-color:var(--ag-checkbox-indeterminate-shape-color);-webkit-mask-image:var(--ag-checkbox-indeterminate-shape-image);mask-image:var(--ag-checkbox-indeterminate-shape-image)}}}.ag-cell-editing-error .ag-checkbox-input-wrapper:focus-within{box-shadow:var(--ag-focus-error-shadow)}.ag-radio-button-input-wrapper{border-radius:100%;&:where(.ag-checked):after{-webkit-mask-image:var(--ag-radio-checked-shape-image);mask-image:var(--ag-radio-checked-shape-image)}}',Q1e=()=>Gp({feature:"checkboxStyle",params:{checkboxBorderWidth:1,checkboxBorderRadius:{ref:"borderRadius"},checkboxUncheckedBackgroundColor:Bc,checkboxUncheckedBorderColor:fh(.3),checkboxCheckedBackgroundColor:Zg,checkboxCheckedBorderColor:{ref:"checkboxCheckedBackgroundColor"},checkboxCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="7" fill="none"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M1 3.5 3.5 6l5-5"/></svg>'},checkboxCheckedShapeColor:Bc,checkboxIndeterminateBackgroundColor:fh(.3),checkboxIndeterminateBorderColor:{ref:"checkboxIndeterminateBackgroundColor"},checkboxIndeterminateShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" fill="none"><rect width="10" height="2" fill="#000" rx="1"/></svg>'},checkboxIndeterminateShapeColor:Bc,radioCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" fill="none"><circle cx="3" cy="3" r="3" fill="#000"/></svg>'}},css:J1e}),eCe=Q1e(),FH=()=>({...IS,...j1e,backgroundColor:"hsl(217, 0%, 17%)",foregroundColor:"#FFF",chromeBackgroundColor:fh(.05),rowHoverColor:Cp(.15),selectedRowBackgroundColor:Cp(.2),menuBackgroundColor:fh(.1),browserColorScheme:"dark",popupShadow:"0 0px 20px #000A",cardShadow:"0 1px 4px 1px #000A",advancedFilterBuilderJoinPillColor:"#7a3a37",advancedFilterBuilderColumnPillColor:"#355f2d",advancedFilterBuilderOptionPillColor:"#5a3168",advancedFilterBuilderValuePillColor:"#374c86",filterPanelApplyButtonColor:_b,findMatchColor:Bc,findActiveMatchColor:Bc,checkboxUncheckedBorderColor:fh(.4),toggleButtonOffBackgroundColor:fh(.4),rowBatchEditBackgroundColor:fh(.1)}),tCe=()=>({...FH(),backgroundColor:"#1f2836"}),nCe=()=>Gp({feature:"colorScheme",params:IS,modeParams:{light:IS,dark:FH(),"dark-blue":tCe()}}),iCe=nCe(),MH={aggregation:'<path d="M18 7V4H6l6 8-6 8h12v-3"/>',arrows:'<polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="15 19 12 22 9 19"/><polyline points="19 9 22 12 19 15"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/>',asc:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',cancel:'<path d="m18 6-12 12"/><path d="m6 6 12 12"/>',chart:'<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>',"color-picker":'<path d="m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"/><path d="m5 2 5 5"/><path d="M2 13h15"/><path d="M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"/>',columns:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>',contracted:'<path d="m9 18 6-6-6-6"/>',copy:'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>',cross:'<path d="M18 6 6 18"/><path d="m6 6 12 12"/>',csv:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',cut:'<circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/>',desc:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',down:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',excel:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',expanded:'<path d="m15 18-6-6 6-6"/>',eye:'<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>',"eye-slash":'<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>',filter:'<path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/>',first:'<path d="m17 18-6-6 6-6"/><path d="M7 6v12"/>',grip:'<circle cx="5" cy="8" r="0.5"/><circle cx="12" cy="8" r="0.5"/><circle cx="19" cy="8" r="0.5"/><circle cx="5" cy="16" r="0.5"/><circle cx="12" cy="16" r="0.5"/><circle cx="19" cy="16" r="0.5"/><g stroke="none" fill="currentColor"><circle cx="5" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="19" cy="8" r="1"/><circle cx="5" cy="16" r="1"/><circle cx="12" cy="16" r="1"/><circle cx="19" cy="16" r="1"/></g>',group:'<path d="M16 12H3"/><path d="M16 18H3"/><path d="M10 6H3"/><path d="M21 18V8a2 2 0 0 0-2-2h-5"/><path d="m16 8-2-2 2-2"/>',last:'<path d="m7 18 6-6-6-6"/><path d="M17 6v12"/>',left:'<path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>',linked:'<path d="M9 17H7A5 5 0 0 1 7 7h2"/><path d="M15 7h2a5 5 0 1 1 0 10h-2"/><line x1="8" x2="16" y1="12" y2="12"/>',loading:'<line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>',maximize:'<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/>',menu:'<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>',"menu-alt":'<circle cx="12" cy="5" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="12" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="19" r="0.75" fill="#D9D9D9"/>',minimize:'<polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/>',minus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>',next:'<path d="m9 18 6-6-6-6"/>',none:'<path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/>',"not-allowed":'<circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/>',paste:'<path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/>',pin:'<line x1="12" x2="12" y1="17" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/>',pivot:'<path d="M15 3v18"/><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M21 9H3"/><path d="M21 15H3"/>',plus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>',previous:'<path d="m15 18-6-6 6-6"/>',right:'<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',save:'<path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/>',settings:'<path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/>',"small-left":'<path d="m15 18-6-6 6-6"/>',"small-right":'<path d="m9 18 6-6-6-6"/>',tick:'<path d="M20 6 9 17l-5-5"/>',"tree-closed":'<path d="m9 18 6-6-6-6"/>',"tree-indeterminate":'<path d="M5 12h14"/>',"tree-open":'<path d="m6 9 6 6 6-6"/>',unlinked:'<path d="M9 17H7A5 5 0 0 1 7 7"/><path d="M15 7h2a5 5 0 0 1 4 8"/><line x1="8" x2="12" y1="12" y2="12"/><line x1="2" x2="22" y1="2" y2="22"/>',up:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>'},IH={aasc:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.2012 8.07928C13.6346 8.0793 14.0128 8.15365 14.3359 8.30193C14.6609 8.45018 14.9141 8.65595 15.0947 8.9201C15.2754 9.18439 15.3683 9.49109 15.374 9.83904H14.1904C14.1676 9.60898 14.0695 9.4303 13.8965 9.30291C13.7235 9.1756 13.4889 9.1115 13.1924 9.1115C12.9909 9.1115 12.8204 9.1404 12.6816 9.19744C12.543 9.25255 12.4364 9.32917 12.3623 9.42791C12.2901 9.52678 12.2539 9.63933 12.2539 9.76482C12.2501 9.8692 12.272 9.9604 12.3193 10.0383C12.3688 10.1162 12.4369 10.1843 12.5225 10.2414C12.6079 10.2964 12.7064 10.3451 12.8184 10.3869C12.9304 10.4268 13.0505 10.4609 13.1777 10.4894L13.7031 10.6144C13.9578 10.6715 14.1914 10.7479 14.4043 10.8429C14.6173 10.938 14.8021 11.0547 14.958 11.1935C15.1138 11.3323 15.2348 11.4957 15.3203 11.6838C15.4077 11.8719 15.4522 12.088 15.4541 12.3312C15.4522 12.6885 15.3611 12.9986 15.1807 13.2609C15.0019 13.5214 14.7427 13.7248 14.4043 13.8693C14.0678 14.0118 13.6617 14.0832 13.1865 14.0832C12.7153 14.0832 12.3048 14.0107 11.9551 13.8664C11.6071 13.7219 11.3345 13.5071 11.1387 13.2238C10.9449 12.9387 10.8435 12.5862 10.834 12.1662H12.0283C12.0416 12.362 12.0984 12.5252 12.1973 12.6564C12.298 12.7857 12.4323 12.8838 12.5996 12.9504C12.7688 13.0149 12.96 13.047 13.1729 13.047C13.3817 13.047 13.563 13.0169 13.7168 12.9562C13.8727 12.8954 13.9935 12.8106 14.0791 12.7023C14.1647 12.5939 14.208 12.469 14.208 12.3283C14.2079 12.1974 14.1686 12.0875 14.0908 11.9982C14.0148 11.9089 13.9022 11.8324 13.7539 11.7697C13.6076 11.707 13.4276 11.6501 13.2148 11.5988L12.5791 11.4387C12.0869 11.3189 11.6982 11.1318 11.4131 10.8771C11.128 10.6224 10.9855 10.2793 10.9873 9.84783C10.9854 9.49418 11.0804 9.18439 11.2705 8.9201C11.4625 8.65603 11.7261 8.45015 12.0605 8.30193C12.3951 8.15369 12.7754 8.07928 13.2012 8.07928Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M5.8125 14.0002H4.48926L4.05664 12.6681H1.94824L1.51465 14.0002H0.19043L2.20703 8.15935H3.79883L5.8125 14.0002ZM2.26172 11.7043H3.74316L3.02539 9.49334H2.98047L2.26172 11.7043Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M8.45215 8.15935C8.88165 8.15935 9.24031 8.22251 9.52734 8.34978C9.81445 8.47717 10.0303 8.65477 10.1748 8.88103C10.3192 9.10536 10.3916 9.36368 10.3916 9.65642C10.3916 9.88452 10.3461 10.085 10.2549 10.258C10.1637 10.4289 10.0384 10.5696 9.87891 10.6799C9.72117 10.7882 9.54024 10.8657 9.33691 10.9113V10.9679C9.55917 10.9775 9.76716 11.0406 9.96094 11.1564C10.1568 11.2724 10.3158 11.4356 10.4375 11.6447C10.5591 11.8519 10.6201 12.099 10.6201 12.3859C10.6201 12.6958 10.5427 12.9727 10.3887 13.216C10.2366 13.4573 10.0113 13.6486 9.71289 13.7892C9.41443 13.9299 9.04655 14.0002 8.60938 14.0002H6.11426V8.15935H8.45215ZM7.34863 12.9904H8.35547C8.69943 12.9904 8.95057 12.9252 9.1084 12.7941C9.26621 12.661 9.34473 12.4834 9.34473 12.2629C9.34468 12.1014 9.30643 11.9587 9.22852 11.8351C9.15056 11.7116 9.03903 11.6145 8.89453 11.5441C8.75195 11.4738 8.58148 11.4387 8.38379 11.4387H7.34863V12.9904ZM7.34863 10.6037H8.26465C8.43369 10.6036 8.58376 10.5737 8.71484 10.5148C8.84793 10.454 8.95227 10.3683 9.02832 10.258C9.10628 10.1477 9.14551 10.0155 9.14551 9.8615C9.14546 9.65055 9.07008 9.48001 8.91992 9.35076C8.77165 9.22169 8.56064 9.15741 8.28711 9.1574H7.34863V10.6037Z" fill="black"/><path d="M7.16602 0.377127C7.44584 0.189493 7.82551 0.20905 8.08496 0.442557L11.418 3.44256C11.7257 3.71966 11.7507 4.19428 11.4736 4.50213C11.1966 4.80961 10.7228 4.83441 10.415 4.55779L7.60938 2.03338L5.11328 4.53045C4.82042 4.82326 4.34562 4.82322 4.05273 4.53045C3.75986 4.23757 3.75989 3.7628 4.05273 3.4699L7.05273 0.4699L7.16602 0.377127Z" fill="black"/></svg>',adesc:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.3867 11.4697C10.6796 11.1771 11.1544 11.1769 11.4473 11.4697C11.7399 11.7626 11.7399 12.2374 11.4473 12.5303L8.44727 15.5303L8.33398 15.623C8.05425 15.8106 7.67449 15.7909 7.41504 15.5576L4.08203 12.5576C3.77415 12.2805 3.74927 11.8059 4.02637 11.498C4.30342 11.1907 4.77722 11.1657 5.08496 11.4424L7.89062 13.9668L10.3867 11.4697Z" fill="black"/><path d="M13.2012 3.0791C13.6346 3.07912 14.0128 3.1535 14.3359 3.30176C14.6611 3.45006 14.9141 3.65661 15.0947 3.9209C15.2752 4.18513 15.3683 4.49104 15.374 4.83887H14.1904C14.1676 4.60882 14.0695 4.43012 13.8965 4.30273C13.7235 4.17546 13.4889 4.11133 13.1924 4.11133C12.9909 4.11133 12.8204 4.14023 12.6816 4.19727C12.5431 4.25236 12.4364 4.32902 12.3623 4.42773C12.2901 4.52659 12.2539 4.63919 12.2539 4.76465C12.2501 4.86901 12.272 4.96023 12.3193 5.03809C12.3688 5.11604 12.4369 5.18417 12.5225 5.24121C12.6079 5.29623 12.7064 5.34496 12.8184 5.38672C12.9304 5.42661 13.0505 5.46075 13.1777 5.48926L13.7031 5.61426C13.9578 5.67128 14.1914 5.74776 14.4043 5.84277C14.6172 5.93784 14.8021 6.05457 14.958 6.19336C15.1139 6.33216 15.2348 6.49633 15.3203 6.68457C15.4076 6.8727 15.4522 7.08885 15.4541 7.33203C15.4521 7.68929 15.3612 7.99944 15.1807 8.26172C15.0019 8.52216 14.7427 8.72465 14.4043 8.86914C14.0678 9.01165 13.6617 9.08301 13.1865 9.08301C12.7153 9.08299 12.3048 9.01057 11.9551 8.86621C11.6072 8.72173 11.3345 8.50786 11.1387 8.22461C10.9447 7.9394 10.8435 7.58622 10.834 7.16602H12.0283C12.0416 7.36176 12.0985 7.52509 12.1973 7.65625C12.298 7.78554 12.4323 7.88365 12.5996 7.9502C12.7688 8.01477 12.96 8.04785 13.1729 8.04785C13.3817 8.04781 13.5629 8.01678 13.7168 7.95605C13.8727 7.89522 13.9935 7.81051 14.0791 7.70215C14.1646 7.59387 14.2079 7.46965 14.208 7.3291C14.208 7.19796 14.1687 7.08739 14.0908 6.99805C14.0148 6.90868 13.9022 6.83228 13.7539 6.76953C13.6076 6.70685 13.4276 6.64993 13.2148 6.59863L12.5791 6.43848C12.0868 6.31871 11.6982 6.13163 11.4131 5.87695C11.1279 5.62221 10.9855 5.27916 10.9873 4.84766C10.9854 4.49404 11.0804 4.18517 11.2705 3.9209C11.4625 3.65661 11.7259 3.45006 12.0605 3.30176C12.3951 3.15353 12.7754 3.0791 13.2012 3.0791Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M5.8125 9H4.48926L4.05664 7.66797H1.94824L1.51465 9H0.19043L2.20703 3.15918H3.79883L5.8125 9ZM2.26172 6.7041H3.74316L3.02539 4.49414H2.98047L2.26172 6.7041Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M8.45215 3.15918C8.88181 3.15918 9.24025 3.22322 9.52734 3.35059C9.81445 3.47798 10.0303 3.6546 10.1748 3.88086C10.3193 4.10518 10.3916 4.36351 10.3916 4.65625C10.3916 4.88432 10.3461 5.08484 10.2549 5.25781C10.1636 5.4289 10.0386 5.57039 9.87891 5.68066C9.72118 5.78898 9.54022 5.86549 9.33691 5.91113V5.96875C9.55913 5.9783 9.76719 6.04044 9.96094 6.15625C10.1568 6.27223 10.3158 6.43538 10.4375 6.64453C10.5591 6.85173 10.6201 7.09875 10.6201 7.38574C10.6201 7.69567 10.5427 7.97245 10.3887 8.21582C10.2366 8.45719 10.0113 8.64841 9.71289 8.78906C9.41442 8.9297 9.04658 8.99999 8.60938 9H6.11426V3.15918H8.45215ZM7.34863 7.99023H8.35547C8.69948 7.99023 8.95057 7.92504 9.1084 7.79395C9.26621 7.66085 9.34473 7.48325 9.34473 7.2627C9.34466 7.10125 9.3064 6.95844 9.22852 6.83496C9.15056 6.71143 9.03899 6.61427 8.89453 6.54395C8.75196 6.47365 8.58145 6.43848 8.38379 6.43848H7.34863V7.99023ZM7.34863 5.60352H8.26465C8.43369 5.60347 8.58376 5.57354 8.71484 5.51465C8.84791 5.45381 8.95228 5.36807 9.02832 5.25781C9.10623 5.14755 9.14551 5.01529 9.14551 4.86133C9.14542 4.65046 9.07002 4.48078 8.91992 4.35156C8.77163 4.22228 8.56087 4.15724 8.28711 4.15723H7.34863V5.60352Z" fill="black"/></svg>',"chevron-down":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6L8 10L4 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-left":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 12L6 8L10 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-right":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-up":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 10L8 6L12 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"column-arrow":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 26C0 28.2092 1.79086 30 4 30H14C16.2091 30 18 28.2092 18 26V15H25.8786L24.4394 16.4393C23.8536 17.0251 23.8536 17.9749 24.4394 18.5607C25.0252 19.1464 25.9748 19.1464 26.5606 18.5607L30.5606 14.5607C31.1464 13.9749 31.1464 13.0251 30.5606 12.4393L26.5606 8.43934C25.9748 7.85356 25.0252 7.85356 24.4394 8.43934C23.8536 9.02512 23.8536 9.97488 24.4394 10.5607L25.8786 12H18V6C18 3.79086 16.2091 2 14 2H4C1.79086 2 0 3.79086 0 6V26ZM14 5H10.5V12H15V6C15 5.44772 14.5523 5 14 5ZM4 5H7.5V12H3V6C3 5.44772 3.44772 5 4 5ZM10.5 15H15V26C15 26.5522 14.5523 27 14 27H10.5V15ZM4 27H7.5V15H3V26C3 26.5522 3.44772 27 4 27Z" fill="currentColor"/></svg>',edit:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 10.6262V12.5012H5.375L10.905 6.97122L9.03 5.09622L3.5 10.6262ZM12.355 5.52122C12.4014 5.47497 12.4381 5.42002 12.4632 5.35953C12.4883 5.29905 12.5012 5.23421 12.5012 5.16872C12.5012 5.10324 12.4883 5.0384 12.4632 4.97791C12.4381 4.91742 12.4014 4.86248 12.355 4.81622L11.185 3.64622C11.1387 3.59987 11.0838 3.5631 11.0233 3.53801C10.9628 3.51291 10.898 3.5 10.8325 3.5C10.767 3.5 10.7022 3.51291 10.6417 3.53801C10.5812 3.5631 10.5263 3.59987 10.48 3.64622L9.565 4.56122L11.44 6.43622L12.355 5.52122Z" fill="currentColor"/></svg>',"filter-add":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.12126 7.75L10.8517 7.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M6.65934 11.748L9.32778 11.748" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M12.2943 1.04872V6.19184M14.9886 3.74341H9.68478" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M8.25488 3C8.04799 3.18323 7.91706 3.45099 7.91699 3.74902C7.91713 4.04868 8.04988 4.31681 8.25879 4.5H2C1.58579 4.5 1.25 4.16421 1.25 3.75C1.25 3.33579 1.58579 3 2 3H8.25488Z" fill="currentColor"/></svg>',"pinned-bottom":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M3.47 12.28A.75.75 0 0 1 4 11h8a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.53-.22ZM12.731 5.256a.75.75 0 0 1-.2.524l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06l2.72 2.72V2a.75.75 0 0 1 1.5 0v5.44l2.72-2.72a.75.75 0 0 1 1.26.536Z"/></svg>',"pinned-top":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M12.53 3.72A.75.75 0 0 1 12 5H4a.75.75 0 0 1 0-1.5h8a.75.75 0 0 1 .53.22ZM3.269 10.744a.75.75 0 0 1 .2-.524l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 1 1-1.06 1.06L8.75 8.56V14a.75.75 0 0 1-1.5 0V8.56l-2.72 2.72a.75.75 0 0 1-1.26-.536Z"/></svg>',"small-down":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 10.667 16 21.334l8.667-10.667H7.334Z"/></svg>',"small-up":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 21.333 16 10.666l8.667 10.667H7.334Z"/></svg>',"un-pin":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M8 11a.75.75 0 0 0-.75.75v3.333a.75.75 0 1 0 1.5 0V11.75A.75.75 0 0 0 8 11Z"/><path fill="currentColor" d="M13.11 1.436a.75.75 0 0 0-1.22-.872l-10 14a.75.75 0 1 0 1.22.872L5.207 12.5h7.376a.75.75 0 0 0 .75-.75v-1.174a2.08 2.08 0 0 0-1.153-1.863l-1.185-.599-.005-.002a.58.58 0 0 1-.323-.522V5.165a2.083 2.083 0 0 0 1.854-2.904l.589-.825Zm-3.943 5.52v.634a2.08 2.08 0 0 0 1.153 1.863l1.185.6.005.002a.58.58 0 0 1 .323.522V11H6.28l2.887-4.044ZM9.277 1H5.25a2.084 2.084 0 0 0-.083 4.165v1.676l1.5-2.132v-.292a.75.75 0 0 0-.75-.75H5.25a.584.584 0 0 1 0-1.167h2.972L9.277 1Z"/></svg>'},rCe=(e={})=>{let t="";for(const n of[...Object.keys(MH),...Object.keys(IH)]){const i=oCe(n,e.strokeWidth);t+=`.ag-icon-${n}::before { mask-image: url('data:image/svg+xml,${encodeURIComponent(i)}'); }
`}return t},oCe=(e,t=1.5)=>{const n=IH[e];if(n)return n;const i=MH[e];if(!i)throw new Error(`Missing icon data for ${e}`);return`<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="black" stroke-width="${t}" viewBox="0 0 24 24"><style>* { vector-effect: non-scaling-stroke; }</style>`+i+"</svg>"},sCe=(e={})=>Gp({feature:"iconSet",css:()=>rCe(e)}),aCe=sCe(),lCe=':where(.ag-input-field-input[type=number]:not(.ag-number-field-input-stepper)){-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}}.ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);color:var(--ag-input-text-color);font-family:inherit;font-size:inherit;line-height:inherit;margin:0;min-height:var(--ag-input-height);padding:0;&:where(:disabled){background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}&:where(:focus){background-color:var(--ag-input-focus-background-color);border:var(--ag-input-focus-border);box-shadow:var(--ag-input-focus-shadow);color:var(--ag-input-focus-text-color);outline:none}&:where(:invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&::-moz-placeholder{color:var(--ag-input-placeholder-text-color)}&::placeholder{color:var(--ag-input-placeholder-text-color)}}:where(.ag-ltr) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-left:var(--ag-input-padding-start)}:where(.ag-rtl) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-right:var(--ag-input-padding-start)}:where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select,.ag-floating-filter-search-icon){.ag-input-wrapper:before{background-color:currentcolor;color:var(--ag-input-icon-color);content:"";display:block;height:12px;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;opacity:.5;position:absolute;width:12px}}:where(.ag-ltr) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select,.ag-floating-filter-search-icon){.ag-input-wrapper:before{margin-left:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)}}:where(.ag-rtl) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select,.ag-floating-filter-search-icon){.ag-input-wrapper:before{margin-right:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)}}',uCe=".ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){&:focus{box-shadow:var(--ag-focus-shadow);&:where(.invalid),&:where(:invalid){box-shadow:var(--ag-focus-error-shadow)}}}",cCe={inputBackgroundColor:"transparent",inputBorder:!1,inputBorderRadius:0,inputTextColor:{ref:"textColor"},inputPlaceholderTextColor:{ref:"inputTextColor",mix:.5},inputPaddingStart:0,inputHeight:{calc:"max(iconSize, fontSize) + spacing * 2"},inputFocusBackgroundColor:{ref:"inputBackgroundColor"},inputFocusBorder:{ref:"inputBorder"},inputFocusShadow:"none",inputFocusTextColor:{ref:"inputTextColor"},inputDisabledBackgroundColor:{ref:"inputBackgroundColor"},inputDisabledBorder:{ref:"inputBorder"},inputDisabledTextColor:{ref:"inputTextColor"},inputInvalidBackgroundColor:{ref:"inputBackgroundColor"},inputInvalidBorder:{ref:"inputBorder"},inputInvalidTextColor:{ref:"inputTextColor"},inputIconColor:{ref:"inputTextColor"},pickerButtonBorder:!1,pickerButtonFocusBorder:{ref:"inputFocusBorder"},pickerButtonBackgroundColor:{ref:"backgroundColor"},pickerButtonFocusBackgroundColor:{ref:"backgroundColor"},pickerListBorder:!1,pickerListBackgroundColor:{ref:"backgroundColor"},colorPickerThumbSize:18,colorPickerTrackSize:12,colorPickerThumbBorderWidth:3,colorPickerTrackBorderRadius:12,colorPickerColorBorderRadius:4},dCe=()=>Gp({feature:"inputStyle",params:{...cCe,inputBackgroundColor:Bc,inputBorder:!0,inputBorderRadius:{ref:"borderRadius"},inputPaddingStart:{ref:"spacing"},inputFocusBorder:{color:Zg},inputFocusShadow:{ref:"focusShadow"},inputDisabledBackgroundColor:fh(.06),inputDisabledTextColor:{ref:"textColor",mix:.5},inputInvalidBorder:{color:{ref:"invalidColor"}},pickerButtonBorder:!0,pickerListBorder:!0},css:()=>lCe+uCe}),hCe=dCe(),fCe='.ag-tabs-header{background-color:var(--ag-tab-bar-background-color);border-bottom:var(--ag-tab-bar-border);display:flex;flex:1;gap:var(--ag-tab-spacing);padding:var(--ag-tab-bar-top-padding) var(--ag-tab-bar-horizontal-padding) 0}.ag-tabs-header-wrapper{display:flex}.ag-tabs-close-button-wrapper{align-items:center;border:0;display:flex;padding:var(--ag-spacing)}:where(.ag-ltr) .ag-tabs-close-button-wrapper{border-right:solid var(--ag-border-width) var(--ag-border-color)}:where(.ag-rtl) .ag-tabs-close-button-wrapper{border-left:solid var(--ag-border-width) var(--ag-border-color)}.ag-tabs-close-button{background-color:unset;border:0;cursor:pointer;padding:0}.ag-tab{align-items:center;background-color:var(--ag-tab-background-color);border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;color:var(--ag-tab-text-color);cursor:pointer;display:flex;flex:1;justify-content:center;padding:var(--ag-tab-top-padding) var(--ag-tab-horizontal-padding) var(--ag-tab-bottom-padding);position:relative;&:hover{background-color:var(--ag-tab-hover-background-color);color:var(--ag-tab-hover-text-color)}&.ag-tab-selected{background-color:var(--ag-tab-selected-background-color);color:var(--ag-tab-selected-text-color)}&:after{background-color:var(--ag-tab-selected-underline-color);bottom:0;content:"";display:block;height:var(--ag-tab-selected-underline-width);left:0;opacity:0;position:absolute;right:0;transition:opacity var(--ag-tab-selected-underline-transition-duration)}&.ag-tab-selected:after{opacity:1}}:where(.ag-ltr) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-left-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-right-color:var(--ag-tab-selected-border-color)}}}:where(.ag-rtl) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-right-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-left-color:var(--ag-tab-selected-border-color)}}}',pCe={tabBarBackgroundColor:"transparent",tabBarHorizontalPadding:0,tabBarTopPadding:0,tabBackgroundColor:"transparent",tabTextColor:{ref:"textColor"},tabHorizontalPadding:{ref:"spacing"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:"0",tabHoverBackgroundColor:{ref:"tabBackgroundColor"},tabHoverTextColor:{ref:"tabTextColor"},tabSelectedBackgroundColor:{ref:"tabBackgroundColor"},tabSelectedTextColor:{ref:"tabTextColor"},tabSelectedBorderWidth:{ref:"borderWidth"},tabSelectedBorderColor:"transparent",tabSelectedUnderlineColor:"transparent",tabSelectedUnderlineWidth:0,tabSelectedUnderlineTransitionDuration:0,tabBarBorder:!1},gCe=()=>Gp({feature:"tabStyle",params:{...pCe,tabBarBorder:!0,tabBarBackgroundColor:ch(.05),tabTextColor:{ref:"textColor",mix:.7},tabSelectedTextColor:{ref:"textColor"},tabHoverTextColor:{ref:"textColor"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:Bc},css:fCe}),mCe=gCe(),yCe=()=>X1e().withPart(eCe).withPart(iCe).withPart(aCe).withPart(mCe).withPart(hCe).withPart(DH).withParams({fontFamily:[{googleFont:"IBM Plex Sans"},"-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu"]}),vCe=yCe(),bCe={cssName:"--ag-cell-horizontal-padding",changeKey:"cellHorizontalPaddingChanged",defaultValue:16},xCe={cssName:"--ag-indentation-level",changeKey:"indentationLevelChanged",defaultValue:0,noWarn:!0,cacheDefault:!0},wCe={cssName:"--ag-row-group-indent-size",changeKey:"rowGroupIndentSizeChanged",defaultValue:0},i6={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},r6={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},KA={cssName:"--ag-row-border",changeKey:"rowBorderWidthChanged",defaultValue:1,border:!0},o6={cssName:"--ag-pinned-row-border",changeKey:"pinnedRowBorderWidthChanged",defaultValue:1,border:!0};function CCe(e,t){for(const n of t.sort((i,r)=>i.moduleName.localeCompare(r.moduleName))){const i=n.css;i&&e.set(`module-${n.moduleName}`,i)}}var _Ce=class extends l0e{initVariables(){this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.getSizeEl(i6),this.getSizeEl(r6),this.getSizeEl(KA),this.getSizeEl(o6),this.refreshRowBorderWidthVariable()}getPinnedRowBorderWidth(){return this.getCSSVariablePixelValue(o6)}getRowBorderWidth(){return this.getCSSVariablePixelValue(KA)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(i6)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(r6)}getDefaultCellHorizontalPadding(){return this.getCSSVariablePixelValue(bCe)}getCellPaddingLeft(){const e=this.getDefaultCellHorizontalPadding(),t=this.getCSSVariablePixelValue(xCe),n=this.getCSSVariablePixelValue(wCe);return e-1+n*t}getCellPadding(){const e=this.getDefaultCellHorizontalPadding()-1;return this.getCellPaddingLeft()+e}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}refreshRowHeightVariable(){const{eRootDiv:e}=this,t=e.style.getPropertyValue("--ag-line-height").trim(),n=this.gos.get("rowHeight");if(n==null||isNaN(n)||!isFinite(n))return t!==null&&e.style.setProperty("--ag-line-height",null),-1;const i=`${n}px`;return t!=i?(e.style.setProperty("--ag-line-height",i),n):t!=""?Number.parseFloat(t):-1}fireStylesChangedEvent(e){e==="rowBorderWidthChanged"&&this.refreshRowBorderWidthVariable(),super.fireStylesChangedEvent(e)}refreshRowBorderWidthVariable(){const e=this.getCSSVariablePixelValue(KA);this.eRootDiv.style.setProperty("--ag-internal-row-border-width",`${e}px`)}postProcessThemeChange(e,t){e&&getComputedStyle(this.getMeasurementContainer()).getPropertyValue("--ag-legacy-styles-loaded")&&Do(t?106:239)}getAdditionalCss(){const e=new Map;return e.set("core",[N1e]),CCe(e,Array.from(xme())),e}getDefaultTheme(){return vCe}varError(e){an(9,{variable:e})}themeError(e){Do(240,{theme:e})}shadowRootError(){Do(293)}},SCe=class extends d0e{postConstruct(){const{globalListener:e,globalSyncListener:t}=this.beans;e&&this.addGlobalListener(e,!0),t&&this.addGlobalListener(t,!1)}};function LH(e,t,n){const i=e.visibleCols.headerGroupRowCount;if(n>=i)return{column:t,headerRowIndex:n};let r=t.getParent();for(;r&&r.getProvidedColumnGroup().getLevel()>n;)r=r.getParent();const o=t.isSpanHeaderHeight();return!r||o&&r.isPadding()?{column:t,headerRowIndex:i}:{column:r,headerRowIndex:r.getProvidedColumnGroup().getLevel()}}var ECe=class extends Yt{constructor(){super(...arguments),this.beanName="headerNavigation",this.currentHeaderRowWithoutSpan=-1}postConstruct(){const e=this.beans;e.ctrlsSvc.whenReady(this,n=>{this.gridBodyCon=n.gridBodyCtrl});const t=Il(e);this.addManagedElementListeners(t,{mousedown:()=>{this.currentHeaderRowWithoutSpan=-1}})}getHeaderPositionForColumn(e,t){let n;const{colModel:i,colGroupSvc:r,ctrlsSvc:o}=this.beans;if(typeof e=="string"?(n=i.getCol(e),n||(n=(r==null?void 0:r.getColumnGroup(e))??null)):n=e,!n)return null;const s=o.getHeaderRowContainerCtrl(),a=s==null?void 0:s.getAllCtrls(),d=Wo(a||[]).type==="filter",h=Pp(this.beans)-1;let m=-1,v=n;for(;v;)m++,v=v.getParent();let w=m;return t&&d&&w===h-1&&w++,w===-1?null:{headerRowIndex:w,column:n}}navigateVertically(e,t){const{focusSvc:n,visibleCols:i}=this.beans,{focusedHeader:r}=n;if(!r)return!1;const{headerRowIndex:o}=r,s=r.column,a=Pp(this.beans),d=this.getHeaderRowType(o),h=i.headerGroupRowCount;let{headerRowIndex:m,column:v,headerRowIndexWithoutSpan:w}=e==="UP"?RCe(d,s,o):ACe(s,o,h),R=!1;return m<0&&(m=0,v=s,R=!0),m>=a?(m=-1,this.currentHeaderRowWithoutSpan=-1):w!==void 0&&(this.currentHeaderRowWithoutSpan=w),!R&&!v?!1:n.focusHeaderPosition({headerPosition:{headerRowIndex:m,column:v},allowUserOverride:!0,event:t})}navigateHorizontally(e,t=!1,n){const{focusSvc:i,gos:r}=this.beans,o={...i.focusedHeader};let s,a;this.currentHeaderRowWithoutSpan!==-1?o.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=o.headerRowIndex,e==="LEFT"!==r.get("enableRtl")?(a="Before",s=this.findHeader(o,a)):(a="After",s=this.findHeader(o,a));const d=r.getCallback("tabToNextHeader");if(t&&d){const h=i.focusHeaderPositionFromUserFunc({userFunc:d,headerPosition:s,direction:a});if(h){const{headerRowIndex:m}=i.focusedHeader||{};m!=null&&m!=o.headerRowIndex&&(this.currentHeaderRowWithoutSpan=m)}return h}return s||!t?i.focusHeaderPosition({headerPosition:s,direction:a,fromTab:t,allowUserOverride:!0,event:n}):this.focusNextHeaderRow(o,a,n)}focusNextHeaderRow(e,t,n){const i=this.beans,r=e.headerRowIndex;let o=null,s;const a=Pp(i),d=this.beans.visibleCols.allCols;if(t==="Before"){if(r<=0)return!1;o=Wo(d),s=r-1,this.currentHeaderRowWithoutSpan-=1}else o=d[0],s=r+1,this.currentHeaderRowWithoutSpan<a?this.currentHeaderRowWithoutSpan+=1:this.currentHeaderRowWithoutSpan=-1;let{column:h,headerRowIndex:m}=LH(this.beans,o,s);return m>=a&&(m=-1),i.focusSvc.focusHeaderPosition({headerPosition:{column:h,headerRowIndex:m},direction:t,fromTab:!0,allowUserOverride:!0,event:n})}scrollToColumn(e,t="After"){if(e.getPinned())return;let n;if(Sa(e)){const i=e.getDisplayedLeafColumns();n=t==="Before"?Wo(i):i[0]}else n=e;this.gridBodyCon.scrollFeature.ensureColumnVisible(n)}findHeader(e,t){const{colGroupSvc:n,visibleCols:i}=this.beans;let r=e.column;if(r instanceof h1){const d=r.getDisplayedLeafColumns();r=t==="Before"?d[0]:d[d.length-1]}const o=t==="Before"?i.getColBefore(r):i.getColAfter(r);if(!o)return;const s=i.headerGroupRowCount;if(e.headerRowIndex>=s)return{headerRowIndex:e.headerRowIndex,column:o};const a=n==null?void 0:n.getColGroupAtLevel(o,e.headerRowIndex);return a?a.isPadding()&&o.isSpanHeaderHeight()?{headerRowIndex:i.headerGroupRowCount,column:o}:{headerRowIndex:e.headerRowIndex,column:a??o}:{headerRowIndex:o instanceof S0&&o.isSpanHeaderHeight()?i.headerGroupRowCount:e.headerRowIndex,column:o}}getHeaderRowType(e){const t=this.beans.ctrlsSvc.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}};function RCe(e,t,n){const i=n-1;if(e!=="filter"){const r=t instanceof S0&&t.isSpanHeaderHeight();let o=t.getParent();for(;o&&(o.getProvidedColumnGroup().getLevel()>i||r&&o.isPadding());)o=o.getParent();if(o)return r?{column:o,headerRowIndex:o.getProvidedColumnGroup().getLevel(),headerRowIndexWithoutSpan:i}:{column:o,headerRowIndex:i,headerRowIndexWithoutSpan:i}}return{column:t,headerRowIndex:i,headerRowIndexWithoutSpan:i}}function ACe(e,t,n){const i=t+1,r={column:e,headerRowIndex:i,headerRowIndexWithoutSpan:i};if(e instanceof h1){if(i>=n)return{column:e.getDisplayedLeafColumns()[0],headerRowIndex:n,headerRowIndexWithoutSpan:i};let s=e.getDisplayedChildren()[0];if(s instanceof h1&&s.isPadding()){const d=s.getDisplayedLeafColumns()[0];d.isSpanHeaderHeight()&&(s=d)}r.column=s,s instanceof S0&&s.isSpanHeaderHeight()&&(r.headerRowIndex=n,r.headerRowIndexWithoutSpan=i)}return r}var TCe=class extends Yt{constructor(){super(...arguments),this.beanName="focusSvc",this.focusFallbackTimeout=null,this.needsFocusRestored=!1}wireBeans(e){this.colModel=e.colModel,this.visibleCols=e.visibleCols,this.rowRenderer=e.rowRenderer,this.navigation=e.navigation,this.filterManager=e.filterManager,this.overlays=e.overlays}postConstruct(){const e=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:e,columnRowGroupChanged:e}),this.addDestroyFunc(uve(this.beans))}attemptToRecoverFocus(){this.needsFocusRestored=!0,this.focusFallbackTimeout!=null&&clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=window.setTimeout(this.setFocusRecovered.bind(this),100)}setFocusRecovered(){this.needsFocusRestored=!1,this.focusFallbackTimeout!=null&&(clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=null)}shouldTakeFocus(){return this.gos.get("suppressFocusAfterRefresh")?(this.setFocusRecovered(),!1):this.needsFocusRestored?(this.setFocusRecovered(),!0):this.doesRowOrCellHaveBrowserFocus()}onColumnEverythingChanged(){if(!this.focusedCell)return;const e=this.focusedCell.column,t=this.colModel.getCol(e.getId());e!==t&&this.clearFocusedCell()}getFocusCellToUseAfterRefresh(){const{gos:e,focusedCell:t}=this;return e.get("suppressFocusAfterRefresh")||e.get("suppressCellFocus")||!t||!this.doesRowOrCellHaveBrowserFocus()?null:t}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeader||!this.isDomDataPresentInHierarchy(Os(this.beans),vH)?null:this.focusedHeader}doesRowOrCellHaveBrowserFocus(){const e=Os(this.beans);return this.isDomDataPresentInHierarchy(e,LS)?!0:this.isDomDataPresentInHierarchy(e,OS)}isDomDataPresentInHierarchy(e,t){let n=e;for(;n;){if(o7(this.gos,n,t))return!0;n=n.parentNode}return!1}getFocusedCell(){return this.focusedCell}getFocusEventParams(e){const{rowIndex:t,rowPinned:n,column:i}=e,r={rowIndex:t,rowPinned:n,column:i,isFullWidthCell:!1},o=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:n});return o&&(r.isFullWidthCell=o.isFullWidth()),r}clearFocusedCell(){if(this.focusedCell==null)return;const e=this.getFocusEventParams(this.focusedCell);this.focusedCell=null,this.eventSvc.dispatchEvent({type:"cellFocusCleared",...e})}setFocusedCell(e){this.setFocusRecovered();const{column:t,rowIndex:n,rowPinned:i,forceBrowserFocus:r=!1,preventScrollOnBrowserFocus:o=!1,sourceEvent:s}=e,a=this.colModel.getCol(t);if(!a){this.focusedCell=null;return}this.focusedCell={rowIndex:n,rowPinned:nm(i),column:a};const d=this.getFocusEventParams(this.focusedCell);this.eventSvc.dispatchEvent({type:"cellFocused",...d,...this.previousCellFocusParams&&{previousParams:this.previousCellFocusParams},forceBrowserFocus:r,preventScrollOnBrowserFocus:o,sourceEvent:s}),this.previousCellFocusParams=d}isCellFocused(e){return this.focusedCell==null?!1:qF(e,this.focusedCell)}isHeaderWrapperFocused(e){if(this.focusedHeader==null)return!1;const{column:t,rowCtrl:{rowIndex:n,pinned:i}}=e,{column:r,headerRowIndex:o}=this.focusedHeader;return t===r&&n===o&&i==r.getPinned()}focusHeaderPosition(e){var h;if(this.setFocusRecovered(),r0(this.beans))return!1;const{direction:t,fromTab:n,allowUserOverride:i,event:r,fromCell:o,rowWithoutSpanValue:s,scroll:a=!0}=e;let{headerPosition:d}=e;if(o&&((h=this.filterManager)!=null&&h.isAdvFilterHeaderActive()))return this.focusAdvancedFilter(d);if(i){const m=this.focusedHeader,v=Pp(this.beans);if(n){const w=this.gos.getCallback("tabToNextHeader");w&&(d=this.getHeaderPositionFromUserFunc({userFunc:w,direction:t,currentPosition:m,headerPosition:d,headerRowCount:v}))}else{const w=this.gos.getCallback("navigateToNextHeader");if(w&&r){const R={key:r.key,previousHeaderPosition:m,nextHeaderPosition:d,headerRowCount:v,event:r};d=w(R)}}}return d?this.focusProvidedHeaderPosition({headerPosition:d,direction:t,event:r,fromCell:o,rowWithoutSpanValue:s,scroll:a}):!1}focusHeaderPositionFromUserFunc(e){if(r0(this.beans))return!1;const{userFunc:t,headerPosition:n,direction:i,event:r}=e,o=this.focusedHeader,s=Pp(this.beans),a=this.getHeaderPositionFromUserFunc({userFunc:t,direction:i,currentPosition:o,headerPosition:n,headerRowCount:s});return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:i,event:r})}getHeaderPositionFromUserFunc(e){const{userFunc:t,direction:n,currentPosition:i,headerPosition:r,headerRowCount:o}=e,a=t({backwards:n==="Before",previousHeaderPosition:i,nextHeaderPosition:r,headerRowCount:o});return a===!0?i:a===!1?null:a}focusProvidedHeaderPosition(e){const{headerPosition:t,direction:n,fromCell:i,rowWithoutSpanValue:r,event:o,scroll:s=!0}=e,{column:a,headerRowIndex:d}=t,{filterManager:h,ctrlsSvc:m,headerNavigation:v}=this.beans;if(this.focusedHeader&&zbe(e.headerPosition,this.focusedHeader))return!1;if(d===-1)return h!=null&&h.isAdvFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView({column:a,event:o});s&&(v==null||v.scrollToColumn(a,n));const w=m.getHeaderRowContainerCtrl(a.getPinned()),R=(w==null?void 0:w.focusHeader(t.headerRowIndex,a,o))||!1;return v&&R&&(r!=null||i)&&(v.currentHeaderRowWithoutSpan=r??-1),R}focusFirstHeader(){var n;if((n=this.overlays)!=null&&n.exclusive&&this.focusOverlay())return!0;const e=this.visibleCols.allCols[0];if(!e)return!1;const t=LH(this.beans,e,0);return this.focusHeaderPosition({headerPosition:t,rowWithoutSpanValue:0})}focusLastHeader(e){var i;if((i=this.overlays)!=null&&i.exclusive&&this.focusOverlay(!0))return!0;const t=Pp(this.beans)-1,n=Wo(this.visibleCols.allCols);return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:n},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){var t;return(t=this.filterManager)!=null&&t.isAdvFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCell}isRowFocused(e,t){return this.focusedCell==null?!1:this.focusedCell.rowIndex===e&&this.focusedCell.rowPinned===nm(t)}focusOverlay(e){var n,i;const t=((n=this.overlays)==null?void 0:n.isVisible())&&((i=this.overlays.eWrapper)==null?void 0:i.getGui());return!!t&&m0(t,e)}focusGridView(e){var o,s,a,d,h,m;const{backwards:t=!1,canFocusOverlay:n=!0,event:i}=e;if((o=this.overlays)!=null&&o.exclusive)return n&&this.focusOverlay(t);if(X2(this.beans))return t&&!r0(this.beans)?this.focusLastHeader():n&&this.focusOverlay(t)?!0:t?!1:sx(this.beans,t);const r=t?Tbe(this.beans):Abe(this.beans);if(r){const v=e.column??((s=this.focusedHeader)==null?void 0:s.column),{rowIndex:w,rowPinned:R}=r,L=gm(this.beans,r);if(!v||!L||w==null)return!1;if(v.isSuppressNavigable(L)){const O=this.gos.get("enableRtl");let z;return!i||i.key===kt.TAB?z=O?kt.LEFT:kt.RIGHT:z=i.key,(a=this.beans.navigation)==null||a.navigateToNextCell(null,z,{rowIndex:w,column:v,rowPinned:R||null},!0),!0}if((d=this.navigation)==null||d.ensureCellVisible({rowIndex:w,column:v,rowPinned:R}),t){const O=this.rowRenderer.getRowByPosition(r);if(O!=null&&O.isFullWidth()&&((h=this.navigation)!=null&&h.tryToFocusFullWidthRow(r,t)))return!0}return this.setFocusedCell({rowIndex:w,column:v,rowPinned:nm(R),forceBrowserFocus:!0}),(m=this.beans.rangeSvc)==null||m.setRangeToCell({rowIndex:w,rowPinned:R,column:v}),!0}return!!(n&&this.focusOverlay(t)||t&&this.focusLastHeader())}focusAdvancedFilter(e){var t;return this.advFilterFocusColumn=e==null?void 0:e.column,((t=this.beans.advancedFilter)==null?void 0:t.getCtrl().focusHeaderComp())??!1}focusNextFromAdvancedFilter(e,t){var i;const n=(t?void 0:this.advFilterFocusColumn)??((i=this.visibleCols.allCols)==null?void 0:i[0]);return e?this.focusHeaderPosition({headerPosition:{column:n,headerRowIndex:Pp(this.beans)-1}}):this.focusGridView({column:n})}clearAdvancedFilterColumn(){this.advFilterFocusColumn=void 0}},kCe=class extends Yt{constructor(){super(...arguments),this.beanName="scrollVisibleSvc"}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colAnimation=e.colAnimation}postConstruct(){this.horizontalScrollShowing=this.gos.get("alwaysShowHorizontalScroll")===!0,this.verticalScrollShowing=this.gos.get("alwaysShowVerticalScroll")===!0,this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.updateScrollVisible.bind(this),displayedColumnsWidthChanged:this.updateScrollVisible.bind(this)})}updateScrollVisible(){const{colAnimation:e}=this;e!=null&&e.isActive()?e.executeLaterVMTurn(()=>{e.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){var n;const e=this.ctrlsSvc.get("center");if(!e||(n=this.colAnimation)!=null&&n.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.verticalScrollShowing};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){const e=this.ctrlsSvc.get("center"),t=e.hasHorizontalScrollGap(),n=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==n)&&(this.horizontalScrollGap=t,this.verticalScrollGap=n,this.eventSvc.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventSvc.dispatchEvent({type:"scrollVisibilityChanged"}))}getScrollbarWidth(){if(this.scrollbarWidth==null){const e=this.gos.get("scrollbarWidth"),n=typeof e=="number"&&e>=0?e:sve();n!=null&&(this.scrollbarWidth=n,this.eventSvc.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},PCe=class extends Yt{constructor(){super(...arguments),this.beanName="gridDestroySvc",this.destroyCalled=!1}destroy(){var i;if(this.destroyCalled)return;const{stateSvc:e,ctrlsSvc:t,context:n}=this.beans;this.eventSvc.dispatchEvent({type:"gridPreDestroyed",state:(e==null?void 0:e.getState())??{}}),this.destroyCalled=!0,(i=t.get("gridCtrl"))==null||i.destroyGridUi(),n.destroy(),super.destroy()}},v_=new Set(["gridPreDestroyed","fillStart","pasteStart"]),DCe=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","pinnedRowsChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterUiChanged","filterOpened","floatingFilterUiChanged","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel","findChanged","rowResizeStarted","rowResizeEnded","columnsReset","bulkEditingStarted","bulkEditingStopped","batchEditingStarted","batchEditingStopped"],JF=DCe.reduce((e,t)=>(e[t]=Vme(t),e),{}),jb={agSetColumnFilter:"SetFilter",agSetColumnFloatingFilter:"SetFilter",agMultiColumnFilter:"MultiFilter",agMultiColumnFloatingFilter:"MultiFilter",agGroupColumnFilter:"GroupFilter",agGroupColumnFloatingFilter:"GroupFilter",agGroupCellRenderer:"GroupCellRenderer",agGroupRowRenderer:"GroupCellRenderer",agRichSelect:"RichSelect",agRichSelectCellEditor:"RichSelect",agDetailCellRenderer:"SharedMasterDetail",agSparklineCellRenderer:"Sparklines",agDragAndDropImage:"SharedDragAndDrop",agColumnHeader:"ColumnHeaderComp",agColumnGroupHeader:"ColumnGroupHeaderComp",agSortIndicator:"Sort",agAnimateShowChangeCellRenderer:"HighlightChanges",agAnimateSlideCellRenderer:"HighlightChanges",agLoadingCellRenderer:"LoadingCellRenderer",agSkeletonCellRenderer:"SkeletonCellRenderer",agCheckboxCellRenderer:"CheckboxCellRenderer",agLoadingOverlay:"Overlay",agExportingOverlay:"Overlay",agNoRowsOverlay:"Overlay",agNoMatchingRowsOverlay:"Overlay",agTooltipComponent:"Tooltip",agReadOnlyFloatingFilter:"CustomFilter",agTextColumnFilter:"TextFilter",agNumberColumnFilter:"NumberFilter",agDateColumnFilter:"DateFilter",agDateInput:"DateFilter",agTextColumnFloatingFilter:"TextFilter",agNumberColumnFloatingFilter:"NumberFilter",agDateColumnFloatingFilter:"DateFilter",agCellEditor:"TextEditor",agSelectCellEditor:"SelectEditor",agTextCellEditor:"TextEditor",agNumberCellEditor:"NumberEditor",agDateCellEditor:"DateEditor",agDateStringCellEditor:"DateEditor",agCheckboxCellEditor:"CheckboxEditor",agLargeTextCellEditor:"LargeTextEditor",agMenuItem:"MenuItem",agColumnsToolPanel:"ColumnsToolPanel",agFiltersToolPanel:"FiltersToolPanel",agNewFiltersToolPanel:"NewFiltersToolPanel",agAggregationComponent:"StatusBar",agSelectedRowCountComponent:"StatusBar",agTotalRowCountComponent:"StatusBar",agFilteredRowCountComponent:"StatusBar",agTotalAndFilteredRowCountComponent:"StatusBar",agFindCellRenderer:"Find"};function s6(e){return`"${e}"`}var FCe=()=>({checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."},rowGroupingHierarchy:{version:"34.3",message:"Use `colDef.groupHierarchy` instead."}}),MCe={allowFormula:"Formula",aggFunc:"SharedAggregation",autoHeight:"RowAutoHeight",cellClass:"CellStyle",cellClassRules:"CellStyle",cellEditor:({cellEditor:e,editable:t})=>t?typeof e=="string"?jb[e]??"CustomEditor":"CustomEditor":null,cellRenderer:({cellRenderer:e})=>typeof e!="string"?null:jb[e],cellStyle:"CellStyle",columnChooserParams:"ColumnMenu",contextMenuItems:"ContextMenu",dndSource:"DragAndDrop",dndSourceOnRowDrag:"DragAndDrop",editable:({editable:e,cellEditor:t})=>e&&!t?"TextEditor":null,enableCellChangeFlash:"HighlightChanges",enablePivot:"SharedPivot",enableRowGroup:"SharedRowGrouping",enableValue:"SharedAggregation",filter:({filter:e})=>e&&typeof e!="string"&&typeof e!="boolean"?"CustomFilter":typeof e=="string"?jb[e]??"ColumnFilter":"ColumnFilter",floatingFilter:"ColumnFilter",getQuickFilterText:"QuickFilter",headerTooltip:"Tooltip",headerTooltipValueGetter:"Tooltip",mainMenuItems:"ColumnMenu",menuTabs:e=>{var n;const t=["columnsMenuTab","generalMenuTab"];return(n=e.menuTabs)!=null&&n.some(i=>t.includes(i))?"ColumnMenu":null},pivot:"SharedPivot",pivotIndex:"SharedPivot",rowDrag:"RowDrag",rowGroup:"SharedRowGrouping",rowGroupIndex:"SharedRowGrouping",tooltipField:"Tooltip",tooltipValueGetter:"Tooltip",tooltipComponentSelector:"Tooltip",spanRows:"CellSpan",groupHierarchy:"SharedRowGrouping"},ICe=()=>({autoHeight:{supportedRowModels:["clientSide","serverSide"],validate:(t,{paginationAutoPageSize:n})=>n?"colDef.autoHeight is not supported with paginationAutoPageSize.":null},allowFormula:{supportedRowModels:["clientSide"]},cellRendererParams:{validate:t=>(t.rowGroup!=null||t.rowGroupIndex!=null||t.cellRenderer==="agGroupCellRenderer")&&"checkbox"in t.cellRendererParams?'Since v33.0, `cellRendererParams.checkbox` has been deprecated. Use `rowSelection.checkboxLocation = "autoGroupColumn"` instead.':null},flex:{validate:(t,n)=>n.autoSizeStrategy?"colDef.flex is not supported with gridOptions.autoSizeStrategy":null},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(t,{rowSelection:n})=>n==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(t,{rowSelection:n})=>n==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(t,{rowSelection:n})=>n==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerValueGetter:{validate:t=>{const n=t.headerValueGetter;return typeof n=="function"||typeof n=="string"?null:"headerValueGetter must be a function or a valid string expression"}},icons:{validate:({icons:t})=>{if(t){if(t.smallDown)return Ip(262);if(t.smallLeft)return Ip(263);if(t.smallRight)return Ip(264)}return null}},sort:{validate:t=>Ob(t.sort)||Py(t.sort)?null:`sort must be of type (SortDirection | SortDef), currently it is ${typeof t.sort=="object"?JSON.stringify(t.sort):l_(t.sort)}`},initialSort:{validate:t=>Ob(t.initialSort)||Py(t.initialSort)?null:`initialSort must be of non-null type (SortDirection | SortDef), currently it is ${typeof t.initialSort=="object"?JSON.stringify(t.initialSort):l_(t.initialSort)}`},sortingOrder:{validate:t=>{const n=t.sortingOrder;if(Array.isArray(n)&&n.length>0){const i=n.filter(r=>!(Ob(r)||Py(r)));if(i.length>0)return`sortingOrder must be an array of type non-null (SortDirection | SortDef)[], incorrect items are: [${i.map(r=>typeof r=="string"||r==null?l_(r):JSON.stringify(r)).join(", ")}]`}else if(!Array.isArray(n)||!n.length)return`sortingOrder must be an array with at least one element, currently it is [${n}]`;return null}},type:{validate:t=>{const n=t.type;return n instanceof Array?n.some(r=>typeof r!="string")?"if colDef.type is supplied an array it should be of type 'string[]'":null:typeof n=="string"?null:"colDef.type should be of type 'string' | 'string[]'"}},rowSpan:{validate:(t,{suppressRowTransform:n})=>n?null:"colDef.rowSpan requires suppressRowTransform to be enabled."},spanRows:{dependencies:{editable:{required:[!1,void 0]},rowDrag:{required:[!1,void 0]},colSpan:{required:[void 0]},rowSpan:{required:[void 0]}},validate:(t,{rowSelection:n,cellSelection:i,suppressRowTransform:r,enableCellSpan:o,rowDragEntireRow:s,enableCellTextSelection:a})=>typeof n=="object"&&(n==null?void 0:n.mode)==="singleRow"&&n!=null&&n.enableClickSelection?"colDef.spanRows is not supported with rowSelection.clickSelection":i?"colDef.spanRows is not supported with cellSelection.":r?"colDef.spanRows is not supported with suppressRowTransform.":o?s?"colDef.spanRows is not supported with rowDragEntireRow.":a?"colDef.spanRows is not supported with enableCellTextSelection.":null:"colDef.spanRows requires enableCellSpan to be enabled."},groupHierarchy:{validate(t,{groupHierarchyConfig:n={}},i){var s;const r=new Set(["year","quarter","month","formattedMonth","day","hour","minute","second"]),o=[];for(const a of t.groupHierarchy??[]){if(typeof a=="object"){(s=i.validation)==null||s.validateColDef(a);continue}!r.has(a)&&!(a in n)&&o.push(s6(a))}if(o.length>0){const a=`The following parts of colDef.groupHierarchy are not recognised: ${o.join(", ")}.`,d=`Choose one of ${[...r].map(s6).join(", ")}, or define your own parts in gridOptions.groupHierarchyConfig.`;return`${a}
${d}`}return null}}}),LCe={headerName:void 0,columnGroupShow:void 0,headerStyle:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,headerTooltipValueGetter:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,spanRows:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,tooltipComponentSelector:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0,dateComponent:void 0,dateComponentParams:void 0,getFindText:void 0,rowGroupingHierarchy:void 0,groupHierarchy:void 0,allowFormula:void 0},OCe=()=>Object.keys(LCe),zCe=()=>({objectName:"colDef",allProperties:OCe(),docsUrl:"column-properties/",deprecations:FCe(),validations:ICe()}),NCe=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","treeDataChildrenField","treeDataParentIdField","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","invalidEditValueMode","grandTotalRow","themeCssLayer","findSearchValue","styleNonce","renderingMode"],BCe=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","overlayComponentParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","activeOverlayParams","popupParent","themeStyleContainer","statusBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterParent","advancedFilterBuilderParams","advancedFilterParams","formulaDataSource","formulaFuncs","initialState","autoSizeStrategy","selectionColumnDef","findOptions","filterHandlers","groupHierarchyConfig"],GCe=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector","suppressOverlays"],OH=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns","rowDragInsertDelay"],jCe=["theme","rowSelection"],HCe=["cellSelection","sideBar","rowNumbers","suppressGroupChangesColumnVisibility","groupAggFiltering","suppressStickyTotalRow","groupHideParentOfSingleChild","enableRowPinning"],zH=["loadThemeGoogleFonts","suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","allowContextMenuWithControlKey","suppressContextMenu","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","enableCellSpan","suppressClickEdit","rowDragEntireRow","rowDragManaged","refreshAfterGroupEdit","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault","enableFilterHandlers","suppressStartEditOnTab","hidePaddedHeaderRows","ssrmExpandAllAffectsAllRows","animateColumnResizing"],VCe=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","overlayComponent","loadingOverlayComponent","noRowsOverlayComponent","overlayComponentSelector","activeOverlay","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getFullRowEditValidationErrors","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","loadingCellRendererSelector","getRowId","chartMenuItems","groupTotalRow","alwaysPassFilter","isRowPinnable","isRowPinned","isRowValidDropPosition"],$Ce=()=>[...GCe,...BCe,...NCe,...OH,...VCe,...zH,...HCe,...jCe],WCe=()=>({suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."},groupRemoveSingleChildren:{version:"33",message:"Use `groupHideParentOfSingleChild` instead."},groupRemoveLowestSingleChildren:{version:"33",message:'Use `groupHideParentOfSingleChild: "leafGroupsOnly"` instead.'},suppressRowGroupHidesColumns:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressHideOnGroup"` instead.'},suppressMakeColumnVisibleAfterUnGroup:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressShowOnUngroup"` instead.'},unSortIcon:{version:"33",message:"Use `defaultColDef.unSortIcon` instead."},sortingOrder:{version:"33",message:"Use `defaultColDef.sortingOrder` instead."},suppressPropertyNamesCheck:{version:"33",message:"`gridOptions` and `columnDefs` both have a `context` property that should be used for arbitrary user data. This means that column definitions and gridOptions should only contain valid properties making this property redundant."},suppressAdvancedFilterEval:{version:"34",message:"Advanced filter no longer uses function evaluation, so this option has no effect."}});function xp(e,t,n){return typeof t=="number"||t==null?t==null||t>=n?null:`${e}: value should be greater than or equal to ${n}`:`${e}: value should be a number`}var UCe={alignedGrids:"AlignedGrids",allowContextMenuWithControlKey:"ContextMenu",autoSizeStrategy:"ColumnAutoSize",cellSelection:"CellSelection",columnHoverHighlight:"ColumnHover",datasource:"InfiniteRowModel",doesExternalFilterPass:"ExternalFilter",editType:"EditCore",invalidEditValueMode:"EditCore",enableAdvancedFilter:"AdvancedFilter",enableCellSpan:"CellSpan",enableCharts:"IntegratedCharts",enableRangeSelection:"CellSelection",enableRowPinning:"PinnedRow",findSearchValue:"Find",getFullRowEditValidationErrors:"EditCore",getContextMenuItems:"ContextMenu",getLocaleText:"Locale",getMainMenuItems:"ColumnMenu",getRowClass:"RowStyle",getRowStyle:"RowStyle",groupTotalRow:"SharedRowGrouping",grandTotalRow:"ClientSideRowModelHierarchy",initialState:"GridState",isExternalFilterPresent:"ExternalFilter",isRowPinnable:"PinnedRow",isRowPinned:"PinnedRow",localeText:"Locale",masterDetail:"SharedMasterDetail",pagination:"Pagination",pinnedBottomRowData:"PinnedRow",pinnedTopRowData:"PinnedRow",pivotMode:"SharedPivot",pivotPanelShow:"RowGroupingPanel",quickFilterText:"QuickFilter",rowClass:"RowStyle",rowClassRules:"RowStyle",rowData:"ClientSideRowModel",rowDragManaged:"RowDrag",refreshAfterGroupEdit:["RowGrouping","TreeData"],rowGroupPanelShow:"RowGroupingPanel",rowNumbers:"RowNumbers",rowSelection:"SharedRowSelection",rowStyle:"RowStyle",serverSideDatasource:"ServerSideRowModel",sideBar:"SideBar",statusBar:"StatusBar",treeData:"SharedTreeData",undoRedoCellEditing:"UndoRedoEdit",valueCache:"ValueCache",viewportDatasource:"ViewportRowModel"},qCe=()=>{const e={autoSizePadding:{validate({autoSizePadding:n}){return xp("autoSizePadding",n,0)}},cacheBlockSize:{supportedRowModels:["serverSide","infinite"],validate({cacheBlockSize:n}){return xp("cacheBlockSize",n,1)}},cacheOverflowSize:{validate({cacheOverflowSize:n}){return xp("cacheOverflowSize",n,1)}},datasource:{supportedRowModels:["infinite"]},domLayout:{validate:n=>{const i=n.domLayout,r=["autoHeight","normal","print"];return i&&!r.includes(i)?`domLayout must be one of [${r.join()}], currently it's ${i}`:null}},enableFillHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeSelection:{dependencies:{rowDragEntireRow:{required:[!1,void 0]}}},enableRowPinning:{supportedRowModels:["clientSide"],validate({enableRowPinning:n,pinnedTopRowData:i,pinnedBottomRowData:r}){return n&&(i||r)?"Manual row pinning cannot be used together with pinned row data. Either set `enableRowPinning` to `false`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":null}},isRowPinnable:{supportedRowModels:["clientSide"],validate({enableRowPinning:n,isRowPinnable:i,pinnedTopRowData:r,pinnedBottomRowData:o}){return i&&(r||o)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinnable`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!n&&i?"`isRowPinnable` requires `enableRowPinning` to be set.":null}},isRowPinned:{supportedRowModels:["clientSide"],validate({enableRowPinning:n,isRowPinned:i,pinnedTopRowData:r,pinnedBottomRowData:o}){return i&&(r||o)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinned`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!n&&i?"`isRowPinned` requires `enableRowPinning` to be set.":null}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:{required:[void 0,"bottom"]},treeData:{required:[void 0,!1],reason:"Tree Data has values at the group level so it doesn't make sense to hide them."}}},groupHideParentOfSingleChild:{dependencies:{groupHideOpenParents:{required:[void 0,!1]}}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveSingleChildren:{required:[void 0,!1]}}},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveLowestSingleChildren:{required:[void 0,!1]}}},groupSelectsChildren:{dependencies:{rowSelection:{required:["multiple"]}}},groupHierarchyConfig:{validate({groupHierarchyConfig:n={}},i,r){var o;for(const s of Object.keys(n))(o=r.validation)==null||o.validateColDef(n[s]);return null}},icons:{validate:({icons:n})=>{if(n){if(n.smallDown)return Ip(262);if(n.smallLeft)return Ip(263);if(n.smallRight)return Ip(264)}return null}},infiniteInitialRowCount:{validate({infiniteInitialRowCount:n}){return xp("infiniteInitialRowCount",n,1)}},initialGroupOrderComparator:{supportedRowModels:["clientSide"]},ssrmExpandAllAffectsAllRows:{validate:n=>{if(typeof n.ssrmExpandAllAffectsAllRows=="boolean"){if(n.rowModelType!=="serverSide")return"'ssrmExpandAllAffectsAllRows' is only supported with the Server Side Row Model.";if(n.ssrmExpandAllAffectsAllRows&&typeof n.getRowId!="function")return"'getRowId' callback must be provided for Server Side Row Model grouping to work correctly."}return null}},keepDetailRowsCount:{validate({keepDetailRowsCount:n}){return xp("keepDetailRowsCount",n,1)}},paginationPageSize:{validate({paginationPageSize:n}){return xp("paginationPageSize",n,1)}},paginationPageSizeSelector:{validate:n=>{const i=n.paginationPageSizeSelector;return typeof i=="boolean"||i==null||i.length?null:`'paginationPageSizeSelector' cannot be an empty array.
                    If you want to hide the page size selector, set paginationPageSizeSelector to false.`}},pivotMode:{dependencies:{treeData:{required:[!1,void 0],reason:"Pivot Mode is not supported with Tree Data."}}},quickFilterText:{supportedRowModels:["clientSide"]},rowBuffer:{validate({rowBuffer:n}){return xp("rowBuffer",n,0)}},rowClass:{validate:n=>typeof n.rowClass=="function"?"rowClass should not be a function, please use getRowClass instead":null},rowData:{supportedRowModels:["clientSide"]},rowDragManaged:{supportedRowModels:["clientSide"],dependencies:{pagination:{required:[!1,void 0]}}},rowSelection:{validate({rowSelection:n}){return n&&typeof n=="string"?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':n&&typeof n!="object"?"Expected `RowSelectionOptions` object for the `rowSelection` property.":n&&n.mode!=="multiRow"&&n.mode!=="singleRow"?`Selection mode "${n.mode}" is invalid. Use one of 'singleRow' or 'multiRow'.`:null}},rowStyle:{validate:n=>{const i=n.rowStyle;return i&&typeof i=="function"?"rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead":null}},serverSideDatasource:{supportedRowModels:["serverSide"]},serverSideInitialRowCount:{supportedRowModels:["serverSide"],validate({serverSideInitialRowCount:n}){return xp("serverSideInitialRowCount",n,1)}},serverSideOnlyRefreshFilteredGroups:{supportedRowModels:["serverSide"]},serverSideSortAllLevels:{supportedRowModels:["serverSide"]},sortingOrder:{validate:n=>{const i=n.sortingOrder;if(Array.isArray(i)&&i.length>0){const r=i.filter(o=>!mf(o));if(r.length>0)return`sortingOrder must be an array of type (SortDirection | SortDef)[], incorrect items are: ${r.map(o=>typeof o=="string"||o==null?l_(o):JSON.stringify(o))}]`}else if(!Array.isArray(i)||!i.length)return`sortingOrder must be an array with at least one element, currently it's ${i}`;return null}},tooltipHideDelay:{validate:n=>n.tooltipHideDelay&&n.tooltipHideDelay<0?"tooltipHideDelay should not be lower than 0":null},tooltipShowDelay:{validate:n=>n.tooltipShowDelay&&n.tooltipShowDelay<0?"tooltipShowDelay should not be lower than 0":null},treeData:{supportedRowModels:["clientSide","serverSide"],validate:n=>{const i=n.rowModelType??"clientSide";switch(i){case"clientSide":{const{treeDataChildrenField:r,treeDataParentIdField:o,getDataPath:s,getRowId:a}=n;if(!r&&!o&&!s)return"treeData requires either 'treeDataChildrenField' or 'treeDataParentIdField' or 'getDataPath' in the clientSide row model.";if(r){if(s)return"Cannot use both 'treeDataChildrenField' and 'getDataPath' at the same time.";if(o)return"Cannot use both 'treeDataChildrenField' and 'treeDataParentIdField' at the same time."}if(o){if(!a)return"getRowId callback not provided, tree data with parent id cannot be built.";if(s)return"Cannot use both 'treeDataParentIdField' and 'getDataPath' at the same time."}return null}case"serverSide":{const r=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${i} row model.`;return n.isServerSideGroup&&n.getServerSideGroupKey?null:r}}return null}},viewportDatasource:{supportedRowModels:["viewport"]},viewportRowModelBufferSize:{validate({viewportRowModelBufferSize:n}){return xp("viewportRowModelBufferSize",n,0)}},viewportRowModelPageSize:{validate({viewportRowModelPageSize:n}){return xp("viewportRowModelPageSize",n,1)}},rowDragEntireRow:{dependencies:{cellSelection:{required:[void 0]}}},autoGroupColumnDef:{validate({autoGroupColumnDef:n,showOpenedGroup:i}){return n!=null&&n.field&&i?"autoGroupColumnDef.field and showOpenedGroup are not supported when used together.":n!=null&&n.valueGetter&&i?"autoGroupColumnDef.valueGetter and showOpenedGroup are not supported when used together.":null}},renderingMode:{validate:n=>{const i=n.renderingMode,r=["default","legacy"];return i&&!r.includes(i)?`renderingMode must be one of [${r.join()}], currently it's ${i}`:null}},autoSizeStrategy:{validate:({autoSizeStrategy:n})=>{if(!n)return null;const i=["fitCellContents","fitGridWidth","fitProvidedWidth"],r=n.type;return r!=="fitCellContents"&&r!=="fitGridWidth"&&r!=="fitProvidedWidth"?`Invalid Auto-size strategy. \`autoSizeStrategy\` must be one of ${i.map(o=>'"'+o+'"').join(", ")}, currently it's ${r}`:r==="fitProvidedWidth"&&typeof n.width!="number"?`When using the 'fitProvidedWidth' auto-size strategy, must provide a numeric \`width\`. You provided ${n.width}`:null}}},t={};for(const n of zH)t[n]={expectedType:"boolean"};for(const n of OH)t[n]={expectedType:"number"};return ac(t,e),t},KCe=()=>({objectName:"gridOptions",allProperties:[...$Ce(),...Object.values(JF)],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:WCe(),validations:qCe()}),ZCe=0,YCe=0,a6="__ag_grid_instance",XCe=class extends Yt{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.instanceId=YCe++,this.gridReadyFired=!1,this.queueEvents=[],this.propEventSvc=new h0,this.globalEventHandlerFactory=e=>(t,n)=>{if(!this.isAlive())return;const i=v_.has(t);if(i&&!e||!i&&e||!JCe(t))return;const r=(o,s)=>{const a=JF[o],d=this.gridOptions[a];typeof d=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>d(s))};if(this.gridReadyFired)r(t,n);else if(t==="gridReady"){r(t,n),this.gridReadyFired=!0;for(const o of this.queueEvents)r(o.eventName,o.event);this.queueEvents=[]}else this.queueEvents.push({eventName:t,event:n})}}wireBeans(e){this.gridOptions=e.gridOptions,this.validation=e.validation,this.api=e.gridApi,this.gridId=e.context.getId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){this.validateGridOptions(this.gridOptions),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory().bind(this),!0),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propEventSvc.setFrameworkOverrides(this.beans.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:e})=>{this.updateGridOptions({options:e,force:!0,source:"optionsUpdated"})}})}destroy(){super.destroy(),this.queueEvents=[]}get(e){return this.gridOptions[e]??K9[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return Dn(this.gridOptions[e])}mergeGridCommonParams(e){return e&&(n=>e(this.addCommon(n)))}updateGridOptions({options:e,force:t,source:n="api"}){const i={id:ZCe++,properties:[]},r=[],{gridOptions:o,validation:s}=this;for(const a of Object.keys(e)){const d=RF.applyGlobalGridOption(a,e[a]);s==null||s.warnOnInitialPropertyUpdate(n,a);const h=t||typeof d=="object"&&n==="api",m=o[a];if(h||m!==d){o[a]=d;const v={type:a,currentValue:d,previousValue:m,changeSet:i,source:n};r.push(v)}}this.validateGridOptions(this.gridOptions),i.properties=r.map(a=>a.type);for(const a of r)p0(this,`Updated property ${a.type} from`,a.previousValue," to ",a.currentValue),this.propEventSvc.dispatchEvent(a)}addPropertyEventListener(e,t){this.propEventSvc.addEventListener(e,t)}removePropertyEventListener(e,t){this.propEventSvc.removeEventListener(e,t)}getDomDataKey(){return this.domDataKey}addCommon(e){return e.api=this.api,e.context=this.gridOptionsContext,e}validateOptions(e,t){for(const n of Object.keys(e)){const i=e[n];if(i==null||i===!1)continue;let r=t[n];typeof r=="function"&&(r=r(e,this.gridOptions,this.beans)),r&&this.assertModuleRegistered(r,n)}}validateGridOptions(e){var t;this.validateOptions(e,UCe),(t=this.validation)==null||t.processGridOptions(e)}validateColDef(e,t,n){var i,r;(n||!((i=this.beans.dataTypeSvc)!=null&&i.isColPendingInference(t)))&&(this.validateOptions(e,MCe),(r=this.validation)==null||r.validateColDef(e))}assertModuleRegistered(e,t){const n=Array.isArray(e)?e.some(i=>this.isModuleRegistered(i)):this.isModuleRegistered(e);return n||Do(200,{...this.getModuleErrorParams(),moduleName:e,reasonOrId:t}),n}getModuleErrorParams(){return{gridId:this.gridId,gridScoped:AF(),rowModelType:this.get("rowModelType"),isUmd:Q9()}}isModuleRegistered(e){return _k(e,this.gridId,this.get("rowModelType"))}setInstanceDomData(e){e[a6]=this.instanceId}isElementInThisInstance(e){let t=e;for(;t;){const n=t[a6];if(Dn(n))return n===this.instanceId;t=t.parentElement}return!1}};function JCe(e){return!!JF[e]}var QCe=class extends Yt{constructor(e,t){super(),this.column=e,this.eGui=t,this.lastMovingChanged=0}postConstruct(){this.addManagedElementListeners(this.eGui,{click:e=>e&&this.onClick(e)}),this.addManagedListeners(this.column,{movingChanged:()=>{this.lastMovingChanged=Date.now()}})}onClick(e){const{sortSvc:t,rangeSvc:n,gos:i}=this.beans;if(!(Lb(i)?e.altKey:!0))n==null||n.handleColumnSelection(this.column,e);else if(this.column.isSortable()){const o=this.column.isMoving(),a=Date.now()-this.lastMovingChanged<50;o||a||t==null||t.progressSortFromEvent(this.column,e)}}};function e_e(e,t){const n={"aria-hidden":"true"};return{tag:"div",cls:"ag-cell-label-container",role:"presentation",children:[{tag:"span",ref:"eMenu",cls:"ag-header-icon ag-header-cell-menu-button",attrs:n},{tag:"span",ref:"eFilterButton",cls:"ag-header-icon ag-header-cell-filter-button",attrs:n},{tag:"div",ref:"eLabel",cls:"ag-header-cell-label",role:"presentation",children:[e?{tag:"span",ref:"eColRef",cls:"ag-header-col-ref"}:null,{tag:"span",ref:"eText",cls:"ag-header-cell-text"},{tag:"span",ref:"eFilter",cls:"ag-header-icon ag-header-label-icon ag-filter-icon",attrs:n},t?{tag:"ag-sort-indicator",ref:"eSortIndicator"}:null]}]}}var t_e=class extends ra{constructor(){super(...arguments),this.eFilter=Yn,this.eFilterButton=Yn,this.eSortIndicator=Yn,this.eMenu=Yn,this.eLabel=Yn,this.eText=Yn,this.eColRef=Yn,this.eSortOrder=Yn,this.eSortAsc=Yn,this.eSortDesc=Yn,this.eSortMixed=Yn,this.eSortNone=Yn,this.eSortAbsoluteAsc=Yn,this.eSortAbsoluteDesc=Yn,this.isLoadingInnerComponent=!1}refresh(e){var n,i,r;const t=this.params;if(this.params=e,this.workOutTemplate(e,!!((n=this.beans)!=null&&n.sortSvc))!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||e.enableSorting!=this.currentSort||e.column.formulaRef!=this.currentRef||this.currentSuppressMenuHide!=null&&this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon)return!1;if(this.innerHeaderComponent){const o={...e};ac(o,e.innerHeaderComponentParams),(r=(i=this.innerHeaderComponent).refresh)==null||r.call(i,o)}else this.setDisplayName(e);return!0}workOutTemplate(e,t){const{formula:n}=this.beans,i=e.template;return i?i!=null&&i.trim?i.trim():i:e_e(!!(n!=null&&n.active),t)}init(e){this.params=e;const{sortSvc:t,touchSvc:n,rowNumbersSvc:i,userCompFactory:r}=this.beans,o=t==null?void 0:t.getSortIndicatorSelector();this.currentTemplate=this.workOutTemplate(e,!!o),this.setTemplate(this.currentTemplate,o?[o]:void 0),this.eLabel&&(this.mouseListener??(this.mouseListener=this.createManagedBean(new QCe(e.column,this.eLabel)))),n==null||n.setupForHeader(this),this.setMenu(),this.setupSort(),this.setupColumnRefIndicator(),i==null||i.setupForHeader(this),this.setupFilterIcon(),this.setupFilterButton(),this.workOutInnerHeaderComponent(r,e),this.setDisplayName(e)}workOutInnerHeaderComponent(e,t){const n=jye(e,t,t);n&&(this.isLoadingInnerComponent=!0,n.newAgStackInstance().then(i=>{this.isLoadingInnerComponent=!1,i&&(this.isAlive()?(this.innerHeaderComponent=i,this.eText&&this.eText.appendChild(i.getGui())):this.destroyBean(i))}))}setDisplayName(e){const{displayName:t}=e,n=this.currentDisplayName;this.currentDisplayName=t,!(!this.eText||n===t||this.innerHeaderComponent||this.isLoadingInnerComponent)&&(this.eText.textContent=kx(t))}addInIcon(e,t,n){const i=Gc(e,this.beans,n);i&&t.appendChild(i)}workOutShowMenu(){var e;return this.params.enableMenu&&!!((e=this.beans.menuSvc)!=null&&e.isHeaderMenuButtonEnabled())}shouldSuppressMenuHide(){var e;return!!((e=this.beans.menuSvc)!=null&&e.isHeaderMenuButtonAlwaysShowEnabled())}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){Iy(this.eMenu),this.eMenu=void 0;return}const{gos:e,eMenu:t,params:n}=this,i=Ed(e);this.addInIcon(i?"menu":"menuAlt",t,n.column),t.classList.toggle("ag-header-menu-icon",!i);const r=this.shouldSuppressMenuHide();this.currentSuppressMenuHide=r,this.addManagedElementListeners(t,{click:()=>this.showColumnMenu(this.eMenu)}),this.toggleMenuAlwaysShow(r)}toggleMenuAlwaysShow(e){var t;(t=this.eMenu)==null||t.classList.toggle("ag-header-menu-always-show",e)}showColumnMenu(e){const{currentSuppressMenuHide:t,params:n}=this;t||this.toggleMenuAlwaysShow(!0),n.showColumnMenu(e,()=>{t||this.toggleMenuAlwaysShow(!1)})}onMenuKeyboardShortcut(e){var d;const{params:t,gos:n,beans:i,eMenu:r,eFilterButton:o}=this,s=t.column,a=Ed(n);if(e&&!a){if((d=i.menuSvc)!=null&&d.isFilterMenuInHeaderEnabled(s))return t.showFilter(o??r??this.getGui()),!0}else if(t.enableMenu)return this.showColumnMenu(r??o??this.getGui()),!0;return!1}setupSort(){const{sortSvc:e}=this.beans;if(!e)return;const{enableSorting:t,column:n}=this.params;if(this.currentSort=t,!this.eSortIndicator){this.eSortIndicator=this.createBean(e.createSortIndicator(!0));const{eSortIndicator:i,eSortOrder:r,eSortAsc:o,eSortDesc:s,eSortMixed:a,eSortNone:d,eSortAbsoluteAsc:h,eSortAbsoluteDesc:m}=this;i.attachCustomElements(r,o,s,a,d,h,m)}this.eSortIndicator.setupSort(n),this.currentSort&&e.setupHeader(this,n)}setupColumnRefIndicator(){const{eColRef:e,beans:{editModelSvc:t},params:n}=this;e&&(this.currentRef=n.column.formulaRef,e.textContent=this.currentRef,$o(e,!1),this.addManagedEventListeners({cellEditingStarted:()=>{const i=t==null?void 0:t.getEditPositions(),r=!!this.currentRef&&!!(i!=null&&i.some(o=>o.column.isAllowFormula()));$o(e,r)},cellEditingStopped:()=>{$o(e,!1)}}))}setupFilterIcon(){const{eFilter:e,params:t}=this;if(!e)return;const n=()=>{const i=t.column.isFilterActive();$o(e,i,{skipAriaHidden:!0})};this.configureFilter(t.enableFilterIcon,e,n,"filterActive")}setupFilterButton(){const{eFilterButton:e,params:t}=this;if(!e)return;this.configureFilter(t.enableFilterButton,e,this.onFilterChangedButton.bind(this),"filter")?this.addManagedElementListeners(e,{click:()=>t.showFilter(e)}):this.eFilterButton=void 0}configureFilter(e,t,n,i){if(!e)return Iy(t),!1;const r=this.params.column;return this.addInIcon(i,t,r),this.addManagedListeners(r,{filterChanged:n}),n(),!0}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){const{eFilterButton:t,eMenu:n}=this;return e?t??n??this.getGui():n??t??this.getGui()}destroy(){super.destroy(),this.innerHeaderComponent=this.destroyBean(this.innerHeaderComponent),this.mouseListener=this.destroyBean(this.mouseListener)}},n_e={tag:"div",cls:"ag-header-group-cell-label",role:"presentation",children:[{tag:"span",ref:"agLabel",cls:"ag-header-group-text",role:"presentation"},{tag:"span",ref:"agOpened",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"},{tag:"span",ref:"agClosed",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"}]},i_e=class extends ra{constructor(){super(n_e),this.agOpened=Yn,this.agClosed=Yn,this.agLabel=Yn,this.isLoadingInnerComponent=!1}init(e){const{userCompFactory:t,touchSvc:n}=this.beans;this.params=e,this.checkWarnings(),this.workOutInnerHeaderGroupComponent(t,e),this.setupLabel(e),this.addGroupExpandIcon(e),this.setupExpandIcons(),n==null||n.setupForHeaderGroup(this)}checkWarnings(){this.params.template&&an(89)}workOutInnerHeaderGroupComponent(e,t){const n=Vye(e,t,t);n&&(this.isLoadingInnerComponent=!0,n.newAgStackInstance().then(i=>{this.isLoadingInnerComponent=!1,i&&(this.isAlive()?(this.innerHeaderGroupComponent=i,this.agLabel.appendChild(i.getGui())):this.destroyBean(i))}))}setupExpandIcons(){const{agOpened:e,agClosed:t,params:{columnGroup:n},beans:{colGroupSvc:i}}=this;this.addInIcon("columnGroupOpened",e),this.addInIcon("columnGroupClosed",t);const r=d=>{if(om(d))return;const h=!n.isExpanded();i.setColumnGroupOpened(n.getProvidedColumnGroup(),h,"uiColumnExpanded")};this.addTouchAndClickListeners(t,r),this.addTouchAndClickListeners(e,r);const o=d=>{y0(d)};this.addManagedElementListeners(t,{dblclick:o}),this.addManagedElementListeners(e,{dblclick:o}),this.addManagedElementListeners(this.getGui(),{dblclick:r}),this.updateIconVisibility();const s=n.getProvidedColumnGroup(),a=this.updateIconVisibility.bind(this);this.addManagedListeners(s,{expandedChanged:a,expandableChanged:a})}addTouchAndClickListeners(e,t){var n;(n=this.beans.touchSvc)==null||n.setupForHeaderGroupElement(this,e,t),this.addManagedElementListeners(e,{click:t})}updateIconVisibility(){const{agOpened:e,agClosed:t,params:{columnGroup:n}}=this;if(n.isExpandable()){const i=n.isExpanded();$o(e,i),$o(t,!i)}else $o(e,!1),$o(t,!1)}addInIcon(e,t){const n=Gc(e,this.beans,null);n&&t.appendChild(n)}addGroupExpandIcon(e){if(!e.columnGroup.isExpandable()){const{agOpened:t,agClosed:n}=this;$o(t,!1),$o(n,!1)}}setupLabel(e){var s;const{displayName:t,columnGroup:n}=e,{innerHeaderGroupComponent:i,isLoadingInnerComponent:r}=this,o=i||r;Dn(t)&&!o&&(this.agLabel.textContent=kx(t)),this.toggleCss("ag-sticky-label",!((s=n.getColGroupDef())!=null&&s.suppressStickyLabel))}destroy(){super.destroy(),this.innerHeaderGroupComponent&&(this.destroyBean(this.innerHeaderGroupComponent),this.innerHeaderGroupComponent=void 0)}},r_e={moduleName:"ColumnHeaderComp",version:Fn,userComponents:{agColumnHeader:t_e},icons:{menu:"menu",menuAlt:"menu-alt"}},o_e={moduleName:"ColumnGroupHeaderComp",version:Fn,userComponents:{agColumnGroupHeader:i_e},icons:{columnGroupOpened:"expanded",columnGroupClosed:"contracted"}},s_e=class extends Yt{constructor(){super(...arguments),this.beanName="animationFrameSvc",this.p1={list:[],sorted:!1},this.p2={list:[],sorted:!1},this.f1={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastScrollTop=0,this.taskCount=0}setScrollTop(e){this.scrollGoingDown=e>=this.lastScrollTop,e===0&&(this.scrollGoingDown=!0),this.lastScrollTop=e}postConstruct(){this.active=!this.gos.get("suppressAnimationFrame"),this.batchFrameworkComps=this.beans.frameworkOverrides.batchFrameworkComps}verify(){this.active===!1&&an(92)}createTask(e,t,n,i,r=!1){this.verify();let o=n;i&&this.batchFrameworkComps&&(o="f1");const s={task:e,index:t,createOrder:++this.taskCount,deferred:r};this.addTaskToList(this[o],s),this.schedule()}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort((n,i)=>n.deferred!==i.deferred?n.deferred?-1:1:n.index!==i.index?t*(i.index-n.index):i.createOrder-n.createOrder),e.sorted=!0}addDestroyTask(e){this.verify(),this.destroyTasks.push(e),this.schedule()}executeFrame(e){const{p1:t,p2:n,f1:i,destroyTasks:r,beans:o}=this,{ctrlsSvc:s,frameworkOverrides:a}=o,d=t.list,h=n.list,m=i.list,v=Date.now();let w=0;const R=e<=0,L=s.getScrollFeature();for(;R||w<e;){if(!L.scrollGridIfNeeded()){let z;if(d.length)this.sortTaskList(t),z=d.pop().task;else if(h.length)this.sortTaskList(n),z=h.pop().task;else if(m.length)a.wrapOutgoing(()=>{for(;(R||w<e)&&!L.scrollGridIfNeeded();){if(m.length)this.sortTaskList(i),z=m.pop().task,z();else break;w=Date.now()-v}}),z=()=>{};else if(r.length)z=r.pop();else break;z()}w=Date.now()-v}d.length||h.length||m.length||r.length?this.requestFrame():this.ticking=!1}flushAllFrames(){this.active&&this.executeFrame(-1)}schedule(){this.active&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);Rm(this.beans,e)}isQueueEmpty(){return!this.ticking}},a_e={moduleName:"AnimationFrame",version:Fn,beans:[s_e]},l_e=class extends Yt{constructor(){super(...arguments),this.beanName="iconSvc"}createIconNoSpan(e,t){return Gc(e,this.beans,t==null?void 0:t.column)}},u_e=class extends Yt{constructor(){super(...arguments),this.beanName="touchSvc"}mockBodyContextMenu(e,t){this.mockContextMenu(e,e.eBodyViewport,t)}mockHeaderContextMenu(e,t){this.mockContextMenu(e,e.eGui,t)}mockRowContextMenu(e){if(!i0())return;const t=(n,i,r)=>{var a;const{rowCtrl:o,cellCtrl:s}=e.getControlsForEventTarget((r==null?void 0:r.target)??null);s!=null&&s.column&&s.dispatchCellContextMenuEvent(r??null),(a=this.beans.contextMenuSvc)==null||a.handleContextMenuMouseEvent(void 0,r,o,s)};this.mockContextMenu(e,e.element,t)}handleCellDoubleClick(e,t){return(()=>{if(!i0()||V9("dblclick"))return!1;const i=Date.now(),r=i-e.lastIPadMouseClickEvent<200;return e.lastIPadMouseClickEvent=i,r})()?(e.onCellDoubleClicked(t),t.preventDefault(),!0):!1}setupForHeader(e){const{gos:t,sortSvc:n,menuSvc:i}=this.beans;if(t.get("suppressTouch"))return;const{params:r,eMenu:o,eFilterButton:s}=e,a=new Hv(e.getGui(),!0);e.addDestroyFunc(()=>a.destroy());const d=e.shouldSuppressMenuHide(),h=d&&Dn(o)&&r.enableMenu;let m=a;if(h&&(m=new Hv(o,!0),e.addDestroyFunc(()=>m.destroy())),r.enableMenu||i!=null&&i.isHeaderContextMenuEnabled(r.column)){const v=h?"tap":"longTap",w=R=>r.showColumnMenuAfterMouseClick(R.touchStart);e.addManagedListeners(m,{[v]:w}),e.addManagedListeners(a,{longTap:w})}if(r.enableSorting){const v=w=>{const R=w.touchStart.target;d&&(o!=null&&o.contains(R)||s!=null&&s.contains(R))||n==null||n.progressSort(r.column,!1,"uiColumnSorted")};e.addManagedListeners(a,{tap:v})}if(r.enableFilterButton&&s){const v=new Hv(s,!0);e.addManagedListeners(v,{tap:()=>r.showFilter(s)}),e.addDestroyFunc(()=>v.destroy())}}setupForHeaderGroup(e){var n;const t=e.params;if((n=this.beans.menuSvc)!=null&&n.isHeaderContextMenuEnabled(t.columnGroup.getProvidedColumnGroup())){const i=new Hv(t.eGridHeader,!0),r=o=>t.showColumnMenuAfterMouseClick(o.touchStart);e.addManagedListeners(i,{longTap:r}),e.addDestroyFunc(()=>i.destroy())}}setupForHeaderGroupElement(e,t,n){const i=new Hv(t,!0);e.addManagedListeners(i,{tap:n}),e.addDestroyFunc(()=>i.destroy())}mockContextMenu(e,t,n){if(!i0())return;const i=new Hv(t),r=o=>{a1(this.beans,o.touchEvent)&&n(void 0,o.touchStart,o.touchEvent)};e.addManagedListeners(i,{longTap:r}),e.addDestroyFunc(()=>i.destroy())}},c_e={moduleName:"Touch",version:Fn,beans:[u_e]},d_e=class extends Yt{constructor(){super(...arguments),this.beanName="cellNavigation"}wireBeans(e){this.rowSpanSvc=e.rowSpanSvc}getNextCellToFocus(e,t,n=!1){return n?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const n=e===kt.UP,i=e===kt.DOWN,r=e===kt.LEFT;let o,s;const{pageBounds:a,gos:d,visibleCols:h,pinnedRowModel:m}=this.beans,{rowPinned:v}=t;if(n||i)v&&m?n?s=0:s=v==="top"?m.getPinnedTopRowCount()-1:m.getPinnedBottomRowCount()-1:s=n?a.getFirstRow():a.getLastRow(),o=t.column;else{const w=d.get("enableRtl");s=t.rowIndex,o=(r!==w?h.allCols:[...h.allCols].reverse()).find(L=>this.isCellGoodToFocusOn({rowIndex:s,rowPinned:null,column:L}))}return o?{rowIndex:s,rowPinned:v,column:o}:null}getNextCellToFocusWithoutCtrlPressed(e,t){let n=t,i=!1;for(;!i;){switch(e){case kt.UP:n=this.getCellAbove(n);break;case kt.DOWN:n=this.getCellBelow(n);break;case kt.RIGHT:n=this.gos.get("enableRtl")?this.getCellToLeft(n):this.getCellToRight(n);break;case kt.LEFT:n=this.gos.get("enableRtl")?this.getCellToRight(n):this.getCellToLeft(n);break;default:n=null,an(8,{key:e});break}n?i=this.isCellGoodToFocusOn(n):i=!0}return n}isCellGoodToFocusOn(e){const t=e.column;let n;const{pinnedRowModel:i,rowModel:r}=this.beans;switch(e.rowPinned){case"top":n=i==null?void 0:i.getPinnedTopRow(e.rowIndex);break;case"bottom":n=i==null?void 0:i.getPinnedBottomRow(e.rowIndex);break;default:n=r.getRow(e.rowIndex);break}return n?!this.isSuppressNavigable(t,n):!1}getCellToLeft(e){if(!e)return null;const t=this.beans.visibleCols.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.beans.visibleCols.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellBelow(e){var i;if(!e)return null;const t=((i=this.rowSpanSvc)==null?void 0:i.getCellEnd(e))??e,n=N4(this.beans,t,!0);return n?{rowIndex:n.rowIndex,column:e.column,rowPinned:n.rowPinned}:null}getCellAbove(e){var i;if(!e)return null;const t=((i=this.rowSpanSvc)==null?void 0:i.getCellStart(e))??e,n=zS(this.beans,{rowIndex:t.rowIndex,rowPinned:t.rowPinned},!0);return n?{rowIndex:n.rowIndex,column:e.column,rowPinned:n.rowPinned}:null}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const{visibleCols:t,pagination:n}=this.beans,i=t.allCols;let r=e.rowIndex,o=e.rowPinned,s=t.getColAfter(e.column);if(!s){s=i[0];const a=N4(this.beans,e,!0);if(vs(a)||!a.rowPinned&&!((n==null?void 0:n.isRowInPage(a.rowIndex))??!0))return null;r=a?a.rowIndex:null,o=a?a.rowPinned:null}return{rowIndex:r,column:s,rowPinned:o}}getNextTabbedCellBackwards(e){const{beans:t}=this,{visibleCols:n,pagination:i}=t,r=n.allCols;let o=e.rowIndex,s=e.rowPinned,a=n.getColBefore(e.column);if(!a){a=Wo(r);const d=zS(t,{rowIndex:e.rowIndex,rowPinned:e.rowPinned},!0);if(vs(d)||!d.rowPinned&&!((i==null?void 0:i.isRowInPage(d.rowIndex))??!0))return null;o=d?d.rowIndex:null,s=d?d.rowPinned:null}return{rowIndex:o,column:a,rowPinned:s}}isSuppressNavigable(e,t){const{suppressNavigable:n}=e.colDef;if(typeof n=="boolean")return n;if(typeof n=="function"){const i=e.createColumnFunctionCallbackParams(t);return n(i)}return!1}};function h_e(e){return e.focusSvc.getFocusedCell()}function f_e(e){return e.focusSvc.clearFocusedCell()}function p_e(e,t,n,i){e.focusSvc.setFocusedCell({rowIndex:t,column:n,rowPinned:i,forceBrowserFocus:!0})}function g_e(e,t){var n;return((n=e.navigation)==null?void 0:n.tabToNextCell(!1,t))??!1}function m_e(e,t){var n;return((n=e.navigation)==null?void 0:n.tabToNextCell(!0,t))??!1}function y_e(e,t,n=!1){var r;const i=(r=e.headerNavigation)==null?void 0:r.getHeaderPositionForColumn(t,n);i&&e.focusSvc.focusHeaderPosition({headerPosition:i})}var v_e=class extends Yt{constructor(){super(...arguments),this.beanName="editModelSvc",this.edits=new Map,this.cellValidations=new NH,this.rowValidations=new BH,this.suspendEdits=!1}suspend(e){this.suspendEdits=e}removeEdits({rowNode:e,column:t}){if(!this.hasEdits({rowNode:e})||!e)return;const n=this.getEditRow(e);t?n.delete(t):n.clear(),n.size===0&&this.edits.delete(e)}getEditRow(e,t={}){if(this.suspendEdits||this.edits.size===0)return;const n=e&&this.edits.get(e);if(n)return n;if(t.checkSiblings){const i=e.pinnedSibling;if(i)return this.getEditRow(i)}}getEditRowDataValue(e,{checkSiblings:t}={}){if(!e||this.edits.size===0)return;const n=this.getEditRow(e),i=e.pinnedSibling,r=t&&i&&this.getEditRow(i);if(!n&&!r)return;const o=Object.assign({},e.data),s=(a,d)=>a.forEach(({pendingValue:h},m)=>{h!==Sh&&(d[m.getColId()]=h)});return n&&s(n,o),r&&s(r,o),o}getEdit(e,t){const n=this._getEdit(e);return t&&n?{...n}:n}_getEdit(e){var t;if(!this.suspendEdits&&this.edits.size!==0)return e.rowNode&&e.column&&((t=this.getEditRow(e.rowNode))==null?void 0:t.get(e.column))}getEditMap(e=!0){if(this.suspendEdits||this.edits.size===0)return new Map;if(!e)return this.edits;const t=new Map;return this.edits.forEach((n,i)=>{const r=new Map;n.forEach(({editorState:o,...s},a)=>r.set(a,{...s})),t.set(i,r)}),t}setEditMap(e){this.edits.clear(),e.forEach((t,n)=>{const i=new Map;t.forEach((r,o)=>i.set(o,{...r})),this.edits.set(n,i)})}setEdit(e,t){(this.edits.size===0||!this.edits.has(e.rowNode))&&this.edits.set(e.rowNode,new Map);const n=this._getEdit(e),i=Object.assign({editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0},...n,...t});return this.getEditRow(e.rowNode).set(e.column,i),i}clearEditValue(e){var i;const{rowNode:t,column:n}=e;if(t)if(n){const r=this._getEdit(e);r&&(r.editorValue=void 0,r.pendingValue=r.sourceValue,r.state="changed")}else(i=this.getEditRow(t))==null||i.forEach(r=>{r.editorValue=void 0,r.pendingValue=r.sourceValue,r.state="changed"})}getState(e){var t;if(!this.suspendEdits)return(t=this.getEdit(e))==null?void 0:t.state}getEditPositions(e){if(this.suspendEdits||(e??this.edits).size===0)return[];const t=[];return(e??this.edits).forEach((n,i)=>{for(const r of n.keys()){const{editorState:o,...s}=n.get(r);t.push({rowNode:i,column:r,...s})}}),t}hasRowEdits(e,t){return this.suspendEdits||this.edits.size===0?!1:!!this.getEditRow(e,t)}hasEdits(e={},t={}){var o;if(this.suspendEdits||this.edits.size===0)return!1;const{rowNode:n,column:i}=e,{withOpenEditor:r}=t;if(n){const s=this.getEditRow(n,t);return s?i?r?((o=this.getEdit(e))==null?void 0:o.state)==="editing":s.has(i)??!1:s.size!==0?r?Array.from(s.values()).some(({state:a})=>a==="editing"):!0:!1:!1}return r?this.getEditPositions().some(({state:s})=>s==="editing"):this.edits.size>0}start(e){const t=this.getEditRow(e.rowNode)??new Map,{rowNode:n,column:i}=e;i&&!t.has(i)&&t.set(i,{editorValue:void 0,pendingValue:Sh,sourceValue:this.beans.valueSvc.getValue(i,n,!1,"api"),state:"editing",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}}),this.edits.set(n,t)}stop(e){this.hasEdits(e)&&(e?this.removeEdits(e):this.clear())}clear(){for(const e of this.edits.values())e.clear();this.edits.clear()}getCellValidationModel(){return this.cellValidations}getRowValidationModel(){return this.rowValidations}setCellValidationModel(e){this.cellValidations=e}setRowValidationModel(e){this.rowValidations=e}destroy(){super.destroy(),this.clear()}},NH=class{constructor(){this.cellValidations=new Map}getCellValidation(e){var i,r;const{rowNode:t,column:n}=e||{};return(r=(i=this.cellValidations)==null?void 0:i.get(t))==null?void 0:r.get(n)}hasCellValidation(e){return!(e!=null&&e.rowNode)||!e.column?this.cellValidations.size>0:!!this.getCellValidation(e)}setCellValidation(e,t){const{rowNode:n,column:i}=e;this.cellValidations.has(n)||this.cellValidations.set(n,new Map),this.cellValidations.get(n).set(i,t)}clearCellValidation(e){var i;const{rowNode:t,column:n}=e;(i=this.cellValidations.get(t))==null||i.delete(n)}setCellValidationMap(e){this.cellValidations=e}getCellValidationMap(){return this.cellValidations}clearCellValidationMap(){this.cellValidations.clear()}},BH=class{constructor(){this.rowValidations=new Map}getRowValidation(e){const{rowNode:t}=e||{};return this.rowValidations.get(t)}hasRowValidation(e){return e!=null&&e.rowNode?!!this.getRowValidation(e):this.rowValidations.size>0}setRowValidation({rowNode:e},t){this.rowValidations.set(e,t)}clearRowValidation({rowNode:e}){this.rowValidations.delete(e)}setRowValidationMap(e){this.rowValidations=e}getRowValidationMap(){return this.rowValidations}clearRowValidationMap(){this.rowValidations.clear()}};function QF(e,t={}){var h;const{rowIndex:n,rowId:i,rowCtrl:r,rowPinned:o}=t;if(r)return r;const{rowModel:s,rowRenderer:a}=e;let{rowNode:d}=t;return d||(i?d=kbe(e,i,o):n!=null&&(d=s.getRow(n))),(h=a.getRowCtrls(d?[d]:[]))==null?void 0:h[0]}function Fs(e,t={}){var m;const{cellCtrl:n,colId:i,columnId:r,column:o}=t;if(n)return n;const s=e.colModel.getCol(i??r??Wk(o)),a=t.rowCtrl??QF(e,t),d=(a==null?void 0:a.getCellCtrl(s))??void 0;if(d)return d;const h=t.rowNode??(a==null?void 0:a.rowNode);if(h)return(m=e.rowRenderer.getCellCtrls([h],[s]))==null?void 0:m[0]}function l6(e){const{editSvc:t}=e;t!=null&&t.isBatchEditing()?(Ay(e,{persist:!0}),Hb(e)):t==null||t.stopEditing(void 0,{source:"api"})}function b_e(e,t,n){const{gos:i,popupSvc:r}=t;if(!i.get("stopEditingWhenCellsLoseFocus"))return;const o=s=>{const a=s.relatedTarget;if(Dk(a)===null){l6(t);return}let d=n.some(h=>h.contains(a))&&i.isElementInThisInstance(a);d||(d=!!r&&(r.getActivePopups().some(h=>h.contains(a))||r.isElementWithinCustomPopup(a))),d||l6(t)};for(const s of n)e.addManagedElementListeners(s,{focusout:o})}function Wk(e){if(e)return typeof e=="string"?e:e.getColId()}var Sh=Symbol("unedited");function GH(e,t={}){var r;const n=[],i=e.rowRenderer.getCellCtrls(t.rowNodes,t.columns);for(const o of i){const s=(r=o.comp)==null?void 0:r.getCellEditor();s&&n.push({ctrl:o,editor:c1(s)})}return n}var x_e=(e,t={})=>GH(e,t).map(n=>n.editor);function w_e(e,t,n,i,r,o){var v;t.length===0&&(n!=null&&n.rowNode)&&(n!=null&&n.column)&&ax(e,n,{key:i,event:r,cellStartedEdit:o});const{valueSvc:s,editSvc:a,editModelSvc:d}=e,{rowNode:h,column:m}=n??{};for(const w of t){const{rowNode:R,column:L}=w,O=Fs(e,w);if(!O){if(R&&L){const $=s.getValue(L,R,void 0,"api"),X=((n==null?void 0:n.rowNode)===R&&(n==null?void 0:n.column)===L&&i||void 0)??(a==null?void 0:a.getCellDataValue(w,!1))??((v=s.getValueForDisplay({column:L,node:R}))==null?void 0:v.value)??$??Sh;d==null||d.setEdit(w,{pendingValue:lx(e,X,!1,L),sourceValue:$,state:"editing"})}continue}const z=o&&h===O.rowNode&&O.column===m;ax(e,{rowNode:h,column:O.column},{key:z?i:null,event:z?r:null,cellStartedEdit:z&&o})}}function Dp({pendingValue:e,sourceValue:t}){return e===Sh&&(e=t),e!==t}function ax(e,t,n){var ve,ce,Ie;const{key:i,event:r,cellStartedEdit:o,silent:s}=n??{},{editModelSvc:a,editSvc:d,gos:h,userCompFactory:m}=e,v=Fs(e,t),w=(ve=v==null?void 0:v.comp)==null?void 0:ve.getCellEditor(),R=HH(e,t,i,o&&!s),L=t.column.isAllowFormula(),O=a==null?void 0:a.getEdit(t),z=R.value??(O==null?void 0:O.sourceValue);if(w){a==null||a.setEdit(t,{editorValue:lx(e,z,!0,t.column),state:"editing"}),(ce=w.refresh)==null||ce.call(w,R);return}const $=t.column.getColDef(),U=T7(m,L?{...$,cellEditor:"agTextCellEditor"}:$,R);if(!U)return;const{popupFromSelector:Y,popupPositionFromSelector:X}=U,q=Y??!!$.cellEditorPopup,ie=X??$.cellEditorPopupPosition;if(VH(U.params,r),!v)return;const{rangeFeature:re,rowCtrl:J,comp:ne,onEditorAttachedFuncs:be}=v;a==null||a.setEdit(t,{editorValue:lx(e,z,!0,t.column),state:"editing"}),v.editCompDetails=U,be.push(()=>re==null?void 0:re.unsetComp()),ne==null||ne.setEditDetails(U,q,ie,h.get("reactiveCustomComponents")),J==null||J.refreshRow({suppressFlash:!0});const ue=a==null?void 0:a.getEdit(t,!0);!s&&!((Ie=ue==null?void 0:ue.editorState)!=null&&Ie.cellStartedEditing)&&(d==null||d.dispatchCellEvent(t,r,"cellEditingStarted",{value:z}),a==null||a.setEdit(t,{editorState:{cellStartedEditing:!0}}))}function jH(e,t,n){var o,s;const i={editorValueExists:!1};if(eM(e)){const a=(o=t.getValidationErrors)==null?void 0:o.call(t);if(((a==null?void 0:a.length)??0)>0)return i}if(n!=null&&n.isCancelling)return i;if(n!=null&&n.isStopping){const a=(s=t==null?void 0:t.isCancelAfterEnd)==null?void 0:s.call(t);if(a)return{...i,isCancelAfterEnd:a}}return{editorValue:t.getValue(),editorValueExists:!0}}function HH(e,t,n,i){var Y,X,q,ie,re,J;const{valueSvc:r,gos:o,editSvc:s}=e,a=e.gos.get("enableGroupEdit"),d=Fs(e,t),h=((Y=t.rowNode)==null?void 0:Y.rowIndex)??void 0,m=s==null?void 0:s.isBatchEditing(),v=e.colModel.getCol(t.column.getId()),{rowNode:w,column:R}=t,L=(X=d.comp)==null?void 0:X.getCellEditor(),O=s==null?void 0:s.getCellDataValue(t,!1),z=O===void 0?L?(q=jH(e,L))==null?void 0:q.editorValue:void 0:O,$=z===Sh?(ie=r.getValueForDisplay({column:v,node:w}))==null?void 0:ie.value:z;let U=a?z:$;return R.isAllowFormula()&&((re=e.formula)!=null&&re.isFormula(U))&&(U=((J=e.formula)==null?void 0:J.normaliseFormula(U,!0))??U),ki(o,{value:U,eventKey:n??null,column:R,colDef:R.getColDef(),rowIndex:h,node:w,data:w.data,cellStartedEdit:i??!1,onKeyDown:d==null?void 0:d.onKeyDown.bind(d),stopEditing:ne=>{s.stopEditing(t,{source:m?"ui":"api",suppressNavigateAfterEdit:ne}),BS(e,t)},eGridCell:d==null?void 0:d.eGui,parseValue:ne=>r.parseValue(v,w,ne,d==null?void 0:d.value),formatValue:d==null?void 0:d.formatValue.bind(d),validate:()=>{s==null||s.validateEdit()}})}function b_(e,t){const{editModelSvc:n}=e;n==null||n.getEditMap().forEach((i,r)=>{i.forEach((o,s)=>{!t&&(o.state==="editing"||o.pendingValue===Sh)||!Dp(o)&&(o.state!=="editing"||t)&&(n==null||n.removeEdits({rowNode:r,column:s}))})})}function C_e(e,t){var h;const n=(h=t.comp)==null?void 0:h.getCellEditor();if(!(n!=null&&n.refresh))return;const{eventKey:i,cellStartedEdit:r}=t.editCompDetails.params,{column:o}=t,s=HH(e,t,i,r),a=o.getColDef(),d=T7(e.userCompFactory,a,s);n.refresh(VH(d.params,i))}function VH(e,t){var n;return t instanceof KeyboardEvent&&e.column.getColDef().cellEditor==="agNumberCellEditor"?e.suppressPreventDefault=["-","+",".","e"].includes((t==null?void 0:t.key)??"")||e.suppressPreventDefault:(n=t==null?void 0:t.preventDefault)==null||n.call(t),e}function Ay(e,t){var n,i,r;for(const o of((n=e.editModelSvc)==null?void 0:n.getEditPositions())??[]){const s=Fs(e,o);if(!s)continue;const a=(i=s.comp)==null?void 0:i.getCellEditor();if(!a)continue;const{editorValue:d,editorValueExists:h,isCancelAfterEnd:m}=jH(e,a,t);m&&((r=e.editModelSvc)==null||r.setEdit(o,{editorState:{isCancelAfterEnd:m}})),x_(e,o,d,void 0,!h,t)}}function x_(e,t,n,i,r,o){const{editModelSvc:s,valueSvc:a}=e;if(!s)return;const{rowNode:d,column:h}=t;if(!(d&&h))return;let m=s.getEdit(t,!0);if(!(m!=null&&m.sourceValue)){const v={sourceValue:a.getValue(h,d,void 0,"api"),pendingValue:m?lx(e,m.editorValue,!1,h):Sh};o!=null&&o.persist&&(v.state="changed"),m=s.setEdit(t,v)}s.setEdit(t,{editorValue:r?lx(e,m.sourceValue,!0,h):n}),o!=null&&o.persist&&__e(e,t)}function lx(e,t,n,i){const{formula:r}=e;return i.isAllowFormula()&&(r!=null&&r.isFormula(t))?(r==null?void 0:r.normaliseFormula(t,n))??t:t}function __e(e,t){const{editModelSvc:n}=e,i=n==null?void 0:n.getEdit(t,!0);n==null||n.setEdit(t,{pendingValue:lx(e,i==null?void 0:i.editorValue,!1,t.column)})}function Hb(e,t,n){var i;t||(t=(i=e.editModelSvc)==null?void 0:i.getEditPositions());for(const r of t??[])BS(e,r,n)}function BS(e,t,n){var h,m;const i=e.gos.get("enableGroupEdit"),{editModelSvc:r}=e,o=Fs(e,t),s=r==null?void 0:r.getEdit(t,!0);if(!o){s&&(r==null||r.setEdit(t,{state:"changed"}));return}const{comp:a}=o;if(a&&!a.getCellEditor()){if(o==null||o.refreshCell(),s){r==null||r.setEdit(t,{state:"changed"});const v=i?u6(n,s):{valueChanged:!1,newValue:void 0,oldValue:s.sourceValue};c6(e,t,v,n)}return}if(eM(e)){const v=(m=(h=a==null?void 0:a.getCellEditor())==null?void 0:h.getValidationErrors)==null?void 0:m.call(h),w=r==null?void 0:r.getCellValidationModel();v!=null&&v.length?w==null||w.setCellValidation(t,{errorMessages:v}):w==null||w.clearCellValidation(t)}r==null||r.setEdit(t,{state:"changed"}),a==null||a.setEditDetails(),a==null||a.refreshEditStyles(!1,!1),o==null||o.refreshCell({force:!0,suppressFlash:!0});const d=r==null?void 0:r.getEdit(t);if(d&&d.state==="changed"){const v=i?u6(n,d):{valueChanged:Dp(d)&&!(n!=null&&n.cancel),newValue:n!=null&&n.cancel||d.editorState.isCancelAfterEnd?void 0:(d==null?void 0:d.editorValue)??(s==null?void 0:s.pendingValue),oldValue:d==null?void 0:d.sourceValue};c6(e,t,v,n)}}function u6(e,t){return e!=null&&e.cancel?{valueChanged:!1,oldValue:t.sourceValue,newValue:void 0,value:t.sourceValue}:{valueChanged:Dp(t),oldValue:t.sourceValue,newValue:t.pendingValue,value:t.sourceValue}}function c6(e,t,n,{silent:i,event:r}={}){const{editSvc:o,editModelSvc:s}=e,a=s==null?void 0:s.getEdit(t),{editorState:d}=a||{},{isCancelBeforeStart:h}=d||{};!i&&!h&&(o==null||o.dispatchCellEvent(t,r,"cellEditingStopped",n),s==null||s.setEdit(t,{editorState:{cellStoppedEditing:!0}}))}function eM(e){var s;const{gos:t,colModel:n}=e,i=!!t.get("getFullRowEditValidationErrors"),r=(s=n.getColumnDefs())==null?void 0:s.filter(a=>a.editable).some(({cellEditorParams:a})=>{const{minLength:d,maxLength:h,getValidationErrors:m,min:v,max:w}=a||{};return d!==void 0||h!==void 0||m!==void 0||v!==void 0||w!==void 0}),o=e.gridApi.getCellEditorInstances().some(a=>a.getValidationElement||a.getValidationErrors);return r||i||o}function v0(e,t){var w,R,L,O,z,$,U,Y;if(!(t||eM(e)))return;const n=GH(e),i=new NH,{ariaAnnounce:r,localeSvc:o,editModelSvc:s,gos:a}=e,d=a.get("editType")==="fullRow",m=W9(o)("ariaValidationErrorPrefix","Cell Editor Validation");for(const X of n){const{ctrl:q,editor:ie}=X,{rowNode:re,column:J}=q,ne=((w=ie.getValidationErrors)==null?void 0:w.call(ie))??[],be=((R=ie.getValidationElement)==null?void 0:R.call(ie,!1))||!((L=ie.isPopup)!=null&&L.call(ie))&&q.eGui;if(be){const ue=ne!=null&&ne.length>0,ve=ue?ne.join(". "):"";yF(be,ue),ue&&r.announceValue(`${m} ${ne}`,"editorValidation"),be instanceof HTMLInputElement?be.setCustomValidity(ve):be.classList.toggle("invalid",ue)}(ne==null?void 0:ne.length)>0&&i.setCellValidation({rowNode:re,column:J},{errorMessages:ne})}Ay(e,{persist:!1}),s==null||s.setCellValidationModel(i);const v=new Set;for(const{ctrl:X}of n)v.add(X.rowCtrl);if(d){const X=S_e(e);s==null||s.setRowValidationModel(X)}for(const X of v.values()){(O=X.rowEditStyleFeature)==null||O.applyRowStyles();for(const q of X.getAllCellCtrls())(z=q.tooltipFeature)==null||z.refreshTooltip(!0),($=q.editorTooltipFeature)==null||$.refreshTooltip(!0),(Y=(U=q.editStyleFeature)==null?void 0:U.applyCellStyles)==null||Y.call(U)}}var S_e=e=>{var r;const t=new BH,n=e.gos.get("getFullRowEditValidationErrors"),i=(r=e.editModelSvc)==null?void 0:r.getEditMap();if(!i)return t;for(const o of i.keys()){const s=i.get(o);if(!s)continue;const a=[],{rowIndex:d,rowPinned:h}=o;for(const v of s.keys()){const w=s.get(v);if(!w)continue;const{editorValue:R,pendingValue:L,sourceValue:O}=w,z=R??(L===Sh?void 0:L)??O;a.push({column:v,colId:v.getColId(),rowIndex:d,rowPinned:h,oldValue:O,newValue:z})}const m=(n==null?void 0:n({editorsState:a}))??[];m.length>0&&t.setRowValidation({rowNode:o},{errorMessages:m})}return t};function E_e(e){var i;v0(e,!0);const t=(i=e.editModelSvc)==null?void 0:i.getCellValidationModel().getCellValidationMap();if(!t)return null;const n=[];return t.forEach((r,o)=>{r.forEach(({errorMessages:s},a)=>{n.push({column:a,rowIndex:o.rowIndex,rowPinned:o.rowPinned,messages:s??null})})}),n}function R_e(e,t,n,{rowNode:i,column:r},o){return ki(e.gos,{type:n,node:i,data:i.data,value:o,column:r,colDef:r.getColDef(),rowPinned:i.rowPinned,event:t,rowIndex:i.rowIndex})}function A_e(e,t=!1){return e===kt.DELETE?!0:!t&&e===kt.BACKSPACE?D7():!1}var T_e=class extends Yt{constructor(e,t,n,i){super(),this.cellCtrl=e,this.rowNode=n,this.rowCtrl=i,this.beans=t}init(){this.eGui=this.cellCtrl.eGui}onKeyDown(e){const t=e.key;switch(t){case kt.ENTER:this.onEnterKeyDown(e);break;case kt.F2:this.onF2KeyDown(e);break;case kt.ESCAPE:this.onEscapeKeyDown(e);break;case kt.TAB:this.onTabKeyDown(e);break;case kt.BACKSPACE:case kt.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case kt.DOWN:case kt.UP:case kt.RIGHT:case kt.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){var r,o;const{cellCtrl:n,beans:i}=this;if(!((r=i.editSvc)!=null&&r.isEditing(n,{withOpenEditor:!0}))){if(e.shiftKey&&n.isRangeSelectionEnabled())this.onShiftRangeSelect(e);else{const s=n.getFocusedCellPosition();(o=i.navigation)==null||o.navigateToNextCell(e,t,s,!0)}e.preventDefault()}}onShiftRangeSelect(e){const{rangeSvc:t,navigation:n}=this.beans;if(!t)return;const i=t.extendLatestRangeInDirection(e);i&&(e.key===kt.LEFT||e.key===kt.RIGHT?n==null||n.ensureColumnVisible(i.column):n==null||n.ensureRowVisible(i.rowIndex))}onTabKeyDown(e){var t;(t=this.beans.navigation)==null||t.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){var h;const{cellCtrl:n,beans:i,rowNode:r}=this,{gos:o,rangeSvc:s,eventSvc:a,editSvc:d}=i;if(a.dispatchEvent({type:"keyShortcutChangedCellStart"}),A_e(e,o.get("enableCellEditingOnBackspace"))&&!(d!=null&&d.isEditing(n,{withOpenEditor:!0}))){if(s&&Oy(o))s.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(n.isCellEditable()){const{column:m}=n,v=this.beans.valueSvc.getDeleteValue(m,r);r.setDataValue(m,v,"cellClear")}}else d!=null&&d.isEditing(n,{withOpenEditor:!0})||(h=i.editSvc)==null||h.startEditing(n,{startedEdit:!0,event:t});a.dispatchEvent({type:"keyShortcutChangedCellEnd"})}onEnterKeyDown(e){var h;const{cellCtrl:t,beans:n}=this,{editSvc:i,navigation:r}=n,o=i==null?void 0:i.isEditing(t,{withOpenEditor:!0}),s=t.rowNode,a=i==null?void 0:i.isRowEditing(s,{withOpenEditor:!0}),d=m=>{(i==null?void 0:i.startEditing(m,{startedEdit:!0,event:e,source:"edit"}))&&e.preventDefault()};if(o||a){if(this.isCtrlEnter(e)){i==null||i.applyBulkEdit(t,((h=n==null?void 0:n.rangeSvc)==null?void 0:h.getCellRanges())||[]);return}if(v0(n),(i==null?void 0:i.checkNavWithValidation(void 0,e))==="block-stop")return;i!=null&&i.isEditing(t,{withOpenEditor:!0})?i==null||i.stopEditing(t,{event:e,source:"edit"}):a&&!t.isCellEditable()?i==null||i.stopEditing({rowNode:s},{event:e,source:"edit"}):d(t)}else if(n.gos.get("enterNavigatesVertically")){const m=e.shiftKey?kt.UP:kt.DOWN;r==null||r.navigateToNextCell(null,m,t.cellPosition,!1)}else{if(i!=null&&i.hasValidationErrors())return;i!=null&&i.hasValidationErrors(t)&&i.revertSingleCellEdit(t,!0),d(t)}}isCtrlEnter(e){return(e.ctrlKey||e.metaKey)&&e.key===kt.ENTER}onF2KeyDown(e){const{cellCtrl:t,beans:{editSvc:n}}=this;n!=null&&n.isEditing()&&(v0(this.beans),(n==null?void 0:n.checkNavWithValidation(void 0,e))==="block-stop")||n==null||n.startEditing(t,{startedEdit:!0,event:e})}onEscapeKeyDown(e){const{cellCtrl:t,beans:{editSvc:n}}=this;(n==null?void 0:n.checkNavWithValidation(t,e))==="block-stop"&&n.revertSingleCellEdit(t),setTimeout(()=>{n==null||n.stopEditing(t,{event:e,cancel:!0})})}processCharacter(e){var s;const n=e.target!==this.eGui,{beans:{editSvc:i},cellCtrl:r}=this;if(n||i!=null&&i.isEditing(r,{withOpenEditor:!0}))return;if(e.key===kt.SPACE)this.onSpaceKeyDown(e);else if(i!=null&&i.isCellEditable(r,"ui")){if(i!=null&&i.hasValidationErrors()&&!(i!=null&&i.hasValidationErrors(r)))return;i==null||i.startEditing(r,{startedEdit:!0,event:e,source:"api"});const a=r.editCompDetails;!((s=a==null?void 0:a.params)!=null&&s.suppressPreventDefault)&&e.preventDefault()}}onSpaceKeyDown(e){var r;const{gos:t,editSvc:n}=this.beans,{rowNode:i}=this.cellCtrl;!(n!=null&&n.isEditing(this.cellCtrl,{withOpenEditor:!0}))&&t0(t)&&((r=this.beans.selectionSvc)==null||r.handleSelectionEvent(e,i,"spaceKey")),e.preventDefault()}},k_e=class extends Yt{constructor(e,t,n){super(),this.cellCtrl=e,this.column=n,this.beans=t}onMouseEvent(e,t){if(!om(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){var O;if((O=this.beans.touchSvc)!=null&&O.handleCellDoubleClick(this,e))return;const{eventSvc:t,rangeSvc:n,editSvc:i,editModelSvc:r,frameworkOverrides:o,gos:s}=this.beans,a=e.ctrlKey||e.metaKey,{cellCtrl:d}=this,{column:h,cellPosition:m,rowNode:v}=d,w=g_(s,h,v,e);n&&a&&!w&&n.getCellRangeCount(m)>1&&n.intersectLastRange(!0);const R=d.createEvent(e,"cellClicked");R.isEventHandlingSuppressed=w,t.dispatchEvent(R);const L=h.getColDef();if(L.onCellClicked&&window.setTimeout(()=>{o.wrapOutgoing(()=>{L.onCellClicked(R)})},0),!w&&(r==null?void 0:r.getState(d))!=="editing"){const z=i==null?void 0:i.isEditing(),$=(r==null?void 0:r.getCellValidationModel().getCellValidationMap().size)??0,U=(r==null?void 0:r.getRowValidationModel().getRowValidationMap().size)??0;if(z&&($>0||U>0))return;i!=null&&i.shouldStartEditing(d,e)?i==null||i.startEditing(d,{event:e}):i!=null&&i.shouldStopEditing(d,e)&&(this.beans.gos.get("editType")==="fullRow"?i==null||i.stopEditing(d,{event:e,source:"edit"}):i==null||i.stopEditing(void 0,{event:e,source:"edit"}))}}onCellDoubleClicked(e){const{column:t,beans:n,cellCtrl:i}=this,{eventSvc:r,frameworkOverrides:o,editSvc:s,editModelSvc:a,gos:d}=n,h=g_(d,i.column,i.rowNode,e),m=t.getColDef(),v=i.createEvent(e,"cellDoubleClicked");if(v.isEventHandlingSuppressed=h,r.dispatchEvent(v),typeof m.onCellDoubleClicked=="function"&&window.setTimeout(()=>{o.wrapOutgoing(()=>{m.onCellDoubleClicked(v)})},0),!h&&s!=null&&s.shouldStartEditing(i,e)&&(a==null?void 0:a.getState(i))!=="editing"){const w=s==null?void 0:s.isEditing(),R=(a==null?void 0:a.getCellValidationModel().getCellValidationMap().size)??0,L=(a==null?void 0:a.getRowValidationModel().getRowValidationMap().size)??0;if(w&&(R>0||L>0))return;s==null||s.startEditing(i,{event:e})}}onMouseDown(e){const{shiftKey:t}=e,n=e.target,{cellCtrl:i,beans:r}=this,{eventSvc:o,rangeSvc:s,rowNumbersSvc:a,focusSvc:d,gos:h,editSvc:m}=r,{column:v,rowNode:w,cellPosition:R}=i,L=g_(h,v,w,e),O=()=>{const Y=i.createEvent(e,"cellMouseDown");Y.isEventHandlingSuppressed=L,o.dispatchEvent(Y)};if(L){O();return}if(this.isRightClickInExistingRange(e))return;const z=s&&!s.isEmpty(),$=this.containsWidget(n),U=im(v);if(!(a&&U&&!a.handleMouseDownOnCell(R,e))){if(!t||!z){const Y=m==null?void 0:m.isEditing(i),q=h.get("enableCellTextSelection")&&e.defaultPrevented,ie=(Wy()||q)&&!Y&&!Pw(n)&&!$;i.focusCell(ie,e)}if(t&&z&&!d.isCellFocused(R)){e.preventDefault();const Y=d.getFocusedCell();if(Y){const{column:X,rowIndex:q,rowPinned:ie}=Y;m!=null&&m.isEditing(Y)&&(m==null||m.stopEditing(Y)),d.setFocusedCell({column:X,rowIndex:q,rowPinned:ie,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,sourceEvent:e})}}$||(s==null||s.handleCellMouseDown(e,R),O())}}isRightClickInExistingRange(e){const{rangeSvc:t}=this.beans;if(t){const n=t.isCellInAnyRange(this.cellCtrl.cellPosition),i=Ume(this.beans,e);if(n&&i)return!0}return!1}containsWidget(e){return Qv(e,"ag-selection-checkbox",3)||Qv(e,"ag-drag-handle",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:n}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),n==null||n.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:n}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),n==null||n.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.eGui,n=t.contains(e.target),i=t.contains(e.relatedTarget);return n&&i}},P_e=class extends Yt{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.column,this.rowNode=e.rowNode}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}init(){this.eSetLeft=this.cellCtrl.getRootElement(),this.eContent=this.cellCtrl.eGui;const e=this.cellCtrl.getCellSpan();if(e||(this.setupColSpan(),this.setupRowSpan()),this.onLeftChanged(),this.onWidthChanged(),e||this._legacyApplyRowSpan(),e){const t=this.refreshSpanHeight.bind(this,e);t(),this.addManagedListeners(this.beans.eventSvc,{paginationChanged:t,recalculateRowBounds:t,pinnedHeightChanged:t})}}refreshSpanHeight(e){const t=e.getCellHeight();t!=null&&(this.eContent.style.height=`${t}px`)}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this._legacyApplyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();Vy(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eContent)return;const e=this.getCellWidth();this.eContent.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const{column:e,rowNode:t}=this,n=e.getColSpan(t),i=[];if(n===1)i.push(e);else{let r=e;const o=e.getPinned();for(let s=0;r&&s<n&&(i.push(r),r=this.beans.visibleCols.getColAfter(r),!(!r||vs(r)||o!==r.getPinned()));s++);}return i}onLeftChanged(){if(!this.eSetLeft)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eSetLeft.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=Wo(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.printLayout||this.column.getPinned()==="left")return e;const{visibleCols:t}=this.beans,n=t.getColsLeftWidth();if(this.column.getPinned()==="right"){const i=t.bodyWidth;return n+i+(e||0)}return n+(e||0)}_legacyApplyRowSpan(e){if(this.rowSpan===1&&!e)return;const n=n0(this.beans)*this.rowSpan;this.eContent.style.height=`${n}px`,this.eContent.style.zIndex="1"}destroy(){super.destroy()}},D_e="ag-cell",F_e="ag-cell-auto-height",M_e="ag-cell-normal-height",I_e="ag-cell-focus",L_e="ag-cell-first-right-pinned",O_e="ag-cell-last-left-pinned",z_e="ag-cell-not-inline-editing",N_e="ag-cell-wrap-text",B_e=0,Vb=class extends Yt{constructor(e,t,n,i){super(),this.column=e,this.rowNode=t,this.rowCtrl=i,this.rangeFeature=void 0,this.rowResizeFeature=void 0,this.positionFeature=void 0,this.customStyleFeature=void 0,this.editStyleFeature=void 0,this.mouseListener=void 0,this.keyboardListener=void 0,this.suppressRefreshCell=!1,this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.focusEventWhileNotReady=null,this.hasBeenFocused=!1,this.hasEdit=!1,this.tooltipFeature=void 0,this.editorTooltipFeature=void 0,this.formulaTooltipFeature=void 0,this.beans=n,this.gos=n.gos,this.editSvc=n.editSvc,this.hasEdit=!!n.editSvc;const{colId:r}=e;this.instanceId=r+"-"+B_e++,this.createCellPosition(),this.updateAndFormatValue(!1)}addFeatures(){var i,r;const{beans:e}=this;this.positionFeature=new P_e(this,e),this.customStyleFeature=(i=e.cellStyles)==null?void 0:i.createCellCustomStyleFeature(this),this.editStyleFeature=(r=e.editSvc)==null?void 0:r.createCellStyleFeature(this),this.mouseListener=new k_e(this,e,this.column),this.keyboardListener=new T_e(this,e,this.rowNode,this.rowCtrl),this.enableTooltipFeature(),this.enableFormulaTooltipFeature();const{rangeSvc:t}=e;t&&Oy(e.gos)&&(this.rangeFeature=t.createCellRangeFeature(this)),im(this.column)&&(this.rowResizeFeature=this.beans.rowNumbersSvc.createRowNumbersRowResizerFeature(this))}isCellSpanning(){return!1}getCellSpan(){}removeFeatures(){const e=this.beans.context;this.positionFeature=e.destroyBean(this.positionFeature),this.editorTooltipFeature=e.destroyBean(this.editorTooltipFeature),this.customStyleFeature=e.destroyBean(this.customStyleFeature),this.editStyleFeature=e.destroyBean(this.editStyleFeature),this.mouseListener=e.destroyBean(this.mouseListener),this.keyboardListener=e.destroyBean(this.keyboardListener),this.rangeFeature=e.destroyBean(this.rangeFeature),this.rowResizeFeature=e.destroyBean(this.rowResizeFeature),this.disableTooltipFeature(),this.disableFormulaTooltipFeature()}enableTooltipFeature(e,t){var n;this.tooltipFeature=(n=this.beans.tooltipSvc)==null?void 0:n.enableCellTooltipFeature(this,e,t)}enableFormulaTooltipFeature(){var e;this.formulaTooltipFeature=(e=this.beans.tooltipSvc)==null?void 0:e.setupFormulaTooltip(this)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}disableFormulaTooltipFeature(){this.formulaTooltipFeature=this.beans.context.destroyBean(this.formulaTooltipFeature)}enableEditorTooltipFeature(e){var t;this.editorTooltipFeature&&this.disableEditorTooltipFeature(),this.editorTooltipFeature=(t=this.beans.tooltipSvc)==null?void 0:t.setupCellEditorTooltip(this,e),v0(this.beans)}disableEditorTooltipFeature(){this.editorTooltipFeature=this.beans.context.destroyBean(this.editorTooltipFeature)}setComp(e,t,n,i,r,o,s){var a,d,h,m,v,w,R,L,O;if(this.comp=e,this.eGui=t,this.printLayout=r,s??(s=this),this.addDomData(s),this.addFeatures(),s.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.setupFocus(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(i,s),this.refreshFirstAndLastStyles(),this.checkFormulaError(),this.refreshAriaColIndex(),(a=this.positionFeature)==null||a.init(),(d=this.customStyleFeature)==null||d.setComp(e),(h=this.editStyleFeature)==null||h.setComp(e),(m=this.tooltipFeature)==null||m.refreshTooltip(),(v=this.keyboardListener)==null||v.init(),(w=this.rangeFeature)==null||w.setComp(e),(R=this.rowResizeFeature)==null||R.refreshRowResizer(),o&&this.isCellEditable()||this.hasEdit&&((L=this.editSvc)!=null&&L.isEditing(this,{withOpenEditor:!0}))?(O=this.editSvc)==null||O.startEditing(this,{startedEdit:!1,source:"api",silent:!0,continueEditing:!0}):this.showValue(!1,!0),this.onCompAttachedFuncs.length){for(const z of this.onCompAttachedFuncs)z();this.onCompAttachedFuncs=[]}}checkFormulaError(){var t,n;const e=!!((t=this.beans.formula)!=null&&t.getFormulaError(this.column,this.rowNode));this.eGui.classList.toggle("formula-error",e),(n=this.formulaTooltipFeature)==null||n.refreshTooltip(),e?this.disableTooltipFeature():this.enableTooltipFeature()}setupAutoHeight(e,t){var n;this.isAutoHeight=((n=this.beans.rowAutoHeight)==null?void 0:n.setupCellAutoHeight(this,e,t))??!1}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){const e=this.column.getColDef();return e.cellRenderer!=null||e.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}getDeferLoadingCellRenderer(){var d,h;const{beans:e,column:t}=this,{userCompFactory:n,ctrlsSvc:i,eventSvc:r}=e,o=t.getColDef(),s=this.createCellRendererParams();s.deferRender=!0;const a=x4(n,o,s);if((h=(d=i.getGridBodyCtrl())==null?void 0:d.scrollFeature)!=null&&h.isScrolling()){let m;const v=new Fr(R=>{m=R}),[w]=this.addManagedListeners(r,{bodyScrollEnd:()=>{m(),w()}});return{loadingComp:a,onReady:v}}return{loadingComp:a,onReady:Fr.resolve()}}showValue(e,t){var v,w,R,L;const{beans:n,column:i,rowNode:r,rangeFeature:o}=this,{userCompFactory:s}=n;let a=this.getValueToDisplay(),d;const h=r.stub&&((v=r.groupData)==null?void 0:v[i.getId()])==null,m=i.getColDef();if(h||this.isCellRenderer()){const O=this.createCellRendererParams();!h||im(i)?d=b4(s,m,O):d=x4(s,m,O)}if(!d&&!h&&((w=n.findSvc)!=null&&w.isMatch(r,i))){const O=this.createCellRendererParams();d=b4(s,{...i.getColDef(),cellRenderer:"agFindCellRenderer"},O)}if(this.hasEdit&&this.editSvc.isBatchEditing()&&this.editSvc.isRowEditing(r,{checkSiblings:!0})){const O=this.editSvc.prepDetailsDuringBatch(this,{compDetails:d,valueToDisplay:a});O&&(O.compDetails?d=O.compDetails:O.valueToDisplay&&(a=O.valueToDisplay))}this.comp.setRenderDetails(d,a,e),(R=this.customRowDragComp)==null||R.refreshVisibility(),!t&&o&&Rm(n,()=>o==null?void 0:o.refreshHandle()),(L=this.rowResizeFeature)==null||L.refreshRowResizer()}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(e),!0),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.comp.setIncludeSelection(this.includeSelection),this.comp.setIncludeDndSource(this.includeDndSource),this.comp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}getCellValueClass(){const e="ag-cell-value",t=this.column.getColDef().cellRenderer==="agCheckboxCellRenderer";let n="";return t&&(n=" ag-allow-overflow"),`${e}${n}`}isIncludeControl(e,t=!1){return(this.rowNode.rowPinned==null||t&&Q1(this.rowNode))&&!!e}isCheckboxSelection(e){const{rowSelection:t,groupDisplayType:n}=this.beans.gridOptions,i=ES(t),r=$y(this.column);return n==="custom"&&i!=="selectionColumn"&&r?!1:e.checkboxSelection||r&&typeof t=="object"&&Ib(t)}refreshShouldDestroy(){const e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(e),!0),n=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),i=this.includeDndSource!=this.isIncludeControl(e.dndSource),r=this.isAutoHeight!=this.column.isAutoHeight();return t||n||i||r}onPopupEditorClosed(){const{editSvc:e}=this.beans;e!=null&&e.isEditing(this,{withOpenEditor:!0})&&(e==null||e.stopEditing(this,{source:e!=null&&e.isBatchEditing()?"ui":"api"}))}stopEditing(e=!1){const{editSvc:t}=this.beans;return(t==null?void 0:t.stopEditing(this,{cancel:e,source:t!=null&&t.isBatchEditing()?"ui":"api"}))??!1}createCellRendererParams(){const{value:e,valueFormatted:t,column:n,rowNode:i,comp:r,eGui:o,beans:{valueSvc:s,gos:a,editSvc:d}}=this;return ki(a,{value:e,valueFormatted:t,getValue:()=>s.getValueForDisplay({column:n,node:i}).value,setValue:m=>(d==null?void 0:d.setDataValue({rowNode:i,column:n},m))||i.setDataValue(n,m),formatValue:this.formatValue.bind(this),data:i.data,node:i,pinned:n.getPinned(),colDef:n.getColDef(),column:n,refreshCell:this.refreshCell.bind(this),eGridCell:o,eParentOfValue:r.getParentOfValue(),registerRowDragger:(m,v,w,R)=>this.registerRowDragger(m,v,R),setTooltip:(m,v)=>{var w;a.assertModuleRegistered("Tooltip",3),this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(m,v),(w=this.tooltipFeature)==null||w.refreshTooltip()}})}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){var t;if(this.refreshShouldDestroy()?(t=this.rowCtrl)==null||t.recreateCell(this):this.refreshCell(e),this.hasEdit&&this.editCompDetails){const{editSvc:n,comp:i}=this;!(i!=null&&i.getCellEditor())&&n.isEditing(this,{withOpenEditor:!0})&&n.startEditing(this,{startedEdit:!1,source:"api",silent:!0})}}refreshCell({force:e,suppressFlash:t,newData:n}={}){var q;const{editStyleFeature:i,customStyleFeature:r,rowCtrl:{rowEditStyleFeature:o},beans:{cellFlashSvc:s,filterManager:a},column:d,comp:h,suppressRefreshCell:m,tooltipFeature:v}=this;if(m)return;const{field:w,valueGetter:R,showRowGroup:L,enableCellChangeFlash:O}=d.getColDef(),z=w==null&&R==null&&L==null,$=e||z||n,U=!!h,Y=this.updateAndFormatValue(U),X=$||Y;if(U){if(X){this.showValue(!!n,!1);const ie=a==null?void 0:a.isSuppressFlashingCellsBecauseFiltering();!t&&!ie&&O&&(s==null||s.flashCell(this)),(q=i==null?void 0:i.applyCellStyles)==null||q.call(i),r==null||r.applyUserStyles(),r==null||r.applyClassesFromColDef(),o==null||o.applyRowStyles(),this.checkFormulaError()}v==null||v.refreshTooltip(),r==null||r.applyCellClassRules()}}isCellEditable(){return this.column.isCellEditable(this.rowNode)}formatValue(e){return this.callValueFormatter(e)??e}callValueFormatter(e){return this.beans.valueSvc.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){const t=this.value,n=this.valueFormatted,{value:i,valueFormatted:r}=this.beans.valueSvc.getValueForDisplay({column:this.column,node:this.rowNode,includeValueFormatted:!0});return this.value=i,this.valueFormatted=r,e?!this.valuesAreEqual(t,this.value)||this.valueFormatted!=n:!0}valuesAreEqual(e,t){const n=this.column.getColDef();return n.equals?n.equals(e,t):e===t}addDomData(e){const t=this.eGui;g0(this.beans.gos,t,LS,this),e.addDestroyFunc(()=>g0(this.beans.gos,t,LS,null))}createEvent(e,t){const{rowNode:n,column:i,value:r,beans:o}=this;return R_e(o,e,t,{rowNode:n,column:i},r)}processCharacter(e){var t;(t=this.keyboardListener)==null||t.processCharacter(e)}onKeyDown(e){var t;(t=this.keyboardListener)==null||t.onKeyDown(e)}onMouseEvent(e,t){var n;(n=this.mouseListener)==null||n.onMouseEvent(e,t)}getColSpanningList(){var e;return((e=this.positionFeature)==null?void 0:e.getColSpanningList())??[]}onLeftChanged(){var e;this.comp&&((e=this.positionFeature)==null||e.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{comp:e,column:t,beans:n}=this;pH(e,t,n.visibleCols)}refreshAriaColIndex(){const e=this.beans.visibleCols.getAriaColIndex(this.column);O9(this.eGui,e)}onWidthChanged(){var e;return(e=this.positionFeature)==null?void 0:e.onWidthChanged()}getRowPosition(){const{rowIndex:e,rowPinned:t}=this.cellPosition;return{rowIndex:e,rowPinned:t}}updateRangeBordersIfRangeCount(){var e;this.comp&&((e=this.rangeFeature)==null||e.updateRangeBordersIfRangeCount())}onCellSelectionChanged(){var e;this.comp&&((e=this.rangeFeature)==null||e.onCellSelectionChanged())}isRangeSelectionEnabled(){return this.rangeFeature!=null}focusCell(e=!1,t){var i;const n=(i=this.editSvc)==null?void 0:i.allowedFocusTargetOnValidation(this);n&&n!==this||this.beans.focusSvc.setFocusedCell({...this.getFocusedCellPosition(),forceBrowserFocus:e,sourceEvent:t})}restoreFocus(e=!1){const{beans:{editSvc:t,focusSvc:n},comp:i}=this;if(!i||t!=null&&t.isEditing(this)||!this.isCellFocused()||!n.shouldTakeFocus())return;const r=()=>{if(!this.isAlive())return;const o=i.getFocusableElement();this.isCellFocused()&&o.focus({preventScroll:!0})};if(e){setTimeout(r,0);return}r()}onRowIndexChanged(){var e,t;this.createCellPosition(),this.onCellFocused(),this.restoreFocus(),(e=this.rangeFeature)==null||e.onCellSelectionChanged(),(t=this.rowResizeFeature)==null||t.refreshRowResizer()}onSuppressCellFocusChanged(e){const t=this.eGui;t&&(im(this.column)&&(e=!0),Nc(t,"tabindex",e?void 0:-1))}onFirstRightPinnedChanged(){if(!this.comp)return;const e=this.column.isFirstRightPinned();this.comp.toggleCss(L_e,e)}onLastLeftPinnedChanged(){if(!this.comp)return;const e=this.column.isLastLeftPinned();this.comp.toggleCss(O_e,e)}checkCellFocused(){return this.beans.focusSvc.isCellFocused(this.cellPosition)}isCellFocused(){const e=this.checkCellFocused();return this.hasBeenFocused||(this.hasBeenFocused=e),e}setupFocus(){this.restoreFocus(!0),this.onCellFocused(this.focusEventWhileNotReady??void 0)}onCellFocused(e){var r;const{beans:t}=this;if(X2(t))return;if(!this.comp){e&&(this.focusEventWhileNotReady=e);return}const n=this.isCellFocused(),i=((r=t.editSvc)==null?void 0:r.isEditing(this))??!1;if(this.comp.toggleCss(I_e,n),n&&(e!=null&&e.forceBrowserFocus)){let o=this.comp.getFocusableElement();if(i){const s=Nb(o,null,!0);s.length&&(o=s[0])}o.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}n&&e&&this.rowCtrl.announceDescription()}createCellPosition(){const{rowIndex:e,rowPinned:t}=this.rowNode;this.cellPosition={rowIndex:e,rowPinned:nm(t),column:this.column}}applyStaticCssClasses(){const{comp:e}=this;e.toggleCss(D_e,!0),e.toggleCss(z_e,!0);const t=this.column.isAutoHeight()==!0;e.toggleCss(F_e,t),e.toggleCss(M_e,!t)}onColumnHover(){var e;(e=this.beans.colHover)==null||e.onCellColumnHover(this.column,this.comp)}onColDefChanged(){var e,t;this.comp&&(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),(e=this.editSvc)!=null&&e.isEditing(this)?(t=this.editSvc)==null||t.handleColDefChanged(this):this.refreshOrDestroyCell({force:!0,suppressFlash:!0}))}setWrapText(){const e=this.column.getColDef().wrapText==!0;this.comp.toggleCss(N_e,e)}dispatchCellContextMenuEvent(e){const t=this.column.getColDef(),n=this.createEvent(e,"cellContextMenu"),{beans:i}=this;i.eventSvc.dispatchEvent(n),t.onCellContextMenu&&window.setTimeout(()=>{i.frameworkOverrides.wrapOutgoing(()=>{t.onCellContextMenu(n)})},0)}getCellRenderer(){var e;return((e=this.comp)==null?void 0:e.getCellRenderer())??null}destroy(){this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.isCellFocused()&&this.hasBrowserFocus()&&this.beans.focusSvc.attemptToRecoverFocus(),super.destroy()}hasBrowserFocus(){var e;return((e=this.eGui)==null?void 0:e.contains(Os(this.beans)))??!1}createSelectionCheckbox(){var t;const e=(t=this.beans.selectionSvc)==null?void 0:t.createCheckboxSelectionComponent();if(e)return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){const e=this.beans.registry.createDynamicBean("dndSourceComp",!1,this.rowNode,this.column,this.eGui);return e&&this.beans.context.createBean(e),e}registerRowDragger(e,t,n){if(this.customRowDragComp){this.customRowDragComp.setDragElement(e,t);return}const i=this.createRowDragComp(e,t,n);i&&(this.customRowDragComp=i,this.addDestroyFunc(()=>{this.beans.context.destroyBean(i),this.customRowDragComp=null}),i.refreshVisibility())}createRowDragComp(e,t,n){var r;const i=(r=this.beans.rowDragSvc)==null?void 0:r.createRowDragCompForCell(this.rowNode,this.column,()=>this.value,e,t,n);if(i)return this.beans.context.createBean(i),i}cellEditorAttached(){for(const e of this.onEditorAttachedFuncs)e();this.onEditorAttachedFuncs=[]}setFocusedCellPosition(e){}getFocusedCellPosition(){return this.cellPosition}refreshAriaRowIndex(){}getRootElement(){return this.eGui}};function tM(e,t,n,i,r,o){if(n==null&&t==null)return;const s={},a={},d=(h,m)=>{for(const v of h.split(" "))v.trim()!=""&&m(v)};if(n){const h=Object.keys(n);for(let m=0;m<h.length;m++){const v=h[m],w=n[v];let R;typeof w=="string"?R=e?e.evaluate(w,i):!0:typeof w=="function"&&(R=w(i)),d(v,L=>{R?s[L]=!0:a[L]=!0})}}if(t&&o)for(const h of Object.keys(t))d(h,m=>{s[m]||(a[m]=!0)});o&&Object.keys(a).forEach(o),Object.keys(s).forEach(r)}function d6(e){if(e.group)return e.level;const t=e.parent;return t?t.level+1:0}var G_e=class extends Yt{constructor(){super(...arguments),this.beanName="rowStyleSvc"}processClassesFromGridOptions(e,t){const n=this.gos,i=s=>{if(typeof s=="string")e.push(s);else if(Array.isArray(s))for(const a of s)e.push(a)},r=n.get("rowClass");r&&i(r);const o=n.getCallback("getRowClass");if(o){const s={data:t.data,node:t,rowIndex:t.rowIndex},a=o(s);i(a)}}preProcessRowClassRules(e,t){this.processRowClassRules(t,n=>{e.push(n)},()=>{})}processRowClassRules(e,t,n){const{gos:i,expressionSvc:r}=this.beans,o=ki(i,{data:e.data,node:e,rowIndex:e.rowIndex});tM(r,void 0,i.get("rowClassRules"),o,t,n)}processStylesFromGridOptions(e){const t=this.gos,n=t.get("rowStyle"),i=t.getCallback("getRowStyle");let r;if(i){const o={data:e.data,node:e,rowIndex:e.rowIndex};r=i(o)}if(r||n)return Object.assign({},n,r)}},j_e=0,GS=class extends Yt{constructor(e,t,n,i,r){var o,s;super(),this.rowNode=e,this.useAnimationFrameForCreate=i,this.printLayout=r,this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKey=null,this.beans=t,this.gos=t.gos,this.paginationPage=((o=t.pagination)==null?void 0:o.getCurrentPage())??0,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+j_e++,this.rowId=kw(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=d6(this.rowNode),this.setRowType(),this.setAnimateFlags(n),this.rowStyles=this.processStylesFromGridOptions(),this.rowEditStyleFeature=(s=t.editSvc)==null?void 0:s.createRowStyleFeature(this),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKey=kw(e)}updateGui(e,t){e==="left"?this.leftGui=t:e==="right"?this.rightGui=t:e==="fullWidth"?this.fullWidthGui=t:this.centerGui=t}setComp(e,t,n,i){var v,w;const{context:r,focusSvc:o}=this.beans;i=K1(this,r,i);const s={rowComp:e,element:t,containerType:n,compBean:i};this.allRowGuis.push(s),this.updateGui(n,s),this.initialiseRowComp(s);const a=this.rowNode,d=this.rowType==="FullWidthLoading"||a.stub,h=!a.data&&this.beans.rowModel.getType()==="infinite";!d&&!h&&!a.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent();const m=(v=this.fullWidthGui)==null?void 0:v.element;m&&!((w=this.beans.editSvc)!=null&&w.isEditing(this))&&o.isRowFocused(a.rowIndex,a.rowPinned)&&o.shouldTakeFocus()&&setTimeout(()=>m.focus({preventScroll:!0}),0)}unsetComp(e){this.allRowGuis=this.allRowGuis.filter(t=>t.containerType!==e),this.updateGui(e,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(e){const t=e?"none":"";for(const n of this.allRowGuis)n.element.style.display=t}initialiseRowComp(e){const t=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(e),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),t0(t)&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);const n=e.rowComp,i=this.getInitialRowClasses(e.containerType);for(const r of i)n.toggleCss(r,!0);this.executeSlideAndFadeAnimations(e),this.rowNode.group&&xk(e.element,this.rowNode.expanded==!0),this.setRowCompRowId(n),this.setRowCompRowBusinessKey(n),g0(t,e.element,OS,this),e.compBean.addDestroyFunc(()=>g0(t,e.element,OS,null)),this.useAnimationFrameForCreate?this.beans.animationFrameSvc.createTask(this.addHoverFunctionality.bind(this,e),this.rowNode.rowIndex,"p2",!1):this.addHoverFunctionality(e),this.isFullWidth()&&this.setupFullWidth(e),t.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameSvc.addDestroyTask(()=>{this.isAlive()&&e.rowComp.toggleCss("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){this.businessKey!=null&&e.setRowBusinessKey(this.businessKey)}setRowCompRowId(e){const t=kw(this.rowNode.id);this.rowId=t,t!=null&&e.setRowId(t)}executeSlideAndFadeAnimations(e){const{containerType:t}=e;this.slideInAnimation[t]&&(Ck(()=>{this.onTopChanged()}),this.slideInAnimation[t]=!1),this.fadeInAnimation[t]&&(Ck(()=>{e.rowComp.toggleCss("ag-opacity-zero",!1)}),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){var i;const t=(i=this.beans.rowDragSvc)==null?void 0:i.createRowDragCompForRow(this.rowNode,e.element);if(!t)return;const n=this.createBean(t,this.beans.context);this.rowDragComps.push(n),e.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(r=>r!==n),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,this.beans.context),this.destroyBean(n,this.beans.context)})}setupFullWidth(e){const t=this.getPinnedForContainer(e.containerType),n=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(n)}getFullWidthCellRenderers(){var e,t;return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(n=>{var i;return(i=n==null?void 0:n.rowComp)==null?void 0:i.getFullWidthCellRenderer()}):[(t=(e=this.fullWidthGui)==null?void 0:e.rowComp)==null?void 0:t.getFullWidthCellRenderer()]}executeProcessRowPostCreateFunc(){const e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;const t={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};e(t)}areAllContainersReady(){const{leftGui:e,centerGui:t,rightGui:n,beans:{visibleCols:i}}=this,r=!!e||!i.isPinningLeft(),o=!!t,s=!!n||!i.isPinningRight();return r&&o&&s}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this.rowNode}):!1}setRowType(){const{rowNode:e,gos:t,beans:{colModel:n}}=this,i=e.stub&&!t.get("suppressServerSideFullWidthLoadingRow")&&!t.get("groupHideOpenParents"),r=this.isNodeFullWidthCell(),o=t.get("masterDetail")&&e.detail,s=n.isPivotMode(),a=u7(t,e,s);i?this.rowType="FullWidthLoading":o?this.rowType="FullWidthDetail":r?this.rowType="FullWidth":a?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(e=!1,t=!1){if(this.isFullWidth())return;const{animationFrameSvc:n}=this.beans;if(!(n!=null&&n.active)||e||this.printLayout){this.updateColumnListsImpl(t);return}this.updateColumnListsPending||(n.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"p1",!1),this.updateColumnListsPending=!0)}getNewCellCtrl(e){var n;if(!((n=this.beans.rowSpanSvc)!=null&&n.isCellSpanning(e,this.rowNode)))return new Vb(e,this.rowNode,this.beans,this)}isCorrectCtrlForSpan(e){var t;return!((t=this.beans.rowSpanSvc)!=null&&t.isCellSpanning(e.column,this.rowNode))}createCellCtrls(e,t,n=null){const i={list:[],map:{}},r=(h,m,v)=>{v!=null?i.list.splice(v,0,m):i.list.push(m),i.map[h]=m},o=[];for(const h of t){const m=h.getInstanceId();let v=e.map[m];v&&!this.isCorrectCtrlForSpan(v)&&(v.destroy(),v=void 0),v||(v=this.getNewCellCtrl(h)),v&&r(m,v)}for(const h of e.list){const m=h.column.getInstanceId();if(i.map[m]!=null)continue;!this.isCellEligibleToBeRemoved(h,n)?o.push([m,h]):h.destroy()}if(o.length)for(const[h,m]of o){const v=i.list.findIndex(R=>R.column.getLeft()>m.column.getLeft()),w=v===-1?void 0:Math.max(v-1,0);r(h,m,w)}const{focusSvc:s,visibleCols:a}=this.beans,d=s.getFocusedCell();if(d&&d.column.getPinned()==n){const h=d.column.getInstanceId();if(!i.map[h]&&a.allCols.includes(d.column)){const v=this.createFocusedCellCtrl();if(v){const w=i.list.findIndex(L=>L.column.getLeft()>v.column.getLeft()),R=w===-1?void 0:Math.max(w-1,0);r(h,v,R)}}}return i}createFocusedCellCtrl(){const{focusSvc:e,rowSpanSvc:t}=this.beans,n=e.getFocusedCell();if(!n)return;const i=t==null?void 0:t.getCellSpan(n.column,this.rowNode);if(i){if(i.firstNode!==this.rowNode||!i.doesSpanContain(n))return}else if(!e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned))return;return this.getNewCellCtrl(n.column)}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){for(const t of this.allRowGuis){const n=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(n,e)}}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const e=this.beans.colViewport,t=this.beans.visibleCols;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.allCols),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const n=e.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,n);const i=t.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,i,"left");const r=t.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,r,"right")}}isCellEligibleToBeRemoved(e,t){const{column:r}=e;if(r.getPinned()!=t||!this.isCorrectCtrlForSpan(e))return!0;const{visibleCols:o,editSvc:s}=this.beans,a=s==null?void 0:s.isEditing(e),d=e.isCellFocused();return a||d?!(o.allCols.indexOf(r)>=0):!0}getDomOrder(){return this.gos.get("ensureDomOrder")||lu(this.gos,"print")}listenOnDomOrder(e){const t=()=>{e.rowComp.setDomOrder(this.getDomOrder())};e.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],t)}setAnimateFlags(e){if(this.rowNode.sticky||!e)return;const t=Dn(this.rowNode.oldRowTop),{visibleCols:n}=this.beans,i=n.isPinningLeft(),r=n.isPinningRight();if(t){const{slideInAnimation:o}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){o.fullWidth=!0;return}o.center=!0,o.left=i,o.right=r}else{const{fadeInAnimation:o}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){o.fullWidth=!0;return}o.center=!0,o.left=i,o.right=r}}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){const e=(s,a)=>s?s.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(s.element,a).params):!0,t=e(this.fullWidthGui,null),n=e(this.centerGui,null),i=e(this.leftGui,"left"),r=e(this.rightGui,"right");return t&&n&&i&&r}addListeners(){const{beans:e,gos:t,rowNode:n}=this,{expansionSvc:i,eventSvc:r,context:o,rowSpanSvc:s}=e;this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),...(i==null?void 0:i.getRowExpandedListeners(this))??{}}),n.detail&&this.addManagedListeners(n.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(n,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this),rowPinned:this.onRowPinned.bind(this)}),this.addManagedListeners(r,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),s&&this.addManagedListeners(s,{spannedCellsUpdated:({pinned:a})=>{a&&!n.rowPinned||this.updateColumnLists()}}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,o),this.tooltipFeature=this.destroyBean(this.tooltipFeature,o),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,o)}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(t.get("rowDragEntireRow")){for(const d of this.allRowGuis)this.addRowDraggerToRow(d);return}this.rowDragComps=this.destroyBeans(this.rowDragComps,o)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{for(const e of this.getAllCellCtrls())e.onRowIndexChanged()},cellChanged:e=>{for(const t of this.getAllCellCtrls())t.onCellChanged(e)}})}onRowPinned(){for(const e of this.allRowGuis)e.rowComp.toggleCss("ag-row-pinned-source",!!this.rowNode.pinnedSibling)}onRowNodeDataChanged(e){this.refreshRow({suppressFlash:!e.update,newData:!e.update})}refreshRow(e){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}for(const n of this.getAllCellCtrls())n.refreshCell(e);for(const n of this.allRowGuis)this.setRowCompRowId(n.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(n.rowComp);this.onRowSelected(),this.postProcessCss()}postProcessCss(){var e;this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),(e=this.rowEditStyleFeature)==null||e.applyRowStyles(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.beans.rowDropHighlightSvc,t=(e==null?void 0:e.row)===this.rowNode?e.position:"none",n=t==="above",i=t==="inside",r=t==="below",o=t!=="none",s=n||r,a=this.rowNode.uiLevel,d=s&&a>0,h=d?a.toString():"0";for(const m of this.allRowGuis){const v=m.rowComp;v.toggleCss("ag-row-highlight-above",n),v.toggleCss("ag-row-highlight-inside",i),v.toggleCss("ag-row-highlight-below",r),v.toggleCss("ag-row-highlight-indent",d),o?m.element.style.setProperty("--ag-row-highlight-level",h):m.element.style.removeProperty("--ag-row-highlight-level")}}postProcessRowDragging(){const e=this.rowNode.dragging;for(const t of this.allRowGuis)t.rowComp.toggleCss("ag-row-dragging",e)}onDisplayedColumnsChanged(){var e;this.updateColumnLists(!0),(e=this.beans.rowAutoHeight)==null||e.requestCheckAutoHeight()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:nm(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){const t=this.findFullWidthInfoForEvent(e);if(!t)return;const{rowGui:n,column:i}=t;if(!(n.element===e.target))return;const s=this.rowNode,{focusSvc:a,navigation:d}=this.beans,h=a.getFocusedCell(),m={rowIndex:s.rowIndex,rowPinned:s.rowPinned,column:(h==null?void 0:h.column)??i};d==null||d.navigateToNextCell(e,e.key,m,!0),e.preventDefault()}onTabKeyDown(e){var a;if(e.defaultPrevented||om(e))return;const t=this.allRowGuis.find(d=>d.element.contains(e.target)),n=t?t.element:null,i=n===e.target,r=Os(this.beans);let o=!1;n&&r&&(o=n.contains(r)&&r.classList.contains("ag-cell"));let s=null;!i&&!o&&(s=E0(this.beans,n,!1,e.shiftKey)),(this.isFullWidth()&&i||!s)&&((a=this.beans.navigation)==null||a.onTabKeyDown(this,e))}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){var t;const e=(t=this.allRowGuis.find(n=>Sm(n.element)))==null?void 0:t.element;return e?e.getBoundingClientRect().top:0}onSuppressCellFocusChanged(e){const t=this.isFullWidth()&&e?void 0:this.gos.get("tabIndex");for(const n of this.allRowGuis)Nc(n.element,"tabindex",t)}onFullWidthRowFocused(e){var r,o,s;const t=this.rowNode,n=e?this.isFullWidth()&&e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned:!1;let i;if(this.fullWidthGui)i=this.fullWidthGui.element;else{const a=this.beans.colModel.getCol(e==null?void 0:e.column),d=a==null?void 0:a.pinned;d?i=d==="right"?(r=this.rightGui)==null?void 0:r.element:(o=this.leftGui)==null?void 0:o.element:i=(s=this.centerGui)==null?void 0:s.element}i&&(i.classList.toggle("ag-full-width-focus",n),n&&(e!=null&&e.forceBrowserFocus)&&i.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,t){const n={list:[],map:{}};for(const i of e.list)i!==t&&(n.list.push(i),n.map[i.column.getInstanceId()]=i);return n}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t);break}}createRowEvent(e,t){const{rowNode:n}=this;return ki(this.gos,{type:e,node:n,data:n.data,rowIndex:n.rowIndex,rowPinned:n.rowPinned,event:t})}createRowEventWithSource(e,t){const n=this.createRowEvent(e,t);return n.source=this,n}onRowDblClick(e){if(om(e))return;const t=this.createRowEventWithSource("rowDoubleClicked",e);t.isEventHandlingSuppressed=this.isSuppressMouseEvent(e),this.beans.eventSvc.dispatchEvent(t)}findFullWidthInfoForEvent(e){if(!e)return;const t=this.findFullWidthRowGui(e.target),n=this.getColumnForFullWidth(t);if(!(!t||!n))return{rowGui:t,column:n}}findFullWidthRowGui(e){return this.allRowGuis.find(t=>t.element.contains(e))}getColumnForFullWidth(e){const{visibleCols:t}=this.beans;switch(e==null?void 0:e.containerType){case"center":return t.centerCols[0];case"left":return t.leftCols[0];case"right":return t.rightCols[0];default:return t.allCols[0]}}onRowMouseDown(e){if(this.lastMouseDownOnDragger=Qv(e.target,"ag-row-drag",3),!this.isFullWidth()||this.isSuppressMouseEvent(e))return;const{rangeSvc:t,focusSvc:n}=this.beans;t==null||t.removeAllCellRanges();const i=this.findFullWidthInfoForEvent(e);if(!i)return;const{rowGui:r,column:o}=i,s=r.element,a=e.target,d=this.rowNode;let h=e.defaultPrevented||Wy();s&&s.contains(a)&&Pw(a)&&(h=!1),n.setFocusedCell({rowIndex:d.rowIndex,column:o,rowPinned:d.rowPinned,forceBrowserFocus:h})}isSuppressMouseEvent(e){const{gos:t,rowNode:n}=this;if(this.isFullWidth()){const r=this.findFullWidthRowGui(e.target);return Z0e(t,r==null?void 0:r.rowComp.getFullWidthCellRendererParams(),n,e)}const i=UF(t,e.target);return i!=null&&g_(t,i.column,n,e)}onRowClick(e){if(om(e)||this.lastMouseDownOnDragger)return;const n=this.isSuppressMouseEvent(e),{eventSvc:i,selectionSvc:r}=this.beans,o=this.createRowEventWithSource("rowClicked",e);o.isEventHandlingSuppressed=n,i.dispatchEvent(o),!n&&(r==null||r.handleSelectionEvent(e,this.rowNode,"rowClicked"))}setupDetailRowAutoHeight(e){var t;this.rowType==="FullWidthDetail"&&((t=this.beans.masterDetailSvc)==null||t.setupDetailRowAutoHeight(this,e))}createFullWidthCompDetails(e,t){const{gos:n,rowNode:i}=this,r=ki(n,{fullWidth:!0,data:i.data,node:i,value:i.key,valueFormatted:i.key,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(s,a,d,h)=>this.addFullWidthRowDragging(s,a,d,h),setTooltip:(s,a)=>{n.assertModuleRegistered("Tooltip",3),this.setupFullWidthRowTooltip(s,a)}}),o=this.beans.userCompFactory;switch(this.rowType){case"FullWidthDetail":return qye(o,r);case"FullWidthGroup":{const{value:s,valueFormatted:a}=this.beans.valueSvc.getValueForDisplay({node:this.rowNode,includeValueFormatted:!0});return r.value=s,r.valueFormatted=a,Uye(o,r)}case"FullWidthLoading":return Wye(o,r);default:return $ye(o,r)}}setupFullWidthRowTooltip(e,t){var n;this.fullWidthGui&&(this.tooltipFeature=(n=this.beans.tooltipSvc)==null?void 0:n.setupFullWidthRowTooltip(this.tooltipFeature,this,e,t))}addFullWidthRowDragging(e,t,n="",i){const{rowDragSvc:r,context:o}=this.beans;if(!r||!this.isFullWidth())return;const s=r.createRowDragComp(()=>n,this.rowNode,void 0,e,t,i);this.createBean(s,o),this.addDestroyFunc(()=>{this.destroyBean(s,o)})}onUiLevelChanged(){const e=d6(this.rowNode);if(this.rowLevel!=e){const t="ag-row-level-"+e,n="ag-row-level-"+this.rowLevel;for(const i of this.allRowGuis)i.rowComp.toggleCss(t,!0),i.rowComp.toggleCss(n,!1)}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getLastRow()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();if(this.firstRowOnPage!==e){this.firstRowOnPage=e;for(const n of this.allRowGuis)n.rowComp.toggleCss("ag-row-first",e)}if(this.lastRowOnPage!==t){this.lastRowOnPage=t;for(const n of this.allRowGuis)n.rowComp.toggleCss("ag-row-last",t)}}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){var t;const e=[];if((t=this.beans.rowStyleSvc)==null||t.processClassesFromGridOptions(e,this.rowNode),!!e.length)for(const n of e)for(const i of this.allRowGuis)i.rowComp.toggleCss(n,!0)}postProcessRowClassRules(){var e;(e=this.beans.rowStyleSvc)==null||e.processRowClassRules(this.rowNode,t=>{for(const n of this.allRowGuis)n.rowComp.toggleCss(t,!0)},t=>{for(const n of this.allRowGuis)n.rowComp.toggleCss(t,!1)})}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,n=>n.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(e){return e==="left"||e==="right"?e:null}getInitialRowClasses(e){var a,d;const t=this.getPinnedForContainer(e),n=this.isFullWidth(),{rowNode:i,beans:r}=this,o=[];o.push("ag-row"),o.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus"),this.fadeInAnimation[e]&&o.push("ag-opacity-zero"),o.push(i.rowIndex%2===0?"ag-row-even":"ag-row-odd"),i.isRowPinned()&&(o.push("ag-row-pinned"),(a=r.pinnedRowModel)!=null&&a.isManual()&&o.push("ag-row-pinned-manual")),!i.isRowPinned()&&i.pinnedSibling&&o.push("ag-row-pinned-source"),i.isSelected()&&o.push("ag-row-selected"),i.footer&&o.push("ag-row-footer"),o.push("ag-row-level-"+this.rowLevel),i.stub&&o.push("ag-row-loading"),n&&o.push("ag-full-width-row"),(d=r.expansionSvc)==null||d.addExpandedCss(o,i),i.dragging&&o.push("ag-row-dragging");const{rowStyleSvc:s}=r;return s&&(s.processClassesFromGridOptions(o,i),s.preProcessRowClassRules(o,i)),o.push(this.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),this.isFirstRowOnPage()&&o.push("ag-row-first"),this.isLastRowOnPage()&&o.push("ag-row-last"),n&&(t==="left"&&o.push("ag-cell-last-left-pinned"),t==="right"&&o.push("ag-cell-first-right-pinned")),o}processStylesFromGridOptions(){var e;return((e=this.beans.rowStyleSvc)==null?void 0:e.processStylesFromGridOptions(this.rowNode))??this.emptyStyle}onRowSelected(e){var t;(t=this.beans.selectionSvc)==null||t.onRowCtrlSelected(this,n=>{(n===this.centerGui||n===this.fullWidthGui)&&this.announceDescription()},e)}announceDescription(){var e;(e=this.beans.selectionSvc)==null||e.announceAriaRowSelection(this.rowNode)}addHoverFunctionality(e){if(!this.active)return;const{element:t,compBean:n}=e,{rowNode:i,beans:r,gos:o}=this;n.addManagedListeners(t,{pointerenter:s=>{s.pointerType==="mouse"&&i.dispatchRowEvent("mouseEnter")},pointerleave:s=>{s.pointerType==="mouse"&&i.dispatchRowEvent("mouseLeave")}}),n.addManagedListeners(i,{mouseEnter:()=>{var s;!((s=r.dragSvc)!=null&&s.dragging)&&!o.get("suppressRowHoverHighlight")&&(t.classList.add("ag-row-hover"),i.setHovered(!0))},mouseLeave:()=>{this.resetHoveredStatus(t)}})}resetHoveredStatus(e){const t=e?[e]:this.allRowGuis.map(n=>n.element);for(const n of t)n.classList.remove("ag-row-hover");this.rowNode.setHovered(!1)}roundRowTopToBounds(e){const t=this.beans.ctrlsSvc.getScrollFeature().getApproximateVScollPosition(),n=this.applyPaginationOffset(t.top,!0)-100,i=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(n,e),i)}forEachGui(e,t){if(e)t(e);else for(const n of this.allRowGuis)t(n)}isRowRendered(){return this.allRowGuis.length>0}onRowHeightChanged(e){if(this.rowNode.rowHeight==null)return;const t=this.rowNode.rowHeight,n=this.beans.environment.getDefaultRowHeight(),r=r7(this.gos)?Ly(this.beans,this.rowNode).height:void 0,o=r?`${Math.min(n,r)-2}px`:void 0;this.forEachGui(e,s=>{s.element.style.height=`${t}px`,o&&s.element.style.setProperty("--ag-line-height",o)})}destroyFirstPass(e=!1){var i;this.active=!1;const{rowNode:t}=this;if(!e&&Mb(this.gos)&&!t.sticky)if(t.rowTop!=null){const o=this.roundRowTopToBounds(t.rowTop);this.setRowTop(o)}else for(const o of this.allRowGuis)o.rowComp.toggleCss("ag-opacity-zero",!0);(i=this.fullWidthGui)!=null&&i.element.contains(Os(this.beans))&&this.beans.focusSvc.attemptToRecoverFocus(),t.setHovered(!1);const n=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(n),this.beans.eventSvc.dispatchEvent(n),super.destroy()}destroySecondPass(){this.allRowGuis.length=0;const e=t=>{for(const n of t.list)n.destroy();return{list:[],map:{}}};this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,t=>{t.rowComp.toggleCss("ag-row-focus",this.rowFocused),t.rowComp.toggleCss("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const{focusSvc:e}=this.beans,t=e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses())}onPaginationChanged(){var t;const e=((t=this.beans.pagination)==null?void 0:t.getCurrentPage())??0;this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,t=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;const n=this.beans.pageBounds.getPixelOffset();return e+n*(t?1:-1)}setRowTop(e){if(!this.printLayout&&Dn(e)){const t=this.applyPaginationOffset(e),r=`${this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeight.getRealPixelPosition(t)}px`;this.setRowTopStyle(r)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";const t=this.rowNode;let n;if(t.sticky)n=t.stickyRowTop;else{const i=this.slideInAnimation[e]?this.roundRowTopToBounds(t.oldRowTop):t.rowTop,r=this.applyPaginationOffset(i);n=t.isRowPinned()?r:this.beans.rowContainerHeight.getRealPixelPosition(r)}return n+"px"}setRowTopStyle(e){for(const t of this.allRowGuis)this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform(`translateY(${e})`)}getCellCtrl(e,t=!1){let n=null;for(const i of this.getAllCellCtrls())i.column==e&&(n=i);if(n!=null||t)return n;for(const i of this.getAllCellCtrls())(i==null?void 0:i.getColSpanningList().indexOf(e))>=0&&(n=i);return n}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}updateRowIndexes(e){var o,s;const t=this.rowNode.getRowIndexString();if(t===null)return;const n=(((o=this.beans.ctrlsSvc.getHeaderRowContainerCtrl())==null?void 0:o.getRowCount())??0)+(((s=this.beans.filterManager)==null?void 0:s.getHeaderRowCount())??0),i=this.rowNode.rowIndex%2===0,r=n+this.rowNode.rowIndex+1;this.forEachGui(e,a=>{a.rowComp.setRowIndex(t),a.rowComp.toggleCss("ag-row-even",i),a.rowComp.toggleCss("ag-row-odd",!i),L9(a.element,r)})}},H_e=class extends Yt{constructor(){super(),this.beanName="navigation",this.onPageDown=c4(this.onPageDown,100),this.onPageUp=c4(this.onPageUp,100)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){const n=e.key,i=e.altKey,r=e.ctrlKey||e.metaKey,o=!!this.beans.rangeSvc&&e.shiftKey,s=gbe(this.gos,e);let a=!1;switch(n){case kt.PAGE_HOME:case kt.PAGE_END:!r&&!i&&(this.onHomeOrEndKey(n),a=!0);break;case kt.LEFT:case kt.RIGHT:case kt.UP:case kt.DOWN:if(!s)return!1;r&&!i&&!o&&(this.onCtrlUpDownLeftRight(n,s),a=!0);break;case kt.PAGE_DOWN:case kt.PAGE_UP:!r&&!i&&(a=this.handlePageUpDown(n,s,t));break}return a&&e.preventDefault(),a}handlePageUpDown(e,t,n){return n&&(t=this.beans.focusSvc.getFocusedCell()),t?(e===kt.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo({scrollIndex:e,scrollType:t,scrollColumn:n,focusIndex:i,focusColumn:r,isAsync:o,rowPinned:s}){const{scrollFeature:a}=this.gridBodyCon;Dn(n)&&!n.isPinned()&&a.ensureColumnVisible(n),Dn(e)&&a.ensureIndexVisible(e,t),o||a.ensureIndexVisible(i);const{focusSvc:d,rangeSvc:h}=this.beans;d.setFocusedCell({rowIndex:i,column:r,rowPinned:s,forceBrowserFocus:!0}),h==null||h.setRangeToCell({rowIndex:i,rowPinned:s,column:r})}onPageDown(e){const t=this.beans,n=ZA(t),i=this.getViewportHeight(),{pageBounds:r,rowModel:o,rowAutoHeight:s}=t,a=r.getPixelOffset(),d=n.top+i,h=o.getRowIndexAtPixel(d+a);s!=null&&s.active?this.navigateToNextPageWithAutoHeight(e,h):this.navigateToNextPage(e,h)}onPageUp(e){const t=this.beans,n=ZA(t),{pageBounds:i,rowModel:r,rowAutoHeight:o}=t,s=i.getPixelOffset(),a=n.top,d=r.getRowIndexAtPixel(a+s);o!=null&&o.active?this.navigateToNextPageWithAutoHeight(e,d,!0):this.navigateToNextPage(e,d,!0)}navigateToNextPage(e,t,n=!1){const{pageBounds:i,rowModel:r}=this.beans,o=this.getViewportHeight(),s=i.getFirstRow(),a=i.getLastRow(),d=i.getPixelOffset(),h=r.getRow(e.rowIndex),m=n?(h==null?void 0:h.rowHeight)-o-d:o-d,v=(h==null?void 0:h.rowTop)+m;let w=r.getRowIndexAtPixel(v+d);if(w===e.rowIndex){const L=n?-1:1;t=w=e.rowIndex+L}let R;n?(R="bottom",w<s&&(w=s),t<s&&(t=s)):(R="top",w>a&&(w=a),t>a&&(t=a)),this.isRowTallerThanView(r.getRow(w))&&(t=w,R="top"),this.navigateTo({scrollIndex:t,scrollType:R,scrollColumn:null,focusIndex:w,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,n=!1){this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{const i=this.getNextFocusIndexForAutoHeight(e,n);this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:i,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){const n=t?-1:1,i=this.getViewportHeight(),{pageBounds:r,rowModel:o}=this.beans,s=r.getLastRow();let a=0,d=e.rowIndex;for(;d>=0&&d<=s;){const h=o.getRow(d);if(h){const m=h.rowHeight??0;if(a+m>i)break;a+=m}d+=n}return Math.max(0,Math.min(d,s))}getViewportHeight(){const e=this.beans,t=ZA(e),n=this.beans.scrollVisibleSvc.getScrollbarWidth();let i=t.bottom-t.top;return e.ctrlsSvc.get("center").isHorizontalScrollShowing()&&(i-=n),i}isRowTallerThanView(e){if(!e)return!1;const t=e.rowHeight;return typeof t!="number"?!1:t>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const n=this.beans.cellNavigation.getNextCellToFocus(e,t,!0),i=this.getNormalisedPosition(n),{rowIndex:r,rowPinned:o,column:s}=i??n,a=s;this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:a,focusIndex:r,focusColumn:a,rowPinned:o})}onHomeOrEndKey(e){const t=e===kt.PAGE_HOME,{visibleCols:n,pageBounds:i,rowModel:r}=this.beans,o=n.allCols,s=t?i.getFirstRow():i.getLastRow(),a=r.getRow(s);if(!a)return;const d=(t?o:[...o].reverse()).find(h=>!h.isSuppressNavigable(a));d&&this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:d,focusIndex:s,focusColumn:d})}onTabKeyDown(e,t){const n=t.shiftKey,i=this.tabToNextCellCommon(e,n,t),r=this.beans,{ctrlsSvc:o,pageBounds:s,focusSvc:a,gos:d}=r;if(i!==!1){i?t.preventDefault():i===null&&o.get("gridCtrl").allowFocusForNextCoreContainer(n);return}if(n){const{rowIndex:h,rowPinned:m}=e.getRowPosition();(m?h===0:h===s.getFirstRow())&&(d.get("headerHeight")===0||r0(r)?sx(r,!0,!0):(t.preventDefault(),a.focusPreviousFromFirstCell(t)))}else e instanceof Vb&&e.focusCell(!0),(a.focusOverlay(!1)||sx(r,n))&&t.preventDefault()}tabToNextCell(e,t){const n=this.beans,{focusSvc:i,rowRenderer:r}=n,o=i.getFocusedCell();if(!o)return!1;let s=Eb(n,o);return!s&&(s=r.getRowByPosition(o),!(s!=null&&s.isFullWidth()))?!1:!!this.tabToNextCellCommon(s,e,t,"api")}tabToNextCellCommon(e,t,n,i="ui"){var d;const{editSvc:r,focusSvc:o}=this.beans;let s;const a=e instanceof Vb?e:(d=e.getAllCellCtrls())==null?void 0:d[0];return r!=null&&r.isEditing()?s=r==null?void 0:r.moveToNextCell(a,t,n,i):s=this.moveToNextCellNotEditing(e,t,n),s===null?s:s||!!o.focusedHeader}moveToNextCellNotEditing(e,t,n){const i=this.beans.visibleCols.allCols;let r;if(e instanceof GS){if(r={...e.getRowPosition(),column:t?i[0]:Wo(i)},this.gos.get("embedFullWidthRows")&&n){const s=e.findFullWidthInfoForEvent(n);s&&(r.column=s.column)}}else r=e.getFocusedCellPosition();const o=this.findNextCellToFocusOn(r,{backwards:t,startEditing:!1});if(o===!1)return null;if(o instanceof Vb)o.focusCell(!0);else if(o)return this.tryToFocusFullWidthRow(o,t);return Dn(o)}findNextCellToFocusOn(e,{backwards:t,startEditing:n,skipToNextEditableCell:i}){let r=e;const o=this.beans,{cellNavigation:s,gos:a,focusSvc:d,rowRenderer:h,rangeSvc:m}=o;for(;;){e!==r&&(e=r),t||(r=this.getLastCellOfColSpan(r)),r=s.getNextTabbedCell(r,t);const v=a.getCallback("tabToNextCell");if(Dn(v)){const O=v({backwards:t,editing:n,previousCellPosition:e,nextCellPosition:r||null});if(O===!0)r=e;else{if(O===!1)return!1;r={rowIndex:O.rowIndex,column:O.column,rowPinned:O.rowPinned}}}if(!r)return null;if(r.rowIndex<0){const L=Pp(o);return d.focusHeaderPosition({headerPosition:{headerRowIndex:L+r.rowIndex,column:r.column},fromCell:!0}),null}const w=a.get("editType")==="fullRow";if(n&&(!w||i)&&!this.isCellEditable(r))continue;this.ensureCellVisible(r);const R=Eb(o,r);if(!R){const L=h.getRowByPosition(r);if(!L||!L.isFullWidth()||n)continue;return{...L.getRowPosition(),column:r==null?void 0:r.column}}if(!s.isSuppressNavigable(R.column,R.rowNode))return R.setFocusedCellPosition(r),m==null||m.setRangeToCell(r),R}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}lookupRowNodeForCell({rowIndex:e,rowPinned:t}){const{pinnedRowModel:n,rowModel:i}=this.beans;return t==="top"?n==null?void 0:n.getPinnedTopRow(e):t==="bottom"?n==null?void 0:n.getPinnedBottomRow(e):i.getRow(e)}navigateToNextCell(e,t,n,i){let r=n,o=!1;const s=this.beans,{cellNavigation:a,focusSvc:d,gos:h}=s;for(;r&&(r===n||!this.isValidNavigateCell(r));)h.get("enableRtl")?t===kt.LEFT&&(r=this.getLastCellOfColSpan(r)):t===kt.RIGHT&&(r=this.getLastCellOfColSpan(r)),r=a.getNextCellToFocus(t,r),o=vs(r);if(o&&e&&e.key===kt.UP&&(r={rowIndex:-1,rowPinned:null,column:n.column}),i){const v=h.getCallback("navigateToNextCell");if(Dn(v)){const R=v({key:t,previousCellPosition:n,nextCellPosition:r||null,event:e});Dn(R)?r={rowPinned:R.rowPinned,rowIndex:R.rowIndex,column:R.column}:r=null}}if(!r)return;if(r.rowIndex<0){const v=Pp(s);d.focusHeaderPosition({headerPosition:{headerRowIndex:v+r.rowIndex,column:n.column},event:e||void 0,fromCell:!0});return}const m=this.getNormalisedPosition(r);m?this.focusPosition(m):this.tryToFocusFullWidthRow(r)}getNormalisedPosition(e){var i;if(!!((i=this.beans.spannedRowRenderer)!=null&&i.getCellByPosition(e)))return e;this.ensureCellVisible(e);const n=Eb(this.beans,e);return n?(e=n.getFocusedCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){const{visibleCols:n,rowRenderer:i,focusSvc:r,eventSvc:o}=this.beans,s=n.allCols,a=i.getRowByPosition(e);if(!(a!=null&&a.isFullWidth()))return!1;const d=r.getFocusedCell(),h={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?Wo(s):s[0])};this.focusPosition(h);const m=t??(d!=null&&Ebe(h,d));return o.dispatchEvent({type:"fullWidthRowFocused",rowIndex:h.rowIndex,rowPinned:h.rowPinned,column:h.column,isFullWidthCell:!0,fromBelow:m}),!0}focusPosition(e){const{focusSvc:t,rangeSvc:n}=this.beans;t.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),n==null||n.setRangeToCell(e)}isValidNavigateCell(e){return!!gm(this.beans,e)}getLastCellOfColSpan(e){const t=Eb(this.beans,e);if(!t)return e;const n=t.getColSpanningList();return n.length===1?e:{rowIndex:e.rowIndex,column:Wo(n),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=s7(this.gos),n=this.beans.rowModel.getRow(e.rowIndex),i=t&&(n==null?void 0:n.sticky),{scrollFeature:r}=this.gridBodyCon;!i&&vs(e.rowPinned)&&r.ensureIndexVisible(e.rowIndex),e.column.isPinned()||r.ensureColumnVisible(e.column)}ensureColumnVisible(e){const t=this.gridBodyCon.scrollFeature;e.isPinned()||t.ensureColumnVisible(e)}ensureRowVisible(e){this.gridBodyCon.scrollFeature.ensureIndexVisible(e)}};function ZA(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}var V_e={moduleName:"KeyboardNavigation",version:Fn,beans:[H_e,d_e,ECe],apiFunctions:{getFocusedCell:h_e,clearFocusedCell:f_e,setFocusedCell:p_e,setFocusedHeader:y_e,tabToNextCell:g_e,tabToPreviousCell:m_e}},$_e=class extends Yt{constructor(){super(...arguments),this.beanName="pageBoundsListener"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventSvc.dispatchEvent({type:"paginationChanged",animate:(e==null?void 0:e.animate)??!1,newData:(e==null?void 0:e.newData)??!1,newPage:(e==null?void 0:e.newPage)??!1,newPageSize:(e==null?void 0:e.newPageSize)??!1,keepRenderedRows:(e==null?void 0:e.keepRenderedRows)??!1})}calculatePages(){const{pageBounds:e,pagination:t,rowModel:n}=this.beans;t?t.calculatePages():e.calculateBounds(0,n.getRowCount()-1)}},W_e=class extends Yt{constructor(){super(...arguments),this.beanName="pageBounds",this.pixelOffset=0}getFirstRow(){var e;return((e=this.topRowBounds)==null?void 0:e.rowIndex)??-1}getLastRow(){var e;return((e=this.bottomRowBounds)==null?void 0:e.rowIndex)??-1}getCurrentPageHeight(){const{topRowBounds:e,bottomRowBounds:t}=this;return!e||!t?0:Math.max(t.rowTop+t.rowHeight-e.rowTop,0)}getCurrentPagePixelRange(){const{topRowBounds:e,bottomRowBounds:t}=this,n=(e==null?void 0:e.rowTop)??0,i=t?t.rowTop+t.rowHeight:0;return{pageFirstPixel:n,pageLastPixel:i}}calculateBounds(e,t){const{rowModel:n}=this.beans,i=n.getRowBounds(e);i&&(i.rowIndex=e),this.topRowBounds=i;const r=n.getRowBounds(t);r&&(r.rowIndex=t),this.bottomRowBounds=r,this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){var t;const e=((t=this.topRowBounds)==null?void 0:t.rowTop)??0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventSvc.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},U_e=".ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top{min-width:0;overflow:hidden;position:relative}.ag-pinned-left-sticky-top,.ag-pinned-right-sticky-top{height:100%;overflow:hidden;position:relative}.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{height:100%;overflow:hidden;width:100%}.ag-pinned-left-header,.ag-pinned-right-header{display:inline-block;height:100%;overflow:hidden;position:relative}.ag-body-horizontal-scroll:not(.ag-scrollbar-invisible){.ag-horizontal-left-spacer:not(.ag-scroller-corner){border-right:var(--ag-pinned-column-border)}.ag-horizontal-right-spacer:not(.ag-scroller-corner){border-left:var(--ag-pinned-column-border)}}.ag-pinned-right-header{border-left:var(--ag-pinned-column-border)}.ag-pinned-left-header{border-right:var(--ag-pinned-column-border)}.ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-left:var(--ag-pinned-column-border)}.ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-right:var(--ag-pinned-column-border)}.ag-pinned-left-header .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}.ag-pinned-right-header .ag-header-cell-resize:after{left:50%}.ag-pinned-left-header .ag-header-cell-resize{right:-3px}.ag-pinned-right-header .ag-header-cell-resize{left:-3px}",q_e=class extends Yt{constructor(e,t){super(),this.isLeft=e,this.elements=t,this.getWidth=e?()=>this.beans.pinnedCols.leftWidth:()=>this.beans.pinnedCols.rightWidth}postConstruct(){this.addManagedEventListeners({[`${this.isLeft?"left":"right"}PinnedWidthChanged`]:this.onPinnedWidthChanged.bind(this)})}onPinnedWidthChanged(){const e=this.getWidth(),t=e>0;for(const n of this.elements)n&&($o(n,t),Mp(n,e))}},K_e=class extends Yt{constructor(){super(...arguments),this.beanName="pinnedCols"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,t=>{this.gridBodyCtrl=t.gridBodyCtrl});const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const{gos:e,visibleCols:t,eventSvc:n}=this.beans,i=lu(e,"print"),r=i?0:t.getColsLeftWidth(),o=i?0:t.getDisplayedColumnsRightWidth();r!=this.leftWidth&&(this.leftWidth=r,n.dispatchEvent({type:"leftPinnedWidthChanged"})),o!=this.rightWidth&&(this.rightWidth=o,n.dispatchEvent({type:"rightPinnedWidthChanged"}))}keepPinnedColumnsNarrowerThanViewport(){const e=this.gridBodyCtrl.eBodyViewport,t=s1(e);if(t<=50)return;const n=this.getPinnedColumnsOverflowingViewport(t-50),i=this.gos.getCallback("processUnpinnedColumns"),{columns:r,hasLockedPinned:o}=n;let s=r;!s.length&&!o||(i&&(s=i({columns:s,viewportWidth:t})),s!=null&&s.length&&(s=s.filter(a=>!im(a)),this.setColsPinned(s,null,"viewportSizeFeature")))}createPinnedWidthFeature(e,...t){return new q_e(e,t)}setColsPinned(e,t,n){const{colModel:i,colAnimation:r,visibleCols:o,gos:s}=this.beans;if(!i.cols||!(e!=null&&e.length))return;if(lu(s,"print")){an(37);return}r==null||r.start();let a;t===!0||t==="left"?a="left":t==="right"?a="right":a=null;const d=[];for(const h of e){if(!h)continue;const m=i.getCol(h);m&&m.getPinned()!==a&&(this.setColPinned(m,a),d.push(m))}d.length&&(o.refresh(n),C7(this.eventSvc,d,n)),r==null||r.finish()}initCol(e){const{pinned:t,initialPinned:n}=e.colDef;t!==void 0?this.setColPinned(e,t):this.setColPinned(e,n)}setColPinned(e,t){t===!0||t==="left"?e.pinned="left":t==="right"?e.pinned="right":e.pinned=null,e.dispatchStateUpdatedEvent("pinned")}setupHeaderPinnedWidth(e){const{scrollVisibleSvc:t}=this.beans;if(e.pinned==null)return;const n=e.pinned==="left",i=e.pinned==="right";e.hidden=!0;const r=()=>{const o=n?this.leftWidth:this.rightWidth;if(o==null)return;const s=o==0,a=e.hidden!==s,d=this.gos.get("enableRtl"),h=t.getScrollbarWidth(),v=t.verticalScrollShowing&&(d&&n||!d&&i)?o+h:o;e.comp.setPinnedContainerWidth(`${v}px`),e.comp.setDisplayed(!s),a&&(e.hidden=s,e.refresh())};e.addManagedEventListeners({leftPinnedWidthChanged:r,rightPinnedWidthChanged:r,scrollVisibilityChanged:r,scrollbarWidthChanged:r})}getHeaderResizeDiff(e,t){if(t.getPinned()){const{leftWidth:i,rightWidth:r}=this,o=s1(this.beans.ctrlsSvc.getGridBodyCtrl().eBodyViewport)-50;if(i+r+e>o)if(o>i+r)e=o-i-r;else return 0}return e}getPinnedColumnsOverflowingViewport(e){const t=this.rightWidth??0,n=this.leftWidth??0,i=t+n;let r=!1;if(i<e)return{columns:[],hasLockedPinned:r};const{visibleCols:o}=this.beans,s=[...o.leftCols],a=[...o.rightCols];let d=0,h=0;const m=0,v=[];let w=i-m-e;for(;(h<s.length||d<a.length)&&w>0;){if(d<a.length){const R=a[d++];if(R.colDef.lockPinned){r=!0;continue}w-=R.getActualWidth(),v.push(R)}if(h<s.length&&w>0){const R=s[h++];if(R.colDef.lockPinned){r=!0;continue}w-=R.getActualWidth(),v.push(R)}}return{columns:v,hasLockedPinned:r}}},Z_e={moduleName:"PinnedColumn",version:Fn,beans:[K_e],css:[U_e]},Y_e=class extends cc{constructor(){super(),this.beanName="ariaAnnounce",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.lastAnnouncement="",this.updateAnnouncement=Ll(this,this.updateAnnouncement.bind(this),200)}postConstruct(){const e=this.beans,t=Il(e),n=this.descriptionContainer=t.createElement("div");n.classList.add("ag-aria-description-container"),M9(n,"polite"),zge(n,"additions text"),Oge(n,!0),e.eRootDiv.appendChild(n)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.handleAnnouncementUpdate(e)},50)}handleAnnouncementUpdate(e){if(!this.isAlive()||!this.descriptionContainer)return;let t=e;if(t==null||t.replace(/[ .]/g,"")==""){this.lastAnnouncement="";return}this.lastAnnouncement===t&&(t=`${t}`),this.lastAnnouncement=t,this.descriptionContainer.textContent=t}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(jc(e),e.remove()),this.descriptionContainer=null,this.pendingAnnouncements.clear()}},X_e=class extends Y_e{},J_e={moduleName:"Aria",version:Fn,beans:[X_e]},Q_e=":where(.ag-delay-render){.ag-cell,.ag-header-cell,.ag-header-group-cell,.ag-row,.ag-spanned-cell-wrapper{visibility:hidden}}",h6="ag-delay-render",eSe=class extends Yt{constructor(){super(...arguments),this.beanName="colDelayRenderSvc",this.hideRequested=!1,this.alreadyRevealed=!1,this.timesRetried=0,this.requesters=new Set}hideColumns(e){this.alreadyRevealed||this.requesters.has(e)||(this.requesters.add(e),this.hideRequested||(this.beans.ctrlsSvc.whenReady(this,t=>{t.gridBodyCtrl.eGridBody.classList.add(h6)}),this.hideRequested=!0))}revealColumns(e){if(this.alreadyRevealed||!this.isAlive()||(this.requesters.delete(e),this.requesters.size>0))return;const{renderStatus:t,ctrlsSvc:n}=this.beans;if(t){if(!t.areHeaderCellsRendered()&&this.timesRetried<5){this.timesRetried++,setTimeout(()=>this.revealColumns(e));return}this.timesRetried=0}n.getGridBodyCtrl().eGridBody.classList.remove(h6),this.alreadyRevealed=!0}},tSe={moduleName:"ColumnDelayRender",version:Fn,beans:[eSe],css:[Q_e]};function nSe(e){var t;(t=e.overlays)==null||t.showLoadingOverlay()}function iSe(e){var t;(t=e.overlays)==null||t.showNoRowsOverlay()}function rSe(e){var t;(t=e.overlays)==null||t.hideOverlay()}var oSe=".ag-overlay{inset:0;pointer-events:none;position:absolute;z-index:2}.ag-overlay-panel,.ag-overlay-wrapper{display:flex;height:100%;width:100%}.ag-overlay-wrapper{align-items:center;flex:none;justify-content:center;text-align:center}.ag-overlay-exporting-wrapper,.ag-overlay-loading-wrapper,.ag-overlay-modal-wrapper{pointer-events:all}.ag-overlay-exporting-center,.ag-overlay-loading-center{background:var(--ag-background-color);border:solid var(--ag-border-width) var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-popup-shadow);display:flex;padding:var(--ag-spacing)}",sSe={tag:"div",cls:"ag-overlay",role:"presentation",children:[{tag:"div",cls:"ag-overlay-panel",role:"presentation",children:[{tag:"div",ref:"eOverlayWrapper",cls:"ag-overlay-wrapper",role:"presentation"}]}]},$H=class extends ra{constructor(){super(sSe),this.eOverlayWrapper=Yn,this.activeOverlay=null,this.activePromise=null,this.activeCssClass=null,this.elToFocusAfter=null,this.overlayExclusive=!1,this.oldWrapperPadding=null,this.registerCSS(oSe)}handleKeyDown(e){if(e.key!==kt.TAB||e.defaultPrevented||om(e))return;const{beans:t,eOverlayWrapper:n}=this;if(n&&E0(t,n,!1,e.shiftKey))return;let r=!1;e.shiftKey?r=t.focusSvc.focusGridView({column:Wo(t.visibleCols.allCols),backwards:!0,canFocusOverlay:!1}):r=sx(t,!1),r&&e.preventDefault()}updateLayoutClasses(e,t){const n=this.eOverlayWrapper;if(!n)return;const i=n.classList,{AUTO_HEIGHT:r,NORMAL:o,PRINT:s}=p_;i.toggle(r,t.autoHeight),i.toggle(o,t.normal),i.toggle(s,t.print)}postConstruct(){this.createManagedBean(new $F(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.beans.overlays.setWrapperComp(this,!1),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)}),this.addManagedEventListeners({gridSizeChanged:this.refreshWrapperPadding.bind(this)})}setWrapperTypeClass(e){var n;const t=(n=this.eOverlayWrapper)==null?void 0:n.classList;if(!t){this.activeCssClass=null;return}this.activeCssClass&&t.toggle(this.activeCssClass,!1),this.activeCssClass=e,t.toggle(e,!0)}showOverlay(e,t,n){if(this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,this.overlayExclusive=n,!e)return this.refreshWrapperPadding(),Fr.resolve();if(this.setWrapperTypeClass(t),this.setDisplayed(!0,{skipAriaHidden:!0}),this.refreshWrapperPadding(),n&&this.isGridFocused()){const i=Os(this.beans);i&&!gF(this.beans)&&(this.elToFocusAfter=i)}return e.then(i=>{const r=this.eOverlayWrapper;if(!r){this.destroyBean(i);return}if(this.activePromise!==e){this.activeOverlay!==i&&(this.destroyBean(i),i=null);return}this.activePromise=null,i&&(this.activeOverlay!==i&&(r.appendChild(i.getGui()),this.activeOverlay=i),n&&this.isGridFocused()&&m0(r))}),e}refreshWrapperPadding(){var n;if(!this.eOverlayWrapper){this.oldWrapperPadding=null;return}const e=!!this.activeOverlay||!!this.activePromise;let t=0;e&&!this.overlayExclusive&&(t=((n=this.beans.ctrlsSvc.get("gridHeaderCtrl"))==null?void 0:n.headerHeight)||0),t!==this.oldWrapperPadding&&(this.oldWrapperPadding=t,this.eOverlayWrapper.style.setProperty("padding-top",`${t}px`))}destroyActiveOverlay(){var i;this.activePromise=null;const e=this.activeOverlay;if(!e){this.overlayExclusive=!1,this.elToFocusAfter=null,this.refreshWrapperPadding();return}let t=this.elToFocusAfter;this.elToFocusAfter=null,this.activeOverlay=null,this.overlayExclusive=!1,t&&!this.isGridFocused()&&(t=null),this.destroyBean(e);const n=this.eOverlayWrapper;n&&jc(n),(i=t==null?void 0:t.focus)==null||i.call(t,{preventScroll:!0}),this.refreshWrapperPadding()}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}isGridFocused(){const e=Os(this.beans);return!!e&&this.beans.eGridDiv.contains(e)}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.beans.overlays.setWrapperComp(this,!0),super.destroy(),this.eOverlayWrapper=null}},aSe={selector:"AG-OVERLAY-WRAPPER",component:$H},lSe=["refresh"],eC=e=>({name:e,optionalMethods:lSe}),Vv={id:"agLoadingOverlay",overlayType:"loading",comp:eC("loadingOverlayComponent"),wrapperCls:"ag-overlay-loading-wrapper",exclusive:!0,compKey:"loadingOverlayComponent",paramsKey:"loadingOverlayComponentParams",isSuppressed:e=>{const t=e.get("loading");return t===!1||e.get("suppressLoadingOverlay")===!0&&t!==!0}},Rb={id:"agNoRowsOverlay",overlayType:"noRows",comp:eC("noRowsOverlayComponent"),wrapperCls:"ag-overlay-no-rows-wrapper",compKey:"noRowsOverlayComponent",paramsKey:"noRowsOverlayComponentParams",isSuppressed:e=>e.get("suppressNoRowsOverlay")},nM={id:"agNoMatchingRowsOverlay",overlayType:"noMatchingRows",comp:eC("noMatchingRowsOverlayComponent"),wrapperCls:"ag-overlay-no-matching-rows-wrapper"},jS={id:"agExportingOverlay",overlayType:"exporting",comp:eC("exportingOverlayComponent"),wrapperCls:"ag-overlay-exporting-wrapper",exclusive:!0},w_={id:"activeOverlay",comp:eC("activeOverlay"),wrapperCls:"ag-overlay-modal-wrapper",exclusive:!0},uSe=e=>e?{agLoadingOverlay:Vv,agNoRowsOverlay:Rb,agNoMatchingRowsOverlay:nM,agExportingOverlay:jS}[e]??w_:null,cSe=e=>e?{loading:Vv,noRows:Rb,noMatchingRows:nM,exporting:jS}[e]:null,dSe=class extends Yt{constructor(){super(...arguments),this.beanName="overlays",this.eWrapper=void 0,this.exclusive=!1,this.oldExclusive=!1,this.currentDef=null,this.showInitialOverlay=!0,this.userForcedNoRows=!1,this.exportsInProgress=0,this.newColumnsLoadedCleanup=null}postConstruct(){const e=this.gos;this.showInitialOverlay=Ks(e);const t=()=>{this.userForcedNoRows||this.updateOverlay(!1)},[n,i,r,o]=this.addManagedEventListeners({newColumnsLoaded:t,rowCountReady:()=>{this.disableInitialOverlay(),t(),i()},rowDataUpdated:t,modelUpdated:t});this.newColumnsLoadedCleanup=n,this.addManagedPropertyListeners(["loading","activeOverlay","activeOverlayParams","overlayComponentParams","loadingOverlayComponentParams","noRowsOverlayComponentParams"],s=>{var a;return this.onPropChange(new Set((a=s.changeSet)==null?void 0:a.properties))})}destroy(){this.doHideOverlay(),super.destroy(),this.eWrapper=void 0}setWrapperComp(e,t){this.isAlive()&&(t?this.eWrapper===e&&(this.eWrapper=void 0):this.eWrapper=e,this.updateOverlay(!1))}isVisible(){return!!this.currentDef}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos;if(!this.eWrapper||e.get("activeOverlay")||this.isDisabled(Vv))return;const t=e.get("loading");!t&&t!==void 0||this.doShowOverlay(Vv)}showNoRowsOverlay(){this.showInitialOverlay=!1;const e=this.gos;!this.eWrapper||e.get("activeOverlay")||e.get("loading")||this.isDisabled(Rb)||(this.userForcedNoRows=!0,this.doShowOverlay(Rb))}async showExportOverlay(e){const{gos:t,beans:n}=this;if(!this.eWrapper||t.get("activeOverlay")||t.get("loading")||this.isDisabled(jS)||this.userForcedNoRows&&this.currentDef===Rb){e();return}const i=this.getDesiredDefWithOverride(jS);if(!i){e();return}this.exportsInProgress++,this.focusedCell=n.focusSvc.getFocusedCell(),await this.doShowOverlay(i),await new Promise(o=>setTimeout(()=>o()));const r=Date.now();try{e()}finally{const o=Date.now()-r,s=Math.max(0,300-o),a=()=>{this.exportsInProgress--,this.exportsInProgress===0&&(this.updateOverlay(!1),Mbe(n,this.focusedCell),this.focusedCell=null)};s>0?setTimeout(()=>a(),s):a()}}hideOverlay(){const e=this.gos;this.showInitialOverlay=!1;const t=this.userForcedNoRows;if(this.userForcedNoRows=!1,e.get("loading")){an(99);return}if(e.get("activeOverlay")){an(296);return}if(this.currentDef===nM){an(297);return}this.doHideOverlay(),t&&this.getOverlayDef()!==Rb&&this.updateOverlay(!1)}getOverlayWrapperSelector(){return aSe}getOverlayWrapperCompClass(){return $H}onPropChange(e){var r,o,s;const t=e.has("activeOverlay");if((t||e.has("loading"))&&this.updateOverlay(t))return;const n=this.currentDef,i=(r=this.eWrapper)==null?void 0:r.activeOverlay;if(i&&n){const a=e.has("activeOverlayParams");if(n===w_)a&&((o=i.refresh)==null||o.call(i,this.makeCompParams(!0)));else{const d=n.paramsKey;(e.has("overlayComponentParams")||d&&e.has(d))&&((s=i.refresh)==null||s.call(i,this.makeCompParams(!1,d,n.overlayType)))}}}updateOverlay(e){const t=this.eWrapper;if(!t)return this.currentDef=null,!1;const n=this.getDesiredDefWithOverride(),i=this.currentDef,r=n===w_&&e;return n!==i?n?(this.doShowOverlay(n),!0):(this.disableInitialOverlay(),this.doHideOverlay()):r&&n?(t.hideOverlay(),this.doShowOverlay(n),!0):(n||this.disableInitialOverlay(),!1)}getDesiredDefWithOverride(e){const{gos:t}=this;let n=uSe(t.get("activeOverlay"));return n||(n=e??this.getOverlayDef(),n&&this.isDisabled(n)&&(n=null)),n}getOverlayDef(){const{gos:e,beans:t}=this,{colModel:n,rowModel:i}=t,r=e.get("loading");if(r!==void 0){if(this.disableInitialOverlay(),r)return Vv}else if(this.showInitialOverlay){if(!this.isDisabled(Vv)&&(!e.get("columnDefs")||!n.ready||!e.get("rowData")))return Vv;this.disableInitialOverlay()}else this.disableInitialOverlay();const s=i.getOverlayType();return cSe(s)}disableInitialOverlay(){var e;this.showInitialOverlay=!1,(e=this.newColumnsLoadedCleanup)==null||e.call(this),this.newColumnsLoadedCleanup=null}doShowOverlay(e){var m;const{gos:t,beans:n}=this,{userCompFactory:i}=n;this.currentDef=e;const r=e!==w_,o=!!e.exclusive;this.exclusive=o;let s;(e.paramsKey&&t.get(e.paramsKey)||e.compKey&&t.get(e.compKey))&&(s=e.paramsKey);let a;r&&(t.get("overlayComponent")||t.get("overlayComponentSelector"))&&(a=i.getCompDetailsFromGridOptions({name:"overlayComponent",optionalMethods:["refresh"]},void 0,this.makeCompParams(!1,e.paramsKey,e.overlayType))),a??(a=i.getCompDetailsFromGridOptions(e.comp,r?e.id:void 0,this.makeCompParams(!r,s,e.overlayType),!1));const d=(a==null?void 0:a.newAgStackInstance())??null,h=this.eWrapper?this.eWrapper.showOverlay(d,e.wrapperCls,o):Fr.resolve();return(m=this.eWrapper)==null||m.refreshWrapperPadding(),this.setExclusive(o),h}makeCompParams(e,t,n){const{gos:i}=this,r=e?i.get("activeOverlayParams"):{...i.get("overlayComponentParams"),...t&&i.get(t)||null,overlayType:n};return ki(i,r??{})}doHideOverlay(){let e=!1;this.currentDef&&(this.currentDef=null,e=!0),this.exclusive=!1;const t=this.eWrapper;return t&&(t.hideOverlay(),t.refreshWrapperPadding(),this.setExclusive(!1)),e}setExclusive(e){this.oldExclusive!==e&&(this.oldExclusive=e,this.eventSvc.dispatchEvent({type:"overlayExclusiveChanged"}))}isDisabled(e){var n,i;const{gos:t}=this;return e.overlayType&&((n=t.get("suppressOverlays"))==null?void 0:n.includes(e.overlayType))||((i=e.isSuppressed)==null?void 0:i.call(e,t))===!0}},hSe={moduleName:"Overlay",version:Fn,userComponents:{agLoadingOverlay:Ube,agNoRowsOverlay:Ybe,agNoMatchingRowsOverlay:Jbe,agExportingOverlay:Kbe},apiFunctions:{showLoadingOverlay:nSe,showNoRowsOverlay:iSe,hideOverlay:rSe},icons:{overlayLoading:"loading",overlayExporting:"loading"},beans:[dSe]},fSe=class extends Yt{constructor(){super(...arguments),this.beanName="rowContainerHeight",this.scrollY=0,this.uiBodyHeight=0}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=ove(),p0(this.gos,"RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}updateOffset(){if(!this.stretching)return;const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;p0(this.gos,`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventSvc.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventSvc.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=this.modelHeight-this.getUiBodyHeight(),n=e/t;return this.maxScrollY*n}},pSe=400,gSe=class extends Yt{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{for(const o of this.getAllCellCtrls())o.onCellSelectionChanged()},t=()=>{for(const o of this.getAllCellCtrls())o.updateRangeBordersIfRangeCount()},n=()=>{this.eventSvc.addListener("cellSelectionChanged",e),this.eventSvc.addListener("columnMoved",t),this.eventSvc.addListener("columnPinned",t),this.eventSvc.addListener("columnVisible",t)},i=()=>{this.eventSvc.removeListener("cellSelectionChanged",e),this.eventSvc.removeListener("columnMoved",t),this.eventSvc.removeListener("columnPinned",t),this.eventSvc.removeListener("columnVisible",t)};this.addDestroyFunc(()=>i()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{Oy(this.gos)?n():i()}),Oy(this.gos)&&n()}}wireBeans(e){this.pageBounds=e.pageBounds,this.colModel=e.colModel,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusSvc=e.focusSvc,this.rowContainerHeight=e.rowContainerHeight,this.ctrlsSvc=e.ctrlsSvc,this.editSvc=e.editSvc}postConstruct(){this.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),pinnedRowsChanged:this.onPinnedRowsChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",i=>this.onSuppressCellFocusChanged(i.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.addManagedPropertyListener("cellSelection",({currentValue:i,previousValue:r})=>{(!r&&i||r&&!i)&&this.redrawRows()});const{stickyRowSvc:e,gos:t,showRowGroupCols:n}=this.beans;if(n&&this.addManagedPropertyListener("showOpenedGroup",()=>{const i=n.columns;i.length&&this.refreshCells({columns:i,force:!0})}),e)this.stickyRowFeature=e.createStickyRowFeature(this,this.createRowCon.bind(this),this.destroyRowCtrls.bind(this));else{const i=this.gridBodyCtrl;i.setStickyTopHeight(0),i.setStickyBottomHeight(0)}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=lu(t,"print"),this.embedFullWidthRows=this.printLayout||t.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new mSe(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){var e;return((e=this.stickyRowFeature)==null?void 0:e.stickyTopRowCtrls)??[]}getStickyBottomRowCtrls(){var e;return((e=this.stickyRowFeature)==null?void 0:e.stickyBottomRowCtrls)??[]}updateAllRowCtrls(){var i;const e=Object.values(this.rowCtrlsByRowIndex),t=Object.values(this.zombieRowCtrls),n=((i=this.cachedRowCtrls)==null?void 0:i.getEntries())??[];t.length>0||n.length>0?this.allRowCtrls=[...e,...t,...n]:this.allRowCtrls=e}isCellBeingRendered(e,t){var r;const n=this.rowCtrlsByRowIndex[e];return!t||!n?!!n:n.isFullWidth()?!0:!!((r=this.beans.spannedRowRenderer)==null?void 0:r.getCellByPosition({rowIndex:e,column:t,rowPinned:null}))||!!n.getCellCtrl(t)||!n.isRowRendered()}updateCellFocus(e){for(const t of this.getAllCellCtrls())t.onCellFocused(e);for(const t of this.getFullWidthRowCtrls())t.onFullWidthRowFocused(e)}onCellFocusChanged(e){if((e==null?void 0:e.rowIndex)!=null&&!e.rowPinned){const t=this.beans.colModel.getCol(e.column)??void 0;this.isCellBeingRendered(e.rowIndex,t)||this.redraw()}this.updateCellFocus(e)}onSuppressCellFocusChanged(e){for(const t of this.getAllCellCtrls())t.onSuppressCellFocusChanged(e);for(const t of this.getFullWidthRowCtrls())t.onSuppressCellFocusChanged(e)}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>this.onCellFocusChanged(e),cellFocusCleared:()=>this.updateCellFocus(),flashCells:e=>{const{cellFlashSvc:t}=this.beans;if(t)for(const n of this.getAllCellCtrls())t.onFlashCells(n,e)},columnHoverChanged:()=>{for(const e of this.getAllCellCtrls())e.onColumnHover()},displayedColumnsChanged:()=>{for(const e of this.getAllCellCtrls())e.onDisplayedColumnsChanged()},displayedColumnsWidthChanged:()=>{if(this.printLayout)for(const e of this.getAllCellCtrls())e.onLeftChanged()}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){for(const e of this.destroyFuncsForColumnListeners)e();this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners();const e=this.colModel.getCols();for(const t of e){const n=d=>{for(const h of this.getAllCellCtrls())h.column===t&&d(h)},i=()=>{n(d=>d.onLeftChanged())},r=()=>{n(d=>d.onWidthChanged())},o=()=>{n(d=>d.onFirstRightPinnedChanged())},s=()=>{n(d=>d.onLastLeftPinnedChanged())},a=()=>{n(d=>d.onColDefChanged())};t.__addEventListener("leftChanged",i),t.__addEventListener("widthChanged",r),t.__addEventListener("firstRightPinnedChanged",o),t.__addEventListener("lastLeftPinnedChanged",s),t.__addEventListener("colDefChanged",a),this.destroyFuncsForColumnListeners.push(()=>{t.__removeEventListener("leftChanged",i),t.__removeEventListener("widthChanged",r),t.__removeEventListener("firstRightPinnedChanged",o),t.__removeEventListener("lastLeftPinnedChanged",s),t.__removeEventListener("colDefChanged",a)})}}onDomLayoutChanged(){const e=lu(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),n=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,n&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsNotSpanningForColumn(e){var n;const t=[];for(const i of this.getAllRowCtrls()){const r=(n=i.getCellCtrl(e,!0))==null?void 0:n.eGui;r&&t.push(r)}return t}refreshFloatingRowComps(e=!0){this.refreshFloatingRows(this.topRowCtrls,"top",e),this.refreshFloatingRows(this.bottomRowCtrls,"bottom",e)}refreshFloatingRows(e,t,n){const{pinnedRowModel:i,beans:r,printLayout:o}=this,s=Object.fromEntries(e.map(d=>[d.rowNode.id,d]));i==null||i.forEachPinnedRow(t,(d,h)=>{const m=e[h];m&&i.getPinnedRowById(m.rowNode.id,t)===void 0&&(m.destroyFirstPass(),m.destroySecondPass()),d.id in s&&n?(e[h]=s[d.id],delete s[d.id]):e[h]=new GS(d,r,!1,!1,o)});const a=(t==="top"?i==null?void 0:i.getPinnedTopRowCount():i==null?void 0:i.getPinnedBottomRowCount())??0;e.length=a}onPinnedRowDataChanged(){const e={recycleRows:!0};this.redrawAfterModelUpdate(e)}onPinnedRowsChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(e,t=!1){var n,i;if(e.sticky)(n=this.stickyRowFeature)==null||n.refreshStickyNode(e);else if((i=this.cachedRowCtrls)!=null&&i.has(e)){this.cachedRowCtrls.removeRow(e);return}else{const r=o=>{const s=o[e.rowIndex];s&&s.rowNode===e&&(s.destroyFirstPass(),s.destroySecondPass(),o[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":r(this.topRowCtrls);break;case"bottom":r(this.bottomRowCtrls);break;default:r(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){const{editSvc:t}=this.beans;if(t!=null&&t.isEditing()&&(t.isBatchEditing()?t.cleanupEditors():t.stopEditing(void 0,{source:"api"})),e!=null){for(const i of e??[])this.redrawRow(i,!0);this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}redrawAfterModelUpdate(e={}){var a;this.getLockOnRefresh();const t=(a=this.beans.focusSvc)==null?void 0:a.getFocusCellToUseAfterRefresh();this.updateContainerHeights(),this.scrollToTopIfNewData(e);const n=!e.domLayoutChanged&&!!e.recycleRows,i=e.animate&&Mb(this.gos),r=n?this.getRowsToRecycle():null;n||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender();const{stickyRowFeature:o,gos:s}=this;if(o){o.checkStickyRows();const d=o.extraTopHeight+o.extraBottomHeight;d&&this.updateContainerHeights(d)}this.recycleRows(r,i),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(s.get("enableRowPinning")?n:void 0),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){var i;const t=e.newData||e.newPage,n=this.gos.get("suppressScrollOnNewData");t&&!n&&(this.gridBodyCtrl.scrollFeature.scrollToTop(),(i=this.stickyRowFeature)==null||i.resetOffsets())}updateContainerHeights(e=0){const{rowContainerHeight:t}=this;if(this.printLayout){t.setModelHeight(null);return}let n=this.pageBounds.getCurrentPageHeight();n===0&&(n=1),t.setModelHeight(n+e)}getLockOnRefresh(){var e,t;if(this.refreshInProgress)throw new Error(Ip(252));this.refreshInProgress=!0,(t=(e=this.beans.frameworkOverrides).getLockOnRefresh)==null||t.call(e)}releaseLockOnRefresh(){var e,t;this.refreshInProgress=!1,(t=(e=this.beans.frameworkOverrides).releaseLockOnRefresh)==null||t.call(e)}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){if(!e)return;const t=this.beans.focusSvc,n=this.findPositionToFocus(e);if(!n){t.focusHeaderPosition({headerPosition:{headerRowIndex:Pp(this.beans)-1,column:e.column}});return}if(e.rowIndex!==n.rowIndex||e.rowPinned!=n.rowPinned){t.setFocusedCell({...n,preventScrollOnBrowserFocus:!0,forceBrowserFocus:!0});return}t.doesRowOrCellHaveBrowserFocus()||this.updateCellFocus(ki(this.gos,{...n,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))}findPositionToFocus(e){const{pagination:t,pageBounds:n}=this.beans;let i=e;for(i.rowPinned==null&&t&&n&&!t.isRowInPage(i.rowIndex)&&(i={rowPinned:null,rowIndex:n.getFirstRow()});i;){if(i.rowPinned==null&&n)if(i.rowIndex<n.getFirstRow()){if(i=zS(this.beans,{rowPinned:null,rowIndex:0}),!i)return null}else i.rowIndex>n.getLastRow()&&(i={rowPinned:null,rowIndex:n.getLastRow()});const r=this.getRowByPosition(i);if(r!=null&&r.isAlive())return{...r.getRowPosition(),column:e.column};i=zS(this.beans,i)}return null}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),n=t.length;for(let i=0;i<n;i++){const r=t[i].getAllCellCtrls(),o=r.length;for(let s=0;s<o;s++)e.push(r[s])}return e}getAllRowCtrls(){const{spannedRowRenderer:e}=this.beans,t=this.getStickyTopRowCtrls(),n=this.getStickyBottomRowCtrls();return[...this.topRowCtrls,...this.bottomRowCtrls,...t,...n,...(e==null?void 0:e.getCtrls("top"))??[],...(e==null?void 0:e.getCtrls("bottom"))??[],...(e==null?void 0:e.getCtrls("center"))??[],...Object.values(this.rowCtrlsByRowIndex)]}addRenderedRowListener(e,t,n){const i=this.rowCtrlsByRowIndex[t];i&&i.addEventListener(e,n)}refreshCells({rowNodes:e,columns:t,force:n,suppressFlash:i}={}){const r={force:n,newData:!1,suppressFlash:i};for(const o of this.getCellCtrls(e,t))o.refreshOrDestroyCell(r);this.refreshFullWidth(e)}refreshRows(e={}){for(const t of this.getRowCtrls(e.rowNodes))t.refreshRow(e);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=!1;for(const n of this.getRowCtrls(e)){if(!n.isFullWidth())continue;n.refreshFullWidth()||(t=!0,this.redrawRow(n.rowNode,!0))}t&&this.dispatchDisplayedRowsChanged(!1)}getRowCtrls(e){const t=Uk(e),n=this.getAllRowCtrls();return!e||!t?n:n.filter(i=>{const r=i.rowNode;return qk(r,t)})}getCellCtrls(e,t){let n;Dn(t)&&(n={},t.forEach(r=>{const o=this.colModel.getCol(r);Dn(o)&&(n[o.getId()]=!0)}));const i=[];for(const r of this.getRowCtrls(e))for(const o of r.getAllCellCtrls()){const s=o.column.getId();n&&!n[s]||i.push(o)}return i}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){var n;const t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),(n=this.stickyRowFeature)==null||n.destroyStickyCtrls()}getRowsToRecycle(){const e=[];for(const n of Object.keys(this.rowCtrlsByRowIndex))this.rowCtrlsByRowIndex[n].rowNode.id==null&&e.push(n);this.removeRowCtrls(e);const t={};for(const n of Object.values(this.rowCtrlsByRowIndex)){const i=n.rowNode;t[i.id]=n}return this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){for(const n of e){const i=this.rowCtrlsByRowIndex[n];i&&(i.destroyFirstPass(t),i.destroySecondPass()),delete this.rowCtrlsByRowIndex[n]}}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){const{focusSvc:t,animationFrameSvc:n}=this.beans,{afterScroll:i}=e;let r;const o=this.stickyRowFeature;o&&(r=(t==null?void 0:t.getFocusCellToUseAfterRefresh())||void 0);const s=this.firstRenderedRow,a=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let d=!1;if(o){d=o.checkStickyRows();const m=o.extraTopHeight+o.extraBottomHeight;m&&this.updateContainerHeights(m)}const h=this.firstRenderedRow!==s||this.lastRenderedRow!==a;if(!(i&&!d&&!h)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,i),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(i&&!d),r!=null)){const m=t==null?void 0:t.getFocusCellToUseAfterRefresh();r!=null&&m==null&&(n==null||n.flushAllFrames(),this.restoreFocusedCell(r))}}removeRowCompsNotToDraw(e,t){const n={};for(const o of e)n[o]=!0;const r=Object.keys(this.rowCtrlsByRowIndex).filter(o=>!n[o]);this.removeRowCtrls(r,t)}calculateIndexesToDraw(e){var s,a;const t=[];for(let d=this.firstRenderedRow;d<=this.lastRenderedRow;d++)t.push(d);const n=this.beans.pagination,i=(a=(s=this.beans.focusSvc)==null?void 0:s.getFocusedCell())==null?void 0:a.rowIndex;i!=null&&(i<this.firstRenderedRow||i>this.lastRenderedRow)&&(!n||n.isRowInPage(i))&&i<this.rowModel.getRowCount()&&t.push(i);const r=d=>{const h=d.rowNode.rowIndex;h==null||h===i||(h<this.firstRenderedRow||h>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(d)&&t.push(h)};for(const d of Object.values(this.rowCtrlsByRowIndex))r(d);if(e)for(const d of Object.values(e))r(d);t.sort((d,h)=>d-h);const o=[];for(let d=0;d<t.length;d++){const h=t[d],m=this.rowModel.getRow(h);m&&!m.sticky&&o.push(h)}return o}recycleRows(e,t=!1,n=!1){const i=this.calculateIndexesToDraw(e);(this.printLayout||n)&&(t=!1),this.removeRowCompsNotToDraw(i,!t);for(const r of i)this.createOrUpdateRowCtrl(r,e,t,n);if(e){const{animationFrameSvc:r}=this.beans;(r==null?void 0:r.active)&&n&&!this.printLayout?r.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventSvc.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){const{visibleCols:e}=this.beans,t=e.isPinningLeft(),n=e.isPinningRight();(this.pinningLeft!==t||n!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=n,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];for(const t of this.getFullWidthRowCtrls()){const n=t.rowNode.rowIndex;e.push(n.toString())}this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=Uk(e);return this.getAllRowCtrls().filter(n=>{if(!n.isFullWidth())return!1;const i=n.rowNode;return!(t!=null&&!qk(i,t))})}createOrUpdateRowCtrl(e,t,n,i){let r,o=this.rowCtrlsByRowIndex[e];if(o||(r=this.rowModel.getRow(e),Dn(r)&&Dn(t)&&t[r.id]&&r.alreadyRendered&&(o=t[r.id],t[r.id]=null)),!o)if(r||(r=this.rowModel.getRow(e)),Dn(r))o=this.createRowCon(r,n,i);else return;r&&(r.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=o}destroyRowCtrls(e,t){const n=[];if(e){for(const i of Object.values(e))if(i){if(this.cachedRowCtrls&&i.isCacheable()){this.cachedRowCtrls.addRow(i);continue}if(i.destroyFirstPass(!t),t){const r=i.instanceId;this.zombieRowCtrls[r]=i,n.push(()=>{i.destroySecondPass(),delete this.zombieRowCtrls[r]})}else i.destroySecondPass()}}t&&(n.push(()=>{this.isAlive()&&(this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged())}),window.setTimeout(()=>{for(const i of n)i()},pSe))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){const e=this.getRowBuffer(),t=n0(this.beans);return e*t}workOutFirstAndLastRowsToRender(){const{rowContainerHeight:e,pageBounds:t,rowModel:n}=this;e.updateOffset();let i,r;if(!n.isRowsToRender())i=0,r=-1;else if(this.printLayout)this.beans.environment.refreshRowHeightVariable(),i=t.getFirstRow(),r=t.getLastRow();else{const m=this.getRowBufferInPixels(),v=this.ctrlsSvc.getScrollFeature(),w=this.gos.get("suppressRowVirtualisation");let R=!1,L,O;do{const X=t.getPixelOffset(),{pageFirstPixel:q,pageLastPixel:ie}=t.getCurrentPagePixelRange(),re=e.divStretchOffset,J=v.getVScrollPosition(),ne=J.top,be=J.bottom;w?(L=q+re,O=ie+re):(L=Math.max(ne+X-m,q)+re,O=Math.min(be+X+m,ie)+re),this.firstVisibleVPixel=Math.max(ne+X,q)+re,this.lastVisibleVPixel=Math.min(be+X,ie)+re,R=this.ensureAllRowsInRangeHaveHeightsCalculated(L,O)}while(R);let z=n.getRowIndexAtPixel(L),$=n.getRowIndexAtPixel(O);const U=t.getFirstRow(),Y=t.getLastRow();z<U&&(z=U),$>Y&&($=Y),i=z,r=$}const o=lu(this.gos,"normal"),s=this.gos.get("suppressMaxRenderedRowRestriction"),a=Math.max(this.getRowBuffer(),500);o&&!s&&r-i>a&&(r=i+a);const d=i!==this.firstRenderedRow,h=r!==this.lastRenderedRow;(d||h)&&(this.firstRenderedRow=i,this.lastRenderedRow=r,this.eventSvc.dispatchEvent({type:"viewportChanged",firstRow:i,lastRow:r}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,Rm(this.beans,()=>{this.beans.eventSvc.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){var a,d;const n=(a=this.pinnedRowModel)==null?void 0:a.ensureRowHeightsValid(),i=(d=this.stickyRowFeature)==null?void 0:d.ensureRowHeightsValid(),{pageBounds:r,rowModel:o}=this,s=o.ensureRowHeightsValid(e,t,r.getFirstRow(),r.getLastRow());return(s||i)&&this.eventSvc.dispatchEvent({type:"recalculateRowBounds"}),i||s||n?(this.updateContainerHeights(),!0):!1}doNotUnVirtualiseRow(e){var h;const i=e.rowNode,r=this.focusSvc.isRowFocused(i.rowIndex,i.rowPinned),o=(h=this.editSvc)==null?void 0:h.isEditing(e),s=i.detail;return r||o||s?!!this.isRowPresent(i):!1}isRowPresent(e){var t;return this.rowModel.isRowPresent(e)?((t=this.beans.pagination)==null?void 0:t.isRowInPage(e.rowIndex))??!0:!1}createRowCon(e,t,n){var s,a;const i=((s=this.cachedRowCtrls)==null?void 0:s.getRow(e))??null;if(i)return i;const r=n&&!this.printLayout&&!!((a=this.beans.animationFrameSvc)!=null&&a.active);return new GS(e,this.beans,t,r,this.printLayout)}getRenderedNodes(){const e=Object.values(this.rowCtrlsByRowIndex).map(i=>i.rowNode),t=this.getStickyTopRowCtrls().map(i=>i.rowNode),n=this.getStickyBottomRowCtrls().map(i=>i.rowNode);return[...t,...e,...n]}getRowByPosition(e){let t;const{rowIndex:n}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[n];break;case"bottom":t=this.bottomRowCtrls[n];break;default:t=this.rowCtrlsByRowIndex[n],t||(t=this.getStickyTopRowCtrls().find(i=>i.rowNode.rowIndex===n)||null,t||(t=this.getStickyBottomRowCtrls().find(i=>i.rowNode.rowIndex===n)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;const i=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!i}},mSe=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.rowNode.id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if((e==null?void 0:e.id)==null)return null;const t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.rowNode!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){const t=e.id,n=this.entriesMap[t];delete this.entriesMap[t],Bp(this.entriesList,n)}removeFromCache(e){const t=e.rowNode.id;delete this.entriesMap[t],Bp(this.entriesList,e)}getEntries(){return this.entriesList}};function Uk(e){if(!e)return;const t={top:{},bottom:{},normal:{}};for(const n of e){const i=n.id;switch(n.rowPinned){case"top":t.top[i]=n;break;case"bottom":t.bottom[i]=n;break;default:t.normal[i]=n;break}}return t}function qk(e,t){const n=e.id;switch(e.rowPinned){case"top":return t.top[n]!=null;case"bottom":return t.bottom[n]!=null;default:return t.normal[n]!=null}}var ySe=class extends Yt{constructor(){super(...arguments),this.beanName="rowNodeSorter"}postConstruct(){const{gos:e}=this;this.isAccentedSort=e.get("accentedSort"),this.primaryColumnsSortGroups=Ep(e),this.firstLeaf=Ks(e)?NS:vSe,this.addManagedPropertyListener("accentedSort",t=>this.isAccentedSort=t.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=Ep(e))}doFullSort(e,t){const n=e.map((i,r)=>({currentPos:r,rowNode:i}));return n.sort(this.compareRowNodes.bind(this,t)),n.map(i=>i.rowNode)}compareRowNodes(e,t,n){const i=t.rowNode,r=n.rowNode;for(let o=0,s=e.length;o<s;o++){const a=e[o],d=a.sort==="desc",h=this.getValue(i,a.column),m=this.getValue(r,a.column);let v;const w=this.getComparator(a,i);if(w)v=w(h,m,i,r,d);else{const L={accentedCompare:this.isAccentedSort};a.type==="absolute"&&(L.transform=bSe),v=kge(h,m,L)}if(!isNaN(v)&&v!==0)return a.sort==="asc"?v:v*-1}return t.currentPos-n.currentPos}getComparator(e,t){const n=e.column.getColDef(),i=this.getComparatorFromColDef(n,e);if(i)return i;if(!n.showRowGroup)return;const r=!t.group&&n.field;if(!r)return;const o=this.beans.colModel.getColDefCol(r);if(o)return this.getComparatorFromColDef(o.getColDef(),e)}getComparatorFromColDef(e,t){const n=e.comparator;if(n!=null)return typeof n=="object"?n[pm(t.type)]:n}getValue(e,t){if(this.primaryColumnsSortGroups&&e.rowGroupColumn===t)return this.getGroupDataValue(e,t);if(e.group&&t.getColDef().showRowGroup)return;const{valueSvc:n,formula:i}=this.beans,r=n.getValue(t,e,!1);return t.isAllowFormula()&&(i!=null&&i.isFormula(r))?i.resolveValue(t,e):r}getGroupDataValue(e,t){var d;const{gos:n,valueSvc:i,colModel:r,showRowGroupCols:o}=this.beans;if(l7(n,r.isPivotActive())){const h=this.firstLeaf(e);return h&&i.getValue(t,h,!1)}const a=o==null?void 0:o.getShowRowGroupCol(t.getId());if(a)return(d=e.groupData)==null?void 0:d[a.getId()]}},vSe=e=>{if(e.data)return e;let t=e.childrenAfterGroup;for(;t!=null&&t.length;){const n=t[0];if(n.data)return n;t=n.childrenAfterGroup}};function bSe(e){if(!e)return e;const t=Number(e);return isNaN(t)?e:Math.abs(t)}function xSe(e){var t;(t=e.sortSvc)==null||t.onSortChanged("api")}var Nv=(e,t)=>({tag:"span",ref:`eSort${e}`,cls:`ag-sort-indicator-icon ag-sort-${t} ag-hidden`,attrs:{"aria-hidden":"true"}}),wSe={tag:"span",cls:"ag-sort-indicator-container",children:[Nv("Order","order"),Nv("Asc","ascending-icon"),Nv("Desc","descending-icon"),Nv("Mixed","mixed-icon"),Nv("AbsoluteAsc","absolute-ascending-icon"),Nv("AbsoluteDesc","absolute-descending-icon"),Nv("None","none-icon")]},iM=class extends ra{constructor(e){super(),this.eSortOrder=Yn,this.eSortAsc=Yn,this.eSortDesc=Yn,this.eSortMixed=Yn,this.eSortNone=Yn,this.eSortAbsoluteAsc=Yn,this.eSortAbsoluteDesc=Yn,e||this.setTemplate(wSe)}attachCustomElements(e,t,n,i,r,o,s){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=n,this.eSortMixed=i,this.eSortNone=r,this.eSortAbsoluteAsc=o,this.eSortAbsoluteDesc=s}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!e.isSortable()&&!e.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addInIcon("sortAbsoluteAscending",this.eSortAbsoluteAsc,e),this.addInIcon("sortAbsoluteDescending",this.eSortAbsoluteDesc,e);const n=this.updateIcons.bind(this),i=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",n),this.addManagedEventListeners({newColumnsLoaded:n,sortChanged:i,columnRowGroupChanged:i}),this.onSortChanged()}addInIcon(e,t,n){if(t==null)return;const i=Gc(e,this.beans,n);i&&t.appendChild(i)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const{eSortAsc:e,eSortDesc:t,eSortAbsoluteAsc:n,eSortAbsoluteDesc:i,eSortNone:r,column:o,gos:s,beans:a}=this,d=a.sortSvc.getDisplaySortForColumn(o),h=pm(d==null?void 0:d.type),m=U2(d==null?void 0:d.direction),v=o.getAvailableSortTypes(),w=v.has("default"),R=v.has("absolute"),L=h==="absolute",O=h==="default",z=m==="asc",$=m==="desc";if(e&&$o(e,z&&O&&w,{skipAriaHidden:!0}),t&&$o(t,$&&O&&w,{skipAriaHidden:!0}),r){const U=!o.getColDef().unSortIcon&&!s.get("unSortIcon");$o(r,!U&&!m,{skipAriaHidden:!0})}n&&$o(n,z&&L&&R,{skipAriaHidden:!0}),i&&$o(i,$&&L&&R,{skipAriaHidden:!0})}setupMultiSortIndicator(){const{eSortMixed:e,column:t,gos:n}=this;this.addInIcon("sortUnSort",e,t);const i=t.getColDef().showRowGroup;Ep(n)&&i&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){var i;const{eSortMixed:e,beans:t,column:n}=this;if(e){const r=((i=t.sortSvc.getDisplaySortForColumn(n))==null?void 0:i.direction)==="mixed";$o(e,r,{skipAriaHidden:!0})}}updateSortOrder(){const{eSortOrder:e,column:t,beans:{sortSvc:n}}=this;if(!e)return;const i=n.getColumnsWithSortingOrdered(),r=n.getDisplaySortIndexForColumn(t)??-1,o=i.some(a=>n.getDisplaySortIndexForColumn(a)??!1),s=r>=0&&o;$o(e,s,{skipAriaHidden:!0}),r>=0?e.textContent=(r+1).toString():jc(e)}},CSe={selector:"AG-SORT-INDICATOR",component:iM},_Se=class extends Yt{constructor(){super(...arguments),this.beanName="sortSvc"}progressSort(e,t,n){const i=this.getNextSortDirection(e);this.setSortForColumn(e,i,t,n)}progressSortFromEvent(e,t){const i=this.gos.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.progressSort(e,i,"uiColumnSorted")}setSortForColumn(e,t,n,i){var m;const{gos:r,showRowGroupCols:o}=this.beans,s=Ep(r);let a=[e];if(s&&e.getColDef().showRowGroup){const v=(m=o==null?void 0:o.getSourceColumnsForGroupColumn)==null?void 0:m.call(o,e),w=v==null?void 0:v.filter(R=>R.isSortable());w&&(a=[e,...w])}for(const v of a)this.setColSort(v,t,i);const d=(n||r.get("alwaysMultiSort"))&&!r.get("suppressMultiSort"),h=[];if(!d){const v=this.clearSortBarTheseColumns(a,i);h.push(...v)}this.updateSortIndex(e),h.push(...a),this.dispatchSortChangedEvents(i,h)}updateSortIndex(e){const{gos:t,colModel:n,showRowGroupCols:i}=this.beans,r=Ep(t),o=i==null?void 0:i.getShowRowGroupCol(e.getId()),s=r&&o||e,a=this.getColumnsWithSortingOrdered();n.forAllCols(m=>this.setColSortIndex(m,null));const d=a.filter(m=>r&&m.getColDef().showRowGroup?!1:m!==s);(s.getSortDef()?[...d,s]:d).forEach((m,v)=>this.setColSortIndex(m,v))}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){let e=!1;return this.beans.colModel.forAllCols(t=>{if(t.getSortDef())return e=!0,!0}),e}dispatchSortChangedEvents(e,t){const n={type:"sortChanged",source:e};t&&(n.columns=t),this.eventSvc.dispatchEvent(n)}clearSortBarTheseColumns(e,t){const n=[];return this.beans.colModel.forAllCols(i=>{e.includes(i)||(i.getSortDef()&&n.push(i),this.setColSort(i,void 0,t))}),n}getNextSortDirection(e){const t=e.getSortingOrder(),n=e.getSortDef();let r=t.findIndex(o=>d_(o,n))+1;return r>=t.length&&(r=0),mf(t[r])}getIndexedSortMap(){const{gos:e,colModel:t,showRowGroupCols:n,rowGroupColsSvc:i}=this.beans;let r=[];if(t.forAllCols(h=>{h.getSortDef()&&r.push(h)}),t.isPivotMode()){const h=Ep(e);r=r.filter(m=>{const v=!!m.getAggFunc(),w=!m.isPrimary(),R=h?n==null?void 0:n.getShowRowGroupCol(m.getId()):m.getColDef().showRowGroup;return v||w||R})}const o=(i==null?void 0:i.columns.filter(h=>!!h.getSortDef()))??[],s={};r.forEach((h,m)=>s[h.getId()]=m),r.sort((h,m)=>{const v=h.getSortIndex(),w=m.getSortIndex();if(v!=null&&w!=null)return v-w;if(v==null&&w==null){const R=s[h.getId()],L=s[m.getId()];return R>L?1:-1}else return w==null?-1:1});const a=Ep(e)&&!!o.length;a&&(r=[...new Set(r.map(h=>(n==null?void 0:n.getShowRowGroupCol(h.getId()))??h))]);const d=new Map;if(r.forEach((h,m)=>d.set(h,m)),a)for(const h of o){const m=n.getShowRowGroupCol(h.getId());d.set(h,d.get(m))}return d}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([,e],[,t])=>e-t).map(([e])=>e)}collectSortItems(e=!1){var i,r;const t=[],n=this.getColumnsWithSortingOrdered();for(const o of n){const s=(i=o.getSortDef())==null?void 0:i.direction;if(!s)continue;const a=pm((r=o.getSortDef())==null?void 0:r.type),d={sort:s,type:a};e?d.colId=o.getId():d.column=o,t.push(d)}return t}getSortModel(){return this.collectSortItems(!0)}getSortOptions(){return this.collectSortItems()}canColumnDisplayMixedSort(e){const t=Ep(this.gos),n=!!e.getColDef().showRowGroup;return t&&n}getDisplaySortForColumn(e){var s,a;const t=(s=this.beans.showRowGroupCols)==null?void 0:s.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!(t!=null&&t.length))return e.getSortDef();const i=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,r=i[0].getSortDef();return i.every(d=>d_(d.getSortDef(),r))?r:{type:pm((a=e.getSortDef())==null?void 0:a.type),direction:"mixed"}}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}setupHeader(e,t){const n=()=>{var o;const{type:i,direction:r}=mf(t.getSortDef());if(e.toggleCss("ag-header-cell-sorted-asc",r==="asc"),e.toggleCss("ag-header-cell-sorted-desc",r==="desc"),e.toggleCss("ag-header-cell-sorted-abs-asc",i==="absolute"&&r==="asc"),e.toggleCss("ag-header-cell-sorted-abs-desc",i==="absolute"&&r==="desc"),e.toggleCss("ag-header-cell-sorted-none",!r),t.getColDef().showRowGroup){const s=(o=this.beans.showRowGroupCols)==null?void 0:o.getSourceColumnsForGroupColumn(t),d=!(s==null?void 0:s.every(h=>{var m;return r==((m=h.getSortDef())==null?void 0:m.direction)}));e.toggleCss("ag-header-cell-sorted-mixed",d)}};e.addManagedEventListeners({sortChanged:n,columnRowGroupChanged:n})}initCol(e){const{sortIndex:t,initialSortIndex:n}=e.colDef,i=m7(e.colDef);i&&e.setSortDef(i,!0),t!==void 0?t!==null&&(e.sortIndex=t):n!==null&&(e.sortIndex=n)}updateColSort(e,t,n){t!==void 0&&this.setColSort(e,mf(t),n)}setColSort(e,t,n){d_(e.getSortDef(),t)||(e.setSortDef(mf(t),t===void 0),e.dispatchColEvent("sortChanged",n)),e.dispatchStateUpdatedEvent("sort")}setColSortIndex(e,t){e.sortIndex=t,e.dispatchStateUpdatedEvent("sortIndex")}createSortIndicator(e){return new iM(e)}getSortIndicatorSelector(){return CSe}},WH={moduleName:"Sort",version:Fn,beans:[_Se,ySe],apiFunctions:{onSortChanged:xSe},userComponents:{agSortIndicator:iM},icons:{sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",sortAbsoluteAscending:"aasc",sortAbsoluteDescending:"adesc"}},SSe=class extends Yt{constructor(){super(...arguments),this.beanName="syncSvc",this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.beans.ctrlsSvc.whenReady(this,()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){const{colModel:t,rowModel:n}=this.beans;t.setColumnDefs(e??[],"gridInitializing"),n.start()}gridReady(){const{eventSvc:e,gos:t}=this;e.dispatchEvent({type:"gridReady"}),p0(t,`initialised successfully, enterprise = ${t.isModuleRegistered("EnterpriseCore")}`)}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.beans.colModel.setColumnDefs(t,zb(e.source))}}};function ESe(e){var t;(t=e.valueCache)==null||t.expire()}function RSe(e,t){const{colKey:n,rowNode:i,useFormatter:r}=t,o=e.colModel.getColDefCol(n)??e.colModel.getCol(n);if(vs(o))return null;const s=e.valueSvc.getValueForDisplay({column:o,node:i,includeValueFormatted:r});return r?s.valueFormatted??kx(s.value):s.value}var ASe="paste",TSe=class extends Yt{constructor(){super(...arguments),this.beanName="changeDetectionSvc",this.clientSideRowModel=null}postConstruct(){const{gos:e,rowModel:t}=this.beans;Ks(e)&&(this.clientSideRowModel=t),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){const{gos:t,rowRenderer:n}=this.beans;if(e.source===ASe||t.get("suppressChangeDetection"))return;const i=e.node,r=[i],o=this.clientSideRowModel,s=o==null?void 0:o.rootNode;if(s&&!i.isRowPinned()){const a=t.get("aggregateOnlyChangedColumns"),d=new f1(a,s);d.addParentNode(i.parent,[e.column]),o.doAggregate(d),d.forEachChangedNodeDepthFirst(h=>{r.push(h),h.sibling&&r.push(h.sibling)})}n.refreshCells({rowNodes:r})}},kSe=class extends Yt{constructor(){super(...arguments),this.beanName="expressionSvc",this.cache={}}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);Do(15,{expression:e})}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(n){return Do(16,{expression:e,params:t,e:n}),null}}createExpressionFunction(e){const t=this.cache;if(t[e])return t[e];const n=this.createFunctionBody(e),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",n);return t[e]=i,i}createFunctionBody(e){return e.includes("return")?e:"return "+e+";"}},PSe=class extends Yt{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){const e=this.gos;this.active=e.get("valueCache"),this.neverExpires=e.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,n){if(this.active){const i=this.cacheVersion;e.__cacheVersion!==i&&(e.__cacheVersion=i,e.__cacheData={}),e.__cacheData[t]=n}}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}},DSe={moduleName:"ValueCache",version:Fn,beans:[PSe],apiFunctions:{expireValueCache:ESe}},FSe={moduleName:"Expression",version:Fn,beans:[kSe]},MSe={moduleName:"ChangeDetection",version:Fn,beans:[TSe]},ISe={moduleName:"CellApi",version:Fn,apiFunctions:{getCellValue:RSe}},LSe=class extends Yt{constructor(){super(...arguments),this.beanName="valueSvc",this.hasEditSvc=!1,this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionSvc=e.expressionSvc,this.colModel=e.colModel,this.valueCache=e.valueCache,this.dataTypeSvc=e.dataTypeSvc,this.editSvc=e.editSvc,this.hasEditSvc=!!e.editSvc,this.formulaDataSvc=e.formulaDataSvc}postConstruct(){this.initialised||this.init()}init(){const{gos:e,valueCache:t}=this;this.executeValueGetter=t?this.executeValueGetterWithValueCache.bind(this):this.executeValueGetterWithoutValueCache.bind(this),this.isSsrm=Px(e),this.cellExpressions=e.get("enableCellExpressions"),this.isTreeData=e.get("treeData"),this.initialised=!0;const n=i=>this.callColumnCellValueChangedHandler(i);this.eventSvc.addListener("cellValueChanged",n,!0),this.addDestroyFunc(()=>this.eventSvc.removeListener("cellValueChanged",n,!0)),this.addManagedPropertyListener("treeData",i=>this.isTreeData=i.currentValue)}getValueForDisplay(e){const{column:t,node:n,includeValueFormatted:i,useRawFormula:r,exporting:o,source:s="ui"}=e,{showRowGroupColValueSvc:a}=this.beans,d=!t&&n.group,h=t==null?void 0:t.colDef.showRowGroup,m=!this.isTreeData||n.footer;if(a&&m&&(d||h)){const Y=a.getGroupValue(n,t);if(Y==null)return{value:null,valueFormatted:null};if(!i)return{value:Y.value,valueFormatted:null};const X=a.formatAndPrefixGroupColValue(Y,t,o);return{value:Y.value,valueFormatted:X}}if(!t)return{value:n.key,valueFormatted:null};const v=n.leafGroup&&this.colModel.isPivotMode(),w=n.group&&n.expanded&&!n.footer&&!v,R=this.gos.get("groupSuppressBlankHeader")||!n.sibling,L=w&&!R;let O=this.getValue(t,n,L,s),z=O;const{formula:$}=this.beans,U=i&&!(o&&t.colDef.useValueFormatterForExport===!1);return t.isAllowFormula()&&($!=null&&$.isFormula(O))&&(r?(O=$.normaliseFormula(O,!0),z=$.resolveValue(t,n)):(O=$.resolveValue(t,n),z=O)),{value:O,valueFormatted:U?this.formatValue(t,n,z):null}}getValue(e,t,n=!1,i="ui"){var a;if(this.initialised||this.init(),!t)return;if(this.hasEditSvc&&i==="ui"){const d=this.editSvc;if(d.isEditing()){const h=d.getCellDataValue({rowNode:t,column:e},!0);if(h!==void 0)return h}}const o=e.getColDef().showRowGroup;if(typeof o=="string"&&(((a=this.beans.rowGroupColsSvc)==null?void 0:a.getColumnIndex(o))??-1)>t.level)return null;let s=this.resolveValue(e,t,n);if(this.cellExpressions&&a4(s)){const d=s.substring(1);s=this.executeValueGetter(d,t.data,e,t)}return s}getFormulaFromDataSource(e,t){const n=this.formulaDataSvc;if(!(n!=null&&n.hasDataSource())||!e.isAllowFormula())return;const i=n.getFormula({column:e,rowNode:t});return a4(i)?i:void 0}resolveValue(e,t,n){const i=e.getColDef(),r=e.getColId(),o=this.isTreeData,s=this.getFormulaFromDataSource(e,t);if(s!==void 0)return s;const a=!n&&t.aggData&&t.aggData[r]!==void 0;if(o&&a)return t.aggData[r];const d=t.data,h=i.field;if(o&&i.valueGetter)return this.executeValueGetter(i.valueGetter,d,e,t);if(o&&h&&d)return Lw(d,h,e.isFieldContainsDots());const m=t.groupData;if(m&&r in m)return t.groupData[r];if(a)return t.aggData[r];const w=i.showRowGroup,R=typeof w!="string"||!t.group,L=this.isSsrm&&n&&!!i.aggFunc,O=this.isSsrm&&t.footer&&t.field&&(w===!0||w===t.field);if(i.valueGetter&&!L)return R?this.executeValueGetter(i.valueGetter,d,e,t):void 0;if(O)return Lw(d,t.field,e.isFieldContainsDots());if(h&&d&&!L)return R?Lw(d,h,e.isFieldContainsDots()):void 0}parseValue(e,t,n,i){var s,a;const r=e.getColDef();if(r.allowFormula&&((s=this.beans.formula)!=null&&s.isFormula(n)))return n;const o=r.valueParser;if(Dn(o)){const d=ki(this.gos,{node:t,data:t==null?void 0:t.data,oldValue:i,newValue:n,colDef:r,column:e});return typeof o=="function"?o(d):(a=this.expressionSvc)==null?void 0:a.evaluate(o,d)}return n}getDeleteValue(e,t){return Dn(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay({column:e,node:t}).value)??null:null}formatValue(e,t,n,i,r=!0){const{expressionSvc:o}=this.beans;let s=null,a;const d=e.getColDef();if(i?a=i:r&&(a=d.valueFormatter),a){const h=t?t.data:null,m=ki(this.gos,{value:n,node:t,data:h,colDef:d,column:e});typeof a=="function"?s=a(m):s=o?o.evaluate(a,m):null}else if(d.refData)return d.refData[n]||"";return s==null&&Array.isArray(n)&&(s=n.join(", ")),s}setValue(e,t,n,i){const r=this.colModel.getColDefCol(t);if(!e||!r)return!1;this.ensureRowData(e);const o=r.getColDef();if(!this.isSetValueSupported({column:r,newValue:n,colDef:o}))return!1;const s=ki(this.gos,{node:e,data:e.data,oldValue:this.getValue(r,e,void 0,i),newValue:n,colDef:o,column:r});s.newValue=n;const a=this.handleExternalFormulaChange({column:r,eventSource:i,newValue:n,setterParams:s,rowNode:e});if(a!==null)return a;let d=this.computeValueChange({column:r,newValue:n,params:s,rowData:e.data,valueSetter:o.valueSetter,field:o.field});return d===void 0&&(d=!0),d?this.finishValueChange(e,r,s,i):!1}finishValueChange(e,t,n,i){var o;e.resetQuickFilterAggregateText(),(o=this.valueCache)==null||o.onDataChanged();const r=this.getValue(t,e);return this.dispatchCellValueChangedEvent(e,n,r,i),e.pinnedSibling&&this.dispatchCellValueChangedEvent(e.pinnedSibling,n,r,i),!0}ensureRowData(e){vs(e.data)&&(e.data={})}isSetValueSupported(e){var h;const{column:t,newValue:n,colDef:i}=e,{field:r,valueSetter:o}=i,s=this.beans.formula,a=t.isAllowFormula()&&(s==null?void 0:s.isFormula(n)),d=!!((h=this.formulaDataSvc)!=null&&h.hasDataSource());return vs(r)&&vs(o)&&!(d&&a)?(an(17),!1):this.dataTypeSvc&&!this.dataTypeSvc.checkType(t,n)?(an(135),!1):!0}handleExternalFormulaChange(e){const{column:t,rowNode:n,newValue:i,eventSource:r,setterParams:o}=e,s=this.beans.formula,a=this.formulaDataSvc;if(!(a!=null&&a.hasDataSource())||!t.isAllowFormula())return null;const d=s==null?void 0:s.isFormula(i),h=a.getFormula({column:t,rowNode:n});if(d){if(!(h!==i))return!1;a.setFormula({column:t,rowNode:n,formula:i});const v=s==null?void 0:s.resolveValue(t,n),w=t.getColDef();if(Dn(w.valueSetter)||!vs(w.field)){const R={...o,newValue:v};this.computeValueChange({column:t,newValue:v,params:R,rowData:n.data,valueSetter:w.valueSetter,field:w.field})}return this.finishValueChange(n,t,o,r)}return h!==void 0&&a.setFormula({column:t,rowNode:n,formula:void 0}),null}computeValueChange(e){var a;const{valueSetter:t,params:n,rowData:i,field:r,column:o,newValue:s}=e;return Dn(t)?typeof t=="function"?t(n):(a=this.expressionSvc)==null?void 0:a.evaluate(t,n):this.setValueUsingField(i,r,s,o.isFieldContainsDots())}dispatchCellValueChangedEvent(e,t,n,i){this.eventSvc.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:t.column,colDef:t.colDef,data:e.data,node:e,oldValue:t.oldValue,newValue:n,value:n,source:i})}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;typeof t=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,n,i){if(!t)return!1;let r=!1;if(!i)r=e[t]===n,r||(e[t]=n);else{const o=t.split(".");let s=e;for(;o.length>0&&s;){const a=o.shift();o.length===0?(r=s[a]===n,r||(s[a]=n)):s=s[a]}}return!r}executeValueGetterWithValueCache(e,t,n,i){const r=n.getColId(),o=this.valueCache.getValue(i,r);if(o!==void 0)return o;const s=this.executeValueGetterWithoutValueCache(e,t,n,i);return this.valueCache.setValue(i,r,s),s}executeValueGetterWithoutValueCache(e,t,n,i){var s;const r=ki(this.gos,{data:t,node:i,column:n,colDef:n.getColDef(),getValue:this.getValueCallback.bind(this,i)});let o;return typeof e=="function"?o=e(r):o=(s=this.expressionSvc)==null?void 0:s.evaluate(e,r),o}getValueCallback(e,t){const n=this.colModel.getColDefCol(t);return n?this.getValue(n,e):null}getKeyForNode(e,t){const n=this.getValue(e,t),i=e.getColDef().keyCreator;let r=n;if(i){const o=ki(this.gos,{value:n,colDef:e.getColDef(),column:e,node:t,data:t.data});r=i(o)}return typeof r=="string"||r==null||(r=String(r),r==="[object Object]"&&an(121)),r}},OSe={moduleName:"CommunityCore",version:Fn,beans:[PCe,Pxe,L1e,_ye,fSe,qwe,SCe,XCe,bye,W_e,$_e,gSe,LSe,TCe,_Ce,kCe,z1e,SSe,P1e,D1e,l_e],icons:{selectOpen:"small-down",smallDown:"small-down",colorPicker:"color-picker",smallUp:"small-up",checkboxChecked:"small-up",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off",smallLeft:"small-left",smallRight:"small-right"},apiFunctions:{getGridId:Dxe,destroy:Fxe,isDestroyed:Mxe,getGridOption:Ixe,setGridOption:Lxe,updateGridOptions:_H,isModuleRegistered:Oxe},dependsOn:[A1e,Ewe,Fwe,WH,r_e,Zwe,o_e,hSe,MSe,a_e,V_e,Z_e,J_e,c_e,I1e,T1e,FSe,Qwe,tSe]},UH={AdvancedFilter:1,AiToolkit:1,AllEnterprise:1,BatchEdit:1,CellSelection:1,Clipboard:1,ColumnMenu:1,ColumnsToolPanel:1,ContextMenu:1,ExcelExport:1,FiltersToolPanel:1,Find:1,GridCharts:1,IntegratedCharts:1,GroupFilter:1,MasterDetail:1,Menu:1,MultiFilter:1,NewFiltersToolPanel:1,Pivot:1,RangeSelection:1,RichSelect:1,RowNumbers:1,RowGrouping:1,RowGroupingPanel:1,ServerSideRowModelApi:1,ServerSideRowModel:1,SetFilter:1,SideBar:1,Sparklines:1,StatusBar:1,TreeData:1,ViewportRowModel:1,Formula:1},YA=["TextFilter","NumberFilter","DateFilter","SetFilter","MultiFilter","GroupFilter","CustomFilter"],zSe={EditCore:["TextEditor","NumberEditor","DateEditor","CheckboxEditor","LargeTextEditor","SelectEditor","RichSelect","CustomEditor"],CheckboxCellRenderer:["AllCommunity"],ClientSideRowModelHierarchy:["RowGrouping","Pivot","TreeData"],ColumnFilter:YA,ColumnGroupHeaderComp:["AllCommunity"],ColumnGroup:["AllCommunity"],ColumnHeaderComp:["AllCommunity"],ColumnMove:["AllCommunity"],ColumnResize:["AllCommunity"],CommunityCore:["AllCommunity"],CsrmSsrmSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],RowModelSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],EnterpriseCore:["AllEnterprise"],FilterCore:[...YA,"QuickFilter","ExternalFilter","AdvancedFilter"],GroupCellRenderer:["RowGrouping","Pivot","TreeData","MasterDetail","ServerSideRowModel"],KeyboardNavigation:["AllCommunity"],LoadingCellRenderer:["ServerSideRowModel"],MenuCore:["ColumnMenu","ContextMenu"],MenuItem:["ColumnMenu","ContextMenu","MultiFilter","IntegratedCharts","ColumnsToolPanel"],Overlay:["AllCommunity"],PinnedColumn:["AllCommunity"],SharedAggregation:["RowGrouping","Pivot","TreeData","ServerSideRowModel"],SharedDragAndDrop:["AllCommunity"],SharedMasterDetail:["MasterDetail","ServerSideRowModel"],SharedMenu:[...YA,"ColumnMenu","ContextMenu"],SharedPivot:["Pivot","ServerSideRowModel"],SharedRowGrouping:["RowGrouping","ServerSideRowModel"],SharedRowSelection:["RowSelection","ServerSideRowModel"],SkeletonCellRenderer:["ServerSideRowModel"],Sort:["AllCommunity"],SsrmInfiniteSharedApi:["InfiniteRowModel","ServerSideRowModelApi"],SharedTreeData:["TreeData","ServerSideRowModel"]},NSe={InfiniteRowModel:"infinite",ClientSideRowModelApi:"clientSide",ClientSideRowModel:"clientSide",ServerSideRowModelApi:"serverSide",ServerSideRowModel:"serverSide",ViewportRowModel:"viewport"};function BSe(e,t){const n=[];for(const i of Array.isArray(e)?e:[e]){const r=zSe[i];if(r)for(const o of r){const s=NSe[o];(!s||s===t)&&n.push(o)}else n.push(i)}return n}var qH=()=>`No AG Grid modules are registered! It is recommended to start with all Community features via the AllCommunityModule:
                    
    import { ModuleRegistry, AllCommunityModule } from 'ag-grid-community';
    
    ModuleRegistry.registerModules([ AllCommunityModule ]);
    `,GSe=e=>{const t=e.map(i=>`import { ${Ow(i)} } from '${UH[i]?"ag-grid-enterprise":"ag-grid-community"}';`);return e.some(i=>i==="IntegratedCharts"||i==="Sparklines")&&t.push("import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';"),`import { ModuleRegistry } from 'ag-grid-community'; 
${t.join(` 
`)} 

ModuleRegistry.registerModules([ ${e.map(i=>Ow(i,!0)).join(", ")} ]); 

For more info see: ${Fb}/modules/`};function Ow(e,t=!1){return t&&(e==="IntegratedCharts"||e==="Sparklines")?`${e}Module.with(AgChartsEnterpriseModule)`:`${e}Module`}function jSe(e,t){const n=t.filter(o=>o==="IntegratedCharts"||o==="Sparklines");let i="";return!(globalThis==null?void 0:globalThis.agCharts)&&n.length>0?i=`Unable to use ${e} as either the ag-charts-community or ag-charts-enterprise script needs to be included alongside ag-grid-enterprise.
`:t.some(o=>UH[o])&&(i=i+`Unable to use ${e} as that requires the ag-grid-enterprise script to be included.
`),i}function KH({moduleName:e,rowModelType:t}){return`To use the ${e}Module you must set the gridOption "rowModelType='${t}'"`}var f6=({reasonOrId:e,moduleName:t,gridScoped:n,gridId:i,rowModelType:r,additionalText:o,isUmd:s})=>{const a=BSe(t,r),d=typeof e=="string"?e:WSe[e];if(s)return jSe(d,a);const h=a.filter(w=>w==="IntegratedCharts"||w==="Sparklines"),m=h.length>0?`${h.map(w=>Ow(w)).join()} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.`:"";return`${`Unable to use ${d} as ${a.length>1?"one of "+a.map(w=>Ow(w)).join(", "):Ow(a[0])} is not registered${n?" for gridId: "+i:""}. ${m} Check if you have registered the module:
`}
${GSe(a)}`+(o?` 

${o}`:"")},p6=e=>`${e} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.

import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';
import { ModuleRegistry } from 'ag-grid-community';
import { ${e} } from 'ag-grid-enterprise';
    
ModuleRegistry.registerModules([${e}.with(AgChartsEnterpriseModule)]);
    `,HSe=e=>`AG Grid: Unable to use the Clipboard API (navigator.clipboard.${e}()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.`,VSe={1:()=>"`rowData` must be an array",2:({nodeId:e})=>`Duplicate node id '${e}' detected from getRowId callback, this could cause issues in your grid.`,3:()=>"Calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.",4:({id:e})=>`Could not find row id=${e}, data item was not found for this id`,5:({data:e})=>["Could not find data item as object was not found.",e," Consider using getRowId to help the Grid find matching row data"],6:()=>"'groupHideOpenParents' only works when specifying specific columns for 'colDef.showRowGroup'",7:()=>"Pivoting is not supported with aligned grids as it may produce different columns in each grid.",8:({key:e})=>`Unknown key for navigation ${e}`,9:({variable:e})=>`No value for ${e==null?void 0:e.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e==null?void 0:e.defaultValue} will be used and updated when styles load.`,10:({eventType:e})=>`As of v33, the '${e}' event is deprecated. Use the global 'modelUpdated' event to determine when row children have changed.`,11:()=>"No gridOptions provided to createGrid",12:({colKey:e})=>["column ",e," not found"],13:()=>"Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid.",14:({groupPrefix:e})=>`Row IDs cannot start with ${e}, this is a reserved prefix for AG Grid's row grouping feature.`,15:({expression:e})=>["value should be either a string or a function",e],16:({expression:e,params:t,e:n})=>["Processing of the expression failed","Expression = ",e,"Params = ",t,"Exception = ",n],17:()=>"you need either field or valueSetter set on colDef for editing to work",18:()=>"alignedGrids contains an undefined option.",19:()=>"alignedGrids - No api found on the linked grid.",20:()=>`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`,21:()=>"pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.",22:({key:e})=>`${e} is an initial property and cannot be updated.`,23:()=>"The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.",24:()=>"row height must be a number if not using standard row model",25:({id:e})=>["The getRowId callback must return a string. The ID ",e," is being cast to a string."],26:({fnName:e,preDestroyLink:t})=>`Grid API function ${e}() cannot be called as the grid has been destroyed.
 Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
 To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${t}`,27:({fnName:e,module:t})=>`API function '${e}' not registered to module '${t}'`,28:()=>"setRowCount cannot be used while using row grouping.",29:()=>"tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?",30:({toIndex:e})=>["tried to insert columns in invalid location, toIndex = ",e,"remember that you should not count the moving columns when calculating the new index"],31:()=>"infinite loop in resizeColumnSets",32:()=>"applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state.",33:()=>"stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON.",34:({key:e})=>`the column type '${e}' is a default column type and cannot be overridden.`,35:()=>"Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type.",36:({t:e})=>"colDef.type '"+e+"' does not correspond to defined gridOptions.columnTypes",37:()=>"Changing the column pinning status is not allowed with domLayout='print'",38:({iconName:e})=>`provided icon '${e}' needs to be a string or a function`,39:()=>"Applying column order broke a group where columns should be married together. Applying new order has been discarded.",40:({e,method:t})=>`${e}
${HSe(t)}`,41:()=>"Browser did not allow document.execCommand('copy'). Ensure 'api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons.",42:()=>"Browser does not support document.execCommand('copy') for clipboard operations",43:({iconName:e})=>`As of v33, icon '${e}' is deprecated. Use the icon CSS name instead.`,44:()=>'Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.',45:({parentCellDataType:e})=>`The data type definition ${e} does not exist.`,46:()=>'The "baseDataType" property of a data type definition must match that of its parent.',47:({cellDataType:e})=>`Missing data type definition - "${e}"`,48:({property:e})=>`Cell data type is "object" but no Value ${e} has been provided. Please either provide an object data type definition with a Value ${e}, or set "colDef.value${e}"`,49:({methodName:e})=>`Framework component is missing the method ${e}()`,50:({compName:e})=>`Could not find component ${e}, did you forget to configure this component?`,51:()=>"Export cancelled. Export is not allowed as per your configuration.",52:()=>"There is no `window` associated with the current `document`",53:()=>"unknown value type during csv conversion",54:()=>"Could not find document body, it is needed for drag and drop and context menu.",55:()=>"addRowDropZone - A container target needs to be provided",56:()=>"addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.",57:()=>"unable to show popup filter, filter instantiation failed",58:()=>"no values found for select cellEditor",59:()=>"cannot select pinned rows",60:()=>"cannot select node until it has finished loading",61:()=>"since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option.",62:({colId:e})=>`setFilterModel() - no column found for colId: ${e}`,63:({colId:e})=>`setFilterModel() - unable to fully apply model, filtering disabled for colId: ${e}`,64:({colId:e})=>`setFilterModel() - unable to fully apply model, unable to create filter for colId: ${e}`,65:()=>"filter missing setModel method, which is needed for setFilterModel",66:()=>"filter API missing getModel method, which is needed for getFilterModel",67:()=>"Filter is missing isFilterActive() method",68:()=>"Column Filter API methods have been disabled as Advanced Filters are enabled.",69:({guiFromFilter:e})=>`getGui method from filter returned ${e}; it should be a DOM element.`,70:({newFilter:e})=>`Grid option quickFilterText only supports string inputs, received: ${typeof e}`,71:()=>"debounceMs is ignored when apply button is present",72:({keys:e})=>["ignoring FilterOptionDef as it doesn't contain one of ",e],73:()=>"invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'",74:()=>"no filter options for filter",75:()=>"Unknown button type specified",76:({filterModelType:e})=>['Unexpected type of filter "',e,'", it looks like the filter was configured with incorrect Filter Options'],77:()=>"Filter model is missing 'conditions'",78:()=>'Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.',79:()=>'"filterParams.maxNumConditions" must be greater than or equal to zero.',80:()=>'"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.',81:()=>'"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".',82:({param:e})=>`DateFilter ${e} is not a number`,83:()=>"DateFilter minValidYear should be <= maxValidYear",84:()=>"DateFilter minValidDate should be <= maxValidDate",85:()=>"DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored.",86:()=>"DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored.",87:()=>"DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.",88:({index:e})=>`Invalid row index for ensureIndexVisible: ${e}`,89:()=>"A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)",90:()=>"datasource is missing getRows method",91:()=>"Filter is missing method doesFilterPass",92:()=>"AnimationFrameService called but animation frames are off",93:()=>"cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`",94:({paginationPageSizeOption:e,pageSizeSet:t,pageSizesSet:n,pageSizeOptions:i})=>`'paginationPageSize=${e}'${t?"":" (default value)"}, but ${e} is not included in${n?"":" the default"} paginationPageSizeSelector=[${i==null?void 0:i.join(", ")}].`,95:({paginationPageSizeOption:e,paginationPageSizeSelector:t})=>`Either set '${t}' to an array that includes ${e} or to 'false' to disable the page size selector.`,96:({id:e,data:t})=>["Duplicate ID",e,"found for pinned row with data",t,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter."],97:({colId:e})=>`cellEditor for column ${e} is missing getGui() method`,98:()=>"popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.",99:()=>"Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.",101:({propertyName:e,componentName:t,agGridDefaults:n,jsComps:i})=>{const r=[],o=[...Object.keys(n??[]).filter(a=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(a)),...Object.keys(i??[]).filter(a=>!!i[a])],s=Ik({inputValue:t,allSuggestions:o,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return r.push(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.
`),s.length>0&&r.push(`         Did you mean: [${s.slice(0,3)}]?
`),r.push("If using a custom component check it has been registered correctly."),r},102:()=>"selectAll: 'filtered' only works when gridOptions.rowModelType='clientSide'",103:()=>"Invalid selection state. When using client-side row model, the state must conform to `string[]`.",104:({value:e,param:t})=>`Numeric value ${e} passed to ${t} param will be interpreted as ${e} seconds. If this is intentional use "${e}s" to silence this warning.`,105:({e})=>["chart rendering failed",e],106:()=>`Theming API and Legacy Themes are both used in the same page. A Theming API theme has been provided to the 'theme' grid option, but the file (ag-grid.css) is also included and will cause styling issues. Remove ag-grid.css from the page. See the migration guide: ${Fb}/theming-migration/`,107:({key:e,value:t})=>`Invalid value for theme param ${e} - ${t}`,108:({e})=>["chart update failed",e],109:({inputValue:e,allSuggestions:t})=>{const n=Ik({inputValue:e,allSuggestions:t,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return[`Could not find '${e}' aggregate function. It was configured as "aggFunc: '${e}'" but it wasn't found in the list of registered aggregations.`,n.length>0?`         Did you mean: [${n.slice(0,3)}]?`:"","If using a custom aggregation function check it has been registered correctly."].join(`
`)},110:()=>"groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup",111:()=>"Invalid selection state. When `groupSelects` is enabled, the state must conform to `IServerSideGroupSelectionState`.",113:()=>"Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values",114:({component:e})=>`Could not find component with name of ${e}. Is it in Vue.components?`,116:()=>"Invalid selection state. The state must conform to `IServerSideSelectionState`.",117:()=>"selectAll must be of boolean type.",118:()=>"Infinite scrolling must be enabled in order to set the row count.",119:()=>"Unable to instantiate filter",120:()=>"MultiFloatingFilterComp expects MultiFilter as its parent",121:()=>"a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (see AG Grid docs) or b) to toString() on the object to return a key",122:()=>"could not find the document, document is empty",123:()=>"Advanced Filter is only supported with the Client-Side Row Model or Server-Side Row Model.",124:()=>"No active charts to update.",125:({chartId:e})=>`Unable to update chart. No active chart found with ID: ${e}.`,126:()=>"unable to restore chart as no chart model is provided",127:({allRange:e})=>`unable to create chart as ${e?"there are no columns in the grid":"no range is selected"}.`,128:({feature:e})=>`${e} is only available if using 'multiRow' selection mode.`,129:({feature:e,rowModel:t})=>`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${t}.`,130:()=>'cannot multi select unless selection mode is "multiRow"',132:()=>"Row selection features are not available unless `rowSelection` is enabled.",133:({iconName:e})=>`icon '${e}' function should return back a string or a dom object`,134:({iconName:e})=>`Did not find icon '${e}'`,135:()=>"Data type of the new value does not match the cell data type of the column",136:()=>"Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.",137:({type:e,currentChartType:t})=>`Unable to update chart as a '${e}' update type is not permitted on a ${t}.`,138:({chartType:e})=>`invalid chart type supplied: ${e}`,139:({customThemeName:e})=>`a custom chart theme with the name ${e} has been supplied but not added to the 'chartThemes' list`,140:({name:e})=>`no stock theme exists with the name '${e}' and no custom chart theme with that name was supplied to 'customChartThemes'`,141:()=>"cross filtering with row grouping is not supported.",142:()=>"cross filtering is only supported in the client side row model.",143:({panel:e})=>`'${e}' is not a valid Chart Tool Panel name`,144:({type:e})=>`Invalid charts data panel group name supplied: '${e}'`,145:({group:e})=>`As of v32, only one charts customize panel group can be expanded at a time. '${e}' will not be expanded.`,146:({comp:e})=>`Unable to instantiate component '${e}' as its module hasn't been loaded. Add 'ValidationModule' to see which module is required.`,147:({group:e})=>`Invalid charts customize panel group name supplied: '${e}'`,148:({group:e})=>`invalid chartGroupsDef config '${e}'`,149:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,150:()=>"'seriesChartTypes' are required when the 'customCombo' chart type is specified.",151:({chartType:e})=>`invalid chartType '${e}' supplied in 'seriesChartTypes', converting to 'line' instead.`,152:({colId:e})=>`no 'seriesChartType' found for colId = '${e}', defaulting to 'line'.`,153:({chartDataType:e})=>`unexpected chartDataType value '${e}' supplied, instead use 'category', 'series' or 'excluded'`,154:({colId:e})=>`cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: ${e}`,155:({option:e})=>`'${e}' is not a valid Chart Toolbar Option`,156:({panel:e})=>`Invalid panel in chartToolPanelsDef.panels: '${e}'`,157:({unrecognisedGroupIds:e})=>["unable to find group(s) for supplied groupIds:",e],158:()=>"can not expand a column item that does not represent a column group header",159:()=>"Invalid params supplied to createExcelFileForExcel() - `ExcelExportParams.data` is empty.",160:()=>"Export cancelled. Export is not allowed as per your configuration.",161:()=>"The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'",162:({id:e,dataType:t})=>`Unrecognized data type for excel export [${e}.dataType=${t}]`,163:({featureName:e})=>`Excel table export does not work with ${e}. The exported Excel file will not contain any Excel tables.
 Please turn off ${e} to enable Excel table exports.`,164:()=>"Unable to add data table to Excel sheet: A table already exists.",165:()=>"Unable to add data table to Excel sheet: Missing required parameters.",166:({unrecognisedGroupIds:e})=>["unable to find groups for these supplied groupIds:",e],167:({unrecognisedColIds:e})=>["unable to find columns for these supplied colIds:",e],168:()=>"detailCellRendererParams.template should be function or string",169:()=>'Reference to eDetailGrid was missing from the details template. Please add data-ref="eDetailGrid" to the template.',170:({providedStrategy:e})=>`invalid cellRendererParams.refreshStrategy = ${e} supplied, defaulting to refreshStrategy = 'rows'.`,171:()=>"could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions",172:()=>"could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData",173:({group:e})=>`invalid chartGroupsDef config '${e}'`,174:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,175:({menuTabName:e,itemsToConsider:t})=>[`Trying to render an invalid menu item '${e}'. Check that your 'menuTabs' contains one of `,t],176:({key:e})=>`unknown menu item type ${e}`,177:()=>"valid values for cellSelection.handle.direction are 'x', 'y' and 'xy'. Default to 'xy'.",178:({colId:e})=>`column ${e} is not visible`,179:()=>"totalValueGetter should be either a function or a string (expression)",180:()=>"agRichSelectCellEditor requires cellEditorParams.values to be set",181:()=>"agRichSelectCellEditor cannot have `multiSelect` and `allowTyping` set to `true`. AllowTyping has been turned off.",182:()=>'you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data',183:()=>"Group Column Filter only works on group columns. Please use a different filter.",184:({parentGroupData:e,childNodeData:t})=>["duplicate group keys for row data, keys should be unique",[e,t]],185:({data:e})=>["getDataPath() should not return an empty path",[e]],186:({rowId:e,rowData:t,duplicateRowsData:n})=>["duplicate group keys for row data, keys should be unique",e,t,...n??[]],187:({rowId:e,firstData:t,secondData:n})=>[`Duplicate node id ${e}. Row IDs are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values.`,"first instance",t,"second instance",n],188:e=>`getRowId callback must be provided for Server Side Row Model ${(e==null?void 0:e.feature)||"selection"} to work correctly.`,189:({startRow:e})=>`invalid value ${e} for startRow, the value should be >= 0`,190:({rowGroupId:e,data:t})=>["null and undefined values are not allowed for server side row model keys",e?`column = ${e}`:"","data is ",t],194:({method:e})=>`calling gridApi.${e}() is only possible when using rowModelType=\`clientSide\`.`,195:({justCurrentPage:e})=>`selecting just ${e?"current page":"filtered"} only works when gridOptions.rowModelType='clientSide'`,196:({key:e})=>`Provided ids must be of string type. Invalid id provided: ${e}`,197:()=>"`toggledNodes` must be an array of string ids.",199:()=>"getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model. Use `api.getServerSideSelectionState()` instead.",200:f6,201:({rowModelType:e})=>`Could not find row model for rowModelType = ${e}`,202:()=>"`getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model. Use `api.getServerSideSelectionState()` instead.",203:()=>"Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.",204:()=>"Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.",205:({duplicateIdText:e})=>`Unable to display rows as duplicate row ids (${e}) were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.`,206:()=>"getRowId callback must be implemented for transactions to work. Transaction was ignored.",207:()=>'The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.',208:()=>"Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects.",209:()=>`Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects. See ${Fb}/filter-set-filter-list/#filter-value-types`,210:()=>"Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects?",211:()=>"property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date.",212:()=>"please review all your toolPanel components, it seems like at least one of them doesn't have an id",213:()=>"Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled.",214:({key:e})=>`unable to lookup Tool Panel as invalid key supplied: ${e}`,215:({key:e,defaultByKey:t})=>`the key ${e} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(t??{}).join(",")}`,216:({name:e})=>`Missing component for '${e}'`,217:({invalidColIds:e})=>["unable to find grid columns for the supplied colDef(s):",e],218:({property:e,defaultOffset:t})=>`${e} must be a number, the value you provided is not a valid number. Using the default of ${t}px.`,219:({property:e})=>`Property ${e} does not exist on the target object.`,220:({lineDash:e})=>`'${e}' is not a valid 'lineDash' option.`,221:()=>"agAggregationComponent should only be used with the client and server side row model.",222:()=>"agFilteredRowCountComponent should only be used with the client side row model.",223:()=>"agSelectedRowCountComponent should only be used with the client and server side row model.",224:()=>"agTotalAndFilteredRowCountComponent should only be used with the client side row model.",225:()=>"agTotalRowCountComponent should only be used with the client side row model.",226:()=>"viewport is missing init method.",227:()=>"menu item icon must be DOM node or string",228:({menuItemOrString:e})=>`unrecognised menu item ${e}`,230:()=>"detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://www.ag-grid.com/react-data-grid/master-detail-custom-detail/",231:()=>"As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.",232:()=>"Using both rowData and v-model. rowData will be ignored.",233:({methodName:e})=>`Framework component is missing the method ${e}()`,234:()=>'Group Column Filter does not work with the colDef property "field". This property will be ignored.',235:()=>'Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.',236:()=>'Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.',237:()=>"Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter.",238:()=>"setRowCount can only accept a positive row count.",239:()=>'Theming API and CSS File Themes are both used in the same page. In v33 we released the Theming API as the new default method of styling the grid. See the migration docs https://www.ag-grid.com/react-data-grid/theming-migration/. Because no value was provided to the `theme` grid option it defaulted to themeQuartz. But the file (ag-grid.css) is also included and will cause styling issues. Either pass the string "legacy" to the theme grid option to use v32 style themes, or remove ag-grid.css from the page to use Theming API.',240:({theme:e})=>`theme grid option must be a Theming API theme object or the string "legacy", received: ${e}`,243:()=>"Failed to deserialize state - each provided state object must be an object.",244:()=>"Failed to deserialize state - `selectAllChildren` must be a boolean value or undefined.",245:()=>"Failed to deserialize state - `toggledNodes` must be an array.",246:()=>"Failed to deserialize state - Every `toggledNode` requires an associated string id.",247:()=>`Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule. 
Please rebuild the selection state and reapply it.`,248:()=>"SetFloatingFilter expects SetFilter as its parent",249:()=>"Must supply a Value Formatter in Set Filter params when using a Key Creator",250:()=>"Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.",251:({chartType:e})=>`AG Grid: Unable to create chart as an invalid chartType = '${e}' was supplied.`,252:()=>`cannot get grid to draw rows when it is in the middle of drawing rows. 
Your code probably called a grid API method while the grid was in the render stage. 
To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). 
To see what part of your code that caused the refresh check this stacktrace.`,253:({version:e})=>["Illegal version string: ",e],254:()=>"Cannot create chart: no chart themes available.",255:({point:e})=>`Lone surrogate U+${e==null?void 0:e.toString(16).toUpperCase()} is not a scalar value`,256:()=>"Unable to initialise. See validation error, or load ValidationModule if missing.",257:()=>p6("IntegratedChartsModule"),258:()=>p6("SparklinesModule"),259:({part:e})=>`the argument to theme.withPart must be a Theming API part object, received: ${e}`,260:({propName:e,compName:t,gridScoped:n,gridId:i,rowModelType:r})=>f6({reasonOrId:`AG Grid '${e}' component: ${t}`,moduleName:jb[t],gridId:i,gridScoped:n,rowModelType:r}),261:()=>"As of v33, `column.isHovered()` is deprecated. Use `api.isColumnHovered(column)` instead.",262:()=>'As of v33, icon key "smallDown" is deprecated. Use "advancedFilterBuilderSelect" for Advanced Filter Builder dropdown, "selectOpen" for Select cell editor and dropdowns (e.g. Integrated Charts menu), "richSelectOpen" for Rich Select cell editor.',263:()=>'As of v33, icon key "smallLeft" is deprecated. Use "panelDelimiterRtl" for Row Group Panel / Pivot Panel, "subMenuOpenRtl" for sub-menus.',264:()=>'As of v33, icon key "smallRight" is deprecated. Use "panelDelimiter" for Row Group Panel / Pivot Panel, "subMenuOpen" for sub-menus.',265:({colId:e})=>`Unable to infer chart data type for column '${e}' if first data entry is null. Please specify "chartDataType", or a "cellDataType" in the column definition. For more information, see ${Fb}/integrated-charts-range-chart#coldefchartdatatype .`,266:()=>'As of v33.1, using "keyCreator" with the Rich Select Editor has been deprecated. It now requires the "formatValue" callback to convert complex data to strings.',267:()=>"Detail grids can not use a different theme to the master grid, the `theme` detail grid option will be ignored.",268:()=>"Transactions aren't supported with tree data when using treeDataChildrenField",269:()=>"When `masterSelects: 'detail'`, detail grids must be configured with multi-row selection",270:({id:e,parentId:t})=>`Cycle detected for row with id='${e}' and parent id='${t}'. Resetting the parent for row with id='${e}' and showing it as a root-level node.`,271:({id:e,parentId:t})=>`Parent row not found for row with id='${e}' and parent id='${t}'. Showing row with id='${e}' as a root-level node.`,272:()=>qH(),273:({providedId:e,usedId:t})=>`Provided column id '${e}' was already in use, ensure all column and group ids are unique. Using '${t}' instead.`,274:({prop:e})=>{let t=`Since v33, ${e} has been deprecated.`;switch(e){case"maxComponentCreationTimeMs":t+=" This property is no longer required and so will be removed in a future version.";break;case"setGridApi":t+=" This method is not called by AG Grid. To access the GridApi see: https://ag-grid.com/react-data-grid/grid-interface/#grid-api ";break;case"children":t+=" For multiple versions AgGridReact does not support children.";break}return t},275:KH,276:()=>"Row Numbers Row Resizer cannot be used when Grid Columns have `autoHeight` enabled.",277:({colId:e})=>`'enableFilterHandlers' is set to true, but column '${e}' does not have 'filter.doesFilterPass' or 'filter.handler' set.`,278:({colId:e})=>`Unable to create filter handler for column '${e}'`,279:e=>{},280:({colId:e})=>`'name' must be provided for custom filter components for column '${e}`,281:({colId:e})=>`Filter for column '${e}' does not have 'filterParams.buttons', but the new Filters Tool Panel has buttons configured. Either configure buttons for the filter, or disable buttons on the Filters Tool Panel.`,282:()=>"New filter tool panel requires `enableFilterHandlers: true`.",283:()=>"As of v34, use the same method on the filter handler (`api.getColumnFilterHandler(colKey)`) instead.",284:()=>"As of v34, filters are active when they have a model. Use `api.getColumnFilterModel()` instead.",285:()=>"As of v34, use (`api.getColumnFilterModel()`) instead.",286:()=>"As of v34, use (`api.setColumnFilterModel()`) instead.",287:()=>"`api.doFilterAction()` requires `enableFilterHandlers = true",288:()=>"`api.getColumnFilterModel(key, true)` requires `enableFilterHandlers = true",289:({rowModelType:e})=>`Row Model '${e}' is not supported with Batch Editing`,290:({rowIndex:e,rowPinned:t})=>`Row with index '${e}' and pinned state '${t}' not found`,291:()=>"License Key being set multiple times with different values. This can result in an incorrect license key being used,",292:({colId:e})=>`The Multi Filter for column '${e}' has buttons configured against the child filters. When 'enableFilterHandlers=true', buttons must instead be provided against the parent Multi Filter params. The child filter buttons will be ignored.`,293:()=>"The grid was initialised detached from the DOM and was then inserted into a Shadow Root. Theme styles are probably broken. Pass the themeStyleContainer grid option to let the grid know where in the document to insert theme CSS.",294:()=>"When using the `agRichSelectCellEditor` setting `filterListAsync = true` requires `allowTyping = true` and the `values()` callback must return a Promise of filtered values.",295:({blockedService:e})=>`colDef.allowFormula is not supported with ${e}. Formulas has been turned off.`,296:()=>"Since v35, `api.hideOverlay()` does not hide the overlay when `activeOverlay` is set. Set `activeOverlay=null` instead.",297:()=>'`api.hideOverlay()` does not hide the no matching rows overlay as it is only controlled by grid state. Set `suppressOverlays=["noMatchingRows"] to not show it.'};function $Se(e,t){const n=VSe[e];if(!n)return[`Missing error text for error id ${e}!`];const i=n(t),o=`
See ${n7(e,t)}`;return Array.isArray(i)?i.concat(o):[i,o]}var WSe={1:"Charting Aggregation",2:"pivotResultFields",3:"setTooltip"},g6=new WeakMap,m6=new WeakMap,USe=1,qSe=class{create(e,t,n,i,r,o){const s=RF.applyGlobalGridOptions(t),a=s.gridId??String(USe++),d=this.getRegisteredModules(r,a,s.rowModelType),h=this.createBeansList(s.rowModelType,d,a),m=this.createProvidedBeans(e,s,r);if(!h)return;const w={providedBeanInstances:m,beanClasses:h,id:a,beanInitComparator:Rxe,beanDestroyComparator:Axe,derivedBeans:[Sxe],destroyCallback:()=>{m6.delete(L),g6.delete(e),vme(a),o==null||o()}},R=new s0e(w);this.registerModuleFeatures(R,d),n(R),R.getBean("syncSvc").start(),i==null||i(R);const L=R.getBean("gridApi");return g6.set(e,L),m6.set(L,e),L}getRegisteredModules(e,t,n){var i;return l1(OSe,void 0,!0),(i=e==null?void 0:e.modules)==null||i.forEach(r=>l1(r,t)),bme(t,y6(n))}registerModuleFeatures(e,t){const n=e.getBean("registry"),i=e.getBean("apiFunctionSvc");for(const r of t){n.registerModule(r);const o=r.apiFunctions;if(o){const s=Object.keys(o);for(const a of s)i==null||i.addFunction(a,o[a])}}}createProvidedBeans(e,t,n){let i=n?n.frameworkOverrides:null;vs(i)&&(i=new wH);const r={gridOptions:t,eGridDiv:e,eRootDiv:e,globalListener:n?n.globalListener:null,globalSyncListener:n?n.globalSyncListener:null,frameworkOverrides:i};return n!=null&&n.providedBeanInstances&&Object.assign(r,n.providedBeanInstances),r}createBeansList(e,t,n){const i={clientSide:"ClientSideRowModel",infinite:"InfiniteRowModel",serverSide:"ServerSideRowModel",viewport:"ViewportRowModel"},r=y6(e),o=i[r];if(!o){ww(201,{rowModelType:r},`Unknown rowModelType ${r}.`);return}if(!Cme()){ww(272,void 0,qH());return}if(!e){const a=Object.entries(i).filter(([d,h])=>_k(h,n,d));if(a.length==1){const[d,h]=a[0];if(d!==r){const m={moduleName:h,rowModelType:d};ww(275,m,KH(m));return}}}if(!_k(o,n,r)){const a=Q9(),d=`rowModelType = '${r}'`,h=`Missing module ${o}Module for rowModelType ${r}.`;ww(200,{reasonOrId:d,moduleName:o,gridScoped:AF(),gridId:n,rowModelType:r,isUmd:a},h);return}const s=new Set;for(const a of t)for(const d of a.beans??[])s.add(d);return Array.from(s)}};function y6(e){return e??"clientSide"}function Uy(e){const t=e.rowModel;return t.getType()==="clientSide"?t:void 0}function eE(e){const t=e.rowModel;return t.getType()==="infinite"?t:void 0}function KSe(e){const t=e.rowModel;return t.getType()==="serverSide"?t:void 0}var ZSe=class extends Yt{constructor(){super(...arguments),this.beanName="localeSvc"}getLocaleTextFunc(){const e=this.gos,t=e.getCallback("getLocaleText");return t?ame(t):lme(e.get("localeText"))}};function YSe(e,t=!1){const n=[],i=[],r=[],o=[],s=[],a=[],d=[],h=[],m=[];let v=0;for(let w=0;w<e.length;w++){const{colId:R,sort:L,sortType:O,sortIndex:z,rowGroup:$,rowGroupIndex:U,aggFunc:Y,pivot:X,pivotIndex:q,pinned:ie,hide:re,width:J,flex:ne}=e[w];m.push(R),L&&(n[z??v++]={colId:R,sort:L,type:O}),$&&(i[U??0]=R),typeof Y=="string"&&r.push({colId:R,aggFunc:Y}),X&&(o[q??0]=R),ie&&(ie==="right"?a:s).push(R),re&&d.push(R),(ne!=null||J)&&h.push({colId:R,flex:ne??void 0,width:J===null?void 0:J})}return{sort:n.length?{sortModel:XA(n)}:void 0,rowGroup:i.length?{groupColIds:XA(i)}:void 0,aggregation:r.length?{aggregationModel:r}:void 0,pivot:o.length||t?{pivotMode:t,pivotColIds:XA(o)}:void 0,columnPinning:s.length||a.length?{leftColIds:s,rightColIds:a}:void 0,columnVisibility:d.length?{hiddenColIds:d}:void 0,columnSizing:h.length?{columnSizingModel:h}:void 0,columnOrder:m.length?{orderedColIds:m}:void 0}}function XA(e){return e.filter(t=>t!=null)}function XSe(e){const t=[];for(const{groupId:n,open:i}of e)i&&t.push(n);return t.length?{openColumnGroupIds:t}:void 0}var JSe=class{wrap(e,t,n,i){const r=this.createWrapper(e,i);for(const o of t??[])this.createMethod(r,o,!0);for(const o of n??[])this.createMethod(r,o,!1);return r}createMethod(e,t,n){e.addMethod(t,this.createMethodProxy(e,t,n))}createMethodProxy(e,t,n){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(n&&an(49,{methodName:t}),null)}}};function JA(e){return e.get("tooltipShowMode")==="whenTruncated"}function QSe(e,t){if(typeof e!="number")return"";const n=t(),i=n("thousandSeparator",","),r=n("decimalSeparator",".");return e.toString().replace(".",r).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${i}`)}var e2e=class extends Yt{getFileName(e){const t=this.getDefaultFileExtension();return e!=null&&e.length||(e=this.getDefaultFileName()),e.includes(".")?e:`${e}.${t}`}getData(e){return this.beans.gridSerializer.serialize(this.createSerializingSession(e),e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},t2e=class{constructor(e){const{colModel:t,rowGroupColsSvc:n,colNames:i,valueSvc:r,gos:o,processCellCallback:s,processHeaderCallback:a,processGroupHeaderCallback:d,processRowGroupCallback:h}=e;this.colModel=t,this.rowGroupColsSvc=n,this.colNames=i,this.valueSvc=r,this.gos=o,this.processCellCallback=s,this.processHeaderCallback=a,this.processGroupHeaderCallback=d,this.processRowGroupCallback=h}prepare(e){}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e){var L;const{column:t,node:n,currentColumnIndex:i,accumulatedRowIndex:r,type:o,useRawFormula:s}=e,a=i===0&&u7(this.gos,n,this.colModel.isPivotMode());if(this.processRowGroupCallback&&(this.gos.get("treeData")||n.group)&&(t.isRowGroupDisplayed(((L=n.rowGroupColumn)==null?void 0:L.getColId())??"")||a))return{value:this.processRowGroupCallback(ki(this.gos,{column:t,node:n}))??""};if(this.processCellCallback)return{value:this.processCellCallback(ki(this.gos,{accumulatedRowIndex:r,column:t,node:n,value:this.valueSvc.getValueForDisplay({column:t,node:n}).value,type:o,parseValue:O=>this.valueSvc.parseValue(t,n,O,this.valueSvc.getValue(t,n,void 0)),formatValue:O=>this.valueSvc.formatValue(t,n,O)??O}))??""};const d=this.gos.get("treeData"),h=this.valueSvc,m=n.level===-1&&n.footer,v=t.colDef.showRowGroup===!0&&(n.group||d);if(!m&&(a||v)){let O="",z=n;for(;z&&z.level!==-1;){const{value:$,valueFormatted:U}=h.getValueForDisplay({column:a?void 0:t,node:z,includeValueFormatted:!0,exporting:!0});O=` -> ${U??$??""}${O}`,z=z.parent}return{value:O,valueFormatted:O}}const{value:w,valueFormatted:R}=h.getValueForDisplay({column:t,node:n,includeValueFormatted:!0,exporting:!0,useRawFormula:s});return{value:w??"",valueFormatted:R}}getHeaderName(e,t){return e?e(ki(this.gos,{column:t})):this.colNames.getDisplayNameForColumn(t,"csv",!0)}};function n2e(e,t){const n=document.defaultView||window;if(!n){an(52);return}const i=document.createElement("a"),r=n.URL.createObjectURL(t);i.setAttribute("href",r),i.setAttribute("download",e),i.style.display="none",document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:n})),i.remove(),n.setTimeout(()=>{n.URL.revokeObjectURL(r)},0)}var i2e={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,overlayComponent:!0,suppressOverlays:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,groupLockGroupColumns:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,renderingMode:!0,columnMenu:!0,suppressSetFilterByDefault:!0,getDataPath:!0,enableCellSpan:!0,enableFilterHandlers:!0,filterHandlers:!0},Lc="clientSide",Eu="serverSide",fb="infinite",r2e={onGroupExpandedOrCollapsed:[Lc],refreshClientSideRowModel:[Lc],isRowDataEmpty:[Lc],forEachLeafNode:[Lc],forEachNodeAfterFilter:[Lc],forEachNodeAfterFilterAndSort:[Lc],resetRowHeights:[Lc,Eu],applyTransaction:[Lc],applyTransactionAsync:[Lc],flushAsyncTransactions:[Lc],getBestCostNodeSelection:[Lc],getServerSideSelectionState:[Eu],setServerSideSelectionState:[Eu],applyServerSideTransaction:[Eu],applyServerSideTransactionAsync:[Eu],applyServerSideRowData:[Eu],retryServerSideLoads:[Eu],flushServerSideAsyncTransactions:[Eu],refreshServerSide:[Eu],getServerSideGroupLevelState:[Eu],refreshInfiniteCache:[fb],purgeInfiniteCache:[fb],getInfiniteRowCount:[fb],isLastRowIndexKnown:[fb,Eu],expandAll:[Lc,Eu],collapseAll:[Lc,Eu],onRowHeightChanged:[Lc,Eu],setRowCount:[fb,Eu],getCacheBlockState:[fb,Eu]},o2e={showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"},selectAllFiltered:{version:"v33",old:"selectAllFiltered()",new:'selectAll("filtered")'},deselectAllFiltered:{version:"v33",old:"deselectAllFiltered()",new:'deselectAll("filtered")'},selectAllOnCurrentPage:{version:"v33",old:"selectAllOnCurrentPage()",new:'selectAll("currentPage")'},deselectAllOnCurrentPage:{version:"v33",old:"deselectAllOnCurrentPage()",new:'deselectAll("currentPage")'}};function s2e(e,t,n){const i=o2e[e];if(i){const{version:o,new:s,old:a,message:d}=i,h=a??e;return(...m)=>{const v=s?`Please use ${s} instead. `:"";return Fw(`Since ${o} api.${h} is deprecated. ${v}${d??""}`),t.apply(t,m)}}const r=r2e[e];return r?(...o)=>{const s=n.rowModel.getType();if(!r.includes(s)){Db(`api.${e} can only be called when gridOptions.rowModelType is ${r.join(" or ")}`);return}return t.apply(t,o)}:t}var a2e={detailCellRendererCtrl:"SharedMasterDetail",dndSourceComp:"DragAndDrop",fillHandle:"CellSelection",groupCellRendererCtrl:"GroupCellRenderer",headerFilterCellCtrl:"ColumnFilter",headerGroupCellCtrl:"ColumnGroup",rangeHandle:"CellSelection",tooltipFeature:"Tooltip",highlightTooltipFeature:"Tooltip",tooltipStateManager:"Tooltip",groupStrategy:"RowGrouping",treeGroupStrategy:"TreeData",rowNumberRowResizer:"RowNumbers",singleCell:"EditCore",fullRow:"EditCore",agSetColumnFilterHandler:"SetFilter",agMultiColumnFilterHandler:"MultiFilter",agGroupColumnFilterHandler:"GroupFilter",agNumberColumnFilterHandler:"NumberFilter",agDateColumnFilterHandler:"DateFilter",agTextColumnFilterHandler:"TextFilter"},l2e={expanded:1,contracted:1,"tree-closed":1,"tree-open":1,"tree-indeterminate":1,pin:1,"eye-slash":1,arrows:1,left:1,right:1,group:1,aggregation:1,pivot:1,"not-allowed":1,chart:1,cross:1,cancel:1,tick:1,first:1,previous:1,next:1,last:1,linked:1,unlinked:1,"color-picker":1,loading:1,menu:1,"menu-alt":1,filter:1,"filter-add":1,columns:1,maximize:1,minimize:1,copy:1,cut:1,paste:1,grip:1,save:1,csv:1,excel:1,"small-down":1,"small-left":1,"small-right":1,"small-up":1,asc:1,desc:1,aasc:1,adesc:1,none:1,up:1,down:1,plus:1,minus:1,settings:1,"checkbox-checked":1,"checkbox-indeterminate":1,"checkbox-unchecked":1,"radio-button-on":1,"radio-button-off":1,eye:1,"column-arrow":1,"un-pin":1,"pinned-top":1,"pinned-bottom":1,"chevron-up":1,"chevron-down":1,"chevron-left":1,"chevron-right":1,edit:1},u2e={chart:"MenuCore",cancel:"EnterpriseCore",first:"Pagination",previous:"Pagination",next:"Pagination",last:"Pagination",linked:"IntegratedCharts",loadingMenuItems:"MenuCore",unlinked:"IntegratedCharts",menu:"ColumnHeaderComp",legacyMenu:"ColumnMenu",filter:"ColumnFilter",filterActive:"ColumnFilter",filterAdd:"NewFiltersToolPanel",filterCardCollapse:"NewFiltersToolPanel",filterCardExpand:"NewFiltersToolPanel",filterCardEditing:"NewFiltersToolPanel",filterTab:"ColumnMenu",filtersToolPanel:"FiltersToolPanel",columns:["MenuCore"],columnsToolPanel:["ColumnsToolPanel"],maximize:"EnterpriseCore",minimize:"EnterpriseCore",save:"MenuCore",columnGroupOpened:"ColumnGroupHeaderComp",columnGroupClosed:"ColumnGroupHeaderComp",accordionOpen:"EnterpriseCore",accordionClosed:"EnterpriseCore",accordionIndeterminate:"EnterpriseCore",columnSelectClosed:["ColumnsToolPanel","ColumnMenu"],columnSelectOpen:["ColumnsToolPanel","ColumnMenu"],columnSelectIndeterminate:["ColumnsToolPanel","ColumnMenu"],columnMovePin:"SharedDragAndDrop",columnMoveHide:"SharedDragAndDrop",columnMoveMove:"SharedDragAndDrop",columnMoveLeft:"SharedDragAndDrop",columnMoveRight:"SharedDragAndDrop",columnMoveGroup:"SharedDragAndDrop",columnMoveValue:"SharedDragAndDrop",columnMovePivot:"SharedDragAndDrop",dropNotAllowed:"SharedDragAndDrop",ensureColumnVisible:["ColumnsToolPanel","ColumnMenu"],groupContracted:"GroupCellRenderer",groupExpanded:"GroupCellRenderer",setFilterGroupClosed:"SetFilter",setFilterGroupOpen:"SetFilter",setFilterGroupIndeterminate:"SetFilter",setFilterLoading:"SetFilter",close:"EnterpriseCore",check:"MenuItem",colorPicker:"CommunityCore",groupLoading:"LoadingCellRenderer",overlayLoading:"Overlay",overlayExporting:"Overlay",menuAlt:"ColumnHeaderComp",menuPin:"MenuCore",menuValue:"MenuCore",menuAddRowGroup:["MenuCore","ColumnsToolPanel"],menuRemoveRowGroup:["MenuCore","ColumnsToolPanel"],clipboardCopy:"MenuCore",clipboardCut:"MenuCore",clipboardPaste:"MenuCore",pivotPanel:["ColumnsToolPanel","RowGroupingPanel"],rowGroupPanel:["ColumnsToolPanel","RowGroupingPanel"],valuePanel:"ColumnsToolPanel",columnDrag:"EnterpriseCore",rowDrag:["RowDrag","DragAndDrop"],csvExport:"MenuCore",excelExport:"MenuCore",smallDown:"CommunityCore",selectOpen:"CommunityCore",richSelectOpen:"RichSelect",richSelectRemove:"RichSelect",richSelectLoading:"RichSelect",smallLeft:"CommunityCore",smallRight:"CommunityCore",subMenuOpen:"MenuItem",subMenuOpenRtl:"MenuItem",panelDelimiter:"RowGroupingPanel",panelDelimiterRtl:"RowGroupingPanel",smallUp:"CommunityCore",sortAscending:["MenuCore","Sort"],sortDescending:["MenuCore","Sort"],sortAbsoluteAscending:["MenuCore","Sort"],sortAbsoluteDescending:["MenuCore","Sort"],sortUnSort:["MenuCore","Sort"],advancedFilterBuilder:"AdvancedFilter",advancedFilterBuilderDrag:"AdvancedFilter",advancedFilterBuilderInvalid:"AdvancedFilter",advancedFilterBuilderMoveUp:"AdvancedFilter",advancedFilterBuilderMoveDown:"AdvancedFilter",advancedFilterBuilderAdd:"AdvancedFilter",advancedFilterBuilderRemove:"AdvancedFilter",advancedFilterBuilderSelectOpen:"AdvancedFilter",chartsMenu:"IntegratedCharts",chartsMenuEdit:"IntegratedCharts",chartsMenuAdvancedSettings:"IntegratedCharts",chartsMenuAdd:"IntegratedCharts",chartsColorPicker:"IntegratedCharts",chartsThemePrevious:"IntegratedCharts",chartsThemeNext:"IntegratedCharts",chartsDownload:"IntegratedCharts",checkboxChecked:"CommunityCore",checkboxIndeterminate:"CommunityCore",checkboxUnchecked:"CommunityCore",radioButtonOn:"CommunityCore",radioButtonOff:"CommunityCore",rowPin:"PinnedRow",rowUnpin:"PinnedRow",rowPinBottom:"PinnedRow",rowPinTop:"PinnedRow"},c2e=new Set(["colorPicker","smallUp","checkboxChecked","checkboxIndeterminate","checkboxUnchecked","radioButtonOn","radioButtonOff","smallDown","smallLeft","smallRight"]),d2e=class extends Yt{constructor(){super(...arguments),this.beanName="validation"}wireBeans(e){this.gridOptions=e.gridOptions,Sme($Se)}warnOnInitialPropertyUpdate(e,t){e==="api"&&i2e[t]&&an(22,{key:t})}processGridOptions(e){this.processOptions(e,KCe())}validateApiFunction(e,t){return s2e(e,t,this.beans)}missingUserComponent(e,t,n,i){const r=jb[t];r?this.gos.assertModuleRegistered(r,`AG Grid '${e}' component: ${t}`):an(101,{propertyName:e,componentName:t,agGridDefaults:n,jsComps:i})}missingDynamicBean(e){const t=a2e[e];return t?Ip(200,{...this.gos.getModuleErrorParams(),moduleName:t,reasonOrId:e}):void 0}checkRowEvents(e){f2e.has(e)&&an(10,{eventType:e})}validateIcon(e){if(c2e.has(e)&&an(43,{iconName:e}),l2e[e])return;const t=u2e[e];if(t){Do(200,{reasonOrId:`icon '${e}'`,moduleName:t,gridScoped:AF(),gridId:this.beans.context.getId(),rowModelType:this.gos.get("rowModelType"),additionalText:"Alternatively, use the CSS icon name directly."});return}an(134,{iconName:e})}isProvidedUserComp(e){return!!jb[e]}validateColDef(e){this.processOptions(e,zCe())}processOptions(e,t){const{validations:n,deprecations:i,allProperties:r,propertyExceptions:o,objectName:s,docsUrl:a}=t;r&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...o??[],...Object.keys(i)],r,s,a);const d=new Set;if(Object.keys(e).forEach(m=>{const v=i[m];if(v){const{message:U,version:Y}=v;d.add(`As of v${Y}, ${String(m)} is deprecated. ${U??""}`)}const w=e[m];if(w==null||w===!1)return;const R=n[m];if(!R)return;const{dependencies:L,validate:O,supportedRowModels:z,expectedType:$}=R;if($){const U=typeof w;if(U!==$){d.add(`${String(m)} should be of type '${$}' but received '${U}' (${w}).`);return}}if(z){const U=this.gridOptions.rowModelType??"clientSide";if(!z.includes(U)){d.add(`${String(m)} is not supported with the '${U}' row model. It is only valid with: ${z.join(", ")}.`);return}}if(L){const U=this.checkForRequiredDependencies(m,L,e);if(U){d.add(U);return}}if(O){const U=O(e,this.gridOptions,this.beans);if(U){d.add(U);return}}}),d.size>0)for(const m of d)Fw(m)}checkForRequiredDependencies(e,t,n){const r=Object.entries(t).filter(([o,s])=>{const a=n[o];return!s.required.includes(a)});return r.length===0?null:r.map(([o,s])=>`'${String(e)}' requires '${o}' to be one of [${s.required.map(a=>a===null?"null":a===void 0?"undefined":a).join(", ")}]. ${s.reason??""}`).join(`
           `)}checkProperties(e,t,n,i,r){const o=["__ob__","__v_skip","__metadata__"],s=h2e(Object.getOwnPropertyNames(e),[...o,...t,...n],n),a=Object.keys(s);for(const d of a){const h=s[d];let m=`invalid ${i} property '${d}' did you mean any of these: ${h.slice(0,8).join(", ")}.`;n.includes("context")&&(m+=`
If you are trying to annotate ${i} with application data, use the '${i}.context' property instead.`),Fw(m)}if(a.length>0&&r){const d=this.beans.frameworkOverrides.getDocLink(r);Fw(`to see all the valid ${i} properties please check: ${d}`)}}};function h2e(e,t,n){const i={},r=e.filter(o=>!t.some(s=>s===o));if(r.length>0)for(const o of r)i[o]=Ik({inputValue:o,allSuggestions:n}).values;return i}var f2e=new Set(["firstChildChanged","lastChildChanged","childIndexChanged"]),p2e={moduleName:"Validation",version:Fn,beans:[d2e]};function Kk(e){const t=e.sibling;t&&(t.childrenAfterFilter=e.childrenAfterFilter)}var g2e=class extends Yt{constructor(){super(...arguments),this.beanName="filterStage",this.step="filter",this.refreshProps=["excludeChildrenWhenTreeDataFiltering"]}wireBeans(e){this.filterManager=e.filterManager}execute(e){var n,i;const t=!!((n=this.filterManager)!=null&&n.isChildFilterPresent());(i=this.beans.formula)!=null&&i.active?this.softFilter(t,e):this.filterNodes(t,e)}filterNodes(e,t){const n=(i,r)=>{i.hasChildren()&&e&&!r?i.childrenAfterFilter=i.childrenAfterGroup.filter(o=>{const s=o.childrenAfterFilter&&o.childrenAfterFilter.length>0,a=o.data&&this.filterManager.doesRowPassFilter({rowNode:o});return s||a}):i.childrenAfterFilter=i.childrenAfterGroup,Kk(i)};if(this.doingTreeDataFiltering()){const i=(o,s)=>{if(o.childrenAfterGroup)for(let a=0;a<o.childrenAfterGroup.length;a++){const d=o.childrenAfterGroup[a],h=s||this.filterManager.doesRowPassFilter({rowNode:d});d.childrenAfterGroup?i(o.childrenAfterGroup[a],h):n(d,h)}n(o,s)},r=o=>i(o,!1);t.executeFromRootNode(r)}else{const i=r=>n(r,!1);t.forEachChangedNodeDepthFirst(i,!0)}}softFilter(e,t){const n=i=>{if(i.childrenAfterFilter=i.childrenAfterGroup,i.hasChildren())for(const r of i.childrenAfterGroup)r.softFiltered=e&&!(r.data&&this.filterManager.doesRowPassFilter({rowNode:r}));Kk(i)};t.forEachChangedNodeDepthFirst(n,!0)}doingTreeDataFiltering(){const{gos:e}=this;return e.get("treeData")&&!e.get("excludeChildrenWhenTreeDataFiltering")}},m2e=class extends XF{constructor(){super(...arguments),this.iconCreated=!1}wireComp(e,t,n,i,r){this.comp=e;const o=K1(this,this.beans.context,r);this.eButtonShowMainFilter=n,this.eFloatingFilterBody=i,this.setGui(t,o),this.setupActive(),this.refreshHeaderStyles(),this.setupWidth(o),this.setupLeft(o),this.setupHover(o),this.setupFocus(o),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(o),this.setupUi(),o.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(o);const s=()=>this.onColDefChanged(o);o.addManagedListeners(this.column,{colDefChanged:s}),o.addManagedEventListeners({filterSwitched:({column:a})=>{a===this.column&&s()}}),o.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}getHeaderClassParams(){const{column:e,beans:t}=this,n=e.colDef;return ki(t.gos,{colDef:n,column:e,floatingFilter:!0})}setupActive(){const e=this.column.getColDef(),t=!!e.filter,n=!!e.floatingFilter;this.active=t&&n}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=Gc("filter",this.beans,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new Y1(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.getLocaleTextFunc();nx(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){var s;const{beans:t}=this;if(Os(t)===this.eGui)return;const r=E0(t,this.eGui,null,e.shiftKey);if(r){(s=t.headerNavigation)==null||s.scrollToColumn(this.column),e.preventDefault(),r.focus();return}const o=this.findNextColumnWithFloatingFilter(e.shiftKey);o&&t.focusSvc.focusHeaderPosition({headerPosition:{headerRowIndex:this.rowCtrl.rowIndex,column:o},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.visibleCols;let n=this.column;do if(n=e?t.getColBefore(n):t.getColAfter(n),!n)break;while(!n.getColDef().filter||!n.getColDef().floatingFilter);return n}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case kt.UP:case kt.DOWN:case kt.LEFT:case kt.RIGHT:if(t)return;y0(e);case kt.ENTER:t&&m0(this.eGui)&&e.preventDefault();break;case kt.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const n=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),i=!!e.relatedTarget&&Qv(e.relatedTarget,"ag-floating-filter");if(n&&i&&e.target===this.eGui){const r=this.lastFocusEvent,o=!!(r&&r.key===kt.TAB);if(r&&o){const s=r.shiftKey;m0(this.eGui,s)}}this.focusThis()}setupHover(e){var t;(t=this.beans.colHover)==null||t.addHeaderFilterColumnHoverListener(e,this.comp,this.column,this.eGui)}setupLeft(e){const t=new YF(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){var e;this.suppressFilterButton=!((e=this.beans.menuSvc)!=null&&e.isFloatingFilterButtonEnabled(this.column)),this.highlightFilterButtonWhenActive=!Ed(this.gos)}setupUserComp(){var t;if(!this.active)return;const e=(t=this.beans.colFilter)==null?void 0:t.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){var t;const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;(t=this.beans.menuSvc)==null||t.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;const{beans:{colFilter:t},column:n,gos:i}=this,r=o=>{if((o==null?void 0:o.source)==="filterDestroyed"&&(!this.isAlive()||!(t!=null&&t.isAlive())))return;const s=this.comp.getFloatingFilterComp();s&&s.then(a=>{if(a){if(i.get("enableFilterHandlers")){const m=o;let v="filter";m!=null&&m.afterFloatingFilter?v="ui":m!=null&&m.afterDataChange?v="dataChanged":(o==null?void 0:o.source)==="api"&&(v="api"),this.updateFloatingFilterParams(this.userCompDetails,v);return}const d=t==null?void 0:t.getCurrentFloatingFilterParentModel(n),h=o?{...o,columns:o.columns??[],source:o.source==="api"?"api":"columnFilter"}:null;a.onParentModelChanged(d,h)}})};[this.destroySyncListener]=e.addManagedListeners(n,{filterChanged:r}),t!=null&&t.isFilterActive(n)&&r(null)}setupWidth(e){const t=()=>{const n=`${this.column.getActualWidth()}px`;this.comp.setWidth(n)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){var e;if(!this.suppressFilterButton&&this.comp){const t=!!((e=this.beans.filterManager)!=null&&e.isFilterAllowed(this.column));this.comp.setButtonWrapperDisplayed(t),this.highlightFilterButtonWhenActive&&t&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){const t=this.active;this.setupActive();const n=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const i=this.beans.colFilter,r=this.active?i==null?void 0:i.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,o=this.comp.getFloatingFilterComp();!o||!r?this.updateCompDetails(e,r,n):o.then(s=>{!s||i!=null&&i.areFilterCompsDifferent(this.userCompDetails??null,r)?this.updateCompDetails(e,r,n):this.updateFloatingFilterParams(r,"colDef")})}updateCompDetails(e,t,n){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),n&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e,t){var i;if(!e)return;let n=e.params;(i=this.comp.getFloatingFilterComp())==null||i.then(r=>{var o;typeof(r==null?void 0:r.refresh)=="function"&&(this.gos.get("enableFilterHandlers")&&(n={...n,model:kl(((o=this.beans.colFilter)==null?void 0:o.model)??{},this.column.getColId()),source:t}),r.refresh(n))})}addResizeAndMoveKeyboardListeners(){}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}};function y2e(e,t){var i;const n=e.colModel.getCol(t);if(!n){Do(12,{colKey:t});return}(i=e.menuSvc)==null||i.showColumnMenu({column:n,positionBy:"auto"})}function v2e(e){var t;(t=e.menuSvc)==null||t.hidePopupMenu()}var b2e={moduleName:"SharedMenu",version:Fn,beans:[Vbe],apiFunctions:{showColumnMenu:y2e,hidePopupMenu:v2e}},x2e=class extends y0e{getDefaultPopupParent(){return this.beans.ctrlsSvc.get("gridCtrl").getGui()}callPostProcessPopup(e,t,n,i,r){const o=this.gos.getCallback("postProcessPopup");if(o){const{column:s,rowNode:a}=e??{};o({column:s,rowNode:a,ePopup:n,type:t,eventSource:i,mouseEvent:r})}}getActivePopups(){return this.popupList.map(e=>e.element)}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isStopPropagation(e){return om(e)}},tE={moduleName:"Popup",version:Fn,beans:[x2e]},w2e=".ag-set-filter{--ag-indentation-level:0}.ag-set-filter-item{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-set-filter-item{padding-left:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}:where(.ag-rtl) .ag-set-filter-item{padding-right:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}.ag-set-filter-item-checkbox{display:flex;height:100%;width:100%}.ag-set-filter-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr) .ag-set-filter-group-icons{margin-right:var(--ag-widget-container-horizontal-padding)}:where(.ag-rtl) .ag-set-filter-group-icons{margin-left:var(--ag-widget-container-horizontal-padding)}.ag-filter-body-wrapper{display:flex;flex-direction:column}:where(.ag-menu:not(.ag-tabs) .ag-filter) .ag-filter-body-wrapper,:where(.ag-menu:not(.ag-tabs) .ag-filter)>:not(.ag-filter-wrapper){min-width:180px}.ag-filter-filter{flex:1 1 0px}.ag-filter-condition{display:flex;justify-content:center}.ag-floating-filter-body{display:flex;flex:1 1 auto;height:100%;position:relative}.ag-floating-filter-full-body{align-items:center;display:flex;flex:1 1 auto;height:100%;overflow:hidden;width:100%}:where(.ag-floating-filter-full-body)>div{flex:1 1 auto}.ag-floating-filter-input{align-items:center;display:flex;width:100%;>*{flex:1 1 auto}:where(.ag-input-field-input[type=date]),:where(.ag-input-field-input[type=datetime-local]){width:1px}}.ag-floating-filter-button{display:flex;flex:none}.ag-date-floating-filter-wrapper{display:flex}.ag-set-floating-filter-input :where(input)[disabled]{pointer-events:none}.ag-floating-filter-button-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;height:var(--ag-icon-size);width:var(--ag-icon-size)}.ag-filter-loading{align-items:unset;background-color:var(--ag-chrome-background-color);height:100%;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;width:100%;z-index:1;:where(.ag-menu) &{background-color:var(--ag-menu-background-color)}}.ag-filter-separator{border-top:solid var(--ag-border-width) var(--menu-separator-color)}:where(.ag-filter-select) .ag-picker-field-wrapper{width:0}.ag-filter-condition-operator{height:17px}:where(.ag-ltr) .ag-filter-condition-operator-or{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-condition-operator-or{margin-right:calc(var(--ag-spacing)*2)}.ag-set-filter-select-all{padding-top:var(--ag-widget-container-vertical-padding)}.ag-filter-no-matches,.ag-set-filter-list{height:calc(var(--ag-list-item-height)*6)}.ag-filter-no-matches{padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-set-filter-tree-list{height:calc(var(--ag-list-item-height)*10)}.ag-set-filter-filter{margin-left:var(--ag-widget-container-horizontal-padding);margin-right:var(--ag-widget-container-horizontal-padding);margin-top:var(--ag-widget-container-vertical-padding)}.ag-filter-to{margin-top:var(--ag-widget-vertical-spacing)}.ag-mini-filter{margin:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}:where(.ag-ltr) .ag-set-filter-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-rtl) .ag-set-filter-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-filter-menu) .ag-set-filter-list{min-width:200px}.ag-filter-virtual-list-item:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-filter-apply-panel{display:flex;justify-content:flex-end;overflow:hidden;padding:var(--ag-widget-vertical-spacing) var(--ag-widget-container-horizontal-padding) var(--ag-widget-container-vertical-padding)}.ag-filter-apply-panel-button{line-height:1.5}:where(.ag-ltr) .ag-filter-apply-panel-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-apply-panel-button{margin-right:calc(var(--ag-spacing)*2)}.ag-simple-filter-body-wrapper{display:flex;flex-direction:column;min-height:calc(var(--ag-list-item-height) + var(--ag-widget-container-vertical-padding) + var(--ag-widget-vertical-spacing));overflow-y:auto;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);padding-bottom:calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing));&>*{margin-bottom:var(--ag-widget-vertical-spacing)}:where(.ag-resizer-wrapper){margin:0}}.ag-multi-filter-menu-item{margin:var(--ag-spacing) 0}.ag-multi-filter-group-title-bar{background-color:transparent;color:var(--ag-header-text-color);font-weight:500;padding:calc(var(--ag-spacing)*1.5) var(--ag-spacing)}.ag-group-filter-field-select-wrapper{display:flex;flex-direction:column;gap:var(--ag-widget-vertical-spacing);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}";function C2e(e){const t=e.filterManager;return!!(t!=null&&t.isColumnFilterPresent())||!!(t!=null&&t.isAggregateFilterPresent())}function _2e(e,t){var n;return((n=e.filterManager)==null?void 0:n.getColumnFilterInstance(t))??Promise.resolve(void 0)}function S2e(e,t){var i;const n=e.colModel.getColDefCol(t);if(n)return(i=e.colFilter)==null?void 0:i.destroyFilter(n,"api")}function E2e(e,t){e.frameworkOverrides.wrapIncoming(()=>{var n;return(n=e.filterManager)==null?void 0:n.setFilterModel(t)})}function R2e(e){var t;return((t=e.filterManager)==null?void 0:t.getFilterModel())??{}}function A2e(e,t,n){const{gos:i,colModel:r,colFilter:o}=e;n&&!i.get("enableFilterHandlers")&&(an(288),n=!1);const s=r.getColDefCol(t);return s?(o==null?void 0:o.getModelForColumn(s,n))??null:null}function T2e(e,t,n){var i;return((i=e.filterManager)==null?void 0:i.setColumnFilterModel(t,n))??Promise.resolve()}function k2e(e,t){var i;const n=e.colModel.getCol(t);if(!n){Do(12,{colKey:t});return}(i=e.menuSvc)==null||i.showFilterMenu({column:n,containerType:"columnFilter",positionBy:"auto"})}function P2e(e){var t;(t=e.menuSvc)==null||t.hideFilterMenu()}function D2e(e,t){var i;const n=e.colModel.getCol(t);if(!n){Do(12,{colKey:t});return}return(i=e.colFilter)==null?void 0:i.getHandler(n,!0)}function F2e(e,t){const{colModel:n,colFilter:i,gos:r}=e;if(!r.get("enableFilterHandlers")){an(287);return}const{colId:o,action:s}=t;if(o){const a=n.getColById(o);a&&(i==null||i.updateModel(a,s))}else i==null||i.updateAllModels(s)}var M2e={filterHandler:()=>({doesFilterPass:()=>!0})},I2e=class extends Yt{constructor(){super(...arguments),this.beanName="colFilter",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.modelUpdates=[],this.columnModelUpdates=[],this.state=new Map,this.handlerMap={...eH},this.isGlobalButtons=!1,this.activeFilterComps=new Set}postConstruct(){var n,i;this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)});const e=this.gos,t={...((i=(n=e.get("initialState"))==null?void 0:n.filter)==null?void 0:i.filterModel)??{}};this.initialModel=t,this.model={...t},e.get("enableFilterHandlers")||delete this.handlerMap.agMultiColumnFilter}refreshModel(){this.onNewRowsLoaded("rowDataUpdated")}setModel(e,t="api",n){const{colModel:i,dataTypeSvc:r,filterManager:o}=this.beans;if(r!=null&&r.isPendingInference){this.modelUpdates.push({model:e,source:t});return}const s=[],a=this.getModel(!0);if(e){const d=new Set(Object.keys(e));this.allColumnFilters.forEach((h,m)=>{const v=e[m];s.push(this.setModelOnFilterWrapper(h,v)),d.delete(m)}),d.forEach(h=>{const m=i.getColDefCol(h)||i.getCol(h);if(!m){an(62,{colId:h});return}if(!m.isFilterAllowed()){an(63,{colId:h});return}const v=this.getOrCreateFilterWrapper(m,!0);if(!v){an(64,{colId:h});return}s.push(this.setModelOnFilterWrapper(v,e[h],!0))})}else this.model={},this.allColumnFilters.forEach(d=>{s.push(this.setModelOnFilterWrapper(d,null))});Fr.all(s).then(()=>{const d=this.getModel(!0),h=[];this.allColumnFilters.forEach((m,v)=>{const w=a?a[v]:null,R=d?d[v]:null;i1(w,R)||h.push(m.column)}),h.length>0?o==null||o.onFilterChanged({columns:h,source:t}):n&&this.updateActive("filterChanged")})}getModel(e){var o;const t={},{allColumnFilters:n,initialModel:i,beans:{colModel:r}}=this;if(n.forEach((s,a)=>{const d=this.getModelFromFilterWrapper(s);Dn(d)&&(t[a]=d)}),!e)for(const s of Object.keys(i)){const a=i[s];Dn(a)&&!n.has(s)&&((o=r.getCol(s))!=null&&o.isFilterAllowed())&&(t[s]=a)}return t}setState(e,t,n="api"){if(this.state.clear(),t)for(const i of Object.keys(t)){const r=t[i];this.state.set(i,{model:kl(this.model,i),state:r})}this.setModel(e,n,!0)}getState(){const e=this.state;if(!e.size)return;const t={};let n=!1;return e.forEach((i,r)=>{const o=i.state;o!=null&&(n=!0,t[r]=o)}),n?t:void 0}getModelFromFilterWrapper(e){const n=e.column.getColId();if(e.isHandler)return kl(this.model,n);const i=e.filter;return i?typeof i.getModel!="function"?(an(66),null):i.getModel():kl(this.initialModel,n)}isFilterPresent(){return this.activeColumnFilters.length>0}isAggFilterPresent(){return!!this.activeAggregateFilters.length}disableFilters(){this.initialModel={};const{allColumnFilters:e}=this;return e.size?(e.forEach(t=>this.disposeFilterWrapper(t,"advancedFilterEnabled")),!0):!1}updateActiveFilters(){const e=h=>h?h.isFilterActive?h.isFilterActive():(an(67),!1):!1,{colModel:t,gos:n}=this.beans,i=!!Rk(n),r=h=>{if(!h.isPrimary())return!0;const v=!t.isPivotActive();return!h.isValueActive()||!v?!1:t.isPivotMode()?!0:i},o=[],s=[],a=(h,m,v)=>{m&&(r(h)?o.push(v):s.push(v))},d=[];return this.allColumnFilters.forEach(h=>{const m=h.column,v=m.getColId();if(h.isHandler)d.push(Fr.resolve().then(()=>{a(m,this.isHandlerActive(m),{colId:v,isHandler:!0,handler:h.handler,handlerParams:h.handlerParams})}));else{const w=wy(h);w&&d.push(w.then(R=>{a(m,e(R),{colId:v,isHandler:!1,comp:R})}))}}),Fr.all(d).then(()=>{this.activeAggregateFilters=o,this.activeColumnFilters=s})}updateFilterFlagInColumns(e,t){var i;const n=[];return this.allColumnFilters.forEach(r=>{const o=r.column;if(r.isHandler)n.push(Fr.resolve().then(()=>{this.setColFilterActive(o,this.isHandlerActive(o),e,t)}));else{const s=wy(r);s&&n.push(s.then(a=>{this.setColFilterActive(o,a.isFilterActive(),e,t)}))}}),(i=this.beans.groupFilter)==null||i.updateFilterFlags(e,t),Fr.all(n)}doFiltersPass(e,t,n){const{data:i,aggData:r}=e,o=n?this.activeAggregateFilters:this.activeColumnFilters,s=n?r:i,a=this.model;for(let d=0;d<o.length;d++){const h=o[d],{colId:m,isHandler:v}=h;if(m!==t)if(v){const{handler:w,handlerParams:R}=h;if(!w.doesFilterPass({node:e,data:s,model:kl(a,m),handlerParams:R}))return!1}else{const w=h.comp;if(typeof w.doesFilterPass!="function"){Do(91);continue}if(!w.doesFilterPass({node:e,data:s}))return!1}}return!0}getHandlerParams(e){const t=this.allColumnFilters.get(e.getColId());return t!=null&&t.isHandler?t.handlerParams:void 0}callOnFilterChangedOutsideRenderCycle(e){const{rowRenderer:t,filterManager:n}=this.beans,i=()=>{this.isAlive()&&(n==null||n.onFilterChanged(e))};t.isRefreshInProgress()?setTimeout(i,0):i()}updateBeforeFilterChanged(e={}){const{column:t,additionalEventAttributes:n}=e,i=t==null?void 0:t.getColId();return this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",n).then(()=>{this.allColumnFilters.forEach(r=>{var a,d,h;const{column:o,isHandler:s}=r;i!==o.getColId()&&(s&&((d=(a=r.handler).onAnyFilterChanged)==null||d.call(a)),(h=wy(r,s))==null||h.then(m=>{typeof(m==null?void 0:m.onAnyFilterChanged)=="function"&&m.onAnyFilterChanged()}))}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){const t=[];this.allColumnFilters.forEach(n=>{var o,s;const i=n.isHandler;i&&((s=(o=n.handler).onNewRowsLoaded)==null||s.call(o));const r=wy(n,i);r&&t.push(r.then(a=>{var d;(d=a.onNewRowsLoaded)==null||d.call(a)}))}),Fr.all(t).then(()=>this.updateActive(e,{afterDataChange:!0}))}updateActive(e,t){this.updateFilterFlagInColumns(e,t).then(()=>this.updateActiveFilters())}createGetValue(e,t){const{filterValueSvc:n,colModel:i}=this.beans;return(r,o)=>{const s=o?i.getCol(o):e;return s?n.getValue(s,r,t):void 0}}isFilterActive(e){const t=this.cachedFilter(e);if(t!=null&&t.isHandler)return this.isHandlerActive(e);const n=t==null?void 0:t.filter;return n?n.isFilterActive():kl(this.initialModel,e.getColId())!=null}isHandlerActive(e){const t=Dn(kl(this.model,e.getColId()));if(t)return t;const n=this.beans.groupFilter;return n!=null&&n.isGroupFilter(e)?n.isFilterActive(e):!1}getOrCreateFilterUi(e){const t=this.getOrCreateFilterWrapper(e,!0);return t?wy(t):null}getFilterUiForDisplay(e){const t=this.getOrCreateFilterWrapper(e,!0);if(!t)return null;const n=wy(t);return n?n.then(i=>({comp:i,params:t.filterUi.filterParams,isHandler:t.isHandler})):null}getHandler(e,t){const n=this.getOrCreateFilterWrapper(e,t);return n!=null&&n.isHandler?n.handler:void 0}getOrCreateFilterWrapper(e,t){if(!e.isFilterAllowed())return;let n=this.cachedFilter(e);return!n&&t&&(n=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,n)),n}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e,t=!1){return this.getDefaultFilterFromDataType(()=>{var n;return(n=this.beans.dataTypeSvc)==null?void 0:n.getBaseDataType(e)},t)}getDefaultFilterFromDataType(e,t=!1){return jme(this.gos)?t?"agSetColumnFloatingFilter":"agSetColumnFilter":V0e(e(),t)}getDefaultFloatingFilter(e){return this.getDefaultFilter(e,!0)}createFilterComp(e,t,n,i,r,o){const s=()=>{const h=this.createFilterCompParams(e,r,o),m=i(h,r);return Kye(this.beans.userCompFactory,t,m,n)},a=s();return a?{compDetails:a,createFilterUi:h=>(h?s():a).newAgStackInstance()}:null}createFilterInstance(e,t,n,i){var v,w;const r=this.beans.selectableFilter;r!=null&&r.isSelectable(t)&&(t=r.getFilterDef(e,t));const{handler:o,handlerParams:s,handlerGenerator:a}=this.createHandler(e,t,n)??{},d=this.createFilterComp(e,t,n,i,!!o,"init");if(!d)return{compDetails:null,createFilterUi:null,handler:o,handlerGenerator:a,handlerParams:s};const{compDetails:h,createFilterUi:m}=d;return this.isGlobalButtons&&((w=(v=h.params)==null?void 0:v.buttons)!=null&&w.length||an(281,{colId:e.getColId()})),{compDetails:h,handler:o,handlerGenerator:a,handlerParams:s,createFilterUi:m}}createBaseFilterParams(e,t){const{filterManager:n,rowModel:i}=this.beans;return ki(this.gos,{column:e,colDef:e.getColDef(),getValue:this.createGetValue(e),doesRowPassOtherFilter:t?()=>!0:r=>(n==null?void 0:n.doesRowPassOtherFilters(e.getColId(),r))??!0,rowModel:i})}createFilterCompParams(e,t,n,i){const r=this.filterChangedCallbackFactory(e),o=this.createBaseFilterParams(e,i);if(o.filterChangedCallback=r,o.filterModifiedCallback=i?()=>{}:s=>this.filterModified(e,s),t){const s=o,a=e.getColId(),d=kl(this.model,a);s.model=d,s.state=this.state.get(a)??{model:d},s.onModelChange=(h,m)=>{this.updateStoredModel(a,h),this.refreshHandlerAndUi(e,h,"ui",!1,m).then(()=>{r({...m,source:"columnFilter"})})},s.onStateChange=h=>{this.updateState(e,h),this.updateOrRefreshFilterUi(e)},s.onAction=(h,m,v)=>{this.updateModel(e,h,m),this.dispatchLocalEvent({type:"filterAction",column:e,action:h,event:v})},s.getHandler=()=>this.getHandler(e,!0),s.onUiChange=h=>this.filterUiChanged(e,h),s.source=n}return o}createFilterUiForHandler(e,t){return t?{created:!1,create:t,filterParams:e.params,compDetails:e}:null}createFilterUiLegacy(e,t,n){const i=t(),r={created:!0,create:t,filterParams:e.params,compDetails:e,promise:i};return i.then(n),r}createFilterWrapper(e){var a;const{compDetails:t,handler:n,handlerGenerator:i,handlerParams:r,createFilterUi:o}=this.createFilterInstance(e,e.getColDef(),this.getDefaultFilter(e),d=>d),s=e.getColId();if(n)return delete this.initialModel[s],(a=n.init)==null||a.call(n,{...r,source:"init",model:kl(this.model,s)}),{column:e,isHandler:!0,handler:n,handlerGenerator:i,handlerParams:r,filterUi:this.createFilterUiForHandler(t,o)};if(o){const d={column:e,filterUi:null,isHandler:!1};return d.filterUi=this.createFilterUiLegacy(t,o,h=>{d.filter=h??void 0}),d}return{column:e,filterUi:null,isHandler:!1}}createHandlerFunc(e,t,n){var R;const{gos:i,frameworkOverrides:r,registry:o}=this.beans;let s;const a=L=>{const O=L.filter;if(R7(O)){const z=O.handler;return z||(s=O.doesFilterPass,s?()=>({doesFilterPass:s}):void 0)}return typeof O=="string"?O:void 0},d=i.get("enableFilterHandlers"),h=d?a(t):void 0,m=L=>()=>this.createBean(o.createDynamicBean(L,!0));let v,w;if(typeof h=="string"){const L=(R=i.get("filterHandlers"))==null?void 0:R[h];L!=null?v=L:D0e.has(h)&&(v=m(h),w=h)}else v=h;if(!v){let L;const{compName:O,jsComp:z,fwComp:$}=k7(r,t);O?L=O:z==null&&$==null&&t.filter===!0&&(L=n),w=this.handlerMap[L],w&&(v=m(w))}return v?{filterHandler:v,handlerNameOrCallback:s??w}:d?(Ks(i)&&an(277,{colId:e.getColId()}),M2e):void 0}createHandler(e,t,n){const i=this.createHandlerFunc(e,t,n);if(!i)return;const r=SA(this.beans.userCompFactory,t,this.createFilterCompParams(e,!0,"init")),{handlerNameOrCallback:o,filterHandler:s}=i,{handler:a,handlerParams:d}=this.createHandlerFromFunc(e,s,r);return{handler:a,handlerParams:d,handlerGenerator:o??s}}createHandlerFromFunc(e,t,n){const i=e.getColDef(),r=t(ki(this.gos,{column:e,colDef:i})),o=this.createHandlerParams(e,n);return{handler:r,handlerParams:o}}createHandlerParams(e,t){const n=e.getColDef(),i=e.getColId(),r=this.filterChangedCallbackFactory(e);return ki(this.gos,{colDef:n,column:e,getValue:this.createGetValue(e),doesRowPassOtherFilter:o=>{var s;return((s=this.beans.filterManager)==null?void 0:s.doesRowPassOtherFilters(i,o))??!0},onModelChange:(o,s)=>{this.updateStoredModel(i,o),this.refreshHandlerAndUi(e,o,"handler",!1,s).then(()=>{r({...s,source:"columnFilter"})})},filterParams:t})}onColumnsChanged(){const e=[],{colModel:t,filterManager:n,groupFilter:i}=this.beans;this.allColumnFilters.forEach((o,s)=>{let a;o.column.isPrimary()?a=t.getColDefCol(s):a=t.getCol(s),!(a&&a===o.column)&&(e.push(o.column),this.disposeFilterWrapper(o,"columnChanged"),this.disposeColumnListener(s))});const r=i&&e.every(o=>i.isGroupFilter(o));e.length>0&&!r&&(n==null||n.onFilterChanged({columns:e,source:"api"}))}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;const n=this.beans.groupFilter;return n!=null&&n.isGroupFilter(e)?n.isFilterAllowed(e):!0}getFloatingFilterCompDetails(e,t){const{userCompFactory:n,frameworkOverrides:i,selectableFilter:r,gos:o}=this.beans,s=R=>{const L=this.getOrCreateFilterUi(e);L==null||L.then(O=>{R(c1(O))})},a=e.getColDef(),d=r!=null&&r.isSelectable(a)?r.getFilterDef(e,a):a,h=U0e(i,d,()=>this.getDefaultFloatingFilter(e))??"agReadOnlyFloatingFilter",m=o.get("enableFilterHandlers"),v=SA(n,d,this.createFilterCompParams(e,m,"init",!0)),w=ki(o,{column:e,filterParams:v,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:s,showParentFilter:t});if(m){const R=w,L=e.getColId(),O=this.filterChangedCallbackFactory(e);R.onUiChange=z=>this.floatingFilterUiChanged(e,z),R.model=kl(this.model,L),R.onModelChange=(z,$)=>{this.updateStoredModel(L,z),this.refreshHandlerAndUi(e,z,"floating",!0,$).then(()=>{O({...$,source:"columnFilter"})})},R.getHandler=()=>this.getHandler(e,!0),R.source="init"}return Xye(n,a,w,h)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilterUi(e,t,n,i){const r="paramsUpdated";if(e.isHandler){const o=t.getColId();delete this.initialModel[o],this.state.delete(o);const s=e.filterUi,a=this.createFilterUiForHandler(n,i);e.filterUi=a;const d=this.eventSvc;s!=null&&s.created?s.promise.then(h=>{this.destroyBean(h),d.dispatchEvent({type:"filterDestroyed",source:r,column:t})}):d.dispatchEvent({type:"filterHandlerDestroyed",source:r,column:t})}else this.destroyFilter(t,r)}destroyFilter(e,t="api"){const n=e.getColId(),i=this.allColumnFilters.get(n);this.disposeColumnListener(n),delete this.initialModel[n],i&&this.disposeFilterWrapper(i,t).then(r=>{var o;r&&this.isAlive()&&((o=this.beans.filterManager)==null||o.onFilterChanged({columns:[e],source:"api"}))})}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){let n=!1;const{column:i,isHandler:r,filterUi:o}=e,s=i.getColId();r&&(n=this.isHandlerActive(i),this.destroyBean(e.handler),delete this.model[s],this.state.delete(s));const a=()=>{this.setColFilterActive(i,!1,"filterDestroyed"),this.allColumnFilters.delete(s),this.eventSvc.dispatchEvent({type:"filterDestroyed",source:t,column:i})};if(o){if(o.created)return o.promise.then(d=>(n=r?n:!!(d!=null&&d.isFilterActive()),this.destroyBean(d),a(),n));a()}return Fr.resolve(n)}filterChangedCallbackFactory(e){return t=>{this.callOnFilterChangedOutsideRenderCycle({additionalEventAttributes:t,columns:[e],column:e,source:(t==null?void 0:t.source)??"columnFilter"})}}filterParamsChanged(e,t="api"){var z,$,U,Y,X,q;const n=this.allColumnFilters.get(e);if(!n)return;const i=this.beans,r=n.column,o=r.getColDef(),s=r.isFilterAllowed(),a=this.getDefaultFilter(r),d=i.selectableFilter,h=d!=null&&d.isSelectable(o)?d.getFilterDef(r,o):o,m=s?this.createHandlerFunc(r,h,this.getDefaultFilter(r)):void 0,v=!!m,w=n.isHandler;if(w!=v){this.destroyFilter(r,"paramsUpdated");return}const{compDetails:R,createFilterUi:L}=(s?this.createFilterComp(r,h,a,ie=>ie,v,"colDef"):null)??{compDetails:null,createFilterUi:null},O=(R==null?void 0:R.params)??SA(i.userCompFactory,h,this.createFilterCompParams(r,v,"colDef"));if(w){const ie=(m==null?void 0:m.handlerNameOrCallback)??(m==null?void 0:m.filterHandler),re=kl(this.model,e);if(n.handlerGenerator!=ie){const J=n.handler,{handler:ne,handlerParams:be}=this.createHandlerFromFunc(r,m.filterHandler,O);n.handler=ne,n.handlerParams=be,n.handlerGenerator=ie,delete this.model[e],(z=ne.init)==null||z.call(ne,{...be,source:"init",model:null}),this.destroyBean(J),re!=null&&(($=this.beans.filterManager)==null||$.onFilterChanged({columns:[r],source:t}))}else{const J=this.createHandlerParams(r,R==null?void 0:R.params);n.handlerParams=J,(Y=(U=n.handler).refresh)==null||Y.call(U,{...J,source:"colDef",model:re})}}if(this.areFilterCompsDifferent(((X=n.filterUi)==null?void 0:X.compDetails)??null,R)||!n.filterUi||!R){this.destroyFilterUi(n,r,R,L);return}n.filterUi.filterParams=O,(q=wy(n,w))==null||q.then(ie=>{(ie!=null&&ie.refresh?ie.refresh(O):!0)===!1?this.destroyFilterUi(n,r,R,L):this.dispatchLocalEvent({type:"filterParamsChanged",column:r,params:O})})}refreshHandlerAndUi(e,t,n,i,r){const o=this.cachedFilter(e);if(!o)return i&&this.getOrCreateFilterWrapper(e,!0),Fr.resolve();if(!o.isHandler)return Fr.resolve();const{filterUi:s,handler:a,handlerParams:d}=o;return F0e(()=>{if(s){const{created:h,filterParams:m}=s;if(h)return s.promise.then(v=>v?{filter:v,filterParams:m}:void 0);s.refreshed=!0}return Fr.resolve(void 0)},a,d,t,this.state.get(e.getColId())??{model:t},n,r)}setColumnFilterWrapper(e,t){const n=e.getColId();this.allColumnFilters.set(n,t),this.allColumnListeners.set(n,this.addManagedListeners(e,{colDefChanged:()=>this.filterParamsChanged(n)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:n}=e,{componentClass:i}=t;return!(n===i||(n==null?void 0:n.render)&&(i==null?void 0:i.render)&&n.render===i.render)}hasFloatingFilters(){return this.beans.colModel.getCols().some(t=>t.getColDef().floatingFilter)}getFilterInstance(e){const t=this.beans.colModel.getColDefCol(e);if(!t)return Promise.resolve(void 0);const n=this.getOrCreateFilterUi(t);return n?new Promise(i=>{n.then(r=>{i(c1(r))})}):Promise.resolve(null)}processFilterModelUpdateQueue(){this.modelUpdates.forEach(({model:e,source:t})=>this.setModel(e,t)),this.modelUpdates=[],this.columnModelUpdates.forEach(({key:e,model:t,resolve:n})=>{this.setModelForColumn(e,t).then(()=>n())}),this.columnModelUpdates=[]}getModelForColumn(e,t){if(t){const{state:i,model:r}=this,o=e.getColId(),s=i.get(o);return s?s.model??null:kl(r,o)}const n=this.cachedFilter(e);return n?this.getModelFromFilterWrapper(n):null}setModelForColumn(e,t){var n;if((n=this.beans.dataTypeSvc)!=null&&n.isPendingInference){let i=()=>{};const r=new Promise(o=>{i=o});return this.columnModelUpdates.push({key:e,model:t,resolve:i}),r}return new Promise(i=>{this.setModelForColumnLegacy(e,t).then(r=>i(r))})}getStateForColumn(e){return this.state.get(e)??{model:kl(this.model,e)}}setModelForColumnLegacy(e,t){const n=this.beans.colModel.getColDefCol(e),i=n?this.getOrCreateFilterWrapper(n,!0):null;return i?this.setModelOnFilterWrapper(i,t):Fr.resolve()}setColDefPropsForDataType(e,t,n){var m;const i=e.filter,r=i===!0?this.getDefaultFilterFromDataType(()=>t.baseDataType):i;if(typeof r!="string")return;let o,s;const a=this.beans,{filterParams:d,filterValueGetter:h}=e;r==="agMultiColumnFilter"?{filterParams:o,filterValueGetter:s}=((m=a.multiFilter)==null?void 0:m.getParamsForDataType(d,h,t,n))??{}:{filterParams:o,filterValueGetter:s}=G0e(r,d,h,t,n,a,this.getLocaleTextFunc()),e.filterParams=o,s&&(e.filterValueGetter=s)}setColFilterActive(e,t,n,i){e.filterActive!==t&&(e.filterActive=t,e.dispatchColEvent("filterActiveChanged",n)),e.dispatchColEvent("filterChanged",n,i)}setModelOnFilterWrapper(e,t,n){return new Fr(i=>{if(e.isHandler){const o=e.column,s=o.getColId(),a=this.model[s];if(this.updateStoredModel(s,t),n&&t===a){i();return}this.refreshHandlerAndUi(o,t,"api").then(()=>i());return}const r=wy(e);if(r){r.then(o=>{if(typeof(o==null?void 0:o.setModel)!="function"){an(65),i();return}(o.setModel(t)||Fr.resolve()).then(()=>i())});return}i()})}updateStoredModel(e,t){Dn(t)?this.model[e]=t:delete this.model[e];const n=this.state.get(e),i={model:t,state:n==null?void 0:n.state};this.state.set(e,i)}filterModified(e,t){var n;(n=this.getOrCreateFilterUi(e))==null||n.then(i=>{this.eventSvc.dispatchEvent({type:"filterModified",column:e,filterInstance:i,...t})})}filterUiChanged(e,t){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent({type:"filterUiChanged",column:e,...t})}floatingFilterUiChanged(e,t){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent({type:"floatingFilterUiChanged",column:e,...t})}updateModel(e,t,n){var s,a;const i=e.getColId(),r=this.cachedFilter(e),o=()=>r==null?void 0:r.filterUi;D4({action:t,filterParams:(s=r==null?void 0:r.filterUi)==null?void 0:s.filterParams,getFilterUi:o,getModel:()=>kl(this.model,i),getState:()=>this.state.get(i),updateState:d=>this.updateState(e,d),updateModel:d=>{var h,m;return(m=(h=o())==null?void 0:h.filterParams)==null?void 0:m.onModelChange(d,{...n,fromAction:t})},processModelToApply:r!=null&&r.isHandler?(a=r.handler.processModelToApply)==null?void 0:a.bind(r.handler):void 0})}updateAllModels(e,t){const n=[];this.allColumnFilters.forEach((i,r)=>{var s,a;const o=this.beans.colModel.getColDefCol(r);o&&D4({action:e,filterParams:(s=i.filterUi)==null?void 0:s.filterParams,getFilterUi:()=>i.filterUi,getModel:()=>kl(this.model,r),getState:()=>this.state.get(r),updateState:d=>this.updateState(o,d),updateModel:d=>{this.updateStoredModel(r,d),this.dispatchLocalEvent({type:"filterAction",column:o,action:e}),n.push(this.refreshHandlerAndUi(o,d,"ui"))},processModelToApply:i!=null&&i.isHandler?(a=i.handler.processModelToApply)==null?void 0:a.bind(i.handler):void 0})}),n.length&&Fr.all(n).then(()=>{this.callOnFilterChangedOutsideRenderCycle({source:"columnFilter",additionalEventAttributes:t,columns:[]})})}updateOrRefreshFilterUi(e){const t=e.getColId();nH(()=>{var n;return(n=this.cachedFilter(e))==null?void 0:n.filterUi},()=>kl(this.model,t),()=>this.state.get(t))}updateState(e,t){this.state.set(e.getColId(),t),this.dispatchLocalEvent({type:"filterStateChanged",column:e,state:t})}canApplyAll(){const{state:e,model:t,activeFilterComps:n}=this;for(const r of n)if(r.source==="COLUMN_MENU")return!1;let i=!1;for(const r of e.keys()){const o=e.get(r);if(o.valid===!1)return!1;(o.model??null)!==kl(t,r)&&(i=!0)}return i}hasUnappliedModel(e){var i;const{model:t,state:n}=this;return(((i=n.get(e))==null?void 0:i.model)??null)!==kl(t,e)}setGlobalButtons(e){this.isGlobalButtons=e,this.dispatchLocalEvent({type:"filterGlobalButtons",isGlobal:e})}shouldKeepStateOnDetach(e,t){if(t==="newFiltersToolPanel")return!0;const n=this.beans.filterPanelSvc;return n!=null&&n.isActive?!!n.getState(e.getColId()):!1}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear(),this.state.clear(),this.activeFilterComps.clear()}};function L2e(e){var t;return!!((t=e.filterManager)!=null&&t.isAnyFilterPresent())}function O2e(e,t="api"){var n;(n=e.filterManager)==null||n.onFilterChanged({source:t})}var z2e=class extends Yt{constructor(){super(...arguments),this.beanName="filterManager",this.advFilterModelUpdateQueue=[]}wireBeans(e){this.quickFilter=e.quickFilter,this.advancedFilter=e.advancedFilter,this.colFilter=e.colFilter}postConstruct(){const e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:({enabled:i})=>this.onAdvFilterEnabledChanged(i),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.quickFilter&&this.addManagedListeners(this.quickFilter,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})});const{gos:n}=this;this.alwaysPassFilter=n.get("alwaysPassFilter"),this.addManagedPropertyListener("alwaysPassFilter",()=>{this.alwaysPassFilter=n.get("alwaysPassFilter"),this.onFilterChanged({source:"api"})})}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return typeof e=="function"&&e({})}doesExternalFilterPass(e){const t=this.gos.get("doesExternalFilterPass");return typeof t=="function"&&t(e)}setFilterState(e,t,n="api"){var i;this.isAdvFilterEnabled()||(i=this.colFilter)==null||i.setState(e,t,n)}setFilterModel(e,t="api",n){var i;if(this.isAdvFilterEnabled()){n||this.warnAdvFilters();return}(i=this.colFilter)==null||i.setModel(e,t)}getFilterModel(){var e;return((e=this.colFilter)==null?void 0:e.getModel())??{}}getFilterState(){var e;return(e=this.colFilter)==null?void 0:e.getState()}isColumnFilterPresent(){var e;return!!((e=this.colFilter)!=null&&e.isFilterPresent())}isAggregateFilterPresent(){var e;return!!((e=this.colFilter)!=null&&e.isAggFilterPresent())}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.externalFilterPresent||this.isAdvFilterPresent()}isAnyFilterPresent(){return this.isChildFilterPresent()||this.isAggregateFilterPresent()}isAdvFilterPresent(){return this.isAdvFilterEnabled()&&this.advancedFilter.isFilterPresent()}onAdvFilterEnabledChanged(e){var t,n;e?(t=this.colFilter)!=null&&t.disableFilters()&&this.onFilterChanged({source:"advancedFilter"}):(n=this.advancedFilter)!=null&&n.isFilterPresent()&&(this.advancedFilter.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvFilterEnabled(){var e;return!!((e=this.advancedFilter)!=null&&e.isEnabled())}isAdvFilterHeaderActive(){return this.isAdvFilterEnabled()&&this.advancedFilter.isHeaderActive()}refreshFiltersForAggregations(){Rk(this.gos)&&this.isAnyFilterPresent()&&this.onFilterChanged()}onFilterChanged(e={}){const{source:t,additionalEventAttributes:n,columns:i=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.colFilter?this.colFilter.updateBeforeFilterChanged(e):Fr.resolve()).then(()=>{var o;const r={source:t,type:"filterChanged",columns:i};n&&ac(r,n),this.eventSvc.dispatchEvent(r),(o=this.colFilter)==null||o.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){var e;return!!((e=this.colFilter)!=null&&e.isSuppressFlashingCellsBecauseFiltering())}isQuickFilterPresent(){var e;return!!((e=this.quickFilter)!=null&&e.isFilterPresent())}updateAggFiltering(){this.aggFiltering=!!Rk(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.beans.colModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,colIdToSkip:e})}doesRowPassAggregateFilters(e){var n;const{rowNode:t}=e;return(n=this.alwaysPassFilter)!=null&&n.call(this,t)?!0:!(this.isAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.isAggregateFilterPresent()&&!this.colFilter.doFiltersPass(t,e.colIdToSkip,!0))}doesRowPassFilter(e){var n;const{rowNode:t}=e;return(n=this.alwaysPassFilter)!=null&&n.call(this,t)?!0:!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.externalFilterPresent&&!this.doesExternalFilterPass(t)||this.isColumnFilterPresent()&&!this.colFilter.doFiltersPass(t,e.colIdToSkip)||this.isAdvFilterPresent()&&!this.advancedFilter.doesFilterPass(t))}isFilterAllowed(e){var t;return this.isAdvFilterEnabled()?!1:!!((t=this.colFilter)!=null&&t.isFilterAllowed(e))}getAdvFilterModel(){return this.isAdvFilterEnabled()?this.advancedFilter.getModel():null}setAdvFilterModel(e,t="api"){var n;if(this.isAdvFilterEnabled()){if((n=this.beans.dataTypeSvc)!=null&&n.isPendingInference){this.advFilterModelUpdateQueue.push(e);return}this.advancedFilter.setModel(e??null),this.onFilterChanged({source:t})}}toggleAdvFilterBuilder(e,t){this.isAdvFilterEnabled()&&this.advancedFilter.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvFilterColumns(){this.isAdvFilterEnabled()&&this.advancedFilter.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){var e;return this.isAdvFilterEnabled()?!1:!!((e=this.colFilter)!=null&&e.hasFloatingFilters())}getColumnFilterInstance(e){var t;return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve(void 0)):((t=this.colFilter)==null?void 0:t.getFilterInstance(e))??Promise.resolve(void 0)}warnAdvFilters(){an(68)}setupAdvFilterHeaderComp(e){var t;(t=this.advancedFilter)==null||t.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvFilterHeaderActive()?this.advancedFilter.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){for(const e of this.advFilterModelUpdateQueue)this.setAdvFilterModel(e);this.advFilterModelUpdateQueue=[]}setColumnFilterModel(e,t){var n;return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve()):((n=this.colFilter)==null?void 0:n.setModelForColumn(e,t))??Promise.resolve()}},N2e=class extends Yt{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupSvc=e.popupSvc}hideActiveMenu(){var e;(e=this.hidePopup)==null||e.call(this)}showMenuAfterMouseEvent(e,t,n,i){e&&!e.isColumn||this.showPopup(e,r=>{var o;(o=this.popupSvc)==null||o.positionPopupUnderMouseEvent({additionalParams:{column:e},type:n,mouseEvent:t,ePopup:r})},n,t.target,Ed(this.gos),i)}showMenuAfterButtonClick(e,t,n,i){if(e&&!e.isColumn)return;let r=-1,o="left";const s=Ed(this.gos);!s&&this.gos.get("enableRtl")&&(r=1,o="right");const a=s?void 0:4*r,d=s?void 0:4;this.showPopup(e,h=>{var m;(m=this.popupSvc)==null||m.positionPopupByComponent({type:n,eventSource:t,ePopup:h,nudgeX:a,nudgeY:d,alignSide:o,keepWithinBounds:!0,position:"under",additionalParams:{column:e}})},n,t,s,i)}showPopup(e,t,n,i,r,o){var O;const s=e?this.createBean(new N0e(e,"COLUMN_MENU")):void 0;if(this.activeMenu=s,!(s!=null&&s.hasFilter())||!e){Do(57);return}const a=_h({tag:"div",cls:`ag-menu${r?"":" ag-filter-menu"}`,role:"presentation"});[this.tabListener]=this.addManagedElementListeners(a,{keydown:z=>this.trapFocusWithin(z,a)}),a.appendChild(s==null?void 0:s.getGui());let d;const h=()=>s==null?void 0:s.afterGuiDetached(),m=Hme(this.gos)?i??this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody:void 0,v=z=>{G4(e,!1,"contextMenu");const $=z instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),$&&i&&Sm(i)){const U=L7(i);U==null||U.focus({preventScroll:!0})}h(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,n,e),o==null||o()},w=this.getLocaleTextFunc(),R=r&&n!=="columnFilter"?w("ariaLabelColumnMenu","Column Menu"):w("ariaLabelColumnFilter","Column Filter"),L=(O=this.popupSvc)==null?void 0:O.addPopup({modal:!0,eChild:a,closeOnEsc:!0,closedCallback:v,positionCallback:()=>t(a),anchorToElement:m,ariaLabel:R});L&&(this.hidePopup=d=L.hideFunc),s.afterInit().then(()=>{t(a),s.afterGuiAttached({container:n,hidePopup:d})}),G4(e,!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,n,e)}trapFocusWithin(e,t){e.key!==kt.TAB||e.defaultPrevented||E0(this.beans,t,!1,e.shiftKey)||(e.preventDefault(),m0(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,n){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:n??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},B2e=class extends Yt{constructor(){super(...arguments),this.beanName="filterValueSvc"}getValue(e,t,n){if(!t)return;const i=e.getColDef(),{selectableFilter:r,valueSvc:o,formula:s}=this.beans,a=n??(r==null?void 0:r.getFilterValueGetter(e.getColId()))??i.filterValueGetter;if(a)return this.executeFilterValueGetter(a,t.data,e,t,i);const d=o.getValue(e,t);return e.isAllowFormula()&&(s!=null&&s.isFormula(d))?s.resolveValue(e,t):d}executeFilterValueGetter(e,t,n,i,r){const{expressionSvc:o,valueSvc:s}=this.beans,a=ki(this.gos,{data:t,node:i,column:n,colDef:r,getValue:s.getValueCallback.bind(s,i)});return typeof e=="function"?e(a):o==null?void 0:o.evaluate(e,a)}},G2e={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eFloatingFilterText"}]},j2e=class extends ra{constructor(){super(G2e,[K2]),this.eFloatingFilterText=Yn}init(e){this.params=e;const t=this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0);if(this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`),this.gos.get("enableFilterHandlers")){const n=e,i=n.getHandler();if(i.getModelAsString){const r=i.getModelAsString(n.model);this.eFloatingFilterText.setValue(r)}}}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){const n=t.getModelAsString(e);this.eFloatingFilterText.setValue(n)}})}refresh(e){this.init(e)}},rM=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions??t,this.mapCustomOptions(),this.defaultOption=this.getDefaultItem(e.defaultOption)}refresh(e,t){const n=e.filterOptions??t;this.filterOptions!==n&&(this.filterOptions=n,this.customFilterOptions={},this.mapCustomOptions()),this.defaultOption=this.getDefaultItem(e.defaultOption)}mapCustomOptions(){const{filterOptions:e}=this;if(e)for(const t of e){if(typeof t=="string")continue;const n=[["displayKey"],["displayName"],["predicate","test"]],i=r=>r.some(o=>t[o]!=null)?!0:(an(72,{keys:r}),!1);if(!n.every(i)){this.filterOptions=e.filter(r=>r===t)||[];continue}this.customFilterOptions[t.displayKey]=t}}getDefaultItem(e){const{filterOptions:t}=this;if(e)return e;if(t.length>=1){const n=t[0];if(typeof n=="string")return n;if(n.displayKey)return n.displayKey;an(73)}else an(74)}getCustomOption(e){return this.customFilterOptions[e]}};function zw(e,t,n){return n==null?e.splice(t):e.splice(t,n)}function HS(e){return e==null||typeof e=="string"&&e.trim().length===0}function H2e(e){return e==="AND"||e==="OR"?e:"AND"}function V2e(e,t,n){if(e==null)return;const{predicate:i}=e;if(i!=null&&!t.some(r=>r==null))return i(t,n)}function $2e(e,t){let n=e.length;return n>t&&(e.splice(t),an(78),n=t),n}function p1(e,t){const n=t.getCustomOption(e);if(n){const{numberOfInputs:r}=n;return r??1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:e==="inRange"?2:1}var oM=class extends W0e{constructor(e,t,n){super(e,"simple-filter"),this.mapValuesFromModel=t,this.defaultOptions=n,this.eTypes=[],this.eJoinPanels=[],this.eJoinAnds=[],this.eJoinOrs=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}setParams(e){super.setParams(e);const t=new rM;this.optionsFactory=t,t.init(e,this.defaultOptions),this.commonUpdateSimpleParams(e),this.createOption(),this.createMissingConditionsAndOperators()}updateParams(e,t){this.optionsFactory.refresh(e,this.defaultOptions),super.updateParams(e,t),this.commonUpdateSimpleParams(e)}commonUpdateSimpleParams(e){this.setNumConditions(e),this.defaultJoinOperator=H2e(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.createFilterListOptions(),Nc(this.getGui(),"tabindex",this.isReadOnly()?"-1":null)}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged("immediately",!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,n)=>{const i=n===0?e:this.optionsFactory.defaultOption;t.setValue(i,!0)})}getModelFromUi(){const e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.filterType,operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){const{eJoinOrs:e,defaultJoinOperator:t}=this;return e.length===0?t:e[0].getValue()===!0?"OR":"AND"}areNonNullModelsEqual(e,t){const n=!e.operator,i=!t.operator;if(!n&&i||n&&!i)return!1;let o;if(n){const s=e,a=t;o=this.areSimpleModelsEqual(s,a)}else{const s=e,a=t;o=s.operator===a.operator&&Vy(s.conditions,a.conditions,(d,h)=>this.areSimpleModelsEqual(d,h))}return o}setModelIntoUi(e,t){if(e==null)return this.resetUiToDefaults(t),Fr.resolve();if(e.operator){const i=e;let r=i.conditions;r==null&&(r=[],an(77));const o=$2e(r,this.maxNumConditions),s=this.getNumConditions();if(o<s)this.removeConditionsAndOperators(o);else if(o>s)for(let d=s;d<o;d++)this.createJoinOperatorPanel(),this.createOption();const a=i.operator==="OR";this.eJoinAnds.forEach(d=>d.setValue(!a,!0)),this.eJoinOrs.forEach(d=>d.setValue(a,!0)),r.forEach((d,h)=>{this.eTypes[h].setValue(d.type,!0),this.setConditionIntoUi(d,h)})}else{const i=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(i.type,!0),this.setConditionIntoUi(i,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.updateUiVisibility(),t||this.params.onUiChange(this.getUiChangeEventParams()),Fr.resolve()}setNumConditions(e){let t=e.maxNumConditions??2;t<1&&(an(79),t=1),this.maxNumConditions=t;let n=e.numAlwaysVisibleConditions??1;n<1&&(an(80),n=1),n>t&&(an(81),n=t),this.numAlwaysVisibleConditions=n}createOption(){const e=this.getGui(),t=this.createManagedBean(new zF);this.eTypes.push(t),t.addCss("ag-filter-select"),e.appendChild(t.getGui());const n=this.createEValue();this.eConditionBodies.push(n),e.appendChild(n),this.putOptionsIntoDropdown(t),this.resetType(t);const i=this.getNumConditions()-1;this.forEachPositionInput(i,r=>this.resetInput(r)),this.addChangedListeners(t,i)}createJoinOperatorPanel(){const e=_h({tag:"div",cls:"ag-filter-condition"});this.eJoinPanels.push(e);const t=this.createJoinOperator(this.eJoinAnds,e,"and"),n=this.createJoinOperator(this.eJoinOrs,e,"or");this.getGui().appendChild(e);const i=this.eJoinPanels.length-1,r=this.joinOperatorId++;this.resetJoinOperatorAnd(t,i,r),this.resetJoinOperatorOr(n,i,r),this.isReadOnly()||(t.onValueChange(this.listener),n.onValueChange(this.listener))}createJoinOperator(e,t,n){const i=this.createManagedBean(new wve);e.push(i);const r="ag-filter-condition-operator";return i.addCss(r),i.addCss(`${r}-${n}`),t.appendChild(i.getGui()),i}createFilterListOptions(){this.filterListOptions=this.optionsFactory.filterOptions.map(e=>typeof e=="string"?this.createBoilerplateListOption(e):this.createCustomListOption(e))}putOptionsIntoDropdown(e){const{filterListOptions:t}=this;for(const n of t)e.addOption(n);e.setDisabled(t.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,n=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:n?this.getLocaleTextFunc()(n.displayKey,n.displayName):this.translate(t)}}createBodyTemplate(){return null}getAgComponents(){return[]}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let n=0;n<this.getNumConditions();n++)this.isConditionUiComplete(n)?e=n:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{const n=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<n){this.removeConditionsAndOperators(n+1);const i=e+1,r=n-i;r>0&&this.removeConditionsAndOperators(i,r),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((i,r)=>{const o=this.isConditionDisabled(r,e);i.setDisabled(o||this.filterListOptions.length<=1),r===1&&(o1(this.eJoinPanels[0],o),this.eJoinAnds[0].setDisabled(o),this.eJoinOrs[0].setDisabled(o))}),this.eConditionBodies.forEach((i,r)=>{$o(i,this.isConditionBodyVisible(r))});const n=(t??this.getJoinOperator())==="OR";for(const i of this.eJoinAnds)i.setValue(!n,!0);for(const i of this.eJoinOrs)i.setValue(n,!0);this.forEachInput((i,r,o,s)=>{this.setElementDisplayed(i,r<s),this.setElementDisabled(i,this.isConditionDisabled(o,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;const{eTypes:n,eConditionBodies:i,eJoinPanels:r,eJoinAnds:o,eJoinOrs:s}=this;this.removeComponents(n,e,t),this.removeElements(i,e,t),this.removeEValues(e,t);const a=Math.max(e-1,0);this.removeElements(r,a,t),this.removeComponents(o,a,t),this.removeComponents(s,a,t)}removeElements(e,t,n){const i=zw(e,t,n);for(const r of i)Iy(r)}removeComponents(e,t,n){const i=zw(e,t,n);for(const r of i)Iy(r.getGui()),this.destroyBean(r)}afterGuiAttached(e){var t;if(super.afterGuiAttached(e),this.resetPlaceholder(),!(e!=null&&e.suppressFocus)){let n;if(!this.isReadOnly()){const i=this.getInputs(0)[0];i instanceof qv&&this.isConditionBodyVisible(0)?n=i.getInputElement():n=(t=this.eTypes[0])==null?void 0:t.getFocusableElement()}(n??this.getGui()).focus({preventScroll:!0})}}shouldKeepInvalidInputState(){return!1}afterGuiDetached(){var s;super.afterGuiDetached();const e=this.params;if((s=this.beans.colFilter)!=null&&s.shouldKeepStateOnDetach(e.column)||this.shouldKeepInvalidInputState())return;e.onStateChange({model:e.model});let t=-1,n=-1,i=!1;const r=this.getJoinOperator();for(let a=this.getNumConditions()-1;a>=0;a--)if(this.isConditionUiComplete(a))t===-1&&(t=a,n=a);else{const d=a>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(a-1),h=a<t;(d||h)&&(this.removeConditionsAndOperators(a,1),i=!0,h&&n--)}let o=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),o=!0),this.shouldAddNewConditionAtEnd(n===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),o=!0),o&&this.updateConditionStatusesAndValues(n,r),i&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=n}getModelAsString(e){var t,n;return((n=(t=this.params.getHandler())==null?void 0:t.getModelAsString)==null?void 0:n.call(t,e))??""}resetPlaceholder(){const e=this.getLocaleTextFunc(),{filterPlaceholder:t,eTypes:n}=this;this.forEachInput((i,r,o,s)=>{if(!(i instanceof qv))return;const a=r===0&&s>1?"inRangeStart":r===0?"filterOoo":"inRangeEnd",d=r===0&&s>1?e("ariaFilterFromValue","Filter from value"):r===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value"),h=n[o].getValue(),m=iH(this,t,a,h);i.setInputPlaceholder(m),i.setInputAriaLabel(d)})}setElementValue(e,t,n){e instanceof qv&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){v4(e)&&$o(e.getGui(),t)}setElementDisabled(e,t){v4(e)&&o1(e.getGui(),t)}attachElementOnChange(e,t){e instanceof qv&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,n)=>{this.forEachPositionTypeInput(n,t,e)})}forEachPositionInput(e,t){const n=this.getConditionType(e);this.forEachPositionTypeInput(e,n,t)}forEachPositionTypeInput(e,t,n){const i=p1(t,this.optionsFactory),r=this.getInputs(e);for(let o=0;o<r.length;o++){const s=r[o];s!=null&&n(s,o,e,i)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){const t=this.getConditionType(e);return p1(t,this.optionsFactory)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)==="empty"||this.getValues(e).some(n=>n==null)||this.positionHasInvalidInputs(e))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinAnds.forEach((t,n)=>this.resetJoinOperatorAnd(t,n,this.joinOperatorId+n)),this.eJoinOrs.forEach((t,n)=>this.resetJoinOperatorOr(t,n,this.joinOperatorId+n)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,this.updateUiVisibility(),e||this.params.onUiChange(this.getUiChangeEventParams())}resetType(e){const n=this.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.defaultOption,!0).setAriaLabel(n).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,n){this.resetJoinOperator(e,t,this.defaultJoinOperator==="AND",this.translate("andCondition"),n)}resetJoinOperatorOr(e,t,n){this.resetJoinOperator(e,t,this.defaultJoinOperator==="OR",this.translate("orCondition"),n)}resetJoinOperator(e,t,n,i,r){this.updateJoinOperatorDisabled(e.setValue(n,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${r}`).setLabel(i),t)}updateJoinOperatorsDisabled(){const e=(t,n)=>this.updateJoinOperatorDisabled(t,n);this.eJoinAnds.forEach(e),this.eJoinOrs.forEach(e)}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const n=this.mapValuesFromModel(e,this.optionsFactory);this.forEachInput((i,r,o)=>{o===t&&this.setElementValue(i,n[r]!=null?n[r]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,n,i)=>{this.setElementValue(t,n===0&&i===0?e:null,!0)})}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,n=>{this.attachElementOnChange(n,this.listener)}))}hasInvalidInputs(){return!1}positionHasInvalidInputs(e){return!1}isReadOnly(){return!!this.params.readOnly}},v6=".ag-input-field-input",ZH=class{constructor(e,t,n,i,r,o){this.context=e,this.eParent=r,this.alive=!0,this.debouncedReport=Ll({isAlive:()=>this.alive},b6,500),this.timeoutHandle=null;const s=Zye(t,n,i);s==null||s.newAgStackInstance().then(a=>{var m,v;if(!this.alive){e.destroyBean(a);return}if(this.dateComp=a,!a)return;r.appendChild(a.getGui()),(m=a==null?void 0:a.afterGuiAttached)==null||m.call(a);const{tempValue:d,disabled:h}=this;d&&a.setDate(d),h!=null&&((v=a.setDisabled)==null||v.call(a,h)),o==null||o(this)})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){const t=this.dateComp;t?t.setDate(e):this.tempValue=e}setDisabled(e){var n;const t=this.dateComp;t?(n=t.setDisabled)==null||n.call(t,e):this.disabled=e}setDisplayed(e){$o(this.eParent,e)}setInputPlaceholder(e){var t,n;(n=(t=this.dateComp)==null?void 0:t.setInputPlaceholder)==null||n.call(t,e)}setInputAriaLabel(e){var t,n;(n=(t=this.dateComp)==null?void 0:t.setInputAriaLabel)==null||n.call(t,e)}afterGuiAttached(e){var t,n;(n=(t=this.dateComp)==null?void 0:t.afterGuiAttached)==null||n.call(t,e)}updateParams(e){var t,n;(n=(t=this.dateComp)==null?void 0:t.refresh)==null||n.call(t,e)}setCustomValidity(e,t=!1){var i;const n=(i=this.dateComp)==null?void 0:i.getGui().querySelector(v6);if(n&&"setCustomValidity"in n){const r=e.length>0;n.setCustomValidity(e),r?t?this.timeoutHandle=this.debouncedReport(n):b6(n):this.timeoutHandle&&window.clearTimeout(this.timeoutHandle),yF(n,r)}}getValidity(){var e,t;return(t=(e=this.dateComp)==null?void 0:e.getGui().querySelector(v6))==null?void 0:t.validity}};function b6(e){e.reportValidity()}var sM=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"];function YH(e,t){const{dateFrom:n,dateTo:i,type:r}=e||{};return[n&&Hc(n,void 0,!0)||null,i&&Hc(i,void 0,!0)||null].slice(0,p1(r,t))}var x6=1e3,w6=1/0,W2e=class extends oM{constructor(){super("dateFilter",YH,sM),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=x6,this.maxValidYear=w6,this.minValidDate=null,this.maxValidDate=null,this.filterType="date"}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e),this.refreshInputValidation()}shouldKeepInvalidInputState(){return!d1()&&this.hasInvalidInputs()&&this.getConditionTypes().includes("inRange")}commonUpdateSimpleParams(e){super.commonUpdateSimpleParams(e);const t=(d,h)=>{const m=e[d];if(m!=null)if(isNaN(m))an(82,{param:d});else return m==null?h:Number(m);return h},n=t("minValidYear",x6),i=t("maxValidYear",w6);this.minValidYear=n,this.maxValidYear=i,n>i&&an(83);const{minValidDate:r,maxValidDate:o}=e,s=r instanceof Date?r:Hc(r);this.minValidDate=s;const a=o instanceof Date?o:Hc(o);this.maxValidDate=a,s&&a&&s>a&&an(84)}refreshInputValidation(){for(let e=0;e<this.dateConditionFromComps.length;e++)this.refreshInputPairValidation(e,!1,!0)}refreshInputPairValidation(e,t=!1,n=!1){const{dateConditionFromComps:i,dateConditionToComps:r,beans:o}=this,s=i[e],a=r[e],d=s.getDate(),h=a.getDate(),m=U2e(d,h,t),v=m?this.translate(m,[String(t?h:d)]):"",w=!d1()&&!n;(t?s:a).setCustomValidity(v,w),(t?a:s).setCustomValidity("",w),v.length>0&&o.ariaAnnounce.announceValue(v,"dateFilter")}createDateCompWrapper(e,t,n){const{beans:{userCompFactory:i,context:r,gos:o},params:s}=this,a=n==="from",d=new ZH(r,i,s.colDef,ki(o,{onDateChanged:()=>{this.refreshInputPairValidation(t,a),this.onUiChanged()},onFocusIn:()=>this.refreshInputPairValidation(t,a),filterParams:s,location:"filter"}),e);return this.addDestroyFunc(()=>d.destroy()),d}getState(){return{isInvalid:this.hasInvalidInputs()}}areStatesEqual(e,t){return((e==null?void 0:e.isInvalid)??!1)===((t==null?void 0:t.isInvalid)??!1)}setElementValue(e,t){e.setDate(t),t||e.setCustomValidity("")}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}createEValue(){const e=_h({tag:"div",cls:"ag-filter-body"});return this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(e,t,n,i){const r=_h({tag:"div",cls:`ag-filter-${i} ag-filter-date-${i}`});t.push(r),e.appendChild(r),n.push(this.createDateCompWrapper(r,t.length-1,i))}removeEValues(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),zw(this.eConditionPanelsFrom,e,t),zw(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,n){const i=zw(e,t,n);for(const r of i)r.destroy()}isValidDateValue(e){if(e===null)return!1;const{minValidDate:t,maxValidDate:n,minValidYear:i,maxValidYear:r}=this;if(t){if(e<t)return!1}else if(e.getUTCFullYear()<i)return!1;if(n){if(e>n)return!1}else if(e.getUTCFullYear()>r)return!1;return!0}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{var n;return e||(e=t.getDate()!=null&&!(((n=t.getValidity())==null?void 0:n.valid)??!0))}),e}positionHasInvalidInputs(e){let t=!1;return this.forEachPositionInput(e,n=>{var i;return t||(t=!(((i=n.getValidity())==null?void 0:i.valid)??!0))}),t}canApply(e){return!this.hasInvalidInputs()}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachPositionInput(e,(n,i,r,o)=>{!t||i>=o||t&&(t=this.isValidDateValue(n.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}createCondition(e){const t=this.getConditionType(e),n={},i=this.getValues(e),r=this.params.useIsoSeparator?"T":" ";return i.length>0&&(n.dateFrom=Ad(i[0],!0,r)),i.length>1&&(n.dateTo=Ad(i[1],!0,r)),{dateFrom:null,dateTo:null,filterType:this.filterType,type:t,...n}}removeConditionsAndOperators(e,t){if(!this.hasInvalidInputs())return super.removeConditionsAndOperators(e,t)}resetPlaceholder(){const e=this.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),n=e("ariaFilterValue","Filter Value");this.forEachInput(i=>{i.setInputPlaceholder(t),i.setInputAriaLabel(n)})}getInputs(e){const{dateConditionFromComps:t,dateConditionToComps:n}=this;return e>=t.length?[null,null]:[t[e],n[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(n,i,r,o)=>{i<o&&t.push(n.getDate())}),t}translate(e,t){let n=e;return e==="lessThan"?n="before":e==="greaterThan"&&(n="after"),super.translate(n,t)}};function U2e(e,t,n){return e!=null&&t!=null&&e>=t?`${n?"max":"min"}DateValidation`:null}var XH=class extends Yt{constructor(e,t){super(),this.mapValuesFromModel=e,this.defaultOptions=t}init(e){const t=e.filterParams,n=new rM;this.optionsFactory=n,n.init(t,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(n,t)),this.updateParams(e),this.validateModel(e)}refresh(e){if(e.source==="colDef"){const t=e.filterParams,n=this.optionsFactory;n.refresh(t,this.defaultOptions),this.filterModelFormatter.updateParams({optionsFactory:n,filterParams:t}),this.updateParams(e)}this.validateModel(e)}updateParams(e){this.params=e}doesFilterPass(e){const t=e.model;if(t==null)return!0;const{operator:n}=t,i=[];if(n){const s=t;i.push(...s.conditions??[])}else i.push(t);const r=n&&n==="OR"?"some":"every",o=this.params.getValue(e.node);return i[r](s=>this.individualConditionPasses(e,s,o))}getModelAsString(e,t){return this.filterModelFormatter.getModelAsString(e,t)??""}validateModel(e){const{model:t,filterParams:{filterOptions:n,maxNumConditions:i}}=e;if(t==null)return;let o=oH(t)?t.conditions:[t];const s=(n==null?void 0:n.map(m=>typeof m=="string"?m:m.displayKey))??this.defaultOptions;if(!(!o||o.every(m=>s.find(v=>v===m.type)!==void 0))){this.params={...e,model:null},e.onModelChange(null);return}let d=!1;const h=this.filterType;if((o&&!o.every(m=>m.filterType===h)||t.filterType!==h)&&(o=o.map(m=>({...m,filterType:h})),d=!0),typeof i=="number"&&o&&o.length>i&&(o=o.slice(0,i),d=!0),d){const m=o.length>1?{...t,filterType:h,conditions:o}:{...o[0],filterType:h};this.params={...e,model:m},e.onModelChange(m)}}individualConditionPasses(e,t,n){const i=this.optionsFactory,r=this.mapValuesFromModel(t,i),o=i.getCustomOption(t.type),s=V2e(o,r,n);return s??(n==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(r,n,t,e))}},JH=class extends XH{evaluateNullValue(e){const{includeBlanksInEquals:t,includeBlanksInNotEqual:n,includeBlanksInGreaterThan:i,includeBlanksInLessThan:r,includeBlanksInRange:o}=this.params.filterParams;switch(e){case"equals":if(t)return!0;break;case"notEqual":if(n)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(i)return!0;break;case"lessThan":case"lessThanOrEqual":if(r)return!0;break;case"inRange":if(o)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,n){const i=n.type;if(!this.isValid(t))return i==="notEqual"||i==="notBlank";const r=this.comparator(),o=e[0]!=null?r(e[0],t):0;switch(i){case"equals":return o===0;case"notEqual":return o!==0;case"greaterThan":return o>0;case"greaterThanOrEqual":return o>=0;case"lessThan":return o<0;case"lessThanOrEqual":return o<=0;case"inRange":{const s=r(e[1],t);return this.params.filterParams.inRangeInclusive?o>=0&&s<=0:o>0&&s<0}case"blank":return HS(t);case"notBlank":return!HS(t);default:return an(76,{filterModelType:i}),!0}}},QH={equals:"Equals",notEqual:"NotEqual",greaterThan:"GreaterThan",greaterThanOrEqual:"GreaterThanOrEqual",lessThan:"LessThan",lessThanOrEqual:"LessThanOrEqual",inRange:"InRange"},q2e={contains:"Contains",notContains:"NotContains",equals:"TextEquals",notEqual:"TextNotEqual",startsWith:"StartsWith",endsWith:"EndsWith",inRange:"InRange"},aM=class extends Yt{constructor(e,t,n){super(),this.optionsFactory=e,this.filterParams=t,this.valueFormatter=n}getModelAsString(e,t){const n=this.getLocaleTextFunc(),i=t==="filterToolPanel";if(!e)return i?Ap(this,"filterSummaryInactive"):null;if(e.operator!=null){const o=e,a=(o.conditions??[]).map(h=>this.getModelAsString(h,t)),d=o.operator==="AND"?"andCondition":"orCondition";return a.join(` ${Ap(this,d)} `)}else{if(e.type==="blank"||e.type==="notBlank")return i?Ap(this,e.type==="blank"?"filterSummaryBlank":"filterSummaryNotBlank"):n(e.type,e.type);{const o=e,s=this.optionsFactory.getCustomOption(o.type),{displayKey:a,displayName:d,numberOfInputs:h}=s||{};return a&&d&&h===0?n(a,d):this.conditionToString(o,i,o.type==="inRange"||h===2,a,d)}}}updateParams(e){const{optionsFactory:t,filterParams:n}=e;this.optionsFactory=t,this.filterParams=n}conditionForToolPanel(e,t,n,i,r,o){let s;const a=this.getTypeKey(e);return a&&(s=Ap(this,a)),r&&o&&(s=this.getLocaleTextFunc()(r,o)),s!=null?t?`${s} ${Ap(this,"filterSummaryInRangeValues",[n(),i()])}`:`${s} ${n()}`:null}getTypeKey(e){const t=this.filterTypeKeys[e];return t?`filterSummary${t}`:null}formatValue(e){const t=this.valueFormatter;return t?t(e??null)??"":String(e)}},eV=class extends aM{constructor(e,t){super(e,t,n=>{const{dataTypeSvc:i,valueSvc:r}=this.beans,o=t.column,s=i==null?void 0:i.getDateFormatterFunction(o),a=s?s(n??void 0):n;return r.formatValue(o,null,a)}),this.filterTypeKeys=QH}conditionToString(e,t,n,i,r){const{type:o}=e,s=Hc(e.dateFrom),a=Hc(e.dateTo),d=this.filterParams.inRangeFloatingFilterDateFormat,h=t?this.formatValue.bind(this):w=>Mk(w,d),m=()=>s!==null?h(s):"null",v=()=>a!==null?h(a):"null";if(t){const w=this.conditionForToolPanel(o,n,m,v,i,r);if(w!=null)return w}return n?`${m()}-${v()}`:s!=null?h(s):`${o}`}};function K2e(e,t){const n=t;return n<e?-1:n>e?1:0}var Z2e=class extends JH{constructor(){super(YH,sM),this.filterType="date",this.FilterModelFormatterClass=eV}comparator(){return this.params.filterParams.comparator??K2e}isValid(e){const t=this.params.filterParams.isValidDate;return!t||t(e)}},tV=class extends ra{constructor(){super(...arguments),this.defaultDebounceMs=0}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.defaultOption;return}const t=e.operator;let n;t?n=e.conditions[0]:n=e,this.lastType=n.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const n=e;return this.isTypeEditable(n.type)}init(e){this.params=e;const t=this.gos.get("enableFilterHandlers");if(this.reactive=t,this.setParams(e),t){const n=e;this.onModelUpdated(n.model)}}setParams(e){const t=new rM;this.optionsFactory=t,t.init(e.filterParams,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(t,e.filterParams)),this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){const n=this.optionsFactory.defaultOption;t||(this.lastType=n),this.readOnly=!!e.filterParams.readOnly;const i=this.isTypeEditable(n);this.setEditable(i)}refresh(e){this.params=e;const t=e,n=this.reactive;if((!n||t.source==="colDef")&&this.updateParams(e),n){const{source:i,model:r}=t;if(i==="dataChanged"||i==="ui")return;this.onModelUpdated(r)}}updateParams(e){const t=this.optionsFactory;t.refresh(e.filterParams,this.defaultOptions),this.setSimpleParams(e),this.filterModelFormatter.updateParams({optionsFactory:t,filterParams:e.filterParams})}onParentModelChanged(e,t){t!=null&&t.afterFloatingFilter||t!=null&&t.afterDataChange||this.onModelUpdated(e)}hasSingleInput(e){var n;const t=(n=this.optionsFactory.getCustomOption(e))==null?void 0:n.numberOfInputs;return t==null||t==1}isTypeEditable(e){const t=["inRange","empty","blank","notBlank"];return!!e&&!this.readOnly&&this.hasSingleInput(e)&&t.indexOf(e)<0}getAriaLabel(e){return`${this.beans.colNames.getDisplayNameForColumn(e,"header",!0)} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`}},Y2e={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eReadOnlyText"},{tag:"div",ref:"eDateWrapper",cls:"ag-date-floating-filter-wrapper"}]},X2e=class extends tV{constructor(){super(Y2e,[K2]),this.eReadOnlyText=Yn,this.eDateWrapper=Yn,this.FilterModelFormatterClass=eV,this.filterType="date",this.defaultOptions=sM}setParams(e){super.setParams(e),this.createDateComponent();const t=this.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}updateParams(e){super.updateParams(e),this.dateComp.updateParams(this.getDateComponentParams()),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.readOnly&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){const n=e?Hc(e.dateFrom):null;this.dateComp.setDate(n),this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){$o(this.eDateWrapper,e),$o(this.eReadOnlyText.getGui(),!e)}onModelUpdated(e){super.setLastTypeFromModel(e),this.updateCompOnModelChange(e)}onDateChanged(){const e=this.dateComp.getDate();if(this.reactive){const t=this.params;t.onUiChange();const n=t.model,i=Ad(e),r=i==null?null:{...n??{filterType:this.filterType,type:this.lastType??this.optionsFactory.defaultOption},dateFrom:i};t.onModelChange(r,{afterFloatingFilter:!0})}else this.params.parentFilterInstance(t=>{t==null||t.onFloatingFilterChanged(this.lastType||null,e)})}getDateComponentParams(){const{filterParams:e}=this.params,t=HF(e,this.defaultDebounceMs);return ki(this.gos,{onDateChanged:Ll(this,this.onDateChanged.bind(this),t),filterParams:e,location:"floatingFilter"})}createDateComponent(){const{beans:{context:e,userCompFactory:t},eDateWrapper:n,params:{column:i}}=this;this.dateComp=new ZH(e,t,i.getColDef(),this.getDateComponentParams(),n,r=>{r.setInputAriaLabel(this.getAriaLabel(i))}),this.addDestroyFunc(()=>this.dateComp.destroy())}},J2e={tag:"div",cls:"ag-filter-filter",children:[{tag:"ag-input-text-field",ref:"eDateInput",cls:"ag-date-filter"}]},Q2e=class extends ra{constructor(){super(J2e,[K2]),this.eDateInput=Yn,this.isApply=!1,this.applyOnFocusOut=!1}init(e){this.params=e,this.setParams(e);const t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus({preventScroll:!0})},input:this.handleInput.bind(this,!1),change:this.handleInput.bind(this,!0),focusout:this.handleFocusOut.bind(this),focusin:this.handleFocusIn.bind(this)})}handleInput(e){if(!this.eDateInput.isDisabled()){if(this.isApply){this.applyOnFocusOut=!e,e&&this.params.onDateChanged();return}e||this.params.onDateChanged()}}handleFocusOut(){this.applyOnFocusOut&&(this.applyOnFocusOut=!1,this.params.onDateChanged())}handleFocusIn(){var e,t;(t=(e=this.params).onFocusIn)==null||t.call(e)}setParams(e){var w;const t=this.eDateInput.getInputElement(),n=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=n&&Wy();const{minValidYear:i,maxValidYear:r,minValidDate:o,maxValidDate:s,buttons:a,includeTime:d,colDef:h}=e.filterParams||{},m=this.beans.dataTypeSvc,v=d??((w=m==null?void 0:m.getDateIncludesTimeFlag)==null?void 0:w.call(m,h.cellDataType))??!1;if(n?v?(t.type="datetime-local",t.step="1"):t.type="date":t.type="text",o&&i&&an(85),s&&r&&an(86),o&&s){const[R,L]=[o,s].map(O=>O instanceof Date?O:Hc(O));R&&L&&R.getTime()>L.getTime()&&an(87)}o?o instanceof Date?t.min=Mk(o):t.min=o:i&&(t.min=`${i}-01-01`),s?s instanceof Date?t.max=Mk(s):t.max=s:r&&(t.max=`${r}-12-31`),this.isApply=e.location==="floatingFilter"&&!!(a!=null&&a.includes("apply"))}refresh(e){this.params=e,this.setParams(e)}getDate(){return Hc(this.eDateInput.getValue())}setDate(e){var i;const t=this.params.filterParams.colDef.cellDataType,n=((i=this.beans.dataTypeSvc)==null?void 0:i.getDateIncludesTimeFlag(t))??!1;this.eDateInput.setValue(Ad(e,n))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){e!=null&&e.suppressFocus||this.eDateInput.getInputElement().focus({preventScroll:!0})}shouldUseBrowserDatePicker(e){var t;return((t=e==null?void 0:e.filterParams)==null?void 0:t.browserDatePicker)??!0}},lM=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"];function Zk(e){return(e==null?void 0:e.allowedCharPattern)??null}function VS(e){return e==null||isNaN(e)?null:e}function nV(e,t){const{filter:n,filterTo:i,type:r}=e||{};return[VS(n),VS(i)].slice(0,p1(r,t))}var eEe=class extends oM{constructor(){super("numberFilter",nV,lM),this.eValuesFrom=[],this.eValuesTo=[],this.filterType="number",this.defaultDebounceMs=500}afterGuiAttached(e){super.afterGuiAttached(e),this.refreshInputValidation()}shouldKeepInvalidInputState(){return!d1()&&this.hasInvalidInputs()&&this.getConditionTypes().includes("inRange")}refreshInputValidation(){for(let e=0;e<this.eValuesFrom.length;e++){const t=this.eValuesFrom[e],n=this.eValuesTo[e];this.refreshInputPairValidation(t,n)}}refreshInputPairValidation(e,t,n=!1){const i=this.params.numberParser,r=C6(i,e),o=C6(i,t),s=tEe(r,o,n),a=s?this.translate(s,[String(n?o:r)]):"";(n?e:t).setCustomValidity(a),(n?t:e).setCustomValidity(""),a.length>0&&this.beans.ariaAnnounce.announceValue(a,"dateFilter")}getState(){return{isInvalid:this.hasInvalidInputs()}}areStatesEqual(e,t){return((e==null?void 0:e.isInvalid)??!1)===((t==null?void 0:t.isInvalid)??!1)}refresh(e){const t=super.refresh(e),{state:n,additionalEventAttributes:i}=e,r=this.state,o=i==null?void 0:i.fromAction;return(o&&o!="apply"||n.model!==r.model||!this.areStatesEqual(n.state,r.state))&&this.refreshInputValidation(),t}setElementValue(e,t,n){const{numberFormatter:i}=this.params,r=!n&&i?i(t??null):t;super.setElementValue(e,r),r===null&&e.setCustomValidity("")}createEValue(){const{params:e,eValuesFrom:t,eValuesTo:n}=this,i=Zk(e),r=_h({tag:"div",cls:"ag-filter-body",role:"presentation"}),o=this.createFromToElement(r,t,"from",i),s=this.createFromToElement(r,n,"to",i),a=(m,v,w)=>()=>this.refreshInputPairValidation(m,v,w),d=a(o,s,!0);o.onValueChange(d),o.addGuiEventListener("focusin",d);const h=a(o,s,!1);return s.onValueChange(h),s.addGuiEventListener("focusin",h),r}createFromToElement(e,t,n,i){const r=this.createManagedBean(i?new R0({allowedCharPattern:i}):new OF);return r.addCss(`ag-filter-${n}`),r.addCss("ag-filter-filter"),t.push(r),e.appendChild(r.getGui()),r}removeEValues(e,t){const n=i=>this.removeComponents(i,e,t);n(this.eValuesFrom),n(this.eValuesTo)}getValues(e){const t=[];return this.forEachPositionInput(e,(n,i,r,o)=>{i<o&&t.push(VS(iV(this.params.numberParser,n.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}createCondition(e){const t=this.getConditionType(e),n={filterType:this.filterType,type:t},i=this.getValues(e);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n}removeConditionsAndOperators(e,t){if(!this.hasInvalidInputs())return super.removeConditionsAndOperators(e,t)}getInputs(e){const{eValuesFrom:t,eValuesTo:n}=this;return e>=t.length?[null,null]:[t[e],n[e]]}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>e||(e=!t.getInputElement().validity.valid)),e}positionHasInvalidInputs(e){let t=!1;return this.forEachPositionInput(e,n=>t||(t=!n.getInputElement().validity.valid)),t}canApply(e){return!this.hasInvalidInputs()}};function iV(e,t){if(typeof t=="number")return t;let n=nm(t);return n!=null&&n.trim()===""&&(n=null),e?e(n):n==null||n.trim()==="-"?null:Number.parseFloat(n)}function C6(e,t){return VS(iV(e,t.getValue(!0)))}function tEe(e,t,n){return e!=null&&t!=null&&e>=t?`strict${n?"Max":"Min"}ValueValidation`:null}var rV=class extends aM{constructor(e,t){super(e,t,t.numberFormatter),this.filterTypeKeys=QH}conditionToString(e,t,n,i,r){const{filter:o,filterTo:s,type:a}=e,d=this.formatValue.bind(this);if(t){const h=this.conditionForToolPanel(a,n,()=>d(o),()=>d(s),i,r);if(h!=null)return h}return n?`${d(o)}-${d(s)}`:o!=null?d(o):`${a}`}},nEe=class extends JH{constructor(){super(nV,lM),this.filterType="number",this.FilterModelFormatterClass=rV}comparator(){return(e,t)=>e===t?0:e<t?1:-1}isValid(e){return!isNaN(e)}},oV=class extends Yt{constructor(e){super(),this.params=e,this.eInput=Yn,this.onValueChanged=()=>{}}setupGui(e){var i;this.eInput=this.createManagedBean(new R0((i=this.params)==null?void 0:i.config));const t=this.eInput.getGui();e.appendChild(t);const n=r=>this.onValueChanged(r);this.addManagedListeners(t,{input:n,keydown:n})}setEditable(e){this.eInput.setDisabled(!e)}getValue(){return this.eInput.getValue()}setValue(e,t){this.eInput.setValue(e,t)}setValueChangedListener(e){this.onValueChanged=e}setParams({ariaLabel:e,autoComplete:t,placeholder:n}){const{eInput:i}=this;i.setInputAriaLabel(e),t!==void 0&&i.setAutoComplete(t),i.toggleCss("ag-floating-filter-search-icon",!!n),i.setInputPlaceholder(n)}};function Yk(e){const t=e==null?void 0:e.trim();return t===""?e:t}function sV(e,t){const{filter:n,filterTo:i,type:r}=e||{};return[n||null,i||null].slice(0,p1(r,t))}var iEe={tag:"div",ref:"eFloatingFilterInputContainer",cls:"ag-floating-filter-input",role:"presentation"},aV=class extends tV{constructor(){super(...arguments),this.eFloatingFilterInputContainer=Yn,this.defaultDebounceMs=500}postConstruct(){this.setTemplate(iEe)}onModelUpdated(e){this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.inputSvc.setValue(this.filterModelFormatter.getModelAsString(e))}setParams(e){this.setupFloatingFilterInputService(e),super.setParams(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.inputSvc=this.createFloatingFilterInputService(e),this.inputSvc.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){const{inputSvc:t,defaultDebounceMs:n,readOnly:i}=this,{filterPlaceholder:r,column:o,browserAutoComplete:s,filterParams:a}=e,d=this.lastType??this.optionsFactory.defaultOption,h=e.filterParams.filterPlaceholder,m=r===!0?iH(this,h,"filterOoo",d):r||void 0;if(t.setParams({ariaLabel:this.getAriaLabel(o),autoComplete:s??!1,placeholder:m}),this.applyActive=Y2(a),!i){const v=HF(a,n);t.setValueChangedListener(Ll(this,this.syncUpWithParentFilter.bind(this),v))}}updateParams(e){super.updateParams(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const{inputSvc:t}=this,n=t.getValue();jc(this.eFloatingFilterInputContainer),this.destroyBean(t),this.setupFloatingFilterInputService(e),t.setValue(n,!0)}syncUpWithParentFilter(e){const t=e.key===kt.ENTER,n=this.reactive;if(n&&this.params.onUiChange(),this.applyActive&&!t)return;const{inputSvc:i,params:r,lastType:o}=this;let s=i.getValue();if(r.filterParams.trimInput&&(s=Yk(s),i.setValue(s,!0)),n){const a=r,d=a.model,h=this.convertValue(s),m=h==null?null:{...d??{filterType:this.filterType,type:o??this.optionsFactory.defaultOption},filter:h};a.onModelChange(m,{afterFloatingFilter:!0})}else r.parentFilterInstance(a=>{a==null||a.onFloatingFilterChanged(o||null,s||null)})}convertValue(e){return e||null}setEditable(e){this.inputSvc.setEditable(e)}},rEe=class extends Yt{constructor(){super(...arguments),this.onValueChanged=()=>{},this.numberInputActive=!0}setupGui(e){this.eNumberInput=this.createManagedBean(new OF),this.eTextInput=this.createManagedBean(new R0),this.eTextInput.setDisabled(!0);const t=this.eNumberInput.getGui(),n=this.eTextInput.getGui();e.appendChild(t),e.appendChild(n),this.setupListeners(t,i=>this.onValueChanged(i)),this.setupListeners(n,i=>this.onValueChanged(i))}setEditable(e){this.numberInputActive=e,this.eNumberInput.setDisplayed(this.numberInputActive),this.eTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eNumberInput.setAutoComplete(e),this.eTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eNumberInput:this.eTextInput}setValueChangedListener(e){this.onValueChanged=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams({ariaLabel:e,autoComplete:t,placeholder:n}){this.setAriaLabel(e),t!==void 0&&this.setAutoComplete(t),this.setPlaceholder(this.eNumberInput,n),this.setPlaceholder(this.eTextInput,n)}setPlaceholder(e,t){e.toggleCss("ag-floating-filter-search-icon",!!t),e.setInputPlaceholder(t)}setAriaLabel(e){this.eNumberInput.setInputAriaLabel(e),this.eTextInput.setInputAriaLabel(e)}},oEe=class extends aV{constructor(){super(...arguments),this.FilterModelFormatterClass=rV,this.filterType="number",this.defaultOptions=lM}updateParams(e){Zk(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.updateParams(e)}createFloatingFilterInputService(e){return this.allowedCharPattern=Zk(e.filterParams),this.allowedCharPattern?this.createManagedBean(new oV({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new rEe)}convertValue(e){return e?Number(e):null}},uM=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],sEe=class extends oM{constructor(){super("textFilter",sV,uM),this.filterType="text",this.eValuesFrom=[],this.eValuesTo=[],this.defaultDebounceMs=500}createCondition(e){const t=this.getConditionType(e),n={filterType:this.filterType,type:t},i=this.getValues(e);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){const{eValuesFrom:t,eValuesTo:n}=this;return e>=t.length?[null,null]:[t[e],n[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(n,i,r,o)=>{i<o&&t.push(nm(n.getValue()))}),t}createEValue(){const e=_h({tag:"div",cls:"ag-filter-body",role:"presentation"}),{eValuesFrom:t,eValuesTo:n}=this;return this.createFromToElement(e,t,"from"),this.createFromToElement(e,n,"to"),e}createFromToElement(e,t,n){const i=this.createManagedBean(new R0);i.addCss(`ag-filter-${n}`),i.addCss("ag-filter-filter"),t.push(i),e.appendChild(i.getGui())}removeEValues(e,t){const n=o=>this.removeComponents(o,e,t),{eValuesFrom:i,eValuesTo:r}=this;n(i),n(r)}},lV=class extends aM{constructor(){super(...arguments),this.filterTypeKeys=q2e}conditionToString(e,t,n,i,r){const{filter:o,filterTo:s,type:a}=e;if(t){const d=m=>()=>Ap(this,"filterSummaryTextQuote",[m]),h=this.conditionForToolPanel(a,n,d(o),d(s),i,r);if(h!=null)return h}return n?`${o}-${s}`:o!=null?`${o}`:`${a}`}},aEe=({filterOption:e,value:t,filterText:n})=>{if(n==null)return!1;switch(e){case"contains":return t.includes(n);case"notContains":return!t.includes(n);case"equals":return t===n;case"notEqual":return t!=n;case"startsWith":return t.indexOf(n)===0;case"endsWith":{const i=t.lastIndexOf(n);return i>=0&&i===t.length-n.length}default:return!1}},lEe=e=>e,uEe=e=>e==null?null:e.toString().toLowerCase(),cEe=class extends XH{constructor(){super(sV,uM),this.filterType="text",this.FilterModelFormatterClass=lV}updateParams(e){super.updateParams(e);const t=e.filterParams;this.matcher=t.textMatcher??aEe,this.formatter=t.textFormatter??(t.caseSensitive?lEe:uEe)}evaluateNullValue(e){return e?["notEqual","notContains","blank"].indexOf(e)>=0:!1}evaluateNonNullValue(e,t,n,i){const r=e.map(w=>this.formatter(w))||[],o=this.formatter(t),{api:s,colDef:a,column:d,context:h,filterParams:{textFormatter:m}}=this.params;if(n.type==="blank")return HS(t);if(n.type==="notBlank")return!HS(t);const v={api:s,colDef:a,column:d,context:h,node:i.node,data:i.data,filterOption:n.type,value:o,textFormatter:m};return r.some(w=>this.matcher({...v,filterText:w}))}processModelToApply(e){if(e&&this.params.filterParams.trimInput){const t=n=>{const i={...n},{filter:r,filterTo:o}=n;return r&&(i.filter=Yk(r)??null),o&&(i.filterTo=Yk(o)??null),i};return oH(e)?{...e,conditions:e.conditions.map(t)}:t(e)}return e}},dEe=class extends aV{constructor(){super(...arguments),this.FilterModelFormatterClass=lV,this.filterType="text",this.defaultOptions=uM}createFloatingFilterInputService(){return this.createManagedBean(new oV)}};function hEe(e){var t;return!!((t=e.quickFilter)!=null&&t.isFilterPresent())}function fEe(e){var t;return(t=e.quickFilter)==null?void 0:t.getText()}function pEe(e){var t;(t=e.quickFilter)==null||t.resetCache()}var gEe=class extends Yt{constructor(){super(...arguments),this.beanName="quickFilter",this.quickFilter=null,this.quickFilterParts=null}postConstruct(){const e=this.resetCache.bind(this),t=this.gos;this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{t.get("includeHiddenColumnsInQuickFilter")||this.resetCache()}}),this.addManagedPropertyListener("quickFilterText",n=>this.setFilter(n.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onColumnConfigChanged()),this.quickFilter=this.parseFilter(t.get("quickFilterText")),this.parser=t.get("quickFilterParser"),this.matcher=t.get("quickFilterMatcher"),this.setFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setParserAndMatcher())}refreshCols(){var d;const{autoColSvc:e,colModel:t,gos:n,pivotResultCols:i}=this.beans,r=t.isPivotMode(),o=e==null?void 0:e.getColumns(),s=t.getColDefCols();let a=(r&&!n.get("applyQuickFilterBeforePivotOrAgg")?(d=i==null?void 0:i.getPivotResultCols())==null?void 0:d.list:s)??[];o&&(a=a.concat(o)),this.colsToUse=n.get("includeHiddenColumnsInQuickFilter")?a:a.filter(h=>h.isVisible()||h.isRowGroupActive())}isFilterPresent(){return this.quickFilter!==null}doesRowPass(e){const t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassMatcher(t,e):this.quickFilterParts.every(n=>t?this.doesRowPassCache(e,n):this.doesRowPassNoCache(e,n))}resetCache(){this.beans.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}getText(){return this.gos.get("quickFilterText")}setFilterParts(){const{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseFilter(e){return Dn(e)?e.toUpperCase():null}setFilter(e){if(e!=null&&typeof e!="string"){an(70,{newFilter:e});return}const t=this.parseFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setParserAndMatcher(){const e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),n=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,n&&(this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onColumnConfigChanged(){this.refreshCols(),this.resetCache(),this.isFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassNoCache(e,t){return this.colsToUse.some(n=>{const i=this.getTextForColumn(n,e);return Dn(i)&&i.includes(t)})}doesRowPassCache(e,t){return this.checkGenerateAggText(e),e.quickFilterAggregateText.includes(t)}doesRowPassMatcher(e,t){let n;e?(this.checkGenerateAggText(t),n=t.quickFilterAggregateText):n=this.getAggText(t);const{quickFilterParts:i,matcher:r}=this;return r(i,n)}checkGenerateAggText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getAggText(e))}getTextForColumn(e,t){let n=this.beans.filterValueSvc.getValue(e,t);const i=e.getColDef();if(i.getQuickFilterText){const r=ki(this.gos,{value:n,node:t,data:t.data,column:e,colDef:i});n=i.getQuickFilterText(r)}return Dn(n)?n.toString().toUpperCase():null}getAggText(e){const t=[];for(const n of this.colsToUse){const i=this.getTextForColumn(n,e);Dn(i)&&t.push(i)}return t.join(`
`)}},mEe={moduleName:"ClientSideRowModelFilter",version:Fn,rowModels:["clientSide"],beans:[g2e]},cM={moduleName:"FilterCore",version:Fn,beans:[z2e],apiFunctions:{isAnyFilterPresent:L2e,onFilterChanged:O2e},css:[w2e],dependsOn:[mEe]},uV={moduleName:"FilterValue",version:Fn,beans:[B2e]},nE={moduleName:"ColumnFilter",version:Fn,beans:[I2e,N2e],dynamicBeans:{headerFilterCellCtrl:m2e},icons:{filter:"filter",filterActive:"filter"},apiFunctions:{isColumnFilterPresent:C2e,getColumnFilterInstance:_2e,destroyFilter:S2e,setFilterModel:E2e,getFilterModel:R2e,getColumnFilterModel:A2e,setColumnFilterModel:T2e,showColumnFilter:k2e,hideColumnFilter:P2e,getColumnFilterHandler:D2e,doFilterAction:F2e},dependsOn:[cM,tE,uV,b2e]},yEe={moduleName:"CustomFilter",version:Fn,userComponents:{agReadOnlyFloatingFilter:j2e},dependsOn:[nE]},vEe={moduleName:"TextFilter",version:Fn,dependsOn:[nE],userComponents:{agTextColumnFilter:{classImp:sEe,params:{useForm:!0}},agTextColumnFloatingFilter:dEe},dynamicBeans:{agTextColumnFilterHandler:cEe}},bEe={moduleName:"NumberFilter",version:Fn,dependsOn:[nE],userComponents:{agNumberColumnFilter:{classImp:eEe,params:{useForm:!0}},agNumberColumnFloatingFilter:oEe},dynamicBeans:{agNumberColumnFilterHandler:nEe}},xEe={moduleName:"DateFilter",version:Fn,dependsOn:[nE],userComponents:{agDateColumnFilter:{classImp:W2e,params:{useForm:!0}},agDateInput:Q2e,agDateColumnFloatingFilter:X2e},dynamicBeans:{agDateColumnFilterHandler:Z2e}},wEe={moduleName:"QuickFilterCore",version:Fn,rowModels:["clientSide"],beans:[gEe],dependsOn:[cM,uV]},CEe={moduleName:"QuickFilter",version:Fn,apiFunctions:{isQuickFilterPresent:hEe,getQuickFilter:fEe,resetQuickFilter:pEe},dependsOn:[wEe]},_Ee={moduleName:"ExternalFilter",version:Fn,dependsOn:[cM]},SEe=".ag-tooltip{background-color:var(--ag-tooltip-background-color);border:var(--ag-tooltip-border);border-radius:var(--ag-border-radius);color:var(--ag-tooltip-text-color);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;white-space:normal;z-index:99999;&:where(.ag-cell-editor-tooltip),&:where(.ag-cell-formula-tooltip){background-color:var(--ag-tooltip-error-background-color);border:var(--ag-tooltip-error-border);color:var(--ag-tooltip-error-text-color);font-weight:500}}.ag-tooltip-custom{position:absolute;z-index:99999}.ag-tooltip-custom:where(:not(.ag-tooltip-interactive)),.ag-tooltip:where(:not(.ag-tooltip-interactive)){pointer-events:none}.ag-tooltip-animate{transition:opacity 1s;&:where(.ag-tooltip-hiding){opacity:0}}",QA=(e,t,n)=>{var a,d,h;const{editModelSvc:i}=e,r=(d=(a=i==null?void 0:i.getCellValidationModel())==null?void 0:a.getCellValidation(t))==null?void 0:d.errorMessages,o=(h=i==null?void 0:i.getRowValidationModel().getRowValidation(t))==null?void 0:h.errorMessages,s=r||o;return s!=null&&s.length?s.join(n("tooltipValidationErrorSeparator",". ")):void 0},EEe=class extends Yt{constructor(){super(...arguments),this.beanName="tooltipSvc"}setupHeaderTooltip(e,t,n,i){e&&t.destroyBean(e);const r=this.gos,o=JA(r),{column:s,eGui:a}=t,d=s.getColDef();!i&&o&&!d.headerComponent&&(i=r_(()=>a.querySelector(".ag-header-cell-text")));const h="header",v=this.beans.colNames.getDisplayNameForColumn(s,"header",!0),w=n??v,R={getGui:()=>a,getLocation:()=>h,getTooltipValue:()=>{var O;return n??((O=d==null?void 0:d.headerTooltipValueGetter)==null?void 0:O.call(d,ki(r,{location:h,colDef:d,column:s,value:w,valueFormatted:v})))??(d==null?void 0:d.headerTooltip)},shouldDisplayTooltip:i,getAdditionalParams:()=>({column:s,colDef:s.getColDef()})};let L=this.createTooltipFeature(R);return L&&(L=t.createBean(L),t.setRefreshFunction("tooltip",()=>L.refreshTooltip())),L}setupHeaderGroupTooltip(e,t,n,i){e&&t.destroyBean(e);const r=this.gos,o=JA(r),{column:s,eGui:a}=t,d=s.getColGroupDef();!i&&o&&!(d!=null&&d.headerGroupComponent)&&(i=r_(()=>a.querySelector(".ag-header-group-text")));const h="headerGroup",v=this.beans.colNames.getDisplayNameForColumnGroup(s,"header"),w=n??v,R={getGui:()=>a,getLocation:()=>h,getTooltipValue:()=>{var O;return n??((O=d==null?void 0:d.headerTooltipValueGetter)==null?void 0:O.call(d,ki(r,{location:h,colDef:d,column:s,value:w,valueFormatted:v})))??(d==null?void 0:d.headerTooltip)},shouldDisplayTooltip:i,getAdditionalParams:()=>{const O={column:s};return d&&(O.colDef=d),O}},L=this.createTooltipFeature(R);return L&&t.createBean(L)}enableCellTooltipFeature(e,t,n){const{beans:i}=this,{gos:r,editSvc:o}=i,{column:s,rowNode:a}=e;let d="cell";const h=()=>{const R=!!!(o!=null&&o.isEditing(e))&&QA(i,e,this.getLocaleTextFunc());if(R)return d="cellEditor",R;d="cell";const L=s.getColDef(),O=a.data;if(L.tooltipField&&Dn(O))return Lw(O,L.tooltipField,s.isTooltipFieldContainsDots());const z=L.tooltipValueGetter;return z?z(ki(r,{location:"cell",colDef:s.getColDef(),column:s,rowIndex:e.cellPosition.rowIndex,node:a,data:a.data,value:e.value,valueFormatted:e.valueFormatted})):null},m=JA(r);n||(m&&!e.isCellRenderer()?n=()=>{const w=!!(o!=null&&o.isEditing(e));if(!w&&QA(i,e,this.getLocaleTextFunc()))return!0;if(!s.isTooltipEnabled())return!1;const O=r_(()=>{const z=e.eGui;return z.children.length===0?z:z.querySelector(".ag-cell-value")});return!w&&O()}:n=()=>!(o!=null&&o.isEditing(e)));const v={getGui:()=>e.eGui,getLocation:()=>d,getTooltipValue:t!=null?()=>t:h,shouldDisplayTooltip:n,getAdditionalParams:()=>({column:s,colDef:s.getColDef(),rowIndex:e.cellPosition.rowIndex,node:a,data:a.data,valueFormatted:e.valueFormatted})};return this.createTooltipFeature(v,i)}setupFullWidthRowTooltip(e,t,n,i){const r={getGui:()=>t.getFullWidthElement(),getTooltipValue:()=>n,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:i},o=this.beans,s=o.context;e&&t.destroyBean(e,s);const a=this.createTooltipFeature(r,o);if(a)return t.createBean(a,s)}setupFormulaTooltip(e){var s;const{beans:t}=this,{context:n,formula:i}=t;if(!((s=this.beans.formula)!=null&&s.active)||!e.column.isAllowFormula())return;const r={getGui:()=>e.eGui,getTooltipValue:()=>{const a=i==null?void 0:i.getFormulaError(e.column,e.rowNode);return a?a.message:void 0},getLocation:()=>"cellFormula",shouldDisplayTooltip:()=>!!(i==null?void 0:i.getFormulaError(e.column,e.rowNode))},o=this.createTooltipFeature(r,t);if(o)return e.createBean(o,n)}setupCellEditorTooltip(e,t){var a,d;const{beans:n}=this,{context:i}=n,r=((a=t.getValidationElement)==null?void 0:a.call(t,!0))||!((d=t.isPopup)!=null&&d.call(t))&&e.eGui;if(!r)return;const o={getGui:()=>r,getTooltipValue:()=>QA(n,e,this.getLocaleTextFunc()),getLocation:()=>"cellEditor",shouldDisplayTooltip:()=>{var L,O;const{editModelSvc:h}=n,m=(L=h==null?void 0:h.getRowValidationModel())==null?void 0:L.getRowValidationMap(),v=(O=h==null?void 0:h.getCellValidationModel())==null?void 0:O.getCellValidationMap(),w=!!m&&m.size>0,R=!!v&&v.size>0;return w||R}},s=this.createTooltipFeature(o,n);if(s)return e.createBean(s,i)}initCol(e){const{colDef:t}=e;e.tooltipEnabled=Dn(t.tooltipField)||Dn(t.tooltipValueGetter)||Dn(t.tooltipComponent)}createTooltipFeature(e,t){return this.beans.registry.createDynamicBean("tooltipFeature",!1,e,t)}},REe=class extends p0e{createTooltipComp(e,t){const n=Yye(this.beans.userCompFactory,e);n==null||n.newAgStackInstance().then(t)}setEventHandlers(e){[this.onColumnMovedEventCallback]=this.addManagedEventListeners({columnMoved:e})}clearEventHandlers(){var e;(e=this.onColumnMovedEventCallback)==null||e.call(this),this.onColumnMovedEventCallback=void 0}},cV={moduleName:"Tooltip",version:Fn,beans:[EEe],dynamicBeans:{tooltipFeature:Y7,highlightTooltipFeature:g0e,tooltipStateManager:REe},userComponents:{agTooltipComponent:v0e},dependsOn:[tE],css:[SEe]},vb=class{constructor(e){this.cellValueChanges=e}},eT=class extends vb{constructor(e,t,n,i){super(e),this.initialRange=t,this.finalRange=n,this.ranges=i}},AEe=10,_6=class{constructor(e){this.actionStack=[],this.maxStackSize=e||AEe,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},TEe=class extends Yt{constructor(){super(...arguments),this.beanName="undoRedo",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.batchEditing=!1,this.bulkEditing=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},n=this.activeCellEdit!==null&&qF(this.activeCellEdit,t),i=this.activeRowEdit!==null&&Rbe(this.activeRowEdit,t);if(!(n||i||this.isPasting||this.isRangeInAction))return;const{rowPinned:o,rowIndex:s,column:a,oldValue:d,value:h}=e,m={rowPinned:o,rowIndex:s,columnId:a.getColId(),newValue:h,oldValue:d};this.cellValueChanges.push(m)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}postConstruct(){const{gos:e,ctrlsSvc:t}=this.beans;if(!e.get("undoRedoCellEditing"))return;const n=e.get("undoRedoCellEditingLimit");if(n<=0)return;this.undoStack=new _6(n),this.redoStack=new _6(n),this.addListeners();const i=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:r=>{r.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:i,newColumnsLoaded:i,columnGroupOpened:i,columnRowGroupChanged:i,columnMoved:i,columnPinned:i,columnVisible:i,rowDragEnd:i}),t.whenReady(this,r=>{this.gridBodyCtrl=r.gridBodyCtrl})}getCurrentUndoStackSize(){var e;return((e=this.undoStack)==null?void 0:e.getCurrentStackSize())??0}getCurrentRedoStackSize(){var e;return((e=this.redoStack)==null?void 0:e.getCurrentStackSize())??0}undo(e){const{eventSvc:t,undoStack:n,redoStack:i}=this;t.dispatchEvent({type:"undoStarted",source:e});const r=this.undoRedo(n,i,"initialRange","oldValue","undo");t.dispatchEvent({type:"undoEnded",source:e,operationPerformed:r})}redo(e){const{eventSvc:t,undoStack:n,redoStack:i}=this;t.dispatchEvent({type:"redoStarted",source:e});const r=this.undoRedo(i,n,"finalRange","newValue","redo");t.dispatchEvent({type:"redoEnded",source:e,operationPerformed:r})}undoRedo(e,t,n,i,r){if(!e)return!1;const o=e.pop();return o!=null&&o.cellValueChanges?(this.processAction(o,s=>s[i],r),o instanceof eT?this.processRange(o.ranges||[o[n]]):this.processCell(o.cellValueChanges),t.push(o),!0):!1}processAction(e,t,n){for(const i of e.cellValueChanges){const{rowIndex:r,rowPinned:o,columnId:s}=i,a={rowIndex:r,rowPinned:o},d=gm(this.beans,a);d.displayed&&d.setDataValue(s,t(i),n)}}processRange(e){let t;const n=this.beans.rangeSvc;n.removeAllCellRanges(!0),e.forEach((i,r)=>{if(!i)return;const o=i.startRow,s=i.endRow;r===e.length-1&&(t={rowPinned:o.rowPinned,rowIndex:o.rowIndex,columnId:i.startColumn.getColId()},this.setLastFocusedCell(t));const a={rowStartIndex:o.rowIndex,rowStartPinned:o.rowPinned,rowEndIndex:s.rowIndex,rowEndPinned:s.rowPinned,columnStart:i.startColumn,columns:i.columns};n.addCellRange(a)})}processCell(e){const t=e[0],{rowIndex:n,rowPinned:i}=t,r={rowIndex:n,rowPinned:i},o=gm(this.beans,r),s={rowPinned:t.rowPinned,rowIndex:o.rowIndex,columnId:t.columnId};this.setLastFocusedCell(s)}setLastFocusedCell(e){const{rowIndex:t,columnId:n,rowPinned:i}=e,{colModel:r,focusSvc:o,rangeSvc:s}=this.beans,a=r.getCol(n);if(!a)return;const{scrollFeature:d}=this.gridBodyCtrl;d.ensureIndexVisible(t),d.ensureColumnVisible(a);const h={rowIndex:t,column:a,rowPinned:i};o.setFocusedCell({...h,forceBrowserFocus:!0}),s==null||s.setRangeToCell(h)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{const e=new vb(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const n=new vb(this.cellValueChanges);this.pushActionsToUndoStack(n)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{const e=new vb(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{const t=new eT(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;const{rangeSvc:t,gos:n}=this.beans;t&&Oy(n)?e=new eT(this.cellValueChanges,void 0,void 0,[...t.getCellRanges()]):e=new vb(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1},batchEditingStarted:()=>this.startBigChange("batchEditing"),batchEditingStopped:({changes:e})=>this.stopBigChange("batchEditing",e),bulkEditingStarted:()=>this.startBigChange("bulkEditing"),bulkEditingStopped:({changes:e})=>this.stopBigChange("bulkEditing",e)})}startBigChange(e){this.updateBigChange(e,!0)}updateBigChange(e,t){e==="bulkEditing"?this.bulkEditing=t:this.batchEditing=t}stopBigChange(e,t){if(e==="bulkEditing"&&!this.bulkEditing||e==="batchEditing"&&!this.batchEditing||(this.updateBigChange(e,!1),(t==null?void 0:t.length)===0))return;const n=new vb(t??[]);this.pushActionsToUndoStack(n),this.cellValueChanges=[]}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}},kEe=".ag-cell-inline-editing{border:var(--ag-cell-editing-border)!important;border-radius:var(--ag-border-radius);box-shadow:var(--ag-cell-editing-shadow);padding:0;z-index:1;.ag-cell-edit-wrapper,.ag-cell-editor,.ag-cell-wrapper,:where(.ag-cell-editor) .ag-input-field-input,:where(.ag-cell-editor) .ag-wrapper{height:100%;line-height:normal;min-height:100%;width:100%}&.ag-cell-editing-error{border-color:var(--ag-invalid-color)!important}}:where(.ag-popup-editor) .ag-large-text{background-color:var(--ag-background-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);padding:0}.ag-large-text-input{display:block;height:auto;padding:var(--ag-cell-horizontal-padding)}:where(.ag-rtl .ag-large-text-input) textarea{resize:none}:where(.ag-ltr) .ag-checkbox-edit{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-checkbox-edit{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-row.ag-row-editing-invalid .ag-cell-inline-editing){opacity:.8}.ag-popup-editor{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}",PEe={tag:"div",cls:"ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit",children:[{tag:"ag-checkbox",ref:"eEditor",role:"presentation"}]},DEe=class extends J2{constructor(){super(PEe,[LF]),this.eEditor=Yn}initialiseEditor(e){const t=e.value??void 0,n=this.eEditor;n.setValue(t),n.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(n,{fieldValueChanged:r=>this.setAriaLabel(r.selected)})}getValue(){return this.eEditor.getValue()}focusIn(){this.eEditor.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.getLocaleTextFunc(),n=$2(t,e),i=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eEditor.setInputAriaLabel(`${i} (${n})`)}getValidationElement(e){return e?this.params.eGridCell:this.eEditor.getInputElement()}getValidationErrors(){const{params:e}=this,{getValidationErrors:t}=e,n=this.getValue();return t?t({value:n,internalErrors:null,cellEditorParams:e}):null}},iE=class extends J2{constructor(e){super(),this.cellEditorInput=e,this.eEditor=Yn}initialiseEditor(e){const{cellEditorInput:t}=this;this.setTemplate({tag:"div",cls:"ag-cell-edit-wrapper",children:[t.getTemplate()]},t.getAgComponents());const{eEditor:n}=this,{cellStartedEdit:i,eventKey:r,suppressPreventDefault:o}=e;n.getInputElement().setAttribute("title",""),t.init(n,e);let s,a=!0;i?(this.focusAfterAttached=!0,r===kt.BACKSPACE||r===kt.DELETE?s="":r&&r.length===1?o?a=!1:s=r:(s=t.getStartValue(),r!==kt.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,s=t.getStartValue()),a&&s!=null&&n.setStartValue(s),this.addGuiEventListener("keydown",d=>{const{key:h}=d;(h===kt.PAGE_UP||h===kt.PAGE_DOWN)&&d.preventDefault()})}afterGuiAttached(){var i,r;const e=this.getLocaleTextFunc(),t=this.eEditor;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;Wy()||t.getFocusableElement().focus();const n=t.getInputElement();this.highlightAllOnFocus?n.select():(r=(i=this.cellEditorInput).setCaret)==null||r.call(i)}focusIn(){const{eEditor:e}=this,t=e.getFocusableElement(),n=e.getInputElement();t.focus(),n.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){return this.cellEditorInput.getValidationErrors()}},FEe={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"},MEe=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return FEe}getAgComponents(){return[j7]}init(e,t){var s,a;this.eEditor=e,this.params=t;const{min:n,max:i,step:r,colDef:o}=t;n!=null&&e.setMin(n),i!=null&&e.setMax(i),r!=null&&e.setStep(r),this.includeTime=t.includeTime??((a=(s=this.getDataTypeService())==null?void 0:s.getDateIncludesTimeFlag)==null?void 0:a.call(s,o.cellDataType)),this.includeTime!=null&&e.setIncludeTime(this.includeTime)}getValidationErrors(){const t=this.eEditor.getInputElement().valueAsDate,{params:n}=this,{min:i,max:r,getValidationErrors:o}=n;let s=[];const a=this.getLocaleTextFunc();if(t instanceof Date&&!isNaN(t.getTime())){if(i){const d=i instanceof Date?i:new Date(i);if(t<d){const h=d.toLocaleDateString();s.push(a("minDateValidation",`Date must be after ${h}`,[h]))}}if(r){const d=r instanceof Date?r:new Date(r);if(t>d){const h=d.toLocaleDateString();s.push(a("maxDateValidation",`Date must be before ${h}`,[h]))}}}return s.length||(s=null),o?o({value:t,cellEditorParams:n,internalErrors:s}):s}getValue(){const{eEditor:e,params:t}=this,n=e.getDate();return!Dn(n)&&!Dn(t.value)?t.value:n??null}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return Ad(e,this.includeTime??!1)}},IEe=class extends iE{constructor(){super(new MEe(()=>this.beans.dataTypeSvc,()=>this.getLocaleTextFunc()))}},LEe={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"},OEe=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return LEe}getAgComponents(){return[j7]}init(e,t){var s,a;this.eEditor=e,this.params=t;const{min:n,max:i,step:r,colDef:o}=t;n!=null&&e.setMin(n),i!=null&&e.setMax(i),r!=null&&e.setStep(r),this.includeTime=t.includeTime??((a=(s=this.getDataTypeService())==null?void 0:s.getDateIncludesTimeFlag)==null?void 0:a.call(s,o.cellDataType)),this.includeTime!=null&&e.setIncludeTime(this.includeTime)}getValidationErrors(){const{eEditor:e,params:t}=this,n=e.getInputElement().value,i=this.formatDate(this.parseDate(n??void 0)),{min:r,max:o,getValidationErrors:s}=t;let a=[];if(i){const d=new Date(i),h=this.getLocaleTextFunc();if(r){const m=new Date(r);if(d<m){const v=m.toLocaleDateString();a.push(h("minDateValidation",`Date must be after ${v}`,[v]))}}if(o){const m=new Date(o);if(d>m){const v=m.toLocaleDateString();a.push(h("maxDateValidation",`Date must be before ${v}`,[v]))}}}return a.length||(a=null),s?s({value:this.getValue(),cellEditorParams:t,internalErrors:a}):a}getValue(){const{params:e,eEditor:t}=this,n=this.formatDate(t.getDate());return!Dn(n)&&!Dn(e.value)?e.value:e.parseValue(n??"")}getStartValue(){return Ad(this.parseDate(this.params.value??void 0)??null,this.includeTime??!1)}parseDate(e){const t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):Hc(e)??void 0}formatDate(e){const t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):Ad(e??null,this.includeTime??!1)??void 0}},zEe=class extends iE{constructor(){super(new OEe(()=>this.beans.dataTypeSvc,()=>this.getLocaleTextFunc()))}},NEe={tag:"div",cls:"ag-large-text",children:[{tag:"ag-input-text-area",ref:"eEditor",cls:"ag-large-text-input"}]},BEe=class extends J2{constructor(){super(NEe,[_ve]),this.eEditor=Yn}initialiseEditor(e){const{eEditor:t}=this,{cellStartedEdit:n,eventKey:i,maxLength:r,cols:o,rows:s}=e;this.focusAfterAttached=n,t.getInputElement().setAttribute("title",""),t.setMaxLength(r||200).setCols(o||60).setRows(s||10);let a;n?(this.focusAfterAttached=!0,i===kt.BACKSPACE||i===kt.DELETE?a="":i&&i.length===1?a=i:(a=this.getStartValue(e),i!==kt.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,a=this.getStartValue(e)),a!=null&&t.setValue(a,!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}getStartValue(e){const{value:t}=e;return(t==null?void 0:t.toString())??t}onKeyDown(e){const t=e.key;(t===kt.LEFT||t===kt.UP||t===kt.RIGHT||t===kt.DOWN||e.shiftKey&&t===kt.ENTER)&&e.stopPropagation()}afterGuiAttached(){const{eEditor:e,focusAfterAttached:t,highlightAllOnFocus:n}=this,i=this.getLocaleTextFunc();e.setInputAriaLabel(i("ariaInputEditor","Input Editor")),t&&(e.getFocusableElement().focus(),n&&e.getInputElement().select())}getValue(){const{eEditor:e,params:t}=this,{value:n}=t,i=e.getValue();return!Dn(i)&&!Dn(n)?n:t.parseValue(i)}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){const{params:e}=this,{maxLength:t,getValidationErrors:n}=e,i=this.getLocaleTextFunc(),r=this.getValue();let o=[];return typeof r=="string"&&t!=null&&r.length>t&&o.push(i("maxLengthValidation",`Must be ${t} characters or fewer.`,[String(t)])),o.length||(o=null),n?n({value:r,internalErrors:o,cellEditorParams:e}):o}},GEe={tag:"ag-input-number-field",ref:"eEditor",cls:"ag-cell-editor"},jEe=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return GEe}getAgComponents(){return[Sve]}init(e,t){this.eEditor=e,this.params=t;const{max:n,min:i,precision:r,step:o}=t;n!=null&&e.setMax(n),i!=null&&e.setMin(i),r!=null&&e.setPrecision(r),o!=null&&e.setStep(o);const s=e.getInputElement();t.preventStepping?e.addManagedElementListeners(s,{keydown:this.preventStepping}):t.showStepperButtons&&s.classList.add("ag-number-field-input-stepper")}getValidationErrors(){const{params:e}=this,{min:t,max:n,getValidationErrors:i}=e,o=this.eEditor.getInputElement().valueAsNumber,s=this.getLocaleTextFunc();let a=[];return typeof o=="number"&&(t!=null&&o<t&&a.push(s("minValueValidation",`Must be greater than or equal to ${t}.`,[String(t)])),n!=null&&o>n&&a.push(s("maxValueValidation",`Must be less than or equal to ${n}.`,[String(n)]))),a.length||(a=null),i?i({value:o,cellEditorParams:e,internalErrors:a}):a}preventStepping(e){(e.key===kt.UP||e.key===kt.DOWN)&&e.preventDefault()}getValue(){const{eEditor:e,params:t}=this,n=e.getValue();if(!Dn(n)&&!Dn(t.value))return t.value;let i=t.parseValue(n);if(i==null)return i;if(typeof i=="string"){if(i==="")return null;i=Number(i)}return isNaN(i)?null:i}getStartValue(){return this.params.value}setCaret(){Wy()&&this.eEditor.getInputElement().focus({preventScroll:!0})}},HEe=class extends iE{constructor(){super(new jEe(()=>this.getLocaleTextFunc()))}},VEe={tag:"div",cls:"ag-cell-edit-wrapper",children:[{tag:"ag-select",ref:"eEditor",cls:"ag-cell-editor"}]},$Ee=class extends J2{constructor(){super(VEe,[Lve]),this.eEditor=Yn,this.startedByEnter=!1}wireBeans(e){this.valueSvc=e.valueSvc}initialiseEditor(e){this.focusAfterAttached=e.cellStartedEdit;const{eEditor:t,valueSvc:n,gos:i}=this,{values:r,value:o,eventKey:s}=e;if(vs(r)){an(58);return}this.startedByEnter=s!=null?s===kt.ENTER:!1;let a=!1;r.forEach(v=>{const w={value:v},R=n.formatValue(e.column,null,v),L=R!=null;w.text=L?R:v,t.addOption(w),a=a||o===v}),a?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:d,valueListMaxWidth:h,valueListMaxHeight:m}=e;d!=null&&t.setPickerGap(d),m!=null&&t.setPickerMaxHeight(m),h!=null&&t.setPickerMaxWidth(h),i.get("editType")!=="fullRow"&&this.addManagedListeners(this.eEditor,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eEditor.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eEditor.showPicker()})}focusIn(){this.eEditor.getFocusableElement().focus()}getValue(){return this.eEditor.getValue()}isPopup(){return!1}getValidationElement(){return this.eEditor.getAriaElement()}getValidationErrors(){const{params:e}=this,{values:t,getValidationErrors:n}=e,i=this.getValue();let r=[];if(t&&!t.includes(i)){const o=this.getLocaleTextFunc();r.push(o("invalidSelectionValidation","Invalid selection."))}else r=null;return n?n({value:i,internalErrors:r,cellEditorParams:e}):r}},WEe={tag:"ag-input-text-field",ref:"eEditor",cls:"ag-cell-editor"},UEe=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return WEe}getAgComponents(){return[K2]}init(e,t){this.eEditor=e,this.params=t;const n=t.maxLength;n!=null&&e.setMaxLength(n)}getValidationErrors(){const{params:e}=this,{maxLength:t,getValidationErrors:n}=e,i=this.getValue(),r=this.getLocaleTextFunc();let o=[];return t!=null&&typeof i=="string"&&i.length>t&&o.push(r("maxLengthValidation",`Must be ${t} characters or fewer.`,[String(t)])),o.length||(o=null),n?n({value:i,cellEditorParams:e,internalErrors:o}):o}getValue(){const{eEditor:e,params:t}=this,n=e.getValue();return!Dn(n)&&!Dn(t.value)?t.value:t.parseValue(n)}getStartValue(){const e=this.params;return e.useFormatter||e.column.getColDef().refData?e.formatValue(e.value):e.value}setCaret(){Wy()&&this.eEditor.getInputElement().focus({preventScroll:!0});const e=this.eEditor,t=e.getValue(),n=Dn(t)&&t.length||0;n&&e.getInputElement().setSelectionRange(n,n)}},S6=class extends iE{constructor(){super(new UEe(()=>this.getLocaleTextFunc()))}};function qEe(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}function KEe(e){return e.ctrlsSvc.getScrollFeature().getHScrollPosition()}function dV(e,t,n="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureColumnVisible(t,n),"ensureVisible")}function hV(e,t,n){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureIndexVisible(t,n),"ensureVisible")}function ZEe(e,t,n=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureNodeVisible(t,n),"ensureVisible")}function YEe(e){var t;(t=e.undoRedo)==null||t.undo("api")}function XEe(e){var t;(t=e.undoRedo)==null||t.redo("api")}function JEe(e,t){var n;return(n=e.editModelSvc)==null?void 0:n.getEditRowDataValue(t,{checkSiblings:!0})}function QEe(e){var i;const t=(i=e.editModelSvc)==null?void 0:i.getEditMap(),n=[];return t==null||t.forEach((r,o)=>{const{rowIndex:s,rowPinned:a}=o;r.forEach((d,h)=>{const{editorValue:m,pendingValue:v,sourceValue:w,state:R}=d,L=Dp(d);let O=m??v;O===Sh&&(O=void 0);const z={newValue:O,oldValue:w,state:R,column:h,colId:h.getColId(),colKey:h.getColId(),rowIndex:s,rowPinned:a};(R==="editing"||R==="changed"&&L)&&n.push(z)})}),n}function eRe(e,t=!1){var i;const{editSvc:n}=e;if(n!=null&&n.isBatchEditing()){if(t)for(const r of((i=e.editModelSvc)==null?void 0:i.getEditPositions())??[])r.state==="editing"&&n.revertSingleCellEdit(r);else Ay(e,{persist:!0});Hb(e,void 0,{cancel:t})}else n==null||n.stopEditing(void 0,{cancel:t,source:"edit",forceStop:!t,forceCancel:t})}function tRe(e,t){var i;const n=Fs(e,t);return((i=e.editSvc)==null?void 0:i.isEditing(n))??!1}function nRe(e,t){const{key:n,colKey:i,rowIndex:r,rowPinned:o}=t,{editSvc:s,colModel:a}=e,d=a.getCol(i);if(!d){an(12,{colKey:i});return}const m=gm(e,{rowIndex:r,rowPinned:o||null});if(!m){an(290,{rowIndex:r,rowPinned:o});return}if(!(s!=null&&s.isCellEditable({rowNode:m,column:d},"api")))return;o==null&&hV(e,r),dV(e,i),s==null||s.startEditing({rowNode:m,column:d},{event:n?new KeyboardEvent("keydown",{key:n}):void 0,source:"api"})}function iRe(e){var t;return((t=e.editSvc)==null?void 0:t.validateEdit())||null}function rRe(e){var t;return((t=e.undoRedo)==null?void 0:t.getCurrentUndoStackSize())??0}function oRe(e){var t;return((t=e.undoRedo)==null?void 0:t.getCurrentRedoStackSize())??0}var sRe={tag:"div",cls:"ag-popup-editor",attrs:{tabindex:"-1"}},aRe=class extends FF{constructor(e){super(sRe),this.params=e}postConstruct(){g0(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params,n=i=>{Bk(this.gos,i,t.node,t.column,!0)||t.onKeyDown(i)};this.addManagedElementListeners(e,{keydown:n})}};function lRe(e,{column:t},n,i,r="ui"){var h;if(n instanceof KeyboardEvent&&(n.key===kt.TAB||n.key===kt.ENTER||n.key===kt.F2||n.key===kt.BACKSPACE&&i))return!0;if((n==null?void 0:n.shiftKey)&&((h=e.rangeSvc)==null?void 0:h.getCellRanges().length)!=0)return!1;const s=t==null?void 0:t.getColDef(),a=uRe(e.gos,s),d=n==null?void 0:n.type;return d==="click"&&(n==null?void 0:n.detail)===1&&a===1||d==="dblclick"&&(n==null?void 0:n.detail)===2&&a===2?!0:r==="api"?i??!1:!1}function uRe(e,t){return e.get("suppressClickEdit")===!0?0:e.get("singleClickEdit")===!0||t!=null&&t.singleClickEdit?1:2}function Xk(e,{rowNode:t,column:n},i="ui"){const r=n.getColDef().editable,o=e.editModelSvc;return n.isColumnFunc(t,r)||!!o&&o.hasEdits({rowNode:t,column:n},{withOpenEditor:!0})}function cRe(e,t,n="ui"){const i=Xk(e,t,n);return i===!0||n==="ui"?i:e.colModel.getCols().some(o=>Xk(e,{rowNode:t.rowNode,column:o},n))}var $S=(e,t=!1)=>{if(e!==void 0)return Dp(e)||t&&e.state==="editing"};function fV(e,t,n=!1){var i;return $S((i=e.editModelSvc)==null?void 0:i.getEdit(t),n)}var pV=(e,t,n)=>{if(e)for(let i=0,r=e.length;i<r;++i){const o=e[i];if(o.data&&($S(t==null?void 0:t.getEdit({rowNode:o,column:n}))||$S(t==null?void 0:t.getEdit({rowNode:o.pinnedSibling,column:n})))||pV(o.childrenAfterGroup,t,n))return!0}};function gV(e,t){const{column:n,rowNode:i}=t;return e.gos.get("groupTotalRow")&&!(i!=null&&i.footer)?!1:pV(i==null?void 0:i.childrenAfterGroup,e.editModelSvc,n)}function mV(e,{rowNode:t,column:n}){var i;if(t=t.pinnedSibling,!!t)return $S((i=e.editModelSvc)==null?void 0:i.getEdit({rowNode:t,column:n}))}var dRe=class extends Yt{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}setComp(e){this.cellComp=e,this.applyCellStyles()}applyCellStyles(){var r;const{cellCtrl:e,editSvc:t,beans:n}=this;if(t!=null&&t.isBatchEditing()&&t.isEditing()){const o=fV(n,e)||gV(n,e)||mV(n,e);this.applyBatchingStyle(o)}else this.applyBatchingStyle(!1);const i=!!((r=this.editModelSvc)!=null&&r.getCellValidationModel().hasCellValidation(this.cellCtrl));this.cellComp.toggleCss("ag-cell-editing-error",i)}applyBatchingStyle(e){var t;this.cellComp.toggleCss("ag-cell-editing",e??!1),this.cellComp.toggleCss("ag-cell-batch-edit",(e&&((t=this.editSvc)==null?void 0:t.isBatchEditing()))??!1)}},hRe=class extends Yt{constructor(e,t){super(),this.rowCtrl=e,this.beans=t,this.gos=t.gos,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}applyRowStyles(){var s;const{rowCtrl:e,editModelSvc:t,beans:n}=this;let i=e.rowNode,r=t==null?void 0:t.getEditRow(i);const o=(s=this.editModelSvc)==null?void 0:s.getRowValidationModel().hasRowValidation({rowNode:i});if(!r&&i.pinnedSibling&&(i=i.pinnedSibling,r=t==null?void 0:t.getEditRow(i)),r){const a=Array.from(r.keys()).some(d=>{const h={rowNode:i,column:d};return fV(n,h,!0)||gV(n,h)||mV(n,h)});this.applyStyle(o,a);return}this.applyStyle(o)}applyStyle(e=!1,t=!1){var r,o;const n=((r=this.editSvc)==null?void 0:r.isBatchEditing())??!1,i=this.gos.get("editType")==="fullRow";(o=this.rowCtrl)==null||o.forEachGui(void 0,({rowComp:s})=>{s.toggleCss("ag-row-editing",i&&t),s.toggleCss("ag-row-batch-edit",i&&t&&n),s.toggleCss("ag-row-inline-editing",t),s.toggleCss("ag-row-not-inline-editing",!t),s.toggleCss("ag-row-editing-invalid",i&&t&&e)})}},fRe=({rowModel:e,pinnedRowModel:t,editModelSvc:n},i)=>{const r=new Set;e.forEachNode(o=>i.has(o)&&r.add(o)),t==null||t.forEachPinnedRow("top",o=>i.has(o)&&r.add(o)),t==null||t.forEachPinnedRow("bottom",o=>i.has(o)&&r.add(o));for(const o of i)r.has(o)||n.removeEdits({rowNode:o});return r},pRe=({editModelSvc:e},t,n)=>{var i;for(const r of t)(i=e==null?void 0:e.getEditRow(r))==null||i.forEach((o,s)=>!n.has(s)&&e.removeEdits({rowNode:r,column:s}))},gRe=e=>()=>{const t=new Set(e.colModel.getCols()),n=e.editModelSvc.getEditMap(!0),i=new Set(n.keys());pRe(e,fRe(e,i),t)},mRe=new Set(["undo","redo","paste","bulk","rangeSvc"]),yRe=new Set(["ui","api"]),yV={paste:"api",rangeSvc:"api",fillHandle:"api",cellClear:"api",bulk:"api"},vRe=new Set(Object.keys(yV)),bRe=new Set(["paste","rangeSvc","cellClear","redo","undo"]),WC={cancel:!0,source:"api"},xRe={cancel:!1,source:"api"},hw={checkSiblings:!0},fw={force:!0,suppressFlash:!0},wRe=class extends Yt{constructor(){super(...arguments),this.beanName="editSvc",this.batch=!1,this.stopping=!1,this.committing=!1}postConstruct(){const{beans:e}=this;this.model=e.editModelSvc,this.valueSvc=e.valueSvc,this.rangeSvc=e.rangeSvc,this.addManagedPropertyListener("editType",({currentValue:i})=>{this.stopEditing(void 0,WC),this.createStrategy(i)});const t=gRe(e),n=()=>{const i=this.model.getCellValidationModel().getCellValidationMap().size>0,r=this.model.getRowValidationModel().getRowValidationMap().size>0;return i||r?this.stopEditing(void 0,WC):this.isEditing()&&(this.batch?Hb(e,this.model.getEditPositions()):this.stopEditing(void 0,xRe)),!1};this.addManagedEventListeners({columnPinned:t,columnVisible:t,columnRowGroupChanged:t,rowExpansionStateChanged:t,pinnedRowsChanged:t,displayedRowsChanged:t,sortChanged:n,filterChanged:n,cellFocused:this.onCellFocused.bind(this)})}isBatchEditing(){return this.batch}setBatchEditing(e){e?(this.batch=!0,this.stopEditing(void 0,WC)):(this.stopEditing(void 0,WC),this.batch=!1)}createStrategy(e){const{beans:t,gos:n,strategy:i}=this,r=E6(n,e);if(i){if(i.beanName===r)return i;this.destroyStrategy()}return this.strategy=this.createOptionalManagedBean(t.registry.createDynamicBean(r,!0))}destroyStrategy(){this.strategy&&(this.strategy.destroy(),this.strategy=this.destroyBean(this.strategy))}shouldStartEditing(e,t,n,i="ui"){const r=lRe(this.beans,e,t,n,i);return r&&(this.strategy??(this.strategy=this.createStrategy())),r}shouldStopEditing(e,t,n="ui"){var i;return((i=this.strategy)==null?void 0:i.shouldStop(e,t,n))??null}shouldCancelEditing(e,t,n="ui"){var i;return((i=this.strategy)==null?void 0:i.shouldCancel(e,t,n))??null}validateEdit(){return E_e(this.beans)}isEditing(e,t){return this.model.hasEdits(e,t??hw)}isRowEditing(e,t){return(e&&this.model.hasRowEdits(e,t))??!1}startEditing(e,t){const{startedEdit:n=!0,event:i=null,source:r="ui",ignoreEventKey:o=!1,silent:s}=t;if(this.strategy??(this.strategy=this.createStrategy()),!this.isCellEditable(e,"api"))return;const a=Fs(this.beans,e);if(a&&!a.comp){a.onCompAttachedFuncs.push(()=>this.startEditing(e,t));return}const d=this.shouldStartEditing(e,i,n,r);if(d===!1&&r!=="api"){this.isEditing(e)&&this.stopEditing();return}!this.batch&&this.shouldStopEditing(e,void 0,r)&&!t.continueEditing&&this.stopEditing(void 0,{source:r}),d&&this.batch&&this.dispatchBatchEvent("batchEditingStarted",new Map),this.strategy.start({position:e,event:i,source:r,ignoreEventKey:o,startedEdit:n,silent:s})}stopEditing(e,t){const n=this.prepareStopContext(e,t);if(!n)return!1;this.stopping=!0;let i=!1,{edits:r}=n;try{const o=this.processStopRequest(n);return i||(i=o.res),r=o.edits,this.finishStopEditing({...n,edits:r,params:t,position:e,res:i}),i}finally{this.stopping=!1}}prepareStopContext(e,t){const{event:n,cancel:i,source:r="ui",forceCancel:o,forceStop:s}=t||{};if(vRe.has(r)&&this.batch)return this.bulkRefresh(e),null;const a=this.committing?yV[r]:r;if(!(this.committing||this.isEditing(e)||this.batch&&this.model.hasEdits(e,hw))||!this.strategy||this.stopping)return null;const h=Fs(this.beans,e);h&&(h.onEditorAttachedFuncs=[]);const m=!i&&(!!this.shouldStopEditing(e,n,a)||(this.committing||r==="paste")&&!this.batch)||(s??!1),v=i&&!!this.shouldCancelEditing(e,n,a)||(o??!1);return{cancel:i,cellCtrl:h??void 0,edits:this.model.getEditMap(!0),event:n,forceCancel:o,forceStop:s,position:e,source:r,treatAsSource:a,willCancel:v,willStop:m}}processStopRequest(e){var o;const{event:t,position:n,willCancel:i,willStop:r}=e;return r||i?this.handleStopOrCancel(e):this.shouldHandleMidBatchKey(t,n)?{res:!1,edits:this.handleMidBatchKey(t,n,e)}:(Ay(this.beans,{persist:!0}),this.batch&&((o=this.strategy)==null||o.cleanupEditors(n)),{res:!1,edits:this.model.getEditMap()})}handleStopOrCancel(e){var v;const{beans:t,model:n}=this,{cancel:i,edits:r,event:o,source:s,willCancel:a,willStop:d}=e;Ay(t,{persist:!0,isCancelling:a||i,isStopping:d});const h=n.getEditMap(),m=this.processEdits(h,i,s);(v=this.strategy)==null||v.stop(i,o),this.clearValidationIfNoOpenEditors();for(const w of m)n.clearEditValue(w);this.bulkRefresh(void 0,r);for(const w of n.getEditPositions(h)){const R=Fs(t,w),L=Dp(w);R==null||R.refreshCell({force:!0,suppressFlash:!L})}return{res:d,edits:h}}shouldHandleMidBatchKey(e,t){var n;return e instanceof KeyboardEvent&&this.batch&&!!((n=this.strategy)!=null&&n.midBatchInputsAllowed(t))&&this.isEditing(t,{withOpenEditor:!0})}handleMidBatchKey(e,t,n){var v;const{beans:i,model:r}=this,{cellCtrl:o,edits:s}=n,{key:a}=e,d=a===kt.ENTER,h=a===kt.ESCAPE,m=a===kt.TAB;return d||m||h?(d||m?Ay(i,{persist:!0}):h&&this.revertSingleCellEdit(o),this.batch?(v=this.strategy)==null||v.cleanupEditors():Hb(i,r.getEditPositions(),{event:e,cancel:h}),e.preventDefault(),this.bulkRefresh(t,s,{suppressFlash:!0}),r.getEditMap()):s}finishStopEditing({cellCtrl:e,edits:t,params:n,position:i,res:r,willCancel:o,willStop:s}){const a=this.beans;r&&i&&this.model.removeEdits(i),this.navigateAfterEdit(n,e==null?void 0:e.cellPosition),b_(a),this.clearValidationIfNoOpenEditors(),this.bulkRefresh();const{rowRenderer:d,formula:h}=a;o&&d.refreshRows({rowNodes:Array.from(t.keys())}),this.batch&&(h?h.refreshFormulas(!0):d.refreshRows({suppressFlash:!0,force:!0}),r&&s&&this.dispatchBatchEvent("batchEditingStopped",t))}clearValidationIfNoOpenEditors(){this.model.hasEdits(void 0,{withOpenEditor:!0})||(this.model.getCellValidationModel().clearCellValidationMap(),this.model.getRowValidationModel().clearRowValidationMap())}navigateAfterEdit(e,t){var h;if(!e||!t)return;const{event:n,suppressNavigateAfterEdit:i}=e;if(!(n instanceof KeyboardEvent)||i)return;const{key:o,shiftKey:s}=n,a=this.gos.get("enterNavigatesVerticallyAfterEdit");if(o!==kt.ENTER||!a)return;const d=s?kt.UP:kt.DOWN;(h=this.beans.navigation)==null||h.navigateToNextCell(null,d,t,!1)}processEdits(e,t=!1,n){const i=Array.from(e.keys()),r=this.model.getCellValidationModel().getCellValidationMap().size>0||this.model.getRowValidationModel().getRowValidationMap().size>0,o=[];for(const s of i){const a=e.get(s);for(const d of a.keys()){const h=a.get(d),m={rowNode:s,column:d},v=Dp(h);!t&&v&&!r&&(this.setNodeDataValue(s,d,h.pendingValue,void 0,n)||o.push(m))}}return o}setNodeDataValue(e,t,n,i,r="edit"){const{beans:o}=this,s=Fs(o,{rowNode:e,column:t}),a=yRe.has(r)?"edit":r;s&&(s.suppressRefreshCell=!0),this.committing=!0;const d=e.setDataValue(t,n,a);return this.committing=!1,s&&(s.suppressRefreshCell=!1),i&&(s==null||s.refreshCell(fw)),d}setEditMap(e,t){var i;this.strategy??(this.strategy=this.createStrategy()),(i=this.strategy)==null||i.setEditMap(e,t),this.bulkRefresh();let n=fw;t!=null&&t.forceRefreshOfEditCellsOnly&&(n={...CRe(e),...fw}),this.beans.rowRenderer.refreshCells(n)}dispatchEditValuesChanged({rowNode:e,column:t},n={}){if(!e||!t||!n)return;const{pendingValue:i,sourceValue:r}=n,{rowIndex:o,rowPinned:s,data:a}=e;this.beans.eventSvc.dispatchEvent({type:"cellEditValuesChanged",node:e,rowIndex:o,rowPinned:s,column:t,source:"api",data:a,newValue:i,oldValue:r,value:i,colDef:t.getColDef()})}bulkRefresh(e={},t,n={}){var a;const{beans:i,gos:r}=this,{editModelSvc:o,rowModel:s}=i;Ks(r)&&(e.rowNode&&e.column?this.refCell(e,this.model.getEdit(e),n):t&&((a=o==null?void 0:o.getEditMap(!1))==null||a.forEach((d,h)=>{for(const m of d.keys())this.refCell({rowNode:h,column:m},d.get(m),n)})))}refCell({rowNode:e,column:t},n,i={}){var v,w,R;const{beans:r,gos:o}=this,s=new Set([e]),a=new Set,d=e.pinnedSibling;d&&s.add(d);const h=e.sibling;h&&a.add(h);let m=e.parent;for(;m;)(v=m.sibling)!=null&&v.footer&&o.get("groupTotalRow")||!m.parent&&m.sibling&&o.get("grandTotalRow")?a.add(m.sibling):a.add(m),m=m.parent;for(const L of s)this.dispatchEditValuesChanged({rowNode:L,column:t},n);for(const L of s)(w=Fs(r,{rowNode:L,column:t}))==null||w.refreshCell(i);for(const L of a)(R=Fs(r,{rowNode:L,column:t}))==null||R.refreshCell(i)}stopAllEditing(e=!1,t="ui"){this.isEditing()&&this.stopEditing(void 0,{cancel:e,source:t})}isCellEditable(e,t="ui"){const{rowNode:n}=e,{gos:i,beans:r}=this;if(n.group){if(i.get("treeData")){if(!n.data&&!i.get("enableGroupEdit"))return!1}else if(!i.get("enableGroupEdit"))return!1}const o=E6(i)==="fullRow"?cRe(r,e,t):Xk(r,e,t);return o&&(this.strategy??(this.strategy=this.createStrategy())),o}cellEditingInvalidCommitBlocks(){return this.gos.get("invalidEditValueMode")==="block"}checkNavWithValidation(e,t,n=!0){var i,r,o,s;if(this.hasValidationErrors(e)){const a=Fs(this.beans,e);return this.cellEditingInvalidCommitBlocks()?((i=t==null?void 0:t.preventDefault)==null||i.call(t),n&&(!(a!=null&&a.hasBrowserFocus())&&(a==null||a.focusCell()),(s=(o=(r=a==null?void 0:a.comp)==null?void 0:r.getCellEditor())==null?void 0:o.focusIn)==null||s.call(o)),"block-stop"):(a&&this.revertSingleCellEdit(a),"revert-continue")}return"continue"}revertSingleCellEdit(e,t=!1){var i,r,o,s;const n=Fs(this.beans,e);(i=n==null?void 0:n.comp)!=null&&i.getCellEditor()&&(Hb(this.beans,[e],{silent:!0}),this.model.clearEditValue(e),ax(this.beans,e,{silent:!0}),v0(this.beans),n==null||n.refreshCell(fw),t&&(n==null||n.focusCell(),(s=(o=(r=n==null?void 0:n.comp)==null?void 0:r.getCellEditor())==null?void 0:o.focusIn)==null||s.call(o)))}hasValidationErrors(e){var i;v0(this.beans);const t=Fs(this.beans,e);t&&(t.refreshCell(fw),(i=t.rowCtrl.rowEditStyleFeature)==null||i.applyRowStyles());let n=!1;return e!=null&&e.rowNode?(n||(n=this.model.getRowValidationModel().hasRowValidation({rowNode:e.rowNode})),e.column&&(n||(n=this.model.getCellValidationModel().hasCellValidation({rowNode:e.rowNode,column:e.column})))):(n||(n=this.model.getCellValidationModel().getCellValidationMap().size>0),n||(n=this.model.getRowValidationModel().getRowValidationMap().size>0)),n}moveToNextCell(e,t,n,i="ui"){var a;let r;const o=this.isEditing(),s=o&&this.checkNavWithValidation(void 0,n)==="block-stop";return e instanceof Vb&&o&&(r=(a=this.strategy)==null?void 0:a.moveToNextEditingCell(e,t,n,i,s)),r===null||(r=r||!!this.beans.focusSvc.focusedHeader,r===!1&&!s&&this.stopEditing()),r}getCellDataValue({rowNode:e,column:t},n=!0){if(!e||!t)return;let i=this.model.getEdit({rowNode:e,column:t});const r=e.pinnedSibling;if(r){const s=this.model.getEdit({rowNode:r,column:t});s&&(i=s)}const o=n?(i==null?void 0:i.editorValue)??(i==null?void 0:i.pendingValue):i==null?void 0:i.pendingValue;return o===Sh||!i?(i==null?void 0:i.sourceValue)??this.valueSvc.getValue(t,e,!1,"api"):o}addStopEditingWhenGridLosesFocus(e){b_e(this,this.beans,e)}createPopupEditorWrapper(e){return new aRe(e)}setDataValue(e,t,n){var i;try{if((!this.isEditing()||this.committing)&&!bRe.has(n))return;const{beans:r}=this;this.strategy??(this.strategy=this.createStrategy());const o=this.batch?"ui":this.committing?n??"api":"api";if(!n||mRe.has(n))return x_(r,e,t,n,void 0,{persist:!0}),this.batch?(this.cleanupEditors(),b_(r),this.bulkRefresh(),!0):this.setNodeDataValue(e.rowNode,e.column,t,!0,n);const s=this.model.getEdit(e);if(s){if(s.pendingValue===t)return!1;if(s.sourceValue!==t)return x_(r,e,t,n,void 0,{persist:!0}),this.stopEditing(e,{source:o,suppressNavigateAfterEdit:!0}),!0;if(s.sourceValue===t)return(i=r.editModelSvc)==null||i.removeEdits(e),this.dispatchEditValuesChanged(e,{...s,pendingValue:t}),!0}return x_(r,e,t,n,void 0,{persist:!0}),this.stopEditing(e,{source:o,suppressNavigateAfterEdit:!0}),!0}finally{this.committing=!1}}handleColDefChanged(e){C_e(this.beans,e)}destroy(){this.model.clear(),this.destroyStrategy(),super.destroy()}prepDetailsDuringBatch(e,t){const{model:n}=this;if(!this.batch||!n.hasRowEdits(e.rowNode,hw))return;const{rowNode:r}=e,{compDetails:o,valueToDisplay:s}=t;if(o){const{params:a}=o;return a.data=n.getEditRowDataValue(r,hw),{compDetails:o}}return{valueToDisplay:s}}cleanupEditors(){var e;(e=this.strategy)==null||e.cleanupEditors()}dispatchCellEvent(e,t,n,i){var r;(r=this.strategy)==null||r.dispatchCellEvent(e,t,n,i)}dispatchBatchEvent(e,t){this.eventSvc.dispatchEvent(this.createBatchEditEvent(e,t))}createBatchEditEvent(e,t){return ki(this.gos,{type:e,...e==="batchEditingStopped"?{changes:this.toEventChangeList(t)}:{}})}toEventChangeList(e){return this.model.getEditPositions(e).map(t=>({rowIndex:t.rowNode.rowIndex,rowPinned:t.rowNode.rowPinned,columnId:t.column.getColId(),newValue:t.pendingValue,oldValue:t.sourceValue}))}applyBulkEdit({rowNode:e,column:t},n){var v,w;if(!n||n.length===0)return;const{beans:i,rangeSvc:r,valueSvc:o}=this,{formula:s}=i;Ay(i,{persist:!0});const a=this.model.getEditMap(!0);let d=(w=(v=a.get(e))==null?void 0:v.get(t))==null?void 0:w.pendingValue;this.batch||this.eventSvc.dispatchEvent({type:"bulkEditingStarted"});const h=(s==null?void 0:s.isFormula(d))??!1;n.forEach(R=>{const L=R.columns.some(O=>O==null?void 0:O.isAllowFormula());if(r==null||r.forEachRowInRange(R,O=>{const z=gm(i,O);if(z===void 0)return;const $=a.get(z)??new Map;let U=d;for(const Y of R.columns){if(!Y)continue;const X=!!h&&Y.isAllowFormula();if(this.isCellEditable({rowNode:z,column:Y},"api")){const q=o.getValue(Y,z,!0,"api");let ie=o.parseValue(Y,z??null,U,q);Number.isNaN(ie)&&(ie=null),$.set(Y,{editorValue:void 0,pendingValue:ie,sourceValue:q,state:"changed",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}})}X&&(U=s==null?void 0:s.updateFormulaByOffset({value:U,columnDelta:1}))}$.size>0&&a.set(z,$),h&&L&&(d=s==null?void 0:s.updateFormulaByOffset({value:d,rowDelta:1}))}),this.setEditMap(a),this.batch){this.cleanupEditors(),b_(i),this.bulkRefresh();return}this.committing=!0,this.stopEditing(void 0,{source:"bulk"}),this.committing=!1,this.eventSvc.dispatchEvent({type:"bulkEditingStopped",changes:this.toEventChangeList(a)})}),this.bulkRefresh();const m=Fs(i,{rowNode:e,column:t});m&&m.focusCell(!0)}createCellStyleFeature(e){return new dRe(e,this.beans)}createRowStyleFeature(e){return new hRe(e,this.beans)}setEditingCells(e,t){const{beans:n}=this,{colModel:i,valueSvc:r}=n,o=new Map;for(let{colId:s,column:a,colKey:d,rowIndex:h,rowPinned:m,newValue:v,state:w}of e){const R=s?i.getCol(s):d?i.getCol(d):a;if(!R)continue;const L=gm(n,{rowIndex:h,rowPinned:m});if(!L)continue;const O=r.getValue(R,L,!0,"api");if(!(t!=null&&t.forceRefreshOfEditCellsOnly)&&!Dp({pendingValue:v,sourceValue:O})&&w!=="editing")continue;let z=o.get(L);z||(z=new Map,o.set(L,z)),v===void 0&&(v=Sh),z.set(R,{editorValue:void 0,pendingValue:v,sourceValue:O,state:w??"changed",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}})}this.setEditMap(o,t)}onCellFocused(e){var o;const t=Fs(this.beans,e);if(!t||!this.isEditing(t,hw))return;const n=this.model.getEdit(t);if(!n||!Dp(n))return;const r=this.getLocaleTextFunc()("ariaPendingChange","Pending Change");(o=this.beans.ariaAnnounce)==null||o.announceValue(r,"pendingChange")}allowedFocusTargetOnValidation(e){return Fs(this.beans,e)}};function CRe(e){return{rowNodes:e?Array.from(e.keys()):void 0,columns:e?[...new Set(Array.from(e.values()).flatMap(t=>Array.from(t.keys())))]:void 0}}function E6(e,t){return t??e.get("editType")??"singleCell"}var vV=class extends Yt{postConstruct(){var e,t;this.model=this.beans.editModelSvc,this.editSvc=this.beans.editSvc,this.addManagedEventListeners({cellFocused:(e=this.onCellFocusChanged)==null?void 0:e.bind(this),cellFocusCleared:(t=this.onCellFocusChanged)==null?void 0:t.bind(this)})}clearEdits(e){this.model.clearEditValue(e)}onCellFocusChanged(e){let t;const n=e.previousParams,{editSvc:i,beans:r}=this,o=e.type==="cellFocused"?e.sourceEvent:null;n&&(t=Fs(r,n));const{gos:s,editModelSvc:a}=r,d=e.type==="cellFocusCleared";if(i.isEditing(void 0,{withOpenEditor:!0})){const{column:h,rowIndex:m,rowPinned:v}=e,w={column:h,rowNode:gm(r,{rowIndex:m,rowPinned:v})},R=s.get("invalidEditValueMode")==="block";if(R)return;const L=!R,O=!!(a!=null&&a.getCellValidationModel().hasCellValidation(w)),z=L&&O;(n||d?i.stopEditing(void 0,{cancel:z,source:d&&L?"api":void 0,event:o}):!0)||(i.isBatchEditing()?i.cleanupEditors():i.stopEditing(void 0,{source:"api"}))}t==null||t.refreshCell({suppressFlash:!0,force:!0})}stop(e,t){var r,o;const n=this.model.getEditPositions(),i={all:[],pass:[],fail:[]};for(const s of n){i.all.push(s);const a=this.model.getCellValidationModel().getCellValidation(s);if((((r=a==null?void 0:a.errorMessages)==null?void 0:r.length)??0)>0){i.fail.push(s);continue}i.pass.push(s)}if(e)for(const s of n)BS(this.beans,s,{cancel:e}),this.model.stop(s);else{const s=this.processValidationResults(i);if(s.destroy.length>0)for(const a of s.destroy)BS(this.beans,a,{event:t,cancel:e}),this.model.stop(a);if(s.keep.length>0)for(const a of s.keep){const d=Fs(this.beans,a);(o=this.editSvc)!=null&&o.cellEditingInvalidCommitBlocks()||d&&this.editSvc.revertSingleCellEdit(d)}}return!0}cleanupEditors({rowNode:e}={},t){Ay(this.beans,{persist:!1});const n=this.model.getEditPositions(),i=[];if(e)for(const r of n)r.rowNode!==e&&i.push(r);else for(const r of n)i.push(r);Hb(this.beans,i),b_(this.beans,t)}setFocusOutOnEditor(e){var t,n,i;(i=(n=(t=e.comp)==null?void 0:t.getCellEditor())==null?void 0:n.focusOut)==null||i.call(n)}setFocusInOnEditor(e){const t=e.comp,n=t==null?void 0:t.getCellEditor();if(n!=null&&n.focusIn)n.focusIn();else{const i=this.beans.gos.get("editType")==="fullRow";e.focusCell(i),e.onEditorAttachedFuncs.push(()=>{var r,o;return(o=(r=t==null?void 0:t.getCellEditor())==null?void 0:r.focusIn)==null?void 0:o.call(r)})}}setupEditors(e){const{event:t,ignoreEventKey:n=!1,startedEdit:i,position:r,cells:o=this.model.getEditPositions()}=e,s=t instanceof KeyboardEvent&&!n&&t.key||void 0;w_e(this.beans,o,r,s,t,i)}dispatchCellEvent(e,t,n,i){const r=Fs(this.beans,e);r&&this.eventSvc.dispatchEvent({...r.createEvent(t??null,n),...i})}dispatchRowEvent(e,t,n){if(n)return;const i=QF(this.beans,e);i&&this.eventSvc.dispatchEvent(i.createRowEvent(t))}shouldStop(e,t,n="ui"){const i=this.editSvc.isBatchEditing();return i&&n==="api"?!0:i&&(n==="ui"||n==="edit")?!1:n==="api"?!0:t instanceof KeyboardEvent&&!i?t.key===kt.ENTER:null}shouldCancel(e,t,n="ui"){const i=this.editSvc.isBatchEditing();return!!(t instanceof KeyboardEvent&&!i&&t.key===kt.ESCAPE||i&&n==="api"||n==="api")}setEditMap(e,t){var i;t!=null&&t.update||this.editSvc.stopEditing(void 0,{cancel:!0,source:"api"});const n=[];if(e.forEach((r,o)=>{r.forEach((s,a)=>{s.state==="editing"&&n.push({...s,rowNode:o,column:a})})}),t!=null&&t.update&&(e=new Map([...this.model.getEditMap(),...e])),(i=this.model)==null||i.setEditMap(e),n.length>0){const r=n.at(-1),o=r.pendingValue===Sh?void 0:r.pendingValue;this.start({position:r,event:new KeyboardEvent("keydown",{key:o}),source:"api"});const s=Fs(this.beans,r);s&&this.setFocusInOnEditor(s)}}destroy(){this.cleanupEditors(),super.destroy()}},_Re=class extends vV{constructor(){super(...arguments),this.beanName="fullRow",this.startedRows=[]}shouldStop(e,t,n="ui"){const{rowNode:i}=e||{};if(!QF(this.beans,{rowNode:this.rowNode}))return!0;const o=super.shouldStop({rowNode:this.rowNode},t,n);return o!==null?o:this.rowNode?i!==this.rowNode:!1}midBatchInputsAllowed({rowNode:e}){return e?this.model.hasEdits({rowNode:e}):!1}clearEdits(e){this.model.clearEditValue(e)}start(e){const{position:t,silent:n,startedEdit:i,event:r,ignoreEventKey:o}=e,{rowNode:s}=t;this.rowNode!==s&&super.cleanupEditors(t);const a=this.beans.visibleCols.allCols,d=[],h=[];for(const m of a)m.isCellEditable(s)&&h.push(m);if(h.length!=0){this.dispatchRowEvent({rowNode:s},"rowEditingStarted",n),this.startedRows.push(s);for(const m of h){const v={rowNode:s,column:m};d.push(v),this.model.hasEdits(v)||this.model.start(v)}this.rowNode=s,this.setupEditors({cells:d,position:t,startedEdit:i,event:r,ignoreEventKey:o})}}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stop(e,t){var r;const{rowNode:n}=this;if(n&&!this.model.hasRowEdits(n))return!1;const i=[];if(e||this.model.getEditMap().forEach((o,s)=>{if(!(!o||o.size===0)){for(const a of o.values())if(Dp(a)){i.push(s);break}}}),v0(this.beans),!e&&((r=this.editSvc)==null?void 0:r.checkNavWithValidation({rowNode:n}))==="block-stop")return!1;super.stop(e,t);for(const o of i)this.dispatchRowEvent({rowNode:o},"rowValueChanged");return this.cleanupEditors({rowNode:n},!0),this.rowNode=void 0,!0}onCellFocusChanged(e){const{rowIndex:t}=e,n=e.previousParams;if((n==null?void 0:n.rowIndex)===t||e.sourceEvent instanceof KeyboardEvent)return;const i=Fs(this.beans,n);this.gos.get("invalidEditValueMode")==="block"&&i&&(this.model.getCellValidationModel().getCellValidation(i)||this.model.getRowValidationModel().getRowValidation(i))||super.onCellFocusChanged(e)}cleanupEditors(e={},t){super.cleanupEditors(e,t);for(const n of this.startedRows)this.dispatchRowEvent({rowNode:n},"rowEditingStopped");this.startedRows.length=0}moveToNextEditingCell(e,t,n,i="ui",r=!1){var w,R,L,O;const o=e.cellPosition;let s;this.model.suspend(!0);try{s=(w=this.beans.navigation)==null?void 0:w.findNextCellToFocusOn(o,{backwards:t,startEditing:!0,skipToNextEditableCell:!1})}finally{this.model.suspend(!1)}if(s===!1)return null;if(s==null)return!1;const a=s.cellPosition,d=e.isCellEditable(),h=s.isCellEditable(),m=a&&o.rowIndex===a.rowIndex&&o.rowPinned===a.rowPinned;d&&this.setFocusOutOnEditor(e),this.restoreEditors();const v=this.gos.get("suppressStartEditOnTab");return h&&!r?v?s.focusCell(!0,n):((R=s.comp)!=null&&R.getCellEditor()||ax(this.beans,s,{event:n,cellStartedEdit:!0}),this.setFocusInOnEditor(s),s.focusCell(!1,n)):(h&&r&&this.setFocusInOnEditor(s),s.focusCell(!0,n)),!m&&!r&&((L=this.editSvc)==null||L.stopEditing({rowNode:e.rowNode},{event:n}),this.cleanupEditors(s,!0),v?s.focusCell(!0,n):this.editSvc.startEditing(s,{startedEdit:!0,event:n,source:i,ignoreEventKey:!0})),(O=e.rowCtrl)==null||O.refreshRow({suppressFlash:!0,force:!0}),!0}restoreEditors(){this.model.getEditMap().forEach((e,t)=>e.forEach(({state:n},i)=>{var o;if(n!=="editing")return;const r=Fs(this.beans,{rowNode:t,column:i});r&&!((o=r.comp)!=null&&o.getCellEditor())&&ax(this.beans,r,{silent:!0})}))}destroy(){super.destroy(),this.rowNode=void 0,this.startedRows.length=0}},SRe=class extends vV{constructor(){super(...arguments),this.beanName="singleCell"}shouldStop(e,t,n="ui"){const i=super.shouldStop(e,t,n);if(i!==null)return i;const{rowNode:r,column:o}=e||{};return(!this.rowNode||!this.column)&&r&&o?null:this.rowNode!==r||this.column!==o}midBatchInputsAllowed(e){return this.model.hasEdits(e)}start(e){const{position:t,startedEdit:n,event:i,ignoreEventKey:r}=e;(this.rowNode!==t.rowNode||this.column!==t.column)&&super.cleanupEditors(),this.rowNode=t.rowNode,this.column=t.column,this.model.start(t),this.setupEditors({cells:[t],position:t,startedEdit:n,event:i,ignoreEventKey:r})}dispatchRowEvent(e,t,n){}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stop(e,t){return super.stop(e,t),this.rowNode=void 0,this.column=void 0,!0}onCellFocusChanged(e){const{colModel:t,editSvc:n}=this.beans,{rowIndex:i,column:r,rowPinned:o}=e,s=gm(this.beans,{rowIndex:i,rowPinned:o}),a=Wk(r),d=t.getCol(a),h=e.previousParams;if(h){const m=Wk(h.column);if((h==null?void 0:h.rowIndex)===i&&m===a&&(h==null?void 0:h.rowPinned)===o)return}n!=null&&n.isEditing({rowNode:s,column:d},{withOpenEditor:!0})&&e.type==="cellFocused"||super.onCellFocusChanged(e)}moveToNextEditingCell(e,t,n,i="ui",r=!1){var L,O,z,$,U,Y;const o=this.beans.focusSvc.getFocusedCell();o&&(e=Eb(this.beans,o)??e);const s=e.cellPosition;let a;const d=this.beans.gos.get("editType")==="fullRow";d&&this.model.suspend(!0),r||(e.eGui.focus(),(O=this.editSvc)==null||O.stopEditing(e,{source:(L=this.editSvc)!=null&&L.isBatchEditing()?"ui":"api",event:n}));try{a=(z=this.beans.navigation)==null?void 0:z.findNextCellToFocusOn(s,{backwards:t,startEditing:!0})}finally{d&&this.model.suspend(!1)}if(a===!1)return null;if(a==null)return!1;const h=a.cellPosition,m=e.isCellEditable(),v=a.isCellEditable(),w=h&&s.rowIndex===h.rowIndex&&s.rowPinned===h.rowPinned;m&&!r&&this.setFocusOutOnEditor(e);const R=this.gos.get("suppressStartEditOnTab");if(!w&&!r&&(super.cleanupEditors(a,!0),R?a.focusCell(!0,n):this.editSvc.startEditing(a,{startedEdit:!0,event:n,source:i,ignoreEventKey:!0})),v&&!r){if(a.focusCell(!1,n),R)a.focusCell(!0,n);else if(!(($=a.comp)!=null&&$.getCellEditor())){const X=(U=this.editSvc)==null?void 0:U.isEditing(a,{withOpenEditor:!0});ax(this.beans,a,{event:n,cellStartedEdit:!0,silent:X}),this.setFocusInOnEditor(a),this.cleanupEditors(a)}}else v&&r&&this.setFocusInOnEditor(a),a.focusCell(!0,n);return(Y=e.rowCtrl)==null||Y.refreshRow({suppressFlash:!0,force:!0}),!0}destroy(){super.destroy(),this.rowNode=void 0,this.column=void 0}},qy={moduleName:"EditCore",version:Fn,beans:[v_e,wRe],apiFunctions:{getEditingCells:QEe,getEditRowValues:JEe,getCellEditorInstances:x_e,startEditingCell:nRe,stopEditing:eRe,isEditing:tRe,validateEdit:iRe},dynamicBeans:{singleCell:SRe,fullRow:_Re},dependsOn:[tE,cV],css:[kEe]},ERe={moduleName:"UndoRedoEdit",version:Fn,beans:[TEe],apiFunctions:{undoCellEditing:YEe,redoCellEditing:XEe,getCurrentUndoSize:rRe,getCurrentRedoSize:oRe},dependsOn:[qy]},RRe={moduleName:"TextEditor",version:Fn,userComponents:{agCellEditor:S6,agTextCellEditor:S6},dependsOn:[qy]},ARe={moduleName:"NumberEditor",version:Fn,userComponents:{agNumberCellEditor:{classImp:HEe}},dependsOn:[qy]},TRe={moduleName:"DateEditor",version:Fn,userComponents:{agDateCellEditor:IEe,agDateStringCellEditor:zEe},dependsOn:[qy]},kRe={moduleName:"CheckboxEditor",version:Fn,userComponents:{agCheckboxCellEditor:DEe},dependsOn:[qy]},PRe={moduleName:"SelectEditor",version:Fn,userComponents:{agSelectCellEditor:$Ee},dependsOn:[qy]},DRe={moduleName:"LargeTextEditor",version:Fn,userComponents:{agLargeTextCellEditor:BEe},dependsOn:[qy]},FRe={moduleName:"CustomEditor",version:Fn,dependsOn:[qy]},MRe=class extends Yt{constructor(){super(...arguments),this.beanName="selectionColSvc"}postConstruct(){this.addManagedPropertyListener("rowSelection",e=>{this.onSelectionOptionsChanged(e.currentValue,e.previousValue,zb(e.source))}),this.addManagedPropertyListener("selectionColumnDef",this.updateColumns.bind(this))}addColumns(e){const t=this.columns;t!=null&&(e.list=t.list.concat(e.list),e.tree=t.tree.concat(e.tree),tye(e))}createColumns(e,t){var w,R;const n=()=>{var L;kS(this.beans,(L=this.columns)==null?void 0:L.tree),this.columns=null},i=e.treeDepth,o=(((w=this.columns)==null?void 0:w.treeDepth)??-1)==i,s=this.generateSelectionCols();if(eye(s,((R=this.columns)==null?void 0:R.list)??[])&&o)return;n();const{colGroupSvc:d}=this.beans,h=(d==null?void 0:d.findDepth(e.tree))??0,m=(d==null?void 0:d.balanceTreeForAutoCols(s,h))??[];this.columns={list:s,tree:m,treeDepth:h,map:{}},t(L=>{if(!L)return null;const O=L.filter(z=>!$y(z));return[...s,...O]})}updateColumns(e){var i;const t=zb(e.source),{beans:n}=this;for(const r of((i=this.columns)==null?void 0:i.list)??[]){const o=this.createSelectionColDef(e.currentValue);r.setColDef(o,null,t),vf(n,{state:[iye(o,r.colId)]},t)}}getColumn(e){var t;return((t=this.columns)==null?void 0:t.list.find(n=>Mw(n,e)))??null}getColumns(){var e;return((e=this.columns)==null?void 0:e.list)??null}isSelectionColumnEnabled(){var s,a;const{gos:e,beans:t}=this,n=e.get("rowSelection");if(typeof n!="object"||!t0(e))return!1;const i=(((a=(s=t.autoColSvc)==null?void 0:s.getColumns())==null?void 0:a.length)??0)>0;if(n.checkboxLocation==="autoGroupColumn"&&i)return!1;const r=!!Ib(n),o=u_(n);return r||o}createSelectionColDef(e){const{gos:t}=this,n=e??t.get("selectionColumnDef"),i=t.get("enableRtl"),{rowSpan:r,spanRows:o,...s}=n??{};return{width:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:i?"right":"left",comparator(a,d,h,m){const v=h.isSelected(),w=m.isSelected();return v===w?0:v?1:-1},editable:!1,suppressFillHandle:!0,suppressAutoSize:!0,pinned:null,...s,colId:f7,chartDataType:"excluded"}}generateSelectionCols(){if(!this.isSelectionColumnEnabled())return[];const e=this.createSelectionColDef(),t=e.colId;this.gos.validateColDef(e,t,!0);const n=new S0(e,null,t,!1);return this.createBean(n),[n]}onSelectionOptionsChanged(e,t,n){const i=t&&typeof t!="string"?Ib(t):void 0,r=e&&typeof e!="string"?Ib(e):void 0,o=i!==r,s=t&&typeof t!="string"?u_(t):void 0,a=e&&typeof e!="string"?u_(e):void 0,d=s!==a,h=ES(e),m=ES(t);(o||d||h!==m)&&this.beans.colModel.refreshAll(n)}destroy(){var e;kS(this.beans,(e=this.columns)==null?void 0:e.tree),super.destroy()}refreshVisibility(e,t,n){var d,h;if(!((d=this.columns)!=null&&d.list.length))return;const i=e.length+t.length+n.length;if(i===0)return;const r=this.columns.list[0];if(!r.isVisible())return;const o=()=>{let m;switch(r.pinned){case"left":case!0:m=e;break;case"right":m=n;break;default:m=t}m&&Bp(m,r)};(((h=this.beans.rowNumbersSvc)==null?void 0:h.getColumn(p7))?2:1)===i&&o()}},IRe=':where(.ag-selection-checkbox) .ag-checkbox-input-wrapper{&:before{content:"";cursor:pointer;inset:-8px;position:absolute}}';function LRe(e,t){var s;if(!t.nodes.every(a=>a.rowPinned&&!Q1(a)?(an(59),!1):a.id===void 0?(an(60),!1):!0))return;const{nodes:i,source:r,newValue:o}=t;(s=e.selectionSvc)==null||s.setNodesSelected({nodes:i,source:r??"api",newValue:o})}function ORe(e,t,n="apiSelectAll"){var i;(i=e.selectionSvc)==null||i.selectAllRowNodes({source:n,selectAll:t})}function zRe(e,t,n="apiSelectAll"){var i;(i=e.selectionSvc)==null||i.deselectAllRowNodes({source:n,selectAll:t})}function NRe(e,t="apiSelectAllFiltered"){var n;(n=e.selectionSvc)==null||n.selectAllRowNodes({source:t,selectAll:"filtered"})}function BRe(e,t="apiSelectAllFiltered"){var n;(n=e.selectionSvc)==null||n.deselectAllRowNodes({source:t,selectAll:"filtered"})}function GRe(e,t="apiSelectAllCurrentPage"){var n;(n=e.selectionSvc)==null||n.selectAllRowNodes({source:t,selectAll:"currentPage"})}function jRe(e,t="apiSelectAllCurrentPage"){var n;(n=e.selectionSvc)==null||n.deselectAllRowNodes({source:t,selectAll:"currentPage"})}function HRe(e){var t;return((t=e.selectionSvc)==null?void 0:t.getSelectedNodes())??[]}function VRe(e){var t;return((t=e.selectionSvc)==null?void 0:t.getSelectedRows())??[]}var $Re=class extends vxe{constructor(){super(...arguments),this.beanName="selectionSvc",this.selectedNodes=new Map,this.detailSelection=new Map,this.masterSelectsDetail=!1}postConstruct(){super.postConstruct();const{gos:e}=this;this.mode=RS(e),this.groupSelectsDescendants=u1(e),this.groupSelectsFiltered=TS(e)==="filteredDescendants",this.masterSelectsDetail=p4(e)==="detail",this.addManagedPropertyListeners(["groupSelectsChildren","groupSelectsFiltered","rowSelection"],()=>{const t=u1(e),n=RS(e),i=TS(e)==="filteredDescendants";this.masterSelectsDetail=p4(e)==="detail",(t!==this.groupSelectsDescendants||i!==this.groupSelectsFiltered||n!==this.mode)&&(this.deselectAllRowNodes({source:"api"}),this.groupSelectsDescendants=t,this.groupSelectsFiltered=i,this.mode=n)}),this.addManagedEventListeners({rowSelected:this.onRowSelected.bind(this)})}destroy(){super.destroy(),this.resetNodes()}handleSelectionEvent(e,t,n){if(this.isRowSelectionBlocked(t))return 0;const i=this.inferNodeSelections(t,e.shiftKey,e.metaKey||e.ctrlKey,n);if(i==null)return 0;if(this.selectionCtx.selectAll=!1,"select"in i)return i.reset?this.resetNodes():this.selectRange(i.deselect,!1,n),this.selectRange(i.select,!0,n);{const r=i.checkFilteredNodes?xV(i.node):i.newValue;return this.setNodesSelected({nodes:[i.node],newValue:r,clearSelection:i.clearSelection,keepDescendants:i.keepDescendants,event:e,source:n})}}setNodesSelected({newValue:e,clearSelection:t,suppressFinishActions:n,nodes:i,event:r,source:o,keepDescendants:s=!1}){var h;if(i.length===0)return 0;const{gos:a}=this;if(!t0(a)&&e)return an(132),0;if(i.length>1&&!this.isMultiSelect())return an(130),0;let d=0;for(let m=0;m<i.length;m++){const v=i[m],w=pb(v);if(w.rowPinned&&!Q1(w)){an(59);continue}if(w.id===void 0){an(60);continue}if(e&&v.destroyed)continue;this.groupSelectsFiltered&&w.group&&!a.get("treeData")||this.selectRowNode(w,e,r,o)&&(this.detailSelection.delete(w.id),d++),this.groupSelectsDescendants&&((h=w.childrenAfterGroup)!=null&&h.length)&&(d+=this.selectChildren(w,e,o))}return n||(i.length===1&&o==="api"&&this.selectionCtx.setRoot(pb(i[0])),e&&(t||!this.isMultiSelect())&&(d+=this.clearOtherNodes(pb(i[0]),s,o)),d>0&&(this.updateGroupsFromChildrenSelections(o),this.dispatchSelectionChanged(o))),d}selectRange(e,t,n){let i=0;return e.forEach(r=>{const o=pb(r);if(o.group&&this.groupSelectsDescendants)return;this.selectRowNode(o,t,void 0,n)&&i++}),i>0&&(this.updateGroupsFromChildrenSelections(n),this.dispatchSelectionChanged(n)),i}selectChildren(e,t,n){const i=this.groupSelectsFiltered?e.childrenAfterAggFilter:e.childrenAfterGroup;return i?this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,source:n,nodes:i}):0}getSelectedNodes(){return Array.from(this.selectedNodes.values())}getSelectedRows(){const e=[];return this.selectedNodes.forEach(t=>t.data&&e.push(t.data)),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach((n,i)=>{e(n)&&t.set(i,n)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsDescendants)return!1;const{gos:n,rowModel:i}=this.beans;if(!Ks(n))return!1;const r=i.rootNode;if(!r)return!1;t||(t=new f1(!0,r),t.active=!1);let o=!1;return t.forEachChangedNodeDepthFirst(s=>{if(s!==r){const a=this.calculateSelectedFromChildren(s);o=this.selectRowNode(s,a===null?!1:a,void 0,e)||o}}),o}clearOtherNodes(e,t,n){const i=new Map;let r=0;return this.selectedNodes.forEach(o=>{const s=o.id==e.id;if((t?!URe(e,o):!0)&&!s){const d=this.selectedNodes.get(o.id);r+=this.setNodesSelected({nodes:[d],newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:n}),this.groupSelectsDescendants&&o.parent&&i.set(o.parent.id,o.parent)}}),i.forEach(o=>{const s=this.calculateSelectedFromChildren(o);this.selectRowNode(o,s===null?!1:s,void 0,n)}),r}onRowSelected(e){const t=e.node;this.groupSelectsDescendants&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}createDaemonNode(e){if(!e.id)return;const t=new Ny(this.beans);return t.id=e.id,t.data=e.data,t.__selected=e.__selected,t.level=e.level,t}syncInOldRowNode(e,t){t&&e.id!==t.id&&this.selectedNodes.get(t.id)==e&&this.selectedNodes.set(t.id,t)}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.__selected=!0,this.selectedNodes.set(e.id,e)):e.__selected=!1}reset(e){const t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes.forEach(e=>{this.selectRowNode(e,!1)}),this.selectedNodes.clear()}getBestCostNodeSelection(){const{gos:e,rowModel:t}=this.beans;if(!Ks(e))return;const n=t.getTopLevelNodes();if(n===null)return;const i=[];function r(o){for(let s=0,a=o.length;s<a;s++){const d=o[s];d.isSelected()?i.push(d):d.group&&d.childrenAfterGroup&&r(d.childrenAfterGroup)}}return r(n),i}isEmpty(){return this.getSelectionCount()===0}deselectAllRowNodes({source:e,selectAll:t}){const n=Ks(this.gos);let i=!1;const r=o=>{const s=this.selectRowNode(pb(o),!1,void 0,e);i||(i=s)};if(t==="currentPage"||t==="filtered"){if(!n){Do(102);return}this.getNodesToSelect(t).forEach(r)}else this.selectedNodes.forEach(r),this.reset(e);if(this.selectionCtx.selectAll=!1,n&&this.groupSelectsDescendants){const o=this.updateGroupsFromChildrenSelections(e);i||(i=o)}i&&this.dispatchSelectionChanged(e)}getSelectedCounts(e){let t=0,n=0;return this.getNodesToSelect(e).forEach(i=>{this.groupSelectsDescendants&&i.group||(i.isSelected()?t++:i.selectable&&n++)}),{selectedCount:t,notSelectedCount:n}}getSelectAllState(e){const{selectedCount:t,notSelectedCount:n}=this.getSelectedCounts(e);return bV(t,n)??null}hasNodesToSelect(e){return this.getNodesToSelect(e).filter(t=>t.selectable).length>0}getNodesToSelect(e){if(!this.canSelectAll())return[];const t=[],n=r=>t.push(r);if(e==="currentPage")return this.forEachNodeOnPage(r=>{if(!r.group){n(r);return}if(!r.expanded&&!r.footer){const o=s=>{var a;n(s),(a=s.childrenAfterFilter)==null||a.forEach(o)};o(r);return}this.groupSelectsDescendants||n(r)}),t;const i=this.beans.rowModel;return e==="filtered"?(i.forEachNodeAfterFilter(n),t):(i.forEachNode(n),t)}forEachNodeOnPage(e){const{pageBounds:t,rowModel:n}=this.beans,i=t.getFirstRow(),r=t.getLastRow();for(let o=i;o<=r;o++){const s=n.getRow(o);s&&e(s)}}selectAllRowNodes(e){const{gos:t,selectionCtx:n}=this;if(!t0(t)){an(132);return}if(Ome(t)&&!AS(t)){an(130);return}if(!this.canSelectAll())return;const{source:i,selectAll:r}=e;let o=!1;if(this.getNodesToSelect(r).forEach(s=>{const a=this.selectRowNode(pb(s),!0,void 0,i);o||(o=a)}),n.selectAll=!0,Ks(t)&&this.groupSelectsDescendants){const s=this.updateGroupsFromChildrenSelections(i);o||(o=s)}o&&this.dispatchSelectionChanged(i)}getSelectionState(){return this.isEmpty()?null:Array.from(this.selectedNodes.keys())}setSelectionState(e,t,n){if(e||(e=[]),!Array.isArray(e)){Do(103);return}const i=new Set(e),r=[];this.beans.rowModel.forEachNode(o=>{i.has(o.id)&&r.push(o)}),n&&this.resetNodes(),this.setNodesSelected({newValue:!0,nodes:r,source:t})}canSelectAll(){return Ks(this.beans.gos)}updateSelectable(e){var d;const{gos:t,rowModel:n}=this.beans;if(!t0(t))return;const i="selectableChanged",r=e!==void 0,o=Ks(t)&&this.groupSelectsDescendants,s=[],a=h=>{var v;if(r&&!h.group)return;if(o&&h.group){const w=((v=h.childrenAfterGroup)==null?void 0:v.some(R=>R.selectable))??!1;this.setRowSelectable(h,w,!0);return}!this.updateRowSelectable(h,!0)&&h.isSelected()&&s.push(h)};if(o){if(e===void 0){const h=n.rootNode;e=h?new f1(!1,h):void 0}e==null||e.forEachChangedNodeDepthFirst(a,!r,!r)}else n.forEachNode(a);s.length&&this.setNodesSelected({nodes:s,newValue:!1,source:i}),!r&&o&&((d=this.updateGroupsFromChildrenSelections)==null||d.call(this,i))}updateSelectableAfterGrouping(e){var t;this.updateSelectable(e),this.groupSelectsDescendants&&((t=this.updateGroupsFromChildrenSelections)!=null&&t.call(this,"rowGroupChanged",e))&&this.dispatchSelectionChanged("rowGroupChanged")}refreshMasterNodeState(e,t){var o,s;if(!this.masterSelectsDetail)return;const n=(s=(o=e.detailNode)==null?void 0:o.detailGridInfo)==null?void 0:s.api;if(!n)return;const i=WRe(n);if(e.isSelected()!==i&&this.selectRowNode(e,i,t,"masterDetail")&&this.dispatchSelectionChanged("masterDetail"),!i){const a=this.detailSelection.get(e.id)??new Set;for(const d of n.getSelectedNodes())a.add(d.id);this.detailSelection.set(e.id,a)}}setDetailSelectionState(e,t,n){if(this.masterSelectsDetail){if(!AS(t)){an(269);return}switch(e.isSelected()){case!0:{n.selectAll();break}case!1:{n.deselectAll();break}case void 0:{const i=this.detailSelection.get(e.id);if(i){const r=[];for(const o of i){const s=n.getRowNode(o);s&&r.push(s)}n.setNodesSelected({nodes:r,newValue:!0,source:"masterDetail"})}break}}}}dispatchSelectionChanged(e){this.eventSvc.dispatchEvent({type:"selectionChanged",source:e,selectedNodes:this.getSelectedNodes(),serverSideState:null})}};function pb(e){return Q1(e)?e.pinnedSibling:e.footer?e.sibling:e}function WRe(e){let t=0,n=0;return e.forEachNode(i=>{i.isSelected()?t++:i.selectable&&n++}),bV(t,n)}function bV(e,t){if(e===0&&t===0)return!1;if(!(e>0&&t>0))return e>0}function URe(e,t){let n=t.parent;for(;n;){if(n===e)return!0;n=n.parent}return!1}function xV(e){var i;const t=e.isSelected()===!1,n=((i=e.childrenAfterFilter)==null?void 0:i.some(xV))??!1;return t||n}var qRe={moduleName:"SharedRowSelection",version:Fn,beans:[MRe],css:[IRe],apiFunctions:{setNodesSelected:LRe,selectAll:ORe,deselectAll:zRe,selectAllFiltered:NRe,deselectAllFiltered:BRe,selectAllOnCurrentPage:GRe,deselectAllOnCurrentPage:jRe,getSelectedNodes:HRe,getSelectedRows:VRe}},KRe={moduleName:"RowSelection",version:Fn,rowModels:["clientSide","infinite","viewport"],beans:[$Re],dependsOn:[qRe]};function ZRe(e){var t;(t=e.expansionSvc)==null||t.expandAll(!0)}function YRe(e){var t;(t=e.expansionSvc)==null||t.expandAll(!1)}function wV(e){var t;(t=e.rowModel)==null||t.onRowHeightChanged()}function CV(e){var t,n;if((t=e.rowAutoHeight)!=null&&t.active){an(3);return}(n=e.rowModel)==null||n.resetRowHeights()}function XRe(e,t,n){var r,o;const i=KSe(e);if(i){if(((r=e.rowGroupColsSvc)==null?void 0:r.columns.length)===0){if(t<0){Do(238);return}i.setRowCount(t,n);return}Do(28);return}(o=eE(e))==null||o.setRowCount(t,n)}function JRe(e){var t;return Px(e.gos)?e.rowModel.getBlockStates():((t=e.rowNodeBlockLoader)==null?void 0:t.getBlockState())??{}}function QRe(e){return e.rowModel.isLastRowIndexKnown()}var eAe={moduleName:"CsrmSsrmSharedApi",version:Fn,apiFunctions:{expandAll:ZRe,collapseAll:YRe}},tAe={moduleName:"RowModelSharedApi",version:Fn,apiFunctions:{onRowHeightChanged:wV,resetRowHeights:CV}},nAe={moduleName:"SsrmInfiniteSharedApi",version:Fn,apiFunctions:{setRowCount:XRe,getCacheBlockState:JRe,isLastRowIndexKnown:QRe}},iAe=class extends Yt{constructor(){super(...arguments),this.beanName="alignedGridsSvc",this.consuming=!1}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[];const t=typeof e=="function";return typeof e=="function"&&(e=e()),e.map(i=>{var o;if(!i){Do(18),t||Do(20);return}if(this.isGridApi(i))return i;const r=i;return"current"in r?(o=r.current)==null?void 0:o.api:(r.api||Do(19),r.api)}).filter(i=>!!i&&!i.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){const e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:t})=>this.onColumnEvent(t),alignedGridScroll:({event:t})=>this.onScrollEvent(t)})}fireEvent(e){if(!this.consuming)for(const t of this.getAlignedGridApis())t.isDestroyed()||t.dispatchEvent(e)}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){e.direction==="horizontal"&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent(()=>{this.beans.ctrlsSvc.getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}extractDataFromEvent(e,t){const n=[];return e.columns?e.columns.forEach(i=>{n.push(t(i))}):e.column&&n.push(t(e.column)),n}getMasterColumns(e){return this.extractDataFromEvent(e,t=>t)}getColumnIds(e){return this.extractDataFromEvent(e,t=>t.getColId())}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{this.processColumnEvent(e);break}case"columnGroupOpened":{this.processGroupOpenedEvent(e);break}case"columnPivotChanged":an(21);break}})}processGroupOpenedEvent(e){const{colGroupSvc:t}=this.beans;if(t)for(const n of e.columnGroups){let i=null;n&&(i=t.getProvidedColGroup(n.getGroupId())),!(n&&!i)&&t.setColumnGroupOpened(i,n.isExpanded(),"alignedGridChanged")}}processColumnEvent(e){const t=e.column;let n=null;const i=this.beans,{colResize:r,ctrlsSvc:o,colModel:s}=i;if(t&&(n=s.getColDefCol(t.getColId())),t&&!n)return;const a=this.getMasterColumns(e);switch(e.type){case"columnMoved":{const v=e.api.getColumnState().map(w=>({colId:w.colId}));vf(i,{state:v,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{const v=e.api.getColumnState().map(w=>({colId:w.colId,hide:w.hide}));vf(i,{state:v},"alignedGridChanged")}break;case"columnPinned":{const v=e.api.getColumnState().map(w=>({colId:w.colId,pinned:w.pinned}));vf(i,{state:v},"alignedGridChanged")}break;case"columnResized":{const m=e,v={};for(const w of a)v[w.getId()]={key:w.getColId(),newWidth:w.getActualWidth()};for(const w of m.flexColumns??[])v[w.getId()]&&delete v[w.getId()];r==null||r.setColumnWidths(Object.values(v),!1,m.finished,"alignedGridChanged");break}}const h=o.getGridBodyCtrl().isVerticalScrollShowing();for(const m of this.getAlignedGridApis())m.setGridOption("alwaysShowVerticalScroll",h)}},rAe={moduleName:"AlignedGrids",version:Fn,beans:[iAe],dependsOn:[kH]},oAe=class extends Yt{constructor(e){super(),this.rootNode=e,this.nextId=0,this.allNodesMap={},R6(e)}getRowNode(e){return this.allNodesMap[e]}setNewRowData(e){var a;this.dispatchRowDataUpdateStarted(e),this.destroyAllNodes();const t=R6(this.rootNode),n=new Array(e.length);t._leafs=n;let i=0;const r=(a=this.beans.groupStage)==null?void 0:a.getNestedDataGetter(),o=r?new Set:null,s=(d,h)=>{const m=d.level+1;for(let v=0,w=h.length;v<w;++v){const R=h[v];if(!R)continue;const L=this.createRowNode(R,m);if(L.sourceRowIndex=i,n[i++]=L,o&&!o.has(R)){o.add(R),L.treeParent=d;const O=r(R);O&&s(L,O)}}};s(t,e),n.length=i}destroyAllNodes(){const{selectionSvc:e,pinnedRowModel:t,groupStage:n}=this.beans;e==null||e.reset("rowDataChanged"),t!=null&&t.isManual()&&t.reset(),n==null||n.clearNonLeafs();const i=this.rootNode._leafs;if(i)for(let r=0,o=i.length;r<o;++r)i[r]._destroy(!1);this.allNodesMap=Object.create(null),this.nextId=0}setImmutableRowData(e,t){var $;const{rootNode:n,gos:i}=this;this.dispatchRowDataUpdateStarted(t);const r=ix(i),o=e.changedRowNodes,{adds:s,updates:a}=o,d=new Set,h=[],m=($=this.beans.groupStage)==null?void 0:$.getNestedDataGetter();let v=i.get("suppressMaintainUnsortedOrder")?void 0:!1,w=-1,R=!1;const L=(U,Y)=>{if(!v&&v!==void 0){const X=U.sourceRowIndex;v=X<=w,w=X}U.data!==Y&&(U.updateData(Y),s.has(U)||a.add(U),!U.selectable&&U.isSelected()&&h.push(U))},O=(U,Y,X)=>{for(let q=0,ie=Y.length;q<ie;++q){const re=Y[q];if(!re)continue;let J=this.getRowNode(r({data:re,level:X}));if(J?(L(J,re),R||(R=!!m&&J.treeParent!==U)):(J=this.createRowNode(re,X),s.add(J)),!m||d.has(J)){d.add(J);continue}d.add(J),J.treeParent=U;const ne=m(re);ne&&O(J,ne,X+1)}};O(n,t,0);const z=this.deleteUnusedNodes(d,o,h,!!e.animate)||v||s.size>0;if(z){const U=n._leafs??(n._leafs=[]);v===void 0?cAe(U,d,o):uAe(U,d)&&(o.reordered=!0)}(z||R||a.size)&&(e.rowDataUpdated=!0,this.deselect(h))}deleteUnusedNodes(e,{removals:t},n,i){const r=this.rootNode._leafs;for(let o=0,s=r.length;o<s;o++){const a=r[o];e.has(a)||this.destroyNode(a,i)&&(t.push(a),a.isSelected()&&n.push(a))}return t.length>0}updateRowData(e,t,n){var d;if(this.dispatchRowDataUpdateStarted(e.add),(d=this.beans.groupStage)!=null&&d.getNestedDataGetter())return an(268),{remove:[],update:[],add:[]};const i=[],r=ix(this.gos),o=this.executeRemove(r,e,t,i,n),s=this.executeUpdate(r,e,t,i),a=this.executeAdd(e,t);return this.deselect(i),{remove:o,update:s,add:a}}executeRemove(e,{remove:t},{adds:n,updates:i,removals:r},o,s){const a=this.rootNode._leafs,d=a==null?void 0:a.length,h=t==null?void 0:t.length;if(!h||!d)return[];let m=0,v=d,w=0;const R=new Array(h);for(let L=0;L<h;++L){const O=this.lookupNode(e,t[L]);if(!O)continue;const z=O.sourceRowIndex;z<v&&(v=z),z>w&&(w=z),R[m++]=O,this.destroyNode(O,s)&&(O.isSelected()&&o.push(O),n.delete(O)||(i.delete(O),r.push(O)))}return R.length=m,m&&lAe(a,v,w),R}executeUpdate(e,{update:t},{adds:n,updates:i},r){const o=t==null?void 0:t.length;if(!o)return[];const s=new Array(o);let a=0;for(let d=0;d<o;d++){const h=t[d],m=this.lookupNode(e,h);m&&(m.updateData(h),!m.selectable&&m.isSelected()&&r.push(m),s[a++]=m,n.has(m)||i.add(m))}return s.length=a,s}executeAdd(e,t){var n;const i=(n=this.rootNode)._leafs??(n._leafs=[]),r=i.length,o=e.add,s=o==null?void 0:o.length;if(!s)return[];const a=r+s;let d=this.sanitizeAddIndex(i,e.addIndex);if(d<r){for(let v=r-1,w=a-1;v>=d;--v){const R=i[v];R.sourceRowIndex=w,i[w--]=R}t.reordered=!0}i.length=a;const h=new Array(s),m=t.adds;for(let v=0;v<s;v++){const w=this.createRowNode(o[v],0);m.add(w),w.sourceRowIndex=d,i[d]=w,h[v]=w,d++}return h}dispatchRowDataUpdateStarted(e){this.eventSvc.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e!=null&&e.length?e[0]:null})}deselect(e){var i;const t="rowDataChanged",n=this.beans.selectionSvc;e.length&&(n==null||n.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t})),(i=n==null?void 0:n.updateGroupsFromChildrenSelections)==null||i.call(n,t),e.length&&this.eventSvc.dispatchEvent({type:"selectionChanged",source:t,selectedNodes:(n==null?void 0:n.getSelectedNodes())??null,serverSideState:null})}createRowNode(e,t){const n=new Ny(this.beans);n.parent=this.rootNode,n.level=t,n.group=!1,n.expanded=!1,n.setDataAndId(e,String(this.nextId++));const i=n.id,r=this.allNodesMap;return r[i]&&an(2,{nodeId:i}),r[i]=n,n}destroyNode(e,t){var o;if(!e._destroy(t))return!1;const n=e.id,i=this.allNodesMap;i[n]===e&&delete i[n];const r=e.pinnedSibling;return r&&((o=this.beans.pinnedRowModel)==null||o.pinRow(r,null)),!0}lookupNode(e,t){if(!e)return aAe(this.rootNode._leafs,t);const n=e({data:t,level:0}),i=this.allNodesMap[n];return i||(Do(4,{id:n}),null)}sanitizeAddIndex(e,t){const n=e.length;if(typeof t!="number"||t<0||t>=n||Number.isNaN(t))return n;t=Math.ceil(t);const i=this.gos;return t>0&&i.get("treeData")&&i.get("getDataPath")&&(t=sAe(e,t)),t}},sAe=(e,t)=>{for(let n=0,i=e.length;n<i;n++){const r=e[n];if((r==null?void 0:r.rowIndex)==t-1)return n+1}return t},R6=e=>{var s;e.group=!0,e.level=-1,e.id="ROOT_NODE_ID",((s=e._leafs)==null?void 0:s.length)!==0&&(e._leafs=[]);const t=[],n=[],i=[],r=[];e.childrenAfterGroup=t,e.childrenAfterSort=n,e.childrenAfterAggFilter=i,e.childrenAfterFilter=r;const o=e.sibling;return o&&(o.childrenAfterGroup=t,o.childrenAfterSort=n,o.childrenAfterAggFilter=i,o.childrenAfterFilter=r,o.childrenMapped=e.childrenMapped),e.updateHasChildren(),e},aAe=(e,t)=>{if(e)for(let n=0,i=e.length;n<i;n++){const r=e[n];if(r.data===t)return r}return Do(5,{data:t}),null},lAe=(e,t,n)=>{t=Math.max(0,t);for(let i=t,r=e.length;i<r;++i){const o=e[i];i<=n&&o.destroyed||(o.sourceRowIndex=t,e[t++]=o)}e.length=t},uAe=(e,t)=>{const n=t.size;e.length=n;let i=0,r=!1,o=!1;for(const s of t){const a=s.sourceRowIndex;a===i?o||(o=r):(a>=0?o=!0:r=!0,s.sourceRowIndex=i,e[i]=s),++i}return o},cAe=(e,t,{adds:n})=>{const i=e.length,r=t.size;r>i&&(e.length=r);let o=0;for(let s=0;s<i;++s){const a=e[s];a.destroyed||(o!==s&&(a.sourceRowIndex=o,e[o]=a),++o)}for(const s of n)s.sourceRowIndex<0&&(s.sourceRowIndex=o,e[o++]=s);e.length=o},_V=e=>{const t=e.childrenAfterSort,n=e.sibling;if(n&&(n.childrenAfterSort=t),!!t)for(let i=0,r=t.length-1;i<=r;i++){const o=t[i],s=i===0,a=i===r;o.firstChild!==s&&(o.firstChild=s,o.dispatchRowEvent("firstChildChanged")),o.lastChild!==a&&(o.lastChild=a,o.dispatchRowEvent("lastChildChanged")),o.childIndex!==i&&(o.childIndex=i,o.dispatchRowEvent("childIndexChanged"))}},dAe=class extends Yt{constructor(){super(...arguments),this.beanName="sortStage",this.step="sort",this.refreshProps=["postSortRows","groupDisplayType","accentedSort"]}execute(e,t){const n=this.beans.sortSvc.getSortOptions(),i=n.length>0&&!!t&&this.gos.get("deltaSort"),{gos:r,colModel:o,rowGroupColsSvc:s,rowNodeSorter:a,rowRenderer:d,showRowGroupCols:h}=this.beans,m=r.get("groupMaintainOrder"),v=o.getCols().some(U=>U.isRowGroupActive()),w=s==null?void 0:s.columns,R=o.isPivotMode(),L=r.getCallback("postSortRows");let O=!1,z;const $=U=>{var ie,re;const Y=R&&U.leafGroup;let X=m&&v&&!U.leafGroup;X&&(z??(z=this.shouldSortContainsGroupCols(n)),X&&(X=!z));let q=null;if(X){let J=!1;if(w){const ne=U.level+1;ne<w.length&&(J=w[ne].wasSortExplicitlyRemoved)}J||(q=pAe(U))}else!n.length||Y||(i&&t?q=hAe(a,U,t,e,n):q=a.doFullSort(U.childrenAfterAggFilter,n));if(q||(q=((ie=U.childrenAfterAggFilter)==null?void 0:ie.slice(0))??[]),O||(O=((re=U.childrenAfterSort)==null?void 0:re[0])!==q[0]),U.childrenAfterSort=q,_V(U),L){const J={nodes:U.childrenAfterSort};L(J)}};if(e==null||e.forEachChangedNodeDepthFirst($),O&&r.get("groupHideOpenParents")){const U=h==null?void 0:h.columns;U!=null&&U.length&&d.refreshCells({columns:U,force:!0})}}shouldSortContainsGroupCols(e){const t=e.length;if(!t)return!1;if(Ep(this.gos)){for(let n=0;n<t;++n){const i=e[n].column;if(i.isPrimary()&&i.isRowGroupActive())return!0}return!1}for(let n=0;n<t;++n)if(e[n].column.getColDef().showRowGroup)return!0;return!1}},hAe=(e,t,n,i,r)=>{const o=t.childrenAfterAggFilter,s=t.childrenAfterSort;if(!s)return e.doFullSort(o,r);const a=new Set,d=[],{updates:h,adds:m}=n;for(let w=0,R=o.length;w<R;++w){const L=o[w];h.has(L)||m.has(L)||i&&!i.canSkip(L)?d.push({currentPos:d.length,rowNode:L}):a.add(L)}const v=s.filter(w=>a.has(w)).map((w,R)=>({currentPos:R,rowNode:w}));return d.sort((w,R)=>e.compareRowNodes(r,w,R)),fAe(e,r,d,v)},fAe=(e,t,n,i)=>{let r=0,o=0;const s=n.length,a=i.length,d=new Array(s+a);let h=0;for(;r<s&&o<a;){const m=n[r],v=i[o];e.compareRowNodes(t,m,v)<0?(d[h++]=m.rowNode,++r):(d[h++]=v.rowNode,++o)}for(;r<s;)d[h++]=n[r++].rowNode;for(;o<a;)d[h++]=i[o++].rowNode;return d},pAe=e=>{const t=e.childrenAfterSort,n=e.childrenAfterAggFilter,i=t==null?void 0:t.length,r=n==null?void 0:n.length;if(!i||!r)return null;const o=new Array(r),s=new Set;for(let d=0;d<r;++d)s.add(n[d]);let a=0;for(let d=0;d<i;++d){const h=t[d];s.delete(h)&&(o[a++]=h)}if(s.size===0&&a===i)return t;for(const d of s)o[a++]=d;return o.length=a,o},gAe=class extends Yt{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null,this.rowCountReady=!1,this.nodeManager=void 0,this.rowsToDisplay=[],this.formulaRows=[],this.rowDataUpdatedPending=!1,this.asyncTransactions=null,this.asyncTransactionsTimer=0,this.started=!1,this.refreshingModel=!1,this.rowNodesCountReady=!1,this.stages=null,this.stagesRefreshProps=new Map,this.onRowHeightChanged_debounced=Ll(this,this.onRowHeightChanged.bind(this),100)}postConstruct(){const e=this.beans,t=new Ny(e);this.rootNode=t,this.nodeManager=this.createBean(new oAe(t));const n=()=>{var i;(i=this.beans.groupStage)==null||i.invalidateGroupCols(),this.refreshModel({step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame")})};this.addManagedEventListeners({newColumnsLoaded:n,columnRowGroupChanged:n,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:()=>this.refreshModel({step:"pivot"}),columnPivotModeChanged:()=>this.refreshModel({step:"group"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),stylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this),rowExpansionStateChanged:this.onRowGroupOpened.bind(this)}),this.addPropertyListeners()}addPropertyListeners(){const{beans:e,stagesRefreshProps:t}=this,n=[e.groupStage,e.filterStage,e.pivotStage,e.aggStage,e.sortStage,e.filterAggStage,e.flattenStage].filter(i=>!!i);this.stages=n;for(let i=n.length-1;i>=0;--i){const r=n[i];for(const o of r.refreshProps)t.set(o,i)}this.addManagedPropertyListeners([...t.keys(),"rowData"],i=>{var o;const r=(o=i.changeSet)==null?void 0:o.properties;r&&this.onPropChange(r)}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.started=!0,this.rowNodesCountReady?this.refreshModel({step:"group",rowDataUpdated:!0,newData:!0}):this.setInitialData()}setInitialData(){this.gos.get("rowData")&&this.onPropChange(["rowData"])}ensureRowHeightsValid(e,t,n,i){let r,o=!1;do{r=!1;const s=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),d=Math.max(s,n),h=Math.min(a,i);for(let m=d;m<=h;m++){const v=this.getRow(m);if(v.rowHeightEstimated){const w=Ly(this.beans,v);v.setRowHeight(w.height),r=!0,o=!0}}r&&this.setRowTopAndRowIndex()}while(r);return o}onPropChange(e){const{nodeManager:t,gos:n,beans:i}=this,r=i.groupStage;if(!t)return;const o=new Set(e),s=r==null?void 0:r.onPropChange(o);let a;o.has("rowData")?a=n.get("rowData"):s&&(a=r==null?void 0:r.extractData()),a&&!Array.isArray(a)&&(a=null,an(1));const d={step:"nothing",changedProps:o};a&&(!s&&!this.isEmpty()&&a.length>0&&n.exists("getRowId")&&!n.get("resetRowDataOnUpdate")?(d.keepRenderedRows=!0,d.animate=!n.get("suppressAnimationFrame"),d.changedRowNodes=new y_,t.setImmutableRowData(d,a)):(d.rowDataUpdated=!0,d.newData=!0,t.setNewRowData(a),this.rowNodesCountReady=!0));const h=d.rowDataUpdated?"group":this.getRefreshedStage(e);h&&(d.step=h,this.refreshModel(d))}getRefreshedStage(e){const{stages:t,stagesRefreshProps:n}=this;if(!t)return null;const i=t.length;let r=i;for(let o=0,s=e.length;o<s&&r;++o)r=Math.min(r,n.get(e[o])??r);return r<i?t[r].step:null}setRowTopAndRowIndex(e){var s;const{beans:t,rowsToDisplay:n}=this,i=t.environment.getDefaultRowHeight();let r=0;const o=lu(this.gos,"normal");for(let a=0,d=n.length;a<d;++a){const h=n[a],m=h.id;if(m!=null&&(e==null||e.add(m)),h.rowHeight==null){const v=Ly(t,h,o,i);h.setRowHeight(v.height,v.estimated)}h.setRowTop(r),h.setRowIndex(a),r+=h.rowHeight}if((s=this.beans.formula)!=null&&s.active){const a=this.formulaRows;for(let d=0,h=a.length;d<h;++d){const m=a[d];m.formulaRowIndex=d}}}clearRowTopAndRowIndex(e,t){const n=e.active,i=s=>{(s==null?void 0:s.id)!=null&&!t.has(s.id)&&s.clearRowTopAndRowIndex()},r=s=>{i(s),i(s.detailNode),i(s.sibling);const a=s.childrenAfterGroup;if(!s.hasChildren()||!a)return;const d=s.level==-1;if(!(n&&!d&&!s.expanded))for(let m=0,v=a.length;m<v;++m)r(a[m])},o=this.rootNode;o&&r(o)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay.length}getTopLevelRowCount(){var r,o;const{rootNode:e,rowsToDisplay:t}=this;if(!e||!t.length)return 0;if(t[0]===e)return 1;const i=(r=e.sibling)!=null&&r.displayed?1:0;return(((o=e.childrenAfterSort)==null?void 0:o.length)??0)+i}getTopLevelRowDisplayedIndex(e){const{beans:t,rootNode:n,rowsToDisplay:i}=this;if(!n||!i.length||i[0]===n)return e;const o=n.childrenAfterSort,s=d=>{let h=o[d];if(this.gos.get("groupHideOpenParents"))for(;h.expanded&&h.childrenAfterSort&&h.childrenAfterSort.length>0;)h=h.childrenAfterSort[0];return h.rowIndex},a=t.footerSvc;return a?a==null?void 0:a.getTopDisplayIndex(i,e,o,s):s(e)}getTopLevelIndexFromDisplayedIndex(e){var a;const{rootNode:t,rowsToDisplay:n}=this;if(!t||!n.length||n[0]===t)return e;let r=this.getRow(e);r.footer&&(r=r.sibling);let o=r.parent;for(;o&&o!==t;)r=o,o=r.parent;const s=((a=t.childrenAfterSort)==null?void 0:a.indexOf(r))??-1;return s>=0?s:e}getRowBounds(e){const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){this.refreshModel({step:"map",keepRenderedRows:!0,animate:Mb(this.gos)})}onFilterChanged({afterDataChange:e,columns:t}){if(!e){const i=t.length===0||t.some(r=>r.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:i,keepRenderedRows:!0,animate:Mb(this.gos)})}}onSortChanged(){this.refreshModel({step:"sort",keepRenderedRows:!0,animate:Mb(this.gos)})}getType(){return"clientSide"}onValueChanged(){this.refreshModel({step:this.beans.colModel.isPivotActive()?"pivot":"aggregate"})}createChangePath(e){const t=new f1(!1,this.rootNode);return t.active=e,t}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction"))return!1;const{changedRowNodes:t,newData:n,rowDataUpdated:i}=e;return!(!t||n||!i||t.removals.length||t.adds.size)}refreshModel(e){var h,m;const{nodeManager:t,beans:n,eventSvc:i,started:r,refreshingModel:o}=this;if(!t)return;const s=!!e.rowDataUpdated,a=e.changedPath??(e.changedPath=this.createChangePath(!e.newData&&s));if(r&&s&&i.dispatchEvent({type:"rowDataUpdated"}),!r||o||n.colModel.changeEventsDispatching||this.isSuppressModelUpdateAfterUpdateTransaction(e)){this.rowDataUpdatedPending||(this.rowDataUpdatedPending=s);return}switch(this.rowDataUpdatedPending&&(this.rowDataUpdatedPending=!1,e.step="group"),this.refreshingModel=!0,(h=n.masterDetailSvc)==null||h.refreshModel(e),s&&e.step!=="group"&&((m=n.colFilter)==null||m.refreshModel()),e.step){case"group":this.doGrouping(e);case"filter":this.doFilter(a);case"pivot":this.doPivot(a);case"aggregate":this.doAggregate(a);case"filter_aggregates":this.doFilterAggregates(a);case"sort":this.doSort(a,e.changedRowNodes);case"map":this.doRowsToDisplay()}const d=new Set;this.setRowTopAndRowIndex(d),this.clearRowTopAndRowIndex(a,d),this.refreshingModel=!1,i.dispatchEvent({type:"modelUpdated",animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack})}isEmpty(){var e,t,n;return!((t=(e=this.rootNode)==null?void 0:e._leafs)!=null&&t.length)||!((n=this.beans.colModel)!=null&&n.ready)}isRowsToRender(){return this.rowsToDisplay.length>0}getOverlayType(){var e;return this.isEmpty()?"noRows":(e=this.beans.filterManager)!=null&&e.isAnyFilterPresent()&&this.getRowCount()===0?"noMatchingRows":null}getNodesInRangeForSelection(e,t){let n=!1,i=!1;const r=[],o=u1(this.gos);return this.forEachNodeAfterFilterAndSort(s=>{if(i)return;if(n&&(s===t||s===e)&&(i=!0,o&&s.group)){SV(r,s);return}if(!n){if(s!==t&&s!==e)return;n=!0,t===e&&(i=!0)}(!s.group||!o)&&r.push(s)}),r}getTopLevelNodes(){var e;return((e=this.rootNode)==null?void 0:e.childrenAfterGroup)??null}getRow(e){return this.rowsToDisplay[e]}getFormulaRow(e){return this.formulaRows[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){const t=this.rowsToDisplay,n=t.length;if(this.isEmpty()||n===0)return-1;let i=0,r=n-1;if(e<=0)return 0;if(t[r].rowTop<=e)return r;let s=-1,a=-1;for(;;){const d=Math.floor((i+r)/2),h=t[d];if(this.isRowInPixel(h,e)||(h.rowTop<e?i=d+1:h.rowTop>e&&(r=d-1),s===i&&a===r))return d;s=i,a=r}}isRowInPixel(e,t){const n=e.rowTop,i=n+e.rowHeight;return n<=t&&i>t}forEachLeafNode(e){var n;const t=(n=this.rootNode)==null?void 0:n._leafs;if(t)for(let i=0,r=t.length;i<r;++i)e(t[i],i)}forEachNode(e,t=!1){this.depthFirstSearchRowNodes(e,t)}forEachDisplayedNode(e){const t=this.rowsToDisplay;for(let n=0,i=t.length;n<i;++n)e(t[n],n)}forEachNodeAfterFilter(e,t=!1){this.depthFirstSearchRowNodes(e,t,n=>n.childrenAfterAggFilter)}forEachNodeAfterFilterAndSort(e,t=!1){this.depthFirstSearchRowNodes(e,t,n=>n.childrenAfterSort)}forEachPivotNode(e,t,n){const{colModel:i,rowGroupColsSvc:r}=this.beans;if(!i.isPivotMode())return;if(!(r!=null&&r.columns.length)){e(this.rootNode,0);return}const o=n?"childrenAfterSort":"childrenAfterGroup";this.depthFirstSearchRowNodes(e,t,s=>s.leafGroup?null:s[o])}depthFirstSearchRowNodes(e,t=!1,n=o=>o.childrenAfterGroup,i=this.rootNode,r=0){let o=r;if(!i)return o;const s=i===this.rootNode;if(s||e(i,o++),i.hasChildren()&&!i.footer){const a=n(i);if(a){const d=this.beans.footerSvc;o=(d==null?void 0:d.addTotalRows(o,i,e,t,s,"top"))??o;for(const h of a)o=this.depthFirstSearchRowNodes(e,t,n,h,o);return(d==null?void 0:d.addTotalRows(o,i,e,t,s,"bottom"))??o}}return o}doAggregate(e){var n;this.rootNode&&((n=this.beans.aggStage)==null||n.execute(e))}doFilterAggregates(e){const t=this.rootNode,n=this.beans.filterAggStage;if(n){n.execute(e);return}t.childrenAfterAggFilter=t.childrenAfterFilter}doSort(e,t){const n=this.beans.sortStage;if(n){n.execute(e,t);return}e.forEachChangedNodeDepthFirst(i=>{i.childrenAfterSort=i.childrenAfterAggFilter.slice(0),_V(i)})}doGrouping(e){var r;const t=this.rootNode;if(!t)return;const n=this.beans.groupStage,i=n==null?void 0:n.execute(e);if(i===void 0){const o=t._leafs;t.childrenAfterGroup=o,t.updateHasChildren();const s=t.sibling;s&&(s.childrenAfterGroup=o)}(i||e.rowDataUpdated)&&((r=this.beans.colFilter)==null||r.refreshModel()),!this.rowCountReady&&this.rowNodesCountReady&&(this.rowCountReady=!0,this.eventSvc.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){const t=this.beans.filterStage;if(t){t.execute(e);return}e.forEachChangedNodeDepthFirst(n=>{n.childrenAfterFilter=n.childrenAfterGroup,Kk(n)},!0)}doPivot(e){var t;(t=this.beans.pivotStage)==null||t.execute(e)}getRowNode(e){var n,i;const t=(n=this.nodeManager)==null?void 0:n.getRowNode(e);return typeof t=="object"?t:(i=this.beans.groupStage)==null?void 0:i.getNonLeaf(e)}batchUpdateRowData(e,t){if(!this.asyncTransactionsTimer){this.asyncTransactions=[];const n=this.gos.get("asyncTransactionWaitMillis");this.asyncTransactionsTimer=setTimeout(()=>this.executeBatchUpdateRowData(),n)}this.asyncTransactions.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){const e=this.asyncTransactionsTimer;e&&(clearTimeout(e),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){var d;const{nodeManager:e,beans:t,eventSvc:n,asyncTransactions:i}=this;if(!e)return;(d=t.valueCache)==null||d.onDataChanged();const r=[],o=[],s=new y_,a=!this.gos.get("suppressAnimationFrame");for(const{rowDataTransaction:h,callback:m}of i??[]){this.rowNodesCountReady=!0;const v=e.updateRowData(h,s,a);r.push(v),m&&o.push(m.bind(null,v))}this.commitTransactions(s,a),o.length>0&&setTimeout(()=>{for(let h=0,m=o.length;h<m;h++)o[h]()},0),r.length>0&&n.dispatchEvent({type:"asyncTransactionsFlushed",results:r}),this.asyncTransactionsTimer=0,this.asyncTransactions=null}updateRowData(e){var o;const t=this.nodeManager;if(!t)return null;(o=this.beans.valueCache)==null||o.onDataChanged(),this.rowNodesCountReady=!0;const n=new y_,i=!this.gos.get("suppressAnimationFrame"),r=t.updateRowData(e,n,i);return this.commitTransactions(n,i),r}commitTransactions(e,t){this.refreshModel({step:"group",rowDataUpdated:!0,keepRenderedRows:!0,animate:t,changedRowNodes:e,changedPath:this.createChangePath(!0)})}doRowsToDisplay(){var r;const{rootNode:e,beans:t}=this;if((r=t.formula)!=null&&r.active){const o=(e==null?void 0:e.childrenAfterSort)??[];this.formulaRows=o,this.rowsToDisplay=o.filter(s=>!s.softFiltered);for(const s of this.rowsToDisplay)s.setUiLevel(0);return}const n=t.flattenStage;if(n){this.rowsToDisplay=n.execute();return}const i=this.rootNode.childrenAfterSort??[];for(const o of i)o.setUiLevel(0);this.rowsToDisplay=i}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepUndoRedoStack:!0})}resetRowHeights(){const e=this.rootNode;if(!e)return;const t=this.resetRowHeightsForAllRowNodes();e.setRowHeight(e.rowHeight,!0);const n=e.sibling;n==null||n.setRowHeight(n.rowHeight,!0),t&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);const n=t.detailNode;n==null||n.setRowHeight(n.rowHeight,!0);const i=t.sibling;i==null||i.setRowHeight(i.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){var t;e.rowHeightChanged&&!((t=this.beans.rowAutoHeight)!=null&&t.active)&&this.resetRowHeights()}onGridReady(){this.started||this.setInitialData()}destroy(){super.destroy(),this.nodeManager=this.destroyBean(this.nodeManager),this.started=!1,this.rootNode=null,this.rowsToDisplay=[],this.asyncTransactions=null,this.stages=null,this.stagesRefreshProps.clear(),clearTimeout(this.asyncTransactionsTimer)}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}},SV=(e,t)=>{const n=t.childrenAfterGroup;if(n)for(let i=0,r=n.length;i<r;++i){const o=n[i];o.data&&e.push(o),o.group&&SV(e,o)}};function mAe(e){var t;(t=e.expansionSvc)==null||t.onGroupExpandedOrCollapsed()}function yAe(e,t){const n=Uy(e);n&&((!t||t==="everything")&&(t="group"),n.refreshModel({step:t,keepRenderedRows:!0,animate:!e.gos.get("suppressAnimationFrame")}))}function vAe(e){var t;return((t=Uy(e))==null?void 0:t.isEmpty())??!0}function bAe(e,t){var n;(n=Uy(e))==null||n.forEachLeafNode(t)}function xAe(e,t){var n;(n=Uy(e))==null||n.forEachNodeAfterFilter(t)}function wAe(e,t){var n;(n=Uy(e))==null||n.forEachNodeAfterFilterAndSort(t)}function CAe(e,t){return e.frameworkOverrides.wrapIncoming(()=>{var n;return(n=Uy(e))==null?void 0:n.updateRowData(t)})}function _Ae(e,t,n){e.frameworkOverrides.wrapIncoming(()=>{var i;return(i=Uy(e))==null?void 0:i.batchUpdateRowData(t,n)})}function SAe(e){e.frameworkOverrides.wrapIncoming(()=>{var t;return(t=Uy(e))==null?void 0:t.flushAsyncTransactions()})}function EAe(e){var t;return(t=e.selectionSvc)==null?void 0:t.getBestCostNodeSelection()}var RAe={moduleName:"ClientSideRowModel",version:Fn,rowModels:["clientSide"],beans:[gAe,dAe],dependsOn:[WH]},AAe={moduleName:"ClientSideRowModelApi",version:Fn,apiFunctions:{onGroupExpandedOrCollapsed:mAe,refreshClientSideRowModel:yAe,isRowDataEmpty:vAe,forEachLeafNode:bAe,forEachNodeAfterFilter:xAe,forEachNodeAfterFilterAndSort:wAe,applyTransaction:CAe,applyTransactionAsync:_Ae,flushAsyncTransactions:SAe,getBestCostNodeSelection:EAe,resetRowHeights:CV,onRowHeightChanged:wV},dependsOn:[eAe,tAe]},TAe=class extends Yt{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel}serialize(e,t={}){const{allColumns:n,columnKeys:i,skipRowGroups:r,exportRowNumbers:o}=t,s=this.getColumnsToExport({allColumns:n,skipRowGroups:r,columnKeys:i,exportRowNumbers:o});return[this.prepareSession(s),this.prependContent(t),this.exportColumnGroups(t,s),this.exportHeaders(t,s),this.processPinnedTopRows(t,s),this.processRows(t,s),this.processPinnedBottomRows(t,s),this.appendContent(t)].reduce((a,d)=>d(a),e).parse()}processRow(e,t,n,i){var L;const r=t.shouldRowBeSkipped||(()=>!1),s=t.rowPositions!=null||!!t.onlySelected,a=this.gos.get("groupHideOpenParents")&&!s,d=this.colModel.isPivotMode()?i.leafGroup:!i.group,h=!!i.footer,m=i.allChildrenCount===1&&((L=i.childrenAfterGroup)==null?void 0:L.length)===1&&Ime(this.gos,i);if(!d&&!h&&(t.skipRowGroups||m||a)||t.onlySelected&&!i.isSelected()||t.skipPinnedTop&&i.rowPinned==="top"||t.skipPinnedBottom&&i.rowPinned==="bottom"||i.stub||i.level===-1&&!d&&!h||r(ki(this.gos,{node:i})))return;const R=e.onNewBodyRow(i);if(n.forEach((O,z)=>{R.onColumn(O,z,i)}),t.getCustomContentBelowRow){const O=t.getCustomContentBelowRow(ki(this.gos,{node:i}));O&&e.addCustomContent(O)}}appendContent(e){return t=>{const n=e.appendContent;return n&&t.addCustomContent(n),t}}prependContent(e){return t=>{const n=e.prependContent;return n&&t.addCustomContent(n),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return n=>{if(!e.skipColumnGroupHeaders){const i=new E7,{colGroupSvc:r}=this.beans,o=r?r.createColumnGroups({columns:t,idCreator:i,pinned:null,isStandaloneStructure:!0}):t;this.recursivelyAddHeaderGroups(o,n,e.processGroupHeaderCallback)}return n}}exportHeaders(e,t){return n=>{if(!e.skipColumnHeaders){const i=n.onNewHeaderRow();t.forEach((r,o)=>{i.onColumn(r,o,void 0)})}return n}}processPinnedTopRows(e,t){return n=>{var r,o;const i=this.processRow.bind(this,n,e,t);return e.rowPositions?e.rowPositions.filter(s=>s.rowPinned==="top").sort((s,a)=>s.rowIndex-a.rowIndex).map(s=>{var a;return(a=this.pinnedRowModel)==null?void 0:a.getPinnedTopRow(s.rowIndex)}).forEach(i):(r=this.pinnedRowModel)!=null&&r.isManual()||(o=this.pinnedRowModel)==null||o.forEachPinnedRow("top",i),n}}processRows(e,t){return n=>{var h;const i=this.rowModel,r=Ks(this.gos),o=Px(this.gos),s=!r&&e.onlySelected,a=this.processRow.bind(this,n,e,t),{exportedRows:d="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(m=>m.rowPinned==null).sort((m,v)=>m.rowIndex-v.rowIndex).map(m=>i.getRow(m.rowIndex)).forEach(a);else if(this.colModel.isPivotMode())r?i.forEachPivotNode(a,!0,d==="filteredAndSorted"):o?i.forEachNodeAfterFilterAndSort(a,!0):i.forEachNode(a);else if(e.onlySelectedAllPages||s){const m=((h=this.beans.selectionSvc)==null?void 0:h.getSelectedNodes())??[];this.replicateSortedOrder(m),m.forEach(a)}else d==="all"?i.forEachNode(a):r||o?i.forEachNodeAfterFilterAndSort(a,!0):i.forEachNode(a);return n}}replicateSortedOrder(e){const{sortSvc:t,rowNodeSorter:n}=this.beans;if(!t||!n)return;const i=t.getSortOptions(),r=(o,s)=>{var a,d;return o.rowIndex!=null&&s.rowIndex!=null?o.rowIndex-s.rowIndex:o.level===s.level?((a=o.parent)==null?void 0:a.id)===((d=s.parent)==null?void 0:d.id)?n.compareRowNodes(i,{rowNode:o,currentPos:o.rowIndex??-1},{rowNode:s,currentPos:s.rowIndex??-1}):r(o.parent,s.parent):o.level>s.level?r(o.parent,s):r(o,s.parent)};e.sort(r)}processPinnedBottomRows(e,t){return n=>{var r,o;const i=this.processRow.bind(this,n,e,t);return e.rowPositions?e.rowPositions.filter(s=>s.rowPinned==="bottom").sort((s,a)=>s.rowIndex-a.rowIndex).map(s=>{var a;return(a=this.pinnedRowModel)==null?void 0:a.getPinnedBottomRow(s.rowIndex)}).forEach(i):(r=this.pinnedRowModel)!=null&&r.isManual()||(o=this.pinnedRowModel)==null||o.forEachPinnedRow("bottom",i),n}}getColumnsToExport(e){const{allColumns:t=!1,skipRowGroups:n=!1,exportRowNumbers:i=!1,columnKeys:r}=e,{colModel:o,gos:s,visibleCols:a}=this,d=o.isPivotMode(),h=w=>$y(w)?!1:!im(w)||i;if(r!=null&&r.length)return o.getColsForKeys(r).filter(h);const m=s.get("treeData");let v=[];return t&&!d?v=o.getCols():v=a.allCols,v=v.filter(w=>h(w)&&(n&&!m?!PF(w):!0)),v}recursivelyAddHeaderGroups(e,t,n){const i=[];for(const r of e){const o=r;if(o.getChildren)for(const s of o.getChildren()??[])i.push(s)}e.length>0&&Sa(e[0])&&this.doAddHeaderHeader(t,e,n),i&&i.length>0&&this.recursivelyAddHeaderGroups(i,t,n)}doAddHeaderHeader(e,t,n){const i=e.onNewHeaderGroupingRow();let r=0;for(const o of t){const s=o;let a;n?a=n(ki(this.gos,{columnGroup:s})):a=this.beans.colNames.getDisplayNameForColumnGroup(s,"header");const h=(s.isExpandable()?s.getLeafColumns():[]).reduce((m,v,w,R)=>{let L=Wo(m);return v.getColumnGroupShow()==="open"?(!L||L[1]!=null)&&(L=[w],m.push(L)):L&&L[1]==null&&(L[1]=w-1),w===R.length-1&&L&&L[1]==null&&(L[1]=w),m},[]);i.onColumn(s,a||"",r++,s.getLeafColumns().length-1,h)}}},kAe={moduleName:"SharedExport",version:Fn,beans:[TAe]},A6=`\r
`,PAe=class extends t2e{constructor(e){super(e),this.config=e,this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:n}=e;this.suppressQuotes=t,this.columnSeparator=n}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,A6),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((n,i)=>{i!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(n.data.value||""),n.mergeAcross&&this.appendEmptyCells(n.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,n,i){n!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(i)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,n){t!=0&&(this.result+=this.columnSeparator);const i=this.extractRowCellValue({column:e,node:n,currentColumnIndex:t,accumulatedRowIndex:t,type:"csv",useRawFormula:!1});this.result+=this.putInQuotes(i.valueFormatted??i.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(an(53),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=A6),this.isFirstLine=!1}},DAe=class extends e2e{constructor(){super(...arguments),this.beanName="csvCreator"}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){an(51);return}const t=()=>{const i=this.getMergedParams(e),r=this.getData(i),o=new Blob(["\uFEFF",r],{type:"text/plain"}),s=i.fileName,a=typeof s=="function"?s(ki(this.gos,{})):s;n2e(this.getFileName(a),o)},{overlays:n}=this.beans;n?n.showExportOverlay(t):t()}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){const n=t?Object.assign({},e):this.getMergedParams(e);return this.getData(n)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{colModel:t,colNames:n,rowGroupColsSvc:i,valueSvc:r,gos:o}=this.beans,{processCellCallback:s,processHeaderCallback:a,processGroupHeaderCallback:d,processRowGroupCallback:h,suppressQuotes:m,columnSeparator:v}=e;return new PAe({colModel:t,colNames:n,valueSvc:r,gos:o,processCellCallback:s||void 0,processHeaderCallback:a||void 0,processGroupHeaderCallback:d||void 0,processRowGroupCallback:h||void 0,suppressQuotes:m||!1,columnSeparator:v||",",rowGroupColsSvc:i})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};function FAe(e,t){var n;return(n=e.csvCreator)==null?void 0:n.getDataAsCsv(t)}function MAe(e,t){var n;(n=e.csvCreator)==null||n.exportDataAsCsv(t)}var IAe={moduleName:"CsvExport",version:Fn,beans:[DAe],apiFunctions:{getDataAsCsv:FAe,exportDataAsCsv:MAe},dependsOn:[kAe]},LAe=class extends Yt{constructor(e,t,n){super(),this.id=e,this.parentCache=t,this.params=n,this.state="needsLoading",this.version=0,this.startRow=e*n.blockSize,this.endRow=this.startRow+n.blockSize}load(){this.state="loading",this.loadFromDatasource()}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed"),this.dispatchLocalEvent({type:"loadComplete"})}pageLoaded(e,t,n){this.successCommon(e,{rowData:t,rowCount:n})}isRequestMostRecentAndLive(e){const t=e===this.version,n=this.isAlive();return t&&n}successCommon(e,t){this.dispatchLocalEvent({type:"loadComplete"}),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}postConstruct(){this.rowNodes=[];const{params:{blockSize:e,rowHeight:t},startRow:n,beans:i,rowNodes:r}=this;for(let o=0;o<e;o++){const s=n+o,a=new Ny(i);a.setRowHeight(t),a.uiLevel=0,a.setRowIndex(s),a.setRowTop(t*s),r.push(a)}}getBlockStateJson(){const{id:e,startRow:t,endRow:n,state:i}=this;return{id:""+e,state:{blockNumber:e,startRow:t,endRow:n,pageStatus:i}}}setDataAndId(e,t,n){Dn(t)?e.setDataAndId(t,n.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();if(vs(this.params.datasource.getRows)){an(90);return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}createLoadParams(){const{startRow:e,endRow:t,version:n,params:{sortModel:i,filterModel:r},gos:o}=this;return ki(o,{startRow:e,endRow:t,successCallback:this.pageLoaded.bind(this,n),failCallback:this.pageLoadFailed.bind(this,n),sortModel:i,filterModel:r})}forEachNode(e,t,n){this.rowNodes.forEach((i,r)=>{this.startRow+r<n&&e(i,t.value++)})}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.value++);const n=e-this.startRow;return this.rowNodes[n]}processServerResult(e){const{rowNodes:t,beans:n}=this;t.forEach((r,o)=>{const s=e.rowData?e.rowData[o]:void 0;!r.id&&r.alreadyRendered&&s&&(t[o]=new Ny(n),t[o].setRowIndex(r.rowIndex),t[o].setRowTop(r.rowTop),t[o].setRowHeight(r.rowHeight),r._destroy(!0)),this.setDataAndId(t[o],s,this.startRow+o)});const i=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,i)}destroy(){const e=this.rowNodes;for(let t=0,n=e.length;t<n;t++)e[t]._destroy(!1);e.length=0,super.destroy()}},OAe=2,zAe=class extends Yt{constructor(e){super(),this.params=e,this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount}getRow(e,t=!1){const n=Math.floor(e/this.params.blockSize);let i=this.blocks[n];if(!i){if(t)return;i=this.createBlock(n)}return i.getRow(e)}createBlock(e){const t=this.params,n=this.createBean(new LAe(e,this,t));return this.blocks[n.id]=n,this.blockCount++,this.purgeBlocksIfNeeded(n),t.rowNodeBlockLoader.addBlock(n),n}refreshCache(){if(this.blockCount==0){this.purgeCache();return}for(const t of this.getBlocksInOrder())t.setStateWaitingToLoad();this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){for(const e of this.getBlocksInOrder())this.destroyBlock(e);super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(p0(this.gos,`InfiniteCache - onPageLoaded: page = ${e.id}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const t=this.getBlocksInOrder().filter(s=>s!=e),n=(s,a)=>a.lastAccessed-s.lastAccessed;t.sort(n);const i=this.params.maxBlocksInCache>0,r=i?this.params.maxBlocksInCache-1:null,o=OAe-1;t.forEach((s,a)=>{const d=s.state==="needsLoading"&&a>=o,h=i?a>=r:!1;if(d||h){if(this.isBlockCurrentlyDisplayed(s)||this.isBlockFocused(s))return;this.removeBlockFromCache(s)}})}isBlockFocused(e){const t=this.beans.focusSvc.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;const{startRow:n,endRow:i}=e;return t.rowIndex>=n&&t.rowIndex<i}isBlockCurrentlyDisplayed(e){const{startRow:t,endRow:n}=e;return this.beans.rowRenderer.isRangeInRenderedViewport(t,n-1)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const{blockSize:n,overflowSize:i}=this.params,o=(e.id+1)*n+i;this.rowCount<o&&(this.rowCount=o)}}setRowCount(e,t){this.rowCount=e,Dn(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t={value:0};for(const n of this.getBlocksInOrder())n.forEachNode(e,t,this.rowCount)}getBlocksInOrder(){const e=(n,i)=>n.id-i.id;return Object.values(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.id],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventSvc.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){const e=[];for(const t of this.getBlocksInOrder())t.id*this.params.blockSize>=this.rowCount&&e.push(t);if(e.length>0)for(const t of e)this.destroyBlock(t)}purgeCache(){for(const e of this.getBlocksInOrder())this.removeBlockFromCache(e);this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const n=[];let i=-1,r=!1;const o={value:0};let s=!1;for(const d of this.getBlocksInOrder())if(!s){if(r&&i+1!==d.id){s=!0;continue}i=d.id,d.forEachNode(h=>{const m=h===e||h===t;(r||m)&&n.push(h),m&&(r=!r)},o,this.rowCount)}return s||r?[]:n}},NAe=class extends Yt{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){if(this.gos.get("rowModelType")!=="infinite")return;const e=this.beans,t=new Ny(e);this.rootNode=t,t.level=-1,this.rowHeight=n0(e),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache())}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy(),this.rootNode=null}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.beans.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.reset.bind(this),sortChanged:this.reset.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.dispatchModelUpdatedEvent.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=n0(this.beans),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onColumnEverything(){var t;let e;this.cacheParams?e=!i1(this.cacheParams.sortModel,((t=this.beans.sortSvc)==null?void 0:t.getSortModel())??[]):e=!0,e&&this.reset()}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getOverlayType(){var t;const e=this.infiniteCache;return(e==null?void 0:e.getRowCount())===0?(t=this.beans.filterManager)!=null&&t.isAnyFilterPresent()?"noMatchingRows":"noRows":null}getNodesInRangeForSelection(e,t){var n;return((n=this.infiniteCache)==null?void 0:n.getRowNodesInRange(e,t))??[]}reset(){var n;if(!this.datasource)return;ix(this.gos)!=null||(n=this.beans.selectionSvc)==null||n.reset("rowDataChanged"),this.resetCache()}dispatchModelUpdatedEvent(){this.eventSvc.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){this.destroyCache();const e=this.beans,{filterManager:t,sortSvc:n,rowNodeBlockLoader:i,eventSvc:r,gos:o}=e;this.cacheParams={datasource:this.datasource,filterModel:(t==null?void 0:t.getFilterModel())??{},sortModel:(n==null?void 0:n.getSortModel())??[],rowNodeBlockLoader:i,initialRowCount:o.get("infiniteInitialRowCount"),maxBlocksInCache:o.get("maxBlocksInCache"),rowHeight:n0(e),overflowSize:o.get("cacheOverflowSize"),blockSize:o.get("cacheBlockSize"),lastAccessedSequence:{value:0}},this.infiniteCache=this.createBean(new zAe(this.cacheParams)),r.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)}),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache=this.destroyBean(this.infiniteCache)}getRow(e){const t=this.infiniteCache;if(t&&!(e>=t.getRowCount()))return t.getRow(e)}getRowNode(e){let t;return this.forEachNode(n=>{n.id===e&&(t=n)}),t}forEachNode(e){var t;(t=this.infiniteCache)==null||t.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){const t=Math.floor(e/this.rowHeight),n=this.getRowCount()-1;return t>n?n:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){var e;(e=this.infiniteCache)==null||e.refreshCache()}purgeCache(){var e;(e=this.infiniteCache)==null||e.purgeCache()}isLastRowIndexKnown(){var e;return((e=this.infiniteCache)==null?void 0:e.isLastRowIndexKnown())??!1}setRowCount(e,t){var n;(n=this.infiniteCache)==null||n.setRowCount(e,t)}resetRowHeights(){}onRowHeightChanged(){}};function BAe(e){var t;(t=eE(e))==null||t.refreshCache()}function GAe(e){var t;(t=eE(e))==null||t.purgeCache()}function jAe(e){var t;return(t=eE(e))==null?void 0:t.getRowCount()}var HAe=class extends Yt{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=Lme(this.gos);const e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=Ll(this,this.performCheckBlocksToLoad.bind(this),e))}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){Bp(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad()}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){p0(this.gos,"RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}const e=this.maxConcurrentRequests!=null?this.maxConcurrentRequests-this.activeBlockLoadsCount:1,t=this.blocks.filter(n=>n.state==="needsLoading").slice(0,e);this.activeBlockLoadsCount+=t.length;for(const n of t)n.load();this.printCacheStatus()}getBlockState(){const e={};return this.blocks.forEach(t=>{const{id:n,state:i}=t.getBlockStateJson();e[n]=i}),e}printCacheStatus(){p0(this.gos,`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}},VAe={moduleName:"InfiniteRowModelCore",version:Fn,rowModels:["infinite"],beans:[NAe,HAe]},$Ae={moduleName:"InfiniteRowModel",version:Fn,apiFunctions:{refreshInfiniteCache:BAe,purgeInfiniteCache:GAe,getInfiniteRowCount:jAe},dependsOn:[VAe,nAe]},WAe="",UAe="",qAe={tag:"span",children:[{tag:"span",ref:"eDelta",cls:"ag-value-change-delta"},{tag:"span",ref:"eValue",cls:"ag-value-change-value"}]},KAe=class extends ra{constructor(){super(qAe),this.eValue=Yn,this.eDelta=Yn,this.refreshCount=0}init(e){this.refresh(e,!0)}showDelta(e,t){const n=Math.abs(t),i=e.formatValue(n),r=Dn(i)?i:n,o=t>=0,s=this.eDelta;o?s.textContent=WAe+r:s.textContent=UAe+r,s.classList.toggle("ag-value-change-delta-up",o),s.classList.toggle("ag-value-change-delta-down",!o)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),jc(this.eDelta)}refresh(e,t=!1){var h;const{value:n,valueFormatted:i}=e,{eValue:r,lastValue:o,beans:s}=this;if(n===o||(Dn(i)?r.textContent=i:Dn(n)?r.textContent=n:jc(r),(h=s.filterManager)!=null&&h.isSuppressFlashingCellsBecauseFiltering()))return!1;const a=n&&typeof n=="object"&&"toNumber"in n?n.toNumber():n,d=o&&typeof o=="object"&&"toNumber"in o?o.toNumber():o;if(a===d)return!1;if(typeof a=="number"&&typeof d=="number"){const m=a-d;this.showDelta(e,m)}return o&&r.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=n,!0}},ZAe=".ag-value-slide-out{opacity:1}:where(.ag-ltr) .ag-value-slide-out{margin-right:5px;transition:opacity 3s,margin-right 3s}:where(.ag-rtl) .ag-value-slide-out{margin-left:5px;transition:opacity 3s,margin-left 3s}:where(.ag-ltr,.ag-rtl) .ag-value-slide-out{transition-timing-function:linear}.ag-value-slide-out-end{opacity:0}:where(.ag-ltr) .ag-value-slide-out-end{margin-right:10px}:where(.ag-rtl) .ag-value-slide-out-end{margin-left:10px}",YAe={tag:"span",children:[{tag:"span",ref:"eCurrent",cls:"ag-value-slide-current"}]},XAe=class extends ra{constructor(){super(YAe),this.eCurrent=Yn,this.refreshCount=0,this.registerCSS(ZAe)}init(e){this.refresh(e,!0)}addSlideAnimation(){var r;this.refreshCount++;const e=this.refreshCount;(r=this.ePrevious)==null||r.remove();const{beans:t,eCurrent:n}=this,i=_h({tag:"span",cls:"ag-value-slide-previous ag-value-slide-out"});this.ePrevious=i,i.textContent=n.textContent,this.getGui().insertBefore(i,n),t.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{var o;e===this.refreshCount&&((o=this.ePrevious)==null||o.remove(),this.ePrevious=null)},3e3)})}refresh(e,t=!1){var r;let n=e.value;if(vs(n)&&(n=""),n===this.lastValue||(r=this.beans.filterManager)!=null&&r.isSuppressFlashingCellsBecauseFiltering())return!1;t||this.addSlideAnimation(),this.lastValue=n;const i=this.eCurrent;return Dn(e.valueFormatted)?i.textContent=e.valueFormatted:Dn(e.value)?i.textContent=n:jc(i),!0}},JAe=class extends Yt{constructor(){super(...arguments),this.beanName="cellFlashSvc",this.nextAnimationTime=null,this.nextAnimationCycle=null,this.animations={highlight:new Map,"data-changed":new Map}}animateCell(e,t,n=this.beans.gos.get("cellFlashDuration"),i=this.beans.gos.get("cellFadeDuration")){const r=this.animations[t];r.delete(e);const o=Date.now(),s=o+n,a=o+n+i,d={phase:"flash",flashEndTime:s,fadeEndTime:a};r.set(e,d);const h=`ag-cell-${t}`,m=`${h}-animation`,{comp:v,eGui:{style:w}}=e;v.toggleCss(h,!0),v.toggleCss(m,!1),w.removeProperty("transition"),w.removeProperty("transition-delay"),this.nextAnimationTime&&s+15<this.nextAnimationTime&&(clearTimeout(this.nextAnimationCycle),this.nextAnimationCycle=null,this.nextAnimationTime=null),this.nextAnimationCycle||(this.beans.frameworkOverrides.wrapIncoming(()=>{this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),n)}),this.nextAnimationTime=s)}advanceAnimations(){const e=Date.now();let t=null;for(const n of Object.keys(this.animations)){const i=this.animations[n],r=`ag-cell-${n}`,o=`${r}-animation`;for(const[s,a]of i){if(!s.isAlive()||!s.comp){i.delete(s);continue}const{phase:d,flashEndTime:h,fadeEndTime:m}=a,v=d==="flash"?h:m;if(!(e+15>=v)){t=Math.min(v,t??1/0);continue}const{comp:R,eGui:{style:L}}=s;switch(d){case"flash":R.toggleCss(r,!1),R.toggleCss(o,!0),L.transition=`background-color ${m-h}ms`,L.transitionDelay=`${h-e}ms`,t=Math.min(m,t??1/0),a.phase="fade";break;case"fade":R.toggleCss(r,!1),R.toggleCss(o,!1),L.removeProperty("transition"),L.removeProperty("transition-delay"),i.delete(s);break}}}t==null?(this.nextAnimationTime=null,this.nextAnimationCycle=null):t&&(this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),t-e),this.nextAnimationTime=t)}onFlashCells(e,t){if(!e.comp)return;const n=Sbe(e.cellPosition);t.cells[n]&&this.animateCell(e,"highlight")}flashCell(e,t){this.animateCell(e,"data-changed",t==null?void 0:t.flashDuration,t==null?void 0:t.fadeDuration)}destroy(){for(const e of Object.keys(this.animations))this.animations[e].clear()}};function QAe(e,t={}){const{cellFlashSvc:n}=e;n&&e.frameworkOverrides.wrapIncoming(()=>{for(const i of e.rowRenderer.getCellCtrls(t.rowNodes,t.columns))n.flashCell(i,t)})}var eTe={moduleName:"HighlightChanges",version:Fn,beans:[JAe],userComponents:{agAnimateShowChangeCellRenderer:KAe,agAnimateSlideCellRenderer:XAe},apiFunctions:{flashCells:QAe}};function tTe(e){var t;return((t=e.stateSvc)==null?void 0:t.getState())??{}}function nTe(e,t,n){var i;return(i=e.stateSvc)==null?void 0:i.setState(t,n)}function T6(e){return e={...e},e.version||(e.version="32.1.0"),e.version==="32.1.0"&&(e=iTe(e)),e.version=Fn,e}function iTe(e){return e.cellSelection=rTe(e,"rangeSelection"),e}function rTe(e,t){if(e&&typeof e=="object")return e[t]}var oTe=class extends Yt{constructor(){super(...arguments),this.beanName="stateSvc",this.updateRowGroupExpansionStateTimer=0,this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=Ll(this,()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=Ll(this,()=>{this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(this.updateCachedState("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowGroupExpansion",void 0)):(this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("ssrmRowGroupExpansion",void 0))},0),this.onRowSelectedDebounced=Ll(this,()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}postConstruct(){const{gos:e,ctrlsSvc:t,colDelayRenderSvc:n}=this.beans;this.isClientSideRowModel=Ks(e);const i=T6(e.get("initialState")??{}),r=i.partialColumnState;delete i.partialColumnState,this.cachedState=i;const o=this.suppressEventsAndDispatchInitEvent.bind(this);t.whenReady(this,()=>o(()=>this.setupStateOnGridReady(i))),(i.columnOrder||i.columnVisibility||i.columnSizing||i.columnPinning||i.columnGroup)&&(n==null||n.hideColumns("columnState"));const[s,a,d]=this.addManagedEventListeners({newColumnsLoaded:({source:h})=>{h==="gridInitializing"&&(s(),o(()=>{this.setupStateOnColumnsInitialised(i,!!r),n==null||n.revealColumns("columnState")}))},rowCountReady:()=>{a==null||a(),o(()=>this.setupStateOnRowCountReady(i))},firstDataRendered:()=>{d==null||d(),o(()=>this.setupStateOnFirstDataRendered(i))}})}destroy(){super.destroy(),clearTimeout(this.updateRowGroupExpansionStateTimer),this.queuedUpdateSources.clear()}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setState(e,t){const n=T6(e);delete n.partialColumnState,this.cachedState=n,this.startSuppressEvents();const i="api",r=t?new Set(t):void 0;this.setGridReadyState(n,i,r),this.setColumnsInitialisedState(n,i,!!r,r),this.setRowCountState(n,i,r),setTimeout(()=>{this.isAlive()&&this.setFirstDataRenderedState(n,i,r),this.stopSuppressEvents(i)})}setGridReadyState(e,t,n){var i,r;t==="api"&&!(n!=null&&n.has("sideBar"))&&((r=(i=this.beans.sideBar)==null?void 0:i.comp)==null||r.setState(e.sideBar)),this.updateCachedState("sideBar",this.getSideBarState())}setupStateOnGridReady(e){this.setGridReadyState(e,"gridInitializing");const t=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:t,sideBarUpdated:t})}updateColumnAndGroupState(){this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState())}setColumnsInitialisedState(e,t,n,i){this.setColumnState(e,t,n,i),this.setColumnGroupState(e,t,i),this.updateColumnAndGroupState()}setupStateOnColumnsInitialised(e,t){this.setColumnsInitialisedState(e,"gridInitializing",t);const n=i=>()=>this.updateColumnState([i]);this.addManagedEventListeners({columnValueChanged:n("aggregation"),columnMoved:n("columnOrder"),columnPinned:n("columnPinning"),columnResized:n("columnSizing"),columnVisible:n("columnVisibility"),columnPivotChanged:n("pivot"),columnPivotModeChanged:n("pivot"),columnRowGroupChanged:n("rowGroup"),sortChanged:n("sort"),newColumnsLoaded:this.updateColumnAndGroupState.bind(this),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setRowCountState(e,t,n){const{filter:i,rowGroupExpansion:r,ssrmRowGroupExpansion:o,rowSelection:s,pagination:a,rowPinning:d}=e,h=(v,w)=>!(n!=null&&n.has(v))&&(w||t==="api");h("filter",i)&&this.setFilterState(i),h("rowGroupExpansion",r)&&this.setRowGroupExpansionState(o,r,t),h("rowSelection",s)&&this.setRowSelectionState(s,t),h("pagination",a)&&this.setPaginationState(a,t),h("rowPinning",d)&&this.setRowPinningState(d);const m=this.updateCachedState.bind(this);m("filter",this.getFilterState()),this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(m("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),m("rowGroupExpansion",void 0)):(m("rowGroupExpansion",this.getRowGroupExpansionState()),m("ssrmRowGroupExpansion",void 0)),m("rowSelection",this.getRowSelectionState()),m("pagination",this.getPaginationState())}setupStateOnRowCountReady(e){this.setRowCountState(e,"gridInitializing");const t=this.updateCachedState.bind(this),n=()=>{this.updateRowGroupExpansionStateTimer=0,this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(t("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),t("rowGroupExpansion",void 0)):(t("rowGroupExpansion",this.getRowGroupExpansionState()),t("ssrmRowGroupExpansion",void 0))},i=()=>t("filter",this.getFilterState()),{gos:r,colFilter:o,selectableFilter:s}=this.beans;this.addManagedEventListeners({filterChanged:i,rowExpansionStateChanged:this.onRowGroupOpenedDebounced,expandOrCollapseAll:n,columnRowGroupChanged:n,rowDataUpdated:()=>{(r.get("groupDefaultExpanded")!==0||r.get("isGroupOpenByDefault"))&&(this.updateRowGroupExpansionStateTimer||(this.updateRowGroupExpansionStateTimer=setTimeout(n)))},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:a=>{(a.newPage||a.newPageSize)&&t("pagination",this.getPaginationState())},pinnedRowsChanged:()=>t("rowPinning",this.getRowPinningState())}),o&&this.addManagedListeners(o,{filterStateChanged:i}),s&&this.addManagedListeners(s,{selectedFilterChanged:i})}setFirstDataRenderedState(e,t,n){const{scroll:i,cellSelection:r,focusedCell:o,columnOrder:s}=e,a=(m,v)=>!(n!=null&&n.has(m))&&(v||t==="api");a("focusedCell",o)&&this.setFocusedCellState(o),a("cellSelection",r)&&this.setCellSelectionState(r),a("scroll",i)&&this.setScrollState(i),this.setColumnPivotState(!!(s!=null&&s.orderedColIds),t);const d=this.updateCachedState.bind(this);d("sideBar",this.getSideBarState()),d("focusedCell",this.getFocusedCellState());const h=this.getRangeSelectionState();d("rangeSelection",h),d("cellSelection",h),d("scroll",this.getScrollState())}setupStateOnFirstDataRendered(e){this.setFirstDataRenderedState(e,"gridInitializing");const t=this.updateCachedState.bind(this),n=()=>t("focusedCell",this.getFocusedCellState());this.addManagedEventListeners({cellFocused:n,cellFocusCleared:n,cellSelectionChanged:i=>{if(i.finished){const r=this.getRangeSelectionState();t("rangeSelection",r),t("cellSelection",r)}},bodyScrollEnd:()=>t("scroll",this.getScrollState())})}getColumnState(){const e=this.beans;return YSe(DS(e),e.colModel.isPivotMode())}setColumnState(e,t,n,i){const{sort:r,rowGroup:o,aggregation:s,pivot:a,columnPinning:d,columnVisibility:h,columnSizing:m,columnOrder:v}=e;let w=!1;const R=(ue,ve)=>{const ce=!(i!=null&&i.has(ue))&&!!(ve||t==="api");return w||(w=ce),ce},L={},O=ue=>{let ve=L[ue];return ve||(ve={colId:ue},L[ue]=ve,ve)},z={},$=R("sort",r);$&&(r==null||r.sortModel.forEach(({colId:ue,sort:ve},ce)=>{const Ie=O(ue);Ie.sort=ve,Ie.sortIndex=ce})),($||!n)&&(z.sort=null,z.sortIndex=null);const U=R("rowGroup",o);U&&(o==null||o.groupColIds.forEach((ue,ve)=>{const ce=O(ue);ce.rowGroup=!0,ce.rowGroupIndex=ve})),(U||!n)&&(z.rowGroup=null,z.rowGroupIndex=null);const Y=R("aggregation",s);Y&&(s==null||s.aggregationModel.forEach(({colId:ue,aggFunc:ve})=>{O(ue).aggFunc=ve})),(Y||!n)&&(z.aggFunc=null);const X=R("pivot",a);X&&(a==null||a.pivotColIds.forEach((ue,ve)=>{const ce=O(ue);ce.pivot=!0,ce.pivotIndex=ve}),this.gos.updateGridOptions({options:{pivotMode:!!(a!=null&&a.pivotMode)},source:t})),(X||!n)&&(z.pivot=null,z.pivotIndex=null);const q=R("columnPinning",d);if(q){for(const ue of(d==null?void 0:d.leftColIds)??[])O(ue).pinned="left";for(const ue of(d==null?void 0:d.rightColIds)??[])O(ue).pinned="right"}(q||!n)&&(z.pinned=null);const ie=R("columnVisibility",h);if(ie)for(const ue of(h==null?void 0:h.hiddenColIds)??[])O(ue).hide=!0;(ie||!n)&&(z.hide=null);const re=R("columnSizing",m);if(re)for(const{colId:ue,flex:ve,width:ce}of(m==null?void 0:m.columnSizingModel)??[]){const Ie=O(ue);Ie.flex=ve??null,Ie.width=ce}(re||!n)&&(z.flex=null);const J=v==null?void 0:v.orderedColIds,ne=!!(J!=null&&J.length)&&!(i!=null&&i.has("columnOrder")),be=ne?J.map(ue=>O(ue)):Object.values(L);(be.length||w)&&(this.columnStates=be,vf(this.beans,{state:be,applyOrder:ne,defaultState:z},t))}setColumnPivotState(e,t){const n=this.columnStates;this.columnStates=void 0;const i=this.columnGroupStates;this.columnGroupStates=void 0;const r=this.beans,{pivotResultCols:o,colGroupSvc:s}=r;if(o!=null&&o.isPivotResultColsPresent()){if(n){const a=[];for(const d of n)o.getPivotResultCol(d.colId)&&a.push(d);vf(r,{state:a,applyOrder:e},t)}i&&(s==null||s.setColumnGroupState(i,t))}}getColumnGroupState(){const e=this.beans.colGroupSvc;if(!e)return;const t=e.getColumnGroupState();return XSe(t)}setColumnGroupState(e,t,n){var a;const i=this.beans.colGroupSvc;if(!i||n!=null&&n.has("columnGroup")||t!=="api"&&!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;const r=new Set((a=e.columnGroup)==null?void 0:a.openColumnGroupIds),s=i.getColumnGroupState().map(({groupId:d})=>{const h=r.has(d);return h&&r.delete(d),{groupId:d,open:h}});for(const d of r)s.push({groupId:d,open:!0});s.length&&(this.columnGroupStates=s),i.setColumnGroupState(s,t)}getFilterState(){const{filterManager:e,selectableFilter:t}=this.beans;let n=e==null?void 0:e.getFilterModel();n&&Object.keys(n).length===0&&(n=void 0);const i=e==null?void 0:e.getFilterState(),r=(e==null?void 0:e.getAdvFilterModel())??void 0,o=t==null?void 0:t.getState();return n||r||i||o?{filterModel:n,columnFilterState:i,advancedFilterModel:r,selectableFilters:o}:void 0}setFilterState(e){const{filterManager:t,selectableFilter:n}=this.beans,{filterModel:i,columnFilterState:r,advancedFilterModel:o,selectableFilters:s}=e??{filterModel:null,columnFilterState:null,advancedFilterModel:null};s!==void 0&&(n==null||n.setState(s??{})),(i!==void 0||r!==void 0)&&(t==null||t.setFilterState(i??null,r??null,"columnFilter")),o!==void 0&&(t==null||t.setAdvFilterModel(o??null,"advancedFilter"))}getRangeSelectionState(){var t;const e=(t=this.beans.rangeSvc)==null?void 0:t.getCellRanges().map(n=>{const{id:i,type:r,startRow:o,endRow:s,columns:a,startColumn:d}=n;return{id:i,type:r,startRow:o,endRow:s,colIds:a.map(h=>h.getColId()),startColId:d.getColId()}});return e!=null&&e.length?{cellRanges:e}:void 0}setCellSelectionState(e){const{gos:t,rangeSvc:n,colModel:i,visibleCols:r}=this.beans;if(!Oy(t)||!n)return;const o=[];for(const s of(e==null?void 0:e.cellRanges)??[]){const a=[];for(const h of s.colIds){const m=i.getCol(h);m&&a.push(m)}if(!a.length)continue;let d=i.getCol(s.startColId);if(!d){const h=r.allCols,m=new Set(a);d=h.find(v=>m.has(v))}o.push({...s,columns:a,startColumn:d})}n.setCellRanges(o)}getScrollState(){if(!this.isClientSideRowModel)return;const e=this.beans.ctrlsSvc.getScrollFeature(),{left:t}=(e==null?void 0:e.getHScrollPosition())??{left:0},{top:n}=(e==null?void 0:e.getVScrollPosition())??{top:0};return n||t?{top:n,left:t}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;const{top:t,left:n}=e??{top:0,left:0},{frameworkOverrides:i,rowRenderer:r,animationFrameSvc:o,ctrlsSvc:s}=this.beans;i.wrapIncoming(()=>{var a;s.get("center").setCenterViewportScrollLeft(n),(a=s.getScrollFeature())==null||a.setVerticalScrollPosition(t),r.redraw({afterScroll:!0}),o==null||o.flushAllFrames()})}getSideBarState(){var e,t;return(t=(e=this.beans.sideBar)==null?void 0:e.comp)==null?void 0:t.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.beans.focusSvc.getFocusedCell();if(e){const{column:t,rowIndex:n,rowPinned:i}=e;return{colId:t.getColId(),rowIndex:n,rowPinned:i}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{focusSvc:t,colModel:n}=this.beans;if(!e){t.clearFocusedCell();return}const{colId:i,rowIndex:r,rowPinned:o}=e;t.setFocusedCell({column:n.getCol(i),rowIndex:r,rowPinned:o,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){const{pagination:e,gos:t}=this.beans;if(!e)return;const n=e.getCurrentPage(),i=t.get("paginationAutoPageSize")?void 0:e.getPageSize();if(!(!n&&!i))return{page:n,pageSize:i}}setPaginationState(e,t){const{pagination:n,gos:i}=this.beans;if(!n)return;const{pageSize:r,page:o}=e??{page:0,pageSize:i.get("paginationPageSize")},s=t==="gridInitializing";r&&!i.get("paginationAutoPageSize")&&n.setPageSize(r,s?"initialState":"pageSizeSelector"),typeof o=="number"&&(s?n.setPage(o):n.goToPage(o))}getRowSelectionState(){var i;const e=this.beans.selectionSvc;if(!e)return;const t=e.getSelectionState();return!t||!Array.isArray(t)&&(t.selectAll===!1||t.selectAllChildren===!1)&&!((i=t==null?void 0:t.toggledNodes)!=null&&i.length)?void 0:t}setRowSelectionState(e,t){var n;(n=this.beans.selectionSvc)==null||n.setSelectionState(e,t,t==="api")}getRowGroupExpansionState(){const{expansionSvc:e}=this.beans;if(e)return e.getExpansionState()}getRowPinningState(){var e;return(e=this.beans.pinnedRowModel)==null?void 0:e.getPinnedState()}setRowPinningState(e){const t=this.beans.pinnedRowModel;e?t==null||t.setPinnedState(e):t==null||t.reset()}setRowGroupExpansionState(e,t,n){const i=this.beans.expansionSvc;if(!i)return;const r=t??{expandedRowGroupIds:[],collapsedRowGroupIds:[]};i.setExpansionState(r,n)}updateColumnState(e){const t=this.getColumnState();let n=!1;const i=this.cachedState;for(const r of Object.keys(t)){const o=t[r];i1(o,i[r])||(n=!0)}this.cachedState={...i,...t},n&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const n=this.cachedState[e];this.setCachedStateValue(e,t),i1(t,n)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState={...this.cachedState,[e]:t}}refreshStaleState(){const e=this.staleStateKeys;for(const t of e)t==="rowSelection"&&this.setCachedStateValue(t,this.getRowSelectionState());e.clear()}dispatchStateUpdateEvent(e){if(!this.suppressEvents){for(const t of e)this.queuedUpdateSources.add(t);this.dispatchStateUpdateEventDebounced()}}dispatchQueuedStateUpdateEvents(){const e=this.queuedUpdateSources,t=Array.from(e);e.clear(),this.eventSvc.dispatchEvent({type:"stateUpdated",sources:t,state:this.cachedState})}startSuppressEvents(){var e;this.suppressEvents=!0,(e=this.beans.colAnimation)==null||e.setSuppressAnimation(!0)}stopSuppressEvents(e){setTimeout(()=>{var t;this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&((t=this.beans.colAnimation)==null||t.setSuppressAnimation(!1),this.dispatchStateUpdateEvent([e]))})}suppressEventsAndDispatchInitEvent(e){this.startSuppressEvents(),e(),this.stopSuppressEvents("gridInitializing")}},sTe={moduleName:"GridState",version:Fn,beans:[oTe],apiFunctions:{getState:tTe,setState:nTe}};function aTe(e){return e.rowModel.isLastRowIndexKnown()}function lTe(e){var t;return((t=e.pagination)==null?void 0:t.getPageSize())??100}function uTe(e){var t;return((t=e.pagination)==null?void 0:t.getCurrentPage())??0}function cTe(e){var t;return((t=e.pagination)==null?void 0:t.getTotalPages())??1}function dTe(e){return e.pagination?e.pagination.getMasterRowCount():e.rowModel.getRowCount()}function hTe(e){var t;(t=e.pagination)==null||t.goToNextPage()}function fTe(e){var t;(t=e.pagination)==null||t.goToPreviousPage()}function pTe(e){var t;(t=e.pagination)==null||t.goToFirstPage()}function gTe(e){var t;(t=e.pagination)==null||t.goToLastPage()}function mTe(e,t){var n;(n=e.pagination)==null||n.goToPage(t)}var yTe=class extends Yt{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeSvc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowsCtrl=e.center;const t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.beans.pagination.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowsCtrl.viewportSizeFeature.getBodyHeight();if(e>0){const t=this.beans,n=()=>{const i=Math.max(n0(t),1),r=Math.floor(e/i);t.pagination.setPageSize(r,"autoCalculated")};this.isBodyRendered?Ll(this,n,50)():(n(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}},pw="paginationPageSizeSelector",vTe={tag:"span",cls:"ag-paging-page-size"},bTe=class extends ra{constructor(){super(vTe),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.pagination.getPageSize()||(this.pagination.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.pagination=e.pagination}postConstruct(){this.addManagedPropertyListener(pw,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!(e!=null&&e.newPageSize))return;const t=this.pagination.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){jc(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get(pw)!==!1}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.pagination.getPageSize(),n=!t||!e.includes(t);if(n){const r=this.gos.exists("paginationPageSize"),o=this.gos.get(pw)!==!0;an(94,{pageSizeSet:r,pageSizesSet:o,pageSizeOptions:e,paginationPageSizeOption:t}),o||an(95,{paginationPageSizeOption:t,paginationPageSizeSelector:pw}),e.unshift("")}const i=String(n?"":t);this.selectPageSizeComp?(Vy(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(i,!0)):this.createPageSizeSelectorComp(e,i),this.hasEmptyOption=n}createPageSizeSelectOptions(e){return e.map(t=>({value:String(t)}))}createPageSizeSelectorComp(e,t){const n=this.getLocaleTextFunc(),i=n("pageSizeSelectorLabel","Page Size:"),r=n("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new zF).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(r).setLabel(i).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){const e=[20,50,100],t=this.gos.get(pw);return!Array.isArray(t)||!(t!=null&&t.length)?e:[...t].sort((n,i)=>n-i)}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},xTe={selector:"AG-PAGE-SIZE-SELECTOR",component:bTe},wTe=".ag-paging-panel{align-items:center;border-top:var(--ag-footer-row-border);display:flex;gap:calc(var(--ag-spacing)*4);height:var(--ag-pagination-panel-height);justify-content:flex-end;padding:0 var(--ag-cell-horizontal-padding)}:where(.ag-paging-page-size) .ag-wrapper{min-width:50px}.ag-paging-page-summary-panel{align-items:center;display:flex;gap:var(--ag-cell-widget-spacing);.ag-disabled &{pointer-events:none}}.ag-paging-button{cursor:pointer;position:relative;&.ag-disabled{cursor:default;opacity:.5}}.ag-paging-number,.ag-paging-row-summary-panel-number{font-weight:500}",CTe=class extends bxe{constructor(){super(),this.btFirst=Yn,this.btPrevious=Yn,this.btNext=Yn,this.btLast=Yn,this.lbRecordCount=Yn,this.lbFirstRowOnPage=Yn,this.lbLastRowOnPage=Yn,this.lbCurrent=Yn,this.lbTotal=Yn,this.pageSizeComp=Yn,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1,this.registerCSS(wTe)}wireBeans(e){this.rowModel=e.rowModel,this.pagination=e.pagination,this.ariaAnnounce=e.ariaAnnounce}postConstruct(){const e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[xTe]);const{btFirst:t,btPrevious:n,btNext:i,btLast:r}=this;this.activateTabIndex([t,n,i,r]),t.insertAdjacentElement("afterbegin",Gc(e?"last":"first",this.beans)),n.insertAdjacentElement("afterbegin",Gc(e?"next":"previous",this.beans)),i.insertAdjacentElement("afterbegin",Gc(e?"previous":"next",this.beans)),r.insertAdjacentElement("afterbegin",Gc(e?"first":"last",this.beans)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:o=>this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(o):Fbe(this.beans,o),forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){const t=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){if(!this.areListenersSetup){this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)});for(const e of[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}]){const{el:t,fn:n}=e;this.addManagedListeners(t,{click:n,keydown:i=>{(i.key===kt.ENTER||i.key===kt.SPACE)&&(i.preventDefault(),n())}})}Dbe(this.beans,this,this.getGui()),this.areListenersSetup=!0}}onBtFirst(){this.previousAndFirstButtonsDisabled||this.pagination.goToFirstPage()}formatNumber(e){const t=this.gos.getCallback("paginationNumberFormatter");return t?t({value:e}):QSe(e,this.getLocaleTextFunc.bind(this))}getTemplate(){const e=this.getLocaleTextFunc(),t=`ag-${this.getCompId()}`;return{tag:"div",cls:"ag-paging-panel ag-unselectable",attrs:{id:`${t}`},children:[{tag:"ag-page-size-selector",ref:"pageSizeComp"},{tag:"span",cls:"ag-paging-row-summary-panel",children:[{tag:"span",ref:"lbFirstRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-first-row`}},{tag:"span",attrs:{id:`${t}-to`},children:e("to","to")},{tag:"span",ref:"lbLastRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-last-row`}},{tag:"span",attrs:{id:`${t}-of`},children:e("of","of")},{tag:"span",ref:"lbRecordCount",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-row-count`}}]},{tag:"span",cls:"ag-paging-page-summary-panel",role:"presentation",children:[{tag:"div",ref:"btFirst",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("firstPage","First Page")}},{tag:"div",ref:"btPrevious",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("previousPage","Previous Page")}},{tag:"span",cls:"ag-paging-description",children:[{tag:"span",attrs:{id:`${t}-start-page`},children:e("page","Page")},{tag:"span",ref:"lbCurrent",cls:"ag-paging-number",attrs:{id:`${t}-start-page-number`}},{tag:"span",attrs:{id:`${t}-of-page`},children:e("of","of")},{tag:"span",ref:"lbTotal",cls:"ag-paging-number",attrs:{id:`${t}-of-page-number`}}]},{tag:"div",ref:"btNext",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("nextPage","Next Page")}},{tag:"div",ref:"btLast",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("lastPage","Last Page")}}]}]}}onBtNext(){this.nextButtonDisabled||this.pagination.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.pagination.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.pagination.goToLastPage()}enableOrDisableButtons(){const e=this.pagination.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),n=this.pagination.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const i=this.isZeroPagesToDisplay(),r=e===n-1;this.nextButtonDisabled=r||i,this.lastButtonDisabled=!t||i||e===n-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){Nge(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages();return e&&t===0}updateLabels(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages(),n=this.pagination.getMasterRowCount(),i=e?n:null,r=this.pagination.getCurrentPage(),o=this.pagination.getPageSize();let s,a;this.isZeroPagesToDisplay()?s=a=0:(s=o*r+1,a=s+o-1,e&&a>i&&(a=i));const d=s+o-1,h=!e&&n<d,m=this.formatNumber(s);this.lbFirstRowOnPage.textContent=m;let v;const w=this.getLocaleTextFunc();h?v=w("pageLastRowUnknown","?"):v=this.formatNumber(a),this.lbLastRowOnPage.textContent=v;const L=t>0?r+1:0,O=this.formatNumber(L);this.lbCurrent.textContent=O;let z,$;if(e)z=this.formatNumber(t),$=this.formatNumber(i);else{const U=w("more","more");z=U,$=U}this.lbTotal.textContent=z,this.lbRecordCount.textContent=$,this.announceAriaStatus(m,v,$,O,z)}announceAriaStatus(e,t,n,i,r){var v,w;const o=this.getLocaleTextFunc(),s=o("page","Page"),a=o("to","to"),d=o("of","of"),h=`${e} ${a} ${t} ${d} ${n}`,m=`${s} ${i} ${d} ${r}`;h!==this.ariaRowStatus&&(this.ariaRowStatus=h,(v=this.ariaAnnounce)==null||v.announceValue(h,"paginationRow")),m!==this.ariaPageStatus&&(this.ariaPageStatus=m,(w=this.ariaAnnounce)==null||w.announceValue(m,"paginationPage"))}},_Te={selector:"AG-PAGINATION",component:CTe},STe=class extends Yt{constructor(){super(...arguments),this.beanName="pagination",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}postConstruct(){const e=this.gos;this.active=e.get("pagination"),this.pageSizeFromGridOptions=e.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return _Te}isPaginateChildRows(){const e=this.gos;return e.get("groupHideParentOfSingleChild")||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren")?!0:e.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){const t=this.currentPage;if(!this.active||t===e||typeof t!="number")return;const{editSvc:n}=this.beans;n!=null&&n.isEditing()&&(n.isBatchEditing()?n.cleanupEditors():n.stopEditing(void 0,{source:"api"})),this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0})}goToPageWithIndex(e){var n,i;if(!this.active)return;let t=e;this.paginateChildRows||(t=((i=(n=this.beans.rowModel).getTopLevelIndexFromDisplayedIndex)==null?void 0:i.call(n,e))??e),this.goToPage(Math.floor(t/this.pageSize))}isRowInPage(e){return this.active?e>=this.topDisplayedRowIndex&&e<=this.bottomDisplayedRowIndex:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.beans.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return Dn(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:Dn(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:Dn(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:Dn(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.beans.pageBounds.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){const n=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}n!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){const e=this.totalPages;this.currentPage>=e&&(this.currentPage=e-1);const t=this.currentPage;(!isFinite(t)||isNaN(t)||t<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){const e=this.beans.rowModel,t=e.getTopLevelRowCount();if(this.masterRowCount=t,t<=0){this.setZeroRows();return}const n=this.pageSize,i=t-1;this.totalPages=Math.floor(i/n)+1,this.adjustCurrentPageIfInvalid();const r=this.currentPage,o=n*r;let s=n*(r+1)-1;if(s>i&&(s=i),this.topDisplayedRowIndex=e.getTopLevelRowDisplayedIndex(o),s===i)this.bottomDisplayedRowIndex=e.getRowCount()-1;else{const a=e.getTopLevelRowDisplayedIndex(s+1);this.bottomDisplayedRowIndex=a-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){const e=this.beans.rowModel.getRowCount();if(this.masterRowCount=e,e===0){this.setZeroRows();return}const{pageSize:t,currentPage:n}=this,i=e-1;this.totalPages=Math.floor(i/t)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=t*n,this.bottomDisplayedRowIndex=t*(n+1)-1,this.bottomDisplayedRowIndex>i&&(this.bottomDisplayedRowIndex=i)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.beans.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){const{keepRenderedRows:t=!1,newPage:n=!1,newPageSize:i=!1}=e;this.eventSvc.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:n,newPageSize:i,keepRenderedRows:t})}},ETe={moduleName:"Pagination",version:Fn,beans:[STe,yTe],icons:{first:"first",previous:"previous",next:"next",last:"last"},apiFunctions:{paginationIsLastPageFound:aTe,paginationGetPageSize:lTe,paginationGetCurrentPage:uTe,paginationGetTotalPages:cTe,paginationGetRowCount:dTe,paginationGoToNextPage:hTe,paginationGoToPreviousPage:fTe,paginationGoToFirstPage:pTe,paginationGoToLastPage:gTe,paginationGoToPage:mTe},dependsOn:[tE]};function RTe(e,t={}){const n=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(n))}function EV(e,t,n,i,r){t&&(i&&t.parent&&t.parent.level!==-1&&EV(e,t.parent,n,i,r),t.setExpanded(n,void 0,r))}function ATe(e,t){return e.rowModel.getRowNode(t)}function TTe(e,t,n,i){e.rowRenderer.addRenderedRowListener(t,n,i)}function kTe(e){return e.rowRenderer.getRenderedNodes()}function PTe(e,t,n){e.rowModel.forEachNode(t,n)}function DTe(e){return e.rowRenderer.firstRenderedRow}function FTe(e){return e.rowRenderer.lastRenderedRow}function MTe(e,t){return e.rowModel.getRow(t)}function ITe(e){return e.rowModel.getRowCount()}var LTe={moduleName:"RowApi",version:Fn,apiFunctions:{redrawRows:RTe,setRowNodeExpanded:EV,getRowNode:ATe,addRenderedRowListener:TTe,getRenderedNodes:kTe,forEachNode:PTe,getFirstDisplayedRowIndex:DTe,getLastDisplayedRowIndex:FTe,getDisplayedRowAtIndex:MTe,getDisplayedRowCount:ITe}},OTe={moduleName:"ScrollApi",version:Fn,apiFunctions:{getVerticalPixelRange:qEe,getHorizontalPixelRange:KEe,ensureColumnVisible:dV,ensureIndexVisible:hV,ensureNodeVisible:ZEe}};function zTe(e,t,n){if(!t)return;const i=e.ctrlsSvc.getGridBodyCtrl().eGridBody,r=`aria-${t}`;n===null?i.removeAttribute(r):i.setAttribute(r,n)}function NTe(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))}function BTe(e){e.frameworkOverrides.wrapIncoming(()=>{for(const t of e.ctrlsSvc.getHeaderRowContainerCtrls())t.refresh()})}function GTe(e){var t;return((t=e.animationFrameSvc)==null?void 0:t.isQueueEmpty())??!0}function jTe(e){var t;(t=e.animationFrameSvc)==null||t.flushAllFrames()}function HTe(e){return{rowHeight:n0(e),headerHeight:J1(e)}}function VTe(e,t={}){var o;const n=[];for(const s of e.rowRenderer.getCellCtrls(t.rowNodes,t.columns)){const a=s.getCellRenderer();a!=null&&n.push(c1(a))}if((o=t.columns)!=null&&o.length)return n;const i=[],r=Uk(t.rowNodes);for(const s of e.rowRenderer.getAllRowCtrls()){if(r&&!qk(s.rowNode,r)||!s.isFullWidth())continue;const a=s.getFullWidthCellRenderers();for(let d=0;d<a.length;d++){const h=a[d];h!=null&&i.push(c1(h))}}return[...i,...n]}var $Te={moduleName:"RenderApi",version:Fn,apiFunctions:{setGridAriaProperty:zTe,refreshCells:NTe,refreshHeader:BTe,isAnimationFrameQueueEmpty:GTe,flushAllAnimationFrames:jTe,getSizesForCurrentTheme:HTe,getCellRendererInstances:VTe}},WTe=":where(.ag-ltr) :where(.ag-animate-autosize){.ag-cell,.ag-header-cell,.ag-header-group-cell{transition:width .2s ease-in-out,left .2s ease-in-out}}:where(.ag-rtl) :where(.ag-animate-autosize){.ag-cell,.ag-header-cell,.ag-header-group-cell{transition:width .2s ease-in-out,right .2s ease-in-out}}";function UTe(e,t){var n,i;typeof t=="number"?(n=e.colAutosize)==null||n.sizeColumnsToFit(t,"api"):(i=e.colAutosize)==null||i.sizeColumnsToFitGridBody(t)}function RV({colAutosize:e,visibleCols:t},n,i){Array.isArray(n)?e==null||e.autoSizeCols({colKeys:n,skipHeader:i,source:"api"}):e==null||e.autoSizeCols({...n,colKeys:n.colIds??t.allCols,source:"api"})}function qTe(e,t){var n;t&&typeof t=="object"?RV(e,t):(n=e.colAutosize)==null||n.autoSizeAllColumns({source:"api",skipHeader:t})}var KTe=class extends Yt{constructor(){super(...arguments),this.beanName="colAutosize",this.timesDelayed=0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}postConstruct(){var n;const{gos:e}=this,t=e.get("autoSizeStrategy");if(t){let i=!1;const r=t.type;if(r==="fitGridWidth"||r==="fitProvidedWidth")i=!0;else if(r==="fitCellContents"){this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered(t)});const o=e.get("rowData");i=o!=null&&o.length>0&&Ks(e)}i&&((n=this.beans.colDelayRenderSvc)==null||n.hideColumns(r))}}autoSizeCols(e){const{eventSvc:t,visibleCols:n,colModel:i}=this.beans;gw(this.beans,!0),this.innerAutoSizeCols(e).then(r=>{var m;const o=v=>rx(t,Array.from(v),!0,"autosizeColumns");if(!e.scaleUpToFitGridWidth)return gw(this.beans,!1),o(r);const s=k6(this.beans),a=v=>n.leftCols.some(w=>Mw(w,v)),d=v=>n.rightCols.some(w=>Mw(w,v)),h=e.colKeys.filter(v=>{var R;return!((R=i.getCol(v))!=null&&R.getColDef().suppressAutoSize)&&!im(v)&&!a(v)&&!d(v)});this.sizeColumnsToFit(s,e.source,!0,{defaultMaxWidth:e.defaultMaxWidth,defaultMinWidth:e.defaultMinWidth,columnLimits:(m=e.columnLimits)==null?void 0:m.map(v=>({...v,key:v.colId})),colKeys:h,onlyScaleUp:!0,animate:!1}),gw(this.beans,!1),o(r)})}innerAutoSizeCols(e){return new Promise((t,n)=>{if(this.shouldQueueResizeOperations)return this.pushResizeOperation(()=>this.innerAutoSizeCols(e).then(t,n));const{colKeys:i,skipHeader:r,skipHeaderGroups:o,stopAtGroup:s,defaultMaxWidth:a,defaultMinWidth:d,columnLimits:h=[],source:m="api"}=e,{animationFrameSvc:v,renderStatus:w,colModel:R,autoWidthCalc:L,visibleCols:O}=this.beans;if(v==null||v.flushAllFrames(),this.timesDelayed<5&&w&&(!w.areHeaderCellsRendered()||!w.areCellsRendered())){this.timesDelayed++,setTimeout(()=>{this.isAlive()&&this.innerAutoSizeCols(e).then(t,n)});return}this.timesDelayed=0;const z=new Set;let $=-1;const U=Object.fromEntries(h.map(({colId:q,...ie})=>[q,ie])),Y=r??this.gos.get("skipHeaderOnAutoSize"),X=o??Y;for(;$!==0;){$=0;const q=[];for(const ie of i){if(!ie||Qme(ie))continue;const re=R.getCol(ie);if(!re||z.has(re)||re.getColDef().suppressAutoSize)continue;const J=L.getPreferredWidthForColumn(re,Y);if(J>0){const ne=U[re.colId]??{};ne.minWidth??(ne.minWidth=d),ne.maxWidth??(ne.maxWidth=a);const be=ZTe(re,J,ne);re.setActualWidth(be,m),z.add(re),$++}q.push(re)}q.length&&O.refresh(m)}X||this.autoSizeColumnGroupsByColumns(i,m,s),t(z)})}autoSizeColumn(e,t,n){this.autoSizeCols({colKeys:[e],skipHeader:n,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,n){const{colModel:i,ctrlsSvc:r}=this.beans,o=new Set,s=i.getColsForKeys(e);for(const d of s){let h=d.getParent();for(;h&&h!=n;)h.isPadding()||o.add(h),h=h.getParent()}let a;for(const d of o){for(const h of r.getHeaderRowContainerCtrls())if(a=h.getHeaderCtrlForColumn(d),a)break;a==null||a.resizeLeafColumnsToFit(t)}}autoSizeAllColumns(e){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.autoSizeAllColumns(e));return}this.autoSizeCols({colKeys:this.beans.visibleCols.allCols,...e})}addColumnAutosizeListeners(e,t){const n=this.gos.get("skipHeaderOnAutoSize"),i=()=>{this.autoSizeColumn(t,"uiColumnResized",n)};e.addEventListener("dblclick",i);const r=new Hv(e);return r.addEventListener("doubleTap",i),()=>{e.removeEventListener("dblclick",i),r.destroy()}}addColumnGroupResize(e,t,n){const i=this.gos.get("skipHeaderOnAutoSize"),r=()=>{const o=[],s=t.getDisplayedLeafColumns();for(const a of s)a.getColDef().suppressAutoSize||o.push(a.getColId());o.length>0&&this.autoSizeCols({colKeys:o,skipHeader:i,stopAtGroup:t,source:"uiColumnResized"}),n()};return e.addEventListener("dblclick",r),()=>e.removeEventListener("dblclick",r)}sizeColumnsToFitGridBody(e,t){if(!this.isAlive())return;const n=k6(this.beans);if(n>0){this.sizeColumnsToFit(n,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,-1)},500):an(29)}sizeColumnsToFit(e,t="sizeColumnsToFit",n,i){var z,$;if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,n,i));return}const{beans:r}=this,o=(i==null?void 0:i.animate)??!0;o&&gw(r,!0);const s={};for(const{key:U,...Y}of(i==null?void 0:i.columnLimits)??[])s[typeof U=="string"?U:U.getColId()]=Y;const a=r.visibleCols.allCols;if(e<=0||!a.length)return;const d=Wg(a);if(i!=null&&i.onlyScaleUp&&d>e||e===d&&a.every(Y=>{if(Y.colDef.suppressSizeToFit)return!0;const X=s==null?void 0:s[Y.getId()],q=(X==null?void 0:X.minWidth)??(i==null?void 0:i.defaultMinWidth),ie=(X==null?void 0:X.maxWidth)??(i==null?void 0:i.defaultMaxWidth),re=Y.getActualWidth();return(q==null||re>=q)&&(ie==null||re<=ie)}))return;const m=[],v=[];for(const U of a){const Y=((z=i==null?void 0:i.colKeys)==null?void 0:z.some(X=>Mw(U,X)))??!0;U.getColDef().suppressSizeToFit||!Y?v.push(U):m.push(U)}const w=m.slice(0);let R=!1;const L=U=>{Bp(m,U),v.push(U)};for(const U of m){U.resetActualWidth(t);const Y=s==null?void 0:s[U.getId()],X=(Y==null?void 0:Y.minWidth)??(i==null?void 0:i.defaultMinWidth),q=(Y==null?void 0:Y.maxWidth)??(i==null?void 0:i.defaultMaxWidth),ie=U.getActualWidth();typeof X=="number"&&ie<X?U.setActualWidth(X,t,!0):typeof q=="number"&&ie>q&&U.setActualWidth(q,t,!0)}for(;!R;){R=!0;const U=e-Wg(v);if(U<=0)for(const Y of m){const X=(($=s==null?void 0:s[Y.getId()])==null?void 0:$.minWidth)??(i==null?void 0:i.defaultMinWidth)??Y.minWidth;Y.setActualWidth(X,t,!0)}else{const Y=U/Wg(m);let X=U;for(let q=m.length-1;q>=0;q--){const ie=m[q],re=s==null?void 0:s[ie.getId()],J=(re==null?void 0:re.minWidth)??(i==null?void 0:i.defaultMinWidth),ne=(re==null?void 0:re.maxWidth)??(i==null?void 0:i.defaultMaxWidth),be=ie.getMinWidth(),ue=ie.getMaxWidth(),ve=typeof J=="number"&&J>be?J:be,ce=typeof ne=="number"&&ne<ue?ne:ue;let Ie=Math.round(ie.getActualWidth()*Y);Ie<ve?(Ie=ve,L(ie),R=!1):Ie>ce?(Ie=ce,L(ie),R=!1):q===0&&(Ie=X),ie.setActualWidth(Ie,t,!0),X-=Ie}}}for(const U of w)U.fireColumnWidthChangedEvent(t);const O=r.visibleCols;O.setLeftValues(t),O.updateBodyWidths(),!n&&(rx(this.eventSvc,w,!0,t),o&&gw(r,!1))}applyAutosizeStrategy(){const{gos:e,colDelayRenderSvc:t}=this.beans,n=e.get("autoSizeStrategy");(n==null?void 0:n.type)!=="fitGridWidth"&&(n==null?void 0:n.type)!=="fitProvidedWidth"||setTimeout(()=>{if(!this.isAlive())return;const i=n.type;if(i==="fitGridWidth"){const{columnLimits:r,defaultMinWidth:o,defaultMaxWidth:s}=n,a=r==null?void 0:r.map(({colId:d,minWidth:h,maxWidth:m})=>({key:d,minWidth:h,maxWidth:m}));this.sizeColumnsToFitGridBody({defaultMinWidth:o,defaultMaxWidth:s,columnLimits:a})}else i==="fitProvidedWidth"&&this.sizeColumnsToFit(n.width,"sizeColumnsToFit");t==null||t.revealColumns(i)})}onFirstDataRendered({colIds:e,...t}){setTimeout(()=>{var i;if(!this.isAlive())return;const n="autosizeColumns";e?this.autoSizeCols({...t,source:n,colKeys:e}):this.autoSizeAllColumns({...t,source:n}),(i=this.beans.colDelayRenderSvc)==null||i.revealColumns(t.type)})}processResizeOperations(){this.shouldQueueResizeOperations=!1;for(const e of this.resizeOperationQueue)e();this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}destroy(){this.resizeOperationQueue.length=0,super.destroy()}};function ZTe(e,t,n={}){const i=n.minWidth??e.getMinWidth();t<i&&(t=i);const r=n.maxWidth??e.getMaxWidth();return t>r&&(t=r),t}function k6({ctrlsSvc:e,scrollVisibleSvc:t}){const n=e.getGridBodyCtrl(),r=n.isVerticalScrollShowing()?t.getScrollbarWidth():0;return s1(n.eGridBody)-r}var P6="ag-animate-autosize";function gw({ctrlsSvc:e,gos:t},n){if(!t.get("animateColumnResizing")||t.get("enableRtl")||!e.isAlive())return;const i=e.getGridBodyCtrl().eGridBody.classList;n?i.add(P6):i.remove(P6)}var YTe={moduleName:"ColumnAutoSize",version:Fn,beans:[KTe],apiFunctions:{sizeColumnsToFit:UTe,autoSizeColumns:RV,autoSizeAllColumns:qTe},dependsOn:[TH],css:[WTe]},XTe=".ag-row-pinned-source{background-color:var(--ag-pinned-source-row-background-color);color:var(--ag-pinned-source-row-text-color);font-weight:var(--ag-pinned-source-row-font-weight)}.ag-row-pinned-manual{background-color:var(--ag-pinned-row-background-color);color:var(--ag-pinned-row-text-color);font-weight:var(--ag-pinned-row-font-weight)}";function JTe(e){var t;return((t=e.pinnedRowModel)==null?void 0:t.getPinnedTopRowCount())??0}function QTe(e){var t;return((t=e.pinnedRowModel)==null?void 0:t.getPinnedBottomRowCount())??0}function eke(e,t){var n;return(n=e.pinnedRowModel)==null?void 0:n.getPinnedTopRow(t)}function tke(e,t){var n;return(n=e.pinnedRowModel)==null?void 0:n.getPinnedBottomRow(t)}function nke(e,t,n){var i;return(i=e.pinnedRowModel)==null?void 0:i.forEachPinnedRow(t,n)}var ike={moduleName:"PinnedRow",version:Fn,beans:[hxe],css:[XTe],apiFunctions:{getPinnedTopRowCount:JTe,getPinnedBottomRowCount:QTe,getPinnedTopRow:eke,getPinnedBottomRow:tke,forEachPinnedRow:nke},icons:{rowPin:"pin",rowPinTop:"pinned-top",rowPinBottom:"pinned-bottom",rowUnpin:"un-pin"}},rke=class{constructor(e,t){this.col=e,this.firstNode=t,this.cellSpan=!0,this.spannedNodes=new Set,this.addSpannedNode(t)}reset(){this.spannedNodes.clear(),this.addSpannedNode(this.firstNode)}addSpannedNode(e){this.spannedNodes.add(e),this.lastNode=e}getLastNode(){return this.lastNode}getCellHeight(){return this.lastNode.rowTop+this.lastNode.rowHeight-this.firstNode.rowTop-1}doesSpanContain(e){return e.column!==this.col||e.rowPinned!=this.firstNode.rowPinned?!1:this.firstNode.rowIndex<=e.rowIndex&&e.rowIndex<=this.lastNode.rowIndex}getLastNodeAutoHeight(){var n;const e=(n=this.firstNode.__autoHeights)==null?void 0:n[this.col.getColId()];if(e==null)return;let t=0;for(const i of this.spannedNodes)i!==this.lastNode&&(t+=i.rowHeight);return e-t}},oke=class extends Yt{constructor(e){super(),this.column=e}buildCache(e){var Y;const{column:t,beans:{gos:n,pinnedRowModel:i,rowModel:r,valueSvc:o,pagination:s}}=this,{colDef:a}=t,d=this.getNodeMap(e),h=new Map,m=n.getCallback("isFullWidthRow"),v=a.equals,w=a.spanRows,R=typeof w=="function";let L=null,O=null,z;const $=(X,q)=>{L=X,O=null,z=q},U=X=>{const q=!X.isExpandable()&&!X.group&&!X.detail&&(m?!m({rowNode:X}):!0);if(X.rowIndex==null||!q){$(null,null);return}if(L==null||X.level!==L.level||X.footer||O&&X.rowIndex-1!==(O==null?void 0:O.getLastNode().rowIndex)){$(X,o.getValue(t,X));return}const ie=o.getValue(t,X);if(R){const re=ki(n,{valueA:z,nodeA:L,valueB:ie,nodeB:X,column:t,colDef:a});if(!w(re)){$(X,ie);return}}else if(v?!v(z,ie):z!==ie){$(X,ie);return}if(!O){const re=d==null?void 0:d.get(L);(re==null?void 0:re.firstNode)===L?(re.reset(),O=re):O=new rke(t,L),h.set(L,O)}O.addSpannedNode(X),h.set(X,O)};switch(e){case"center":(Y=r.forEachDisplayedNode)==null||Y.call(r,X=>{(!s||s.isRowInPage(X.rowIndex))&&U(X)}),this.centerValueNodeMap=h;break;case"top":i==null||i.forEachPinnedRow("top",U),this.topValueNodeMap=h;break;case"bottom":i==null||i.forEachPinnedRow("bottom",U),this.bottomValueNodeMap=h;break}}isCellSpanning(e){return!!this.getCellSpan(e)}getCellSpan(e){return this.getNodeMap(e.rowPinned).get(e)}getNodeMap(e){switch(e){case"top":return this.topValueNodeMap;case"bottom":return this.bottomValueNodeMap;default:return this.centerValueNodeMap}}},ske=class extends Yt{constructor(){super(...arguments),this.beanName="rowSpanSvc",this.spanningColumns=new Map,this.debouncePinnedEvent=Ll(this,this.dispatchCellsUpdatedEvent.bind(this,!0),0),this.debounceModelEvent=Ll(this,this.dispatchCellsUpdatedEvent.bind(this,!1),0),this.pinnedTimeout=null,this.modelTimeout=null}postConstruct(){const e=this.onRowDataUpdated.bind(this),t=this.buildPinnedCaches.bind(this);this.addManagedEventListeners({paginationChanged:this.buildModelCaches.bind(this),pinnedRowDataChanged:t,pinnedRowsChanged:t,rowNodeDataChanged:e,cellValueChanged:e})}register(e){const{gos:t}=this.beans;if(!t.get("enableCellSpan")||this.spanningColumns.has(e))return;const n=this.createManagedBean(new oke(e));this.spanningColumns.set(e,n),n.buildCache("top"),n.buildCache("bottom"),n.buildCache("center"),this.debouncePinnedEvent(),this.debounceModelEvent()}dispatchCellsUpdatedEvent(e){this.dispatchLocalEvent({type:"spannedCellsUpdated",pinned:e})}deregister(e){this.spanningColumns.delete(e)}onRowDataUpdated({node:e}){const{spannedRowRenderer:t}=this.beans;if(e.rowPinned){if(this.pinnedTimeout!=null)return;this.pinnedTimeout=window.setTimeout(()=>{this.pinnedTimeout=null,this.buildPinnedCaches(),t==null||t.createCtrls("top"),t==null||t.createCtrls("bottom")},0);return}this.modelTimeout==null&&(this.modelTimeout=window.setTimeout(()=>{this.modelTimeout=null,this.buildModelCaches(),t==null||t.createCtrls("center")},0))}buildModelCaches(){this.modelTimeout!=null&&clearTimeout(this.modelTimeout),this.spanningColumns.forEach(e=>e.buildCache("center")),this.debounceModelEvent()}buildPinnedCaches(){this.pinnedTimeout!=null&&clearTimeout(this.pinnedTimeout),this.spanningColumns.forEach(e=>{e.buildCache("top"),e.buildCache("bottom")}),this.debouncePinnedEvent()}isCellSpanning(e,t){const n=this.spanningColumns.get(e);return n?n.isCellSpanning(t):!1}getCellSpanByPosition(e){const{pinnedRowModel:t,rowModel:n}=this.beans,i=e.column,r=e.rowIndex,o=this.spanningColumns.get(i);if(!o)return;let s;switch(e.rowPinned){case"top":s=t==null?void 0:t.getPinnedTopRow(r);break;case"bottom":s=t==null?void 0:t.getPinnedBottomRow(r);break;default:s=n.getRow(r)}if(s)return o.getCellSpan(s)}getCellStart(e){const t=this.getCellSpanByPosition(e);return t?{...e,rowIndex:t.firstNode.rowIndex}:e}getCellEnd(e){const t=this.getCellSpanByPosition(e);return t?{...e,rowIndex:t.getLastNode().rowIndex}:e}getCellSpan(e,t){const n=this.spanningColumns.get(e);if(n)return n.getCellSpan(t)}forEachSpannedColumn(e,t){for(const[n,i]of this.spanningColumns)if(i.isCellSpanning(e)){const r=i.getCellSpan(e);t(n,r)}}destroy(){super.destroy(),this.spanningColumns.clear()}},ake=class extends Vb{constructor(e,t,n){super(e.col,e.firstNode,n,t),this.cellSpan=e,this.SPANNED_CELL_CSS_CLASS="ag-spanned-cell"}setComp(e,t,n,i,r,o,s){this.eWrapper=n,super.setComp(e,t,n,i,r,o,s),this.setAriaRowSpan(),this.refreshAriaRowIndex()}isCellSpanning(){return!0}getCellSpan(){return this.cellSpan}refreshAriaRowIndex(){const{eGui:e,rowNode:t}=this;!e||t.rowIndex==null||L9(e,t.rowIndex)}setAriaRowSpan(){Hge(this.eGui,this.cellSpan.spannedNodes.size)}setFocusedCellPosition(e){this.focusedCellPosition=e}getFocusedCellPosition(){return this.focusedCellPosition??this.cellPosition}checkCellFocused(){const e=this.beans.focusSvc.getFocusedCell();return!!e&&this.cellSpan.doesSpanContain(e)}applyStaticCssClasses(){super.applyStaticCssClasses(),this.comp.toggleCss(this.SPANNED_CELL_CSS_CLASS,!0)}onCellFocused(e){const{beans:t}=this;if(X2(t)){this.focusedCellPosition=void 0;return}const n=this.isCellFocused();n||(this.focusedCellPosition=void 0),e&&n&&(this.focusedCellPosition={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column}),super.onCellFocused(e)}getRootElement(){return this.eWrapper}},lke=class extends GS{onRowIndexChanged(){super.onRowIndexChanged();for(const e of this.getAllCellCtrls())e.refreshAriaRowIndex()}getInitialRowClasses(e){return["ag-spanned-row"]}getNewCellCtrl(e){var i;const t=(i=this.beans.rowSpanSvc)==null?void 0:i.getCellSpan(e,this.rowNode);if(!(!t||t.firstNode!==this.rowNode))return new ake(t,this,this.beans)}isCorrectCtrlForSpan(e){var i;const t=(i=this.beans.rowSpanSvc)==null?void 0:i.getCellSpan(e.column,this.rowNode);return!t||t.firstNode!==this.rowNode?!1:e.getCellSpan()===t}onRowHeightChanged(){}refreshFirstAndLastRowStyles(){}addHoverFunctionality(){}resetHoveredStatus(){}},uke=class extends Yt{constructor(){super(...arguments),this.beanName="spannedRowRenderer",this.topCtrls=new Map,this.bottomCtrls=new Map,this.centerCtrls=new Map}postConstruct(){this.addManagedEventListeners({displayedRowsChanged:this.createAllCtrls.bind(this)})}createAllCtrls(){this.createCtrls("top"),this.createCtrls("bottom"),this.createCtrls("center")}createCtrls(e){const{rowSpanSvc:t}=this.beans,n=this.getCtrlsMap(e),i=n.size,r=this.getAllRelevantRowControls(e),o=new Map;let s=!1;for(const d of r)d.isAlive()&&(t==null||t.forEachSpannedColumn(d.rowNode,(h,m)=>{if(o.has(m.firstNode))return;const v=n.get(m.firstNode);if(v){o.set(m.firstNode,v),n.delete(m.firstNode);return}s=!0;const w=new lke(m.firstNode,this.beans,!1,!1,!1);o.set(m.firstNode,w)}));this.setCtrlsMap(e,o);const a=o.size===i;if(!(!s&&a)){for(const d of n.values())d.destroyFirstPass(!0),d.destroySecondPass();this.dispatchLocalEvent({type:"spannedRowsUpdated",ctrlsKey:e})}}getAllRelevantRowControls(e){const{rowRenderer:t}=this.beans;switch(e){case"top":return t.topRowCtrls;case"bottom":return t.bottomRowCtrls;case"center":return t.allRowCtrls}}getCellByPosition(e){const{rowSpanSvc:t}=this.beans,n=t==null?void 0:t.getCellSpanByPosition(e);if(!n)return;const i=this.getCtrlsMap(e.rowPinned).get(n.firstNode);if(i)return i.getAllCellCtrls().find(r=>r.column===e.column)}getCtrls(e){return[...this.getCtrlsMap(e).values()]}destroyRowCtrls(e){for(const t of this.getCtrlsMap(e).values())t.destroyFirstPass(!0),t.destroySecondPass();this.setCtrlsMap(e,new Map)}getCtrlsMap(e){switch(e){case"top":return this.topCtrls;case"bottom":return this.bottomCtrls;default:return this.centerCtrls}}setCtrlsMap(e,t){switch(e){case"top":this.topCtrls=t;break;case"bottom":this.bottomCtrls=t;break;default:this.centerCtrls=t;break}}destroy(){super.destroy(),this.destroyRowCtrls("top"),this.destroyRowCtrls("bottom"),this.destroyRowCtrls("center")}},cke={moduleName:"CellSpan",version:Fn,beans:[ske,uke]},dke=class extends Yt{constructor(e,t){super(),this.cellCtrl=e,this.staticClasses=[],this.beans=t,this.column=e.column}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const{column:e,cellComp:t}=this,n=e.colDef,i=n.cellClassRules,r=this.getCellClassParams(e,n);tM(this.beans.expressionSvc,i===this.cellClassRules?void 0:this.cellClassRules,i,r,o=>t.toggleCss(o,!0),o=>t.toggleCss(o,!1)),this.cellClassRules=i}applyUserStyles(){const e=this.column,t=e.colDef,n=t.cellStyle;if(!n)return;let i;if(typeof n=="function"){const r=this.getCellClassParams(e,t);i=n(r)}else i=n;i&&this.cellComp.setUserStyles(i)}applyClassesFromColDef(){const{column:e,cellComp:t}=this,n=e.colDef,i=this.getCellClassParams(e,n);for(const o of this.staticClasses)t.toggleCss(o,!1);const r=this.beans.cellStyles.getStaticCellClasses(n,i);this.staticClasses=r;for(const o of r)t.toggleCss(o,!0)}getCellClassParams(e,t){const{value:n,rowNode:i}=this.cellCtrl;return ki(this.beans.gos,{value:n,data:i.data,node:i,colDef:t,column:e,rowIndex:i.rowIndex})}},hke=class extends Yt{constructor(){super(...arguments),this.beanName="cellStyles"}processAllCellClasses(e,t,n,i){tM(this.beans.expressionSvc,void 0,e.cellClassRules,t,n,i),this.processStaticCellClasses(e,t,n)}getStaticCellClasses(e,t){const{cellClass:n}=e;if(!n)return[];let i;return typeof n=="function"?i=n(t):i=n,typeof i=="string"&&(i=[i]),i||[]}createCellCustomStyleFeature(e){return new dke(e,this.beans)}processStaticCellClasses(e,t,n){this.getStaticCellClasses(e,t).forEach(r=>{n(r)})}},fke={moduleName:"CellStyle",version:Fn,beans:[hke]},pke={moduleName:"RowStyle",version:Fn,beans:[G_e]};function gke(e,t){var n;return!!((n=e.colHover)!=null&&n.isHovered(t))}var mke=class extends Yt{constructor(e,t){super(),this.columns=e,this.element=t,this.destroyManagedListeners=[],this.enableFeature=n=>{const{beans:i,gos:r,element:o,columns:s}=this,a=i.colHover;if(n??!!r.get("columnHoverHighlight"))this.destroyManagedListeners=this.addManagedElementListeners(o,{mouseover:a.setMouseOver.bind(a,s),mouseout:a.clearMouseOver.bind(a)});else{for(const h of this.destroyManagedListeners)h();this.destroyManagedListeners=[]}}}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",({currentValue:e})=>{this.enableFeature(e)}),this.enableFeature()}destroy(){super.destroy(),this.destroyManagedListeners=null}},yke="ag-column-hover",vke=class extends Yt{constructor(){super(...arguments),this.beanName="colHover"}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",({currentValue:e})=>{e||this.clearMouseOver()})}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){if(!this.gos.get("columnHoverHighlight"))return!1;const t=this.selectedColumns;return!!t&&t.indexOf(e)>=0}addHeaderColumnHoverListener(e,t,n){const i=()=>{const r=this.isHovered(n);t.toggleCss("ag-column-hover",r)};e.addManagedEventListeners({columnHoverChanged:i}),i()}onCellColumnHover(e,t){if(!t)return;const n=this.isHovered(e);t.toggleCss(yke,n)}addHeaderFilterColumnHoverListener(e,t,n,i){this.createHoverFeature(e,[n],i);const r=()=>{const o=this.isHovered(n);t.toggleCss("ag-column-hover",o)};e.addManagedEventListeners({columnHoverChanged:r}),r()}createHoverFeature(e,t,n){e.createManagedBean(new mke(t,n))}updateState(e){this.selectedColumns=e,this.eventSvc.dispatchEvent({type:"columnHoverChanged"})}},bke={moduleName:"ColumnHover",version:Fn,beans:[vke],apiFunctions:{isColumnHovered:gke}},xke=class extends Yt{constructor(){super(...arguments),this.beanName="apiEventSvc",this.syncListeners=new Map,this.asyncListeners=new Map,this.syncGlobalListeners=new Set,this.globalListenerPairs=new Map}postConstruct(){var e,t;this.wrapSvc=(t=(e=this.beans.frameworkOverrides).createGlobalEventListenerWrapper)==null?void 0:t.call(e)}addListener(e,t){var o;const n=((o=this.wrapSvc)==null?void 0:o.wrap(e,t))??t,i=!v_.has(e),r=i?this.asyncListeners:this.syncListeners;r.has(e)||r.set(e,new Set),r.get(e).add(n),this.eventSvc.addListener(e,n,i)}removeListener(e,t){var o,s;const n=((o=this.wrapSvc)==null?void 0:o.unwrap(e,t))??t,i=this.asyncListeners.get(e),r=!!(i!=null&&i.delete(n));r||(s=this.syncListeners.get(e))==null||s.delete(n),this.eventSvc.removeListener(e,n,r)}addGlobalListener(e){var o;const t=((o=this.wrapSvc)==null?void 0:o.wrapGlobal(e))??e,n=(s,a)=>{v_.has(s)&&t(s,a)},i=(s,a)=>{v_.has(s)||t(s,a)};this.globalListenerPairs.set(e,{syncListener:n,asyncListener:i});const r=this.eventSvc;r.addGlobalListener(n,!1),r.addGlobalListener(i,!0)}removeGlobalListener(e){const{eventSvc:t,wrapSvc:n,globalListenerPairs:i}=this,r=(n==null?void 0:n.unwrapGlobal(e))??e;if(i.has(r)){const{syncListener:s,asyncListener:a}=i.get(r);t.removeGlobalListener(s,!1),t.removeGlobalListener(a,!0),i.delete(e)}else this.syncGlobalListeners.delete(r),t.removeGlobalListener(r,!1)}destroyEventListeners(e,t){e.forEach((n,i)=>{n.forEach(r=>this.eventSvc.removeListener(i,r,t)),n.clear()}),e.clear()}destroyGlobalListeners(e,t){for(const n of e)this.eventSvc.removeGlobalListener(n,t);e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncListeners,!1),this.destroyEventListeners(this.asyncListeners,!0),this.destroyGlobalListeners(this.syncGlobalListeners,!1);const{globalListenerPairs:e,eventSvc:t}=this;e.forEach(({syncListener:n,asyncListener:i})=>{t.removeGlobalListener(n,!1),t.removeGlobalListener(i,!0)}),e.clear()}};function wke(e,t,n){var i;(i=e.apiEventSvc)==null||i.addListener(t,n)}function Cke(e,t,n){var i;(i=e.apiEventSvc)==null||i.removeListener(t,n)}function _ke(e,t){var n;(n=e.apiEventSvc)==null||n.addGlobalListener(t)}function Ske(e,t){var n;(n=e.apiEventSvc)==null||n.removeGlobalListener(t)}var Eke={moduleName:"EventApi",version:Fn,apiFunctions:{addEventListener:wke,addGlobalListener:_ke,removeEventListener:Cke,removeGlobalListener:Ske},beans:[xke]},Rke={moduleName:"Locale",version:Fn,beans:[ZSe]},Ake=class extends Yt{constructor(){super(...arguments),this.beanName="rowAutoHeight",this.wasEverActive=!1,this._debouncedCalculateRowHeights=Ll(this,this.calculateRowHeights.bind(this),1)}requestCheckAutoHeight(){this.wasEverActive&&this._debouncedCalculateRowHeights()}calculateRowHeights(){var a,d,h,m;const{visibleCols:e,rowModel:t,rowSpanSvc:n,pinnedRowModel:i}=this.beans,r=e.autoHeightCols;let o=!1;const s=v=>{var L;const w=v.__autoHeights;let R=Ly(this.beans,v).height;for(const O of r){let z=w==null?void 0:w[O.getColId()];const $=n==null?void 0:n.getCellSpan(O,v);if($){if($.getLastNode()!==v)continue;if(z=(L=n==null?void 0:n.getCellSpan(O,v))==null?void 0:L.getLastNodeAutoHeight(),!z)return}if(z==null){if(this.colSpanSkipCell(O,v))continue;return}R=Math.max(z,R)}R!==v.rowHeight&&(v.setRowHeight(R),o=!0)};(a=i==null?void 0:i.forEachPinnedRow)==null||a.call(i,"top",s),(d=i==null?void 0:i.forEachPinnedRow)==null||d.call(i,"bottom",s),(h=t.forEachDisplayedNode)==null||h.call(t,s),o&&((m=t.onRowHeightChanged)==null||m.call(t))}setRowAutoHeight(e,t,n){if(e.__autoHeights??(e.__autoHeights={}),t==null){delete e.__autoHeights[n.getId()];return}const i=e.__autoHeights[n.getId()];e.__autoHeights[n.getId()]=t,i!==t&&this.requestCheckAutoHeight()}colSpanSkipCell(e,t){const{colModel:n,colViewport:i,visibleCols:r}=this.beans;if(!n.colSpanActive)return!1;let o=[];switch(e.getPinned()){case"left":o=r.getLeftColsForRow(t);break;case"right":o=r.getRightColsForRow(t);break;case null:o=i.getColsWithinViewport(t);break}return!o.includes(e)}setupCellAutoHeight(e,t,n){if(!e.column.isAutoHeight()||!t)return!1;this.wasEverActive=!0;const i=t.parentElement,{rowNode:r,column:o}=e,s=this.beans,a=m=>{var U;if((U=this.beans.editSvc)!=null&&U.isEditing(e)||!e.isAlive()||!n.isAlive())return;const{paddingTop:v,paddingBottom:w,borderBottomWidth:R,borderTopWidth:L}=_0(i),O=v+w+R+L,$=t.offsetHeight+O;if(m<5){const Y=Il(s),X=!(Y!=null&&Y.contains(t)),q=$==0;if(X||q){window.setTimeout(()=>a(m+1),0);return}}this.setRowAutoHeight(r,$,o)},d=()=>a(0);d();const h=Em(s,t,d);return n.addDestroyFunc(()=>{h(),this.setRowAutoHeight(r,void 0,o)}),!0}setAutoHeightActive(e){this.active=e.list.some(t=>t.isVisible()&&t.isAutoHeight())}areRowsMeasured(){if(!this.active)return!0;const e=this.beans.rowRenderer.getAllRowCtrls();let t=null;for(const{rowNode:n}of e)if((!t||this.beans.colModel.colSpanActive)&&(t=this.beans.colViewport.getColsWithinViewport(n).filter(r=>r.isAutoHeight())),t.length!==0){if(!n.__autoHeights)return!1;for(const i of t){const r=n.__autoHeights[i.getColId()];if(!r||n.rowHeight<r)return!1}}return!0}},Tke={moduleName:"RowAutoHeight",version:Fn,beans:[Ake]},kke={moduleName:"AllCommunity",version:Fn,dependsOn:[RAe,IAe,$Ae,p2e,RRe,ARe,TRe,kRe,PRe,DRe,FRe,ERe,vEe,bEe,xEe,yEe,CEe,_Ee,sTe,rAe,ETe,kH,LTe,OTe,$Te,YTe,nwe,ike,KRe,DSe,fke,bke,pke,Eke,ISe,eTe,cV,Rke,Tke,twe,AAe,cke]},Fu=qt.createContext({}),AV=qt.createContext("default"),tC=(e,t,n,i)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const o=e.newAgStackInstance();let s,a,d=!1;return o.then(h=>{if(d){t.destroyBean(h);return}s=h,a=s.getGui(),n.appendChild(a),D6(i,s)}),()=>{d=!0,s&&(a==null||a.remove(),t.destroyBean(s),i&&D6(i,void 0))}},D6=(e,t)=>{if(e)if(e instanceof Function)e(t);else{const n=e;n.current=t}},hh=(...e)=>e.filter(n=>n!=null&&n!=="").join(" "),gh=class TV{constructor(...t){this.classesMap={};for(const n of t)this.classesMap[n]=!0}setClass(t,n){if(!!this.classesMap[t]==n)return this;const r=new TV;return r.classesMap={...this.classesMap},r.classesMap[t]=n,r}toString(){return Object.keys(this.classesMap).filter(n=>this.classesMap[n]).join(" ")}},Mx=e=>{const t=()=>typeof Symbol=="function"&&Symbol.for,n=()=>t()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===n()},V6,Jk=(V6=qt.version)==null?void 0:V6.split(".")[0],kV=Jk==="16"||Jk==="17";function Pke(){return Jk==="19"}var C_=!1;function Dke(e){return C_||setTimeout(()=>C_=!1,0),C_=!0,e()}var g1=(e,t)=>{!kV&&e&&!C_?kW.flushSync(t):t()},Fke=e=>{kV?e():qt.startTransition(e)};function Mke(e,t,n){return qt.useSyncExternalStore?qt.useSyncExternalStore(e,t):n}function WS(e,t,n){if(t==null||e==null)return t;if(e===t||t.length===0&&e.length===0)return e;if(n||e.length===0&&t.length>0||e.length>0&&t.length===0)return t;const i=[],r=[],o=new Map,s=new Map;for(let a=0;a<t.length;a++){const d=t[a];s.set(d.instanceId,d)}for(let a=0;a<e.length;a++){const d=e[a];o.set(d.instanceId,d),s.has(d.instanceId)&&i.push(d)}for(let a=0;a<t.length;a++){const d=t[a],h=d.instanceId;o.has(h)||r.push(d)}return i.length===e.length&&r.length===0?e:i.length===0&&r.length===t.length?t:i.length===0?r:r.length===0?i:[...i,...r]}var PV=I.forwardRef((e,t)=>{var he;const{registry:n,context:i}=I.useContext(Fu),r=I.useRef(null),o=I.useRef(null),s=I.useRef(null),a=I.useRef(null),d=I.useRef(null),h=I.useRef(),[m,v]=I.useState(),[w,R]=I.useState(),[L,O]=I.useState(),[z,$]=I.useState(()=>new gh),[U,Y]=I.useState(()=>new gh("ag-hidden")),[X,q]=I.useState(()=>new gh("ag-hidden")),[ie,re]=I.useState(()=>new gh("ag-invisible"));I.useImperativeHandle(t,()=>({refresh(){return!1}})),I.useLayoutEffect(()=>tC(m,i,o.current),[m]);const J=I.useCallback(Re=>{if(r.current=Re,!Re||i.isDestroyed()){h.current=i.destroyBean(h.current);return}const De={setInnerRenderer:(_e,Le)=>{v(_e),O(Le)},setChildCount:_e=>R(_e),toggleCss:(_e,Le)=>$(Oe=>Oe.setClass(_e,Le)),setContractedDisplayed:_e=>q(Le=>Le.setClass("ag-hidden",!_e)),setExpandedDisplayed:_e=>Y(Le=>Le.setClass("ag-hidden",!_e)),setCheckboxVisible:_e=>re(Le=>Le.setClass("ag-invisible",!_e)),setCheckboxSpacing:_e=>re(Le=>Le.setClass("ag-group-checkbox-spacing",_e))},Ye=n.createDynamicBean("groupCellRendererCtrl",!0);Ye&&(h.current=i.createBean(Ye),h.current.init(De,Re,s.current,a.current,d.current,PV,e))},[]),ne=I.useMemo(()=>`ag-cell-wrapper ${z.toString()}`,[z]),be=I.useMemo(()=>`ag-group-expanded ${U.toString()}`,[U]),ue=I.useMemo(()=>`ag-group-contracted ${X.toString()}`,[X]),ve=I.useMemo(()=>`ag-group-checkbox ${ie.toString()}`,[ie]),ce=m==null?void 0:m.componentFromFramework,Ie=ce?m.componentClass:void 0,Te=m==null&&L!=null,fe=kx(L);return qt.createElement("span",{className:ne,ref:J,...e.colDef?{}:{role:(he=h.current)==null?void 0:he.getCellAriaRole()}},qt.createElement("span",{className:be,ref:a}),qt.createElement("span",{className:ue,ref:d}),qt.createElement("span",{className:ve,ref:s}),qt.createElement("span",{className:"ag-group-value",ref:o},Te?fe:ce?qt.createElement(Ie,{...m.params}):null),qt.createElement("span",{className:"ag-group-child-count"},w))}),F6=PV,dM=I.createContext({setMethods:()=>{}}),Ike=e=>{const{initialProps:t,addUpdateCallback:n,CustomComponentClass:i,setMethods:r}=e,[{key:o,...s},a]=I.useState(t);return I.useEffect(()=>{n(d=>a(d))},[]),qt.createElement(dM.Provider,{value:{setMethods:r}},qt.createElement(i,{key:o,...s}))},Lke=I.memo(Ike),Oke=0;function M6(){return`agPortalKey_${++Oke}`}var DV=class{constructor(e,t,n,i){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=n,this.suppressFallbackMethods=!!i,this.statelessComponent=this.isStateless(this.reactComponent),this.key=M6(),this.portalKey=M6(),this.instanceCreated=this.isStatelessComponent()?Fr.resolve(!1):new Fr(r=>{this.resolveInstanceCreated=r})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),n=document.createElement(t||"div");return n.classList.add("ag-react-container"),e.reactContainer=n,n}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&t[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,t){const n=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!n){setTimeout(()=>this.callMethod(e,t));return}const i=n[e];if(i)return i.apply(n,t);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,t&&t[0]?t[0]:{})}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new Fr(t=>this.createReactComponent(t))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=t=>{var n;this.componentInstance=t,(n=this.resolveInstanceCreated)==null||n.call(this,!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=b0.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return I.createElement(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const n=this[`${e}Component`];if(!this.suppressFallbackMethods&&n)return n.bind(this)(t)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function rE(e,t,n){for(const i of e){const r=t[i];r&&(n[i]=r)}}var Ph=class extends DV{constructor(){super(...arguments),this.awaitUpdateCallback=new Fr(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=Lke}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:n=>this.setMethods(n),addUpdateCallback:n=>{this.updateCallback=()=>(n(this.getProps()),new Fr(i=>{setTimeout(()=>{i()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,rE(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new Fr(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},zke=class extends Ph{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Nke=class extends Ph{refresh(e){this.sourceParams=e,this.refreshProps()}},Bke=class extends Ph{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},Gke=class extends Ph{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,t){this.icon=e,this.shake=t,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:t,icon:n,shake:i}=this;return e.label=t,e.icon=n,e.shake=i,e}},jke=class extends Ph{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new Fr(e=>{this.resolveSetMethodsCallback=e})}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){var n;const t=this.providedMethods;t?(n=t.afterGuiAttached)==null||n.call(t,e):this.awaitSetMethodsCallback.then(()=>{var i,r;return(r=(i=this.providedMethods)==null?void 0:i.afterGuiAttached)==null?void 0:r.call(i,e)})}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){var t,n;this.expectingNewMethods===!1&&this.hasBeenActive&&((t=this.providedMethods)==null?void 0:t.doesFilterPass)!==(e==null?void 0:e.doesFilterPass)&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback(),(n=this.resolveFilterPassCallback)==null||n.call(this),this.resolveFilterPassCallback=void 0}updateModel(e){var n;(n=this.resolveFilterPassCallback)==null||n.call(this);const t=new Fr(i=>{this.resolveFilterPassCallback=i});this.setModel(e).then(()=>{t.then(()=>{this.sourceParams.filterChangedCallback()})})}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,e}},Hke=class extends Ph{constructor(){super(...arguments),this.awaitSetMethodsCallback=new Fr(e=>{this.resolveSetMethodsCallback=e})}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){var n;const t=this.providedMethods;t?(n=t.afterGuiAttached)==null||n.call(t,e):this.awaitSetMethodsCallback.then(()=>{var i,r;return(r=(i=this.providedMethods)==null?void 0:i.afterGuiAttached)==null?void 0:r.call(i,e)})}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","onAnyFilterChanged"]}setMethods(e){super.setMethods(e),this.resolveSetMethodsCallback()}};function FV(e,t){e.parentFilterInstance(n=>{(n.setModel(t)||Fr.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var Vke=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=n=>this.updateModel(n)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){rE(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),FV(this.floatingFilterParams,e)}},$ke=class extends Ph{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),FV(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},Wke=class extends Ph{refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}},Uke=class extends Ph{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},qke=class extends Ph{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},Kke=class extends Ph{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Zke=class extends Ph{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function hM(){an(231)}var Yke=1e3,Xke=class{constructor(e,t,n){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=n||Yke}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(t=>t!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,n){this.portals=[...this.portals,e],this.waitForInstance(t,n),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t,n=Date.now()){if(this.destroyed){t(null);return}if(e.rendered())t(e);else{if(Date.now()-n>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate){g1(!0,()=>this.refresher()),e.rendered()&&t(e);return}window.setTimeout(()=>{this.waitForInstance(e,t,n)})}}},Jke=({ctrl:e})=>{const t=e.isAlive(),{context:n}=I.useContext(Fu),[i,r]=I.useState(),[o,s]=I.useState(),a=I.useRef(),d=I.useRef(null),h=I.useRef(null),m=I.useRef(null),v=I.useRef(),w=I.useRef();t&&!w.current&&(w.current=new Z1(()=>d.current));const R=I.useCallback($=>{if(d.current=$,!$||!e.isAlive()||n.isDestroyed()){a.current=n.destroyBean(a.current);return}a.current=n.createBean(new Dx);const U=()=>{var q;const X=e.getSelectAllGui();X&&((q=h.current)==null||q.insertAdjacentElement("afterend",X),a.current.addDestroyFunc(()=>X.remove()))},Y={setWidth:X=>{d.current&&(d.current.style.width=X)},toggleCss:(X,q)=>w.current.toggleCss(X,q),setUserStyles:X=>s(X),setAriaSort:X=>{d.current&&(X?Wge(d.current,X):Uge(d.current))},setUserCompDetails:X=>r(X),getUserCompInstance:()=>v.current||void 0,refreshSelectAllGui:U,removeSelectAllGui:()=>{var X;return(X=e.getSelectAllGui())==null?void 0:X.remove()}};e.setComp(Y,$,h.current,m.current,a.current),U()},[]);I.useLayoutEffect(()=>tC(i,n,m.current,v),[i]),I.useEffect(()=>{e.setDragSource(d.current)},[i]);const L=I.useMemo(()=>!!((i==null?void 0:i.componentFromFramework)&&Mx(i.componentClass)),[i]),O=i==null?void 0:i.componentFromFramework,z=i==null?void 0:i.componentClass;return qt.createElement("div",{ref:R,style:o,className:"ag-header-cell",role:"columnheader"},qt.createElement("div",{ref:h,className:"ag-header-cell-resize",role:"presentation"}),qt.createElement("div",{ref:m,className:"ag-header-cell-comp-wrapper",role:"presentation"},O?L?qt.createElement(z,{...i.params}):qt.createElement(z,{...i.params,ref:v}):null))},Qke=I.memo(Jke),ePe=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t}getProps(){return this.floatingFilterParams}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){rE(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}},tPe=({ctrl:e})=>{const{context:t,gos:n}=I.useContext(Fu),[i,r]=I.useState(),[o,s]=I.useState(()=>new gh("ag-header-cell","ag-floating-filter")),[a,d]=I.useState(()=>new gh),[h,m]=I.useState(()=>new gh("ag-floating-filter-button","ag-hidden")),[v,w]=I.useState("false"),[R,L]=I.useState(),[,O]=I.useState(1),z=I.useRef(),$=I.useRef(null),U=I.useRef(null),Y=I.useRef(null),X=I.useRef(null),q=I.useRef(),ie=I.useRef(),re=Ye=>{Ye!=null&&q.current&&q.current(Ye)},J=I.useCallback(Ye=>{if($.current=Ye,!Ye||!e.isAlive()||t.isDestroyed()){z.current=t.destroyBean(z.current);return}z.current=t.createBean(new Dx),ie.current=new Fr(Le=>{q.current=Le});const _e={toggleCss:(Le,Oe)=>s(yt=>yt.setClass(Le,Oe)),setUserStyles:Le=>r(Le),addOrRemoveBodyCssClass:(Le,Oe)=>d(yt=>yt.setClass(Le,Oe)),setButtonWrapperDisplayed:Le=>{m(Oe=>Oe.setClass("ag-hidden",!Le)),w(Le?"false":"true")},setWidth:Le=>{$.current&&($.current.style.width=Le)},setCompDetails:Le=>L(Le),getFloatingFilterComp:()=>ie.current?ie.current:null,setMenuIcon:Le=>{var Oe;return(Oe=X.current)==null?void 0:Oe.appendChild(Le)}};e.setComp(_e,Ye,X.current,U.current,z.current)},[]);I.useLayoutEffect(()=>tC(R,t,U.current,re),[R]);const ne=I.useMemo(()=>o.toString(),[o]),be=I.useMemo(()=>a.toString(),[a]),ue=I.useMemo(()=>h.toString(),[h]),ve=I.useMemo(()=>!!(R&&R.componentFromFramework&&Mx(R.componentClass)),[R]),ce=I.useMemo(()=>n.get("reactiveCustomComponents"),[]),Ie=I.useMemo(()=>n.get("enableFilterHandlers"),[]),[Te,fe]=I.useState();I.useEffect(()=>{if(R!=null&&R.componentFromFramework)if(ce){const Ye=Ie?ePe:Vke,_e=new Ye(R.params,()=>O(Le=>Le+1));re(_e),fe(_e)}else hM()},[R]);const he=Te==null?void 0:Te.getProps(),Re=R==null?void 0:R.componentFromFramework,De=R==null?void 0:R.componentClass;return qt.createElement("div",{ref:J,style:i,className:ne,role:"gridcell"},qt.createElement("div",{ref:U,className:be,role:"presentation"},Re?ce?he&&qt.createElement(dM.Provider,{value:{setMethods:Ye=>Te.setMethods(Ye)}},qt.createElement(De,{...he})):qt.createElement(De,{...R.params,ref:ve?()=>{}:re}):null),qt.createElement("div",{ref:Y,"aria-hidden":v,className:ue,role:"presentation"},qt.createElement("button",{ref:X,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},nPe=I.memo(tPe),iPe=({ctrl:e})=>{const{context:t}=I.useContext(Fu),[n,i]=I.useState(),[r,o]=I.useState(()=>new gh),[s,a]=I.useState(()=>new gh),[d,h]=I.useState("false"),[m,v]=I.useState(),[w,R]=I.useState(),L=I.useRef(),O=I.useRef(null),z=I.useRef(null),$=I.useRef(null),U=I.useRef(),Y=I.useCallback(ne=>{if(O.current=ne,!ne||!e.isAlive()||t.isDestroyed()){L.current=t.destroyBean(L.current);return}L.current=t.createBean(new Dx);const be={setWidth:ue=>{O.current&&(O.current.style.width=ue)},toggleCss:(ue,ve)=>o(ce=>ce.setClass(ue,ve)),setUserStyles:ue=>i(ue),setHeaderWrapperHidden:ue=>{const ve=$.current;ve&&(ue?ve.style.setProperty("display","none"):ve.style.removeProperty("display"))},setHeaderWrapperMaxHeight:ue=>{const ve=$.current;ve&&(ue!=null?ve.style.setProperty("max-height",`${ue}px`):ve.style.removeProperty("max-height"),ve.classList.toggle("ag-header-cell-comp-wrapper-limited-height",ue!=null))},setUserCompDetails:ue=>R(ue),setResizableDisplayed:ue=>{a(ve=>ve.setClass("ag-hidden",!ue)),h(ue?"false":"true")},setAriaExpanded:ue=>v(ue),getUserCompInstance:()=>U.current||void 0};e.setComp(be,ne,z.current,$.current,L.current)},[]);I.useLayoutEffect(()=>tC(w,t,$.current),[w]),I.useEffect(()=>{O.current&&e.setDragSource(O.current)},[w]);const X=I.useMemo(()=>!!((w==null?void 0:w.componentFromFramework)&&Mx(w.componentClass)),[w]),q=I.useMemo(()=>"ag-header-group-cell "+r.toString(),[r]),ie=I.useMemo(()=>"ag-header-cell-resize "+s.toString(),[s]),re=w==null?void 0:w.componentFromFramework,J=w==null?void 0:w.componentClass;return qt.createElement("div",{ref:Y,style:n,className:q,role:"columnheader","aria-expanded":m},qt.createElement("div",{ref:$,className:"ag-header-cell-comp-wrapper",role:"presentation"},re?X?qt.createElement(J,{...w.params}):qt.createElement(J,{...w.params,ref:U}):null),qt.createElement("div",{ref:z,"aria-hidden":d,className:ie}))},rPe=I.memo(iPe),oPe=({ctrl:e})=>{const{gos:t,context:n}=I.useContext(Fu),{topOffset:i,rowHeight:r}=I.useMemo(()=>e.getTopAndHeight(),[]),o=I.useMemo(()=>t.get("tabIndex"),[]),[s,a]=I.useState(()=>e.getAriaRowIndex()),d=e.headerRowClass,[h,m]=I.useState(()=>r+"px"),[v,w]=I.useState(()=>i+"px"),R=I.useRef(null),[L,O]=I.useState(()=>e.getUpdatedHeaderCtrls()),z=I.useRef(),$=I.useRef(null),U=I.useCallback(q=>{if($.current=q,!q||!e.isAlive()||n.isDestroyed()){z.current=n.destroyBean(z.current);return}z.current=n.createBean(new Dx);const ie={setHeight:re=>m(re),setTop:re=>w(re),setHeaderCtrls:(re,J,ne)=>{const be=R.current,ue=WS(be,re,J);ue!==be&&(R.current=ue,g1(ne,()=>O(ue)))},setWidth:re=>{$.current&&($.current.style.width=re)},setRowIndex:re=>{a(re)}};e.setComp(ie,z.current,!1)},[]),Y=I.useMemo(()=>({height:h,top:v}),[h,v]),X=I.useCallback(q=>{switch(e.type){case"group":return qt.createElement(rPe,{ctrl:q,key:q.instanceId});case"filter":return qt.createElement(nPe,{ctrl:q,key:q.instanceId});default:return qt.createElement(Qke,{ctrl:q,key:q.instanceId})}},[]);return qt.createElement("div",{ref:U,className:d,role:"row",style:Y,tabIndex:o,"aria-rowindex":s},L.map(X))},sPe=I.memo(oPe),aPe=({pinned:e})=>{const[t,n]=I.useState(!0),[i,r]=I.useState([]),{context:o}=I.useContext(Fu),s=I.useRef(null),a=I.useRef(null),d=I.useRef(),h=e==="left",m=e==="right",v=!h&&!m,w=I.useCallback(O=>{if(s.current=O,!O||o.isDestroyed()){d.current=o.destroyBean(d.current);return}d.current=o.createBean(new Hbe(e));const z={setDisplayed:n,setCtrls:$=>r($),setCenterWidth:$=>{a.current&&(a.current.style.width=$)},setViewportScrollLeft:$=>{s.current&&(s.current.scrollLeft=$)},setPinnedContainerWidth:$=>{s.current&&(s.current.style.width=$,s.current.style.minWidth=$,s.current.style.maxWidth=$)}};d.current.setComp(z,s.current)},[]),R=t?"":"ag-hidden",L=()=>i.map(O=>qt.createElement(sPe,{ctrl:O,key:O.instanceId}));return h?qt.createElement("div",{ref:w,className:"ag-pinned-left-header "+R,"aria-hidden":!t,role:"rowgroup"},L()):m?qt.createElement("div",{ref:w,className:"ag-pinned-right-header "+R,"aria-hidden":!t,role:"rowgroup"},L()):v?qt.createElement("div",{ref:w,className:"ag-header-viewport "+R,role:"rowgroup",tabIndex:-1},qt.createElement("div",{ref:a,className:"ag-header-container",role:"presentation"},L())):null},tT=I.memo(aPe),lPe=()=>{const[e,t]=I.useState(()=>new gh),[n,i]=I.useState(),{context:r}=I.useContext(Fu),o=I.useRef(null),s=I.useRef(),a=I.useCallback(m=>{if(o.current=m,!m||r.isDestroyed()){s.current=r.destroyBean(s.current);return}s.current=r.createBean(new Nbe);const v={toggleCss:(w,R)=>t(L=>L.setClass(w,R)),setHeightAndMinHeight:w=>i(w)};s.current.setComp(v,m,m)},[]),d=I.useMemo(()=>"ag-header "+e.toString(),[e]),h=I.useMemo(()=>({height:n,minHeight:n}),[n]);return qt.createElement("div",{ref:a,className:d,style:h,role:"presentation"},qt.createElement(tT,{pinned:"left"}),qt.createElement(tT,{pinned:null}),qt.createElement(tT,{pinned:"right"}))},uPe=I.memo(lPe),cPe=(e,t)=>{I.useEffect(()=>{const n=t.current;if(n){const i=n.parentElement;if(i){const r=document.createComment(e);return i.insertBefore(r,n),()=>{r.remove()}}}},[e])},$v=cPe,dPe=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new Fr(n=>{this.resolveInstanceCreated=n}),this.onValueChange=n=>this.updateValue(n),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){rE(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){var t;this.componentInstance=e,(t=this.resolveInstanceCreated)==null||t.call(this),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached","getValidationErrors","getValidationElement"]}updateValue(e){this.value=e,this.refreshProps()}},hPe=e=>{const t=I.useRef(e),n=I.useRef(),i=I.useRef(!1),r=I.useRef(!1),[,o]=I.useState(0);i.current&&(r.current=!0),I.useEffect(()=>(i.current||(n.current=t.current(),i.current=!0),o(s=>s+1),()=>{var s;r.current&&((s=n.current)==null||s.call(n))}),[])},fPe=e=>{const[t,n]=I.useState(),i=I.useContext(Fu),{context:r,popupSvc:o,gos:s,editSvc:a}=i,{editDetails:d,cellCtrl:h,eParentCell:m}=e;return hPe(()=>{var O,z;const{compDetails:v}=d,w=s.get("stopEditingWhenCellsLoseFocus");let R,L;if(!r.isDestroyed()){L=r.createBean(a.createPopupEditorWrapper(v.params));const $=L.getGui();if(e.jsChildComp){const re=e.jsChildComp.getGui();re&&$.appendChild(re)}const{column:U,rowNode:Y}=h,X={column:U,rowNode:Y,type:"popupCellEditor",eventSource:m,ePopup:$,position:d.popupPosition,keepWithinBounds:!0},q=o==null?void 0:o.positionPopupByComponent.bind(o,X),ie=o==null?void 0:o.addPopup({modal:w,eChild:$,closeOnEsc:!0,closedCallback:()=>{h.onPopupEditorClosed()},anchorToElement:m,positionCallback:q,ariaOwns:m});R=ie?ie.hideFunc:void 0,n(L),(z=(O=e.jsChildComp)==null?void 0:O.afterGuiAttached)==null||z.call(O)}return()=>{R==null||R(),r.destroyBean(L)}}),I.useLayoutEffect(()=>()=>{h.isCellFocused()&&(t!=null&&t.getGui().contains(Os(i)))&&m.focus({preventScroll:!0})},[t]),t&&e.wrappedContent?b0.createPortal(e.wrappedContent,t.getGui()):null},I6=I.memo(fPe),pPe=(e,t,n)=>{const{compProxy:i}=e;n(i);const r=i.getProps(),o=Mx(t);return qt.createElement(dM.Provider,{value:{setMethods:s=>i.setMethods(s)}},o?qt.createElement(t,{...r}):qt.createElement(t,{...r,ref:s=>i.setRef(s)}))},L6=(e,t,n)=>e.compProxy?pPe(e,t,n):qt.createElement(t,{...e.compDetails.params,ref:n}),gPe=(e,t,n,i,r)=>{const o=e.compDetails,s=o.componentClass,a=o.componentFromFramework&&!e.popup,d=o.componentFromFramework&&e.popup,h=!o.componentFromFramework&&e.popup;return a?L6(e,s,t):d?qt.createElement(I6,{editDetails:e,cellCtrl:i,eParentCell:n,wrappedContent:L6(e,s,t)}):h&&r?qt.createElement(I6,{editDetails:e,cellCtrl:i,eParentCell:n,jsChildComp:r}):null},mPe=(e,t,n,i,r,o,s=!1)=>{const{context:a}=I.useContext(Fu),d=I.useCallback(()=>{const h=r.current;if(!h)return;const m=h.getGui();m&&m.parentElement&&m.remove(),a.destroyBean(h),r.current=void 0},[]);I.useEffect(()=>{const h=e!=null&&!s,m=(e==null?void 0:e.compDetails)&&!e.compDetails.componentFromFramework,v=t&&n==null;if(!(h&&m&&!v)){d();return}const R=e.compDetails;if(r.current){const O=r.current,$=O.refresh!=null&&e.force==!1?O.refresh(R.params):!1;if($===!0||$===void 0)return;d()}R.newAgStackInstance().then(O=>{if(!O)return;const z=O.getGui();if(!z)return;(t?n:o.current).appendChild(z),r.current=O})},[e,t,i,s]),I.useEffect(()=>d,[])},MV=mPe,yPe=({cellCtrl:e,parent:t})=>{var r;const n=I.useRef(),i=I.useMemo(()=>{const{loadingComp:o}=e.getDeferLoadingCellRenderer();return o?{value:void 0,compDetails:o,force:!1}:void 0},[e]);if(MV(i,!1,void 0,1,n,t),(r=i==null?void 0:i.compDetails)!=null&&r.componentFromFramework){const o=i.compDetails.componentClass;return qt.createElement(o,{...i.compDetails.params})}return qt.createElement(qt.Fragment,null)},vPe=({cellCtrl:e,printLayout:t,editingCell:n})=>{const i=I.useContext(Fu),{context:r}=i,{column:{colIdSanitised:o},instanceId:s}=e,a=I.useRef(),[d,h]=I.useState(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[m,v]=I.useState(),[w,R]=I.useState(1),[L,O]=I.useState(),[z,$]=I.useState(!1),[U,Y]=I.useState(!1),[X,q]=I.useState(!1),[ie,re]=I.useState(),J=I.useMemo(()=>e.isForceWrapper(),[e]),ne=I.useMemo(()=>e.getCellAriaRole(),[e]),be=I.useRef(null),ue=I.useRef(null),ve=I.useRef(null),ce=I.useRef(),Ie=I.useRef(),Te=I.useRef(),fe=I.useRef([]),he=I.useRef(),Re=I.useRef(),[De,Ye]=I.useState(0),_e=I.useCallback(yn=>{Re.current=yn,Ye(wn=>wn+1)},[]),Le=d!=null&&(z||X||U)&&(m==null||!!m.popup),Oe=J||Le,yt=I.useMemo(()=>e.getCellValueClass(),[e]),xt=I.useCallback(yn=>{if(Ie.current=yn,yn){const wn=yn.isCancelBeforeStart&&yn.isCancelBeforeStart();setTimeout(()=>{wn?(e.stopEditing(!0),e.focusCell(!0)):(e.cellEditorAttached(),e.enableEditorTooltipFeature(yn))})}},[e]),Vt=I.useRef();Vt.current||(Vt.current=new Z1(()=>be.current));const Xt=!!m&&!m.popup;MV(d,Oe,Re.current,De,ce,be,Xt);const en=I.useRef();I.useLayoutEffect(()=>{var ai,Gi;const yn=en.current,wn=d;if(en.current=d,yn==null||yn.compDetails==null||wn==null||wn.compDetails==null)return;(ai=he.current)==null||ai.refreshVisibility();const dn=yn.compDetails,An=wn.compDetails;if(dn.componentClass!=An.componentClass||((Gi=ve.current)==null?void 0:Gi.refresh)==null)return;ve.current.refresh(An.params)!=!0&&R(ri=>ri+1)},[d]),I.useLayoutEffect(()=>{if(!(m&&!m.compDetails.componentFromFramework)||r.isDestroyed())return;const wn=m.compDetails,dn=m.popup===!0,An=wn.newAgStackInstance();return An.then(Cn=>{var Gi;if(!Cn)return;const ai=Cn.getGui();if(xt(Cn),!dn){const ri=(J?Te:be).current;ri==null||ri.appendChild(ai),(Gi=Cn.afterGuiAttached)==null||Gi.call(Cn)}re(Cn)}),()=>{An.then(Cn=>{const ai=Cn.getGui();e.disableEditorTooltipFeature(),r.destroyBean(Cn),xt(void 0),re(void 0),ai==null||ai.remove()})}},[m]);const it=I.useCallback(yn=>{if(Te.current=yn,!yn||r.isDestroyed()||!e.isAlive()){const An=fe.current;fe.current=[];for(const Cn of An)Cn();return}let wn;const dn=An=>{An&&(yn.insertAdjacentElement("afterbegin",An.getGui()),fe.current.push(()=>{Iy(An.getGui()),r.destroyBean(An),he.current===wn&&(he.current=void 0)}))};z&&dn(e.createSelectionCheckbox()),X&&dn(e.createDndSource()),U&&(wn=e.createRowDragComp(),he.current=wn,wn&&(dn(wn),wn.refreshVisibility()))},[e,r,X,U,z]),Lt=I.useCallback(()=>{const yn=!e.isCellSpanning()||ue.current,wn=be.current;if(!wn||!yn||!e||!e.isAlive()||r.isDestroyed()){a.current=r.destroyBean(a.current);return}a.current=r.createBean(new Dx);const dn={toggleCss:(Cn,ai)=>Vt.current.toggleCss(Cn,ai),setUserStyles:Cn=>O(Cn),getFocusableElement:()=>be.current,setIncludeSelection:Cn=>$(Cn),setIncludeRowDrag:Cn=>Y(Cn),setIncludeDndSource:Cn=>q(Cn),getCellEditor:()=>Ie.current??null,getCellRenderer:()=>ve.current??ce.current,getParentOfValue:()=>Re.current??Te.current??be.current,setRenderDetails:(Cn,ai,Gi)=>{var ji;const ri=()=>{h(Si=>(Si==null?void 0:Si.compDetails)!==Cn||(Si==null?void 0:Si.value)!==ai||(Si==null?void 0:Si.force)!==Gi?{value:ai,compDetails:Cn,force:Gi}:Si)};if((ji=Cn==null?void 0:Cn.params)!=null&&ji.deferRender&&!e.rowNode.group){const{loadingComp:Si,onReady:lr}=e.getDeferLoadingCellRenderer();if(Si){h({value:void 0,compDetails:Si,force:!1}),lr.then(()=>Fke(ri));return}}ri()},setEditDetails:(Cn,ai,Gi,ri)=>{if(Cn){let ji;Cn.componentFromFramework&&(ri?ji=new dPe(Cn.params,()=>R(Si=>Si+1)):hM()),v({compDetails:Cn,popup:ai,popupPosition:Gi,compProxy:ji}),ai||h(void 0)}else e.hasBrowserFocus()&&dn.getFocusableElement().focus({preventScroll:!0}),Ie.current=void 0,v(void 0)},refreshEditStyles:(Cn,ai)=>{if(!be.current)return;const{current:Gi}=Vt;Gi.toggleCss("ag-cell-value",!Oe),Gi.toggleCss("ag-cell-inline-editing",!!Cn&&!ai),Gi.toggleCss("ag-cell-popup-editing",!!Cn&&!!ai),Gi.toggleCss("ag-cell-not-inline-editing",!Cn||!!ai)}},An=Te.current||void 0;e.setComp(dn,wn,ue.current??void 0,An,t,n,a.current)},[]),St=I.useCallback(yn=>{be.current=yn,Lt()},[]),lt=I.useCallback(yn=>{ue.current=yn,Lt()},[]),Tn=I.useMemo(()=>{var wn;return!!(((wn=d==null?void 0:d.compDetails)==null?void 0:wn.componentFromFramework)&&Mx(d.compDetails.componentClass))},[d]);I.useLayoutEffect(()=>{if(!be.current)return;const{current:yn}=Vt;yn.toggleCss("ag-cell-value",!Oe),yn.toggleCss("ag-cell-inline-editing",!!m&&!m.popup),yn.toggleCss("ag-cell-popup-editing",!!m&&!!m.popup),yn.toggleCss("ag-cell-not-inline-editing",!m||!!m.popup)});const Mt=()=>{var dn;const{compDetails:yn,value:wn}=d;if(!yn)return((dn=wn==null?void 0:wn.toString)==null?void 0:dn.call(wn))??wn;if(yn.componentFromFramework){const An=yn.componentClass;return qt.createElement(I.Suspense,{fallback:qt.createElement(yPe,{cellCtrl:e,parent:be})},Tn?qt.createElement(An,{...yn.params,key:w}):qt.createElement(An,{...yn.params,key:w,ref:ve}))}},$t=()=>{const yn=()=>d==null?null:Oe?qt.createElement("span",{role:"presentation",id:`cell-${s}`,className:yt,ref:_e},Mt()):Mt(),wn=dn=>gPe(dn,xt,be.current,e,ie);return m!=null?m.popup?qt.createElement(qt.Fragment,null,yn(),wn(m)):wn(m):yn()},Pe=()=>qt.createElement("div",{ref:St,style:L,role:ne,"col-id":o},Oe?qt.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:it},$t()):$t());return e.isCellSpanning()?qt.createElement("div",{ref:lt,className:"ag-spanned-cell-wrapper",role:"presentation"},Pe()):Pe()},bPe=I.memo(vPe),xPe=({rowCtrl:e,containerType:t})=>{const{context:n,gos:i,editSvc:r}=I.useContext(Fu),o=I.useContext(AV)==="default",s=I.useRef(),a=I.useRef(e.getDomOrder()),d=e.isFullWidth(),h=e.rowNode.displayed,[m,v]=I.useState(()=>h?e.rowNode.getRowIndexString():null),[w,R]=I.useState(()=>e.rowId),[L,O]=I.useState(()=>e.businessKey),[z,$]=I.useState(()=>e.rowStyles),U=I.useRef(null),[Y,X]=I.useState(()=>null),[q,ie]=I.useState(),[re,J]=I.useState(()=>h?e.getInitialRowTop(t):void 0),[ne,be]=I.useState(()=>h?e.getInitialTransform(t):void 0),ue=I.useRef(null),ve=I.useRef(),ce=I.useRef(),Ie=I.useRef(!1),[Te,fe]=I.useState(0);I.useEffect(()=>{var St;if(Ie.current||!q||Te>10)return;const Lt=(St=ue.current)==null?void 0:St.firstChild;Lt?(e.setupDetailRowAutoHeight(Lt),Ie.current=!0):fe(lt=>lt+1)},[q,Te]);const he=I.useRef();he.current||(he.current=new Z1(()=>ue.current));const Re=I.useRef(()=>{}),De=I.useCallback(Lt=>(Re.current=Lt,()=>{Re.current=()=>{}}),[]),Ye=Mke(De,()=>U.current,[]),_e=o?Ye:Y,Le=I.useCallback(Lt=>{if(ue.current=Lt,s.current=Lt?n.createBean(new Dx):n.destroyBean(s.current),!Lt){e.unsetComp(t);return}if(!e.isAlive()||n.isDestroyed())return;const St={setTop:J,setTransform:be,toggleCss:(lt,Tn)=>he.current.toggleCss(lt,Tn),setDomOrder:lt=>a.current=lt,setRowIndex:v,setRowId:R,setRowBusinessKey:O,setUserStyles:$,setCellCtrls:(lt,Tn)=>{const Mt=U.current,$t=WS(Mt,lt,a.current);$t!==Mt&&(U.current=$t,o?Re.current():g1(Tn,()=>X($t)))},showFullWidth:lt=>{ce.current=lt.params,ie(lt)},getFullWidthCellRenderer:()=>ve.current,getFullWidthCellRendererParams:()=>ce.current,refreshFullWidth:lt=>{const Tn=lt();return ce.current=Tn,Xt.current?(ie(Mt=>({...Mt,params:Tn})),!0):!ve.current||!ve.current.refresh?!1:ve.current.refresh(Tn)}};e.setComp(St,Lt,t,s.current)},[]);I.useLayoutEffect(()=>tC(q,n,ue.current,ve),[q]);const Oe=I.useMemo(()=>{const Lt={top:re,transform:ne};return Object.assign(Lt,z),Lt},[re,ne,z]),yt=d&&(q==null?void 0:q.componentFromFramework),xt=!d&&_e!=null,Vt=I.useMemo(()=>!!((q==null?void 0:q.componentFromFramework)&&Mx(q.componentClass)),[q]),Xt=I.useRef(!1);I.useEffect(()=>{Xt.current=Vt&&!!q&&!!i.get("reactiveCustomComponents")},[Vt,q]);const en=()=>_e==null?void 0:_e.map(Lt=>qt.createElement(bPe,{cellCtrl:Lt,editingCell:(r==null?void 0:r.isEditing(Lt,{withOpenEditor:!0}))??!1,printLayout:e.printLayout,key:Lt.instanceId})),it=()=>{const Lt=q.componentClass;return Vt?qt.createElement(Lt,{...q.params}):qt.createElement(Lt,{...q.params,ref:ve})};return qt.createElement("div",{ref:Le,role:"row",style:Oe,"row-index":m,"row-id":w,"row-business-key":L},xt?en():yt?it():null)},O6=I.memo(xPe),wPe=({name:e})=>{const{context:t,gos:n}=I.useContext(Fu),i=I.useMemo(()=>X1(e),[e]),r=I.useRef(null),o=I.useRef(null),s=I.useRef(null),a=I.useRef([]),d=I.useRef([]),[h,m]=I.useState(()=>[]),v=!!n.get("enableCellSpan")&&!!i.getSpannedRowCtrls,w=I.useRef([]),R=I.useRef([]),[L,O]=I.useState(()=>[]),z=I.useRef(!1),$=I.useRef(),U=I.useMemo(()=>hh("ag-viewport",uH(e)),[e]),Y=I.useMemo(()=>hh(m_(e)),[e]),X=I.useMemo(()=>hh("ag-spanning-container",ebe(e)),[e]),q=i.type==="center"||v,ie=q?r:o;$v(" AG Row Container "+e+" ",ie);const re=I.useCallback(()=>{const Te=!q||r.current!=null,fe=o.current!=null,he=!v||s.current!=null;return Te&&fe&&he},[]),J=I.useCallback(()=>r.current==null&&o.current==null&&s.current==null,[]),ne=I.useCallback(()=>{if(J()&&($.current=t.destroyBean($.current)),!t.isDestroyed()&&re()){const Te=Re=>{const De=WS(d.current,a.current,z.current);De!==d.current&&(d.current=De,g1(Re,()=>m(De)))},fe=Re=>{const De=WS(R.current,w.current,z.current);De!==R.current&&(R.current=De,g1(Re,()=>O(De)))},he={setHorizontalScroll:Re=>{r.current&&(r.current.scrollLeft=Re)},setViewportHeight:Re=>{r.current&&(r.current.style.height=Re)},setRowCtrls:({rowCtrls:Re,useFlushSync:De})=>{const Ye=!!De&&a.current.length>0&&Re.length>0;a.current=Re,Te(Ye)},setSpannedRowCtrls:(Re,De)=>{const Ye=!!De&&w.current.length>0&&Re.length>0;w.current=Re,fe(Ye)},setDomOrder:Re=>{z.current!=Re&&(z.current=Re,Te(!1))},setContainerWidth:Re=>{o.current&&(o.current.style.width=Re)},setOffsetTop:Re=>{o.current&&(o.current.style.transform=`translateY(${Re})`)}};$.current=t.createBean(new cbe(e)),$.current.setComp(he,o.current,s.current??void 0,r.current)}},[re,J]),be=I.useCallback(Te=>{o.current=Te,ne()},[ne]),ue=I.useCallback(Te=>{s.current=Te,ne()},[ne]),ve=I.useCallback(Te=>{r.current=Te,ne()},[ne]),ce=()=>qt.createElement("div",{className:Y,ref:be,role:q?"presentation":"rowgroup"},h.map(Te=>qt.createElement(O6,{rowCtrl:Te,containerType:i.type,key:Te.instanceId})));if(!q)return ce();const Ie=()=>qt.createElement("div",{className:X,ref:ue,role:"presentation"},L.map(Te=>qt.createElement(O6,{rowCtrl:Te,containerType:i.type,key:Te.instanceId})));return qt.createElement("div",{className:U,ref:ve,role:"rowgroup"},ce(),v?Ie():null)},CPe=I.memo(wPe),_Pe=()=>{const e=I.useContext(Fu),{context:t,overlays:n}=e,[i,r]=I.useState(""),[o,s]=I.useState(0),[a,d]=I.useState(0),[h,m]=I.useState("0px"),[v,w]=I.useState("0px"),[R,L]=I.useState("100%"),[O,z]=I.useState("0px"),[$,U]=I.useState("0px"),[Y,X]=I.useState("100%"),[q,ie]=I.useState(!0),[re,J]=I.useState(!0),[ne,be]=I.useState(null),[ue,ve]=I.useState(""),[ce,Ie]=I.useState(null),[Te,fe]=I.useState("ag-layout-normal"),he=I.useRef();he.current||(he.current=new Z1(()=>Re.current));const Re=I.useRef(null),De=I.useRef(null),Ye=I.useRef(null),_e=I.useRef(null),Le=I.useRef(null),Oe=I.useRef(null),yt=I.useRef(null),xt=I.useRef([]),Vt=I.useRef([]);$v(" AG Grid Body ",Re),$v(" AG Pinned Top ",De),$v(" AG Sticky Top ",Ye),$v(" AG Middle ",Oe),$v(" AG Pinned Bottom ",yt);const Xt=I.useCallback(Cn=>{if(Re.current=Cn,!Cn||t.isDestroyed()){xt.current=t.destroyBeans(xt.current);for(const Tt of Vt.current)Tt();Vt.current=[];return}const ai=(Tt,Ji)=>{Tt.appendChild(Ji),Vt.current.push(()=>Ji.remove())},Gi=Tt=>{const Ji=t.createBean(new Tt);return xt.current.push(Ji),Ji},ri=(Tt,Ji,Qi)=>{ai(Tt,document.createComment(Qi)),ai(Tt,Gi(Ji).getGui())};ri(Cn,ybe," AG Fake Horizontal Scroll ");const ji=n==null?void 0:n.getOverlayWrapperCompClass();ji&&ri(Cn,ji," AG Overlay Wrapper "),Le.current&&ri(Le.current,bbe," AG Fake Vertical Scroll ");const Si={setRowAnimationCssOnBodyViewport:r,setColumnCount:Tt=>{Re.current&&Vge(Re.current,Tt)},setRowCount:Tt=>{Re.current&&jge(Re.current,Tt)},setTopHeight:s,setBottomHeight:d,setStickyTopHeight:m,setStickyTopTop:w,setStickyTopWidth:L,setTopInvisible:ie,setBottomInvisible:J,setColumnMovingCss:(Tt,Ji)=>he.current.toggleCss(Tt,Ji),updateLayoutClasses:fe,setAlwaysVerticalScrollClass:be,setPinnedTopBottomOverflowY:ve,setCellSelectableCss:(Tt,Ji)=>Ie(Ji?Tt:null),setBodyViewportWidth:Tt=>{Oe.current&&(Oe.current.style.width=Tt)},registerBodyViewportResizeListener:Tt=>{if(Oe.current){const Ji=Em(e,Oe.current,Tt);Vt.current.push(()=>Ji())}},setStickyBottomHeight:z,setStickyBottomBottom:U,setStickyBottomWidth:X,setGridRootRole:Tt=>Cn.setAttribute("role",Tt)},lr=t.createBean(new pbe);xt.current.push(lr),lr.setComp(Si,Cn,Oe.current,De.current,yt.current,Ye.current,_e.current)},[]),en=I.useMemo(()=>hh("ag-root","ag-unselectable",Te),[Te]),it=I.useMemo(()=>hh("ag-body-viewport",i,Te,ne,ce),[i,Te,ne,ce]),Lt=I.useMemo(()=>hh("ag-body",Te),[Te]),St=I.useMemo(()=>hh("ag-floating-top",q?"ag-invisible":null,ce),[ce,q]),lt=I.useMemo(()=>hh("ag-sticky-top",ce),[ce]),Tn=I.useMemo(()=>hh("ag-sticky-bottom",O==="0px"?"ag-invisible":null,ce),[ce,O]),Mt=I.useMemo(()=>hh("ag-floating-bottom",re?"ag-invisible":null,ce),[ce,re]),$t=I.useMemo(()=>({height:o,minHeight:o,overflowY:ue}),[o,ue]),Pe=I.useMemo(()=>({height:h,top:v,width:R}),[h,v,R]),yn=I.useMemo(()=>({height:O,bottom:$,width:Y}),[O,$,Y]),wn=I.useMemo(()=>({height:a,minHeight:a,overflowY:ue}),[a,ue]),dn=Cn=>qt.createElement(CPe,{name:Cn,key:`${Cn}-container`}),An=({section:Cn,children:ai,className:Gi,style:ri})=>qt.createElement("div",{ref:Cn,className:Gi,role:"presentation",style:ri},ai.map(dn));return qt.createElement("div",{ref:Xt,className:en},qt.createElement(uPe,null),An({section:De,className:St,style:$t,children:["topLeft","topCenter","topRight","topFullWidth"]}),qt.createElement("div",{className:Lt,ref:Le,role:"presentation"},An({section:Oe,className:it,children:["left","center","right","fullWidth"]})),An({section:Ye,className:lt,style:Pe,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),An({section:_e,className:Tn,style:yn,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),An({section:yt,className:Mt,style:wn,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},SPe=I.memo(_Pe),EPe=(e,t)=>{const{children:n,eFocusableElement:i,onTabKeyDown:r,gridCtrl:o,forceFocusOutWhenTabGuardsAreEmpty:s,isEmpty:a}=e,{context:d}=I.useContext(Fu),h=I.useRef(null),m=I.useRef(null),v=I.useRef(),w=$=>{var Y,X;const U=$==null?void 0:parseInt($,10).toString();for(const q of[h,m])U===void 0?(Y=q.current)==null||Y.removeAttribute("tabindex"):(X=q.current)==null||X.setAttribute("tabindex",U)};I.useImperativeHandle(t,()=>({forceFocusOutOfContainer($){var U;(U=v.current)==null||U.forceFocusOutOfContainer($)}}));const R=I.useCallback(()=>{const $=h.current,U=m.current;if(!$&&!U||d.isDestroyed()){v.current=d.destroyBean(v.current);return}if($&&U){const Y={setTabIndex:w};v.current=d.createBean(new xxe({comp:Y,eTopGuard:$,eBottomGuard:U,eFocusableElement:i,onTabKeyDown:r,forceFocusOutWhenTabGuardsAreEmpty:s,focusInnerElement:X=>o.focusInnerElement(X),isEmpty:a}))}},[]),L=I.useCallback($=>{h.current=$,R()},[R]),O=I.useCallback($=>{m.current=$,R()},[R]),z=$=>{const U=$==="top"?Bb.TAB_GUARD_TOP:Bb.TAB_GUARD_BOTTOM;return qt.createElement("div",{className:`${Bb.TAB_GUARD} ${U}`,role:"presentation",ref:$==="top"?L:O})};return qt.createElement(qt.Fragment,null,z("top"),n,z("bottom"))},RPe=I.forwardRef(EPe),APe=I.memo(RPe),TPe=({context:e})=>{const[t,n]=I.useState(""),[i,r]=I.useState(""),[o,s]=I.useState(null),[a,d]=I.useState(null),[h,m]=I.useState(!1),[v,w]=I.useState(),R=I.useRef(),L=I.useRef(null),O=I.useRef(),[z,$]=I.useState(null),U=I.useRef(()=>{}),Y=I.useRef(),X=I.useRef([]),q=I.useCallback(()=>{},[]);$v(" AG Grid ",L);const ie=I.useCallback(ve=>{if(L.current=ve,R.current=ve?e.createBean(new Txe):e.destroyBean(R.current),!ve||e.isDestroyed())return;const ce=R.current;U.current=ce.focusInnerElement.bind(ce);const Ie={destroyGridUi:()=>{},setRtlClass:n,forceFocusOutOfContainer:Te=>{var fe,he;if(!Te&&((fe=Y.current)!=null&&fe.isDisplayed())){Y.current.forceFocusOutOfContainer(Te);return}(he=O.current)==null||he.forceFocusOutOfContainer(Te)},updateLayoutClasses:r,getFocusableContainers:()=>{var he;const Te=[],fe=(he=L.current)==null?void 0:he.querySelector(".ag-root");fe&&Te.push({getGui:()=>fe});for(const Re of X.current)Re.isDisplayed()&&Te.push(Re);return Te},setCursor:s,setUserSelect:d};ce.setComp(Ie,ve,ve),m(!0)},[]);I.useEffect(()=>{const ve=R.current,ce=L.current;if(!v||!ve||!z||!ce||e.isDestroyed())return;const Ie=[],{watermarkSelector:Te,paginationSelector:fe,sideBarSelector:he,statusBarSelector:Re,gridHeaderDropZonesSelector:De}=ve.getOptionalSelectors(),Ye=[];if(De){const Le=e.createBean(new De.component),Oe=Le.getGui();ce.insertAdjacentElement("afterbegin",Oe),Ye.push(Oe),Ie.push(Le)}if(he){const Le=e.createBean(new he.component),Oe=Le.getGui(),yt=z.querySelector(".ag-tab-guard-bottom");yt&&(yt.insertAdjacentElement("beforebegin",Oe),Ye.push(Oe)),Ie.push(Le),X.current.push(Le)}const _e=Le=>{const Oe=e.createBean(new Le),yt=Oe.getGui();return ce.insertAdjacentElement("beforeend",yt),Ye.push(yt),Ie.push(Oe),Oe};if(Re&&_e(Re.component),fe){const Le=_e(fe.component);Y.current=Le,X.current.push(Le)}return Te&&_e(Te.component),()=>{e.destroyBeans(Ie);for(const Le of Ye)Le.remove()}},[v,z,e]);const re=I.useMemo(()=>hh("ag-root-wrapper",t,i),[t,i]),J=I.useMemo(()=>hh("ag-root-wrapper-body","ag-focus-managed",i),[i]),ne=I.useMemo(()=>({userSelect:a??"",WebkitUserSelect:a??"",cursor:o??""}),[a,o]),be=I.useCallback(ve=>{O.current=ve,w(ve!==null)},[]),ue=I.useCallback(()=>{var ve;return!((ve=R.current)!=null&&ve.isFocusable())},[]);return qt.createElement("div",{ref:ie,className:re,style:ne,role:"presentation"},qt.createElement("div",{className:J,ref:$,role:"presentation"},h&&z&&!e.isDestroyed()&&qt.createElement(Fu.Provider,{value:e.getBeans()},qt.createElement(APe,{ref:be,eFocusableElement:z,onTabKeyDown:q,gridCtrl:R.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:ue},qt.createElement(SPe,null)))))},kPe=I.memo(TPe),PPe=class extends Yt{postConstruct(){if(this.beans.colAutosize){const e=this.queueResizeOperationsForTick.bind(this);this.addManagedEventListeners({rowExpansionStateChanged:e,expandOrCollapseAll:e,cellValueChanged:e,rowNodeDataChanged:e,rowDataUpdated:e})}}queueResizeOperationsForTick(){const e=this.beans.colAutosize;e.shouldQueueResizeOperations=!0,setTimeout(()=>{e.processResizeOperations()},0)}areHeaderCellsRendered(){return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(t=>t.areCellsRendered()))}areCellsRendered(){return this.beans.rowRenderer.getAllRowCtrls().every(e=>e.isRowRendered()&&e.getAllCellCtrls().every(t=>!!t.eGui))}},IV={setGridApi:void 0,maxComponentCreationTimeMs:void 0,children:void 0},DPe={gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,passGridApi:void 0,componentWrappingElement:void 0,...IV},LV=new Set(Object.keys(DPe)),FPe=new Set(Object.keys(IV)),OV=e=>{var Y;const t=I.useRef(),n=I.useRef(null),i=I.useRef(null),r=I.useRef([]),o=I.useRef([]),s=I.useRef(e),a=I.useRef(),d=I.useRef(),h=I.useRef(!1),[m,v]=I.useState(void 0),[,w]=I.useState(0),R=I.useRef(),L=X=>{var re;const q=(re=n.current)==null?void 0:re.classList,ie=(J="")=>J.trim().split(/\s+/g).filter(Boolean);if(R.current!==X){for(const J of ie(R.current))q!=null&&q.contains(J)&&q.remove(J);for(const J of ie(X))q!=null&&q.contains(J)||q==null||q.add(J);R.current=X}};I.useLayoutEffect(()=>{L(e.className)},[e.className]);const O=I.useCallback(X=>{if(n.current=X,L(e.className),!X){for(const Ie of r.current)Ie();r.current.length=0;return}const q=e.modules||[];i.current||(i.current=new Xke(()=>w(Ie=>Ie+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),r.current.push(()=>{var Ie;(Ie=i.current)==null||Ie.destroy(),i.current=null}));const ie=$me(e.gridOptions,e,Object.keys(e).filter(Ie=>!LV.has(Ie))),re=()=>{if(h.current){const Ie=()=>{var fe;return(fe=a.current)!=null&&fe.shouldQueueUpdates()?void 0:o.current.shift()};let Te=Ie();for(;Te;)Te(),Te=Ie()}},J=new OPe(re);a.current=J;const ne=new PPe,be={providedBeanInstances:{frameworkCompWrapper:new IPe(i.current,ie),renderStatus:ne},modules:q,frameworkOverrides:J,setThemeOnGridDiv:!0},ue=Ie=>{v(Ie),Ie.createBean(ne),r.current.push(()=>{Ie.destroy()}),Ie.getBean("ctrlsSvc").whenReady({addDestroyFunc:Te=>{r.current.push(Te)}},()=>{var fe;if(Ie.isDestroyed())return;const Te=t.current;Te&&((fe=e.passGridApi)==null||fe.call(e,Te))})},ve=Ie=>{Ie.getBean("ctrlsSvc").whenReady({addDestroyFunc:Te=>{r.current.push(Te)}},()=>{for(const Te of o.current)Te();o.current.length=0,h.current=!0})},ce=new qSe;ie.gridId??(ie.gridId=d.current),t.current=ce.create(X,ie,ue,ve,be),r.current.push(()=>{t.current=void 0}),t.current&&(d.current=t.current.getGridId())},[]),z=I.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),$=I.useCallback(X=>{var q;h.current&&!((q=a.current)!=null&&q.shouldQueueUpdates())?X():o.current.push(X)},[]);I.useEffect(()=>{const X=MPe(s.current,e);s.current=e,$(()=>{t.current&&Wme(X,t.current)})},[e]);const U=!qt.useSyncExternalStore||c_(e,"renderingMode")==="legacy"?"legacy":"default";return qt.createElement("div",{style:z,ref:O},qt.createElement(AV.Provider,{value:U},m&&!m.isDestroyed()?qt.createElement(kPe,{key:m.instanceId,context:m}):null,((Y=i.current)==null?void 0:Y.getPortals())??null))};function MPe(e,t){const n={};for(const i of Object.keys(t)){if(LV.has(i)){FPe.has(i)&&an(274,{prop:i});continue}const r=t[i];e[i]!==r&&(n[i]=r)}return n}var IPe=class extends JSe{constructor(e,t){super(),this.parent=e,this.gridOptions=t}createWrapper(e,t){const n=this.gridOptions;if(c_(n,"reactiveCustomComponents")){const s=(a=>{switch(a){case"filter":return c_(n,"enableFilterHandlers")?Hke:jke;case"floatingFilterComponent":return c_(n,"enableFilterHandlers")?Wke:$ke;case"dateComponent":return Bke;case"dragAndDropImageComponent":return Gke;case"loadingOverlayComponent":case"noRowsOverlayComponent":case"activeOverlay":return Nke;case"statusPanel":return Kke;case"toolPanel":return Zke;case"menuItem":return qke;case"cellRenderer":return zke;case"innerHeaderComponent":return Uke}})(t.name);if(s)return new s(e,this.parent,t)}else switch(t.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"activeOverlay":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":hM();break}const r=!t.cellRenderer&&t.name!=="toolPanel";return new DV(e,this.parent,t,r)}},LPe=I.forwardRef((e,t)=>{const n=I.useContext(Fu),{registry:i,context:r,gos:o,rowModel:s}=n,[a,d]=I.useState(()=>new gh),[h,m]=I.useState(()=>new gh),[v,w]=I.useState(),[R,L]=I.useState(),O=I.useRef(),z=I.useRef(null),$=I.useRef(),U=I.useMemo(()=>wme(e.api.getGridId(),(v==null?void 0:v.rowModelType)??"clientSide"),[e]),Y=I.useMemo(()=>a.toString()+" ag-details-row",[a]),X=I.useMemo(()=>h.toString()+" ag-details-grid",[h]);t&&I.useImperativeHandle(t,()=>({refresh(){var re;return((re=O.current)==null?void 0:re.refresh())??!1}})),e.template&&an(230);const q=I.useCallback(re=>{var be;if(z.current=re,!re||r.isDestroyed()){O.current=r.destroyBean(O.current),(be=$.current)==null||be.call($);return}const J={toggleCss:(ue,ve)=>d(ce=>ce.setClass(ue,ve)),toggleDetailGridCss:(ue,ve)=>m(ce=>ce.setClass(ue,ve)),setDetailGrid:ue=>w(ue),setRowData:ue=>L(ue),getGui:()=>z.current},ne=i.createDynamicBean("detailCellRendererCtrl",!0);if(ne&&(r.createBean(ne),ne.init(J,e),O.current=ne,o.get("detailRowAutoHeight"))){const ue=()=>{if(z.current==null)return;const ve=z.current.clientHeight;ve!=null&&ve>0&&setTimeout(()=>{e.node.setRowHeight(ve),(Ks(o)||Px(o))&&s.onRowHeightChanged()},0)};$.current=Em(n,re,ue),ue()}},[]),ie=I.useCallback(re=>{var J;(J=O.current)==null||J.registerDetailWithMaster(re)},[]);return qt.createElement("div",{className:Y,ref:q},v&&qt.createElement(OV,{className:X,...v,modules:U,rowData:R,passGridApi:ie}))}),OPe=class extends wH{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.renderingEngine="react",this.frameworkComponents={agGroupCellRenderer:F6,agGroupRowRenderer:F6,agDetailCellRenderer:LPe},this.wrapIncoming=(t,n)=>n==="ensureVisible"?Dke(t):t()}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return Pke()}},US=class extends I.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e;for(const t of this.apiListeners)t(e)}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return qt.createElement(OV,{...this.props,passGridApi:this.setGridApi})}};_me.registerModules([kke]);const zPe=e=>T.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",height:"20px",padding:"0 10px",borderRadius:"4px",fontSize:"11px",fontWeight:"500",background:"linear-gradient(135deg, #10B981 0%, #059669 100%)",color:"white",whiteSpace:"nowrap"},children:e.value||"N/A"}),NPe=e=>T.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",height:"20px",padding:"0 10px",borderRadius:"4px",fontSize:"11px",fontWeight:"500",background:"linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%)",color:"white",whiteSpace:"nowrap"},children:e.value||"N/A"}),BPe=e=>{var n,i;const t=e.data;return T.jsxs("span",{style:{fontSize:"11px",fontFamily:"monospace",color:"#6B7280"},children:[(n=t.x)==null?void 0:n.toFixed(4),", ",(i=t.y)==null?void 0:i.toFixed(4)]})},GPe=e=>{const t=e.data;return T.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",lineHeight:"1.3"},children:[T.jsx("span",{style:{color:"#3B82F6",fontWeight:"600",fontSize:"13px"},children:t.source_label||t.source}),T.jsx("span",{style:{fontSize:"11px",color:"#9CA3AF"},children:t.source})]})},jPe=e=>{const t=e.data;return T.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",lineHeight:"1.3"},children:[T.jsx("span",{style:{color:"#10B981",fontWeight:"600",fontSize:"13px"},children:t.target_label||t.target}),T.jsx("span",{style:{fontSize:"11px",color:"#9CA3AF"},children:t.target})]})},HPe=e=>{const t=e.data,n=t.details&&t.details.length>0;let i=0;n?i=(t.details||[]).reduce((o,s)=>{const a=typeof s.capacity=="number"?s.capacity:0;return o+a},0):i=t.total_capacity||0;const r=i>0?(i/1e3).toFixed(2):"0";return T.jsxs("span",{style:{fontWeight:"700",color:"#8B5CF6"},children:[r," Gbps"]})},VPe=e=>{const t=e.data,n=t.traffic_max?(t.traffic_max/1e9).toFixed(2):t.total_traffic_max_in?(Math.max(t.total_traffic_max_in,t.total_traffic_max_out||0)/1e9).toFixed(2):"0";return T.jsxs("span",{style:{fontWeight:"600",color:"#6366F1"},children:[n," Gbps"]})},$Pe=e=>{const t=e.value||0;let n="#10B981";return t>80?n="#EF4444":t>60?n="#F59E0B":t>40&&(n="#FBBF24"),T.jsxs("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",height:"20px",padding:"0 8px",borderRadius:"4px",fontSize:"10px",fontWeight:"600",background:`${n}20`,color:n},children:[t.toFixed(1),"%"]})},WPe=e=>T.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",height:"20px",padding:"0 8px",borderRadius:"4px",fontSize:"10px",fontWeight:"600",background:"rgba(59, 130, 246, 0.1)",color:"#3B82F6"},children:e.value||1}),zV=`
  .ag-theme-custom {
    --ag-background-color: transparent;
    --ag-header-background-color: transparent;
    --ag-odd-row-background-color: rgba(249, 250, 251, 0.5);
    --ag-row-hover-color: rgba(59, 130, 246, 0.05);
    --ag-border-color: rgba(0, 0, 0, 0.06);
    --ag-header-foreground-color: #374151;
    --ag-foreground-color: #1F2937;
    --ag-font-size: 13px;
    --ag-row-border-color: rgba(0, 0, 0, 0.06);
    font-family: inherit;
  }
  .ag-theme-custom .ag-header {
    background: linear-gradient(180deg, rgba(255,255,255,0.98) 0%, rgba(250,250,250,0.95) 100%);
    backdrop-filter: blur(8px);
    box-shadow: 0 2px 8px rgba(0,0,0,0.04);
  }
  .ag-theme-custom .ag-header-cell {
    padding: 14px 16px;
    font-size: 12px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border-bottom: 2px solid rgba(0,0,0,0.08) !important;
  }
  .ag-theme-custom .ag-cell {
    padding: 12px 16px;
    display: flex;
    align-items: center;
  }
  .ag-theme-custom .ag-row {
    border-bottom: 1px solid rgba(0,0,0,0.06);
    transition: all 0.2s;
  }
  .ag-theme-custom .ag-row:hover {
    background: rgba(59, 130, 246, 0.05) !important;
  }
  .ag-theme-custom-edge .ag-row:hover {
    background: rgba(139, 92, 246, 0.05) !important;
  }
  .ag-theme-custom .ag-cell-value {
    overflow: visible;
  }
  .ag-theme-custom .ag-paging-panel {
    border-top: 1px solid rgba(0,0,0,0.08);
    padding: 12px 16px;
    background: rgba(255,255,255,0.95);
    backdrop-filter: blur(8px);
    font-size: 13px;
    color: #6B7280;
  }
  .ag-theme-custom .ag-paging-button {
    cursor: pointer;
    padding: 6px 10px;
    border-radius: 6px;
    transition: all 0.2s;
  }
  .ag-theme-custom .ag-paging-button:hover {
    background: rgba(59, 130, 246, 0.1);
  }
  .ag-theme-custom .ag-paging-page-size .ag-picker-field-wrapper {
    border-radius: 6px;
    border: 1px solid rgba(0,0,0,0.1);
    padding: 4px 8px;
  }
  .ag-theme-custom-edge .ag-paging-button:hover {
    background: rgba(139, 92, 246, 0.1);
  }
`;function UPe({nodes:e,expandedRows:t,onToggleExpand:n}){var L;const i=I.useRef(null),[r,o]=I.useState(null),[s,a]=I.useState(""),d=I.useCallback(O=>{var Y;const z=O.data,$=z.details&&z.details.length>0,U=t.has(z.id);return $?T.jsxs("button",{onClick:X=>{X.stopPropagation(),n(z.id),o(U?null:z.id)},style:{background:U?"linear-gradient(135deg, #3B82F6 0%, #2563EB 100%)":"rgba(59, 130, 246, 0.1)",border:"none",borderRadius:"6px",padding:"6px 12px",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"6px",fontSize:"11px",fontWeight:"600",color:U?"white":"#3B82F6",transition:"all 0.2s"},children:[U?T.jsx(EP,{}):T.jsx(Gw,{}),T.jsxs("span",{children:[((Y=z.details)==null?void 0:Y.length)||0," items"]})]}):null},[t,n]),h=I.useMemo(()=>[{field:"id",headerName:"Node ID",flex:.8,minWidth:70,cellStyle:{fontFamily:"monospace",fontWeight:"600",fontSize:"11px"}},{field:"label",headerName:"Label",flex:1.5,minWidth:120,valueFormatter:O=>O.value||"N/A",cellStyle:{fontSize:"12px"}},{field:"layer",headerName:"Layer",flex:.8,minWidth:80,cellRenderer:zPe},{field:"platform",headerName:"Platform",flex:.8,minWidth:70,valueFormatter:O=>O.value||"N/A",cellStyle:{fontSize:"11px",color:"#6B7280"}},{field:"reg",headerName:"Region",flex:.7,minWidth:60,valueFormatter:O=>O.value||"N/A",cellStyle:{fontSize:"11px",color:"#6B7280"}},{field:"witel",headerName:"Witel",flex:1,minWidth:90,valueFormatter:O=>O.value||"N/A",cellStyle:{fontSize:"12px"}},{field:"types",headerName:"Type",flex:.6,minWidth:50,valueFormatter:O=>O.value||"N/A",cellStyle:{fontSize:"11px",color:"#6B7280"}},{field:"coordinates",headerName:"Coordinates",flex:1.2,minWidth:120,cellRenderer:BPe},{field:"details",headerName:"Details",flex:.8,minWidth:80,cellRenderer:d}],[d]),m=I.useMemo(()=>({sortable:!0,filter:!0,resizable:!0}),[]),v=I.useMemo(()=>r?e.find(O=>O.id===r):null,[r,e]),w=I.useMemo(()=>v!=null&&v.details?s?v.details.filter(O=>Object.values(O).some(z=>String(z).toLowerCase().includes(s.toLowerCase()))):v.details:[],[v,s]),R=I.useMemo(()=>{var O;return(O=v==null?void 0:v.details)!=null&&O[0]?Object.keys(v.details[0]).map(z=>({field:z,headerName:z.replace(/_/g," ").toUpperCase(),flex:1,valueFormatter:$=>String($.value??"")})):[]},[v]);return T.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[T.jsx("style",{children:zV}),T.jsx("div",{className:"ag-theme-custom",style:{flex:r?"0 0 50%":1,width:"100%"},children:T.jsx(US,{ref:i,rowData:e,columnDefs:h,defaultColDef:m,animateRows:!0,rowSelection:"single",getRowId:O=>O.data.id,suppressCellFocus:!0,pagination:!0,paginationPageSize:8,paginationPageSizeSelector:[8,16,32,50],rowHeight:45})}),r&&v&&T.jsxs("div",{style:{flex:"0 0 50%",padding:"16px",borderTop:"4px solid #3B82F6",background:"rgba(59, 130, 246, 0.02)",display:"flex",flexDirection:"column"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"12px"},children:[T.jsxs("h4",{style:{fontSize:"13px",fontWeight:"700",color:"#1F2937",margin:0},children:["Node Details (",((L=v.details)==null?void 0:L.length)||0," items)"]}),T.jsx("input",{type:"text",placeholder:"Search in details...",value:s,onChange:O=>a(O.target.value),style:{flex:1,maxWidth:"400px",padding:"8px 12px",borderRadius:"8px",border:"1px solid rgba(0,0,0,0.1)",fontSize:"12px",outline:"none"}}),T.jsx("button",{onClick:()=>{o(null),n(r)},style:{background:"rgba(239, 68, 68, 0.1)",border:"none",borderRadius:"6px",padding:"8px 16px",cursor:"pointer",fontSize:"12px",fontWeight:"600",color:"#EF4444"},children:"Close"})]}),T.jsx("div",{className:"ag-theme-custom",style:{flex:1},children:T.jsx(US,{rowData:w,columnDefs:R,defaultColDef:m,animateRows:!0})})]})]})}function qPe({edges:e,expandedRows:t,onToggleExpand:n}){var L;const i=I.useRef(null),[r,o]=I.useState(null),[s,a]=I.useState(""),d=I.useCallback(O=>{var Y;const z=O.data,$=z.details&&z.details.length>0,U=t.has(z.id);return $?T.jsxs("button",{onClick:X=>{X.stopPropagation(),n(z.id),o(U?null:z.id)},style:{background:U?"linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%)":"rgba(139, 92, 246, 0.1)",border:"none",borderRadius:"6px",padding:"6px 12px",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"6px",fontSize:"11px",fontWeight:"600",color:U?"white":"#8B5CF6",transition:"all 0.2s"},children:[U?T.jsx(EP,{}):T.jsx(Gw,{}),T.jsxs("span",{children:[((Y=z.details)==null?void 0:Y.length)||0," items"]})]}):null},[t,n]),h=I.useMemo(()=>[{field:"id",headerName:"Edge ID",width:60,cellStyle:{fontFamily:"monospace",fontWeight:"600",fontSize:"10px"}},{field:"source",headerName:"Source",width:100,cellRenderer:GPe},{field:"target",headerName:"Target",width:210,cellRenderer:jPe},{field:"ruas_list",headerName:"Ruas",width:160,valueFormatter:O=>O.value||"N/A",cellStyle:{color:"#6B7280",fontSize:"11px"}},{field:"layer_list",headerName:"Layer",width:110,cellRenderer:NPe},{field:"capacity",headerName:"Capacity",width:180,cellRenderer:HPe},{field:"traffic_max",headerName:"Traffic Max",width:110,cellRenderer:VPe},{field:"avg_utilization",headerName:"Utilization",width:100,cellRenderer:$Pe},{field:"link_count",headerName:"Links",width:90,cellRenderer:WPe},{field:"details",headerName:"Details",width:100,cellRenderer:d}],[d]),m=I.useMemo(()=>({sortable:!0,filter:!0,resizable:!0,suppressSizeToFit:!0}),[]),v=I.useMemo(()=>r?e.find(O=>O.id===r):null,[r,e]),w=I.useMemo(()=>v!=null&&v.details?s?v.details.filter(O=>Object.values(O).some(z=>String(z).toLowerCase().includes(s.toLowerCase()))):v.details:[],[v,s]),R=I.useMemo(()=>{var O;return(O=v==null?void 0:v.details)!=null&&O[0]?Object.keys(v.details[0]).map(z=>({field:z,headerName:z.replace(/_/g," ").toUpperCase(),flex:1,valueFormatter:$=>String($.value??"")})):[]},[v]);return T.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[T.jsx("style",{children:zV}),T.jsx("div",{className:"ag-theme-custom ag-theme-custom-edge",style:{flex:r?"0 0 50%":1,width:"100%"},children:T.jsx(US,{ref:i,rowData:e,columnDefs:h,defaultColDef:m,animateRows:!0,rowSelection:"single",getRowId:O=>O.data.id,suppressCellFocus:!0,pagination:!0,paginationPageSize:8,paginationPageSizeSelector:[8,16,32,50],rowHeight:56})}),r&&v&&T.jsxs("div",{style:{flex:"0 0 50%",padding:"16px",borderTop:"4px solid #8B5CF6",background:"rgba(139, 92, 246, 0.02)",display:"flex",flexDirection:"column"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"12px"},children:[T.jsxs("h4",{style:{fontSize:"13px",fontWeight:"700",color:"#1F2937",margin:0},children:["Edge Details (",((L=v.details)==null?void 0:L.length)||0," physical links)"]}),T.jsx("input",{type:"text",placeholder:"Search in details...",value:s,onChange:O=>a(O.target.value),style:{flex:1,maxWidth:"400px",padding:"8px 12px",borderRadius:"8px",border:"1px solid rgba(0,0,0,0.1)",fontSize:"12px",outline:"none"}}),T.jsx("button",{onClick:()=>{o(null),n(r)},style:{background:"rgba(239, 68, 68, 0.1)",border:"none",borderRadius:"6px",padding:"8px 16px",cursor:"pointer",fontSize:"12px",fontWeight:"600",color:"#EF4444"},children:"Close"})]}),T.jsx("div",{className:"ag-theme-custom ag-theme-custom-edge",style:{flex:1},children:T.jsx(US,{rowData:w,columnDefs:R,defaultColDef:m,animateRows:!0})})]})]})}function KPe({elements:e=[],ruasRekapData:t,selectedRuasLayer:n,onClose:i}){const[r,o]=I.useState(""),[s,a]=I.useState("nodes"),[d,h]=I.useState(new Set),m=(t==null?void 0:t.nodes)||[],v=(t==null?void 0:t.edges)||[],w=$=>{const U=new Set(d);U.has($)?U.delete($):U.add($),h(U)},R=m.filter($=>{var U,Y,X,q,ie;return((U=String($.id||""))==null?void 0:U.toLowerCase().includes(r.toLowerCase()))||((Y=String($.label||""))==null?void 0:Y.toLowerCase().includes(r.toLowerCase()))||((X=String($.platform||""))==null?void 0:X.toLowerCase().includes(r.toLowerCase()))||((q=String($.witel||""))==null?void 0:q.toLowerCase().includes(r.toLowerCase()))||((ie=String($.layer||""))==null?void 0:ie.toLowerCase().includes(r.toLowerCase()))}),L=v.filter($=>{var U,Y,X,q,ie,re;return((U=String($.id||""))==null?void 0:U.toLowerCase().includes(r.toLowerCase()))||((Y=String($.source||""))==null?void 0:Y.toLowerCase().includes(r.toLowerCase()))||((X=String($.target||""))==null?void 0:X.toLowerCase().includes(r.toLowerCase()))||((q=String($.source_label||""))==null?void 0:q.toLowerCase().includes(r.toLowerCase()))||((ie=String($.target_label||""))==null?void 0:ie.toLowerCase().includes(r.toLowerCase()))||((re=String($.ruas_list||""))==null?void 0:re.toLowerCase().includes(r.toLowerCase()))}),O=()=>{const $=s==="nodes"?R:L;if($.length===0){alert("No data to export");return}const U=Object.keys($[0]).filter(re=>re!=="details"),Y=[U.join(","),...$.map(re=>U.map(J=>{const ne=re[J];return typeof ne=="string"&&ne.includes(",")?`"${ne}"`:ne}).join(","))].join(`
`),X=new Blob([Y],{type:"text/csv"}),q=URL.createObjectURL(X),ie=document.createElement("a");ie.href=q,ie.download=`${n||"data"}_${s}_${new Date().toISOString().split("T")[0]}.csv`,ie.click(),URL.revokeObjectURL(q)},z=t&&(m.length>0||v.length>0);return T.jsx("div",{style:{position:"fixed",top:"16px",bottom:"16px",left:"16px",right:"16px",zIndex:1e3},children:T.jsxs("div",{style:{height:"100%",background:"linear-gradient(145deg, rgba(255,255,255,0.98), rgba(245,245,245,0.95))",backdropFilter:"blur(20px)",borderRadius:"20px",border:"1px solid rgba(255,255,255,0.3)",boxShadow:"0 20px 60px rgba(0,0,0,0.15), inset 0 1px 0 rgba(255,255,255,0.9)",display:"flex",flexDirection:"column",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[T.jsxs("div",{style:{padding:"20px",borderBottom:"2px solid rgba(0,0,0,0.06)"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[T.jsxs("div",{children:[T.jsx("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1F2937",margin:0,marginBottom:"4px"},children:z?`${n||"Ruas Rekap"} Layer Data`:"Network Elements Data"}),T.jsx("p",{style:{fontSize:"13px",color:"#6B7280",margin:0},children:z?`${m.length} nodes and ${v.length} edges in this layer`:`${e.length} network elements`})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[T.jsxs("button",{onClick:O,style:{background:"linear-gradient(135deg, #3B82F6 0%, #2563EB 100%)",borderRadius:"10px",border:"none",padding:"8px 16px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"13px",fontWeight:"600",color:"white",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)",transition:"all 0.2s"},children:[T.jsx(fN,{style:{width:"16px",height:"16px"}}),T.jsx("span",{children:"Export CSV"})]}),T.jsx("button",{onClick:i,style:{background:"linear-gradient(145deg, rgba(255,255,255,0.9), rgba(240,240,240,0.7))",borderRadius:"10px",border:"1px solid rgba(0,0,0,0.1)",padding:"10px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},children:T.jsx(Tp,{style:{width:"18px",height:"18px",color:"#6B7280"}})})]})]}),z&&T.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:[T.jsxs("button",{onClick:()=>a("nodes"),style:{flex:1,padding:"10px 16px",borderRadius:"10px",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"13px",fontWeight:"600",background:s==="nodes"?"linear-gradient(135deg, #10B981 0%, #059669 100%)":"rgba(255,255,255,0.5)",color:s==="nodes"?"white":"#6B7280",boxShadow:s==="nodes"?"0 4px 12px rgba(16, 185, 129, 0.3)":"none",transition:"all 0.2s"},children:[T.jsx(vx,{style:{width:"16px",height:"16px"}}),T.jsxs("span",{children:["Nodes (",R.length,")"]})]}),T.jsxs("button",{onClick:()=>a("edges"),style:{flex:1,padding:"10px 16px",borderRadius:"10px",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"13px",fontWeight:"600",background:s==="edges"?"linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%)":"rgba(255,255,255,0.5)",color:s==="edges"?"white":"#6B7280",boxShadow:s==="edges"?"0 4px 12px rgba(139, 92, 246, 0.3)":"none",transition:"all 0.2s"},children:[T.jsx(cY,{style:{width:"16px",height:"16px"}}),T.jsxs("span",{children:["Edges (",L.length,")"]})]})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[T.jsx("div",{style:{flex:1,position:"relative"},children:T.jsx("input",{placeholder:z?s==="nodes"?"Search nodes by ID, label, platform, witel...":"Search edges by ID, source, target, ruas...":"Search by hostname, site, area...",value:r,onChange:$=>o($.target.value),style:{width:"98%",padding:"10px 14px",fontSize:"14px",border:"2px solid rgba(0,0,0,0.08)",borderRadius:"10px",outline:"none",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',transition:"all 0.2s"}})}),T.jsxs("button",{style:{background:"white",borderRadius:"10px",border:"2px solid rgba(0,0,0,0.08)",padding:"10px 16px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"13px",fontWeight:"600",color:"#1F2937",transition:"all 0.2s"},children:[T.jsx(gT,{style:{width:"16px",height:"16px"}}),T.jsx("span",{children:"Filters"})]})]})]}),T.jsx("div",{style:{flex:1,overflow:"auto",background:"rgba(249,250,251,0.3)"},children:z?s==="nodes"?T.jsx(UPe,{nodes:R,expandedRows:d,onToggleExpand:w}):T.jsx(qPe,{edges:L,expandedRows:d,onToggleExpand:w}):T.jsxs("div",{style:{padding:"40px",textAlign:"center",color:"#6B7280"},children:[T.jsx("p",{style:{fontSize:"14px",marginBottom:"8px"},children:"No Ruas Rekap data available"}),T.jsx("p",{style:{fontSize:"12px"},children:"Please select a Ruas layer from the left sidebar"})]})}),T.jsx("div",{style:{padding:"16px 20px",borderTop:"2px solid rgba(0,0,0,0.06)",background:"rgba(255,255,255,0.8)"},children:T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:[T.jsxs("span",{children:["Showing ",z?s==="nodes"?R.length:L.length:0," of ",z?s==="nodes"?m.length:v.length:0," ",s]}),T.jsxs("span",{children:["Last updated: ",new Date().toLocaleString()]})]})})]})})}const ZPe={national:RP,regional:vx,witel:t2,sto:AP},YPe=[{level:"national",name:"National",description:"Nationwide overview",icon:RP,zoom:4,targetZoom:4.5},{level:"regional",name:"Regional",description:"Regional clusters",icon:vx,zoom:6,targetZoom:6.5},{level:"witel",name:"Witel",description:"Witel districts",icon:t2,zoom:8,targetZoom:8.5},{level:"sto",name:"STO",description:"STO sites",icon:AP,zoom:10,targetZoom:11}],XPe=e=>e<5.5?{layer:"L1",name:"National Backbone",description:"Core infrastructure",icon:TP,color:"#DC2626",bgGradient:"linear-gradient(135deg, #FEE2E2, #FECACA)"}:e<7?{layer:"L2",name:"Regional Aggregation",description:"Metropolitan networks",icon:vx,color:"#EA580C",bgGradient:"linear-gradient(135deg, #FED7AA, #FDBA74)"}:e<9?{layer:"L3",name:"Witel Distribution",description:"Local distribution",icon:t2,color:"#059669",bgGradient:"linear-gradient(135deg, #D1FAE5, #A7F3D0)"}:{layer:"L4",name:"STO Detail",description:"Site details",icon:AP,color:"#4F46E5",bgGradient:"linear-gradient(135deg, #E0E7FF, #C7D2FE)"};function JPe({currentLevel:e,navigationPath:t,onLevelChange:n,onNavigateBack:i,onZoomToLevel:r,currentZoom:o=5,totalNodes:s=0,totalLinks:a=0}){const[d,h]=I.useState({x:310,y:16}),[m,v]=I.useState(!1),[w,R]=I.useState(!0),[L,O]=I.useState(!1),[z,$]=I.useState({x:0,y:0}),U=I.useRef(null),Y=XPe(o),X=re=>{if(U.current){const J=U.current.getBoundingClientRect();$({x:re.clientX-J.left,y:re.clientY-J.top}),O(!0)}};I.useEffect(()=>{const re=ne=>{L&&h({x:ne.clientX-z.x,y:ne.clientY-z.y})},J=()=>{O(!1)};return L&&(document.addEventListener("mousemove",re),document.addEventListener("mouseup",J)),()=>{document.removeEventListener("mousemove",re),document.removeEventListener("mouseup",J)}},[L,z]);const q=({children:re,style:J={}})=>T.jsx("div",{style:{background:"linear-gradient(145deg, rgba(255,255,255,0.95), rgba(240,240,240,0.9))",backdropFilter:"blur(20px)",borderRadius:"20px",border:"1px solid rgba(255,255,255,0.3)",boxShadow:"0 20px 40px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',...J},children:re}),ie=({onClick:re,children:J,title:ne,size:be="normal"})=>T.jsx("button",{onClick:re,title:ne,style:{background:"linear-gradient(145deg, rgba(255,255,255,0.9), rgba(240,240,240,0.7))",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.3)",boxShadow:"inset 0 1px 2px rgba(255,255,255,0.8), inset 0 -1px 2px rgba(0,0,0,0.1)",padding:be==="small"?"6px":"8px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",color:"#6B7280"},onMouseEnter:ue=>{ue.currentTarget.style.transform="translateY(-1px)",ue.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.15), inset 0 1px 2px rgba(255,255,255,0.9)"},onMouseLeave:ue=>{ue.currentTarget.style.transform="translateY(0px)",ue.currentTarget.style.boxShadow="inset 0 1px 2px rgba(255,255,255,0.8), inset 0 -1px 2px rgba(0,0,0,0.1)"},children:J});return w?T.jsx("div",{ref:U,style:{position:"fixed",left:`${d.x}px`,top:`${d.y}px`,zIndex:1e3,cursor:L?"grabbing":"grab"},children:T.jsx(q,{children:T.jsxs("div",{style:{padding:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[T.jsx("div",{onMouseDown:X,style:{cursor:"grab",display:"flex",alignItems:"center"},children:T.jsx(DI,{style:{width:"16px",height:"16px",color:"#6B7280"}})}),T.jsx(ie,{onClick:()=>R(!1),title:"Expand Hierarchy Panel",children:T.jsx(vx,{style:{width:"16px",height:"16px"}})})]})})}):T.jsx("div",{ref:U,style:{position:"fixed",left:`${d.x}px`,top:`${d.y}px`,zIndex:1e3,width:m?"280px":"420px",cursor:L?"grabbing":"default",transition:L?"none":"width 0.3s ease"},children:T.jsxs(q,{style:{display:"flex",flexDirection:"column",overflow:"hidden"},children:[T.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid rgba(0,0,0,0.05)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[T.jsx("div",{onMouseDown:X,style:{cursor:L?"grabbing":"grab",padding:"4px",borderRadius:"6px",background:"linear-gradient(135deg, #6B728020, #6B728010)",border:"1px solid #6B728030",display:"flex",alignItems:"center",justifyContent:"center"},title:"Drag to move panel",children:T.jsx(DI,{style:{width:"14px",height:"14px",color:"#6B7280"}})}),!m&&T.jsxs("div",{children:[T.jsx("div",{style:{fontSize:"16px",fontWeight:"700",color:"#1F2937",marginBottom:"2px"},children:"Network Hierarchy"}),T.jsxs("div",{style:{fontSize:"11px",color:"#6B7280",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px"},children:[s," nodes  ",a," links"]})]})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[T.jsx(ie,{onClick:()=>v(!m),title:m?"Expand":"Collapse",size:"small",children:m?T.jsx(Gw,{style:{width:"14px",height:"14px"}}):T.jsx(hN,{style:{width:"14px",height:"14px"}})}),T.jsx(ie,{onClick:()=>R(!0),title:"Minimize Panel",size:"small",children:T.jsx(hY,{style:{width:"14px",height:"14px"}})})]})]}),!m&&T.jsxs(T.Fragment,{children:[T.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid rgba(0,0,0,0.05)"},children:[T.jsx("div",{style:{fontSize:"12px",color:"#6B7280",fontWeight:"600",marginBottom:"8px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Navigation Path"}),T.jsx("div",{style:{display:"flex",alignItems:"center",gap:"6px",flexWrap:"wrap"},children:t.map((re,J)=>{const ne=ZPe[re.level],be=J===t.length-1,ue=!be;return T.jsxs(qt.Fragment,{children:[T.jsxs("button",{onClick:()=>ue?i(re.level):void 0,disabled:!ue,style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 10px",borderRadius:"8px",border:"none",cursor:ue?"pointer":"default",transition:"all 0.2s ease",background:be?"linear-gradient(135deg, #4F46E5, #3B82F6)":"linear-gradient(145deg, rgba(255,255,255,0.8), rgba(240,240,240,0.6))",color:be?"#FFFFFF":"#374151",fontWeight:be?"600":"500",fontSize:"12px"},children:[T.jsx(ne,{style:{width:"12px",height:"12px"}}),T.jsx("span",{children:re.name})]}),!be&&T.jsx(Gw,{style:{width:"12px",height:"12px",color:"#9CA3AF"}})]},`${re.level}-${re.identifier||re.name}`)})})]}),T.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid rgba(0,0,0,0.05)"},children:[T.jsx("div",{style:{fontSize:"12px",color:"#6B7280",fontWeight:"600",marginBottom:"12px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Hierarchy Levels"}),T.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:YPe.map(re=>{const J=re.icon,ne=e===re.level,be=t.some(ue=>ue.level===re.level)||re.level==="national";return T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[T.jsxs("button",{onClick:()=>{be&&(n(re.level),r(re.level,re.targetZoom))},disabled:!be,style:{flex:1,display:"flex",alignItems:"center",gap:"10px",padding:"10px 12px",borderRadius:"10px",border:"none",cursor:be?"pointer":"not-allowed",transition:"all 0.3s ease",fontSize:"13px",fontWeight:"500",background:ne?"linear-gradient(135deg, #4F46E5, #3B82F6)":be?"linear-gradient(145deg, rgba(255,255,255,0.8), rgba(240,240,240,0.6))":"rgba(156,163,175,0.3)",color:ne?"#FFFFFF":be?"#374151":"#9CA3AF",opacity:be?1:.5},children:[T.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"24px",height:"24px",borderRadius:"6px",background:ne?"rgba(255,255,255,0.2)":"rgba(79,70,229,0.1)",border:"1px solid rgba(79,70,229,0.2)"},children:T.jsx(J,{style:{width:"12px",height:"12px"}})}),T.jsxs("div",{style:{flex:1,textAlign:"left"},children:[T.jsx("div",{style:{fontWeight:"600"},children:re.name}),T.jsx("div",{style:{fontSize:"10px",color:ne?"rgba(255,255,255,0.8)":"#9CA3AF",fontWeight:"500"},children:re.description})]}),T.jsxs("div",{style:{fontSize:"10px",fontWeight:"600",color:ne?"rgba(255,255,255,0.9)":"#6B7280"},children:[re.targetZoom,"x"]})]}),T.jsxs("div",{style:{display:"flex",gap:"4px"},children:[T.jsx(ie,{onClick:()=>r(re.level,re.targetZoom-1),title:"Zoom Out",size:"small",children:T.jsx(vY,{style:{width:"10px",height:"10px"}})}),T.jsx(ie,{onClick:()=>r(re.level,re.targetZoom+1),title:"Zoom In",size:"small",children:T.jsx(yY,{style:{width:"10px",height:"10px"}})})]})]},re.level)})})]}),T.jsxs("div",{style:{padding:"16px"},children:[T.jsx("div",{style:{fontSize:"12px",color:"#6B7280",fontWeight:"600",marginBottom:"8px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Current Layer"}),T.jsx("div",{style:{background:Y.bgGradient,borderRadius:"12px",padding:"12px",border:"1px solid rgba(255,255,255,0.4)"},children:T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[T.jsx("div",{style:{padding:"6px",borderRadius:"8px",background:"rgba(255,255,255,0.6)",display:"flex",alignItems:"center",justifyContent:"center"},children:T.jsx(Y.icon,{style:{width:"16px",height:"16px",color:Y.color}})}),T.jsxs("div",{style:{flex:1},children:[T.jsxs("div",{style:{fontSize:"13px",fontWeight:"700",color:"#1F2937",marginBottom:"2px"},children:[Y.layer," - ",Y.name]}),T.jsx("div",{style:{fontSize:"10px",color:"#6B7280",fontWeight:"500"},children:Y.description})]}),T.jsxs("div",{style:{fontSize:"11px",color:"#9CA3AF",fontWeight:"600",fontFamily:"monospace"},children:[o.toFixed(1),"x"]})]})})]})]})]})})}function QPe({onMenuClick:e,activeMenu:t,selectedLayer:n="none",onLayerChange:i,ruasRekapDataAvailable:r=!1,ruasRekapData:o=null,onFilterRuasNodes:s,ruasRekapStoData:a=null,isLayerLoading:d=!1,selectedRuasLayer:h="tera-tera",onRuasLayerChange:m}){var he;const[v,w]=I.useState(!1),[R,L]=I.useState(!1),[O,z]=I.useState(!1),[$,U]=I.useState(""),[Y,X]=I.useState(new Set),q=I.useRef(!1),ie=I.useRef(null),re=I.useRef(null),J=I.useRef(0),ne=I.useCallback(Re=>{const De=Re.target.value,Ye=Re.target.selectionStart;b0.flushSync(()=>{U(De)}),requestAnimationFrame(()=>{ie.current&&(ie.current.focus(),Ye!==null&&ie.current.setSelectionRange(Ye,Ye))})},[]),be=I.useCallback(Re=>{re.current&&(J.current=re.current.scrollTop),m&&m(Re)},[m]);qt.useEffect(()=>{re.current&&J.current>0&&(re.current.scrollTop=J.current)});const ue=qt.useMemo(()=>{const Re=[{value:"tera-tera",label:"TERA - TERA",color:"#3B82F6"},{value:"tera-metro",label:"TERA - METRO",color:"#10B981"},{value:"tera-swc",label:"TERA - SWC",color:"#F59E0B"},{value:"tera-pevoice",label:"TERA - PEVOICE",color:"#8B5CF6"},{value:"tera-pemobile",label:"TERA - PEMOBILE",color:"#EC4899"},{value:"tera-pehsi",label:"TERA - PEHSI",color:"#14B8A6"},{value:"tera-pehdc",label:"TERA - PEHDC",color:"#F97316"},{value:"tera-cgw",label:"TERA - CGW",color:"#6366F1"},{value:"trunk_all_metro_metro",label:"METRO - METRO",color:"#06B6D4"},{value:"trunk_all_metro_spine",label:"METRO - SPINE",color:"#8B5CF6"},{value:"trunk_all_metro_dcn",label:"METRO - DCN",color:"#EC4899"},{value:"trunk_all_metro_bras",label:"METRO - BRAS",color:"#F59E0B"},{value:"trunk_all_metro_cdn",label:"METRO - CDN",color:"#10B981"},{value:"trunk_all_metro_cndc",label:"METRO - CNDC",color:"#EF4444"},{value:"trunk_all_metro_wac",label:"METRO - WAC",color:"#84CC16"},{value:"trunk_all_metro_wag",label:"METRO - WAG",color:"#A855F7"},{value:"trunk_all_metro_pedatin",label:"METRO - PEDATIN",color:"#F43F5E"},{value:"trunk_all_metro_pehsi",label:"METRO - PEHSI",color:"#0EA5E9"},{value:"trunk_all_metro_pevoice",label:"METRO - PEVOICE",color:"#22C55E"},{value:"trunk_all_metro_rantsel",label:"METRO - RANTSEL",color:"#14B8A6"},{value:"trunk_all_metro_twamp",label:"METRO - TWAMP",color:"#F97316"},{value:"trunk_all_metro_starlink",label:"METRO - STARLINK",color:"#6366F1"},{value:"trunk_all_pe_spine",label:"PE - SPINE",color:"#1E3A8A"},{value:"trunk_all_pe_teradatin",label:"PE - TERADATIN",color:"#065F46"},{value:"trunk_all_pe_cdn",label:"PE - CDN",color:"#78350F"},{value:"trunk_all_pe_wac",label:"PE - WAC",color:"#7C3AED"},{value:"trunk_all_pe_wag",label:"PE - WAG",color:"#BE185D"},{value:"trunk_all_pemobile_pemobile",label:"PEMOBILE - PEMOBILE",color:"#0F766E"},{value:"trunk_all_pemobile_metro",label:"PEMOBILE - METRO",color:"#1E40AF"},{value:"trunk_all_pemobile_rantsel",label:"PEMOBILE - RANTSEL",color:"#9A3412"},{value:"trunk_all_pemobile_it_agg",label:"PEMOBILE - IT_AGG",color:"#7F1D1D"},{value:"trunk_all_pemobile_cps",label:"PEMOBILE - CPS",color:"#4D7C0F"},{value:"trunk_all_pemobile_blf",label:"PEMOBILE - BLF",color:"#4338CA"},{value:"trunk_all_pemobile_twamp",label:"PEMOBILE - TWAMP",color:"#A16207"},{value:"trunk_all_pehsi_swc",label:"PEHSI - SWC",color:"#3A0CA3"},{value:"trunk_all_pehsi_ebr",label:"PEHSI - EBR",color:"#7C2D12"},{value:"trunk_all_pehsi_lb",label:"PEHSI - LB",color:"#0369A1"},{value:"trunk_all_pehsi_sig",label:"PEHSI - SIG",color:"#15803D"},{value:"trunk_all_petransit_ebr",label:"PETRANSIT - EBR",color:"#6B21A8"},{value:"trunk_all_me_bngtsel",label:"ME - BNGTSEL",color:"#9F1239"},{value:"trunk_all_bngtsel_pehsi",label:"BNGTSEL - PEHSI",color:"#0C4A6E"},{value:"trunk_all_bras_pehsi",label:"BRAS - PEHSI",color:"#B45309"},{value:"trunk_all_allot_pehsi",label:"ALLOT - PEHSI",color:"#14532D"},{value:"trunk_all_nodeb_metro",label:"NODEB - METRO",color:"#3F6212"},{value:"trunk_all_olt_metro",label:"OLT - METRO",color:"#701A75"}],De=$.toLowerCase().trim();return De?Re.filter(Ye=>Ye.label.toLowerCase().includes(De)):Re},[$]),ve=qt.useMemo(()=>{const Re=n==="ruasrekapsto"?a:o;if(!(Re!=null&&Re.nodes))return[];const De=new Set;return n==="ruasrekapsto"?Re.nodes.forEach(Ye=>{Ye.layer&&De.add(Ye.layer)}):(Re.nodes.forEach(Ye=>{Ye.layer&&De.add(Ye.layer)}),Re.edges&&Array.isArray(Re.edges)&&Re.edges.forEach(Ye=>{Ye.layer_list?De.add(Ye.layer_list):Ye.layer&&De.add(Ye.layer)}),Re.nodes.forEach(Ye=>{Ye.topology&&Array.isArray(Ye.topology)&&Ye.topology.forEach(_e=>{_e.layer&&De.add(_e.layer)})})),Array.from(De).sort()},[o,a,n]);qt.useEffect(()=>{if(n==="ruasrekap"&&o){q.current=!0,z(!0);const Re=new Set(ve);X(Re),setTimeout(()=>{q.current=!1},100)}else if(n==="ruasrekapsto"&&a){q.current=!0,z(!0);const Re=new Set(ve);X(Re),setTimeout(()=>{q.current=!1},100)}else n!=="ruasrekap"&&n!=="ruasrekapsto"&&z(!1)},[n,o,a,ve]),qt.useEffect(()=>{if(q.current||!O||!s)return;const Re=n==="ruasrekapsto"?a:o;if(!Re)return;if(Y.size===0){s([]);return}let De=[];if(n==="ruasrekapsto")De=Re.nodes.filter(Ye=>Ye.layer&&Y.has(Ye.layer)).map(Ye=>Ye.id);else{const Ye=new Set,_e=new Set;Re.nodes.forEach(Le=>{Le.layer&&Y.has(Le.layer)&&Ye.add(Le.id)}),Re.edges&&Array.isArray(Re.edges)&&Re.edges.forEach(Le=>{const Oe=Le.layer_list||Le.layer;Oe&&Y.has(Oe)&&(Le.source&&_e.add(Le.source),Le.target&&_e.add(Le.target))}),Re.nodes.forEach(Le=>{Le.topology&&Array.isArray(Le.topology)&&Le.topology.some(yt=>yt.layer&&Y.has(yt.layer))&&Ye.add(Le.id)}),De=Array.from(new Set([...Ye,..._e]))}console.log(`[Filter] Layer: ${n}, Selected Layers: ${Y.size}, Filtered Nodes: ${De.length}`),s(De)},[Y,O,n,o,a,s]);const ce=[{id:"dashboard",icon:RP,label:"Dashboard",color:"#3B82F6",description:"Main overview",badge:"5"},{id:"topology",icon:mT,label:"Topology",color:"#8B5CF6",description:"Network view",badge:"12"},{id:"layers",icon:vx,label:"Layers",color:"#10B981",description:"Map layers",badge:""},{id:"analytics",icon:dN,label:"Analytics",color:"#F59E0B",description:"Data analysis",badge:"7"},{id:"settings",icon:yT,label:"Settings",color:"#6B7280",description:"Configuration",badge:""}],Ie=({children:Re,className:De="",style:Ye={}})=>T.jsx("div",{className:De,style:{background:"linear-gradient(145deg, rgba(255,255,255,0.95), rgba(240,240,240,0.9))",backdropFilter:"blur(20px)",borderRadius:"20px",border:"1px solid rgba(255,255,255,0.3)",boxShadow:"0 20px 40px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',...Ye},children:Re}),Te=({onClick:Re,children:De,title:Ye,size:_e="normal"})=>T.jsx("button",{onClick:Re,title:Ye,style:{background:"linear-gradient(145deg, rgba(255,255,255,0.9), rgba(240,240,240,0.7))",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.3)",boxShadow:"inset 0 1px 2px rgba(255,255,255,0.8), inset 0 -1px 2px rgba(0,0,0,0.1)",padding:_e==="small"?"6px":"8px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",color:"#6B7280"},onMouseEnter:Le=>{Le.currentTarget.style.boxShadow="inset 0 2px 4px rgba(255,255,255,0.9), inset 0 -2px 4px rgba(0,0,0,0.15), 0 4px 8px rgba(0,0,0,0.1)",Le.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:Le=>{Le.currentTarget.style.boxShadow="inset 0 1px 2px rgba(255,255,255,0.8), inset 0 -1px 2px rgba(0,0,0,0.1)",Le.currentTarget.style.transform="translateY(0px)"},children:De}),fe=()=>T.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.75)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,animation:"fadeIn 0.3s ease"},children:[T.jsx("style",{children:`
          @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
          }
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
          @keyframes reverseSpin {
            0% { transform: rotate(360deg); }
            100% { transform: rotate(0deg); }
          }
          @keyframes pulse {
            0%, 100% {
              transform: scale(1);
              opacity: 1;
            }
            50% {
              transform: scale(1.05);
              opacity: 0.7;
            }
          }
          @keyframes bounce {
            0%, 100% {
              transform: translateY(0px);
            }
            50% {
              transform: translateY(-8px);
            }
          }
          @keyframes ping {
            0% {
              transform: scale(0.95);
              opacity: 0.8;
            }
            50% {
              opacity: 0.4;
            }
            100% {
              transform: scale(1.8);
              opacity: 0;
            }
          }
          @keyframes dotPulse {
            0%, 100% {
              transform: scale(0.8);
              opacity: 0.5;
            }
            50% {
              transform: scale(1.2);
              opacity: 1;
            }
          }
        `}),T.jsxs("div",{style:{background:"linear-gradient(145deg, #ffffff, #f5f5f5)",borderRadius:"28px",padding:"56px 48px",boxShadow:"0 30px 60px rgba(0,0,0,0.25), 0 10px 20px rgba(0,0,0,0.15), inset 0 1px 0 rgba(255,255,255,0.8)",display:"flex",flexDirection:"column",alignItems:"center",gap:"32px",minWidth:"360px",maxWidth:"400px",position:"relative",overflow:"hidden"},children:[T.jsx("div",{style:{position:"absolute",top:"-50%",right:"-50%",width:"200%",height:"200%",background:"radial-gradient(circle, rgba(59,130,246,0.05) 0%, transparent 70%)",pointerEvents:"none"}}),T.jsxs("div",{style:{position:"relative",width:"140px",height:"140px",display:"flex",alignItems:"center",justifyContent:"center"},children:[T.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",width:"100%",height:"100%",marginTop:"-50%",marginLeft:"-50%",border:"4px solid transparent",borderTopColor:"#3B82F6",borderRightColor:"#8B5CF6",borderRadius:"50%",animation:"spin 3s linear infinite"}}),T.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",width:"85%",height:"85%",marginTop:"-42.5%",marginLeft:"-42.5%",border:"3px solid transparent",borderBottomColor:"#10B981",borderLeftColor:"#059669",borderRadius:"50%",animation:"reverseSpin 2.5s linear infinite"}}),T.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",width:"70%",height:"70%",marginTop:"-35%",marginLeft:"-35%",border:"2px solid rgba(59, 130, 246, 0.3)",borderRadius:"50%",animation:"pulse 2s ease-in-out infinite"}}),T.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",width:"50px",height:"50px",marginTop:"-25px",marginLeft:"-25px",borderRadius:"50%",background:"rgba(59, 130, 246, 0.3)",animation:"ping 2s cubic-bezier(0, 0, 0.2, 1) infinite"}}),T.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",width:"50px",height:"50px",marginTop:"-25px",marginLeft:"-25px",borderRadius:"50%",background:"rgba(139, 92, 246, 0.3)",animation:"ping 2s cubic-bezier(0, 0, 0.2, 1) infinite 1s"}}),T.jsx("div",{style:{position:"relative",zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",width:"56px",height:"56px",borderRadius:"50%",background:"linear-gradient(135deg, #3B82F6, #8B5CF6)",boxShadow:"0 8px 24px rgba(59, 130, 246, 0.4)",animation:"bounce 2s ease-in-out infinite"},children:T.jsx(mT,{style:{width:"28px",height:"28px",color:"#FFFFFF",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"}})}),[0,1,2,3].map(Re=>T.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",width:"10px",height:"10px",marginTop:"-5px",marginLeft:"-5px",borderRadius:"50%",background:Re%2===0?"linear-gradient(135deg, #3B82F6, #8B5CF6)":"linear-gradient(135deg, #10B981, #059669)",boxShadow:`0 2px 8px ${Re%2===0?"rgba(59, 130, 246, 0.4)":"rgba(16, 185, 129, 0.4)"}`,transform:`rotate(${Re*90}deg) translateY(-60px)`,animation:`pulse 1.5s ease-in-out infinite ${Re*.25}s`}},Re))]}),T.jsxs("div",{style:{textAlign:"center",position:"relative",zIndex:1},children:[T.jsx("div",{style:{fontSize:"24px",fontWeight:"700",marginBottom:"8px",background:"linear-gradient(135deg, #3B82F6 0%, #8B5CF6 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",letterSpacing:"-0.5px"},children:"Loading Map Layer"}),T.jsx("div",{style:{fontSize:"14px",color:"#6B7280",fontWeight:"500",letterSpacing:"0.3px"},children:"Preparing visualization..."})]}),T.jsx("div",{style:{display:"flex",gap:"12px",alignItems:"center",position:"relative",zIndex:1},children:[0,1,2].map(Re=>T.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"linear-gradient(135deg, #3B82F6, #8B5CF6)",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.4)",animation:`dotPulse 1.4s ease-in-out infinite ${Re*.2}s`}},Re))})]})]});return R?T.jsx("div",{style:{position:"fixed",left:"16px",top:"16px",zIndex:1e3},children:T.jsx(Te,{onClick:()=>L(!1),title:"Open Control Panel",children:T.jsx(dY,{style:{width:"20px",height:"20px"}})})}):T.jsxs(T.Fragment,{children:[d&&T.jsx(fe,{}),T.jsx("div",{style:{position:"fixed",left:"16px",top:"16px",bottom:"16px",zIndex:1e3,width:v?"86px":"288px",transition:"width 0.3s ease",display:"flex",flexDirection:"column"},children:T.jsxs(Ie,{style:{display:"flex",flexDirection:"column",overflow:"hidden",height:"100%",maxHeight:"calc(100vh - 32px)"},children:[T.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid rgba(0,0,0,0.05)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[!v&&T.jsx("div",{children:T.jsx("img",{src:"/images/infranexia-side.png",alt:"Infranexia",style:{height:"50px",width:"auto",objectFit:"contain"}})}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[T.jsx(Te,{onClick:()=>w(!v),title:v?"Expand":"Collapse",size:"small",children:v?T.jsx(Gw,{style:{width:"14px",height:"14px"}}):T.jsx(hN,{style:{width:"14px",height:"14px"}})}),!v&&T.jsx(Te,{onClick:()=>L(!0),title:"Minimize Panel",size:"small",children:T.jsx(Tp,{style:{width:"14px",height:"14px"}})})]})]}),!v&&T.jsxs("div",{style:{padding:"12px",borderBottom:"1px solid rgba(0,0,0,0.05)",display:"flex",flexDirection:"column",gap:"8px",overflowY:"auto",maxHeight:"calc(100vh - 200px)"},children:[i&&T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[T.jsx("label",{style:{fontSize:"12px",fontWeight:"500",color:"#374151"},children:"Data Layer"}),T.jsxs("select",{value:n,onChange:Re=>{const De=Re.target.value;i(De),z(De==="ruasrekap"||De==="ruasrekapsto")},style:{width:"100%",padding:"10px 12px",borderRadius:"10px",border:"1px solid rgba(0,0,0,0.1)",background:"linear-gradient(145deg, rgba(255,255,255,0.9), rgba(240,240,240,0.7))",fontSize:"13px",fontWeight:"500",color:"#374151",cursor:"pointer",boxShadow:"inset 0 1px 2px rgba(255,255,255,0.8), inset 0 -1px 2px rgba(0,0,0,0.1)",transition:"all 0.2s ease",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[T.jsx("option",{value:"none",children:"Pilih Layer"}),T.jsxs("option",{value:"ruasrekap",disabled:!r,children:["Ruas Rekap "," ",r?`(${((he=o==null?void 0:o.nodes)==null?void 0:he.length)||0} nodes)`:"(Loading...)"]})]})]}),n==="ruasrekap"&&m&&o&&T.jsxs("div",{style:{marginTop:"12px",padding:"12px",borderRadius:"10px",background:"linear-gradient(145deg, rgba(59,130,246,0.05), rgba(59,130,246,0.02))",border:"1px solid rgba(59,130,246,0.1)",display:"flex",flexDirection:"column",gap:"8px"},children:[T.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:T.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#8B5CF6"},children:"Ruas Layer Selection"})}),T.jsx("input",{ref:ie,type:"text",placeholder:"Search ruas layers...",value:$,onChange:ne,autoComplete:"off",autoFocus:!1,style:{width:"91%",padding:"8px 10px",borderRadius:"8px",border:"1px solid rgba(139, 92, 246, 0.2)",background:"rgba(255,255,255,0.9)",fontSize:"12px",fontWeight:"400",color:"#374151",boxShadow:"inset 0 1px 2px rgba(0,0,0,0.05)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',marginBottom:"8px",outline:"none"}}),T.jsx("div",{ref:re,style:{border:"1px solid rgba(139, 92, 246, 0.2)",borderRadius:"8px",overflow:"hidden",background:"rgba(255,255,255,0.5)",maxHeight:"300px",overflowY:"auto"},children:ue.length>0?ue.map(Re=>T.jsxs("div",{onClick:De=>{De.preventDefault(),De.stopPropagation(),be(Re.value)},onMouseDown:De=>{De.preventDefault()},style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 12px",cursor:"pointer",fontSize:"12px",fontWeight:"500",color:"#374151",background:h===Re.value?"rgba(139, 92, 246, 0.15)":"transparent",borderBottom:"1px solid rgba(139, 92, 246, 0.08)",transition:"background 0.2s ease"},onMouseEnter:De=>{h!==Re.value&&(De.currentTarget.style.background="rgba(139, 92, 246, 0.08)")},onMouseLeave:De=>{h!==Re.value&&(De.currentTarget.style.background="transparent")},children:[T.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"4px",background:Re.color,boxShadow:`0 2px 4px ${Re.color}40`,border:"1px solid rgba(255,255,255,0.5)",flexShrink:0}}),T.jsx("span",{style:{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontWeight:h===Re.value?"600":"500"},children:Re.label}),h===Re.value&&T.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:Re.color,boxShadow:`0 0 8px ${Re.color}80`,flexShrink:0}})]},Re.value)):T.jsx("div",{style:{padding:"20px",textAlign:"center",fontSize:"12px",color:"#9CA3AF",fontWeight:"500"},children:"No layers found"})})]})]}),T.jsx("div",{style:{padding:"12px",display:"flex",flexDirection:"column",gap:"8px"},children:ce.map(Re=>{const De=Re.icon,Ye=t===Re.id;return T.jsx("div",{style:{position:"relative"},children:T.jsxs("button",{onClick:()=>e(Re.id),style:{width:"100%",display:"flex",alignItems:"center",gap:"12px",padding:"12px",borderRadius:"12px",border:"none",cursor:"pointer",transition:"all 0.3s ease",fontSize:"14px",fontWeight:"500",position:"relative",background:Ye?"linear-gradient(135deg, #4F46E5, #3B82F6)":"linear-gradient(145deg, rgba(255,255,255,0.8), rgba(240,240,240,0.6))",color:Ye?"#FFFFFF":"#374151",boxShadow:Ye?"0 8px 25px rgba(79,70,229,0.3), inset 0 1px 0 rgba(255,255,255,0.2)":"inset 0 1px 2px rgba(255,255,255,0.8), inset 0 -1px 2px rgba(0,0,0,0.1)"},onMouseEnter:_e=>{Ye||(_e.currentTarget.style.background="linear-gradient(145deg, rgba(255,255,255,0.9), rgba(240,240,240,0.8))",_e.currentTarget.style.transform="translateY(-1px)",_e.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1), inset 0 1px 2px rgba(255,255,255,0.9)")},onMouseLeave:_e=>{Ye||(_e.currentTarget.style.background="linear-gradient(145deg, rgba(255,255,255,0.8), rgba(240,240,240,0.6))",_e.currentTarget.style.transform="translateY(0px)",_e.currentTarget.style.boxShadow="inset 0 1px 2px rgba(255,255,255,0.8), inset 0 -1px 2px rgba(0,0,0,0.1)")},children:[T.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"8px",background:Ye?"rgba(255,255,255,0.2)":`linear-gradient(135deg, ${Re.color}15, ${Re.color}08)`,border:Ye?"1px solid rgba(255,255,255,0.3)":`1px solid ${Re.color}20`,flexShrink:0},children:T.jsx(De,{style:{width:"16px",height:"16px",color:Ye?"#FFFFFF":Re.color}})}),!v&&T.jsxs(T.Fragment,{children:[T.jsxs("div",{style:{flex:1,textAlign:"left"},children:[T.jsx("div",{style:{fontWeight:"600",marginBottom:"2px"},children:Re.label}),T.jsx("div",{style:{fontSize:"11px",color:Ye?"rgba(255,255,255,0.8)":"#9CA3AF",fontWeight:"500"},children:Re.description})]}),Re.badge&&T.jsx("div",{style:{padding:"4px 8px",borderRadius:"6px",fontSize:"10px",fontWeight:"600",background:Ye?"rgba(255,255,255,0.2)":`linear-gradient(135deg, ${Re.color}20, ${Re.color}10)`,color:Ye?"#FFFFFF":Re.color,border:Ye?"1px solid rgba(255,255,255,0.3)":`1px solid ${Re.color}30`},children:Re.badge})]}),v&&Ye&&T.jsx("div",{style:{position:"absolute",right:"4px",top:"50%",transform:"translateY(-50%)",width:"3px",height:"16px",background:"#FFFFFF",borderRadius:"2px",boxShadow:"0 0 8px rgba(255,255,255,0.5)"}})]})},Re.id)})})]})})]})}function eDe(){const[e,t]=I.useState(!0);return T.jsx("div",{style:{position:"fixed",bottom:"16px",right:"16px",zIndex:998},children:T.jsxs("div",{style:{background:"linear-gradient(145deg, rgba(255,255,255,0.95), rgba(240,240,240,0.9))",backdropFilter:"blur(20px)",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.3)",boxShadow:"0 20px 40px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8)"},children:[T.jsxs("div",{style:{padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px",borderBottom:e?"1px solid rgba(0,0,0,0.05)":"none"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[T.jsx(uY,{style:{width:"14px",height:"14px",color:"#3B82F6"}}),T.jsx("span",{style:{fontSize:"12px",color:"#1F2937",fontWeight:"600"},children:"Legend"})]}),T.jsx("button",{onClick:()=>t(!e),style:{background:"linear-gradient(145deg, rgba(255,255,255,0.9), rgba(240,240,240,0.7))",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.3)",padding:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"#6B7280"},children:e?T.jsx(EP,{style:{width:"12px",height:"12px"}}):T.jsx(aY,{style:{width:"12px",height:"12px"}})})]}),e&&T.jsx("div",{style:{padding:"12px",display:"flex",flexDirection:"column",gap:"12px"},children:T.jsxs("div",{children:[T.jsx("div",{style:{fontSize:"10px",color:"#6B7280",marginBottom:"6px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Link Severity:"}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[T.jsx("div",{style:{width:"24px",height:"2px",background:"#10B981",borderRadius:"1px"}}),T.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:"Normal (0-40%)"})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[T.jsx("div",{style:{width:"24px",height:"2px",background:"#F59E0B",borderRadius:"1px"}}),T.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:"Warning (41-84%)"})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[T.jsx("div",{style:{width:"24px",height:"2px",background:"#EF4444",borderRadius:"1px"}}),T.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:"Critical (85-100%)"})]})]})]})})]})})}/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tDe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nDe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,i)=>i?i.toUpperCase():n.toLowerCase()),z6=e=>{const t=nDe(e);return t.charAt(0).toUpperCase()+t.slice(1)},NV=(...e)=>e.filter((t,n,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===n).join(" ").trim(),iDe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rDe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oDe=I.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:o,iconNode:s,...a},d)=>I.createElement("svg",{ref:d,...rDe,width:t,height:t,stroke:e,strokeWidth:i?Number(n)*24/Number(t):n,className:NV("lucide",r),...!o&&!iDe(a)&&{"aria-hidden":"true"},...a},[...s.map(([h,m])=>I.createElement(h,m)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=(e,t)=>{const n=I.forwardRef(({className:i,...r},o)=>I.createElement(oDe,{ref:o,iconNode:t,className:NV(`lucide-${tDe(z6(e))}`,`lucide-${e}`,i),...r}));return n.displayName=z6(e),n};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sDe=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],m1=kd("activity",sDe);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aDe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Qk=kd("chevron-left",aDe);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lDe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],eP=kd("chevron-right",lDe);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uDe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],N6=kd("circle",uDe);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cDe=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],$b=kd("git-branch",cDe);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dDe=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],BV=kd("move",dDe);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hDe=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],Nw=kd("network",hDe);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fDe=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],B6=kd("refresh-cw",fDe);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pDe=[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]],gDe=kd("signal",pDe);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mDe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],gb=kd("trending-up",mDe);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yDe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],vDe=kd("triangle-alert",yDe);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bDe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],qS=kd("x",bDe);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xDe=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],wDe=kd("zap",xDe),CDe=e=>{const t=e.latency||Math.random()*20+5,n=e.packetLoss||Math.random()*.1,i=e.linkCount||(e.bandwidth_mbps&&e.bandwidth_mbps>=5e3?2:1),r=[];for(let o=1;o<=i;o++){const s=Math.floor((e.bandwidth_mbps||1e3)/i),a=Math.random()*20-10,d=Math.max(0,Math.min(100,(e.utilization||50)+a));r.push({id:o,linkName:`${e.from}-PE${o}--${e.to}-PE${o}`,capacity:`${s}M`,utilization:Math.round(d),status:d<95?"Active":"Warning",latency:`${(t+Math.random()*2).toFixed(1)}ms`,packetLoss:`${(n+Math.random()*.02).toFixed(3)}%`,interface:e.type==="L1_BACKBONE"?"TenGigE":e.type==="L2_AGGREGATION"?"GigE":"FastEthernet",vlan:100+o,qos:e.type==="L1_BACKBONE"?"Premium":e.type==="L2_AGGREGATION"?"Business":"Standard"})}return r};function _De({connection:e,onClose:t,onShowTopology:n,isTopologyVisible:i=!1}){var q,ie,re;console.log("LinkDetailsPanel - connection data:",e),console.log("LinkDetailsPanel - linkDetails:",e.linkDetails),console.log("LinkDetailsPanel - clickedType:",e.clickedType),e.linkDetails&&e.linkDetails.length>0&&(console.log("LinkDetailsPanel - first linkDetail:",e.linkDetails[0]),console.log("LinkDetailsPanel - source_port_used:",e.linkDetails[0].source_port_used,"type:",typeof e.linkDetails[0].source_port_used),console.log("LinkDetailsPanel - source_port_count:",e.linkDetails[0].source_port_count,"type:",typeof e.linkDetails[0].source_port_count),console.log("LinkDetailsPanel - target_port_used:",e.linkDetails[0].target_port_used,"type:",typeof e.linkDetails[0].target_port_used),console.log("LinkDetailsPanel - target_port_count:",e.linkDetails[0].target_port_count,"type:",typeof e.linkDetails[0].target_port_count),e.linkDetails.forEach((J,ne)=>{console.log(`LinkDetailsPanel - detail[${ne}] ports:`,{source_port_used:J.source_port_used,source_port_count:J.source_port_count,target_port_used:J.target_port_used,target_port_count:J.target_port_count})}));const r=CDe(e),o=r.reduce((J,ne)=>J+ne.utilization,0)/r.length,s=e.linkDetails&&e.linkDetails.length>0&&e.linkDetails[0]&&(typeof e.linkDetails[0].capacity<"u"||typeof e.linkDetails[0].traffic_in_log<"u"),a=s?[]:r;let d=0,h=0,m=0,v=0,w=0,R=0,L=s?0:o;if(s&&e.linkDetails&&e.linkDetails.length>0){d=e.linkDetails.reduce((ne,be)=>ne+(typeof be.capacity=="number"?be.capacity:0),0),h=e.linkDetails.reduce((ne,be)=>ne+(typeof be.traffic_in_log=="number"?be.traffic_in_log:0),0),m=e.linkDetails.reduce((ne,be)=>ne+(typeof be.traffic_out_log=="number"?be.traffic_out_log:0),0),v=e.linkDetails.reduce((ne,be)=>ne+(typeof be.traffic_in_psk=="number"?be.traffic_in_psk:0),0),w=e.linkDetails.reduce((ne,be)=>ne+(typeof be.traffic_out_psk=="number"?be.traffic_out_psk:0),0),R=e.linkDetails.reduce((ne,be)=>ne+(typeof be.traffic_max=="number"?be.traffic_max:0),0);const J=e.linkDetails.filter(ne=>typeof ne.utilization=="number");J.length>0&&(L=J.reduce((ne,be)=>ne+(typeof be.utilization=="number"?be.utilization:0),0)/J.length)}!s&&e.nodeData&&e.clickedType==="edge"&&(typeof e.nodeData.traffic_max=="number"&&(R=e.nodeData.traffic_max),typeof e.nodeData.traffic_in_log=="number"&&(h=e.nodeData.traffic_in_log),typeof e.nodeData.traffic_out_log=="number"&&(m=e.nodeData.traffic_out_log),typeof e.nodeData.traffic_in_psk=="number"&&(v=e.nodeData.traffic_in_psk),typeof e.nodeData.traffic_out_psk=="number"&&(w=e.nodeData.traffic_out_psk),typeof e.nodeData.utilization=="number"&&(L=e.nodeData.utilization),typeof e.nodeData.capacity=="number"&&(d=e.nodeData.capacity));const O=J=>J>=1e3?`${(J/1e3).toFixed(2)}K Gbps`:`${J.toFixed(2)} Gbps`;let z;if(e.linkDetails&&e.linkDetails.length>0){const J=e.linkDetails.reduce((ne,be)=>{const ue=typeof be.capacity=="number"?be.capacity:0;return ne+ue},0);if(J>0){const ne=J/1e3;z=O(ne)}else z=e.totalCapacity||(e.bandwidth_mbps?`${e.bandwidth_mbps}M`:"N/A")}else z=e.totalCapacity||(e.bandwidth_mbps?`${e.bandwidth_mbps}M`:"N/A");const $=r.reduce((J,ne)=>J+parseFloat(ne.latency),0)/r.length,U=r.reduce((J,ne)=>J+parseFloat(ne.packetLoss),0)/r.length,Y=({children:J,className:ne=""})=>T.jsx("div",{className:ne,style:{background:"linear-gradient(145deg, rgba(255,255,255,0.9), rgba(240,240,240,0.8))",backdropFilter:"blur(20px)",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.3)",boxShadow:"0 8px 32px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8)",padding:"16px"},children:J}),X=({icon:J,label:ne,value:be,color:ue})=>T.jsxs("div",{style:{background:`linear-gradient(135deg, ${ue}15, ${ue}08)`,border:`1px solid ${ue}25`,borderRadius:"8px",padding:"8px 10px",display:"flex",alignItems:"center",gap:"8px",flex:1,minWidth:"0"},children:[T.jsx("div",{style:{background:`linear-gradient(135deg, ${ue}25, ${ue}15)`,borderRadius:"6px",padding:"6px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:T.jsx(J,{style:{width:"14px",height:"14px",color:ue}})}),T.jsxs("div",{style:{flex:1,minWidth:"0"},children:[T.jsx("div",{style:{fontSize:"9px",color:"#6B7280",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"2px"},children:ne}),T.jsx("div",{style:{fontSize:"14px",color:"#1F2937",fontWeight:"700",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:be})]})]});return T.jsx("div",{style:{position:"fixed",top:"16px",bottom:"16px",right:"16px",width:"600px",zIndex:1001},children:T.jsxs("div",{style:{height:"100%",background:"linear-gradient(145deg, rgba(255,255,255,0.95), rgba(240,240,240,0.9))",backdropFilter:"blur(20px)",borderRadius:"24px",border:"1px solid rgba(255,255,255,0.3)",boxShadow:"0 20px 40px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8)",display:"flex",flexDirection:"column",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[T.jsx("div",{style:{padding:"20px",paddingBottom:"1px",borderBottom:"1px solid rgba(0,0,0,0.05)"},children:T.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"16px"},children:[T.jsxs("div",{style:{flex:1},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px"},children:[T.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"700",color:"#1F2937"},children:"Link Analytics"}),e.clickedType&&T.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"10px",fontSize:"11px",fontWeight:"700",background:e.clickedType==="node"?"linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(37, 99, 235, 0.15))":"linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(124, 58, 237, 0.15))",color:e.clickedType==="node"?"#1E40AF":"#6D28D9",border:e.clickedType==="node"?"1.5px solid rgba(59, 130, 246, 0.4)":"1.5px solid rgba(139, 92, 246, 0.4)",textTransform:"uppercase",letterSpacing:"0.8px",boxShadow:e.clickedType==="node"?"0 2px 8px rgba(59, 130, 246, 0.15)":"0 2px 8px rgba(139, 92, 246, 0.15)",transition:"all 0.2s ease",animation:"fadeInBadge 0.3s ease-out"},children:[e.clickedType==="node"?T.jsx(N6,{style:{width:"13px",height:"13px",strokeWidth:2.5}}):T.jsx($b,{style:{width:"13px",height:"13px",strokeWidth:2.5}}),e.clickedType==="node"?"Node":"Edge"]}),T.jsx("style",{children:`
                  @keyframes fadeInBadge {
                    from {
                      opacity: 0;
                      transform: scale(0.9);
                    }
                    to {
                      opacity: 1;
                      transform: scale(1);
                    }
                  }
                `})]}),T.jsx("p",{style:{margin:0,fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:e.description||`${e.from}  ${e.to}`})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n&&T.jsxs("button",{onClick:n,style:{background:i?"linear-gradient(145deg, rgba(239, 68, 68, 0.9), rgba(220, 38, 38, 0.8))":"linear-gradient(145deg, rgba(147, 51, 234, 0.9), rgba(126, 34, 206, 0.8))",border:i?"1px solid rgba(239, 68, 68, 0.3)":"1px solid rgba(147, 51, 234, 0.3)",borderRadius:"8px",padding:"8px 12px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},onMouseEnter:J=>{J.currentTarget.style.transform="scale(1.05)",J.currentTarget.style.boxShadow=i?"0 4px 12px rgba(239, 68, 68, 0.3)":"0 4px 12px rgba(147, 51, 234, 0.3)"},onMouseLeave:J=>{J.currentTarget.style.transform="scale(1)",J.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.1)"},title:i?"Hide Network Topology":"Show Network Topology",children:[T.jsx(Nw,{style:{width:"16px",height:"16px",color:"#FFFFFF"}}),T.jsxs("span",{style:{fontSize:"12px",color:"#FFFFFF",fontWeight:"600"},children:[i?"Hide":"Show"," Topology"]})]}),T.jsx("button",{onClick:t,style:{background:"linear-gradient(145deg, rgba(255,255,255,0.9), rgba(240,240,240,0.7))",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"8px",padding:"8px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:J=>{J.currentTarget.style.transform="scale(1.05)",J.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)"},onMouseLeave:J=>{J.currentTarget.style.transform="scale(1)",J.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.1)"},children:T.jsx(qS,{style:{width:"16px",height:"16px",color:"#6B7280"}})})]})]})}),T.jsxs("div",{style:{flex:1,overflow:"auto",padding:"10px",display:"flex",flexDirection:"column",gap:"10px"},children:[T.jsxs(Y,{children:[T.jsxs("h4",{style:{margin:"0 0 12px 0",fontSize:"16px",fontWeight:"600",color:"#1F2937",display:"flex",alignItems:"center",gap:"8px"},children:[T.jsx(vDe,{style:{width:"16px",height:"16px",color:"#F59E0B"}}),"Recent Alerts"]}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[(s?L:o)>80&&T.jsxs("div",{style:{padding:"8px 12px",borderRadius:"8px",background:"#FEF3C7",border:"1px solid #FDE68A",fontSize:"12px",color:"#92400E"},children:[T.jsx("strong",{children:"Warning:"})," High utilization detected (",(s?L:o).toFixed(0),"%) at ",new Date().toLocaleTimeString()]}),T.jsxs("div",{style:{padding:"8px 12px",borderRadius:"8px",background:"#DBEAFE",border:"1px solid #BFDBFE",fontSize:"12px",color:"#1E40AF"},children:[T.jsx("strong",{children:"Info:"})," Scheduled maintenance window: Sunday 02:00-04:00 WIB"]}),Math.random()>.5&&T.jsxs("div",{style:{padding:"8px 12px",borderRadius:"8px",background:"#D1FAE5",border:"1px solid #A7F3D0",fontSize:"12px",color:"#065F46"},children:[T.jsx("strong",{children:"Success:"})," Link optimization completed successfully"]})]})]}),T.jsxs(Y,{children:[T.jsxs("div",{style:{display:"flex",gap:"6px",marginBottom:"8px"},children:[T.jsx(X,{icon:wDe,label:"CAPACITY",value:z,color:"#8B5CF6"}),T.jsx(X,{icon:gb,label:"TRAFFIC MAX",value:R>0?`${(R/1e9).toFixed(2)} Gbps`:"0.00 Gbps",color:"#F59E0B"})]}),T.jsxs("div",{style:{display:"flex",gap:"6px",marginBottom:"8px"},children:[T.jsx(X,{icon:m1,label:"LAYER",value:((q=e.nodeData)==null?void 0:q.layer)||((ie=e.nodeData)==null?void 0:ie.trunk_layer)||(e.linkDetails&&e.linkDetails.length>0?e.linkDetails[0].layer:"tera - tera"),color:"#1F2937"}),T.jsx(X,{icon:gb,label:"TRAFFIC IN LOG",value:h>0?`${(h/1e9).toFixed(2)} Gbps`:"0.00 Gbps",color:"#3B82F6"})]}),T.jsxs("div",{style:{display:"flex",gap:"6px",marginBottom:"8px"},children:[T.jsx(X,{icon:gb,label:"TRAFFIC OUT LOG",value:m>0?`${(m/1e9).toFixed(2)} Gbps`:"0.00 Gbps",color:"#10B981"}),T.jsx(X,{icon:gb,label:"TRAFFIC IN PSK",value:v>0?`${(v/1e9).toFixed(2)} Gbps`:"0.00 Gbps",color:"#6366F1"})]}),T.jsxs("div",{style:{display:"flex",gap:"6px"},children:[T.jsx(X,{icon:gb,label:"TRAFFIC OUT PSK",value:w>0?`${(w/1e9).toFixed(2)} Gbps`:"0.00 Gbps",color:"#14B8A6"}),T.jsx(X,{icon:m1,label:"UTILIZATION",value:L>0?`${L.toFixed(2)}%`:`${o.toFixed(0)}%`,color:L>80?"#EF4444":L>60?"#F59E0B":"#10B981"})]})]}),T.jsxs(Y,{children:[T.jsxs("h4",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:"#1F2937",display:"flex",alignItems:"center",gap:"8px"},children:[T.jsx(gDe,{style:{width:"16px",height:"16px",color:"#4F46E5"}}),"Physical Links",e.linkDetails&&Array.isArray(e.linkDetails)&&e.linkDetails.length>0&&T.jsxs("span",{style:{fontSize:"11px",fontWeight:"600",padding:"2px 8px",borderRadius:"6px",background:"#4F46E520",color:"#4F46E5",border:"1px solid #4F46E530"},children:[e.linkDetails.length," link",e.linkDetails.length!==1?"s":""]})]}),T.jsx("div",{style:{overflowX:"auto",overflowY:"visible",borderRadius:"12px",maxHeight:"400px"},children:T.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:e.linkDetails&&e.linkDetails.length>0?"2000px":"100%"},children:[T.jsx("thead",{style:{position:"sticky",top:0,zIndex:1},children:T.jsxs("tr",{style:{background:"linear-gradient(135deg, #F8FAFC, #F1F5F9)"},children:[T.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"left",minWidth:"180px"},children:"Ruas / Link Name"}),T.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"left",minWidth:"140px"},children:"Source Node"}),T.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"left",minWidth:"140px"},children:"Target Node"}),T.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"center",minWidth:"110px"},children:"Layer"}),T.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"center",minWidth:"110px"},children:"Port Log"}),T.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"right",minWidth:"110px"},children:"Capacity"}),T.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"right",minWidth:"110px"},children:"Traffic In Log (Mbps)"}),T.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"right",minWidth:"110px"},children:"Traffic Out Log (Mbps)"}),T.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"right",minWidth:"110px"},children:"Traffic In PSK (Mbps)"}),T.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"right",minWidth:"110px"},children:"Traffic Out PSK (Mbps)"}),T.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"right",minWidth:"110px"},children:"Traffic Max (Mbps)"}),T.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"center",minWidth:"100px"},children:"Utilization"}),T.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"center",minWidth:"90px"},children:"Jml Pisik"}),T.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"center",minWidth:"90px"},children:"Jml Rec"}),T.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"center",minWidth:"90px"},children:"Jml PSK"}),T.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"center",minWidth:"110px"},children:"Source Ports"}),T.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"center",minWidth:"110px"},children:"Target Ports"})]})}),T.jsx("tbody",{children:e.linkDetails&&e.linkDetails.length>0?e.linkDetails.map((J,ne)=>{const be=typeof J.traffic_in_log=="number"?(J.traffic_in_log/1e6).toFixed(2):"N/A",ue=typeof J.traffic_out_log=="number"?(J.traffic_out_log/1e6).toFixed(2):"N/A",ve=typeof J.traffic_in_psk=="number"?(J.traffic_in_psk/1e6).toFixed(2):"N/A",ce=typeof J.traffic_out_psk=="number"?(J.traffic_out_psk/1e6).toFixed(2):"N/A",Ie=typeof J.traffic_max=="number"?(J.traffic_max/1e6).toFixed(2):"N/A",Te=typeof J.utilization=="number"?J.utilization.toFixed(2):"0.00";return T.jsxs("tr",{style:{borderTop:ne>0?"1px solid #E5E7EB":"none",background:ne%2===0?"rgba(248,250,252,0.5)":"transparent"},children:[T.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#374151",fontWeight:"500"},children:String(J.ruas||"N/A")}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#374151"},children:T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[T.jsx("span",{style:{fontWeight:"600"},children:String(J.source_node||J.source||"N/A")}),T.jsx("span",{style:{fontSize:"9px",color:"#6B7280"},children:String(J.source_label||"")})]})}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#374151"},children:T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[T.jsx("span",{style:{fontWeight:"600"},children:String(J.target_node||J.target||"N/A")}),T.jsx("span",{style:{fontSize:"9px",color:"#6B7280"},children:String(J.target_label||"")})]})}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"10px",color:"#374151",textAlign:"center"},children:T.jsx("span",{style:{padding:"3px 6px",borderRadius:"4px",background:"#8B5CF615",color:"#8B5CF6",fontWeight:"600",fontSize:"9px"},children:String(J.layer||J.trunk_layer||"N/A")})}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"10px",color:"#374151",textAlign:"center",fontFamily:"monospace"},children:String(J.port_log||"N/A")}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#4F46E5",textAlign:"right",fontWeight:"600"},children:typeof J.capacity=="number"&&J.capacity>0?(J.capacity/1e3).toFixed(2)+" Gbps":"N/A"}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#3B82F6",textAlign:"right",fontWeight:"600"},children:be}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#10B981",textAlign:"right",fontWeight:"600"},children:ue}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#6366F1",textAlign:"right"},children:ve}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#14B8A6",textAlign:"right"},children:ce}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#F59E0B",textAlign:"right",fontWeight:"600"},children:Ie}),T.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:T.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px"},children:T.jsxs("span",{style:{fontSize:"10px",color:"#374151",fontWeight:"700"},children:[Te,"%"]})})}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#374151",textAlign:"center",fontWeight:"600"},children:typeof J.jml_pisik=="number"?J.jml_pisik:"N/A"}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#374151",textAlign:"center",fontWeight:"600"},children:typeof J.jml_rec=="number"?J.jml_rec:"N/A"}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#374151",textAlign:"center",fontWeight:"600"},children:typeof J.jmpsk=="number"?J.jmpsk:"N/A"}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"10px",color:"#374151",textAlign:"center"},children:T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px",alignItems:"center"},children:[T.jsx("span",{style:{fontWeight:"600",color:"#3B82F6"},children:J.source_port_used!==null&&J.source_port_used!==void 0&&!isNaN(Number(J.source_port_used))&&J.source_port_count!==null&&J.source_port_count!==void 0&&!isNaN(Number(J.source_port_count))?`${Number(J.source_port_used)}/${Number(J.source_port_count)}`:"N/A"}),T.jsx("span",{style:{fontSize:"9px",color:"#6B7280"},children:J.source_port_idle!==null&&J.source_port_idle!==void 0&&!isNaN(Number(J.source_port_idle))?`${Number(J.source_port_idle)} idle`:""})]})}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"10px",color:"#374151",textAlign:"center"},children:T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px",alignItems:"center"},children:[T.jsx("span",{style:{fontWeight:"600",color:"#10B981"},children:J.target_port_used!==null&&J.target_port_used!==void 0&&!isNaN(Number(J.target_port_used))&&J.target_port_count!==null&&J.target_port_count!==void 0&&!isNaN(Number(J.target_port_count))?`${Number(J.target_port_used)}/${Number(J.target_port_count)}`:"N/A"}),T.jsx("span",{style:{fontSize:"9px",color:"#6B7280"},children:J.target_port_idle!==null&&J.target_port_idle!==void 0&&!isNaN(Number(J.target_port_idle))?`${Number(J.target_port_idle)} idle`:""})]})})]},ne)}):r.map((J,ne)=>T.jsxs("tr",{style:{borderTop:ne>0?"1px solid #E5E7EB":"none",background:ne%2===0?"rgba(248,250,252,0.5)":"transparent"},children:[T.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#374151",fontWeight:"500"},children:J.linkName}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#374151"},children:T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[T.jsx("span",{style:{fontWeight:"600"},children:e.from}),T.jsx("span",{style:{fontSize:"9px",color:"#6B7280"},children:"Source"})]})}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#374151"},children:T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[T.jsx("span",{style:{fontWeight:"600"},children:e.to}),T.jsx("span",{style:{fontSize:"9px",color:"#6B7280"},children:"Target"})]})}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"10px",color:"#374151",textAlign:"center"},children:T.jsx("span",{style:{padding:"3px 6px",borderRadius:"4px",background:"#8B5CF615",color:"#8B5CF6",fontWeight:"600",fontSize:"9px"},children:e.type||"N/A"})}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"10px",color:"#374151",textAlign:"center",fontFamily:"monospace"},children:J.interface}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#4F46E5",textAlign:"right",fontWeight:"600"},children:J.capacity}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#3B82F6",textAlign:"right",fontWeight:"600"},children:"N/A"}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#10B981",textAlign:"right",fontWeight:"600"},children:"N/A"}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#6366F1",textAlign:"right"},children:"N/A"}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#14B8A6",textAlign:"right"},children:"N/A"}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#F59E0B",textAlign:"right",fontWeight:"600"},children:"N/A"}),T.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:T.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px"},children:[T.jsx("div",{style:{width:"60px",height:"6px",background:"#E5E7EB",borderRadius:"3px",overflow:"hidden"}}),T.jsxs("span",{style:{fontSize:"10px",color:"#374151",fontWeight:"700"},children:[J.utilization,"%"]})]})}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#374151",textAlign:"center",fontWeight:"600"},children:"N/A"}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#374151",textAlign:"center",fontWeight:"600"},children:"N/A"}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#374151",textAlign:"center",fontWeight:"600"},children:"N/A"}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"10px",color:"#374151",textAlign:"center"},children:"N/A"}),T.jsx("td",{style:{padding:"10px 8px",fontSize:"10px",color:"#374151",textAlign:"center"},children:"N/A"})]},J.id))})]})}),T.jsx("div",{style:{marginTop:"8px",padding:"6px 12px",background:"rgba(79, 70, 229, 0.05)",borderRadius:"6px",fontSize:"10px",color:"#4F46E5",textAlign:"center",fontWeight:"500"},children:" Scroll horizontally to view all columns "})]}),e.clickedType==="edge"&&e.nodeData&&T.jsxs(Y,{children:[T.jsxs("h4",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:"#1F2937",display:"flex",alignItems:"center",gap:"8px"},children:[T.jsx($b,{style:{width:"16px",height:"16px",color:"#7C3AED"}}),"Edge Details"]}),T.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px"},children:Object.entries(e.nodeData).filter(([J])=>!["details","topology","x","y","coordinates","source_lon","source_lat","target_lon","target_lat"].includes(J)).map(([J,ne])=>{const be=J.split("_").map(ce=>ce.charAt(0).toUpperCase()+ce.slice(1)).join(" ");let ue,ve="#1F2937";if((J==="capacity"||J==="total_capacity")&&typeof ne=="number")ue=`${((s&&d>0?d:ne)/1e3).toFixed(2)} Gbps`,ve="#8B5CF6";else if(J==="traffic_in_log")ue=`${((s?h:typeof ne=="number"?ne:0)/1e9).toFixed(2)} Gbps`,ve="#3B82F6";else if(J==="traffic_out_log")ue=`${((s?m:typeof ne=="number"?ne:0)/1e9).toFixed(2)} Gbps`,ve="#10B981";else if(J==="traffic_in_psk")ue=`${((s?v:typeof ne=="number"?ne:0)/1e9).toFixed(2)} Gbps`,ve="#6366F1";else if(J==="traffic_out_psk")ue=`${((s?w:typeof ne=="number"?ne:0)/1e9).toFixed(2)} Gbps`,ve="#14B8A6";else if(J==="traffic_max"&&typeof ne=="number")ue=`${(ne/1e9).toFixed(2)} Gbps`,ve="#F59E0B";else if(J==="utilization"){const ce=s?L:typeof ne=="number"?ne:0;ue=`${ce.toFixed(2)}%`,ve=ce>80?"#EF4444":ce>60?"#F59E0B":"#10B981"}else J==="link_count"&&typeof ne=="number"?(ue=String(ne),ve="#8B5CF6"):J==="size"&&typeof ne=="number"?(ue=String(ne),ve="#6366F1"):typeof ne=="string"&&ne.length>50?ue=ne.substring(0,47)+"...":ne==null||ne===""?ue="N/A":typeof ne=="object"?ue=JSON.stringify(ne):ue=String(ne);return T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"8px",background:"rgba(249, 250, 251, 0.5)",borderRadius:"8px",border:"1px solid rgba(229, 231, 235, 0.5)"},children:[T.jsx("span",{style:{fontSize:"11px",color:"#6B7280",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:be}),T.jsx("span",{style:{fontSize:"13px",color:ve,fontWeight:"600",wordBreak:"break-word"},children:ue})]},J)})})]}),T.jsxs(Y,{children:[T.jsxs("h4",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:"#1F2937",display:"flex",alignItems:"center",gap:"8px"},children:[T.jsx(gb,{style:{width:"16px",height:"16px",color:"#10B981"}}),"Performance Metrics"]}),T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[s?T.jsxs(T.Fragment,{children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsx("span",{style:{fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:"Capacity"}),T.jsxs("span",{style:{fontSize:"14px",color:"#4F46E5",fontWeight:"700"},children:[(d/1e3).toFixed(2)," Gbps"]})]}),T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsx("span",{style:{fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:"Traffic In (LOG)"}),T.jsxs("span",{style:{fontSize:"14px",color:"#3B82F6",fontWeight:"700"},children:[(h/1e9).toFixed(2)," Gbps"]})]}),T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsx("span",{style:{fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:"Traffic Out (LOG)"}),T.jsxs("span",{style:{fontSize:"14px",color:"#10B981",fontWeight:"700"},children:[(m/1e9).toFixed(2)," Gbps"]})]}),T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsx("span",{style:{fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:"Traffic In (PSK)"}),T.jsxs("span",{style:{fontSize:"14px",color:"#6366F1",fontWeight:"700"},children:[(v/1e9).toFixed(2)," Gbps"]})]}),T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsx("span",{style:{fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:"Traffic Out (PSK)"}),T.jsxs("span",{style:{fontSize:"14px",color:"#14B8A6",fontWeight:"700"},children:[(w/1e9).toFixed(2)," Gbps"]})]}),T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsx("span",{style:{fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:"Avg Utilization"}),T.jsxs("span",{style:{fontSize:"14px",color:L>80?"#EF4444":L>60?"#F59E0B":"#10B981",fontWeight:"700"},children:[L.toFixed(2),"%"]})]})]}):T.jsxs(T.Fragment,{children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsx("span",{style:{fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:"Average Latency"}),T.jsxs("span",{style:{fontSize:"14px",color:"#1F2937",fontWeight:"700"},children:[$.toFixed(1)," ms"]})]}),T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsx("span",{style:{fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:"Packet Loss"}),T.jsxs("span",{style:{fontSize:"14px",color:"#1F2937",fontWeight:"700"},children:[U.toFixed(3),"%"]})]}),T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsx("span",{style:{fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:"Availability (24h)"}),T.jsxs("span",{style:{fontSize:"14px",color:"#10B981",fontWeight:"700"},children:["99.",Math.floor(Math.random()*10+90),"%"]})]}),T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsx("span",{style:{fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:"Total Traffic (24h)"}),T.jsxs("span",{style:{fontSize:"14px",color:"#1F2937",fontWeight:"700"},children:[(Math.random()*10+1).toFixed(1)," TB"]})]})]}),T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsx("span",{style:{fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:"Link Type"}),T.jsx("span",{style:{fontSize:"12px",fontWeight:"600",padding:"4px 8px",borderRadius:"6px",background:e.type==="L1_BACKBONE"?"#DC262620":e.type==="L2_AGGREGATION"?"#EA580C20":"#05966920",color:e.type==="L1_BACKBONE"?"#DC2626":e.type==="L2_AGGREGATION"?"#EA580C":"#059669",border:`1px solid ${e.type==="L1_BACKBONE"?"#DC262630":e.type==="L2_AGGREGATION"?"#EA580C30":"#05966930"}`},children:((re=e.type)==null?void 0:re.replace("_"," "))||"LEGACY"})]}),T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsx("span",{style:{fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:"Redundancy"}),T.jsx("span",{style:{fontSize:"14px",color:"#1F2937",fontWeight:"700"},children:a.length>1?"Active-Active":"Single Path"})]})]})]}),e.clickedType==="node"&&e.nodeData&&T.jsxs(Y,{children:[T.jsxs("h4",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:"#1F2937",display:"flex",alignItems:"center",gap:"8px"},children:[T.jsx(N6,{style:{width:"16px",height:"16px",color:"#3B82F6"}}),"Node Details"]}),T.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px"},children:Object.entries(e.nodeData).filter(([J])=>!["topology","details","x","y","coordinates","source_lon","source_lat","target_lon","target_lat","platform"].includes(J)).map(([J,ne])=>{const be=J.split("_").map(ce=>ce.charAt(0).toUpperCase()+ce.slice(1)).join(" ");let ue,ve="#1F2937";return J.includes("capacity")&&typeof ne=="number"?(ue=`${(ne/1e9).toFixed(2)} Gbps`,ve="#3B82F6"):J.includes("traffic")&&typeof ne=="number"?(ue=`${(ne/1e6).toFixed(2)} Mbps`,ve=J.includes("in")?"#3B82F6":"#10B981"):J.includes("utilization")&&typeof ne=="number"?(ue=`${ne.toFixed(2)}%`,ve=ne>80?"#EF4444":ne>60?"#F59E0B":"#10B981"):typeof ne=="string"&&ne.length>50?ue=ne.substring(0,47)+"...":ne==null||ne===""?ue="N/A":typeof ne=="object"?ue=JSON.stringify(ne):ue=String(ne),T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"8px",background:"rgba(249, 250, 251, 0.5)",borderRadius:"8px",border:"1px solid rgba(229, 231, 235, 0.5)"},children:[T.jsx("span",{style:{fontSize:"11px",color:"#6B7280",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:be}),T.jsx("span",{style:{fontSize:"13px",color:ve,fontWeight:"600",wordBreak:"break-word"},children:ue})]},J)})}),(e.nodeData.longitude!==void 0||e.nodeData.latitude!==void 0)&&T.jsxs("div",{style:{marginTop:"12px",padding:"10px",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(37, 99, 235, 0.05))",borderRadius:"8px",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[T.jsx("div",{style:{fontSize:"11px",color:"#6B7280",fontWeight:"600",marginBottom:"4px"},children:"COORDINATES"}),T.jsxs("div",{style:{fontSize:"13px",color:"#3B82F6",fontWeight:"700"},children:["Longitude: ",typeof e.nodeData.longitude=="string"?parseFloat(e.nodeData.longitude).toFixed(6):"N/A",", Latitude: ",typeof e.nodeData.latitude=="string"?parseFloat(e.nodeData.latitude).toFixed(6):"N/A"]})]})]})]})]})})}const SDe=({username:e="Admin User",email:t="admin@infranexia.com",avatar:n})=>{const[i,r]=I.useState(!1),[o,s]=I.useState(!1),[a,d]=I.useState("menu"),h=I.useRef(null),m=v1();I.useEffect(()=>{const R=L=>{h.current&&!h.current.contains(L.target)&&(r(!1),d("menu"))};return i&&document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[i]);const v=()=>{s(!1),r(!1),m("/")},w=()=>e.split(" ").map(R=>R[0]).join("").toUpperCase().slice(0,2);return T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"profile-menu-container",ref:h,children:[T.jsxs("button",{className:`profile-button ${i?"active":""}`,onClick:()=>r(!i),"aria-label":"Profile Menu",children:[n?T.jsx("img",{src:n,alt:e,className:"profile-avatar"}):T.jsx("div",{className:"profile-avatar-placeholder",children:w()}),T.jsx("svg",{className:`profile-chevron ${i?"open":""}`,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:T.jsx("path",{d:"M6 9L12 15L18 9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),i&&T.jsxs("div",{className:`profile-dropdown ${a!=="menu"?"expanded":""}`,children:[a==="menu"&&T.jsxs("div",{className:"profile-menu-content",children:[T.jsxs("div",{className:"profile-header",children:[T.jsx("div",{className:"profile-header-avatar",children:n?T.jsx("img",{src:n,alt:e}):T.jsx("div",{className:"profile-header-avatar-placeholder",children:w()})}),T.jsxs("div",{className:"profile-header-info",children:[T.jsx("h3",{className:"profile-header-name",children:e}),T.jsx("p",{className:"profile-header-email",children:t})]})]}),T.jsx("div",{className:"profile-menu-divider"}),T.jsxs("div",{className:"profile-menu-items",children:[T.jsxs("button",{className:"profile-menu-item",onClick:()=>d("profile"),children:[T.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[T.jsx("path",{d:"M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),T.jsx("path",{d:"M12 11C14.2091 11 16 9.20914 16 7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),T.jsx("span",{children:"Profile"}),T.jsx("svg",{className:"profile-menu-arrow",viewBox:"0 0 24 24",fill:"none",children:T.jsx("path",{d:"M9 18L15 12L9 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),T.jsxs("button",{className:"profile-menu-item",onClick:()=>d("settings"),children:[T.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[T.jsx("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),T.jsx("path",{d:"M19.4 15C19.2669 15.3016 19.2272 15.6362 19.286 15.9606C19.3448 16.285 19.4995 16.5843 19.73 16.82L19.79 16.88C19.976 17.0657 20.1235 17.2863 20.2241 17.5291C20.3248 17.7719 20.3766 18.0322 20.3766 18.295C20.3766 18.5578 20.3248 18.8181 20.2241 19.0609C20.1235 19.3037 19.976 19.5243 19.79 19.71C19.6043 19.896 19.3837 20.0435 19.1409 20.1441C18.8981 20.2448 18.6378 20.2966 18.375 20.2966C18.1122 20.2966 17.8519 20.2448 17.6091 20.1441C17.3663 20.0435 17.1457 19.896 16.96 19.71L16.9 19.65C16.6643 19.4195 16.365 19.2648 16.0406 19.206C15.7162 19.1472 15.3816 19.1869 15.08 19.32C14.7842 19.4468 14.532 19.6572 14.3543 19.9255C14.1766 20.1938 14.0813 20.5082 14.08 20.83V21C14.08 21.5304 13.8693 22.0391 13.4942 22.4142C13.1191 22.7893 12.6104 23 12.08 23C11.5496 23 11.0409 22.7893 10.6658 22.4142C10.2907 22.0391 10.08 21.5304 10.08 21V20.91C10.0723 20.579 9.96512 20.258 9.77251 19.9887C9.5799 19.7194 9.31074 19.5143 9 19.4C8.69838 19.2669 8.36381 19.2272 8.03941 19.286C7.71502 19.3448 7.41568 19.4995 7.18 19.73L7.12 19.79C6.93425 19.976 6.71368 20.1235 6.47088 20.2241C6.22808 20.3248 5.96783 20.3766 5.705 20.3766C5.44217 20.3766 5.18192 20.3248 4.93912 20.2241C4.69632 20.1235 4.47575 19.976 4.29 19.79C4.10405 19.6043 3.95653 19.3837 3.85588 19.1409C3.75523 18.8981 3.70343 18.6378 3.70343 18.375C3.70343 18.1122 3.75523 17.8519 3.85588 17.6091C3.95653 17.3663 4.10405 17.1457 4.29 16.96L4.35 16.9C4.58054 16.6643 4.73519 16.365 4.794 16.0406C4.85282 15.7162 4.81312 15.3816 4.68 15.08C4.55324 14.7842 4.34276 14.532 4.07447 14.3543C3.80618 14.1766 3.49179 14.0813 3.17 14.08H3C2.46957 14.08 1.96086 13.8693 1.58579 13.4942C1.21071 13.1191 1 12.6104 1 12.08C1 11.5496 1.21071 11.0409 1.58579 10.6658C1.96086 10.2907 2.46957 10.08 3 10.08H3.09C3.42099 10.0723 3.742 9.96512 4.0113 9.77251C4.28059 9.5799 4.48572 9.31074 4.6 9C4.73312 8.69838 4.77282 8.36381 4.714 8.03941C4.65519 7.71502 4.50054 7.41568 4.27 7.18L4.21 7.12C4.02405 6.93425 3.87653 6.71368 3.77588 6.47088C3.67523 6.22808 3.62343 5.96783 3.62343 5.705C3.62343 5.44217 3.67523 5.18192 3.77588 4.93912C3.87653 4.69632 4.02405 4.47575 4.21 4.29C4.39575 4.10405 4.61632 3.95653 4.85912 3.85588C5.10192 3.75523 5.36217 3.70343 5.625 3.70343C5.88783 3.70343 6.14808 3.75523 6.39088 3.85588C6.63368 3.95653 6.85425 4.10405 7.04 4.29L7.1 4.35C7.33568 4.58054 7.63502 4.73519 7.95941 4.794C8.28381 4.85282 8.61838 4.81312 8.92 4.68H9C9.29577 4.55324 9.54802 4.34276 9.72569 4.07447C9.90337 3.80618 9.99872 3.49179 10 3.17V3C10 2.46957 10.2107 1.96086 10.5858 1.58579C10.9609 1.21071 11.4696 1 12 1C12.5304 1 13.0391 1.21071 13.4142 1.58579C13.7893 1.96086 14 2.46957 14 3V3.09C14.0013 3.41179 14.0966 3.72618 14.2743 3.99447C14.452 4.26276 14.7042 4.47324 15 4.6C15.3016 4.73312 15.6362 4.77282 15.9606 4.714C16.285 4.65519 16.5843 4.50054 16.82 4.27L16.88 4.21C17.0657 4.02405 17.2863 3.87653 17.5291 3.77588C17.7719 3.67523 18.0322 3.62343 18.295 3.62343C18.5578 3.62343 18.8181 3.67523 19.0609 3.77588C19.3037 3.87653 19.5243 4.02405 19.71 4.21C19.896 4.39575 20.0435 4.61632 20.1441 4.85912C20.2448 5.10192 20.2966 5.36217 20.2966 5.625C20.2966 5.88783 20.2448 6.14808 20.1441 6.39088C20.0435 6.63368 19.896 6.85425 19.71 7.04L19.65 7.1C19.4195 7.33568 19.2648 7.63502 19.206 7.95941C19.1472 8.28381 19.1869 8.61838 19.32 8.92V9C19.4468 9.29577 19.6572 9.54802 19.9255 9.72569C20.1938 9.90337 20.5082 9.99872 20.83 10H21C21.5304 10 22.0391 10.2107 22.4142 10.5858C22.7893 10.9609 23 11.4696 23 12C23 12.5304 22.7893 13.0391 22.4142 13.4142C22.0391 13.7893 21.5304 14 21 14H20.91C20.5882 14.0013 20.2738 14.0966 20.0055 14.2743C19.7372 14.452 19.5268 14.7042 19.4 15Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),T.jsx("span",{children:"Settings"}),T.jsx("svg",{className:"profile-menu-arrow",viewBox:"0 0 24 24",fill:"none",children:T.jsx("path",{d:"M9 18L15 12L9 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),T.jsx("div",{className:"profile-menu-divider"}),T.jsxs("button",{className:"profile-menu-item logout",onClick:()=>s(!0),children:[T.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[T.jsx("path",{d:"M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),T.jsx("path",{d:"M16 17L21 12L16 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),T.jsx("path",{d:"M21 12H9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),T.jsx("span",{children:"Logout"})]})]}),a==="profile"&&T.jsxs("div",{className:"profile-detail-view",children:[T.jsxs("button",{className:"profile-back-button",onClick:()=>d("menu"),children:[T.jsx("svg",{viewBox:"0 0 24 24",fill:"none",children:T.jsx("path",{d:"M15 18L9 12L15 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back"]}),T.jsx("div",{className:"profile-detail-header",children:T.jsx("h3",{children:"Profile Information"})}),T.jsxs("div",{className:"profile-detail-content",children:[T.jsxs("div",{className:"profile-detail-avatar-section",children:[n?T.jsx("img",{src:n,alt:e,className:"profile-detail-avatar"}):T.jsx("div",{className:"profile-detail-avatar-placeholder",children:w()}),T.jsx("button",{className:"profile-change-avatar-btn",children:"Change Photo"})]}),T.jsxs("div",{className:"profile-detail-fields",children:[T.jsxs("div",{className:"profile-detail-field",children:[T.jsx("label",{children:"Full Name"}),T.jsx("input",{type:"text",value:e,readOnly:!0})]}),T.jsxs("div",{className:"profile-detail-field",children:[T.jsx("label",{children:"Email Address"}),T.jsx("input",{type:"email",value:t,readOnly:!0})]}),T.jsxs("div",{className:"profile-detail-field",children:[T.jsx("label",{children:"Role"}),T.jsx("input",{type:"text",value:"Administrator",readOnly:!0})]}),T.jsxs("div",{className:"profile-detail-field",children:[T.jsx("label",{children:"Department"}),T.jsx("input",{type:"text",value:"Network Operations",readOnly:!0})]})]}),T.jsxs("button",{className:"profile-edit-button",children:[T.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",children:[T.jsx("path",{d:"M11 4H4C3.46957 4 2.96086 4.21071 2.58579 4.58579C2.21071 4.96086 2 5.46957 2 6V20C2 20.5304 2.21071 21.0391 2.58579 21.4142C2.96086 21.7893 3.46957 22 4 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),T.jsx("path",{d:"M18.5 2.50001C18.8978 2.10219 19.4374 1.87869 20 1.87869C20.5626 1.87869 21.1022 2.10219 21.5 2.50001C21.8978 2.89784 22.1213 3.4374 22.1213 4.00001C22.1213 4.56262 21.8978 5.10219 21.5 5.50001L12 15L8 16L9 12L18.5 2.50001Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Edit Profile"]})]})]}),a==="settings"&&T.jsxs("div",{className:"profile-detail-view",children:[T.jsxs("button",{className:"profile-back-button",onClick:()=>d("menu"),children:[T.jsx("svg",{viewBox:"0 0 24 24",fill:"none",children:T.jsx("path",{d:"M15 18L9 12L15 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back"]}),T.jsx("div",{className:"profile-detail-header",children:T.jsx("h3",{children:"Settings"})}),T.jsxs("div",{className:"profile-detail-content",children:[T.jsxs("div",{className:"settings-section",children:[T.jsx("h4",{children:"Appearance"}),T.jsxs("div",{className:"settings-item",children:[T.jsxs("div",{className:"settings-item-info",children:[T.jsx("span",{className:"settings-item-label",children:"Dark Mode"}),T.jsx("span",{className:"settings-item-desc",children:"Enable dark theme"})]}),T.jsxs("label",{className:"settings-toggle",children:[T.jsx("input",{type:"checkbox"}),T.jsx("span",{className:"settings-toggle-slider"})]})]}),T.jsxs("div",{className:"settings-item",children:[T.jsxs("div",{className:"settings-item-info",children:[T.jsx("span",{className:"settings-item-label",children:"Compact View"}),T.jsx("span",{className:"settings-item-desc",children:"Reduce spacing and padding"})]}),T.jsxs("label",{className:"settings-toggle",children:[T.jsx("input",{type:"checkbox"}),T.jsx("span",{className:"settings-toggle-slider"})]})]})]}),T.jsxs("div",{className:"settings-section",children:[T.jsx("h4",{children:"Notifications"}),T.jsxs("div",{className:"settings-item",children:[T.jsxs("div",{className:"settings-item-info",children:[T.jsx("span",{className:"settings-item-label",children:"Email Notifications"}),T.jsx("span",{className:"settings-item-desc",children:"Receive email alerts"})]}),T.jsxs("label",{className:"settings-toggle",children:[T.jsx("input",{type:"checkbox",defaultChecked:!0}),T.jsx("span",{className:"settings-toggle-slider"})]})]}),T.jsxs("div",{className:"settings-item",children:[T.jsxs("div",{className:"settings-item-info",children:[T.jsx("span",{className:"settings-item-label",children:"Push Notifications"}),T.jsx("span",{className:"settings-item-desc",children:"Browser notifications"})]}),T.jsxs("label",{className:"settings-toggle",children:[T.jsx("input",{type:"checkbox",defaultChecked:!0}),T.jsx("span",{className:"settings-toggle-slider"})]})]})]}),T.jsxs("div",{className:"settings-section",children:[T.jsx("h4",{children:"Map Settings"}),T.jsxs("div",{className:"settings-item",children:[T.jsxs("div",{className:"settings-item-info",children:[T.jsx("span",{className:"settings-item-label",children:"Auto-refresh"}),T.jsx("span",{className:"settings-item-desc",children:"Refresh data automatically"})]}),T.jsxs("label",{className:"settings-toggle",children:[T.jsx("input",{type:"checkbox",defaultChecked:!0}),T.jsx("span",{className:"settings-toggle-slider"})]})]}),T.jsxs("div",{className:"settings-item",children:[T.jsxs("div",{className:"settings-item-info",children:[T.jsx("span",{className:"settings-item-label",children:"Show Labels"}),T.jsx("span",{className:"settings-item-desc",children:"Display node labels on map"})]}),T.jsxs("label",{className:"settings-toggle",children:[T.jsx("input",{type:"checkbox",defaultChecked:!0}),T.jsx("span",{className:"settings-toggle-slider"})]})]})]}),T.jsxs("button",{className:"profile-save-button",children:[T.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",children:[T.jsx("path",{d:"M19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H16L21 8V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),T.jsx("path",{d:"M17 21V13H7V21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),T.jsx("path",{d:"M7 3V8H15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Save Changes"]})]})]})]})]}),o&&T.jsx("div",{className:"logout-modal-overlay",children:T.jsxs("div",{className:"logout-modal",children:[T.jsx("div",{className:"logout-modal-icon",children:T.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[T.jsx("path",{d:"M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),T.jsx("path",{d:"M16 17L21 12L16 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),T.jsx("path",{d:"M21 12H9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),T.jsx("h3",{className:"logout-modal-title",children:"Confirm Logout"}),T.jsx("p",{className:"logout-modal-message",children:"Are you sure you want to logout? You will need to sign in again to access the system."}),T.jsxs("div",{className:"logout-modal-actions",children:[T.jsx("button",{className:"logout-modal-button cancel",onClick:()=>s(!1),children:"Cancel"}),T.jsxs("button",{className:"logout-modal-button confirm",onClick:v,children:[T.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",children:[T.jsx("path",{d:"M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),T.jsx("path",{d:"M16 17L21 12L16 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),T.jsx("path",{d:"M21 12H9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Logout"]})]})]})})]})};function EDe({onClose:e}){return T.jsx("div",{style:{position:"fixed",top:"16px",bottom:"16px",left:"16px",right:"16px",marginLeft:"71vw",zIndex:1001},children:T.jsxs("div",{style:{height:"100%",background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(12px)",borderRadius:"16px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",border:"1px solid rgba(229, 231, 235, 0.5)",display:"flex",flexDirection:"column",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[T.jsx("div",{style:{padding:"16px 24px",borderBottom:"1px solid rgba(229, 231, 235, 0.5)"},children:T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[T.jsx("div",{style:{background:"linear-gradient(135deg, #6B7280 0%, #4B5563 100%)",padding:"8px",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:T.jsx(yT,{style:{width:"20px",height:"20px",color:"white"}})}),T.jsxs("div",{children:[T.jsx("h2",{style:{fontSize:"18px",fontWeight:"600",color:"#111827",margin:0},children:"Settings"}),T.jsx("p",{style:{fontSize:"12px",color:"#6B7280",margin:0},children:"Manage platform preferences"})]})]}),T.jsx("button",{onClick:e,style:{background:"transparent",border:"none",cursor:"pointer",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"6px",transition:"background-color 0.2s"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.05)"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent"},children:T.jsx(Tp,{style:{width:"16px",height:"16px",color:"#6B7280"}})})]})}),T.jsx("div",{style:{flex:1,overflow:"auto",padding:"24px"},children:T.jsxs("div",{style:{maxWidth:"672px",display:"flex",flexDirection:"column",gap:"24px"},children:[T.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",borderRadius:"12px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"16px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[T.jsx(yT,{style:{width:"16px",height:"16px",color:"#8B5CF6"}}),T.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",color:"#111827",margin:0},children:"Appearance"})]}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[T.jsxs("div",{children:[T.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#111827",margin:0},children:"Glassmorphism Effects"}),T.jsx("p",{style:{fontSize:"12px",color:"#6B7280",margin:0},children:"Enable transparent glass-like UI elements"})]}),T.jsxs("div",{style:{position:"relative",display:"inline-block",width:"44px",height:"24px",cursor:"pointer"},children:[T.jsx("input",{type:"checkbox",defaultChecked:!0,style:{position:"absolute",opacity:0,width:0,height:0}}),T.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:"#3B82F6",borderRadius:"24px",transition:"0.3s"},children:T.jsx("span",{style:{position:"absolute",height:"18px",width:"18px",left:"22px",bottom:"3px",background:"white",borderRadius:"50%",transition:"0.3s"}})})]})]}),T.jsx("div",{style:{height:"1px",background:"rgba(0, 0, 0, 0.05)"}}),T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[T.jsxs("div",{children:[T.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#111827",margin:0},children:"Show Animations"}),T.jsx("p",{style:{fontSize:"12px",color:"#6B7280",margin:0},children:"Enable smooth transitions and animations"})]}),T.jsxs("div",{style:{position:"relative",display:"inline-block",width:"44px",height:"24px",cursor:"pointer"},children:[T.jsx("input",{type:"checkbox",defaultChecked:!0,style:{position:"absolute",opacity:0,width:0,height:0}}),T.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:"#3B82F6",borderRadius:"24px",transition:"0.3s"},children:T.jsx("span",{style:{position:"absolute",height:"18px",width:"18px",left:"22px",bottom:"3px",background:"white",borderRadius:"50%",transition:"0.3s"}})})]})]}),T.jsx("div",{style:{height:"1px",background:"rgba(0, 0, 0, 0.05)"}}),T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[T.jsxs("div",{children:[T.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#111827",margin:0},children:"Dark Mode"}),T.jsx("p",{style:{fontSize:"12px",color:"#6B7280",margin:0},children:"Switch to dark color scheme"})]}),T.jsxs("div",{style:{position:"relative",display:"inline-block",width:"44px",height:"24px",cursor:"pointer"},children:[T.jsx("input",{type:"checkbox",style:{position:"absolute",opacity:0,width:0,height:0}}),T.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:"#D1D5DB",borderRadius:"24px",transition:"0.3s"},children:T.jsx("span",{style:{position:"absolute",height:"18px",width:"18px",left:"3px",bottom:"3px",background:"white",borderRadius:"50%",transition:"0.3s"}})})]})]})]})]}),T.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",borderRadius:"12px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"16px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[T.jsx(lY,{style:{width:"16px",height:"16px",color:"#3B82F6"}}),T.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",color:"#111827",margin:0},children:"Map & Visualization"})]}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[T.jsxs("div",{children:[T.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#111827",margin:0},children:"Show Link Labels"}),T.jsx("p",{style:{fontSize:"12px",color:"#6B7280",margin:0},children:"Display capacity labels on network links"})]}),T.jsxs("div",{style:{position:"relative",display:"inline-block",width:"44px",height:"24px",cursor:"pointer"},children:[T.jsx("input",{type:"checkbox",defaultChecked:!0,style:{position:"absolute",opacity:0,width:0,height:0}}),T.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:"#3B82F6",borderRadius:"24px",transition:"0.3s"},children:T.jsx("span",{style:{position:"absolute",height:"18px",width:"18px",left:"22px",bottom:"3px",background:"white",borderRadius:"50%",transition:"0.3s"}})})]})]}),T.jsx("div",{style:{height:"1px",background:"rgba(0, 0, 0, 0.05)"}}),T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[T.jsxs("div",{children:[T.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#111827",margin:0},children:"Curved Links"}),T.jsx("p",{style:{fontSize:"12px",color:"#6B7280",margin:0},children:"Use curved paths for network connections"})]}),T.jsxs("div",{style:{position:"relative",display:"inline-block",width:"44px",height:"24px",cursor:"pointer"},children:[T.jsx("input",{type:"checkbox",defaultChecked:!0,style:{position:"absolute",opacity:0,width:0,height:0}}),T.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:"#3B82F6",borderRadius:"24px",transition:"0.3s"},children:T.jsx("span",{style:{position:"absolute",height:"18px",width:"18px",left:"22px",bottom:"3px",background:"white",borderRadius:"50%",transition:"0.3s"}})})]})]}),T.jsx("div",{style:{height:"1px",background:"rgba(0, 0, 0, 0.05)"}}),T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[T.jsxs("div",{children:[T.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#111827",margin:0},children:"Auto-Zoom"}),T.jsx("p",{style:{fontSize:"12px",color:"#6B7280",margin:0},children:"Automatically zoom to selected elements"})]}),T.jsxs("div",{style:{position:"relative",display:"inline-block",width:"44px",height:"24px",cursor:"pointer"},children:[T.jsx("input",{type:"checkbox",defaultChecked:!0,style:{position:"absolute",opacity:0,width:0,height:0}}),T.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:"#3B82F6",borderRadius:"24px",transition:"0.3s"},children:T.jsx("span",{style:{position:"absolute",height:"18px",width:"18px",left:"22px",bottom:"3px",background:"white",borderRadius:"50%",transition:"0.3s"}})})]})]})]})]}),T.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",borderRadius:"12px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"16px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[T.jsx(sY,{style:{width:"16px",height:"16px",color:"#F59E0B"}}),T.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",color:"#111827",margin:0},children:"Notifications"})]}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[T.jsxs("div",{children:[T.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#111827",margin:0},children:"Performance Alerts"}),T.jsx("p",{style:{fontSize:"12px",color:"#6B7280",margin:0},children:"Get notified when utilization exceeds threshold"})]}),T.jsxs("div",{style:{position:"relative",display:"inline-block",width:"44px",height:"24px",cursor:"pointer"},children:[T.jsx("input",{type:"checkbox",defaultChecked:!0,style:{position:"absolute",opacity:0,width:0,height:0}}),T.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:"#3B82F6",borderRadius:"24px",transition:"0.3s"},children:T.jsx("span",{style:{position:"absolute",height:"18px",width:"18px",left:"22px",bottom:"3px",background:"white",borderRadius:"50%",transition:"0.3s"}})})]})]}),T.jsx("div",{style:{height:"1px",background:"rgba(0, 0, 0, 0.05)"}}),T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[T.jsxs("div",{children:[T.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#111827",margin:0},children:"Fault Notifications"}),T.jsx("p",{style:{fontSize:"12px",color:"#6B7280",margin:0},children:"Receive alerts for network faults"})]}),T.jsxs("div",{style:{position:"relative",display:"inline-block",width:"44px",height:"24px",cursor:"pointer"},children:[T.jsx("input",{type:"checkbox",defaultChecked:!0,style:{position:"absolute",opacity:0,width:0,height:0}}),T.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:"#3B82F6",borderRadius:"24px",transition:"0.3s"},children:T.jsx("span",{style:{position:"absolute",height:"18px",width:"18px",left:"22px",bottom:"3px",background:"white",borderRadius:"50%",transition:"0.3s"}})})]})]}),T.jsx("div",{style:{height:"1px",background:"rgba(0, 0, 0, 0.05)"}}),T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[T.jsxs("div",{children:[T.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#111827",margin:0},children:"Email Reports"}),T.jsx("p",{style:{fontSize:"12px",color:"#6B7280",margin:0},children:"Send daily network health reports via email"})]}),T.jsxs("div",{style:{position:"relative",display:"inline-block",width:"44px",height:"24px",cursor:"pointer"},children:[T.jsx("input",{type:"checkbox",style:{position:"absolute",opacity:0,width:0,height:0}}),T.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:"#D1D5DB",borderRadius:"24px",transition:"0.3s"},children:T.jsx("span",{style:{position:"absolute",height:"18px",width:"18px",left:"3px",bottom:"3px",background:"white",borderRadius:"50%",transition:"0.3s"}})})]})]})]})]}),T.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",borderRadius:"12px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"16px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[T.jsx(gY,{style:{width:"16px",height:"16px",color:"#10B981"}}),T.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",color:"#111827",margin:0},children:"Security & Privacy"})]}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[T.jsxs("div",{children:[T.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#111827",margin:0},children:"Auto-Lock"}),T.jsx("p",{style:{fontSize:"12px",color:"#6B7280",margin:0},children:"Lock session after 15 minutes of inactivity"})]}),T.jsxs("div",{style:{position:"relative",display:"inline-block",width:"44px",height:"24px",cursor:"pointer"},children:[T.jsx("input",{type:"checkbox",defaultChecked:!0,style:{position:"absolute",opacity:0,width:0,height:0}}),T.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:"#3B82F6",borderRadius:"24px",transition:"0.3s"},children:T.jsx("span",{style:{position:"absolute",height:"18px",width:"18px",left:"22px",bottom:"3px",background:"white",borderRadius:"50%",transition:"0.3s"}})})]})]}),T.jsx("div",{style:{height:"1px",background:"rgba(0, 0, 0, 0.05)"}}),T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[T.jsxs("div",{children:[T.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#111827",margin:0},children:"Audit Logging"}),T.jsx("p",{style:{fontSize:"12px",color:"#6B7280",margin:0},children:"Track all user actions and changes"})]}),T.jsxs("div",{style:{position:"relative",display:"inline-block",width:"44px",height:"24px",cursor:"pointer"},children:[T.jsx("input",{type:"checkbox",defaultChecked:!0,style:{position:"absolute",opacity:0,width:0,height:0}}),T.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:"#3B82F6",borderRadius:"24px",transition:"0.3s"},children:T.jsx("span",{style:{position:"absolute",height:"18px",width:"18px",left:"22px",bottom:"3px",background:"white",borderRadius:"50%",transition:"0.3s"}})})]})]})]})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[T.jsx("button",{style:{background:"#3B82F6",borderRadius:"8px",border:"none",padding:"10px 20px",cursor:"pointer",color:"white",fontSize:"14px",fontWeight:"600",transition:"background-color 0.2s"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#2563EB"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="#3B82F6"},children:"Save Changes"}),T.jsx("button",{onClick:e,style:{background:"white",borderRadius:"8px",border:"1px solid #D1D5DB",padding:"10px 20px",cursor:"pointer",color:"#111827",fontSize:"14px",fontWeight:"500",transition:"background-color 0.2s"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#F9FAFB"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="white"},children:"Cancel"})]})]})})]})})}function RDe({connection:e,onClose:t}){const[n,i]=I.useState(!1),[r,o]=I.useState({x:0,y:0}),[s,a]=I.useState(!1),[d,h]=I.useState({x:0,y:0}),[m,v]=I.useState("topology"),w=I.useRef(null),R=I.useRef(null),L=I.useRef(null),O=I.useRef(null),z=I.useRef(null),$=(q,ie,re)=>{if(!ie.label)return;const J=re.labelSize,ne=re.labelWeight;q.fillStyle="#1f2937",q.font=`${ne} ${J}px 'Outfit', sans-serif`;const be=ie.size+8,ue=-ie.size-4;q.fillText(ie.label,ie.x+be,ie.y+ue)};I.useEffect(()=>{if(w.current&&r.x===0&&r.y===0){const q=w.current.getBoundingClientRect();o({x:(window.innerWidth-q.width)/2,y:window.innerHeight-q.height-16})}},[]);const U=q=>{if(w.current){a(!0);const ie=w.current.getBoundingClientRect();h({x:q.clientX-ie.left,y:q.clientY-ie.top})}};I.useEffect(()=>{const q=re=>{if(s&&w.current){const J=re.clientX-d.x,ne=re.clientY-d.y,be=w.current.getBoundingClientRect(),ue=window.innerWidth-be.width,ve=window.innerHeight-be.height;o({x:Math.max(0,Math.min(J,ue)),y:Math.max(0,Math.min(ne,ve))})}},ie=()=>{a(!1)};return s&&(document.addEventListener("mousemove",q),document.addEventListener("mouseup",ie)),()=>{document.removeEventListener("mousemove",q),document.removeEventListener("mouseup",ie)}},[s,d]),I.useEffect(()=>{var Te;if(!O.current||n||m!=="links"||!e.linkDetails||e.linkDetails.length===0)return;const q=new xo,ie=new Set,re=new Map;e.linkDetails.forEach(fe=>{const he=fe.source_node||fe.source,Re=fe.target_node||fe.target;he&&(ie.add(he),re.has(he)||re.set(he,{label:he,peran:fe.source_peran,vendor:fe.source_vendor})),Re&&(ie.add(Re),re.has(Re)||re.set(Re,{label:Re,peran:fe.target_peran,vendor:fe.target_vendor}))});const J=Array.from(ie);let ne=((Te=e.nodeData)==null?void 0:Te.id)||e.from;!ie.has(ne)&&J.length>0&&(ne=J[0]);const be=re.get(ne)||{label:ne},ue=3,ve=fe=>{if(!fe)return"#3b82f6";const he=fe.toLowerCase();return he.includes("tera")?"#dc2626":he.includes("metro")?"#ea580c":he.includes("aggregation")||he.includes("agg")?"#8b5cf6":he.includes("access")||he.includes("acc")?"#10b981":"#3b82f6"};q.addNode(ne,{label:be.label,x:0,y:0,size:25,color:"#9333ea"});const ce=J.filter(fe=>fe!==ne);ce.forEach((fe,he)=>{const Re=2*Math.PI*he/ce.length,De=ue*Math.cos(Re),Ye=ue*Math.sin(Re),_e=re.get(fe)||{label:fe};q.addNode(fe,{label:_e.label,x:De,y:Ye,size:18,color:ve(_e.peran)})});const Ie=new Map;e.linkDetails.forEach(fe=>{var Le;const he=fe.source_node||fe.source,Re=fe.target_node||fe.target,De=fe.layer||fe.trunk_layer||"unknown";if(!he||!Re)return;const _e=`${he<Re?`${he}-${Re}`:`${Re}-${he}`}|${De}`;Ie.has(_e)||Ie.set(_e,[]),(Le=Ie.get(_e))==null||Le.push(fe)}),Ie.forEach((fe,he)=>{const Re=fe[0],De=Re.source_node||Re.source,Ye=Re.target_node||Re.target,_e=Re.layer||Re.trunk_layer||"unknown";if(!De||!Ye)return;const Oe=fe.reduce((en,it)=>{const Lt=typeof it.capacity=="number"?it.capacity:0;return en+Lt},0)/1e9,yt=Oe>0?`${Oe.toFixed(1)}G`:"",xt=fe.length>1?` (${fe.length}x)`:"",Vt=_e!=="unknown"?`
${_e}`:"",Xt=`${yt}${xt}${Vt}`;try{if(q.hasNode(De)&&q.hasNode(Ye)){const en=Math.max(2,Math.min(8,Oe/20));let it="#8b5cf6";const Lt=_e.toLowerCase();Lt.includes("tera")?it="#dc2626":Lt.includes("metro")?it="#ea580c":Lt.includes("agg")?it="#8b5cf6":Lt.includes("access")?it="#10b981":it="#6b7280",q.addEdgeWithKey(he,De,Ye,{size:en,color:it,label:Xt,type:"line"})}}catch{}});try{z.current=new S_(q,O.current,{renderEdgeLabels:!0,defaultNodeColor:"#999999",defaultEdgeColor:"#FFFFFF",labelSize:12,labelWeight:"600",labelColor:{color:"#1f2937"},labelRenderedSizeThreshold:0,labelDensity:1,labelGridCellSize:60,edgeLabelSize:9,edgeLabelWeight:"500",edgeLabelColor:{color:"#6b7280"},enableEdgeEvents:!0,stagePadding:60,defaultDrawNodeLabel:$})}catch(fe){console.error("Error initializing Sigma for physical links:",fe)}return()=>{z.current&&(z.current.kill(),z.current=null)}},[e.linkDetails,e.nodeData,e.from,n,m]),I.useEffect(()=>{var ie,re;if(!R.current||n||m!=="topology")return;const q=new xo;if(e.topology&&e.topology.length>0){const J=new Set,ne=new Map;e.topology.forEach(Te=>{const fe=Te.source,he=Te.target;J.add(fe),J.add(he)});const be=Array.from(J),ue=((ie=e.nodeData)==null?void 0:ie.id)||e.from,ve=3,ce=((re=e.nodeData)==null?void 0:re.label)||e.from;q.addNode(ue,{label:ce,x:0,y:0,size:25,color:"#9333ea"}),ne.set(ue,{x:0,y:0});const Ie=be.filter(Te=>Te!==ue);Ie.forEach((Te,fe)=>{var Le;const he=2*Math.PI*fe/Ie.length,Re=ve*Math.cos(he),De=ve*Math.sin(he),Ye=(Le=e.topology)==null?void 0:Le.find(Oe=>Oe.source===Te||Oe.target===Te),_e=Te===(Ye==null?void 0:Ye.source)?(Ye==null?void 0:Ye.source_label)||Te:(Ye==null?void 0:Ye.target_label)||Te;q.addNode(Te,{label:_e,x:Re,y:De,size:18,color:"#3b82f6"}),ne.set(Te,{x:Re,y:De})}),e.topology.forEach(Te=>{const he=(Te.total_capacity||Te.source_capacity_total||0)/1e9,Re=he>0?`${he.toFixed(1)}G`:"";try{if(q.hasNode(Te.source)&&q.hasNode(Te.target)){const De=Math.max(2,Math.min(8,he/10));let Ye="#8b5cf6";if(Te.avg_utilization!==void 0){const _e=Te.avg_utilization;_e>80?Ye="#ef4444":_e>60?Ye="#f59e0b":_e>40?Ye="#eab308":Ye="#10b981"}else he>100?Ye="#10b981":he>50&&(Ye="#3b82f6");q.addEdge(Te.source,Te.target,{size:De,color:Ye,label:Re,type:"line"})}}catch{}})}else{q.addNode("pe1",{label:`${e.from} PE1`,x:-3,y:3,size:20,color:"#3b82f6"}),q.addNode("pe2",{label:`${e.to} PE2`,x:3,y:3,size:20,color:"#3b82f6"});const be="agg1",ue="agg2";q.addNode(be,{label:`${e.from} AGG1`,x:-3,y:0,size:18,color:"#8b5cf6"}),q.addNode(ue,{label:`${e.to} AGG1`,x:3,y:0,size:18,color:"#8b5cf6"});const ve="access1",ce="access2",Ie="access3",Te="access4";q.addNode(ve,{label:`${e.from} ACC1`,x:-4,y:-3,size:15,color:"#10b981"}),q.addNode(ce,{label:`${e.from} ACC2`,x:-2,y:-3,size:15,color:"#10b981"}),q.addNode(Ie,{label:`${e.to} ACC1`,x:2,y:-3,size:15,color:"#10b981"}),q.addNode(Te,{label:`${e.to} ACC2`,x:4,y:-3,size:15,color:"#10b981"}),q.addEdge("pe1","pe2",{size:4,color:"#3b82f6",label:"100G",type:"line"}),q.addEdge("pe1",be,{size:3,color:"#10b981",label:"100G",type:"line"}),q.addEdge("pe2",ue,{size:3,color:"#10b981",label:"100G",type:"line"}),q.addEdge(be,ue,{size:3,color:"#10b981",label:"50G",type:"line"}),q.addEdge(be,ve,{size:2,color:"#10b981",label:"10G",type:"line"}),q.addEdge(be,ce,{size:2,color:"#10b981",label:"10G",type:"line"}),q.addEdge(ue,Ie,{size:2,color:"#10b981",label:"10G",type:"line"}),q.addEdge(ue,Te,{size:2,color:"#10b981",label:"10G",type:"line"})}try{L.current=new S_(q,R.current,{renderEdgeLabels:!0,defaultNodeColor:"#999999",defaultEdgeColor:"#CCCCCC",labelSize:12,labelWeight:"600",labelColor:{color:"#1f2937"},labelRenderedSizeThreshold:0,labelDensity:1,labelGridCellSize:60,edgeLabelSize:9,edgeLabelWeight:"500",edgeLabelColor:{color:"#6b7280"},enableEdgeEvents:!0,stagePadding:60,defaultDrawNodeLabel:$})}catch(J){console.error("Error initializing Sigma:",J)}return()=>{L.current&&(L.current.kill(),L.current=null)}},[e.from,e.to,e.topology,e.linkDetails,e.clickedType,n,m]);const X=(()=>{var q;if(m==="topology"&&L.current){const ie=L.current.getGraph();return{nodes:ie.order,links:ie.size}}else if(m==="links"&&z.current){const ie=z.current.getGraph(),re=ie.size,J=((q=e.linkDetails)==null?void 0:q.length)||0;return{nodes:ie.order,links:re,physicalLinks:J}}return{nodes:8,links:8}})();return n?T.jsx("div",{ref:w,style:{position:"fixed",zIndex:9999,cursor:"move",left:`${r.x}px`,top:`${r.y}px`},onMouseDown:U,children:T.jsxs("button",{onClick:q=>{q.stopPropagation(),i(!1)},style:{background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(12px)",borderRadius:"8px",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"8px 12px",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:q=>{q.currentTarget.style.background="rgba(255, 255, 255, 1)"},onMouseLeave:q=>{q.currentTarget.style.background="rgba(255, 255, 255, 0.9)"},children:[T.jsx(Nw,{style:{width:"16px",height:"16px",color:"#9333ea"}}),T.jsx("span",{style:{fontSize:"12px",color:"#111827"},children:"Topology View"}),T.jsx(eP,{style:{width:"12px",height:"12px"}})]})}):T.jsx("div",{ref:w,style:{position:"fixed",zIndex:9999,width:"700px",left:`${r.x}px`,top:"200px"},children:T.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(12px)",borderRadius:"16px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",border:"1px solid rgba(229, 231, 235, 0.5)"},children:[T.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(229, 231, 235, 0.5)",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"move",userSelect:"none"},onMouseDown:U,children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",pointerEvents:"none"},children:[T.jsx(BV,{style:{width:"16px",height:"16px",color:"#9ca3af"}}),T.jsx($b,{style:{width:"16px",height:"16px",color:"#9333ea"}}),T.jsxs("div",{children:[T.jsx("h3",{style:{fontSize:"14px",color:"#111827",margin:0},children:"Network Topology"}),T.jsxs("p",{style:{fontSize:"12px",color:"#6b7280",margin:0},children:[e.from,"  ",e.to]})]})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",pointerEvents:"auto"},children:[T.jsx("button",{onClick:q=>{q.stopPropagation(),i(!0)},style:{width:"32px",height:"32px",padding:0,background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:q=>{q.currentTarget.style.background="#f3f4f6"},onMouseLeave:q=>{q.currentTarget.style.background="transparent"},children:T.jsx(Qk,{style:{width:"16px",height:"16px"}})}),T.jsx("button",{onClick:q=>{q.stopPropagation(),t()},style:{width:"32px",height:"32px",padding:0,background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:q=>{q.currentTarget.style.background="#f3f4f6"},onMouseLeave:q=>{q.currentTarget.style.background="transparent"},children:T.jsx(qS,{style:{width:"16px",height:"16px"}})})]})]}),e.clickedType==="node"&&e.linkDetails&&e.linkDetails.length>0&&T.jsx("div",{style:{padding:"0 16px",borderBottom:"1px solid rgba(229, 231, 235, 0.5)"},children:T.jsxs("div",{style:{display:"flex",gap:"4px"},children:[T.jsx("button",{onClick:()=>v("topology"),style:{padding:"10px 16px",background:m==="topology"?"rgba(147, 51, 234, 0.1)":"transparent",border:"none",borderBottom:m==="topology"?"2px solid #9333ea":"2px solid transparent",color:m==="topology"?"#9333ea":"#6b7280",fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:q=>{m!=="topology"&&(q.currentTarget.style.background="rgba(243, 244, 246, 0.5)")},onMouseLeave:q=>{m!=="topology"&&(q.currentTarget.style.background="transparent")},children:"Network Topology"}),T.jsxs("button",{onClick:()=>v("links"),style:{padding:"10px 16px",background:m==="links"?"rgba(147, 51, 234, 0.1)":"transparent",border:"none",borderBottom:m==="links"?"2px solid #9333ea":"2px solid transparent",color:m==="links"?"#9333ea":"#6b7280",fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:q=>{m!=="links"&&(q.currentTarget.style.background="rgba(243, 244, 246, 0.5)")},onMouseLeave:q=>{m!=="links"&&(q.currentTarget.style.background="transparent")},children:["Node Physical Links",T.jsx("span",{style:{background:m==="links"?"#9333ea":"#9ca3af",color:"white",fontSize:"10px",fontWeight:"700",padding:"2px 6px",borderRadius:"10px",minWidth:"20px",textAlign:"center"},children:e.linkDetails.length})]})]})}),m==="topology"&&T.jsxs("div",{style:{padding:"16px"},children:[T.jsx("div",{style:{background:"linear-gradient(to bottom right, rgba(239, 246, 255, 0.5), rgba(250, 245, 255, 0.5))",borderRadius:"12px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"16px",height:"400px",position:"relative"},children:T.jsx("div",{ref:R,style:{width:"100%",height:"100%",borderRadius:"8px"}})}),T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px",marginTop:"12px"},children:[T.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",borderRadius:"8px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"8px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginBottom:"4px"},children:[T.jsx(Nw,{style:{width:"12px",height:"12px",color:"#2563eb"}}),T.jsx("span",{style:{fontSize:"10px",color:"#6b7280"},children:"NODES"})]}),T.jsx("div",{style:{fontSize:"14px",color:"#111827"},children:X.nodes})]}),T.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",borderRadius:"8px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"8px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginBottom:"4px"},children:[T.jsx($b,{style:{width:"12px",height:"12px",color:"#9333ea"}}),T.jsx("span",{style:{fontSize:"10px",color:"#6b7280"},children:"LINKS"})]}),T.jsx("div",{style:{fontSize:"14px",color:"#111827"},children:X.links})]}),T.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",borderRadius:"8px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"8px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginBottom:"4px"},children:[T.jsx(m1,{style:{width:"12px",height:"12px",color:"#059669"}}),T.jsx("span",{style:{fontSize:"10px",color:"#6b7280"},children:"STATUS"})]}),T.jsx("div",{style:{fontSize:"14px",color:"#059669"},children:"All Active"})]})]})]}),m==="links"&&e.linkDetails&&e.linkDetails.length>0&&T.jsxs("div",{style:{padding:"16px"},children:[T.jsx("div",{style:{background:"linear-gradient(to bottom right, rgba(239, 246, 255, 0.5), rgba(250, 245, 255, 0.5))",borderRadius:"12px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"16px",height:"400px",position:"relative"},children:T.jsx("div",{ref:O,style:{width:"100%",height:"100%",borderRadius:"8px"}})}),T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px",marginTop:"12px"},children:[T.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",borderRadius:"8px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"8px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginBottom:"4px"},children:[T.jsx(Nw,{style:{width:"12px",height:"12px",color:"#2563eb"}}),T.jsx("span",{style:{fontSize:"10px",color:"#6b7280"},children:"NODES"})]}),T.jsx("div",{style:{fontSize:"14px",color:"#111827"},children:X.nodes})]}),T.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",borderRadius:"8px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"8px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginBottom:"4px"},children:[T.jsx($b,{style:{width:"12px",height:"12px",color:"#9333ea"}}),T.jsx("span",{style:{fontSize:"10px",color:"#6b7280"},children:"AGGREGATED"})]}),T.jsx("div",{style:{fontSize:"14px",color:"#111827"},children:X.links})]}),T.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",borderRadius:"8px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"8px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginBottom:"4px"},children:[T.jsx(m1,{style:{width:"12px",height:"12px",color:"#059669"}}),T.jsx("span",{style:{fontSize:"10px",color:"#6b7280"},children:"PHYSICAL"})]}),T.jsx("div",{style:{fontSize:"14px",color:"#059669"},children:X.physicalLinks||X.links})]})]}),T.jsxs("div",{style:{marginTop:"12px",padding:"12px",background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",borderRadius:"8px",border:"1px solid rgba(229, 231, 235, 0.5)"},children:[T.jsx("div",{style:{fontSize:"10px",color:"#6b7280",fontWeight:"600",marginBottom:"8px"},children:"LAYER COLOR LEGEND"}),T.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[T.jsx("div",{style:{width:"20px",height:"4px",background:"#dc2626",borderRadius:"2px"}}),T.jsx("span",{style:{fontSize:"10px",color:"#374151",fontWeight:"500"},children:"TERA"})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[T.jsx("div",{style:{width:"20px",height:"4px",background:"#ea580c",borderRadius:"2px"}}),T.jsx("span",{style:{fontSize:"10px",color:"#374151",fontWeight:"500"},children:"METRO"})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[T.jsx("div",{style:{width:"20px",height:"4px",background:"#8b5cf6",borderRadius:"2px"}}),T.jsx("span",{style:{fontSize:"10px",color:"#374151",fontWeight:"500"},children:"AGGREGATION"})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[T.jsx("div",{style:{width:"20px",height:"4px",background:"#10b981",borderRadius:"2px"}}),T.jsx("span",{style:{fontSize:"10px",color:"#374151",fontWeight:"500"},children:"ACCESS"})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[T.jsx("div",{style:{width:"20px",height:"4px",background:"#6b7280",borderRadius:"2px"}}),T.jsx("span",{style:{fontSize:"10px",color:"#374151",fontWeight:"500"},children:"Unknown"})]})]})]})]})]})})}const G6={"pe - teradatin":"#2563eb","tera - pemobile":"#ec4899","tera - pehsi":"#06b6d4","tera - pevoice":"#a855f7","tera - metro":"#10b981","tera - tera":"#f59e0b","tera - swc":"#ef4444","":"#94a3b8",default:"#6b7280"},mw=e=>{const t=(e||"").toLowerCase().trim();return G6[t]||G6.default},yw=[{id:"scenario1",name:"Simple Star Topology",description:"Central hub with 5 connected nodes",nodes:[{id:"hub",label:"Central Hub",x:0,y:0,size:30,color:"#ef4444"},{id:"node1",label:"Node 1",x:4,y:0,size:20,color:"#3b82f6"},{id:"node2",label:"Node 2",x:2,y:3.5,size:20,color:"#3b82f6"},{id:"node3",label:"Node 3",x:-2,y:3.5,size:20,color:"#3b82f6"},{id:"node4",label:"Node 4",x:-4,y:0,size:20,color:"#3b82f6"},{id:"node5",label:"Node 5",x:0,y:-4,size:20,color:"#3b82f6"}],edges:[{source:"hub",target:"node1",size:4,color:"#10b981",label:"100G"},{source:"hub",target:"node2",size:4,color:"#10b981",label:"100G"},{source:"hub",target:"node3",size:4,color:"#10b981",label:"100G"},{source:"hub",target:"node4",size:4,color:"#10b981",label:"100G"},{source:"hub",target:"node5",size:4,color:"#10b981",label:"100G"}]},{id:"scenario2",name:"Ring Topology",description:"Circular network with 6 nodes",nodes:[{id:"ring1",label:"Ring Node 1",x:4,y:0,size:22,color:"#8b5cf6"},{id:"ring2",label:"Ring Node 2",x:2,y:3.5,size:22,color:"#8b5cf6"},{id:"ring3",label:"Ring Node 3",x:-2,y:3.5,size:22,color:"#8b5cf6"},{id:"ring4",label:"Ring Node 4",x:-4,y:0,size:22,color:"#8b5cf6"},{id:"ring5",label:"Ring Node 5",x:-2,y:-3.5,size:22,color:"#8b5cf6"},{id:"ring6",label:"Ring Node 6",x:2,y:-3.5,size:22,color:"#8b5cf6"}],edges:[{source:"ring1",target:"ring2",size:3,color:"#f59e0b",label:"50G"},{source:"ring2",target:"ring3",size:3,color:"#f59e0b",label:"50G"},{source:"ring3",target:"ring4",size:3,color:"#f59e0b",label:"50G"},{source:"ring4",target:"ring5",size:3,color:"#f59e0b",label:"50G"},{source:"ring5",target:"ring6",size:3,color:"#f59e0b",label:"50G"},{source:"ring6",target:"ring1",size:3,color:"#f59e0b",label:"50G"}]},{id:"scenario3",name:"Mesh Topology",description:"Fully connected mesh network",nodes:[{id:"mesh1",label:"Mesh A",x:-3,y:3,size:24,color:"#14b8a6"},{id:"mesh2",label:"Mesh B",x:3,y:3,size:24,color:"#14b8a6"},{id:"mesh3",label:"Mesh C",x:3,y:-3,size:24,color:"#14b8a6"},{id:"mesh4",label:"Mesh D",x:-3,y:-3,size:24,color:"#14b8a6"}],edges:[{source:"mesh1",target:"mesh2",size:5,color:"#10b981",label:"200G"},{source:"mesh2",target:"mesh3",size:5,color:"#10b981",label:"200G"},{source:"mesh3",target:"mesh4",size:5,color:"#10b981",label:"200G"},{source:"mesh4",target:"mesh1",size:5,color:"#10b981",label:"200G"},{source:"mesh1",target:"mesh3",size:3,color:"#3b82f6",label:"100G"},{source:"mesh2",target:"mesh4",size:3,color:"#3b82f6",label:"100G"}]},{id:"scenario4",name:"Hierarchical Topology",description:"Three-tier network architecture",nodes:[{id:"core1",label:"Core 1",x:-2,y:4,size:28,color:"#ef4444"},{id:"core2",label:"Core 2",x:2,y:4,size:28,color:"#ef4444"},{id:"dist1",label:"Dist 1",x:-3,y:0,size:22,color:"#f59e0b"},{id:"dist2",label:"Dist 2",x:0,y:0,size:22,color:"#f59e0b"},{id:"dist3",label:"Dist 3",x:3,y:0,size:22,color:"#f59e0b"},{id:"acc1",label:"Access 1",x:-4,y:-4,size:18,color:"#10b981"},{id:"acc2",label:"Access 2",x:-2,y:-4,size:18,color:"#10b981"},{id:"acc3",label:"Access 3",x:0,y:-4,size:18,color:"#10b981"},{id:"acc4",label:"Access 4",x:2,y:-4,size:18,color:"#10b981"},{id:"acc5",label:"Access 5",x:4,y:-4,size:18,color:"#10b981"}],edges:[{source:"core1",target:"core2",size:6,color:"#ef4444",label:"400G"},{source:"core1",target:"dist1",size:5,color:"#f59e0b",label:"200G"},{source:"core1",target:"dist2",size:5,color:"#f59e0b",label:"200G"},{source:"core2",target:"dist2",size:5,color:"#f59e0b",label:"200G"},{source:"core2",target:"dist3",size:5,color:"#f59e0b",label:"200G"},{source:"dist1",target:"acc1",size:3,color:"#10b981",label:"100G"},{source:"dist1",target:"acc2",size:3,color:"#10b981",label:"100G"},{source:"dist2",target:"acc2",size:3,color:"#10b981",label:"100G"},{source:"dist2",target:"acc3",size:3,color:"#10b981",label:"100G"},{source:"dist2",target:"acc4",size:3,color:"#10b981",label:"100G"},{source:"dist3",target:"acc4",size:3,color:"#10b981",label:"100G"},{source:"dist3",target:"acc5",size:3,color:"#10b981",label:"100G"}]},{id:"scenario5",name:"Complex Network",description:"Mixed topology with multiple connections",nodes:[{id:"main",label:"Main Router",x:0,y:0,size:32,color:"#9333ea"},{id:"pe1",label:"PE Router 1",x:-4,y:3,size:24,color:"#3b82f6"},{id:"pe2",label:"PE Router 2",x:4,y:3,size:24,color:"#3b82f6"},{id:"agg1",label:"Aggregation 1",x:-5,y:-1,size:20,color:"#8b5cf6"},{id:"agg2",label:"Aggregation 2",x:0,y:-3,size:20,color:"#8b5cf6"},{id:"agg3",label:"Aggregation 3",x:5,y:-1,size:20,color:"#8b5cf6"},{id:"edge1",label:"Edge 1",x:-6,y:-4,size:16,color:"#10b981"},{id:"edge2",label:"Edge 2",x:-3,y:-5,size:16,color:"#10b981"},{id:"edge3",label:"Edge 3",x:0,y:-6,size:16,color:"#10b981"},{id:"edge4",label:"Edge 4",x:3,y:-5,size:16,color:"#10b981"},{id:"edge5",label:"Edge 5",x:6,y:-4,size:16,color:"#10b981"}],edges:[{source:"main",target:"pe1",size:6,color:"#ef4444",label:"400G"},{source:"main",target:"pe2",size:6,color:"#ef4444",label:"400G"},{source:"pe1",target:"agg1",size:4,color:"#f59e0b",label:"200G"},{source:"pe1",target:"agg2",size:4,color:"#f59e0b",label:"200G"},{source:"pe2",target:"agg2",size:4,color:"#f59e0b",label:"200G"},{source:"pe2",target:"agg3",size:4,color:"#f59e0b",label:"200G"},{source:"agg1",target:"edge1",size:2,color:"#10b981",label:"100G"},{source:"agg1",target:"edge2",size:2,color:"#10b981",label:"100G"},{source:"agg2",target:"edge2",size:2,color:"#10b981",label:"100G"},{source:"agg2",target:"edge3",size:2,color:"#10b981",label:"100G"},{source:"agg2",target:"edge4",size:2,color:"#10b981",label:"100G"},{source:"agg3",target:"edge4",size:2,color:"#10b981",label:"100G"},{source:"agg3",target:"edge5",size:2,color:"#10b981",label:"100G"},{source:"agg1",target:"agg2",size:3,color:"#3b82f6",label:"100G"},{source:"agg2",target:"agg3",size:3,color:"#3b82f6",label:"100G"}]}];function ADe({onClose:e}){const[t,n]=I.useState(!1),[i,r]=I.useState({x:0,y:0}),[o,s]=I.useState(!1),[a,d]=I.useState({x:0,y:0}),[h,m]=I.useState(0),[v,w]=I.useState([]),[R,L]=I.useState(!0),[O,z]=I.useState(!1),[$,U]=I.useState(null),Y=I.useRef(null),X=I.useRef(null),q=I.useRef(null),ie=yw[h];I.useEffect(()=>{(async()=>{try{const Te=await fetch("/data/topology-test.json");if(!Te.ok)throw new Error("Failed to load topology data");const fe=await Te.json();w(fe),L(!1)}catch(Te){console.error("Error loading topology data:",Te),L(!1)}})()},[]),I.useEffect(()=>{if(Y.current&&i.x===0&&i.y===0){const Ie=Y.current.getBoundingClientRect();r({x:(window.innerWidth-Ie.width)/2,y:window.innerHeight-Ie.height-16})}},[]);const re=Ie=>{if(Y.current){s(!0);const Te=Y.current.getBoundingClientRect();d({x:Ie.clientX-Te.left,y:Ie.clientY-Te.top})}};I.useEffect(()=>{const Ie=fe=>{if(o&&Y.current){const he=fe.clientX-a.x,Re=fe.clientY-a.y,De=Y.current.getBoundingClientRect(),Ye=window.innerWidth-De.width,_e=window.innerHeight-De.height;r({x:Math.max(0,Math.min(he,Ye)),y:Math.max(0,Math.min(Re,_e))})}},Te=()=>{s(!1)};return o&&(document.addEventListener("mousemove",Ie),document.addEventListener("mouseup",Te)),()=>{document.removeEventListener("mousemove",Ie),document.removeEventListener("mouseup",Te)}},[o,a]),I.useEffect(()=>{if(!X.current||t)return;const Ie=new xo;if(O&&v.length>0){const Te=new Set,fe=new Map;v.forEach(yt=>{Te.add(yt.no_name),Te.add(yt.nbr),fe.has(yt.no_name)||fe.set(yt.no_name,yt.layer),fe.has(yt.nbr)||fe.set(yt.nbr,yt.layer)});const he=Array.from(Te),Re=new Map,De=6;he.forEach((yt,xt)=>{const Vt=2*Math.PI*xt/he.length,Xt=De*Math.cos(Vt),en=De*Math.sin(Vt);Re.set(yt,{x:Xt,y:en})});const Ye=100,_e=2,Le=.01,Oe=.8;for(let yt=0;yt<Ye;yt++){const xt=new Map;he.forEach(Vt=>{xt.set(Vt,{fx:0,fy:0})});for(let Vt=0;Vt<he.length;Vt++)for(let Xt=Vt+1;Xt<he.length;Xt++){const en=he[Vt],it=he[Xt],Lt=Re.get(en),St=Re.get(it),lt=St.x-Lt.x,Tn=St.y-Lt.y,Mt=Math.sqrt(lt*lt+Tn*Tn)||.1,$t=_e/(Mt*Mt),Pe=lt/Mt*$t,yn=Tn/Mt*$t,wn=xt.get(en),dn=xt.get(it);wn.fx-=Pe,wn.fy-=yn,dn.fx+=Pe,dn.fy+=yn}v.forEach(Vt=>{if(Re.has(Vt.no_name)&&Re.has(Vt.nbr)){const Xt=Re.get(Vt.no_name),en=Re.get(Vt.nbr),it=en.x-Xt.x,Lt=en.y-Xt.y,St=Math.sqrt(it*it+Lt*Lt)||.1,lt=St*Le,Tn=it/St*lt,Mt=Lt/St*lt,$t=xt.get(Vt.no_name),Pe=xt.get(Vt.nbr);$t.fx+=Tn,$t.fy+=Mt,Pe.fx-=Tn,Pe.fy-=Mt}}),he.forEach(Vt=>{const Xt=Re.get(Vt),en=xt.get(Vt);Xt.x+=en.fx*Oe,Xt.y+=en.fy*Oe})}he.forEach(yt=>{const xt=Re.get(yt),Vt=fe.get(yt)||"",Xt=mw(Vt);Ie.addNode(yt,{label:yt,x:xt.x,y:xt.y,size:22,color:Xt})}),v.forEach((yt,xt)=>{const Vt=yt.cap/1e9,Xt=Vt>0?`${Vt.toFixed(0)}G`:"",en=mw(yt.layer),it=Math.max(3,Math.min(10,Vt/50));try{Ie.hasNode(yt.no_name)&&Ie.hasNode(yt.nbr)&&Ie.addEdge(yt.no_name,yt.nbr,{size:it,color:en,label:Xt,type:"line",edgeData:yt,edgeIndex:xt})}catch{}})}else ie.nodes.forEach(Te=>{Ie.addNode(Te.id,{label:Te.label,x:Te.x,y:Te.y,size:Te.size,color:Te.color})}),ie.edges.forEach(Te=>{try{Ie.addEdge(Te.source,Te.target,{size:Te.size,color:Te.color,label:Te.label,type:"line"})}catch{}});try{q.current=new S_(Ie,X.current,{renderEdgeLabels:!0,defaultNodeColor:"#999999",defaultEdgeColor:"#CCCCCC",labelSize:12,labelWeight:"600",labelColor:{color:"#111827"},edgeLabelSize:11,edgeLabelWeight:"600",edgeLabelColor:{color:"#374151"},enableEdgeEvents:!0}),O&&v.length>0&&q.current.on("clickEdge",({edge:Te})=>{const fe=Ie.getEdgeAttributes(Te);fe.edgeData&&U(fe.edgeData)})}catch(Te){console.error("Error initializing Sigma:",Te)}return()=>{q.current&&(q.current.kill(),q.current=null)}},[h,t,O,v]);const ne=(()=>{if(!q.current){if(O&&v.length>0){const Te=new Set;return v.forEach(fe=>{Te.add(fe.no_name),Te.add(fe.nbr)}),{nodes:Te.size,links:v.length}}return{nodes:ie.nodes.length,links:ie.edges.length}}const Ie=q.current.getGraph();return{nodes:Ie.order,links:Ie.size}})(),ue=(()=>{if(!O||v.length===0)return[];const Ie=new Set;return v.forEach(Te=>{Te.layer&&Te.layer.trim()&&Ie.add(Te.layer)}),Array.from(Ie).sort()})(),ve=()=>{m(Ie=>(Ie+1)%yw.length)},ce=()=>{m(Ie=>(Ie-1+yw.length)%yw.length)};return t?T.jsx("div",{ref:Y,style:{position:"fixed",zIndex:9999,cursor:"move",left:`${i.x}px`,top:`${i.y}px`},onMouseDown:re,children:T.jsxs("button",{onClick:Ie=>{Ie.stopPropagation(),n(!1)},style:{background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(12px)",borderRadius:"8px",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"8px 12px",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:Ie=>{Ie.currentTarget.style.background="rgba(255, 255, 255, 1)"},onMouseLeave:Ie=>{Ie.currentTarget.style.background="rgba(255, 255, 255, 0.9)"},children:[T.jsx(B6,{style:{width:"16px",height:"16px",color:"#9333ea"}}),T.jsx("span",{style:{fontSize:"12px",color:"#111827"},children:"Topology Test"}),T.jsx(eP,{style:{width:"12px",height:"12px"}})]})}):T.jsx("div",{ref:Y,style:{position:"fixed",zIndex:9999,width:"900px",left:`${i.x}px`,top:`${i.y}px`},children:T.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(12px)",borderRadius:"16px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",border:"1px solid rgba(229, 231, 235, 0.5)"},children:[T.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(229, 231, 235, 0.5)",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"move",userSelect:"none"},onMouseDown:re,children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",pointerEvents:"none"},children:[T.jsx(BV,{style:{width:"16px",height:"16px",color:"#9ca3af"}}),T.jsx(B6,{style:{width:"16px",height:"16px",color:"#9333ea"}}),T.jsxs("div",{children:[T.jsxs("h3",{style:{fontSize:"14px",color:"#111827",margin:0},children:["Topology Test - ",O?"Real Data":ie.name]}),T.jsx("p",{style:{fontSize:"12px",color:"#6b7280",margin:0},children:O?"Data from topology-test.json":ie.description})]})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",pointerEvents:"auto"},children:[T.jsx("button",{onClick:Ie=>{Ie.stopPropagation(),n(!0)},style:{width:"32px",height:"32px",padding:0,background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:Ie=>{Ie.currentTarget.style.background="#f3f4f6"},onMouseLeave:Ie=>{Ie.currentTarget.style.background="transparent"},children:T.jsx(Qk,{style:{width:"16px",height:"16px"}})}),T.jsx("button",{onClick:Ie=>{Ie.stopPropagation(),e()},style:{width:"32px",height:"32px",padding:0,background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:Ie=>{Ie.currentTarget.style.background="#f3f4f6"},onMouseLeave:Ie=>{Ie.currentTarget.style.background="transparent"},children:T.jsx(qS,{style:{width:"16px",height:"16px"}})})]})]}),T.jsxs("div",{style:{padding:"16px"},children:[T.jsxs("div",{style:{background:"linear-gradient(to bottom right, rgba(239, 246, 255, 0.5), rgba(250, 245, 255, 0.5))",borderRadius:"12px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"16px",height:"500px",position:"relative"},children:[T.jsx("div",{ref:X,style:{width:"100%",height:"100%",borderRadius:"8px"}}),$&&T.jsxs("div",{style:{position:"absolute",top:"16px",right:"16px",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(12px)",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.15)",border:"1px solid rgba(229, 231, 235, 0.8)",padding:"16px",maxWidth:"320px",zIndex:10},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"12px"},children:[T.jsxs("div",{children:[T.jsx("h4",{style:{margin:0,fontSize:"13px",fontWeight:"600",color:"#111827"},children:"Link Details"}),T.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"11px",color:"#6b7280"},children:$.ruas})]}),T.jsx("button",{onClick:()=>U(null),style:{background:"transparent",border:"none",cursor:"pointer",padding:"4px",borderRadius:"4px"},onMouseEnter:Ie=>{Ie.currentTarget.style.background="#f3f4f6"},onMouseLeave:Ie=>{Ie.currentTarget.style.background="transparent"},children:T.jsx(qS,{style:{width:"14px",height:"14px",color:"#6b7280"}})})]}),T.jsxs("div",{style:{display:"grid",gap:"8px",fontSize:"11px"},children:[T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gap:"8px",alignItems:"center"},children:[T.jsx("span",{style:{color:"#6b7280",fontWeight:"500"},children:"Source:"}),T.jsx("span",{style:{color:"#111827",fontWeight:"600"},children:$.no_name})]}),T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gap:"8px",alignItems:"center"},children:[T.jsx("span",{style:{color:"#6b7280",fontWeight:"500"},children:"Target:"}),T.jsx("span",{style:{color:"#111827",fontWeight:"600"},children:$.nbr})]}),T.jsx("div",{style:{height:"1px",background:"#e5e7eb",margin:"4px 0"}}),T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gap:"8px",alignItems:"center"},children:[T.jsx("span",{style:{color:"#6b7280",fontWeight:"500"},children:"Layer:"}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[T.jsx("div",{style:{width:"16px",height:"3px",background:mw($.layer),borderRadius:"2px"}}),T.jsx("span",{style:{color:"#111827"},children:$.layer||"No Layer"})]})]}),T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gap:"8px",alignItems:"center"},children:[T.jsx("span",{style:{color:"#6b7280",fontWeight:"500"},children:"Capacity:"}),T.jsxs("span",{style:{color:"#2563eb",fontWeight:"600"},children:[($.cap/1e9).toFixed(0)," Gbps"]})]}),T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gap:"8px",alignItems:"center"},children:[T.jsx("span",{style:{color:"#6b7280",fontWeight:"500"},children:"Physical Links:"}),T.jsx("span",{style:{color:"#111827"},children:$.jm_pshik})]}),T.jsx("div",{style:{height:"1px",background:"#e5e7eb",margin:"4px 0"}}),T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gap:"8px",alignItems:"center"},children:[T.jsx("span",{style:{color:"#6b7280",fontWeight:"500"},children:"Traffic In (95%):"}),T.jsx("span",{style:{color:"#10b981"},children:$.trf95_in?($.trf95_in/1e9).toFixed(2)+" Gbps":"N/A"})]}),T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gap:"8px",alignItems:"center"},children:[T.jsx("span",{style:{color:"#6b7280",fontWeight:"500"},children:"Traffic Out (95%):"}),T.jsx("span",{style:{color:"#f59e0b"},children:$.trf95_ot?($.trf95_ot/1e9).toFixed(2)+" Gbps":"N/A"})]}),T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gap:"8px",alignItems:"center"},children:[T.jsx("span",{style:{color:"#6b7280",fontWeight:"500"},children:"Max Traffic In:"}),T.jsx("span",{style:{color:"#6b7280"},children:$.trfmax_in?($.trfmax_in/1e9).toFixed(2)+" Gbps":"N/A"})]}),T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gap:"8px",alignItems:"center"},children:[T.jsx("span",{style:{color:"#6b7280",fontWeight:"500"},children:"Max Traffic Out:"}),T.jsx("span",{style:{color:"#6b7280"},children:$.trfmax_ot?($.trfmax_ot/1e9).toFixed(2)+" Gbps":"N/A"})]}),$.utz!==null&&T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gap:"8px",alignItems:"center"},children:[T.jsx("span",{style:{color:"#6b7280",fontWeight:"500"},children:"Utilization:"}),T.jsxs("span",{style:{color:"#ef4444",fontWeight:"600"},children:[($.utz*100).toFixed(1),"%"]})]})]})]})]}),T.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"12px",justifyContent:"center",alignItems:"center"},children:[T.jsx("button",{onClick:()=>z(!1),style:{padding:"8px 16px",background:O?"rgba(255, 255, 255, 0.8)":"rgba(147, 51, 234, 0.2)",border:O?"1px solid rgba(229, 231, 235, 0.5)":"1px solid rgba(147, 51, 234, 0.5)",borderRadius:"8px",cursor:"pointer",fontSize:"12px",color:O?"#374151":"#9333ea",fontWeight:O?"400":"600"},children:"Dummy Data"}),T.jsxs("button",{onClick:()=>z(!0),disabled:R||v.length===0,style:{padding:"8px 16px",background:O?"rgba(147, 51, 234, 0.2)":"rgba(255, 255, 255, 0.8)",border:O?"1px solid rgba(147, 51, 234, 0.5)":"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"8px",cursor:R||v.length===0?"not-allowed":"pointer",fontSize:"12px",color:O?"#9333ea":"#374151",fontWeight:O?"600":"400",opacity:R||v.length===0?.5:1},children:["Real Data ",R?"(Loading...)":v.length===0?"(No Data)":""]})]}),!O&&T.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"12px",justifyContent:"center"},children:[T.jsxs("button",{onClick:ce,style:{padding:"8px 16px",background:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",color:"#374151"},children:[T.jsx(Qk,{style:{width:"14px",height:"14px"}}),"Previous"]}),T.jsxs("div",{style:{padding:"8px 16px",background:"rgba(147, 51, 234, 0.1)",border:"1px solid rgba(147, 51, 234, 0.3)",borderRadius:"8px",fontSize:"12px",color:"#9333ea",fontWeight:"600"},children:[h+1," / ",yw.length]}),T.jsxs("button",{onClick:ve,style:{padding:"8px 16px",background:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",color:"#374151"},children:["Next",T.jsx(eP,{style:{width:"14px",height:"14px"}})]})]}),O&&ue.length>0&&T.jsxs("div",{style:{marginTop:"12px",padding:"14px",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(249, 250, 251, 0.9))",backdropFilter:"blur(8px)",borderRadius:"10px",border:"1px solid rgba(229, 231, 235, 0.6)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)"},children:[T.jsx("div",{style:{fontSize:"12px",fontWeight:"700",color:"#374151",marginBottom:"10px",letterSpacing:"0.5px"},children:" LAYER LEGEND"}),T.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},children:ue.map(Ie=>T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"6px 8px",background:"rgba(255, 255, 255, 0.6)",borderRadius:"6px",border:"1px solid rgba(229, 231, 235, 0.4)"},children:[T.jsx("div",{style:{width:"24px",height:"4px",background:mw(Ie),borderRadius:"2px",boxShadow:`0 0 8px ${mw(Ie)}40`}}),T.jsx("span",{style:{fontSize:"10px",color:"#1f2937",fontWeight:"500",flex:1},children:Ie||"No Layer"})]},Ie))}),T.jsx("div",{style:{marginTop:"10px",padding:"8px",background:"rgba(59, 130, 246, 0.08)",borderRadius:"6px",fontSize:"10px",color:"#6b7280",textAlign:"center",fontStyle:"italic"},children:" Click on any edge to view detailed information"})]}),T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px",marginTop:"12px"},children:[T.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",borderRadius:"8px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"8px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginBottom:"4px"},children:[T.jsx(Nw,{style:{width:"12px",height:"12px",color:"#2563eb"}}),T.jsx("span",{style:{fontSize:"10px",color:"#6b7280"},children:"NODES"})]}),T.jsx("div",{style:{fontSize:"14px",color:"#111827"},children:ne.nodes})]}),T.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",borderRadius:"8px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"8px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginBottom:"4px"},children:[T.jsx($b,{style:{width:"12px",height:"12px",color:"#9333ea"}}),T.jsx("span",{style:{fontSize:"10px",color:"#6b7280"},children:"LINKS"})]}),T.jsx("div",{style:{fontSize:"14px",color:"#111827"},children:ne.links})]}),T.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",borderRadius:"8px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"8px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginBottom:"4px"},children:[T.jsx(m1,{style:{width:"12px",height:"12px",color:"#059669"}}),T.jsx("span",{style:{fontSize:"10px",color:"#6b7280"},children:"TYPE"})]}),T.jsx("div",{style:{fontSize:"14px",color:"#059669"},children:O?"Real Data":"Test Data"})]})]})]})]})})}const KS={},TDe=e=>{const t={};return e.features&&e.features.forEach(n=>{const i=n.properties,r=i.CC_2||i.GID_2;t[r]||(t[r]={id:r,name:i.NAME_2,provinsi:i.NAME_1,type:i.TYPE_2==="Kota"?"Kota":"Kabupaten",coordinates:{type:n.geometry.type,coordinates:n.geometry.coordinates},statistics:{population:Math.floor(Math.random()*1e6)+1e5,areaSize:`${Math.floor(Math.random()*1e3)+100} km`,btsCount:Math.floor(Math.random()*100)+10,coverage:`${(Math.random()*20+80).toFixed(1)}%`},performance:{avgThroughput:`${Math.floor(Math.random()*300+400)} Mbps`,availability:`${(Math.random()*5+95).toFixed(1)}%`,avgLatency:`${Math.floor(Math.random()*20+20)}ms`},traffic:{data:`${Math.floor(Math.random()*500+100)} GB`,voice:`${Math.floor(Math.random()*3e5+1e5)}`,sms:`${Math.floor(Math.random()*2e5+5e4)}`}})}),t},kDe=async()=>{try{const e=await fetch("/data/kota-kabupaten.json");if(!e.ok)throw new Error("Failed to load kabupaten data");const t=await e.json();return Object.assign(KS,TDe(t)),console.log(`Loaded ${Object.keys(KS).length} kabupaten/kota`),!0}catch(e){return console.error("Error loading kabupaten data:",e),!1}},PDe=e=>new Promise((t,n)=>{vT.parse(e,{header:!0,skipEmptyLines:!0,dynamicTyping:!0,complete:i=>{const r=i.data.map(o=>{const s=o.file2_longitude||o.longitude,a=o.file2_latitude||o.latitude;return!s||!a||isNaN(s)||isNaN(a)?null:{node:o.node||o.hostname||"Unknown",sto_a:o.file2_sto_a||o.sto_a||"",types:o.file2_types||o.types||"",platform:o.file2_platform||o.platform||"",sto:o.file2_sto||o.sto||"",sto_l:o.file2_sto_l||o.sto_l||"",witel:o.file2_witel||o.witel||"",reg:o.file2_reg||o.reg||"",cluster:o.file2_cluster||o.cluster||"",longitude:parseFloat(s),latitude:parseFloat(a)}}).filter(o=>o!==null);t(r)},error:i=>{n(i)}})}),DDe=async e=>({nodes:await PDe(e),edges:[],bandwidthAggregation:new Map}),Zr={jabar:"#FF6B6B",jateng:"#4ECDC4",jatim:"#45B7D1",dki:"#FFA07A",banten:"#98D8C8",yogya:"#F7DC6F",aceh:"#E74C3C",sumut:"#BB8FCE",sumbar:"#85C1E2",riau:"#F8B739",jambi:"#52BE80",sumsel:"#EC7063",bengkulu:"#AF7AC5",lampung:"#5DADE2",babel:"#48C9B0",kepri:"#F4D03F",kalbar:"#EB984E",kalteng:"#DC7633",kalsel:"#CA6F1E",kaltim:"#BA4A00",kaltara:"#A04000",sulut:"#7D3C98",sulteng:"#6C3483",sulsel:"#5B2C6F",sultra:"#4A235A",gorontalo:"#76448A",sulbar:"#633974",bali:"#1ABC9C",ntb:"#16A085",ntt:"#138D75",maluku:"#117A65",malut:"#0E6655",papua:"#0B5345",papbar:"#186A3B"},FDe={jabar:{id:"jabar",name:"Jawa Barat",color:Zr.jabar,coordinates:[[[108.56916,-6.70834],[108.602501,-6.763056],[108.67437,-6.758971],[108.709129,-6.809689],[108.769806,-6.808595],[108.805817,-6.784571],[108.801231,-6.744212],[108.830612,-6.744647],[108.825981,-6.826869],[108.754517,-6.914639],[108.761108,-6.983061],[108.798851,-7.005829],[108.777687,-7.10483],[108.696846,-7.15117],[108.625366,-7.13698],[108.567177,-7.16577],[108.584663,-7.229239],[108.555428,-7.2864],[108.560173,-7.335101],[108.6614,-7.343176],[108.682167,-7.36908],[108.753296,-7.56022],[108.733803,-7.61757],[108.800354,-7.673753],[108.776482,-7.700318],[108.67363,-7.682003],[108.670181,-7.731625],[108.640854,-7.687573],[108.517296,-7.69865],[108.48922,-7.717109],[108.498558,-7.793009],[108.445457,-7.820151],[108.300041,-7.814594],[107.940552,-7.731939],[107.846878,-7.737311],[107.812683,-7.68903],[107.682068,-7.661919],[107.601654,-7.571306],[107.399536,-7.493769],[106.796669,-7.436666],[106.790276,-7.410278],[106.788452,-7.43691],[106.560226,-7.416988],[106.443886,-7.36083],[106.405556,-7.382778],[106.373138,-7.308633],[106.400558,-7.186389],[106.4627,-7.181409],[106.456551,-7.12988],[106.551666,-7.024721],[106.511948,-6.965001],[106.390396,-6.96854],[106.391403,-6.90002],[106.434303,-6.820608],[106.511497,-6.765959],[106.429398,-6.69578],[106.403702,-6.455621],[106.458298,-6.421798],[106.428001,-6.348768],[106.472282,-6.31181],[106.502007,-6.356301],[106.531693,-6.35331],[106.519547,-6.32599],[106.595253,-6.363669],[106.761696,-6.36268],[106.775948,-6.316749],[106.805023,-6.31454],[106.794601,-6.361689],[106.846298,-6.34686],[106.909447,-6.375459],[106.907608,-6.267298],[106.945259,-6.255381],[106.970306,-6.19889],[106.972839,-6.09111],[107.01722,-6.078333],[106.986115,-6.046944],[107.015556,-6.033612],[106.993057,-6.028611],[106.987778,-6.00778],[107.016113,-5.973889],[106.989723,-5.942777],[107.007774,-5.918055],[107.09639,-5.93583],[107.164719,-5.98778],[107.339996,-5.968889],[107.466347,-6.14317],[107.623055,-6.189167],[107.666542,-6.244673],[107.820557,-6.18333],[107.855621,-6.211535],[107.8909,-6.18976],[107.890266,-6.237501],[108.128067,-6.33466],[108.20977,-6.273844],[108.183754,-6.227846],[108.336662,-6.27466],[108.349319,-6.239657],[108.384048,-6.355161],[108.538109,-6.483586],[108.56916,-6.70834]]],statistics:{population:48e6,areaSize:"35,377.76 km",btsCount:1250,coverage:"98.5%"}},jateng:{id:"jateng",name:"Jawa Tengah",color:Zr.jateng,coordinates:[[[111.692879,-6.754612],[111.655281,-6.826329],[111.619156,-6.826409],[111.609039,-6.903619],[111.566597,-6.94502],[111.621803,-6.98183],[111.604263,-7.140271],[111.541611,-7.22794],[111.448273,-7.25188],[111.420197,-7.30742],[111.45295,-7.32056],[111.459091,-7.37659],[111.20414,-7.24505],[111.148041,-7.261489],[111.116676,-7.418],[111.154701,-7.571369],[111.193329,-7.608829],[111.179886,-7.70701],[111.230743,-7.74767],[111.284523,-7.745249],[111.314003,-7.850789],[111.248383,-7.944731],[111.183167,-7.916109],[111.14222,-7.93493],[111.111771,-8.06415],[111.077927,-8.04819],[111.026451,-8.083409],[110.956131,-8.063708],[110.911171,-8.121149],[110.900276,-8.212499],[110.837074,-8.206528],[110.828529,-8.137669],[110.786987,-8.151238],[110.755783,-8.019719],[110.786407,-7.819219],[110.67289,-7.787689],[110.577057,-7.805489],[110.494019,-7.767861],[110.447891,-7.543099],[110.281677,-7.697289],[110.262253,-7.646868],[110.128471,-7.656851],[110.13121,-7.745999],[110.06321,-7.81391],[110.042946,-7.892039],[110.008614,-7.890277],[109.643608,-7.780899],[109.470383,-7.758562],[109.41111,-7.779443],[109.386391,-7.754999],[109.388222,-7.71049],[109.179779,-7.692531],[109.174065,-7.670598],[109.167961,-7.691113],[109.050835,-7.700277],[109.016891,-7.75264],[108.99176,-7.699186],[109.027199,-7.654788],[109.009018,-7.661509],[109.010559,-7.67972],[108.993011,-7.665037],[108.985954,-7.729906],[108.953247,-7.66612],[108.963715,-7.713827],[108.938461,-7.7197],[108.871109,-7.691778],[108.859291,-7.659353],[108.81028,-7.670464],[108.82177,-7.62087],[108.788109,-7.668969],[108.733803,-7.61757],[108.753296,-7.56022],[108.682167,-7.36908],[108.6614,-7.343176],[108.557861,-7.330791],[108.584778,-7.227799],[108.567177,-7.16577],[108.625366,-7.13698],[108.696846,-7.15117],[108.777687,-7.10483],[108.798851,-7.005829],[108.761108,-6.983061],[108.754517,-6.914639],[108.825981,-6.826869],[108.832779,-6.74222],[108.852592,-6.795217],[108.94838,-6.828549],[109.068611,-6.757219],[109.101387,-6.83917],[109.275002,-6.873329],[109.43148,-6.844464],[109.520752,-6.777239],[109.573631,-6.83648],[109.882095,-6.916781],[110.000832,-6.92139],[110.172775,-6.843056],[110.315002,-6.940001],[110.446953,-6.956671],[110.487503,-6.945833],[110.520264,-6.834295],[110.576942,-6.772222],[110.543053,-6.764168],[110.54528,-6.725001],[110.619446,-6.70667],[110.661507,-6.57412],[110.64389,-6.555556],[110.681946,-6.525834],[110.663612,-6.502222],[110.728615,-6.433055],[110.980278,-6.402777],[111.047501,-6.427779],[111.063332,-6.52],[111.149437,-6.65639],[111.356941,-6.704445],[111.460419,-6.664791],[111.492432,-6.62007],[111.56237,-6.639479],[111.692879,-6.754612]]],statistics:{population:36e6,areaSize:"32,800.69 km",btsCount:980,coverage:"97.8%"}},jatim:{id:"jatim",name:"Jawa Timur",color:Zr.jatim,coordinates:[[[113.592079,-7.714859],[113.666946,-7.736666],[113.71167,-7.708056],[113.760834,-7.738056],[113.84111,-7.684166],[113.931107,-7.70028],[114.042778,-7.606388],[114.108032,-7.706919],[114.240898,-7.698089],[114.294998,-7.747779],[114.375832,-7.750555],[114.451942,-7.80194],[114.465385,-7.887235],[114.421944,-7.920556],[114.431259,-8.059984],[114.340279,-8.422531],[114.367226,-8.482499],[114.352219,-8.527501],[114.378349,-8.527027],[114.387184,-8.446678],[114.423073,-8.604269],[114.448692,-8.638862],[114.481377,-8.617821],[114.570427,-8.66032],[114.605492,-8.715309],[114.587502,-8.763888],[114.531952,-8.780528],[114.345123,-8.742929],[114.371567,-8.673268],[114.317093,-8.623077],[114.229721,-8.60194],[114.285072,-8.603959],[114.254173,-8.585829],[114.223412,-8.597115],[114.221123,-8.644735],[114.091667,-8.615277],[114.050003,-8.647087],[114.015091,-8.589911],[113.956223,-8.615029],[113.96003,-8.56337],[113.902222,-8.577498],[113.836113,-8.554721],[113.82972,-8.527499],[113.811012,-8.56172],[113.796417,-8.48946],[113.712502,-8.529167],[113.717636,-8.48497],[113.646263,-8.49529],[113.639488,-8.454617],[113.485458,-8.415411],[113.480408,-8.377279],[113.389175,-8.400594],[113.309723,-8.299236],[113.236397,-8.283989],[113.078339,-8.287089],[112.980835,-8.324722],[112.912781,-8.399445],[112.898331,-8.38083],[112.898613,-8.402224],[112.847221,-8.408888],[112.831947,-8.368889],[112.810555,-8.403056],[112.771042,-8.386748],[112.754723,-8.425555],[112.709167,-8.417779],[112.653389,-8.447706],[112.556946,-8.399999],[112.372154,-8.375492],[112.331665,-8.331666],[112.262497,-8.350556],[112.143646,-8.31587],[112.034164,-8.320277],[111.950554,-8.277778],[111.9375,-8.306666],[111.899445,-8.304444],[111.791023,-8.252959],[111.770279,-8.26778],[111.782028,-8.325699],[111.748337,-8.344721],[111.74662,-8.306268],[111.712906,-8.291244],[111.724068,-8.318169],[111.689163,-8.335814],[111.726944,-8.371111],[111.678741,-8.385019],[111.616821,-8.320239],[111.606941,-8.339999],[111.568054,-8.338611],[111.553886,-8.30583],[111.533607,-8.33361],[111.479027,-8.304588],[111.455276,-8.320834],[111.454979,-8.274499],[111.424797,-8.257259],[111.415001,-8.278334],[111.291389,-8.274168],[111.257225,-8.248056],[111.153221,-8.284841],[111.093613,-8.22083],[111.064163,-8.251944],[110.992226,-8.25361],[110.901146,-8.192949],[110.911171,-8.121149],[110.956131,-8.063708],[111.026451,-8.083409],[111.077927,-8.04819],[111.111771,-8.06415],[111.14222,-7.93493],[111.183167,-7.916109],[111.248383,-7.944731],[111.314003,-7.850789],[111.284523,-7.745249],[111.230743,-7.74767],[111.179886,-7.70701],[111.193329,-7.608829],[111.154701,-7.571369],[111.116676,-7.418],[111.148041,-7.261489],[111.20414,-7.24505],[111.459091,-7.37659],[111.45295,-7.32056],[111.420197,-7.30742],[111.448273,-7.25188],[111.541611,-7.22794],[111.604263,-7.140271],[111.621803,-6.98183],[111.566597,-6.94502],[111.609039,-6.903619],[111.619156,-6.826409],[111.655281,-6.826329],[111.692879,-6.754612],[111.839722,-6.80111],[111.964157,-6.762219],[112.046669,-6.881475],[112.1222,-6.901907],[112.328835,-6.86293],[112.430878,-6.906389],[112.524437,-6.893889],[112.598053,-6.93361],[112.673889,-6.92],[112.738892,-6.96389],[112.806946,-6.96389],[112.873611,-7.01389],[112.940277,-7.01389],[113.006943,-7.06389],[113.073608,-7.06389],[113.140274,-7.11389],[113.20694,-7.11389],[113.273605,-7.16389],[113.340271,-7.16389],[113.406937,-7.21389],[113.473602,-7.21389],[113.540268,-7.26389],[113.606934,-7.26389],[113.592079,-7.714859]]],statistics:{population:4e7,areaSize:"47,799.75 km",btsCount:1150,coverage:"98.2%"}},dki:{id:"dki",name:"DKI Jakarta",color:Zr.dki,coordinates:[[[106.6,-6.35],[106.95,-6.35],[106.95,-5.95],[106.6,-5.95],[106.6,-6.35]]],statistics:{population:105e5,areaSize:"664.01 km",btsCount:850,coverage:"99.5%"}},banten:{id:"banten",name:"Banten",color:Zr.banten,coordinates:[[[105.2,-7],[106.8,-7],[106.8,-5.8],[105.2,-5.8],[105.2,-7]]],statistics:{population:13e6,areaSize:"9,662.92 km",btsCount:720,coverage:"98.0%"}},yogya:{id:"yogya",name:"DI Yogyakarta",color:Zr.yogya,coordinates:[[[110.1,-8.2],[110.7,-8.2],[110.7,-7.7],[110.1,-7.7],[110.1,-8.2]]],statistics:{population:39e5,areaSize:"3,133.15 km",btsCount:420,coverage:"99.0%"}},aceh:{id:"aceh",name:"Aceh",color:Zr.aceh,coordinates:[[[95,6],[98,6],[98,2],[95,2],[95,6]]],statistics:{population:53e5,areaSize:"57,956.00 km",btsCount:580,coverage:"92.5%"}},sumut:{id:"sumut",name:"Sumatera Utara",color:Zr.sumut,coordinates:[[[98,4.5],[100.5,4.5],[100.5,1],[98,1],[98,4.5]]],statistics:{population:148e5,areaSize:"72,981.23 km",btsCount:920,coverage:"95.0%"}},sumbar:{id:"sumbar",name:"Sumatera Barat",color:Zr.sumbar,coordinates:[[[98.5,.5],[101.5,.5],[101.5,-2.5],[98.5,-2.5],[98.5,.5]]],statistics:{population:55e5,areaSize:"42,012.89 km",btsCount:650,coverage:"94.0%"}},riau:{id:"riau",name:"Riau",color:Zr.riau,coordinates:[[[100,2.5],[103.5,2.5],[103.5,-1.5],[100,-1.5],[100,2.5]]],statistics:{population:68e5,areaSize:"87,023.66 km",btsCount:710,coverage:"93.0%"}},jambi:{id:"jambi",name:"Jambi",color:Zr.jambi,coordinates:[[[101,0],[104.5,0],[104.5,-2.5],[101,-2.5],[101,0]]],statistics:{population:36e5,areaSize:"50,058.16 km",btsCount:480,coverage:"91.0%"}},sumsel:{id:"sumsel",name:"Sumatera Selatan",color:Zr.sumsel,coordinates:[[[102,-1.5],[106,-1.5],[106,-4.5],[102,-4.5],[102,-1.5]]],statistics:{population:85e5,areaSize:"91,592.43 km",btsCount:780,coverage:"93.5%"}},bengkulu:{id:"bengkulu",name:"Bengkulu",color:Zr.bengkulu,coordinates:[[[101,-2],[103.5,-2],[103.5,-5.5],[101,-5.5],[101,-2]]],statistics:{population:2e6,areaSize:"19,919.33 km",btsCount:320,coverage:"89.0%"}},lampung:{id:"lampung",name:"Lampung",color:Zr.lampung,coordinates:[[[103.5,-3.5],[106,-3.5],[106,-6],[103.5,-6],[103.5,-3.5]]],statistics:{population:9e6,areaSize:"34,623.80 km",btsCount:690,coverage:"94.5%"}},babel:{id:"babel",name:"Bangka Belitung",color:Zr.babel,coordinates:[[[105,-1],[108.5,-1],[108.5,-3.5],[105,-3.5],[105,-1]]],statistics:{population:15e5,areaSize:"16,424.14 km",btsCount:280,coverage:"90.0%"}},kepri:{id:"kepri",name:"Kepulauan Riau",color:Zr.kepri,coordinates:[[[103.5,2],[108.5,2],[108.5,-1],[103.5,-1],[103.5,2]]],statistics:{population:22e5,areaSize:"8,201.72 km",btsCount:380,coverage:"95.5%"}},kalbar:{id:"kalbar",name:"Kalimantan Barat",color:Zr.kalbar,coordinates:[[[108.5,2.5],[112.5,2.5],[112.5,-3.5],[108.5,-3.5],[108.5,2.5]]],statistics:{population:52e5,areaSize:"147,307.00 km",btsCount:520,coverage:"88.0%"}},kalteng:{id:"kalteng",name:"Kalimantan Tengah",color:Zr.kalteng,coordinates:[[[111,.5],[115.5,.5],[115.5,-4],[111,-4],[111,.5]]],statistics:{population:27e5,areaSize:"153,564.50 km",btsCount:380,coverage:"85.0%"}},kalsel:{id:"kalsel",name:"Kalimantan Selatan",color:Zr.kalsel,coordinates:[[[114.5,-1.5],[116.5,-1.5],[116.5,-4.5],[114.5,-4.5],[114.5,-1.5]]],statistics:{population:43e5,areaSize:"38,744.23 km",btsCount:560,coverage:"92.0%"}},kaltim:{id:"kaltim",name:"Kalimantan Timur",color:Zr.kaltim,coordinates:[[[115,3],[119.5,3],[119.5,-2.5],[115,-2.5],[115,3]]],statistics:{population:38e5,areaSize:"129,066.64 km",btsCount:490,coverage:"90.0%"}},kaltara:{id:"kaltara",name:"Kalimantan Utara",color:Zr.kaltara,coordinates:[[[115.5,4.5],[119,4.5],[119,2],[115.5,2],[115.5,4.5]]],statistics:{population:75e4,areaSize:"75,467.70 km",btsCount:180,coverage:"82.0%"}},sulut:{id:"sulut",name:"Sulawesi Utara",color:Zr.sulut,coordinates:[[[123.5,2],[127,2],[127,0],[123.5,0],[123.5,2]]],statistics:{population:26e5,areaSize:"13,851.64 km",btsCount:420,coverage:"94.0%"}},sulteng:{id:"sulteng",name:"Sulawesi Tengah",color:Zr.sulteng,coordinates:[[[119.5,1.5],[124,1.5],[124,-4],[119.5,-4],[119.5,1.5]]],statistics:{population:3e6,areaSize:"61,841.29 km",btsCount:380,coverage:"87.0%"}},sulsel:{id:"sulsel",name:"Sulawesi Selatan",color:Zr.sulsel,coordinates:[[[118.5,-2.5],[121.5,-2.5],[121.5,-6.5],[118.5,-6.5],[118.5,-2.5]]],statistics:{population:91e5,areaSize:"46,717.48 km",btsCount:780,coverage:"95.0%"}},sultra:{id:"sultra",name:"Sulawesi Tenggara",color:Zr.sultra,coordinates:[[[121,-2.5],[124.5,-2.5],[124.5,-6],[121,-6],[121,-2.5]]],statistics:{population:27e5,areaSize:"38,067.70 km",btsCount:360,coverage:"88.0%"}},gorontalo:{id:"gorontalo",name:"Gorontalo",color:Zr.gorontalo,coordinates:[[[121.5,1],[123.5,1],[123.5,0],[121.5,0],[121.5,1]]],statistics:{population:12e5,areaSize:"11,257.07 km",btsCount:220,coverage:"89.0%"}},sulbar:{id:"sulbar",name:"Sulawesi Barat",color:Zr.sulbar,coordinates:[[[118.5,-1.5],[120,-1.5],[120,-3.5],[118.5,-3.5],[118.5,-1.5]]],statistics:{population:14e5,areaSize:"16,787.18 km",btsCount:240,coverage:"85.0%"}},bali:{id:"bali",name:"Bali",color:Zr.bali,coordinates:[[[114.5,-8],[115.8,-8],[115.8,-8.9],[114.5,-8.9],[114.5,-8]]],statistics:{population:44e5,areaSize:"5,780.06 km",btsCount:620,coverage:"99.0%"}},ntb:{id:"ntb",name:"Nusa Tenggara Barat",color:Zr.ntb,coordinates:[[[115.5,-8],[119.5,-8],[119.5,-9.5],[115.5,-9.5],[115.5,-8]]],statistics:{population:53e5,areaSize:"18,572.32 km",btsCount:480,coverage:"91.0%"}},ntt:{id:"ntt",name:"Nusa Tenggara Timur",color:Zr.ntt,coordinates:[[[118.5,-8],[125.5,-8],[125.5,-11],[118.5,-11],[118.5,-8]]],statistics:{population:55e5,areaSize:"48,718.10 km",btsCount:420,coverage:"83.0%"}},maluku:{id:"maluku",name:"Maluku",color:Zr.maluku,coordinates:[[[125,-2],[132,-2],[132,-9],[125,-9],[125,-2]]],statistics:{population:18e5,areaSize:"46,914.03 km",btsCount:280,coverage:"80.0%"}},malut:{id:"malut",name:"Maluku Utara",color:Zr.malut,coordinates:[[[124,2.5],[129.5,2.5],[129.5,-1.5],[124,-1.5],[124,2.5]]],statistics:{population:13e5,areaSize:"31,982.50 km",btsCount:220,coverage:"78.0%"}},papua:{id:"papua",name:"Papua",color:Zr.papua,coordinates:[[[135,0],[141,0],[141,-9],[135,-9],[135,0]]],statistics:{population:34e5,areaSize:"319,036.05 km",btsCount:320,coverage:"65.0%"}},papbar:{id:"papbar",name:"Papua Barat",color:Zr.papbar,coordinates:[[[130,1.5],[135,1.5],[135,-4.5],[130,-4.5],[130,1.5]]],statistics:{population:11e5,areaSize:"102,955.15 km",btsCount:180,coverage:"62.0%"}}},MDe=()=>({type:"FeatureCollection",features:Object.values(FDe).map(t=>{var n,i,r,o;return{type:"Feature",properties:{id:t.id,name:t.name,color:t.color,population:((n=t.statistics)==null?void 0:n.population)||0,areaSize:((i=t.statistics)==null?void 0:i.areaSize)||"",btsCount:((r=t.statistics)==null?void 0:r.btsCount)||0,coverage:((o=t.statistics)==null?void 0:o.coverage)||""},geometry:{type:"Polygon",coordinates:t.coordinates}}})}),IDe=()=>{const e=I.useRef(null),t=I.useRef(null),n=I.useRef(null),i=I.useRef(null),r=I.useRef(null),[o,s]=I.useState(!1),[a,d]=I.useState([]),[h,m]=I.useState(!1),[v,w]=I.useState(!1),[R,L]=I.useState(!1),[O,z]=I.useState(!1),[$,U]=I.useState([]),[Y,X]=I.useState(!1),[q,ie]=I.useState(null),[re,J]=I.useState(!1),[ne,be]=I.useState([]),[ue,ve]=I.useState("ruasrekap"),[ce,Ie]=I.useState(!1),[Te,fe]=I.useState(null),[he,Re]=I.useState(!1),[De,Ye]=I.useState(null),[_e,Le]=I.useState(!1),[Oe,yt]=I.useState(!1),[xt,Vt]=I.useState(null),[Xt,en]=I.useState([]),[it,Lt]=I.useState(!1),[St,lt]=I.useState(null),[Tn,Mt]=I.useState([]),[$t,Pe]=I.useState(!0),[yn,wn]=I.useState(!0),[dn,An]=I.useState(null),[Cn,ai]=I.useState(null),[Gi,ri]=I.useState(null),[ji,Si]=I.useState(!0),[lr,Tt]=I.useState(!1),[Ji,Qi]=I.useState(null),[Vr,wo]=I.useState(!1),[ln,Nn]=I.useState(null),[qn,fr]=I.useState("national"),[us,pi]=I.useState("topology"),[oa,sa]=I.useState(),[Ys,zs]=I.useState(),[je,pe]=I.useState([{level:"national",name:"Indonesia"}]),[ge,ke]=I.useState(5),[Ne,Je]=I.useState(!1),[nt,ct]=I.useState(""),[Ue,Pt]=I.useState("info"),[Zt,Ct]=I.useState(""),[pn,$n]=I.useState([]),[Qn,Ii]=I.useState([]),[Wn,xi]=I.useState([]),[Fi,co]=I.useState(!1);I.useEffect(()=>{(async()=>{try{const We=await fetch("/joined_data.csv");if(!We.ok)throw new Error("Failed to load default data");const at=await We.text();await wr(at)}catch(We){console.error("Error loading default data:",We)}})()},[]),I.useEffect(()=>{(async()=>{const We=await kDe();L(We),We&&console.log("Kabupaten data loaded successfully")})()},[]),I.useEffect(()=>{(async()=>{try{const We=await fetch("/data/cap-1.csv");if(!We.ok)throw new Error("Failed to load capacity data");const ft=(await We.text()).split(`
`),Wt=ft[0].split(",").map(Et=>Et.replace(/"/g,"").trim()),ei=ft.slice(1).filter(Et=>Et.trim()).map(Et=>{const Bt=Et.match(/(".*?"|[^,]+)(?=\s*,|\s*$)/g)||[],wt={};return Wt.forEach((Gt,ui)=>{Bt[ui]&&(wt[Gt]=Bt[ui].replace(/^"|"$/g,"").trim())}),wt}).filter(Et=>Et.longitude&&Et.latitude);U(ei)}catch(We){console.error("Error loading capacity data:",We)}})()},[]),I.useEffect(()=>{(async()=>{try{const We=await fetch("/data/airports.json");if(!We.ok)throw new Error("Failed to load airports data");const at=await We.json();ie(at)}catch(We){console.error("Error loading airports data:",We)}})()},[]),I.useEffect(()=>{(async()=>{try{const We=await fetch("/data/list_sirkit_ref_202511101614.csv");if(!We.ok)throw new Error("Failed to load sirkit data");const ft=(await We.text()).split(`
`),Wt=ft[0].split(",").map(Et=>Et.replace(/"/g,"").trim()),ei=ft.slice(1).filter(Et=>Et.trim()).map(Et=>{const Bt=Et.match(/(".*?"|[^,]+)(?=\s*,|\s*$)/g)||[],wt={};return Wt.forEach((Gt,ui)=>{Bt[ui]&&(wt[Gt]=Bt[ui].replace(/^"|"$/g,"").trim())}),wt}).filter(Et=>Et.longitude&&Et.latitude);be(ei)}catch(We){console.error("Error loading sirkit data:",We)}})()},[]),I.useEffect(()=>{(async()=>{try{const We=await fetch("/data/multilayer_map.geojson");if(!We.ok)throw new Error("Failed to load multilayer map data");const at=await We.json();fe(at),console.log("Multilayer map data loaded:",at)}catch(We){console.error("Error loading multilayer map data:",We)}})()},[]),I.useEffect(()=>{(async()=>{try{const We=await fetch("/sigma-topology.json");if(!We.ok)throw new Error("Failed to load node edges data");const at=await We.json();Ye(at)}catch(We){console.error("Error loading node edges data:",We)}})()},[]);const[Rr,Li]=I.useState("tera-tera");I.useEffect(()=>{(async()=>{try{const We={"tera-tera":"/ruas-rekap/trunk_all_tera_tera_layer.json","tera-metro":"/ruas-rekap/trunk_all_tera_metro_layer.json","tera-swc":"/ruas-rekap/trunk_all_tera_swc_layer.json","tera-pevoice":"/ruas-rekap/trunk_all_tera_pevoice_layer.json","tera-pemobile":"/ruas-rekap/trunk_all_tera_pemobile_layer.json","tera-pehsi":"/ruas-rekap/trunk_all_tera_pehsi_layer.json","tera-pehdc":"/ruas-rekap/trunk_all_tera_pehdc_layer.json","tera-cgw":"/ruas-rekap/trunk_all_tera_cgw_layer.json",trunk_all_metro_metro:"/ruas-rekap/trunk_all_metro_metro_layer.json",trunk_all_metro_spine:"/ruas-rekap/trunk_all_metro_spine_layer.json",trunk_all_metro_dcn:"/ruas-rekap/trunk_all_metro_dcn_layer.json",trunk_all_metro_bras:"/ruas-rekap/trunk_all_metro_bras_layer.json",trunk_all_metro_cdn:"/ruas-rekap/trunk_all_metro_cdn_layer.json",trunk_all_metro_cndc:"/ruas-rekap/trunk_all_metro_cndc_layer.json",trunk_all_metro_wac:"/ruas-rekap/trunk_all_metro_wac_layer.json",trunk_all_metro_wag:"/ruas-rekap/trunk_all_metro_wag_layer.json",trunk_all_metro_pedatin:"/ruas-rekap/trunk_all_metro_pedatin_layer.json",trunk_all_metro_pehsi:"/ruas-rekap/trunk_all_metro_pehsi_layer.json",trunk_all_metro_pevoice:"/ruas-rekap/trunk_all_metro_pevoice_layer.json",trunk_all_metro_rantsel:"/ruas-rekap/trunk_all_metro_rantsel_layer.json",trunk_all_metro_twamp:"/ruas-rekap/trunk_all_metro_twamp_layer.json",trunk_all_metro_starlink:"/ruas-rekap/trunk_all_metro_starlink_layer.json",trunk_all_pe_spine:"/ruas-rekap/trunk_all_pe_spine_layer.json",trunk_all_pe_teradatin:"/ruas-rekap/trunk_all_pe_teradatin_layer.json",trunk_all_pe_cdn:"/ruas-rekap/trunk_all_pe_cdn_layer.json",trunk_all_pe_wac:"/ruas-rekap/trunk_all_pe_wac_layer.json",trunk_all_pe_wag:"/ruas-rekap/trunk_all_pe_wag_layer.json",trunk_all_pemobile_pemobile:"/ruas-rekap/trunk_all_pemobile_pemobile_layer.json",trunk_all_pemobile_metro:"/ruas-rekap/trunk_all_pemobile_metro_layer.json",trunk_all_pemobile_rantsel:"/ruas-rekap/trunk_all_pemobile_rantsel_layer.json",trunk_all_pemobile_it_agg:"/ruas-rekap/trunk_all_pemobile_it_agg_layer.json",trunk_all_pemobile_cps:"/ruas-rekap/trunk_all_pemobile_cps_layer.json",trunk_all_pemobile_blf:"/ruas-rekap/trunk_all_pemobile_blf_layer.json",trunk_all_pemobile_twamp:"/ruas-rekap/trunk_all_pemobile_twamp_layer.json",trunk_all_pehsi_swc:"/ruas-rekap/trunk_all_pehsi_swc_layer.json",trunk_all_pehsi_ebr:"/ruas-rekap/trunk_all_pehsi_ebr_layer.json",trunk_all_pehsi_lb:"/ruas-rekap/trunk_all_pehsi_lb_layer.json",trunk_all_pehsi_sig:"/ruas-rekap/trunk_all_pehsi_sig_layer.json",trunk_all_petransit_ebr:"/ruas-rekap/trunk_all_petransit_ebr_layer.json",trunk_all_me_bngtsel:"/ruas-rekap/trunk_all_me_bngtsel_layer.json",trunk_all_bngtsel_pehsi:"/ruas-rekap/trunk_all_bngtsel_pehsi_layer.json",trunk_all_bras_pehsi:"/ruas-rekap/trunk_all_bras_pehsi_layer.json",trunk_all_allot_pehsi:"/ruas-rekap/trunk_all_allot_pehsi_layer.json",trunk_all_nodeb_metro:"/ruas-rekap/trunk_all_nodeb_metro_layer.json",trunk_all_olt_metro:"/ruas-rekap/trunk_all_olt_metro_layer.json"},at=We[Rr]||We["tera-tera"],ft=await fetch(at);if(!ft.ok)throw new Error("Failed to load ruas rekap data");const Wt=await ft.json();if(Vt(Wt),Pe(!0),Wt!=null&&Wt.nodes&&Array.isArray(Wt.nodes)){const ei=Wt.nodes.map(Et=>Et.id);en(ei)}}catch(We){console.error("Error loading ruas rekap data:",We)}})()},[Rr]),I.useEffect(()=>{(async()=>{try{const We=await fetch("/ruas-rekap/trunk_all.json");if(!We.ok)throw new Error("Failed to load trunk_all.json for port data");const at=await We.json(),ft=new Map;at!=null&&at.nodes&&Array.isArray(at.nodes)&&at.nodes.forEach(Wt=>{Wt.id&&Wt.details&&Array.isArray(Wt.details)&&ft.set(Wt.id,Wt.details)}),at!=null&&at.edges&&Array.isArray(at.edges)&&at.edges.forEach(Wt=>{const ei=`edge_${Wt.id||Wt.source+"_"+Wt.target}`;Wt.details&&Array.isArray(Wt.details)&&ft.set(ei,Wt.details)}),An(ft),console.log("Loaded trunk_all.json port data for",ft.size,"nodes/edges")}catch(We){console.error("Error loading trunk_all.json for port data:",We)}})()},[]),I.useEffect(()=>{(async()=>{try{const We=await fetch("/ruas_rekap_sto.json");if(!We.ok)throw new Error("Failed to load ruas rekap STO data");const at=await We.json();if(lt(at),wn(!0),at!=null&&at.nodes&&Array.isArray(at.nodes)){const ft=at.nodes.map(Wt=>Wt.id);Mt(ft)}}catch(We){console.error("Error loading ruas rekap STO data:",We)}})()},[]),I.useEffect(()=>{h&&xt&&Oe&&n.current&&(Js(),$t&&Pe(!1))},[h,xt,Oe,Xt]),I.useEffect(()=>{h&&St&&it&&n.current&&(du(),yn&&wn(!1))},[h,St,it,Tn]),I.useEffect(()=>{if(e.current)return setTimeout(()=>{e.current&&(n.current=new ja.Map({container:e.current,style:"https://api.maptiler.com/maps/streets-v2/style.json?key=4Iyrc6TBGKphNJNy3iTH",center:[117.4,-.8],zoom:5}),n.current.addControl(new ja.NavigationControl,"top-right"),n.current.addControl(new ja.FullscreenControl,"top-right"),n.current.on("load",()=>{var We;m(!0);const bt=((We=n.current)==null?void 0:We.getZoom())||5;console.log("Map Loaded - Initial Zoom Level:",bt.toFixed(2)),window.getMapZoom=()=>{var ft;const at=(ft=n.current)==null?void 0:ft.getZoom();return console.log("Current Map Zoom:",at==null?void 0:at.toFixed(2)),at}}))},0),()=>{var bt;(bt=n.current)==null||bt.remove()}},[]);const xr=bt=>{if(!(!n.current||!h))try{["clusters","cluster-count","unclustered-point"].forEach(at=>{n.current.getLayer(at)&&n.current.removeLayer(at)}),n.current.getSource("nodes")&&n.current.removeSource("nodes")}catch{alert("Terjadi kesalahan saat memperbarui peta. Silakan coba lagi.")}},wr=async bt=>{try{const We=await DDe(bt);d(We.nodes)}catch{alert("Gagal memproses file CSV. Pastikan format file sudah benar dan memiliki kolom: node, latitude, longitude")}},No=()=>{if(n.current)try{const bt=MDe();n.current.addSource("provinces",{type:"geojson",data:bt}),n.current.on("click","provinces-fill",We=>{if(We.features&&We.features.length>0){const ft=We.features[0].properties,Wt=We.lngLat;new ja.Popup().setLngLat(Wt).setHTML(`
              <div style="font-size: 12px; padding: 8px;">
                <strong style="font-size: 14px;">${(ft==null?void 0:ft.name)||"Unknown"}</strong><br/>
                <hr style="margin: 8px 0; border: none; border-top: 1px solid #ddd;"/>
                <strong>Population:</strong> ${((ft==null?void 0:ft.population)||0).toLocaleString()}<br/>
                <strong>Area Size:</strong> ${(ft==null?void 0:ft.areaSize)||"-"}<br/>
                <strong>BTS Count:</strong> ${(ft==null?void 0:ft.btsCount)||0}<br/>
                <strong>Coverage:</strong> ${(ft==null?void 0:ft.coverage)||"-"}
              </div>
            `).addTo(n.current)}}),n.current.on("mouseenter","provinces-fill",We=>{var at;We.features&&We.features.length>0&&(n.current.setFilter("provinces-hover",["==","id",(at=We.features[0].properties)==null?void 0:at.id]),n.current.getCanvas().style.cursor="pointer")}),n.current.on("mouseleave","provinces-fill",()=>{n.current.setFilter("provinces-hover",["==","id",""]),n.current.getCanvas().style.cursor=""}),n.current.flyTo({center:[118,-2],zoom:4.5,duration:2e3})}catch(bt){alert(`Error adding province layer: ${bt}`)}},io=()=>{const bt=["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F7DC6F","#BB8FCE","#85C1E2","#F8B739","#52BE80","#EC7063","#AF7AC5","#5DADE2","#48C9B0","#F4D03F","#EB984E","#DC7633","#CA6F1E","#BA4A00","#A04000","#7D3C98","#6C3483","#5B2C6F","#4A235A","#76448A","#633974","#1ABC9C","#16A085","#138D75","#117A65","#0E6655","#0B5345","#186A3B","#E74C3C","#C0392B","#8E44AD","#9B59B6","#2980B9","#3498DB","#1ABC9C","#16A085","#27AE60","#2ECC71","#F39C12","#E67E22","#D35400","#E74C3C","#C0392B","#ECF0F1","#BDC3C7"];return bt[Math.floor(Math.random()*bt.length)]},Xr=()=>{if(n.current&&!(!R||Object.keys(KS).length===0))try{const bt=Object.values(KS).map(We=>({type:"Feature",properties:{id:We.id,name:We.name,provinsi:We.provinsi,type:We.type,population:We.statistics.population,areaSize:We.statistics.areaSize,btsCount:We.statistics.btsCount,coverage:We.statistics.coverage,color:io()},geometry:We.coordinates}));n.current.getLayer("kabupaten-fill")&&n.current.removeLayer("kabupaten-fill"),n.current.getLayer("kabupaten-outline")&&n.current.removeLayer("kabupaten-outline"),n.current.getLayer("kabupaten-hover")&&n.current.removeLayer("kabupaten-hover"),n.current.getSource("kabupaten")&&n.current.removeSource("kabupaten"),n.current.addSource("kabupaten",{type:"geojson",data:{type:"FeatureCollection",features:bt}}),n.current.addLayer({id:"kabupaten-fill",type:"fill",source:"kabupaten",paint:{"fill-color":["get","color"],"fill-opacity":.5}}),n.current.addLayer({id:"kabupaten-outline",type:"line",source:"kabupaten",paint:{"line-color":"#FFFFFF","line-width":1.5}}),n.current.addLayer({id:"kabupaten-hover",type:"fill",source:"kabupaten",paint:{"fill-color":["get","color"],"fill-opacity":.7},filter:["==","id",""]}),n.current.on("click","kabupaten-fill",We=>{if(We.features&&We.features.length>0){const ft=We.features[0].properties,Wt=We.lngLat;new ja.Popup().setLngLat(Wt).setHTML(`
              <div style="font-size: 12px; padding: 8px;">
                <strong style="font-size: 14px;">${(ft==null?void 0:ft.type)||""} ${(ft==null?void 0:ft.name)||"Unknown"}</strong><br/>
                <strong>Provinsi:</strong> ${(ft==null?void 0:ft.provinsi)||"-"}<br/>
                <hr style="margin: 8px 0; border: none; border-top: 1px solid #ddd;"/>
                <strong>Population:</strong> ${((ft==null?void 0:ft.population)||0).toLocaleString()}<br/>
                <strong>Area Size:</strong> ${(ft==null?void 0:ft.areaSize)||"-"}<br/>
                <strong>BTS Count:</strong> ${(ft==null?void 0:ft.btsCount)||0}<br/>
                <strong>Coverage:</strong> ${(ft==null?void 0:ft.coverage)||"-"}
              </div>
            `).addTo(n.current)}}),n.current.on("mouseenter","kabupaten-fill",We=>{var at;We.features&&We.features.length>0&&(n.current.setFilter("kabupaten-hover",["==","id",(at=We.features[0].properties)==null?void 0:at.id]),n.current.getCanvas().style.cursor="pointer")}),n.current.on("mouseleave","kabupaten-fill",()=>{n.current.setFilter("kabupaten-hover",["==","id",""]),n.current.getCanvas().style.cursor=""})}catch(bt){alert(`Error adding kabupaten layer: ${bt}`)}},dl=()=>{if(!n.current)return;const bt=!v;if(w(bt),bt&&!n.current.getLayer("kabupaten-fill"))Xr();else{const We=bt?"visible":"none";n.current.getLayer("kabupaten-fill")&&n.current.setLayoutProperty("kabupaten-fill","visibility",We),n.current.getLayer("kabupaten-outline")&&n.current.setLayoutProperty("kabupaten-outline","visibility",We),n.current.getLayer("kabupaten-hover")&&n.current.setLayoutProperty("kabupaten-hover","visibility",We)}},er=bt=>{try{return{type:"Polygon",coordinates:[bt.replace(/^POLYGON\s*\(\(/i,"").replace(/\)\)$/,"").trim().split(",").map(ft=>{const[Wt,ei]=ft.trim().split(/\s+/);return[parseFloat(Wt),parseFloat(ei)]})]}}catch{return null}},Bo=()=>{if(!(!n.current||$.length===0))try{n.current.getLayer("capacity-points")&&n.current.removeLayer("capacity-points"),n.current.getLayer("capacity-lines")&&n.current.removeLayer("capacity-lines"),n.current.getLayer("capacity-lines-glow")&&n.current.removeLayer("capacity-lines-glow"),n.current.getLayer("capacity-boundaries-fill")&&n.current.removeLayer("capacity-boundaries-fill"),n.current.getLayer("capacity-boundaries-outline")&&n.current.removeLayer("capacity-boundaries-outline"),n.current.getLayer("capacity-boundaries-hover")&&n.current.removeLayer("capacity-boundaries-hover"),n.current.getSource("capacity")&&n.current.removeSource("capacity"),n.current.getSource("capacity-lines")&&n.current.removeSource("capacity-lines"),n.current.getSource("capacity-boundaries")&&n.current.removeSource("capacity-boundaries");const bt=new Map;$.forEach(Bt=>{const wt=Bt.code_area||Bt.sto;wt&&Bt.boundary&&!bt.has(wt)&&bt.set(wt,Bt)});const We=Array.from(bt.values()).map(Bt=>{const wt=er(Bt.boundary);return wt?{type:"Feature",properties:{id:Bt.code_area||Bt.sto,name:Bt.name_area||Bt.sto_l||"N/A",type:Bt.type_area||"STO",sto:Bt.sto||"N/A",witel:Bt.witel||"N/A",reg:Bt.reg||"N/A",color:io()},geometry:wt}:null}).filter(Bt=>Bt!==null);We.length>0&&(n.current.addSource("capacity-boundaries",{type:"geojson",data:{type:"FeatureCollection",features:We}}),n.current.addLayer({id:"capacity-boundaries-fill",type:"fill",source:"capacity-boundaries",paint:{"fill-color":["get","color"],"fill-opacity":.4}}),n.current.addLayer({id:"capacity-boundaries-outline",type:"line",source:"capacity-boundaries",paint:{"line-color":"#FF6B35","line-width":2}}),n.current.addLayer({id:"capacity-boundaries-hover",type:"fill",source:"capacity-boundaries",paint:{"fill-color":["get","color"],"fill-opacity":.6},filter:["==","id",""]}),n.current.on("click","capacity-boundaries-fill",Bt=>{if(Bt.features&&Bt.features.length>0){const Gt=Bt.features[0].properties,ui=Bt.lngLat,Gn=$.filter(Ut=>(Ut.code_area||Ut.sto)===(Gt==null?void 0:Gt.id)).length;new ja.Popup().setLngLat(ui).setHTML(`
                <div style="font-size: 12px; padding: 8px;">
                  <strong style="font-size: 14px; color: #FF6B35;">${(Gt==null?void 0:Gt.type)||""} ${(Gt==null?void 0:Gt.name)||"Unknown"}</strong><br/>
                  <hr style="margin: 8px 0; border: none; border-top: 1px solid #ddd;"/>
                  <strong>STO:</strong> ${(Gt==null?void 0:Gt.sto)||"-"}<br/>
                  <strong>Witel:</strong> ${(Gt==null?void 0:Gt.witel)||"-"}<br/>
                  <strong>Region:</strong> ${(Gt==null?void 0:Gt.reg)||"-"}<br/>
                  <strong>Equipment Count:</strong> ${Gn}<br/>
                </div>
              `).addTo(n.current)}}),n.current.on("mouseenter","capacity-boundaries-fill",Bt=>{var wt;Bt.features&&Bt.features.length>0&&(n.current.setFilter("capacity-boundaries-hover",["==","id",(wt=Bt.features[0].properties)==null?void 0:wt.id]),n.current.getCanvas().style.cursor="pointer")}),n.current.on("mouseleave","capacity-boundaries-fill",()=>{n.current.setFilter("capacity-boundaries-hover",["==","id",""]),n.current.getCanvas().style.cursor=""}));const at=$.map(Bt=>({coords:[parseFloat(Bt.longitude),parseFloat(Bt.latitude)],hostname:Bt.hostname||"N/A",sto:Bt.sto||"N/A",witel:Bt.witel||"N/A"})),ft=new Map;at.forEach(Bt=>{const wt=Bt.sto;ft.has(wt)||ft.set(wt,[]),ft.get(wt).push(Bt)});const Wt=[],ei=new Set;ft.forEach((Bt,wt)=>{if(Bt.length>1){const Gt=[...Bt].sort((ui,Gn)=>ui.coords[0]-Gn.coords[0]);for(let ui=0;ui<Gt.length-1;ui++){const Gn=Gt[ui],Ut=Gt[ui+1],Ri=[Gn.hostname,Ut.hostname].sort().join("|");ei.has(Ri)||(ei.add(Ri),Wt.push({type:"Feature",properties:{from:Gn.hostname,to:Ut.hostname,sto:wt},geometry:{type:"LineString",coordinates:[Gn.coords,Ut.coords]}}))}}}),at.forEach((Bt,wt)=>{const Gt=at.map((Gn,Ut)=>{if(wt===Ut)return null;const Ri=Bt.coords[0]-Gn.coords[0],Ze=Bt.coords[1]-Gn.coords[1],_t=Math.sqrt(Ri*Ri+Ze*Ze);return{index:Ut,distance:_t,point:Gn}}).filter(Gn=>Gn!==null).sort((Gn,Ut)=>Gn.distance-Ut.distance),ui=Math.min(3,Gt.length);for(let Gn=0;Gn<ui;Gn++){const Ut=Gt[Gn];if(Ut){const Ri=[Bt.hostname,Ut.point.hostname].sort().join("|");ei.has(Ri)||(ei.add(Ri),Wt.push({type:"Feature",properties:{from:Bt.hostname,to:Ut.point.hostname,sto:Bt.sto===Ut.point.sto?Bt.sto:"cross-sto"},geometry:{type:"LineString",coordinates:[Bt.coords,Ut.point.coords]}}))}}});const Et=$.map(Bt=>({type:"Feature",properties:{hostname:Bt.hostname||"N/A",manufacture:Bt.manufacture||"N/A",version:Bt.version||"N/A",sto:Bt.sto||"N/A",sto_l:Bt.sto_l||"N/A",witel:Bt.witel||"N/A",reg:Bt.reg||"N/A",tipe_card:Bt.tipe_card||"N/A",cap:Bt.cap||"N/A",port_used:Bt.port_used||"0",port_idle:Bt.port_idle||"0",platform:Bt.platform||"N/A"},geometry:{type:"Point",coordinates:[parseFloat(Bt.longitude),parseFloat(Bt.latitude)]}}));if(console.log(`Created ${Wt.length} line connections`),n.current.addSource("capacity",{type:"geojson",data:{type:"FeatureCollection",features:Et}}),n.current.addLayer({id:"capacity-points",type:"circle",source:"capacity",paint:{"circle-radius":3,"circle-color":"#FF6B35","circle-stroke-width":1,"circle-stroke-color":"#FFFFFF","circle-opacity":.9}}),n.current.on("click","capacity-points",Bt=>{if(Bt.features&&Bt.features.length>0){const Gt=Bt.features[0].properties,ui=Bt.lngLat;new ja.Popup().setLngLat(ui).setHTML(`
              <div style="font-size: 12px; padding: 8px; max-width: 280px;">
                <strong style="font-size: 14px; color: #FF6B35;"> ${(Gt==null?void 0:Gt.hostname)||"Node"}</strong><br/>
                <hr style="margin: 8px 0; border: none; border-top: 1px solid #ddd;"/>
                <div style="display: grid; grid-template-columns: auto 1fr; gap: 4px 8px;">
                  <strong>Manufacture:</strong> <span>${(Gt==null?void 0:Gt.manufacture)||"N/A"}</span>
                  <strong>Version:</strong> <span>${(Gt==null?void 0:Gt.version)||"N/A"}</span>
                  <strong>Platform:</strong> <span>${(Gt==null?void 0:Gt.platform)||"N/A"}</span>
                  <strong>STO:</strong> <span>${(Gt==null?void 0:Gt.sto_l)||(Gt==null?void 0:Gt.sto)||"N/A"}</span>
                  <strong>Witel:</strong> <span>${(Gt==null?void 0:Gt.witel)||"N/A"}</span>
                  <strong>Region:</strong> <span>${(Gt==null?void 0:Gt.reg)||"N/A"}</span>
                  <strong>Capacity:</strong> <span>${(Gt==null?void 0:Gt.cap)||"N/A"}</span>
                  <strong>Port Used:</strong> <span style="color: #E74C3C;">${(Gt==null?void 0:Gt.port_used)||"0"}</span>
                  <strong>Port Idle:</strong> <span style="color: #2ECC71;">${(Gt==null?void 0:Gt.port_idle)||"0"}</span>
                </div>
              </div>
            `).addTo(n.current);const Gn=(Gt==null?void 0:Gt.hostname)||"Node";Qi({from:Gn,to:"Network",description:`${Gn} - Capacity Node`,bandwidth_mbps:1e4,utilization:70+Math.random()*20,latency:5+Math.random()*10,packetLoss:Math.random()*.1,linkCount:1,totalCapacity:"10G",type:"CAPACITY",nodeData:Gt,clickedType:"node"}),Tt(!0),Nn({from:Gn,to:"Network",nodeData:Gt})}}),n.current.on("click","capacity-lines",Bt=>{if(Bt.features&&Bt.features.length>0){const Gt=Bt.features[0].properties,ui=(Gt==null?void 0:Gt.from)||"Node A",Gn=(Gt==null?void 0:Gt.to)||"Node B";Qi({from:ui,to:Gn,description:`${ui}  ${Gn}`,bandwidth_mbps:1e4,utilization:70+Math.random()*20,latency:5+Math.random()*10,packetLoss:Math.random()*.1,linkCount:2,totalCapacity:"10G",type:"L2_AGGREGATION",nodeData:Gt,clickedType:"edge"}),Tt(!0),Nn({from:ui,to:Gn})}}),n.current.on("mouseenter","capacity-points",()=>{n.current.getCanvas().style.cursor="pointer"}),n.current.on("mouseleave","capacity-points",()=>{n.current.getCanvas().style.cursor=""}),at.length>0){const Bt=at.map(ui=>ui.coords[0]),wt=at.map(ui=>ui.coords[1]),Gt={minLng:Math.min(...Bt),maxLng:Math.max(...Bt),minLat:Math.min(...wt),maxLat:Math.max(...wt)};n.current.fitBounds([[Gt.minLng,Gt.minLat],[Gt.maxLng,Gt.maxLat]],{padding:50,duration:1e3})}}catch(bt){alert(`Error adding capacity layer: ${bt}`)}},$c=()=>{if(!n.current)return;const bt=!O;if(z(bt),bt&&!n.current.getLayer("capacity-points"))Bo();else{const We=bt?"visible":"none";n.current.getLayer("capacity-points")&&n.current.setLayoutProperty("capacity-points","visibility",We),n.current.getLayer("capacity-lines")&&n.current.setLayoutProperty("capacity-lines","visibility",We),n.current.getLayer("capacity-lines-glow")&&n.current.setLayoutProperty("capacity-lines-glow","visibility",We),n.current.getLayer("capacity-boundaries-fill")&&n.current.setLayoutProperty("capacity-boundaries-fill","visibility",We),n.current.getLayer("capacity-boundaries-outline")&&n.current.setLayoutProperty("capacity-boundaries-outline","visibility",We),n.current.getLayer("capacity-boundaries-hover")&&n.current.setLayoutProperty("capacity-boundaries-hover","visibility",We)}},Xs=()=>{if(!(!n.current||ne.length===0))try{["sirkit-points","sirkit-boundaries-fill","sirkit-boundaries-outline","sirkit-boundaries-hover"].forEach(Wt=>{n.current.getLayer(Wt)&&n.current.removeLayer(Wt)}),n.current.getSource("sirkit")&&n.current.removeSource("sirkit"),n.current.getSource("sirkit-boundaries")&&n.current.removeSource("sirkit-boundaries");const We=new Map;ne.forEach(Wt=>{const ei=Wt.sto||"unknown";ei&&Wt.boundary&&!We.has(ei)&&We.set(ei,Wt)});const at=Array.from(We.values()).map(Wt=>{const ei=er(Wt.boundary);return ei?{type:"Feature",properties:{id:Wt.sto||"unknown",name:Wt.sto_l||Wt.sto||"N/A",witel:Wt.witel||"N/A",reg:Wt.reg||"N/A",types:Wt.types||"N/A",platform:Wt.platform||"N/A",color:io()},geometry:ei}:null}).filter(Wt=>Wt!==null);at.length>0&&(n.current.addSource("sirkit-boundaries",{type:"geojson",data:{type:"FeatureCollection",features:at}}),n.current.addLayer({id:"sirkit-boundaries-fill",type:"fill",source:"sirkit-boundaries",paint:{"fill-color":["get","color"],"fill-opacity":.3}}),n.current.addLayer({id:"sirkit-boundaries-outline",type:"line",source:"sirkit-boundaries",paint:{"line-color":"#4ECDC4","line-width":2}}),n.current.addLayer({id:"sirkit-boundaries-hover",type:"fill",source:"sirkit-boundaries",paint:{"fill-color":["get","color"],"fill-opacity":.5},filter:["==","id",""]}),n.current.on("click","sirkit-boundaries-fill",Wt=>{if(Wt.features&&Wt.features.length>0){const Et=Wt.features[0].properties,Bt=Wt.lngLat,wt=ne.filter(Gt=>Gt.sto===(Et==null?void 0:Et.id)).length;new ja.Popup().setLngLat(Bt).setHTML(`
                <div style="font-size: 12px; padding: 8px;">
                  <strong style="font-size: 14px; color: #4ECDC4;">STO ${(Et==null?void 0:Et.name)||"Unknown"}</strong><br/>
                  <hr style="margin: 8px 0; border: none; border-top: 1px solid #ddd;"/>
                  <strong>Witel:</strong> ${(Et==null?void 0:Et.witel)||"-"}<br/>
                  <strong>Region:</strong> ${(Et==null?void 0:Et.reg)||"-"}<br/>
                  <strong>Type:</strong> ${(Et==null?void 0:Et.types)||"-"}<br/>
                  <strong>Platform:</strong> ${(Et==null?void 0:Et.platform)||"-"}<br/>
                  <strong>Circuit Count:</strong> ${wt}<br/>
                </div>
              `).addTo(n.current)}}),n.current.on("mouseenter","sirkit-boundaries-fill",Wt=>{var ei;Wt.features&&Wt.features.length>0&&(n.current.setFilter("sirkit-boundaries-hover",["==","id",(ei=Wt.features[0].properties)==null?void 0:ei.id]),n.current.getCanvas().style.cursor="pointer")}),n.current.on("mouseleave","sirkit-boundaries-fill",()=>{n.current.setFilter("sirkit-boundaries-hover",["==","id",""]),n.current.getCanvas().style.cursor=""}));const ft=ne.map(Wt=>({type:"Feature",properties:{node:Wt.node||"N/A",sto:Wt.sto||"N/A",sto_l:Wt.sto_l||"N/A",witel:Wt.witel||"N/A",reg:Wt.reg||"N/A",types:Wt.types||"N/A",platform:Wt.platform||"N/A",sap_descp:Wt.sap_descp||"N/A",ipadd_v4:Wt.ipadd_v4||"N/A",me_akses:Wt.me_akses||"N/A",oltname:Wt.oltname||"N/A",manufacture:Wt.manufacture||"N/A"},geometry:{type:"Point",coordinates:[parseFloat(Wt.longitude),parseFloat(Wt.latitude)]}}));n.current.addSource("sirkit",{type:"geojson",data:{type:"FeatureCollection",features:ft}}),n.current.addLayer({id:"sirkit-points",type:"circle",source:"sirkit",paint:{"circle-radius":8,"circle-color":"#4ECDC4","circle-stroke-width":2,"circle-stroke-color":"#FFFFFF","circle-opacity":.9}}),n.current.on("click","sirkit-points",Wt=>{if(Wt.features&&Wt.features.length>0){const Et=Wt.features[0].properties,Bt=(Et==null?void 0:Et.node)||(Et==null?void 0:Et.hostname)||"Node";Qi({from:Bt,to:"Network",description:`${Bt} - Sirkit Node`,bandwidth_mbps:1e4,utilization:70+Math.random()*20,latency:5+Math.random()*10,packetLoss:Math.random()*.1,linkCount:1,totalCapacity:"10G",type:"SIRKIT",nodeData:Et,clickedType:"node"}),Tt(!0),Nn({from:Bt,to:"Network",nodeData:Et})}}),n.current.on("mouseenter","sirkit-points",()=>{n.current.getCanvas().style.cursor="pointer"}),n.current.on("mouseleave","sirkit-points",()=>{n.current.getCanvas().style.cursor=""})}catch(bt){alert(`Error adding sirkit layer: ${bt}`)}},Mo=()=>{if(!n.current)return;const bt=!re;if(J(bt),bt&&!n.current.getLayer("sirkit-points"))Xs();else{const We=bt?"visible":"none";n.current.getLayer("sirkit-points")&&n.current.setLayoutProperty("sirkit-points","visibility",We),n.current.getLayer("sirkit-boundaries-fill")&&n.current.setLayoutProperty("sirkit-boundaries-fill","visibility",We),n.current.getLayer("sirkit-boundaries-outline")&&n.current.setLayoutProperty("sirkit-boundaries-outline","visibility",We),n.current.getLayer("sirkit-boundaries-hover")&&n.current.setLayoutProperty("sirkit-boundaries-hover","visibility",We)}},Gl=(bt,We,at,ft,Wt=.3)=>{const ei=[],Bt=(bt+at)/2,wt=(We+ft)/2,Gt=at-bt,ui=ft-We,Gn=Math.sqrt(Gt*Gt+ui*ui),Ut=-ui/Gn,Ri=Gt/Gn,Ze=Gn*Wt,_t=Bt+Ut*Ze,dt=wt+Ri*Ze;for(let vt=0;vt<=20;vt++){const Un=vt/20,Zn=1-Un,Sn=Zn*Zn*bt+2*Zn*Un*_t+Un*Un*at,Ai=Zn*Zn*We+2*Zn*Un*dt+Un*Un*ft;ei.push([Sn,Ai])}return ei},Js=()=>{if(!(!n.current||!xt))try{["ruasrekap-points-hitarea","ruasrekap-points","ruasrekap-lines","ruasrekap-lines-glow"].forEach(Ze=>{n.current.getLayer(Ze)&&n.current.removeLayer(Ze)}),n.current.getSource("ruasrekap")&&n.current.removeSource("ruasrekap");const We=xt.nodes.filter(Ze=>Xt.includes(Ze.id)),at=new Set(We.map(Ze=>Ze.id)),ft=[];xt.edges&&Array.isArray(xt.edges)?xt.edges.forEach(Ze=>{if(at.has(Ze.source)&&at.has(Ze.target)){const _t=Gl(Ze.source_lon,Ze.source_lat,Ze.target_lon,Ze.target_lat,.2),dt=Ze.avg_utilization||Ze.utilization||0;let vt="normal";if(Ze.severity){const Un=Ze.severity.toLowerCase();Un==="critical"?vt="critical":Un==="warning"?vt="warning":vt="normal"}else dt>=85?vt="critical":dt>=41?vt="warning":vt="normal";ft.length<3&&console.log("Creating edge feature:",{id:Ze.id,utilization:dt,originalSeverity:Ze.severity,normalizedSeverity:vt,source:Ze.source,target:Ze.target}),ft.push({type:"Feature",properties:{id:Ze.id||Ze.ruas_list||`${Ze.source}_to_${Ze.target}`,ruas:Ze.ruas_list||"N/A",source:Ze.source,target:Ze.target,source_label:Ze.source_label||Ze.source,target_label:Ze.target_label||Ze.target,capacity:Ze.total_capacity||Ze.capacity||0,layer:Ze.layer_list||Ze.layer||"N/A",traffic_in_log:Ze.traffic_in_log||0,traffic_out_log:Ze.traffic_out_log||0,traffic_in_psk:Ze.traffic_in_psk||0,traffic_out_psk:Ze.traffic_out_psk||0,utilization:dt,link_count:Ze.link_count||1,severity:vt,details:JSON.stringify(Ze.details||[])},geometry:{type:"LineString",coordinates:_t}})}}):We.forEach(Ze=>{Ze.topology&&Array.isArray(Ze.topology)&&Ze.topology.forEach(_t=>{if(at.has(_t.source)&&at.has(_t.target)){const dt=Gl(_t.source_lon,_t.source_lat,_t.target_lon,_t.target_lat,.2),vt=_t.utilization||0;let Un="normal";if(_t.severity){const Zn=_t.severity.toLowerCase();Zn==="critical"?Un="critical":Zn==="warning"?Un="warning":Un="normal"}else vt>=85?Un="critical":vt>=41?Un="warning":Un="normal";ft.push({type:"Feature",properties:{id:_t.ruas||`${_t.source}_to_${_t.target}`,ruas:_t.ruas||"N/A",source:_t.source,target:_t.target,capacity:_t.capacity||0,layer:_t.layer||"N/A",traffic_in_log:_t.traffic_in_log||0,traffic_out_log:_t.traffic_out_log||0,traffic_in_psk:_t.traffic_in_psk||0,traffic_out_psk:_t.traffic_out_psk||0,utilization:vt,severity:Un,details:JSON.stringify([])},geometry:{type:"LineString",coordinates:dt}})}})});const Wt=We.map(Ze=>({type:"Feature",properties:{id:Ze.id,label:Ze.label,size:Ze.size,layer:Ze.layer,platform:Ze.platform,reg:Ze.reg,witel:Ze.witel,types:Ze.types,details:JSON.stringify(Ze.details||[])},geometry:{type:"Point",coordinates:[Ze.x,Ze.y]}})),ei=[...ft,...Wt],Et={normal:0,warning:0,critical:0};ft.forEach(Ze=>{const _t=Ze.properties.severity;_t==="normal"?Et.normal++:_t==="warning"?Et.warning++:_t==="critical"&&Et.critical++}),console.log("Ruas Rekap Layer - Severity Distribution:",Et),console.log("Total edges:",ft.length),n.current.addSource("ruasrekap",{type:"geojson",data:{type:"FeatureCollection",features:ei}});const wt={"tera-tera":"#3B82F6","tera-metro":"#10B981","tera-swc":"#F59E0B","tera-pevoice":"#8B5CF6","tera-pemobile":"#EC4899","tera-pehsi":"#14B8A6","tera-pehdc":"#F97316","tera-cgw":"#6366F1",trunk_all_metro_metro:"#06B6D4",trunk_all_metro_spine:"#8B5CF6",trunk_all_metro_dcn:"#EC4899",trunk_all_metro_bras:"#F59E0B",trunk_all_metro_cdn:"#10B981",trunk_all_metro_cndc:"#EF4444",trunk_all_metro_wac:"#84CC16",trunk_all_metro_wag:"#A855F7",trunk_all_metro_pedatin:"#F43F5E",trunk_all_metro_pehsi:"#0EA5E9",trunk_all_metro_pevoice:"#22C55E",trunk_all_metro_rantsel:"#14B8A6",trunk_all_metro_twamp:"#F97316",trunk_all_metro_starlink:"#6366F1",trunk_all_pe_spine:"#1E3A8A",trunk_all_pe_teradatin:"#065F46",trunk_all_pe_cdn:"#78350F",trunk_all_pe_wac:"#7C3AED",trunk_all_pe_wag:"#BE185D",trunk_all_pemobile_pemobile:"#0F766E",trunk_all_pemobile_metro:"#1E40AF",trunk_all_pemobile_rantsel:"#9A3412",trunk_all_pemobile_it_agg:"#7F1D1D",trunk_all_pemobile_cps:"#4D7C0F",trunk_all_pemobile_blf:"#4338CA",trunk_all_pemobile_twamp:"#A16207",trunk_all_pehsi_swc:"#3A0CA3",trunk_all_pehsi_ebr:"#7C2D12",trunk_all_pehsi_lb:"#0369A1",trunk_all_pehsi_sig:"#15803D",trunk_all_petransit_ebr:"#6B21A8",trunk_all_me_bngtsel:"#9F1239",trunk_all_bngtsel_pehsi:"#0C4A6E",trunk_all_bras_pehsi:"#B45309",trunk_all_allot_pehsi:"#14532D",trunk_all_nodeb_metro:"#3F6212",trunk_all_olt_metro:"#701A75"}[Rr]||"#3B82F6";n.current.addLayer({id:"ruasrekap-lines-glow",type:"line",source:"ruasrekap",filter:["==",["geometry-type"],"LineString"],paint:{"line-color":["match",["get","severity"],"normal","#10B981","warning","#F59E0B","critical","#EF4444",wt],"line-width":10,"line-opacity":.1,"line-blur":2}}),n.current.addLayer({id:"ruasrekap-lines",type:"line",source:"ruasrekap",filter:["==",["geometry-type"],"LineString"],paint:{"line-color":["match",["get","severity"],"normal","#10B981","warning","#F59E0B","critical","#EF4444",wt],"line-width":2,"line-opacity":.9}}),n.current.addLayer({id:"ruasrekap-points",type:"circle",source:"ruasrekap",filter:["==",["geometry-type"],"Point"],paint:{"circle-radius":["interpolate",["linear"],["zoom"],5,["*",["get","size"],1],10,["*",["get","size"],2]],"circle-color":wt,"circle-stroke-width":2,"circle-stroke-color":"#FFFFFF","circle-opacity":.9}}),n.current.addLayer({id:"ruasrekap-points-hitarea",type:"circle",source:"ruasrekap",filter:["==",["geometry-type"],"Point"],paint:{"circle-radius":["interpolate",["linear"],["zoom"],5,["*",["get","size"],5],10,["*",["get","size"],10]],"circle-color":wt,"circle-opacity":0}});const Gt=Ze=>{var _t;if(Ze.preventDefault(),Ze.originalEvent&&Ze.originalEvent.stopPropagation(),Ze.features&&Ze.features.length>0){const vt=Ze.features[0].properties,Un=vt==null?void 0:vt.id,Zn=(vt==null?void 0:vt.label)||(vt==null?void 0:vt.id)||"Node";let Sn=[];try{vt!=null&&vt.details&&typeof vt.details=="string"&&(Sn=JSON.parse(vt.details))}catch{}if(Sn.length===0&&(xt!=null&&xt.nodes)){const Jt=xt.nodes.find(Xn=>Xn.id===Un);Jt!=null&&Jt.details&&Array.isArray(Jt.details)&&(Sn=Jt.details,console.log("Node details loaded from ruasRekapData:",Sn.length,"items"))}if(Sn.length>0&&dn){const Jt=dn.get(Un);Jt&&Jt.length>0&&(Sn=Sn.map((Xn,Or)=>{const Io=Jt.find(ua=>ua.ruas===Xn.ruas)||Jt[Or];return Io?{...Xn,source_port_used:Io.source_port_used,source_port_count:Io.source_port_count,source_port_idle:Io.source_port_idle,target_port_used:Io.target_port_used,target_port_count:Io.target_port_count,target_port_idle:Io.target_port_idle}:Xn}),console.log("Merged port data from trunk_all.json for node:",Un))}const Ai=((_t=xt==null?void 0:xt.edges)==null?void 0:_t.filter(Jt=>Jt.source===Un||Jt.target===Un))||[],dr=Ze.lngLat;if(new ja.Popup().setLngLat(dr).setHTML(`
              <div style="font-size: 12px; padding: 8px; max-width: 280px;">
                <strong style="font-size: 14px; color: #3B82F6;"> ${Zn}</strong><br/>
                <hr style="margin: 8px 0; border: none; border-top: 1px solid #ddd;"/>
                <div style="display: grid; grid-template-columns: auto 1fr; gap: 4px 8px;">
                  <strong>Node ID:</strong> <span>${(vt==null?void 0:vt.id)||"N/A"}</span>
                  <strong>Layer:</strong> <span>${(vt==null?void 0:vt.layer)||"N/A"}</span>
                  <strong>Platform:</strong> <span>${(vt==null?void 0:vt.platform)||"N/A"}</span>
                  <strong>Region:</strong> <span>REG ${(vt==null?void 0:vt.reg)||"N/A"}</span>
                  <strong>Witel:</strong> <span>${(vt==null?void 0:vt.witel)||"N/A"}</span>
                </div>
                <div style="margin-top: 8px; padding: 6px; background: rgba(59, 130, 246, 0.1); border-radius: 4px; font-size: 11px; color: #3B82F6; text-align: center;">
                  <strong> ${Ai.length} connected link${Ai.length!==1?"s":""}</strong>
                </div>
                ${Sn.length>0?`<div style="margin-top: 6px; padding: 6px; background: rgba(139, 92, 246, 0.1); border-radius: 4px; font-size: 11px; color: #8B5CF6; text-align: center;">
                  <strong> ${Sn.length} node detail${Sn.length!==1?"s":""}</strong>
                </div>`:""}
                <div style="margin-top: 6px; font-size: 10px; color: #6B7280; text-align: center; font-style: italic;">
                  Viewing node details and topology 
                </div>
              </div>
            `).addTo(n.current),Sn.length>0)Qi({from:Zn,to:"Network",description:`${Zn} - Node Details`,bandwidth_mbps:1e4,utilization:0,latency:5+Math.random()*10,packetLoss:Math.random()*.1,linkCount:Sn.length,totalCapacity:"N/A",type:(vt==null?void 0:vt.layer)||"NODE",nodeData:vt,linkDetails:Sn,clickedType:"node"}),Tt(!0);else if(Ai.length>0){const Jt=Ai[0],Xn=Math.max(Jt.total_traffic_95_in||0,Jt.total_traffic_95_out||0),Or=Jt.total_capacity>0?Xn/Jt.total_capacity*100:0;Qi({from:Jt.source_label||Jt.source,to:Jt.target_label||Jt.target,description:`${Zn} - ${Ai.length} link${Ai.length!==1?"s":""}`,bandwidth_mbps:Jt.total_capacity?Jt.total_capacity/1e6:1e4,utilization:Or,latency:5+Math.random()*10,packetLoss:Math.random()*.1,linkCount:Ai.length,totalCapacity:`${(Jt.total_capacity/1e9).toFixed(2)}G`,type:Jt.layer_list||"L2_AGGREGATION",nodeData:vt,linkDetails:Sn.length>0?Sn:void 0,clickedType:"node"}),Tt(!0)}Nn({from:Zn,to:"Network",nodeData:vt,topology:Ai,linkDetails:Sn.length>0?Sn:void 0,clickedType:"node"})}};n.current.on("click","ruasrekap-points",Gt),n.current.on("click","ruasrekap-points-hitarea",Gt);const ui=Ze=>{const _t=n.current.queryRenderedFeatures(Ze.point,{layers:["ruasrekap-points","ruasrekap-points-hitarea"]});if(!(_t&&_t.length>0)&&(console.log("Edge click detected!",Ze),Ze.features&&Ze.features.length>0)){const dt=Ze.features[0],vt=dt.properties,Un=Ze.lngLat;console.log("Edge feature:",dt),console.log("Edge properties:",vt);const Zn=(vt==null?void 0:vt.source_label)||(vt==null?void 0:vt.source)||"Node A",Sn=(vt==null?void 0:vt.target_label)||(vt==null?void 0:vt.target)||"Node B",Ai=vt!=null&&vt.capacity?(vt.capacity/1e9).toFixed(2):"N/A",dr=(vt==null?void 0:vt.link_count)||1;let Jt=[];try{vt!=null&&vt.details&&typeof vt.details=="string"?(Jt=JSON.parse(vt.details),console.log("Edge clicked - Details parsed:",Jt)):console.log("No details found or details is not a string:",vt==null?void 0:vt.details)}catch(Ir){console.error("Error parsing edge details:",Ir)}if(Jt.length>0&&dn){const Ir=`edge_${(vt==null?void 0:vt.id)||(vt==null?void 0:vt.source)+"_"+(vt==null?void 0:vt.target)}`,ca=dn.get(Ir);ca&&ca.length>0&&(Jt=Jt.map((oo,_s)=>{const nr=ca.find($i=>$i.ruas===oo.ruas)||ca[_s];return nr?{...oo,source_port_used:nr.source_port_used,source_port_count:nr.source_port_count,source_port_idle:nr.source_port_idle,target_port_used:nr.target_port_used,target_port_count:nr.target_port_count,target_port_idle:nr.target_port_idle}:oo}),console.log("Merged port data from trunk_all.json for edge:",Ir))}Jt.length>0&&console.log("Edge clicked - First detail port data after merge:",{source_port_used:Jt[0].source_port_used,source_port_count:Jt[0].source_port_count,source_port_idle:Jt[0].source_port_idle,target_port_used:Jt[0].target_port_used,target_port_count:Jt[0].target_port_count,target_port_idle:Jt[0].target_port_idle});const Xn=(Jt==null?void 0:Jt.length)||0,Or=Xn>0?`<div style="margin-top: 8px; padding: 6px; background: rgba(37, 99, 235, 0.1); border-radius: 4px; font-size: 11px; color: #2563EB;">
                <strong>Details:</strong> ${Xn} physical link(s) available
              </div>`:"",Io=dr>1?`<div style="margin-top: 4px; padding: 4px; background: rgba(139, 92, 246, 0.1); border-radius: 3px; font-size: 11px; color: #8B5CF6;">
                <strong> Aggregated Links:</strong> ${dr}
              </div>`:"";new ja.Popup().setLngLat(Un).setHTML(`
              <div style="font-size: 12px; padding: 8px; max-width: 320px;">
                <strong style="font-size: 14px; color: #2563EB;"> ${(vt==null?void 0:vt.ruas)||"Connection"}</strong><br/>
                <hr style="margin: 8px 0; border: none; border-top: 1px solid #ddd;"/>
                <div style="display: grid; grid-template-columns: auto 1fr; gap: 4px 8px;">
                  <strong>Source:</strong> <span>${Zn}</span>
                  <strong>Target:</strong> <span>${Sn}</span>
                  <strong>Capacity:</strong> <span style="color: #2563EB; font-weight: 600;">${Ai} Gbps</span>
                  <strong>Layer:</strong> <span>${(vt==null?void 0:vt.layer)||"N/A"}</span> 
                </div>
                ${Io}
                ${Or}
              </div>
            `).addTo(n.current);const ua=Math.max((vt==null?void 0:vt.traffic_in_log)||0,(vt==null?void 0:vt.traffic_out_log)||0,(vt==null?void 0:vt.traffic_in_psk)||0,(vt==null?void 0:vt.traffic_out_psk)||0),Mr=vt!=null&&vt.capacity&&vt.capacity>0?ua/vt.capacity*100:0;console.log("Setting link details with:",{from:Zn,to:Sn,linkDetails:Jt,detailsCount:Jt.length}),Qi({from:Zn,to:Sn,description:(vt==null?void 0:vt.ruas)||`${Zn}  ${Sn}`,bandwidth_mbps:vt!=null&&vt.capacity?vt.capacity/1e6:1e4,utilization:Mr,latency:5+Math.random()*10,packetLoss:Math.random()*.1,linkCount:dr,totalCapacity:`${Ai}G`,type:(vt==null?void 0:vt.layer)||"L2_AGGREGATION",linkDetails:(Jt==null?void 0:Jt.length)>0?Jt:void 0,nodeData:vt,clickedType:"edge"}),console.log("Calling setShowLinkDetails(true)"),Tt(!0),Nn({from:Zn,to:Sn,nodeData:vt,topology:(Jt==null?void 0:Jt.length)>0?Jt:void 0})}};n.current.on("click","ruasrekap-lines",ui),n.current.on("click","ruasrekap-lines-glow",ui);const Gn=new ja.Popup({closeButton:!1,closeOnClick:!1,offset:15,className:"hover-popup"}),Ut=Ze=>{if(n.current.getCanvas().style.cursor="pointer",Ze.features&&Ze.features.length>0){const _t=Ze.features[0],dt=_t.properties,vt=_t.geometry.coordinates.slice(),Un=(dt==null?void 0:dt.topologyCount)||0;let Zn=[];try{dt!=null&&dt.details&&typeof dt.details=="string"&&(Zn=JSON.parse(dt.details))}catch{}const Sn=[];dt!=null&&dt.layer&&Sn.push(`<strong>Layer:</strong> <span style="color: #8B5CF6; font-weight: 600;">${dt.layer}</span>`),dt!=null&&dt.platform&&Sn.push(`<strong>Platform:</strong> <span>${dt.platform}</span>`),dt!=null&&dt.reg&&Sn.push(`<strong>Region:</strong> <span>REG ${dt.reg}</span>`),dt!=null&&dt.witel&&Sn.push(`<strong>Witel:</strong> <span>${dt.witel}</span>`),dt!=null&&dt.types&&Sn.push(`<strong>Type:</strong> <span>${dt.types}</span>`),dt!=null&&dt.size&&Sn.push(`<strong>Size:</strong> <span style="color: #6366F1; font-weight: 600;">${dt.size}</span>`);const Ai=Sn.length>0?Sn.join(`
`):"",dr=Zn.length>0?`<div style="margin-top: 4px; padding: 4px; background: rgba(139, 92, 246, 0.1); border-radius: 3px; font-size: 9px; color: #8B5CF6; text-align: center;">
                <strong> ${Zn.length} node detail${Zn.length!==1?"s":""}</strong>
              </div>`:"";Gn.setLngLat(vt).setHTML(`
              <div style="font-size: 11px; padding: 6px; max-width: 260px;">
                <strong style="font-size: 13px; color: #3B82F6;"> ${(dt==null?void 0:dt.label)||(dt==null?void 0:dt.id)||"Node"}</strong><br/>
                <hr style="margin: 6px 0; border: none; border-top: 1px solid #e5e7eb;"/>
                <div style="display: grid; grid-template-columns: auto 1fr; gap: 3px 6px; font-size: 10px;">
                  <strong>ID:</strong> <span>${(dt==null?void 0:dt.id)||"N/A"}</span>
                  ${Ai}
                  <strong>Connections:</strong> <span style="color: #3B82F6; font-weight: 600;">${Un}</span>
                </div>
                ${dr}
                <div style="margin-top: 6px; font-size: 9px; color: #6B7280; text-align: center; font-style: italic;">
                  Click for full details
                </div>
              </div>
            `).addTo(n.current)}},Ri=()=>{n.current.getCanvas().style.cursor="",Gn.remove()};if(n.current.on("mouseenter","ruasrekap-points-hitarea",Ut),n.current.on("mouseleave","ruasrekap-points-hitarea",Ri),n.current.on("mouseenter","ruasrekap-lines",Ze=>{if(n.current.getCanvas().style.cursor="pointer",Ze.features&&Ze.features.length>0){const dt=Ze.features[0].properties,vt=Ze.lngLat,Un=dt!=null&&dt.capacity?(dt.capacity/1e9).toFixed(2):"N/A",Zn=dt!=null&&dt.traffic_in_log?(dt.traffic_in_log/1e9).toFixed(2):"0",Sn=dt!=null&&dt.traffic_out_log?(dt.traffic_out_log/1e9).toFixed(2):"0",Ai=dt!=null&&dt.traffic_in_psk?(dt.traffic_in_psk/1e9).toFixed(2):"0",dr=dt!=null&&dt.traffic_out_psk?(dt.traffic_out_psk/1e9).toFixed(2):"0";let Jt="0.00";dt!=null&&dt.capacity&&dt.capacity>0&&(Jt=(Math.max(parseFloat(Zn)||0,parseFloat(Sn)||0,parseFloat(Ai)||0,parseFloat(dr)||0)/parseFloat(Un)*100).toFixed(2));const Xn=(dt==null?void 0:dt.severity)||"normal";let Or="#10B981";Xn==="critical"?Or="#EF4444":Xn==="warning"&&(Or="#F59E0B"),console.log("Edge hover - Severity:",Xn,"Utilization:",Jt,"Color:",Or);const Io=(dt==null?void 0:dt.source_label)||(dt==null?void 0:dt.source)||"N/A",ua=(dt==null?void 0:dt.target_label)||(dt==null?void 0:dt.target)||"N/A",Mr=(dt==null?void 0:dt.link_count)||1,Ir=Mr>1?`<div style="margin-top: 6px; padding: 4px; background: rgba(139, 92, 246, 0.1); border-radius: 3px; font-size: 10px; color: #8B5CF6; text-align: center;">
                <strong> ${Mr} physical links aggregated</strong>
              </div>`:"";Gn.setLngLat(vt).setHTML(`
              <div style="font-size: 11px; padding: 6px; max-width: 260px;">
                <strong style="font-size: 13px; color: #8B5CF6;"> ${(dt==null?void 0:dt.ruas)||"Connection"}</strong><br/>
                <hr style="margin: 6px 0; border: none; border-top: 1px solid #e5e7eb;"/>
                <div style="display: grid; grid-template-columns: auto 1fr; gap: 3px 6px; font-size: 10px;">
                  <strong>Source:</strong> <span style="color: #3B82F6;">${Io}</span>
                  <strong>Target:</strong> <span style="color: #10B981;">${ua}</span>
                  <strong>Layer:</strong> <span>${(dt==null?void 0:dt.layer)||"N/A"}</span>
                  <strong>Capacity:</strong> <span style="color: #8B5CF6; font-weight: 600;">${Un} Gbps</span>
                  <strong>Traffic In (95%):</strong> <span style="color: #3B82F6;">${Zn} Gbps</span>
                  <strong>Traffic Out (95%):</strong> <span style="color: #10B981;">${Sn} Gbps</span>
                  <strong>Max Traffic In:</strong> <span style="color: #6366F1;">${Ai} Gbps</span>
                  <strong>Max Traffic Out:</strong> <span style="color: #14B8A6;">${dr} Gbps</span>
                  <strong>Utilization:</strong> <span style="color: ${Or}; font-weight: 600;">${Jt}%</span>
                </div>
                ${Ir}
                <div style="margin-top: 6px; font-size: 9px; color: #6B7280; text-align: center;">
                  Click for details
                </div>
              </div>
            `).addTo(n.current)}}),n.current.on("mouseleave","ruasrekap-lines",()=>{n.current.getCanvas().style.cursor="",Gn.remove()}),n.current.on("mouseenter","ruasrekap-lines-glow",Ze=>{if(n.current.getCanvas().style.cursor="pointer",Ze.features&&Ze.features.length>0){const dt=Ze.features[0].properties,vt=Ze.lngLat,Un=dt!=null&&dt.capacity?(dt.capacity/1e9).toFixed(2):"N/A",Zn=dt!=null&&dt.traffic_95_in?(dt.traffic_95_in/1e9).toFixed(2):"0",Sn=dt!=null&&dt.traffic_95_out?(dt.traffic_95_out/1e9).toFixed(2):"0",Ai=dt!=null&&dt.traffic_max_in?(dt.traffic_max_in/1e9).toFixed(2):"0",dr=dt!=null&&dt.traffic_max_out?(dt.traffic_max_out/1e9).toFixed(2):"0";let Jt="0.00";dt!=null&&dt.capacity&&dt.capacity>0&&(Jt=(Math.max(parseFloat(Zn)||0,parseFloat(Sn)||0)/parseFloat(Un)*100).toFixed(2));let Xn="#2ECC71";parseFloat(Jt)>80?Xn="#E74C3C":parseFloat(Jt)>60?Xn="#F39C12":parseFloat(Jt)>40&&(Xn="#F1C40F");const Or=(dt==null?void 0:dt.source_label)||(dt==null?void 0:dt.source)||"N/A",Io=(dt==null?void 0:dt.target_label)||(dt==null?void 0:dt.target)||"N/A",ua=(dt==null?void 0:dt.link_count)||1,Mr=ua>1?`<div style="margin-top: 6px; padding: 4px; background: rgba(139, 92, 246, 0.1); border-radius: 3px; font-size: 10px; color: #8B5CF6; text-align: center;">
                <strong> ${ua} physical links aggregated</strong>
              </div>`:"";Gn.setLngLat(vt).setHTML(`
              <div style="font-size: 11px; padding: 6px; max-width: 260px;">
                <strong style="font-size: 13px; color: #8B5CF6;"> ${(dt==null?void 0:dt.ruas)||"Connection"}</strong><br/>
                <hr style="margin: 6px 0; border: none; border-top: 1px solid #e5e7eb;"/>
                <div style="display: grid; grid-template-columns: auto 1fr; gap: 3px 6px; font-size: 10px;">
                  <strong>Source:</strong> <span style="color: #3B82F6;">${Or}</span>
                  <strong>Target:</strong> <span style="color: #10B981;">${Io}</span>
                  <strong>Layer:</strong> <span>${(dt==null?void 0:dt.layer)||"N/A"}</span>
                  <strong>Capacity:</strong> <span style="color: #8B5CF6; font-weight: 600;">${Un} Gbps</span>
                  <strong>Traffic In (95%):</strong> <span style="color: #3B82F6;">${Zn} Gbps</span>
                  <strong>Traffic Out (95%):</strong> <span style="color: #10B981;">${Sn} Gbps</span>
                  <strong>Max Traffic In:</strong> <span style="color: #6366F1;">${Ai} Gbps</span>
                  <strong>Max Traffic Out:</strong> <span style="color: #14B8A6;">${dr} Gbps</span>
                  <strong>Utilization:</strong> <span style="color: ${Xn}; font-weight: 600;">${Jt}%</span>
                </div>
                ${Mr}
                <div style="margin-top: 6px; font-size: 9px; color: #6B7280; text-align: center;">
                  Click for details
                </div>
              </div>
            `).addTo(n.current)}}),n.current.on("mouseleave","ruasrekap-lines-glow",()=>{n.current.getCanvas().style.cursor="",Gn.remove()}),We.length>0&&$t){const Ze=We.map(vt=>vt.x),_t=We.map(vt=>vt.y),dt={minLng:Math.min(...Ze),maxLng:Math.max(...Ze),minLat:Math.min(..._t),maxLat:Math.max(..._t)};n.current.fitBounds([[dt.minLng,dt.minLat],[dt.maxLng,dt.maxLat]],{padding:50,duration:1e3})}console.log(`Ruas rekap layer ${$t?"added":"updated"} successfully - ${We.length} nodes, ${ft.length} edges`)}catch(bt){console.error("Error adding ruas rekap layer:",bt),alert(`Error adding ruas rekap layer: ${bt}`)}},Ns=()=>{if(!n.current)return;const bt=!Oe;if(yt(bt),bt&&!n.current.getLayer("ruasrekap-points"))Js();else{const We=bt?"visible":"none";["ruasrekap-lines","ruasrekap-lines-glow","ruasrekap-points","ruasrekap-points-hitarea"].forEach(at=>{var ft;(ft=n.current)!=null&&ft.getLayer(at)&&n.current.setLayoutProperty(at,"visibility",We)})}},cu=()=>{var We;if(!n.current)return;const bt=!it;if(Lt(bt),bt&&!((We=n.current)!=null&&We.getLayer("ruas-rekap-sto-points")))du();else{const at=bt?"visible":"none";["ruas-rekap-sto-lines","ruas-rekap-sto-lines-glow","ruas-rekap-sto-points","ruas-rekap-sto-points-hitarea"].forEach(Wt=>{var ei,Et;(ei=n.current)!=null&&ei.getLayer(Wt)&&((Et=n.current)==null||Et.setLayoutProperty(Wt,"visibility",at))})}},du=()=>{var bt,We;if(!(!n.current||!St))try{["ruas-rekap-sto-points-hitarea","ruas-rekap-sto-points","ruas-rekap-sto-lines","ruas-rekap-sto-lines-glow"].forEach(Ut=>{var Ri,Ze;(Ri=n.current)!=null&&Ri.getLayer(Ut)&&((Ze=n.current)==null||Ze.removeLayer(Ut))}),(bt=n.current)!=null&&bt.getSource("ruasrekapsto")&&((We=n.current)==null||We.removeSource("ruasrekapsto"));const ft=St.nodes.filter(Ut=>Tn.includes(Ut.id)),Wt=new Set(ft.map(Ut=>Ut.id)),ei=St.edges.filter(Ut=>Wt.has(Ut.source)&&Wt.has(Ut.target)).map(Ut=>{const Ri=Gl(Ut.source_lon,Ut.source_lat,Ut.target_lon,Ut.target_lat,.2),Ze=Ut.avg_utilization||Ut.utilization||0;let _t="normal";if(Ut.severity){const dt=Ut.severity.toLowerCase();dt==="critical"?_t="critical":dt==="warning"?_t="warning":_t="normal"}else Ze>=85?_t="critical":Ze>=41?_t="warning":_t="normal";return{type:"Feature",properties:{id:Ut.id,ruas:Ut.ruas_list||Ut.ruas,source:Ut.source,target:Ut.target,capacity:Ut.total_capacity||Ut.capacity,layer:Ut.layer_list||Ut.layer,traffic_95_in:Ut.total_traffic_95_in||Ut.traffic_95_in,traffic_95_out:Ut.total_traffic_95_out||Ut.traffic_95_out,traffic_max_in:Ut.total_traffic_max_in||Ut.traffic_max_in,traffic_max_out:Ut.total_traffic_max_out||Ut.traffic_max_out,utilization:Ze,link_count:Ut.link_count||1,severity:_t,details:JSON.stringify(Ut.details||[])},geometry:{type:"LineString",coordinates:Ri}}}),Et=ft.map(Ut=>({type:"Feature",properties:{id:Ut.id,label:Ut.label,size:Ut.size||3,layer:Ut.layer||"N/A",platform:Ut.platform||"N/A",reg:Ut.reg||"N/A",witel:Ut.witel||"N/A",types:Ut.types||"N/A",details:JSON.stringify(Ut.details||[])},geometry:{type:"Point",coordinates:[Ut.x,Ut.y]}})),Bt=[...ei,...Et];n.current.addSource("ruasrekapsto",{type:"geojson",data:{type:"FeatureCollection",features:Bt}}),n.current.addLayer({id:"ruas-rekap-sto-lines-glow",type:"line",source:"ruasrekapsto",filter:["==",["geometry-type"],"LineString"],paint:{"line-color":["match",["get","severity"],"normal","#10B981","warning","#F59E0B","critical","#EF4444","#10B981"],"line-width":8,"line-opacity":.1,"line-blur":2}}),n.current.addLayer({id:"ruas-rekap-sto-lines",type:"line",source:"ruasrekapsto",filter:["==",["geometry-type"],"LineString"],paint:{"line-color":["match",["get","severity"],"normal","#10B981","warning","#F59E0B","critical","#EF4444","#059669"],"line-width":2,"line-opacity":.9}}),n.current.addLayer({id:"ruas-rekap-sto-points",type:"circle",source:"ruasrekapsto",filter:["==",["geometry-type"],"Point"],paint:{"circle-radius":["interpolate",["linear"],["zoom"],5,["*",["get","size"],1],10,["*",["get","size"],2]],"circle-color":"#10B981","circle-stroke-width":2,"circle-stroke-color":"#FFFFFF","circle-opacity":.9}}),n.current.addLayer({id:"ruas-rekap-sto-points-hitarea",type:"circle",source:"ruasrekapsto",filter:["==",["geometry-type"],"Point"],paint:{"circle-radius":["interpolate",["linear"],["zoom"],5,["*",["get","size"],5],10,["*",["get","size"],10]],"circle-color":"#10B981","circle-opacity":0}});const wt=Ut=>{if(Ut.preventDefault(),Ut.originalEvent&&Ut.originalEvent.stopPropagation(),Ut.features&&Ut.features.length>0){const Ze=Ut.features[0].properties,_t=Ut.lngLat,dt=Ze==null?void 0:Ze.id,vt=(Ze==null?void 0:Ze.label)||(Ze==null?void 0:Ze.id)||"Node";Gt.remove();const Un=St.edges.filter(Sn=>Sn.source===dt||Sn.target===dt);new ja.Popup().setLngLat(_t).setHTML(`
              <div style="font-size: 12px; padding: 10px; max-width: 300px;">
                <strong style="font-size: 15px; color: #10B981;"> ${vt}</strong><br/>
                <div style="font-size: 10px; color: #6B7280; margin-top: 2px;">STO ID: ${dt||"N/A"}</div>
                <hr style="margin: 8px 0; border: none; border-top: 1px solid #e5e7eb;"/>
                <div style="display: grid; grid-template-columns: auto 1fr; gap: 4px 8px; font-size: 11px;">
                  <strong style="color: #6B7280;">Layer:</strong> <span style="color: #1F2937;">${(Ze==null?void 0:Ze.layer)||"N/A"}</span>
                  <strong style="color: #6B7280;">Platform:</strong> <span style="color: #1F2937;">${(Ze==null?void 0:Ze.platform)||"N/A"}</span>
                  <strong style="color: #6B7280;">Type:</strong> <span style="color: #1F2937;">${(Ze==null?void 0:Ze.types)||"N/A"}</span>
                  <strong style="color: #6B7280;">Region:</strong> <span style="color: #1F2937;">REG ${(Ze==null?void 0:Ze.reg)||"N/A"}</span>
                  <strong style="color: #6B7280;">Witel:</strong> <span style="color: #1F2937;">${(Ze==null?void 0:Ze.witel)||"N/A"}</span>
                </div>
                <div style="margin-top: 10px; padding: 8px; background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(5, 150, 105, 0.05)); border-left: 3px solid #10B981; border-radius: 4px; font-size: 11px; text-align: center;">
                  <strong style="color: #059669;"> ${Un.length} connected link${Un.length!==1?"s":""}</strong>
                </div>
                <div style="margin-top: 6px; font-size: 10px; color: #6B7280; text-align: center; font-style: italic;">
                  Viewing node details and topology 
                </div>
              </div>
            `).addTo(n.current);let Zn=[];try{Ze!=null&&Ze.details&&typeof Ze.details=="string"&&(Zn=JSON.parse(Ze.details))}catch{}if(Zn.length===0&&(St!=null&&St.nodes)){const Sn=St.nodes.find(Ai=>Ai.id===dt);Sn!=null&&Sn.details&&Array.isArray(Sn.details)&&(Zn=Sn.details,console.log("STO Node details loaded from ruasRekapStoData:",Zn.length,"items"))}if(Zn.length>0&&dn){const Sn=dn.get(dt);Sn&&Sn.length>0&&(Zn=Zn.map((Ai,dr)=>{const Jt=Sn.find(Xn=>Xn.ruas===Ai.ruas)||Sn[dr];return Jt?{...Ai,source_port_used:Jt.source_port_used,source_port_count:Jt.source_port_count,source_port_idle:Jt.source_port_idle,target_port_used:Jt.target_port_used,target_port_count:Jt.target_port_count,target_port_idle:Jt.target_port_idle}:Ai}),console.log("Merged port data from trunk_all.json for STO node:",dt))}if(Un.length>0){const Sn=Un[0],Ai=Math.max(Sn.total_traffic_95_in||0,Sn.total_traffic_95_out||0),dr=Sn.total_capacity>0?Ai/Sn.total_capacity*100:0;Qi({from:Sn.source_label||Sn.source,to:Sn.target_label||Sn.target,description:`${vt} - ${Un.length} link${Un.length!==1?"s":""}`,bandwidth_mbps:Sn.total_capacity?Sn.total_capacity/1e6:1e4,utilization:dr,latency:5+Math.random()*10,packetLoss:Math.random()*.1,linkCount:Un.length,totalCapacity:`${(Sn.total_capacity/1e9).toFixed(2)}G`,type:Sn.layer_list||"L2_AGGREGATION",nodeData:Ze,linkDetails:Zn.length>0?Zn:void 0,clickedType:"node"}),Tt(!0)}Nn({from:vt,to:"Network",nodeData:Ze,topology:Un,linkDetails:Zn.length>0?Zn:void 0,clickedType:"node"})}};n.current.on("click","ruas-rekap-sto-points",wt),n.current.on("click","ruas-rekap-sto-points-hitarea",wt),n.current.on("click","ruas-rekap-sto-lines",Ut=>{const Ri=n.current.queryRenderedFeatures(Ut.point,{layers:["ruas-rekap-sto-points","ruas-rekap-sto-points-hitarea"]});if(!(Ri&&Ri.length>0)&&Ut.features&&Ut.features.length>0){const _t=Ut.features[0].properties,dt=Ut.lngLat;Gt.remove();const vt=St.nodes.find(_s=>_s.id===(_t==null?void 0:_t.source)),Un=St.nodes.find(_s=>_s.id===(_t==null?void 0:_t.target)),Zn=(vt==null?void 0:vt.label)||(_t==null?void 0:_t.source)||"Node A",Sn=(Un==null?void 0:Un.label)||(_t==null?void 0:_t.target)||"Node B",Ai=(_t==null?void 0:_t.source)||"N/A",dr=(_t==null?void 0:_t.target)||"N/A",Jt=_t!=null&&_t.capacity?(_t.capacity/1e9).toFixed(2):"N/A",Xn=_t!=null&&_t.traffic_95_in?(_t.traffic_95_in/1e9).toFixed(2):"0",Or=_t!=null&&_t.traffic_95_out?(_t.traffic_95_out/1e9).toFixed(2):"0",Io=_t!=null&&_t.traffic_max_in?(_t.traffic_max_in/1e9).toFixed(2):"0",ua=_t!=null&&_t.traffic_max_out?(_t.traffic_max_out/1e9).toFixed(2):"0";let Mr="0.00";_t!=null&&_t.capacity&&_t.capacity>0&&(Mr=(Math.max(parseFloat(Xn)||0,parseFloat(Or)||0)/parseFloat(Jt)*100).toFixed(2));let Ir="#2ECC71",ca="rgba(46, 204, 113, 0.1)";parseFloat(Mr)>80?(Ir="#E74C3C",ca="rgba(231, 76, 60, 0.1)"):parseFloat(Mr)>60?(Ir="#F39C12",ca="rgba(243, 156, 18, 0.1)"):parseFloat(Mr)>40&&(Ir="#F1C40F",ca="rgba(241, 196, 15, 0.1)");let oo=[];try{_t!=null&&_t.details&&typeof _t.details=="string"&&(oo=JSON.parse(_t.details))}catch{}if(oo.length>0&&dn){const _s=`edge_${(_t==null?void 0:_t.id)||(_t==null?void 0:_t.source)+"_"+(_t==null?void 0:_t.target)}`,nr=dn.get(_s);nr&&nr.length>0&&(oo=oo.map(($i,Qs)=>{const $a=nr.find(Hl=>Hl.ruas===$i.ruas)||nr[Qs];return $a?{...$i,source_port_used:$a.source_port_used,source_port_count:$a.source_port_count,source_port_idle:$a.source_port_idle,target_port_used:$a.target_port_used,target_port_count:$a.target_port_count,target_port_idle:$a.target_port_idle}:$i}),console.log("Merged port data from trunk_all.json for STO edge:",_s))}console.log("STO Edge clicked - Details with port data:",oo.length>0?{source_port_used:oo[0].source_port_used,source_port_count:oo[0].source_port_count,target_port_used:oo[0].target_port_used,target_port_count:oo[0].target_port_count}:"No details"),new ja.Popup().setLngLat(dt).setHTML(`
              <div style="font-size: 12px; padding: 10px; max-width: 340px;">
                <strong style="font-size: 15px; color: #059669;"> Link Connection</strong><br/>
                <div style="font-size: 10px; color: #6B7280; margin-top: 2px;">${(_t==null?void 0:_t.ruas)||"N/A"}</div>
                <hr style="margin: 8px 0; border: none; border-top: 1px solid #e5e7eb;"/>

                <div style="display: grid; gap: 6px; font-size: 11px;">
                  <div style="padding: 6px; background: rgba(59, 130, 246, 0.05); border-radius: 4px;">
                    <strong style="color: #3B82F6;"> Source:</strong> <span style="color: #1F2937; font-weight: 600;">${Zn}</span>
                    <div style="font-size: 9px; color: #6B7280; margin-top: 2px;">ID: ${Ai}</div>
                  </div>

                  <div style="padding: 6px; background: rgba(16, 185, 129, 0.05); border-radius: 4px;">
                    <strong style="color: #10B981;"> Target:</strong> <span style="color: #1F2937; font-weight: 600;">${Sn}</span>
                    <div style="font-size: 9px; color: #6B7280; margin-top: 2px;">ID: ${dr}</div>
                  </div>
                </div>

                <hr style="margin: 8px 0; border: none; border-top: 1px solid #e5e7eb;"/>

                <div style="display: grid; grid-template-columns: auto 1fr; gap: 4px 8px; font-size: 11px;">
                  <strong style="color: #6B7280;">Layer:</strong> <span style="color: #1F2937;">${(_t==null?void 0:_t.layer)||"N/A"}</span>
                  <strong style="color: #6B7280;">Link Count:</strong> <span style="color: #1F2937;">${(_t==null?void 0:_t.link_count)||1}</span>
                  <strong style="color: #6B7280;">Capacity:</strong> <span style="color: #059669; font-weight: 600;">${Jt} Gbps</span>
                  <strong style="color: #6B7280;">Traffic In (95%):</strong> <span style="color: #3B82F6; font-weight: 600;">${Xn} Gbps</span>
                  <strong style="color: #6B7280;">Traffic Out (95%):</strong> <span style="color: #10B981; font-weight: 600;">${Or} Gbps</span>
                  <strong style="color: #6B7280;">Max Traffic In:</strong> <span style="color: #6366F1;">${Io} Gbps</span>
                  <strong style="color: #6B7280;">Max Traffic Out:</strong> <span style="color: #14B8A6;">${ua} Gbps</span>
                </div>

                <div style="margin-top: 10px; padding: 8px; background: ${ca}; border-left: 3px solid ${Ir}; border-radius: 4px;">
                  <strong style="color: #6B7280; font-size: 11px;">Utilization:</strong>
                  <span style="color: ${Ir}; font-weight: 700; font-size: 13px; margin-left: 4px;">${Mr}%</span>
                </div>
              </div>
            `).addTo(n.current),Qi({from:Zn,to:Sn,description:(_t==null?void 0:_t.ruas)||`${Zn}  ${Sn}`,bandwidth_mbps:_t!=null&&_t.capacity?_t.capacity/1e6:1e4,utilization:parseFloat(Mr),latency:5+Math.random()*10,packetLoss:Math.random()*.1,linkCount:(_t==null?void 0:_t.link_count)||1,totalCapacity:`${Jt}G`,type:(_t==null?void 0:_t.layer)||"L2_AGGREGATION",linkDetails:(oo==null?void 0:oo.length)>0?oo:void 0,nodeData:_t,clickedType:"edge"}),Tt(!0),Nn({from:Zn,to:Sn})}});const Gt=new ja.Popup({closeButton:!1,closeOnClick:!1,offset:15,className:"hover-popup"}),ui=Ut=>{if(n.current.getCanvas().style.cursor="pointer",Ut.features&&Ut.features.length>0){const Ri=Ut.features[0],Ze=Ri.properties,_t=Ri.geometry.coordinates.slice(),vt=St.edges.filter(dr=>dr.source===(Ze==null?void 0:Ze.id)||dr.target===(Ze==null?void 0:Ze.id)).length;let Un=[];try{Ze!=null&&Ze.details&&typeof Ze.details=="string"&&(Un=JSON.parse(Ze.details))}catch{}const Zn=[];Ze!=null&&Ze.reg&&Zn.push(`<strong style="color: #6B7280;">Region:</strong> <span style="color: #1F2937;">REG ${Ze.reg}</span>`),Ze!=null&&Ze.types&&Zn.push(`<strong style="color: #6B7280;">Type:</strong> <span style="color: #1F2937;">${Ze.types}</span>`),Ze!=null&&Ze.size&&Zn.push(`<strong style="color: #6B7280;">Size:</strong> <span style="color: #6366F1; font-weight: 600;">${Ze.size}</span>`);const Sn=Zn.length>0?Zn.join(`
`):"",Ai=Un.length>0?`<div style="margin-top: 4px; padding: 4px; background: rgba(16, 185, 129, 0.1); border-radius: 3px; font-size: 9px; color: #10B981; text-align: center;">
                <strong> ${Un.length} node detail${Un.length!==1?"s":""}</strong>
              </div>`:"";Gt.setLngLat(_t).setHTML(`
              <div style="font-size: 11px; padding: 8px; max-width: 260px;">
                <strong style="font-size: 13px; color: #10B981;"> ${(Ze==null?void 0:Ze.label)||(Ze==null?void 0:Ze.id)||"Node"}</strong><br/>
                <div style="font-size: 9px; color: #6B7280; margin-top: 2px;">STO ID: ${(Ze==null?void 0:Ze.id)||"N/A"}</div>
                <hr style="margin: 6px 0; border: none; border-top: 1px solid #e5e7eb;"/>
                <div style="display: grid; grid-template-columns: auto 1fr; gap: 3px 6px; font-size: 10px;">
                  <strong style="color: #6B7280;">Layer:</strong> <span style="color: #1F2937;">${(Ze==null?void 0:Ze.layer)||"N/A"}</span>
                  <strong style="color: #6B7280;">Platform:</strong> <span style="color: #1F2937;">${(Ze==null?void 0:Ze.platform)||"N/A"}</span>
                  <strong style="color: #6B7280;">Witel:</strong> <span style="color: #1F2937;">${(Ze==null?void 0:Ze.witel)||"N/A"}</span>
                  ${Sn}
                  <strong style="color: #6B7280;">Links:</strong> <span style="color: #10B981; font-weight: 600;">${vt}</span>
                </div>
                ${Ai}
                <div style="margin-top: 6px; font-size: 9px; color: #6B7280; text-align: center; font-style: italic;">
                  Click for full details
                </div>
              </div>
            `).addTo(n.current)}},Gn=()=>{n.current.getCanvas().style.cursor="",Gt.remove()};if(n.current.on("mouseenter","ruas-rekap-sto-points-hitarea",ui),n.current.on("mouseleave","ruas-rekap-sto-points-hitarea",Gn),n.current.on("mouseenter","ruas-rekap-sto-lines",Ut=>{if(n.current.getCanvas().style.cursor="pointer",Ut.features&&Ut.features.length>0){const Ze=Ut.features[0].properties,_t=Ut.lngLat,dt=St.nodes.find(Or=>Or.id===(Ze==null?void 0:Ze.source)),vt=St.nodes.find(Or=>Or.id===(Ze==null?void 0:Ze.target)),Un=(dt==null?void 0:dt.label)||(Ze==null?void 0:Ze.source)||"N/A",Zn=(vt==null?void 0:vt.label)||(Ze==null?void 0:Ze.target)||"N/A",Sn=Ze!=null&&Ze.capacity?(Ze.capacity/1e9).toFixed(2):"N/A",Ai=Ze!=null&&Ze.traffic_95_in?(Ze.traffic_95_in/1e9).toFixed(2):"0",dr=Ze!=null&&Ze.traffic_95_out?(Ze.traffic_95_out/1e9).toFixed(2):"0";let Jt="0.00";Ze!=null&&Ze.capacity&&Ze.capacity>0&&(Jt=(Math.max(parseFloat(Ai)||0,parseFloat(dr)||0)/parseFloat(Sn)*100).toFixed(2));let Xn="#2ECC71";parseFloat(Jt)>80?Xn="#E74C3C":parseFloat(Jt)>60?Xn="#F39C12":parseFloat(Jt)>40&&(Xn="#F1C40F"),Gt.setLngLat(_t).setHTML(`
              <div style="font-size: 11px; padding: 8px; max-width: 280px;">
                <strong style="font-size: 13px; color: #059669;"> Link</strong><br/>
                <div style="font-size: 9px; color: #6B7280; margin-top: 2px;">${(Ze==null?void 0:Ze.ruas)||"N/A"}</div>
                <hr style="margin: 6px 0; border: none; border-top: 1px solid #e5e7eb;"/>
                <div style="display: grid; gap: 4px; font-size: 10px;">
                  <div><strong style="color: #6B7280;">From:</strong> <span style="color: #3B82F6; font-weight: 600;">${Un}</span></div>
                  <div><strong style="color: #6B7280;">To:</strong> <span style="color: #10B981; font-weight: 600;">${Zn}</span></div>
                </div>
                <hr style="margin: 6px 0; border: none; border-top: 1px solid #e5e7eb;"/>
                <div style="display: grid; grid-template-columns: auto 1fr; gap: 3px 6px; font-size: 10px;">
                  <strong style="color: #6B7280;">Capacity:</strong> <span style="color: #10B981; font-weight: 600;">${Sn} Gbps</span>
                  <strong style="color: #6B7280;">Traffic In:</strong> <span style="color: #3B82F6;">${Ai} Gbps</span>
                  <strong style="color: #6B7280;">Traffic Out:</strong> <span style="color: #10B981;">${dr} Gbps</span>
                  <strong style="color: #6B7280;">Utilization:</strong> <span style="color: ${Xn}; font-weight: 700;">${Jt}%</span>
                </div>
                <div style="margin-top: 6px; font-size: 9px; color: #6B7280; text-align: center; font-style: italic;">
                  Click for full details
                </div>
              </div>
            `).addTo(n.current)}}),n.current.on("mouseleave","ruas-rekap-sto-lines",()=>{n.current.getCanvas().style.cursor="",Gt.remove()}),n.current.on("mouseleave","ruas-rekap-sto-lines-glow",()=>{n.current.getCanvas().style.cursor="",Gt.remove()}),ft.length>0&&yn){const Ut=ft.map(_t=>_t.x),Ri=ft.map(_t=>_t.y),Ze={minLng:Math.min(...Ut),maxLng:Math.max(...Ut),minLat:Math.min(...Ri),maxLat:Math.max(...Ri)};n.current.fitBounds([[Ze.minLng,Ze.minLat],[Ze.maxLng,Ze.maxLat]],{padding:50,duration:1e3})}console.log(`Ruas rekap STO layer ${yn?"added":"updated"} successfully - ${ft.length} nodes, ${ei.length} edges`)}catch(at){console.error("Error adding ruas rekap STO layer:",at),alert(`Error adding ruas rekap STO layer: ${at}`)}},ro=async()=>{if(!(!n.current||!Te))try{["multilayer-points","multilayer-polygons-fill","multilayer-polygons-outline","multilayer-polygons-hover","multilayer-lines","multilayer-lines-glow"].forEach(We=>{n.current.getLayer(We)&&n.current.removeLayer(We)}),n.current.getSource("multilayer-map")&&n.current.removeSource("multilayer-map"),n.current.addSource("multilayer-map",{type:"geojson",data:Te}),n.current.addLayer({id:"multilayer-polygons-fill",type:"fill",source:"multilayer-map",filter:["==",["geometry-type"],"Polygon"],paint:{"fill-color":"#9B59B6","fill-opacity":.4}}),n.current.addLayer({id:"multilayer-polygons-outline",type:"line",source:"multilayer-map",filter:["==",["geometry-type"],"Polygon"],paint:{"line-color":"#8E44AD","line-width":2}}),n.current.addLayer({id:"multilayer-lines-glow",type:"line",source:"multilayer-map",filter:["==",["geometry-type"],"LineString"],paint:{"line-color":["match",["get","status"],"good","#2ECC71","medium","#F39C12","low","#E74C3C","#3498DB"],"line-width":10,"line-opacity":.1,"line-blur":6}}),n.current.addLayer({id:"multilayer-lines",type:"line",source:"multilayer-map",filter:["==",["geometry-type"],"LineString"],paint:{"line-color":["match",["get","status"],"good","#2ECC71","medium","#F39C12","low","#E74C3C","#2980B9"],"line-width":4,"line-opacity":.8}}),n.current.addLayer({id:"multilayer-points",type:"circle",source:"multilayer-map",filter:["==",["geometry-type"],"Point"],paint:{"circle-radius":10,"circle-color":["match",["get","vendor"],"Cisco","#1BA1E2","Huawei","#E74C3C","Nokia","#27AE60","#999999"],"circle-stroke-width":3,"circle-stroke-color":"#FFFFFF","circle-opacity":.9}}),n.current.on("click","multilayer-polygons-fill",We=>{if(We.features&&We.features.length>0){const ft=We.features[0].properties,Wt=We.lngLat;new ja.Popup().setLngLat(Wt).setHTML(`
              <div style="font-size: 12px; padding: 8px;">
                <strong style="font-size: 14px; color: #9B59B6;">Polygon Area</strong><br/>
                <hr style="margin: 8px 0; border: none; border-top: 1px solid #ddd;"/>
                <strong>Hostname:</strong> ${(ft==null?void 0:ft.hostname)||"N/A"}<br/>
                <strong>Witel:</strong> ${(ft==null?void 0:ft.witel)||"N/A"}<br/>
                <strong>Type Area:</strong> ${(ft==null?void 0:ft.type_area)||"N/A"}
              </div>
            `).addTo(n.current)}}),n.current.on("mouseenter","multilayer-polygons-fill",We=>{var at;We.features&&We.features.length>0&&(n.current.setFilter("multilayer-polygons-hover",["all",["==",["geometry-type"],"Polygon"],["==",["get","hostname"],((at=We.features[0].properties)==null?void 0:at.hostname)||""]]),n.current.getCanvas().style.cursor="pointer")}),n.current.on("mouseleave","multilayer-polygons-fill",()=>{n.current.setFilter("multilayer-polygons-hover",["all",["==",["geometry-type"],"Polygon"],["==",["get","hostname"],""]]),n.current.getCanvas().style.cursor=""}),n.current.on("click","multilayer-lines",We=>{if(We.features&&We.features.length>0){const ft=We.features[0].properties,Wt=We.lngLat,ei=((ft==null?void 0:ft.name)||"").split("-"),Et=ei[0]||(ft==null?void 0:ft.hostname)||"Node A",Bt=ei[1]||"Node B",wt=(ft==null?void 0:ft.status)==="good"?"#2ECC71":(ft==null?void 0:ft.status)==="medium"?"#F39C12":(ft==null?void 0:ft.status)==="low"?"#E74C3C":"#2980B9";new ja.Popup().setLngLat(Wt).setHTML(`
              <div style="font-size: 12px; padding: 8px;">
                <strong style="font-size: 14px; color: ${wt};"> ${(ft==null?void 0:ft.name)||"Connection Line"}</strong><br/>
                <hr style="margin: 8px 0; border: none; border-top: 1px solid #ddd;"/>
                <strong>Status:</strong> <span style="color: ${wt}; font-weight: 600; text-transform: uppercase;">${(ft==null?void 0:ft.status)||"N/A"}</span><br/>
              </div>
            `).addTo(n.current),Qi({from:Et,to:Bt,description:(ft==null?void 0:ft.name)||`${Et}  ${Bt}`,bandwidth_mbps:1e4,utilization:(ft==null?void 0:ft.status)==="good"?65:(ft==null?void 0:ft.status)==="medium"?75:85,latency:5+Math.random()*10,packetLoss:Math.random()*.1,linkCount:2,totalCapacity:"10G",type:"L2_AGGREGATION",nodeData:ft,clickedType:"edge"}),Tt(!0),Nn({from:Et,to:Bt})}}),n.current.on("mouseenter","multilayer-points",()=>{n.current.getCanvas().style.cursor="pointer"}),n.current.on("mouseleave","multilayer-points",()=>{n.current.getCanvas().style.cursor=""}),n.current.on("mouseenter","multilayer-lines",()=>{n.current.getCanvas().style.cursor="pointer"}),n.current.on("mouseleave","multilayer-lines",()=>{n.current.getCanvas().style.cursor=""}),console.log("Multilayer map layer added successfully")}catch(bt){console.error("Error adding multilayer map layer:",bt),alert(`Error adding multilayer map layer: ${bt}`)}},hl=()=>{if(!n.current)return;const bt=!ce;if(Ie(bt),bt&&!n.current.getLayer("multilayer-points"))ro();else{const We=bt?"visible":"none";["multilayer-points","multilayer-polygons-fill","multilayer-polygons-outline","multilayer-polygons-hover","multilayer-lines","multilayer-lines-glow"].forEach(ft=>{n.current.getLayer(ft)&&n.current.setLayoutProperty(ft,"visibility",We)})}},Co=()=>{if(!(!n.current||!De))try{["node-edges-points","node-edges-lines","node-edges-lines-glow"].forEach(Et=>{n.current.getLayer(Et)&&n.current.removeLayer(Et)}),n.current.getSource("node-edges")&&n.current.removeSource("node-edges");const We=new Map;De.nodes.forEach(Et=>{We.set(Et.id,{x:Et.x,y:Et.y,label:Et.label||Et.id,size:Et.size||3})});const at=(Et,Bt,wt=.3)=>{const Gt=[],Gn=(Et[0]+Bt[0])/2,Ut=(Et[1]+Bt[1])/2,Ri=Bt[0]-Et[0],Ze=Bt[1]-Et[1],_t=Math.sqrt(Ri*Ri+Ze*Ze),dt=-Ze/_t,vt=Ri/_t,Un=_t*wt,Zn=Gn+dt*Un,Sn=Ut+vt*Un;for(let Ai=0;Ai<=20;Ai++){const dr=Ai/20,Jt=1-dr,Xn=Jt*Jt*Et[0]+2*Jt*dr*Zn+dr*dr*Bt[0],Or=Jt*Jt*Et[1]+2*Jt*dr*Sn+dr*dr*Bt[1];Gt.push([Xn,Or])}return Gt},ft=De.edges.map(Et=>{const Bt=We.get(Et.source),wt=We.get(Et.target);if(!Bt||!wt)return null;const Gt=at([Bt.x,Bt.y],[wt.x,wt.y],.2);return{type:"Feature",properties:{id:Et.id,source:Et.source,target:Et.target,node_a_platform:Et.node_a_platform||"",node_b_platform:Et.node_b_platform||"",source_capacity_total:Et.source_capacity_total||0,target_capacity_total:Et.target_capacity_total||0,traffic_in:Et.traffic_in,traffic_out:Et.traffic_out,size:Et.size||1},geometry:{type:"LineString",coordinates:Gt}}}).filter(Et=>Et!==null),Wt=De.nodes.map(Et=>({type:"Feature",properties:{id:Et.id,hostname:Et.hostname||Et.id,label:Et.label||Et.id,manufacture:Et.manufacture||"",platform:Et.platform||"",reg:Et.reg||"",sto_l:Et.sto_l||"",version:Et.version||"",witel:Et.witel||"",x:Et.x,y:Et.y,size:(Et.size||3)*.9,topology:Et.topology?JSON.stringify(Et.topology):void 0},geometry:{type:"Point",coordinates:[Et.x,Et.y]}})),ei=[...ft,...Wt];if(n.current.addSource("node-edges",{type:"geojson",data:{type:"FeatureCollection",features:ei}}),n.current.addLayer({id:"node-edges-lines-glow",type:"line",source:"node-edges",filter:["==",["geometry-type"],"LineString"],paint:{"line-color":"#005873ff","line-width":1,"line-opacity":.2,"line-blur":2}}),n.current.addLayer({id:"node-edges-lines",type:"line",source:"node-edges",filter:["==",["geometry-type"],"LineString"],paint:{"line-color":"#00BFFF","line-width":.5,"line-opacity":.7}}),n.current.addLayer({id:"node-edges-points",type:"circle",source:"node-edges",filter:["==",["geometry-type"],"Point"],paint:{"circle-radius":["*",["get","size"],1.2],"circle-color":"#FF6B35","circle-stroke-width":1.5,"circle-stroke-color":"#FFFFFF","circle-opacity":.9}}),n.current.on("click","node-edges-points",Et=>{if(Et.features&&Et.features.length>0){const wt=Et.features[0].properties,Gt=Et.lngLat;let ui;try{if(wt!=null&&wt.topology){const Ze=typeof wt.topology=="string"?JSON.parse(wt.topology):wt.topology;ui=Array.isArray(Ze)?Ze:void 0}}catch{}const Gn=ui?ui.length:0,Ut=Gn>0?`<div style="margin-top: 8px; padding: 6px; background: rgba(255, 107, 53, 0.1); border-radius: 4px; font-size: 11px; color: #FF6B35;">
                <strong>Topology:</strong> ${Gn} connections available
              </div>`:"";new ja.Popup().setLngLat(Gt).setHTML(`
              <div style="font-size: 12px; padding: 8px; max-width: 320px;">
                <strong style="font-size: 14px; color: #FF6B35;"> ${(wt==null?void 0:wt.hostname)||(wt==null?void 0:wt.label)||(wt==null?void 0:wt.id)||"Node"}</strong><br/>
                <hr style="margin: 8px 0; border: none; border-top: 1px solid #ddd;"/>
                <div style="display: grid; grid-template-columns: auto 1fr; gap: 4px 8px;">
                <strong>Hostname:</strong> <span>${(wt==null?void 0:wt.hostname)||"N/A"}</span>
                  <strong>Manufacture:</strong> <span>${(wt==null?void 0:wt.manufacture)||"N/A"}</span>
                  <strong>Platform:</strong> <span>${(wt==null?void 0:wt.platform)||"N/A"}</span>
                  <strong>Version:</strong> <span>${(wt==null?void 0:wt.version)||"N/A"}</span>
                  <strong>Region:</strong> <span>${(wt==null?void 0:wt.reg)||"N/A"}</span>
                  <strong>Witel:</strong> <span>${(wt==null?void 0:wt.witel)||"N/A"}</span>
                  <strong>STO:</strong> <span>${(wt==null?void 0:wt.sto_l)||"N/A"}</span>
                  <strong>Size:</strong> <span>${(wt==null?void 0:wt.size)||"N/A"}</span>
                  <strong>Coordinates:</strong> <span>${(wt==null?void 0:wt.x)||"N/A"}, ${(wt==null?void 0:wt.y)||"N/A"}</span>
                </div>
                ${Ut}
              </div>
            `).addTo(n.current);const Ri=(wt==null?void 0:wt.hostname)||(wt==null?void 0:wt.label)||(wt==null?void 0:wt.id)||"Node";Qi({from:Ri,to:"Network",description:`${Ri} - Node Edges`,bandwidth_mbps:1e4,utilization:70+Math.random()*20,latency:5+Math.random()*10,packetLoss:Math.random()*.1,linkCount:Gn||1,totalCapacity:"10G",type:"NODE_EDGES",nodeData:wt,clickedType:"node"}),Tt(!0),Nn({from:Ri,to:"Network",nodeData:wt,topology:ui||void 0})}}),n.current.on("click","node-edges-lines",Et=>{if(Et.features&&Et.features.length>0){const wt=Et.features[0].properties,Gt=Et.lngLat,ui=(wt==null?void 0:wt.source)||"Node A",Gn=(wt==null?void 0:wt.target)||"Node B",Ut=wt!=null&&wt.source_capacity_total?(wt.source_capacity_total/1e3).toFixed(2):"N/A",Ri=wt!=null&&wt.target_capacity_total?(wt.target_capacity_total/1e3).toFixed(2):"N/A";new ja.Popup().setLngLat(Gt).setHTML(`
              <div style="font-size: 12px; padding: 8px; max-width: 320px;">
                <strong style="font-size: 14px; color: #00BFFF;"> ${ui}  ${Gn}</strong><br/>
                <hr style="margin: 8px 0; border: none; border-top: 1px solid #ddd;"/>
                <div style="display: grid; grid-template-columns: auto 1fr; gap: 4px 8px;">
                  <strong>Edge ID:</strong> <span>${(wt==null?void 0:wt.id)||"N/A"}</span>
                  <strong>Source:</strong> <span>${ui}</span>
                  <strong>Target:</strong> <span>${Gn}</span>
                   <strong>Source Capacity:</strong> <span style="color: #2ECC71; font-weight: 600;">${Ut} Gbps</span>
                  <strong>Target Capacity:</strong> <span style="color: #3498DB; font-weight: 600;">${Ri} Gbps</span>
                  <strong>Size:</strong> <span>${(wt==null?void 0:wt.size)||"N/A"}</span>
                </div>
              </div>
            `).addTo(n.current);const Ze=(wt==null?void 0:wt.source_capacity_total)||1e4,_t=(wt==null?void 0:wt.target_capacity_total)||1e4,dt=(Ze+_t)/2;Qi({from:ui,to:Gn,description:`${ui}  ${Gn}`,bandwidth_mbps:dt,utilization:60+Math.random()*30,latency:5+Math.random()*10,packetLoss:Math.random()*.1,linkCount:1,totalCapacity:`${(dt/1e3).toFixed(1)}G`,type:"L2_AGGREGATION",nodeData:wt,clickedType:"edge"}),Tt(!0),Nn({from:ui,to:Gn,nodeData:wt})}}),n.current.on("mouseenter","node-edges-points",()=>{n.current.getCanvas().style.cursor="pointer"}),n.current.on("mouseleave","node-edges-points",()=>{n.current.getCanvas().style.cursor=""}),n.current.on("mouseenter","node-edges-lines",()=>{n.current.getCanvas().style.cursor="pointer"}),n.current.on("mouseleave","node-edges-lines",()=>{n.current.getCanvas().style.cursor=""}),De.nodes.length>0){const Et=De.nodes.map(Gt=>Gt.x),Bt=De.nodes.map(Gt=>Gt.y),wt={minLng:Math.min(...Et),maxLng:Math.max(...Et),minLat:Math.min(...Bt),maxLat:Math.max(...Bt)};n.current.fitBounds([[wt.minLng,wt.minLat],[wt.maxLng,wt.maxLat]],{padding:50,duration:1e3})}console.log("Node edges layer added successfully")}catch(bt){console.error("Error adding node edges layer:",bt),alert(`Error adding node edges layer: ${bt}`)}},pr=()=>{if(!n.current)return;const bt=!he;if(Re(bt),bt&&!n.current.getLayer("node-edges-points"))Co();else{const We=bt?"visible":"none";["node-edges-points","node-edges-lines","node-edges-lines-glow"].forEach(ft=>{n.current.getLayer(ft)&&n.current.setLayoutProperty(ft,"visibility",We)})}},hu=bt=>{if(!n.current)return;const We=bt.viewportToFramedGraph(bt.graphToViewport(tw(n.current,n.current.getCenter()))),at=n.current.getBounds(),ft=bt.graphToViewport(tw(n.current,at.getNorthEast())),Wt=bt.graphToViewport(tw(n.current,at.getSouthWest())),ei={width:Math.abs(ft.x-Wt.x),height:Math.abs(ft.y-Wt.y)},Et=bt.getDimensions(),Bt=Math.min(ei.width/Et.width,ei.height/Et.height)*bt.getCamera().getState().ratio;bt.getCamera().setState({...We,ratio:Bt})},Ra=()=>{if(!t.current){setTimeout(()=>Ra(),100);return}if(!(!q||i.current||!n.current))try{const bt=xo.from(q);bt.updateEachNodeAttributes((Et,Bt)=>{const wt=tw(n.current,{lat:Bt.latitude,lng:Bt.longitude});return{...Bt,label:Bt.fullName,x:wt.x,y:wt.y}});const We=new S_(bt,t.current,{labelRenderedSizeThreshold:20,defaultNodeColor:"#e22352",defaultEdgeColor:"#ffaeaf",minEdgeThickness:2,stagePadding:0,enableCameraRotation:!1,renderEdgeLabels:!1,renderLabels:!0,labelColor:{color:"#000"},nodeReducer:(Et,Bt)=>({...Bt,size:Math.sqrt(bt.degree(Et))*2})}),at=We.getWebGLContext();at&&at.clearColor(0,0,0,0);const ft=()=>{bt.updateEachNodeAttributes((Et,Bt)=>{const wt=tw(n.current,{lat:Bt.latitude,lng:Bt.longitude});return{...Bt,x:wt.x,y:wt.y}})},Wt=()=>{n.current&&!n.current.isMoving()&&(ft(),hu(We),We.refresh())};hu(We),We.refresh(),n.current.on("moveend",Wt),n.current.on("zoomend",Wt);const ei=()=>{n.current&&(n.current.off("moveend",Wt),n.current.off("zoomend",Wt)),We.kill()};i.current=We,r.current=ei}catch(bt){alert(`Error adding Sigma layer: ${bt}`)}},Mu=()=>{r.current&&(r.current(),r.current=null),i.current=null},Cs=()=>{const bt=!Y;X(bt),bt?Ra():Mu()};I.useEffect(()=>{h&&n.current&&No()},[h]),I.useEffect(()=>{h&&R&&v&&n.current&&Xr()},[h,R]),I.useEffect(()=>{h&&Te&&ce&&n.current&&ro()},[h,Te,ce]),I.useEffect(()=>{h&&De&&he&&n.current&&Co()},[h,De,he]),I.useEffect(()=>{h&&De&&he&&n.current&&Co()},[h,De,he]),I.useEffect(()=>{(async()=>{h&&xt&&ue==="ruasrekap"&&!Oe&&(await new Promise(We=>setTimeout(We,500)),yt(!0))})()},[h,xt,ue,Oe]),I.useEffect(()=>{h&&a.length>0&&xr()},[a,h]),I.useEffect(()=>()=>{Mu()},[]);const Wc=bt=>{pi(bt),ct(`Switched to ${{topology:"Topology View",dashboard:"Dashboard",layers:"Data Layers",analytics:"Analytics",settings:"Settings"}[bt]||bt}`),Pt("info")};I.useEffect(()=>{const bt=[];O&&$.length>0&&$.forEach((at,ft)=>{at.hostname&&at.latitude&&at.longitude&&bt.push({id:`capacity-${ft}`,label:at.hostname,type:"capacity",latitude:parseFloat(at.latitude),longitude:parseFloat(at.longitude),metadata:{manufacture:at.manufacture,platform:at.platform,witel:at.witel,sto:at.sto_l||at.sto,reg:at.reg}})}),re&&ne.length>0&&ne.forEach((at,ft)=>{at.node&&at.latitude&&at.longitude&&bt.push({id:`sirkit-${ft}`,label:at.node,type:"sirkit",latitude:parseFloat(at.latitude),longitude:parseFloat(at.longitude),metadata:{witel:at.witel,sto:at.sto_l||at.sto,reg:at.reg,platform:at.platform}})}),ce&&Te&&Te.features.forEach((at,ft)=>{if(at.geometry.type==="Point"&&at.properties){const Wt=at.geometry.coordinates;bt.push({id:`multilayer-${ft}`,label:at.properties.hostname||at.properties.label||`Node ${ft}`,type:"multilayer",latitude:Wt[1],longitude:Wt[0],metadata:{manufacture:at.properties.manufacture,platform:at.properties.platform,witel:at.properties.witel,sto:at.properties.sto_l,reg:at.properties.reg}})}}),he&&De&&De.nodes.forEach(at=>{bt.push({id:`nodeedges-${at.id}`,label:at.hostname||at.label||at.id,type:"nodeedges",latitude:at.y,longitude:at.x,metadata:{manufacture:at.manufacture,platform:at.platform,witel:at.witel,sto:at.sto_l,reg:at.reg}})}),Oe&&xt&&xt.nodes.forEach(at=>{bt.push({id:`ruasrekap-${at.id}`,label:at.label||at.id,type:Rr||"ruasrekap",latitude:at.y,longitude:at.x,metadata:{platform:at.platform,witel:at.witel,reg:at.reg,types:at.types,layer:at.layer}})}),it&&St&&St.nodes.forEach(at=>{bt.push({id:`ruasrekapsto-${at.id}`,label:at.label||at.id,type:"ruasrekapsto",latitude:at.y,longitude:at.x,metadata:{platform:at.platform,witel:at.witel,reg:at.reg,types:at.types,layer:at.layer}})}),$n(bt);const We=new Set;bt.forEach(at=>{var ft;(ft=at.metadata)!=null&&ft.platform&&at.metadata.platform!=="N/A"&&We.add(at.metadata.platform)}),Ii(Array.from(We).sort()),console.log(`Search suggestions updated: ${bt.length} items`)},[O,$,re,ne,ce,Te,he,De,Oe,xt,Rr,it,St]);const Pd=()=>{xi([]),n.current&&(n.current.getLayer("filtered-nodes-highlight")&&n.current.removeLayer("filtered-nodes-highlight"),n.current.getSource("filtered-nodes")&&n.current.removeSource("filtered-nodes")),ct("Filter cleared"),Pt("info"),Je(!0)},Uo=bt=>{const We=pn.filter(at=>{var ft,Wt;return((Wt=(ft=at.metadata)==null?void 0:ft.platform)==null?void 0:Wt.toLowerCase())===bt.toLowerCase()});if(xi(We),ct(`Found ${We.length} nodes with platform: ${bt}`),Pt("info"),Je(!0),We.length===1&&n.current){const at=We[0];setTimeout(()=>{aa(at.label,at)},500)}else if(We.length>1&&n.current){n.current.getLayer("filtered-nodes-highlight")&&n.current.removeLayer("filtered-nodes-highlight"),n.current.getSource("filtered-nodes")&&n.current.removeSource("filtered-nodes");const at=We.map(Et=>{var Bt;return{type:"Feature",properties:{label:Et.label,platform:((Bt=Et.metadata)==null?void 0:Bt.platform)||"N/A"},geometry:{type:"Point",coordinates:[Et.longitude,Et.latitude]}}});n.current.addSource("filtered-nodes",{type:"geojson",data:{type:"FeatureCollection",features:at}}),n.current.addLayer({id:"filtered-nodes-highlight",type:"circle",source:"filtered-nodes",paint:{"circle-radius":9,"circle-color":"#1c9cc3ff","circle-stroke-width":2,"circle-stroke-color":"#FFFFFF","circle-opacity":.8}}),n.current.on("click","filtered-nodes-highlight",Et=>{if(Et.features&&Et.features.length>0){const wt=Et.features[0].properties,Gt=Et.lngLat;new ja.Popup().setLngLat(Gt).setHTML(`
              <div style="font-size: 12px; padding: 8px;">
                <strong style="font-size: 14px; color: #4F46E5;"> ${(wt==null?void 0:wt.label)||"Node"}</strong><br/>
                <hr style="margin: 8px 0; border: none; border-top: 1px solid #ddd;"/>
                <strong>Platform:</strong> ${(wt==null?void 0:wt.platform)||"N/A"}<br/>
                <div style="margin-top: 8px; font-size: 11px; color: #6B7280;">
                  Click to view details
                </div>
              </div>
            `).addTo(n.current)}}),n.current.on("mouseenter","filtered-nodes-highlight",()=>{n.current.getCanvas().style.cursor="pointer"}),n.current.on("mouseleave","filtered-nodes-highlight",()=>{n.current.getCanvas().style.cursor=""});const ft=We.map(Et=>Et.longitude),Wt=We.map(Et=>Et.latitude),ei={minLng:Math.min(...ft),maxLng:Math.max(...ft),minLat:Math.min(...Wt),maxLat:Math.max(...Wt)};n.current.fitBounds([[ei.minLng,ei.minLat],[ei.maxLng,ei.maxLat]],{padding:100,duration:1500})}else We.length===0&&(n.current&&n.current.getLayer("filtered-nodes-highlight")&&n.current.removeLayer("filtered-nodes-highlight"),n.current&&n.current.getSource("filtered-nodes")&&n.current.removeSource("filtered-nodes"))},aa=(bt,We)=>{if(Ct(bt),Wn.length>0&&(xi([]),n.current&&n.current.getLayer("filtered-nodes-highlight")&&n.current.removeLayer("filtered-nodes-highlight"),n.current&&n.current.getSource("filtered-nodes")&&n.current.removeSource("filtered-nodes")),We&&n.current)n.current.flyTo({center:[We.longitude,We.latitude],zoom:15,duration:2e3,essential:!0}),setTimeout(()=>{var at,ft,Wt,ei,Et;n.current&&new ja.Popup({closeButton:!0,closeOnClick:!1}).setLngLat([We.longitude,We.latitude]).setHTML(`
              <div style="font-size: 12px; padding: 8px; max-width: 280px;">
                <strong style="font-size: 14px; color: #4F46E5;"> ${We.label}</strong><br/>
                <hr style="margin: 8px 0; border: none; border-top: 1px solid #ddd;"/>
                <div style="display: grid; grid-template-columns: auto 1fr; gap: 4px 8px;">
                  <strong>Type:</strong> <span>${We.type}</span>
                  ${(at=We.metadata)!=null&&at.manufacture?`<strong>Manufacture:</strong> <span>${We.metadata.manufacture}</span>`:""}
                  ${(ft=We.metadata)!=null&&ft.platform?`<strong>Platform:</strong> <span>${We.metadata.platform}</span>`:""}
                  ${(Wt=We.metadata)!=null&&Wt.witel?`<strong>Witel:</strong> <span>${We.metadata.witel}</span>`:""}
                  ${(ei=We.metadata)!=null&&ei.sto?`<strong>STO:</strong> <span>${We.metadata.sto}</span>`:""}
                  ${(Et=We.metadata)!=null&&Et.reg?`<strong>Region:</strong> <span>${We.metadata.reg}</span>`:""}
                </div>
              </div>
            `).addTo(n.current)},2100),ct(`Navigating to ${We.label}`),Pt("success"),Je(!0);else if(bt.trim()){const at=pn.find(ft=>ft.label.toLowerCase().includes(bt.toLowerCase()));at&&n.current?aa(bt,at):(ct(`No results found for "${bt}"`),Pt("error"),Je(!0))}},ur=bt=>{fr(bt),la(bt,{national:4.5,regional:6.5,witel:8.5,sto:11}[bt])},Uc=bt=>{fr(bt);const We={national:4.5,regional:6.5,witel:8.5,sto:11};n.current&&n.current.flyTo({zoom:We[bt],duration:1e3})},la=(bt,We)=>{ke(We),fr(bt),n.current&&n.current.flyTo({zoom:We,duration:1e3})};I.useEffect(()=>{if(n.current){const bt=()=>{var ft;const We=((ft=n.current)==null?void 0:ft.getZoom())||5;ke(We),console.log("Current Zoom Level:",We.toFixed(2));let at="national";We>=10?at="sto":We>=8?at="witel":We>=6&&(at="regional"),at!==qn&&(fr(at),console.log("Hierarchy Level Changed to:",at))};return n.current.on("zoom",bt),()=>{var We;(We=n.current)==null||We.off("zoom",bt)}}},[qn]);const jl=async bt=>{if(ve(bt),Le(!0),await new Promise(We=>setTimeout(We,800)),O&&$c(),Y&&Cs(),re&&Mo(),ce&&hl(),he&&pr(),Oe&&Ns(),it&&cu(),bt==="multilayer")v||(w(!0),n.current&&!n.current.getLayer("kabupaten-fill")&&Xr(),await new Promise(We=>setTimeout(We,300))),ce||hl();else{if(v&&(w(!1),n.current)){const We="none";n.current.getLayer("kabupaten-fill")&&n.current.setLayoutProperty("kabupaten-fill","visibility",We),n.current.getLayer("kabupaten-outline")&&n.current.setLayoutProperty("kabupaten-outline","visibility",We),n.current.getLayer("kabupaten-hover")&&n.current.setLayoutProperty("kabupaten-hover","visibility",We)}bt==="capacity"&&!O?$c():bt==="sigma"&&!Y?Cs():bt==="sirkit"&&!re?Mo():bt==="nodeedges"&&!he?pr():bt==="ruasrekap"&&!Oe?Ns():bt==="ruasrekapsto"&&!it&&cu()}await new Promise(We=>setTimeout(We,500)),Le(!1)};return T.jsxs("div",{className:"maplibre-view",children:[T.jsx(QPe,{onMenuClick:Wc,activeMenu:us,showKabupatenLayer:v,kabupatenLoaded:R,onToggleKabupaten:dl,selectedLayer:ue,onLayerChange:jl,capacityDataLength:$.length,sirkitDataLength:ne.length,airportsDataAvailable:!!q,multilayerMapDataAvailable:!!Te,nodeEdgesDataAvailable:!!De,ruasRekapDataAvailable:!!xt,ruasRekapData:xt,_filteredRuasNodes:Xt,onFilterRuasNodes:I.useCallback(bt=>{ue==="ruasrekapsto"?Mt(bt):en(bt)},[ue]),ruasRekapStoDataAvailable:!!St,ruasRekapStoData:St,isLayerLoading:_e,selectedRuasLayer:Rr,onRuasLayerChange:Li}),T.jsx(Age,{onSearch:aa,suggestions:Wn.length>0?Wn:pn,platformFilters:Qn,onFilterClick:Uo,onClearFilter:Pd}),T.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:1e3},children:T.jsx(SDe,{username:"Admin User",email:"admin@infranexia.com"})}),T.jsx(JPe,{currentLevel:qn,navigationPath:je,onLevelChange:ur,onNavigateBack:Uc,onZoomToLevel:la,currentZoom:ge,totalNodes:$.length,totalLinks:0}),(oa||Ys)&&T.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",background:"linear-gradient(145deg, rgba(255,255,255,0.95), rgba(240,240,240,0.9))",backdropFilter:"blur(20px)",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.3)",boxShadow:"0 20px 40px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8)",padding:"16px",minWidth:"280px",zIndex:20,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[T.jsx("h3",{style:{margin:0,fontSize:"14px",fontWeight:"600",color:"#1F2937"},children:"Current Selection"}),T.jsx("button",{onClick:()=>{sa(void 0),zs(void 0),pe([{level:"national",name:"Indonesia"}]),fr("national"),la("national",4.5)},style:{fontSize:"11px",color:"#6B7280",background:"none",border:"none",cursor:"pointer",textDecoration:"underline"},children:"Clear All"})]}),oa&&T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[T.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#3B82F6"}}),T.jsxs("span",{style:{fontSize:"13px",color:"#374151",fontWeight:"500"},children:[T.jsx("strong",{children:"Region:"})," ",oa]}),T.jsx("button",{onClick:()=>{sa(void 0),pe([{level:"national",name:"Indonesia"}]),fr("national"),la("national",4.5)},style:{marginLeft:"auto",fontSize:"11px",color:"#3B82F6",background:"none",border:"none",cursor:"pointer"},children:""})]}),Ys&&T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[T.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#10B981"}}),T.jsxs("span",{style:{fontSize:"13px",color:"#374151",fontWeight:"500"},children:[T.jsx("strong",{children:"Witel:"})," ",Ys]}),T.jsx("button",{onClick:()=>{zs(void 0),pe([{level:"national",name:"Indonesia"},{level:"regional",name:oa||"Regional View"}]),fr("regional"),la("regional",6.5)},style:{marginLeft:"auto",fontSize:"11px",color:"#10B981",background:"none",border:"none",cursor:"pointer"},children:""})]}),T.jsxs("div",{style:{fontSize:"11px",color:"#6B7280",marginTop:"8px",fontWeight:"500"},children:["Showing ",$.length," nodes"]})]}),T.jsx(eDe,{}),us==="dashboard"&&T.jsx(Tge,{kpiData:{revenue:{value:"2.4M",change:12},utilization:{value:$.length>0?`${Math.round($.reduce((bt,We)=>{const at=parseFloat(We.utilization||"0");return bt+(isNaN(at)?0:at)},0)/$.length)}%`:"0%",change:5},customerCount:{value:"45.2K",change:8},bandwidth:{value:$.length>0?`${($.reduce((bt,We)=>{const at=parseFloat(We.capacity||"0");return bt+(isNaN(at)?0:at)},0)/1e3).toFixed(1)}TB`:"0TB",change:15},historicalTrend:[{month:"May",value:650},{month:"Jun",value:720},{month:"Jul",value:680},{month:"Aug",value:780},{month:"Sep",value:850},{month:"Oct",value:920}]},onClose:()=>pi("topology")}),us==="layers"&&T.jsx(KPe,{elements:$,ruasRekapData:ue==="ruasrekap"?xt:ue==="ruasrekapsto"?St:null,selectedRuasLayer:Rr,onClose:()=>pi("topology")}),us==="analytics"&&T.jsx(Ege,{onClose:()=>pi("topology")}),us==="settings"&&T.jsx(EDe,{onClose:()=>pi("topology")}),T.jsxs("div",{className:"map-container",children:[T.jsx("div",{ref:e,style:{width:"100%",height:"100%"}}),T.jsx("div",{ref:t,className:"sigma-container",style:{visibility:Y?"visible":"hidden",pointerEvents:Y?"auto":"none"}})]}),T.jsx(Rge,{isOpen:o,onClose:()=>s(!1),onUpload:wr}),Ne&&T.jsx(vN,{message:nt,type:Ue,onClose:()=>Je(!1)}),lr&&Ji&&T.jsx(_De,{connection:Ji,onClose:()=>{Tt(!1),Qi(null)},onShowTopology:()=>{wo(!Vr)},isTopologyVisible:Vr}),Vr&&ln&&T.jsx(RDe,{connection:ln,onClose:()=>{wo(!1),Nn(null)}}),Fi&&T.jsx(ADe,{onClose:()=>co(!1)})]})},LDe=()=>{const[e,t]=I.useState("admin"),[n,i]=I.useState("admin123"),[r,o]=I.useState(""),[s,a]=I.useState(!1),d=v1(),h="admin",m="admin123",v=w=>{w.preventDefault(),o(""),a(!0),setTimeout(()=>{e===h&&n===m?d("/map"):(o("Username atau password salah!"),a(!1))},1500)};return T.jsxs("div",{className:"login-container",children:[T.jsxs("div",{className:"login-background",children:[T.jsx("div",{className:"particle-grid"}),T.jsx("div",{className:"gradient-orb orb-1"}),T.jsx("div",{className:"gradient-orb orb-2"}),T.jsx("div",{className:"gradient-orb orb-3"}),T.jsxs("div",{className:"floating-shapes",children:[T.jsx("div",{className:"shape shape-1"}),T.jsx("div",{className:"shape shape-2"}),T.jsx("div",{className:"shape shape-3"}),T.jsx("div",{className:"shape shape-4"})]})]}),T.jsx("div",{className:"login-left",children:T.jsxs("div",{className:"login-branding",children:[T.jsx("img",{src:"/images/infranexia-side.png",alt:"Infranexia",className:"brand-logo"}),T.jsxs("h1",{className:"brand-title",children:[T.jsx("span",{className:"brand-highlight",children:"Faster"})," Connection"]}),T.jsx("p",{className:"brand-subtitle",children:"For All Your Business Needs"}),T.jsxs("div",{className:"brand-features",children:[T.jsxs("div",{className:"feature-item",children:[T.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[T.jsx("path",{d:"M9 12L11 14L15 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),T.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"})]}),T.jsx("span",{children:"Reliable Infrastructure"})]}),T.jsxs("div",{className:"feature-item",children:[T.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[T.jsx("path",{d:"M9 12L11 14L15 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),T.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"})]}),T.jsx("span",{children:"24/7 Network Monitoring"})]}),T.jsxs("div",{className:"feature-item",children:[T.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[T.jsx("path",{d:"M9 12L11 14L15 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),T.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"})]}),T.jsx("span",{children:"Enterprise Solutions"})]})]})]})}),T.jsx("div",{className:"login-right",children:T.jsxs("div",{className:"login-card",children:[T.jsxs("div",{className:"login-header",children:[T.jsx("h2",{className:"login-title",children:"Welcome Back"}),T.jsx("p",{className:"login-subtitle",children:"Sign in to access TIF System"})]}),T.jsxs("form",{onSubmit:v,className:"login-form",children:[T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"username",className:"form-label",children:"USERNAME"}),T.jsxs("div",{className:"input-wrapper",children:[T.jsx("input",{id:"username",type:"text",className:"form-input",placeholder:"Enter your username",value:e,onChange:w=>t(w.target.value),required:!0}),T.jsxs("svg",{className:"input-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[T.jsx("path",{d:"M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),T.jsx("path",{d:"M12 11C14.2091 11 16 9.20914 16 7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})]})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"password",className:"form-label",children:"PASSWORD"}),T.jsxs("div",{className:"input-wrapper",children:[T.jsx("input",{id:"password",type:"password",className:"form-input",placeholder:"Enter your password",value:n,onChange:w=>i(w.target.value),required:!0}),T.jsxs("svg",{className:"input-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[T.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),T.jsx("path",{d:"M7 11V7C7 5.67392 7.52678 4.40215 8.46447 3.46447C9.40215 2.52678 10.6739 2 12 2C13.3261 2 14.5979 2.52678 15.5355 3.46447C16.4732 4.40215 17 5.67392 17 7V11",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})]})]}),r&&T.jsxs("div",{className:"error-message",children:[T.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[T.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"}),T.jsx("path",{d:"M12 8V12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),T.jsx("path",{d:"M12 16H12.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),r]}),T.jsx("button",{type:"submit",className:`login-button ${s?"loading":""}`,disabled:s,children:s?T.jsxs(T.Fragment,{children:[T.jsx("span",{className:"spinner"}),"Signing in..."]}):"Sign In"})]}),T.jsx("div",{className:"login-footer",children:T.jsxs("p",{className:"hint-text",children:["Demo credentials: ",T.jsx("span",{className:"hint-value",children:"admin / admin123"})]})})]})})]})},ODe=r$.createRoot(document.getElementById("root"));ODe.render(T.jsx(qt.StrictMode,{children:T.jsx(bW,{basename:"/",children:T.jsxs(Y$,{children:[T.jsx(mb,{path:"/login",element:T.jsx(LDe,{})}),T.jsx(mb,{path:"/map",element:T.jsx(IDe,{})}),T.jsx(mb,{path:"/base",element:T.jsx(KY,{})}),T.jsx(mb,{path:"/",element:T.jsx(kM,{to:"/login",replace:!0})}),T.jsx(mb,{path:"*",element:T.jsx(kM,{to:"/login",replace:!0})})]})})}));
