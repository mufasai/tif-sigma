var tI=Object.defineProperty;var rI=(e,t,r)=>t in e?tI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var vb=(e,t,r)=>rI(e,typeof t!="symbol"?t+"":t,r);function nI(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const o in n)if(o!=="default"&&!(o in e)){const l=Object.getOwnPropertyDescriptor(n,o);l&&Object.defineProperty(e,o,l.get?l:{enumerable:!0,get:()=>n[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}})();var Ix=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xb={exports:{}},Q0={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dA;function iI(){if(dA)return Q0;dA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,o,l){var h=null;if(l!==void 0&&(h=""+l),o.key!==void 0&&(h=""+o.key),"key"in o){l={};for(var u in o)u!=="key"&&(l[u]=o[u])}else l=o;return o=l.ref,{$$typeof:e,type:n,key:h,ref:o!==void 0?o:null,props:l}}return Q0.Fragment=t,Q0.jsx=r,Q0.jsxs=r,Q0}var hA;function aI(){return hA||(hA=1,xb.exports=iI()),xb.exports}var S=aI(),_b={exports:{}},Kn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fA;function oI(){if(fA)return Kn;fA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),h=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),P=Symbol.iterator;function O(Ae){return Ae===null||typeof Ae!="object"?null:(Ae=P&&Ae[P]||Ae["@@iterator"],typeof Ae=="function"?Ae:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,G={};function X(Ae,qe,Ze){this.props=Ae,this.context=qe,this.refs=G,this.updater=Ze||U}X.prototype.isReactComponent={},X.prototype.setState=function(Ae,qe){if(typeof Ae!="object"&&typeof Ae!="function"&&Ae!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ae,qe,"setState")},X.prototype.forceUpdate=function(Ae){this.updater.enqueueForceUpdate(this,Ae,"forceUpdate")};function ae(){}ae.prototype=X.prototype;function ne(Ae,qe,Ze){this.props=Ae,this.context=qe,this.refs=G,this.updater=Ze||U}var ue=ne.prototype=new ae;ue.constructor=ne,W(ue,X.prototype),ue.isPureReactComponent=!0;var Q=Array.isArray;function de(){}var he={H:null,A:null,T:null,S:null},Y=Object.prototype.hasOwnProperty;function ie(Ae,qe,Ze){var zt=Ze.ref;return{$$typeof:e,type:Ae,key:qe,ref:zt!==void 0?zt:null,props:Ze}}function Ce(Ae,qe){return ie(Ae.type,qe,Ae.props)}function _e(Ae){return typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===e}function Me(Ae){var qe={"=":"=0",":":"=2"};return"$"+Ae.replace(/[=:]/g,function(Ze){return qe[Ze]})}var me=/\/+/g;function Ke(Ae,qe){return typeof Ae=="object"&&Ae!==null&&Ae.key!=null?Me(""+Ae.key):qe.toString(36)}function Re(Ae){switch(Ae.status){case"fulfilled":return Ae.value;case"rejected":throw Ae.reason;default:switch(typeof Ae.status=="string"?Ae.then(de,de):(Ae.status="pending",Ae.then(function(qe){Ae.status==="pending"&&(Ae.status="fulfilled",Ae.value=qe)},function(qe){Ae.status==="pending"&&(Ae.status="rejected",Ae.reason=qe)})),Ae.status){case"fulfilled":return Ae.value;case"rejected":throw Ae.reason}}throw Ae}function pe(Ae,qe,Ze,zt,Tt){var rr=typeof Ae;(rr==="undefined"||rr==="boolean")&&(Ae=null);var Xt=!1;if(Ae===null)Xt=!0;else switch(rr){case"bigint":case"string":case"number":Xt=!0;break;case"object":switch(Ae.$$typeof){case e:case t:Xt=!0;break;case A:return Xt=Ae._init,pe(Xt(Ae._payload),qe,Ze,zt,Tt)}}if(Xt)return Tt=Tt(Ae),Xt=zt===""?"."+Ke(Ae,0):zt,Q(Tt)?(Ze="",Xt!=null&&(Ze=Xt.replace(me,"$&/")+"/"),pe(Tt,qe,Ze,"",function(Ht){return Ht})):Tt!=null&&(_e(Tt)&&(Tt=Ce(Tt,Ze+(Tt.key==null||Ae&&Ae.key===Tt.key?"":(""+Tt.key).replace(me,"$&/")+"/")+Xt)),qe.push(Tt)),1;Xt=0;var tr=zt===""?".":zt+":";if(Q(Ae))for(var at=0;at<Ae.length;at++)zt=Ae[at],rr=tr+Ke(zt,at),Xt+=pe(zt,qe,Ze,rr,Tt);else if(at=O(Ae),typeof at=="function")for(Ae=at.call(Ae),at=0;!(zt=Ae.next()).done;)zt=zt.value,rr=tr+Ke(zt,at++),Xt+=pe(zt,qe,Ze,rr,Tt);else if(rr==="object"){if(typeof Ae.then=="function")return pe(Re(Ae),qe,Ze,zt,Tt);throw qe=String(Ae),Error("Objects are not valid as a React child (found: "+(qe==="[object Object]"?"object with keys {"+Object.keys(Ae).join(", ")+"}":qe)+"). If you meant to render a collection of children, use an array instead.")}return Xt}function ge(Ae,qe,Ze){if(Ae==null)return Ae;var zt=[],Tt=0;return pe(Ae,zt,"","",function(rr){return qe.call(Ze,rr,Tt++)}),zt}function ze(Ae){if(Ae._status===-1){var qe=Ae._result;qe=qe(),qe.then(function(Ze){(Ae._status===0||Ae._status===-1)&&(Ae._status=1,Ae._result=Ze)},function(Ze){(Ae._status===0||Ae._status===-1)&&(Ae._status=2,Ae._result=Ze)}),Ae._status===-1&&(Ae._status=0,Ae._result=qe)}if(Ae._status===1)return Ae._result.default;throw Ae._result}var Pe=typeof reportError=="function"?reportError:function(Ae){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var qe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Ae=="object"&&Ae!==null&&typeof Ae.message=="string"?String(Ae.message):String(Ae),error:Ae});if(!window.dispatchEvent(qe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Ae);return}console.error(Ae)},st={map:ge,forEach:function(Ae,qe,Ze){ge(Ae,function(){qe.apply(this,arguments)},Ze)},count:function(Ae){var qe=0;return ge(Ae,function(){qe++}),qe},toArray:function(Ae){return ge(Ae,function(qe){return qe})||[]},only:function(Ae){if(!_e(Ae))throw Error("React.Children.only expected to receive a single React element child.");return Ae}};return Kn.Activity=C,Kn.Children=st,Kn.Component=X,Kn.Fragment=r,Kn.Profiler=o,Kn.PureComponent=ne,Kn.StrictMode=n,Kn.Suspense=v,Kn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=he,Kn.__COMPILER_RUNTIME={__proto__:null,c:function(Ae){return he.H.useMemoCache(Ae)}},Kn.cache=function(Ae){return function(){return Ae.apply(null,arguments)}},Kn.cacheSignal=function(){return null},Kn.cloneElement=function(Ae,qe,Ze){if(Ae==null)throw Error("The argument must be a React element, but you passed "+Ae+".");var zt=W({},Ae.props),Tt=Ae.key;if(qe!=null)for(rr in qe.key!==void 0&&(Tt=""+qe.key),qe)!Y.call(qe,rr)||rr==="key"||rr==="__self"||rr==="__source"||rr==="ref"&&qe.ref===void 0||(zt[rr]=qe[rr]);var rr=arguments.length-2;if(rr===1)zt.children=Ze;else if(1<rr){for(var Xt=Array(rr),tr=0;tr<rr;tr++)Xt[tr]=arguments[tr+2];zt.children=Xt}return ie(Ae.type,Tt,zt)},Kn.createContext=function(Ae){return Ae={$$typeof:h,_currentValue:Ae,_currentValue2:Ae,_threadCount:0,Provider:null,Consumer:null},Ae.Provider=Ae,Ae.Consumer={$$typeof:l,_context:Ae},Ae},Kn.createElement=function(Ae,qe,Ze){var zt,Tt={},rr=null;if(qe!=null)for(zt in qe.key!==void 0&&(rr=""+qe.key),qe)Y.call(qe,zt)&&zt!=="key"&&zt!=="__self"&&zt!=="__source"&&(Tt[zt]=qe[zt]);var Xt=arguments.length-2;if(Xt===1)Tt.children=Ze;else if(1<Xt){for(var tr=Array(Xt),at=0;at<Xt;at++)tr[at]=arguments[at+2];Tt.children=tr}if(Ae&&Ae.defaultProps)for(zt in Xt=Ae.defaultProps,Xt)Tt[zt]===void 0&&(Tt[zt]=Xt[zt]);return ie(Ae,rr,Tt)},Kn.createRef=function(){return{current:null}},Kn.forwardRef=function(Ae){return{$$typeof:u,render:Ae}},Kn.isValidElement=_e,Kn.lazy=function(Ae){return{$$typeof:A,_payload:{_status:-1,_result:Ae},_init:ze}},Kn.memo=function(Ae,qe){return{$$typeof:x,type:Ae,compare:qe===void 0?null:qe}},Kn.startTransition=function(Ae){var qe=he.T,Ze={};he.T=Ze;try{var zt=Ae(),Tt=he.S;Tt!==null&&Tt(Ze,zt),typeof zt=="object"&&zt!==null&&typeof zt.then=="function"&&zt.then(de,Pe)}catch(rr){Pe(rr)}finally{qe!==null&&Ze.types!==null&&(qe.types=Ze.types),he.T=qe}},Kn.unstable_useCacheRefresh=function(){return he.H.useCacheRefresh()},Kn.use=function(Ae){return he.H.use(Ae)},Kn.useActionState=function(Ae,qe,Ze){return he.H.useActionState(Ae,qe,Ze)},Kn.useCallback=function(Ae,qe){return he.H.useCallback(Ae,qe)},Kn.useContext=function(Ae){return he.H.useContext(Ae)},Kn.useDebugValue=function(){},Kn.useDeferredValue=function(Ae,qe){return he.H.useDeferredValue(Ae,qe)},Kn.useEffect=function(Ae,qe){return he.H.useEffect(Ae,qe)},Kn.useEffectEvent=function(Ae){return he.H.useEffectEvent(Ae)},Kn.useId=function(){return he.H.useId()},Kn.useImperativeHandle=function(Ae,qe,Ze){return he.H.useImperativeHandle(Ae,qe,Ze)},Kn.useInsertionEffect=function(Ae,qe){return he.H.useInsertionEffect(Ae,qe)},Kn.useLayoutEffect=function(Ae,qe){return he.H.useLayoutEffect(Ae,qe)},Kn.useMemo=function(Ae,qe){return he.H.useMemo(Ae,qe)},Kn.useOptimistic=function(Ae,qe){return he.H.useOptimistic(Ae,qe)},Kn.useReducer=function(Ae,qe,Ze){return he.H.useReducer(Ae,qe,Ze)},Kn.useRef=function(Ae){return he.H.useRef(Ae)},Kn.useState=function(Ae){return he.H.useState(Ae)},Kn.useSyncExternalStore=function(Ae,qe,Ze){return he.H.useSyncExternalStore(Ae,qe,Ze)},Kn.useTransition=function(){return he.H.useTransition()},Kn.version="19.2.1",Kn}var pA;function A0(){return pA||(pA=1,_b.exports=oI()),_b.exports}var N=A0();const Ei=Fl(N),sI=nI({__proto__:null,default:Ei},[N]);var bb={exports:{}},ev={},wb={exports:{}},Sb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gA;function lI(){return gA||(gA=1,(function(e){function t(pe,ge){var ze=pe.length;pe.push(ge);e:for(;0<ze;){var Pe=ze-1>>>1,st=pe[Pe];if(0<o(st,ge))pe[Pe]=ge,pe[ze]=st,ze=Pe;else break e}}function r(pe){return pe.length===0?null:pe[0]}function n(pe){if(pe.length===0)return null;var ge=pe[0],ze=pe.pop();if(ze!==ge){pe[0]=ze;e:for(var Pe=0,st=pe.length,Ae=st>>>1;Pe<Ae;){var qe=2*(Pe+1)-1,Ze=pe[qe],zt=qe+1,Tt=pe[zt];if(0>o(Ze,ze))zt<st&&0>o(Tt,Ze)?(pe[Pe]=Tt,pe[zt]=ze,Pe=zt):(pe[Pe]=Ze,pe[qe]=ze,Pe=qe);else if(zt<st&&0>o(Tt,ze))pe[Pe]=Tt,pe[zt]=ze,Pe=zt;else break e}}return ge}function o(pe,ge){var ze=pe.sortIndex-ge.sortIndex;return ze!==0?ze:pe.id-ge.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var h=Date,u=h.now();e.unstable_now=function(){return h.now()-u}}var v=[],x=[],A=1,C=null,P=3,O=!1,U=!1,W=!1,G=!1,X=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function ue(pe){for(var ge=r(x);ge!==null;){if(ge.callback===null)n(x);else if(ge.startTime<=pe)n(x),ge.sortIndex=ge.expirationTime,t(v,ge);else break;ge=r(x)}}function Q(pe){if(W=!1,ue(pe),!U)if(r(v)!==null)U=!0,de||(de=!0,Me());else{var ge=r(x);ge!==null&&Re(Q,ge.startTime-pe)}}var de=!1,he=-1,Y=5,ie=-1;function Ce(){return G?!0:!(e.unstable_now()-ie<Y)}function _e(){if(G=!1,de){var pe=e.unstable_now();ie=pe;var ge=!0;try{e:{U=!1,W&&(W=!1,ae(he),he=-1),O=!0;var ze=P;try{t:{for(ue(pe),C=r(v);C!==null&&!(C.expirationTime>pe&&Ce());){var Pe=C.callback;if(typeof Pe=="function"){C.callback=null,P=C.priorityLevel;var st=Pe(C.expirationTime<=pe);if(pe=e.unstable_now(),typeof st=="function"){C.callback=st,ue(pe),ge=!0;break t}C===r(v)&&n(v),ue(pe)}else n(v);C=r(v)}if(C!==null)ge=!0;else{var Ae=r(x);Ae!==null&&Re(Q,Ae.startTime-pe),ge=!1}}break e}finally{C=null,P=ze,O=!1}ge=void 0}}finally{ge?Me():de=!1}}}var Me;if(typeof ne=="function")Me=function(){ne(_e)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,Ke=me.port2;me.port1.onmessage=_e,Me=function(){Ke.postMessage(null)}}else Me=function(){X(_e,0)};function Re(pe,ge){he=X(function(){pe(e.unstable_now())},ge)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(pe){pe.callback=null},e.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<pe?Math.floor(1e3/pe):5},e.unstable_getCurrentPriorityLevel=function(){return P},e.unstable_next=function(pe){switch(P){case 1:case 2:case 3:var ge=3;break;default:ge=P}var ze=P;P=ge;try{return pe()}finally{P=ze}},e.unstable_requestPaint=function(){G=!0},e.unstable_runWithPriority=function(pe,ge){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var ze=P;P=pe;try{return ge()}finally{P=ze}},e.unstable_scheduleCallback=function(pe,ge,ze){var Pe=e.unstable_now();switch(typeof ze=="object"&&ze!==null?(ze=ze.delay,ze=typeof ze=="number"&&0<ze?Pe+ze:Pe):ze=Pe,pe){case 1:var st=-1;break;case 2:st=250;break;case 5:st=1073741823;break;case 4:st=1e4;break;default:st=5e3}return st=ze+st,pe={id:A++,callback:ge,priorityLevel:pe,startTime:ze,expirationTime:st,sortIndex:-1},ze>Pe?(pe.sortIndex=ze,t(x,pe),r(v)===null&&pe===r(x)&&(W?(ae(he),he=-1):W=!0,Re(Q,ze-Pe))):(pe.sortIndex=st,t(v,pe),U||O||(U=!0,de||(de=!0,Me()))),pe},e.unstable_shouldYield=Ce,e.unstable_wrapCallback=function(pe){var ge=P;return function(){var ze=P;P=ge;try{return pe.apply(this,arguments)}finally{P=ze}}}})(Sb)),Sb}var mA;function uI(){return mA||(mA=1,wb.exports=lI()),wb.exports}var Eb={exports:{}},ru={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yA;function cI(){if(yA)return ru;yA=1;var e=A0();function t(v){var x="https://react.dev/errors/"+v;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)x+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+v+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(v,x,A){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:C==null?null:""+C,children:v,containerInfo:x,implementation:A}}var h=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(v,x){if(v==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return ru.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,ru.createPortal=function(v,x){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(t(299));return l(v,x,null,A)},ru.flushSync=function(v){var x=h.T,A=n.p;try{if(h.T=null,n.p=2,v)return v()}finally{h.T=x,n.p=A,n.d.f()}},ru.preconnect=function(v,x){typeof v=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,n.d.C(v,x))},ru.prefetchDNS=function(v){typeof v=="string"&&n.d.D(v)},ru.preinit=function(v,x){if(typeof v=="string"&&x&&typeof x.as=="string"){var A=x.as,C=u(A,x.crossOrigin),P=typeof x.integrity=="string"?x.integrity:void 0,O=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;A==="style"?n.d.S(v,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:C,integrity:P,fetchPriority:O}):A==="script"&&n.d.X(v,{crossOrigin:C,integrity:P,fetchPriority:O,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},ru.preinitModule=function(v,x){if(typeof v=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var A=u(x.as,x.crossOrigin);n.d.M(v,{crossOrigin:A,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&n.d.M(v)},ru.preload=function(v,x){if(typeof v=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var A=x.as,C=u(A,x.crossOrigin);n.d.L(v,A,{crossOrigin:C,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},ru.preloadModule=function(v,x){if(typeof v=="string")if(x){var A=u(x.as,x.crossOrigin);n.d.m(v,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:A,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else n.d.m(v)},ru.requestFormReset=function(v){n.d.r(v)},ru.unstable_batchedUpdates=function(v,x){return v(x)},ru.useFormState=function(v,x,A){return h.H.useFormState(v,x,A)},ru.useFormStatus=function(){return h.H.useHostTransitionStatus()},ru.version="19.2.1",ru}var vA;function l6(){if(vA)return Eb.exports;vA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Eb.exports=cI(),Eb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xA;function dI(){if(xA)return ev;xA=1;var e=uI(),t=A0(),r=l6();function n(s){var d="https://react.dev/errors/"+s;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+s+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var d=s,g=s;if(s.alternate)for(;d.return;)d=d.return;else{s=d;do d=s,(d.flags&4098)!==0&&(g=d.return),s=d.return;while(s)}return d.tag===3?g:null}function h(s){if(s.tag===13){var d=s.memoizedState;if(d===null&&(s=s.alternate,s!==null&&(d=s.memoizedState)),d!==null)return d.dehydrated}return null}function u(s){if(s.tag===31){var d=s.memoizedState;if(d===null&&(s=s.alternate,s!==null&&(d=s.memoizedState)),d!==null)return d.dehydrated}return null}function v(s){if(l(s)!==s)throw Error(n(188))}function x(s){var d=s.alternate;if(!d){if(d=l(s),d===null)throw Error(n(188));return d!==s?null:s}for(var g=s,E=d;;){var L=g.return;if(L===null)break;var F=L.alternate;if(F===null){if(E=L.return,E!==null){g=E;continue}break}if(L.child===F.child){for(F=L.child;F;){if(F===g)return v(L),s;if(F===E)return v(L),d;F=F.sibling}throw Error(n(188))}if(g.return!==E.return)g=L,E=F;else{for(var ee=!1,Se=L.child;Se;){if(Se===g){ee=!0,g=L,E=F;break}if(Se===E){ee=!0,E=L,g=F;break}Se=Se.sibling}if(!ee){for(Se=F.child;Se;){if(Se===g){ee=!0,g=F,E=L;break}if(Se===E){ee=!0,E=F,g=L;break}Se=Se.sibling}if(!ee)throw Error(n(189))}}if(g.alternate!==E)throw Error(n(190))}if(g.tag!==3)throw Error(n(188));return g.stateNode.current===g?s:d}function A(s){var d=s.tag;if(d===5||d===26||d===27||d===6)return s;for(s=s.child;s!==null;){if(d=A(s),d!==null)return d;s=s.sibling}return null}var C=Object.assign,P=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),ae=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),he=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),ie=Symbol.for("react.activity"),Ce=Symbol.for("react.memo_cache_sentinel"),_e=Symbol.iterator;function Me(s){return s===null||typeof s!="object"?null:(s=_e&&s[_e]||s["@@iterator"],typeof s=="function"?s:null)}var me=Symbol.for("react.client.reference");function Ke(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===me?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case W:return"Fragment";case X:return"Profiler";case G:return"StrictMode";case Q:return"Suspense";case de:return"SuspenseList";case ie:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case U:return"Portal";case ne:return s.displayName||"Context";case ae:return(s._context.displayName||"Context")+".Consumer";case ue:var d=s.render;return s=s.displayName,s||(s=d.displayName||d.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case he:return d=s.displayName||null,d!==null?d:Ke(s.type)||"Memo";case Y:d=s._payload,s=s._init;try{return Ke(s(d))}catch{}}return null}var Re=Array.isArray,pe=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ze={pending:!1,data:null,method:null,action:null},Pe=[],st=-1;function Ae(s){return{current:s}}function qe(s){0>st||(s.current=Pe[st],Pe[st]=null,st--)}function Ze(s,d){st++,Pe[st]=s.current,s.current=d}var zt=Ae(null),Tt=Ae(null),rr=Ae(null),Xt=Ae(null);function tr(s,d){switch(Ze(rr,d),Ze(Tt,s),Ze(zt,null),d.nodeType){case 9:case 11:s=(s=d.documentElement)&&(s=s.namespaceURI)?M(s):0;break;default:if(s=d.tagName,d=d.namespaceURI)d=M(d),s=z(d,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}qe(zt),Ze(zt,s)}function at(){qe(zt),qe(Tt),qe(rr)}function Ht(s){s.memoizedState!==null&&Ze(Xt,s);var d=zt.current,g=z(d,s.type);d!==g&&(Ze(Tt,s),Ze(zt,g))}function Mt(s){Tt.current===s&&(qe(zt),qe(Tt)),Xt.current===s&&(qe(Xt),yh._currentValue=ze)}var pt,Pr;function Lt(s){if(pt===void 0)try{throw Error()}catch(g){var d=g.stack.trim().match(/\n( *(at )?)/);pt=d&&d[1]||"",Pr=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pt+s+Pr}var Wt=!1;function ke(s,d){if(!s||Wt)return"";Wt=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(d){var Kt=function(){throw Error()};if(Object.defineProperty(Kt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Kt,[])}catch(It){var kt=It}Reflect.construct(s,[],Kt)}else{try{Kt.call()}catch(It){kt=It}s.call(Kt.prototype)}}else{try{throw Error()}catch(It){kt=It}(Kt=s())&&typeof Kt.catch=="function"&&Kt.catch(function(){})}}catch(It){if(It&&kt&&typeof It.stack=="string")return[It.stack,kt.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var L=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");L&&L.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var F=E.DetermineComponentFrameRoot(),ee=F[0],Se=F[1];if(ee&&Se){var Xe=ee.split(`
`),Et=Se.split(`
`);for(L=E=0;E<Xe.length&&!Xe[E].includes("DetermineComponentFrameRoot");)E++;for(;L<Et.length&&!Et[L].includes("DetermineComponentFrameRoot");)L++;if(E===Xe.length||L===Et.length)for(E=Xe.length-1,L=Et.length-1;1<=E&&0<=L&&Xe[E]!==Et[L];)L--;for(;1<=E&&0<=L;E--,L--)if(Xe[E]!==Et[L]){if(E!==1||L!==1)do if(E--,L--,0>L||Xe[E]!==Et[L]){var Ut=`
`+Xe[E].replace(" at new "," at ");return s.displayName&&Ut.includes("<anonymous>")&&(Ut=Ut.replace("<anonymous>",s.displayName)),Ut}while(1<=E&&0<=L);break}}}finally{Wt=!1,Error.prepareStackTrace=g}return(g=s?s.displayName||s.name:"")?Lt(g):""}function Xr(s,d){switch(s.tag){case 26:case 27:case 5:return Lt(s.type);case 16:return Lt("Lazy");case 13:return s.child!==d&&d!==null?Lt("Suspense Fallback"):Lt("Suspense");case 19:return Lt("SuspenseList");case 0:case 15:return ke(s.type,!1);case 11:return ke(s.type.render,!1);case 1:return ke(s.type,!0);case 31:return Lt("Activity");default:return""}}function rn(s){try{var d="",g=null;do d+=Xr(s,g),g=s,s=s.return;while(s);return d}catch(E){return`
Error generating stack: `+E.message+`
`+E.stack}}var vr=Object.prototype.hasOwnProperty,Wr=e.unstable_scheduleCallback,Hn=e.unstable_cancelCallback,fi=e.unstable_shouldYield,ba=e.unstable_requestPaint,Rn=e.unstable_now,ai=e.unstable_getCurrentPriorityLevel,pi=e.unstable_ImmediatePriority,oi=e.unstable_UserBlockingPriority,Rt=e.unstable_NormalPriority,Fi=e.unstable_LowPriority,Fn=e.unstable_IdlePriority,Pi=e.log,ca=e.unstable_setDisableYieldValue,nr=null,kr=null;function jr(s){if(typeof Pi=="function"&&ca(s),kr&&typeof kr.setStrictMode=="function")try{kr.setStrictMode(nr,s)}catch{}}var Jn=Math.clz32?Math.clz32:Go,Xa=Math.log,nn=Math.LN2;function Go(s){return s>>>=0,s===0?32:31-(Xa(s)/nn|0)|0}var Uo=256,Io=262144,wo=4194304;function Ne(s){var d=s&42;if(d!==0)return d;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function se(s,d,g){var E=s.pendingLanes;if(E===0)return 0;var L=0,F=s.suspendedLanes,ee=s.pingedLanes;s=s.warmLanes;var Se=E&134217727;return Se!==0?(E=Se&~F,E!==0?L=Ne(E):(ee&=Se,ee!==0?L=Ne(ee):g||(g=Se&~s,g!==0&&(L=Ne(g))))):(Se=E&~F,Se!==0?L=Ne(Se):ee!==0?L=Ne(ee):g||(g=E&~s,g!==0&&(L=Ne(g)))),L===0?0:d!==0&&d!==L&&(d&F)===0&&(F=L&-L,g=d&-d,F>=g||F===32&&(g&4194048)!==0)?d:L}function le(s,d){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&d)===0}function Ee(s,d){switch(s){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ie(){var s=wo;return wo<<=1,(wo&62914560)===0&&(wo=4194304),s}function Ye(s){for(var d=[],g=0;31>g;g++)d.push(s);return d}function tt(s,d){s.pendingLanes|=d,d!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ut(s,d,g,E,L,F){var ee=s.pendingLanes;s.pendingLanes=g,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=g,s.entangledLanes&=g,s.errorRecoveryDisabledLanes&=g,s.shellSuspendCounter=0;var Se=s.entanglements,Xe=s.expirationTimes,Et=s.hiddenUpdates;for(g=ee&~g;0<g;){var Ut=31-Jn(g),Kt=1<<Ut;Se[Ut]=0,Xe[Ut]=-1;var kt=Et[Ut];if(kt!==null)for(Et[Ut]=null,Ut=0;Ut<kt.length;Ut++){var It=kt[Ut];It!==null&&(It.lane&=-536870913)}g&=~Kt}E!==0&&Ue(s,E,0),F!==0&&L===0&&s.tag!==0&&(s.suspendedLanes|=F&~(ee&~d))}function Ue(s,d,g){s.pendingLanes|=d,s.suspendedLanes&=~d;var E=31-Jn(d);s.entangledLanes|=d,s.entanglements[E]=s.entanglements[E]|1073741824|g&261930}function At(s,d){var g=s.entangledLanes|=d;for(s=s.entanglements;g;){var E=31-Jn(g),L=1<<E;L&d|s[E]&d&&(s[E]|=d),g&=~L}}function Vt(s,d){var g=d&-d;return g=(g&42)!==0?1:_t(g),(g&(s.suspendedLanes|d))!==0?0:g}function _t(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function lr(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Lr(){var s=ge.p;return s!==0?s:(s=window.event,s===void 0?32:Fo(s.type))}function $r(s,d){var g=ge.p;try{return ge.p=s,d()}finally{ge.p=g}}var wn=Math.random().toString(36).slice(2),Ir="__reactFiber$"+wn,cn="__reactProps$"+wn,_n="__reactContainer$"+wn,ea="__reactEvents$"+wn,gi="__reactListeners$"+wn,Sn="__reactHandles$"+wn,si="__reactResources$"+wn,li="__reactMarker$"+wn;function Ca(s){delete s[Ir],delete s[cn],delete s[ea],delete s[gi],delete s[Sn]}function Hi(s){var d=s[Ir];if(d)return d;for(var g=s.parentNode;g;){if(d=g[_n]||g[Ir]){if(g=d.alternate,d.child!==null||g!==null&&g.child!==null)for(s=Er(s);s!==null;){if(g=s[Ir])return g;s=Er(s)}return d}s=g,g=s.parentNode}return null}function $i(s){if(s=s[Ir]||s[_n]){var d=s.tag;if(d===5||d===6||d===13||d===31||d===26||d===27||d===3)return s}return null}function Hs(s){var d=s.tag;if(d===5||d===26||d===27||d===6)return s.stateNode;throw Error(n(33))}function Nn(s){var d=s[si];return d||(d=s[si]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function Ta(s){s[li]=!0}var dc=new Set,Oo={};function wa(s,d){vl(s,d),vl(s+"Capture",d)}function vl(s,d){for(Oo[s]=d,s=0;s<d.length;s++)dc.add(d[s])}var jo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),So={},Gl={};function Ul(s){return vr.call(Gl,s)?!0:vr.call(So,s)?!1:jo.test(s)?Gl[s]=!0:(So[s]=!0,!1)}function Zi(s,d,g){if(Ul(d))if(g===null)s.removeAttribute(d);else{switch(typeof g){case"undefined":case"function":case"symbol":s.removeAttribute(d);return;case"boolean":var E=d.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){s.removeAttribute(d);return}}s.setAttribute(d,""+g)}}function Zs(s,d,g){if(g===null)s.removeAttribute(d);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(d);return}s.setAttribute(d,""+g)}}function da(s,d,g,E){if(E===null)s.removeAttribute(g);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(g);return}s.setAttributeNS(d,g,""+E)}}function Qn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Vl(s){var d=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function ls(s,d,g){var E=Object.getOwnPropertyDescriptor(s.constructor.prototype,d);if(!s.hasOwnProperty(d)&&typeof E<"u"&&typeof E.get=="function"&&typeof E.set=="function"){var L=E.get,F=E.set;return Object.defineProperty(s,d,{configurable:!0,get:function(){return L.call(this)},set:function(ee){g=""+ee,F.call(this,ee)}}),Object.defineProperty(s,d,{enumerable:E.enumerable}),{getValue:function(){return g},setValue:function(ee){g=""+ee},stopTracking:function(){s._valueTracker=null,delete s[d]}}}}function lu(s){if(!s._valueTracker){var d=Vl(s)?"checked":"value";s._valueTracker=ls(s,d,""+s[d])}}function lo(s){if(!s)return!1;var d=s._valueTracker;if(!d)return!0;var g=d.getValue(),E="";return s&&(E=Vl(s)?s.checked?"true":"false":s.value),s=E,s!==g?(d.setValue(s),!0):!1}function hc(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Kc=/[\n"\\]/g;function La(s){return s.replace(Kc,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function Vo(s,d,g,E,L,F,ee,Se){s.name="",ee!=null&&typeof ee!="function"&&typeof ee!="symbol"&&typeof ee!="boolean"?s.type=ee:s.removeAttribute("type"),d!=null?ee==="number"?(d===0&&s.value===""||s.value!=d)&&(s.value=""+Qn(d)):s.value!==""+Qn(d)&&(s.value=""+Qn(d)):ee!=="submit"&&ee!=="reset"||s.removeAttribute("value"),d!=null?fc(s,ee,Qn(d)):g!=null?fc(s,ee,Qn(g)):E!=null&&s.removeAttribute("value"),L==null&&F!=null&&(s.defaultChecked=!!F),L!=null&&(s.checked=L&&typeof L!="function"&&typeof L!="symbol"),Se!=null&&typeof Se!="function"&&typeof Se!="symbol"&&typeof Se!="boolean"?s.name=""+Qn(Se):s.removeAttribute("name")}function Zn(s,d,g,E,L,F,ee,Se){if(F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(s.type=F),d!=null||g!=null){if(!(F!=="submit"&&F!=="reset"||d!=null)){lu(s);return}g=g!=null?""+Qn(g):"",d=d!=null?""+Qn(d):g,Se||d===s.value||(s.value=d),s.defaultValue=d}E=E??L,E=typeof E!="function"&&typeof E!="symbol"&&!!E,s.checked=Se?s.checked:!!E,s.defaultChecked=!!E,ee!=null&&typeof ee!="function"&&typeof ee!="symbol"&&typeof ee!="boolean"&&(s.name=ee),lu(s)}function fc(s,d,g){d==="number"&&hc(s.ownerDocument)===s||s.defaultValue===""+g||(s.defaultValue=""+g)}function qo(s,d,g,E){if(s=s.options,d){d={};for(var L=0;L<g.length;L++)d["$"+g[L]]=!0;for(g=0;g<s.length;g++)L=d.hasOwnProperty("$"+s[g].value),s[g].selected!==L&&(s[g].selected=L),L&&E&&(s[g].defaultSelected=!0)}else{for(g=""+Qn(g),d=null,L=0;L<s.length;L++){if(s[L].value===g){s[L].selected=!0,E&&(s[L].defaultSelected=!0);return}d!==null||s[L].disabled||(d=s[L])}d!==null&&(d.selected=!0)}}function xl(s,d,g){if(d!=null&&(d=""+Qn(d),d!==s.value&&(s.value=d),g==null)){s.defaultValue!==d&&(s.defaultValue=d);return}s.defaultValue=g!=null?""+Qn(g):""}function vt(s,d,g,E){if(d==null){if(E!=null){if(g!=null)throw Error(n(92));if(Re(E)){if(1<E.length)throw Error(n(93));E=E[0]}g=E}g==null&&(g=""),d=g}g=Qn(d),s.defaultValue=g,E=s.textContent,E===g&&E!==""&&E!==null&&(s.value=E),lu(s)}function Ge(s,d){if(d){var g=s.firstChild;if(g&&g===s.lastChild&&g.nodeType===3){g.nodeValue=d;return}}s.textContent=d}var ot=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ht(s,d,g){var E=d.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?E?s.setProperty(d,""):d==="float"?s.cssFloat="":s[d]="":E?s.setProperty(d,g):typeof g!="number"||g===0||ot.has(d)?d==="float"?s.cssFloat=g:s[d]=(""+g).trim():s[d]=g+"px"}function $t(s,d,g){if(d!=null&&typeof d!="object")throw Error(n(62));if(s=s.style,g!=null){for(var E in g)!g.hasOwnProperty(E)||d!=null&&d.hasOwnProperty(E)||(E.indexOf("--")===0?s.setProperty(E,""):E==="float"?s.cssFloat="":s[E]="");for(var L in d)E=d[L],d.hasOwnProperty(L)&&g[L]!==E&&ht(s,L,E)}else for(var F in d)d.hasOwnProperty(F)&&ht(s,F,d[F])}function Gr(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xt(s){return jt.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Nt(){}var Yr=null;function Tr(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Gt=null,gn=null;function He(s){var d=$i(s);if(d&&(s=d.stateNode)){var g=s[cn]||null;e:switch(s=d.stateNode,d.type){case"input":if(Vo(s,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),d=g.name,g.type==="radio"&&d!=null){for(g=s;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+La(""+d)+'"][type="radio"]'),d=0;d<g.length;d++){var E=g[d];if(E!==s&&E.form===s.form){var L=E[cn]||null;if(!L)throw Error(n(90));Vo(E,L.value,L.defaultValue,L.defaultValue,L.checked,L.defaultChecked,L.type,L.name)}}for(d=0;d<g.length;d++)E=g[d],E.form===s.form&&lo(E)}break e;case"textarea":xl(s,g.value,g.defaultValue);break e;case"select":d=g.value,d!=null&&qo(s,!!g.multiple,d,!1)}}}var bt=!1;function ct(s,d,g){if(bt)return s(d,g);bt=!0;try{var E=s(d);return E}finally{if(bt=!1,(Gt!==null||gn!==null)&&(yp(),Gt&&(d=Gt,s=gn,gn=Gt=null,He(d),s)))for(d=0;d<s.length;d++)He(s[d])}}function yt(s,d){var g=s.stateNode;if(g===null)return null;var E=g[cn]||null;if(E===null)return null;g=E[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(s=s.type,E=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!E;break e;default:s=!1}if(s)return null;if(g&&typeof g!="function")throw Error(n(231,d,typeof g));return g}var Or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nr=!1;if(Or)try{var gr={};Object.defineProperty(gr,"passive",{get:function(){Nr=!0}}),window.addEventListener("test",gr,gr),window.removeEventListener("test",gr,gr)}catch{Nr=!1}var mn=null,Xn=null,qt=null;function Br(){if(qt)return qt;var s,d=Xn,g=d.length,E,L="value"in mn?mn.value:mn.textContent,F=L.length;for(s=0;s<g&&d[s]===L[s];s++);var ee=g-s;for(E=1;E<=ee&&d[g-E]===L[F-E];E++);return qt=L.slice(s,1<E?1-E:void 0)}function Ai(s){var d=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&d===13&&(s=13)):s=d,s===10&&(s=13),32<=s||s===13?s:0}function Sa(){return!0}function Wo(){return!1}function bi(s){function d(g,E,L,F,ee){this._reactName=g,this._targetInst=L,this.type=E,this.nativeEvent=F,this.target=ee,this.currentTarget=null;for(var Se in s)s.hasOwnProperty(Se)&&(g=s[Se],this[Se]=g?g(F):F[Se]);return this.isDefaultPrevented=(F.defaultPrevented!=null?F.defaultPrevented:F.returnValue===!1)?Sa:Wo,this.isPropagationStopped=Wo,this}return C(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Sa)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Sa)},persist:function(){},isPersistent:Sa}),d}var wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ho=bi(wi),Ki=C({},wi,{view:0,detail:0}),uo=bi(Ki),$n,Dn,Ro,ks=C({},Ki,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ud,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ro&&(Ro&&s.type==="mousemove"?($n=s.screenX-Ro.screenX,Dn=s.screenY-Ro.screenY):Dn=$n=0,Ro=s),$n)},movementY:function(s){return"movementY"in s?s.movementY:Dn}}),_l=bi(ks),Ks=C({},ks,{dataTransfer:0}),jf=bi(Ks),og=C({},Ki,{relatedTarget:0}),Gd=bi(og),zh=C({},wi,{animationName:0,elapsedTime:0,pseudoElement:0}),Rf=bi(zh),Nf=C({},wi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),us=bi(Nf),sg=C({},wi,{data:0}),Ya=bi(sg),lg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ug={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nu(s){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(s):(s=uu[s])?!!d[s]:!1}function Ud(){return Nu}var Gi=C({},Ki,{key:function(s){if(s.key){var d=lg[s.key]||s.key;if(d!=="Unidentified")return d}return s.type==="keypress"?(s=Ai(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ug[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ud,charCode:function(s){return s.type==="keypress"?Ai(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ai(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Bu=bi(Gi),Bf=C({},ks,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ff=bi(Bf),Ph=C({},Ki,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ud}),cg=bi(Ph),$f=C({},wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),dg=bi($f),Vd=C({},ks,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Xs=bi(Vd),Fu=C({},wi,{newState:0,oldState:0}),Gf=bi(Fu),Lh=[9,13,27,32],pc=Or&&"CompositionEvent"in window,cu=null;Or&&"documentMode"in document&&(cu=document.documentMode);var du=Or&&"TextEvent"in window&&!cu,qd=Or&&(!pc||cu&&8<cu&&11>=cu),hg=" ",ta=!1;function Ih(s,d){switch(s){case"keyup":return Lh.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mn(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ql=!1;function Gn(s,d){switch(s){case"compositionend":return Mn(d);case"keypress":return d.which!==32?null:(ta=!0,hg);case"textInput":return s=d.data,s===hg&&ta?null:s;default:return null}}function mi(s,d){if(ql)return s==="compositionend"||!pc&&Ih(s,d)?(s=Br(),qt=Xn=mn=null,ql=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return qd&&d.locale!=="ko"?null:d.data;default:return null}}var bl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gc(s){var d=s&&s.nodeName&&s.nodeName.toLowerCase();return d==="input"?!!bl[s.type]:d==="textarea"}function mc(s,d,g,E){Gt?gn?gn.push(E):gn=[E]:Gt=E,d=xf(d,"onChange"),0<d.length&&(g=new Ho("onChange","change",null,g,E),s.push({event:g,listeners:d}))}var yc=null,wl=null;function Xc(s){Gg(s,0)}function Zo(s){var d=Hs(s);if(lo(d))return s}function Oh(s,d){if(s==="change")return d}var hu=!1;if(Or){var Wd;if(Or){var fu="oninput"in document;if(!fu){var $u=document.createElement("div");$u.setAttribute("oninput","return;"),fu=typeof $u.oninput=="function"}Wd=fu}else Wd=!1;hu=Wd&&(!document.documentMode||9<document.documentMode)}function vc(){yc&&(yc.detachEvent("onpropertychange",cs),wl=yc=null)}function cs(s){if(s.propertyName==="value"&&Zo(wl)){var d=[];mc(d,wl,s,Tr(s)),ct(Xc,d)}}function Gu(s,d,g){s==="focusin"?(vc(),yc=d,wl=g,yc.attachEvent("onpropertychange",cs)):s==="focusout"&&vc()}function jh(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Zo(wl)}function Yc(s,d){if(s==="click")return Zo(d)}function Jc(s,d){if(s==="input"||s==="change")return Zo(d)}function xc(s,d){return s===d&&(s!==0||1/s===1/d)||s!==s&&d!==d}var ra=typeof Object.is=="function"?Object.is:xc;function Un(s,d){if(ra(s,d))return!0;if(typeof s!="object"||s===null||typeof d!="object"||d===null)return!1;var g=Object.keys(s),E=Object.keys(d);if(g.length!==E.length)return!1;for(E=0;E<g.length;E++){var L=g[E];if(!vr.call(d,L)||!ra(s[L],d[L]))return!1}return!0}function Hd(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function fg(s,d){var g=Hd(s);s=0;for(var E;g;){if(g.nodeType===3){if(E=s+g.textContent.length,s<=d&&E>=d)return{node:g,offset:d-s};s=E}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=Hd(g)}}function Uf(s,d){return s&&d?s===d?!0:s&&s.nodeType===3?!1:d&&d.nodeType===3?Uf(s,d.parentNode):"contains"in s?s.contains(d):s.compareDocumentPosition?!!(s.compareDocumentPosition(d)&16):!1:!1}function _c(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var d=hc(s.document);d instanceof s.HTMLIFrameElement;){try{var g=typeof d.contentWindow.location.href=="string"}catch{g=!1}if(g)s=d.contentWindow;else break;d=hc(s.document)}return d}function Rh(s){var d=s&&s.nodeName&&s.nodeName.toLowerCase();return d&&(d==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||d==="textarea"||s.contentEditable==="true")}var pu=Or&&"documentMode"in document&&11>=document.documentMode,lt=null,Ft=null,Ct=null,Cr=!1;function hn(s,d,g){var E=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;Cr||lt==null||lt!==hc(E)||(E=lt,"selectionStart"in E&&Rh(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),Ct&&Un(Ct,E)||(Ct=E,E=xf(Ft,"onSelect"),0<E.length&&(d=new Ho("onSelect","select",null,d,g),s.push({event:d,listeners:E}),d.target=lt)))}function zn(s,d){var g={};return g[s.toLowerCase()]=d.toLowerCase(),g["Webkit"+s]="webkit"+d,g["Moz"+s]="moz"+d,g}var ki={animationend:zn("Animation","AnimationEnd"),animationiteration:zn("Animation","AnimationIteration"),animationstart:zn("Animation","AnimationStart"),transitionrun:zn("Transition","TransitionRun"),transitionstart:zn("Transition","TransitionStart"),transitioncancel:zn("Transition","TransitionCancel"),transitionend:zn("Transition","TransitionEnd")},yi={},gu={};Or&&(gu=document.createElement("div").style,"AnimationEvent"in window||(delete ki.animationend.animation,delete ki.animationiteration.animation,delete ki.animationstart.animation),"TransitionEvent"in window||delete ki.transitionend.transition);function Sl(s){if(yi[s])return yi[s];if(!ki[s])return s;var d=ki[s],g;for(g in d)if(d.hasOwnProperty(g)&&g in gu)return yi[s]=d[g];return s}var No=Sl("animationend"),Uu=Sl("animationiteration"),Nh=Sl("animationstart"),Qc=Sl("transitionrun"),Zd=Sl("transitionstart"),bc=Sl("transitioncancel"),ui=Sl("transitionend"),ed=new Map,Vu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vu.push("scrollEnd");function Ci(s,d){ed.set(s,d),wa(d,[s])}var Wl=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Cs=[],wc=0,Ui=0;function Ia(){for(var s=wc,d=Ui=wc=0;d<s;){var g=Cs[d];Cs[d++]=null;var E=Cs[d];Cs[d++]=null;var L=Cs[d];Cs[d++]=null;var F=Cs[d];if(Cs[d++]=null,E!==null&&L!==null){var ee=E.pending;ee===null?L.next=L:(L.next=ee.next,ee.next=L),E.pending=L}F!==0&&td(g,L,F)}}function Ja(s,d,g,E){Cs[wc++]=s,Cs[wc++]=d,Cs[wc++]=g,Cs[wc++]=E,Ui|=E,s.lanes|=E,s=s.alternate,s!==null&&(s.lanes|=E)}function qu(s,d,g,E){return Ja(s,d,g,E),Hl(s)}function Ys(s,d){return Ja(s,null,null,d),Hl(s)}function td(s,d,g){s.lanes|=g;var E=s.alternate;E!==null&&(E.lanes|=g);for(var L=!1,F=s.return;F!==null;)F.childLanes|=g,E=F.alternate,E!==null&&(E.childLanes|=g),F.tag===22&&(s=F.stateNode,s===null||s._visibility&1||(L=!0)),s=F,F=F.return;return s.tag===3?(F=s.stateNode,L&&d!==null&&(L=31-Jn(g),s=F.hiddenUpdates,E=s[L],E===null?s[L]=[d]:E.push(d),d.lane=g|536870912),F):null}function Hl(s){if(50<vd)throw vd=0,mp=null,Error(n(185));for(var d=s.return;d!==null;)s=d,d=s.return;return s.tag===3?s.stateNode:null}var Eo={};function Bh(s,d,g,E){this.tag=s,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qa(s,d,g,E){return new Bh(s,d,g,E)}function El(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ko(s,d){var g=s.alternate;return g===null?(g=qa(s.tag,d,s.key,s.mode),g.elementType=s.elementType,g.type=s.type,g.stateNode=s.stateNode,g.alternate=s,s.alternate=g):(g.pendingProps=d,g.type=s.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=s.flags&65011712,g.childLanes=s.childLanes,g.lanes=s.lanes,g.child=s.child,g.memoizedProps=s.memoizedProps,g.memoizedState=s.memoizedState,g.updateQueue=s.updateQueue,d=s.dependencies,g.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},g.sibling=s.sibling,g.index=s.index,g.ref=s.ref,g.refCleanup=s.refCleanup,g}function Fh(s,d){s.flags&=65011714;var g=s.alternate;return g===null?(s.childLanes=0,s.lanes=d,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=g.childLanes,s.lanes=g.lanes,s.child=g.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=g.memoizedProps,s.memoizedState=g.memoizedState,s.updateQueue=g.updateQueue,s.type=g.type,d=g.dependencies,s.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),s}function rd(s,d,g,E,L,F){var ee=0;if(E=s,typeof s=="function")El(s)&&(ee=1);else if(typeof s=="string")ee=Il(s,g,zt.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case ie:return s=qa(31,g,d,L),s.elementType=ie,s.lanes=F,s;case W:return Ts(g.children,L,F,d);case G:ee=8,L|=24;break;case X:return s=qa(12,g,d,L|2),s.elementType=X,s.lanes=F,s;case Q:return s=qa(13,g,d,L),s.elementType=Q,s.lanes=F,s;case de:return s=qa(19,g,d,L),s.elementType=de,s.lanes=F,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case ne:ee=10;break e;case ae:ee=9;break e;case ue:ee=11;break e;case he:ee=14;break e;case Y:ee=16,E=null;break e}ee=29,g=Error(n(130,s===null?"null":typeof s,"")),E=null}return d=qa(ee,g,d,L),d.elementType=s,d.type=E,d.lanes=F,d}function Ts(s,d,g,E){return s=qa(7,s,E,d),s.lanes=g,s}function mu(s,d,g){return s=qa(6,s,null,d),s.lanes=g,s}function yu(s){var d=qa(18,null,null,0);return d.stateNode=s,d}function Sc(s,d,g){return d=qa(4,s.children!==null?s.children:[],s.key,d),d.lanes=g,d.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},d}var $h=new WeakMap;function Xo(s,d){if(typeof s=="object"&&s!==null){var g=$h.get(s);return g!==void 0?g:(d={value:s,source:d,stack:rn(d)},$h.set(s,d),d)}return{value:s,source:d,stack:rn(d)}}var Wu=[],vu=0,Xi=null,Oa=0,Ea=[],ja=0,Al=null,Wa=1,co="";function Ds(s,d){Wu[vu++]=Oa,Wu[vu++]=Xi,Xi=s,Oa=d}function Gh(s,d,g){Ea[ja++]=Wa,Ea[ja++]=co,Ea[ja++]=Al,Al=s;var E=Wa;s=co;var L=32-Jn(E)-1;E&=~(1<<L),g+=1;var F=32-Jn(d)+L;if(30<F){var ee=L-L%5;F=(E&(1<<ee)-1).toString(32),E>>=ee,L-=ee,Wa=1<<32-Jn(d)+L|g<<L|E,co=F+s}else Wa=1<<F|g<<L|E,co=s}function xu(s){s.return!==null&&(Ds(s,1),Gh(s,1,0))}function Hu(s){for(;s===Xi;)Xi=Wu[--vu],Wu[vu]=null,Oa=Wu[--vu],Wu[vu]=null;for(;s===Al;)Al=Ea[--ja],Ea[ja]=null,co=Ea[--ja],Ea[ja]=null,Wa=Ea[--ja],Ea[ja]=null}function Zu(s,d){Ea[ja++]=Wa,Ea[ja++]=co,Ea[ja++]=Al,Wa=d.id,co=d.overflow,Al=s}var na=null,Bn=null,Yt=!1,kl=null,ds=!1,Uh=Error(n(519));function Ms(s){var d=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Kl(Xo(d,s)),Uh}function Zl(s){var d=s.stateNode,g=s.type,E=s.memoizedProps;switch(d[Ir]=s,d[cn]=E,g){case"dialog":ri("cancel",d),ri("close",d);break;case"iframe":case"object":case"embed":ri("load",d);break;case"video":case"audio":for(g=0;g<vf.length;g++)ri(vf[g],d);break;case"source":ri("error",d);break;case"img":case"image":case"link":ri("error",d),ri("load",d);break;case"details":ri("toggle",d);break;case"input":ri("invalid",d),Zn(d,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0);break;case"select":ri("invalid",d);break;case"textarea":ri("invalid",d),vt(d,E.value,E.defaultValue,E.children)}g=E.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||d.textContent===""+g||E.suppressHydrationWarning===!0||_f(d.textContent,g)?(E.popover!=null&&(ri("beforetoggle",d),ri("toggle",d)),E.onScroll!=null&&ri("scroll",d),E.onScrollEnd!=null&&ri("scrollend",d),E.onClick!=null&&(d.onclick=Nt),d=!0):d=!1,d||Ms(s,!0)}function Ku(s){for(na=s.return;na;)switch(na.tag){case 5:case 31:case 13:ds=!1;return;case 27:case 3:ds=!0;return;default:na=na.return}}function En(s){if(s!==na)return!1;if(!Yt)return Ku(s),Yt=!0,!1;var d=s.tag,g;if((g=d!==3&&d!==27)&&((g=d===5)&&(g=s.type,g=!(g!=="form"&&g!=="button")||I(s.type,s.memoizedProps)),g=!g),g&&Bn&&Ms(s),Ku(s),d===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));Bn=zr(s)}else if(d===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));Bn=zr(s)}else d===27?(d=Bn,ve(s.type)?(s=pr,pr=null,Bn=s):Bn=d):Bn=na?dr(s.stateNode.nextSibling):null;return!0}function be(){Bn=na=null,Yt=!1}function Xu(){var s=kl;return s!==null&&(js===null?js=s:js.push.apply(js,s),kl=null),s}function Kl(s){kl===null?kl=[s]:kl.push(s)}var hs=Ae(null),vn=null,Xl=null;function Yl(s,d,g){Ze(hs,d._currentValue),d._currentValue=g}function Jl(s){s._currentValue=hs.current,qe(hs)}function _u(s,d,g){for(;s!==null;){var E=s.alternate;if((s.childLanes&d)!==d?(s.childLanes|=d,E!==null&&(E.childLanes|=d)):E!==null&&(E.childLanes&d)!==d&&(E.childLanes|=d),s===g)break;s=s.return}}function Kd(s,d,g,E){var L=s.child;for(L!==null&&(L.return=s);L!==null;){var F=L.dependencies;if(F!==null){var ee=L.child;F=F.firstContext;e:for(;F!==null;){var Se=F;F=L;for(var Xe=0;Xe<d.length;Xe++)if(Se.context===d[Xe]){F.lanes|=g,Se=F.alternate,Se!==null&&(Se.lanes|=g),_u(F.return,g,s),E||(ee=null);break e}F=Se.next}}else if(L.tag===18){if(ee=L.return,ee===null)throw Error(n(341));ee.lanes|=g,F=ee.alternate,F!==null&&(F.lanes|=g),_u(ee,g,s),ee=null}else ee=L.child;if(ee!==null)ee.return=L;else for(ee=L;ee!==null;){if(ee===s){ee=null;break}if(L=ee.sibling,L!==null){L.return=ee.return,ee=L;break}ee=ee.return}L=ee}}function nd(s,d,g,E){s=null;for(var L=d,F=!1;L!==null;){if(!F){if((L.flags&524288)!==0)F=!0;else if((L.flags&262144)!==0)break}if(L.tag===10){var ee=L.alternate;if(ee===null)throw Error(n(387));if(ee=ee.memoizedProps,ee!==null){var Se=L.type;ra(L.pendingProps.value,ee.value)||(s!==null?s.push(Se):s=[Se])}}else if(L===Xt.current){if(ee=L.alternate,ee===null)throw Error(n(387));ee.memoizedState.memoizedState!==L.memoizedState.memoizedState&&(s!==null?s.push(yh):s=[yh])}L=L.return}s!==null&&Kd(d,s,g,E),d.flags|=262144}function Vh(s){for(s=s.firstContext;s!==null;){if(!ra(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Qa(s){vn=s,Xl=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Pn(s){return Xd(vn,s)}function Ao(s,d){return vn===null&&Qa(s),Xd(s,d)}function Xd(s,d){var g=d._currentValue;if(d={context:d,memoizedValue:g,next:null},Xl===null){if(s===null)throw Error(n(308));Xl=d,s.dependencies={lanes:0,firstContext:d},s.flags|=524288}else Xl=Xl.next=d;return g}var qh=typeof AbortController<"u"?AbortController:function(){var s=[],d=this.signal={aborted:!1,addEventListener:function(g,E){s.push(E)}};this.abort=function(){d.aborted=!0,s.forEach(function(g){return g()})}},pg=e.unstable_scheduleCallback,Yd=e.unstable_NormalPriority,ha={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ha(){return{controller:new qh,data:new Map,refCount:0}}function bu(s){s.refCount--,s.refCount===0&&pg(Yd,function(){s.controller.abort()})}var Ar=null,qr=0,wu=0,Su=null;function Eu(s,d){if(Ar===null){var g=Ar=[];qr=0,wu=xs(),Su={status:"pending",value:void 0,then:function(E){g.push(E)}}}return qr++,d.then(D,D),d}function D(){if(--qr===0&&Ar!==null){Su!==null&&(Su.status="fulfilled");var s=Ar;Ar=null,wu=0,Su=null;for(var d=0;d<s.length;d++)(0,s[d])()}}function i(s,d){var g=[],E={status:"pending",value:null,reason:null,then:function(L){g.push(L)}};return s.then(function(){E.status="fulfilled",E.value=d;for(var L=0;L<g.length;L++)(0,g[L])(d)},function(L){for(E.status="rejected",E.reason=L,L=0;L<g.length;L++)(0,g[L])(void 0)}),E}var p=pe.S;pe.S=function(s,d){Ly=Rn(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&Eu(s,d),p!==null&&p(s,d)};var _=Ae(null);function b(){var s=_.current;return s!==null?s:Ji.pooledCache}function T(s,d){d===null?Ze(_,_.current):Ze(_,d.pool)}function j(){var s=b();return s===null?null:{parent:ha._currentValue,pool:s}}var $=Error(n(460)),V=Error(n(474)),K=Error(n(542)),te={then:function(){}};function re(s){return s=s.status,s==="fulfilled"||s==="rejected"}function ye(s,d,g){switch(g=s[g],g===void 0?s.push(d):g!==d&&(d.then(Nt,Nt),d=g),d.status){case"fulfilled":return d.value;case"rejected":throw s=d.reason,Fe(s),s;default:if(typeof d.status=="string")d.then(Nt,Nt);else{if(s=Ji,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=d,s.status="pending",s.then(function(E){if(d.status==="pending"){var L=d;L.status="fulfilled",L.value=E}},function(E){if(d.status==="pending"){var L=d;L.status="rejected",L.reason=E}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw s=d.reason,Fe(s),s}throw Te=d,$}}function we(s){try{var d=s._init;return d(s._payload)}catch(g){throw g!==null&&typeof g=="object"&&typeof g.then=="function"?(Te=g,$):g}}var Te=null;function je(){if(Te===null)throw Error(n(459));var s=Te;return Te=null,s}function Fe(s){if(s===$||s===K)throw Error(n(483))}var $e=null,We=0;function Le(s){var d=We;return We+=1,$e===null&&($e=[]),ye($e,s,d)}function et(s,d){d=d.props.ref,s.ref=d!==void 0?d:null}function rt(s,d){throw d.$$typeof===P?Error(n(525)):(s=Object.prototype.toString.call(d),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":s)))}function gt(s){function d(ft,it){if(s){var St=ft.deletions;St===null?(ft.deletions=[it],ft.flags|=16):St.push(it)}}function g(ft,it){if(!s)return null;for(;it!==null;)d(ft,it),it=it.sibling;return null}function E(ft){for(var it=new Map;ft!==null;)ft.key!==null?it.set(ft.key,ft):it.set(ft.index,ft),ft=ft.sibling;return it}function L(ft,it){return ft=Ko(ft,it),ft.index=0,ft.sibling=null,ft}function F(ft,it,St){return ft.index=St,s?(St=ft.alternate,St!==null?(St=St.index,St<it?(ft.flags|=67108866,it):St):(ft.flags|=67108866,it)):(ft.flags|=1048576,it)}function ee(ft){return s&&ft.alternate===null&&(ft.flags|=67108866),ft}function Se(ft,it,St,Zt){return it===null||it.tag!==6?(it=mu(St,ft.mode,Zt),it.return=ft,it):(it=L(it,St),it.return=ft,it)}function Xe(ft,it,St,Zt){var dn=St.type;return dn===W?Ut(ft,it,St.props.children,Zt,St.key):it!==null&&(it.elementType===dn||typeof dn=="object"&&dn!==null&&dn.$$typeof===Y&&we(dn)===it.type)?(it=L(it,St.props),et(it,St),it.return=ft,it):(it=rd(St.type,St.key,St.props,null,ft.mode,Zt),et(it,St),it.return=ft,it)}function Et(ft,it,St,Zt){return it===null||it.tag!==4||it.stateNode.containerInfo!==St.containerInfo||it.stateNode.implementation!==St.implementation?(it=Sc(St,ft.mode,Zt),it.return=ft,it):(it=L(it,St.children||[]),it.return=ft,it)}function Ut(ft,it,St,Zt,dn){return it===null||it.tag!==7?(it=Ts(St,ft.mode,Zt,dn),it.return=ft,it):(it=L(it,St),it.return=ft,it)}function Kt(ft,it,St){if(typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint")return it=mu(""+it,ft.mode,St),it.return=ft,it;if(typeof it=="object"&&it!==null){switch(it.$$typeof){case O:return St=rd(it.type,it.key,it.props,null,ft.mode,St),et(St,it),St.return=ft,St;case U:return it=Sc(it,ft.mode,St),it.return=ft,it;case Y:return it=we(it),Kt(ft,it,St)}if(Re(it)||Me(it))return it=Ts(it,ft.mode,St,null),it.return=ft,it;if(typeof it.then=="function")return Kt(ft,Le(it),St);if(it.$$typeof===ne)return Kt(ft,Ao(ft,it),St);rt(ft,it)}return null}function kt(ft,it,St,Zt){var dn=it!==null?it.key:null;if(typeof St=="string"&&St!==""||typeof St=="number"||typeof St=="bigint")return dn!==null?null:Se(ft,it,""+St,Zt);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case O:return St.key===dn?Xe(ft,it,St,Zt):null;case U:return St.key===dn?Et(ft,it,St,Zt):null;case Y:return St=we(St),kt(ft,it,St,Zt)}if(Re(St)||Me(St))return dn!==null?null:Ut(ft,it,St,Zt,null);if(typeof St.then=="function")return kt(ft,it,Le(St),Zt);if(St.$$typeof===ne)return kt(ft,it,Ao(ft,St),Zt);rt(ft,St)}return null}function It(ft,it,St,Zt,dn){if(typeof Zt=="string"&&Zt!==""||typeof Zt=="number"||typeof Zt=="bigint")return ft=ft.get(St)||null,Se(it,ft,""+Zt,dn);if(typeof Zt=="object"&&Zt!==null){switch(Zt.$$typeof){case O:return ft=ft.get(Zt.key===null?St:Zt.key)||null,Xe(it,ft,Zt,dn);case U:return ft=ft.get(Zt.key===null?St:Zt.key)||null,Et(it,ft,Zt,dn);case Y:return Zt=we(Zt),It(ft,it,St,Zt,dn)}if(Re(Zt)||Me(Zt))return ft=ft.get(St)||null,Ut(it,ft,Zt,dn,null);if(typeof Zt.then=="function")return It(ft,it,St,Le(Zt),dn);if(Zt.$$typeof===ne)return It(ft,it,St,Ao(it,Zt),dn);rt(it,Zt)}return null}function Ur(ft,it,St,Zt){for(var dn=null,ji=null,Kr=it,Yn=it=0,hi=null;Kr!==null&&Yn<St.length;Yn++){Kr.index>Yn?(hi=Kr,Kr=null):hi=Kr.sibling;var Ri=kt(ft,Kr,St[Yn],Zt);if(Ri===null){Kr===null&&(Kr=hi);break}s&&Kr&&Ri.alternate===null&&d(ft,Kr),it=F(Ri,it,Yn),ji===null?dn=Ri:ji.sibling=Ri,ji=Ri,Kr=hi}if(Yn===St.length)return g(ft,Kr),Yt&&Ds(ft,Yn),dn;if(Kr===null){for(;Yn<St.length;Yn++)Kr=Kt(ft,St[Yn],Zt),Kr!==null&&(it=F(Kr,it,Yn),ji===null?dn=Kr:ji.sibling=Kr,ji=Kr);return Yt&&Ds(ft,Yn),dn}for(Kr=E(Kr);Yn<St.length;Yn++)hi=It(Kr,ft,Yn,St[Yn],Zt),hi!==null&&(s&&hi.alternate!==null&&Kr.delete(hi.key===null?Yn:hi.key),it=F(hi,it,Yn),ji===null?dn=hi:ji.sibling=hi,ji=hi);return s&&Kr.forEach(function(Ef){return d(ft,Ef)}),Yt&&Ds(ft,Yn),dn}function xn(ft,it,St,Zt){if(St==null)throw Error(n(151));for(var dn=null,ji=null,Kr=it,Yn=it=0,hi=null,Ri=St.next();Kr!==null&&!Ri.done;Yn++,Ri=St.next()){Kr.index>Yn?(hi=Kr,Kr=null):hi=Kr.sibling;var Ef=kt(ft,Kr,Ri.value,Zt);if(Ef===null){Kr===null&&(Kr=hi);break}s&&Kr&&Ef.alternate===null&&d(ft,Kr),it=F(Ef,it,Yn),ji===null?dn=Ef:ji.sibling=Ef,ji=Ef,Kr=hi}if(Ri.done)return g(ft,Kr),Yt&&Ds(ft,Yn),dn;if(Kr===null){for(;!Ri.done;Yn++,Ri=St.next())Ri=Kt(ft,Ri.value,Zt),Ri!==null&&(it=F(Ri,it,Yn),ji===null?dn=Ri:ji.sibling=Ri,ji=Ri);return Yt&&Ds(ft,Yn),dn}for(Kr=E(Kr);!Ri.done;Yn++,Ri=St.next())Ri=It(Kr,ft,Yn,Ri.value,Zt),Ri!==null&&(s&&Ri.alternate!==null&&Kr.delete(Ri.key===null?Yn:Ri.key),it=F(Ri,it,Yn),ji===null?dn=Ri:ji.sibling=Ri,ji=Ri);return s&&Kr.forEach(function(yb){return d(ft,yb)}),Yt&&Ds(ft,Yn),dn}function va(ft,it,St,Zt){if(typeof St=="object"&&St!==null&&St.type===W&&St.key===null&&(St=St.props.children),typeof St=="object"&&St!==null){switch(St.$$typeof){case O:e:{for(var dn=St.key;it!==null;){if(it.key===dn){if(dn=St.type,dn===W){if(it.tag===7){g(ft,it.sibling),Zt=L(it,St.props.children),Zt.return=ft,ft=Zt;break e}}else if(it.elementType===dn||typeof dn=="object"&&dn!==null&&dn.$$typeof===Y&&we(dn)===it.type){g(ft,it.sibling),Zt=L(it,St.props),et(Zt,St),Zt.return=ft,ft=Zt;break e}g(ft,it);break}else d(ft,it);it=it.sibling}St.type===W?(Zt=Ts(St.props.children,ft.mode,Zt,St.key),Zt.return=ft,ft=Zt):(Zt=rd(St.type,St.key,St.props,null,ft.mode,Zt),et(Zt,St),Zt.return=ft,ft=Zt)}return ee(ft);case U:e:{for(dn=St.key;it!==null;){if(it.key===dn)if(it.tag===4&&it.stateNode.containerInfo===St.containerInfo&&it.stateNode.implementation===St.implementation){g(ft,it.sibling),Zt=L(it,St.children||[]),Zt.return=ft,ft=Zt;break e}else{g(ft,it);break}else d(ft,it);it=it.sibling}Zt=Sc(St,ft.mode,Zt),Zt.return=ft,ft=Zt}return ee(ft);case Y:return St=we(St),va(ft,it,St,Zt)}if(Re(St))return Ur(ft,it,St,Zt);if(Me(St)){if(dn=Me(St),typeof dn!="function")throw Error(n(150));return St=dn.call(St),xn(ft,it,St,Zt)}if(typeof St.then=="function")return va(ft,it,Le(St),Zt);if(St.$$typeof===ne)return va(ft,it,Ao(ft,St),Zt);rt(ft,St)}return typeof St=="string"&&St!==""||typeof St=="number"||typeof St=="bigint"?(St=""+St,it!==null&&it.tag===6?(g(ft,it.sibling),Zt=L(it,St),Zt.return=ft,ft=Zt):(g(ft,it),Zt=mu(St,ft.mode,Zt),Zt.return=ft,ft=Zt),ee(ft)):g(ft,it)}return function(ft,it,St,Zt){try{We=0;var dn=va(ft,it,St,Zt);return $e=null,dn}catch(Kr){if(Kr===$||Kr===K)throw Kr;var ji=qa(29,Kr,null,ft.mode);return ji.lanes=Zt,ji.return=ft,ji}finally{}}}var Bt=gt(!0),ir=gt(!1),ur=!1;function mr(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hr(s,d){s=s.updateQueue,d.updateQueue===s&&(d.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function or(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function xr(s,d,g){var E=s.updateQueue;if(E===null)return null;if(E=E.shared,(Si&2)!==0){var L=E.pending;return L===null?d.next=d:(d.next=L.next,L.next=d),E.pending=d,d=Hl(s),td(s,null,g),d}return Ja(s,E,d,g),Hl(s)}function Jr(s,d,g){if(d=d.updateQueue,d!==null&&(d=d.shared,(g&4194048)!==0)){var E=d.lanes;E&=s.pendingLanes,g|=E,d.lanes=g,At(s,g)}}function fr(s,d){var g=s.updateQueue,E=s.alternate;if(E!==null&&(E=E.updateQueue,g===E)){var L=null,F=null;if(g=g.firstBaseUpdate,g!==null){do{var ee={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};F===null?L=F=ee:F=F.next=ee,g=g.next}while(g!==null);F===null?L=F=d:F=F.next=d}else L=F=d;g={baseState:E.baseState,firstBaseUpdate:L,lastBaseUpdate:F,shared:E.shared,callbacks:E.callbacks},s.updateQueue=g;return}s=g.lastBaseUpdate,s===null?g.firstBaseUpdate=d:s.next=d,g.lastBaseUpdate=d}var ar=!1;function Hr(){if(ar){var s=Su;if(s!==null)throw s}}function vi(s,d,g,E){ar=!1;var L=s.updateQueue;ur=!1;var F=L.firstBaseUpdate,ee=L.lastBaseUpdate,Se=L.shared.pending;if(Se!==null){L.shared.pending=null;var Xe=Se,Et=Xe.next;Xe.next=null,ee===null?F=Et:ee.next=Et,ee=Xe;var Ut=s.alternate;Ut!==null&&(Ut=Ut.updateQueue,Se=Ut.lastBaseUpdate,Se!==ee&&(Se===null?Ut.firstBaseUpdate=Et:Se.next=Et,Ut.lastBaseUpdate=Xe))}if(F!==null){var Kt=L.baseState;ee=0,Ut=Et=Xe=null,Se=F;do{var kt=Se.lane&-536870913,It=kt!==Se.lane;if(It?(ei&kt)===kt:(E&kt)===kt){kt!==0&&kt===wu&&(ar=!0),Ut!==null&&(Ut=Ut.next={lane:0,tag:Se.tag,payload:Se.payload,callback:null,next:null});e:{var Ur=s,xn=Se;kt=d;var va=g;switch(xn.tag){case 1:if(Ur=xn.payload,typeof Ur=="function"){Kt=Ur.call(va,Kt,kt);break e}Kt=Ur;break e;case 3:Ur.flags=Ur.flags&-65537|128;case 0:if(Ur=xn.payload,kt=typeof Ur=="function"?Ur.call(va,Kt,kt):Ur,kt==null)break e;Kt=C({},Kt,kt);break e;case 2:ur=!0}}kt=Se.callback,kt!==null&&(s.flags|=64,It&&(s.flags|=8192),It=L.callbacks,It===null?L.callbacks=[kt]:It.push(kt))}else It={lane:kt,tag:Se.tag,payload:Se.payload,callback:Se.callback,next:null},Ut===null?(Et=Ut=It,Xe=Kt):Ut=Ut.next=It,ee|=kt;if(Se=Se.next,Se===null){if(Se=L.shared.pending,Se===null)break;It=Se,Se=It.next,It.next=null,L.lastBaseUpdate=It,L.shared.pending=null}}while(!0);Ut===null&&(Xe=Kt),L.baseState=Xe,L.firstBaseUpdate=Et,L.lastBaseUpdate=Ut,F===null&&(L.shared.lanes=0),yd|=ee,s.lanes=ee,s.memoizedState=Kt}}function an(s,d){if(typeof s!="function")throw Error(n(191,s));s.call(d)}function Ln(s,d){var g=s.callbacks;if(g!==null)for(s.callbacks=null,s=0;s<g.length;s++)an(g[s],d)}var ni=Ae(null),ia=Ae(0);function zs(s,d){s=nl,Ze(ia,s),Ze(ni,d),nl=s|d.baseLanes}function In(){Ze(ia,nl),Ze(ni,ni.current)}function ho(){nl=ia.current,qe(ni),qe(ia)}var Vi=Ae(null),qi=null;function Da(s){var d=s.alternate;Ze(ci,ci.current&1),Ze(Vi,s),qi===null&&(d===null||ni.current!==null||d.memoizedState!==null)&&(qi=s)}function fs(s){Ze(ci,ci.current),Ze(Vi,s),qi===null&&(qi=s)}function Ec(s){s.tag===22?(Ze(ci,ci.current),Ze(Vi,s),qi===null&&(qi=s)):Yo()}function Yo(){Ze(ci,ci.current),Ze(Vi,Vi.current)}function eo(s){qe(Vi),qi===s&&(qi=null),qe(ci)}var ci=Ae(0);function Ac(s){for(var d=s;d!==null;){if(d.tag===13){var g=d.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||Jt(g)||yr(g)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break;for(;d.sibling===null;){if(d.return===null||d.return===s)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Jo=0,sn=null,Vn=null,Ti=null,Qo=!1,Ma=!1,za=!1,Bo=0,Cn=0,ps=null,id=0;function Di(){throw Error(n(321))}function Jd(s,d){if(d===null)return!1;for(var g=0;g<d.length&&g<s.length;g++)if(!ra(s[g],d[g]))return!1;return!0}function Wh(s,d,g,E,L,F){return Jo=F,sn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,pe.H=s===null||s.memoizedState===null?_y:kg,za=!1,F=g(E,L),za=!1,Ma&&(F=Js(d,g,E,L)),Hh(s),F}function Hh(s){pe.H=cd;var d=Vn!==null&&Vn.next!==null;if(Jo=0,Ti=Vn=sn=null,Qo=!1,Cn=0,ps=null,d)throw Error(n(300));s===null||fa||(s=s.dependencies,s!==null&&Vh(s)&&(fa=!0))}function Js(s,d,g,E){sn=s;var L=0;do{if(Ma&&(ps=null),Cn=0,Ma=!1,25<=L)throw Error(n(301));if(L+=1,Ti=Vn=null,s.updateQueue!=null){var F=s.updateQueue;F.lastEffect=null,F.events=null,F.stores=null,F.memoCache!=null&&(F.memoCache.index=0)}pe.H=Xh,F=d(g,E)}while(Ma);return F}function gg(){var s=pe.H,d=s.useState()[0];return d=typeof d.then=="function"?Cc(d):d,s=s.useState()[0],(Vn!==null?Vn.memoizedState:null)!==s&&(sn.flags|=1024),d}function kc(){var s=Bo!==0;return Bo=0,s}function Yu(s,d,g){d.updateQueue=s.updateQueue,d.flags&=-2053,s.lanes&=~g}function ad(s){if(Qo){for(s=s.memoizedState;s!==null;){var d=s.queue;d!==null&&(d.pending=null),s=s.next}Qo=!1}Jo=0,Ti=Vn=sn=null,Ma=!1,Cn=Bo=0,ps=null}function to(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ti===null?sn.memoizedState=Ti=s:Ti=Ti.next=s,Ti}function Yi(){if(Vn===null){var s=sn.alternate;s=s!==null?s.memoizedState:null}else s=Vn.next;var d=Ti===null?sn.memoizedState:Ti.next;if(d!==null)Ti=d,Vn=s;else{if(s===null)throw sn.alternate===null?Error(n(467)):Error(n(310));Vn=s,s={memoizedState:Vn.memoizedState,baseState:Vn.baseState,baseQueue:Vn.baseQueue,queue:Vn.queue,next:null},Ti===null?sn.memoizedState=Ti=s:Ti=Ti.next=s}return Ti}function Ql(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Cc(s){var d=Cn;return Cn+=1,ps===null&&(ps=[]),s=ye(ps,s,d),d=sn,(Ti===null?d.memoizedState:Ti.next)===null&&(d=d.alternate,pe.H=d===null||d.memoizedState===null?_y:kg),s}function Qd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Cc(s);if(s.$$typeof===ne)return Pn(s)}throw Error(n(438,String(s)))}function mg(s){var d=null,g=sn.updateQueue;if(g!==null&&(d=g.memoCache),d==null){var E=sn.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(d={data:E.data.map(function(L){return L.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),g===null&&(g=Ql(),sn.updateQueue=g),g.memoCache=d,g=d.data[d.index],g===void 0)for(g=d.data[d.index]=Array(s),E=0;E<s;E++)g[E]=Ce;return d.index++,g}function Au(s,d){return typeof d=="function"?d(s):d}function On(s){var d=Yi();return eh(d,Vn,s)}function eh(s,d,g){var E=s.queue;if(E===null)throw Error(n(311));E.lastRenderedReducer=g;var L=s.baseQueue,F=E.pending;if(F!==null){if(L!==null){var ee=L.next;L.next=F.next,F.next=ee}d.baseQueue=L=F,E.pending=null}if(F=s.baseState,L===null)s.memoizedState=F;else{d=L.next;var Se=ee=null,Xe=null,Et=d,Ut=!1;do{var Kt=Et.lane&-536870913;if(Kt!==Et.lane?(ei&Kt)===Kt:(Jo&Kt)===Kt){var kt=Et.revertLane;if(kt===0)Xe!==null&&(Xe=Xe.next={lane:0,revertLane:0,gesture:null,action:Et.action,hasEagerState:Et.hasEagerState,eagerState:Et.eagerState,next:null}),Kt===wu&&(Ut=!0);else if((Jo&kt)===kt){Et=Et.next,kt===wu&&(Ut=!0);continue}else Kt={lane:0,revertLane:Et.revertLane,gesture:null,action:Et.action,hasEagerState:Et.hasEagerState,eagerState:Et.eagerState,next:null},Xe===null?(Se=Xe=Kt,ee=F):Xe=Xe.next=Kt,sn.lanes|=kt,yd|=kt;Kt=Et.action,za&&g(F,Kt),F=Et.hasEagerState?Et.eagerState:g(F,Kt)}else kt={lane:Kt,revertLane:Et.revertLane,gesture:Et.gesture,action:Et.action,hasEagerState:Et.hasEagerState,eagerState:Et.eagerState,next:null},Xe===null?(Se=Xe=kt,ee=F):Xe=Xe.next=kt,sn.lanes|=Kt,yd|=Kt;Et=Et.next}while(Et!==null&&Et!==d);if(Xe===null?ee=F:Xe.next=Se,!ra(F,s.memoizedState)&&(fa=!0,Ut&&(g=Su,g!==null)))throw g;s.memoizedState=F,s.baseState=ee,s.baseQueue=Xe,E.lastRenderedState=F}return L===null&&(E.lanes=0),[s.memoizedState,E.dispatch]}function od(s){var d=Yi(),g=d.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=s;var E=g.dispatch,L=g.pending,F=d.memoizedState;if(L!==null){g.pending=null;var ee=L=L.next;do F=s(F,ee.action),ee=ee.next;while(ee!==L);ra(F,d.memoizedState)||(fa=!0),d.memoizedState=F,d.baseQueue===null&&(d.baseState=F),g.lastRenderedState=F}return[F,E]}function Qs(s,d,g){var E=sn,L=Yi(),F=Yt;if(F){if(g===void 0)throw Error(n(407));g=g()}else g=d();var ee=!ra((Vn||L).memoizedState,g);if(ee&&(L.memoizedState=g,fa=!0),L=L.queue,Dc(um.bind(null,E,L,s),[s]),L.getSnapshot!==d||ee||Ti!==null&&Ti.memoizedState.tag&1){if(E.flags|=2048,Ls(9,{destroy:void 0},Tc.bind(null,E,L,g,d),null),Ji===null)throw Error(n(349));F||(Jo&127)!==0||Cl(E,d,g)}return g}function Cl(s,d,g){s.flags|=16384,s={getSnapshot:d,value:g},d=sn.updateQueue,d===null?(d=Ql(),sn.updateQueue=d,d.stores=[s]):(g=d.stores,g===null?d.stores=[s]:g.push(s))}function Tc(s,d,g,E){d.value=g,d.getSnapshot=E,ko(d)&&vy(s)}function um(s,d,g){return g(function(){ko(d)&&vy(s)})}function ko(s){var d=s.getSnapshot;s=s.value;try{var g=d();return!ra(s,g)}catch{return!0}}function vy(s){var d=Ys(s,2);d!==null&&vs(d,s,2)}function th(s){var d=to();if(typeof s=="function"){var g=s;if(s=g(),za){jr(!0);try{g()}finally{jr(!1)}}}return d.memoizedState=d.baseState=s,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Au,lastRenderedState:s},d}function Aa(s,d,g,E){return s.baseState=g,eh(s,Vn,typeof E=="function"?E:Au)}function yg(s,d,g,E,L){if(Jf(s))throw Error(n(485));if(s=d.action,s!==null){var F={payload:L,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ee){F.listeners.push(ee)}};pe.T!==null?g(!0):F.isTransition=!1,E(F),g=d.pending,g===null?(F.next=d.pending=F,vg(d,F)):(F.next=g.next,d.pending=g.next=F)}}function vg(s,d){var g=d.action,E=d.payload,L=s.state;if(d.isTransition){var F=pe.T,ee={};pe.T=ee;try{var Se=g(L,E),Xe=pe.S;Xe!==null&&Xe(ee,Se),fo(s,d,Se)}catch(Et){sd(s,d,Et)}finally{F!==null&&ee.types!==null&&(F.types=ee.types),pe.T=F}}else try{F=g(L,E),fo(s,d,F)}catch(Et){sd(s,d,Et)}}function fo(s,d,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(E){Ps(s,d,E)},function(E){return sd(s,d,E)}):Ps(s,d,g)}function Ps(s,d,g){d.status="fulfilled",d.value=g,Vf(d),s.state=g,d=s.pending,d!==null&&(g=d.next,g===d?s.pending=null:(g=g.next,d.next=g,vg(s,g)))}function sd(s,d,g){var E=s.pending;if(s.pending=null,E!==null){E=E.next;do d.status="rejected",d.reason=g,Vf(d),d=d.next;while(d!==E)}s.action=null}function Vf(s){s=s.listeners;for(var d=0;d<s.length;d++)(0,s[d])()}function Zh(s,d){return d}function cm(s,d){if(Yt){var g=Ji.formState;if(g!==null){e:{var E=sn;if(Yt){if(Bn){t:{for(var L=Bn,F=ds;L.nodeType!==8;){if(!F){L=null;break t}if(L=dr(L.nextSibling),L===null){L=null;break t}}F=L.data,L=F==="F!"||F==="F"?L:null}if(L){Bn=dr(L.nextSibling),E=L.data==="F!";break e}}Ms(E)}E=!1}E&&(d=g[0])}}return g=to(),g.memoizedState=g.baseState=d,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zh,lastRenderedState:d},g.queue=E,g=Is.bind(null,sn,E),E.dispatch=g,E=th(!1),F=ud.bind(null,sn,!1,E.queue),E=to(),L={state:d,dispatch:null,action:s,pending:null},E.queue=L,g=yg.bind(null,sn,L,F,g),L.dispatch=g,E.memoizedState=s,[d,g,!1]}function qf(s){var d=Yi();return dm(d,Vn,s)}function dm(s,d,g){if(d=eh(s,d,Zh)[0],s=On(Au)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var E=Cc(d)}catch(ee){throw ee===$?K:ee}else E=d;d=Yi();var L=d.queue,F=L.dispatch;return g!==d.memoizedState&&(sn.flags|=2048,Ls(9,{destroy:void 0},Wf.bind(null,L,g),null)),[E,F,s]}function Wf(s,d){s.action=d}function xg(s){var d=Yi(),g=Vn;if(g!==null)return dm(d,g,s);Yi(),d=d.memoizedState,g=Yi();var E=g.queue.dispatch;return g.memoizedState=s,[d,E,!1]}function Ls(s,d,g,E){return s={tag:s,create:g,deps:E,inst:d,next:null},d=sn.updateQueue,d===null&&(d=Ql(),sn.updateQueue=d),g=d.lastEffect,g===null?d.lastEffect=s.next=s:(E=g.next,g.next=s,s.next=E,d.lastEffect=s),s}function hm(){return Yi().memoizedState}function eu(s,d,g,E){var L=to();sn.flags|=s,L.memoizedState=Ls(1|d,{destroy:void 0},g,E===void 0?null:E)}function Ju(s,d,g,E){var L=Yi();E=E===void 0?null:E;var F=L.memoizedState.inst;Vn!==null&&E!==null&&Jd(E,Vn.memoizedState.deps)?L.memoizedState=Ls(d,F,g,E):(sn.flags|=s,L.memoizedState=Ls(1|d,F,g,E))}function fm(s,d){eu(8390656,8,s,d)}function Dc(s,d){Ju(2048,8,s,d)}function _g(s){sn.flags|=4;var d=sn.updateQueue;if(d===null)d=Ql(),sn.updateQueue=d,d.events=[s];else{var g=d.events;g===null?d.events=[s]:g.push(s)}}function Hf(s){var d=Yi().memoizedState;return _g({ref:d,nextImpl:s}),function(){if((Si&2)!==0)throw Error(n(440));return d.impl.apply(void 0,arguments)}}function pm(s,d){return Ju(4,2,s,d)}function bg(s,d){return Ju(4,4,s,d)}function gm(s,d){if(typeof d=="function"){s=s();var g=d(s);return function(){typeof g=="function"?g():d(null)}}if(d!=null)return s=s(),d.current=s,function(){d.current=null}}function es(s,d,g){g=g!=null?g.concat([s]):null,Ju(4,4,gm.bind(null,d,s),g)}function Mc(){}function Zf(s,d){var g=Yi();d=d===void 0?null:d;var E=g.memoizedState;return d!==null&&Jd(d,E[1])?E[0]:(g.memoizedState=[s,d],s)}function gs(s,d){var g=Yi();d=d===void 0?null:d;var E=g.memoizedState;if(d!==null&&Jd(d,E[1]))return E[0];if(E=s(),za){jr(!0);try{s()}finally{jr(!1)}}return g.memoizedState=[E,d],E}function ms(s,d,g){return g===void 0||(Jo&1073741824)!==0&&(ei&261930)===0?s.memoizedState=d:(s.memoizedState=g,s=Pg(),sn.lanes|=s,yd|=s,g)}function xy(s,d,g,E){return ra(g,d)?g:ni.current!==null?(s=ms(s,g,E),ra(s,d)||(fa=!0),s):(Jo&42)===0||(Jo&1073741824)!==0&&(ei&261930)===0?(fa=!0,s.memoizedState=g):(s=Pg(),sn.lanes|=s,yd|=s,d)}function Kf(s,d,g,E,L){var F=ge.p;ge.p=F!==0&&8>F?F:8;var ee=pe.T,Se={};pe.T=Se,ud(s,!1,d,g);try{var Xe=L(),Et=pe.S;if(Et!==null&&Et(Se,Xe),Xe!==null&&typeof Xe=="object"&&typeof Xe.then=="function"){var Ut=i(Xe,E);nh(s,d,Ut,zl(s))}else nh(s,d,E,zl(s))}catch(Kt){nh(s,d,{then:function(){},status:"rejected",reason:Kt},zl())}finally{ge.p=F,ee!==null&&Se.types!==null&&(ee.types=Se.types),pe.T=ee}}function wg(){}function zc(s,d,g,E){if(s.tag!==5)throw Error(n(476));var L=Sg(s).queue;Kf(s,L,d,ze,g===null?wg:function(){return Eg(s),g(E)})}function Sg(s){var d=s.memoizedState;if(d!==null)return d;d={memoizedState:ze,baseState:ze,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Au,lastRenderedState:ze},next:null};var g={};return d.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Au,lastRenderedState:g},next:null},s.memoizedState=d,s=s.alternate,s!==null&&(s.memoizedState=d),d}function Eg(s){var d=Sg(s);d.next===null&&(d=s.alternate.memoizedState),nh(s,d.next.queue,{},zl())}function mm(){return Pn(yh)}function Xf(){return Yi().memoizedState}function ld(){return Yi().memoizedState}function rh(s){for(var d=s.return;d!==null;){switch(d.tag){case 24:case 3:var g=zl();s=or(g);var E=xr(d,s,g);E!==null&&(vs(E,d,g),Jr(E,d,g)),d={cache:Ha()},s.payload=d;return}d=d.return}}function Yf(s,d,g){var E=zl();g={lane:E,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Jf(s)?Kh(d,g):(g=qu(s,d,g,E),g!==null&&(vs(g,s,E),Ag(g,d,E)))}function Is(s,d,g){var E=zl();nh(s,d,g,E)}function nh(s,d,g,E){var L={lane:E,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null};if(Jf(s))Kh(d,L);else{var F=s.alternate;if(s.lanes===0&&(F===null||F.lanes===0)&&(F=d.lastRenderedReducer,F!==null))try{var ee=d.lastRenderedState,Se=F(ee,g);if(L.hasEagerState=!0,L.eagerState=Se,ra(Se,ee))return Ja(s,d,L,0),Ji===null&&Ia(),!1}catch{}finally{}if(g=qu(s,d,L,E),g!==null)return vs(g,s,E),Ag(g,d,E),!0}return!1}function ud(s,d,g,E){if(E={lane:2,revertLane:xs(),gesture:null,action:E,hasEagerState:!1,eagerState:null,next:null},Jf(s)){if(d)throw Error(n(479))}else d=qu(s,g,E,2),d!==null&&vs(d,s,2)}function Jf(s){var d=s.alternate;return s===sn||d!==null&&d===sn}function Kh(s,d){Ma=Qo=!0;var g=s.pending;g===null?d.next=d:(d.next=g.next,g.next=d),s.pending=d}function Ag(s,d,g){if((g&4194048)!==0){var E=d.lanes;E&=s.pendingLanes,g|=E,d.lanes=g,At(s,g)}}var cd={readContext:Pn,use:Qd,useCallback:Di,useContext:Di,useEffect:Di,useImperativeHandle:Di,useLayoutEffect:Di,useInsertionEffect:Di,useMemo:Di,useReducer:Di,useRef:Di,useState:Di,useDebugValue:Di,useDeferredValue:Di,useTransition:Di,useSyncExternalStore:Di,useId:Di,useHostTransitionStatus:Di,useFormState:Di,useActionState:Di,useOptimistic:Di,useMemoCache:Di,useCacheRefresh:Di};cd.useEffectEvent=Di;var _y={readContext:Pn,use:Qd,useCallback:function(s,d){return to().memoizedState=[s,d===void 0?null:d],s},useContext:Pn,useEffect:fm,useImperativeHandle:function(s,d,g){g=g!=null?g.concat([s]):null,eu(4194308,4,gm.bind(null,d,s),g)},useLayoutEffect:function(s,d){return eu(4194308,4,s,d)},useInsertionEffect:function(s,d){eu(4,2,s,d)},useMemo:function(s,d){var g=to();d=d===void 0?null:d;var E=s();if(za){jr(!0);try{s()}finally{jr(!1)}}return g.memoizedState=[E,d],E},useReducer:function(s,d,g){var E=to();if(g!==void 0){var L=g(d);if(za){jr(!0);try{g(d)}finally{jr(!1)}}}else L=d;return E.memoizedState=E.baseState=L,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:L},E.queue=s,s=s.dispatch=Yf.bind(null,sn,s),[E.memoizedState,s]},useRef:function(s){var d=to();return s={current:s},d.memoizedState=s},useState:function(s){s=th(s);var d=s.queue,g=Is.bind(null,sn,d);return d.dispatch=g,[s.memoizedState,g]},useDebugValue:Mc,useDeferredValue:function(s,d){var g=to();return ms(g,s,d)},useTransition:function(){var s=th(!1);return s=Kf.bind(null,sn,s.queue,!0,!1),to().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,d,g){var E=sn,L=to();if(Yt){if(g===void 0)throw Error(n(407));g=g()}else{if(g=d(),Ji===null)throw Error(n(349));(ei&127)!==0||Cl(E,d,g)}L.memoizedState=g;var F={value:g,getSnapshot:d};return L.queue=F,fm(um.bind(null,E,F,s),[s]),E.flags|=2048,Ls(9,{destroy:void 0},Tc.bind(null,E,F,g,d),null),g},useId:function(){var s=to(),d=Ji.identifierPrefix;if(Yt){var g=co,E=Wa;g=(E&~(1<<32-Jn(E)-1)).toString(32)+g,d="_"+d+"R_"+g,g=Bo++,0<g&&(d+="H"+g.toString(32)),d+="_"}else g=id++,d="_"+d+"r_"+g.toString(32)+"_";return s.memoizedState=d},useHostTransitionStatus:mm,useFormState:cm,useActionState:cm,useOptimistic:function(s){var d=to();d.memoizedState=d.baseState=s;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=g,d=ud.bind(null,sn,!0,g),g.dispatch=d,[s,d]},useMemoCache:mg,useCacheRefresh:function(){return to().memoizedState=rh.bind(null,sn)},useEffectEvent:function(s){var d=to(),g={impl:s};return d.memoizedState=g,function(){if((Si&2)!==0)throw Error(n(440));return g.impl.apply(void 0,arguments)}}},kg={readContext:Pn,use:Qd,useCallback:Zf,useContext:Pn,useEffect:Dc,useImperativeHandle:es,useInsertionEffect:pm,useLayoutEffect:bg,useMemo:gs,useReducer:On,useRef:hm,useState:function(){return On(Au)},useDebugValue:Mc,useDeferredValue:function(s,d){var g=Yi();return xy(g,Vn.memoizedState,s,d)},useTransition:function(){var s=On(Au)[0],d=Yi().memoizedState;return[typeof s=="boolean"?s:Cc(s),d]},useSyncExternalStore:Qs,useId:Xf,useHostTransitionStatus:mm,useFormState:qf,useActionState:qf,useOptimistic:function(s,d){var g=Yi();return Aa(g,Vn,s,d)},useMemoCache:mg,useCacheRefresh:ld};kg.useEffectEvent=Hf;var Xh={readContext:Pn,use:Qd,useCallback:Zf,useContext:Pn,useEffect:Dc,useImperativeHandle:es,useInsertionEffect:pm,useLayoutEffect:bg,useMemo:gs,useReducer:od,useRef:hm,useState:function(){return od(Au)},useDebugValue:Mc,useDeferredValue:function(s,d){var g=Yi();return Vn===null?ms(g,s,d):xy(g,Vn.memoizedState,s,d)},useTransition:function(){var s=od(Au)[0],d=Yi().memoizedState;return[typeof s=="boolean"?s:Cc(s),d]},useSyncExternalStore:Qs,useId:Xf,useHostTransitionStatus:mm,useFormState:xg,useActionState:xg,useOptimistic:function(s,d){var g=Yi();return Vn!==null?Aa(g,Vn,s,d):(g.baseState=s,[s,g.queue.dispatch])},useMemoCache:mg,useCacheRefresh:ld};Xh.useEffectEvent=Hf;function Qf(s,d,g,E){d=s.memoizedState,g=g(E,d),g=g==null?d:C({},d,g),s.memoizedState=g,s.lanes===0&&(s.updateQueue.baseState=g)}var ku={enqueueSetState:function(s,d,g){s=s._reactInternals;var E=zl(),L=or(E);L.payload=d,g!=null&&(L.callback=g),d=xr(s,L,E),d!==null&&(vs(d,s,E),Jr(d,s,E))},enqueueReplaceState:function(s,d,g){s=s._reactInternals;var E=zl(),L=or(E);L.tag=1,L.payload=d,g!=null&&(L.callback=g),d=xr(s,L,E),d!==null&&(vs(d,s,E),Jr(d,s,E))},enqueueForceUpdate:function(s,d){s=s._reactInternals;var g=zl(),E=or(g);E.tag=2,d!=null&&(E.callback=d),d=xr(s,E,g),d!==null&&(vs(d,s,g),Jr(d,s,g))}};function Yh(s,d,g,E,L,F,ee){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(E,F,ee):d.prototype&&d.prototype.isPureReactComponent?!Un(g,E)||!Un(L,F):!0}function ym(s,d,g,E){s=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(g,E),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(g,E),d.state!==s&&ku.enqueueReplaceState(d,d.state,null)}function Os(s,d){var g=d;if("ref"in d){g={};for(var E in d)E!=="ref"&&(g[E]=d[E])}if(s=s.defaultProps){g===d&&(g=C({},g));for(var L in s)g[L]===void 0&&(g[L]=s[L])}return g}function vm(s){Wl(s)}function xm(s){console.error(s)}function by(s){Wl(s)}function ep(s,d){try{var g=s.onUncaughtError;g(d.value,{componentStack:d.stack})}catch(E){setTimeout(function(){throw E})}}function wy(s,d,g){try{var E=s.onCaughtError;E(g.value,{componentStack:g.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(L){setTimeout(function(){throw L})}}function tp(s,d,g){return g=or(g),g.tag=3,g.payload={element:null},g.callback=function(){ep(s,d)},g}function Qu(s){return s=or(s),s.tag=3,s}function Pc(s,d,g,E){var L=g.type.getDerivedStateFromError;if(typeof L=="function"){var F=E.value;s.payload=function(){return L(F)},s.callback=function(){wy(d,g,E)}}var ee=g.stateNode;ee!==null&&typeof ee.componentDidCatch=="function"&&(s.callback=function(){wy(d,g,E),typeof L!="function"&&(Rc===null?Rc=new Set([this]):Rc.add(this));var Se=E.stack;this.componentDidCatch(E.value,{componentStack:Se!==null?Se:""})})}function _m(s,d,g,E,L){if(g.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(d=g.alternate,d!==null&&nd(d,g,L,!0),g=Vi.current,g!==null){switch(g.tag){case 31:case 13:return qi===null?Lg():g.alternate===null&&ma===0&&(ma=3),g.flags&=-257,g.flags|=65536,g.lanes=L,E===te?g.flags|=16384:(d=g.updateQueue,d===null?g.updateQueue=new Set([E]):d.add(E),Ng(s,E,L)),!1;case 22:return g.flags|=65536,E===te?g.flags|=16384:(d=g.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([E])},g.updateQueue=d):(g=d.retryQueue,g===null?d.retryQueue=new Set([E]):g.add(E)),Ng(s,E,L)),!1}throw Error(n(435,g.tag))}return Ng(s,E,L),Lg(),!1}if(Yt)return d=Vi.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=L,E!==Uh&&(s=Error(n(422),{cause:E}),Kl(Xo(s,g)))):(E!==Uh&&(d=Error(n(423),{cause:E}),Kl(Xo(d,g))),s=s.current.alternate,s.flags|=65536,L&=-L,s.lanes|=L,E=Xo(E,g),L=tp(s.stateNode,E,L),fr(s,L),ma!==4&&(ma=2)),!1;var F=Error(n(520),{cause:E});if(F=Xo(F,g),df===null?df=[F]:df.push(F),ma!==4&&(ma=2),d===null)return!0;E=Xo(E,g),g=d;do{switch(g.tag){case 3:return g.flags|=65536,s=L&-L,g.lanes|=s,s=tp(g.stateNode,E,s),fr(g,s),!1;case 1:if(d=g.type,F=g.stateNode,(g.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(Rc===null||!Rc.has(F))))return g.flags|=65536,L&=-L,g.lanes|=L,L=Qu(L),Pc(L,s,g,E),fr(g,L),!1}g=g.return}while(g!==null);return!1}var aa=Error(n(461)),fa=!1;function Ra(s,d,g,E){d.child=s===null?ir(d,null,g,E):Bt(d,s.child,g,E)}function ln(s,d,g,E,L){g=g.render;var F=d.ref;if("ref"in E){var ee={};for(var Se in E)Se!=="ref"&&(ee[Se]=E[Se])}else ee=E;return Qa(d),E=Wh(s,d,g,ee,F,L),Se=kc(),s!==null&&!fa?(Yu(s,d,L),Tu(s,d,L)):(Yt&&Se&&xu(d),d.flags|=1,Ra(s,d,E,L),d.child)}function dd(s,d,g,E,L){if(s===null){var F=g.type;return typeof F=="function"&&!El(F)&&F.defaultProps===void 0&&g.compare===null?(d.tag=15,d.type=F,hd(s,d,F,E,L)):(s=rd(g.type,null,E,d,d.mode,L),s.ref=d.ref,s.return=d,d.child=s)}if(F=s.child,!ap(s,L)){var ee=F.memoizedProps;if(g=g.compare,g=g!==null?g:Un,g(ee,E)&&s.ref===d.ref)return Tu(s,d,L)}return d.flags|=1,s=Ko(F,E),s.ref=d.ref,s.return=d,d.child=s}function hd(s,d,g,E,L){if(s!==null){var F=s.memoizedProps;if(Un(F,E)&&s.ref===d.ref)if(fa=!1,d.pendingProps=E=F,ap(s,L))(s.flags&131072)!==0&&(fa=!0);else return d.lanes=s.lanes,Tu(s,d,L)}return rp(s,d,g,E,L)}function Lc(s,d,g,E){var L=E.children,F=s!==null?s.memoizedState:null;if(s===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),E.mode==="hidden"){if((d.flags&128)!==0){if(F=F!==null?F.baseLanes|g:g,s!==null){for(E=d.child=s.child,L=0;E!==null;)L=L|E.lanes|E.childLanes,E=E.sibling;E=L&~F}else E=0,d.child=null;return fd(s,d,F,g,E)}if((g&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},s!==null&&T(d,F!==null?F.cachePool:null),F!==null?zs(d,F):In(),Ec(d);else return E=d.lanes=536870912,fd(s,d,F!==null?F.baseLanes|g:g,g,E)}else F!==null?(T(d,F.cachePool),zs(d,F),Yo(),d.memoizedState=null):(s!==null&&T(d,null),In(),Yo());return Ra(s,d,L,g),d.child}function Jh(s,d){return s!==null&&s.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function fd(s,d,g,E,L){var F=b();return F=F===null?null:{parent:ha._currentValue,pool:F},d.memoizedState={baseLanes:g,cachePool:F},s!==null&&T(d,null),In(),Ec(d),s!==null&&nd(s,d,E,!0),d.childLanes=L,null}function ih(s,d){return d=ip({mode:d.mode,children:d.children},s.mode),d.ref=s.ref,s.child=d,d.return=s,d}function Co(s,d,g){return Bt(d,s.child,null,g),s=ih(d,d.pendingProps),s.flags|=2,eo(d),d.memoizedState=null,s}function bm(s,d,g){var E=d.pendingProps,L=(d.flags&128)!==0;if(d.flags&=-129,s===null){if(Yt){if(E.mode==="hidden")return s=ih(d,E),d.lanes=536870912,Jh(null,s);if(fs(d),(s=Bn)?(s=Dt(s,ds),s=s!==null&&s.data==="&"?s:null,s!==null&&(d.memoizedState={dehydrated:s,treeContext:Al!==null?{id:Wa,overflow:co}:null,retryLane:536870912,hydrationErrors:null},g=yu(s),g.return=d,d.child=g,na=d,Bn=null)):s=null,s===null)throw Ms(d);return d.lanes=536870912,null}return ih(d,E)}var F=s.memoizedState;if(F!==null){var ee=F.dehydrated;if(fs(d),L)if(d.flags&256)d.flags&=-257,d=Co(s,d,g);else if(d.memoizedState!==null)d.child=s.child,d.flags|=128,d=null;else throw Error(n(558));else if(fa||nd(s,d,g,!1),L=(g&s.childLanes)!==0,fa||L){if(E=Ji,E!==null&&(ee=Vt(E,g),ee!==0&&ee!==F.retryLane))throw F.retryLane=ee,Ys(s,ee),vs(E,s,ee),aa;Lg(),d=Co(s,d,g)}else s=F.treeContext,Bn=dr(ee.nextSibling),na=d,Yt=!0,kl=null,ds=!1,s!==null&&Zu(d,s),d=ih(d,E),d.flags|=4096;return d}return s=Ko(s.child,{mode:E.mode,children:E.children}),s.ref=d.ref,d.child=s,s.return=d,s}function Qh(s,d){var g=d.ref;if(g===null)s!==null&&s.ref!==null&&(d.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(n(284));(s===null||s.ref!==g)&&(d.flags|=4194816)}}function rp(s,d,g,E,L){return Qa(d),g=Wh(s,d,g,E,void 0,L),E=kc(),s!==null&&!fa?(Yu(s,d,L),Tu(s,d,L)):(Yt&&E&&xu(d),d.flags|=1,Ra(s,d,g,L),d.child)}function wm(s,d,g,E,L,F){return Qa(d),d.updateQueue=null,g=Js(d,E,g,L),Hh(s),E=kc(),s!==null&&!fa?(Yu(s,d,F),Tu(s,d,F)):(Yt&&E&&xu(d),d.flags|=1,Ra(s,d,g,F),d.child)}function Sm(s,d,g,E,L){if(Qa(d),d.stateNode===null){var F=Eo,ee=g.contextType;typeof ee=="object"&&ee!==null&&(F=Pn(ee)),F=new g(E,F),d.memoizedState=F.state!==null&&F.state!==void 0?F.state:null,F.updater=ku,d.stateNode=F,F._reactInternals=d,F=d.stateNode,F.props=E,F.state=d.memoizedState,F.refs={},mr(d),ee=g.contextType,F.context=typeof ee=="object"&&ee!==null?Pn(ee):Eo,F.state=d.memoizedState,ee=g.getDerivedStateFromProps,typeof ee=="function"&&(Qf(d,g,ee,E),F.state=d.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof F.getSnapshotBeforeUpdate=="function"||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(ee=F.state,typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount(),ee!==F.state&&ku.enqueueReplaceState(F,F.state,null),vi(d,E,F,L),Hr(),F.state=d.memoizedState),typeof F.componentDidMount=="function"&&(d.flags|=4194308),E=!0}else if(s===null){F=d.stateNode;var Se=d.memoizedProps,Xe=Os(g,Se);F.props=Xe;var Et=F.context,Ut=g.contextType;ee=Eo,typeof Ut=="object"&&Ut!==null&&(ee=Pn(Ut));var Kt=g.getDerivedStateFromProps;Ut=typeof Kt=="function"||typeof F.getSnapshotBeforeUpdate=="function",Se=d.pendingProps!==Se,Ut||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(Se||Et!==ee)&&ym(d,F,E,ee),ur=!1;var kt=d.memoizedState;F.state=kt,vi(d,E,F,L),Hr(),Et=d.memoizedState,Se||kt!==Et||ur?(typeof Kt=="function"&&(Qf(d,g,Kt,E),Et=d.memoizedState),(Xe=ur||Yh(d,g,Xe,E,kt,Et,ee))?(Ut||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(d.flags|=4194308)):(typeof F.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=E,d.memoizedState=Et),F.props=E,F.state=Et,F.context=ee,E=Xe):(typeof F.componentDidMount=="function"&&(d.flags|=4194308),E=!1)}else{F=d.stateNode,hr(s,d),ee=d.memoizedProps,Ut=Os(g,ee),F.props=Ut,Kt=d.pendingProps,kt=F.context,Et=g.contextType,Xe=Eo,typeof Et=="object"&&Et!==null&&(Xe=Pn(Et)),Se=g.getDerivedStateFromProps,(Et=typeof Se=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(ee!==Kt||kt!==Xe)&&ym(d,F,E,Xe),ur=!1,kt=d.memoizedState,F.state=kt,vi(d,E,F,L),Hr();var It=d.memoizedState;ee!==Kt||kt!==It||ur||s!==null&&s.dependencies!==null&&Vh(s.dependencies)?(typeof Se=="function"&&(Qf(d,g,Se,E),It=d.memoizedState),(Ut=ur||Yh(d,g,Ut,E,kt,It,Xe)||s!==null&&s.dependencies!==null&&Vh(s.dependencies))?(Et||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(E,It,Xe),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(E,It,Xe)),typeof F.componentDidUpdate=="function"&&(d.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof F.componentDidUpdate!="function"||ee===s.memoizedProps&&kt===s.memoizedState||(d.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||ee===s.memoizedProps&&kt===s.memoizedState||(d.flags|=1024),d.memoizedProps=E,d.memoizedState=It),F.props=E,F.state=It,F.context=Xe,E=Ut):(typeof F.componentDidUpdate!="function"||ee===s.memoizedProps&&kt===s.memoizedState||(d.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||ee===s.memoizedProps&&kt===s.memoizedState||(d.flags|=1024),E=!1)}return F=E,Qh(s,d),E=(d.flags&128)!==0,F||E?(F=d.stateNode,g=E&&typeof g.getDerivedStateFromError!="function"?null:F.render(),d.flags|=1,s!==null&&E?(d.child=Bt(d,s.child,null,L),d.child=Bt(d,null,g,L)):Ra(s,d,g,L),d.memoizedState=F.state,s=d.child):s=Tu(s,d,L),s}function Sy(s,d,g,E){return be(),d.flags|=256,Ra(s,d,g,E),d.child}var Em={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Am(s){return{baseLanes:s,cachePool:j()}}function Cu(s,d,g){return s=s!==null?s.childLanes&~g:0,d&&(s|=il),s}function Na(s,d,g){var E=d.pendingProps,L=!1,F=(d.flags&128)!==0,ee;if((ee=F)||(ee=s!==null&&s.memoizedState===null?!1:(ci.current&2)!==0),ee&&(L=!0,d.flags&=-129),ee=(d.flags&32)!==0,d.flags&=-33,s===null){if(Yt){if(L?Da(d):Yo(),(s=Bn)?(s=Dt(s,ds),s=s!==null&&s.data!=="&"?s:null,s!==null&&(d.memoizedState={dehydrated:s,treeContext:Al!==null?{id:Wa,overflow:co}:null,retryLane:536870912,hydrationErrors:null},g=yu(s),g.return=d,d.child=g,na=d,Bn=null)):s=null,s===null)throw Ms(d);return yr(s)?d.lanes=32:d.lanes=536870912,null}var Se=E.children;return E=E.fallback,L?(Yo(),L=d.mode,Se=ip({mode:"hidden",children:Se},L),E=Ts(E,L,g,null),Se.return=d,E.return=d,Se.sibling=E,d.child=Se,E=d.child,E.memoizedState=Am(g),E.childLanes=Cu(s,ee,g),d.memoizedState=Em,Jh(null,E)):(Da(d),np(d,Se))}var Xe=s.memoizedState;if(Xe!==null&&(Se=Xe.dehydrated,Se!==null)){if(F)d.flags&256?(Da(d),d.flags&=-257,d=ec(s,d,g)):d.memoizedState!==null?(Yo(),d.child=s.child,d.flags|=128,d=null):(Yo(),Se=E.fallback,L=d.mode,E=ip({mode:"visible",children:E.children},L),Se=Ts(Se,L,g,null),Se.flags|=2,E.return=d,Se.return=d,E.sibling=Se,d.child=E,Bt(d,s.child,null,g),E=d.child,E.memoizedState=Am(g),E.childLanes=Cu(s,ee,g),d.memoizedState=Em,d=Jh(null,E));else if(Da(d),yr(Se)){if(ee=Se.nextSibling&&Se.nextSibling.dataset,ee)var Et=ee.dgst;ee=Et,E=Error(n(419)),E.stack="",E.digest=ee,Kl({value:E,source:null,stack:null}),d=ec(s,d,g)}else if(fa||nd(s,d,g,!1),ee=(g&s.childLanes)!==0,fa||ee){if(ee=Ji,ee!==null&&(E=Vt(ee,g),E!==0&&E!==Xe.retryLane))throw Xe.retryLane=E,Ys(s,E),vs(ee,s,E),aa;Jt(Se)||Lg(),d=ec(s,d,g)}else Jt(Se)?(d.flags|=192,d.child=s.child,d=null):(s=Xe.treeContext,Bn=dr(Se.nextSibling),na=d,Yt=!0,kl=null,ds=!1,s!==null&&Zu(d,s),d=np(d,E.children),d.flags|=4096);return d}return L?(Yo(),Se=E.fallback,L=d.mode,Xe=s.child,Et=Xe.sibling,E=Ko(Xe,{mode:"hidden",children:E.children}),E.subtreeFlags=Xe.subtreeFlags&65011712,Et!==null?Se=Ko(Et,Se):(Se=Ts(Se,L,g,null),Se.flags|=2),Se.return=d,E.return=d,E.sibling=Se,d.child=E,Jh(null,E),E=d.child,Se=s.child.memoizedState,Se===null?Se=Am(g):(L=Se.cachePool,L!==null?(Xe=ha._currentValue,L=L.parent!==Xe?{parent:Xe,pool:Xe}:L):L=j(),Se={baseLanes:Se.baseLanes|g,cachePool:L}),E.memoizedState=Se,E.childLanes=Cu(s,ee,g),d.memoizedState=Em,Jh(s.child,E)):(Da(d),g=s.child,s=g.sibling,g=Ko(g,{mode:"visible",children:E.children}),g.return=d,g.sibling=null,s!==null&&(ee=d.deletions,ee===null?(d.deletions=[s],d.flags|=16):ee.push(s)),d.child=g,d.memoizedState=null,g)}function np(s,d){return d=ip({mode:"visible",children:d},s.mode),d.return=s,s.child=d}function ip(s,d){return s=qa(22,s,null,d),s.lanes=0,s}function ec(s,d,g){return Bt(d,s.child,null,g),s=np(d,d.pendingProps.children),s.flags|=2,d.memoizedState=null,s}function Ey(s,d,g){s.lanes|=d;var E=s.alternate;E!==null&&(E.lanes|=d),_u(s.return,d,g)}function km(s,d,g,E,L,F){var ee=s.memoizedState;ee===null?s.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:E,tail:g,tailMode:L,treeForkCount:F}:(ee.isBackwards=d,ee.rendering=null,ee.renderingStartTime=0,ee.last=E,ee.tail=g,ee.tailMode=L,ee.treeForkCount=F)}function ef(s,d,g){var E=d.pendingProps,L=E.revealOrder,F=E.tail;E=E.children;var ee=ci.current,Se=(ee&2)!==0;if(Se?(ee=ee&1|2,d.flags|=128):ee&=1,Ze(ci,ee),Ra(s,d,E,g),E=Yt?Oa:0,!Se&&s!==null&&(s.flags&128)!==0)e:for(s=d.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Ey(s,g,d);else if(s.tag===19)Ey(s,g,d);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===d)break e;for(;s.sibling===null;){if(s.return===null||s.return===d)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(L){case"forwards":for(g=d.child,L=null;g!==null;)s=g.alternate,s!==null&&Ac(s)===null&&(L=g),g=g.sibling;g=L,g===null?(L=d.child,d.child=null):(L=g.sibling,g.sibling=null),km(d,!1,L,g,F,E);break;case"backwards":case"unstable_legacy-backwards":for(g=null,L=d.child,d.child=null;L!==null;){if(s=L.alternate,s!==null&&Ac(s)===null){d.child=L;break}s=L.sibling,L.sibling=g,g=L,L=s}km(d,!0,g,null,F,E);break;case"together":km(d,!1,null,null,void 0,E);break;default:d.memoizedState=null}return d.child}function Tu(s,d,g){if(s!==null&&(d.dependencies=s.dependencies),yd|=d.lanes,(g&d.childLanes)===0)if(s!==null){if(nd(s,d,g,!1),(g&d.childLanes)===0)return null}else return null;if(s!==null&&d.child!==s.child)throw Error(n(153));if(d.child!==null){for(s=d.child,g=Ko(s,s.pendingProps),d.child=g,g.return=d;s.sibling!==null;)s=s.sibling,g=g.sibling=Ko(s,s.pendingProps),g.return=d;g.sibling=null}return d.child}function ap(s,d){return(s.lanes&d)!==0?!0:(s=s.dependencies,!!(s!==null&&Vh(s)))}function q0(s,d,g){switch(d.tag){case 3:tr(d,d.stateNode.containerInfo),Yl(d,ha,s.memoizedState.cache),be();break;case 27:case 5:Ht(d);break;case 4:tr(d,d.stateNode.containerInfo);break;case 10:Yl(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,fs(d),null;break;case 13:var E=d.memoizedState;if(E!==null)return E.dehydrated!==null?(Da(d),d.flags|=128,null):(g&d.child.childLanes)!==0?Na(s,d,g):(Da(d),s=Tu(s,d,g),s!==null?s.sibling:null);Da(d);break;case 19:var L=(s.flags&128)!==0;if(E=(g&d.childLanes)!==0,E||(nd(s,d,g,!1),E=(g&d.childLanes)!==0),L){if(E)return ef(s,d,g);d.flags|=128}if(L=d.memoizedState,L!==null&&(L.rendering=null,L.tail=null,L.lastEffect=null),Ze(ci,ci.current),E)break;return null;case 22:return d.lanes=0,Lc(s,d,g,d.pendingProps);case 24:Yl(d,ha,s.memoizedState.cache)}return Tu(s,d,g)}function Ay(s,d,g){if(s!==null)if(s.memoizedProps!==d.pendingProps)fa=!0;else{if(!ap(s,g)&&(d.flags&128)===0)return fa=!1,q0(s,d,g);fa=(s.flags&131072)!==0}else fa=!1,Yt&&(d.flags&1048576)!==0&&Gh(d,Oa,d.index);switch(d.lanes=0,d.tag){case 16:e:{var E=d.pendingProps;if(s=we(d.elementType),d.type=s,typeof s=="function")El(s)?(E=Os(s,E),d.tag=1,d=Sm(null,d,s,E,g)):(d.tag=0,d=rp(null,d,s,E,g));else{if(s!=null){var L=s.$$typeof;if(L===ue){d.tag=11,d=ln(null,d,s,E,g);break e}else if(L===he){d.tag=14,d=dd(null,d,s,E,g);break e}}throw d=Ke(s)||s,Error(n(306,d,""))}}return d;case 0:return rp(s,d,d.type,d.pendingProps,g);case 1:return E=d.type,L=Os(E,d.pendingProps),Sm(s,d,E,L,g);case 3:e:{if(tr(d,d.stateNode.containerInfo),s===null)throw Error(n(387));E=d.pendingProps;var F=d.memoizedState;L=F.element,hr(s,d),vi(d,E,null,g);var ee=d.memoizedState;if(E=ee.cache,Yl(d,ha,E),E!==F.cache&&Kd(d,[ha],g,!0),Hr(),E=ee.element,F.isDehydrated)if(F={element:E,isDehydrated:!1,cache:ee.cache},d.updateQueue.baseState=F,d.memoizedState=F,d.flags&256){d=Sy(s,d,E,g);break e}else if(E!==L){L=Xo(Error(n(424)),d),Kl(L),d=Sy(s,d,E,g);break e}else{switch(s=d.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Bn=dr(s.firstChild),na=d,Yt=!0,kl=null,ds=!0,g=ir(d,null,E,g),d.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(be(),E===L){d=Tu(s,d,g);break e}Ra(s,d,E,g)}d=d.child}return d;case 26:return Qh(s,d),s===null?(g=Po(d.type,null,d.pendingProps,null))?d.memoizedState=g:Yt||(g=d.type,s=d.pendingProps,E=w(rr.current).createElement(g),E[Ir]=d,E[cn]=s,Do(E,g,s),Ta(E),d.stateNode=E):d.memoizedState=Po(d.type,s.memoizedProps,d.pendingProps,s.memoizedState),null;case 27:return Ht(d),s===null&&Yt&&(E=d.stateNode=br(d.type,d.pendingProps,rr.current),na=d,ds=!0,L=Bn,ve(d.type)?(pr=L,Bn=dr(E.firstChild)):Bn=L),Ra(s,d,d.pendingProps.children,g),Qh(s,d),s===null&&(d.flags|=4194304),d.child;case 5:return s===null&&Yt&&((L=E=Bn)&&(E=Je(E,d.type,d.pendingProps,ds),E!==null?(d.stateNode=E,na=d,Bn=dr(E.firstChild),ds=!1,L=!0):L=!1),L||Ms(d)),Ht(d),L=d.type,F=d.pendingProps,ee=s!==null?s.memoizedProps:null,E=F.children,I(L,F)?E=null:ee!==null&&I(L,ee)&&(d.flags|=32),d.memoizedState!==null&&(L=Wh(s,d,gg,null,null,g),yh._currentValue=L),Qh(s,d),Ra(s,d,E,g),d.child;case 6:return s===null&&Yt&&((s=g=Bn)&&(g=Qe(g,d.pendingProps,ds),g!==null?(d.stateNode=g,na=d,Bn=null,s=!0):s=!1),s||Ms(d)),null;case 13:return Na(s,d,g);case 4:return tr(d,d.stateNode.containerInfo),E=d.pendingProps,s===null?d.child=Bt(d,null,E,g):Ra(s,d,E,g),d.child;case 11:return ln(s,d,d.type,d.pendingProps,g);case 7:return Ra(s,d,d.pendingProps,g),d.child;case 8:return Ra(s,d,d.pendingProps.children,g),d.child;case 12:return Ra(s,d,d.pendingProps.children,g),d.child;case 10:return E=d.pendingProps,Yl(d,d.type,E.value),Ra(s,d,E.children,g),d.child;case 9:return L=d.type._context,E=d.pendingProps.children,Qa(d),L=Pn(L),E=E(L),d.flags|=1,Ra(s,d,E,g),d.child;case 14:return dd(s,d,d.type,d.pendingProps,g);case 15:return hd(s,d,d.type,d.pendingProps,g);case 19:return ef(s,d,g);case 31:return bm(s,d,g);case 22:return Lc(s,d,g,d.pendingProps);case 24:return Qa(d),E=Pn(ha),s===null?(L=b(),L===null&&(L=Ji,F=Ha(),L.pooledCache=F,F.refCount++,F!==null&&(L.pooledCacheLanes|=g),L=F),d.memoizedState={parent:E,cache:L},mr(d),Yl(d,ha,L)):((s.lanes&g)!==0&&(hr(s,d),vi(d,null,null,g),Hr()),L=s.memoizedState,F=d.memoizedState,L.parent!==E?(L={parent:E,cache:E},d.memoizedState=L,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=L),Yl(d,ha,E)):(E=F.cache,Yl(d,ha,E),E!==L.cache&&Kd(d,[ha],g,!0))),Ra(s,d,d.pendingProps.children,g),d.child;case 29:throw d.pendingProps}throw Error(n(156,d.tag))}function Ic(s){s.flags|=4}function Cm(s,d,g,E,L){if((d=(s.mode&32)!==0)&&(d=!1),d){if(s.flags|=16777216,(L&335544128)===L)if(s.stateNode.complete)s.flags|=8192;else if(vp())s.flags|=8192;else throw Te=te,V}else s.flags&=-16777217}function op(s,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!vo(d))if(vp())s.flags|=8192;else throw Te=te,V}function Oc(s,d){d!==null&&(s.flags|=4),s.flags&16384&&(d=s.tag!==22?Ie():536870912,s.lanes|=d,cf|=d)}function ah(s,d){if(!Yt)switch(s.tailMode){case"hidden":d=s.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?s.tail=null:g.sibling=null;break;case"collapsed":g=s.tail;for(var E=null;g!==null;)g.alternate!==null&&(E=g),g=g.sibling;E===null?d||s.tail===null?s.tail=null:s.tail.sibling=null:E.sibling=null}}function oa(s){var d=s.alternate!==null&&s.alternate.child===s.child,g=0,E=0;if(d)for(var L=s.child;L!==null;)g|=L.lanes|L.childLanes,E|=L.subtreeFlags&65011712,E|=L.flags&65011712,L.return=s,L=L.sibling;else for(L=s.child;L!==null;)g|=L.lanes|L.childLanes,E|=L.subtreeFlags,E|=L.flags,L.return=s,L=L.sibling;return s.subtreeFlags|=E,s.childLanes=g,d}function ky(s,d,g){var E=d.pendingProps;switch(Hu(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oa(d),null;case 1:return oa(d),null;case 3:return g=d.stateNode,E=null,s!==null&&(E=s.memoizedState.cache),d.memoizedState.cache!==E&&(d.flags|=2048),Jl(ha),at(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(s===null||s.child===null)&&(En(d)?Ic(d):s===null||s.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Xu())),oa(d),null;case 26:var L=d.type,F=d.memoizedState;return s===null?(Ic(d),F!==null?(oa(d),op(d,F)):(oa(d),Cm(d,L,null,E,g))):F?F!==s.memoizedState?(Ic(d),oa(d),op(d,F)):(oa(d),d.flags&=-16777217):(s=s.memoizedProps,s!==E&&Ic(d),oa(d),Cm(d,L,s,E,g)),null;case 27:if(Mt(d),g=rr.current,L=d.type,s!==null&&d.stateNode!=null)s.memoizedProps!==E&&Ic(d);else{if(!E){if(d.stateNode===null)throw Error(n(166));return oa(d),null}s=zt.current,En(d)?Zl(d):(s=br(L,E,g),d.stateNode=s,Ic(d))}return oa(d),null;case 5:if(Mt(d),L=d.type,s!==null&&d.stateNode!=null)s.memoizedProps!==E&&Ic(d);else{if(!E){if(d.stateNode===null)throw Error(n(166));return oa(d),null}if(F=zt.current,En(d))Zl(d);else{var ee=w(rr.current);switch(F){case 1:F=ee.createElementNS("http://www.w3.org/2000/svg",L);break;case 2:F=ee.createElementNS("http://www.w3.org/1998/Math/MathML",L);break;default:switch(L){case"svg":F=ee.createElementNS("http://www.w3.org/2000/svg",L);break;case"math":F=ee.createElementNS("http://www.w3.org/1998/Math/MathML",L);break;case"script":F=ee.createElement("div"),F.innerHTML="<script><\/script>",F=F.removeChild(F.firstChild);break;case"select":F=typeof E.is=="string"?ee.createElement("select",{is:E.is}):ee.createElement("select"),E.multiple?F.multiple=!0:E.size&&(F.size=E.size);break;default:F=typeof E.is=="string"?ee.createElement(L,{is:E.is}):ee.createElement(L)}}F[Ir]=d,F[cn]=E;e:for(ee=d.child;ee!==null;){if(ee.tag===5||ee.tag===6)F.appendChild(ee.stateNode);else if(ee.tag!==4&&ee.tag!==27&&ee.child!==null){ee.child.return=ee,ee=ee.child;continue}if(ee===d)break e;for(;ee.sibling===null;){if(ee.return===null||ee.return===d)break e;ee=ee.return}ee.sibling.return=ee.return,ee=ee.sibling}d.stateNode=F;e:switch(Do(F,L,E),L){case"button":case"input":case"select":case"textarea":E=!!E.autoFocus;break e;case"img":E=!0;break e;default:E=!1}E&&Ic(d)}}return oa(d),Cm(d,d.type,s===null?null:s.memoizedProps,d.pendingProps,g),null;case 6:if(s&&d.stateNode!=null)s.memoizedProps!==E&&Ic(d);else{if(typeof E!="string"&&d.stateNode===null)throw Error(n(166));if(s=rr.current,En(d)){if(s=d.stateNode,g=d.memoizedProps,E=null,L=na,L!==null)switch(L.tag){case 27:case 5:E=L.memoizedProps}s[Ir]=d,s=!!(s.nodeValue===g||E!==null&&E.suppressHydrationWarning===!0||_f(s.nodeValue,g)),s||Ms(d,!0)}else s=w(s).createTextNode(E),s[Ir]=d,d.stateNode=s}return oa(d),null;case 31:if(g=d.memoizedState,s===null||s.memoizedState!==null){if(E=En(d),g!==null){if(s===null){if(!E)throw Error(n(318));if(s=d.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(557));s[Ir]=d}else be(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;oa(d),s=!1}else g=Xu(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),s=!0;if(!s)return d.flags&256?(eo(d),d):(eo(d),null);if((d.flags&128)!==0)throw Error(n(558))}return oa(d),null;case 13:if(E=d.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(L=En(d),E!==null&&E.dehydrated!==null){if(s===null){if(!L)throw Error(n(318));if(L=d.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(n(317));L[Ir]=d}else be(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;oa(d),L=!1}else L=Xu(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=L),L=!0;if(!L)return d.flags&256?(eo(d),d):(eo(d),null)}return eo(d),(d.flags&128)!==0?(d.lanes=g,d):(g=E!==null,s=s!==null&&s.memoizedState!==null,g&&(E=d.child,L=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(L=E.alternate.memoizedState.cachePool.pool),F=null,E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(F=E.memoizedState.cachePool.pool),F!==L&&(E.flags|=2048)),g!==s&&g&&(d.child.flags|=8192),Oc(d,d.updateQueue),oa(d),null);case 4:return at(),s===null&&Wm(d.stateNode.containerInfo),oa(d),null;case 10:return Jl(d.type),oa(d),null;case 19:if(qe(ci),E=d.memoizedState,E===null)return oa(d),null;if(L=(d.flags&128)!==0,F=E.rendering,F===null)if(L)ah(E,!1);else{if(ma!==0||s!==null&&(s.flags&128)!==0)for(s=d.child;s!==null;){if(F=Ac(s),F!==null){for(d.flags|=128,ah(E,!1),s=F.updateQueue,d.updateQueue=s,Oc(d,s),d.subtreeFlags=0,s=g,g=d.child;g!==null;)Fh(g,s),g=g.sibling;return Ze(ci,ci.current&1|2),Yt&&Ds(d,E.treeForkCount),d.child}s=s.sibling}E.tail!==null&&Rn()>uh&&(d.flags|=128,L=!0,ah(E,!1),d.lanes=4194304)}else{if(!L)if(s=Ac(F),s!==null){if(d.flags|=128,L=!0,s=s.updateQueue,d.updateQueue=s,Oc(d,s),ah(E,!0),E.tail===null&&E.tailMode==="hidden"&&!F.alternate&&!Yt)return oa(d),null}else 2*Rn()-E.renderingStartTime>uh&&g!==536870912&&(d.flags|=128,L=!0,ah(E,!1),d.lanes=4194304);E.isBackwards?(F.sibling=d.child,d.child=F):(s=E.last,s!==null?s.sibling=F:d.child=F,E.last=F)}return E.tail!==null?(s=E.tail,E.rendering=s,E.tail=s.sibling,E.renderingStartTime=Rn(),s.sibling=null,g=ci.current,Ze(ci,L?g&1|2:g&1),Yt&&Ds(d,E.treeForkCount),s):(oa(d),null);case 22:case 23:return eo(d),ho(),E=d.memoizedState!==null,s!==null?s.memoizedState!==null!==E&&(d.flags|=8192):E&&(d.flags|=8192),E?(g&536870912)!==0&&(d.flags&128)===0&&(oa(d),d.subtreeFlags&6&&(d.flags|=8192)):oa(d),g=d.updateQueue,g!==null&&Oc(d,g.retryQueue),g=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),E=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(E=d.memoizedState.cachePool.pool),E!==g&&(d.flags|=2048),s!==null&&qe(_),null;case 24:return g=null,s!==null&&(g=s.memoizedState.cache),d.memoizedState.cache!==g&&(d.flags|=2048),Jl(ha),oa(d),null;case 25:return null;case 30:return null}throw Error(n(156,d.tag))}function tf(s,d){switch(Hu(d),d.tag){case 1:return s=d.flags,s&65536?(d.flags=s&-65537|128,d):null;case 3:return Jl(ha),at(),s=d.flags,(s&65536)!==0&&(s&128)===0?(d.flags=s&-65537|128,d):null;case 26:case 27:case 5:return Mt(d),null;case 31:if(d.memoizedState!==null){if(eo(d),d.alternate===null)throw Error(n(340));be()}return s=d.flags,s&65536?(d.flags=s&-65537|128,d):null;case 13:if(eo(d),s=d.memoizedState,s!==null&&s.dehydrated!==null){if(d.alternate===null)throw Error(n(340));be()}return s=d.flags,s&65536?(d.flags=s&-65537|128,d):null;case 19:return qe(ci),null;case 4:return at(),null;case 10:return Jl(d.type),null;case 22:case 23:return eo(d),ho(),s!==null&&qe(_),s=d.flags,s&65536?(d.flags=s&-65537|128,d):null;case 24:return Jl(ha),null;case 25:return null;default:return null}}function Cg(s,d){switch(Hu(d),d.tag){case 3:Jl(ha),at();break;case 26:case 27:case 5:Mt(d);break;case 4:at();break;case 31:d.memoizedState!==null&&eo(d);break;case 13:eo(d);break;case 19:qe(ci);break;case 10:Jl(d.type);break;case 22:case 23:eo(d),ho(),s!==null&&qe(_);break;case 24:Jl(ha)}}function rf(s,d){try{var g=d.updateQueue,E=g!==null?g.lastEffect:null;if(E!==null){var L=E.next;g=L;do{if((g.tag&s)===s){E=void 0;var F=g.create,ee=g.inst;E=F(),ee.destroy=E}g=g.next}while(g!==L)}}catch(Se){Ii(d,d.return,Se)}}function Tl(s,d,g){try{var E=d.updateQueue,L=E!==null?E.lastEffect:null;if(L!==null){var F=L.next;E=F;do{if((E.tag&s)===s){var ee=E.inst,Se=ee.destroy;if(Se!==void 0){ee.destroy=void 0,L=d;var Xe=g,Et=Se;try{Et()}catch(Ut){Ii(L,Xe,Ut)}}}E=E.next}while(E!==F)}}catch(Ut){Ii(d,d.return,Ut)}}function nf(s){var d=s.updateQueue;if(d!==null){var g=s.stateNode;try{Ln(d,g)}catch(E){Ii(s,s.return,E)}}}function Tm(s,d,g){g.props=Os(s.type,s.memoizedProps),g.state=s.memoizedState;try{g.componentWillUnmount()}catch(E){Ii(s,d,E)}}function el(s,d){try{var g=s.ref;if(g!==null){switch(s.tag){case 26:case 27:case 5:var E=s.stateNode;break;case 30:E=s.stateNode;break;default:E=s.stateNode}typeof g=="function"?s.refCleanup=g(E):g.current=E}}catch(L){Ii(s,d,L)}}function ys(s,d){var g=s.ref,E=s.refCleanup;if(g!==null)if(typeof E=="function")try{E()}catch(L){Ii(s,d,L)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(L){Ii(s,d,L)}else g.current=null}function Cy(s){var d=s.type,g=s.memoizedProps,E=s.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":g.autoFocus&&E.focus();break e;case"img":g.src?E.src=g.src:g.srcSet&&(E.srcset=g.srcSet)}}catch(L){Ii(s,s.return,L)}}function Tg(s,d,g){try{var E=s.stateNode;Y0(E,s.type,g,d),E[cn]=d}catch(L){Ii(s,s.return,L)}}function Ty(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&ve(s.type)||s.tag===4}function Dg(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Ty(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&ve(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function sp(s,d,g){var E=s.tag;if(E===5||E===6)s=s.stateNode,d?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(s,d):(d=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,d.appendChild(s),g=g._reactRootContainer,g!=null||d.onclick!==null||(d.onclick=Nt));else if(E!==4&&(E===27&&ve(s.type)&&(g=s.stateNode,d=null),s=s.child,s!==null))for(sp(s,d,g),s=s.sibling;s!==null;)sp(s,d,g),s=s.sibling}function lp(s,d,g){var E=s.tag;if(E===5||E===6)s=s.stateNode,d?g.insertBefore(s,d):g.appendChild(s);else if(E!==4&&(E===27&&ve(s.type)&&(g=s.stateNode),s=s.child,s!==null))for(lp(s,d,g),s=s.sibling;s!==null;)lp(s,d,g),s=s.sibling}function Dm(s){var d=s.stateNode,g=s.memoizedProps;try{for(var E=s.type,L=d.attributes;L.length;)d.removeAttributeNode(L[0]);Do(d,E,g),d[Ir]=s,d[cn]=g}catch(F){Ii(s,s.return,F)}}var tc=!1,po=!1,af=!1,Dy=typeof WeakSet=="function"?WeakSet:Set,To=null;function W0(s,d){if(s=s.containerInfo,f=qg,s=_c(s),Rh(s)){if("selectionStart"in s)var g={start:s.selectionStart,end:s.selectionEnd};else e:{g=(g=s.ownerDocument)&&g.defaultView||window;var E=g.getSelection&&g.getSelection();if(E&&E.rangeCount!==0){g=E.anchorNode;var L=E.anchorOffset,F=E.focusNode;E=E.focusOffset;try{g.nodeType,F.nodeType}catch{g=null;break e}var ee=0,Se=-1,Xe=-1,Et=0,Ut=0,Kt=s,kt=null;t:for(;;){for(var It;Kt!==g||L!==0&&Kt.nodeType!==3||(Se=ee+L),Kt!==F||E!==0&&Kt.nodeType!==3||(Xe=ee+E),Kt.nodeType===3&&(ee+=Kt.nodeValue.length),(It=Kt.firstChild)!==null;)kt=Kt,Kt=It;for(;;){if(Kt===s)break t;if(kt===g&&++Et===L&&(Se=ee),kt===F&&++Ut===E&&(Xe=ee),(It=Kt.nextSibling)!==null)break;Kt=kt,kt=Kt.parentNode}Kt=It}g=Se===-1||Xe===-1?null:{start:Se,end:Xe}}else g=null}g=g||{start:0,end:0}}else g=null;for(m={focusedElem:s,selectionRange:g},qg=!1,To=d;To!==null;)if(d=To,s=d.child,(d.subtreeFlags&1028)!==0&&s!==null)s.return=d,To=s;else for(;To!==null;){switch(d=To,F=d.alternate,s=d.flags,d.tag){case 0:if((s&4)!==0&&(s=d.updateQueue,s=s!==null?s.events:null,s!==null))for(g=0;g<s.length;g++)L=s[g],L.ref.impl=L.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&F!==null){s=void 0,g=d,L=F.memoizedProps,F=F.memoizedState,E=g.stateNode;try{var Ur=Os(g.type,L);s=E.getSnapshotBeforeUpdate(Ur,F),E.__reactInternalSnapshotBeforeUpdate=s}catch(xn){Ii(g,g.return,xn)}}break;case 3:if((s&1024)!==0){if(s=d.stateNode.containerInfo,g=s.nodeType,g===9)dt(s);else if(g===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":dt(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=d.sibling,s!==null){s.return=d.return,To=s;break}To=d.return}}function Mm(s,d,g){var E=g.flags;switch(g.tag){case 0:case 11:case 15:rl(s,g),E&4&&rf(5,g);break;case 1:if(rl(s,g),E&4)if(s=g.stateNode,d===null)try{s.componentDidMount()}catch(ee){Ii(g,g.return,ee)}else{var L=Os(g.type,d.memoizedProps);d=d.memoizedState;try{s.componentDidUpdate(L,d,s.__reactInternalSnapshotBeforeUpdate)}catch(ee){Ii(g,g.return,ee)}}E&64&&nf(g),E&512&&el(g,g.return);break;case 3:if(rl(s,g),E&64&&(s=g.updateQueue,s!==null)){if(d=null,g.child!==null)switch(g.child.tag){case 27:case 5:d=g.child.stateNode;break;case 1:d=g.child.stateNode}try{Ln(s,d)}catch(ee){Ii(g,g.return,ee)}}break;case 27:d===null&&E&4&&Dm(g);case 26:case 5:rl(s,g),d===null&&E&4&&Cy(g),E&512&&el(g,g.return);break;case 12:rl(s,g);break;case 31:rl(s,g),E&4&&Ba(s,g);break;case 13:rl(s,g),E&4&&Pm(s,g),E&64&&(s=g.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(g=_p.bind(null,g),Zr(s,g))));break;case 22:if(E=g.memoizedState!==null||tc,!E){d=d!==null&&d.memoizedState!==null||po,L=tc;var F=po;tc=E,(po=d)&&!F?nc(s,g,(g.subtreeFlags&8772)!==0):rl(s,g),tc=L,po=F}break;case 30:break;default:rl(s,g)}}function zm(s){var d=s.alternate;d!==null&&(s.alternate=null,zm(d)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(d=s.stateNode,d!==null&&Ca(d)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var pa=null,tl=!1;function jc(s,d,g){for(g=g.child;g!==null;)of(s,d,g),g=g.sibling}function of(s,d,g){if(kr&&typeof kr.onCommitFiberUnmount=="function")try{kr.onCommitFiberUnmount(nr,g)}catch{}switch(g.tag){case 26:po||ys(g,d),jc(s,d,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:po||ys(g,d);var E=pa,L=tl;ve(g.type)&&(pa=g.stateNode,tl=!1),jc(s,d,g),Ot(g.stateNode),pa=E,tl=L;break;case 5:po||ys(g,d);case 6:if(E=pa,L=tl,pa=null,jc(s,d,g),pa=E,tl=L,pa!==null)if(tl)try{(pa.nodeType===9?pa.body:pa.nodeName==="HTML"?pa.ownerDocument.body:pa).removeChild(g.stateNode)}catch(F){Ii(g,d,F)}else try{pa.removeChild(g.stateNode)}catch(F){Ii(g,d,F)}break;case 18:pa!==null&&(tl?(s=pa,Oe(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,g.stateNode),Xg(s)):Oe(pa,g.stateNode));break;case 4:E=pa,L=tl,pa=g.stateNode.containerInfo,tl=!0,jc(s,d,g),pa=E,tl=L;break;case 0:case 11:case 14:case 15:Tl(2,g,d),po||Tl(4,g,d),jc(s,d,g);break;case 1:po||(ys(g,d),E=g.stateNode,typeof E.componentWillUnmount=="function"&&Tm(g,d,E)),jc(s,d,g);break;case 21:jc(s,d,g);break;case 22:po=(E=po)||g.memoizedState!==null,jc(s,d,g),po=E;break;default:jc(s,d,g)}}function Ba(s,d){if(d.memoizedState===null&&(s=d.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Xg(s)}catch(g){Ii(d,d.return,g)}}}function Pm(s,d){if(d.memoizedState===null&&(s=d.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Xg(s)}catch(g){Ii(d,d.return,g)}}function My(s){switch(s.tag){case 31:case 13:case 19:var d=s.stateNode;return d===null&&(d=s.stateNode=new Dy),d;case 22:return s=s.stateNode,d=s._retryCache,d===null&&(d=s._retryCache=new Dy),d;default:throw Error(n(435,s.tag))}}function up(s,d){var g=My(s);d.forEach(function(E){if(!g.has(E)){g.add(E);var L=X0.bind(null,s,E);E.then(L,L)}})}function jn(s,d){var g=d.deletions;if(g!==null)for(var E=0;E<g.length;E++){var L=g[E],F=s,ee=d,Se=ee;e:for(;Se!==null;){switch(Se.tag){case 27:if(ve(Se.type)){pa=Se.stateNode,tl=!1;break e}break;case 5:pa=Se.stateNode,tl=!1;break e;case 3:case 4:pa=Se.stateNode.containerInfo,tl=!0;break e}Se=Se.return}if(pa===null)throw Error(n(160));of(F,ee,L),pa=null,tl=!1,F=L.alternate,F!==null&&(F.return=null),L.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)Lm(d,s),d=d.sibling}var Dl=null;function Lm(s,d){var g=s.alternate,E=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:jn(d,s),ga(s),E&4&&(Tl(3,s,s.return),rf(3,s),Tl(5,s,s.return));break;case 1:jn(d,s),ga(s),E&512&&(po||g===null||ys(g,g.return)),E&64&&tc&&(s=s.updateQueue,s!==null&&(E=s.callbacks,E!==null&&(g=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=g===null?E:g.concat(E))));break;case 26:var L=Dl;if(jn(d,s),ga(s),E&512&&(po||g===null||ys(g,g.return)),E&4){var F=g!==null?g.memoizedState:null;if(E=s.memoizedState,g===null)if(E===null)if(s.stateNode===null){e:{E=s.type,g=s.memoizedProps,L=L.ownerDocument||L;t:switch(E){case"title":F=L.getElementsByTagName("title")[0],(!F||F[li]||F[Ir]||F.namespaceURI==="http://www.w3.org/2000/svg"||F.hasAttribute("itemprop"))&&(F=L.createElement(E),L.head.insertBefore(F,L.querySelector("head > title"))),Do(F,E,g),F[Ir]=s,Ta(F),E=F;break e;case"link":var ee=zu("link","href",L).get(E+(g.href||""));if(ee){for(var Se=0;Se<ee.length;Se++)if(F=ee[Se],F.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&F.getAttribute("rel")===(g.rel==null?null:g.rel)&&F.getAttribute("title")===(g.title==null?null:g.title)&&F.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){ee.splice(Se,1);break t}}F=L.createElement(E),Do(F,E,g),L.head.appendChild(F);break;case"meta":if(ee=zu("meta","content",L).get(E+(g.content||""))){for(Se=0;Se<ee.length;Se++)if(F=ee[Se],F.getAttribute("content")===(g.content==null?null:""+g.content)&&F.getAttribute("name")===(g.name==null?null:g.name)&&F.getAttribute("property")===(g.property==null?null:g.property)&&F.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&F.getAttribute("charset")===(g.charSet==null?null:g.charSet)){ee.splice(Se,1);break t}}F=L.createElement(E),Do(F,E,g),L.head.appendChild(F);break;default:throw Error(n(468,E))}F[Ir]=s,Ta(F),E=F}s.stateNode=E}else Ll(L,s.type,s.stateNode);else s.stateNode=Wi(L,E,s.memoizedProps);else F!==E?(F===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):F.count--,E===null?Ll(L,s.type,s.stateNode):Wi(L,E,s.memoizedProps)):E===null&&s.stateNode!==null&&Tg(s,s.memoizedProps,g.memoizedProps)}break;case 27:jn(d,s),ga(s),E&512&&(po||g===null||ys(g,g.return)),g!==null&&E&4&&Tg(s,s.memoizedProps,g.memoizedProps);break;case 5:if(jn(d,s),ga(s),E&512&&(po||g===null||ys(g,g.return)),s.flags&32){L=s.stateNode;try{Ge(L,"")}catch(Ur){Ii(s,s.return,Ur)}}E&4&&s.stateNode!=null&&(L=s.memoizedProps,Tg(s,L,g!==null?g.memoizedProps:L)),E&1024&&(af=!0);break;case 6:if(jn(d,s),ga(s),E&4){if(s.stateNode===null)throw Error(n(162));E=s.memoizedProps,g=s.stateNode;try{g.nodeValue=E}catch(Ur){Ii(s,s.return,Ur)}}break;case 3:if(ol=null,L=Dl,Dl=Qr(d.containerInfo),jn(d,s),Dl=L,ga(s),E&4&&g!==null&&g.memoizedState.isDehydrated)try{Xg(d.containerInfo)}catch(Ur){Ii(s,s.return,Ur)}af&&(af=!1,rc(s));break;case 4:E=Dl,Dl=Qr(s.stateNode.containerInfo),jn(d,s),ga(s),Dl=E;break;case 12:jn(d,s),ga(s);break;case 31:jn(d,s),ga(s),E&4&&(E=s.updateQueue,E!==null&&(s.updateQueue=null,up(s,E)));break;case 13:jn(d,s),ga(s),s.child.flags&8192&&s.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(lh=Rn()),E&4&&(E=s.updateQueue,E!==null&&(s.updateQueue=null,up(s,E)));break;case 22:L=s.memoizedState!==null;var Xe=g!==null&&g.memoizedState!==null,Et=tc,Ut=po;if(tc=Et||L,po=Ut||Xe,jn(d,s),po=Ut,tc=Et,ga(s),E&8192)e:for(d=s.stateNode,d._visibility=L?d._visibility&-2:d._visibility|1,L&&(g===null||Xe||tc||po||pd(s)),g=null,d=s;;){if(d.tag===5||d.tag===26){if(g===null){Xe=g=d;try{if(F=Xe.stateNode,L)ee=F.style,typeof ee.setProperty=="function"?ee.setProperty("display","none","important"):ee.display="none";else{Se=Xe.stateNode;var Kt=Xe.memoizedProps.style,kt=Kt!=null&&Kt.hasOwnProperty("display")?Kt.display:null;Se.style.display=kt==null||typeof kt=="boolean"?"":(""+kt).trim()}}catch(Ur){Ii(Xe,Xe.return,Ur)}}}else if(d.tag===6){if(g===null){Xe=d;try{Xe.stateNode.nodeValue=L?"":Xe.memoizedProps}catch(Ur){Ii(Xe,Xe.return,Ur)}}}else if(d.tag===18){if(g===null){Xe=d;try{var It=Xe.stateNode;L?Be(It,!0):Be(Xe.stateNode,!1)}catch(Ur){Ii(Xe,Xe.return,Ur)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===s)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break e;for(;d.sibling===null;){if(d.return===null||d.return===s)break e;g===d&&(g=null),d=d.return}g===d&&(g=null),d.sibling.return=d.return,d=d.sibling}E&4&&(E=s.updateQueue,E!==null&&(g=E.retryQueue,g!==null&&(E.retryQueue=null,up(s,g))));break;case 19:jn(d,s),ga(s),E&4&&(E=s.updateQueue,E!==null&&(s.updateQueue=null,up(s,E)));break;case 30:break;case 21:break;default:jn(d,s),ga(s)}}function ga(s){var d=s.flags;if(d&2){try{for(var g,E=s.return;E!==null;){if(Ty(E)){g=E;break}E=E.return}if(g==null)throw Error(n(160));switch(g.tag){case 27:var L=g.stateNode,F=Dg(s);lp(s,F,L);break;case 5:var ee=g.stateNode;g.flags&32&&(Ge(ee,""),g.flags&=-33);var Se=Dg(s);lp(s,Se,ee);break;case 3:case 4:var Xe=g.stateNode.containerInfo,Et=Dg(s);sp(s,Et,Xe);break;default:throw Error(n(161))}}catch(Ut){Ii(s,s.return,Ut)}s.flags&=-3}d&4096&&(s.flags&=-4097)}function rc(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var d=s;rc(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),s=s.sibling}}function rl(s,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)Mm(s,d.alternate,d),d=d.sibling}function pd(s){for(s=s.child;s!==null;){var d=s;switch(d.tag){case 0:case 11:case 14:case 15:Tl(4,d,d.return),pd(d);break;case 1:ys(d,d.return);var g=d.stateNode;typeof g.componentWillUnmount=="function"&&Tm(d,d.return,g),pd(d);break;case 27:Ot(d.stateNode);case 26:case 5:ys(d,d.return),pd(d);break;case 22:d.memoizedState===null&&pd(d);break;case 30:pd(d);break;default:pd(d)}s=s.sibling}}function nc(s,d,g){for(g=g&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var E=d.alternate,L=s,F=d,ee=F.flags;switch(F.tag){case 0:case 11:case 15:nc(L,F,g),rf(4,F);break;case 1:if(nc(L,F,g),E=F,L=E.stateNode,typeof L.componentDidMount=="function")try{L.componentDidMount()}catch(Et){Ii(E,E.return,Et)}if(E=F,L=E.updateQueue,L!==null){var Se=E.stateNode;try{var Xe=L.shared.hiddenCallbacks;if(Xe!==null)for(L.shared.hiddenCallbacks=null,L=0;L<Xe.length;L++)an(Xe[L],Se)}catch(Et){Ii(E,E.return,Et)}}g&&ee&64&&nf(F),el(F,F.return);break;case 27:Dm(F);case 26:case 5:nc(L,F,g),g&&E===null&&ee&4&&Cy(F),el(F,F.return);break;case 12:nc(L,F,g);break;case 31:nc(L,F,g),g&&ee&4&&Ba(L,F);break;case 13:nc(L,F,g),g&&ee&4&&Pm(L,F);break;case 22:F.memoizedState===null&&nc(L,F,g),el(F,F.return);break;case 30:break;default:nc(L,F,g)}d=d.sibling}}function Im(s,d){var g=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),s=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(s=d.memoizedState.cachePool.pool),s!==g&&(s!=null&&s.refCount++,g!=null&&bu(g))}function Om(s,d){s=null,d.alternate!==null&&(s=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==s&&(d.refCount++,s!=null&&bu(s))}function Du(s,d,g,E){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)zy(s,d,g,E),d=d.sibling}function zy(s,d,g,E){var L=d.flags;switch(d.tag){case 0:case 11:case 15:Du(s,d,g,E),L&2048&&rf(9,d);break;case 1:Du(s,d,g,E);break;case 3:Du(s,d,g,E),L&2048&&(s=null,d.alternate!==null&&(s=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==s&&(d.refCount++,s!=null&&bu(s)));break;case 12:if(L&2048){Du(s,d,g,E),s=d.stateNode;try{var F=d.memoizedProps,ee=F.id,Se=F.onPostCommit;typeof Se=="function"&&Se(ee,d.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(Xe){Ii(d,d.return,Xe)}}else Du(s,d,g,E);break;case 31:Du(s,d,g,E);break;case 13:Du(s,d,g,E);break;case 23:break;case 22:F=d.stateNode,ee=d.alternate,d.memoizedState!==null?F._visibility&2?Du(s,d,g,E):cp(s,d):F._visibility&2?Du(s,d,g,E):(F._visibility|=2,gd(s,d,g,E,(d.subtreeFlags&10256)!==0||!1)),L&2048&&Im(ee,d);break;case 24:Du(s,d,g,E),L&2048&&Om(d.alternate,d);break;default:Du(s,d,g,E)}}function gd(s,d,g,E,L){for(L=L&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var F=s,ee=d,Se=g,Xe=E,Et=ee.flags;switch(ee.tag){case 0:case 11:case 15:gd(F,ee,Se,Xe,L),rf(8,ee);break;case 23:break;case 22:var Ut=ee.stateNode;ee.memoizedState!==null?Ut._visibility&2?gd(F,ee,Se,Xe,L):cp(F,ee):(Ut._visibility|=2,gd(F,ee,Se,Xe,L)),L&&Et&2048&&Im(ee.alternate,ee);break;case 24:gd(F,ee,Se,Xe,L),L&&Et&2048&&Om(ee.alternate,ee);break;default:gd(F,ee,Se,Xe,L)}d=d.sibling}}function cp(s,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var g=s,E=d,L=E.flags;switch(E.tag){case 22:cp(g,E),L&2048&&Im(E.alternate,E);break;case 24:cp(g,E),L&2048&&Om(E.alternate,E);break;default:cp(g,E)}d=d.sibling}}var dp=8192;function sf(s,d,g){if(s.subtreeFlags&dp)for(s=s.child;s!==null;)hp(s,d,g),s=s.sibling}function hp(s,d,g){switch(s.tag){case 26:sf(s,d,g),s.flags&dp&&s.memoizedState!==null&&sl(g,Dl,s.memoizedState,s.memoizedProps);break;case 5:sf(s,d,g);break;case 3:case 4:var E=Dl;Dl=Qr(s.stateNode.containerInfo),sf(s,d,g),Dl=E;break;case 22:s.memoizedState===null&&(E=s.alternate,E!==null&&E.memoizedState!==null?(E=dp,dp=16777216,sf(s,d,g),dp=E):sf(s,d,g));break;default:sf(s,d,g)}}function oh(s){var d=s.alternate;if(d!==null&&(s=d.child,s!==null)){d.child=null;do d=s.sibling,s.sibling=null,s=d;while(s!==null)}}function lf(s){var d=s.deletions;if((s.flags&16)!==0){if(d!==null)for(var g=0;g<d.length;g++){var E=d[g];To=E,Py(E,s)}oh(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Mg(s),s=s.sibling}function Mg(s){switch(s.tag){case 0:case 11:case 15:lf(s),s.flags&2048&&Tl(9,s,s.return);break;case 3:lf(s);break;case 12:lf(s);break;case 22:var d=s.stateNode;s.memoizedState!==null&&d._visibility&2&&(s.return===null||s.return.tag!==13)?(d._visibility&=-3,uf(s)):lf(s);break;default:lf(s)}}function uf(s){var d=s.deletions;if((s.flags&16)!==0){if(d!==null)for(var g=0;g<d.length;g++){var E=d[g];To=E,Py(E,s)}oh(s)}for(s=s.child;s!==null;){switch(d=s,d.tag){case 0:case 11:case 15:Tl(8,d,d.return),uf(d);break;case 22:g=d.stateNode,g._visibility&2&&(g._visibility&=-3,uf(d));break;default:uf(d)}s=s.sibling}}function Py(s,d){for(;To!==null;){var g=To;switch(g.tag){case 0:case 11:case 15:Tl(8,g,d);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var E=g.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:bu(g.memoizedState.cache)}if(E=g.child,E!==null)E.return=g,To=E;else e:for(g=s;To!==null;){E=To;var L=E.sibling,F=E.return;if(zm(E),E===g){To=null;break e}if(L!==null){L.return=F,To=L;break e}To=F}}}var H0={getCacheForType:function(s){var d=Pn(ha),g=d.data.get(s);return g===void 0&&(g=s(),d.data.set(s,g)),g},cacheSignal:function(){return Pn(ha).controller.signal}},Z0=typeof WeakMap=="function"?WeakMap:Map,Si=0,Ji=null,pn=null,ei=0,Li=0,go=null,tu=!1,ic=!1,md=!1,nl=0,ma=0,yd=0,sh=0,zg=0,il=0,cf=0,df=null,js=null,fp=!1,lh=0,Ly=0,uh=1/0,pp=null,Rc=null,Fa=0,ts=null,Ml=null,ac=0,gp=0,jm=null,Iy=null,vd=0,mp=null;function zl(){return(Si&2)!==0&&ei!==0?ei&-ei:pe.T!==null?xs():Lr()}function Pg(){if(il===0)if((ei&536870912)===0||Yt){var s=Io;Io<<=1,(Io&3932160)===0&&(Io=262144),il=s}else il=536870912;return s=Vi.current,s!==null&&(s.flags|=32),il}function vs(s,d,g){(s===Ji&&(Li===2||Li===9)||s.cancelPendingCommit!==null)&&(dh(s,0),Mu(s,ei,il,!1)),tt(s,g),((Si&2)===0||s!==Ji)&&(s===Ji&&((Si&2)===0&&(sh|=g),ma===4&&Mu(s,ei,il,!1)),oc(s))}function ch(s,d,g){if((Si&6)!==0)throw Error(n(327));var E=!g&&(d&127)===0&&(d&s.expiredLanes)===0||le(s,d),L=E?$m(s,d):Fm(s,d,!0),F=E;do{if(L===0){ic&&!E&&Mu(s,d,0,!1);break}else{if(g=s.current.alternate,F&&!Nm(g)){L=Fm(s,d,!1),F=!1;continue}if(L===2){if(F=d,s.errorRecoveryDisabledLanes&F)var ee=0;else ee=s.pendingLanes&-536870913,ee=ee!==0?ee:ee&536870912?536870912:0;if(ee!==0){d=ee;e:{var Se=s;L=df;var Xe=Se.current.memoizedState.isDehydrated;if(Xe&&(dh(Se,ee).flags|=256),ee=Fm(Se,ee,!1),ee!==2){if(md&&!Xe){Se.errorRecoveryDisabledLanes|=F,sh|=F,L=4;break e}F=js,js=L,F!==null&&(js===null?js=F:js.push.apply(js,F))}L=ee}if(F=!1,L!==2)continue}}if(L===1){dh(s,0),Mu(s,d,0,!0);break}e:{switch(E=s,F=L,F){case 0:case 1:throw Error(n(345));case 4:if((d&4194048)!==d)break;case 6:Mu(E,d,il,!tu);break e;case 2:js=null;break;case 3:case 5:break;default:throw Error(n(329))}if((d&62914560)===d&&(L=lh+300-Rn(),10<L)){if(Mu(E,d,il,!tu),se(E,0,!0)!==0)break e;ac=d,E.timeoutHandle=Z(Rm.bind(null,E,g,js,pp,fp,d,il,sh,cf,tu,F,"Throttled",-0,0),L);break e}Rm(E,g,js,pp,fp,d,il,sh,cf,tu,F,null,-0,0)}}break}while(!0);oc(s)}function Rm(s,d,g,E,L,F,ee,Se,Xe,Et,Ut,Kt,kt,It){if(s.timeoutHandle=-1,Kt=d.subtreeFlags,Kt&8192||(Kt&16785408)===16785408){Kt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Nt},hp(d,F,Kt);var Ur=(F&62914560)===F?lh-Rn():(F&4194048)===F?Ly-Rn():0;if(Ur=$y(Kt,Ur),Ur!==null){ac=F,s.cancelPendingCommit=Ur(Ig.bind(null,s,d,F,g,E,L,ee,Se,Xe,Ut,Kt,null,kt,It)),Mu(s,F,ee,!Et);return}}Ig(s,d,F,g,E,L,ee,Se,Xe)}function Nm(s){for(var d=s;;){var g=d.tag;if((g===0||g===11||g===15)&&d.flags&16384&&(g=d.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var E=0;E<g.length;E++){var L=g[E],F=L.getSnapshot;L=L.value;try{if(!ra(F(),L))return!1}catch{return!1}}if(g=d.child,d.subtreeFlags&16384&&g!==null)g.return=d,d=g;else{if(d===s)break;for(;d.sibling===null;){if(d.return===null||d.return===s)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Mu(s,d,g,E){d&=~zg,d&=~sh,s.suspendedLanes|=d,s.pingedLanes&=~d,E&&(s.warmLanes|=d),E=s.expirationTimes;for(var L=d;0<L;){var F=31-Jn(L),ee=1<<F;E[F]=-1,L&=~ee}g!==0&&Ue(s,g,d)}function yp(){return(Si&6)===0?(mf(0),!1):!0}function hf(){if(pn!==null){if(Li===0)var s=pn.return;else s=pn,Xl=vn=null,ad(s),$e=null,We=0,s=pn;for(;s!==null;)Cg(s.alternate,s),s=s.return;pn=null}}function dh(s,d){var g=s.timeoutHandle;g!==-1&&(s.timeoutHandle=-1,J(g)),g=s.cancelPendingCommit,g!==null&&(s.cancelPendingCommit=null,g()),ac=0,hf(),Ji=s,pn=g=Ko(s.current,null),ei=d,Li=0,go=null,tu=!1,ic=le(s,d),md=!1,cf=il=zg=sh=yd=ma=0,js=df=null,fp=!1,(d&8)!==0&&(d|=d&32);var E=s.entangledLanes;if(E!==0)for(s=s.entanglements,E&=d;0<E;){var L=31-Jn(E),F=1<<L;d|=s[L],E&=~F}return nl=d,Ia(),g}function Oy(s,d){sn=null,pe.H=cd,d===$||d===K?(d=je(),Li=3):d===V?(d=je(),Li=4):Li=d===aa?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,go=d,pn===null&&(ma=1,ep(s,Xo(d,s.current)))}function vp(){var s=Vi.current;return s===null?!0:(ei&4194048)===ei?qi===null:(ei&62914560)===ei||(ei&536870912)!==0?s===qi:!1}function Bm(){var s=pe.H;return pe.H=cd,s===null?cd:s}function jy(){var s=pe.A;return pe.A=H0,s}function Lg(){ma=4,tu||(ei&4194048)!==ei&&Vi.current!==null||(ic=!0),(yd&134217727)===0&&(sh&134217727)===0||Ji===null||Mu(Ji,ei,il,!1)}function Fm(s,d,g){var E=Si;Si|=2;var L=Bm(),F=jy();(Ji!==s||ei!==d)&&(pp=null,dh(s,d)),d=!1;var ee=ma;e:do try{if(Li!==0&&pn!==null){var Se=pn,Xe=go;switch(Li){case 8:hf(),ee=6;break e;case 3:case 2:case 9:case 6:Vi.current===null&&(d=!0);var Et=Li;if(Li=0,go=null,hh(s,Se,Xe,Et),g&&ic){ee=0;break e}break;default:Et=Li,Li=0,go=null,hh(s,Se,Xe,Et)}}K0(),ee=ma;break}catch(Ut){Oy(s,Ut)}while(!0);return d&&s.shellSuspendCounter++,Xl=vn=null,Si=E,pe.H=L,pe.A=F,pn===null&&(Ji=null,ei=0,Ia()),ee}function K0(){for(;pn!==null;)Gm(pn)}function $m(s,d){var g=Si;Si|=2;var E=Bm(),L=jy();Ji!==s||ei!==d?(pp=null,uh=Rn()+500,dh(s,d)):ic=le(s,d);e:do try{if(Li!==0&&pn!==null){d=pn;var F=go;t:switch(Li){case 1:Li=0,go=null,hh(s,d,F,1);break;case 2:case 9:if(re(F)){Li=0,go=null,Um(d);break}d=function(){Li!==2&&Li!==9||Ji!==s||(Li=7),oc(s)},F.then(d,d);break e;case 3:Li=7;break e;case 4:Li=5;break e;case 7:re(F)?(Li=0,go=null,Um(d)):(Li=0,go=null,hh(s,d,F,7));break;case 5:var ee=null;switch(pn.tag){case 26:ee=pn.memoizedState;case 5:case 27:var Se=pn;if(ee?vo(ee):Se.stateNode.complete){Li=0,go=null;var Xe=Se.sibling;if(Xe!==null)pn=Xe;else{var Et=Se.return;Et!==null?(pn=Et,xp(Et)):pn=null}break t}}Li=0,go=null,hh(s,d,F,5);break;case 6:Li=0,go=null,hh(s,d,F,6);break;case 8:hf(),ma=6;break e;default:throw Error(n(462))}}xd();break}catch(Ut){Oy(s,Ut)}while(!0);return Xl=vn=null,pe.H=E,pe.A=L,Si=g,pn!==null?0:(Ji=null,ei=0,Ia(),ma)}function xd(){for(;pn!==null&&!fi();)Gm(pn)}function Gm(s){var d=Ay(s.alternate,s,nl);s.memoizedProps=s.pendingProps,d===null?xp(s):pn=d}function Um(s){var d=s,g=d.alternate;switch(d.tag){case 15:case 0:d=wm(g,d,d.pendingProps,d.type,void 0,ei);break;case 11:d=wm(g,d,d.pendingProps,d.type.render,d.ref,ei);break;case 5:ad(d);default:Cg(g,d),d=pn=Fh(d,nl),d=Ay(g,d,nl)}s.memoizedProps=s.pendingProps,d===null?xp(s):pn=d}function hh(s,d,g,E){Xl=vn=null,ad(d),$e=null,We=0;var L=d.return;try{if(_m(s,L,d,g,ei)){ma=1,ep(s,Xo(g,s.current)),pn=null;return}}catch(F){if(L!==null)throw pn=L,F;ma=1,ep(s,Xo(g,s.current)),pn=null;return}d.flags&32768?(Yt||E===1?s=!0:ic||(ei&536870912)!==0?s=!1:(tu=s=!0,(E===2||E===9||E===3||E===6)&&(E=Vi.current,E!==null&&E.tag===13&&(E.flags|=16384))),ff(d,s)):xp(d)}function xp(s){var d=s;do{if((d.flags&32768)!==0){ff(d,tu);return}s=d.return;var g=ky(d.alternate,d,nl);if(g!==null){pn=g;return}if(d=d.sibling,d!==null){pn=d;return}pn=d=s}while(d!==null);ma===0&&(ma=5)}function ff(s,d){do{var g=tf(s.alternate,s);if(g!==null){g.flags&=32767,pn=g;return}if(g=s.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!d&&(s=s.sibling,s!==null)){pn=s;return}pn=s=g}while(s!==null);ma=6,pn=null}function Ig(s,d,g,E,L,F,ee,Se,Xe){s.cancelPendingCommit=null;do rs();while(Fa!==0);if((Si&6)!==0)throw Error(n(327));if(d!==null){if(d===s.current)throw Error(n(177));if(F=d.lanes|d.childLanes,F|=Ui,ut(s,g,F,ee,Se,Xe),s===Ji&&(pn=Ji=null,ei=0),Ml=d,ts=s,ac=g,gp=F,jm=L,Iy=E,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Ny(Rt,function(){return ph(),null})):(s.callbackNode=null,s.callbackPriority=0),E=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||E){E=pe.T,pe.T=null,L=ge.p,ge.p=2,ee=Si,Si|=4;try{W0(s,d,g)}finally{Si=ee,ge.p=L,pe.T=E}}Fa=1,fh(),Og(),pf()}}function fh(){if(Fa===1){Fa=0;var s=ts,d=Ml,g=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||g){g=pe.T,pe.T=null;var E=ge.p;ge.p=2;var L=Si;Si|=4;try{Lm(d,s);var F=m,ee=_c(s.containerInfo),Se=F.focusedElem,Xe=F.selectionRange;if(ee!==Se&&Se&&Se.ownerDocument&&Uf(Se.ownerDocument.documentElement,Se)){if(Xe!==null&&Rh(Se)){var Et=Xe.start,Ut=Xe.end;if(Ut===void 0&&(Ut=Et),"selectionStart"in Se)Se.selectionStart=Et,Se.selectionEnd=Math.min(Ut,Se.value.length);else{var Kt=Se.ownerDocument||document,kt=Kt&&Kt.defaultView||window;if(kt.getSelection){var It=kt.getSelection(),Ur=Se.textContent.length,xn=Math.min(Xe.start,Ur),va=Xe.end===void 0?xn:Math.min(Xe.end,Ur);!It.extend&&xn>va&&(ee=va,va=xn,xn=ee);var ft=fg(Se,xn),it=fg(Se,va);if(ft&&it&&(It.rangeCount!==1||It.anchorNode!==ft.node||It.anchorOffset!==ft.offset||It.focusNode!==it.node||It.focusOffset!==it.offset)){var St=Kt.createRange();St.setStart(ft.node,ft.offset),It.removeAllRanges(),xn>va?(It.addRange(St),It.extend(it.node,it.offset)):(St.setEnd(it.node,it.offset),It.addRange(St))}}}}for(Kt=[],It=Se;It=It.parentNode;)It.nodeType===1&&Kt.push({element:It,left:It.scrollLeft,top:It.scrollTop});for(typeof Se.focus=="function"&&Se.focus(),Se=0;Se<Kt.length;Se++){var Zt=Kt[Se];Zt.element.scrollLeft=Zt.left,Zt.element.scrollTop=Zt.top}}qg=!!f,m=f=null}finally{Si=L,ge.p=E,pe.T=g}}s.current=d,Fa=2}}function Og(){if(Fa===2){Fa=0;var s=ts,d=Ml,g=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||g){g=pe.T,pe.T=null;var E=ge.p;ge.p=2;var L=Si;Si|=4;try{Mm(s,d.alternate,d)}finally{Si=L,ge.p=E,pe.T=g}}Fa=3}}function pf(){if(Fa===4||Fa===3){Fa=0,ba();var s=ts,d=Ml,g=ac,E=Iy;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?Fa=5:(Fa=0,Ml=ts=null,jg(s,s.pendingLanes));var L=s.pendingLanes;if(L===0&&(Rc=null),lr(g),d=d.stateNode,kr&&typeof kr.onCommitFiberRoot=="function")try{kr.onCommitFiberRoot(nr,d,void 0,(d.current.flags&128)===128)}catch{}if(E!==null){d=pe.T,L=ge.p,ge.p=2,pe.T=null;try{for(var F=s.onRecoverableError,ee=0;ee<E.length;ee++){var Se=E[ee];F(Se.value,{componentStack:Se.stack})}}finally{pe.T=d,ge.p=L}}(ac&3)!==0&&rs(),oc(s),L=s.pendingLanes,(g&261930)!==0&&(L&42)!==0?s===mp?vd++:(vd=0,mp=s):vd=0,mf(0)}}function jg(s,d){(s.pooledCacheLanes&=d)===0&&(d=s.pooledCache,d!=null&&(s.pooledCache=null,bu(d)))}function rs(){return fh(),Og(),pf(),ph()}function ph(){if(Fa!==5)return!1;var s=ts,d=gp;gp=0;var g=lr(ac),E=pe.T,L=ge.p;try{ge.p=32>g?32:g,pe.T=null,g=jm,jm=null;var F=ts,ee=ac;if(Fa=0,Ml=ts=null,ac=0,(Si&6)!==0)throw Error(n(331));var Se=Si;if(Si|=4,Mg(F.current),zy(F,F.current,ee,g),Si=Se,mf(0,!1),kr&&typeof kr.onPostCommitFiberRoot=="function")try{kr.onPostCommitFiberRoot(nr,F)}catch{}return!0}finally{ge.p=L,pe.T=E,jg(s,d)}}function Rg(s,d,g){d=Xo(g,d),d=tp(s.stateNode,d,2),s=xr(s,d,2),s!==null&&(tt(s,2),oc(s))}function Ii(s,d,g){if(s.tag===3)Rg(s,s,g);else for(;d!==null;){if(d.tag===3){Rg(d,s,g);break}else if(d.tag===1){var E=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Rc===null||!Rc.has(E))){s=Xo(g,s),g=Qu(2),E=xr(d,g,2),E!==null&&(Pc(g,E,d,s),tt(E,2),oc(E));break}}d=d.return}}function Ng(s,d,g){var E=s.pingCache;if(E===null){E=s.pingCache=new Z0;var L=new Set;E.set(d,L)}else L=E.get(d),L===void 0&&(L=new Set,E.set(d,L));L.has(g)||(md=!0,L.add(g),s=Ry.bind(null,s,d,g),d.then(s,s))}function Ry(s,d,g){var E=s.pingCache;E!==null&&E.delete(d),s.pingedLanes|=s.suspendedLanes&g,s.warmLanes&=~g,Ji===s&&(ei&g)===g&&(ma===4||ma===3&&(ei&62914560)===ei&&300>Rn()-lh?(Si&2)===0&&dh(s,0):zg|=g,cf===ei&&(cf=0)),oc(s)}function gf(s,d){d===0&&(d=Ie()),s=Ys(s,d),s!==null&&(tt(s,d),oc(s))}function _p(s){var d=s.memoizedState,g=0;d!==null&&(g=d.retryLane),gf(s,g)}function X0(s,d){var g=0;switch(s.tag){case 31:case 13:var E=s.stateNode,L=s.memoizedState;L!==null&&(g=L.retryLane);break;case 19:E=s.stateNode;break;case 22:E=s.stateNode._retryCache;break;default:throw Error(n(314))}E!==null&&E.delete(d),gf(s,g)}function Ny(s,d){return Wr(s,d)}var Pl=null,_d=null,Bg=!1,bp=!1,Fg=!1,bd=0;function oc(s){s!==_d&&s.next===null&&(_d===null?Pl=_d=s:_d=_d.next=s),bp=!0,Bg||(Bg=!0,$g())}function mf(s,d){if(!Fg&&bp){Fg=!0;do for(var g=!1,E=Pl;E!==null;){if(s!==0){var L=E.pendingLanes;if(L===0)var F=0;else{var ee=E.suspendedLanes,Se=E.pingedLanes;F=(1<<31-Jn(42|s)+1)-1,F&=L&~(ee&~Se),F=F&201326741?F&201326741|1:F?F|2:0}F!==0&&(g=!0,Sp(E,F))}else F=ei,F=se(E,E===Ji?F:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(F&3)===0||le(E,F)||(g=!0,Sp(E,F));E=E.next}while(g);Fg=!1}}function yf(){Vm()}function Vm(){bp=Bg=!1;var s=0;bd!==0&&q()&&(s=bd);for(var d=Rn(),g=null,E=Pl;E!==null;){var L=E.next,F=wp(E,d);F===0?(E.next=null,g===null?Pl=L:g.next=L,L===null&&(_d=g)):(g=E,(s!==0||(F&3)!==0)&&(bp=!0)),E=L}Fa!==0&&Fa!==5||mf(s),bd!==0&&(bd=0)}function wp(s,d){for(var g=s.suspendedLanes,E=s.pingedLanes,L=s.expirationTimes,F=s.pendingLanes&-62914561;0<F;){var ee=31-Jn(F),Se=1<<ee,Xe=L[ee];Xe===-1?((Se&g)===0||(Se&E)!==0)&&(L[ee]=Ee(Se,d)):Xe<=d&&(s.expiredLanes|=Se),F&=~Se}if(d=Ji,g=ei,g=se(s,s===d?g:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),E=s.callbackNode,g===0||s===d&&(Li===2||Li===9)||s.cancelPendingCommit!==null)return E!==null&&E!==null&&Hn(E),s.callbackNode=null,s.callbackPriority=0;if((g&3)===0||le(s,g)){if(d=g&-g,d===s.callbackPriority)return d;switch(E!==null&&Hn(E),lr(g)){case 2:case 8:g=oi;break;case 32:g=Rt;break;case 268435456:g=Fn;break;default:g=Rt}return E=qm.bind(null,s),g=Wr(g,E),s.callbackPriority=d,s.callbackNode=g,d}return E!==null&&E!==null&&Hn(E),s.callbackPriority=2,s.callbackNode=null,2}function qm(s,d){if(Fa!==0&&Fa!==5)return s.callbackNode=null,s.callbackPriority=0,null;var g=s.callbackNode;if(rs()&&s.callbackNode!==g)return null;var E=ei;return E=se(s,s===Ji?E:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),E===0?null:(ch(s,E,d),wp(s,Rn()),s.callbackNode!=null&&s.callbackNode===g?qm.bind(null,s):null)}function Sp(s,d){if(rs())return null;ch(s,d,!0)}function $g(){ce(function(){(Si&6)!==0?Wr(pi,yf):Vm()})}function xs(){if(bd===0){var s=wu;s===0&&(s=Uo,Uo<<=1,(Uo&261888)===0&&(Uo=256)),bd=s}return bd}function By(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:xt(""+s)}function Fy(s,d){var g=d.ownerDocument.createElement("input");return g.name=d.name,g.value=d.value,s.id&&g.setAttribute("form",s.id),d.parentNode.insertBefore(g,d),s=new FormData(s),g.parentNode.removeChild(g),s}function gh(s,d,g,E,L){if(d==="submit"&&g&&g.stateNode===L){var F=By((L[cn]||null).action),ee=E.submitter;ee&&(d=(d=ee[cn]||null)?By(d.formAction):ee.getAttribute("formAction"),d!==null&&(F=d,ee=null));var Se=new Ho("action","action",null,E,L);s.push({event:Se,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(bd!==0){var Xe=ee?Fy(L,ee):new FormData(L);zc(g,{pending:!0,data:Xe,method:L.method,action:F},null,Xe)}}else typeof F=="function"&&(Se.preventDefault(),Xe=ee?Fy(L,ee):new FormData(L),zc(g,{pending:!0,data:Xe,method:L.method,action:F},F,Xe))},currentTarget:L}]})}}for(var yn=0;yn<Vu.length;yn++){var mo=Vu[yn],ro=mo.toLowerCase(),$a=mo[0].toUpperCase()+mo.slice(1);Ci(ro,"on"+$a)}Ci(No,"onAnimationEnd"),Ci(Uu,"onAnimationIteration"),Ci(Nh,"onAnimationStart"),Ci("dblclick","onDoubleClick"),Ci("focusin","onFocus"),Ci("focusout","onBlur"),Ci(Qc,"onTransitionRun"),Ci(Zd,"onTransitionStart"),Ci(bc,"onTransitionCancel"),Ci(ui,"onTransitionEnd"),vl("onMouseEnter",["mouseout","mouseover"]),vl("onMouseLeave",["mouseout","mouseover"]),vl("onPointerEnter",["pointerout","pointerover"]),vl("onPointerLeave",["pointerout","pointerover"]),wa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wa("onBeforeInput",["compositionend","keypress","textInput","paste"]),wa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vf));function Gg(s,d){d=(d&4)!==0;for(var g=0;g<s.length;g++){var E=s[g],L=E.event;E=E.listeners;e:{var F=void 0;if(d)for(var ee=E.length-1;0<=ee;ee--){var Se=E[ee],Xe=Se.instance,Et=Se.currentTarget;if(Se=Se.listener,Xe!==F&&L.isPropagationStopped())break e;F=Se,L.currentTarget=Et;try{F(L)}catch(Ut){Wl(Ut)}L.currentTarget=null,F=Xe}else for(ee=0;ee<E.length;ee++){if(Se=E[ee],Xe=Se.instance,Et=Se.currentTarget,Se=Se.listener,Xe!==F&&L.isPropagationStopped())break e;F=Se,L.currentTarget=Et;try{F(L)}catch(Ut){Wl(Ut)}L.currentTarget=null,F=Xe}}}}function ri(s,d){var g=d[ea];g===void 0&&(g=d[ea]=new Set);var E=s+"__bubble";g.has(E)||(Ap(d,s,2,!1),g.add(E))}function Ug(s,d,g){var E=0;d&&(E|=4),Ap(g,s,E,d)}var Ep="_reactListening"+Math.random().toString(36).slice(2);function Wm(s){if(!s[Ep]){s[Ep]=!0,dc.forEach(function(g){g!=="selectionchange"&&(Nc.has(g)||Ug(g,!1,s),Ug(g,!0,s))});var d=s.nodeType===9?s:s.ownerDocument;d===null||d[Ep]||(d[Ep]=!0,Ug("selectionchange",!1,d))}}function Ap(s,d,g,E){switch(Fo(d)){case 2:var L=Pu;break;case 8:L=Wg;break;default:L=Hg}g=L.bind(null,d,g,s),L=void 0,!Nr||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(L=!0),E?L!==void 0?s.addEventListener(d,g,{capture:!0,passive:L}):s.addEventListener(d,g,!0):L!==void 0?s.addEventListener(d,g,{passive:L}):s.addEventListener(d,g,!1)}function kp(s,d,g,E,L){var F=E;if((d&1)===0&&(d&2)===0&&E!==null)e:for(;;){if(E===null)return;var ee=E.tag;if(ee===3||ee===4){var Se=E.stateNode.containerInfo;if(Se===L)break;if(ee===4)for(ee=E.return;ee!==null;){var Xe=ee.tag;if((Xe===3||Xe===4)&&ee.stateNode.containerInfo===L)return;ee=ee.return}for(;Se!==null;){if(ee=Hi(Se),ee===null)return;if(Xe=ee.tag,Xe===5||Xe===6||Xe===26||Xe===27){E=F=ee;continue e}Se=Se.parentNode}}E=E.return}ct(function(){var Et=F,Ut=Tr(g),Kt=[];e:{var kt=ed.get(s);if(kt!==void 0){var It=Ho,Ur=s;switch(s){case"keypress":if(Ai(g)===0)break e;case"keydown":case"keyup":It=Bu;break;case"focusin":Ur="focus",It=Gd;break;case"focusout":Ur="blur",It=Gd;break;case"beforeblur":case"afterblur":It=Gd;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":It=_l;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":It=jf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":It=cg;break;case No:case Uu:case Nh:It=Rf;break;case ui:It=dg;break;case"scroll":case"scrollend":It=uo;break;case"wheel":It=Xs;break;case"copy":case"cut":case"paste":It=us;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":It=Ff;break;case"toggle":case"beforetoggle":It=Gf}var xn=(d&4)!==0,va=!xn&&(s==="scroll"||s==="scrollend"),ft=xn?kt!==null?kt+"Capture":null:kt;xn=[];for(var it=Et,St;it!==null;){var Zt=it;if(St=Zt.stateNode,Zt=Zt.tag,Zt!==5&&Zt!==26&&Zt!==27||St===null||ft===null||(Zt=yt(it,ft),Zt!=null&&xn.push(Rs(it,Zt,St))),va)break;it=it.return}0<xn.length&&(kt=new It(kt,Ur,null,g,Ut),Kt.push({event:kt,listeners:xn}))}}if((d&7)===0){e:{if(kt=s==="mouseover"||s==="pointerover",It=s==="mouseout"||s==="pointerout",kt&&g!==Yr&&(Ur=g.relatedTarget||g.fromElement)&&(Hi(Ur)||Ur[_n]))break e;if((It||kt)&&(kt=Ut.window===Ut?Ut:(kt=Ut.ownerDocument)?kt.defaultView||kt.parentWindow:window,It?(Ur=g.relatedTarget||g.toElement,It=Et,Ur=Ur?Hi(Ur):null,Ur!==null&&(va=l(Ur),xn=Ur.tag,Ur!==va||xn!==5&&xn!==27&&xn!==6)&&(Ur=null)):(It=null,Ur=Et),It!==Ur)){if(xn=_l,Zt="onMouseLeave",ft="onMouseEnter",it="mouse",(s==="pointerout"||s==="pointerover")&&(xn=Ff,Zt="onPointerLeave",ft="onPointerEnter",it="pointer"),va=It==null?kt:Hs(It),St=Ur==null?kt:Hs(Ur),kt=new xn(Zt,it+"leave",It,g,Ut),kt.target=va,kt.relatedTarget=St,Zt=null,Hi(Ut)===Et&&(xn=new xn(ft,it+"enter",Ur,g,Ut),xn.target=St,xn.relatedTarget=va,Zt=xn),va=Zt,It&&Ur)t:{for(xn=wd,ft=It,it=Ur,St=0,Zt=ft;Zt;Zt=xn(Zt))St++;Zt=0;for(var dn=it;dn;dn=xn(dn))Zt++;for(;0<St-Zt;)ft=xn(ft),St--;for(;0<Zt-St;)it=xn(it),Zt--;for(;St--;){if(ft===it||it!==null&&ft===it.alternate){xn=ft;break t}ft=xn(ft),it=xn(it)}xn=null}else xn=null;It!==null&&ya(Kt,kt,It,xn,!1),Ur!==null&&va!==null&&ya(Kt,va,Ur,xn,!0)}}e:{if(kt=Et?Hs(Et):window,It=kt.nodeName&&kt.nodeName.toLowerCase(),It==="select"||It==="input"&&kt.type==="file")var ji=Oh;else if(gc(kt))if(hu)ji=Jc;else{ji=jh;var Kr=Gu}else It=kt.nodeName,!It||It.toLowerCase()!=="input"||kt.type!=="checkbox"&&kt.type!=="radio"?Et&&Gr(Et.elementType)&&(ji=Oh):ji=Yc;if(ji&&(ji=ji(s,Et))){mc(Kt,ji,g,Ut);break e}Kr&&Kr(s,kt,Et),s==="focusout"&&Et&&kt.type==="number"&&Et.memoizedProps.value!=null&&fc(kt,"number",kt.value)}switch(Kr=Et?Hs(Et):window,s){case"focusin":(gc(Kr)||Kr.contentEditable==="true")&&(lt=Kr,Ft=Et,Ct=null);break;case"focusout":Ct=Ft=lt=null;break;case"mousedown":Cr=!0;break;case"contextmenu":case"mouseup":case"dragend":Cr=!1,hn(Kt,g,Ut);break;case"selectionchange":if(pu)break;case"keydown":case"keyup":hn(Kt,g,Ut)}var Yn;if(pc)e:{switch(s){case"compositionstart":var hi="onCompositionStart";break e;case"compositionend":hi="onCompositionEnd";break e;case"compositionupdate":hi="onCompositionUpdate";break e}hi=void 0}else ql?Ih(s,g)&&(hi="onCompositionEnd"):s==="keydown"&&g.keyCode===229&&(hi="onCompositionStart");hi&&(qd&&g.locale!=="ko"&&(ql||hi!=="onCompositionStart"?hi==="onCompositionEnd"&&ql&&(Yn=Br()):(mn=Ut,Xn="value"in mn?mn.value:mn.textContent,ql=!0)),Kr=xf(Et,hi),0<Kr.length&&(hi=new Ya(hi,s,null,g,Ut),Kt.push({event:hi,listeners:Kr}),Yn?hi.data=Yn:(Yn=Mn(g),Yn!==null&&(hi.data=Yn)))),(Yn=du?Gn(s,g):mi(s,g))&&(hi=xf(Et,"onBeforeInput"),0<hi.length&&(Kr=new Ya("onBeforeInput","beforeinput",null,g,Ut),Kt.push({event:Kr,listeners:hi}),Kr.data=Yn)),gh(Kt,s,Et,g,Ut)}Gg(Kt,d)})}function Rs(s,d,g){return{instance:s,listener:d,currentTarget:g}}function xf(s,d){for(var g=d+"Capture",E=[];s!==null;){var L=s,F=L.stateNode;if(L=L.tag,L!==5&&L!==26&&L!==27||F===null||(L=yt(s,g),L!=null&&E.unshift(Rs(s,L,F)),L=yt(s,d),L!=null&&E.push(Rs(s,L,F))),s.tag===3)return E;s=s.return}return[]}function wd(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function ya(s,d,g,E,L){for(var F=d._reactName,ee=[];g!==null&&g!==E;){var Se=g,Xe=Se.alternate,Et=Se.stateNode;if(Se=Se.tag,Xe!==null&&Xe===E)break;Se!==5&&Se!==26&&Se!==27||Et===null||(Xe=Et,L?(Et=yt(g,F),Et!=null&&ee.unshift(Rs(g,Et,Xe))):L||(Et=yt(g,F),Et!=null&&ee.push(Rs(g,Et,Xe)))),g=g.return}ee.length!==0&&s.push({event:d,listeners:ee})}var Ga=/\r\n?/g,Vg=/\u0000|\uFFFD/g;function Cp(s){return(typeof s=="string"?s:""+s).replace(Ga,`
`).replace(Vg,"")}function _f(s,d){return d=Cp(d),Cp(s)===d}function Oi(s,d,g,E,L,F){switch(g){case"children":typeof E=="string"?d==="body"||d==="textarea"&&E===""||Ge(s,E):(typeof E=="number"||typeof E=="bigint")&&d!=="body"&&Ge(s,""+E);break;case"className":Zs(s,"class",E);break;case"tabIndex":Zs(s,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":Zs(s,g,E);break;case"style":$t(s,E,F);break;case"data":if(d!=="object"){Zs(s,"data",E);break}case"src":case"href":if(E===""&&(d!=="a"||g!=="href")){s.removeAttribute(g);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){s.removeAttribute(g);break}E=xt(""+E),s.setAttribute(g,E);break;case"action":case"formAction":if(typeof E=="function"){s.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof F=="function"&&(g==="formAction"?(d!=="input"&&Oi(s,d,"name",L.name,L,null),Oi(s,d,"formEncType",L.formEncType,L,null),Oi(s,d,"formMethod",L.formMethod,L,null),Oi(s,d,"formTarget",L.formTarget,L,null)):(Oi(s,d,"encType",L.encType,L,null),Oi(s,d,"method",L.method,L,null),Oi(s,d,"target",L.target,L,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){s.removeAttribute(g);break}E=xt(""+E),s.setAttribute(g,E);break;case"onClick":E!=null&&(s.onclick=Nt);break;case"onScroll":E!=null&&ri("scroll",s);break;case"onScrollEnd":E!=null&&ri("scrollend",s);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(n(61));if(g=E.__html,g!=null){if(L.children!=null)throw Error(n(60));s.innerHTML=g}}break;case"multiple":s.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":s.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){s.removeAttribute("xlink:href");break}g=xt(""+E),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?s.setAttribute(g,""+E):s.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?s.setAttribute(g,""):s.removeAttribute(g);break;case"capture":case"download":E===!0?s.setAttribute(g,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?s.setAttribute(g,E):s.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?s.setAttribute(g,E):s.removeAttribute(g);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?s.removeAttribute(g):s.setAttribute(g,E);break;case"popover":ri("beforetoggle",s),ri("toggle",s),Zi(s,"popover",E);break;case"xlinkActuate":da(s,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":da(s,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":da(s,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":da(s,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":da(s,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":da(s,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":da(s,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":da(s,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":da(s,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":Zi(s,"is",E);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=wt.get(g)||g,Zi(s,g,E))}}function Tp(s,d,g,E,L,F){switch(g){case"style":$t(s,E,F);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(n(61));if(g=E.__html,g!=null){if(L.children!=null)throw Error(n(60));s.innerHTML=g}}break;case"children":typeof E=="string"?Ge(s,E):(typeof E=="number"||typeof E=="bigint")&&Ge(s,""+E);break;case"onScroll":E!=null&&ri("scroll",s);break;case"onScrollEnd":E!=null&&ri("scrollend",s);break;case"onClick":E!=null&&(s.onclick=Nt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Oo.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(L=g.endsWith("Capture"),d=g.slice(2,L?g.length-7:void 0),F=s[cn]||null,F=F!=null?F[g]:null,typeof F=="function"&&s.removeEventListener(d,F,L),typeof E=="function")){typeof F!="function"&&F!==null&&(g in s?s[g]=null:s.hasAttribute(g)&&s.removeAttribute(g)),s.addEventListener(d,E,L);break e}g in s?s[g]=E:E===!0?s.setAttribute(g,""):Zi(s,g,E)}}}function Do(s,d,g){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ri("error",s),ri("load",s);var E=!1,L=!1,F;for(F in g)if(g.hasOwnProperty(F)){var ee=g[F];if(ee!=null)switch(F){case"src":E=!0;break;case"srcSet":L=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,d));default:Oi(s,d,F,ee,g,null)}}L&&Oi(s,d,"srcSet",g.srcSet,g,null),E&&Oi(s,d,"src",g.src,g,null);return;case"input":ri("invalid",s);var Se=F=ee=L=null,Xe=null,Et=null;for(E in g)if(g.hasOwnProperty(E)){var Ut=g[E];if(Ut!=null)switch(E){case"name":L=Ut;break;case"type":ee=Ut;break;case"checked":Xe=Ut;break;case"defaultChecked":Et=Ut;break;case"value":F=Ut;break;case"defaultValue":Se=Ut;break;case"children":case"dangerouslySetInnerHTML":if(Ut!=null)throw Error(n(137,d));break;default:Oi(s,d,E,Ut,g,null)}}Zn(s,F,Se,Xe,Et,ee,L,!1);return;case"select":ri("invalid",s),E=ee=F=null;for(L in g)if(g.hasOwnProperty(L)&&(Se=g[L],Se!=null))switch(L){case"value":F=Se;break;case"defaultValue":ee=Se;break;case"multiple":E=Se;default:Oi(s,d,L,Se,g,null)}d=F,g=ee,s.multiple=!!E,d!=null?qo(s,!!E,d,!1):g!=null&&qo(s,!!E,g,!0);return;case"textarea":ri("invalid",s),F=L=E=null;for(ee in g)if(g.hasOwnProperty(ee)&&(Se=g[ee],Se!=null))switch(ee){case"value":E=Se;break;case"defaultValue":L=Se;break;case"children":F=Se;break;case"dangerouslySetInnerHTML":if(Se!=null)throw Error(n(91));break;default:Oi(s,d,ee,Se,g,null)}vt(s,E,L,F);return;case"option":for(Xe in g)if(g.hasOwnProperty(Xe)&&(E=g[Xe],E!=null))switch(Xe){case"selected":s.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:Oi(s,d,Xe,E,g,null)}return;case"dialog":ri("beforetoggle",s),ri("toggle",s),ri("cancel",s),ri("close",s);break;case"iframe":case"object":ri("load",s);break;case"video":case"audio":for(E=0;E<vf.length;E++)ri(vf[E],s);break;case"image":ri("error",s),ri("load",s);break;case"details":ri("toggle",s);break;case"embed":case"source":case"link":ri("error",s),ri("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Et in g)if(g.hasOwnProperty(Et)&&(E=g[Et],E!=null))switch(Et){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,d));default:Oi(s,d,Et,E,g,null)}return;default:if(Gr(d)){for(Ut in g)g.hasOwnProperty(Ut)&&(E=g[Ut],E!==void 0&&Tp(s,d,Ut,E,g,void 0));return}}for(Se in g)g.hasOwnProperty(Se)&&(E=g[Se],E!=null&&Oi(s,d,Se,E,g,null))}function Y0(s,d,g,E){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var L=null,F=null,ee=null,Se=null,Xe=null,Et=null,Ut=null;for(It in g){var Kt=g[It];if(g.hasOwnProperty(It)&&Kt!=null)switch(It){case"checked":break;case"value":break;case"defaultValue":Xe=Kt;default:E.hasOwnProperty(It)||Oi(s,d,It,null,E,Kt)}}for(var kt in E){var It=E[kt];if(Kt=g[kt],E.hasOwnProperty(kt)&&(It!=null||Kt!=null))switch(kt){case"type":F=It;break;case"name":L=It;break;case"checked":Et=It;break;case"defaultChecked":Ut=It;break;case"value":ee=It;break;case"defaultValue":Se=It;break;case"children":case"dangerouslySetInnerHTML":if(It!=null)throw Error(n(137,d));break;default:It!==Kt&&Oi(s,d,kt,It,E,Kt)}}Vo(s,ee,Se,Xe,Et,Ut,F,L);return;case"select":It=ee=Se=kt=null;for(F in g)if(Xe=g[F],g.hasOwnProperty(F)&&Xe!=null)switch(F){case"value":break;case"multiple":It=Xe;default:E.hasOwnProperty(F)||Oi(s,d,F,null,E,Xe)}for(L in E)if(F=E[L],Xe=g[L],E.hasOwnProperty(L)&&(F!=null||Xe!=null))switch(L){case"value":kt=F;break;case"defaultValue":Se=F;break;case"multiple":ee=F;default:F!==Xe&&Oi(s,d,L,F,E,Xe)}d=Se,g=ee,E=It,kt!=null?qo(s,!!g,kt,!1):!!E!=!!g&&(d!=null?qo(s,!!g,d,!0):qo(s,!!g,g?[]:"",!1));return;case"textarea":It=kt=null;for(Se in g)if(L=g[Se],g.hasOwnProperty(Se)&&L!=null&&!E.hasOwnProperty(Se))switch(Se){case"value":break;case"children":break;default:Oi(s,d,Se,null,E,L)}for(ee in E)if(L=E[ee],F=g[ee],E.hasOwnProperty(ee)&&(L!=null||F!=null))switch(ee){case"value":kt=L;break;case"defaultValue":It=L;break;case"children":break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(n(91));break;default:L!==F&&Oi(s,d,ee,L,E,F)}xl(s,kt,It);return;case"option":for(var Ur in g)if(kt=g[Ur],g.hasOwnProperty(Ur)&&kt!=null&&!E.hasOwnProperty(Ur))switch(Ur){case"selected":s.selected=!1;break;default:Oi(s,d,Ur,null,E,kt)}for(Xe in E)if(kt=E[Xe],It=g[Xe],E.hasOwnProperty(Xe)&&kt!==It&&(kt!=null||It!=null))switch(Xe){case"selected":s.selected=kt&&typeof kt!="function"&&typeof kt!="symbol";break;default:Oi(s,d,Xe,kt,E,It)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xn in g)kt=g[xn],g.hasOwnProperty(xn)&&kt!=null&&!E.hasOwnProperty(xn)&&Oi(s,d,xn,null,E,kt);for(Et in E)if(kt=E[Et],It=g[Et],E.hasOwnProperty(Et)&&kt!==It&&(kt!=null||It!=null))switch(Et){case"children":case"dangerouslySetInnerHTML":if(kt!=null)throw Error(n(137,d));break;default:Oi(s,d,Et,kt,E,It)}return;default:if(Gr(d)){for(var va in g)kt=g[va],g.hasOwnProperty(va)&&kt!==void 0&&!E.hasOwnProperty(va)&&Tp(s,d,va,void 0,E,kt);for(Ut in E)kt=E[Ut],It=g[Ut],!E.hasOwnProperty(Ut)||kt===It||kt===void 0&&It===void 0||Tp(s,d,Ut,kt,E,It);return}}for(var ft in g)kt=g[ft],g.hasOwnProperty(ft)&&kt!=null&&!E.hasOwnProperty(ft)&&Oi(s,d,ft,null,E,kt);for(Kt in E)kt=E[Kt],It=g[Kt],!E.hasOwnProperty(Kt)||kt===It||kt==null&&It==null||Oi(s,d,Kt,kt,E,It)}function c(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function a(){if(typeof performance.getEntriesByType=="function"){for(var s=0,d=0,g=performance.getEntriesByType("resource"),E=0;E<g.length;E++){var L=g[E],F=L.transferSize,ee=L.initiatorType,Se=L.duration;if(F&&Se&&c(ee)){for(ee=0,Se=L.responseEnd,E+=1;E<g.length;E++){var Xe=g[E],Et=Xe.startTime;if(Et>Se)break;var Ut=Xe.transferSize,Kt=Xe.initiatorType;Ut&&c(Kt)&&(Xe=Xe.responseEnd,ee+=Ut*(Xe<Se?1:(Se-Et)/(Xe-Et)))}if(--E,d+=8*(F+ee)/(L.duration/1e3),s++,10<s)break}}if(0<s)return d/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var f=null,m=null;function w(s){return s.nodeType===9?s:s.ownerDocument}function M(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function z(s,d){if(s===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&d==="foreignObject"?0:s}function I(s,d){return s==="textarea"||s==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var B=null;function q(){var s=window.event;return s&&s.type==="popstate"?s===B?!1:(B=s,!0):(B=null,!1)}var Z=typeof setTimeout=="function"?setTimeout:void 0,J=typeof clearTimeout=="function"?clearTimeout:void 0,oe=typeof Promise=="function"?Promise:void 0,ce=typeof queueMicrotask=="function"?queueMicrotask:typeof oe<"u"?function(s){return oe.resolve(null).then(s).catch(xe)}:Z;function xe(s){setTimeout(function(){throw s})}function ve(s){return s==="head"}function Oe(s,d){var g=d,E=0;do{var L=g.nextSibling;if(s.removeChild(g),L&&L.nodeType===8)if(g=L.data,g==="/$"||g==="/&"){if(E===0){s.removeChild(L),Xg(d);return}E--}else if(g==="$"||g==="$?"||g==="$~"||g==="$!"||g==="&")E++;else if(g==="html")Ot(s.ownerDocument.documentElement);else if(g==="head"){g=s.ownerDocument.head,Ot(g);for(var F=g.firstChild;F;){var ee=F.nextSibling,Se=F.nodeName;F[li]||Se==="SCRIPT"||Se==="STYLE"||Se==="LINK"&&F.rel.toLowerCase()==="stylesheet"||g.removeChild(F),F=ee}}else g==="body"&&Ot(s.ownerDocument.body);g=L}while(g);Xg(d)}function Be(s,d){var g=s;s=0;do{var E=g.nextSibling;if(g.nodeType===1?d?(g._stashedDisplay=g.style.display,g.style.display="none"):(g.style.display=g._stashedDisplay||"",g.getAttribute("style")===""&&g.removeAttribute("style")):g.nodeType===3&&(d?(g._stashedText=g.nodeValue,g.nodeValue=""):g.nodeValue=g._stashedText||""),E&&E.nodeType===8)if(g=E.data,g==="/$"){if(s===0)break;s--}else g!=="$"&&g!=="$?"&&g!=="$~"&&g!=="$!"||s++;g=E}while(g)}function dt(s){var d=s.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var g=d;switch(d=d.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":dt(g),Ca(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}s.removeChild(g)}}function Je(s,d,g,E){for(;s.nodeType===1;){var L=g;if(s.nodeName.toLowerCase()!==d.toLowerCase()){if(!E&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(E){if(!s[li])switch(d){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(F=s.getAttribute("rel"),F==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(F!==L.rel||s.getAttribute("href")!==(L.href==null||L.href===""?null:L.href)||s.getAttribute("crossorigin")!==(L.crossOrigin==null?null:L.crossOrigin)||s.getAttribute("title")!==(L.title==null?null:L.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(F=s.getAttribute("src"),(F!==(L.src==null?null:L.src)||s.getAttribute("type")!==(L.type==null?null:L.type)||s.getAttribute("crossorigin")!==(L.crossOrigin==null?null:L.crossOrigin))&&F&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(d==="input"&&s.type==="hidden"){var F=L.name==null?null:""+L.name;if(L.type==="hidden"&&s.getAttribute("name")===F)return s}else return s;if(s=dr(s.nextSibling),s===null)break}return null}function Qe(s,d,g){if(d==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!g||(s=dr(s.nextSibling),s===null))return null;return s}function Dt(s,d){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!d||(s=dr(s.nextSibling),s===null))return null;return s}function Jt(s){return s.data==="$?"||s.data==="$~"}function yr(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function Zr(s,d){var g=s.ownerDocument;if(s.data==="$~")s._reactRetry=d;else if(s.data!=="$?"||g.readyState!=="loading")d();else{var E=function(){d(),g.removeEventListener("DOMContentLoaded",E)};g.addEventListener("DOMContentLoaded",E),s._reactRetry=E}}function dr(s){for(;s!=null;s=s.nextSibling){var d=s.nodeType;if(d===1||d===3)break;if(d===8){if(d=s.data,d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"||d==="F!"||d==="F")break;if(d==="/$"||d==="/&")return null}}return s}var pr=null;function zr(s){s=s.nextSibling;for(var d=0;s;){if(s.nodeType===8){var g=s.data;if(g==="/$"||g==="/&"){if(d===0)return dr(s.nextSibling);d--}else g!=="$"&&g!=="$!"&&g!=="$?"&&g!=="$~"&&g!=="&"||d++}s=s.nextSibling}return null}function Er(s){s=s.previousSibling;for(var d=0;s;){if(s.nodeType===8){var g=s.data;if(g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"){if(d===0)return s;d--}else g!=="/$"&&g!=="/&"||d++}s=s.previousSibling}return null}function br(s,d,g){switch(d=w(g),s){case"html":if(s=d.documentElement,!s)throw Error(n(452));return s;case"head":if(s=d.head,!s)throw Error(n(453));return s;case"body":if(s=d.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}function Ot(s){for(var d=s.attributes;d.length;)s.removeAttributeNode(d[0]);Ca(s)}var wr=new Map,Dr=new Set;function Qr(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ti=ge.d;ge.d={f:Mi,r:yo,D:Za,C:_s,L:bs,m:ws,X:xi,S:qn,M:ns};function Mi(){var s=ti.f(),d=yp();return s||d}function yo(s){var d=$i(s);d!==null&&d.tag===5&&d.type==="form"?Eg(d):ti.r(s)}var Mo=typeof document>"u"?null:document;function zo(s,d,g){var E=Mo;if(E&&typeof d=="string"&&d){var L=La(d);L='link[rel="'+s+'"][href="'+L+'"]',typeof g=="string"&&(L+='[crossorigin="'+g+'"]'),Dr.has(L)||(Dr.add(L),s={rel:s,crossOrigin:g,href:d},E.querySelector(L)===null&&(d=E.createElement("link"),Do(d,"link",s),Ta(d),E.head.appendChild(d)))}}function Za(s){ti.D(s),zo("dns-prefetch",s,null)}function _s(s,d){ti.C(s,d),zo("preconnect",s,d)}function bs(s,d,g){ti.L(s,d,g);var E=Mo;if(E&&s&&d){var L='link[rel="preload"][as="'+La(d)+'"]';d==="image"&&g&&g.imageSrcSet?(L+='[imagesrcset="'+La(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(L+='[imagesizes="'+La(g.imageSizes)+'"]')):L+='[href="'+La(s)+'"]';var F=L;switch(d){case"style":F=no(s);break;case"script":F=Wn(s)}wr.has(F)||(s=C({rel:"preload",href:d==="image"&&g&&g.imageSrcSet?void 0:s,as:d},g),wr.set(F,s),E.querySelector(L)!==null||d==="style"&&E.querySelector(Ua(F))||d==="script"&&E.querySelector(di(F))||(d=E.createElement("link"),Do(d,"link",s),Ta(d),E.head.appendChild(d)))}}function ws(s,d){ti.m(s,d);var g=Mo;if(g&&s){var E=d&&typeof d.as=="string"?d.as:"script",L='link[rel="modulepreload"][as="'+La(E)+'"][href="'+La(s)+'"]',F=L;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":F=Wn(s)}if(!wr.has(F)&&(s=C({rel:"modulepreload",href:s},d),wr.set(F,s),g.querySelector(L)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(di(F)))return}E=g.createElement("link"),Do(E,"link",s),Ta(E),g.head.appendChild(E)}}}function qn(s,d,g){ti.S(s,d,g);var E=Mo;if(E&&s){var L=Nn(E).hoistableStyles,F=no(s);d=d||"default";var ee=L.get(F);if(!ee){var Se={loading:0,preload:null};if(ee=E.querySelector(Ua(F)))Se.loading=5;else{s=C({rel:"stylesheet",href:s,"data-precedence":d},g),(g=wr.get(F))&&sa(s,g);var Xe=ee=E.createElement("link");Ta(Xe),Do(Xe,"link",s),Xe._p=new Promise(function(Et,Ut){Xe.onload=Et,Xe.onerror=Ut}),Xe.addEventListener("load",function(){Se.loading|=1}),Xe.addEventListener("error",function(){Se.loading|=2}),Se.loading|=4,is(ee,d,E)}ee={type:"stylesheet",instance:ee,count:1,state:Se},L.set(F,ee)}}}function xi(s,d){ti.X(s,d);var g=Mo;if(g&&s){var E=Nn(g).hoistableScripts,L=Wn(s),F=E.get(L);F||(F=g.querySelector(di(L)),F||(s=C({src:s,async:!0},d),(d=wr.get(L))&&Bc(s,d),F=g.createElement("script"),Ta(F),Do(F,"link",s),g.head.appendChild(F)),F={type:"script",instance:F,count:1,state:null},E.set(L,F))}}function ns(s,d){ti.M(s,d);var g=Mo;if(g&&s){var E=Nn(g).hoistableScripts,L=Wn(s),F=E.get(L);F||(F=g.querySelector(di(L)),F||(s=C({src:s,async:!0,type:"module"},d),(d=wr.get(L))&&Bc(s,d),F=g.createElement("script"),Ta(F),Do(F,"link",s),g.head.appendChild(F)),F={type:"script",instance:F,count:1,state:null},E.set(L,F))}}function Po(s,d,g,E){var L=(L=rr.current)?Qr(L):null;if(!L)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(d=no(g.href),g=Nn(L).hoistableStyles,E=g.get(d),E||(E={type:"style",instance:null,count:0,state:null},g.set(d,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){s=no(g.href);var F=Nn(L).hoistableStyles,ee=F.get(s);if(ee||(L=L.ownerDocument||L,ee={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},F.set(s,ee),(F=L.querySelector(Ua(s)))&&!F._p&&(ee.instance=F,ee.state.loading=5),wr.has(s)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},wr.set(s,g),F||Ns(L,s,g,ee.state))),d&&E===null)throw Error(n(528,""));return ee}if(d&&E!==null)throw Error(n(529,""));return null;case"script":return d=g.async,g=g.src,typeof g=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=Wn(g),g=Nn(L).hoistableScripts,E=g.get(d),E||(E={type:"script",instance:null,count:0,state:null},g.set(d,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function no(s){return'href="'+La(s)+'"'}function Ua(s){return'link[rel="stylesheet"]['+s+"]"}function al(s){return C({},s,{"data-precedence":s.precedence,precedence:null})}function Ns(s,d,g,E){s.querySelector('link[rel="preload"][as="style"]['+d+"]")?E.loading=1:(d=s.createElement("link"),E.preload=d,d.addEventListener("load",function(){return E.loading|=1}),d.addEventListener("error",function(){return E.loading|=2}),Do(d,"link",g),Ta(d),s.head.appendChild(d))}function Wn(s){return'[src="'+La(s)+'"]'}function di(s){return"script[async]"+s}function Wi(s,d,g){if(d.count++,d.instance===null)switch(d.type){case"style":var E=s.querySelector('style[data-href~="'+La(g.href)+'"]');if(E)return d.instance=E,Ta(E),E;var L=C({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return E=(s.ownerDocument||s).createElement("style"),Ta(E),Do(E,"style",L),is(E,g.precedence,s),d.instance=E;case"stylesheet":L=no(g.href);var F=s.querySelector(Ua(L));if(F)return d.state.loading|=4,d.instance=F,Ta(F),F;E=al(g),(L=wr.get(L))&&sa(E,L),F=(s.ownerDocument||s).createElement("link"),Ta(F);var ee=F;return ee._p=new Promise(function(Se,Xe){ee.onload=Se,ee.onerror=Xe}),Do(F,"link",E),d.state.loading|=4,is(F,g.precedence,s),d.instance=F;case"script":return F=Wn(g.src),(L=s.querySelector(di(F)))?(d.instance=L,Ta(L),L):(E=g,(L=wr.get(F))&&(E=C({},g),Bc(E,L)),s=s.ownerDocument||s,L=s.createElement("script"),Ta(L),Do(L,"link",E),s.head.appendChild(L),d.instance=L);case"void":return null;default:throw Error(n(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(E=d.instance,d.state.loading|=4,is(E,g.precedence,s));return d.instance}function is(s,d,g){for(var E=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),L=E.length?E[E.length-1]:null,F=L,ee=0;ee<E.length;ee++){var Se=E[ee];if(Se.dataset.precedence===d)F=Se;else if(F!==L)break}F?F.parentNode.insertBefore(s,F.nextSibling):(d=g.nodeType===9?g.head:g,d.insertBefore(s,d.firstChild))}function sa(s,d){s.crossOrigin==null&&(s.crossOrigin=d.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=d.referrerPolicy),s.title==null&&(s.title=d.title)}function Bc(s,d){s.crossOrigin==null&&(s.crossOrigin=d.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=d.referrerPolicy),s.integrity==null&&(s.integrity=d.integrity)}var ol=null;function zu(s,d,g){if(ol===null){var E=new Map,L=ol=new Map;L.set(g,E)}else L=ol,E=L.get(g),E||(E=new Map,L.set(g,E));if(E.has(s))return E;for(E.set(s,null),g=g.getElementsByTagName(s),L=0;L<g.length;L++){var F=g[L];if(!(F[li]||F[Ir]||s==="link"&&F.getAttribute("rel")==="stylesheet")&&F.namespaceURI!=="http://www.w3.org/2000/svg"){var ee=F.getAttribute(d)||"";ee=s+ee;var Se=E.get(ee);Se?Se.push(F):E.set(ee,[F])}}return E}function Ll(s,d,g){s=s.ownerDocument||s,s.head.insertBefore(g,d==="title"?s.querySelector("head > title"):null)}function Il(s,d,g){if(g===1||d.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return s=d.disabled,typeof d.precedence=="string"&&s==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function vo(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function sl(s,d,g,E){if(g.type==="stylesheet"&&(typeof E.media!="string"||matchMedia(E.media).matches!==!1)&&(g.state.loading&4)===0){if(g.instance===null){var L=no(E.href),F=d.querySelector(Ua(L));if(F){d=F._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(s.count++,s=Dp.bind(s),d.then(s,s)),g.state.loading|=4,g.instance=F,Ta(F);return}F=d.ownerDocument||d,E=al(E),(L=wr.get(L))&&sa(E,L),F=F.createElement("link"),Ta(F);var ee=F;ee._p=new Promise(function(Se,Xe){ee.onload=Se,ee.onerror=Xe}),Do(F,"link",E),g.instance=F}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(g,d),(d=g.state.preload)&&(g.state.loading&3)===0&&(s.count++,g=Dp.bind(s),d.addEventListener("load",g),d.addEventListener("error",g))}}var mh=0;function $y(s,d){return s.stylesheets&&s.count===0&&wf(s,s.stylesheets),0<s.count||0<s.imgCount?function(g){var E=setTimeout(function(){if(s.stylesheets&&wf(s,s.stylesheets),s.unsuspend){var F=s.unsuspend;s.unsuspend=null,F()}},6e4+d);0<s.imgBytes&&mh===0&&(mh=62500*a());var L=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&wf(s,s.stylesheets),s.unsuspend)){var F=s.unsuspend;s.unsuspend=null,F()}},(s.imgBytes>mh?50:800)+d);return s.unsuspend=g,function(){s.unsuspend=null,clearTimeout(E),clearTimeout(L)}}:null}function Dp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var bf=null;function wf(s,d){s.stylesheets=null,s.unsuspend!==null&&(s.count++,bf=new Map,d.forEach(sc,s),bf=null,Dp.call(s))}function sc(s,d){if(!(d.state.loading&4)){var g=bf.get(s);if(g)var E=g.get(null);else{g=new Map,bf.set(s,g);for(var L=s.querySelectorAll("link[data-precedence],style[data-precedence]"),F=0;F<L.length;F++){var ee=L[F];(ee.nodeName==="LINK"||ee.getAttribute("media")!=="not all")&&(g.set(ee.dataset.precedence,ee),E=ee)}E&&g.set(null,E)}L=d.instance,ee=L.getAttribute("data-precedence"),F=g.get(ee)||E,F===E&&g.set(null,L),g.set(ee,L),this.count++,E=Dp.bind(this),L.addEventListener("load",E),L.addEventListener("error",E),F?F.parentNode.insertBefore(L,F.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(L,s.firstChild)),d.state.loading|=4}}var yh={$$typeof:ne,Provider:null,Consumer:null,_currentValue:ze,_currentValue2:ze,_threadCount:0};function Gy(s,d,g,E,L,F,ee,Se,Xe){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ye(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ye(0),this.hiddenUpdates=Ye(null),this.identifierPrefix=E,this.onUncaughtError=L,this.onCaughtError=F,this.onRecoverableError=ee,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Xe,this.incompleteTransitions=new Map}function Uy(s,d,g,E,L,F,ee,Se,Xe,Et,Ut,Kt){return s=new Gy(s,d,g,ee,Xe,Et,Ut,Kt,Se),d=1,F===!0&&(d|=24),F=qa(3,null,null,d),s.current=F,F.stateNode=s,d=Ha(),d.refCount++,s.pooledCache=d,d.refCount++,F.memoizedState={element:E,isDehydrated:g,cache:d},mr(F),s}function Vy(s){return s?(s=Eo,s):Eo}function qy(s,d,g,E,L,F){L=Vy(L),E.context===null?E.context=L:E.pendingContext=L,E=or(d),E.payload={element:g},F=F===void 0?null:F,F!==null&&(E.callback=F),g=xr(s,E,d),g!==null&&(vs(g,s,d),Jr(g,s,d))}function Wy(s,d){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var g=s.retryLane;s.retryLane=g!==0&&g<d?g:d}}function Hm(s,d){Wy(s,d),(s=s.alternate)&&Wy(s,d)}function Hy(s){if(s.tag===13||s.tag===31){var d=Ys(s,67108864);d!==null&&vs(d,s,67108864),Hm(s,67108864)}}function Zy(s){if(s.tag===13||s.tag===31){var d=zl();d=_t(d);var g=Ys(s,d);g!==null&&vs(g,s,d),Hm(s,d)}}var qg=!0;function Pu(s,d,g,E){var L=pe.T;pe.T=null;var F=ge.p;try{ge.p=2,Hg(s,d,g,E)}finally{ge.p=F,pe.T=L}}function Wg(s,d,g,E){var L=pe.T;pe.T=null;var F=ge.p;try{ge.p=8,Hg(s,d,g,E)}finally{ge.p=F,pe.T=L}}function Hg(s,d,g,E){if(qg){var L=Zm(E);if(L===null)kp(s,d,E,Zg,g),Dx(s,E);else if(Mx(L,s,d,g,E))E.stopPropagation();else if(Dx(s,E),d&4&&-1<pb.indexOf(s)){for(;L!==null;){var F=$i(L);if(F!==null)switch(F.tag){case 3:if(F=F.stateNode,F.current.memoizedState.isDehydrated){var ee=Ne(F.pendingLanes);if(ee!==0){var Se=F;for(Se.pendingLanes|=2,Se.entangledLanes|=2;ee;){var Xe=1<<31-Jn(ee);Se.entanglements[1]|=Xe,ee&=~Xe}oc(F),(Si&6)===0&&(uh=Rn()+500,mf(0))}}break;case 31:case 13:Se=Ys(F,2),Se!==null&&vs(Se,F,2),yp(),Hm(F,2)}if(F=Zm(E),F===null&&kp(s,d,E,Zg,g),F===L)break;L=F}L!==null&&E.stopPropagation()}else kp(s,d,E,null,g)}}function Zm(s){return s=Tr(s),Km(s)}var Zg=null;function Km(s){if(Zg=null,s=Hi(s),s!==null){var d=l(s);if(d===null)s=null;else{var g=d.tag;if(g===13){if(s=h(d),s!==null)return s;s=null}else if(g===31){if(s=u(d),s!==null)return s;s=null}else if(g===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;s=null}else d!==s&&(s=null)}}return Zg=s,null}function Fo(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ai()){case pi:return 2;case oi:return 8;case Rt:case Fi:return 32;case Fn:return 268435456;default:return 32}default:return 32}}var Bs=!1,ll=null,$o=null,ul=null,cl=new Map,Xm=new Map,Sf=[],pb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Dx(s,d){switch(s){case"focusin":case"focusout":ll=null;break;case"dragenter":case"dragleave":$o=null;break;case"mouseover":case"mouseout":ul=null;break;case"pointerover":case"pointerout":cl.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xm.delete(d.pointerId)}}function Mp(s,d,g,E,L,F){return s===null||s.nativeEvent!==F?(s={blockedOn:d,domEventName:g,eventSystemFlags:E,nativeEvent:F,targetContainers:[L]},d!==null&&(d=$i(d),d!==null&&Hy(d)),s):(s.eventSystemFlags|=E,d=s.targetContainers,L!==null&&d.indexOf(L)===-1&&d.push(L),s)}function Mx(s,d,g,E,L){switch(d){case"focusin":return ll=Mp(ll,s,d,g,E,L),!0;case"dragenter":return $o=Mp($o,s,d,g,E,L),!0;case"mouseover":return ul=Mp(ul,s,d,g,E,L),!0;case"pointerover":var F=L.pointerId;return cl.set(F,Mp(cl.get(F)||null,s,d,g,E,L)),!0;case"gotpointercapture":return F=L.pointerId,Xm.set(F,Mp(Xm.get(F)||null,s,d,g,E,L)),!0}return!1}function J0(s){var d=Hi(s.target);if(d!==null){var g=l(d);if(g!==null){if(d=g.tag,d===13){if(d=h(g),d!==null){s.blockedOn=d,$r(s.priority,function(){Zy(g)});return}}else if(d===31){if(d=u(g),d!==null){s.blockedOn=d,$r(s.priority,function(){Zy(g)});return}}else if(d===3&&g.stateNode.current.memoizedState.isDehydrated){s.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ky(s){if(s.blockedOn!==null)return!1;for(var d=s.targetContainers;0<d.length;){var g=Zm(s.nativeEvent);if(g===null){g=s.nativeEvent;var E=new g.constructor(g.type,g);Yr=E,g.target.dispatchEvent(E),Yr=null}else return d=$i(g),d!==null&&Hy(d),s.blockedOn=g,!1;d.shift()}return!0}function zx(s,d,g){Ky(s)&&g.delete(d)}function gb(){Bs=!1,ll!==null&&Ky(ll)&&(ll=null),$o!==null&&Ky($o)&&($o=null),ul!==null&&Ky(ul)&&(ul=null),cl.forEach(zx),Xm.forEach(zx)}function Kg(s,d){s.blockedOn===d&&(s.blockedOn=null,Bs||(Bs=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,gb)))}var Xy=null;function Px(s){Xy!==s&&(Xy=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Xy===s&&(Xy=null);for(var d=0;d<s.length;d+=3){var g=s[d],E=s[d+1],L=s[d+2];if(typeof E!="function"){if(Km(E||g)===null)continue;break}var F=$i(g);F!==null&&(s.splice(d,3),d-=3,zc(F,{pending:!0,data:L,method:g.method,action:E},E,L))}}))}function Xg(s){function d(Xe){return Kg(Xe,s)}ll!==null&&Kg(ll,s),$o!==null&&Kg($o,s),ul!==null&&Kg(ul,s),cl.forEach(d),Xm.forEach(d);for(var g=0;g<Sf.length;g++){var E=Sf[g];E.blockedOn===s&&(E.blockedOn=null)}for(;0<Sf.length&&(g=Sf[0],g.blockedOn===null);)J0(g),g.blockedOn===null&&Sf.shift();if(g=(s.ownerDocument||s).$$reactFormReplay,g!=null)for(E=0;E<g.length;E+=3){var L=g[E],F=g[E+1],ee=L[cn]||null;if(typeof F=="function")ee||Px(g);else if(ee){var Se=null;if(F&&F.hasAttribute("formAction")){if(L=F,ee=F[cn]||null)Se=ee.formAction;else if(Km(L)!==null)continue}else Se=ee.action;typeof Se=="function"?g[E+1]=Se:(g.splice(E,3),E-=3),Px(g)}}}function Ol(){function s(F){F.canIntercept&&F.info==="react-transition"&&F.intercept({handler:function(){return new Promise(function(ee){return L=ee})},focusReset:"manual",scroll:"manual"})}function d(){L!==null&&(L(),L=null),E||setTimeout(g,20)}function g(){if(!E&&!navigation.transition){var F=navigation.currentEntry;F&&F.url!=null&&navigation.navigate(F.url,{state:F.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var E=!1,L=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",d),navigation.addEventListener("navigateerror",d),setTimeout(g,100),function(){E=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",d),navigation.removeEventListener("navigateerror",d),L!==null&&(L(),L=null)}}}function Ym(s){this._internalRoot=s}Yy.prototype.render=Ym.prototype.render=function(s){var d=this._internalRoot;if(d===null)throw Error(n(409));var g=d.current,E=zl();qy(g,E,s,d,null,null)},Yy.prototype.unmount=Ym.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var d=s.containerInfo;qy(s.current,2,null,s,null,null),yp(),d[_n]=null}};function Yy(s){this._internalRoot=s}Yy.prototype.unstable_scheduleHydration=function(s){if(s){var d=Lr();s={blockedOn:null,target:s,priority:d};for(var g=0;g<Sf.length&&d!==0&&d<Sf[g].priority;g++);Sf.splice(g,0,s),g===0&&J0(s)}};var Lx=t.version;if(Lx!=="19.2.1")throw Error(n(527,Lx,"19.2.1"));ge.findDOMNode=function(s){var d=s._reactInternals;if(d===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=x(d),s=s!==null?A(s):null,s=s===null?null:s.stateNode,s};var mb={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:pe,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jy.isDisabled&&Jy.supportsFiber)try{nr=Jy.inject(mb),kr=Jy}catch{}}return ev.createRoot=function(s,d){if(!o(s))throw Error(n(299));var g=!1,E="",L=vm,F=xm,ee=by;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(E=d.identifierPrefix),d.onUncaughtError!==void 0&&(L=d.onUncaughtError),d.onCaughtError!==void 0&&(F=d.onCaughtError),d.onRecoverableError!==void 0&&(ee=d.onRecoverableError)),d=Uy(s,1,!1,null,null,g,E,null,L,F,ee,Ol),s[_n]=d.current,Wm(s),new Ym(d)},ev.hydrateRoot=function(s,d,g){if(!o(s))throw Error(n(299));var E=!1,L="",F=vm,ee=xm,Se=by,Xe=null;return g!=null&&(g.unstable_strictMode===!0&&(E=!0),g.identifierPrefix!==void 0&&(L=g.identifierPrefix),g.onUncaughtError!==void 0&&(F=g.onUncaughtError),g.onCaughtError!==void 0&&(ee=g.onCaughtError),g.onRecoverableError!==void 0&&(Se=g.onRecoverableError),g.formState!==void 0&&(Xe=g.formState)),d=Uy(s,1,!0,d,g??null,E,L,Xe,F,ee,Se,Ol),d.context=Vy(null),g=d.current,E=zl(),E=_t(E),L=or(E),L.callback=null,xr(g,L,E),g=E,d.current.lanes=g,tt(d,g),oc(d),s[_n]=d.current,Wm(s),new Yy(d)},ev.version="19.2.1",ev}var _A;function hI(){if(_A)return bb.exports;_A=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),bb.exports=dI(),bb.exports}var fI=hI();const pI=Fl(fI);/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var bA="popstate";function gI(e={}){function t(n,o){let{pathname:l,search:h,hash:u}=n.location;return Mw("",{pathname:l,search:h,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(n,o){return typeof o=="string"?o:Lv(o)}return yI(t,r,null,e)}function bo(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Pd(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function mI(){return Math.random().toString(36).substring(2,10)}function wA(e,t){return{usr:e.state,key:e.key,idx:t}}function Mw(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?k0(t):t,state:r,key:t&&t.key||n||mI()}}function Lv({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function k0(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function yI(e,t,r,n={}){let{window:o=document.defaultView,v5Compat:l=!1}=n,h=o.history,u="POP",v=null,x=A();x==null&&(x=0,h.replaceState({...h.state,idx:x},""));function A(){return(h.state||{idx:null}).idx}function C(){u="POP";let G=A(),X=G==null?null:G-x;x=G,v&&v({action:u,location:W.location,delta:X})}function P(G,X){u="PUSH";let ae=Mw(W.location,G,X);x=A()+1;let ne=wA(ae,x),ue=W.createHref(ae);try{h.pushState(ne,"",ue)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;o.location.assign(ue)}l&&v&&v({action:u,location:W.location,delta:1})}function O(G,X){u="REPLACE";let ae=Mw(W.location,G,X);x=A();let ne=wA(ae,x),ue=W.createHref(ae);h.replaceState(ne,"",ue),l&&v&&v({action:u,location:W.location,delta:0})}function U(G){return vI(G)}let W={get action(){return u},get location(){return e(o,h)},listen(G){if(v)throw new Error("A history only accepts one active listener");return o.addEventListener(bA,C),v=G,()=>{o.removeEventListener(bA,C),v=null}},createHref(G){return t(o,G)},createURL:U,encodeLocation(G){let X=U(G);return{pathname:X.pathname,search:X.search,hash:X.hash}},push:P,replace:O,go(G){return h.go(G)}};return W}function vI(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),bo(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Lv(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function u6(e,t,r="/"){return xI(e,t,r,!1)}function xI(e,t,r,n){let o=typeof t=="string"?k0(t):t,l=Vp(o.pathname||"/",r);if(l==null)return null;let h=c6(e);_I(h);let u=null;for(let v=0;u==null&&v<h.length;++v){let x=zI(l);u=DI(h[v],x,n)}return u}function c6(e,t=[],r=[],n="",o=!1){let l=(h,u,v=o,x)=>{let A={relativePath:x===void 0?h.path||"":x,caseSensitive:h.caseSensitive===!0,childrenIndex:u,route:h};if(A.relativePath.startsWith("/")){if(!A.relativePath.startsWith(n)&&v)return;bo(A.relativePath.startsWith(n),`Absolute route path "${A.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),A.relativePath=A.relativePath.slice(n.length)}let C=Fp([n,A.relativePath]),P=r.concat(A);h.children&&h.children.length>0&&(bo(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${C}".`),c6(h.children,t,P,C,v)),!(h.path==null&&!h.index)&&t.push({path:C,score:CI(C,h.index),routesMeta:P})};return e.forEach((h,u)=>{var v;if(h.path===""||!((v=h.path)!=null&&v.includes("?")))l(h,u);else for(let x of d6(h.path))l(h,u,!0,x)}),t}function d6(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,o=r.endsWith("?"),l=r.replace(/\?$/,"");if(n.length===0)return o?[l,""]:[l];let h=d6(n.join("/")),u=[];return u.push(...h.map(v=>v===""?l:[l,v].join("/"))),o&&u.push(...h),u.map(v=>e.startsWith("/")&&v===""?"/":v)}function _I(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:TI(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var bI=/^:[\w-]+$/,wI=3,SI=2,EI=1,AI=10,kI=-2,SA=e=>e==="*";function CI(e,t){let r=e.split("/"),n=r.length;return r.some(SA)&&(n+=kI),t&&(n+=SI),r.filter(o=>!SA(o)).reduce((o,l)=>o+(bI.test(l)?wI:l===""?EI:AI),n)}function TI(e,t){return e.length===t.length&&e.slice(0,-1).every((n,o)=>n===t[o])?e[e.length-1]-t[t.length-1]:0}function DI(e,t,r=!1){let{routesMeta:n}=e,o={},l="/",h=[];for(let u=0;u<n.length;++u){let v=n[u],x=u===n.length-1,A=l==="/"?t:t.slice(l.length)||"/",C=x1({path:v.relativePath,caseSensitive:v.caseSensitive,end:x},A),P=v.route;if(!C&&x&&r&&!n[n.length-1].route.index&&(C=x1({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},A)),!C)return null;Object.assign(o,C.params),h.push({params:o,pathname:Fp([l,C.pathname]),pathnameBase:jI(Fp([l,C.pathnameBase])),route:P}),C.pathnameBase!=="/"&&(l=Fp([l,C.pathnameBase]))}return h}function x1(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=MI(e.path,e.caseSensitive,e.end),o=t.match(r);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),u=o.slice(1);return{params:n.reduce((x,{paramName:A,isOptional:C},P)=>{if(A==="*"){let U=u[P]||"";h=l.slice(0,l.length-U.length).replace(/(.)\/+$/,"$1")}const O=u[P];return C&&!O?x[A]=void 0:x[A]=(O||"").replace(/%2F/g,"/"),x},{}),pathname:l,pathnameBase:h,pattern:e}}function MI(e,t=!1,r=!0){Pd(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,u,v)=>(n.push({paramName:u,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),n]}function zI(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Pd(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Vp(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}var PI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,LI=e=>PI.test(e);function II(e,t="/"){let{pathname:r,search:n="",hash:o=""}=typeof e=="string"?k0(e):e,l;if(r)if(LI(r))l=r;else{if(r.includes("//")){let h=r;r=r.replace(/\/\/+/g,"/"),Pd(!1,`Pathnames cannot have embedded double slashes - normalizing ${h} -> ${r}`)}r.startsWith("/")?l=EA(r.substring(1),"/"):l=EA(r,t)}else l=t;return{pathname:l,search:RI(n),hash:NI(o)}}function EA(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function Ab(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function OI(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function KS(e){let t=OI(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function XS(e,t,r,n=!1){let o;typeof e=="string"?o=k0(e):(o={...e},bo(!o.pathname||!o.pathname.includes("?"),Ab("?","pathname","search",o)),bo(!o.pathname||!o.pathname.includes("#"),Ab("#","pathname","hash",o)),bo(!o.search||!o.search.includes("#"),Ab("#","search","hash",o)));let l=e===""||o.pathname==="",h=l?"/":o.pathname,u;if(h==null)u=r;else{let C=t.length-1;if(!n&&h.startsWith("..")){let P=h.split("/");for(;P[0]==="..";)P.shift(),C-=1;o.pathname=P.join("/")}u=C>=0?t[C]:"/"}let v=II(o,u),x=h&&h!=="/"&&h.endsWith("/"),A=(l||h===".")&&r.endsWith("/");return!v.pathname.endsWith("/")&&(x||A)&&(v.pathname+="/"),v}var Fp=e=>e.join("/").replace(/\/\/+/g,"/"),jI=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),RI=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,NI=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function BI(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function FI(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var h6=["POST","PUT","PATCH","DELETE"];new Set(h6);var $I=["GET",...h6];new Set($I);var C0=N.createContext(null);C0.displayName="DataRouter";var v_=N.createContext(null);v_.displayName="DataRouterState";N.createContext(!1);var f6=N.createContext({isTransitioning:!1});f6.displayName="ViewTransition";var GI=N.createContext(new Map);GI.displayName="Fetchers";var UI=N.createContext(null);UI.displayName="Await";var Rd=N.createContext(null);Rd.displayName="Navigation";var Jv=N.createContext(null);Jv.displayName="Location";var Lf=N.createContext({outlet:null,matches:[],isDataRoute:!1});Lf.displayName="Route";var YS=N.createContext(null);YS.displayName="RouteError";function VI(e,{relative:t}={}){bo(T0(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=N.useContext(Rd),{hash:o,pathname:l,search:h}=ex(e,{relative:t}),u=l;return r!=="/"&&(u=l==="/"?r:Fp([r,l])),n.createHref({pathname:u,search:h,hash:o})}function T0(){return N.useContext(Jv)!=null}function am(){return bo(T0(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Jv).location}var p6="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function g6(e){N.useContext(Rd).static||N.useLayoutEffect(e)}function Qv(){let{isDataRoute:e}=N.useContext(Lf);return e?nO():qI()}function qI(){bo(T0(),"useNavigate() may be used only in the context of a <Router> component.");let e=N.useContext(C0),{basename:t,navigator:r}=N.useContext(Rd),{matches:n}=N.useContext(Lf),{pathname:o}=am(),l=JSON.stringify(KS(n)),h=N.useRef(!1);return g6(()=>{h.current=!0}),N.useCallback((v,x={})=>{if(Pd(h.current,p6),!h.current)return;if(typeof v=="number"){r.go(v);return}let A=XS(v,JSON.parse(l),o,x.relative==="path");e==null&&t!=="/"&&(A.pathname=A.pathname==="/"?t:Fp([t,A.pathname])),(x.replace?r.replace:r.push)(A,x.state,x)},[t,r,l,o,e])}N.createContext(null);function ex(e,{relative:t}={}){let{matches:r}=N.useContext(Lf),{pathname:n}=am(),o=JSON.stringify(KS(r));return N.useMemo(()=>XS(e,JSON.parse(o),n,t==="path"),[e,o,n,t])}function WI(e,t){return m6(e,t)}function m6(e,t,r,n,o){var ae;bo(T0(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=N.useContext(Rd),{matches:h}=N.useContext(Lf),u=h[h.length-1],v=u?u.params:{},x=u?u.pathname:"/",A=u?u.pathnameBase:"/",C=u&&u.route;{let ne=C&&C.path||"";y6(x,!C||ne.endsWith("*")||ne.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${ne}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ne}"> to <Route path="${ne==="/"?"*":`${ne}/*`}">.`)}let P=am(),O;if(t){let ne=typeof t=="string"?k0(t):t;bo(A==="/"||((ae=ne.pathname)==null?void 0:ae.startsWith(A)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${A}" but pathname "${ne.pathname}" was given in the \`location\` prop.`),O=ne}else O=P;let U=O.pathname||"/",W=U;if(A!=="/"){let ne=A.replace(/^\//,"").split("/");W="/"+U.replace(/^\//,"").split("/").slice(ne.length).join("/")}let G=u6(e,{pathname:W});Pd(C||G!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),Pd(G==null||G[G.length-1].route.element!==void 0||G[G.length-1].route.Component!==void 0||G[G.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let X=YI(G&&G.map(ne=>Object.assign({},ne,{params:Object.assign({},v,ne.params),pathname:Fp([A,l.encodeLocation?l.encodeLocation(ne.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ne.pathname]),pathnameBase:ne.pathnameBase==="/"?A:Fp([A,l.encodeLocation?l.encodeLocation(ne.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ne.pathnameBase])})),h,r,n,o);return t&&X?N.createElement(Jv.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},X):X}function HI(){let e=rO(),t=BI(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:n},l={padding:"2px 4px",backgroundColor:n},h=null;return console.error("Error handled by React Router default ErrorBoundary:",e),h=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:l},"ErrorBoundary")," or"," ",N.createElement("code",{style:l},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),r?N.createElement("pre",{style:o},r):null,h)}var ZI=N.createElement(HI,null),KI=class extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?N.createElement(Lf.Provider,{value:this.props.routeContext},N.createElement(YS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function XI({routeContext:e,match:t,children:r}){let n=N.useContext(C0);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),N.createElement(Lf.Provider,{value:e},r)}function YI(e,t=[],r=null,n=null,o=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,h=r==null?void 0:r.errors;if(h!=null){let A=l.findIndex(C=>C.route.id&&(h==null?void 0:h[C.route.id])!==void 0);bo(A>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),l=l.slice(0,Math.min(l.length,A+1))}let u=!1,v=-1;if(r)for(let A=0;A<l.length;A++){let C=l[A];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(v=A),C.route.id){let{loaderData:P,errors:O}=r,U=C.route.loader&&!P.hasOwnProperty(C.route.id)&&(!O||O[C.route.id]===void 0);if(C.route.lazy||U){u=!0,v>=0?l=l.slice(0,v+1):l=[l[0]];break}}}let x=r&&n?(A,C)=>{var P,O;n(A,{location:r.location,params:((O=(P=r.matches)==null?void 0:P[0])==null?void 0:O.params)??{},unstable_pattern:FI(r.matches),errorInfo:C})}:void 0;return l.reduceRight((A,C,P)=>{let O,U=!1,W=null,G=null;r&&(O=h&&C.route.id?h[C.route.id]:void 0,W=C.route.errorElement||ZI,u&&(v<0&&P===0?(y6("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),U=!0,G=null):v===P&&(U=!0,G=C.route.hydrateFallbackElement||null)));let X=t.concat(l.slice(0,P+1)),ae=()=>{let ne;return O?ne=W:U?ne=G:C.route.Component?ne=N.createElement(C.route.Component,null):C.route.element?ne=C.route.element:ne=A,N.createElement(XI,{match:C,routeContext:{outlet:A,matches:X,isDataRoute:r!=null},children:ne})};return r&&(C.route.ErrorBoundary||C.route.errorElement||P===0)?N.createElement(KI,{location:r.location,revalidation:r.revalidation,component:W,error:O,children:ae(),routeContext:{outlet:null,matches:X,isDataRoute:!0},onError:x}):ae()},null)}function JS(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function JI(e){let t=N.useContext(C0);return bo(t,JS(e)),t}function QI(e){let t=N.useContext(v_);return bo(t,JS(e)),t}function eO(e){let t=N.useContext(Lf);return bo(t,JS(e)),t}function QS(e){let t=eO(e),r=t.matches[t.matches.length-1];return bo(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function tO(){return QS("useRouteId")}function rO(){var n;let e=N.useContext(YS),t=QI("useRouteError"),r=QS("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function nO(){let{router:e}=JI("useNavigate"),t=QS("useNavigate"),r=N.useRef(!1);return g6(()=>{r.current=!0}),N.useCallback(async(o,l={})=>{Pd(r.current,p6),r.current&&(typeof o=="number"?await e.navigate(o):await e.navigate(o,{fromRouteId:t,...l}))},[e,t])}var AA={};function y6(e,t,r){!t&&!AA[e]&&(AA[e]=!0,Pd(!1,r))}N.memo(iO);function iO({routes:e,future:t,state:r,unstable_onError:n}){return m6(e,void 0,r,n,t)}function kA({to:e,replace:t,state:r,relative:n}){bo(T0(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=N.useContext(Rd);Pd(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=N.useContext(Lf),{pathname:h}=am(),u=Qv(),v=XS(e,KS(l),h,n==="path"),x=JSON.stringify(v);return N.useEffect(()=>{u(JSON.parse(x),{replace:t,state:r,relative:n})},[u,x,n,t,r]),null}function a0(e){bo(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function aO({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:o,static:l=!1,unstable_useTransitions:h}){bo(!T0(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),v=N.useMemo(()=>({basename:u,navigator:o,static:l,unstable_useTransitions:h,future:{}}),[u,o,l,h]);typeof r=="string"&&(r=k0(r));let{pathname:x="/",search:A="",hash:C="",state:P=null,key:O="default"}=r,U=N.useMemo(()=>{let W=Vp(x,u);return W==null?null:{location:{pathname:W,search:A,hash:C,state:P,key:O},navigationType:n}},[u,x,A,C,P,O,n]);return Pd(U!=null,`<Router basename="${u}"> is not able to match the URL "${x}${A}${C}" because it does not start with the basename, so the <Router> won't render anything.`),U==null?null:N.createElement(Rd.Provider,{value:v},N.createElement(Jv.Provider,{children:t,value:U}))}function oO({children:e,location:t}){return WI(zw(e),t)}function zw(e,t=[]){let r=[];return N.Children.forEach(e,(n,o)=>{if(!N.isValidElement(n))return;let l=[...t,o];if(n.type===N.Fragment){r.push.apply(r,zw(n.props.children,l));return}bo(n.type===a0,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),bo(!n.props.index||!n.props.children,"An index route cannot have child routes.");let h={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(h.children=zw(n.props.children,l)),r.push(h)}),r}var s1="get",l1="application/x-www-form-urlencoded";function x_(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function sO(e){return x_(e)&&e.tagName.toLowerCase()==="button"}function lO(e){return x_(e)&&e.tagName.toLowerCase()==="form"}function uO(e){return x_(e)&&e.tagName.toLowerCase()==="input"}function cO(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function dO(e,t){return e.button===0&&(!t||t==="_self")&&!cO(e)}var Ox=null;function hO(){if(Ox===null)try{new FormData(document.createElement("form"),0),Ox=!1}catch{Ox=!0}return Ox}var fO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function kb(e){return e!=null&&!fO.has(e)?(Pd(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${l1}"`),null):e}function pO(e,t){let r,n,o,l,h;if(lO(e)){let u=e.getAttribute("action");n=u?Vp(u,t):null,r=e.getAttribute("method")||s1,o=kb(e.getAttribute("enctype"))||l1,l=new FormData(e)}else if(sO(e)||uO(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=e.getAttribute("formaction")||u.getAttribute("action");if(n=v?Vp(v,t):null,r=e.getAttribute("formmethod")||u.getAttribute("method")||s1,o=kb(e.getAttribute("formenctype"))||kb(u.getAttribute("enctype"))||l1,l=new FormData(u,e),!hO()){let{name:x,type:A,value:C}=e;if(A==="image"){let P=x?`${x}.`:"";l.append(`${P}x`,"0"),l.append(`${P}y`,"0")}else x&&l.append(x,C)}}else{if(x_(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=s1,n=null,o=l1,h=e}return l&&o==="text/plain"&&(h=l,l=void 0),{action:n,method:r.toLowerCase(),encType:o,formData:l,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function eE(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function gO(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&Vp(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function mO(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function yO(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function vO(e,t,r){let n=await Promise.all(e.map(async o=>{let l=t.routes[o.route.id];if(l){let h=await mO(l,r);return h.links?h.links():[]}return[]}));return wO(n.flat(1).filter(yO).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function CA(e,t,r,n,o,l){let h=(v,x)=>r[x]?v.route.id!==r[x].route.id:!0,u=(v,x)=>{var A;return r[x].pathname!==v.pathname||((A=r[x].route.path)==null?void 0:A.endsWith("*"))&&r[x].params["*"]!==v.params["*"]};return l==="assets"?t.filter((v,x)=>h(v,x)||u(v,x)):l==="data"?t.filter((v,x)=>{var C;let A=n.routes[v.route.id];if(!A||!A.hasLoader)return!1;if(h(v,x)||u(v,x))return!0;if(v.route.shouldRevalidate){let P=v.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((C=r[0])==null?void 0:C.params)||{},nextUrl:new URL(e,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof P=="boolean")return P}return!0}):[]}function xO(e,t,{includeHydrateFallback:r}={}){return _O(e.map(n=>{let o=t.routes[n.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),r&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function _O(e){return[...new Set(e)]}function bO(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function wO(e,t){let r=new Set;return new Set(t),e.reduce((n,o)=>{let l=JSON.stringify(bO(o));return r.has(l)||(r.add(l),n.push({key:l,link:o})),n},[])}function v6(){let e=N.useContext(C0);return eE(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function SO(){let e=N.useContext(v_);return eE(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var tE=N.createContext(void 0);tE.displayName="FrameworkContext";function x6(){let e=N.useContext(tE);return eE(e,"You must render this element inside a <HydratedRouter> element"),e}function EO(e,t){let r=N.useContext(tE),[n,o]=N.useState(!1),[l,h]=N.useState(!1),{onFocus:u,onBlur:v,onMouseEnter:x,onMouseLeave:A,onTouchStart:C}=t,P=N.useRef(null);N.useEffect(()=>{if(e==="render"&&h(!0),e==="viewport"){let W=X=>{X.forEach(ae=>{h(ae.isIntersecting)})},G=new IntersectionObserver(W,{threshold:.5});return P.current&&G.observe(P.current),()=>{G.disconnect()}}},[e]),N.useEffect(()=>{if(n){let W=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(W)}}},[n]);let O=()=>{o(!0)},U=()=>{o(!1),h(!1)};return r?e!=="intent"?[l,P,{}]:[l,P,{onFocus:tv(u,O),onBlur:tv(v,U),onMouseEnter:tv(x,O),onMouseLeave:tv(A,U),onTouchStart:tv(C,O)}]:[!1,P,{}]}function tv(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function AO({page:e,...t}){let{router:r}=v6(),n=N.useMemo(()=>u6(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?N.createElement(CO,{page:e,matches:n,...t}):null}function kO(e){let{manifest:t,routeModules:r}=x6(),[n,o]=N.useState([]);return N.useEffect(()=>{let l=!1;return vO(e,t,r).then(h=>{l||o(h)}),()=>{l=!0}},[e,t,r]),n}function CO({page:e,matches:t,...r}){let n=am(),{manifest:o,routeModules:l}=x6(),{basename:h}=v6(),{loaderData:u,matches:v}=SO(),x=N.useMemo(()=>CA(e,t,v,o,n,"data"),[e,t,v,o,n]),A=N.useMemo(()=>CA(e,t,v,o,n,"assets"),[e,t,v,o,n]),C=N.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let U=new Set,W=!1;if(t.forEach(X=>{var ne;let ae=o.routes[X.route.id];!ae||!ae.hasLoader||(!x.some(ue=>ue.route.id===X.route.id)&&X.route.id in u&&((ne=l[X.route.id])!=null&&ne.shouldRevalidate)||ae.hasClientLoader?W=!0:U.add(X.route.id))}),U.size===0)return[];let G=gO(e,h,"data");return W&&U.size>0&&G.searchParams.set("_routes",t.filter(X=>U.has(X.route.id)).map(X=>X.route.id).join(",")),[G.pathname+G.search]},[h,u,n,o,x,t,e,l]),P=N.useMemo(()=>xO(A,o),[A,o]),O=kO(A);return N.createElement(N.Fragment,null,C.map(U=>N.createElement("link",{key:U,rel:"prefetch",as:"fetch",href:U,...r})),P.map(U=>N.createElement("link",{key:U,rel:"modulepreload",href:U,...r})),O.map(({key:U,link:W})=>N.createElement("link",{key:U,nonce:r.nonce,...W})))}function TO(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var _6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{_6&&(window.__reactRouterVersion="7.10.1")}catch{}function DO({basename:e,children:t,unstable_useTransitions:r,window:n}){let o=N.useRef();o.current==null&&(o.current=gI({window:n,v5Compat:!0}));let l=o.current,[h,u]=N.useState({action:l.action,location:l.location}),v=N.useCallback(x=>{r===!1?u(x):N.startTransition(()=>u(x))},[r]);return N.useLayoutEffect(()=>l.listen(v),[l,v]),N.createElement(aO,{basename:e,children:t,location:h.location,navigationType:h.action,navigator:l,unstable_useTransitions:r===!0})}var b6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,w6=N.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:o,reloadDocument:l,replace:h,state:u,target:v,to:x,preventScrollReset:A,viewTransition:C,...P},O){let{basename:U,unstable_useTransitions:W}=N.useContext(Rd),G=typeof x=="string"&&b6.test(x),X,ae=!1;if(typeof x=="string"&&G&&(X=x,_6))try{let Ce=new URL(window.location.href),_e=x.startsWith("//")?new URL(Ce.protocol+x):new URL(x),Me=Vp(_e.pathname,U);_e.origin===Ce.origin&&Me!=null?x=Me+_e.search+_e.hash:ae=!0}catch{Pd(!1,`<Link to="${x}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ne=VI(x,{relative:o}),[ue,Q,de]=EO(n,P),he=LO(x,{replace:h,state:u,target:v,preventScrollReset:A,relative:o,viewTransition:C,unstable_useTransitions:W});function Y(Ce){t&&t(Ce),Ce.defaultPrevented||he(Ce)}let ie=N.createElement("a",{...P,...de,href:X||ne,onClick:ae||l?t:Y,ref:TO(O,Q),target:v,"data-discover":!G&&r==="render"?"true":void 0});return ue&&!G?N.createElement(N.Fragment,null,ie,N.createElement(AO,{page:ne})):ie});w6.displayName="Link";var MO=N.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:o=!1,style:l,to:h,viewTransition:u,children:v,...x},A){let C=ex(h,{relative:x.relative}),P=am(),O=N.useContext(v_),{navigator:U,basename:W}=N.useContext(Rd),G=O!=null&&NO(C)&&u===!0,X=U.encodeLocation?U.encodeLocation(C).pathname:C.pathname,ae=P.pathname,ne=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;r||(ae=ae.toLowerCase(),ne=ne?ne.toLowerCase():null,X=X.toLowerCase()),ne&&W&&(ne=Vp(ne,W)||ne);const ue=X!=="/"&&X.endsWith("/")?X.length-1:X.length;let Q=ae===X||!o&&ae.startsWith(X)&&ae.charAt(ue)==="/",de=ne!=null&&(ne===X||!o&&ne.startsWith(X)&&ne.charAt(X.length)==="/"),he={isActive:Q,isPending:de,isTransitioning:G},Y=Q?t:void 0,ie;typeof n=="function"?ie=n(he):ie=[n,Q?"active":null,de?"pending":null,G?"transitioning":null].filter(Boolean).join(" ");let Ce=typeof l=="function"?l(he):l;return N.createElement(w6,{...x,"aria-current":Y,className:ie,ref:A,style:Ce,to:h,viewTransition:u},typeof v=="function"?v(he):v)});MO.displayName="NavLink";var zO=N.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:o,state:l,method:h=s1,action:u,onSubmit:v,relative:x,preventScrollReset:A,viewTransition:C,...P},O)=>{let{unstable_useTransitions:U}=N.useContext(Rd),W=jO(),G=RO(u,{relative:x}),X=h.toLowerCase()==="get"?"get":"post",ae=typeof u=="string"&&b6.test(u),ne=ue=>{if(v&&v(ue),ue.defaultPrevented)return;ue.preventDefault();let Q=ue.nativeEvent.submitter,de=(Q==null?void 0:Q.getAttribute("formmethod"))||h,he=()=>W(Q||ue.currentTarget,{fetcherKey:t,method:de,navigate:r,replace:o,state:l,relative:x,preventScrollReset:A,viewTransition:C});U&&r!==!1?N.startTransition(()=>he()):he()};return N.createElement("form",{ref:O,method:X,action:G,onSubmit:n?v:ne,...P,"data-discover":!ae&&e==="render"?"true":void 0})});zO.displayName="Form";function PO(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function S6(e){let t=N.useContext(C0);return bo(t,PO(e)),t}function LO(e,{target:t,replace:r,state:n,preventScrollReset:o,relative:l,viewTransition:h,unstable_useTransitions:u}={}){let v=Qv(),x=am(),A=ex(e,{relative:l});return N.useCallback(C=>{if(dO(C,t)){C.preventDefault();let P=r!==void 0?r:Lv(x)===Lv(A),O=()=>v(e,{replace:P,state:n,preventScrollReset:o,relative:l,viewTransition:h});u?N.startTransition(()=>O()):O()}},[x,v,A,r,n,t,e,o,l,h,u])}var IO=0,OO=()=>`__${String(++IO)}__`;function jO(){let{router:e}=S6("useSubmit"),{basename:t}=N.useContext(Rd),r=tO(),n=e.fetch,o=e.navigate;return N.useCallback(async(l,h={})=>{let{action:u,method:v,encType:x,formData:A,body:C}=pO(l,t);if(h.navigate===!1){let P=h.fetcherKey||OO();await n(P,r,h.action||u,{preventScrollReset:h.preventScrollReset,formData:A,body:C,formMethod:h.method||v,formEncType:h.encType||x,flushSync:h.flushSync})}else await o(h.action||u,{preventScrollReset:h.preventScrollReset,formData:A,body:C,formMethod:h.method||v,formEncType:h.encType||x,replace:h.replace,state:h.state,fromRouteId:r,flushSync:h.flushSync,viewTransition:h.viewTransition})},[n,o,t,r])}function RO(e,{relative:t}={}){let{basename:r}=N.useContext(Rd),n=N.useContext(Lf);bo(n,"useFormAction must be used inside a RouteContext");let[o]=n.matches.slice(-1),l={...ex(e||".",{relative:t})},h=am();if(e==null){l.search=h.search;let u=new URLSearchParams(l.search),v=u.getAll("index");if(v.some(A=>A==="")){u.delete("index"),v.filter(C=>C).forEach(C=>u.append("index",C));let A=u.toString();l.search=A?`?${A}`:""}}return(!e||e===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(l.pathname=l.pathname==="/"?r:Fp([r,l.pathname])),Lv(l)}function NO(e,{relative:t}={}){let r=N.useContext(f6);bo(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=S6("useViewTransitionState"),o=ex(e,{relative:t});if(!r.isTransitioning)return!1;let l=Vp(r.currentLocation.pathname,n)||r.currentLocation.pathname,h=Vp(r.nextLocation.pathname,n)||r.nextLocation.pathname;return x1(o.pathname,h)!=null||x1(o.pathname,l)!=null}var __=l6(),jx={exports:{}},TA;function BO(){if(TA)return jx.exports;TA=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(Q,de,he){return Function.prototype.apply.call(Q,de,he)},r;e&&typeof e.ownKeys=="function"?r=e.ownKeys:Object.getOwnPropertySymbols?r=function(Q){return Object.getOwnPropertyNames(Q).concat(Object.getOwnPropertySymbols(Q))}:r=function(Q){return Object.getOwnPropertyNames(Q)};function n(ue){console&&console.warn&&console.warn(ue)}var o=Number.isNaN||function(Q){return Q!==Q};function l(){l.init.call(this)}jx.exports=l,jx.exports.once=X,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var h=10;function u(ue){if(typeof ue!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ue)}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return h},set:function(ue){if(typeof ue!="number"||ue<0||o(ue))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ue+".");h=ue}}),l.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(Q){if(typeof Q!="number"||Q<0||o(Q))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Q+".");return this._maxListeners=Q,this};function v(ue){return ue._maxListeners===void 0?l.defaultMaxListeners:ue._maxListeners}l.prototype.getMaxListeners=function(){return v(this)},l.prototype.emit=function(Q){for(var de=[],he=1;he<arguments.length;he++)de.push(arguments[he]);var Y=Q==="error",ie=this._events;if(ie!==void 0)Y=Y&&ie.error===void 0;else if(!Y)return!1;if(Y){var Ce;if(de.length>0&&(Ce=de[0]),Ce instanceof Error)throw Ce;var _e=new Error("Unhandled error."+(Ce?" ("+Ce.message+")":""));throw _e.context=Ce,_e}var Me=ie[Q];if(Me===void 0)return!1;if(typeof Me=="function")t(Me,this,de);else for(var me=Me.length,Ke=U(Me,me),he=0;he<me;++he)t(Ke[he],this,de);return!0};function x(ue,Q,de,he){var Y,ie,Ce;if(u(de),ie=ue._events,ie===void 0?(ie=ue._events=Object.create(null),ue._eventsCount=0):(ie.newListener!==void 0&&(ue.emit("newListener",Q,de.listener?de.listener:de),ie=ue._events),Ce=ie[Q]),Ce===void 0)Ce=ie[Q]=de,++ue._eventsCount;else if(typeof Ce=="function"?Ce=ie[Q]=he?[de,Ce]:[Ce,de]:he?Ce.unshift(de):Ce.push(de),Y=v(ue),Y>0&&Ce.length>Y&&!Ce.warned){Ce.warned=!0;var _e=new Error("Possible EventEmitter memory leak detected. "+Ce.length+" "+String(Q)+" listeners added. Use emitter.setMaxListeners() to increase limit");_e.name="MaxListenersExceededWarning",_e.emitter=ue,_e.type=Q,_e.count=Ce.length,n(_e)}return ue}l.prototype.addListener=function(Q,de){return x(this,Q,de,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(Q,de){return x(this,Q,de,!0)};function A(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function C(ue,Q,de){var he={fired:!1,wrapFn:void 0,target:ue,type:Q,listener:de},Y=A.bind(he);return Y.listener=de,he.wrapFn=Y,Y}l.prototype.once=function(Q,de){return u(de),this.on(Q,C(this,Q,de)),this},l.prototype.prependOnceListener=function(Q,de){return u(de),this.prependListener(Q,C(this,Q,de)),this},l.prototype.removeListener=function(Q,de){var he,Y,ie,Ce,_e;if(u(de),Y=this._events,Y===void 0)return this;if(he=Y[Q],he===void 0)return this;if(he===de||he.listener===de)--this._eventsCount===0?this._events=Object.create(null):(delete Y[Q],Y.removeListener&&this.emit("removeListener",Q,he.listener||de));else if(typeof he!="function"){for(ie=-1,Ce=he.length-1;Ce>=0;Ce--)if(he[Ce]===de||he[Ce].listener===de){_e=he[Ce].listener,ie=Ce;break}if(ie<0)return this;ie===0?he.shift():W(he,ie),he.length===1&&(Y[Q]=he[0]),Y.removeListener!==void 0&&this.emit("removeListener",Q,_e||de)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(Q){var de,he,Y;if(he=this._events,he===void 0)return this;if(he.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):he[Q]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete he[Q]),this;if(arguments.length===0){var ie=Object.keys(he),Ce;for(Y=0;Y<ie.length;++Y)Ce=ie[Y],Ce!=="removeListener"&&this.removeAllListeners(Ce);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(de=he[Q],typeof de=="function")this.removeListener(Q,de);else if(de!==void 0)for(Y=de.length-1;Y>=0;Y--)this.removeListener(Q,de[Y]);return this};function P(ue,Q,de){var he=ue._events;if(he===void 0)return[];var Y=he[Q];return Y===void 0?[]:typeof Y=="function"?de?[Y.listener||Y]:[Y]:de?G(Y):U(Y,Y.length)}l.prototype.listeners=function(Q){return P(this,Q,!0)},l.prototype.rawListeners=function(Q){return P(this,Q,!1)},l.listenerCount=function(ue,Q){return typeof ue.listenerCount=="function"?ue.listenerCount(Q):O.call(ue,Q)},l.prototype.listenerCount=O;function O(ue){var Q=this._events;if(Q!==void 0){var de=Q[ue];if(typeof de=="function")return 1;if(de!==void 0)return de.length}return 0}l.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function U(ue,Q){for(var de=new Array(Q),he=0;he<Q;++he)de[he]=ue[he];return de}function W(ue,Q){for(;Q+1<ue.length;Q++)ue[Q]=ue[Q+1];ue.pop()}function G(ue){for(var Q=new Array(ue.length),de=0;de<Q.length;++de)Q[de]=ue[de].listener||ue[de];return Q}function X(ue,Q){return new Promise(function(de,he){function Y(Ce){ue.removeListener(Q,ie),he(Ce)}function ie(){typeof ue.removeListener=="function"&&ue.removeListener("error",Y),de([].slice.call(arguments))}ne(ue,Q,ie,{once:!0}),Q!=="error"&&ae(ue,Y,{once:!0})})}function ae(ue,Q,de){typeof ue.on=="function"&&ne(ue,"error",Q,de)}function ne(ue,Q,de,he){if(typeof ue.on=="function")he.once?ue.once(Q,de):ue.on(Q,de);else if(typeof ue.addEventListener=="function")ue.addEventListener(Q,function Y(ie){he.once&&ue.removeEventListener(Q,Y),de(ie)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ue)}return jx.exports}var rE=BO();function FO(){const e=arguments[0];for(let t=1,r=arguments.length;t<r;t++)if(arguments[t])for(const n in arguments[t])e[n]=arguments[t][n];return e}let $s=FO;typeof Object.assign=="function"&&($s=Object.assign);function Md(e,t,r,n){const o=e._nodes.get(t);let l=null;return o&&(n==="mixed"?l=o.out&&o.out[r]||o.undirected&&o.undirected[r]:n==="directed"?l=o.out&&o.out[r]:l=o.undirected&&o.undirected[r]),l}function Rl(e){return typeof e=="object"&&e!==null}function E6(e){let t;for(t in e)return!1;return!0}function Sd(e,t,r){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!0,value:r})}function xh(e,t,r){const n={enumerable:!0,configurable:!0};typeof r=="function"?n.get=r:(n.value=r,n.writable=!1),Object.defineProperty(e,t,n)}function DA(e){return!(!Rl(e)||e.attributes&&!Array.isArray(e.attributes))}function $O(){let e=Math.floor(Math.random()*256)&255;return()=>e++}function $p(){const e=arguments;let t=null,r=-1;return{[Symbol.iterator](){return this},next(){let n=null;do{if(t===null){if(r++,r>=e.length)return{done:!0};t=e[r][Symbol.iterator]()}if(n=t.next(),n.done){t=null;continue}break}while(!0);return n}}}function D0(){return{[Symbol.iterator](){return this},next(){return{done:!0}}}}let nE=class extends Error{constructor(t){super(),this.name="GraphError",this.message=t}},Fr=class A6 extends nE{constructor(t){super(t),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,A6.prototype.constructor)}},Sr=class k6 extends nE{constructor(t){super(t),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,k6.prototype.constructor)}},Tn=class C6 extends nE{constructor(t){super(t),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,C6.prototype.constructor)}};function T6(e,t){this.key=e,this.attributes=t,this.clear()}T6.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function D6(e,t){this.key=e,this.attributes=t,this.clear()}D6.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function M6(e,t){this.key=e,this.attributes=t,this.clear()}M6.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function M0(e,t,r,n,o){this.key=t,this.attributes=o,this.undirected=e,this.source=r,this.target=n}M0.prototype.attach=function(){let e="out",t="in";this.undirected&&(e=t="undirected");const r=this.source.key,n=this.target.key;this.source[e][n]=this,!(this.undirected&&r===n)&&(this.target[t][r]=this)};M0.prototype.attachMulti=function(){let e="out",t="in";const r=this.source.key,n=this.target.key;this.undirected&&(e=t="undirected");const o=this.source[e],l=o[n];if(typeof l>"u"){o[n]=this,this.undirected&&r===n||(this.target[t][r]=this);return}l.previous=this,this.next=l,o[n]=this,this.target[t][r]=this};M0.prototype.detach=function(){const e=this.source.key,t=this.target.key;let r="out",n="in";this.undirected&&(r=n="undirected"),delete this.source[r][t],delete this.target[n][e]};M0.prototype.detachMulti=function(){const e=this.source.key,t=this.target.key;let r="out",n="in";this.undirected&&(r=n="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[r][t],delete this.target[n][e]):(this.next.previous=void 0,this.source[r][t]=this.next,this.target[n][e]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const z6=0,P6=1,GO=2,L6=3;function Jp(e,t,r,n,o,l,h){let u,v,x,A;if(n=""+n,r===z6){if(u=e._nodes.get(n),!u)throw new Sr(`Graph.${t}: could not find the "${n}" node in the graph.`);x=o,A=l}else if(r===L6){if(o=""+o,v=e._edges.get(o),!v)throw new Sr(`Graph.${t}: could not find the "${o}" edge in the graph.`);const C=v.source.key,P=v.target.key;if(n===C)u=v.target;else if(n===P)u=v.source;else throw new Sr(`Graph.${t}: the "${n}" node is not attached to the "${o}" edge (${C}, ${P}).`);x=l,A=h}else{if(v=e._edges.get(n),!v)throw new Sr(`Graph.${t}: could not find the "${n}" edge in the graph.`);r===P6?u=v.source:u=v.target,x=o,A=l}return[u,x,A]}function UO(e,t,r){e.prototype[t]=function(n,o,l){const[h,u]=Jp(this,t,r,n,o,l);return h.attributes[u]}}function VO(e,t,r){e.prototype[t]=function(n,o){const[l]=Jp(this,t,r,n,o);return l.attributes}}function qO(e,t,r){e.prototype[t]=function(n,o,l){const[h,u]=Jp(this,t,r,n,o,l);return h.attributes.hasOwnProperty(u)}}function WO(e,t,r){e.prototype[t]=function(n,o,l,h){const[u,v,x]=Jp(this,t,r,n,o,l,h);return u.attributes[v]=x,this.emit("nodeAttributesUpdated",{key:u.key,type:"set",attributes:u.attributes,name:v}),this}}function HO(e,t,r){e.prototype[t]=function(n,o,l,h){const[u,v,x]=Jp(this,t,r,n,o,l,h);if(typeof x!="function")throw new Fr(`Graph.${t}: updater should be a function.`);const A=u.attributes,C=x(A[v]);return A[v]=C,this.emit("nodeAttributesUpdated",{key:u.key,type:"set",attributes:u.attributes,name:v}),this}}function ZO(e,t,r){e.prototype[t]=function(n,o,l){const[h,u]=Jp(this,t,r,n,o,l);return delete h.attributes[u],this.emit("nodeAttributesUpdated",{key:h.key,type:"remove",attributes:h.attributes,name:u}),this}}function KO(e,t,r){e.prototype[t]=function(n,o,l){const[h,u]=Jp(this,t,r,n,o,l);if(!Rl(u))throw new Fr(`Graph.${t}: provided attributes are not a plain object.`);return h.attributes=u,this.emit("nodeAttributesUpdated",{key:h.key,type:"replace",attributes:h.attributes}),this}}function XO(e,t,r){e.prototype[t]=function(n,o,l){const[h,u]=Jp(this,t,r,n,o,l);if(!Rl(u))throw new Fr(`Graph.${t}: provided attributes are not a plain object.`);return $s(h.attributes,u),this.emit("nodeAttributesUpdated",{key:h.key,type:"merge",attributes:h.attributes,data:u}),this}}function YO(e,t,r){e.prototype[t]=function(n,o,l){const[h,u]=Jp(this,t,r,n,o,l);if(typeof u!="function")throw new Fr(`Graph.${t}: provided updater is not a function.`);return h.attributes=u(h.attributes),this.emit("nodeAttributesUpdated",{key:h.key,type:"update",attributes:h.attributes}),this}}const JO=[{name:e=>`get${e}Attribute`,attacher:UO},{name:e=>`get${e}Attributes`,attacher:VO},{name:e=>`has${e}Attribute`,attacher:qO},{name:e=>`set${e}Attribute`,attacher:WO},{name:e=>`update${e}Attribute`,attacher:HO},{name:e=>`remove${e}Attribute`,attacher:ZO},{name:e=>`replace${e}Attributes`,attacher:KO},{name:e=>`merge${e}Attributes`,attacher:XO},{name:e=>`update${e}Attributes`,attacher:YO}];function QO(e){JO.forEach(function({name:t,attacher:r}){r(e,t("Node"),z6),r(e,t("Source"),P6),r(e,t("Target"),GO),r(e,t("Opposite"),L6)})}function ej(e,t,r){e.prototype[t]=function(n,o){let l;if(this.type!=="mixed"&&r!=="mixed"&&r!==this.type)throw new Tn(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Tn(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const h=""+n,u=""+o;if(o=arguments[2],l=Md(this,h,u,r),!l)throw new Sr(`Graph.${t}: could not find an edge for the given path ("${h}" - "${u}").`)}else{if(r!=="mixed")throw new Tn(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,l=this._edges.get(n),!l)throw new Sr(`Graph.${t}: could not find the "${n}" edge in the graph.`)}return l.attributes[o]}}function tj(e,t,r){e.prototype[t]=function(n){let o;if(this.type!=="mixed"&&r!=="mixed"&&r!==this.type)throw new Tn(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new Tn(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const l=""+n,h=""+arguments[1];if(o=Md(this,l,h,r),!o)throw new Sr(`Graph.${t}: could not find an edge for the given path ("${l}" - "${h}").`)}else{if(r!=="mixed")throw new Tn(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,o=this._edges.get(n),!o)throw new Sr(`Graph.${t}: could not find the "${n}" edge in the graph.`)}return o.attributes}}function rj(e,t,r){e.prototype[t]=function(n,o){let l;if(this.type!=="mixed"&&r!=="mixed"&&r!==this.type)throw new Tn(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Tn(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const h=""+n,u=""+o;if(o=arguments[2],l=Md(this,h,u,r),!l)throw new Sr(`Graph.${t}: could not find an edge for the given path ("${h}" - "${u}").`)}else{if(r!=="mixed")throw new Tn(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,l=this._edges.get(n),!l)throw new Sr(`Graph.${t}: could not find the "${n}" edge in the graph.`)}return l.attributes.hasOwnProperty(o)}}function nj(e,t,r){e.prototype[t]=function(n,o,l){let h;if(this.type!=="mixed"&&r!=="mixed"&&r!==this.type)throw new Tn(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Tn(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const u=""+n,v=""+o;if(o=arguments[2],l=arguments[3],h=Md(this,u,v,r),!h)throw new Sr(`Graph.${t}: could not find an edge for the given path ("${u}" - "${v}").`)}else{if(r!=="mixed")throw new Tn(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,h=this._edges.get(n),!h)throw new Sr(`Graph.${t}: could not find the "${n}" edge in the graph.`)}return h.attributes[o]=l,this.emit("edgeAttributesUpdated",{key:h.key,type:"set",attributes:h.attributes,name:o}),this}}function ij(e,t,r){e.prototype[t]=function(n,o,l){let h;if(this.type!=="mixed"&&r!=="mixed"&&r!==this.type)throw new Tn(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Tn(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const u=""+n,v=""+o;if(o=arguments[2],l=arguments[3],h=Md(this,u,v,r),!h)throw new Sr(`Graph.${t}: could not find an edge for the given path ("${u}" - "${v}").`)}else{if(r!=="mixed")throw new Tn(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,h=this._edges.get(n),!h)throw new Sr(`Graph.${t}: could not find the "${n}" edge in the graph.`)}if(typeof l!="function")throw new Fr(`Graph.${t}: updater should be a function.`);return h.attributes[o]=l(h.attributes[o]),this.emit("edgeAttributesUpdated",{key:h.key,type:"set",attributes:h.attributes,name:o}),this}}function aj(e,t,r){e.prototype[t]=function(n,o){let l;if(this.type!=="mixed"&&r!=="mixed"&&r!==this.type)throw new Tn(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Tn(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const h=""+n,u=""+o;if(o=arguments[2],l=Md(this,h,u,r),!l)throw new Sr(`Graph.${t}: could not find an edge for the given path ("${h}" - "${u}").`)}else{if(r!=="mixed")throw new Tn(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,l=this._edges.get(n),!l)throw new Sr(`Graph.${t}: could not find the "${n}" edge in the graph.`)}return delete l.attributes[o],this.emit("edgeAttributesUpdated",{key:l.key,type:"remove",attributes:l.attributes,name:o}),this}}function oj(e,t,r){e.prototype[t]=function(n,o){let l;if(this.type!=="mixed"&&r!=="mixed"&&r!==this.type)throw new Tn(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Tn(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const h=""+n,u=""+o;if(o=arguments[2],l=Md(this,h,u,r),!l)throw new Sr(`Graph.${t}: could not find an edge for the given path ("${h}" - "${u}").`)}else{if(r!=="mixed")throw new Tn(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,l=this._edges.get(n),!l)throw new Sr(`Graph.${t}: could not find the "${n}" edge in the graph.`)}if(!Rl(o))throw new Fr(`Graph.${t}: provided attributes are not a plain object.`);return l.attributes=o,this.emit("edgeAttributesUpdated",{key:l.key,type:"replace",attributes:l.attributes}),this}}function sj(e,t,r){e.prototype[t]=function(n,o){let l;if(this.type!=="mixed"&&r!=="mixed"&&r!==this.type)throw new Tn(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Tn(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const h=""+n,u=""+o;if(o=arguments[2],l=Md(this,h,u,r),!l)throw new Sr(`Graph.${t}: could not find an edge for the given path ("${h}" - "${u}").`)}else{if(r!=="mixed")throw new Tn(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,l=this._edges.get(n),!l)throw new Sr(`Graph.${t}: could not find the "${n}" edge in the graph.`)}if(!Rl(o))throw new Fr(`Graph.${t}: provided attributes are not a plain object.`);return $s(l.attributes,o),this.emit("edgeAttributesUpdated",{key:l.key,type:"merge",attributes:l.attributes,data:o}),this}}function lj(e,t,r){e.prototype[t]=function(n,o){let l;if(this.type!=="mixed"&&r!=="mixed"&&r!==this.type)throw new Tn(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Tn(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const h=""+n,u=""+o;if(o=arguments[2],l=Md(this,h,u,r),!l)throw new Sr(`Graph.${t}: could not find an edge for the given path ("${h}" - "${u}").`)}else{if(r!=="mixed")throw new Tn(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,l=this._edges.get(n),!l)throw new Sr(`Graph.${t}: could not find the "${n}" edge in the graph.`)}if(typeof o!="function")throw new Fr(`Graph.${t}: provided updater is not a function.`);return l.attributes=o(l.attributes),this.emit("edgeAttributesUpdated",{key:l.key,type:"update",attributes:l.attributes}),this}}const uj=[{name:e=>`get${e}Attribute`,attacher:ej},{name:e=>`get${e}Attributes`,attacher:tj},{name:e=>`has${e}Attribute`,attacher:rj},{name:e=>`set${e}Attribute`,attacher:nj},{name:e=>`update${e}Attribute`,attacher:ij},{name:e=>`remove${e}Attribute`,attacher:aj},{name:e=>`replace${e}Attributes`,attacher:oj},{name:e=>`merge${e}Attributes`,attacher:sj},{name:e=>`update${e}Attributes`,attacher:lj}];function cj(e){uj.forEach(function({name:t,attacher:r}){r(e,t("Edge"),"mixed"),r(e,t("DirectedEdge"),"directed"),r(e,t("UndirectedEdge"),"undirected")})}const dj=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function hj(e,t,r,n){let o=!1;for(const l in t){if(l===n)continue;const h=t[l];if(o=r(h.key,h.attributes,h.source.key,h.target.key,h.source.attributes,h.target.attributes,h.undirected),e&&o)return h.key}}function fj(e,t,r,n){let o,l,h,u=!1;for(const v in t)if(v!==n){o=t[v];do{if(l=o.source,h=o.target,u=r(o.key,o.attributes,l.key,h.key,l.attributes,h.attributes,o.undirected),e&&u)return o.key;o=o.next}while(o!==void 0)}}function Cb(e,t){const r=Object.keys(e),n=r.length;let o,l=0;return{[Symbol.iterator](){return this},next(){do if(o)o=o.next;else{if(l>=n)return{done:!0};const h=r[l++];if(h===t){o=void 0;continue}o=e[h]}while(!o);return{done:!1,value:{edge:o.key,attributes:o.attributes,source:o.source.key,target:o.target.key,sourceAttributes:o.source.attributes,targetAttributes:o.target.attributes,undirected:o.undirected}}}}}function pj(e,t,r,n){const o=t[r];if(!o)return;const l=o.source,h=o.target;if(n(o.key,o.attributes,l.key,h.key,l.attributes,h.attributes,o.undirected)&&e)return o.key}function gj(e,t,r,n){let o=t[r];if(!o)return;let l=!1;do{if(l=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),e&&l)return o.key;o=o.next}while(o!==void 0)}function Tb(e,t){let r=e[t];if(r.next!==void 0)return{[Symbol.iterator](){return this},next(){if(!r)return{done:!0};const o={edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected};return r=r.next,{done:!1,value:o}}};let n=!1;return{[Symbol.iterator](){return this},next(){return n===!0?{done:!0}:(n=!0,{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}})}}}function mj(e,t){if(e.size===0)return[];if(t==="mixed"||t===e.type)return Array.from(e._edges.keys());const r=t==="undirected"?e.undirectedSize:e.directedSize,n=new Array(r),o=t==="undirected",l=e._edges.values();let h=0,u,v;for(;u=l.next(),u.done!==!0;)v=u.value,v.undirected===o&&(n[h++]=v.key);return n}function I6(e,t,r,n){if(t.size===0)return;const o=r!=="mixed"&&r!==t.type,l=r==="undirected";let h,u,v=!1;const x=t._edges.values();for(;h=x.next(),h.done!==!0;){if(u=h.value,o&&u.undirected!==l)continue;const{key:A,attributes:C,source:P,target:O}=u;if(v=n(A,C,P.key,O.key,P.attributes,O.attributes,u.undirected),e&&v)return A}}function yj(e,t){if(e.size===0)return D0();const r=t!=="mixed"&&t!==e.type,n=t==="undirected",o=e._edges.values();return{[Symbol.iterator](){return this},next(){let l,h;for(;;){if(l=o.next(),l.done)return l;if(h=l.value,!(r&&h.undirected!==n))break}return{value:{edge:h.key,attributes:h.attributes,source:h.source.key,target:h.target.key,sourceAttributes:h.source.attributes,targetAttributes:h.target.attributes,undirected:h.undirected},done:!1}}}}function iE(e,t,r,n,o,l){const h=t?fj:hj;let u;if(r!=="undirected"&&(n!=="out"&&(u=h(e,o.in,l),e&&u)||n!=="in"&&(u=h(e,o.out,l,n?void 0:o.key),e&&u))||r!=="directed"&&(u=h(e,o.undirected,l),e&&u))return u}function vj(e,t,r,n){const o=[];return iE(!1,e,t,r,n,function(l){o.push(l)}),o}function xj(e,t,r){let n=D0();return e!=="undirected"&&(t!=="out"&&typeof r.in<"u"&&(n=$p(n,Cb(r.in))),t!=="in"&&typeof r.out<"u"&&(n=$p(n,Cb(r.out,t?void 0:r.key)))),e!=="directed"&&typeof r.undirected<"u"&&(n=$p(n,Cb(r.undirected))),n}function aE(e,t,r,n,o,l,h){const u=r?gj:pj;let v;if(t!=="undirected"&&(typeof o.in<"u"&&n!=="out"&&(v=u(e,o.in,l,h),e&&v)||typeof o.out<"u"&&n!=="in"&&(n||o.key!==l)&&(v=u(e,o.out,l,h),e&&v))||t!=="directed"&&typeof o.undirected<"u"&&(v=u(e,o.undirected,l,h),e&&v))return v}function _j(e,t,r,n,o){const l=[];return aE(!1,e,t,r,n,o,function(h){l.push(h)}),l}function bj(e,t,r,n){let o=D0();return e!=="undirected"&&(typeof r.in<"u"&&t!=="out"&&n in r.in&&(o=$p(o,Tb(r.in,n))),typeof r.out<"u"&&t!=="in"&&n in r.out&&(t||r.key!==n)&&(o=$p(o,Tb(r.out,n)))),e!=="directed"&&typeof r.undirected<"u"&&n in r.undirected&&(o=$p(o,Tb(r.undirected,n))),o}function wj(e,t){const{name:r,type:n,direction:o}=t;e.prototype[r]=function(l,h){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return[];if(!arguments.length)return mj(this,n);if(arguments.length===1){l=""+l;const u=this._nodes.get(l);if(typeof u>"u")throw new Sr(`Graph.${r}: could not find the "${l}" node in the graph.`);return vj(this.multi,n==="mixed"?this.type:n,o,u)}if(arguments.length===2){l=""+l,h=""+h;const u=this._nodes.get(l);if(!u)throw new Sr(`Graph.${r}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(h))throw new Sr(`Graph.${r}:  could not find the "${h}" target node in the graph.`);return _j(n,this.multi,o,u,h)}throw new Fr(`Graph.${r}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Sj(e,t){const{name:r,type:n,direction:o}=t,l="forEach"+r[0].toUpperCase()+r.slice(1,-1);e.prototype[l]=function(x,A,C){if(!(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)){if(arguments.length===1)return C=x,I6(!1,this,n,C);if(arguments.length===2){x=""+x,C=A;const P=this._nodes.get(x);if(typeof P>"u")throw new Sr(`Graph.${l}: could not find the "${x}" node in the graph.`);return iE(!1,this.multi,n==="mixed"?this.type:n,o,P,C)}if(arguments.length===3){x=""+x,A=""+A;const P=this._nodes.get(x);if(!P)throw new Sr(`Graph.${l}:  could not find the "${x}" source node in the graph.`);if(!this._nodes.has(A))throw new Sr(`Graph.${l}:  could not find the "${A}" target node in the graph.`);return aE(!1,n,this.multi,o,P,A,C)}throw new Fr(`Graph.${l}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const h="map"+r[0].toUpperCase()+r.slice(1);e.prototype[h]=function(){const x=Array.prototype.slice.call(arguments),A=x.pop();let C;if(x.length===0){let P=0;n!=="directed"&&(P+=this.undirectedSize),n!=="undirected"&&(P+=this.directedSize),C=new Array(P);let O=0;x.push((U,W,G,X,ae,ne,ue)=>{C[O++]=A(U,W,G,X,ae,ne,ue)})}else C=[],x.push((P,O,U,W,G,X,ae)=>{C.push(A(P,O,U,W,G,X,ae))});return this[l].apply(this,x),C};const u="filter"+r[0].toUpperCase()+r.slice(1);e.prototype[u]=function(){const x=Array.prototype.slice.call(arguments),A=x.pop(),C=[];return x.push((P,O,U,W,G,X,ae)=>{A(P,O,U,W,G,X,ae)&&C.push(P)}),this[l].apply(this,x),C};const v="reduce"+r[0].toUpperCase()+r.slice(1);e.prototype[v]=function(){let x=Array.prototype.slice.call(arguments);if(x.length<2||x.length>4)throw new Fr(`Graph.${v}: invalid number of arguments (expecting 2, 3 or 4 and got ${x.length}).`);if(typeof x[x.length-1]=="function"&&typeof x[x.length-2]!="function")throw new Fr(`Graph.${v}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let A,C;x.length===2?(A=x[0],C=x[1],x=[]):x.length===3?(A=x[1],C=x[2],x=[x[0]]):x.length===4&&(A=x[2],C=x[3],x=[x[0],x[1]]);let P=C;return x.push((O,U,W,G,X,ae,ne)=>{P=A(P,O,U,W,G,X,ae,ne)}),this[l].apply(this,x),P}}function Ej(e,t){const{name:r,type:n,direction:o}=t,l="find"+r[0].toUpperCase()+r.slice(1,-1);e.prototype[l]=function(v,x,A){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return!1;if(arguments.length===1)return A=v,I6(!0,this,n,A);if(arguments.length===2){v=""+v,A=x;const C=this._nodes.get(v);if(typeof C>"u")throw new Sr(`Graph.${l}: could not find the "${v}" node in the graph.`);return iE(!0,this.multi,n==="mixed"?this.type:n,o,C,A)}if(arguments.length===3){v=""+v,x=""+x;const C=this._nodes.get(v);if(!C)throw new Sr(`Graph.${l}:  could not find the "${v}" source node in the graph.`);if(!this._nodes.has(x))throw new Sr(`Graph.${l}:  could not find the "${x}" target node in the graph.`);return aE(!0,n,this.multi,o,C,x,A)}throw new Fr(`Graph.${l}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const h="some"+r[0].toUpperCase()+r.slice(1,-1);e.prototype[h]=function(){const v=Array.prototype.slice.call(arguments),x=v.pop();return v.push((C,P,O,U,W,G,X)=>x(C,P,O,U,W,G,X)),!!this[l].apply(this,v)};const u="every"+r[0].toUpperCase()+r.slice(1,-1);e.prototype[u]=function(){const v=Array.prototype.slice.call(arguments),x=v.pop();return v.push((C,P,O,U,W,G,X)=>!x(C,P,O,U,W,G,X)),!this[l].apply(this,v)}}function Aj(e,t){const{name:r,type:n,direction:o}=t,l=r.slice(0,-1)+"Entries";e.prototype[l]=function(h,u){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return D0();if(!arguments.length)return yj(this,n);if(arguments.length===1){h=""+h;const v=this._nodes.get(h);if(!v)throw new Sr(`Graph.${l}: could not find the "${h}" node in the graph.`);return xj(n,o,v)}if(arguments.length===2){h=""+h,u=""+u;const v=this._nodes.get(h);if(!v)throw new Sr(`Graph.${l}:  could not find the "${h}" source node in the graph.`);if(!this._nodes.has(u))throw new Sr(`Graph.${l}:  could not find the "${u}" target node in the graph.`);return bj(n,o,v,u)}throw new Fr(`Graph.${l}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function kj(e){dj.forEach(t=>{wj(e,t),Sj(e,t),Ej(e,t),Aj(e,t)})}const Cj=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function b_(){this.A=null,this.B=null}b_.prototype.wrap=function(e){this.A===null?this.A=e:this.B===null&&(this.B=e)};b_.prototype.has=function(e){return this.A!==null&&e in this.A||this.B!==null&&e in this.B};function rv(e,t,r,n,o){for(const l in n){const h=n[l],u=h.source,v=h.target,x=u===r?v:u;if(t&&t.has(x.key))continue;const A=o(x.key,x.attributes);if(e&&A)return x.key}}function oE(e,t,r,n,o){if(t!=="mixed"){if(t==="undirected")return rv(e,null,n,n.undirected,o);if(typeof r=="string")return rv(e,null,n,n[r],o)}const l=new b_;let h;if(t!=="undirected"){if(r!=="out"){if(h=rv(e,null,n,n.in,o),e&&h)return h;l.wrap(n.in)}if(r!=="in"){if(h=rv(e,l,n,n.out,o),e&&h)return h;l.wrap(n.out)}}if(t!=="directed"&&(h=rv(e,l,n,n.undirected,o),e&&h))return h}function Tj(e,t,r){if(e!=="mixed"){if(e==="undirected")return Object.keys(r.undirected);if(typeof t=="string")return Object.keys(r[t])}const n=[];return oE(!1,e,t,r,function(o){n.push(o)}),n}function nv(e,t,r){const n=Object.keys(r),o=n.length;let l=0;return{[Symbol.iterator](){return this},next(){let h=null;do{if(l>=o)return e&&e.wrap(r),{done:!0};const u=r[n[l++]],v=u.source,x=u.target;if(h=v===t?x:v,e&&e.has(h.key)){h=null;continue}}while(h===null);return{done:!1,value:{neighbor:h.key,attributes:h.attributes}}}}}function Dj(e,t,r){if(e!=="mixed"){if(e==="undirected")return nv(null,r,r.undirected);if(typeof t=="string")return nv(null,r,r[t])}let n=D0();const o=new b_;return e!=="undirected"&&(t!=="out"&&(n=$p(n,nv(o,r,r.in))),t!=="in"&&(n=$p(n,nv(o,r,r.out)))),e!=="directed"&&(n=$p(n,nv(o,r,r.undirected))),n}function Mj(e,t){const{name:r,type:n,direction:o}=t;e.prototype[r]=function(l){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return[];l=""+l;const h=this._nodes.get(l);if(typeof h>"u")throw new Sr(`Graph.${r}: could not find the "${l}" node in the graph.`);return Tj(n==="mixed"?this.type:n,o,h)}}function zj(e,t){const{name:r,type:n,direction:o}=t,l="forEach"+r[0].toUpperCase()+r.slice(1,-1);e.prototype[l]=function(x,A){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return;x=""+x;const C=this._nodes.get(x);if(typeof C>"u")throw new Sr(`Graph.${l}: could not find the "${x}" node in the graph.`);oE(!1,n==="mixed"?this.type:n,o,C,A)};const h="map"+r[0].toUpperCase()+r.slice(1);e.prototype[h]=function(x,A){const C=[];return this[l](x,(P,O)=>{C.push(A(P,O))}),C};const u="filter"+r[0].toUpperCase()+r.slice(1);e.prototype[u]=function(x,A){const C=[];return this[l](x,(P,O)=>{A(P,O)&&C.push(P)}),C};const v="reduce"+r[0].toUpperCase()+r.slice(1);e.prototype[v]=function(x,A,C){if(arguments.length<3)throw new Fr(`Graph.${v}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let P=C;return this[l](x,(O,U)=>{P=A(P,O,U)}),P}}function Pj(e,t){const{name:r,type:n,direction:o}=t,l=r[0].toUpperCase()+r.slice(1,-1),h="find"+l;e.prototype[h]=function(x,A){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return;x=""+x;const C=this._nodes.get(x);if(typeof C>"u")throw new Sr(`Graph.${h}: could not find the "${x}" node in the graph.`);return oE(!0,n==="mixed"?this.type:n,o,C,A)};const u="some"+l;e.prototype[u]=function(x,A){return!!this[h](x,A)};const v="every"+l;e.prototype[v]=function(x,A){return!this[h](x,(P,O)=>!A(P,O))}}function Lj(e,t){const{name:r,type:n,direction:o}=t,l=r.slice(0,-1)+"Entries";e.prototype[l]=function(h){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return D0();h=""+h;const u=this._nodes.get(h);if(typeof u>"u")throw new Sr(`Graph.${l}: could not find the "${h}" node in the graph.`);return Dj(n==="mixed"?this.type:n,o,u)}}function Ij(e){Cj.forEach(t=>{Mj(e,t),zj(e,t),Pj(e,t),Lj(e,t)})}function Rx(e,t,r,n,o){const l=n._nodes.values(),h=n.type;let u,v,x,A,C,P;for(;u=l.next(),u.done!==!0;){let O=!1;if(v=u.value,h!=="undirected"){A=v.out;for(x in A){C=A[x];do P=C.target,O=!0,o(v.key,P.key,v.attributes,P.attributes,C.key,C.attributes,C.undirected),C=C.next;while(C)}}if(h!=="directed"){A=v.undirected;for(x in A)if(!(t&&v.key>x)){C=A[x];do P=C.target,P.key!==x&&(P=C.source),O=!0,o(v.key,P.key,v.attributes,P.attributes,C.key,C.attributes,C.undirected),C=C.next;while(C)}}r&&!O&&o(v.key,null,v.attributes,null,null,null,null)}}function Oj(e,t){const r={key:e};return E6(t.attributes)||(r.attributes=$s({},t.attributes)),r}function jj(e,t,r){const n={key:t,source:r.source.key,target:r.target.key};return E6(r.attributes)||(n.attributes=$s({},r.attributes)),e==="mixed"&&r.undirected&&(n.undirected=!0),n}function Rj(e){if(!Rl(e))throw new Fr('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in e))throw new Fr("Graph.import: serialized node is missing its key.");if("attributes"in e&&(!Rl(e.attributes)||e.attributes===null))throw new Fr("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Nj(e){if(!Rl(e))throw new Fr('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in e))throw new Fr("Graph.import: serialized edge is missing its source.");if(!("target"in e))throw new Fr("Graph.import: serialized edge is missing its target.");if("attributes"in e&&(!Rl(e.attributes)||e.attributes===null))throw new Fr("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in e&&typeof e.undirected!="boolean")throw new Fr("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const Bj=$O(),Fj=new Set(["directed","undirected","mixed"]),MA=new Set(["domain","_events","_eventsCount","_maxListeners"]),$j=[{name:e=>`${e}Edge`,generateKey:!0},{name:e=>`${e}DirectedEdge`,generateKey:!0,type:"directed"},{name:e=>`${e}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:e=>`${e}EdgeWithKey`},{name:e=>`${e}DirectedEdgeWithKey`,type:"directed"},{name:e=>`${e}UndirectedEdgeWithKey`,type:"undirected"}],Gj={allowSelfLoops:!0,multi:!1,type:"mixed"};function Uj(e,t,r){if(r&&!Rl(r))throw new Fr(`Graph.addNode: invalid attributes. Expecting an object but got "${r}"`);if(t=""+t,r=r||{},e._nodes.has(t))throw new Tn(`Graph.addNode: the "${t}" node already exist in the graph.`);const n=new e.NodeDataClass(t,r);return e._nodes.set(t,n),e.emit("nodeAdded",{key:t,attributes:r}),n}function zA(e,t,r){const n=new e.NodeDataClass(t,r);return e._nodes.set(t,n),e.emit("nodeAdded",{key:t,attributes:r}),n}function O6(e,t,r,n,o,l,h,u){if(!n&&e.type==="undirected")throw new Tn(`Graph.${t}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(n&&e.type==="directed")throw new Tn(`Graph.${t}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(u&&!Rl(u))throw new Fr(`Graph.${t}: invalid attributes. Expecting an object but got "${u}"`);if(l=""+l,h=""+h,u=u||{},!e.allowSelfLoops&&l===h)throw new Tn(`Graph.${t}: source & target are the same ("${l}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const v=e._nodes.get(l),x=e._nodes.get(h);if(!v)throw new Sr(`Graph.${t}: source node "${l}" not found.`);if(!x)throw new Sr(`Graph.${t}: target node "${h}" not found.`);const A={key:null,undirected:n,source:l,target:h,attributes:u};if(r)o=e._edgeKeyGenerator();else if(o=""+o,e._edges.has(o))throw new Tn(`Graph.${t}: the "${o}" edge already exists in the graph.`);if(!e.multi&&(n?typeof v.undirected[h]<"u":typeof v.out[h]<"u"))throw new Tn(`Graph.${t}: an edge linking "${l}" to "${h}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const C=new M0(n,o,v,x,u);e._edges.set(o,C);const P=l===h;return n?(v.undirectedDegree++,x.undirectedDegree++,P&&(v.undirectedLoops++,e._undirectedSelfLoopCount++)):(v.outDegree++,x.inDegree++,P&&(v.directedLoops++,e._directedSelfLoopCount++)),e.multi?C.attachMulti():C.attach(),n?e._undirectedSize++:e._directedSize++,A.key=o,e.emit("edgeAdded",A),o}function Vj(e,t,r,n,o,l,h,u,v){if(!n&&e.type==="undirected")throw new Tn(`Graph.${t}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(n&&e.type==="directed")throw new Tn(`Graph.${t}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(u){if(v){if(typeof u!="function")throw new Fr(`Graph.${t}: invalid updater function. Expecting a function but got "${u}"`)}else if(!Rl(u))throw new Fr(`Graph.${t}: invalid attributes. Expecting an object but got "${u}"`)}l=""+l,h=""+h;let x;if(v&&(x=u,u=void 0),!e.allowSelfLoops&&l===h)throw new Tn(`Graph.${t}: source & target are the same ("${l}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let A=e._nodes.get(l),C=e._nodes.get(h),P,O;if(!r&&(P=e._edges.get(o),P)){if((P.source.key!==l||P.target.key!==h)&&(!n||P.source.key!==h||P.target.key!==l))throw new Tn(`Graph.${t}: inconsistency detected when attempting to merge the "${o}" edge with "${l}" source & "${h}" target vs. ("${P.source.key}", "${P.target.key}").`);O=P}if(!O&&!e.multi&&A&&(O=n?A.undirected[h]:A.out[h]),O){const ae=[O.key,!1,!1,!1];if(v?!x:!u)return ae;if(v){const ne=O.attributes;O.attributes=x(ne),e.emit("edgeAttributesUpdated",{type:"replace",key:O.key,attributes:O.attributes})}else $s(O.attributes,u),e.emit("edgeAttributesUpdated",{type:"merge",key:O.key,attributes:O.attributes,data:u});return ae}u=u||{},v&&x&&(u=x(u));const U={key:null,undirected:n,source:l,target:h,attributes:u};if(r)o=e._edgeKeyGenerator();else if(o=""+o,e._edges.has(o))throw new Tn(`Graph.${t}: the "${o}" edge already exists in the graph.`);let W=!1,G=!1;A||(A=zA(e,l,{}),W=!0,l===h&&(C=A,G=!0)),C||(C=zA(e,h,{}),G=!0),P=new M0(n,o,A,C,u),e._edges.set(o,P);const X=l===h;return n?(A.undirectedDegree++,C.undirectedDegree++,X&&(A.undirectedLoops++,e._undirectedSelfLoopCount++)):(A.outDegree++,C.inDegree++,X&&(A.directedLoops++,e._directedSelfLoopCount++)),e.multi?P.attachMulti():P.attach(),n?e._undirectedSize++:e._directedSize++,U.key=o,e.emit("edgeAdded",U),[o,!0,W,G]}function Qy(e,t){e._edges.delete(t.key);const{source:r,target:n,attributes:o}=t,l=t.undirected,h=r===n;l?(r.undirectedDegree--,n.undirectedDegree--,h&&(r.undirectedLoops--,e._undirectedSelfLoopCount--)):(r.outDegree--,n.inDegree--,h&&(r.directedLoops--,e._directedSelfLoopCount--)),e.multi?t.detachMulti():t.detach(),l?e._undirectedSize--:e._directedSize--,e.emit("edgeDropped",{key:t.key,attributes:o,source:r.key,target:n.key,undirected:l})}let oo=class Pw extends rE.EventEmitter{constructor(t){if(super(),t=$s({},Gj,t),typeof t.multi!="boolean")throw new Fr(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${t.multi}".`);if(!Fj.has(t.type))throw new Fr(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${t.type}".`);if(typeof t.allowSelfLoops!="boolean")throw new Fr(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${t.allowSelfLoops}".`);const r=t.type==="mixed"?T6:t.type==="directed"?D6:M6;Sd(this,"NodeDataClass",r);const n="geid_"+Bj()+"_";let o=0;const l=()=>{let h;do h=n+o++;while(this._edges.has(h));return h};Sd(this,"_attributes",{}),Sd(this,"_nodes",new Map),Sd(this,"_edges",new Map),Sd(this,"_directedSize",0),Sd(this,"_undirectedSize",0),Sd(this,"_directedSelfLoopCount",0),Sd(this,"_undirectedSelfLoopCount",0),Sd(this,"_edgeKeyGenerator",l),Sd(this,"_options",t),MA.forEach(h=>Sd(this,h,this[h])),xh(this,"order",()=>this._nodes.size),xh(this,"size",()=>this._edges.size),xh(this,"directedSize",()=>this._directedSize),xh(this,"undirectedSize",()=>this._undirectedSize),xh(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),xh(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),xh(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),xh(this,"multi",this._options.multi),xh(this,"type",this._options.type),xh(this,"allowSelfLoops",this._options.allowSelfLoops),xh(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(t){return this._nodes.has(""+t)}hasDirectedEdge(t,r){if(this.type==="undirected")return!1;if(arguments.length===1){const n=""+t,o=this._edges.get(n);return!!o&&!o.undirected}else if(arguments.length===2){t=""+t,r=""+r;const n=this._nodes.get(t);return n?n.out.hasOwnProperty(r):!1}throw new Fr(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(t,r){if(this.type==="directed")return!1;if(arguments.length===1){const n=""+t,o=this._edges.get(n);return!!o&&o.undirected}else if(arguments.length===2){t=""+t,r=""+r;const n=this._nodes.get(t);return n?n.undirected.hasOwnProperty(r):!1}throw new Fr(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(t,r){if(arguments.length===1){const n=""+t;return this._edges.has(n)}else if(arguments.length===2){t=""+t,r=""+r;const n=this._nodes.get(t);return n?typeof n.out<"u"&&n.out.hasOwnProperty(r)||typeof n.undirected<"u"&&n.undirected.hasOwnProperty(r):!1}throw new Fr(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(t,r){if(this.type==="undirected")return;if(t=""+t,r=""+r,this.multi)throw new Tn("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const n=this._nodes.get(t);if(!n)throw new Sr(`Graph.directedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(r))throw new Sr(`Graph.directedEdge: could not find the "${r}" target node in the graph.`);const o=n.out&&n.out[r]||void 0;if(o)return o.key}undirectedEdge(t,r){if(this.type==="directed")return;if(t=""+t,r=""+r,this.multi)throw new Tn("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const n=this._nodes.get(t);if(!n)throw new Sr(`Graph.undirectedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(r))throw new Sr(`Graph.undirectedEdge: could not find the "${r}" target node in the graph.`);const o=n.undirected&&n.undirected[r]||void 0;if(o)return o.key}edge(t,r){if(this.multi)throw new Tn("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");t=""+t,r=""+r;const n=this._nodes.get(t);if(!n)throw new Sr(`Graph.edge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(r))throw new Sr(`Graph.edge: could not find the "${r}" target node in the graph.`);const o=n.out&&n.out[r]||n.undirected&&n.undirected[r]||void 0;if(o)return o.key}areDirectedNeighbors(t,r){t=""+t,r=""+r;const n=this._nodes.get(t);if(!n)throw new Sr(`Graph.areDirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:r in n.in||r in n.out}areOutNeighbors(t,r){t=""+t,r=""+r;const n=this._nodes.get(t);if(!n)throw new Sr(`Graph.areOutNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:r in n.out}areInNeighbors(t,r){t=""+t,r=""+r;const n=this._nodes.get(t);if(!n)throw new Sr(`Graph.areInNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:r in n.in}areUndirectedNeighbors(t,r){t=""+t,r=""+r;const n=this._nodes.get(t);if(!n)throw new Sr(`Graph.areUndirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="directed"?!1:r in n.undirected}areNeighbors(t,r){t=""+t,r=""+r;const n=this._nodes.get(t);if(!n)throw new Sr(`Graph.areNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&(r in n.in||r in n.out)||this.type!=="directed"&&r in n.undirected}areInboundNeighbors(t,r){t=""+t,r=""+r;const n=this._nodes.get(t);if(!n)throw new Sr(`Graph.areInboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&r in n.in||this.type!=="directed"&&r in n.undirected}areOutboundNeighbors(t,r){t=""+t,r=""+r;const n=this._nodes.get(t);if(!n)throw new Sr(`Graph.areOutboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&r in n.out||this.type!=="directed"&&r in n.undirected}inDegree(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new Sr(`Graph.inDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:r.inDegree}outDegree(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new Sr(`Graph.outDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:r.outDegree}directedDegree(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new Sr(`Graph.directedDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:r.inDegree+r.outDegree}undirectedDegree(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new Sr(`Graph.undirectedDegree: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:r.undirectedDegree}inboundDegree(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new Sr(`Graph.inboundDegree: could not find the "${t}" node in the graph.`);let n=0;return this.type!=="directed"&&(n+=r.undirectedDegree),this.type!=="undirected"&&(n+=r.inDegree),n}outboundDegree(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new Sr(`Graph.outboundDegree: could not find the "${t}" node in the graph.`);let n=0;return this.type!=="directed"&&(n+=r.undirectedDegree),this.type!=="undirected"&&(n+=r.outDegree),n}degree(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new Sr(`Graph.degree: could not find the "${t}" node in the graph.`);let n=0;return this.type!=="directed"&&(n+=r.undirectedDegree),this.type!=="undirected"&&(n+=r.inDegree+r.outDegree),n}inDegreeWithoutSelfLoops(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new Sr(`Graph.inDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:r.inDegree-r.directedLoops}outDegreeWithoutSelfLoops(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new Sr(`Graph.outDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:r.outDegree-r.directedLoops}directedDegreeWithoutSelfLoops(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new Sr(`Graph.directedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:r.inDegree+r.outDegree-r.directedLoops*2}undirectedDegreeWithoutSelfLoops(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new Sr(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:r.undirectedDegree-r.undirectedLoops*2}inboundDegreeWithoutSelfLoops(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new Sr(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let n=0,o=0;return this.type!=="directed"&&(n+=r.undirectedDegree,o+=r.undirectedLoops*2),this.type!=="undirected"&&(n+=r.inDegree,o+=r.directedLoops),n-o}outboundDegreeWithoutSelfLoops(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new Sr(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let n=0,o=0;return this.type!=="directed"&&(n+=r.undirectedDegree,o+=r.undirectedLoops*2),this.type!=="undirected"&&(n+=r.outDegree,o+=r.directedLoops),n-o}degreeWithoutSelfLoops(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new Sr(`Graph.degreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let n=0,o=0;return this.type!=="directed"&&(n+=r.undirectedDegree,o+=r.undirectedLoops*2),this.type!=="undirected"&&(n+=r.inDegree+r.outDegree,o+=r.directedLoops*2),n-o}source(t){t=""+t;const r=this._edges.get(t);if(!r)throw new Sr(`Graph.source: could not find the "${t}" edge in the graph.`);return r.source.key}target(t){t=""+t;const r=this._edges.get(t);if(!r)throw new Sr(`Graph.target: could not find the "${t}" edge in the graph.`);return r.target.key}extremities(t){t=""+t;const r=this._edges.get(t);if(!r)throw new Sr(`Graph.extremities: could not find the "${t}" edge in the graph.`);return[r.source.key,r.target.key]}opposite(t,r){t=""+t,r=""+r;const n=this._edges.get(r);if(!n)throw new Sr(`Graph.opposite: could not find the "${r}" edge in the graph.`);const o=n.source.key,l=n.target.key;if(t===o)return l;if(t===l)return o;throw new Sr(`Graph.opposite: the "${t}" node is not attached to the "${r}" edge (${o}, ${l}).`)}hasExtremity(t,r){t=""+t,r=""+r;const n=this._edges.get(t);if(!n)throw new Sr(`Graph.hasExtremity: could not find the "${t}" edge in the graph.`);return n.source.key===r||n.target.key===r}isUndirected(t){t=""+t;const r=this._edges.get(t);if(!r)throw new Sr(`Graph.isUndirected: could not find the "${t}" edge in the graph.`);return r.undirected}isDirected(t){t=""+t;const r=this._edges.get(t);if(!r)throw new Sr(`Graph.isDirected: could not find the "${t}" edge in the graph.`);return!r.undirected}isSelfLoop(t){t=""+t;const r=this._edges.get(t);if(!r)throw new Sr(`Graph.isSelfLoop: could not find the "${t}" edge in the graph.`);return r.source===r.target}addNode(t,r){return Uj(this,t,r).key}mergeNode(t,r){if(r&&!Rl(r))throw new Fr(`Graph.mergeNode: invalid attributes. Expecting an object but got "${r}"`);t=""+t,r=r||{};let n=this._nodes.get(t);return n?(r&&($s(n.attributes,r),this.emit("nodeAttributesUpdated",{type:"merge",key:t,attributes:n.attributes,data:r})),[t,!1]):(n=new this.NodeDataClass(t,r),this._nodes.set(t,n),this.emit("nodeAdded",{key:t,attributes:r}),[t,!0])}updateNode(t,r){if(r&&typeof r!="function")throw new Fr(`Graph.updateNode: invalid updater function. Expecting a function but got "${r}"`);t=""+t;let n=this._nodes.get(t);if(n){if(r){const l=n.attributes;n.attributes=r(l),this.emit("nodeAttributesUpdated",{type:"replace",key:t,attributes:n.attributes})}return[t,!1]}const o=r?r({}):{};return n=new this.NodeDataClass(t,o),this._nodes.set(t,n),this.emit("nodeAdded",{key:t,attributes:o}),[t,!0]}dropNode(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new Sr(`Graph.dropNode: could not find the "${t}" node in the graph.`);let n;if(this.type!=="undirected"){for(const o in r.out){n=r.out[o];do Qy(this,n),n=n.next;while(n)}for(const o in r.in){n=r.in[o];do Qy(this,n),n=n.next;while(n)}}if(this.type!=="directed")for(const o in r.undirected){n=r.undirected[o];do Qy(this,n),n=n.next;while(n)}this._nodes.delete(t),this.emit("nodeDropped",{key:t,attributes:r.attributes})}dropEdge(t){let r;if(arguments.length>1){const n=""+arguments[0],o=""+arguments[1];if(r=Md(this,n,o,this.type),!r)throw new Sr(`Graph.dropEdge: could not find the "${n}" -> "${o}" edge in the graph.`)}else if(t=""+t,r=this._edges.get(t),!r)throw new Sr(`Graph.dropEdge: could not find the "${t}" edge in the graph.`);return Qy(this,r),this}dropDirectedEdge(t,r){if(arguments.length<2)throw new Tn("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Tn("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");t=""+t,r=""+r;const n=Md(this,t,r,"directed");if(!n)throw new Sr(`Graph.dropDirectedEdge: could not find a "${t}" -> "${r}" edge in the graph.`);return Qy(this,n),this}dropUndirectedEdge(t,r){if(arguments.length<2)throw new Tn("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Tn("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const n=Md(this,t,r,"undirected");if(!n)throw new Sr(`Graph.dropUndirectedEdge: could not find a "${t}" -> "${r}" edge in the graph.`);return Qy(this,n),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const t=this._nodes.values();let r;for(;r=t.next(),r.done!==!0;)r.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(t){return this._attributes[t]}getAttributes(){return this._attributes}hasAttribute(t){return this._attributes.hasOwnProperty(t)}setAttribute(t,r){return this._attributes[t]=r,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}updateAttribute(t,r){if(typeof r!="function")throw new Fr("Graph.updateAttribute: updater should be a function.");const n=this._attributes[t];return this._attributes[t]=r(n),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}removeAttribute(t){return delete this._attributes[t],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:t}),this}replaceAttributes(t){if(!Rl(t))throw new Fr("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=t,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(t){if(!Rl(t))throw new Fr("Graph.mergeAttributes: provided attributes are not a plain object.");return $s(this._attributes,t),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:t}),this}updateAttributes(t){if(typeof t!="function")throw new Fr("Graph.updateAttributes: provided updater is not a function.");return this._attributes=t(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(t,r){if(typeof t!="function")throw new Fr("Graph.updateEachNodeAttributes: expecting an updater function.");if(r&&!DA(r))throw new Fr("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const n=this._nodes.values();let o,l;for(;o=n.next(),o.done!==!0;)l=o.value,l.attributes=t(l.key,l.attributes);this.emit("eachNodeAttributesUpdated",{hints:r||null})}updateEachEdgeAttributes(t,r){if(typeof t!="function")throw new Fr("Graph.updateEachEdgeAttributes: expecting an updater function.");if(r&&!DA(r))throw new Fr("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const n=this._edges.values();let o,l,h,u;for(;o=n.next(),o.done!==!0;)l=o.value,h=l.source,u=l.target,l.attributes=t(l.key,l.attributes,h.key,u.key,h.attributes,u.attributes,l.undirected);this.emit("eachEdgeAttributesUpdated",{hints:r||null})}forEachAdjacencyEntry(t){if(typeof t!="function")throw new Fr("Graph.forEachAdjacencyEntry: expecting a callback.");Rx(!1,!1,!1,this,t)}forEachAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new Fr("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Rx(!1,!1,!0,this,t)}forEachAssymetricAdjacencyEntry(t){if(typeof t!="function")throw new Fr("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Rx(!1,!0,!1,this,t)}forEachAssymetricAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new Fr("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Rx(!1,!0,!0,this,t)}nodes(){return Array.from(this._nodes.keys())}forEachNode(t){if(typeof t!="function")throw new Fr("Graph.forEachNode: expecting a callback.");const r=this._nodes.values();let n,o;for(;n=r.next(),n.done!==!0;)o=n.value,t(o.key,o.attributes)}findNode(t){if(typeof t!="function")throw new Fr("Graph.findNode: expecting a callback.");const r=this._nodes.values();let n,o;for(;n=r.next(),n.done!==!0;)if(o=n.value,t(o.key,o.attributes))return o.key}mapNodes(t){if(typeof t!="function")throw new Fr("Graph.mapNode: expecting a callback.");const r=this._nodes.values();let n,o;const l=new Array(this.order);let h=0;for(;n=r.next(),n.done!==!0;)o=n.value,l[h++]=t(o.key,o.attributes);return l}someNode(t){if(typeof t!="function")throw new Fr("Graph.someNode: expecting a callback.");const r=this._nodes.values();let n,o;for(;n=r.next(),n.done!==!0;)if(o=n.value,t(o.key,o.attributes))return!0;return!1}everyNode(t){if(typeof t!="function")throw new Fr("Graph.everyNode: expecting a callback.");const r=this._nodes.values();let n,o;for(;n=r.next(),n.done!==!0;)if(o=n.value,!t(o.key,o.attributes))return!1;return!0}filterNodes(t){if(typeof t!="function")throw new Fr("Graph.filterNodes: expecting a callback.");const r=this._nodes.values();let n,o;const l=[];for(;n=r.next(),n.done!==!0;)o=n.value,t(o.key,o.attributes)&&l.push(o.key);return l}reduceNodes(t,r){if(typeof t!="function")throw new Fr("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new Fr("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let n=r;const o=this._nodes.values();let l,h;for(;l=o.next(),l.done!==!0;)h=l.value,n=t(n,h.key,h.attributes);return n}nodeEntries(){const t=this._nodes.values();return{[Symbol.iterator](){return this},next(){const r=t.next();if(r.done)return r;const n=r.value;return{value:{node:n.key,attributes:n.attributes},done:!1}}}}export(){const t=new Array(this._nodes.size);let r=0;this._nodes.forEach((o,l)=>{t[r++]=Oj(l,o)});const n=new Array(this._edges.size);return r=0,this._edges.forEach((o,l)=>{n[r++]=jj(this.type,l,o)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:t,edges:n}}import(t,r=!1){if(t instanceof Pw)return t.forEachNode((v,x)=>{r?this.mergeNode(v,x):this.addNode(v,x)}),t.forEachEdge((v,x,A,C,P,O,U)=>{r?U?this.mergeUndirectedEdgeWithKey(v,A,C,x):this.mergeDirectedEdgeWithKey(v,A,C,x):U?this.addUndirectedEdgeWithKey(v,A,C,x):this.addDirectedEdgeWithKey(v,A,C,x)}),this;if(!Rl(t))throw new Fr("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(t.attributes){if(!Rl(t.attributes))throw new Fr("Graph.import: invalid attributes. Expecting a plain object.");r?this.mergeAttributes(t.attributes):this.replaceAttributes(t.attributes)}let n,o,l,h,u;if(t.nodes){if(l=t.nodes,!Array.isArray(l))throw new Fr("Graph.import: invalid nodes. Expecting an array.");for(n=0,o=l.length;n<o;n++){h=l[n],Rj(h);const{key:v,attributes:x}=h;r?this.mergeNode(v,x):this.addNode(v,x)}}if(t.edges){let v=!1;if(this.type==="undirected"&&(v=!0),l=t.edges,!Array.isArray(l))throw new Fr("Graph.import: invalid edges. Expecting an array.");for(n=0,o=l.length;n<o;n++){u=l[n],Nj(u);const{source:x,target:A,attributes:C,undirected:P=v}=u;let O;"key"in u?(O=r?P?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:P?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,O.call(this,u.key,x,A,C)):(O=r?P?this.mergeUndirectedEdge:this.mergeDirectedEdge:P?this.addUndirectedEdge:this.addDirectedEdge,O.call(this,x,A,C))}}return this}nullCopy(t){const r=new Pw($s({},this._options,t));return r.replaceAttributes($s({},this.getAttributes())),r}emptyCopy(t){const r=this.nullCopy(t);return this._nodes.forEach((n,o)=>{const l=$s({},n.attributes);n=new r.NodeDataClass(o,l),r._nodes.set(o,n)}),r}copy(t){if(t=t||{},typeof t.type=="string"&&t.type!==this.type&&t.type!=="mixed")throw new Tn(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${t.type}" because this would mean losing information about the current graph.`);if(typeof t.multi=="boolean"&&t.multi!==this.multi&&t.multi!==!0)throw new Tn("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof t.allowSelfLoops=="boolean"&&t.allowSelfLoops!==this.allowSelfLoops&&t.allowSelfLoops!==!0)throw new Tn("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const r=this.emptyCopy(t),n=this._edges.values();let o,l;for(;o=n.next(),o.done!==!0;)l=o.value,O6(r,"copy",!1,l.undirected,l.key,l.source.key,l.target.key,$s({},l.attributes));return r}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const t={};this._nodes.forEach((l,h)=>{t[h]=l.attributes});const r={},n={};this._edges.forEach((l,h)=>{const u=l.undirected?"--":"->";let v="",x=l.source.key,A=l.target.key,C;l.undirected&&x>A&&(C=x,x=A,A=C);const P=`(${x})${u}(${A})`;h.startsWith("geid_")?this.multi&&(typeof n[P]>"u"?n[P]=0:n[P]++,v+=`${n[P]}. `):v+=`[${h}]: `,v+=P,r[v]=l.attributes});const o={};for(const l in this)this.hasOwnProperty(l)&&!MA.has(l)&&typeof this[l]!="function"&&typeof l!="symbol"&&(o[l]=this[l]);return o.attributes=this._attributes,o.nodes=t,o.edges=r,Sd(o,"constructor",this.constructor),o}};typeof Symbol<"u"&&(oo.prototype[Symbol.for("nodejs.util.inspect.custom")]=oo.prototype.inspect);$j.forEach(e=>{["add","merge","update"].forEach(t=>{const r=e.name(t),n=t==="add"?O6:Vj;e.generateKey?oo.prototype[r]=function(o,l,h){return n(this,r,!0,(e.type||this.type)==="undirected",null,o,l,h,t==="update")}:oo.prototype[r]=function(o,l,h,u){return n(this,r,!1,(e.type||this.type)==="undirected",o,l,h,u,t==="update")}})});QO(oo);cj(oo);kj(oo);Ij(oo);let j6=class extends oo{constructor(t){const r=$s({type:"directed"},t);if("multi"in r&&r.multi!==!1)throw new Fr("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(r.type!=="directed")throw new Fr('DirectedGraph.from: inconsistent "'+r.type+'" type in given options!');super(r)}},R6=class extends oo{constructor(t){const r=$s({type:"undirected"},t);if("multi"in r&&r.multi!==!1)throw new Fr("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(r.type!=="undirected")throw new Fr('UndirectedGraph.from: inconsistent "'+r.type+'" type in given options!');super(r)}},N6=class extends oo{constructor(t){const r=$s({multi:!0},t);if("multi"in r&&r.multi!==!0)throw new Fr("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(r)}},B6=class extends oo{constructor(t){const r=$s({type:"directed",multi:!0},t);if("multi"in r&&r.multi!==!0)throw new Fr("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(r.type!=="directed")throw new Fr('MultiDirectedGraph.from: inconsistent "'+r.type+'" type in given options!');super(r)}},F6=class extends oo{constructor(t){const r=$s({type:"undirected",multi:!0},t);if("multi"in r&&r.multi!==!0)throw new Fr("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(r.type!=="undirected")throw new Fr('MultiUndirectedGraph.from: inconsistent "'+r.type+'" type in given options!');super(r)}};function z0(e){e.from=function(t,r){const n=$s({},t.options,r),o=new e(n);return o.import(t),o}}z0(oo);z0(j6);z0(R6);z0(N6);z0(B6);z0(F6);oo.Graph=oo;oo.DirectedGraph=j6;oo.UndirectedGraph=R6;oo.MultiGraph=N6;oo.MultiDirectedGraph=B6;oo.MultiUndirectedGraph=F6;oo.InvalidArgumentsGraphError=Fr;oo.NotFoundGraphError=Sr;oo.UsageGraphError=Tn;function qj(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function kv(e){var t=qj(e,"string");return typeof t=="symbol"?t:t+""}function ou(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kv(n.key),n)}}function su(e,t,r){return t&&PA(e.prototype,t),r&&PA(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function p0(e){return p0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},p0(e)}function $6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($6=function(){return!!e})()}function Wj(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hj(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wj(e)}function Nd(e,t,r){return t=p0(t),Hj(e,$6()?Reflect.construct(t,r||[],p0(e).constructor):t.apply(e,r))}function Lw(e,t){return Lw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Lw(e,t)}function Bd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lw(e,t)}function Zj(e){if(Array.isArray(e))return e}function Kj(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,l,h,u=[],v=!0,x=!1;try{if(l=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;v=!1}else for(;!(v=(n=l.call(r)).done)&&(u.push(n.value),u.length!==t);v=!0);}catch(A){x=!0,o=A}finally{try{if(!v&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(x)throw o}}return u}}function Iw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function G6(e,t){if(e){if(typeof e=="string")return Iw(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Iw(e,t):void 0}}function Xj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g0(e,t){return Zj(e)||Kj(e,t)||G6(e,t)||Xj()}var Db={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"},U6=new Int8Array(4),Mb=new Int32Array(U6.buffer,0,1),Yj=new Float32Array(U6.buffer,0,1),Jj=/^\s*rgba?\s*\(/,Qj=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function eR(e){var t=0,r=0,n=0,o=1;if(e[0]==="#")e.length===4?(t=parseInt(e.charAt(1)+e.charAt(1),16),r=parseInt(e.charAt(2)+e.charAt(2),16),n=parseInt(e.charAt(3)+e.charAt(3),16)):(t=parseInt(e.charAt(1)+e.charAt(2),16),r=parseInt(e.charAt(3)+e.charAt(4),16),n=parseInt(e.charAt(5)+e.charAt(6),16)),e.length===9&&(o=parseInt(e.charAt(7)+e.charAt(8),16)/255);else if(Jj.test(e)){var l=e.match(Qj);l&&(t=+l[1],r=+l[2],n=+l[3],l[4]&&(o=+l[4]))}return{r:t,g:r,b:n,a:o}}var c0={};for(var Nx in Db)c0[Nx]=tx(Db[Nx]),c0[Db[Nx]]=c0[Nx];function V6(e,t,r,n,o){return Mb[0]=n<<24|r<<16|t<<8|e,Mb[0]=Mb[0]&4278190079,Yj[0]}function tx(e){if(e=e.toLowerCase(),typeof c0[e]<"u")return c0[e];var t=eR(e),r=t.r,n=t.g,o=t.b,l=t.a;l=l*255|0;var h=V6(r,n,o,l);return c0[e]=h,h}var zb={};function q6(e){if(typeof zb[e]<"u")return zb[e];var t=(e&16711680)>>>16,r=(e&65280)>>>8,n=e&255,o=255,l=V6(t,r,n,o);return zb[e]=l,l}function LA(e,t,r,n){return r+(t<<8)+(e<<16)}function IA(e,t,r,n,o,l){var h=Math.floor(r/l*o),u=Math.floor(e.drawingBufferHeight/l-n/l*o),v=new Uint8Array(4);e.bindFramebuffer(e.FRAMEBUFFER,t),e.readPixels(h,u,1,1,e.RGBA,e.UNSIGNED_BYTE,v);var x=g0(v,4),A=x[0],C=x[1],P=x[2],O=x[3];return[A,C,P,O]}function cr(e,t,r){return(t=kv(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function en(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OA(Object(r),!0).forEach(function(n){cr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tR(e,t){for(;!{}.hasOwnProperty.call(e,t)&&(e=p0(e))!==null;);return e}function Ow(){return Ow=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=tR(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Ow.apply(null,arguments)}function W6(e,t,r,n){var o=Ow(p0(e.prototype),t,r);return typeof o=="function"?function(l){return o.apply(r,l)}:o}function rR(e){return e.normalized?1:e.size}function Pb(e){var t=0;return e.forEach(function(r){return t+=rR(r)}),t}function H6(e,t,r){var n=e==="VERTEX"?t.VERTEX_SHADER:t.FRAGMENT_SHADER,o=t.createShader(n);if(o===null)throw new Error("loadShader: error while creating the shader");t.shaderSource(o,r),t.compileShader(o);var l=t.getShaderParameter(o,t.COMPILE_STATUS);if(!l){var h=t.getShaderInfoLog(o);throw t.deleteShader(o),new Error(`loadShader: error while compiling the shader:
`.concat(h,`
`).concat(r))}return o}function nR(e,t){return H6("VERTEX",e,t)}function iR(e,t){return H6("FRAGMENT",e,t)}function aR(e,t){var r=e.createProgram();if(r===null)throw new Error("loadProgram: error while creating the program.");var n,o;for(n=0,o=t.length;n<o;n++)e.attachShader(r,t[n]);e.linkProgram(r);var l=e.getProgramParameter(r,e.LINK_STATUS);if(!l)throw e.deleteProgram(r),new Error("loadProgram: error while linking the program.");return r}function jA(e){var t=e.gl,r=e.buffer,n=e.program,o=e.vertexShader,l=e.fragmentShader;t.deleteShader(o),t.deleteShader(l),t.deleteProgram(n),t.deleteBuffer(r)}var RA=`#define PICKING_MODE
`,oR=cr(cr(cr(cr(cr(cr(cr(cr({},WebGL2RenderingContext.BOOL,1),WebGL2RenderingContext.BYTE,1),WebGL2RenderingContext.UNSIGNED_BYTE,1),WebGL2RenderingContext.SHORT,2),WebGL2RenderingContext.UNSIGNED_SHORT,2),WebGL2RenderingContext.INT,4),WebGL2RenderingContext.UNSIGNED_INT,4),WebGL2RenderingContext.FLOAT,4),Z6=(function(){function e(t,r,n){ou(this,e),cr(this,"array",new Float32Array),cr(this,"constantArray",new Float32Array),cr(this,"capacity",0),cr(this,"verticesCount",0);var o=this.getDefinition();if(this.VERTICES=o.VERTICES,this.VERTEX_SHADER_SOURCE=o.VERTEX_SHADER_SOURCE,this.FRAGMENT_SHADER_SOURCE=o.FRAGMENT_SHADER_SOURCE,this.UNIFORMS=o.UNIFORMS,this.ATTRIBUTES=o.ATTRIBUTES,this.METHOD=o.METHOD,this.CONSTANT_ATTRIBUTES="CONSTANT_ATTRIBUTES"in o?o.CONSTANT_ATTRIBUTES:[],this.CONSTANT_DATA="CONSTANT_DATA"in o?o.CONSTANT_DATA:[],this.isInstanced="CONSTANT_ATTRIBUTES"in o,this.ATTRIBUTES_ITEMS_COUNT=Pb(this.ATTRIBUTES),this.STRIDE=this.VERTICES*this.ATTRIBUTES_ITEMS_COUNT,this.renderer=n,this.normalProgram=this.getProgramInfo("normal",t,o.VERTEX_SHADER_SOURCE,o.FRAGMENT_SHADER_SOURCE,null),this.pickProgram=r?this.getProgramInfo("pick",t,RA+o.VERTEX_SHADER_SOURCE,RA+o.FRAGMENT_SHADER_SOURCE,r):null,this.isInstanced){var l=Pb(this.CONSTANT_ATTRIBUTES);if(this.CONSTANT_DATA.length!==this.VERTICES)throw new Error("Program: error while getting constant data (expected ".concat(this.VERTICES," items, received ").concat(this.CONSTANT_DATA.length," instead)"));this.constantArray=new Float32Array(this.CONSTANT_DATA.length*l);for(var h=0;h<this.CONSTANT_DATA.length;h++){var u=this.CONSTANT_DATA[h];if(u.length!==l)throw new Error("Program: error while getting constant data (one vector has ".concat(u.length," items instead of ").concat(l,")"));for(var v=0;v<u.length;v++)this.constantArray[h*l+v]=u[v]}this.STRIDE=this.ATTRIBUTES_ITEMS_COUNT}}return su(e,[{key:"kill",value:function(){jA(this.normalProgram),this.pickProgram&&(jA(this.pickProgram),this.pickProgram=null)}},{key:"getProgramInfo",value:function(r,n,o,l,h){var u=this.getDefinition(),v=n.createBuffer();if(v===null)throw new Error("Program: error while creating the WebGL buffer.");var x=nR(n,o),A=iR(n,l),C=aR(n,[x,A]),P={};u.UNIFORMS.forEach(function(W){var G=n.getUniformLocation(C,W);G&&(P[W]=G)});var O={};u.ATTRIBUTES.forEach(function(W){O[W.name]=n.getAttribLocation(C,W.name)});var U;if("CONSTANT_ATTRIBUTES"in u&&(u.CONSTANT_ATTRIBUTES.forEach(function(W){O[W.name]=n.getAttribLocation(C,W.name)}),U=n.createBuffer(),U===null))throw new Error("Program: error while creating the WebGL constant buffer.");return{name:r,program:C,gl:n,frameBuffer:h,buffer:v,constantBuffer:U||{},uniformLocations:P,attributeLocations:O,isPicking:r==="pick",vertexShader:x,fragmentShader:A}}},{key:"bindProgram",value:function(r){var n=this,o=0,l=r.gl,h=r.buffer;this.isInstanced?(l.bindBuffer(l.ARRAY_BUFFER,r.constantBuffer),o=0,this.CONSTANT_ATTRIBUTES.forEach(function(u){return o+=n.bindAttribute(u,r,o,!1)}),l.bufferData(l.ARRAY_BUFFER,this.constantArray,l.STATIC_DRAW),l.bindBuffer(l.ARRAY_BUFFER,r.buffer),o=0,this.ATTRIBUTES.forEach(function(u){return o+=n.bindAttribute(u,r,o,!0)}),l.bufferData(l.ARRAY_BUFFER,this.array,l.DYNAMIC_DRAW)):(l.bindBuffer(l.ARRAY_BUFFER,h),o=0,this.ATTRIBUTES.forEach(function(u){return o+=n.bindAttribute(u,r,o)}),l.bufferData(l.ARRAY_BUFFER,this.array,l.DYNAMIC_DRAW)),l.bindBuffer(l.ARRAY_BUFFER,null)}},{key:"unbindProgram",value:function(r){var n=this;this.isInstanced?(this.CONSTANT_ATTRIBUTES.forEach(function(o){return n.unbindAttribute(o,r,!1)}),this.ATTRIBUTES.forEach(function(o){return n.unbindAttribute(o,r,!0)})):this.ATTRIBUTES.forEach(function(o){return n.unbindAttribute(o,r)})}},{key:"bindAttribute",value:function(r,n,o,l){var h=oR[r.type];if(typeof h!="number")throw new Error('Program.bind: yet unsupported attribute type "'.concat(r.type,'"'));var u=n.attributeLocations[r.name],v=n.gl;if(u!==-1){v.enableVertexAttribArray(u);var x=this.isInstanced?(l?this.ATTRIBUTES_ITEMS_COUNT:Pb(this.CONSTANT_ATTRIBUTES))*Float32Array.BYTES_PER_ELEMENT:this.ATTRIBUTES_ITEMS_COUNT*Float32Array.BYTES_PER_ELEMENT;if(v.vertexAttribPointer(u,r.size,r.type,r.normalized||!1,x,o),this.isInstanced&&l)if(v instanceof WebGL2RenderingContext)v.vertexAttribDivisor(u,1);else{var A=v.getExtension("ANGLE_instanced_arrays");A&&A.vertexAttribDivisorANGLE(u,1)}}return r.size*h}},{key:"unbindAttribute",value:function(r,n,o){var l=n.attributeLocations[r.name],h=n.gl;if(l!==-1&&(h.disableVertexAttribArray(l),this.isInstanced&&o))if(h instanceof WebGL2RenderingContext)h.vertexAttribDivisor(l,0);else{var u=h.getExtension("ANGLE_instanced_arrays");u&&u.vertexAttribDivisorANGLE(l,0)}}},{key:"reallocate",value:function(r){r!==this.capacity&&(this.capacity=r,this.verticesCount=this.VERTICES*r,this.array=new Float32Array(this.isInstanced?this.capacity*this.ATTRIBUTES_ITEMS_COUNT:this.verticesCount*this.ATTRIBUTES_ITEMS_COUNT))}},{key:"hasNothingToRender",value:function(){return this.verticesCount===0}},{key:"renderProgram",value:function(r,n){var o=n.gl,l=n.program;o.enable(o.BLEND),o.useProgram(l),this.setUniforms(r,n),this.drawWebGL(this.METHOD,n)}},{key:"render",value:function(r){this.hasNothingToRender()||(this.pickProgram&&(this.pickProgram.gl.viewport(0,0,r.width*r.pixelRatio/r.downSizingRatio,r.height*r.pixelRatio/r.downSizingRatio),this.bindProgram(this.pickProgram),this.renderProgram(en(en({},r),{},{pixelRatio:r.pixelRatio/r.downSizingRatio}),this.pickProgram),this.unbindProgram(this.pickProgram)),this.normalProgram.gl.viewport(0,0,r.width*r.pixelRatio,r.height*r.pixelRatio),this.bindProgram(this.normalProgram),this.renderProgram(r,this.normalProgram),this.unbindProgram(this.normalProgram))}},{key:"drawWebGL",value:function(r,n){var o=n.gl,l=n.frameBuffer;if(o.bindFramebuffer(o.FRAMEBUFFER,l),!this.isInstanced)o.drawArrays(r,0,this.verticesCount);else if(o instanceof WebGL2RenderingContext)o.drawArraysInstanced(r,0,this.VERTICES,this.capacity);else{var h=o.getExtension("ANGLE_instanced_arrays");h&&h.drawArraysInstancedANGLE(r,0,this.VERTICES,this.capacity)}}}])})(),sR=(function(e){function t(){return ou(this,t),Nd(this,t,arguments)}return Bd(t,e),su(t,[{key:"kill",value:function(){W6(t,"kill",this)([])}},{key:"process",value:function(n,o,l){var h=o*this.STRIDE;if(l.hidden){for(var u=h+this.STRIDE;h<u;h++)this.array[h]=0;return}return this.processVisibleItem(q6(n),h,l)}}])})(Z6),sE=(function(e){function t(){var r;ou(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return r=Nd(this,t,[].concat(o)),cr(r,"drawLabel",void 0),r}return Bd(t,e),su(t,[{key:"kill",value:function(){W6(t,"kill",this)([])}},{key:"process",value:function(n,o,l,h,u){var v=o*this.STRIDE;if(u.hidden||l.hidden||h.hidden){for(var x=v+this.STRIDE;v<x;v++)this.array[v]=0;return}return this.processVisibleItem(q6(n),v,l,h,u)}}])})(Z6);function lR(e,t){return(function(){function r(n,o,l){ou(this,r),cr(this,"drawLabel",t),this.programs=e.map(function(h){return new h(n,o,l)})}return su(r,[{key:"reallocate",value:function(o){this.programs.forEach(function(l){return l.reallocate(o)})}},{key:"process",value:function(o,l,h,u,v){this.programs.forEach(function(x){return x.process(o,l,h,u,v)})}},{key:"render",value:function(o){this.programs.forEach(function(l){return l.render(o)})}},{key:"kill",value:function(){this.programs.forEach(function(o){return o.kill()})}}])})()}function uR(e,t,r,n,o){var l=o.edgeLabelSize,h=o.edgeLabelFont,u=o.edgeLabelWeight,v=o.edgeLabelColor.attribute?t[o.edgeLabelColor.attribute]||o.edgeLabelColor.color||"#000":o.edgeLabelColor.color,x=t.label;if(x){e.fillStyle=v,e.font="".concat(u," ").concat(l,"px ").concat(h);var A=r.size,C=n.size,P=r.x,O=r.y,U=n.x,W=n.y,G=(P+U)/2,X=(O+W)/2,ae=U-P,ne=W-O,ue=Math.sqrt(ae*ae+ne*ne);if(!(ue<A+C)){P+=ae*A/ue,O+=ne*A/ue,U-=ae*C/ue,W-=ne*C/ue,G=(P+U)/2,X=(O+W)/2,ae=U-P,ne=W-O,ue=Math.sqrt(ae*ae+ne*ne);var Q=e.measureText(x).width;if(Q>ue){var de="";for(x=x+de,Q=e.measureText(x).width;Q>ue&&x.length>1;)x=x.slice(0,-2)+de,Q=e.measureText(x).width;if(x.length<4)return}var he;ae>0?ne>0?he=Math.acos(ae/ue):he=Math.asin(ne/ue):ne>0?he=Math.acos(ae/ue)+Math.PI:he=Math.asin(ae/ue)+Math.PI/2,e.save(),e.translate(G,X),e.rotate(he),e.fillText(x,-Q/2,t.size/2+l),e.restore()}}}function K6(e,t,r){if(t.label){var n=r.labelSize,o=r.labelFont,l=r.labelWeight,h=r.labelColor.attribute?t[r.labelColor.attribute]||r.labelColor.color||"#000":r.labelColor.color;e.fillStyle=h,e.font="".concat(l," ").concat(n,"px ").concat(o),e.fillText(t.label,t.x+t.size+3,t.y+n/3)}}function cR(e,t,r){var n=r.labelSize,o=r.labelFont,l=r.labelWeight;e.font="".concat(l," ").concat(n,"px ").concat(o),e.fillStyle="#FFF",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=8,e.shadowColor="#000";var h=2;if(typeof t.label=="string"){var u=e.measureText(t.label).width,v=Math.round(u+5),x=Math.round(n+2*h),A=Math.max(t.size,n/2)+h,C=Math.asin(x/2/A),P=Math.sqrt(Math.abs(Math.pow(A,2)-Math.pow(x/2,2)));e.beginPath(),e.moveTo(t.x+P,t.y+x/2),e.lineTo(t.x+A+v,t.y+x/2),e.lineTo(t.x+A+v,t.y-x/2),e.lineTo(t.x+P,t.y-x/2),e.arc(t.x,t.y,A,C,-C),e.closePath(),e.fill()}else e.beginPath(),e.arc(t.x,t.y,t.size+h,0,Math.PI*2),e.closePath(),e.fill();e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,K6(e,t,r)}var dR=`
precision highp float;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;

uniform float u_correctionRatio;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float border = u_correctionRatio * 2.0;
  float dist = length(v_diffVector) - v_radius + border;

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  if (dist > border)
    gl_FragColor = transparent;
  else
    gl_FragColor = v_color;

  #else
  float t = 0.0;
  if (dist > border)
    t = 1.0;
  else if (dist > 0.0)
    t = dist / border;

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,hR=dR,fR=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_position;
attribute float a_size;
attribute float a_angle;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;
varying float v_border;

const float bias = 255.0 / 254.0;

void main() {
  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;
  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));
  vec2 position = a_position + diffVector;
  gl_Position = vec4(
    (u_matrix * vec3(position, 1)).xy,
    0,
    1
  );

  v_diffVector = diffVector;
  v_radius = size / 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,pR=fR,X6=WebGLRenderingContext,NA=X6.UNSIGNED_BYTE,Lb=X6.FLOAT,gR=["u_sizeRatio","u_correctionRatio","u_matrix"],w_=(function(e){function t(){return ou(this,t),Nd(this,t,arguments)}return Bd(t,e),su(t,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:pR,FRAGMENT_SHADER_SOURCE:hR,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:gR,ATTRIBUTES:[{name:"a_position",size:2,type:Lb},{name:"a_size",size:1,type:Lb},{name:"a_color",size:4,type:NA,normalized:!0},{name:"a_id",size:4,type:NA,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:Lb}],CONSTANT_DATA:[[t.ANGLE_1],[t.ANGLE_2],[t.ANGLE_3]]}}},{key:"processVisibleItem",value:function(n,o,l){var h=this.array,u=tx(l.color);h[o++]=l.x,h[o++]=l.y,h[o++]=l.size,h[o++]=u,h[o++]=n}},{key:"setUniforms",value:function(n,o){var l=o.gl,h=o.uniformLocations,u=h.u_sizeRatio,v=h.u_correctionRatio,x=h.u_matrix;l.uniform1f(v,n.correctionRatio),l.uniform1f(u,n.sizeRatio),l.uniformMatrix3fv(x,!1,n.matrix)}}])})(sR);cr(w_,"ANGLE_1",0);cr(w_,"ANGLE_2",2*Math.PI/3);cr(w_,"ANGLE_3",4*Math.PI/3);var mR=`
precision mediump float;

varying vec4 v_color;

void main(void) {
  gl_FragColor = v_color;
}
`,yR=mR,vR=`
attribute vec2 a_position;
attribute vec2 a_normal;
attribute float a_radius;
attribute vec3 a_barycentric;

#ifdef PICKING_MODE
attribute vec4 a_id;
#else
attribute vec4 a_color;
#endif

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_widenessToThicknessRatio;

varying vec4 v_color;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float normalLength = length(a_normal);
  vec2 unitNormal = a_normal / normalLength;

  // These first computations are taken from edge.vert.glsl and
  // edge.clamped.vert.glsl. Please read it to get better comments on what's
  // happening:
  float pixelsThickness = max(normalLength / u_sizeRatio, minThickness);
  float webGLThickness = pixelsThickness * u_correctionRatio;
  float webGLNodeRadius = a_radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;
  float webGLArrowHeadThickness = webGLThickness * u_widenessToThicknessRatio;

  float da = a_barycentric.x;
  float db = a_barycentric.y;
  float dc = a_barycentric.z;

  vec2 delta = vec2(
      da * (webGLNodeRadius * unitNormal.y)
    + db * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y + webGLArrowHeadThickness * unitNormal.x)
    + dc * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y - webGLArrowHeadThickness * unitNormal.x),

      da * (-webGLNodeRadius * unitNormal.x)
    + db * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x + webGLArrowHeadThickness * unitNormal.y)
    + dc * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x - webGLArrowHeadThickness * unitNormal.y)
  );

  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;

  gl_Position = vec4(position, 0, 1);

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,xR=vR,Y6=WebGLRenderingContext,BA=Y6.UNSIGNED_BYTE,Bx=Y6.FLOAT,_R=["u_matrix","u_sizeRatio","u_correctionRatio","u_minEdgeThickness","u_lengthToThicknessRatio","u_widenessToThicknessRatio"],J6={extremity:"target",lengthToThicknessRatio:2.5,widenessToThicknessRatio:2};function Q6(e){var t=en(en({},J6),{});return(function(r){function n(){return ou(this,n),Nd(this,n,arguments)}return Bd(n,r),su(n,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:xR,FRAGMENT_SHADER_SOURCE:yR,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:_R,ATTRIBUTES:[{name:"a_position",size:2,type:Bx},{name:"a_normal",size:2,type:Bx},{name:"a_radius",size:1,type:Bx},{name:"a_color",size:4,type:BA,normalized:!0},{name:"a_id",size:4,type:BA,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_barycentric",size:3,type:Bx}],CONSTANT_DATA:[[1,0,0],[0,1,0],[0,0,1]]}}},{key:"processVisibleItem",value:function(l,h,u,v,x){if(t.extremity==="source"){var A=[v,u];u=A[0],v=A[1]}var C=x.size||1,P=v.size||1,O=u.x,U=u.y,W=v.x,G=v.y,X=tx(x.color),ae=W-O,ne=G-U,ue=ae*ae+ne*ne,Q=0,de=0;ue&&(ue=1/Math.sqrt(ue),Q=-ne*ue*C,de=ae*ue*C);var he=this.array;he[h++]=W,he[h++]=G,he[h++]=-Q,he[h++]=-de,he[h++]=P,he[h++]=X,he[h++]=l}},{key:"setUniforms",value:function(l,h){var u=h.gl,v=h.uniformLocations,x=v.u_matrix,A=v.u_sizeRatio,C=v.u_correctionRatio,P=v.u_minEdgeThickness,O=v.u_lengthToThicknessRatio,U=v.u_widenessToThicknessRatio;u.uniformMatrix3fv(x,!1,l.matrix),u.uniform1f(A,l.sizeRatio),u.uniform1f(C,l.correctionRatio),u.uniform1f(P,l.minEdgeThickness),u.uniform1f(O,t.lengthToThicknessRatio),u.uniform1f(U,t.widenessToThicknessRatio)}}])})(sE)}Q6();var bR=`
precision mediump float;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  // We only handle antialiasing for normal mode:
  #ifdef PICKING_MODE
  gl_FragColor = v_color;
  #else
  float dist = length(v_normal) * v_thickness;

  float t = smoothstep(
    v_thickness - v_feather,
    v_thickness,
    dist
  );

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,eD=bR,wR=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;
attribute float a_radius;
attribute float a_radiusCoef;

uniform mat3 u_matrix;
uniform float u_zoomRatio;
uniform float u_sizeRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float radius = a_radius * a_radiusCoef;
  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // These first computations are taken from edge.vert.glsl. Please read it to
  // get better comments on what's happening:
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here, we move the point to leave space for the arrow head:
  float direction = sign(radius);
  float webGLNodeRadius = direction * radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;

  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (webGLNodeRadius + webGLArrowHeadLength);

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness + compensationVector, 1)).xy, 0, 1);

  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,SR=wR,tD=WebGLRenderingContext,FA=tD.UNSIGNED_BYTE,Jm=tD.FLOAT,ER=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness","u_lengthToThicknessRatio"],AR={lengthToThicknessRatio:J6.lengthToThicknessRatio};function rD(e){var t=en(en({},AR),{});return(function(r){function n(){return ou(this,n),Nd(this,n,arguments)}return Bd(n,r),su(n,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:SR,FRAGMENT_SHADER_SOURCE:eD,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:ER,ATTRIBUTES:[{name:"a_positionStart",size:2,type:Jm},{name:"a_positionEnd",size:2,type:Jm},{name:"a_normal",size:2,type:Jm},{name:"a_color",size:4,type:FA,normalized:!0},{name:"a_id",size:4,type:FA,normalized:!0},{name:"a_radius",size:1,type:Jm}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:Jm},{name:"a_normalCoef",size:1,type:Jm},{name:"a_radiusCoef",size:1,type:Jm}],CONSTANT_DATA:[[0,1,0],[0,-1,0],[1,1,1],[1,1,1],[0,-1,0],[1,-1,-1]]}}},{key:"processVisibleItem",value:function(l,h,u,v,x){var A=x.size||1,C=u.x,P=u.y,O=v.x,U=v.y,W=tx(x.color),G=O-C,X=U-P,ae=v.size||1,ne=G*G+X*X,ue=0,Q=0;ne&&(ne=1/Math.sqrt(ne),ue=-X*ne*A,Q=G*ne*A);var de=this.array;de[h++]=C,de[h++]=P,de[h++]=O,de[h++]=U,de[h++]=ue,de[h++]=Q,de[h++]=W,de[h++]=l,de[h++]=ae}},{key:"setUniforms",value:function(l,h){var u=h.gl,v=h.uniformLocations,x=v.u_matrix,A=v.u_zoomRatio,C=v.u_feather,P=v.u_pixelRatio,O=v.u_correctionRatio,U=v.u_sizeRatio,W=v.u_minEdgeThickness,G=v.u_lengthToThicknessRatio;u.uniformMatrix3fv(x,!1,l.matrix),u.uniform1f(A,l.zoomRatio),u.uniform1f(U,l.sizeRatio),u.uniform1f(O,l.correctionRatio),u.uniform1f(P,l.pixelRatio),u.uniform1f(C,l.antiAliasingFeather),u.uniform1f(W,l.minEdgeThickness),u.uniform1f(G,t.lengthToThicknessRatio)}}])})(sE)}rD();function kR(e){return lR([rD(),Q6()])}var CR=kR(),TR=CR,DR=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_zoomRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // We require edges to be at least "minThickness" pixels thick *on screen*
  // (so we need to compensate the size ratio):
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);

  // Then, we need to retrieve the normalized thickness of the edge in the WebGL
  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction
  // ratio:
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness, 1)).xy, 0, 1);

  // For the fragment shader though, we need a thickness that takes the "magic"
  // correction ratio into account (as in webGLThickness), but so that the
  // antialiasing effect does not depend on the zoom level. So here's yet
  // another thickness version:
  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,MR=DR,nD=WebGLRenderingContext,$A=nD.UNSIGNED_BYTE,iv=nD.FLOAT,zR=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness"],PR=(function(e){function t(){return ou(this,t),Nd(this,t,arguments)}return Bd(t,e),su(t,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:MR,FRAGMENT_SHADER_SOURCE:eD,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:zR,ATTRIBUTES:[{name:"a_positionStart",size:2,type:iv},{name:"a_positionEnd",size:2,type:iv},{name:"a_normal",size:2,type:iv},{name:"a_color",size:4,type:$A,normalized:!0},{name:"a_id",size:4,type:$A,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:iv},{name:"a_normalCoef",size:1,type:iv}],CONSTANT_DATA:[[0,1],[0,-1],[1,1],[1,1],[0,-1],[1,-1]]}}},{key:"processVisibleItem",value:function(n,o,l,h,u){var v=u.size||1,x=l.x,A=l.y,C=h.x,P=h.y,O=tx(u.color),U=C-x,W=P-A,G=U*U+W*W,X=0,ae=0;G&&(G=1/Math.sqrt(G),X=-W*G*v,ae=U*G*v);var ne=this.array;ne[o++]=x,ne[o++]=A,ne[o++]=C,ne[o++]=P,ne[o++]=X,ne[o++]=ae,ne[o++]=O,ne[o++]=n}},{key:"setUniforms",value:function(n,o){var l=o.gl,h=o.uniformLocations,u=h.u_matrix,v=h.u_zoomRatio,x=h.u_feather,A=h.u_pixelRatio,C=h.u_correctionRatio,P=h.u_sizeRatio,O=h.u_minEdgeThickness;l.uniformMatrix3fv(u,!1,n.matrix),l.uniform1f(v,n.zoomRatio),l.uniform1f(P,n.sizeRatio),l.uniform1f(C,n.correctionRatio),l.uniform1f(A,n.pixelRatio),l.uniform1f(x,n.antiAliasingFeather),l.uniform1f(O,n.minEdgeThickness)}}])})(sE),lE=(function(e){function t(){var r;return ou(this,t),r=Nd(this,t),r.rawEmitter=r,r}return Bd(t,e),su(t)})(rE.EventEmitter),Ib,GA;function iD(){return GA||(GA=1,Ib=function(t){return t!==null&&typeof t=="object"&&typeof t.addUndirectedEdgeWithKey=="function"&&typeof t.dropNode=="function"&&typeof t.multi=="boolean"}),Ib}var LR=iD();const IR=Fl(LR);var OR=function(t){return t},jR=function(t){return t*t},RR=function(t){return t*(2-t)},NR=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},BR=function(t){return t*t*t},FR=function(t){return--t*t*t+1},$R=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},GR={linear:OR,quadraticIn:jR,quadraticOut:RR,quadraticInOut:NR,cubicIn:BR,cubicOut:FR,cubicInOut:$R},UR={easing:"quadraticInOut",duration:150};function bh(){return Float32Array.of(1,0,0,0,1,0,0,0,1)}function Fx(e,t,r){return e[0]=t,e[4]=typeof r=="number"?r:t,e}function UA(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[3]=-r,e[4]=n,e}function VA(e,t,r){return e[6]=t,e[7]=r,e}function Yg(e,t){var r=e[0],n=e[1],o=e[2],l=e[3],h=e[4],u=e[5],v=e[6],x=e[7],A=e[8],C=t[0],P=t[1],O=t[2],U=t[3],W=t[4],G=t[5],X=t[6],ae=t[7],ne=t[8];return e[0]=C*r+P*l+O*v,e[1]=C*n+P*h+O*x,e[2]=C*o+P*u+O*A,e[3]=U*r+W*l+G*v,e[4]=U*n+W*h+G*x,e[5]=U*o+W*u+G*A,e[6]=X*r+ae*l+ne*v,e[7]=X*n+ae*h+ne*x,e[8]=X*o+ae*u+ne*A,e}function jw(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=e[0],o=e[1],l=e[3],h=e[4],u=e[6],v=e[7],x=t.x,A=t.y;return{x:x*n+A*l+u*r,y:x*o+A*h+v*r}}function VR(e,t){var r=e.height/e.width,n=t.height/t.width;return r<1&&n>1||r>1&&n<1?1:Math.min(Math.max(n,1/n),Math.max(1/r,r))}function av(e,t,r,n,o){var l=e.angle,h=e.ratio,u=e.x,v=e.y,x=t.width,A=t.height,C=bh(),P=Math.min(x,A)-2*n,O=VR(t,r);return o?(Yg(C,VA(bh(),u,v)),Yg(C,Fx(bh(),h)),Yg(C,UA(bh(),l)),Yg(C,Fx(bh(),x/P/2/O,A/P/2/O))):(Yg(C,Fx(bh(),2*(P/x)*O,2*(P/A)*O)),Yg(C,UA(bh(),-l)),Yg(C,Fx(bh(),1/h)),Yg(C,VA(bh(),-u,-v))),C}function qR(e,t,r){var n=jw(e,{x:Math.cos(t.angle),y:Math.sin(t.angle)},0),o=n.x,l=n.y;return 1/Math.sqrt(Math.pow(o,2)+Math.pow(l,2))/r.width}function WR(e){if(!e.order)return{x:[0,1],y:[0,1]};var t=1/0,r=-1/0,n=1/0,o=-1/0;return e.forEachNode(function(l,h){var u=h.x,v=h.y;u<t&&(t=u),u>r&&(r=u),v<n&&(n=v),v>o&&(o=v)}),{x:[t,r],y:[n,o]}}function HR(e){if(!IR(e))throw new Error("Sigma: invalid graph instance.");e.forEachNode(function(t,r){if(!Number.isFinite(r.x)||!Number.isFinite(r.y))throw new Error("Sigma: Coordinates of node ".concat(t," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}function ZR(e,t,r){var n=document.createElement(e);if(t)for(var o in t)n.style[o]=t[o];if(r)for(var l in r)n.setAttribute(l,r[l]);return n}function qA(){return typeof window.devicePixelRatio<"u"?window.devicePixelRatio:1}function WA(e,t,r){return r.sort(function(n,o){var l=t(n)||0,h=t(o)||0;return l<h?-1:l>h?1:0})}function HA(e){var t=g0(e.x,2),r=t[0],n=t[1],o=g0(e.y,2),l=o[0],h=o[1],u=Math.max(n-r,h-l),v=(n+r)/2,x=(h+l)/2;(u===0||Math.abs(u)===1/0||isNaN(u))&&(u=1),isNaN(v)&&(v=0),isNaN(x)&&(x=0);var A=function(P){return{x:.5+(P.x-v)/u,y:.5+(P.y-x)/u}};return A.applyTo=function(C){C.x=.5+(C.x-v)/u,C.y=.5+(C.y-x)/u},A.inverse=function(C){return{x:v+u*(C.x-.5),y:x+u*(C.y-.5)}},A.ratio=u,A}function Rw(e){"@babel/helpers - typeof";return Rw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rw(e)}function ZA(e,t){var r=t.size;if(r!==0){var n=e.length;e.length+=r;var o=0;t.forEach(function(l){e[n+o]=l,o++})}}function Ob(e){e=e||{};for(var t=0,r=arguments.length<=1?0:arguments.length-1;t<r;t++){var n=t+1<1||arguments.length<=t+1?void 0:arguments[t+1];n&&Object.assign(e,n)}return e}var uE={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,defaultDrawEdgeLabel:uR,defaultDrawNodeLabel:K6,defaultDrawNodeHover:cR,minEdgeThickness:1.7,antiAliasingFeather:1,dragTimeout:100,draggedEventsTolerance:3,inertiaDuration:200,inertiaRatio:3,zoomDuration:250,zoomingRatio:1.7,doubleClickTimeout:300,doubleClickZoomingRatio:2.2,doubleClickZoomingDuration:200,tapMoveTolerance:10,zoomToSizeRatioFunction:Math.sqrt,itemSizesReference:"screen",autoRescale:!0,autoCenter:!0,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,enableCameraZooming:!0,enableCameraPanning:!0,enableCameraRotation:!0,cameraPanBoundaries:null,allowInvalidContainer:!1,nodeProgramClasses:{},nodeHoverProgramClasses:{},edgeProgramClasses:{}},KR={circle:w_},XR={arrow:TR,line:PR};function jb(e){if(typeof e.labelDensity!="number"||e.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var t=e.minCameraRatio,r=e.maxCameraRatio;if(typeof t=="number"&&typeof r=="number"&&r<t)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")}function YR(e){var t=Ob({},uE,e);return t.nodeProgramClasses=Ob({},KR,t.nodeProgramClasses),t.edgeProgramClasses=Ob({},XR,t.edgeProgramClasses),t}var $x=1.5,KA=(function(e){function t(){var r;return ou(this,t),r=Nd(this,t),cr(r,"x",.5),cr(r,"y",.5),cr(r,"angle",0),cr(r,"ratio",1),cr(r,"minRatio",null),cr(r,"maxRatio",null),cr(r,"enabledZooming",!0),cr(r,"enabledPanning",!0),cr(r,"enabledRotation",!0),cr(r,"clean",null),cr(r,"nextFrame",null),cr(r,"previousState",null),cr(r,"enabled",!0),r.previousState=r.getState(),r}return Bd(t,e),su(t,[{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"getState",value:function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}}},{key:"hasState",value:function(n){return this.x===n.x&&this.y===n.y&&this.ratio===n.ratio&&this.angle===n.angle}},{key:"getPreviousState",value:function(){var n=this.previousState;return n?{x:n.x,y:n.y,angle:n.angle,ratio:n.ratio}:null}},{key:"getBoundedRatio",value:function(n){var o=n;return typeof this.minRatio=="number"&&(o=Math.max(o,this.minRatio)),typeof this.maxRatio=="number"&&(o=Math.min(o,this.maxRatio)),o}},{key:"validateState",value:function(n){var o={};return this.enabledPanning&&typeof n.x=="number"&&(o.x=n.x),this.enabledPanning&&typeof n.y=="number"&&(o.y=n.y),this.enabledZooming&&typeof n.ratio=="number"&&(o.ratio=this.getBoundedRatio(n.ratio)),this.enabledRotation&&typeof n.angle=="number"&&(o.angle=n.angle),this.clean?this.clean(en(en({},this.getState()),o)):o}},{key:"isAnimated",value:function(){return!!this.nextFrame}},{key:"setState",value:function(n){if(!this.enabled)return this;this.previousState=this.getState();var o=this.validateState(n);return typeof o.x=="number"&&(this.x=o.x),typeof o.y=="number"&&(this.y=o.y),typeof o.ratio=="number"&&(this.ratio=o.ratio),typeof o.angle=="number"&&(this.angle=o.angle),this.hasState(this.previousState)||this.emit("updated",this.getState()),this}},{key:"updateState",value:function(n){return this.setState(n(this.getState())),this}},{key:"animate",value:function(n){var o=this,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=arguments.length>2?arguments[2]:void 0;if(!h)return new Promise(function(O){return o.animate(n,l,O)});if(this.enabled){var u=en(en({},UR),l),v=this.validateState(n),x=typeof u.easing=="function"?u.easing:GR[u.easing],A=Date.now(),C=this.getState(),P=function(){var U=(Date.now()-A)/u.duration;if(U>=1){o.nextFrame=null,o.setState(v),o.animationCallback&&(o.animationCallback.call(null),o.animationCallback=void 0);return}var W=x(U),G={};typeof v.x=="number"&&(G.x=C.x+(v.x-C.x)*W),typeof v.y=="number"&&(G.y=C.y+(v.y-C.y)*W),o.enabledRotation&&typeof v.angle=="number"&&(G.angle=C.angle+(v.angle-C.angle)*W),typeof v.ratio=="number"&&(G.ratio=C.ratio+(v.ratio-C.ratio)*W),o.setState(G),o.nextFrame=requestAnimationFrame(P)};this.nextFrame?(cancelAnimationFrame(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=requestAnimationFrame(P)):P(),this.animationCallback=h}}},{key:"animatedZoom",value:function(n){return n?typeof n=="number"?this.animate({ratio:this.ratio/n}):this.animate({ratio:this.ratio/(n.factor||$x)},n):this.animate({ratio:this.ratio/$x})}},{key:"animatedUnzoom",value:function(n){return n?typeof n=="number"?this.animate({ratio:this.ratio*n}):this.animate({ratio:this.ratio*(n.factor||$x)},n):this.animate({ratio:this.ratio*$x})}},{key:"animatedReset",value:function(n){return this.animate({x:.5,y:.5,ratio:1,angle:0},n)}},{key:"copy",value:function(){return t.from(this.getState())}}],[{key:"from",value:function(n){var o=new t;return o.setState(n)}}])})(lE);function wh(e,t){var r=t.getBoundingClientRect();return{x:e.clientX-r.left,y:e.clientY-r.top}}function Lp(e,t){var r=en(en({},wh(e,t)),{},{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){r.sigmaDefaultPrevented=!0},original:e});return r}function ov(e){var t="x"in e?e:en(en({},e.touches[0]||e.previousTouches[0]),{},{original:e.original,sigmaDefaultPrevented:e.sigmaDefaultPrevented,preventSigmaDefault:function(){e.sigmaDefaultPrevented=!0,t.sigmaDefaultPrevented=!0}});return t}function JR(e,t){return en(en({},Lp(e,t)),{},{delta:aD(e)})}var QR=2;function u1(e){for(var t=[],r=0,n=Math.min(e.length,QR);r<n;r++)t.push(e[r]);return t}function sv(e,t,r){var n={touches:u1(e.touches).map(function(o){return wh(o,r)}),previousTouches:t.map(function(o){return wh(o,r)}),sigmaDefaultPrevented:!1,preventSigmaDefault:function(){n.sigmaDefaultPrevented=!0},original:e};return n}function aD(e){if(typeof e.deltaY<"u")return e.deltaY*-3/360;if(typeof e.detail<"u")return e.detail/-9;throw new Error("Captor: could not extract delta from event.")}var oD=(function(e){function t(r,n){var o;return ou(this,t),o=Nd(this,t),o.container=r,o.renderer=n,o}return Bd(t,e),su(t)})(lE),e9=["doubleClickTimeout","doubleClickZoomingDuration","doubleClickZoomingRatio","dragTimeout","draggedEventsTolerance","inertiaDuration","inertiaRatio","zoomDuration","zoomingRatio"],t9=e9.reduce(function(e,t){return en(en({},e),{},cr({},t,uE[t]))},{}),r9=(function(e){function t(r,n){var o;return ou(this,t),o=Nd(this,t,[r,n]),cr(o,"enabled",!0),cr(o,"draggedEvents",0),cr(o,"downStartTime",null),cr(o,"lastMouseX",null),cr(o,"lastMouseY",null),cr(o,"isMouseDown",!1),cr(o,"isMoving",!1),cr(o,"movingTimeout",null),cr(o,"startCameraState",null),cr(o,"clicks",0),cr(o,"doubleClickTimeout",null),cr(o,"currentWheelDirection",0),cr(o,"settings",t9),o.handleClick=o.handleClick.bind(o),o.handleRightClick=o.handleRightClick.bind(o),o.handleDown=o.handleDown.bind(o),o.handleUp=o.handleUp.bind(o),o.handleMove=o.handleMove.bind(o),o.handleWheel=o.handleWheel.bind(o),o.handleLeave=o.handleLeave.bind(o),o.handleEnter=o.handleEnter.bind(o),r.addEventListener("click",o.handleClick,{capture:!1}),r.addEventListener("contextmenu",o.handleRightClick,{capture:!1}),r.addEventListener("mousedown",o.handleDown,{capture:!1}),r.addEventListener("wheel",o.handleWheel,{capture:!1}),r.addEventListener("mouseleave",o.handleLeave,{capture:!1}),r.addEventListener("mouseenter",o.handleEnter,{capture:!1}),document.addEventListener("mousemove",o.handleMove,{capture:!1}),document.addEventListener("mouseup",o.handleUp,{capture:!1}),o}return Bd(t,e),su(t,[{key:"kill",value:function(){var n=this.container;n.removeEventListener("click",this.handleClick),n.removeEventListener("contextmenu",this.handleRightClick),n.removeEventListener("mousedown",this.handleDown),n.removeEventListener("wheel",this.handleWheel),n.removeEventListener("mouseleave",this.handleLeave),n.removeEventListener("mouseenter",this.handleEnter),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)}},{key:"handleClick",value:function(n){var o=this;if(this.enabled){if(this.clicks++,this.clicks===2)return this.clicks=0,typeof this.doubleClickTimeout=="number"&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(n);setTimeout(function(){o.clicks=0,o.doubleClickTimeout=null},this.settings.doubleClickTimeout),this.draggedEvents<this.settings.draggedEventsTolerance&&this.emit("click",Lp(n,this.container))}}},{key:"handleRightClick",value:function(n){this.enabled&&this.emit("rightClick",Lp(n,this.container))}},{key:"handleDoubleClick",value:function(n){if(this.enabled){n.preventDefault(),n.stopPropagation();var o=Lp(n,this.container);if(this.emit("doubleClick",o),!o.sigmaDefaultPrevented){var l=this.renderer.getCamera(),h=l.getBoundedRatio(l.getState().ratio/this.settings.doubleClickZoomingRatio);l.animate(this.renderer.getViewportZoomedState(wh(n,this.container),h),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}}},{key:"handleDown",value:function(n){if(this.enabled){if(n.button===0){this.startCameraState=this.renderer.getCamera().getState();var o=wh(n,this.container),l=o.x,h=o.y;this.lastMouseX=l,this.lastMouseY=h,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0}this.emit("mousedown",Lp(n,this.container))}}},{key:"handleUp",value:function(n){var o=this;if(!(!this.enabled||!this.isMouseDown)){var l=this.renderer.getCamera();this.isMouseDown=!1,typeof this.movingTimeout=="number"&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var h=wh(n,this.container),u=h.x,v=h.y,x=l.getState(),A=l.getPreviousState()||{x:0,y:0};this.isMoving?l.animate({x:x.x+this.settings.inertiaRatio*(x.x-A.x),y:x.y+this.settings.inertiaRatio*(x.y-A.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"}):(this.lastMouseX!==u||this.lastMouseY!==v)&&l.setState({x:x.x,y:x.y}),this.isMoving=!1,setTimeout(function(){var C=o.draggedEvents>0;o.draggedEvents=0,C&&o.renderer.getSetting("hideEdgesOnMove")&&o.renderer.refresh()},0),this.emit("mouseup",Lp(n,this.container))}}},{key:"handleMove",value:function(n){var o=this;if(this.enabled){var l=Lp(n,this.container);if(this.emit("mousemovebody",l),(n.target===this.container||n.composedPath()[0]===this.container)&&this.emit("mousemove",l),!l.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,typeof this.movingTimeout=="number"&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){o.movingTimeout=null,o.isMoving=!1},this.settings.dragTimeout);var h=this.renderer.getCamera(),u=wh(n,this.container),v=u.x,x=u.y,A=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),C=this.renderer.viewportToFramedGraph({x:v,y:x}),P=A.x-C.x,O=A.y-C.y,U=h.getState(),W=U.x+P,G=U.y+O;h.setState({x:W,y:G}),this.lastMouseX=v,this.lastMouseY=x,n.preventDefault(),n.stopPropagation()}}}},{key:"handleLeave",value:function(n){this.emit("mouseleave",Lp(n,this.container))}},{key:"handleEnter",value:function(n){this.emit("mouseenter",Lp(n,this.container))}},{key:"handleWheel",value:function(n){var o=this,l=this.renderer.getCamera();if(!(!this.enabled||!l.enabledZooming)){var h=aD(n);if(h){var u=JR(n,this.container);if(this.emit("wheel",u),u.sigmaDefaultPrevented){n.preventDefault(),n.stopPropagation();return}var v=l.getState().ratio,x=h>0?1/this.settings.zoomingRatio:this.settings.zoomingRatio,A=l.getBoundedRatio(v*x),C=h>0?1:-1,P=Date.now();v!==A&&(n.preventDefault(),n.stopPropagation(),!(this.currentWheelDirection===C&&this.lastWheelTriggerTime&&P-this.lastWheelTriggerTime<this.settings.zoomDuration/5)&&(l.animate(this.renderer.getViewportZoomedState(wh(n,this.container),A),{easing:"quadraticOut",duration:this.settings.zoomDuration},function(){o.currentWheelDirection=0}),this.currentWheelDirection=C,this.lastWheelTriggerTime=P))}}}},{key:"setSettings",value:function(n){this.settings=n}}])})(oD),n9=["dragTimeout","inertiaDuration","inertiaRatio","doubleClickTimeout","doubleClickZoomingRatio","doubleClickZoomingDuration","tapMoveTolerance"],i9=n9.reduce(function(e,t){return en(en({},e),{},cr({},t,uE[t]))},{}),a9=(function(e){function t(r,n){var o;return ou(this,t),o=Nd(this,t,[r,n]),cr(o,"enabled",!0),cr(o,"isMoving",!1),cr(o,"hasMoved",!1),cr(o,"touchMode",0),cr(o,"startTouchesPositions",[]),cr(o,"lastTouches",[]),cr(o,"lastTap",null),cr(o,"settings",i9),o.handleStart=o.handleStart.bind(o),o.handleLeave=o.handleLeave.bind(o),o.handleMove=o.handleMove.bind(o),r.addEventListener("touchstart",o.handleStart,{capture:!1}),r.addEventListener("touchcancel",o.handleLeave,{capture:!1}),document.addEventListener("touchend",o.handleLeave,{capture:!1,passive:!1}),document.addEventListener("touchmove",o.handleMove,{capture:!1,passive:!1}),o}return Bd(t,e),su(t,[{key:"kill",value:function(){var n=this.container;n.removeEventListener("touchstart",this.handleStart),n.removeEventListener("touchcancel",this.handleLeave),document.removeEventListener("touchend",this.handleLeave),document.removeEventListener("touchmove",this.handleMove)}},{key:"getDimensions",value:function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}}},{key:"handleStart",value:function(n){var o=this;if(this.enabled){n.preventDefault();var l=u1(n.touches);if(this.touchMode=l.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=l.map(function(O){return wh(O,o.container)}),this.touchMode===2){var h=g0(this.startTouchesPositions,2),u=h[0],v=u.x,x=u.y,A=h[1],C=A.x,P=A.y;this.startTouchesAngle=Math.atan2(P-x,C-v),this.startTouchesDistance=Math.sqrt(Math.pow(C-v,2)+Math.pow(P-x,2))}this.emit("touchdown",sv(n,this.lastTouches,this.container)),this.lastTouches=l,this.lastTouchesPositions=this.startTouchesPositions}}},{key:"handleLeave",value:function(n){if(!(!this.enabled||!this.startTouchesPositions.length)){switch(n.cancelable&&n.preventDefault(),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(n.touches.length===1){this.handleStart(n),n.preventDefault();break}case 1:if(this.isMoving){var o=this.renderer.getCamera(),l=o.getState(),h=o.getPreviousState()||{x:0,y:0};o.animate({x:l.x+this.settings.inertiaRatio*(l.x-h.x),y:l.y+this.settings.inertiaRatio*(l.y-h.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"})}this.hasMoved=!1,this.isMoving=!1,this.touchMode=0;break}if(this.emit("touchup",sv(n,this.lastTouches,this.container)),!n.touches.length){var u=wh(this.lastTouches[0],this.container),v=this.startTouchesPositions[0],x=Math.pow(u.x-v.x,2)+Math.pow(u.y-v.y,2);if(!n.touches.length&&x<Math.pow(this.settings.tapMoveTolerance,2))if(this.lastTap&&Date.now()-this.lastTap.time<this.settings.doubleClickTimeout){var A=sv(n,this.lastTouches,this.container);if(this.emit("doubletap",A),this.lastTap=null,!A.sigmaDefaultPrevented){var C=this.renderer.getCamera(),P=C.getBoundedRatio(C.getState().ratio/this.settings.doubleClickZoomingRatio);C.animate(this.renderer.getViewportZoomedState(u,P),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}else{var O=sv(n,this.lastTouches,this.container);this.emit("tap",O),this.lastTap={time:Date.now(),position:O.touches[0]||O.previousTouches[0]}}}this.lastTouches=u1(n.touches),this.startTouchesPositions=[]}}},{key:"handleMove",value:function(n){var o=this;if(!(!this.enabled||!this.startTouchesPositions.length)){n.preventDefault();var l=u1(n.touches),h=l.map(function(Ae){return wh(Ae,o.container)}),u=this.lastTouches;this.lastTouches=l,this.lastTouchesPositions=h;var v=sv(n,u,this.container);if(this.emit("touchmove",v),!v.sigmaDefaultPrevented&&(this.hasMoved||(this.hasMoved=h.some(function(Ae,qe){var Ze=o.startTouchesPositions[qe];return Ze&&(Ae.x!==Ze.x||Ae.y!==Ze.y)})),!!this.hasMoved)){this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){o.isMoving=!1},this.settings.dragTimeout);var x=this.renderer.getCamera(),A=this.startCameraState,C=this.renderer.getSetting("stagePadding");switch(this.touchMode){case 1:{var P=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),O=P.x,U=P.y,W=this.renderer.viewportToFramedGraph(h[0]),G=W.x,X=W.y;x.setState({x:A.x+O-G,y:A.y+U-X});break}case 2:{var ae={x:.5,y:.5,angle:0,ratio:1},ne=h[0],ue=ne.x,Q=ne.y,de=h[1],he=de.x,Y=de.y,ie=Math.atan2(Y-Q,he-ue)-this.startTouchesAngle,Ce=Math.hypot(Y-Q,he-ue)/this.startTouchesDistance,_e=x.getBoundedRatio(A.ratio/Ce);ae.ratio=_e,ae.angle=A.angle+ie;var Me=this.getDimensions(),me=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:A}),Ke=Math.min(Me.width,Me.height)-2*C,Re=Ke/Me.width,pe=Ke/Me.height,ge=_e/Ke,ze=ue-Ke/2/Re,Pe=Q-Ke/2/pe,st=[ze*Math.cos(-ae.angle)-Pe*Math.sin(-ae.angle),Pe*Math.cos(-ae.angle)+ze*Math.sin(-ae.angle)];ze=st[0],Pe=st[1],ae.x=me.x-ze*ge,ae.y=me.y+Pe*ge,x.setState(ae);break}}}}}},{key:"setSettings",value:function(n){this.settings=n}}])})(oD);function o9(e){if(Array.isArray(e))return Iw(e)}function s9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function l9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XA(e){return o9(e)||s9(e)||G6(e)||l9()}function u9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Rb(e,t){if(e==null)return{};var r,n,o=u9(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var YA=(function(){function e(t,r){ou(this,e),this.key=t,this.size=r}return su(e,null,[{key:"compare",value:function(r,n){return r.size>n.size?-1:r.size<n.size||r.key>n.key?1:-1}}])})(),JA=(function(){function e(){ou(this,e),cr(this,"width",0),cr(this,"height",0),cr(this,"cellSize",0),cr(this,"columns",0),cr(this,"rows",0),cr(this,"cells",{})}return su(e,[{key:"resizeAndClear",value:function(r,n){this.width=r.width,this.height=r.height,this.cellSize=n,this.columns=Math.ceil(r.width/n),this.rows=Math.ceil(r.height/n),this.cells={}}},{key:"getIndex",value:function(r){var n=Math.floor(r.x/this.cellSize),o=Math.floor(r.y/this.cellSize);return o*this.columns+n}},{key:"add",value:function(r,n,o){var l=new YA(r,n),h=this.getIndex(o),u=this.cells[h];u||(u=[],this.cells[h]=u),u.push(l)}},{key:"organize",value:function(){for(var r in this.cells){var n=this.cells[r];n.sort(YA.compare)}}},{key:"getLabelsToDisplay",value:function(r,n){var o=this.cellSize*this.cellSize,l=o/r/r,h=l*n/o,u=Math.ceil(h),v=[];for(var x in this.cells)for(var A=this.cells[x],C=0;C<Math.min(u,A.length);C++)v.push(A[C].key);return v}}])})();function c9(e){var t=e.graph,r=e.hoveredNode,n=e.highlightedNodes,o=e.displayedNodeLabels,l=[];return t.forEachEdge(function(h,u,v,x){(v===r||x===r||n.has(v)||n.has(x)||o.has(v)&&o.has(x))&&l.push(h)}),l}var QA=150,ek=50,Op=Object.prototype.hasOwnProperty;function d9(e,t,r){if(!Op.call(r,"x")||!Op.call(r,"y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(t,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return r.color||(r.color=e.defaultNodeColor),!r.label&&r.label!==""&&(r.label=null),r.label!==void 0&&r.label!==null?r.label=""+r.label:r.label=null,r.size||(r.size=2),Op.call(r,"hidden")||(r.hidden=!1),Op.call(r,"highlighted")||(r.highlighted=!1),Op.call(r,"forceLabel")||(r.forceLabel=!1),(!r.type||r.type==="")&&(r.type=e.defaultNodeType),r.zIndex||(r.zIndex=0),r}function h9(e,t,r){return r.color||(r.color=e.defaultEdgeColor),r.label||(r.label=""),r.size||(r.size=.5),Op.call(r,"hidden")||(r.hidden=!1),Op.call(r,"forceLabel")||(r.forceLabel=!1),(!r.type||r.type==="")&&(r.type=e.defaultEdgeType),r.zIndex||(r.zIndex=0),r}var sD=(function(e){function t(r,n){var o,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(ou(this,t),o=Nd(this,t),cr(o,"elements",{}),cr(o,"canvasContexts",{}),cr(o,"webGLContexts",{}),cr(o,"pickingLayers",new Set),cr(o,"textures",{}),cr(o,"frameBuffers",{}),cr(o,"activeListeners",{}),cr(o,"labelGrid",new JA),cr(o,"nodeDataCache",{}),cr(o,"edgeDataCache",{}),cr(o,"nodeProgramIndex",{}),cr(o,"edgeProgramIndex",{}),cr(o,"nodesWithForcedLabels",new Set),cr(o,"edgesWithForcedLabels",new Set),cr(o,"nodeExtent",{x:[0,1],y:[0,1]}),cr(o,"nodeZExtent",[1/0,-1/0]),cr(o,"edgeZExtent",[1/0,-1/0]),cr(o,"matrix",bh()),cr(o,"invMatrix",bh()),cr(o,"correctionRatio",1),cr(o,"customBBox",null),cr(o,"normalizationFunction",HA({x:[0,1],y:[0,1]})),cr(o,"graphToViewportRatio",1),cr(o,"itemIDsIndex",{}),cr(o,"nodeIndices",{}),cr(o,"edgeIndices",{}),cr(o,"width",0),cr(o,"height",0),cr(o,"pixelRatio",qA()),cr(o,"pickingDownSizingRatio",2*o.pixelRatio),cr(o,"displayedNodeLabels",new Set),cr(o,"displayedEdgeLabels",new Set),cr(o,"highlightedNodes",new Set),cr(o,"hoveredNode",null),cr(o,"hoveredEdge",null),cr(o,"renderFrame",null),cr(o,"renderHighlightedNodesFrame",null),cr(o,"needToProcess",!1),cr(o,"checkEdgesEventsFrame",null),cr(o,"nodePrograms",{}),cr(o,"nodeHoverPrograms",{}),cr(o,"edgePrograms",{}),o.settings=YR(l),jb(o.settings),HR(r),!(n instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");o.graph=r,o.container=n,o.createWebGLContext("edges",{picking:l.enableEdgeEvents}),o.createCanvasContext("edgeLabels"),o.createWebGLContext("nodes",{picking:!0}),o.createCanvasContext("labels"),o.createCanvasContext("hovers"),o.createWebGLContext("hoverNodes"),o.createCanvasContext("mouse",{style:{touchAction:"none",userSelect:"none"}}),o.resize();for(var h in o.settings.nodeProgramClasses)o.registerNodeProgram(h,o.settings.nodeProgramClasses[h],o.settings.nodeHoverProgramClasses[h]);for(var u in o.settings.edgeProgramClasses)o.registerEdgeProgram(u,o.settings.edgeProgramClasses[u]);return o.camera=new KA,o.bindCameraHandlers(),o.mouseCaptor=new r9(o.elements.mouse,o),o.mouseCaptor.setSettings(o.settings),o.touchCaptor=new a9(o.elements.mouse,o),o.touchCaptor.setSettings(o.settings),o.bindEventHandlers(),o.bindGraphHandlers(),o.handleSettingsUpdate(),o.refresh(),o}return Bd(t,e),su(t,[{key:"registerNodeProgram",value:function(n,o,l){return this.nodePrograms[n]&&this.nodePrograms[n].kill(),this.nodeHoverPrograms[n]&&this.nodeHoverPrograms[n].kill(),this.nodePrograms[n]=new o(this.webGLContexts.nodes,this.frameBuffers.nodes,this),this.nodeHoverPrograms[n]=new(l||o)(this.webGLContexts.hoverNodes,null,this),this}},{key:"registerEdgeProgram",value:function(n,o){return this.edgePrograms[n]&&this.edgePrograms[n].kill(),this.edgePrograms[n]=new o(this.webGLContexts.edges,this.frameBuffers.edges,this),this}},{key:"unregisterNodeProgram",value:function(n){if(this.nodePrograms[n]){var o=this.nodePrograms,l=o[n],h=Rb(o,[n].map(kv));l.kill(),this.nodePrograms=h}if(this.nodeHoverPrograms[n]){var u=this.nodeHoverPrograms,v=u[n],x=Rb(u,[n].map(kv));v.kill(),this.nodePrograms=x}return this}},{key:"unregisterEdgeProgram",value:function(n){if(this.edgePrograms[n]){var o=this.edgePrograms,l=o[n],h=Rb(o,[n].map(kv));l.kill(),this.edgePrograms=h}return this}},{key:"resetWebGLTexture",value:function(n){var o=this.webGLContexts[n],l=this.frameBuffers[n],h=this.textures[n];h&&o.deleteTexture(h);var u=o.createTexture();return o.bindFramebuffer(o.FRAMEBUFFER,l),o.bindTexture(o.TEXTURE_2D,u),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,this.width,this.height,0,o.RGBA,o.UNSIGNED_BYTE,null),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,u,0),this.textures[n]=u,this}},{key:"bindCameraHandlers",value:function(){var n=this;return this.activeListeners.camera=function(){n.scheduleRender()},this.camera.on("updated",this.activeListeners.camera),this}},{key:"unbindCameraHandlers",value:function(){return this.camera.removeListener("updated",this.activeListeners.camera),this}},{key:"getNodeAtPosition",value:function(n){var o=n.x,l=n.y,h=IA(this.webGLContexts.nodes,this.frameBuffers.nodes,o,l,this.pixelRatio,this.pickingDownSizingRatio),u=LA.apply(void 0,XA(h)),v=this.itemIDsIndex[u];return v&&v.type==="node"?v.id:null}},{key:"bindEventHandlers",value:function(){var n=this;this.activeListeners.handleResize=function(){n.scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(l){var h=ov(l),u={event:h,preventSigmaDefault:function(){h.preventSigmaDefault()}},v=n.getNodeAtPosition(h);if(v&&n.hoveredNode!==v&&!n.nodeDataCache[v].hidden){n.hoveredNode&&n.emit("leaveNode",en(en({},u),{},{node:n.hoveredNode})),n.hoveredNode=v,n.emit("enterNode",en(en({},u),{},{node:v})),n.scheduleHighlightedNodesRender();return}if(n.hoveredNode&&n.getNodeAtPosition(h)!==n.hoveredNode){var x=n.hoveredNode;n.hoveredNode=null,n.emit("leaveNode",en(en({},u),{},{node:x})),n.scheduleHighlightedNodesRender();return}if(n.settings.enableEdgeEvents){var A=n.hoveredNode?null:n.getEdgeAtPoint(u.event.x,u.event.y);A!==n.hoveredEdge&&(n.hoveredEdge&&n.emit("leaveEdge",en(en({},u),{},{edge:n.hoveredEdge})),A&&n.emit("enterEdge",en(en({},u),{},{edge:A})),n.hoveredEdge=A)}},this.activeListeners.handleMoveBody=function(l){var h=ov(l);n.emit("moveBody",{event:h,preventSigmaDefault:function(){h.preventSigmaDefault()}})},this.activeListeners.handleLeave=function(l){var h=ov(l),u={event:h,preventSigmaDefault:function(){h.preventSigmaDefault()}};n.hoveredNode&&(n.emit("leaveNode",en(en({},u),{},{node:n.hoveredNode})),n.scheduleHighlightedNodesRender()),n.settings.enableEdgeEvents&&n.hoveredEdge&&(n.emit("leaveEdge",en(en({},u),{},{edge:n.hoveredEdge})),n.scheduleHighlightedNodesRender()),n.emit("leaveStage",en({},u))},this.activeListeners.handleEnter=function(l){var h=ov(l),u={event:h,preventSigmaDefault:function(){h.preventSigmaDefault()}};n.emit("enterStage",en({},u))};var o=function(h){return function(u){var v=ov(u),x={event:v,preventSigmaDefault:function(){v.preventSigmaDefault()}},A=n.getNodeAtPosition(v);if(A)return n.emit("".concat(h,"Node"),en(en({},x),{},{node:A}));if(n.settings.enableEdgeEvents){var C=n.getEdgeAtPoint(v.x,v.y);if(C)return n.emit("".concat(h,"Edge"),en(en({},x),{},{edge:C}))}return n.emit("".concat(h,"Stage"),x)}};return this.activeListeners.handleClick=o("click"),this.activeListeners.handleRightClick=o("rightClick"),this.activeListeners.handleDoubleClick=o("doubleClick"),this.activeListeners.handleWheel=o("wheel"),this.activeListeners.handleDown=o("down"),this.activeListeners.handleUp=o("up"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("mousemovebody",this.activeListeners.handleMoveBody),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this.mouseCaptor.on("mouseup",this.activeListeners.handleUp),this.mouseCaptor.on("mouseleave",this.activeListeners.handleLeave),this.mouseCaptor.on("mouseenter",this.activeListeners.handleEnter),this.touchCaptor.on("touchdown",this.activeListeners.handleDown),this.touchCaptor.on("touchdown",this.activeListeners.handleMove),this.touchCaptor.on("touchup",this.activeListeners.handleUp),this.touchCaptor.on("touchmove",this.activeListeners.handleMove),this.touchCaptor.on("tap",this.activeListeners.handleClick),this.touchCaptor.on("doubletap",this.activeListeners.handleDoubleClick),this.touchCaptor.on("touchmove",this.activeListeners.handleMoveBody),this}},{key:"bindGraphHandlers",value:function(){var n=this,o=this.graph,l=new Set(["x","y","zIndex","type"]);return this.activeListeners.eachNodeAttributesUpdatedGraphUpdate=function(h){var u,v=(u=h.hints)===null||u===void 0?void 0:u.attributes;n.graph.forEachNode(function(A){return n.updateNode(A)});var x=!v||v.some(function(A){return l.has(A)});n.refresh({partialGraph:{nodes:o.nodes()},skipIndexation:!x,schedule:!0})},this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate=function(h){var u,v=(u=h.hints)===null||u===void 0?void 0:u.attributes;n.graph.forEachEdge(function(A){return n.updateEdge(A)});var x=v&&["zIndex","type"].some(function(A){return v==null?void 0:v.includes(A)});n.refresh({partialGraph:{edges:o.edges()},skipIndexation:!x,schedule:!0})},this.activeListeners.addNodeGraphUpdate=function(h){var u=h.key;n.addNode(u),n.refresh({partialGraph:{nodes:[u]},skipIndexation:!1,schedule:!0})},this.activeListeners.updateNodeGraphUpdate=function(h){var u=h.key;n.refresh({partialGraph:{nodes:[u]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropNodeGraphUpdate=function(h){var u=h.key;n.removeNode(u),n.refresh({schedule:!0})},this.activeListeners.addEdgeGraphUpdate=function(h){var u=h.key;n.addEdge(u),n.refresh({partialGraph:{edges:[u]},schedule:!0})},this.activeListeners.updateEdgeGraphUpdate=function(h){var u=h.key;n.refresh({partialGraph:{edges:[u]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropEdgeGraphUpdate=function(h){var u=h.key;n.removeEdge(u),n.refresh({schedule:!0})},this.activeListeners.clearEdgesGraphUpdate=function(){n.clearEdgeState(),n.clearEdgeIndices(),n.refresh({schedule:!0})},this.activeListeners.clearGraphUpdate=function(){n.clearEdgeState(),n.clearNodeState(),n.clearEdgeIndices(),n.clearNodeIndices(),n.refresh({schedule:!0})},o.on("nodeAdded",this.activeListeners.addNodeGraphUpdate),o.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),o.on("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),o.on("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),o.on("edgeAdded",this.activeListeners.addEdgeGraphUpdate),o.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),o.on("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),o.on("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),o.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),o.on("cleared",this.activeListeners.clearGraphUpdate),this}},{key:"unbindGraphHandlers",value:function(){var n=this.graph;n.removeListener("nodeAdded",this.activeListeners.addNodeGraphUpdate),n.removeListener("nodeDropped",this.activeListeners.dropNodeGraphUpdate),n.removeListener("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),n.removeListener("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),n.removeListener("edgeAdded",this.activeListeners.addEdgeGraphUpdate),n.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),n.removeListener("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),n.removeListener("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),n.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),n.removeListener("cleared",this.activeListeners.clearGraphUpdate)}},{key:"getEdgeAtPoint",value:function(n,o){var l=IA(this.webGLContexts.edges,this.frameBuffers.edges,n,o,this.pixelRatio,this.pickingDownSizingRatio),h=LA.apply(void 0,XA(l)),u=this.itemIDsIndex[h];return u&&u.type==="edge"?u.id:null}},{key:"process",value:function(){var n=this;this.emit("beforeProcess");var o=this.graph,l=this.settings,h=this.getDimensions();if(this.nodeExtent=WR(this.graph),!this.settings.autoRescale){var u=h.width,v=h.height,x=this.nodeExtent,A=x.x,C=x.y;this.nodeExtent={x:[(A[0]+A[1])/2-u/2,(A[0]+A[1])/2+u/2],y:[(C[0]+C[1])/2-v/2,(C[0]+C[1])/2+v/2]}}this.normalizationFunction=HA(this.customBBox||this.nodeExtent);var P=new KA,O=av(P.getState(),h,this.getGraphDimensions(),this.getStagePadding());this.labelGrid.resizeAndClear(h,l.labelGridCellSize);for(var U={},W={},G={},X={},ae=1,ne=o.nodes(),ue=0,Q=ne.length;ue<Q;ue++){var de=ne[ue],he=this.nodeDataCache[de],Y=o.getNodeAttributes(de);he.x=Y.x,he.y=Y.y,this.normalizationFunction.applyTo(he),typeof he.label=="string"&&!he.hidden&&this.labelGrid.add(de,he.size,this.framedGraphToViewport(he,{matrix:O})),U[he.type]=(U[he.type]||0)+1}this.labelGrid.organize();for(var ie in this.nodePrograms){if(!Op.call(this.nodePrograms,ie))throw new Error('Sigma: could not find a suitable program for node type "'.concat(ie,'"!'));this.nodePrograms[ie].reallocate(U[ie]||0),U[ie]=0}this.settings.zIndex&&this.nodeZExtent[0]!==this.nodeZExtent[1]&&(ne=WA(this.nodeZExtent,function(Tt){return n.nodeDataCache[Tt].zIndex},ne));for(var Ce=0,_e=ne.length;Ce<_e;Ce++){var Me=ne[Ce];W[Me]=ae,X[W[Me]]={type:"node",id:Me},ae++;var me=this.nodeDataCache[Me];this.addNodeToProgram(Me,W[Me],U[me.type]++)}for(var Ke={},Re=o.edges(),pe=0,ge=Re.length;pe<ge;pe++){var ze=Re[pe],Pe=this.edgeDataCache[ze];Ke[Pe.type]=(Ke[Pe.type]||0)+1}this.settings.zIndex&&this.edgeZExtent[0]!==this.edgeZExtent[1]&&(Re=WA(this.edgeZExtent,function(Tt){return n.edgeDataCache[Tt].zIndex},Re));for(var st in this.edgePrograms){if(!Op.call(this.edgePrograms,st))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(st,'"!'));this.edgePrograms[st].reallocate(Ke[st]||0),Ke[st]=0}for(var Ae=0,qe=Re.length;Ae<qe;Ae++){var Ze=Re[Ae];G[Ze]=ae,X[G[Ze]]={type:"edge",id:Ze},ae++;var zt=this.edgeDataCache[Ze];this.addEdgeToProgram(Ze,G[Ze],Ke[zt.type]++)}return this.itemIDsIndex=X,this.nodeIndices=W,this.edgeIndices=G,this.emit("afterProcess"),this}},{key:"handleSettingsUpdate",value:function(n){var o=this,l=this.settings;if(this.camera.minRatio=l.minCameraRatio,this.camera.maxRatio=l.maxCameraRatio,this.camera.enabledZooming=l.enableCameraZooming,this.camera.enabledPanning=l.enableCameraPanning,this.camera.enabledRotation=l.enableCameraRotation,l.cameraPanBoundaries?this.camera.clean=function(A){return o.cleanCameraState(A,l.cameraPanBoundaries&&Rw(l.cameraPanBoundaries)==="object"?l.cameraPanBoundaries:{})}:this.camera.clean=null,this.camera.setState(this.camera.validateState(this.camera.getState())),n){if(n.edgeProgramClasses!==l.edgeProgramClasses){for(var h in l.edgeProgramClasses)l.edgeProgramClasses[h]!==n.edgeProgramClasses[h]&&this.registerEdgeProgram(h,l.edgeProgramClasses[h]);for(var u in n.edgeProgramClasses)l.edgeProgramClasses[u]||this.unregisterEdgeProgram(u)}if(n.nodeProgramClasses!==l.nodeProgramClasses||n.nodeHoverProgramClasses!==l.nodeHoverProgramClasses){for(var v in l.nodeProgramClasses)(l.nodeProgramClasses[v]!==n.nodeProgramClasses[v]||l.nodeHoverProgramClasses[v]!==n.nodeHoverProgramClasses[v])&&this.registerNodeProgram(v,l.nodeProgramClasses[v],l.nodeHoverProgramClasses[v]);for(var x in n.nodeProgramClasses)l.nodeProgramClasses[x]||this.unregisterNodeProgram(x)}}return this.mouseCaptor.setSettings(this.settings),this.touchCaptor.setSettings(this.settings),this}},{key:"cleanCameraState",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=o.tolerance,h=l===void 0?0:l,u=o.boundaries,v=en({},n),x=u||this.nodeExtent,A=g0(x.x,2),C=A[0],P=A[1],O=g0(x.y,2),U=O[0],W=O[1],G=[this.graphToViewport({x:C,y:U},{cameraState:n}),this.graphToViewport({x:P,y:U},{cameraState:n}),this.graphToViewport({x:C,y:W},{cameraState:n}),this.graphToViewport({x:P,y:W},{cameraState:n})],X=1/0,ae=-1/0,ne=1/0,ue=-1/0;G.forEach(function(Ke){var Re=Ke.x,pe=Ke.y;X=Math.min(X,Re),ae=Math.max(ae,Re),ne=Math.min(ne,pe),ue=Math.max(ue,pe)});var Q=ae-X,de=ue-ne,he=this.getDimensions(),Y=he.width,ie=he.height,Ce=0,_e=0;if(Q>=Y?ae<Y-h?Ce=ae-(Y-h):X>h&&(Ce=X-h):ae>Y+h?Ce=ae-(Y+h):X<-h&&(Ce=X+h),de>=ie?ue<ie-h?_e=ue-(ie-h):ne>h&&(_e=ne-h):ue>ie+h?_e=ue-(ie+h):ne<-h&&(_e=ne+h),Ce||_e){var Me=this.viewportToFramedGraph({x:0,y:0},{cameraState:n}),me=this.viewportToFramedGraph({x:Ce,y:_e},{cameraState:n});Ce=me.x-Me.x,_e=me.y-Me.y,v.x+=Ce,v.y+=_e}return v}},{key:"renderLabels",value:function(){if(!this.settings.renderLabels)return this;var n=this.camera.getState(),o=this.labelGrid.getLabelsToDisplay(n.ratio,this.settings.labelDensity);ZA(o,this.nodesWithForcedLabels),this.displayedNodeLabels=new Set;for(var l=this.canvasContexts.labels,h=0,u=o.length;h<u;h++){var v=o[h],x=this.nodeDataCache[v];if(!this.displayedNodeLabels.has(v)&&!x.hidden){var A=this.framedGraphToViewport(x),C=A.x,P=A.y,O=this.scaleSize(x.size);if(!(!x.forceLabel&&O<this.settings.labelRenderedSizeThreshold)&&!(C<-QA||C>this.width+QA||P<-ek||P>this.height+ek)){this.displayedNodeLabels.add(v);var U=this.settings.defaultDrawNodeLabel,W=this.nodePrograms[x.type],G=(W==null?void 0:W.drawLabel)||U;G(l,en(en({key:v},x),{},{size:O,x:C,y:P}),this.settings)}}}return this}},{key:"renderEdgeLabels",value:function(){if(!this.settings.renderEdgeLabels)return this;var n=this.canvasContexts.edgeLabels;n.clearRect(0,0,this.width,this.height);var o=c9({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedNodeLabels,highlightedNodes:this.highlightedNodes});ZA(o,this.edgesWithForcedLabels);for(var l=new Set,h=0,u=o.length;h<u;h++){var v=o[h],x=this.graph.extremities(v),A=this.nodeDataCache[x[0]],C=this.nodeDataCache[x[1]],P=this.edgeDataCache[v];if(!l.has(v)&&!(P.hidden||A.hidden||C.hidden)){var O=this.settings.defaultDrawEdgeLabel,U=this.edgePrograms[P.type],W=(U==null?void 0:U.drawLabel)||O;W(n,en(en({key:v},P),{},{size:this.scaleSize(P.size)}),en(en(en({key:x[0]},A),this.framedGraphToViewport(A)),{},{size:this.scaleSize(A.size)}),en(en(en({key:x[1]},C),this.framedGraphToViewport(C)),{},{size:this.scaleSize(C.size)}),this.settings),l.add(v)}}return this.displayedEdgeLabels=l,this}},{key:"renderHighlightedNodes",value:function(){var n=this,o=this.canvasContexts.hovers;o.clearRect(0,0,this.width,this.height);var l=function(O){var U=n.nodeDataCache[O],W=n.framedGraphToViewport(U),G=W.x,X=W.y,ae=n.scaleSize(U.size),ne=n.settings.defaultDrawNodeHover,ue=n.nodePrograms[U.type],Q=(ue==null?void 0:ue.drawHover)||ne;Q(o,en(en({key:O},U),{},{size:ae,x:G,y:X}),n.settings)},h=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&h.push(this.hoveredNode),this.highlightedNodes.forEach(function(P){P!==n.hoveredNode&&h.push(P)}),h.forEach(function(P){return l(P)});var u={};h.forEach(function(P){var O=n.nodeDataCache[P].type;u[O]=(u[O]||0)+1});for(var v in this.nodeHoverPrograms)this.nodeHoverPrograms[v].reallocate(u[v]||0),u[v]=0;h.forEach(function(P){var O=n.nodeDataCache[P];n.nodeHoverPrograms[O.type].process(0,u[O.type]++,O)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);var x=this.getRenderParams();for(var A in this.nodeHoverPrograms){var C=this.nodeHoverPrograms[A];C.render(x)}}},{key:"scheduleHighlightedNodesRender",value:function(){var n=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=requestAnimationFrame(function(){n.renderHighlightedNodesFrame=null,n.renderHighlightedNodes(),n.renderEdgeLabels()}))}},{key:"render",value:function(){var n=this;this.emit("beforeRender");var o=function(){return n.emit("afterRender"),n};if(this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.resize(),this.needToProcess&&this.process(),this.needToProcess=!1,this.clear(),this.pickingLayers.forEach(function(G){return n.resetWebGLTexture(G)}),!this.graph.order)return o();var l=this.mouseCaptor,h=this.camera.isAnimated()||l.isMoving||l.draggedEvents||l.currentWheelDirection,u=this.camera.getState(),v=this.getDimensions(),x=this.getGraphDimensions(),A=this.getStagePadding();this.matrix=av(u,v,x,A),this.invMatrix=av(u,v,x,A,!0),this.correctionRatio=qR(this.matrix,u,v),this.graphToViewportRatio=this.getGraphToViewportRatio();var C=this.getRenderParams();for(var P in this.nodePrograms){var O=this.nodePrograms[P];O.render(C)}if(!this.settings.hideEdgesOnMove||!h)for(var U in this.edgePrograms){var W=this.edgePrograms[U];W.render(C)}return this.settings.hideLabelsOnMove&&h||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),o()}},{key:"addNode",value:function(n){var o=Object.assign({},this.graph.getNodeAttributes(n));this.settings.nodeReducer&&(o=this.settings.nodeReducer(n,o));var l=d9(this.settings,n,o);this.nodeDataCache[n]=l,this.nodesWithForcedLabels.delete(n),l.forceLabel&&!l.hidden&&this.nodesWithForcedLabels.add(n),this.highlightedNodes.delete(n),l.highlighted&&!l.hidden&&this.highlightedNodes.add(n),this.settings.zIndex&&(l.zIndex<this.nodeZExtent[0]&&(this.nodeZExtent[0]=l.zIndex),l.zIndex>this.nodeZExtent[1]&&(this.nodeZExtent[1]=l.zIndex))}},{key:"updateNode",value:function(n){this.addNode(n);var o=this.nodeDataCache[n];this.normalizationFunction.applyTo(o)}},{key:"removeNode",value:function(n){delete this.nodeDataCache[n],delete this.nodeProgramIndex[n],this.highlightedNodes.delete(n),this.hoveredNode===n&&(this.hoveredNode=null),this.nodesWithForcedLabels.delete(n)}},{key:"addEdge",value:function(n){var o=Object.assign({},this.graph.getEdgeAttributes(n));this.settings.edgeReducer&&(o=this.settings.edgeReducer(n,o));var l=h9(this.settings,n,o);this.edgeDataCache[n]=l,this.edgesWithForcedLabels.delete(n),l.forceLabel&&!l.hidden&&this.edgesWithForcedLabels.add(n),this.settings.zIndex&&(l.zIndex<this.edgeZExtent[0]&&(this.edgeZExtent[0]=l.zIndex),l.zIndex>this.edgeZExtent[1]&&(this.edgeZExtent[1]=l.zIndex))}},{key:"updateEdge",value:function(n){this.addEdge(n)}},{key:"removeEdge",value:function(n){delete this.edgeDataCache[n],delete this.edgeProgramIndex[n],this.hoveredEdge===n&&(this.hoveredEdge=null),this.edgesWithForcedLabels.delete(n)}},{key:"clearNodeIndices",value:function(){this.labelGrid=new JA,this.nodeExtent={x:[0,1],y:[0,1]},this.nodeDataCache={},this.edgeProgramIndex={},this.nodesWithForcedLabels=new Set,this.nodeZExtent=[1/0,-1/0],this.highlightedNodes=new Set}},{key:"clearEdgeIndices",value:function(){this.edgeDataCache={},this.edgeProgramIndex={},this.edgesWithForcedLabels=new Set,this.edgeZExtent=[1/0,-1/0]}},{key:"clearIndices",value:function(){this.clearEdgeIndices(),this.clearNodeIndices()}},{key:"clearNodeState",value:function(){this.displayedNodeLabels=new Set,this.highlightedNodes=new Set,this.hoveredNode=null}},{key:"clearEdgeState",value:function(){this.displayedEdgeLabels=new Set,this.highlightedNodes=new Set,this.hoveredEdge=null}},{key:"clearState",value:function(){this.clearEdgeState(),this.clearNodeState()}},{key:"addNodeToProgram",value:function(n,o,l){var h=this.nodeDataCache[n],u=this.nodePrograms[h.type];if(!u)throw new Error('Sigma: could not find a suitable program for node type "'.concat(h.type,'"!'));u.process(o,l,h),this.nodeProgramIndex[n]=l}},{key:"addEdgeToProgram",value:function(n,o,l){var h=this.edgeDataCache[n],u=this.edgePrograms[h.type];if(!u)throw new Error('Sigma: could not find a suitable program for edge type "'.concat(h.type,'"!'));var v=this.graph.extremities(n),x=this.nodeDataCache[v[0]],A=this.nodeDataCache[v[1]];u.process(o,l,x,A,h),this.edgeProgramIndex[n]=l}},{key:"getRenderParams",value:function(){return{matrix:this.matrix,invMatrix:this.invMatrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,cameraAngle:this.camera.angle,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio,downSizingRatio:this.pickingDownSizingRatio,minEdgeThickness:this.settings.minEdgeThickness,antiAliasingFeather:this.settings.antiAliasingFeather}}},{key:"getStagePadding",value:function(){var n=this.settings,o=n.stagePadding,l=n.autoRescale;return l&&o||0}},{key:"createLayer",value:function(n,o){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.elements[n])throw new Error('Sigma: a layer named "'.concat(n,'" already exists'));var h=ZR(o,{position:"absolute"},{class:"sigma-".concat(n)});return l.style&&Object.assign(h.style,l.style),this.elements[n]=h,"beforeLayer"in l&&l.beforeLayer?this.elements[l.beforeLayer].before(h):"afterLayer"in l&&l.afterLayer?this.elements[l.afterLayer].after(h):this.container.appendChild(h),h}},{key:"createCanvas",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.createLayer(n,"canvas",o)}},{key:"createCanvasContext",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=this.createCanvas(n,o),h={preserveDrawingBuffer:!1,antialias:!1};return this.canvasContexts[n]=l.getContext("2d",h),this}},{key:"createWebGLContext",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=(o==null?void 0:o.canvas)||this.createCanvas(n,o);o.hidden&&l.remove();var h=en({preserveDrawingBuffer:!1,antialias:!1},o),u;u=l.getContext("webgl2",h),u||(u=l.getContext("webgl",h)),u||(u=l.getContext("experimental-webgl",h));var v=u;if(this.webGLContexts[n]=v,v.blendFunc(v.ONE,v.ONE_MINUS_SRC_ALPHA),o.picking){this.pickingLayers.add(n);var x=v.createFramebuffer();if(!x)throw new Error("Sigma: cannot create a new frame buffer for layer ".concat(n));this.frameBuffers[n]=x}return v}},{key:"killLayer",value:function(n){var o=this.elements[n];if(!o)throw new Error("Sigma: cannot kill layer ".concat(n,", which does not exist"));if(this.webGLContexts[n]){var l,h=this.webGLContexts[n];(l=h.getExtension("WEBGL_lose_context"))===null||l===void 0||l.loseContext(),delete this.webGLContexts[n]}else this.canvasContexts[n]&&delete this.canvasContexts[n];return o.remove(),delete this.elements[n],this}},{key:"getCamera",value:function(){return this.camera}},{key:"setCamera",value:function(n){this.unbindCameraHandlers(),this.camera=n,this.bindCameraHandlers()}},{key:"getContainer",value:function(){return this.container}},{key:"getGraph",value:function(){return this.graph}},{key:"setGraph",value:function(n){n!==this.graph&&(this.hoveredNode&&!n.hasNode(this.hoveredNode)&&(this.hoveredNode=null),this.hoveredEdge&&!n.hasEdge(this.hoveredEdge)&&(this.hoveredEdge=null),this.unbindGraphHandlers(),this.checkEdgesEventsFrame!==null&&(cancelAnimationFrame(this.checkEdgesEventsFrame),this.checkEdgesEventsFrame=null),this.graph=n,this.bindGraphHandlers(),this.refresh())}},{key:"getMouseCaptor",value:function(){return this.mouseCaptor}},{key:"getTouchCaptor",value:function(){return this.touchCaptor}},{key:"getDimensions",value:function(){return{width:this.width,height:this.height}}},{key:"getGraphDimensions",value:function(){var n=this.customBBox||this.nodeExtent;return{width:n.x[1]-n.x[0]||1,height:n.y[1]-n.y[0]||1}}},{key:"getNodeDisplayData",value:function(n){var o=this.nodeDataCache[n];return o?Object.assign({},o):void 0}},{key:"getEdgeDisplayData",value:function(n){var o=this.edgeDataCache[n];return o?Object.assign({},o):void 0}},{key:"getNodeDisplayedLabels",value:function(){return new Set(this.displayedNodeLabels)}},{key:"getEdgeDisplayedLabels",value:function(){return new Set(this.displayedEdgeLabels)}},{key:"getSettings",value:function(){return en({},this.settings)}},{key:"getSetting",value:function(n){return this.settings[n]}},{key:"setSetting",value:function(n,o){var l=en({},this.settings);return this.settings[n]=o,jb(this.settings),this.handleSettingsUpdate(l),this.scheduleRefresh(),this}},{key:"updateSetting",value:function(n,o){return this.setSetting(n,o(this.settings[n])),this}},{key:"setSettings",value:function(n){var o=en({},this.settings);return this.settings=en(en({},this.settings),n),jb(this.settings),this.handleSettingsUpdate(o),this.scheduleRefresh(),this}},{key:"resize",value:function(n){var o=this.width,l=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=qA(),this.width===0)if(this.settings.allowInvalidContainer)this.width=1;else throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(this.height===0)if(this.settings.allowInvalidContainer)this.height=1;else throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(!n&&o===this.width&&l===this.height)return this;for(var h in this.elements){var u=this.elements[h];u.style.width=this.width+"px",u.style.height=this.height+"px"}for(var v in this.canvasContexts)this.elements[v].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[v].setAttribute("height",this.height*this.pixelRatio+"px"),this.pixelRatio!==1&&this.canvasContexts[v].scale(this.pixelRatio,this.pixelRatio);for(var x in this.webGLContexts){this.elements[x].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[x].setAttribute("height",this.height*this.pixelRatio+"px");var A=this.webGLContexts[x];if(A.viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio),this.pickingLayers.has(x)){var C=this.textures[x];C&&A.deleteTexture(C)}}return this.emit("resize"),this}},{key:"clear",value:function(){return this.emit("beforeClear"),this.webGLContexts.nodes.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.nodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.edges.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.edges.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this.emit("afterClear"),this}},{key:"refresh",value:function(n){var o=this,l=(n==null?void 0:n.skipIndexation)!==void 0?n==null?void 0:n.skipIndexation:!1,h=(n==null?void 0:n.schedule)!==void 0?n.schedule:!1,u=!n||!n.partialGraph;if(u)this.clearEdgeIndices(),this.clearNodeIndices(),this.graph.forEachNode(function(ue){return o.addNode(ue)}),this.graph.forEachEdge(function(ue){return o.addEdge(ue)});else{for(var v,x,A=((v=n.partialGraph)===null||v===void 0?void 0:v.nodes)||[],C=0,P=(A==null?void 0:A.length)||0;C<P;C++){var O=A[C];if(this.updateNode(O),l){var U=this.nodeProgramIndex[O];if(U===void 0)throw new Error('Sigma: node "'.concat(O,`" can't be repaint`));this.addNodeToProgram(O,this.nodeIndices[O],U)}}for(var W=(n==null||(x=n.partialGraph)===null||x===void 0?void 0:x.edges)||[],G=0,X=W.length;G<X;G++){var ae=W[G];if(this.updateEdge(ae),l){var ne=this.edgeProgramIndex[ae];if(ne===void 0)throw new Error('Sigma: edge "'.concat(ae,`" can't be repaint`));this.addEdgeToProgram(ae,this.edgeIndices[ae],ne)}}}return(u||!l)&&(this.needToProcess=!0),h?this.scheduleRender():this.render(),this}},{key:"scheduleRender",value:function(){var n=this;return this.renderFrame||(this.renderFrame=requestAnimationFrame(function(){n.render()})),this}},{key:"scheduleRefresh",value:function(n){return this.refresh(en(en({},n),{},{schedule:!0}))}},{key:"getViewportZoomedState",value:function(n,o){var l=this.camera.getState(),h=l.ratio,u=l.angle,v=l.x,x=l.y,A=this.settings,C=A.minCameraRatio,P=A.maxCameraRatio;typeof P=="number"&&(o=Math.min(o,P)),typeof C=="number"&&(o=Math.max(o,C));var O=o/h,U={x:this.width/2,y:this.height/2},W=this.viewportToFramedGraph(n),G=this.viewportToFramedGraph(U);return{angle:u,x:(W.x-G.x)*(1-O)+v,y:(W.y-G.y)*(1-O)+x,ratio:o}}},{key:"viewRectangle",value:function(){var n=this.viewportToFramedGraph({x:0,y:0}),o=this.viewportToFramedGraph({x:this.width,y:0}),l=this.viewportToFramedGraph({x:0,y:this.height});return{x1:n.x,y1:n.y,x2:o.x,y2:o.y,height:o.y-l.y}}},{key:"framedGraphToViewport",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=!!o.cameraState||!!o.viewportDimensions||!!o.graphDimensions,h=o.matrix?o.matrix:l?av(o.cameraState||this.camera.getState(),o.viewportDimensions||this.getDimensions(),o.graphDimensions||this.getGraphDimensions(),o.padding||this.getStagePadding()):this.matrix,u=jw(h,n);return{x:(1+u.x)*this.width/2,y:(1-u.y)*this.height/2}}},{key:"viewportToFramedGraph",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=!!o.cameraState||!!o.viewportDimensions||!o.graphDimensions,h=o.matrix?o.matrix:l?av(o.cameraState||this.camera.getState(),o.viewportDimensions||this.getDimensions(),o.graphDimensions||this.getGraphDimensions(),o.padding||this.getStagePadding(),!0):this.invMatrix,u=jw(h,{x:n.x/this.width*2-1,y:1-n.y/this.height*2});return isNaN(u.x)&&(u.x=0),isNaN(u.y)&&(u.y=0),u}},{key:"viewportToGraph",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.normalizationFunction.inverse(this.viewportToFramedGraph(n,o))}},{key:"graphToViewport",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.framedGraphToViewport(this.normalizationFunction(n),o)}},{key:"getGraphToViewportRatio",value:function(){var n={x:0,y:0},o={x:1,y:1},l=Math.sqrt(Math.pow(n.x-o.x,2)+Math.pow(n.y-o.y,2)),h=this.graphToViewport(n),u=this.graphToViewport(o),v=Math.sqrt(Math.pow(h.x-u.x,2)+Math.pow(h.y-u.y,2));return v/l}},{key:"getBBox",value:function(){return this.nodeExtent}},{key:"getCustomBBox",value:function(){return this.customBBox}},{key:"setCustomBBox",value:function(n){return this.customBBox=n,this.scheduleRender(),this}},{key:"kill",value:function(){this.emit("kill"),this.removeAllListeners(),this.unbindCameraHandlers(),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),this.unbindGraphHandlers(),this.clearIndices(),this.clearState(),this.nodeDataCache={},this.edgeDataCache={},this.highlightedNodes.clear(),this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&(cancelAnimationFrame(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var n=this.container;n.firstChild;)n.removeChild(n.firstChild);for(var o in this.nodePrograms)this.nodePrograms[o].kill();for(var l in this.nodeHoverPrograms)this.nodeHoverPrograms[l].kill();for(var h in this.edgePrograms)this.edgePrograms[h].kill();this.nodePrograms={},this.nodeHoverPrograms={},this.edgePrograms={};for(var u in this.elements)this.killLayer(u);this.canvasContexts={},this.webGLContexts={},this.elements={}}},{key:"scaleSize",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.camera.ratio;return n/this.settings.zoomToSizeRatioFunction(o)*(this.getSetting("itemSizesReference")==="positions"?o*this.graphToViewportRatio:1)}},{key:"getCanvases",value:function(){var n={};for(var o in this.elements)this.elements[o]instanceof HTMLCanvasElement&&(n[o]=this.elements[o]);return n}}])})(lE),_1=sD;const lD=N.createContext(null),f9=lD.Provider;function cE(){const e=N.useContext(lD);if(e==null)throw new Error("No context provided: useSigmaContext() can only be used in a descendant of <SigmaContainer>");return e}function If(){return cE().sigma}function uD(){const{sigma:e}=cE();return N.useCallback((t=>{e&&Object.keys(t).forEach((r=>{e.setSetting(r,t[r])}))}),[e])}function S_(e){return new Set(Object.keys(e))}const tk=S_({clickNode:!0,rightClickNode:!0,downNode:!0,enterNode:!0,leaveNode:!0,doubleClickNode:!0,wheelNode:!0,clickEdge:!0,rightClickEdge:!0,downEdge:!0,enterEdge:!0,leaveEdge:!0,doubleClickEdge:!0,wheelEdge:!0,clickStage:!0,rightClickStage:!0,downStage:!0,doubleClickStage:!0,wheelStage:!0,beforeRender:!0,afterRender:!0,kill:!0,upStage:!0,upEdge:!0,upNode:!0,enterStage:!0,leaveStage:!0,resize:!0,afterClear:!0,afterProcess:!0,beforeClear:!0,beforeProcess:!0,moveBody:!0}),rk=S_({click:!0,rightClick:!0,doubleClick:!0,mouseup:!0,mousedown:!0,mousemove:!0,mousemovebody:!0,mouseleave:!0,mouseenter:!0,wheel:!0}),nk=S_({touchup:!0,touchdown:!0,touchmove:!0,touchmovebody:!0,tap:!0,doubletap:!0}),ik=S_({updated:!0});function p9(){const e=If(),t=uD(),[r,n]=N.useState({});return N.useEffect((()=>{if(!e||!r)return;const o=r,l=Object.keys(o);return l.forEach((h=>{const u=o[h];tk.has(h)&&e.on(h,u),rk.has(h)&&e.getMouseCaptor().on(h,u),nk.has(h)&&e.getTouchCaptor().on(h,u),ik.has(h)&&e.getCamera().on(h,u)})),()=>{e&&l.forEach((h=>{const u=o[h];tk.has(h)&&e.off(h,u),rk.has(h)&&e.getMouseCaptor().off(h,u),nk.has(h)&&e.getTouchCaptor().off(h,u),ik.has(h)&&e.getCamera().off(h,u)}))}}),[e,r,t]),n}function dE(e,t){if(e===t)return!0;if(typeof e=="object"&&e!=null&&typeof t=="object"&&t!=null){if(Object.keys(e).length!=Object.keys(t).length)return!1;for(const r in e)if(!Object.hasOwn(t,r)||!dE(e[r],t[r]))return!1;return!0}return!1}function g9(e){const t=If(),[r,n]=N.useState(e||{});N.useEffect((()=>{n((x=>dE(x,e||{})?x:e||{}))}),[e]);const o=N.useCallback((x=>{t.getCamera().animatedZoom(Object.assign(Object.assign({},r),x))}),[t,r]),l=N.useCallback((x=>{t.getCamera().animatedUnzoom(Object.assign(Object.assign({},r),x))}),[t,r]),h=N.useCallback((x=>{t.getCamera().animatedReset(Object.assign(Object.assign({},r),x))}),[t,r]),u=N.useCallback(((x,A)=>{t.getCamera().animate(x,Object.assign(Object.assign({},r),A))}),[t,r]),v=N.useCallback(((x,A)=>{const C=t.getNodeDisplayData(x);C?t.getCamera().animate(C,Object.assign(Object.assign({},r),A)):console.warn(`Node ${x} not found`)}),[t,r]);return{zoomIn:o,zoomOut:l,reset:h,goto:u,gotoNode:v}}function m9(e){const t=cE(),[r,n]=N.useState(!1),[o,l]=N.useState(e||t.container),h=N.useCallback((()=>n((u=>!u))),[]);return N.useEffect((()=>(document.addEventListener("fullscreenchange",h),()=>document.removeEventListener("fullscreenchange",h))),[h]),N.useEffect((()=>{l(e||t.container)}),[e,t.container]),{toggle:N.useCallback((()=>{var u;u=o,document.fullscreenElement!==u?u.requestFullscreen():document.exitFullscreen&&document.exitFullscreen()}),[o]),isFullScreen:r}}const y9=N.forwardRef((({graph:e,id:t,className:r,style:n,settings:o={},children:l},h)=>{const u=N.useRef(null),v=N.useRef(null),x={className:`react-sigma ${r||""}`,id:t,style:n},[A,C]=N.useState(null),[P,O]=N.useState(o);N.useEffect((()=>{O((G=>dE(G,o)?G:o))}),[o]),N.useEffect((()=>{let G=null;if(v.current!==null){let X=new oo;e&&(X=typeof e=="function"?new e:e),G=new sD(X,v.current,P),C((ae=>{let ne=null;return ae&&(ne=ae.getCamera().getState()),ne&&G.getCamera().setState(ne),G}))}return()=>{G&&G.kill()}}),[v,e,P]),N.useImperativeHandle(h,(()=>A),[A]);const U=N.useMemo((()=>A&&u.current?{sigma:A,container:u.current}:null),[A,u]),W=U!==null?Ei.createElement(f9,{value:U},l):null;return Ei.createElement("div",Object.assign({},x,{ref:u}),Ei.createElement("div",{className:"sigma-container",ref:v}),W)}));var ak;function Nw(){return Nw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nw.apply(null,arguments)}var ok,v9=function(e){return N.createElement("svg",Nw({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"dot-circle-regular_svg__svg-inline--fa dot-circle-regular_svg__fa-dot-circle dot-circle-regular_svg__fa-w-16","data-icon":"dot-circle","data-prefix":"far",viewBox:"0 0 512 512",width:"1em",height:"1em"},e),ak||(ak=N.createElement("path",{fill:"currentColor",d:"M256 56c110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200-110.532 0-200-89.451-200-200 0-110.532 89.451-200 200-200m0-48C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8m0 168c-44.183 0-80 35.817-80 80s35.817 80 80 80 80-35.817 80-80-35.817-80-80-80"})))};function Bw(){return Bw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bw.apply(null,arguments)}var sk,x9=function(e){return N.createElement("svg",Bw({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"minus-solid_svg__svg-inline--fa minus-solid_svg__fa-minus minus-solid_svg__fa-w-14","data-icon":"minus","data-prefix":"fas",viewBox:"0 0 448 512",width:"1em",height:"1em"},e),ok||(ok=N.createElement("path",{fill:"currentColor",d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32"})))};function Fw(){return Fw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fw.apply(null,arguments)}var _9=function(e){return N.createElement("svg",Fw({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"plus-solid_svg__svg-inline--fa plus-solid_svg__fa-plus plus-solid_svg__fa-w-14","data-icon":"plus","data-prefix":"fas",viewBox:"0 0 448 512",width:"1em",height:"1em"},e),sk||(sk=N.createElement("path",{fill:"currentColor",d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32"})))};const b9=({className:e,style:t,animationDuration:r=200,children:n,labels:o={}})=>{const{zoomIn:l,zoomOut:h,reset:u}=g9({duration:r,factor:1.5}),v={style:t,className:`react-sigma-control ${e||""}`};return Ei.createElement(Ei.Fragment,null,Ei.createElement("div",Object.assign({},v),Ei.createElement("button",{onClick:()=>l(),title:o.zoomIn||"Zoom In"},n?n[0]:Ei.createElement(_9,{style:{width:"1em"}}))),Ei.createElement("div",Object.assign({},v),Ei.createElement("button",{onClick:()=>h(),title:o.zoomOut||"Zoom Out"},n?n[1]:Ei.createElement(x9,{style:{width:"1em"}}))),Ei.createElement("div",Object.assign({},v),Ei.createElement("button",{onClick:()=>u(),title:o.reset||"See whole graph"},n?n[2]:Ei.createElement(v9,{style:{width:"1em"}}))))};var lk;function $w(){return $w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$w.apply(null,arguments)}var uk,w9=function(e){return N.createElement("svg",$w({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"compress-solid_svg__svg-inline--fa compress-solid_svg__fa-compress compress-solid_svg__fa-w-14","data-icon":"compress","data-prefix":"fas",viewBox:"0 0 448 512",width:"1em",height:"1em"},e),lk||(lk=N.createElement("path",{fill:"currentColor",d:"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12m-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24m0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12m192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12"})))};function Gw(){return Gw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gw.apply(null,arguments)}var S9=function(e){return N.createElement("svg",Gw({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"expand-solid_svg__svg-inline--fa expand-solid_svg__fa-expand expand-solid_svg__fa-w-14","data-icon":"expand","data-prefix":"fas",viewBox:"0 0 448 512",width:"1em",height:"1em"},e),uk||(uk=N.createElement("path",{fill:"currentColor",d:"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12M288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12m148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12M160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12"})))};const E9=({id:e,className:t,style:r,container:n,children:o,labels:l={}})=>{const{isFullScreen:h,toggle:u}=m9(n==null?void 0:n.current),v={className:`react-sigma-control ${t||""}`,id:e,style:r};return document.fullscreenEnabled?Ei.createElement("div",Object.assign({},v),Ei.createElement("button",{onClick:u,title:h?l.exit||"Exit fullscreen":l.enter||"Enter fullscreen"},o&&!h&&o[0],o&&h&&o[1],!o&&!h&&Ei.createElement(S9,{style:{width:"1em"}}),!o&&h&&Ei.createElement(w9,{style:{width:"1em"}}))):null};var Nb,ck;function hE(){if(ck)return Nb;ck=1;function e(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}return typeof Symbol<"u"&&(e.prototype[Symbol.iterator]=function(){return this}),e.of=function(){var t=arguments,r=t.length,n=0;return new e(function(){return n>=r?{done:!0}:{done:!1,value:t[n++]}})},e.empty=function(){var t=new e(function(){return{done:!0}});return t},e.fromSequence=function(t){var r=0,n=t.length;return new e(function(){return r>=n?{done:!0}:{done:!1,value:t[r++]}})},e.is=function(t){return t instanceof e?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"},Nb=e,Nb}var A9=hE();const Ld=Fl(A9);var Gx={},dk;function k9(){return dk||(dk=1,Gx.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",Gx.SYMBOL_SUPPORT=typeof Symbol<"u"),Gx}var Bb,hk;function cD(){if(hk)return Bb;hk=1;var e=hE(),t=k9(),r=t.ARRAY_BUFFER_SUPPORT,n=t.SYMBOL_SUPPORT;function o(l){return typeof l=="string"||Array.isArray(l)||r&&ArrayBuffer.isView(l)?e.fromSequence(l):typeof l!="object"||l===null?null:n&&typeof l[Symbol.iterator]=="function"?l[Symbol.iterator]():typeof l.next=="function"?l:null}return Bb=function(h){var u=o(h);if(!u)throw new Error("obliterator: target is not iterable nor a valid iterator.");return u},Bb}var Fb,fk;function C9(){if(fk)return Fb;fk=1;var e=cD();return Fb=function(r,n){for(var o=arguments.length>1?n:1/0,l=o!==1/0?new Array(o):[],h,u=0,v=e(r);;){if(u===o)return l;if(h=v.next(),h.done)return u!==n&&(l.length=u),l;l[u++]=h.value}},Fb}var T9=C9();const dD=Fl(T9);var $b,pk;function D9(){if(pk)return $b;pk=1;var e=hE(),t=cD();return $b=function(){var n=arguments,o=null,l=-1;return new e(function(){var u=null;do{if(o===null){if(l++,l>=n.length)return{done:!0};o=t(n[l])}if(u=o.next(),u.done===!0){o=null;continue}break}while(!0);return u})},$b}var M9=D9();const Gp=Fl(M9);function z9(){const e=arguments[0];for(let t=1,r=arguments.length;t<r;t++)if(arguments[t])for(const n in arguments[t])e[n]=arguments[t][n];return e}let Gs=z9;typeof Object.assign=="function"&&(Gs=Object.assign);function zd(e,t,r,n){const o=e._nodes.get(t);let l=null;return o&&(n==="mixed"?l=o.out&&o.out[r]||o.undirected&&o.undirected[r]:n==="directed"?l=o.out&&o.out[r]:l=o.undirected&&o.undirected[r]),l}function Nl(e){return typeof e=="object"&&e!==null}function hD(e){let t;for(t in e)return!1;return!0}function Ed(e,t,r){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!0,value:r})}function _h(e,t,r){const n={enumerable:!0,configurable:!0};typeof r=="function"?n.get=r:(n.value=r,n.writable=!1),Object.defineProperty(e,t,n)}function gk(e){return!(!Nl(e)||e.attributes&&!Array.isArray(e.attributes))}function P9(){let e=Math.floor(Math.random()*256)&255;return()=>e++}class fE extends Error{constructor(t){super(),this.name="GraphError",this.message=t}}class Rr extends fE{constructor(t){super(t),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Rr.prototype.constructor)}}class _r extends fE{constructor(t){super(t),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,_r.prototype.constructor)}}class bn extends fE{constructor(t){super(t),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,bn.prototype.constructor)}}function fD(e,t){this.key=e,this.attributes=t,this.clear()}fD.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function pD(e,t){this.key=e,this.attributes=t,this.clear()}pD.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function gD(e,t){this.key=e,this.attributes=t,this.clear()}gD.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function P0(e,t,r,n,o){this.key=t,this.attributes=o,this.undirected=e,this.source=r,this.target=n}P0.prototype.attach=function(){let e="out",t="in";this.undirected&&(e=t="undirected");const r=this.source.key,n=this.target.key;this.source[e][n]=this,!(this.undirected&&r===n)&&(this.target[t][r]=this)};P0.prototype.attachMulti=function(){let e="out",t="in";const r=this.source.key,n=this.target.key;this.undirected&&(e=t="undirected");const o=this.source[e],l=o[n];if(typeof l>"u"){o[n]=this,this.undirected&&r===n||(this.target[t][r]=this);return}l.previous=this,this.next=l,o[n]=this,this.target[t][r]=this};P0.prototype.detach=function(){const e=this.source.key,t=this.target.key;let r="out",n="in";this.undirected&&(r=n="undirected"),delete this.source[r][t],delete this.target[n][e]};P0.prototype.detachMulti=function(){const e=this.source.key,t=this.target.key;let r="out",n="in";this.undirected&&(r=n="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[r][t],delete this.target[n][e]):(this.next.previous=void 0,this.source[r][t]=this.next,this.target[n][e]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const mD=0,yD=1,L9=2,vD=3;function Qp(e,t,r,n,o,l,h){let u,v,x,A;if(n=""+n,r===mD){if(u=e._nodes.get(n),!u)throw new _r(`Graph.${t}: could not find the "${n}" node in the graph.`);x=o,A=l}else if(r===vD){if(o=""+o,v=e._edges.get(o),!v)throw new _r(`Graph.${t}: could not find the "${o}" edge in the graph.`);const C=v.source.key,P=v.target.key;if(n===C)u=v.target;else if(n===P)u=v.source;else throw new _r(`Graph.${t}: the "${n}" node is not attached to the "${o}" edge (${C}, ${P}).`);x=l,A=h}else{if(v=e._edges.get(n),!v)throw new _r(`Graph.${t}: could not find the "${n}" edge in the graph.`);r===yD?u=v.source:u=v.target,x=o,A=l}return[u,x,A]}function I9(e,t,r){e.prototype[t]=function(n,o,l){const[h,u]=Qp(this,t,r,n,o,l);return h.attributes[u]}}function O9(e,t,r){e.prototype[t]=function(n,o){const[l]=Qp(this,t,r,n,o);return l.attributes}}function j9(e,t,r){e.prototype[t]=function(n,o,l){const[h,u]=Qp(this,t,r,n,o,l);return h.attributes.hasOwnProperty(u)}}function R9(e,t,r){e.prototype[t]=function(n,o,l,h){const[u,v,x]=Qp(this,t,r,n,o,l,h);return u.attributes[v]=x,this.emit("nodeAttributesUpdated",{key:u.key,type:"set",attributes:u.attributes,name:v}),this}}function N9(e,t,r){e.prototype[t]=function(n,o,l,h){const[u,v,x]=Qp(this,t,r,n,o,l,h);if(typeof x!="function")throw new Rr(`Graph.${t}: updater should be a function.`);const A=u.attributes,C=x(A[v]);return A[v]=C,this.emit("nodeAttributesUpdated",{key:u.key,type:"set",attributes:u.attributes,name:v}),this}}function B9(e,t,r){e.prototype[t]=function(n,o,l){const[h,u]=Qp(this,t,r,n,o,l);return delete h.attributes[u],this.emit("nodeAttributesUpdated",{key:h.key,type:"remove",attributes:h.attributes,name:u}),this}}function F9(e,t,r){e.prototype[t]=function(n,o,l){const[h,u]=Qp(this,t,r,n,o,l);if(!Nl(u))throw new Rr(`Graph.${t}: provided attributes are not a plain object.`);return h.attributes=u,this.emit("nodeAttributesUpdated",{key:h.key,type:"replace",attributes:h.attributes}),this}}function $9(e,t,r){e.prototype[t]=function(n,o,l){const[h,u]=Qp(this,t,r,n,o,l);if(!Nl(u))throw new Rr(`Graph.${t}: provided attributes are not a plain object.`);return Gs(h.attributes,u),this.emit("nodeAttributesUpdated",{key:h.key,type:"merge",attributes:h.attributes,data:u}),this}}function G9(e,t,r){e.prototype[t]=function(n,o,l){const[h,u]=Qp(this,t,r,n,o,l);if(typeof u!="function")throw new Rr(`Graph.${t}: provided updater is not a function.`);return h.attributes=u(h.attributes),this.emit("nodeAttributesUpdated",{key:h.key,type:"update",attributes:h.attributes}),this}}const U9=[{name:e=>`get${e}Attribute`,attacher:I9},{name:e=>`get${e}Attributes`,attacher:O9},{name:e=>`has${e}Attribute`,attacher:j9},{name:e=>`set${e}Attribute`,attacher:R9},{name:e=>`update${e}Attribute`,attacher:N9},{name:e=>`remove${e}Attribute`,attacher:B9},{name:e=>`replace${e}Attributes`,attacher:F9},{name:e=>`merge${e}Attributes`,attacher:$9},{name:e=>`update${e}Attributes`,attacher:G9}];function V9(e){U9.forEach(function({name:t,attacher:r}){r(e,t("Node"),mD),r(e,t("Source"),yD),r(e,t("Target"),L9),r(e,t("Opposite"),vD)})}function q9(e,t,r){e.prototype[t]=function(n,o){let l;if(this.type!=="mixed"&&r!=="mixed"&&r!==this.type)throw new bn(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new bn(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const h=""+n,u=""+o;if(o=arguments[2],l=zd(this,h,u,r),!l)throw new _r(`Graph.${t}: could not find an edge for the given path ("${h}" - "${u}").`)}else{if(r!=="mixed")throw new bn(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,l=this._edges.get(n),!l)throw new _r(`Graph.${t}: could not find the "${n}" edge in the graph.`)}return l.attributes[o]}}function W9(e,t,r){e.prototype[t]=function(n){let o;if(this.type!=="mixed"&&r!=="mixed"&&r!==this.type)throw new bn(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new bn(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const l=""+n,h=""+arguments[1];if(o=zd(this,l,h,r),!o)throw new _r(`Graph.${t}: could not find an edge for the given path ("${l}" - "${h}").`)}else{if(r!=="mixed")throw new bn(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,o=this._edges.get(n),!o)throw new _r(`Graph.${t}: could not find the "${n}" edge in the graph.`)}return o.attributes}}function H9(e,t,r){e.prototype[t]=function(n,o){let l;if(this.type!=="mixed"&&r!=="mixed"&&r!==this.type)throw new bn(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new bn(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const h=""+n,u=""+o;if(o=arguments[2],l=zd(this,h,u,r),!l)throw new _r(`Graph.${t}: could not find an edge for the given path ("${h}" - "${u}").`)}else{if(r!=="mixed")throw new bn(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,l=this._edges.get(n),!l)throw new _r(`Graph.${t}: could not find the "${n}" edge in the graph.`)}return l.attributes.hasOwnProperty(o)}}function Z9(e,t,r){e.prototype[t]=function(n,o,l){let h;if(this.type!=="mixed"&&r!=="mixed"&&r!==this.type)throw new bn(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new bn(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const u=""+n,v=""+o;if(o=arguments[2],l=arguments[3],h=zd(this,u,v,r),!h)throw new _r(`Graph.${t}: could not find an edge for the given path ("${u}" - "${v}").`)}else{if(r!=="mixed")throw new bn(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,h=this._edges.get(n),!h)throw new _r(`Graph.${t}: could not find the "${n}" edge in the graph.`)}return h.attributes[o]=l,this.emit("edgeAttributesUpdated",{key:h.key,type:"set",attributes:h.attributes,name:o}),this}}function K9(e,t,r){e.prototype[t]=function(n,o,l){let h;if(this.type!=="mixed"&&r!=="mixed"&&r!==this.type)throw new bn(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new bn(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const u=""+n,v=""+o;if(o=arguments[2],l=arguments[3],h=zd(this,u,v,r),!h)throw new _r(`Graph.${t}: could not find an edge for the given path ("${u}" - "${v}").`)}else{if(r!=="mixed")throw new bn(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,h=this._edges.get(n),!h)throw new _r(`Graph.${t}: could not find the "${n}" edge in the graph.`)}if(typeof l!="function")throw new Rr(`Graph.${t}: updater should be a function.`);return h.attributes[o]=l(h.attributes[o]),this.emit("edgeAttributesUpdated",{key:h.key,type:"set",attributes:h.attributes,name:o}),this}}function X9(e,t,r){e.prototype[t]=function(n,o){let l;if(this.type!=="mixed"&&r!=="mixed"&&r!==this.type)throw new bn(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new bn(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const h=""+n,u=""+o;if(o=arguments[2],l=zd(this,h,u,r),!l)throw new _r(`Graph.${t}: could not find an edge for the given path ("${h}" - "${u}").`)}else{if(r!=="mixed")throw new bn(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,l=this._edges.get(n),!l)throw new _r(`Graph.${t}: could not find the "${n}" edge in the graph.`)}return delete l.attributes[o],this.emit("edgeAttributesUpdated",{key:l.key,type:"remove",attributes:l.attributes,name:o}),this}}function Y9(e,t,r){e.prototype[t]=function(n,o){let l;if(this.type!=="mixed"&&r!=="mixed"&&r!==this.type)throw new bn(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new bn(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const h=""+n,u=""+o;if(o=arguments[2],l=zd(this,h,u,r),!l)throw new _r(`Graph.${t}: could not find an edge for the given path ("${h}" - "${u}").`)}else{if(r!=="mixed")throw new bn(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,l=this._edges.get(n),!l)throw new _r(`Graph.${t}: could not find the "${n}" edge in the graph.`)}if(!Nl(o))throw new Rr(`Graph.${t}: provided attributes are not a plain object.`);return l.attributes=o,this.emit("edgeAttributesUpdated",{key:l.key,type:"replace",attributes:l.attributes}),this}}function J9(e,t,r){e.prototype[t]=function(n,o){let l;if(this.type!=="mixed"&&r!=="mixed"&&r!==this.type)throw new bn(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new bn(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const h=""+n,u=""+o;if(o=arguments[2],l=zd(this,h,u,r),!l)throw new _r(`Graph.${t}: could not find an edge for the given path ("${h}" - "${u}").`)}else{if(r!=="mixed")throw new bn(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,l=this._edges.get(n),!l)throw new _r(`Graph.${t}: could not find the "${n}" edge in the graph.`)}if(!Nl(o))throw new Rr(`Graph.${t}: provided attributes are not a plain object.`);return Gs(l.attributes,o),this.emit("edgeAttributesUpdated",{key:l.key,type:"merge",attributes:l.attributes,data:o}),this}}function Q9(e,t,r){e.prototype[t]=function(n,o){let l;if(this.type!=="mixed"&&r!=="mixed"&&r!==this.type)throw new bn(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new bn(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const h=""+n,u=""+o;if(o=arguments[2],l=zd(this,h,u,r),!l)throw new _r(`Graph.${t}: could not find an edge for the given path ("${h}" - "${u}").`)}else{if(r!=="mixed")throw new bn(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,l=this._edges.get(n),!l)throw new _r(`Graph.${t}: could not find the "${n}" edge in the graph.`)}if(typeof o!="function")throw new Rr(`Graph.${t}: provided updater is not a function.`);return l.attributes=o(l.attributes),this.emit("edgeAttributesUpdated",{key:l.key,type:"update",attributes:l.attributes}),this}}const eN=[{name:e=>`get${e}Attribute`,attacher:q9},{name:e=>`get${e}Attributes`,attacher:W9},{name:e=>`has${e}Attribute`,attacher:H9},{name:e=>`set${e}Attribute`,attacher:Z9},{name:e=>`update${e}Attribute`,attacher:K9},{name:e=>`remove${e}Attribute`,attacher:X9},{name:e=>`replace${e}Attributes`,attacher:Y9},{name:e=>`merge${e}Attributes`,attacher:J9},{name:e=>`update${e}Attributes`,attacher:Q9}];function tN(e){eN.forEach(function({name:t,attacher:r}){r(e,t("Edge"),"mixed"),r(e,t("DirectedEdge"),"directed"),r(e,t("UndirectedEdge"),"undirected")})}const rN=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function nN(e,t,r,n){let o=!1;for(const l in t){if(l===n)continue;const h=t[l];if(o=r(h.key,h.attributes,h.source.key,h.target.key,h.source.attributes,h.target.attributes,h.undirected),e&&o)return h.key}}function iN(e,t,r,n){let o,l,h,u=!1;for(const v in t)if(v!==n){o=t[v];do{if(l=o.source,h=o.target,u=r(o.key,o.attributes,l.key,h.key,l.attributes,h.attributes,o.undirected),e&&u)return o.key;o=o.next}while(o!==void 0)}}function Gb(e,t){const r=Object.keys(e),n=r.length;let o,l=0;return new Ld(function(){do if(o)o=o.next;else{if(l>=n)return{done:!0};const u=r[l++];if(u===t){o=void 0;continue}o=e[u]}while(!o);return{done:!1,value:{edge:o.key,attributes:o.attributes,source:o.source.key,target:o.target.key,sourceAttributes:o.source.attributes,targetAttributes:o.target.attributes,undirected:o.undirected}}})}function aN(e,t,r,n){const o=t[r];if(!o)return;const l=o.source,h=o.target;if(n(o.key,o.attributes,l.key,h.key,l.attributes,h.attributes,o.undirected)&&e)return o.key}function oN(e,t,r,n){let o=t[r];if(!o)return;let l=!1;do{if(l=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),e&&l)return o.key;o=o.next}while(o!==void 0)}function Ub(e,t){let r=e[t];return r.next!==void 0?new Ld(function(){if(!r)return{done:!0};const n={edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected};return r=r.next,{done:!1,value:n}}):Ld.of({edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected})}function sN(e,t){if(e.size===0)return[];if(t==="mixed"||t===e.type)return typeof Array.from=="function"?Array.from(e._edges.keys()):dD(e._edges.keys(),e._edges.size);const r=t==="undirected"?e.undirectedSize:e.directedSize,n=new Array(r),o=t==="undirected",l=e._edges.values();let h=0,u,v;for(;u=l.next(),u.done!==!0;)v=u.value,v.undirected===o&&(n[h++]=v.key);return n}function xD(e,t,r,n){if(t.size===0)return;const o=r!=="mixed"&&r!==t.type,l=r==="undirected";let h,u,v=!1;const x=t._edges.values();for(;h=x.next(),h.done!==!0;){if(u=h.value,o&&u.undirected!==l)continue;const{key:A,attributes:C,source:P,target:O}=u;if(v=n(A,C,P.key,O.key,P.attributes,O.attributes,u.undirected),e&&v)return A}}function lN(e,t){if(e.size===0)return Ld.empty();const r=t!=="mixed"&&t!==e.type,n=t==="undirected",o=e._edges.values();return new Ld(function(){let h,u;for(;;){if(h=o.next(),h.done)return h;if(u=h.value,!(r&&u.undirected!==n))break}return{value:{edge:u.key,attributes:u.attributes,source:u.source.key,target:u.target.key,sourceAttributes:u.source.attributes,targetAttributes:u.target.attributes,undirected:u.undirected},done:!1}})}function pE(e,t,r,n,o,l){const h=t?iN:nN;let u;if(r!=="undirected"&&(n!=="out"&&(u=h(e,o.in,l),e&&u)||n!=="in"&&(u=h(e,o.out,l,n?void 0:o.key),e&&u))||r!=="directed"&&(u=h(e,o.undirected,l),e&&u))return u}function uN(e,t,r,n){const o=[];return pE(!1,e,t,r,n,function(l){o.push(l)}),o}function cN(e,t,r){let n=Ld.empty();return e!=="undirected"&&(t!=="out"&&typeof r.in<"u"&&(n=Gp(n,Gb(r.in))),t!=="in"&&typeof r.out<"u"&&(n=Gp(n,Gb(r.out,t?void 0:r.key)))),e!=="directed"&&typeof r.undirected<"u"&&(n=Gp(n,Gb(r.undirected))),n}function gE(e,t,r,n,o,l,h){const u=r?oN:aN;let v;if(t!=="undirected"&&(typeof o.in<"u"&&n!=="out"&&(v=u(e,o.in,l,h),e&&v)||typeof o.out<"u"&&n!=="in"&&(n||o.key!==l)&&(v=u(e,o.out,l,h),e&&v))||t!=="directed"&&typeof o.undirected<"u"&&(v=u(e,o.undirected,l,h),e&&v))return v}function dN(e,t,r,n,o){const l=[];return gE(!1,e,t,r,n,o,function(h){l.push(h)}),l}function hN(e,t,r,n){let o=Ld.empty();return e!=="undirected"&&(typeof r.in<"u"&&t!=="out"&&n in r.in&&(o=Gp(o,Ub(r.in,n))),typeof r.out<"u"&&t!=="in"&&n in r.out&&(t||r.key!==n)&&(o=Gp(o,Ub(r.out,n)))),e!=="directed"&&typeof r.undirected<"u"&&n in r.undirected&&(o=Gp(o,Ub(r.undirected,n))),o}function fN(e,t){const{name:r,type:n,direction:o}=t;e.prototype[r]=function(l,h){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return[];if(!arguments.length)return sN(this,n);if(arguments.length===1){l=""+l;const u=this._nodes.get(l);if(typeof u>"u")throw new _r(`Graph.${r}: could not find the "${l}" node in the graph.`);return uN(this.multi,n==="mixed"?this.type:n,o,u)}if(arguments.length===2){l=""+l,h=""+h;const u=this._nodes.get(l);if(!u)throw new _r(`Graph.${r}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(h))throw new _r(`Graph.${r}:  could not find the "${h}" target node in the graph.`);return dN(n,this.multi,o,u,h)}throw new Rr(`Graph.${r}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function pN(e,t){const{name:r,type:n,direction:o}=t,l="forEach"+r[0].toUpperCase()+r.slice(1,-1);e.prototype[l]=function(x,A,C){if(!(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)){if(arguments.length===1)return C=x,xD(!1,this,n,C);if(arguments.length===2){x=""+x,C=A;const P=this._nodes.get(x);if(typeof P>"u")throw new _r(`Graph.${l}: could not find the "${x}" node in the graph.`);return pE(!1,this.multi,n==="mixed"?this.type:n,o,P,C)}if(arguments.length===3){x=""+x,A=""+A;const P=this._nodes.get(x);if(!P)throw new _r(`Graph.${l}:  could not find the "${x}" source node in the graph.`);if(!this._nodes.has(A))throw new _r(`Graph.${l}:  could not find the "${A}" target node in the graph.`);return gE(!1,n,this.multi,o,P,A,C)}throw new Rr(`Graph.${l}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const h="map"+r[0].toUpperCase()+r.slice(1);e.prototype[h]=function(){const x=Array.prototype.slice.call(arguments),A=x.pop();let C;if(x.length===0){let P=0;n!=="directed"&&(P+=this.undirectedSize),n!=="undirected"&&(P+=this.directedSize),C=new Array(P);let O=0;x.push((U,W,G,X,ae,ne,ue)=>{C[O++]=A(U,W,G,X,ae,ne,ue)})}else C=[],x.push((P,O,U,W,G,X,ae)=>{C.push(A(P,O,U,W,G,X,ae))});return this[l].apply(this,x),C};const u="filter"+r[0].toUpperCase()+r.slice(1);e.prototype[u]=function(){const x=Array.prototype.slice.call(arguments),A=x.pop(),C=[];return x.push((P,O,U,W,G,X,ae)=>{A(P,O,U,W,G,X,ae)&&C.push(P)}),this[l].apply(this,x),C};const v="reduce"+r[0].toUpperCase()+r.slice(1);e.prototype[v]=function(){let x=Array.prototype.slice.call(arguments);if(x.length<2||x.length>4)throw new Rr(`Graph.${v}: invalid number of arguments (expecting 2, 3 or 4 and got ${x.length}).`);if(typeof x[x.length-1]=="function"&&typeof x[x.length-2]!="function")throw new Rr(`Graph.${v}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let A,C;x.length===2?(A=x[0],C=x[1],x=[]):x.length===3?(A=x[1],C=x[2],x=[x[0]]):x.length===4&&(A=x[2],C=x[3],x=[x[0],x[1]]);let P=C;return x.push((O,U,W,G,X,ae,ne)=>{P=A(P,O,U,W,G,X,ae,ne)}),this[l].apply(this,x),P}}function gN(e,t){const{name:r,type:n,direction:o}=t,l="find"+r[0].toUpperCase()+r.slice(1,-1);e.prototype[l]=function(v,x,A){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return!1;if(arguments.length===1)return A=v,xD(!0,this,n,A);if(arguments.length===2){v=""+v,A=x;const C=this._nodes.get(v);if(typeof C>"u")throw new _r(`Graph.${l}: could not find the "${v}" node in the graph.`);return pE(!0,this.multi,n==="mixed"?this.type:n,o,C,A)}if(arguments.length===3){v=""+v,x=""+x;const C=this._nodes.get(v);if(!C)throw new _r(`Graph.${l}:  could not find the "${v}" source node in the graph.`);if(!this._nodes.has(x))throw new _r(`Graph.${l}:  could not find the "${x}" target node in the graph.`);return gE(!0,n,this.multi,o,C,x,A)}throw new Rr(`Graph.${l}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const h="some"+r[0].toUpperCase()+r.slice(1,-1);e.prototype[h]=function(){const v=Array.prototype.slice.call(arguments),x=v.pop();return v.push((C,P,O,U,W,G,X)=>x(C,P,O,U,W,G,X)),!!this[l].apply(this,v)};const u="every"+r[0].toUpperCase()+r.slice(1,-1);e.prototype[u]=function(){const v=Array.prototype.slice.call(arguments),x=v.pop();return v.push((C,P,O,U,W,G,X)=>!x(C,P,O,U,W,G,X)),!this[l].apply(this,v)}}function mN(e,t){const{name:r,type:n,direction:o}=t,l=r.slice(0,-1)+"Entries";e.prototype[l]=function(h,u){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return Ld.empty();if(!arguments.length)return lN(this,n);if(arguments.length===1){h=""+h;const v=this._nodes.get(h);if(!v)throw new _r(`Graph.${l}: could not find the "${h}" node in the graph.`);return cN(n,o,v)}if(arguments.length===2){h=""+h,u=""+u;const v=this._nodes.get(h);if(!v)throw new _r(`Graph.${l}:  could not find the "${h}" source node in the graph.`);if(!this._nodes.has(u))throw new _r(`Graph.${l}:  could not find the "${u}" target node in the graph.`);return hN(n,o,v,u)}throw new Rr(`Graph.${l}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function yN(e){rN.forEach(t=>{fN(e,t),pN(e,t),gN(e,t),mN(e,t)})}const vN=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function E_(){this.A=null,this.B=null}E_.prototype.wrap=function(e){this.A===null?this.A=e:this.B===null&&(this.B=e)};E_.prototype.has=function(e){return this.A!==null&&e in this.A||this.B!==null&&e in this.B};function lv(e,t,r,n,o){for(const l in n){const h=n[l],u=h.source,v=h.target,x=u===r?v:u;if(t&&t.has(x.key))continue;const A=o(x.key,x.attributes);if(e&&A)return x.key}}function mE(e,t,r,n,o){if(t!=="mixed"){if(t==="undirected")return lv(e,null,n,n.undirected,o);if(typeof r=="string")return lv(e,null,n,n[r],o)}const l=new E_;let h;if(t!=="undirected"){if(r!=="out"){if(h=lv(e,null,n,n.in,o),e&&h)return h;l.wrap(n.in)}if(r!=="in"){if(h=lv(e,l,n,n.out,o),e&&h)return h;l.wrap(n.out)}}if(t!=="directed"&&(h=lv(e,l,n,n.undirected,o),e&&h))return h}function xN(e,t,r){if(e!=="mixed"){if(e==="undirected")return Object.keys(r.undirected);if(typeof t=="string")return Object.keys(r[t])}const n=[];return mE(!1,e,t,r,function(o){n.push(o)}),n}function uv(e,t,r){const n=Object.keys(r),o=n.length;let l=0;return new Ld(function(){let u=null;do{if(l>=o)return e&&e.wrap(r),{done:!0};const v=r[n[l++]],x=v.source,A=v.target;if(u=x===t?A:x,e&&e.has(u.key)){u=null;continue}}while(u===null);return{done:!1,value:{neighbor:u.key,attributes:u.attributes}}})}function _N(e,t,r){if(e!=="mixed"){if(e==="undirected")return uv(null,r,r.undirected);if(typeof t=="string")return uv(null,r,r[t])}let n=Ld.empty();const o=new E_;return e!=="undirected"&&(t!=="out"&&(n=Gp(n,uv(o,r,r.in))),t!=="in"&&(n=Gp(n,uv(o,r,r.out)))),e!=="directed"&&(n=Gp(n,uv(o,r,r.undirected))),n}function bN(e,t){const{name:r,type:n,direction:o}=t;e.prototype[r]=function(l){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return[];l=""+l;const h=this._nodes.get(l);if(typeof h>"u")throw new _r(`Graph.${r}: could not find the "${l}" node in the graph.`);return xN(n==="mixed"?this.type:n,o,h)}}function wN(e,t){const{name:r,type:n,direction:o}=t,l="forEach"+r[0].toUpperCase()+r.slice(1,-1);e.prototype[l]=function(x,A){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return;x=""+x;const C=this._nodes.get(x);if(typeof C>"u")throw new _r(`Graph.${l}: could not find the "${x}" node in the graph.`);mE(!1,n==="mixed"?this.type:n,o,C,A)};const h="map"+r[0].toUpperCase()+r.slice(1);e.prototype[h]=function(x,A){const C=[];return this[l](x,(P,O)=>{C.push(A(P,O))}),C};const u="filter"+r[0].toUpperCase()+r.slice(1);e.prototype[u]=function(x,A){const C=[];return this[l](x,(P,O)=>{A(P,O)&&C.push(P)}),C};const v="reduce"+r[0].toUpperCase()+r.slice(1);e.prototype[v]=function(x,A,C){if(arguments.length<3)throw new Rr(`Graph.${v}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let P=C;return this[l](x,(O,U)=>{P=A(P,O,U)}),P}}function SN(e,t){const{name:r,type:n,direction:o}=t,l=r[0].toUpperCase()+r.slice(1,-1),h="find"+l;e.prototype[h]=function(x,A){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return;x=""+x;const C=this._nodes.get(x);if(typeof C>"u")throw new _r(`Graph.${h}: could not find the "${x}" node in the graph.`);return mE(!0,n==="mixed"?this.type:n,o,C,A)};const u="some"+l;e.prototype[u]=function(x,A){return!!this[h](x,A)};const v="every"+l;e.prototype[v]=function(x,A){return!this[h](x,(P,O)=>!A(P,O))}}function EN(e,t){const{name:r,type:n,direction:o}=t,l=r.slice(0,-1)+"Entries";e.prototype[l]=function(h){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return Ld.empty();h=""+h;const u=this._nodes.get(h);if(typeof u>"u")throw new _r(`Graph.${l}: could not find the "${h}" node in the graph.`);return _N(n==="mixed"?this.type:n,o,u)}}function AN(e){vN.forEach(t=>{bN(e,t),wN(e,t),SN(e,t),EN(e,t)})}function Ux(e,t,r,n,o){const l=n._nodes.values(),h=n.type;let u,v,x,A,C,P;for(;u=l.next(),u.done!==!0;){let O=!1;if(v=u.value,h!=="undirected"){A=v.out;for(x in A){C=A[x];do P=C.target,O=!0,o(v.key,P.key,v.attributes,P.attributes,C.key,C.attributes,C.undirected),C=C.next;while(C)}}if(h!=="directed"){A=v.undirected;for(x in A)if(!(t&&v.key>x)){C=A[x];do P=C.target,P.key!==x&&(P=C.source),O=!0,o(v.key,P.key,v.attributes,P.attributes,C.key,C.attributes,C.undirected),C=C.next;while(C)}}r&&!O&&o(v.key,null,v.attributes,null,null,null,null)}}function kN(e,t){const r={key:e};return hD(t.attributes)||(r.attributes=Gs({},t.attributes)),r}function CN(e,t,r){const n={key:t,source:r.source.key,target:r.target.key};return hD(r.attributes)||(n.attributes=Gs({},r.attributes)),e==="mixed"&&r.undirected&&(n.undirected=!0),n}function TN(e){if(!Nl(e))throw new Rr('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in e))throw new Rr("Graph.import: serialized node is missing its key.");if("attributes"in e&&(!Nl(e.attributes)||e.attributes===null))throw new Rr("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function DN(e){if(!Nl(e))throw new Rr('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in e))throw new Rr("Graph.import: serialized edge is missing its source.");if(!("target"in e))throw new Rr("Graph.import: serialized edge is missing its target.");if("attributes"in e&&(!Nl(e.attributes)||e.attributes===null))throw new Rr("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in e&&typeof e.undirected!="boolean")throw new Rr("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const MN=P9(),zN=new Set(["directed","undirected","mixed"]),mk=new Set(["domain","_events","_eventsCount","_maxListeners"]),PN=[{name:e=>`${e}Edge`,generateKey:!0},{name:e=>`${e}DirectedEdge`,generateKey:!0,type:"directed"},{name:e=>`${e}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:e=>`${e}EdgeWithKey`},{name:e=>`${e}DirectedEdgeWithKey`,type:"directed"},{name:e=>`${e}UndirectedEdgeWithKey`,type:"undirected"}],LN={allowSelfLoops:!0,multi:!1,type:"mixed"};function IN(e,t,r){if(r&&!Nl(r))throw new Rr(`Graph.addNode: invalid attributes. Expecting an object but got "${r}"`);if(t=""+t,r=r||{},e._nodes.has(t))throw new bn(`Graph.addNode: the "${t}" node already exist in the graph.`);const n=new e.NodeDataClass(t,r);return e._nodes.set(t,n),e.emit("nodeAdded",{key:t,attributes:r}),n}function yk(e,t,r){const n=new e.NodeDataClass(t,r);return e._nodes.set(t,n),e.emit("nodeAdded",{key:t,attributes:r}),n}function _D(e,t,r,n,o,l,h,u){if(!n&&e.type==="undirected")throw new bn(`Graph.${t}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(n&&e.type==="directed")throw new bn(`Graph.${t}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(u&&!Nl(u))throw new Rr(`Graph.${t}: invalid attributes. Expecting an object but got "${u}"`);if(l=""+l,h=""+h,u=u||{},!e.allowSelfLoops&&l===h)throw new bn(`Graph.${t}: source & target are the same ("${l}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const v=e._nodes.get(l),x=e._nodes.get(h);if(!v)throw new _r(`Graph.${t}: source node "${l}" not found.`);if(!x)throw new _r(`Graph.${t}: target node "${h}" not found.`);const A={key:null,undirected:n,source:l,target:h,attributes:u};if(r)o=e._edgeKeyGenerator();else if(o=""+o,e._edges.has(o))throw new bn(`Graph.${t}: the "${o}" edge already exists in the graph.`);if(!e.multi&&(n?typeof v.undirected[h]<"u":typeof v.out[h]<"u"))throw new bn(`Graph.${t}: an edge linking "${l}" to "${h}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const C=new P0(n,o,v,x,u);e._edges.set(o,C);const P=l===h;return n?(v.undirectedDegree++,x.undirectedDegree++,P&&(v.undirectedLoops++,e._undirectedSelfLoopCount++)):(v.outDegree++,x.inDegree++,P&&(v.directedLoops++,e._directedSelfLoopCount++)),e.multi?C.attachMulti():C.attach(),n?e._undirectedSize++:e._directedSize++,A.key=o,e.emit("edgeAdded",A),o}function ON(e,t,r,n,o,l,h,u,v){if(!n&&e.type==="undirected")throw new bn(`Graph.${t}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(n&&e.type==="directed")throw new bn(`Graph.${t}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(u){if(v){if(typeof u!="function")throw new Rr(`Graph.${t}: invalid updater function. Expecting a function but got "${u}"`)}else if(!Nl(u))throw new Rr(`Graph.${t}: invalid attributes. Expecting an object but got "${u}"`)}l=""+l,h=""+h;let x;if(v&&(x=u,u=void 0),!e.allowSelfLoops&&l===h)throw new bn(`Graph.${t}: source & target are the same ("${l}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let A=e._nodes.get(l),C=e._nodes.get(h),P,O;if(!r&&(P=e._edges.get(o),P)){if((P.source.key!==l||P.target.key!==h)&&(!n||P.source.key!==h||P.target.key!==l))throw new bn(`Graph.${t}: inconsistency detected when attempting to merge the "${o}" edge with "${l}" source & "${h}" target vs. ("${P.source.key}", "${P.target.key}").`);O=P}if(!O&&!e.multi&&A&&(O=n?A.undirected[h]:A.out[h]),O){const ae=[O.key,!1,!1,!1];if(v?!x:!u)return ae;if(v){const ne=O.attributes;O.attributes=x(ne),e.emit("edgeAttributesUpdated",{type:"replace",key:O.key,attributes:O.attributes})}else Gs(O.attributes,u),e.emit("edgeAttributesUpdated",{type:"merge",key:O.key,attributes:O.attributes,data:u});return ae}u=u||{},v&&x&&(u=x(u));const U={key:null,undirected:n,source:l,target:h,attributes:u};if(r)o=e._edgeKeyGenerator();else if(o=""+o,e._edges.has(o))throw new bn(`Graph.${t}: the "${o}" edge already exists in the graph.`);let W=!1,G=!1;A||(A=yk(e,l,{}),W=!0,l===h&&(C=A,G=!0)),C||(C=yk(e,h,{}),G=!0),P=new P0(n,o,A,C,u),e._edges.set(o,P);const X=l===h;return n?(A.undirectedDegree++,C.undirectedDegree++,X&&(A.undirectedLoops++,e._undirectedSelfLoopCount++)):(A.outDegree++,C.inDegree++,X&&(A.directedLoops++,e._directedSelfLoopCount++)),e.multi?P.attachMulti():P.attach(),n?e._undirectedSize++:e._directedSize++,U.key=o,e.emit("edgeAdded",U),[o,!0,W,G]}function e0(e,t){e._edges.delete(t.key);const{source:r,target:n,attributes:o}=t,l=t.undirected,h=r===n;l?(r.undirectedDegree--,n.undirectedDegree--,h&&(r.undirectedLoops--,e._undirectedSelfLoopCount--)):(r.outDegree--,n.inDegree--,h&&(r.directedLoops--,e._directedSelfLoopCount--)),e.multi?t.detachMulti():t.detach(),l?e._undirectedSize--:e._directedSize--,e.emit("edgeDropped",{key:t.key,attributes:o,source:r.key,target:n.key,undirected:l})}class ua extends rE.EventEmitter{constructor(t){if(super(),t=Gs({},LN,t),typeof t.multi!="boolean")throw new Rr(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${t.multi}".`);if(!zN.has(t.type))throw new Rr(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${t.type}".`);if(typeof t.allowSelfLoops!="boolean")throw new Rr(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${t.allowSelfLoops}".`);const r=t.type==="mixed"?fD:t.type==="directed"?pD:gD;Ed(this,"NodeDataClass",r);const n="geid_"+MN()+"_";let o=0;const l=()=>{let h;do h=n+o++;while(this._edges.has(h));return h};Ed(this,"_attributes",{}),Ed(this,"_nodes",new Map),Ed(this,"_edges",new Map),Ed(this,"_directedSize",0),Ed(this,"_undirectedSize",0),Ed(this,"_directedSelfLoopCount",0),Ed(this,"_undirectedSelfLoopCount",0),Ed(this,"_edgeKeyGenerator",l),Ed(this,"_options",t),mk.forEach(h=>Ed(this,h,this[h])),_h(this,"order",()=>this._nodes.size),_h(this,"size",()=>this._edges.size),_h(this,"directedSize",()=>this._directedSize),_h(this,"undirectedSize",()=>this._undirectedSize),_h(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),_h(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),_h(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),_h(this,"multi",this._options.multi),_h(this,"type",this._options.type),_h(this,"allowSelfLoops",this._options.allowSelfLoops),_h(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(t){return this._nodes.has(""+t)}hasDirectedEdge(t,r){if(this.type==="undirected")return!1;if(arguments.length===1){const n=""+t,o=this._edges.get(n);return!!o&&!o.undirected}else if(arguments.length===2){t=""+t,r=""+r;const n=this._nodes.get(t);return n?n.out.hasOwnProperty(r):!1}throw new Rr(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(t,r){if(this.type==="directed")return!1;if(arguments.length===1){const n=""+t,o=this._edges.get(n);return!!o&&o.undirected}else if(arguments.length===2){t=""+t,r=""+r;const n=this._nodes.get(t);return n?n.undirected.hasOwnProperty(r):!1}throw new Rr(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(t,r){if(arguments.length===1){const n=""+t;return this._edges.has(n)}else if(arguments.length===2){t=""+t,r=""+r;const n=this._nodes.get(t);return n?typeof n.out<"u"&&n.out.hasOwnProperty(r)||typeof n.undirected<"u"&&n.undirected.hasOwnProperty(r):!1}throw new Rr(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(t,r){if(this.type==="undirected")return;if(t=""+t,r=""+r,this.multi)throw new bn("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const n=this._nodes.get(t);if(!n)throw new _r(`Graph.directedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(r))throw new _r(`Graph.directedEdge: could not find the "${r}" target node in the graph.`);const o=n.out&&n.out[r]||void 0;if(o)return o.key}undirectedEdge(t,r){if(this.type==="directed")return;if(t=""+t,r=""+r,this.multi)throw new bn("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const n=this._nodes.get(t);if(!n)throw new _r(`Graph.undirectedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(r))throw new _r(`Graph.undirectedEdge: could not find the "${r}" target node in the graph.`);const o=n.undirected&&n.undirected[r]||void 0;if(o)return o.key}edge(t,r){if(this.multi)throw new bn("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");t=""+t,r=""+r;const n=this._nodes.get(t);if(!n)throw new _r(`Graph.edge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(r))throw new _r(`Graph.edge: could not find the "${r}" target node in the graph.`);const o=n.out&&n.out[r]||n.undirected&&n.undirected[r]||void 0;if(o)return o.key}areDirectedNeighbors(t,r){t=""+t,r=""+r;const n=this._nodes.get(t);if(!n)throw new _r(`Graph.areDirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:r in n.in||r in n.out}areOutNeighbors(t,r){t=""+t,r=""+r;const n=this._nodes.get(t);if(!n)throw new _r(`Graph.areOutNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:r in n.out}areInNeighbors(t,r){t=""+t,r=""+r;const n=this._nodes.get(t);if(!n)throw new _r(`Graph.areInNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:r in n.in}areUndirectedNeighbors(t,r){t=""+t,r=""+r;const n=this._nodes.get(t);if(!n)throw new _r(`Graph.areUndirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="directed"?!1:r in n.undirected}areNeighbors(t,r){t=""+t,r=""+r;const n=this._nodes.get(t);if(!n)throw new _r(`Graph.areNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&(r in n.in||r in n.out)||this.type!=="directed"&&r in n.undirected}areInboundNeighbors(t,r){t=""+t,r=""+r;const n=this._nodes.get(t);if(!n)throw new _r(`Graph.areInboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&r in n.in||this.type!=="directed"&&r in n.undirected}areOutboundNeighbors(t,r){t=""+t,r=""+r;const n=this._nodes.get(t);if(!n)throw new _r(`Graph.areOutboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&r in n.out||this.type!=="directed"&&r in n.undirected}inDegree(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new _r(`Graph.inDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:r.inDegree}outDegree(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new _r(`Graph.outDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:r.outDegree}directedDegree(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new _r(`Graph.directedDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:r.inDegree+r.outDegree}undirectedDegree(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new _r(`Graph.undirectedDegree: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:r.undirectedDegree}inboundDegree(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new _r(`Graph.inboundDegree: could not find the "${t}" node in the graph.`);let n=0;return this.type!=="directed"&&(n+=r.undirectedDegree),this.type!=="undirected"&&(n+=r.inDegree),n}outboundDegree(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new _r(`Graph.outboundDegree: could not find the "${t}" node in the graph.`);let n=0;return this.type!=="directed"&&(n+=r.undirectedDegree),this.type!=="undirected"&&(n+=r.outDegree),n}degree(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new _r(`Graph.degree: could not find the "${t}" node in the graph.`);let n=0;return this.type!=="directed"&&(n+=r.undirectedDegree),this.type!=="undirected"&&(n+=r.inDegree+r.outDegree),n}inDegreeWithoutSelfLoops(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new _r(`Graph.inDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:r.inDegree-r.directedLoops}outDegreeWithoutSelfLoops(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new _r(`Graph.outDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:r.outDegree-r.directedLoops}directedDegreeWithoutSelfLoops(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new _r(`Graph.directedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:r.inDegree+r.outDegree-r.directedLoops*2}undirectedDegreeWithoutSelfLoops(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new _r(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:r.undirectedDegree-r.undirectedLoops*2}inboundDegreeWithoutSelfLoops(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new _r(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let n=0,o=0;return this.type!=="directed"&&(n+=r.undirectedDegree,o+=r.undirectedLoops*2),this.type!=="undirected"&&(n+=r.inDegree,o+=r.directedLoops),n-o}outboundDegreeWithoutSelfLoops(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new _r(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let n=0,o=0;return this.type!=="directed"&&(n+=r.undirectedDegree,o+=r.undirectedLoops*2),this.type!=="undirected"&&(n+=r.outDegree,o+=r.directedLoops),n-o}degreeWithoutSelfLoops(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new _r(`Graph.degreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let n=0,o=0;return this.type!=="directed"&&(n+=r.undirectedDegree,o+=r.undirectedLoops*2),this.type!=="undirected"&&(n+=r.inDegree+r.outDegree,o+=r.directedLoops*2),n-o}source(t){t=""+t;const r=this._edges.get(t);if(!r)throw new _r(`Graph.source: could not find the "${t}" edge in the graph.`);return r.source.key}target(t){t=""+t;const r=this._edges.get(t);if(!r)throw new _r(`Graph.target: could not find the "${t}" edge in the graph.`);return r.target.key}extremities(t){t=""+t;const r=this._edges.get(t);if(!r)throw new _r(`Graph.extremities: could not find the "${t}" edge in the graph.`);return[r.source.key,r.target.key]}opposite(t,r){t=""+t,r=""+r;const n=this._edges.get(r);if(!n)throw new _r(`Graph.opposite: could not find the "${r}" edge in the graph.`);const o=n.source.key,l=n.target.key;if(t===o)return l;if(t===l)return o;throw new _r(`Graph.opposite: the "${t}" node is not attached to the "${r}" edge (${o}, ${l}).`)}hasExtremity(t,r){t=""+t,r=""+r;const n=this._edges.get(t);if(!n)throw new _r(`Graph.hasExtremity: could not find the "${t}" edge in the graph.`);return n.source.key===r||n.target.key===r}isUndirected(t){t=""+t;const r=this._edges.get(t);if(!r)throw new _r(`Graph.isUndirected: could not find the "${t}" edge in the graph.`);return r.undirected}isDirected(t){t=""+t;const r=this._edges.get(t);if(!r)throw new _r(`Graph.isDirected: could not find the "${t}" edge in the graph.`);return!r.undirected}isSelfLoop(t){t=""+t;const r=this._edges.get(t);if(!r)throw new _r(`Graph.isSelfLoop: could not find the "${t}" edge in the graph.`);return r.source===r.target}addNode(t,r){return IN(this,t,r).key}mergeNode(t,r){if(r&&!Nl(r))throw new Rr(`Graph.mergeNode: invalid attributes. Expecting an object but got "${r}"`);t=""+t,r=r||{};let n=this._nodes.get(t);return n?(r&&(Gs(n.attributes,r),this.emit("nodeAttributesUpdated",{type:"merge",key:t,attributes:n.attributes,data:r})),[t,!1]):(n=new this.NodeDataClass(t,r),this._nodes.set(t,n),this.emit("nodeAdded",{key:t,attributes:r}),[t,!0])}updateNode(t,r){if(r&&typeof r!="function")throw new Rr(`Graph.updateNode: invalid updater function. Expecting a function but got "${r}"`);t=""+t;let n=this._nodes.get(t);if(n){if(r){const l=n.attributes;n.attributes=r(l),this.emit("nodeAttributesUpdated",{type:"replace",key:t,attributes:n.attributes})}return[t,!1]}const o=r?r({}):{};return n=new this.NodeDataClass(t,o),this._nodes.set(t,n),this.emit("nodeAdded",{key:t,attributes:o}),[t,!0]}dropNode(t){t=""+t;const r=this._nodes.get(t);if(!r)throw new _r(`Graph.dropNode: could not find the "${t}" node in the graph.`);let n;if(this.type!=="undirected"){for(const o in r.out){n=r.out[o];do e0(this,n),n=n.next;while(n)}for(const o in r.in){n=r.in[o];do e0(this,n),n=n.next;while(n)}}if(this.type!=="directed")for(const o in r.undirected){n=r.undirected[o];do e0(this,n),n=n.next;while(n)}this._nodes.delete(t),this.emit("nodeDropped",{key:t,attributes:r.attributes})}dropEdge(t){let r;if(arguments.length>1){const n=""+arguments[0],o=""+arguments[1];if(r=zd(this,n,o,this.type),!r)throw new _r(`Graph.dropEdge: could not find the "${n}" -> "${o}" edge in the graph.`)}else if(t=""+t,r=this._edges.get(t),!r)throw new _r(`Graph.dropEdge: could not find the "${t}" edge in the graph.`);return e0(this,r),this}dropDirectedEdge(t,r){if(arguments.length<2)throw new bn("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new bn("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");t=""+t,r=""+r;const n=zd(this,t,r,"directed");if(!n)throw new _r(`Graph.dropDirectedEdge: could not find a "${t}" -> "${r}" edge in the graph.`);return e0(this,n),this}dropUndirectedEdge(t,r){if(arguments.length<2)throw new bn("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new bn("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const n=zd(this,t,r,"undirected");if(!n)throw new _r(`Graph.dropUndirectedEdge: could not find a "${t}" -> "${r}" edge in the graph.`);return e0(this,n),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const t=this._nodes.values();let r;for(;r=t.next(),r.done!==!0;)r.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(t){return this._attributes[t]}getAttributes(){return this._attributes}hasAttribute(t){return this._attributes.hasOwnProperty(t)}setAttribute(t,r){return this._attributes[t]=r,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}updateAttribute(t,r){if(typeof r!="function")throw new Rr("Graph.updateAttribute: updater should be a function.");const n=this._attributes[t];return this._attributes[t]=r(n),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}removeAttribute(t){return delete this._attributes[t],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:t}),this}replaceAttributes(t){if(!Nl(t))throw new Rr("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=t,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(t){if(!Nl(t))throw new Rr("Graph.mergeAttributes: provided attributes are not a plain object.");return Gs(this._attributes,t),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:t}),this}updateAttributes(t){if(typeof t!="function")throw new Rr("Graph.updateAttributes: provided updater is not a function.");return this._attributes=t(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(t,r){if(typeof t!="function")throw new Rr("Graph.updateEachNodeAttributes: expecting an updater function.");if(r&&!gk(r))throw new Rr("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const n=this._nodes.values();let o,l;for(;o=n.next(),o.done!==!0;)l=o.value,l.attributes=t(l.key,l.attributes);this.emit("eachNodeAttributesUpdated",{hints:r||null})}updateEachEdgeAttributes(t,r){if(typeof t!="function")throw new Rr("Graph.updateEachEdgeAttributes: expecting an updater function.");if(r&&!gk(r))throw new Rr("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const n=this._edges.values();let o,l,h,u;for(;o=n.next(),o.done!==!0;)l=o.value,h=l.source,u=l.target,l.attributes=t(l.key,l.attributes,h.key,u.key,h.attributes,u.attributes,l.undirected);this.emit("eachEdgeAttributesUpdated",{hints:r||null})}forEachAdjacencyEntry(t){if(typeof t!="function")throw new Rr("Graph.forEachAdjacencyEntry: expecting a callback.");Ux(!1,!1,!1,this,t)}forEachAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new Rr("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Ux(!1,!1,!0,this,t)}forEachAssymetricAdjacencyEntry(t){if(typeof t!="function")throw new Rr("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Ux(!1,!0,!1,this,t)}forEachAssymetricAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new Rr("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Ux(!1,!0,!0,this,t)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):dD(this._nodes.keys(),this._nodes.size)}forEachNode(t){if(typeof t!="function")throw new Rr("Graph.forEachNode: expecting a callback.");const r=this._nodes.values();let n,o;for(;n=r.next(),n.done!==!0;)o=n.value,t(o.key,o.attributes)}findNode(t){if(typeof t!="function")throw new Rr("Graph.findNode: expecting a callback.");const r=this._nodes.values();let n,o;for(;n=r.next(),n.done!==!0;)if(o=n.value,t(o.key,o.attributes))return o.key}mapNodes(t){if(typeof t!="function")throw new Rr("Graph.mapNode: expecting a callback.");const r=this._nodes.values();let n,o;const l=new Array(this.order);let h=0;for(;n=r.next(),n.done!==!0;)o=n.value,l[h++]=t(o.key,o.attributes);return l}someNode(t){if(typeof t!="function")throw new Rr("Graph.someNode: expecting a callback.");const r=this._nodes.values();let n,o;for(;n=r.next(),n.done!==!0;)if(o=n.value,t(o.key,o.attributes))return!0;return!1}everyNode(t){if(typeof t!="function")throw new Rr("Graph.everyNode: expecting a callback.");const r=this._nodes.values();let n,o;for(;n=r.next(),n.done!==!0;)if(o=n.value,!t(o.key,o.attributes))return!1;return!0}filterNodes(t){if(typeof t!="function")throw new Rr("Graph.filterNodes: expecting a callback.");const r=this._nodes.values();let n,o;const l=[];for(;n=r.next(),n.done!==!0;)o=n.value,t(o.key,o.attributes)&&l.push(o.key);return l}reduceNodes(t,r){if(typeof t!="function")throw new Rr("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new Rr("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let n=r;const o=this._nodes.values();let l,h;for(;l=o.next(),l.done!==!0;)h=l.value,n=t(n,h.key,h.attributes);return n}nodeEntries(){const t=this._nodes.values();return new Ld(()=>{const r=t.next();if(r.done)return r;const n=r.value;return{value:{node:n.key,attributes:n.attributes},done:!1}})}export(){const t=new Array(this._nodes.size);let r=0;this._nodes.forEach((o,l)=>{t[r++]=kN(l,o)});const n=new Array(this._edges.size);return r=0,this._edges.forEach((o,l)=>{n[r++]=CN(this.type,l,o)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:t,edges:n}}import(t,r=!1){if(t instanceof ua)return t.forEachNode((v,x)=>{r?this.mergeNode(v,x):this.addNode(v,x)}),t.forEachEdge((v,x,A,C,P,O,U)=>{r?U?this.mergeUndirectedEdgeWithKey(v,A,C,x):this.mergeDirectedEdgeWithKey(v,A,C,x):U?this.addUndirectedEdgeWithKey(v,A,C,x):this.addDirectedEdgeWithKey(v,A,C,x)}),this;if(!Nl(t))throw new Rr("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(t.attributes){if(!Nl(t.attributes))throw new Rr("Graph.import: invalid attributes. Expecting a plain object.");r?this.mergeAttributes(t.attributes):this.replaceAttributes(t.attributes)}let n,o,l,h,u;if(t.nodes){if(l=t.nodes,!Array.isArray(l))throw new Rr("Graph.import: invalid nodes. Expecting an array.");for(n=0,o=l.length;n<o;n++){h=l[n],TN(h);const{key:v,attributes:x}=h;r?this.mergeNode(v,x):this.addNode(v,x)}}if(t.edges){let v=!1;if(this.type==="undirected"&&(v=!0),l=t.edges,!Array.isArray(l))throw new Rr("Graph.import: invalid edges. Expecting an array.");for(n=0,o=l.length;n<o;n++){u=l[n],DN(u);const{source:x,target:A,attributes:C,undirected:P=v}=u;let O;"key"in u?(O=r?P?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:P?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,O.call(this,u.key,x,A,C)):(O=r?P?this.mergeUndirectedEdge:this.mergeDirectedEdge:P?this.addUndirectedEdge:this.addDirectedEdge,O.call(this,x,A,C))}}return this}nullCopy(t){const r=new ua(Gs({},this._options,t));return r.replaceAttributes(Gs({},this.getAttributes())),r}emptyCopy(t){const r=this.nullCopy(t);return this._nodes.forEach((n,o)=>{const l=Gs({},n.attributes);n=new r.NodeDataClass(o,l),r._nodes.set(o,n)}),r}copy(t){if(t=t||{},typeof t.type=="string"&&t.type!==this.type&&t.type!=="mixed")throw new bn(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${t.type}" because this would mean losing information about the current graph.`);if(typeof t.multi=="boolean"&&t.multi!==this.multi&&t.multi!==!0)throw new bn("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof t.allowSelfLoops=="boolean"&&t.allowSelfLoops!==this.allowSelfLoops&&t.allowSelfLoops!==!0)throw new bn("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const r=this.emptyCopy(t),n=this._edges.values();let o,l;for(;o=n.next(),o.done!==!0;)l=o.value,_D(r,"copy",!1,l.undirected,l.key,l.source.key,l.target.key,Gs({},l.attributes));return r}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const t={};this._nodes.forEach((l,h)=>{t[h]=l.attributes});const r={},n={};this._edges.forEach((l,h)=>{const u=l.undirected?"--":"->";let v="",x=l.source.key,A=l.target.key,C;l.undirected&&x>A&&(C=x,x=A,A=C);const P=`(${x})${u}(${A})`;h.startsWith("geid_")?this.multi&&(typeof n[P]>"u"?n[P]=0:n[P]++,v+=`${n[P]}. `):v+=`[${h}]: `,v+=P,r[v]=l.attributes});const o={};for(const l in this)this.hasOwnProperty(l)&&!mk.has(l)&&typeof this[l]!="function"&&typeof l!="symbol"&&(o[l]=this[l]);return o.attributes=this._attributes,o.nodes=t,o.edges=r,Ed(o,"constructor",this.constructor),o}}typeof Symbol<"u"&&(ua.prototype[Symbol.for("nodejs.util.inspect.custom")]=ua.prototype.inspect);PN.forEach(e=>{["add","merge","update"].forEach(t=>{const r=e.name(t),n=t==="add"?_D:ON;e.generateKey?ua.prototype[r]=function(o,l,h){return n(this,r,!0,(e.type||this.type)==="undirected",null,o,l,h,t==="update")}:ua.prototype[r]=function(o,l,h,u){return n(this,r,!1,(e.type||this.type)==="undirected",o,l,h,u,t==="update")}})});V9(ua);tN(ua);yN(ua);AN(ua);class yE extends ua{constructor(t){const r=Gs({type:"directed"},t);if("multi"in r&&r.multi!==!1)throw new Rr("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(r.type!=="directed")throw new Rr('DirectedGraph.from: inconsistent "'+r.type+'" type in given options!');super(r)}}class bD extends ua{constructor(t){const r=Gs({type:"undirected"},t);if("multi"in r&&r.multi!==!1)throw new Rr("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(r.type!=="undirected")throw new Rr('UndirectedGraph.from: inconsistent "'+r.type+'" type in given options!');super(r)}}class wD extends ua{constructor(t){const r=Gs({multi:!0},t);if("multi"in r&&r.multi!==!0)throw new Rr("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(r)}}class SD extends ua{constructor(t){const r=Gs({type:"directed",multi:!0},t);if("multi"in r&&r.multi!==!0)throw new Rr("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(r.type!=="directed")throw new Rr('MultiDirectedGraph.from: inconsistent "'+r.type+'" type in given options!');super(r)}}class ED extends ua{constructor(t){const r=Gs({type:"undirected",multi:!0},t);if("multi"in r&&r.multi!==!0)throw new Rr("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(r.type!=="undirected")throw new Rr('MultiUndirectedGraph.from: inconsistent "'+r.type+'" type in given options!');super(r)}}function L0(e){e.from=function(t,r){const n=Gs({},t.options,r),o=new e(n);return o.import(t),o}}L0(ua);L0(yE);L0(bD);L0(wD);L0(SD);L0(ED);ua.Graph=ua;ua.DirectedGraph=yE;ua.UndirectedGraph=bD;ua.MultiGraph=wD;ua.MultiDirectedGraph=SD;ua.MultiUndirectedGraph=ED;ua.InvalidArgumentsGraphError=Rr;ua.NotFoundGraphError=_r;ua.UsageGraphError=bn;var cv={},vk;function jN(){if(vk)return cv;vk=1;function e(n){return typeof n!="number"||isNaN(n)?1:n}function t(n,o){var l={},h=function(x){return typeof x>"u"?o:x};typeof o=="function"&&(h=o);var u=function(x){return h(x[n])},v=function(){return h(void 0)};return typeof n=="string"?(l.fromAttributes=u,l.fromGraph=function(x,A){return u(x.getNodeAttributes(A))},l.fromEntry=function(x,A){return u(A)}):typeof n=="function"?(l.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},l.fromGraph=function(x,A){return h(n(A,x.getNodeAttributes(A)))},l.fromEntry=function(x,A){return h(n(x,A))}):(l.fromAttributes=v,l.fromGraph=v,l.fromEntry=v),l}function r(n,o){var l={},h=function(x){return typeof x>"u"?o:x};typeof o=="function"&&(h=o);var u=function(x){return h(x[n])},v=function(){return h(void 0)};return typeof n=="string"?(l.fromAttributes=u,l.fromGraph=function(x,A){return u(x.getEdgeAttributes(A))},l.fromEntry=function(x,A){return u(A)},l.fromPartialEntry=l.fromEntry,l.fromMinimalEntry=l.fromEntry):typeof n=="function"?(l.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},l.fromGraph=function(x,A){var C=x.extremities(A);return h(n(A,x.getEdgeAttributes(A),C[0],C[1],x.getNodeAttributes(C[0]),x.getNodeAttributes(C[1]),x.isUndirected(A)))},l.fromEntry=function(x,A,C,P,O,U,W){return h(n(x,A,C,P,O,U,W))},l.fromPartialEntry=function(x,A,C,P){return h(n(x,A,C,P))},l.fromMinimalEntry=function(x,A){return h(n(x,A))}):(l.fromAttributes=v,l.fromGraph=v,l.fromEntry=v,l.fromMinimalEntry=v),l}return cv.createNodeValueGetter=t,cv.createEdgeValueGetter=r,cv.createEdgeWeightGetter=function(n){return r(n,e)},cv}var Vb,xk;function RN(){if(xk)return Vb;xk=1;var e=0,t=1,r=2,n=3,o=4,l=5,h=6,u=7,v=8,x=9,A=0,C=1,P=2,O=0,U=1,W=2,G=3,X=4,ae=5,ne=6,ue=7,Q=8,de=3,he=10,Y=3,ie=9,Ce=10;return Vb=function(Me,me,Ke){var Re,pe,ge,ze,Pe,st,Ae,qe,Ze,zt,Tt=me.length,rr=Ke.length,Xt=Me.adjustSizes,tr=Me.barnesHutTheta*Me.barnesHutTheta,at,Ht,Mt,pt,Pr,Lt,Wt,ke=[];for(ge=0;ge<Tt;ge+=he)me[ge+o]=me[ge+r],me[ge+l]=me[ge+n],me[ge+r]=0,me[ge+n]=0;if(Me.outboundAttractionDistribution){for(at=0,ge=0;ge<Tt;ge+=he)at+=me[ge+h];at/=Tt/he}if(Me.barnesHutOptimize){var Xr=1/0,rn=-1/0,vr=1/0,Wr=-1/0,Hn,fi,ba;for(ge=0;ge<Tt;ge+=he)Xr=Math.min(Xr,me[ge+e]),rn=Math.max(rn,me[ge+e]),vr=Math.min(vr,me[ge+t]),Wr=Math.max(Wr,me[ge+t]);var Rn=rn-Xr,ai=Wr-vr;for(Rn>ai?(vr-=(Rn-ai)/2,Wr=vr+Rn):(Xr-=(ai-Rn)/2,rn=Xr+ai),ke[0+O]=-1,ke[0+U]=(Xr+rn)/2,ke[0+W]=(vr+Wr)/2,ke[0+G]=Math.max(rn-Xr,Wr-vr),ke[0+X]=-1,ke[0+ae]=-1,ke[0+ne]=0,ke[0+ue]=0,ke[0+Q]=0,Re=1,ge=0;ge<Tt;ge+=he)for(pe=0,ba=de;;)if(ke[pe+ae]>=0){me[ge+e]<ke[pe+U]?me[ge+t]<ke[pe+W]?Hn=ke[pe+ae]:Hn=ke[pe+ae]+ie:me[ge+t]<ke[pe+W]?Hn=ke[pe+ae]+ie*2:Hn=ke[pe+ae]+ie*3,ke[pe+ue]=(ke[pe+ue]*ke[pe+ne]+me[ge+e]*me[ge+h])/(ke[pe+ne]+me[ge+h]),ke[pe+Q]=(ke[pe+Q]*ke[pe+ne]+me[ge+t]*me[ge+h])/(ke[pe+ne]+me[ge+h]),ke[pe+ne]+=me[ge+h],pe=Hn;continue}else if(ke[pe+O]<0){ke[pe+O]=ge;break}else{if(ke[pe+ae]=Re*ie,qe=ke[pe+G]/2,Ze=ke[pe+ae],ke[Ze+O]=-1,ke[Ze+U]=ke[pe+U]-qe,ke[Ze+W]=ke[pe+W]-qe,ke[Ze+G]=qe,ke[Ze+X]=Ze+ie,ke[Ze+ae]=-1,ke[Ze+ne]=0,ke[Ze+ue]=0,ke[Ze+Q]=0,Ze+=ie,ke[Ze+O]=-1,ke[Ze+U]=ke[pe+U]-qe,ke[Ze+W]=ke[pe+W]+qe,ke[Ze+G]=qe,ke[Ze+X]=Ze+ie,ke[Ze+ae]=-1,ke[Ze+ne]=0,ke[Ze+ue]=0,ke[Ze+Q]=0,Ze+=ie,ke[Ze+O]=-1,ke[Ze+U]=ke[pe+U]+qe,ke[Ze+W]=ke[pe+W]-qe,ke[Ze+G]=qe,ke[Ze+X]=Ze+ie,ke[Ze+ae]=-1,ke[Ze+ne]=0,ke[Ze+ue]=0,ke[Ze+Q]=0,Ze+=ie,ke[Ze+O]=-1,ke[Ze+U]=ke[pe+U]+qe,ke[Ze+W]=ke[pe+W]+qe,ke[Ze+G]=qe,ke[Ze+X]=ke[pe+X],ke[Ze+ae]=-1,ke[Ze+ne]=0,ke[Ze+ue]=0,ke[Ze+Q]=0,Re+=4,me[ke[pe+O]+e]<ke[pe+U]?me[ke[pe+O]+t]<ke[pe+W]?Hn=ke[pe+ae]:Hn=ke[pe+ae]+ie:me[ke[pe+O]+t]<ke[pe+W]?Hn=ke[pe+ae]+ie*2:Hn=ke[pe+ae]+ie*3,ke[pe+ne]=me[ke[pe+O]+h],ke[pe+ue]=me[ke[pe+O]+e],ke[pe+Q]=me[ke[pe+O]+t],ke[Hn+O]=ke[pe+O],ke[pe+O]=-1,me[ge+e]<ke[pe+U]?me[ge+t]<ke[pe+W]?fi=ke[pe+ae]:fi=ke[pe+ae]+ie:me[ge+t]<ke[pe+W]?fi=ke[pe+ae]+ie*2:fi=ke[pe+ae]+ie*3,Hn===fi)if(ba--){pe=Hn;continue}else{ba=de;break}ke[fi+O]=ge;break}}if(Me.barnesHutOptimize)for(Ht=Me.scalingRatio,ge=0;ge<Tt;ge+=he)for(pe=0;;)if(ke[pe+ae]>=0)if(Lt=Math.pow(me[ge+e]-ke[pe+ue],2)+Math.pow(me[ge+t]-ke[pe+Q],2),zt=ke[pe+G],4*zt*zt/Lt<tr){if(Mt=me[ge+e]-ke[pe+ue],pt=me[ge+t]-ke[pe+Q],Xt===!0?Lt>0?(Wt=Ht*me[ge+h]*ke[pe+ne]/Lt,me[ge+r]+=Mt*Wt,me[ge+n]+=pt*Wt):Lt<0&&(Wt=-Ht*me[ge+h]*ke[pe+ne]/Math.sqrt(Lt),me[ge+r]+=Mt*Wt,me[ge+n]+=pt*Wt):Lt>0&&(Wt=Ht*me[ge+h]*ke[pe+ne]/Lt,me[ge+r]+=Mt*Wt,me[ge+n]+=pt*Wt),pe=ke[pe+X],pe<0)break;continue}else{pe=ke[pe+ae];continue}else{if(st=ke[pe+O],st>=0&&st!==ge&&(Mt=me[ge+e]-me[st+e],pt=me[ge+t]-me[st+t],Lt=Mt*Mt+pt*pt,Xt===!0?Lt>0?(Wt=Ht*me[ge+h]*me[st+h]/Lt,me[ge+r]+=Mt*Wt,me[ge+n]+=pt*Wt):Lt<0&&(Wt=-Ht*me[ge+h]*me[st+h]/Math.sqrt(Lt),me[ge+r]+=Mt*Wt,me[ge+n]+=pt*Wt):Lt>0&&(Wt=Ht*me[ge+h]*me[st+h]/Lt,me[ge+r]+=Mt*Wt,me[ge+n]+=pt*Wt)),pe=ke[pe+X],pe<0)break;continue}else for(Ht=Me.scalingRatio,ze=0;ze<Tt;ze+=he)for(Pe=0;Pe<ze;Pe+=he)Mt=me[ze+e]-me[Pe+e],pt=me[ze+t]-me[Pe+t],Xt===!0?(Lt=Math.sqrt(Mt*Mt+pt*pt)-me[ze+v]-me[Pe+v],Lt>0?(Wt=Ht*me[ze+h]*me[Pe+h]/Lt/Lt,me[ze+r]+=Mt*Wt,me[ze+n]+=pt*Wt,me[Pe+r]-=Mt*Wt,me[Pe+n]-=pt*Wt):Lt<0&&(Wt=100*Ht*me[ze+h]*me[Pe+h],me[ze+r]+=Mt*Wt,me[ze+n]+=pt*Wt,me[Pe+r]-=Mt*Wt,me[Pe+n]-=pt*Wt)):(Lt=Math.sqrt(Mt*Mt+pt*pt),Lt>0&&(Wt=Ht*me[ze+h]*me[Pe+h]/Lt/Lt,me[ze+r]+=Mt*Wt,me[ze+n]+=pt*Wt,me[Pe+r]-=Mt*Wt,me[Pe+n]-=pt*Wt));for(Ze=Me.gravity/Me.scalingRatio,Ht=Me.scalingRatio,ge=0;ge<Tt;ge+=he)Wt=0,Mt=me[ge+e],pt=me[ge+t],Lt=Math.sqrt(Math.pow(Mt,2)+Math.pow(pt,2)),Me.strongGravityMode?Lt>0&&(Wt=Ht*me[ge+h]*Ze):Lt>0&&(Wt=Ht*me[ge+h]*Ze/Lt),me[ge+r]-=Mt*Wt,me[ge+n]-=pt*Wt;for(Ht=1*(Me.outboundAttractionDistribution?at:1),Ae=0;Ae<rr;Ae+=Y)ze=Ke[Ae+A],Pe=Ke[Ae+C],qe=Ke[Ae+P],Pr=Math.pow(qe,Me.edgeWeightInfluence),Mt=me[ze+e]-me[Pe+e],pt=me[ze+t]-me[Pe+t],Xt===!0?(Lt=Math.sqrt(Mt*Mt+pt*pt)-me[ze+v]-me[Pe+v],Me.linLogMode?Me.outboundAttractionDistribution?Lt>0&&(Wt=-Ht*Pr*Math.log(1+Lt)/Lt/me[ze+h]):Lt>0&&(Wt=-Ht*Pr*Math.log(1+Lt)/Lt):Me.outboundAttractionDistribution?Lt>0&&(Wt=-Ht*Pr/me[ze+h]):Lt>0&&(Wt=-Ht*Pr)):(Lt=Math.sqrt(Math.pow(Mt,2)+Math.pow(pt,2)),Me.linLogMode?Me.outboundAttractionDistribution?Lt>0&&(Wt=-Ht*Pr*Math.log(1+Lt)/Lt/me[ze+h]):Lt>0&&(Wt=-Ht*Pr*Math.log(1+Lt)/Lt):Me.outboundAttractionDistribution?(Lt=1,Wt=-Ht*Pr/me[ze+h]):(Lt=1,Wt=-Ht*Pr)),Lt>0&&(me[ze+r]+=Mt*Wt,me[ze+n]+=pt*Wt,me[Pe+r]-=Mt*Wt,me[Pe+n]-=pt*Wt);var pi,oi,Rt,Fi,Fn,Pi;if(Xt===!0)for(ge=0;ge<Tt;ge+=he)me[ge+x]!==1&&(pi=Math.sqrt(Math.pow(me[ge+r],2)+Math.pow(me[ge+n],2)),pi>Ce&&(me[ge+r]=me[ge+r]*Ce/pi,me[ge+n]=me[ge+n]*Ce/pi),oi=me[ge+h]*Math.sqrt((me[ge+o]-me[ge+r])*(me[ge+o]-me[ge+r])+(me[ge+l]-me[ge+n])*(me[ge+l]-me[ge+n])),Rt=Math.sqrt((me[ge+o]+me[ge+r])*(me[ge+o]+me[ge+r])+(me[ge+l]+me[ge+n])*(me[ge+l]+me[ge+n]))/2,Fi=.1*Math.log(1+Rt)/(1+Math.sqrt(oi)),Fn=me[ge+e]+me[ge+r]*(Fi/Me.slowDown),me[ge+e]=Fn,Pi=me[ge+t]+me[ge+n]*(Fi/Me.slowDown),me[ge+t]=Pi);else for(ge=0;ge<Tt;ge+=he)me[ge+x]!==1&&(oi=me[ge+h]*Math.sqrt((me[ge+o]-me[ge+r])*(me[ge+o]-me[ge+r])+(me[ge+l]-me[ge+n])*(me[ge+l]-me[ge+n])),Rt=Math.sqrt((me[ge+o]+me[ge+r])*(me[ge+o]+me[ge+r])+(me[ge+l]+me[ge+n])*(me[ge+l]+me[ge+n]))/2,Fi=me[ge+u]*Math.log(1+Rt)/(1+Math.sqrt(oi)),me[ge+u]=Math.min(1,Math.sqrt(Fi*(Math.pow(me[ge+r],2)+Math.pow(me[ge+n],2))/(1+Math.sqrt(oi)))),Fn=me[ge+e]+me[ge+r]*(Fi/Me.slowDown),me[ge+e]=Fn,Pi=me[ge+t]+me[ge+n]*(Fi/Me.slowDown),me[ge+t]=Pi);return{}},Vb}var Pp={},_k;function NN(){if(_k)return Pp;_k=1;var e=10,t=3;return Pp.assign=function(r){r=r||{};var n=Array.prototype.slice.call(arguments).slice(1),o,l,h;for(o=0,h=n.length;o<h;o++)if(n[o])for(l in n[o])r[l]=n[o][l];return r},Pp.validateSettings=function(r){return"linLogMode"in r&&typeof r.linLogMode!="boolean"?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in r&&typeof r.outboundAttractionDistribution!="boolean"?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in r&&typeof r.adjustSizes!="boolean"?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in r&&typeof r.edgeWeightInfluence!="number"?{message:"the `edgeWeightInfluence` setting should be a number."}:"scalingRatio"in r&&!(typeof r.scalingRatio=="number"&&r.scalingRatio>=0)?{message:"the `scalingRatio` setting should be a number >= 0."}:"strongGravityMode"in r&&typeof r.strongGravityMode!="boolean"?{message:"the `strongGravityMode` setting should be a boolean."}:"gravity"in r&&!(typeof r.gravity=="number"&&r.gravity>=0)?{message:"the `gravity` setting should be a number >= 0."}:"slowDown"in r&&!(typeof r.slowDown=="number"||r.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in r&&typeof r.barnesHutOptimize!="boolean"?{message:"the `barnesHutOptimize` setting should be a boolean."}:"barnesHutTheta"in r&&!(typeof r.barnesHutTheta=="number"&&r.barnesHutTheta>=0)?{message:"the `barnesHutTheta` setting should be a number >= 0."}:null},Pp.graphToByteArrays=function(r,n){var o=r.order,l=r.size,h={},u,v=new Float32Array(o*e),x=new Float32Array(l*t);return u=0,r.forEachNode(function(A,C){h[A]=u,v[u]=C.x,v[u+1]=C.y,v[u+2]=0,v[u+3]=0,v[u+4]=0,v[u+5]=0,v[u+6]=1,v[u+7]=1,v[u+8]=C.size||1,v[u+9]=C.fixed?1:0,u+=e}),u=0,r.forEachEdge(function(A,C,P,O,U,W,G){var X=h[P],ae=h[O],ne=n(A,C,P,O,U,W,G);v[X+6]+=ne,v[ae+6]+=ne,x[u]=X,x[u+1]=ae,x[u+2]=ne,u+=t}),{nodes:v,edges:x}},Pp.assignLayoutChanges=function(r,n,o){var l=0;r.updateEachNodeAttributes(function(h,u){return u.x=n[l],u.y=n[l+1],l+=e,o?o(h,u):u})},Pp.readGraphPositions=function(r,n){var o=0;r.forEachNode(function(l,h){n[o]=h.x,n[o+1]=h.y,o+=e})},Pp.collectLayoutChanges=function(r,n,o){for(var l=r.nodes(),h={},u=0,v=0,x=n.length;u<x;u+=e){if(o){var A=Object.assign({},r.getNodeAttributes(l[v]));A.x=n[u],A.y=n[u+1],A=o(l[v],A),h[l[v]]={x:A.x,y:A.y}}else h[l[v]]={x:n[u],y:n[u+1]};v++}return h},Pp.createWorker=function(n){var o=window.URL||window.webkitURL,l=n.toString(),h=o.createObjectURL(new Blob(["("+l+").call(this);"],{type:"text/javascript"})),u=new Worker(h);return o.revokeObjectURL(h),u},Pp}var qb,bk;function BN(){return bk||(bk=1,qb={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5}),qb}var Wb,wk;function FN(){if(wk)return Wb;wk=1;var e=iD(),t=jN().createEdgeWeightGetter,r=RN(),n=NN(),o=BN();function l(v,x,A){if(!e(x))throw new Error("graphology-layout-forceatlas2: the given graph is not a valid graphology instance.");typeof A=="number"&&(A={iterations:A});var C=A.iterations;if(typeof C!="number")throw new Error("graphology-layout-forceatlas2: invalid number of iterations.");if(C<=0)throw new Error("graphology-layout-forceatlas2: you should provide a positive number of iterations.");var P=t("getEdgeWeight"in A?A.getEdgeWeight:"weight").fromEntry,O=typeof A.outputReducer=="function"?A.outputReducer:null,U=n.assign({},o,A.settings),W=n.validateSettings(U);if(W)throw new Error("graphology-layout-forceatlas2: "+W.message);var G=n.graphToByteArrays(x,P),X;for(X=0;X<C;X++)r(U,G.nodes,G.edges);if(v){n.assignLayoutChanges(x,G.nodes,O);return}return n.collectLayoutChanges(x,G.nodes)}function h(v){var x=typeof v=="number"?v:v.order;return{barnesHutOptimize:x>2e3,strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:1+Math.log(x)}}var u=l.bind(null,!1);return u.assign=l.bind(null,!0),u.inferSettings=h,Wb=u,Wb}var $N=FN();const Sk=Fl($N);var Sv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var GN=Sv.exports,Ek;function UN(){return Ek||(Ek=1,(function(e,t){(function(){var r,n="4.17.21",o=200,l="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",h="Expected a function",u="Invalid `variable` option passed into `_.template`",v="__lodash_hash_undefined__",x=500,A="__lodash_placeholder__",C=1,P=2,O=4,U=1,W=2,G=1,X=2,ae=4,ne=8,ue=16,Q=32,de=64,he=128,Y=256,ie=512,Ce=30,_e="...",Me=800,me=16,Ke=1,Re=2,pe=3,ge=1/0,ze=9007199254740991,Pe=17976931348623157e292,st=NaN,Ae=4294967295,qe=Ae-1,Ze=Ae>>>1,zt=[["ary",he],["bind",G],["bindKey",X],["curry",ne],["curryRight",ue],["flip",ie],["partial",Q],["partialRight",de],["rearg",Y]],Tt="[object Arguments]",rr="[object Array]",Xt="[object AsyncFunction]",tr="[object Boolean]",at="[object Date]",Ht="[object DOMException]",Mt="[object Error]",pt="[object Function]",Pr="[object GeneratorFunction]",Lt="[object Map]",Wt="[object Number]",ke="[object Null]",Xr="[object Object]",rn="[object Promise]",vr="[object Proxy]",Wr="[object RegExp]",Hn="[object Set]",fi="[object String]",ba="[object Symbol]",Rn="[object Undefined]",ai="[object WeakMap]",pi="[object WeakSet]",oi="[object ArrayBuffer]",Rt="[object DataView]",Fi="[object Float32Array]",Fn="[object Float64Array]",Pi="[object Int8Array]",ca="[object Int16Array]",nr="[object Int32Array]",kr="[object Uint8Array]",jr="[object Uint8ClampedArray]",Jn="[object Uint16Array]",Xa="[object Uint32Array]",nn=/\b__p \+= '';/g,Go=/\b(__p \+=) '' \+/g,Uo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Io=/&(?:amp|lt|gt|quot|#39);/g,wo=/[&<>"']/g,Ne=RegExp(Io.source),se=RegExp(wo.source),le=/<%-([\s\S]+?)%>/g,Ee=/<%([\s\S]+?)%>/g,Ie=/<%=([\s\S]+?)%>/g,Ye=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tt=/^\w*$/,ut=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ue=/[\\^$.*+?()[\]{}|]/g,At=RegExp(Ue.source),Vt=/^\s+/,_t=/\s/,lr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Lr=/\{\n\/\* \[wrapped with (.+)\] \*/,$r=/,? & /,wn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ir=/[()=,{}\[\]\/\s]/,cn=/\\(\\)?/g,_n=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ea=/\w*$/,gi=/^[-+]0x[0-9a-f]+$/i,Sn=/^0b[01]+$/i,si=/^\[object .+?Constructor\]$/,li=/^0o[0-7]+$/i,Ca=/^(?:0|[1-9]\d*)$/,Hi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$i=/($^)/,Hs=/['\n\r\u2028\u2029\\]/g,Nn="\\ud800-\\udfff",Ta="\\u0300-\\u036f",dc="\\ufe20-\\ufe2f",Oo="\\u20d0-\\u20ff",wa=Ta+dc+Oo,vl="\\u2700-\\u27bf",jo="a-z\\xdf-\\xf6\\xf8-\\xff",So="\\xac\\xb1\\xd7\\xf7",Gl="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ul="\\u2000-\\u206f",Zi=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Zs="A-Z\\xc0-\\xd6\\xd8-\\xde",da="\\ufe0e\\ufe0f",Qn=So+Gl+Ul+Zi,Vl="[']",ls="["+Nn+"]",lu="["+Qn+"]",lo="["+wa+"]",hc="\\d+",Kc="["+vl+"]",La="["+jo+"]",Vo="[^"+Nn+Qn+hc+vl+jo+Zs+"]",Zn="\\ud83c[\\udffb-\\udfff]",fc="(?:"+lo+"|"+Zn+")",qo="[^"+Nn+"]",xl="(?:\\ud83c[\\udde6-\\uddff]){2}",vt="[\\ud800-\\udbff][\\udc00-\\udfff]",Ge="["+Zs+"]",ot="\\u200d",ht="(?:"+La+"|"+Vo+")",$t="(?:"+Ge+"|"+Vo+")",Gr="(?:"+Vl+"(?:d|ll|m|re|s|t|ve))?",wt="(?:"+Vl+"(?:D|LL|M|RE|S|T|VE))?",jt=fc+"?",xt="["+da+"]?",Nt="(?:"+ot+"(?:"+[qo,xl,vt].join("|")+")"+xt+jt+")*",Yr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Tr="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Gt=xt+jt+Nt,gn="(?:"+[Kc,xl,vt].join("|")+")"+Gt,He="(?:"+[qo+lo+"?",lo,xl,vt,ls].join("|")+")",bt=RegExp(Vl,"g"),ct=RegExp(lo,"g"),yt=RegExp(Zn+"(?="+Zn+")|"+He+Gt,"g"),Or=RegExp([Ge+"?"+La+"+"+Gr+"(?="+[lu,Ge,"$"].join("|")+")",$t+"+"+wt+"(?="+[lu,Ge+ht,"$"].join("|")+")",Ge+"?"+ht+"+"+Gr,Ge+"+"+wt,Tr,Yr,hc,gn].join("|"),"g"),Nr=RegExp("["+ot+Nn+wa+da+"]"),gr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,mn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Xn=-1,qt={};qt[Fi]=qt[Fn]=qt[Pi]=qt[ca]=qt[nr]=qt[kr]=qt[jr]=qt[Jn]=qt[Xa]=!0,qt[Tt]=qt[rr]=qt[oi]=qt[tr]=qt[Rt]=qt[at]=qt[Mt]=qt[pt]=qt[Lt]=qt[Wt]=qt[Xr]=qt[Wr]=qt[Hn]=qt[fi]=qt[ai]=!1;var Br={};Br[Tt]=Br[rr]=Br[oi]=Br[Rt]=Br[tr]=Br[at]=Br[Fi]=Br[Fn]=Br[Pi]=Br[ca]=Br[nr]=Br[Lt]=Br[Wt]=Br[Xr]=Br[Wr]=Br[Hn]=Br[fi]=Br[ba]=Br[kr]=Br[jr]=Br[Jn]=Br[Xa]=!0,Br[Mt]=Br[pt]=Br[ai]=!1;var Ai={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Sa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Wo={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},bi={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},wi=parseFloat,Ho=parseInt,Ki=typeof Ix=="object"&&Ix&&Ix.Object===Object&&Ix,uo=typeof self=="object"&&self&&self.Object===Object&&self,$n=Ki||uo||Function("return this")(),Dn=t&&!t.nodeType&&t,Ro=Dn&&!0&&e&&!e.nodeType&&e,ks=Ro&&Ro.exports===Dn,_l=ks&&Ki.process,Ks=(function(){try{var lt=Ro&&Ro.require&&Ro.require("util").types;return lt||_l&&_l.binding&&_l.binding("util")}catch{}})(),jf=Ks&&Ks.isArrayBuffer,og=Ks&&Ks.isDate,Gd=Ks&&Ks.isMap,zh=Ks&&Ks.isRegExp,Rf=Ks&&Ks.isSet,Nf=Ks&&Ks.isTypedArray;function us(lt,Ft,Ct){switch(Ct.length){case 0:return lt.call(Ft);case 1:return lt.call(Ft,Ct[0]);case 2:return lt.call(Ft,Ct[0],Ct[1]);case 3:return lt.call(Ft,Ct[0],Ct[1],Ct[2])}return lt.apply(Ft,Ct)}function sg(lt,Ft,Ct,Cr){for(var hn=-1,zn=lt==null?0:lt.length;++hn<zn;){var ki=lt[hn];Ft(Cr,ki,Ct(ki),lt)}return Cr}function Ya(lt,Ft){for(var Ct=-1,Cr=lt==null?0:lt.length;++Ct<Cr&&Ft(lt[Ct],Ct,lt)!==!1;);return lt}function lg(lt,Ft){for(var Ct=lt==null?0:lt.length;Ct--&&Ft(lt[Ct],Ct,lt)!==!1;);return lt}function ug(lt,Ft){for(var Ct=-1,Cr=lt==null?0:lt.length;++Ct<Cr;)if(!Ft(lt[Ct],Ct,lt))return!1;return!0}function uu(lt,Ft){for(var Ct=-1,Cr=lt==null?0:lt.length,hn=0,zn=[];++Ct<Cr;){var ki=lt[Ct];Ft(ki,Ct,lt)&&(zn[hn++]=ki)}return zn}function Nu(lt,Ft){var Ct=lt==null?0:lt.length;return!!Ct&&Fu(lt,Ft,0)>-1}function Ud(lt,Ft,Ct){for(var Cr=-1,hn=lt==null?0:lt.length;++Cr<hn;)if(Ct(Ft,lt[Cr]))return!0;return!1}function Gi(lt,Ft){for(var Ct=-1,Cr=lt==null?0:lt.length,hn=Array(Cr);++Ct<Cr;)hn[Ct]=Ft(lt[Ct],Ct,lt);return hn}function Bu(lt,Ft){for(var Ct=-1,Cr=Ft.length,hn=lt.length;++Ct<Cr;)lt[hn+Ct]=Ft[Ct];return lt}function Bf(lt,Ft,Ct,Cr){var hn=-1,zn=lt==null?0:lt.length;for(Cr&&zn&&(Ct=lt[++hn]);++hn<zn;)Ct=Ft(Ct,lt[hn],hn,lt);return Ct}function Ff(lt,Ft,Ct,Cr){var hn=lt==null?0:lt.length;for(Cr&&hn&&(Ct=lt[--hn]);hn--;)Ct=Ft(Ct,lt[hn],hn,lt);return Ct}function Ph(lt,Ft){for(var Ct=-1,Cr=lt==null?0:lt.length;++Ct<Cr;)if(Ft(lt[Ct],Ct,lt))return!0;return!1}var cg=cu("length");function $f(lt){return lt.split("")}function dg(lt){return lt.match(wn)||[]}function Vd(lt,Ft,Ct){var Cr;return Ct(lt,function(hn,zn,ki){if(Ft(hn,zn,ki))return Cr=zn,!1}),Cr}function Xs(lt,Ft,Ct,Cr){for(var hn=lt.length,zn=Ct+(Cr?1:-1);Cr?zn--:++zn<hn;)if(Ft(lt[zn],zn,lt))return zn;return-1}function Fu(lt,Ft,Ct){return Ft===Ft?Yc(lt,Ft,Ct):Xs(lt,Lh,Ct)}function Gf(lt,Ft,Ct,Cr){for(var hn=Ct-1,zn=lt.length;++hn<zn;)if(Cr(lt[hn],Ft))return hn;return-1}function Lh(lt){return lt!==lt}function pc(lt,Ft){var Ct=lt==null?0:lt.length;return Ct?ta(lt,Ft)/Ct:st}function cu(lt){return function(Ft){return Ft==null?r:Ft[lt]}}function du(lt){return function(Ft){return lt==null?r:lt[Ft]}}function qd(lt,Ft,Ct,Cr,hn){return hn(lt,function(zn,ki,yi){Ct=Cr?(Cr=!1,zn):Ft(Ct,zn,ki,yi)}),Ct}function hg(lt,Ft){var Ct=lt.length;for(lt.sort(Ft);Ct--;)lt[Ct]=lt[Ct].value;return lt}function ta(lt,Ft){for(var Ct,Cr=-1,hn=lt.length;++Cr<hn;){var zn=Ft(lt[Cr]);zn!==r&&(Ct=Ct===r?zn:Ct+zn)}return Ct}function Ih(lt,Ft){for(var Ct=-1,Cr=Array(lt);++Ct<lt;)Cr[Ct]=Ft(Ct);return Cr}function Mn(lt,Ft){return Gi(Ft,function(Ct){return[Ct,lt[Ct]]})}function ql(lt){return lt&&lt.slice(0,Un(lt)+1).replace(Vt,"")}function Gn(lt){return function(Ft){return lt(Ft)}}function mi(lt,Ft){return Gi(Ft,function(Ct){return lt[Ct]})}function bl(lt,Ft){return lt.has(Ft)}function gc(lt,Ft){for(var Ct=-1,Cr=lt.length;++Ct<Cr&&Fu(Ft,lt[Ct],0)>-1;);return Ct}function mc(lt,Ft){for(var Ct=lt.length;Ct--&&Fu(Ft,lt[Ct],0)>-1;);return Ct}function yc(lt,Ft){for(var Ct=lt.length,Cr=0;Ct--;)lt[Ct]===Ft&&++Cr;return Cr}var wl=du(Ai),Xc=du(Sa);function Zo(lt){return"\\"+bi[lt]}function Oh(lt,Ft){return lt==null?r:lt[Ft]}function hu(lt){return Nr.test(lt)}function Wd(lt){return gr.test(lt)}function fu(lt){for(var Ft,Ct=[];!(Ft=lt.next()).done;)Ct.push(Ft.value);return Ct}function $u(lt){var Ft=-1,Ct=Array(lt.size);return lt.forEach(function(Cr,hn){Ct[++Ft]=[hn,Cr]}),Ct}function vc(lt,Ft){return function(Ct){return lt(Ft(Ct))}}function cs(lt,Ft){for(var Ct=-1,Cr=lt.length,hn=0,zn=[];++Ct<Cr;){var ki=lt[Ct];(ki===Ft||ki===A)&&(lt[Ct]=A,zn[hn++]=Ct)}return zn}function Gu(lt){var Ft=-1,Ct=Array(lt.size);return lt.forEach(function(Cr){Ct[++Ft]=Cr}),Ct}function jh(lt){var Ft=-1,Ct=Array(lt.size);return lt.forEach(function(Cr){Ct[++Ft]=[Cr,Cr]}),Ct}function Yc(lt,Ft,Ct){for(var Cr=Ct-1,hn=lt.length;++Cr<hn;)if(lt[Cr]===Ft)return Cr;return-1}function Jc(lt,Ft,Ct){for(var Cr=Ct+1;Cr--;)if(lt[Cr]===Ft)return Cr;return Cr}function xc(lt){return hu(lt)?fg(lt):cg(lt)}function ra(lt){return hu(lt)?Uf(lt):$f(lt)}function Un(lt){for(var Ft=lt.length;Ft--&&_t.test(lt.charAt(Ft)););return Ft}var Hd=du(Wo);function fg(lt){for(var Ft=yt.lastIndex=0;yt.test(lt);)++Ft;return Ft}function Uf(lt){return lt.match(yt)||[]}function _c(lt){return lt.match(Or)||[]}var Rh=(function lt(Ft){Ft=Ft==null?$n:pu.defaults($n.Object(),Ft,pu.pick($n,mn));var Ct=Ft.Array,Cr=Ft.Date,hn=Ft.Error,zn=Ft.Function,ki=Ft.Math,yi=Ft.Object,gu=Ft.RegExp,Sl=Ft.String,No=Ft.TypeError,Uu=Ct.prototype,Nh=zn.prototype,Qc=yi.prototype,Zd=Ft["__core-js_shared__"],bc=Nh.toString,ui=Qc.hasOwnProperty,ed=0,Vu=(function(){var y=/[^.]+$/.exec(Zd&&Zd.keys&&Zd.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""})(),Ci=Qc.toString,Wl=bc.call(yi),Cs=$n._,wc=gu("^"+bc.call(ui).replace(Ue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ui=ks?Ft.Buffer:r,Ia=Ft.Symbol,Ja=Ft.Uint8Array,qu=Ui?Ui.allocUnsafe:r,Ys=vc(yi.getPrototypeOf,yi),td=yi.create,Hl=Qc.propertyIsEnumerable,Eo=Uu.splice,Bh=Ia?Ia.isConcatSpreadable:r,qa=Ia?Ia.iterator:r,El=Ia?Ia.toStringTag:r,Ko=(function(){try{var y=Lc(yi,"defineProperty");return y({},"",{}),y}catch{}})(),Fh=Ft.clearTimeout!==$n.clearTimeout&&Ft.clearTimeout,rd=Cr&&Cr.now!==$n.Date.now&&Cr.now,Ts=Ft.setTimeout!==$n.setTimeout&&Ft.setTimeout,mu=ki.ceil,yu=ki.floor,Sc=yi.getOwnPropertySymbols,$h=Ui?Ui.isBuffer:r,Xo=Ft.isFinite,Wu=Uu.join,vu=vc(yi.keys,yi),Xi=ki.max,Oa=ki.min,Ea=Cr.now,ja=Ft.parseInt,Al=ki.random,Wa=Uu.reverse,co=Lc(Ft,"DataView"),Ds=Lc(Ft,"Map"),Gh=Lc(Ft,"Promise"),xu=Lc(Ft,"Set"),Hu=Lc(Ft,"WeakMap"),Zu=Lc(yi,"create"),na=Hu&&new Hu,Bn={},Yt=ys(co),kl=ys(Ds),ds=ys(Gh),Uh=ys(xu),Ms=ys(Hu),Zl=Ia?Ia.prototype:r,Ku=Zl?Zl.valueOf:r,En=Zl?Zl.toString:r;function be(y){if(Ga(y)&&!yn(y)&&!(y instanceof vn)){if(y instanceof hs)return y;if(ui.call(y,"__wrapped__"))return Tg(y)}return new hs(y)}var Xu=(function(){function y(){}return function(k){if(!ya(k))return{};if(td)return td(k);y.prototype=k;var R=new y;return y.prototype=r,R}})();function Kl(){}function hs(y,k){this.__wrapped__=y,this.__actions__=[],this.__chain__=!!k,this.__index__=0,this.__values__=r}be.templateSettings={escape:le,evaluate:Ee,interpolate:Ie,variable:"",imports:{_:be}},be.prototype=Kl.prototype,be.prototype.constructor=be,hs.prototype=Xu(Kl.prototype),hs.prototype.constructor=hs;function vn(y){this.__wrapped__=y,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ae,this.__views__=[]}function Xl(){var y=new vn(this.__wrapped__);return y.__actions__=gs(this.__actions__),y.__dir__=this.__dir__,y.__filtered__=this.__filtered__,y.__iteratees__=gs(this.__iteratees__),y.__takeCount__=this.__takeCount__,y.__views__=gs(this.__views__),y}function Yl(){if(this.__filtered__){var y=new vn(this);y.__dir__=-1,y.__filtered__=!0}else y=this.clone(),y.__dir__*=-1;return y}function Jl(){var y=this.__wrapped__.value(),k=this.__dir__,R=yn(y),H=k<0,fe=R?y.length:0,De=bm(0,fe,this.__views__),Ve=De.start,nt=De.end,mt=nt-Ve,Qt=H?nt:Ve-1,er=this.__iteratees__,sr=er.length,Mr=0,on=Oa(mt,this.__takeCount__);if(!R||!H&&fe==mt&&on==mt)return cm(y,this.__actions__);var An=[];e:for(;mt--&&Mr<on;){Qt+=k;for(var ii=-1,kn=y[Qt];++ii<sr;){var _i=er[ii],zi=_i.iteratee,Fc=_i.type,Lu=zi(kn);if(Fc==Re)kn=Lu;else if(!Lu){if(Fc==Ke)continue e;break e}}An[Mr++]=kn}return An}vn.prototype=Xu(Kl.prototype),vn.prototype.constructor=vn;function _u(y){var k=-1,R=y==null?0:y.length;for(this.clear();++k<R;){var H=y[k];this.set(H[0],H[1])}}function Kd(){this.__data__=Zu?Zu(null):{},this.size=0}function nd(y){var k=this.has(y)&&delete this.__data__[y];return this.size-=k?1:0,k}function Vh(y){var k=this.__data__;if(Zu){var R=k[y];return R===v?r:R}return ui.call(k,y)?k[y]:r}function Qa(y){var k=this.__data__;return Zu?k[y]!==r:ui.call(k,y)}function Pn(y,k){var R=this.__data__;return this.size+=this.has(y)?0:1,R[y]=Zu&&k===r?v:k,this}_u.prototype.clear=Kd,_u.prototype.delete=nd,_u.prototype.get=Vh,_u.prototype.has=Qa,_u.prototype.set=Pn;function Ao(y){var k=-1,R=y==null?0:y.length;for(this.clear();++k<R;){var H=y[k];this.set(H[0],H[1])}}function Xd(){this.__data__=[],this.size=0}function qh(y){var k=this.__data__,R=Te(k,y);if(R<0)return!1;var H=k.length-1;return R==H?k.pop():Eo.call(k,R,1),--this.size,!0}function pg(y){var k=this.__data__,R=Te(k,y);return R<0?r:k[R][1]}function Yd(y){return Te(this.__data__,y)>-1}function ha(y,k){var R=this.__data__,H=Te(R,y);return H<0?(++this.size,R.push([y,k])):R[H][1]=k,this}Ao.prototype.clear=Xd,Ao.prototype.delete=qh,Ao.prototype.get=pg,Ao.prototype.has=Yd,Ao.prototype.set=ha;function Ha(y){var k=-1,R=y==null?0:y.length;for(this.clear();++k<R;){var H=y[k];this.set(H[0],H[1])}}function bu(){this.size=0,this.__data__={hash:new _u,map:new(Ds||Ao),string:new _u}}function Ar(y){var k=dd(this,y).delete(y);return this.size-=k?1:0,k}function qr(y){return dd(this,y).get(y)}function wu(y){return dd(this,y).has(y)}function Su(y,k){var R=dd(this,y),H=R.size;return R.set(y,k),this.size+=R.size==H?0:1,this}Ha.prototype.clear=bu,Ha.prototype.delete=Ar,Ha.prototype.get=qr,Ha.prototype.has=wu,Ha.prototype.set=Su;function Eu(y){var k=-1,R=y==null?0:y.length;for(this.__data__=new Ha;++k<R;)this.add(y[k])}function D(y){return this.__data__.set(y,v),this}function i(y){return this.__data__.has(y)}Eu.prototype.add=Eu.prototype.push=D,Eu.prototype.has=i;function p(y){var k=this.__data__=new Ao(y);this.size=k.size}function _(){this.__data__=new Ao,this.size=0}function b(y){var k=this.__data__,R=k.delete(y);return this.size=k.size,R}function T(y){return this.__data__.get(y)}function j(y){return this.__data__.has(y)}function $(y,k){var R=this.__data__;if(R instanceof Ao){var H=R.__data__;if(!Ds||H.length<o-1)return H.push([y,k]),this.size=++R.size,this;R=this.__data__=new Ha(H)}return R.set(y,k),this.size=R.size,this}p.prototype.clear=_,p.prototype.delete=b,p.prototype.get=T,p.prototype.has=j,p.prototype.set=$;function V(y,k){var R=yn(y),H=!R&&gh(y),fe=!R&&!H&&Nc(y),De=!R&&!H&&!fe&&I(y),Ve=R||H||fe||De,nt=Ve?Ih(y.length,Sl):[],mt=nt.length;for(var Qt in y)(k||ui.call(y,Qt))&&!(Ve&&(Qt=="length"||fe&&(Qt=="offset"||Qt=="parent")||De&&(Qt=="buffer"||Qt=="byteLength"||Qt=="byteOffset")||Cu(Qt,mt)))&&nt.push(Qt);return nt}function K(y){var k=y.length;return k?y[Qd(0,k-1)]:r}function te(y,k){return nf(gs(y),et(k,0,y.length))}function re(y){return nf(gs(y))}function ye(y,k,R){(R!==r&&!xs(y[k],R)||R===r&&!(k in y))&&We(y,k,R)}function we(y,k,R){var H=y[k];(!(ui.call(y,k)&&xs(H,R))||R===r&&!(k in y))&&We(y,k,R)}function Te(y,k){for(var R=y.length;R--;)if(xs(y[R][0],k))return R;return-1}function je(y,k,R,H){return mr(y,function(fe,De,Ve){k(H,fe,R(fe),Ve)}),H}function Fe(y,k){return y&&ms(k,qn(k),y)}function $e(y,k){return y&&ms(k,xi(k),y)}function We(y,k,R){k=="__proto__"&&Ko?Ko(y,k,{configurable:!0,enumerable:!0,value:R,writable:!0}):y[k]=R}function Le(y,k){for(var R=-1,H=k.length,fe=Ct(H),De=y==null;++R<H;)fe[R]=De?r:Mo(y,k[R]);return fe}function et(y,k,R){return y===y&&(R!==r&&(y=y<=R?y:R),k!==r&&(y=y>=k?y:k)),y}function rt(y,k,R,H,fe,De){var Ve,nt=k&C,mt=k&P,Qt=k&O;if(R&&(Ve=fe?R(y,H,fe,De):R(y)),Ve!==r)return Ve;if(!ya(y))return y;var er=yn(y);if(er){if(Ve=wm(y),!nt)return gs(y,Ve)}else{var sr=Co(y),Mr=sr==pt||sr==Pr;if(Nc(y))return fm(y,nt);if(sr==Xr||sr==Tt||Mr&&!fe){if(Ve=mt||Mr?{}:Sm(y),!nt)return mt?Kf(y,$e(Ve,y)):xy(y,Fe(Ve,y))}else{if(!Br[sr])return fe?y:{};Ve=Sy(y,sr,nt)}}De||(De=new p);var on=De.get(y);if(on)return on;De.set(y,Ve),w(y)?y.forEach(function(kn){Ve.add(rt(kn,k,R,kn,y,De))}):Vg(y)&&y.forEach(function(kn,_i){Ve.set(_i,rt(kn,k,R,_i,y,De))});var An=Qt?mt?_m:Pc:mt?xi:qn,ii=er?r:An(y);return Ya(ii||y,function(kn,_i){ii&&(_i=kn,kn=y[_i]),we(Ve,_i,rt(kn,k,R,_i,y,De))}),Ve}function gt(y){var k=qn(y);return function(R){return Bt(R,y,k)}}function Bt(y,k,R){var H=R.length;if(y==null)return!H;for(y=yi(y);H--;){var fe=R[H],De=k[fe],Ve=y[fe];if(Ve===r&&!(fe in y)||!De(Ve))return!1}return!0}function ir(y,k,R){if(typeof y!="function")throw new No(h);return tf(function(){y.apply(r,R)},k)}function ur(y,k,R,H){var fe=-1,De=Nu,Ve=!0,nt=y.length,mt=[],Qt=k.length;if(!nt)return mt;R&&(k=Gi(k,Gn(R))),H?(De=Ud,Ve=!1):k.length>=o&&(De=bl,Ve=!1,k=new Eu(k));e:for(;++fe<nt;){var er=y[fe],sr=R==null?er:R(er);if(er=H||er!==0?er:0,Ve&&sr===sr){for(var Mr=Qt;Mr--;)if(k[Mr]===sr)continue e;mt.push(er)}else De(k,sr,H)||mt.push(er)}return mt}var mr=Sg(an),hr=Sg(Ln,!0);function or(y,k){var R=!0;return mr(y,function(H,fe,De){return R=!!k(H,fe,De),R}),R}function xr(y,k,R){for(var H=-1,fe=y.length;++H<fe;){var De=y[H],Ve=k(De);if(Ve!=null&&(nt===r?Ve===Ve&&!z(Ve):R(Ve,nt)))var nt=Ve,mt=De}return mt}function Jr(y,k,R,H){var fe=y.length;for(R=ve(R),R<0&&(R=-R>fe?0:fe+R),H=H===r||H>fe?fe:ve(H),H<0&&(H+=fe),H=R>H?0:Oe(H);R<H;)y[R++]=k;return y}function fr(y,k){var R=[];return mr(y,function(H,fe,De){k(H,fe,De)&&R.push(H)}),R}function ar(y,k,R,H,fe){var De=-1,Ve=y.length;for(R||(R=Am),fe||(fe=[]);++De<Ve;){var nt=y[De];k>0&&R(nt)?k>1?ar(nt,k-1,R,H,fe):Bu(fe,nt):H||(fe[fe.length]=nt)}return fe}var Hr=Eg(),vi=Eg(!0);function an(y,k){return y&&Hr(y,k,qn)}function Ln(y,k){return y&&vi(y,k,qn)}function ni(y,k){return uu(k,function(R){return Rs(y[R])})}function ia(y,k){k=Ls(k,y);for(var R=0,H=k.length;y!=null&&R<H;)y=y[el(k[R++])];return R&&R==H?y:r}function zs(y,k,R){var H=k(y);return yn(y)?H:Bu(H,R(y))}function In(y){return y==null?y===r?Rn:ke:El&&El in yi(y)?Jh(y):Cm(y)}function ho(y,k){return y>k}function Vi(y,k){return y!=null&&ui.call(y,k)}function qi(y,k){return y!=null&&k in yi(y)}function Da(y,k,R){return y>=Oa(k,R)&&y<Xi(k,R)}function fs(y,k,R){for(var H=R?Ud:Nu,fe=y[0].length,De=y.length,Ve=De,nt=Ct(De),mt=1/0,Qt=[];Ve--;){var er=y[Ve];Ve&&k&&(er=Gi(er,Gn(k))),mt=Oa(er.length,mt),nt[Ve]=!R&&(k||fe>=120&&er.length>=120)?new Eu(Ve&&er):r}er=y[0];var sr=-1,Mr=nt[0];e:for(;++sr<fe&&Qt.length<mt;){var on=er[sr],An=k?k(on):on;if(on=R||on!==0?on:0,!(Mr?bl(Mr,An):H(Qt,An,R))){for(Ve=De;--Ve;){var ii=nt[Ve];if(!(ii?bl(ii,An):H(y[Ve],An,R)))continue e}Mr&&Mr.push(An),Qt.push(on)}}return Qt}function Ec(y,k,R,H){return an(y,function(fe,De,Ve){k(H,R(fe),De,Ve)}),H}function Yo(y,k,R){k=Ls(k,y),y=Oc(y,k);var H=y==null?y:y[el(ga(k))];return H==null?r:us(H,y,R)}function eo(y){return Ga(y)&&In(y)==Tt}function ci(y){return Ga(y)&&In(y)==oi}function Ac(y){return Ga(y)&&In(y)==at}function Jo(y,k,R,H,fe){return y===k?!0:y==null||k==null||!Ga(y)&&!Ga(k)?y!==y&&k!==k:sn(y,k,R,H,Jo,fe)}function sn(y,k,R,H,fe,De){var Ve=yn(y),nt=yn(k),mt=Ve?rr:Co(y),Qt=nt?rr:Co(k);mt=mt==Tt?Xr:mt,Qt=Qt==Tt?Xr:Qt;var er=mt==Xr,sr=Qt==Xr,Mr=mt==Qt;if(Mr&&Nc(y)){if(!Nc(k))return!1;Ve=!0,er=!1}if(Mr&&!er)return De||(De=new p),Ve||I(y)?ep(y,k,R,H,fe,De):wy(y,k,mt,R,H,fe,De);if(!(R&U)){var on=er&&ui.call(y,"__wrapped__"),An=sr&&ui.call(k,"__wrapped__");if(on||An){var ii=on?y.value():y,kn=An?k.value():k;return De||(De=new p),fe(ii,kn,R,H,De)}}return Mr?(De||(De=new p),tp(y,k,R,H,fe,De)):!1}function Vn(y){return Ga(y)&&Co(y)==Lt}function Ti(y,k,R,H){var fe=R.length,De=fe,Ve=!H;if(y==null)return!De;for(y=yi(y);fe--;){var nt=R[fe];if(Ve&&nt[2]?nt[1]!==y[nt[0]]:!(nt[0]in y))return!1}for(;++fe<De;){nt=R[fe];var mt=nt[0],Qt=y[mt],er=nt[1];if(Ve&&nt[2]){if(Qt===r&&!(mt in y))return!1}else{var sr=new p;if(H)var Mr=H(Qt,er,mt,y,k,sr);if(!(Mr===r?Jo(er,Qt,U|W,H,sr):Mr))return!1}}return!0}function Qo(y){if(!ya(y)||Ey(y))return!1;var k=Rs(y)?wc:si;return k.test(ys(y))}function Ma(y){return Ga(y)&&In(y)==Wr}function za(y){return Ga(y)&&Co(y)==Hn}function Bo(y){return Ga(y)&&wd(y.length)&&!!qt[In(y)]}function Cn(y){return typeof y=="function"?y:y==null?Ol:typeof y=="object"?yn(y)?Hh(y[0],y[1]):Wh(y):Se(y)}function ps(y){if(!ef(y))return vu(y);var k=[];for(var R in yi(y))ui.call(y,R)&&R!="constructor"&&k.push(R);return k}function id(y){if(!ya(y))return Ic(y);var k=ef(y),R=[];for(var H in y)H=="constructor"&&(k||!ui.call(y,H))||R.push(H);return R}function Di(y,k){return y<k}function Jd(y,k){var R=-1,H=ro(y)?Ct(y.length):[];return mr(y,function(fe,De,Ve){H[++R]=k(fe,De,Ve)}),H}function Wh(y){var k=hd(y);return k.length==1&&k[0][2]?ap(k[0][0],k[0][1]):function(R){return R===y||Ti(R,y,k)}}function Hh(y,k){return np(y)&&Tu(k)?ap(el(y),k):function(R){var H=Mo(R,y);return H===r&&H===k?Za(R,y):Jo(k,H,U|W)}}function Js(y,k,R,H,fe){y!==k&&Hr(k,function(De,Ve){if(fe||(fe=new p),ya(De))gg(y,k,Ve,R,Js,H,fe);else{var nt=H?H(oa(y,Ve),De,Ve+"",y,k,fe):r;nt===r&&(nt=De),ye(y,Ve,nt)}},xi)}function gg(y,k,R,H,fe,De,Ve){var nt=oa(y,R),mt=oa(k,R),Qt=Ve.get(mt);if(Qt){ye(y,R,Qt);return}var er=De?De(nt,mt,R+"",y,k,Ve):r,sr=er===r;if(sr){var Mr=yn(mt),on=!Mr&&Nc(mt),An=!Mr&&!on&&I(mt);er=mt,Mr||on||An?yn(nt)?er=nt:$a(nt)?er=gs(nt):on?(sr=!1,er=fm(mt,!0)):An?(sr=!1,er=bg(mt,!0)):er=[]:a(mt)||gh(mt)?(er=nt,gh(nt)?er=dt(nt):(!ya(nt)||Rs(nt))&&(er=Sm(mt))):sr=!1}sr&&(Ve.set(mt,er),fe(er,mt,H,De,Ve),Ve.delete(mt)),ye(y,R,er)}function kc(y,k){var R=y.length;if(R)return k+=k<0?R:0,Cu(k,R)?y[k]:r}function Yu(y,k,R){k.length?k=Gi(k,function(De){return yn(De)?function(Ve){return ia(Ve,De.length===1?De[0]:De)}:De}):k=[Ol];var H=-1;k=Gi(k,Gn(ln()));var fe=Jd(y,function(De,Ve,nt){var mt=Gi(k,function(Qt){return Qt(De)});return{criteria:mt,index:++H,value:De}});return hg(fe,function(De,Ve){return es(De,Ve,R)})}function ad(y,k){return to(y,k,function(R,H){return Za(y,H)})}function to(y,k,R){for(var H=-1,fe=k.length,De={};++H<fe;){var Ve=k[H],nt=ia(y,Ve);R(nt,Ve)&&Qs(De,Ls(Ve,y),nt)}return De}function Yi(y){return function(k){return ia(k,y)}}function Ql(y,k,R,H){var fe=H?Gf:Fu,De=-1,Ve=k.length,nt=y;for(y===k&&(k=gs(k)),R&&(nt=Gi(y,Gn(R)));++De<Ve;)for(var mt=0,Qt=k[De],er=R?R(Qt):Qt;(mt=fe(nt,er,mt,H))>-1;)nt!==y&&Eo.call(nt,mt,1),Eo.call(y,mt,1);return y}function Cc(y,k){for(var R=y?k.length:0,H=R-1;R--;){var fe=k[R];if(R==H||fe!==De){var De=fe;Cu(fe)?Eo.call(y,fe,1):sd(y,fe)}}return y}function Qd(y,k){return y+yu(Al()*(k-y+1))}function mg(y,k,R,H){for(var fe=-1,De=Xi(mu((k-y)/(R||1)),0),Ve=Ct(De);De--;)Ve[H?De:++fe]=y,y+=R;return Ve}function Au(y,k){var R="";if(!y||k<1||k>ze)return R;do k%2&&(R+=y),k=yu(k/2),k&&(y+=y);while(k);return R}function On(y,k){return Cg(op(y,k,Ol),y+"")}function eh(y){return K(sl(y))}function od(y,k){var R=sl(y);return nf(R,et(k,0,R.length))}function Qs(y,k,R,H){if(!ya(y))return y;k=Ls(k,y);for(var fe=-1,De=k.length,Ve=De-1,nt=y;nt!=null&&++fe<De;){var mt=el(k[fe]),Qt=R;if(mt==="__proto__"||mt==="constructor"||mt==="prototype")return y;if(fe!=Ve){var er=nt[mt];Qt=H?H(er,mt,nt):r,Qt===r&&(Qt=ya(er)?er:Cu(k[fe+1])?[]:{})}we(nt,mt,Qt),nt=nt[mt]}return y}var Cl=na?function(y,k){return na.set(y,k),y}:Ol,Tc=Ko?function(y,k){return Ko(y,"toString",{configurable:!0,enumerable:!1,value:Kg(k),writable:!0})}:Ol;function um(y){return nf(sl(y))}function ko(y,k,R){var H=-1,fe=y.length;k<0&&(k=-k>fe?0:fe+k),R=R>fe?fe:R,R<0&&(R+=fe),fe=k>R?0:R-k>>>0,k>>>=0;for(var De=Ct(fe);++H<fe;)De[H]=y[H+k];return De}function vy(y,k){var R;return mr(y,function(H,fe,De){return R=k(H,fe,De),!R}),!!R}function th(y,k,R){var H=0,fe=y==null?H:y.length;if(typeof k=="number"&&k===k&&fe<=Ze){for(;H<fe;){var De=H+fe>>>1,Ve=y[De];Ve!==null&&!z(Ve)&&(R?Ve<=k:Ve<k)?H=De+1:fe=De}return fe}return Aa(y,k,Ol,R)}function Aa(y,k,R,H){var fe=0,De=y==null?0:y.length;if(De===0)return 0;k=R(k);for(var Ve=k!==k,nt=k===null,mt=z(k),Qt=k===r;fe<De;){var er=yu((fe+De)/2),sr=R(y[er]),Mr=sr!==r,on=sr===null,An=sr===sr,ii=z(sr);if(Ve)var kn=H||An;else Qt?kn=An&&(H||Mr):nt?kn=An&&Mr&&(H||!on):mt?kn=An&&Mr&&!on&&(H||!ii):on||ii?kn=!1:kn=H?sr<=k:sr<k;kn?fe=er+1:De=er}return Oa(De,qe)}function yg(y,k){for(var R=-1,H=y.length,fe=0,De=[];++R<H;){var Ve=y[R],nt=k?k(Ve):Ve;if(!R||!xs(nt,mt)){var mt=nt;De[fe++]=Ve===0?0:Ve}}return De}function vg(y){return typeof y=="number"?y:z(y)?st:+y}function fo(y){if(typeof y=="string")return y;if(yn(y))return Gi(y,fo)+"";if(z(y))return En?En.call(y):"";var k=y+"";return k=="0"&&1/y==-ge?"-0":k}function Ps(y,k,R){var H=-1,fe=Nu,De=y.length,Ve=!0,nt=[],mt=nt;if(R)Ve=!1,fe=Ud;else if(De>=o){var Qt=k?null:Yh(y);if(Qt)return Gu(Qt);Ve=!1,fe=bl,mt=new Eu}else mt=k?[]:nt;e:for(;++H<De;){var er=y[H],sr=k?k(er):er;if(er=R||er!==0?er:0,Ve&&sr===sr){for(var Mr=mt.length;Mr--;)if(mt[Mr]===sr)continue e;k&&mt.push(sr),nt.push(er)}else fe(mt,sr,R)||(mt!==nt&&mt.push(sr),nt.push(er))}return nt}function sd(y,k){return k=Ls(k,y),y=Oc(y,k),y==null||delete y[el(ga(k))]}function Vf(y,k,R,H){return Qs(y,k,R(ia(y,k)),H)}function Zh(y,k,R,H){for(var fe=y.length,De=H?fe:-1;(H?De--:++De<fe)&&k(y[De],De,y););return R?ko(y,H?0:De,H?De+1:fe):ko(y,H?De+1:0,H?fe:De)}function cm(y,k){var R=y;return R instanceof vn&&(R=R.value()),Bf(k,function(H,fe){return fe.func.apply(fe.thisArg,Bu([H],fe.args))},R)}function qf(y,k,R){var H=y.length;if(H<2)return H?Ps(y[0]):[];for(var fe=-1,De=Ct(H);++fe<H;)for(var Ve=y[fe],nt=-1;++nt<H;)nt!=fe&&(De[fe]=ur(De[fe]||Ve,y[nt],k,R));return Ps(ar(De,1),k,R)}function dm(y,k,R){for(var H=-1,fe=y.length,De=k.length,Ve={};++H<fe;){var nt=H<De?k[H]:r;R(Ve,y[H],nt)}return Ve}function Wf(y){return $a(y)?y:[]}function xg(y){return typeof y=="function"?y:Ol}function Ls(y,k){return yn(y)?y:np(y,k)?[y]:Tm(Qe(y))}var hm=On;function eu(y,k,R){var H=y.length;return R=R===r?H:R,!k&&R>=H?y:ko(y,k,R)}var Ju=Fh||function(y){return $n.clearTimeout(y)};function fm(y,k){if(k)return y.slice();var R=y.length,H=qu?qu(R):new y.constructor(R);return y.copy(H),H}function Dc(y){var k=new y.constructor(y.byteLength);return new Ja(k).set(new Ja(y)),k}function _g(y,k){var R=k?Dc(y.buffer):y.buffer;return new y.constructor(R,y.byteOffset,y.byteLength)}function Hf(y){var k=new y.constructor(y.source,ea.exec(y));return k.lastIndex=y.lastIndex,k}function pm(y){return Ku?yi(Ku.call(y)):{}}function bg(y,k){var R=k?Dc(y.buffer):y.buffer;return new y.constructor(R,y.byteOffset,y.length)}function gm(y,k){if(y!==k){var R=y!==r,H=y===null,fe=y===y,De=z(y),Ve=k!==r,nt=k===null,mt=k===k,Qt=z(k);if(!nt&&!Qt&&!De&&y>k||De&&Ve&&mt&&!nt&&!Qt||H&&Ve&&mt||!R&&mt||!fe)return 1;if(!H&&!De&&!Qt&&y<k||Qt&&R&&fe&&!H&&!De||nt&&R&&fe||!Ve&&fe||!mt)return-1}return 0}function es(y,k,R){for(var H=-1,fe=y.criteria,De=k.criteria,Ve=fe.length,nt=R.length;++H<Ve;){var mt=gm(fe[H],De[H]);if(mt){if(H>=nt)return mt;var Qt=R[H];return mt*(Qt=="desc"?-1:1)}}return y.index-k.index}function Mc(y,k,R,H){for(var fe=-1,De=y.length,Ve=R.length,nt=-1,mt=k.length,Qt=Xi(De-Ve,0),er=Ct(mt+Qt),sr=!H;++nt<mt;)er[nt]=k[nt];for(;++fe<Ve;)(sr||fe<De)&&(er[R[fe]]=y[fe]);for(;Qt--;)er[nt++]=y[fe++];return er}function Zf(y,k,R,H){for(var fe=-1,De=y.length,Ve=-1,nt=R.length,mt=-1,Qt=k.length,er=Xi(De-nt,0),sr=Ct(er+Qt),Mr=!H;++fe<er;)sr[fe]=y[fe];for(var on=fe;++mt<Qt;)sr[on+mt]=k[mt];for(;++Ve<nt;)(Mr||fe<De)&&(sr[on+R[Ve]]=y[fe++]);return sr}function gs(y,k){var R=-1,H=y.length;for(k||(k=Ct(H));++R<H;)k[R]=y[R];return k}function ms(y,k,R,H){var fe=!R;R||(R={});for(var De=-1,Ve=k.length;++De<Ve;){var nt=k[De],mt=H?H(R[nt],y[nt],nt,R,y):r;mt===r&&(mt=y[nt]),fe?We(R,nt,mt):we(R,nt,mt)}return R}function xy(y,k){return ms(y,fd(y),k)}function Kf(y,k){return ms(y,ih(y),k)}function wg(y,k){return function(R,H){var fe=yn(R)?sg:je,De=k?k():{};return fe(R,y,ln(H,2),De)}}function zc(y){return On(function(k,R){var H=-1,fe=R.length,De=fe>1?R[fe-1]:r,Ve=fe>2?R[2]:r;for(De=y.length>3&&typeof De=="function"?(fe--,De):r,Ve&&Na(R[0],R[1],Ve)&&(De=fe<3?r:De,fe=1),k=yi(k);++H<fe;){var nt=R[H];nt&&y(k,nt,H,De)}return k})}function Sg(y,k){return function(R,H){if(R==null)return R;if(!ro(R))return y(R,H);for(var fe=R.length,De=k?fe:-1,Ve=yi(R);(k?De--:++De<fe)&&H(Ve[De],De,Ve)!==!1;);return R}}function Eg(y){return function(k,R,H){for(var fe=-1,De=yi(k),Ve=H(k),nt=Ve.length;nt--;){var mt=Ve[y?nt:++fe];if(R(De[mt],mt,De)===!1)break}return k}}function mm(y,k,R){var H=k&G,fe=rh(y);function De(){var Ve=this&&this!==$n&&this instanceof De?fe:y;return Ve.apply(H?R:this,arguments)}return De}function Xf(y){return function(k){k=Qe(k);var R=hu(k)?ra(k):r,H=R?R[0]:k.charAt(0),fe=R?eu(R,1).join(""):k.slice(1);return H[y]()+fe}}function ld(y){return function(k){return Bf(Mx(yh(k).replace(bt,"")),y,"")}}function rh(y){return function(){var k=arguments;switch(k.length){case 0:return new y;case 1:return new y(k[0]);case 2:return new y(k[0],k[1]);case 3:return new y(k[0],k[1],k[2]);case 4:return new y(k[0],k[1],k[2],k[3]);case 5:return new y(k[0],k[1],k[2],k[3],k[4]);case 6:return new y(k[0],k[1],k[2],k[3],k[4],k[5]);case 7:return new y(k[0],k[1],k[2],k[3],k[4],k[5],k[6])}var R=Xu(y.prototype),H=y.apply(R,k);return ya(H)?H:R}}function Yf(y,k,R){var H=rh(y);function fe(){for(var De=arguments.length,Ve=Ct(De),nt=De,mt=Ra(fe);nt--;)Ve[nt]=arguments[nt];var Qt=De<3&&Ve[0]!==mt&&Ve[De-1]!==mt?[]:cs(Ve,mt);if(De-=Qt.length,De<R)return Qf(y,k,ud,fe.placeholder,r,Ve,Qt,r,r,R-De);var er=this&&this!==$n&&this instanceof fe?H:y;return us(er,this,Ve)}return fe}function Is(y){return function(k,R,H){var fe=yi(k);if(!ro(k)){var De=ln(R,3);k=qn(k),R=function(nt){return De(fe[nt],nt,fe)}}var Ve=y(k,R,H);return Ve>-1?fe[De?k[Ve]:Ve]:r}}function nh(y){return Qu(function(k){var R=k.length,H=R,fe=hs.prototype.thru;for(y&&k.reverse();H--;){var De=k[H];if(typeof De!="function")throw new No(h);if(fe&&!Ve&&fa(De)=="wrapper")var Ve=new hs([],!0)}for(H=Ve?H:R;++H<R;){De=k[H];var nt=fa(De),mt=nt=="wrapper"?aa(De):r;mt&&ec(mt[0])&&mt[1]==(he|ne|Q|Y)&&!mt[4].length&&mt[9]==1?Ve=Ve[fa(mt[0])].apply(Ve,mt[3]):Ve=De.length==1&&ec(De)?Ve[nt]():Ve.thru(De)}return function(){var Qt=arguments,er=Qt[0];if(Ve&&Qt.length==1&&yn(er))return Ve.plant(er).value();for(var sr=0,Mr=R?k[sr].apply(this,Qt):er;++sr<R;)Mr=k[sr].call(this,Mr);return Mr}})}function ud(y,k,R,H,fe,De,Ve,nt,mt,Qt){var er=k&he,sr=k&G,Mr=k&X,on=k&(ne|ue),An=k&ie,ii=Mr?r:rh(y);function kn(){for(var _i=arguments.length,zi=Ct(_i),Fc=_i;Fc--;)zi[Fc]=arguments[Fc];if(on)var Lu=Ra(kn),$c=yc(zi,Lu);if(H&&(zi=Mc(zi,H,fe,on)),De&&(zi=Zf(zi,De,Ve,on)),_i-=$c,on&&_i<Qt){var as=cs(zi,Lu);return Qf(y,k,ud,kn.placeholder,R,zi,as,nt,mt,Qt-_i)}var vh=sr?R:this,zp=Mr?vh[y]:y;return _i=zi.length,nt?zi=ah(zi,nt):An&&_i>1&&zi.reverse(),er&&mt<_i&&(zi.length=mt),this&&this!==$n&&this instanceof kn&&(zp=ii||rh(zp)),zp.apply(vh,zi)}return kn}function Jf(y,k){return function(R,H){return Ec(R,y,k(H),{})}}function Kh(y,k){return function(R,H){var fe;if(R===r&&H===r)return k;if(R!==r&&(fe=R),H!==r){if(fe===r)return H;typeof R=="string"||typeof H=="string"?(R=fo(R),H=fo(H)):(R=vg(R),H=vg(H)),fe=y(R,H)}return fe}}function Ag(y){return Qu(function(k){return k=Gi(k,Gn(ln())),On(function(R){var H=this;return y(k,function(fe){return us(fe,H,R)})})})}function cd(y,k){k=k===r?" ":fo(k);var R=k.length;if(R<2)return R?Au(k,y):k;var H=Au(k,mu(y/xc(k)));return hu(k)?eu(ra(H),0,y).join(""):H.slice(0,y)}function _y(y,k,R,H){var fe=k&G,De=rh(y);function Ve(){for(var nt=-1,mt=arguments.length,Qt=-1,er=H.length,sr=Ct(er+mt),Mr=this&&this!==$n&&this instanceof Ve?De:y;++Qt<er;)sr[Qt]=H[Qt];for(;mt--;)sr[Qt++]=arguments[++nt];return us(Mr,fe?R:this,sr)}return Ve}function kg(y){return function(k,R,H){return H&&typeof H!="number"&&Na(k,R,H)&&(R=H=r),k=xe(k),R===r?(R=k,k=0):R=xe(R),H=H===r?k<R?1:-1:xe(H),mg(k,R,H,y)}}function Xh(y){return function(k,R){return typeof k=="string"&&typeof R=="string"||(k=Be(k),R=Be(R)),y(k,R)}}function Qf(y,k,R,H,fe,De,Ve,nt,mt,Qt){var er=k&ne,sr=er?Ve:r,Mr=er?r:Ve,on=er?De:r,An=er?r:De;k|=er?Q:de,k&=~(er?de:Q),k&ae||(k&=-4);var ii=[y,k,fe,on,sr,An,Mr,nt,mt,Qt],kn=R.apply(r,ii);return ec(y)&&ky(kn,ii),kn.placeholder=H,rf(kn,y,k)}function ku(y){var k=ki[y];return function(R,H){if(R=Be(R),H=H==null?0:Oa(ve(H),292),H&&Xo(R)){var fe=(Qe(R)+"e").split("e"),De=k(fe[0]+"e"+(+fe[1]+H));return fe=(Qe(De)+"e").split("e"),+(fe[0]+"e"+(+fe[1]-H))}return k(R)}}var Yh=xu&&1/Gu(new xu([,-0]))[1]==ge?function(y){return new xu(y)}:g;function ym(y){return function(k){var R=Co(k);return R==Lt?$u(k):R==Hn?jh(k):Mn(k,y(k))}}function Os(y,k,R,H,fe,De,Ve,nt){var mt=k&X;if(!mt&&typeof y!="function")throw new No(h);var Qt=H?H.length:0;if(Qt||(k&=-97,H=fe=r),Ve=Ve===r?Ve:Xi(ve(Ve),0),nt=nt===r?nt:ve(nt),Qt-=fe?fe.length:0,k&de){var er=H,sr=fe;H=fe=r}var Mr=mt?r:aa(y),on=[y,k,R,H,fe,er,sr,De,Ve,nt];if(Mr&&Ay(on,Mr),y=on[0],k=on[1],R=on[2],H=on[3],fe=on[4],nt=on[9]=on[9]===r?mt?0:y.length:Xi(on[9]-Qt,0),!nt&&k&(ne|ue)&&(k&=-25),!k||k==G)var An=mm(y,k,R);else k==ne||k==ue?An=Yf(y,k,nt):(k==Q||k==(G|Q))&&!fe.length?An=_y(y,k,R,H):An=ud.apply(r,on);var ii=Mr?Cl:ky;return rf(ii(An,on),y,k)}function vm(y,k,R,H){return y===r||xs(y,Qc[R])&&!ui.call(H,R)?k:y}function xm(y,k,R,H,fe,De){return ya(y)&&ya(k)&&(De.set(k,y),Js(y,k,r,xm,De),De.delete(k)),y}function by(y){return a(y)?r:y}function ep(y,k,R,H,fe,De){var Ve=R&U,nt=y.length,mt=k.length;if(nt!=mt&&!(Ve&&mt>nt))return!1;var Qt=De.get(y),er=De.get(k);if(Qt&&er)return Qt==k&&er==y;var sr=-1,Mr=!0,on=R&W?new Eu:r;for(De.set(y,k),De.set(k,y);++sr<nt;){var An=y[sr],ii=k[sr];if(H)var kn=Ve?H(ii,An,sr,k,y,De):H(An,ii,sr,y,k,De);if(kn!==r){if(kn)continue;Mr=!1;break}if(on){if(!Ph(k,function(_i,zi){if(!bl(on,zi)&&(An===_i||fe(An,_i,R,H,De)))return on.push(zi)})){Mr=!1;break}}else if(!(An===ii||fe(An,ii,R,H,De))){Mr=!1;break}}return De.delete(y),De.delete(k),Mr}function wy(y,k,R,H,fe,De,Ve){switch(R){case Rt:if(y.byteLength!=k.byteLength||y.byteOffset!=k.byteOffset)return!1;y=y.buffer,k=k.buffer;case oi:return!(y.byteLength!=k.byteLength||!De(new Ja(y),new Ja(k)));case tr:case at:case Wt:return xs(+y,+k);case Mt:return y.name==k.name&&y.message==k.message;case Wr:case fi:return y==k+"";case Lt:var nt=$u;case Hn:var mt=H&U;if(nt||(nt=Gu),y.size!=k.size&&!mt)return!1;var Qt=Ve.get(y);if(Qt)return Qt==k;H|=W,Ve.set(y,k);var er=ep(nt(y),nt(k),H,fe,De,Ve);return Ve.delete(y),er;case ba:if(Ku)return Ku.call(y)==Ku.call(k)}return!1}function tp(y,k,R,H,fe,De){var Ve=R&U,nt=Pc(y),mt=nt.length,Qt=Pc(k),er=Qt.length;if(mt!=er&&!Ve)return!1;for(var sr=mt;sr--;){var Mr=nt[sr];if(!(Ve?Mr in k:ui.call(k,Mr)))return!1}var on=De.get(y),An=De.get(k);if(on&&An)return on==k&&An==y;var ii=!0;De.set(y,k),De.set(k,y);for(var kn=Ve;++sr<mt;){Mr=nt[sr];var _i=y[Mr],zi=k[Mr];if(H)var Fc=Ve?H(zi,_i,Mr,k,y,De):H(_i,zi,Mr,y,k,De);if(!(Fc===r?_i===zi||fe(_i,zi,R,H,De):Fc)){ii=!1;break}kn||(kn=Mr=="constructor")}if(ii&&!kn){var Lu=y.constructor,$c=k.constructor;Lu!=$c&&"constructor"in y&&"constructor"in k&&!(typeof Lu=="function"&&Lu instanceof Lu&&typeof $c=="function"&&$c instanceof $c)&&(ii=!1)}return De.delete(y),De.delete(k),ii}function Qu(y){return Cg(op(y,r,pa),y+"")}function Pc(y){return zs(y,qn,fd)}function _m(y){return zs(y,xi,ih)}var aa=na?function(y){return na.get(y)}:g;function fa(y){for(var k=y.name+"",R=Bn[k],H=ui.call(Bn,k)?R.length:0;H--;){var fe=R[H],De=fe.func;if(De==null||De==y)return fe.name}return k}function Ra(y){var k=ui.call(be,"placeholder")?be:y;return k.placeholder}function ln(){var y=be.iteratee||Ym;return y=y===Ym?Cn:y,arguments.length?y(arguments[0],arguments[1]):y}function dd(y,k){var R=y.__data__;return ip(k)?R[typeof k=="string"?"string":"hash"]:R.map}function hd(y){for(var k=qn(y),R=k.length;R--;){var H=k[R],fe=y[H];k[R]=[H,fe,Tu(fe)]}return k}function Lc(y,k){var R=Oh(y,k);return Qo(R)?R:r}function Jh(y){var k=ui.call(y,El),R=y[El];try{y[El]=r;var H=!0}catch{}var fe=Ci.call(y);return H&&(k?y[El]=R:delete y[El]),fe}var fd=Sc?function(y){return y==null?[]:(y=yi(y),uu(Sc(y),function(k){return Hl.call(y,k)}))}:Kt,ih=Sc?function(y){for(var k=[];y;)Bu(k,fd(y)),y=Ys(y);return k}:Kt,Co=In;(co&&Co(new co(new ArrayBuffer(1)))!=Rt||Ds&&Co(new Ds)!=Lt||Gh&&Co(Gh.resolve())!=rn||xu&&Co(new xu)!=Hn||Hu&&Co(new Hu)!=ai)&&(Co=function(y){var k=In(y),R=k==Xr?y.constructor:r,H=R?ys(R):"";if(H)switch(H){case Yt:return Rt;case kl:return Lt;case ds:return rn;case Uh:return Hn;case Ms:return ai}return k});function bm(y,k,R){for(var H=-1,fe=R.length;++H<fe;){var De=R[H],Ve=De.size;switch(De.type){case"drop":y+=Ve;break;case"dropRight":k-=Ve;break;case"take":k=Oa(k,y+Ve);break;case"takeRight":y=Xi(y,k-Ve);break}}return{start:y,end:k}}function Qh(y){var k=y.match(Lr);return k?k[1].split($r):[]}function rp(y,k,R){k=Ls(k,y);for(var H=-1,fe=k.length,De=!1;++H<fe;){var Ve=el(k[H]);if(!(De=y!=null&&R(y,Ve)))break;y=y[Ve]}return De||++H!=fe?De:(fe=y==null?0:y.length,!!fe&&wd(fe)&&Cu(Ve,fe)&&(yn(y)||gh(y)))}function wm(y){var k=y.length,R=new y.constructor(k);return k&&typeof y[0]=="string"&&ui.call(y,"index")&&(R.index=y.index,R.input=y.input),R}function Sm(y){return typeof y.constructor=="function"&&!ef(y)?Xu(Ys(y)):{}}function Sy(y,k,R){var H=y.constructor;switch(k){case oi:return Dc(y);case tr:case at:return new H(+y);case Rt:return _g(y,R);case Fi:case Fn:case Pi:case ca:case nr:case kr:case jr:case Jn:case Xa:return bg(y,R);case Lt:return new H;case Wt:case fi:return new H(y);case Wr:return Hf(y);case Hn:return new H;case ba:return pm(y)}}function Em(y,k){var R=k.length;if(!R)return y;var H=R-1;return k[H]=(R>1?"& ":"")+k[H],k=k.join(R>2?", ":" "),y.replace(lr,`{
/* [wrapped with `+k+`] */
`)}function Am(y){return yn(y)||gh(y)||!!(Bh&&y&&y[Bh])}function Cu(y,k){var R=typeof y;return k=k??ze,!!k&&(R=="number"||R!="symbol"&&Ca.test(y))&&y>-1&&y%1==0&&y<k}function Na(y,k,R){if(!ya(R))return!1;var H=typeof k;return(H=="number"?ro(R)&&Cu(k,R.length):H=="string"&&k in R)?xs(R[k],y):!1}function np(y,k){if(yn(y))return!1;var R=typeof y;return R=="number"||R=="symbol"||R=="boolean"||y==null||z(y)?!0:tt.test(y)||!Ye.test(y)||k!=null&&y in yi(k)}function ip(y){var k=typeof y;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?y!=="__proto__":y===null}function ec(y){var k=fa(y),R=be[k];if(typeof R!="function"||!(k in vn.prototype))return!1;if(y===R)return!0;var H=aa(R);return!!H&&y===H[0]}function Ey(y){return!!Vu&&Vu in y}var km=Zd?Rs:kt;function ef(y){var k=y&&y.constructor,R=typeof k=="function"&&k.prototype||Qc;return y===R}function Tu(y){return y===y&&!ya(y)}function ap(y,k){return function(R){return R==null?!1:R[y]===k&&(k!==r||y in yi(R))}}function q0(y){var k=gf(y,function(H){return R.size===x&&R.clear(),H}),R=k.cache;return k}function Ay(y,k){var R=y[1],H=k[1],fe=R|H,De=fe<(G|X|he),Ve=H==he&&R==ne||H==he&&R==Y&&y[7].length<=k[8]||H==(he|Y)&&k[7].length<=k[8]&&R==ne;if(!(De||Ve))return y;H&G&&(y[2]=k[2],fe|=R&G?0:ae);var nt=k[3];if(nt){var mt=y[3];y[3]=mt?Mc(mt,nt,k[4]):nt,y[4]=mt?cs(y[3],A):k[4]}return nt=k[5],nt&&(mt=y[5],y[5]=mt?Zf(mt,nt,k[6]):nt,y[6]=mt?cs(y[5],A):k[6]),nt=k[7],nt&&(y[7]=nt),H&he&&(y[8]=y[8]==null?k[8]:Oa(y[8],k[8])),y[9]==null&&(y[9]=k[9]),y[0]=k[0],y[1]=fe,y}function Ic(y){var k=[];if(y!=null)for(var R in yi(y))k.push(R);return k}function Cm(y){return Ci.call(y)}function op(y,k,R){return k=Xi(k===r?y.length-1:k,0),function(){for(var H=arguments,fe=-1,De=Xi(H.length-k,0),Ve=Ct(De);++fe<De;)Ve[fe]=H[k+fe];fe=-1;for(var nt=Ct(k+1);++fe<k;)nt[fe]=H[fe];return nt[k]=R(Ve),us(y,this,nt)}}function Oc(y,k){return k.length<2?y:ia(y,ko(k,0,-1))}function ah(y,k){for(var R=y.length,H=Oa(k.length,R),fe=gs(y);H--;){var De=k[H];y[H]=Cu(De,R)?fe[De]:r}return y}function oa(y,k){if(!(k==="constructor"&&typeof y[k]=="function")&&k!="__proto__")return y[k]}var ky=Tl(Cl),tf=Ts||function(y,k){return $n.setTimeout(y,k)},Cg=Tl(Tc);function rf(y,k,R){var H=k+"";return Cg(y,Em(H,Cy(Qh(H),R)))}function Tl(y){var k=0,R=0;return function(){var H=Ea(),fe=me-(H-R);if(R=H,fe>0){if(++k>=Me)return arguments[0]}else k=0;return y.apply(r,arguments)}}function nf(y,k){var R=-1,H=y.length,fe=H-1;for(k=k===r?H:k;++R<k;){var De=Qd(R,fe),Ve=y[De];y[De]=y[R],y[R]=Ve}return y.length=k,y}var Tm=q0(function(y){var k=[];return y.charCodeAt(0)===46&&k.push(""),y.replace(ut,function(R,H,fe,De){k.push(fe?De.replace(cn,"$1"):H||R)}),k});function el(y){if(typeof y=="string"||z(y))return y;var k=y+"";return k=="0"&&1/y==-ge?"-0":k}function ys(y){if(y!=null){try{return bc.call(y)}catch{}try{return y+""}catch{}}return""}function Cy(y,k){return Ya(zt,function(R){var H="_."+R[0];k&R[1]&&!Nu(y,H)&&y.push(H)}),y.sort()}function Tg(y){if(y instanceof vn)return y.clone();var k=new hs(y.__wrapped__,y.__chain__);return k.__actions__=gs(y.__actions__),k.__index__=y.__index__,k.__values__=y.__values__,k}function Ty(y,k,R){(R?Na(y,k,R):k===r)?k=1:k=Xi(ve(k),0);var H=y==null?0:y.length;if(!H||k<1)return[];for(var fe=0,De=0,Ve=Ct(mu(H/k));fe<H;)Ve[De++]=ko(y,fe,fe+=k);return Ve}function Dg(y){for(var k=-1,R=y==null?0:y.length,H=0,fe=[];++k<R;){var De=y[k];De&&(fe[H++]=De)}return fe}function sp(){var y=arguments.length;if(!y)return[];for(var k=Ct(y-1),R=arguments[0],H=y;H--;)k[H-1]=arguments[H];return Bu(yn(R)?gs(R):[R],ar(k,1))}var lp=On(function(y,k){return $a(y)?ur(y,ar(k,1,$a,!0)):[]}),Dm=On(function(y,k){var R=ga(k);return $a(R)&&(R=r),$a(y)?ur(y,ar(k,1,$a,!0),ln(R,2)):[]}),tc=On(function(y,k){var R=ga(k);return $a(R)&&(R=r),$a(y)?ur(y,ar(k,1,$a,!0),r,R):[]});function po(y,k,R){var H=y==null?0:y.length;return H?(k=R||k===r?1:ve(k),ko(y,k<0?0:k,H)):[]}function af(y,k,R){var H=y==null?0:y.length;return H?(k=R||k===r?1:ve(k),k=H-k,ko(y,0,k<0?0:k)):[]}function Dy(y,k){return y&&y.length?Zh(y,ln(k,3),!0,!0):[]}function To(y,k){return y&&y.length?Zh(y,ln(k,3),!0):[]}function W0(y,k,R,H){var fe=y==null?0:y.length;return fe?(R&&typeof R!="number"&&Na(y,k,R)&&(R=0,H=fe),Jr(y,k,R,H)):[]}function Mm(y,k,R){var H=y==null?0:y.length;if(!H)return-1;var fe=R==null?0:ve(R);return fe<0&&(fe=Xi(H+fe,0)),Xs(y,ln(k,3),fe)}function zm(y,k,R){var H=y==null?0:y.length;if(!H)return-1;var fe=H-1;return R!==r&&(fe=ve(R),fe=R<0?Xi(H+fe,0):Oa(fe,H-1)),Xs(y,ln(k,3),fe,!0)}function pa(y){var k=y==null?0:y.length;return k?ar(y,1):[]}function tl(y){var k=y==null?0:y.length;return k?ar(y,ge):[]}function jc(y,k){var R=y==null?0:y.length;return R?(k=k===r?1:ve(k),ar(y,k)):[]}function of(y){for(var k=-1,R=y==null?0:y.length,H={};++k<R;){var fe=y[k];H[fe[0]]=fe[1]}return H}function Ba(y){return y&&y.length?y[0]:r}function Pm(y,k,R){var H=y==null?0:y.length;if(!H)return-1;var fe=R==null?0:ve(R);return fe<0&&(fe=Xi(H+fe,0)),Fu(y,k,fe)}function My(y){var k=y==null?0:y.length;return k?ko(y,0,-1):[]}var up=On(function(y){var k=Gi(y,Wf);return k.length&&k[0]===y[0]?fs(k):[]}),jn=On(function(y){var k=ga(y),R=Gi(y,Wf);return k===ga(R)?k=r:R.pop(),R.length&&R[0]===y[0]?fs(R,ln(k,2)):[]}),Dl=On(function(y){var k=ga(y),R=Gi(y,Wf);return k=typeof k=="function"?k:r,k&&R.pop(),R.length&&R[0]===y[0]?fs(R,r,k):[]});function Lm(y,k){return y==null?"":Wu.call(y,k)}function ga(y){var k=y==null?0:y.length;return k?y[k-1]:r}function rc(y,k,R){var H=y==null?0:y.length;if(!H)return-1;var fe=H;return R!==r&&(fe=ve(R),fe=fe<0?Xi(H+fe,0):Oa(fe,H-1)),k===k?Jc(y,k,fe):Xs(y,Lh,fe,!0)}function rl(y,k){return y&&y.length?kc(y,ve(k)):r}var pd=On(nc);function nc(y,k){return y&&y.length&&k&&k.length?Ql(y,k):y}function Im(y,k,R){return y&&y.length&&k&&k.length?Ql(y,k,ln(R,2)):y}function Om(y,k,R){return y&&y.length&&k&&k.length?Ql(y,k,r,R):y}var Du=Qu(function(y,k){var R=y==null?0:y.length,H=Le(y,k);return Cc(y,Gi(k,function(fe){return Cu(fe,R)?+fe:fe}).sort(gm)),H});function zy(y,k){var R=[];if(!(y&&y.length))return R;var H=-1,fe=[],De=y.length;for(k=ln(k,3);++H<De;){var Ve=y[H];k(Ve,H,y)&&(R.push(Ve),fe.push(H))}return Cc(y,fe),R}function gd(y){return y==null?y:Wa.call(y)}function cp(y,k,R){var H=y==null?0:y.length;return H?(R&&typeof R!="number"&&Na(y,k,R)?(k=0,R=H):(k=k==null?0:ve(k),R=R===r?H:ve(R)),ko(y,k,R)):[]}function dp(y,k){return th(y,k)}function sf(y,k,R){return Aa(y,k,ln(R,2))}function hp(y,k){var R=y==null?0:y.length;if(R){var H=th(y,k);if(H<R&&xs(y[H],k))return H}return-1}function oh(y,k){return th(y,k,!0)}function lf(y,k,R){return Aa(y,k,ln(R,2),!0)}function Mg(y,k){var R=y==null?0:y.length;if(R){var H=th(y,k,!0)-1;if(xs(y[H],k))return H}return-1}function uf(y){return y&&y.length?yg(y):[]}function Py(y,k){return y&&y.length?yg(y,ln(k,2)):[]}function H0(y){var k=y==null?0:y.length;return k?ko(y,1,k):[]}function Z0(y,k,R){return y&&y.length?(k=R||k===r?1:ve(k),ko(y,0,k<0?0:k)):[]}function Si(y,k,R){var H=y==null?0:y.length;return H?(k=R||k===r?1:ve(k),k=H-k,ko(y,k<0?0:k,H)):[]}function Ji(y,k){return y&&y.length?Zh(y,ln(k,3),!1,!0):[]}function pn(y,k){return y&&y.length?Zh(y,ln(k,3)):[]}var ei=On(function(y){return Ps(ar(y,1,$a,!0))}),Li=On(function(y){var k=ga(y);return $a(k)&&(k=r),Ps(ar(y,1,$a,!0),ln(k,2))}),go=On(function(y){var k=ga(y);return k=typeof k=="function"?k:r,Ps(ar(y,1,$a,!0),r,k)});function tu(y){return y&&y.length?Ps(y):[]}function ic(y,k){return y&&y.length?Ps(y,ln(k,2)):[]}function md(y,k){return k=typeof k=="function"?k:r,y&&y.length?Ps(y,r,k):[]}function nl(y){if(!(y&&y.length))return[];var k=0;return y=uu(y,function(R){if($a(R))return k=Xi(R.length,k),!0}),Ih(k,function(R){return Gi(y,cu(R))})}function ma(y,k){if(!(y&&y.length))return[];var R=nl(y);return k==null?R:Gi(R,function(H){return us(k,r,H)})}var yd=On(function(y,k){return $a(y)?ur(y,k):[]}),sh=On(function(y){return qf(uu(y,$a))}),zg=On(function(y){var k=ga(y);return $a(k)&&(k=r),qf(uu(y,$a),ln(k,2))}),il=On(function(y){var k=ga(y);return k=typeof k=="function"?k:r,qf(uu(y,$a),r,k)}),cf=On(nl);function df(y,k){return dm(y||[],k||[],we)}function js(y,k){return dm(y||[],k||[],Qs)}var fp=On(function(y){var k=y.length,R=k>1?y[k-1]:r;return R=typeof R=="function"?(y.pop(),R):r,ma(y,R)});function lh(y){var k=be(y);return k.__chain__=!0,k}function Ly(y,k){return k(y),y}function uh(y,k){return k(y)}var pp=Qu(function(y){var k=y.length,R=k?y[0]:0,H=this.__wrapped__,fe=function(De){return Le(De,y)};return k>1||this.__actions__.length||!(H instanceof vn)||!Cu(R)?this.thru(fe):(H=H.slice(R,+R+(k?1:0)),H.__actions__.push({func:uh,args:[fe],thisArg:r}),new hs(H,this.__chain__).thru(function(De){return k&&!De.length&&De.push(r),De}))});function Rc(){return lh(this)}function Fa(){return new hs(this.value(),this.__chain__)}function ts(){this.__values__===r&&(this.__values__=ce(this.value()));var y=this.__index__>=this.__values__.length,k=y?r:this.__values__[this.__index__++];return{done:y,value:k}}function Ml(){return this}function ac(y){for(var k,R=this;R instanceof Kl;){var H=Tg(R);H.__index__=0,H.__values__=r,k?fe.__wrapped__=H:k=H;var fe=H;R=R.__wrapped__}return fe.__wrapped__=y,k}function gp(){var y=this.__wrapped__;if(y instanceof vn){var k=y;return this.__actions__.length&&(k=new vn(this)),k=k.reverse(),k.__actions__.push({func:uh,args:[gd],thisArg:r}),new hs(k,this.__chain__)}return this.thru(gd)}function jm(){return cm(this.__wrapped__,this.__actions__)}var Iy=wg(function(y,k,R){ui.call(y,R)?++y[R]:We(y,R,1)});function vd(y,k,R){var H=yn(y)?ug:or;return R&&Na(y,k,R)&&(k=r),H(y,ln(k,3))}function mp(y,k){var R=yn(y)?uu:fr;return R(y,ln(k,3))}var zl=Is(Mm),Pg=Is(zm);function vs(y,k){return ar(vp(y,k),1)}function ch(y,k){return ar(vp(y,k),ge)}function Rm(y,k,R){return R=R===r?1:ve(R),ar(vp(y,k),R)}function Nm(y,k){var R=yn(y)?Ya:mr;return R(y,ln(k,3))}function Mu(y,k){var R=yn(y)?lg:hr;return R(y,ln(k,3))}var yp=wg(function(y,k,R){ui.call(y,R)?y[R].push(k):We(y,R,[k])});function hf(y,k,R,H){y=ro(y)?y:sl(y),R=R&&!H?ve(R):0;var fe=y.length;return R<0&&(R=Xi(fe+R,0)),M(y)?R<=fe&&y.indexOf(k,R)>-1:!!fe&&Fu(y,k,R)>-1}var dh=On(function(y,k,R){var H=-1,fe=typeof k=="function",De=ro(y)?Ct(y.length):[];return mr(y,function(Ve){De[++H]=fe?us(k,Ve,R):Yo(Ve,k,R)}),De}),Oy=wg(function(y,k,R){We(y,R,k)});function vp(y,k){var R=yn(y)?Gi:Jd;return R(y,ln(k,3))}function Bm(y,k,R,H){return y==null?[]:(yn(k)||(k=k==null?[]:[k]),R=H?r:R,yn(R)||(R=R==null?[]:[R]),Yu(y,k,R))}var jy=wg(function(y,k,R){y[R?0:1].push(k)},function(){return[[],[]]});function Lg(y,k,R){var H=yn(y)?Bf:qd,fe=arguments.length<3;return H(y,ln(k,4),R,fe,mr)}function Fm(y,k,R){var H=yn(y)?Ff:qd,fe=arguments.length<3;return H(y,ln(k,4),R,fe,hr)}function K0(y,k){var R=yn(y)?uu:fr;return R(y,_p(ln(k,3)))}function $m(y){var k=yn(y)?K:eh;return k(y)}function xd(y,k,R){(R?Na(y,k,R):k===r)?k=1:k=ve(k);var H=yn(y)?te:od;return H(y,k)}function Gm(y){var k=yn(y)?re:um;return k(y)}function Um(y){if(y==null)return 0;if(ro(y))return M(y)?xc(y):y.length;var k=Co(y);return k==Lt||k==Hn?y.size:ps(y).length}function hh(y,k,R){var H=yn(y)?Ph:vy;return R&&Na(y,k,R)&&(k=r),H(y,ln(k,3))}var xp=On(function(y,k){if(y==null)return[];var R=k.length;return R>1&&Na(y,k[0],k[1])?k=[]:R>2&&Na(k[0],k[1],k[2])&&(k=[k[0]]),Yu(y,ar(k,1),[])}),ff=rd||function(){return $n.Date.now()};function Ig(y,k){if(typeof k!="function")throw new No(h);return y=ve(y),function(){if(--y<1)return k.apply(this,arguments)}}function fh(y,k,R){return k=R?r:k,k=y&&k==null?y.length:k,Os(y,he,r,r,r,r,k)}function Og(y,k){var R;if(typeof k!="function")throw new No(h);return y=ve(y),function(){return--y>0&&(R=k.apply(this,arguments)),y<=1&&(k=r),R}}var pf=On(function(y,k,R){var H=G;if(R.length){var fe=cs(R,Ra(pf));H|=Q}return Os(y,H,k,R,fe)}),jg=On(function(y,k,R){var H=G|X;if(R.length){var fe=cs(R,Ra(jg));H|=Q}return Os(k,H,y,R,fe)});function rs(y,k,R){k=R?r:k;var H=Os(y,ne,r,r,r,r,r,k);return H.placeholder=rs.placeholder,H}function ph(y,k,R){k=R?r:k;var H=Os(y,ue,r,r,r,r,r,k);return H.placeholder=ph.placeholder,H}function Rg(y,k,R){var H,fe,De,Ve,nt,mt,Qt=0,er=!1,sr=!1,Mr=!0;if(typeof y!="function")throw new No(h);k=Be(k)||0,ya(R)&&(er=!!R.leading,sr="maxWait"in R,De=sr?Xi(Be(R.maxWait)||0,k):De,Mr="trailing"in R?!!R.trailing:Mr);function on(as){var vh=H,zp=fe;return H=fe=r,Qt=as,Ve=y.apply(zp,vh),Ve}function An(as){return Qt=as,nt=tf(_i,k),er?on(as):Ve}function ii(as){var vh=as-mt,zp=as-Qt,cA=k-vh;return sr?Oa(cA,De-zp):cA}function kn(as){var vh=as-mt,zp=as-Qt;return mt===r||vh>=k||vh<0||sr&&zp>=De}function _i(){var as=ff();if(kn(as))return zi(as);nt=tf(_i,ii(as))}function zi(as){return nt=r,Mr&&H?on(as):(H=fe=r,Ve)}function Fc(){nt!==r&&Ju(nt),Qt=0,H=mt=fe=nt=r}function Lu(){return nt===r?Ve:zi(ff())}function $c(){var as=ff(),vh=kn(as);if(H=arguments,fe=this,mt=as,vh){if(nt===r)return An(mt);if(sr)return Ju(nt),nt=tf(_i,k),on(mt)}return nt===r&&(nt=tf(_i,k)),Ve}return $c.cancel=Fc,$c.flush=Lu,$c}var Ii=On(function(y,k){return ir(y,1,k)}),Ng=On(function(y,k,R){return ir(y,Be(k)||0,R)});function Ry(y){return Os(y,ie)}function gf(y,k){if(typeof y!="function"||k!=null&&typeof k!="function")throw new No(h);var R=function(){var H=arguments,fe=k?k.apply(this,H):H[0],De=R.cache;if(De.has(fe))return De.get(fe);var Ve=y.apply(this,H);return R.cache=De.set(fe,Ve)||De,Ve};return R.cache=new(gf.Cache||Ha),R}gf.Cache=Ha;function _p(y){if(typeof y!="function")throw new No(h);return function(){var k=arguments;switch(k.length){case 0:return!y.call(this);case 1:return!y.call(this,k[0]);case 2:return!y.call(this,k[0],k[1]);case 3:return!y.call(this,k[0],k[1],k[2])}return!y.apply(this,k)}}function X0(y){return Og(2,y)}var Ny=hm(function(y,k){k=k.length==1&&yn(k[0])?Gi(k[0],Gn(ln())):Gi(ar(k,1),Gn(ln()));var R=k.length;return On(function(H){for(var fe=-1,De=Oa(H.length,R);++fe<De;)H[fe]=k[fe].call(this,H[fe]);return us(y,this,H)})}),Pl=On(function(y,k){var R=cs(k,Ra(Pl));return Os(y,Q,r,k,R)}),_d=On(function(y,k){var R=cs(k,Ra(_d));return Os(y,de,r,k,R)}),Bg=Qu(function(y,k){return Os(y,Y,r,r,r,k)});function bp(y,k){if(typeof y!="function")throw new No(h);return k=k===r?k:ve(k),On(y,k)}function Fg(y,k){if(typeof y!="function")throw new No(h);return k=k==null?0:Xi(ve(k),0),On(function(R){var H=R[k],fe=eu(R,0,k);return H&&Bu(fe,H),us(y,this,fe)})}function bd(y,k,R){var H=!0,fe=!0;if(typeof y!="function")throw new No(h);return ya(R)&&(H="leading"in R?!!R.leading:H,fe="trailing"in R?!!R.trailing:fe),Rg(y,k,{leading:H,maxWait:k,trailing:fe})}function oc(y){return fh(y,1)}function mf(y,k){return Pl(xg(k),y)}function yf(){if(!arguments.length)return[];var y=arguments[0];return yn(y)?y:[y]}function Vm(y){return rt(y,O)}function wp(y,k){return k=typeof k=="function"?k:r,rt(y,O,k)}function qm(y){return rt(y,C|O)}function Sp(y,k){return k=typeof k=="function"?k:r,rt(y,C|O,k)}function $g(y,k){return k==null||Bt(y,k,qn(k))}function xs(y,k){return y===k||y!==y&&k!==k}var By=Xh(ho),Fy=Xh(function(y,k){return y>=k}),gh=eo((function(){return arguments})())?eo:function(y){return Ga(y)&&ui.call(y,"callee")&&!Hl.call(y,"callee")},yn=Ct.isArray,mo=jf?Gn(jf):ci;function ro(y){return y!=null&&wd(y.length)&&!Rs(y)}function $a(y){return Ga(y)&&ro(y)}function vf(y){return y===!0||y===!1||Ga(y)&&In(y)==tr}var Nc=$h||kt,Gg=og?Gn(og):Ac;function ri(y){return Ga(y)&&y.nodeType===1&&!a(y)}function Ug(y){if(y==null)return!0;if(ro(y)&&(yn(y)||typeof y=="string"||typeof y.splice=="function"||Nc(y)||I(y)||gh(y)))return!y.length;var k=Co(y);if(k==Lt||k==Hn)return!y.size;if(ef(y))return!ps(y).length;for(var R in y)if(ui.call(y,R))return!1;return!0}function Ep(y,k){return Jo(y,k)}function Wm(y,k,R){R=typeof R=="function"?R:r;var H=R?R(y,k):r;return H===r?Jo(y,k,r,R):!!H}function Ap(y){if(!Ga(y))return!1;var k=In(y);return k==Mt||k==Ht||typeof y.message=="string"&&typeof y.name=="string"&&!a(y)}function kp(y){return typeof y=="number"&&Xo(y)}function Rs(y){if(!ya(y))return!1;var k=In(y);return k==pt||k==Pr||k==Xt||k==vr}function xf(y){return typeof y=="number"&&y==ve(y)}function wd(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=ze}function ya(y){var k=typeof y;return y!=null&&(k=="object"||k=="function")}function Ga(y){return y!=null&&typeof y=="object"}var Vg=Gd?Gn(Gd):Vn;function Cp(y,k){return y===k||Ti(y,k,hd(k))}function _f(y,k,R){return R=typeof R=="function"?R:r,Ti(y,k,hd(k),R)}function Oi(y){return c(y)&&y!=+y}function Tp(y){if(km(y))throw new hn(l);return Qo(y)}function Do(y){return y===null}function Y0(y){return y==null}function c(y){return typeof y=="number"||Ga(y)&&In(y)==Wt}function a(y){if(!Ga(y)||In(y)!=Xr)return!1;var k=Ys(y);if(k===null)return!0;var R=ui.call(k,"constructor")&&k.constructor;return typeof R=="function"&&R instanceof R&&bc.call(R)==Wl}var f=zh?Gn(zh):Ma;function m(y){return xf(y)&&y>=-ze&&y<=ze}var w=Rf?Gn(Rf):za;function M(y){return typeof y=="string"||!yn(y)&&Ga(y)&&In(y)==fi}function z(y){return typeof y=="symbol"||Ga(y)&&In(y)==ba}var I=Nf?Gn(Nf):Bo;function B(y){return y===r}function q(y){return Ga(y)&&Co(y)==ai}function Z(y){return Ga(y)&&In(y)==pi}var J=Xh(Di),oe=Xh(function(y,k){return y<=k});function ce(y){if(!y)return[];if(ro(y))return M(y)?ra(y):gs(y);if(qa&&y[qa])return fu(y[qa]());var k=Co(y),R=k==Lt?$u:k==Hn?Gu:sl;return R(y)}function xe(y){if(!y)return y===0?y:0;if(y=Be(y),y===ge||y===-ge){var k=y<0?-1:1;return k*Pe}return y===y?y:0}function ve(y){var k=xe(y),R=k%1;return k===k?R?k-R:k:0}function Oe(y){return y?et(ve(y),0,Ae):0}function Be(y){if(typeof y=="number")return y;if(z(y))return st;if(ya(y)){var k=typeof y.valueOf=="function"?y.valueOf():y;y=ya(k)?k+"":k}if(typeof y!="string")return y===0?y:+y;y=ql(y);var R=Sn.test(y);return R||li.test(y)?Ho(y.slice(2),R?2:8):gi.test(y)?st:+y}function dt(y){return ms(y,xi(y))}function Je(y){return y?et(ve(y),-ze,ze):y===0?y:0}function Qe(y){return y==null?"":fo(y)}var Dt=zc(function(y,k){if(ef(k)||ro(k)){ms(k,qn(k),y);return}for(var R in k)ui.call(k,R)&&we(y,R,k[R])}),Jt=zc(function(y,k){ms(k,xi(k),y)}),yr=zc(function(y,k,R,H){ms(k,xi(k),y,H)}),Zr=zc(function(y,k,R,H){ms(k,qn(k),y,H)}),dr=Qu(Le);function pr(y,k){var R=Xu(y);return k==null?R:Fe(R,k)}var zr=On(function(y,k){y=yi(y);var R=-1,H=k.length,fe=H>2?k[2]:r;for(fe&&Na(k[0],k[1],fe)&&(H=1);++R<H;)for(var De=k[R],Ve=xi(De),nt=-1,mt=Ve.length;++nt<mt;){var Qt=Ve[nt],er=y[Qt];(er===r||xs(er,Qc[Qt])&&!ui.call(y,Qt))&&(y[Qt]=De[Qt])}return y}),Er=On(function(y){return y.push(r,xm),us(Ua,r,y)});function br(y,k){return Vd(y,ln(k,3),an)}function Ot(y,k){return Vd(y,ln(k,3),Ln)}function wr(y,k){return y==null?y:Hr(y,ln(k,3),xi)}function Dr(y,k){return y==null?y:vi(y,ln(k,3),xi)}function Qr(y,k){return y&&an(y,ln(k,3))}function ti(y,k){return y&&Ln(y,ln(k,3))}function Mi(y){return y==null?[]:ni(y,qn(y))}function yo(y){return y==null?[]:ni(y,xi(y))}function Mo(y,k,R){var H=y==null?r:ia(y,k);return H===r?R:H}function zo(y,k){return y!=null&&rp(y,k,Vi)}function Za(y,k){return y!=null&&rp(y,k,qi)}var _s=Jf(function(y,k,R){k!=null&&typeof k.toString!="function"&&(k=Ci.call(k)),y[k]=R},Kg(Ol)),bs=Jf(function(y,k,R){k!=null&&typeof k.toString!="function"&&(k=Ci.call(k)),ui.call(y,k)?y[k].push(R):y[k]=[R]},ln),ws=On(Yo);function qn(y){return ro(y)?V(y):ps(y)}function xi(y){return ro(y)?V(y,!0):id(y)}function ns(y,k){var R={};return k=ln(k,3),an(y,function(H,fe,De){We(R,k(H,fe,De),H)}),R}function Po(y,k){var R={};return k=ln(k,3),an(y,function(H,fe,De){We(R,fe,k(H,fe,De))}),R}var no=zc(function(y,k,R){Js(y,k,R)}),Ua=zc(function(y,k,R,H){Js(y,k,R,H)}),al=Qu(function(y,k){var R={};if(y==null)return R;var H=!1;k=Gi(k,function(De){return De=Ls(De,y),H||(H=De.length>1),De}),ms(y,_m(y),R),H&&(R=rt(R,C|P|O,by));for(var fe=k.length;fe--;)sd(R,k[fe]);return R});function Ns(y,k){return di(y,_p(ln(k)))}var Wn=Qu(function(y,k){return y==null?{}:ad(y,k)});function di(y,k){if(y==null)return{};var R=Gi(_m(y),function(H){return[H]});return k=ln(k),to(y,R,function(H,fe){return k(H,fe[0])})}function Wi(y,k,R){k=Ls(k,y);var H=-1,fe=k.length;for(fe||(fe=1,y=r);++H<fe;){var De=y==null?r:y[el(k[H])];De===r&&(H=fe,De=R),y=Rs(De)?De.call(y):De}return y}function is(y,k,R){return y==null?y:Qs(y,k,R)}function sa(y,k,R,H){return H=typeof H=="function"?H:r,y==null?y:Qs(y,k,R,H)}var Bc=ym(qn),ol=ym(xi);function zu(y,k,R){var H=yn(y),fe=H||Nc(y)||I(y);if(k=ln(k,4),R==null){var De=y&&y.constructor;fe?R=H?new De:[]:ya(y)?R=Rs(De)?Xu(Ys(y)):{}:R={}}return(fe?Ya:an)(y,function(Ve,nt,mt){return k(R,Ve,nt,mt)}),R}function Ll(y,k){return y==null?!0:sd(y,k)}function Il(y,k,R){return y==null?y:Vf(y,k,xg(R))}function vo(y,k,R,H){return H=typeof H=="function"?H:r,y==null?y:Vf(y,k,xg(R),H)}function sl(y){return y==null?[]:mi(y,qn(y))}function mh(y){return y==null?[]:mi(y,xi(y))}function $y(y,k,R){return R===r&&(R=k,k=r),R!==r&&(R=Be(R),R=R===R?R:0),k!==r&&(k=Be(k),k=k===k?k:0),et(Be(y),k,R)}function Dp(y,k,R){return k=xe(k),R===r?(R=k,k=0):R=xe(R),y=Be(y),Da(y,k,R)}function bf(y,k,R){if(R&&typeof R!="boolean"&&Na(y,k,R)&&(k=R=r),R===r&&(typeof k=="boolean"?(R=k,k=r):typeof y=="boolean"&&(R=y,y=r)),y===r&&k===r?(y=0,k=1):(y=xe(y),k===r?(k=y,y=0):k=xe(k)),y>k){var H=y;y=k,k=H}if(R||y%1||k%1){var fe=Al();return Oa(y+fe*(k-y+wi("1e-"+((fe+"").length-1))),k)}return Qd(y,k)}var wf=ld(function(y,k,R){return k=k.toLowerCase(),y+(R?sc(k):k)});function sc(y){return Mp(Qe(y).toLowerCase())}function yh(y){return y=Qe(y),y&&y.replace(Hi,wl).replace(ct,"")}function Gy(y,k,R){y=Qe(y),k=fo(k);var H=y.length;R=R===r?H:et(ve(R),0,H);var fe=R;return R-=k.length,R>=0&&y.slice(R,fe)==k}function Uy(y){return y=Qe(y),y&&se.test(y)?y.replace(wo,Xc):y}function Vy(y){return y=Qe(y),y&&At.test(y)?y.replace(Ue,"\\$&"):y}var qy=ld(function(y,k,R){return y+(R?"-":"")+k.toLowerCase()}),Wy=ld(function(y,k,R){return y+(R?" ":"")+k.toLowerCase()}),Hm=Xf("toLowerCase");function Hy(y,k,R){y=Qe(y),k=ve(k);var H=k?xc(y):0;if(!k||H>=k)return y;var fe=(k-H)/2;return cd(yu(fe),R)+y+cd(mu(fe),R)}function Zy(y,k,R){y=Qe(y),k=ve(k);var H=k?xc(y):0;return k&&H<k?y+cd(k-H,R):y}function qg(y,k,R){y=Qe(y),k=ve(k);var H=k?xc(y):0;return k&&H<k?cd(k-H,R)+y:y}function Pu(y,k,R){return R||k==null?k=0:k&&(k=+k),ja(Qe(y).replace(Vt,""),k||0)}function Wg(y,k,R){return(R?Na(y,k,R):k===r)?k=1:k=ve(k),Au(Qe(y),k)}function Hg(){var y=arguments,k=Qe(y[0]);return y.length<3?k:k.replace(y[1],y[2])}var Zm=ld(function(y,k,R){return y+(R?"_":"")+k.toLowerCase()});function Zg(y,k,R){return R&&typeof R!="number"&&Na(y,k,R)&&(k=R=r),R=R===r?Ae:R>>>0,R?(y=Qe(y),y&&(typeof k=="string"||k!=null&&!f(k))&&(k=fo(k),!k&&hu(y))?eu(ra(y),0,R):y.split(k,R)):[]}var Km=ld(function(y,k,R){return y+(R?" ":"")+Mp(k)});function Fo(y,k,R){return y=Qe(y),R=R==null?0:et(ve(R),0,y.length),k=fo(k),y.slice(R,R+k.length)==k}function Bs(y,k,R){var H=be.templateSettings;R&&Na(y,k,R)&&(k=r),y=Qe(y),k=yr({},k,H,vm);var fe=yr({},k.imports,H.imports,vm),De=qn(fe),Ve=mi(fe,De),nt,mt,Qt=0,er=k.interpolate||$i,sr="__p += '",Mr=gu((k.escape||$i).source+"|"+er.source+"|"+(er===Ie?_n:$i).source+"|"+(k.evaluate||$i).source+"|$","g"),on="//# sourceURL="+(ui.call(k,"sourceURL")?(k.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Xn+"]")+`
`;y.replace(Mr,function(kn,_i,zi,Fc,Lu,$c){return zi||(zi=Fc),sr+=y.slice(Qt,$c).replace(Hs,Zo),_i&&(nt=!0,sr+=`' +
__e(`+_i+`) +
'`),Lu&&(mt=!0,sr+=`';
`+Lu+`;
__p += '`),zi&&(sr+=`' +
((__t = (`+zi+`)) == null ? '' : __t) +
'`),Qt=$c+kn.length,kn}),sr+=`';
`;var An=ui.call(k,"variable")&&k.variable;if(!An)sr=`with (obj) {
`+sr+`
}
`;else if(Ir.test(An))throw new hn(u);sr=(mt?sr.replace(nn,""):sr).replace(Go,"$1").replace(Uo,"$1;"),sr="function("+(An||"obj")+`) {
`+(An?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(nt?", __e = _.escape":"")+(mt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+sr+`return __p
}`;var ii=J0(function(){return zn(De,on+"return "+sr).apply(r,Ve)});if(ii.source=sr,Ap(ii))throw ii;return ii}function ll(y){return Qe(y).toLowerCase()}function $o(y){return Qe(y).toUpperCase()}function ul(y,k,R){if(y=Qe(y),y&&(R||k===r))return ql(y);if(!y||!(k=fo(k)))return y;var H=ra(y),fe=ra(k),De=gc(H,fe),Ve=mc(H,fe)+1;return eu(H,De,Ve).join("")}function cl(y,k,R){if(y=Qe(y),y&&(R||k===r))return y.slice(0,Un(y)+1);if(!y||!(k=fo(k)))return y;var H=ra(y),fe=mc(H,ra(k))+1;return eu(H,0,fe).join("")}function Xm(y,k,R){if(y=Qe(y),y&&(R||k===r))return y.replace(Vt,"");if(!y||!(k=fo(k)))return y;var H=ra(y),fe=gc(H,ra(k));return eu(H,fe).join("")}function Sf(y,k){var R=Ce,H=_e;if(ya(k)){var fe="separator"in k?k.separator:fe;R="length"in k?ve(k.length):R,H="omission"in k?fo(k.omission):H}y=Qe(y);var De=y.length;if(hu(y)){var Ve=ra(y);De=Ve.length}if(R>=De)return y;var nt=R-xc(H);if(nt<1)return H;var mt=Ve?eu(Ve,0,nt).join(""):y.slice(0,nt);if(fe===r)return mt+H;if(Ve&&(nt+=mt.length-nt),f(fe)){if(y.slice(nt).search(fe)){var Qt,er=mt;for(fe.global||(fe=gu(fe.source,Qe(ea.exec(fe))+"g")),fe.lastIndex=0;Qt=fe.exec(er);)var sr=Qt.index;mt=mt.slice(0,sr===r?nt:sr)}}else if(y.indexOf(fo(fe),nt)!=nt){var Mr=mt.lastIndexOf(fe);Mr>-1&&(mt=mt.slice(0,Mr))}return mt+H}function pb(y){return y=Qe(y),y&&Ne.test(y)?y.replace(Io,Hd):y}var Dx=ld(function(y,k,R){return y+(R?" ":"")+k.toUpperCase()}),Mp=Xf("toUpperCase");function Mx(y,k,R){return y=Qe(y),k=R?r:k,k===r?Wd(y)?_c(y):dg(y):y.match(k)||[]}var J0=On(function(y,k){try{return us(y,r,k)}catch(R){return Ap(R)?R:new hn(R)}}),Ky=Qu(function(y,k){return Ya(k,function(R){R=el(R),We(y,R,pf(y[R],y))}),y});function zx(y){var k=y==null?0:y.length,R=ln();return y=k?Gi(y,function(H){if(typeof H[1]!="function")throw new No(h);return[R(H[0]),H[1]]}):[],On(function(H){for(var fe=-1;++fe<k;){var De=y[fe];if(us(De[0],this,H))return us(De[1],this,H)}})}function gb(y){return gt(rt(y,C))}function Kg(y){return function(){return y}}function Xy(y,k){return y==null||y!==y?k:y}var Px=nh(),Xg=nh(!0);function Ol(y){return y}function Ym(y){return Cn(typeof y=="function"?y:rt(y,C))}function Yy(y){return Wh(rt(y,C))}function Lx(y,k){return Hh(y,rt(k,C))}var mb=On(function(y,k){return function(R){return Yo(R,y,k)}}),Jy=On(function(y,k){return function(R){return Yo(y,R,k)}});function s(y,k,R){var H=qn(k),fe=ni(k,H);R==null&&!(ya(k)&&(fe.length||!H.length))&&(R=k,k=y,y=this,fe=ni(k,qn(k)));var De=!(ya(R)&&"chain"in R)||!!R.chain,Ve=Rs(y);return Ya(fe,function(nt){var mt=k[nt];y[nt]=mt,Ve&&(y.prototype[nt]=function(){var Qt=this.__chain__;if(De||Qt){var er=y(this.__wrapped__),sr=er.__actions__=gs(this.__actions__);return sr.push({func:mt,args:arguments,thisArg:y}),er.__chain__=Qt,er}return mt.apply(y,Bu([this.value()],arguments))})}),y}function d(){return $n._===this&&($n._=Cs),this}function g(){}function E(y){return y=ve(y),On(function(k){return kc(k,y)})}var L=Ag(Gi),F=Ag(ug),ee=Ag(Ph);function Se(y){return np(y)?cu(el(y)):Yi(y)}function Xe(y){return function(k){return y==null?r:ia(y,k)}}var Et=kg(),Ut=kg(!0);function Kt(){return[]}function kt(){return!1}function It(){return{}}function Ur(){return""}function xn(){return!0}function va(y,k){if(y=ve(y),y<1||y>ze)return[];var R=Ae,H=Oa(y,Ae);k=ln(k),y-=Ae;for(var fe=Ih(H,k);++R<y;)k(R);return fe}function ft(y){return yn(y)?Gi(y,el):z(y)?[y]:gs(Tm(Qe(y)))}function it(y){var k=++ed;return Qe(y)+k}var St=Kh(function(y,k){return y+k},0),Zt=ku("ceil"),dn=Kh(function(y,k){return y/k},1),ji=ku("floor");function Kr(y){return y&&y.length?xr(y,Ol,ho):r}function Yn(y,k){return y&&y.length?xr(y,ln(k,2),ho):r}function hi(y){return pc(y,Ol)}function Ri(y,k){return pc(y,ln(k,2))}function Ef(y){return y&&y.length?xr(y,Ol,Di):r}function yb(y,k){return y&&y.length?xr(y,ln(k,2),Di):r}var XL=Kh(function(y,k){return y*k},1),YL=ku("round"),JL=Kh(function(y,k){return y-k},0);function QL(y){return y&&y.length?ta(y,Ol):0}function eI(y,k){return y&&y.length?ta(y,ln(k,2)):0}return be.after=Ig,be.ary=fh,be.assign=Dt,be.assignIn=Jt,be.assignInWith=yr,be.assignWith=Zr,be.at=dr,be.before=Og,be.bind=pf,be.bindAll=Ky,be.bindKey=jg,be.castArray=yf,be.chain=lh,be.chunk=Ty,be.compact=Dg,be.concat=sp,be.cond=zx,be.conforms=gb,be.constant=Kg,be.countBy=Iy,be.create=pr,be.curry=rs,be.curryRight=ph,be.debounce=Rg,be.defaults=zr,be.defaultsDeep=Er,be.defer=Ii,be.delay=Ng,be.difference=lp,be.differenceBy=Dm,be.differenceWith=tc,be.drop=po,be.dropRight=af,be.dropRightWhile=Dy,be.dropWhile=To,be.fill=W0,be.filter=mp,be.flatMap=vs,be.flatMapDeep=ch,be.flatMapDepth=Rm,be.flatten=pa,be.flattenDeep=tl,be.flattenDepth=jc,be.flip=Ry,be.flow=Px,be.flowRight=Xg,be.fromPairs=of,be.functions=Mi,be.functionsIn=yo,be.groupBy=yp,be.initial=My,be.intersection=up,be.intersectionBy=jn,be.intersectionWith=Dl,be.invert=_s,be.invertBy=bs,be.invokeMap=dh,be.iteratee=Ym,be.keyBy=Oy,be.keys=qn,be.keysIn=xi,be.map=vp,be.mapKeys=ns,be.mapValues=Po,be.matches=Yy,be.matchesProperty=Lx,be.memoize=gf,be.merge=no,be.mergeWith=Ua,be.method=mb,be.methodOf=Jy,be.mixin=s,be.negate=_p,be.nthArg=E,be.omit=al,be.omitBy=Ns,be.once=X0,be.orderBy=Bm,be.over=L,be.overArgs=Ny,be.overEvery=F,be.overSome=ee,be.partial=Pl,be.partialRight=_d,be.partition=jy,be.pick=Wn,be.pickBy=di,be.property=Se,be.propertyOf=Xe,be.pull=pd,be.pullAll=nc,be.pullAllBy=Im,be.pullAllWith=Om,be.pullAt=Du,be.range=Et,be.rangeRight=Ut,be.rearg=Bg,be.reject=K0,be.remove=zy,be.rest=bp,be.reverse=gd,be.sampleSize=xd,be.set=is,be.setWith=sa,be.shuffle=Gm,be.slice=cp,be.sortBy=xp,be.sortedUniq=uf,be.sortedUniqBy=Py,be.split=Zg,be.spread=Fg,be.tail=H0,be.take=Z0,be.takeRight=Si,be.takeRightWhile=Ji,be.takeWhile=pn,be.tap=Ly,be.throttle=bd,be.thru=uh,be.toArray=ce,be.toPairs=Bc,be.toPairsIn=ol,be.toPath=ft,be.toPlainObject=dt,be.transform=zu,be.unary=oc,be.union=ei,be.unionBy=Li,be.unionWith=go,be.uniq=tu,be.uniqBy=ic,be.uniqWith=md,be.unset=Ll,be.unzip=nl,be.unzipWith=ma,be.update=Il,be.updateWith=vo,be.values=sl,be.valuesIn=mh,be.without=yd,be.words=Mx,be.wrap=mf,be.xor=sh,be.xorBy=zg,be.xorWith=il,be.zip=cf,be.zipObject=df,be.zipObjectDeep=js,be.zipWith=fp,be.entries=Bc,be.entriesIn=ol,be.extend=Jt,be.extendWith=yr,s(be,be),be.add=St,be.attempt=J0,be.camelCase=wf,be.capitalize=sc,be.ceil=Zt,be.clamp=$y,be.clone=Vm,be.cloneDeep=qm,be.cloneDeepWith=Sp,be.cloneWith=wp,be.conformsTo=$g,be.deburr=yh,be.defaultTo=Xy,be.divide=dn,be.endsWith=Gy,be.eq=xs,be.escape=Uy,be.escapeRegExp=Vy,be.every=vd,be.find=zl,be.findIndex=Mm,be.findKey=br,be.findLast=Pg,be.findLastIndex=zm,be.findLastKey=Ot,be.floor=ji,be.forEach=Nm,be.forEachRight=Mu,be.forIn=wr,be.forInRight=Dr,be.forOwn=Qr,be.forOwnRight=ti,be.get=Mo,be.gt=By,be.gte=Fy,be.has=zo,be.hasIn=Za,be.head=Ba,be.identity=Ol,be.includes=hf,be.indexOf=Pm,be.inRange=Dp,be.invoke=ws,be.isArguments=gh,be.isArray=yn,be.isArrayBuffer=mo,be.isArrayLike=ro,be.isArrayLikeObject=$a,be.isBoolean=vf,be.isBuffer=Nc,be.isDate=Gg,be.isElement=ri,be.isEmpty=Ug,be.isEqual=Ep,be.isEqualWith=Wm,be.isError=Ap,be.isFinite=kp,be.isFunction=Rs,be.isInteger=xf,be.isLength=wd,be.isMap=Vg,be.isMatch=Cp,be.isMatchWith=_f,be.isNaN=Oi,be.isNative=Tp,be.isNil=Y0,be.isNull=Do,be.isNumber=c,be.isObject=ya,be.isObjectLike=Ga,be.isPlainObject=a,be.isRegExp=f,be.isSafeInteger=m,be.isSet=w,be.isString=M,be.isSymbol=z,be.isTypedArray=I,be.isUndefined=B,be.isWeakMap=q,be.isWeakSet=Z,be.join=Lm,be.kebabCase=qy,be.last=ga,be.lastIndexOf=rc,be.lowerCase=Wy,be.lowerFirst=Hm,be.lt=J,be.lte=oe,be.max=Kr,be.maxBy=Yn,be.mean=hi,be.meanBy=Ri,be.min=Ef,be.minBy=yb,be.stubArray=Kt,be.stubFalse=kt,be.stubObject=It,be.stubString=Ur,be.stubTrue=xn,be.multiply=XL,be.nth=rl,be.noConflict=d,be.noop=g,be.now=ff,be.pad=Hy,be.padEnd=Zy,be.padStart=qg,be.parseInt=Pu,be.random=bf,be.reduce=Lg,be.reduceRight=Fm,be.repeat=Wg,be.replace=Hg,be.result=Wi,be.round=YL,be.runInContext=lt,be.sample=$m,be.size=Um,be.snakeCase=Zm,be.some=hh,be.sortedIndex=dp,be.sortedIndexBy=sf,be.sortedIndexOf=hp,be.sortedLastIndex=oh,be.sortedLastIndexBy=lf,be.sortedLastIndexOf=Mg,be.startCase=Km,be.startsWith=Fo,be.subtract=JL,be.sum=QL,be.sumBy=eI,be.template=Bs,be.times=va,be.toFinite=xe,be.toInteger=ve,be.toLength=Oe,be.toLower=ll,be.toNumber=Be,be.toSafeInteger=Je,be.toString=Qe,be.toUpper=$o,be.trim=ul,be.trimEnd=cl,be.trimStart=Xm,be.truncate=Sf,be.unescape=pb,be.uniqueId=it,be.upperCase=Dx,be.upperFirst=Mp,be.each=Nm,be.eachRight=Mu,be.first=Ba,s(be,(function(){var y={};return an(be,function(k,R){ui.call(be.prototype,R)||(y[R]=k)}),y})(),{chain:!1}),be.VERSION=n,Ya(["bind","bindKey","curry","curryRight","partial","partialRight"],function(y){be[y].placeholder=be}),Ya(["drop","take"],function(y,k){vn.prototype[y]=function(R){R=R===r?1:Xi(ve(R),0);var H=this.__filtered__&&!k?new vn(this):this.clone();return H.__filtered__?H.__takeCount__=Oa(R,H.__takeCount__):H.__views__.push({size:Oa(R,Ae),type:y+(H.__dir__<0?"Right":"")}),H},vn.prototype[y+"Right"]=function(R){return this.reverse()[y](R).reverse()}}),Ya(["filter","map","takeWhile"],function(y,k){var R=k+1,H=R==Ke||R==pe;vn.prototype[y]=function(fe){var De=this.clone();return De.__iteratees__.push({iteratee:ln(fe,3),type:R}),De.__filtered__=De.__filtered__||H,De}}),Ya(["head","last"],function(y,k){var R="take"+(k?"Right":"");vn.prototype[y]=function(){return this[R](1).value()[0]}}),Ya(["initial","tail"],function(y,k){var R="drop"+(k?"":"Right");vn.prototype[y]=function(){return this.__filtered__?new vn(this):this[R](1)}}),vn.prototype.compact=function(){return this.filter(Ol)},vn.prototype.find=function(y){return this.filter(y).head()},vn.prototype.findLast=function(y){return this.reverse().find(y)},vn.prototype.invokeMap=On(function(y,k){return typeof y=="function"?new vn(this):this.map(function(R){return Yo(R,y,k)})}),vn.prototype.reject=function(y){return this.filter(_p(ln(y)))},vn.prototype.slice=function(y,k){y=ve(y);var R=this;return R.__filtered__&&(y>0||k<0)?new vn(R):(y<0?R=R.takeRight(-y):y&&(R=R.drop(y)),k!==r&&(k=ve(k),R=k<0?R.dropRight(-k):R.take(k-y)),R)},vn.prototype.takeRightWhile=function(y){return this.reverse().takeWhile(y).reverse()},vn.prototype.toArray=function(){return this.take(Ae)},an(vn.prototype,function(y,k){var R=/^(?:filter|find|map|reject)|While$/.test(k),H=/^(?:head|last)$/.test(k),fe=be[H?"take"+(k=="last"?"Right":""):k],De=H||/^find/.test(k);fe&&(be.prototype[k]=function(){var Ve=this.__wrapped__,nt=H?[1]:arguments,mt=Ve instanceof vn,Qt=nt[0],er=mt||yn(Ve),sr=function(_i){var zi=fe.apply(be,Bu([_i],nt));return H&&Mr?zi[0]:zi};er&&R&&typeof Qt=="function"&&Qt.length!=1&&(mt=er=!1);var Mr=this.__chain__,on=!!this.__actions__.length,An=De&&!Mr,ii=mt&&!on;if(!De&&er){Ve=ii?Ve:new vn(this);var kn=y.apply(Ve,nt);return kn.__actions__.push({func:uh,args:[sr],thisArg:r}),new hs(kn,Mr)}return An&&ii?y.apply(this,nt):(kn=this.thru(sr),An?H?kn.value()[0]:kn.value():kn)})}),Ya(["pop","push","shift","sort","splice","unshift"],function(y){var k=Uu[y],R=/^(?:push|sort|unshift)$/.test(y)?"tap":"thru",H=/^(?:pop|shift)$/.test(y);be.prototype[y]=function(){var fe=arguments;if(H&&!this.__chain__){var De=this.value();return k.apply(yn(De)?De:[],fe)}return this[R](function(Ve){return k.apply(yn(Ve)?Ve:[],fe)})}}),an(vn.prototype,function(y,k){var R=be[k];if(R){var H=R.name+"";ui.call(Bn,H)||(Bn[H]=[]),Bn[H].push({name:k,func:R})}}),Bn[ud(r,X).name]=[{name:"wrapper",func:r}],vn.prototype.clone=Xl,vn.prototype.reverse=Yl,vn.prototype.value=Jl,be.prototype.at=pp,be.prototype.chain=Rc,be.prototype.commit=Fa,be.prototype.next=ts,be.prototype.plant=ac,be.prototype.reverse=gp,be.prototype.toJSON=be.prototype.valueOf=be.prototype.value=jm,be.prototype.first=be.prototype.head,qa&&(be.prototype[qa]=Ml),be}),pu=Rh();Ro?((Ro.exports=pu)._=pu,Dn._=pu):$n._=pu}).call(GN)})(Sv,Sv.exports)),Sv.exports}var la=UN(),AD={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ak=Ei.createContext&&Ei.createContext(AD),VN=["attr","size","title"];function qN(e,t){if(e==null)return{};var r=WN(e,t),n,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)n=l[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function WN(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function b1(){return b1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b1.apply(this,arguments)}function kk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function w1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kk(Object(r),!0).forEach(function(n){HN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HN(e,t,r){return t=ZN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZN(e){var t=KN(e,"string");return typeof t=="symbol"?t:t+""}function KN(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kD(e){return e&&e.map((t,r)=>Ei.createElement(t.tag,w1({key:r},t.attr),kD(t.child)))}function fn(e){return t=>Ei.createElement(XN,b1({attr:w1({},e.attr)},t),kD(e.child))}function XN(e){var t=r=>{var{attr:n,size:o,title:l}=e,h=qN(e,VN),u=o||r.size||"1em",v;return r.className&&(v=r.className),e.className&&(v=(v?v+" ":"")+e.className),Ei.createElement("svg",b1({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,h,{className:v,style:w1(w1({color:e.color||r.color},r.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),l&&Ei.createElement("title",null,l),e.children)};return Ak!==void 0?Ei.createElement(Ak.Consumer,null,r=>t(r)):t(AD)}function YN(e){return fn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 3H4c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2zM4 19V5h7v14H4zm9 0V5h7l.001 14H13z"},child:[]},{tag:"path",attr:{d:"M15 7h3v2h-3zm0 4h3v2h-3z"},child:[]}]})(e)}function Ck(e){return fn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M14 3H5a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z"},child:[]},{tag:"path",attr:{d:"M21 19v-9a2 2 0 0 0-2-2h-1v8a2 2 0 0 1-2 2H8v1a2 2 0 0 0 2 2h9a2 2 0 0 0 2-2z"},child:[]}]})(e)}function JN(e){return fn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 5c-3.859 0-7 3.141-7 7s3.141 7 7 7 7-3.141 7-7-3.141-7-7-7zm0 12c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5z"},child:[]},{tag:"path",attr:{d:"M12 9c-1.627 0-3 1.373-3 3s1.373 3 3 3 3-1.373 3-3-1.373-3-3-3z"},child:[]}]})(e)}function QN(e){return fn({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.828 10.172a.5.5 0 0 0-.707 0l-4.096 4.096V11.5a.5.5 0 0 0-1 0v3.975a.5.5 0 0 0 .5.5H4.5a.5.5 0 0 0 0-1H1.732l4.096-4.096a.5.5 0 0 0 0-.707m4.344 0a.5.5 0 0 1 .707 0l4.096 4.096V11.5a.5.5 0 1 1 1 0v3.975a.5.5 0 0 1-.5.5H11.5a.5.5 0 0 1 0-1h2.768l-4.096-4.096a.5.5 0 0 1 0-.707m0-4.344a.5.5 0 0 0 .707 0l4.096-4.096V4.5a.5.5 0 1 0 1 0V.525a.5.5 0 0 0-.5-.5H11.5a.5.5 0 0 0 0 1h2.768l-4.096 4.096a.5.5 0 0 0 0 .707m-4.344 0a.5.5 0 0 1-.707 0L1.025 1.732V4.5a.5.5 0 0 1-1 0V.525a.5.5 0 0 1 .5-.5H4.5a.5.5 0 0 1 0 1H1.732l4.096 4.096a.5.5 0 0 1 0 .707"},child:[]}]})(e)}function eB(e){return fn({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5.5 0a.5.5 0 0 1 .5.5v4A1.5 1.5 0 0 1 4.5 6h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5m5 0a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 10 4.5v-4a.5.5 0 0 1 .5-.5M0 10.5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 6 11.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5m10 1a1.5 1.5 0 0 1 1.5-1.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0z"},child:[]}]})(e)}function tB(e){return fn({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"},child:[]},{tag:"path",attr:{d:"m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"},child:[]}]})(e)}function rB(e){return fn({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"},child:[]}]})(e)}function nB(e){return fn({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11M13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0"},child:[]},{tag:"path",attr:{d:"M10.344 11.742q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1 6.5 6.5 0 0 1-1.398 1.4z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M6.5 3a.5.5 0 0 1 .5.5V6h2.5a.5.5 0 0 1 0 1H7v2.5a.5.5 0 0 1-1 0V7H3.5a.5.5 0 0 1 0-1H6V3.5a.5.5 0 0 1 .5-.5"},child:[]}]})(e)}function iB(e){return fn({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11M13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0"},child:[]},{tag:"path",attr:{d:"M10.344 11.742q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1 6.5 6.5 0 0 1-1.398 1.4z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M3 6.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5"},child:[]}]})(e)}function vE(e){return fn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",strokeWidth:"2",d:"M3,3 L21,21 M3,21 L21,3"},child:[]}]})(e)}function aB(e){return fn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"},child:[]}]})(e)}function oB(e){return fn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"},child:[]}]})(e)}function sB(e){return fn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"},child:[]}]})(e)}function lB(e){return fn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"},child:[]}]})(e)}function uB(e){return fn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z"},child:[]}]})(e)}function cB(e){return fn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z"},child:[]}]})(e)}function CD(e){return fn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(e)}function dB(e){return fn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11zM8 15.01l1.41 1.41L11 14.84V19h2v-4.16l1.59 1.59L16 15.01 12.01 11z"},child:[]}]})(e)}function hB(e){return fn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m17 16-4-4V8.82C14.16 8.4 15 7.3 15 6c0-1.66-1.34-3-3-3S9 4.34 9 6c0 1.3.84 2.4 2 2.82V12l-4 4H3v5h5v-3.05l4-4.2 4 4.2V21h5v-5h-4z"},child:[]}]})(e)}function fB(e){return fn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"},child:[]}]})(e)}function pB(e){return fn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"},child:[]}]})(e)}function TD(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(e)}function DD(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(e)}function gB(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(e)}function xE(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(e)}function MD(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(e)}function Iv(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(e)}function mB(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(e)}function zD(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(e)}function Uw(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(e)}function yB(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},child:[]}]})(e)}function _E(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(e)}function vB(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(e)}function I0(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 2 7 12 12 22 7 12 2"},child:[]},{tag:"polyline",attr:{points:"2 17 12 22 22 17"},child:[]},{tag:"polyline",attr:{points:"2 12 12 17 22 12"},child:[]}]})(e)}function xB(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"},child:[]},{tag:"path",attr:{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"},child:[]}]})(e)}function A_(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(e)}function Vw(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"18"},child:[]},{tag:"line",attr:{x1:"16",y1:"6",x2:"16",y2:"22"},child:[]}]})(e)}function _B(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(e)}function bB(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"4 14 10 14 10 20"},child:[]},{tag:"polyline",attr:{points:"20 10 14 10 14 4"},child:[]},{tag:"line",attr:{x1:"14",y1:"10",x2:"21",y2:"3"},child:[]},{tag:"line",attr:{x1:"3",y1:"21",x2:"10",y2:"14"},child:[]}]})(e)}function Tk(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"5 9 2 12 5 15"},child:[]},{tag:"polyline",attr:{points:"9 5 12 2 15 5"},child:[]},{tag:"polyline",attr:{points:"15 19 12 22 9 19"},child:[]},{tag:"polyline",attr:{points:"19 9 22 12 19 15"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"22"},child:[]}]})(e)}function wB(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"3 11 22 2 13 21 11 13 3 11"},child:[]}]})(e)}function bE(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]},{tag:"path",attr:{d:"M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14"},child:[]}]})(e)}function wE(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(e)}function qw(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(e)}function SB(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(e)}function EB(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]}]})(e)}function PD(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(e)}function Cv(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(e)}function LD(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function kf(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(e)}function SE(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"},child:[]}]})(e)}function AB(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]},{tag:"line",attr:{x1:"11",y1:"8",x2:"11",y2:"14"},child:[]},{tag:"line",attr:{x1:"8",y1:"11",x2:"14",y2:"11"},child:[]}]})(e)}function kB(e){return fn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]},{tag:"line",attr:{x1:"8",y1:"11",x2:"14",y2:"11"},child:[]}]})(e)}function EE(e){return fn({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0 0 51.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"},child:[]},{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"},child:[]}]})(e)}function AE(e){return fn({attr:{viewBox:"0 0 1024 1024",fill:"currentColor",fillRule:"evenodd"},child:[{tag:"path",attr:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64Zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372Zm128.013 198.826c.023.007.042.018.083.059l45.02 45.019c.04.04.05.06.058.083a.118.118 0 0 1 0 .07c-.007.022-.018.041-.059.082L557.254 512l127.861 127.862a.268.268 0 0 1 .05.06l.009.023a.118.118 0 0 1 0 .07c-.007.022-.018.041-.059.082l-45.019 45.02c-.04.04-.06.05-.083.058a.118.118 0 0 1-.07 0c-.022-.007-.041-.018-.082-.059L512 557.254 384.14 685.115c-.042.041-.06.052-.084.059a.118.118 0 0 1-.07 0c-.022-.007-.041-.018-.082-.059l-45.02-45.019c-.04-.04-.05-.06-.058-.083a.118.118 0 0 1 0-.07c.007-.022.018-.041.059-.082L466.745 512l-127.86-127.86a.268.268 0 0 1-.05-.061l-.009-.023a.118.118 0 0 1 0-.07c.007-.022.018-.041.059-.082l45.019-45.02c.04-.04.06-.05.083-.058a.118.118 0 0 1 .07 0c.022.007.041.018.082.059L512 466.745l127.862-127.86c.04-.041.06-.052.083-.059a.118.118 0 0 1 .07 0Z"},child:[]}]})(e)}function CB(e){return fn({attr:{t:"1569683404098",viewBox:"0 0 1024 1024",version:"1.1"},child:[{tag:"path",attr:{d:"M482.2 508.4L331.3 389c-3-2.4-7.3-0.2-7.3 3.6V478H184V184h204v128c0 2.2 1.8 4 4 4h60c2.2 0 4-1.8 4-4V144c0-15.5-12.5-28-28-28H144c-15.5 0-28 12.5-28 28v736c0 15.5 12.5 28 28 28h284c15.5 0 28-12.5 28-28V712c0-2.2-1.8-4-4-4h-60c-2.2 0-4 1.8-4 4v128H184V546h140v85.4c0 3.8 4.4 6 7.3 3.6l150.9-119.4c2.4-1.8 2.4-5.4 0-7.2zM880 116H596c-15.5 0-28 12.5-28 28v168c0 2.2 1.8 4 4 4h60c2.2 0 4-1.8 4-4V184h204v294H700v-85.4c0-3.8-4.3-6-7.3-3.6l-151 119.4c-2.3 1.8-2.3 5.3 0 7.1l151 119.5c2.9 2.3 7.3 0.2 7.3-3.6V546h140v294H636V712c0-2.2-1.8-4-4-4h-60c-2.2 0-4 1.8-4 4v168c0 15.5 12.5 28 28 28h284c15.5 0 28-12.5 28-28V144c0-15.5-12.5-28-28-28z"},child:[]}]})(e)}const dv="#000000";function TB(e,t,r,n,o,l){e.beginPath(),e.moveTo(t+l,r),e.lineTo(t+n-l,r),e.quadraticCurveTo(t+n,r,t+n,r+l),e.lineTo(t+n,r+o-l),e.quadraticCurveTo(t+n,r+o,t+n-l,r+o),e.lineTo(t+l,r+o),e.quadraticCurveTo(t,r+o,t,r+o-l),e.lineTo(t,r+l),e.quadraticCurveTo(t,r,t+l,r),e.closePath()}function ID(e,t,r){const n=r.labelSize,o=r.labelFont,l=r.labelWeight,h=n-2,u=t.hostname||t.label,v=t.manufacture||"",x=t.model||"",A=t.region||"",C=t.port_used?`${t.port_used}/${t.port_used+t.port_idle} ports`:"",P=t.percentage_used?`${t.percentage_used.toFixed(1)}% used`:"";e.beginPath(),e.fillStyle="#fff",e.shadowOffsetX=0,e.shadowOffsetY=2,e.shadowBlur=8,e.shadowColor="#000",e.font=`${l} ${n}px ${o}`;const O=e.measureText(u).width;e.font=`${l} ${h}px ${o}`;const U=e.measureText(`${v} ${x}`).width,W=e.measureText(A).width,G=C?e.measureText(C).width:0,X=P?e.measureText(P).width:0,ae=Math.max(O,U,W,G,X),ne=Math.round(t.x),ue=Math.round(t.y),Q=Math.round(ae+n/2+t.size+3),de=Math.round(n/2+4),he=Math.round(h/2+9),Y=de+he*4+12;TB(e,ne,ue-he*3-12,Q,Y,5),e.closePath(),e.fill(),e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.fillStyle=dv,e.font=`${l} ${n}px ${o}`,e.fillText(u,t.x+t.size+3,t.y+n/3),v&&x&&(e.fillStyle=dv,e.font=`${l} ${h}px ${o}`,e.fillText(`${v} ${x}`,t.x+t.size+3,t.y-2*n/3-2)),A&&(e.fillStyle=t.color||dv,e.font=`${l} ${h}px ${o}`,e.fillText(A,t.x+t.size+3,t.y+n/3+3+h)),C&&(e.fillStyle=dv,e.font=`${l} ${h}px ${o}`,e.fillText(C,t.x+t.size+3,t.y+n/3+6+h*2)),P&&(e.fillStyle=dv,e.font=`${l} ${h}px ${o}`,e.fillText(P,t.x+t.size+3,t.y+n/3+9+h*3))}function OD(e,t,r){if(!t.label)return;const n=r.labelSize,o=r.labelFont,l=r.labelWeight;e.font=`${l} ${n}px ${o}`;const h=e.measureText(t.label).width+8;e.fillStyle="#ffffffcc",e.fillRect(t.x+t.size,t.y+n/3-15,h,20),e.fillStyle="#000",e.fillText(t.label,t.x+t.size+3,t.y+n/3)}const jD=({message:e,type:t,duration:r=3e3,onClose:n})=>{const[o,l]=N.useState(!0);N.useEffect(()=>{const u=setTimeout(()=>{l(!1),setTimeout(n,300)},r);return()=>clearTimeout(u)},[r,n]);const h=()=>{switch(t){case"success":return S.jsx(aB,{});case"error":return S.jsx(sB,{});case"warning":return S.jsx(lB,{});case"info":return S.jsx(oB,{})}};return S.jsxs("div",{className:`toast toast-${t} ${o?"toast-visible":"toast-hidden"}`,children:[S.jsx("span",{className:"toast-icon",children:h()}),S.jsx("span",{className:"toast-message",children:e}),S.jsx("button",{className:"toast-close",onClick:()=>{l(!1),setTimeout(n,300)},children:""})]})};function DB(e){return["hostname","no_name","id","name","latitude","longitude","lat","lon","lng"].some(r=>e[r]!==void 0&&e[r]!==null&&e[r]!=="\\N")}function MB(e){const r=["source","target","ruas","nbr","layer","traffic_in","traffic_out"].some(o=>e[o]!==void 0&&e[o]!==null&&e[o]!=="\\N"),n=!!(e.ruas||e.source&&e.target||e.nbr);return r&&n}function zB(e,t){const r=e.hostname||e.no_name||e.id||e.name||e.label||`Node-${t}`;if(!r||r==="\\N")return null;const n=e.manufacture||e.manufacturer||"Unknown",o=e.model||"Unknown",l=e.region||e.layer||"Unknown",h=e.latitude||e.lat||void 0,u=e.longitude||e.lon||e.lng||void 0,v=e.slot||void 0,x=e.port_used||void 0,A=e.port_idle||void 0,C=e.percentage_used||(x&&v?x/v*100:void 0),P={hostname:String(r),manufacture:String(n),model:String(o),region:String(l)};return v!==void 0&&(P.slot=Number(v)),x!==void 0&&(P.port_used=Number(x)),A!==void 0&&(P.port_idle=Number(A)),C!==void 0&&(P.percentage_used=Number(C)),h!==void 0&&String(h)!=="\\N"&&(P.latitude=Number(h)),u!==void 0&&String(u)!=="\\N"&&(P.longitude=Number(u)),Object.keys(e).forEach(O=>{["hostname","no_name","id","name","manufacture","manufacturer","model","region","latitude","lat","longitude","lon","lng","slot","port_used","port_idle","percentage_used"].includes(O)||(P[O]=e[O])}),P}function PB(e,t){let r,n;if(e.source&&e.target?(r=String(e.source),n=String(e.target)):e.ruas&&e.nbr?(r=e.no_name?String(e.no_name):String(e.ruas).split("_to_")[0],n=String(e.nbr)):e.no_name&&e.nbr&&(r=String(e.no_name),n=String(e.nbr)),!r||!n||r==="\\N"||n==="\\N"||!(t.has(r)||t.has(n))&&t.size>0)return null;const l={source:r,target:n};return e.layer&&(l.layer=String(e.layer)),e.label&&(l.label=String(e.label)),e.size!==void 0&&(l.size=Number(e.size)),e.color&&(l.color=String(e.color)),e.traffic_in!==void 0&&String(e.traffic_in)!=="\\N"&&(l.traffic_in=Number(e.traffic_in)),e.traffic_out!==void 0&&String(e.traffic_out)!=="\\N"&&(l.traffic_out=Number(e.traffic_out)),Object.keys(e).forEach(h=>{["source","target","ruas","nbr","no_name","layer","label","size","color","traffic_in","traffic_out"].includes(h)||(l[h]=e[h])}),l}function Dk(e){if(e&&typeof e=="object"&&Array.isArray(e.nodes))return{nodes:e.nodes,edges:e.edges||[]};const t=[],r=[];let n=[];if(Array.isArray(e))n=e;else if(typeof e=="object"&&e!==null)n=[e];else throw new Error("Invalid data format: expected object or array");n.forEach((l,h)=>{if(!(typeof l!="object"||l===null)&&DB(l)){const u=zB(l,h);u&&t.push(u)}});const o=new Set(t.map(l=>l.hostname));return n.forEach(l=>{if(!(typeof l!="object"||l===null)&&MB(l)){const h=PB(l,o);h&&r.push(h)}}),t.length===0&&n.length>0&&n.forEach((l,h)=>{if(typeof l=="object"&&l!==null){const u=l.id||l.name||l.label||l.hostname||`Node-${h}`;u&&u!=="\\N"&&t.push({hostname:String(u),manufacture:l.manufacture||l.manufacturer||"Unknown",model:l.model||"Unknown",region:l.region||l.layer||l.location||"Unknown",...l})}}),{nodes:t,edges:r}}function Mk(e){const t=[];return(!e.nodes||e.nodes.length===0)&&t.push("No valid nodes found in the data"),e.nodes&&e.nodes.forEach((r,n)=>{r.hostname||t.push(`Node at index ${n} is missing hostname`),r.manufacture||t.push(`Node "${r.hostname||n}" is missing manufacture`),r.model||t.push(`Node "${r.hostname||n}" is missing model`),r.region||t.push(`Node "${r.hostname||n}" is missing region`)}),e.edges&&e.edges.forEach((r,n)=>{r.source||t.push(`Edge at index ${n} is missing source`),r.target||t.push(`Edge at index ${n} is missing target`)}),{valid:t.length===0,errors:t}}const LB=({isOpen:e,onClose:t,onSubmit:r,onNotify:n})=>{const[o,l]=N.useState(""),[h,u]=N.useState(""),[v,x]=N.useState(""),A=N.useRef(null);if(!e)return null;const C=W=>{var ae;const G=(ae=W.target.files)==null?void 0:ae[0];if(!G)return;x(G.name),u("");const X=new FileReader;X.onload=ne=>{var Q,de;const ue=(Q=ne.target)==null?void 0:Q.result;try{const he=JSON.parse(ue),Y=Dk(he),ie=Mk(Y);ie.valid||u(`Data validation warnings:
${ie.errors.slice(0,3).join(`
`)}`),l(JSON.stringify(Y,null,2)),n&&n(`File "${G.name}" berhasil dimuat dan diformat: ${Y.nodes.length} nodes, ${((de=Y.edges)==null?void 0:de.length)||0} edges`,ie.valid?"success":"warning")}catch(he){const Y=he instanceof Error?he.message:String(he);u(`Failed to parse file: ${Y}`),n&&n(`Gagal membaca file: ${Y}`,"error")}},X.onerror=()=>{u("Failed to read file"),n&&n("Gagal membaca file","error")},X.readAsText(G)},P=()=>{var W;u("");try{const G=JSON.parse(o),X=Dk(G),ae=Mk(X);if(!ae.valid&&X.nodes.length===0){u(`Invalid format: No valid nodes found
`+ae.errors.slice(0,3).join(`
`));return}r(X),l(""),u(""),x(""),t(),n&&n(`Data berhasil ditambahkan: ${X.nodes.length} nodes, ${((W=X.edges)==null?void 0:W.length)||0} edges`,"success")}catch(G){u("Invalid JSON format: "+(G instanceof Error?G.message:String(G)))}},O={nodes:[{hostname:"SW-Example-01",manufacture:"Cisco",model:"Nexus9000",region:"Jakarta",slot:48,port_used:32,port_idle:16,percentage_used:66.67,latitude:-6.2088,longitude:106.8456}],edges:[{source:"SW-Example-01",target:"SW-JAK-CORE-01"}]},U=()=>{l(JSON.stringify(O,null,2)),u("")};return S.jsx("div",{className:"modal-overlay",onClick:t,children:S.jsxs("div",{className:"modal-content",onClick:W=>W.stopPropagation(),children:[S.jsxs("div",{className:"modal-header",children:[S.jsxs("h2",{children:[S.jsx(CD,{})," Add Graph Data"]}),S.jsx("button",{type:"button",className:"modal-close",onClick:t,title:"Close",children:S.jsx(vE,{})})]}),S.jsxs("div",{className:"modal-body",children:[S.jsx("p",{className:"modal-description",children:"Upload file JSON atau masukkan data secara manual. Sistem akan otomatis mendeteksi dan mengkonversi berbagai format data (nodes/edges, network topology, traffic data, dll) ke format yang sesuai untuk visualisasi."}),S.jsxs("div",{className:"upload-section",children:[S.jsx("input",{ref:A,type:"file",accept:".json",onChange:C,style:{display:"none"},id:"json-file-upload"}),S.jsxs("label",{htmlFor:"json-file-upload",className:"button-upload",children:[S.jsx(dB,{})," Upload JSON File"]}),v&&S.jsxs("span",{className:"uploaded-file-name",children:[" ",v]})]}),S.jsx("div",{className:"divider",children:S.jsx("span",{children:"atau"})}),S.jsx("button",{type:"button",className:"button-secondary",onClick:U,children:"Fill Example Data"}),S.jsx("textarea",{className:"json-input",value:o,onChange:W=>l(W.target.value),placeholder:'{"nodes": [...], "edges": [...]} atau format data lainnya',rows:15}),h&&S.jsx("div",{className:"error-message",children:h})]}),S.jsxs("div",{className:"modal-footer",children:[S.jsx("button",{type:"button",className:"button-secondary",onClick:t,children:"Cancel"}),S.jsx("button",{type:"button",className:"button-primary",onClick:P,children:"Add Data"})]})]})})};function IB(e){const t=parseFloat(e);return!isNaN(t)&&isFinite(t)}function zk(e){return typeof e=="string"&&e[e.length-1]==="%"&&IB(e.substring(0,e.length-1))}function Hb(e,t,r){t===0&&!r&&(e!=null&&e.style)&&(e==null?void 0:e.children.length)>0&&(e.style.display="none")}function OB(e,t){t===0&&(e!=null&&e.style)&&(e.style.display="")}const jB={animating:"rah-animating",animatingUp:"rah-animating--up",animatingDown:"rah-animating--down",animatingToHeightZero:"rah-animating--to-height-zero",animatingToHeightAuto:"rah-animating--to-height-auto",animatingToHeightSpecific:"rah-animating--to-height-specific",static:"rah-static",staticHeightZero:"rah-static--height-zero",staticHeightAuto:"rah-static--height-auto",staticHeightSpecific:"rah-static--height-specific"};function Pk(e,t){return[e.static,t===0&&e.staticHeightZero,typeof t=="number"&&t>0?e.staticHeightSpecific:null,t==="auto"&&e.staticHeightAuto].filter(r=>r).join(" ")}const RB=["animateOpacity","animationStateClasses","applyInlineTransitions","children","className","contentClassName","contentRef","delay","duration","easing","height","onHeightAnimationEnd","onHeightAnimationStart","style","disableDisplayNone"],NB=Ei.forwardRef((e,t)=>{const{animateOpacity:r=!1,animationStateClasses:n={},applyInlineTransitions:o=!0,children:l,className:h="",contentClassName:u,delay:v=0,disableDisplayNone:x=!1,duration:A=500,easing:C="ease",height:P,onHeightAnimationEnd:O,onHeightAnimationStart:U,style:W,contentRef:G}=e,X=Object.assign({},e);RB.forEach(Tt=>{delete X[Tt]});const ae=N.useRef(P),ne=N.useRef(null),ue=N.useRef(),Q=N.useRef(),de=N.useRef(Object.assign(Object.assign({},jB),n)),he=typeof window<"u",Y=N.useRef(he&&window.matchMedia?window.matchMedia("(prefers-reduced-motion)").matches:!1),ie=Y.current?0:v,Ce=Y.current?0:A;let _e=P,Me="visible";typeof P=="number"?(_e=P<0?0:P,Me="hidden"):zk(_e)&&(_e=P==="0%"?0:P,Me="hidden");const[me,Ke]=N.useState(_e),[Re,pe]=N.useState(Me),[ge,ze]=N.useState(!1),[Pe,st]=N.useState(Pk(de.current,P));N.useEffect(()=>{Hb(ne.current,me,x)},[]),N.useEffect(()=>{if(P!==ae.current&&ne.current){OB(ne.current,ae.current),ne.current.style.overflow="hidden";const Tt=ne.current.offsetHeight;ne.current.style.overflow="";const rr=Ce+ie;let Xt,tr,at="hidden",Ht;const Mt=ae.current==="auto";typeof P=="number"?(Xt=P<0?0:P,tr=Xt):zk(P)?(Xt=P==="0%"?0:P,tr=Xt):(Xt=Tt,tr="auto",at=void 0),Mt&&(tr=Xt,Xt=Tt);const pt=[de.current.animating,(ae.current==="auto"||P<ae.current)&&de.current.animatingUp,(P==="auto"||P>ae.current)&&de.current.animatingDown,tr===0&&de.current.animatingToHeightZero,tr==="auto"&&de.current.animatingToHeightAuto,typeof tr=="number"&&tr>0?de.current.animatingToHeightSpecific:null].filter(Lt=>Lt).join(" "),Pr=Pk(de.current,tr);Ke(Xt),pe("hidden"),ze(!Mt),st(pt),clearTimeout(Q.current),clearTimeout(ue.current),Mt?(Ht=!0,Q.current=setTimeout(()=>{Ke(tr),pe(at),ze(Ht),U==null||U(tr)},50),ue.current=setTimeout(()=>{ze(!1),st(Pr),Hb(ne.current,tr,x),O==null||O(tr)},rr)):(U==null||U(Xt),Q.current=setTimeout(()=>{Ke(tr),pe(at),ze(!1),st(Pr),P!=="auto"&&Hb(ne.current,Xt,x),O==null||O(Xt)},rr))}return ae.current=P,()=>{clearTimeout(Q.current),clearTimeout(ue.current)}},[P]);const Ae=Object.assign(Object.assign({},W),{height:me,overflow:Re||(W==null?void 0:W.overflow)});ge&&o&&(Ae.transition=`height ${Ce}ms ${C} ${ie}ms`,W!=null&&W.transition&&(Ae.transition=`${W.transition}, ${Ae.transition}`),Ae.WebkitTransition=Ae.transition);const qe={};r&&(qe.transition=`opacity ${Ce}ms ${C} ${ie}ms`,qe.WebkitTransition=qe.transition,me===0&&(qe.opacity=0));const zt=typeof X["aria-hidden"]<"u"?X["aria-hidden"]:P===0;return Ei.createElement("div",Object.assign({},X,{"aria-hidden":zt,className:`${Pe} ${h}`,style:Ae,ref:t}),Ei.createElement("div",{className:u,style:qe,ref:Tt=>{ne.current=Tt,G&&(G.current=Tt)}},l))}),Lk=300,k_=({title:e,initiallyDeployed:t,children:r})=>{const[n,o]=N.useState(t||!1),l=N.useRef(null);return N.useEffect(()=>{n&&setTimeout(()=>{var h;l.current&&((h=l.current.parentElement)==null||h.scrollTo({top:l.current.offsetTop-5,behavior:"smooth"}))},Lk)},[n]),S.jsxs("div",{className:"panel",ref:l,children:[S.jsxs("h2",{children:[e," ",S.jsx("button",{type:"button",onClick:()=>o(h=>!h),children:n?S.jsx(fB,{}):S.jsx(pB,{})})]}),S.jsx(NB,{duration:Lk,height:n?"auto":0,children:r})]})},BB=()=>S.jsxs(k_,{initiallyDeployed:!0,title:S.jsxs(S.Fragment,{children:[S.jsx(tB,{className:"text-muted"})," Description"]}),children:[S.jsxs("p",{children:["This map represents a ",S.jsx("i",{children:"network"})," of infrastructure switches across multiple regions in Indonesia. Each"," ",S.jsx("i",{children:"node"})," represents a network switch, and connections show the network topology between switches."]}),S.jsx("p",{children:"The switches are from various manufacturers including Cisco, Huawei, Arista, Juniper, and MikroTik. Each switch has detailed information including the model, region, port utilization, and geographic coordinates."}),S.jsx("p",{children:"Node sizes represent port utilization percentage - larger nodes indicate switches with higher port usage. Colors represent different manufacturers, making it easy to identify equipment distribution across the network."}),S.jsx("p",{children:"You can hover over any switch to see detailed information including hostname, manufacturer, model, region, port usage statistics, and utilization percentage. Use the search functionality to quickly locate specific switches."})]}),FB=({filters:e,children:t})=>{const n=If().getGraph();return N.useEffect(()=>{const{manufactures:o,regions:l,models:h}=e;n.forEachNode((u,v)=>{const x=o[v.manufacture]&&l[v.region]&&h[v.model];n.setNodeAttribute(u,"hidden",!x)}),n.forEachEdge((u,v,x,A)=>{const C=n.getNodeAttribute(x,"hidden"),P=n.getNodeAttribute(A,"hidden");n.setEdgeAttribute(u,"hidden",C||P)})},[n,e]),S.jsx(S.Fragment,{children:t})};function Ik(){return document.querySelector(".sigma-mouse")}const $B=({setHoveredNode:e,children:t})=>{const n=If().getGraph(),o=p9();return N.useEffect(()=>{o({clickNode({node:l}){n.getNodeAttribute(l,"hidden")||window.open(n.getNodeAttribute(l,"URL"),"_blank")},enterNode({node:l}){e(l);const h=Ik();h&&h.classList.add("mouse-pointer")},leaveNode(){e(null);const l=Ik();l&&l.classList.remove("mouse-pointer")}})},[]),S.jsx(S.Fragment,{children:t})};function GB(e,t){const[r,n]=N.useState(e);return N.useEffect(()=>{const o=setTimeout(()=>{e!==r&&n(e)},t);return()=>{clearTimeout(o)}},[e,t]),r}const Ok="#bbb",jk="#eee",UB=({children:e,hoveredNode:t})=>{const r=If(),n=uD(),o=r.getGraph(),l=GB(t,40);return N.useEffect(()=>{var u;const h=l&&((u=r.getNodeDisplayData(l))==null?void 0:u.color)||"";n({defaultDrawNodeLabel:OD,defaultDrawNodeHover:ID,nodeReducer:(v,x)=>l?v===l||o.hasEdge(v,l)||o.hasEdge(l,v)?{...x,zIndex:1}:{...x,zIndex:0,label:"",color:Ok,image:null,highlighted:!1}:x,edgeReducer:(v,x)=>l?o.hasExtremity(v,l)?{...x,color:h,size:4}:{...x,color:jk,hidden:!0}:x})},[r,o,l]),N.useEffect(()=>{var u;const h=l&&((u=r.getNodeDisplayData(l))==null?void 0:u.color)||"";r.setSetting("nodeReducer",l?(v,x)=>v===l||o.hasEdge(v,l)||o.hasEdge(l,v)?{...x,zIndex:1}:{...x,zIndex:0,label:"",color:Ok,image:null,highlighted:!1}:null),r.setSetting("edgeReducer",l?(v,x)=>o.hasExtremity(v,l)?{...x,color:h,size:4}:{...x,color:jk,hidden:!0}:null)},[l]),S.jsx(S.Fragment,{children:e})};function Rk(e){return(e*100).toFixed(1)+"%"}const VB=({filters:e})=>{const r=If().getGraph(),[n,o]=N.useState({nodes:0,edges:0});return N.useEffect(()=>{requestAnimationFrame(()=>{const l={nodes:0,edges:0};r.forEachNode((h,{hidden:u})=>!u&&l.nodes++),r.forEachEdge((h,u,v,x,A,C)=>!A.hidden&&!C.hidden&&l.edges++),o(l)})},[e]),S.jsxs("div",{className:"graph-title",children:[S.jsx("h1",{children:"Network Infrastructure Switch Monitoring"}),S.jsx("h2",{children:S.jsxs("i",{children:[r.order," switch",r.order>1?"es":""," ",n.nodes!==r.order?` (only ${Rk(n.nodes/r.order)} visible)`:"",", ",r.size," connection",r.size>1?"s":""," ",n.edges!==r.size?` (only ${Rk(n.edges/r.size)} visible)`:""]})})]})},qB={Cisco:"#1ba1e2",Huawei:"#e51400",Arista:"#60a917",Juniper:"#f09609",MikroTik:"#d80073"},WB=({manufacturers:e,filters:t,toggleManufacturer:r,setManufacturers:n})=>{const l=If().getGraph(),h=N.useMemo(()=>{const P={};return l.forEachNode((O,{manufacture:U})=>P[U]=(P[U]||0)+1),P},[l]),u=N.useMemo(()=>Math.max(...la.values(h)),[h]),v=N.useMemo(()=>Object.keys(t.manufactures).length,[t]),[x,A]=N.useState(h);N.useEffect(()=>{requestAnimationFrame(()=>{const P={};l.forEachNode((O,{manufacture:U,hidden:W})=>!W&&(P[U]=(P[U]||0)+1)),A(P)})},[t,l]);const C=N.useMemo(()=>la.sortBy(e,P=>-h[P]),[e,h]);return S.jsxs(k_,{title:S.jsxs(S.Fragment,{children:[S.jsx(uB,{className:"text-muted"})," Manufacturers",v<e.length?S.jsxs("span",{className:"text-muted text-small",children:[" ","(",v," / ",e.length,")"]}):""]}),children:[S.jsx("p",{children:S.jsx("i",{className:"text-muted",children:"Click a manufacturer to show/hide related switches from the network."})}),S.jsxs("p",{className:"buttons",children:[S.jsxs("button",{className:"btn",onClick:()=>n(la.mapValues(la.keyBy(e,P=>P),()=>!0)),children:[S.jsx(EE,{})," Check all"]})," ",S.jsxs("button",{className:"btn",onClick:()=>n({}),children:[S.jsx(AE,{})," Uncheck all"]})]}),S.jsx("ul",{children:C.map(P=>{const O=h[P],U=x[P]||0,W=qB[P]||"#666666";return S.jsxs("li",{className:"caption-row",title:`${O} switch${O>1?"es":""}${U!==O?U>0?` (only ${U>1?`${U} are`:"one is"} visible)`:" (all hidden)":""}`,children:[S.jsx("input",{type:"checkbox",checked:t.manufactures[P]||!1,onChange:()=>r(P),id:`manufacturer-${P}`}),S.jsxs("label",{htmlFor:`manufacturer-${P}`,children:[S.jsx("span",{className:"circle",style:{background:W,borderColor:W}})," ",S.jsxs("div",{className:"node-label",children:[S.jsx("span",{children:P}),S.jsx("div",{className:"bar",style:{width:100*O/u+"%"},children:S.jsx("div",{className:"inside-bar",style:{width:100*U/O+"%"}})})]})]})]},P)})})]})},HB={"7050X3":"#FF7F50",S5720:"#87CEEB",MX480:"#DDA0DD",CCR1036:"#98FB98",Nexus9000:"#F0E68C"},ZB=({models:e,filters:t,toggleModel:r,setModels:n})=>{const l=If().getGraph(),h=N.useMemo(()=>{const P={};return l.forEachNode((O,{model:U})=>P[U]=(P[U]||0)+1),P},[l]),u=N.useMemo(()=>Math.max(...la.values(h)),[h]),v=N.useMemo(()=>Object.keys(t.models).length,[t]),[x,A]=N.useState(h);N.useEffect(()=>{requestAnimationFrame(()=>{const P={};l.forEachNode((O,{model:U,hidden:W})=>!W&&(P[U]=(P[U]||0)+1)),A(P)})},[t,l]);const C=N.useMemo(()=>la.sortBy(e,P=>-h[P]),[e,h]);return S.jsxs(k_,{title:S.jsxs(S.Fragment,{children:[S.jsx(hB,{className:"text-muted"})," Models",v<e.length?S.jsxs("span",{className:"text-muted text-small",children:[" ","(",v," / ",e.length,")"]}):""]}),children:[S.jsx("p",{children:S.jsx("i",{className:"text-muted",children:"Click a model to show/hide related switches from the network."})}),S.jsxs("p",{className:"buttons",children:[S.jsxs("button",{className:"btn",onClick:()=>n(la.mapValues(la.keyBy(e,P=>P),()=>!0)),children:[S.jsx(EE,{})," Check all"]})," ",S.jsxs("button",{className:"btn",onClick:()=>n({}),children:[S.jsx(AE,{})," Uncheck all"]})]}),S.jsx("ul",{children:C.map(P=>{const O=h[P],U=x[P]||0,W=HB[P]||"#999999";return S.jsxs("li",{className:"caption-row",title:`${O} switch${O>1?"es":""} with model ${P}${U!==O?U>0?` (only ${U>1?`${U} are`:"one is"} visible)`:" (all hidden)":""}`,children:[S.jsx("input",{type:"checkbox",checked:t.models[P]||!1,onChange:()=>r(P),id:`model-${P}`}),S.jsxs("label",{htmlFor:`model-${P}`,children:[S.jsx("span",{className:"circle",style:{background:W,borderColor:W}})," ",S.jsxs("div",{className:"node-label",children:[S.jsx("span",{children:P}),S.jsx("div",{className:"bar",style:{width:100*O/u+"%"},children:S.jsx("div",{className:"inside-bar",style:{width:100*U/O+"%"}})})]})]})]},P)})})]})},KB={Jakarta:"#FF6B6B",Yogyakarta:"#4ECDC4",Medan:"#45B7D1",Bandung:"#96CEB4",Surabaya:"#FFEAA7",Makassar:"#DDA0DD",Denpasar:"#98D8C8",Balikpapan:"#F7DC6F"},XB=({regions:e,filters:t,toggleRegion:r,setRegions:n})=>{const l=If().getGraph(),h=N.useMemo(()=>{const P={};return l.forEachNode((O,{region:U})=>P[U]=(P[U]||0)+1),P},[l]),u=N.useMemo(()=>Math.max(...la.values(h)),[h]),v=N.useMemo(()=>Object.keys(t.regions).length,[t]),[x,A]=N.useState(h);N.useEffect(()=>{requestAnimationFrame(()=>{const P={};l.forEachNode((O,{region:U,hidden:W})=>!W&&(P[U]=(P[U]||0)+1)),A(P)})},[t,l]);const C=N.useMemo(()=>la.sortBy(e,P=>-h[P]),[e,h]);return S.jsxs(k_,{title:S.jsxs(S.Fragment,{children:[S.jsx(cB,{className:"text-muted"})," Regions",v<e.length?S.jsxs("span",{className:"text-muted text-small",children:[" ","(",v," / ",e.length,")"]}):""]}),children:[S.jsx("p",{children:S.jsx("i",{className:"text-muted",children:"Click a region to show/hide related switches from the network."})}),S.jsxs("p",{className:"buttons",children:[S.jsxs("button",{className:"btn",onClick:()=>n(la.mapValues(la.keyBy(e,P=>P),()=>!0)),children:[S.jsx(EE,{})," Check all"]})," ",S.jsxs("button",{className:"btn",onClick:()=>n({}),children:[S.jsx(AE,{})," Uncheck all"]})]}),S.jsx("ul",{children:C.map(P=>{const O=h[P],U=x[P]||0,W=KB[P]||"#888888";return S.jsxs("li",{className:"caption-row",title:`${O} switch${O>1?"es":""} in ${P}${U!==O?U>0?` (only ${U>1?`${U} are`:"one is"} visible)`:" (all hidden)":""}`,children:[S.jsx("input",{type:"checkbox",checked:t.regions[P]||!1,onChange:()=>r(P),id:`region-${P}`}),S.jsxs("label",{htmlFor:`region-${P}`,children:[S.jsx("span",{className:"circle",style:{background:W,borderColor:W}})," ",S.jsxs("div",{className:"node-label",children:[S.jsx("span",{children:P}),S.jsx("div",{className:"bar",style:{width:100*O/u+"%"},children:S.jsx("div",{className:"inside-bar",style:{width:100*U/O+"%"}})})]})]})]},P)})})]})},YB=({filters:e})=>{const t=If(),[r,n]=N.useState(""),[o,l]=N.useState([]),[h,u]=N.useState(null),v=()=>{const C=[],P=r.toLowerCase();!h&&r.length>1&&t.getGraph().forEachNode((O,U)=>{!U.hidden&&U.label&&U.label.toLowerCase().indexOf(P)===0&&C.push({id:O,label:U.label})}),l(C)};N.useEffect(()=>v(),[r]),N.useEffect(()=>{requestAnimationFrame(v)},[e]),N.useEffect(()=>{if(!h)return;t.getGraph().setNodeAttribute(h,"highlighted",!0);const C=t.getNodeDisplayData(h);return C&&t.getCamera().animate({...C,ratio:.05},{duration:600}),()=>{t.getGraph().setNodeAttribute(h,"highlighted",!1)}},[h]);const x=C=>{const P=C.target.value,O=o.find(U=>U.label===P);O?(n(O.label),l([]),u(O.id)):(u(null),n(P))},A=C=>{C.key==="Enter"&&o.length&&(n(o[0].label),u(o[0].id))};return S.jsxs("div",{className:"search-wrapper",children:[S.jsx("input",{type:"search",placeholder:"Search in nodes...",list:"nodes",value:r,onChange:x,onKeyPress:A}),S.jsx(rB,{className:"icon"}),S.jsx("datalist",{id:"nodes",children:o.map(C=>S.jsx("option",{value:C.label,children:C.label},C.id))})]})};var c1={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var JB=c1.exports,Nk;function QB(){return Nk||(Nk=1,(function(e,t){((r,n)=>{e.exports=n()})(JB,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},o,l=!n.document&&!!n.postMessage,h=n.IS_PAPA_WORKER||!1,u={},v=0,x={};function A(Y){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(ie){var Ce=Q(ie);Ce.chunkSize=parseInt(Ce.chunkSize),ie.step||ie.chunk||(Ce.chunkSize=null),this._handle=new W(Ce),(this._handle.streamer=this)._config=Ce}).call(this,Y),this.parseChunk=function(ie,Ce){var _e=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<_e){let me=this._config.newline;me||(Me=this._config.quoteChar||'"',me=this._handle.guessLineEndings(ie,Me)),ie=[...ie.split(me).slice(_e)].join(me)}this.isFirstChunk&&he(this._config.beforeFirstChunk)&&(Me=this._config.beforeFirstChunk(ie))!==void 0&&(ie=Me),this.isFirstChunk=!1,this._halted=!1;var _e=this._partialLine+ie,Me=(this._partialLine="",this._handle.parse(_e,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(ie=Me.meta.cursor,_e=(this._finished||(this._partialLine=_e.substring(ie-this._baseIndex),this._baseIndex=ie),Me&&Me.data&&(this._rowCount+=Me.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),h)n.postMessage({results:Me,workerId:x.WORKER_ID,finished:_e});else if(he(this._config.chunk)&&!Ce){if(this._config.chunk(Me,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=Me=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(Me.data),this._completeResults.errors=this._completeResults.errors.concat(Me.errors),this._completeResults.meta=Me.meta),this._completed||!_e||!he(this._config.complete)||Me&&Me.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),_e||Me&&Me.meta.paused||this._nextChunk(),Me}this._halted=!0},this._sendError=function(ie){he(this._config.error)?this._config.error(ie):h&&this._config.error&&n.postMessage({workerId:x.WORKER_ID,error:ie,finished:!1})}}function C(Y){var ie;(Y=Y||{}).chunkSize||(Y.chunkSize=x.RemoteChunkSize),A.call(this,Y),this._nextChunk=l?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(Ce){this._input=Ce,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(ie=new XMLHttpRequest,this._config.withCredentials&&(ie.withCredentials=this._config.withCredentials),l||(ie.onload=de(this._chunkLoaded,this),ie.onerror=de(this._chunkError,this)),ie.open(this._config.downloadRequestBody?"POST":"GET",this._input,!l),this._config.downloadRequestHeaders){var Ce,_e=this._config.downloadRequestHeaders;for(Ce in _e)ie.setRequestHeader(Ce,_e[Ce])}var Me;this._config.chunkSize&&(Me=this._start+this._config.chunkSize-1,ie.setRequestHeader("Range","bytes="+this._start+"-"+Me));try{ie.send(this._config.downloadRequestBody)}catch(me){this._chunkError(me.message)}l&&ie.status===0&&this._chunkError()}},this._chunkLoaded=function(){ie.readyState===4&&(ie.status<200||400<=ie.status?this._chunkError():(this._start+=this._config.chunkSize||ie.responseText.length,this._finished=!this._config.chunkSize||this._start>=(Ce=>(Ce=Ce.getResponseHeader("Content-Range"))!==null?parseInt(Ce.substring(Ce.lastIndexOf("/")+1)):-1)(ie),this.parseChunk(ie.responseText)))},this._chunkError=function(Ce){Ce=ie.statusText||Ce,this._sendError(new Error(Ce))}}function P(Y){(Y=Y||{}).chunkSize||(Y.chunkSize=x.LocalChunkSize),A.call(this,Y);var ie,Ce,_e=typeof FileReader<"u";this.stream=function(Me){this._input=Me,Ce=Me.slice||Me.webkitSlice||Me.mozSlice,_e?((ie=new FileReader).onload=de(this._chunkLoaded,this),ie.onerror=de(this._chunkError,this)):ie=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var Me=this._input,me=(this._config.chunkSize&&(me=Math.min(this._start+this._config.chunkSize,this._input.size),Me=Ce.call(Me,this._start,me)),ie.readAsText(Me,this._config.encoding));_e||this._chunkLoaded({target:{result:me}})},this._chunkLoaded=function(Me){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(Me.target.result)},this._chunkError=function(){this._sendError(ie.error)}}function O(Y){var ie;A.call(this,Y=Y||{}),this.stream=function(Ce){return ie=Ce,this._nextChunk()},this._nextChunk=function(){var Ce,_e;if(!this._finished)return Ce=this._config.chunkSize,ie=Ce?(_e=ie.substring(0,Ce),ie.substring(Ce)):(_e=ie,""),this._finished=!ie,this.parseChunk(_e)}}function U(Y){A.call(this,Y=Y||{});var ie=[],Ce=!0,_e=!1;this.pause=function(){A.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){A.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(Me){this._input=Me,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){_e&&ie.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),ie.length?this.parseChunk(ie.shift()):Ce=!0},this._streamData=de(function(Me){try{ie.push(typeof Me=="string"?Me:Me.toString(this._config.encoding)),Ce&&(Ce=!1,this._checkIsFinished(),this.parseChunk(ie.shift()))}catch(me){this._streamError(me)}},this),this._streamError=de(function(Me){this._streamCleanUp(),this._sendError(Me)},this),this._streamEnd=de(function(){this._streamCleanUp(),_e=!0,this._streamData("")},this),this._streamCleanUp=de(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function W(Y){var ie,Ce,_e,Me,me=Math.pow(2,53),Ke=-me,Re=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,pe=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,ge=this,ze=0,Pe=0,st=!1,Ae=!1,qe=[],Ze={data:[],errors:[],meta:{}};function zt(tr){return Y.skipEmptyLines==="greedy"?tr.join("").trim()==="":tr.length===1&&tr[0].length===0}function Tt(){if(Ze&&_e&&(Xt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+x.DefaultDelimiter+"'"),_e=!1),Y.skipEmptyLines&&(Ze.data=Ze.data.filter(function(pt){return!zt(pt)})),rr()){let pt=function(Pr,Lt){he(Y.transformHeader)&&(Pr=Y.transformHeader(Pr,Lt)),qe.push(Pr)};var Mt=pt;if(Ze)if(Array.isArray(Ze.data[0])){for(var tr=0;rr()&&tr<Ze.data.length;tr++)Ze.data[tr].forEach(pt);Ze.data.splice(0,1)}else Ze.data.forEach(pt)}function at(pt,Pr){for(var Lt=Y.header?{}:[],Wt=0;Wt<pt.length;Wt++){var ke=Wt,Xr=pt[Wt],Xr=((rn,vr)=>(Wr=>(Y.dynamicTypingFunction&&Y.dynamicTyping[Wr]===void 0&&(Y.dynamicTyping[Wr]=Y.dynamicTypingFunction(Wr)),(Y.dynamicTyping[Wr]||Y.dynamicTyping)===!0))(rn)?vr==="true"||vr==="TRUE"||vr!=="false"&&vr!=="FALSE"&&((Wr=>{if(Re.test(Wr)&&(Wr=parseFloat(Wr),Ke<Wr&&Wr<me))return 1})(vr)?parseFloat(vr):pe.test(vr)?new Date(vr):vr===""?null:vr):vr)(ke=Y.header?Wt>=qe.length?"__parsed_extra":qe[Wt]:ke,Xr=Y.transform?Y.transform(Xr,ke):Xr);ke==="__parsed_extra"?(Lt[ke]=Lt[ke]||[],Lt[ke].push(Xr)):Lt[ke]=Xr}return Y.header&&(Wt>qe.length?Xt("FieldMismatch","TooManyFields","Too many fields: expected "+qe.length+" fields but parsed "+Wt,Pe+Pr):Wt<qe.length&&Xt("FieldMismatch","TooFewFields","Too few fields: expected "+qe.length+" fields but parsed "+Wt,Pe+Pr)),Lt}var Ht;Ze&&(Y.header||Y.dynamicTyping||Y.transform)&&(Ht=1,!Ze.data.length||Array.isArray(Ze.data[0])?(Ze.data=Ze.data.map(at),Ht=Ze.data.length):Ze.data=at(Ze.data,0),Y.header&&Ze.meta&&(Ze.meta.fields=qe),Pe+=Ht)}function rr(){return Y.header&&qe.length===0}function Xt(tr,at,Ht,Mt){tr={type:tr,code:at,message:Ht},Mt!==void 0&&(tr.row=Mt),Ze.errors.push(tr)}he(Y.step)&&(Me=Y.step,Y.step=function(tr){Ze=tr,rr()?Tt():(Tt(),Ze.data.length!==0&&(ze+=tr.data.length,Y.preview&&ze>Y.preview?Ce.abort():(Ze.data=Ze.data[0],Me(Ze,ge))))}),this.parse=function(tr,at,Ht){var Mt=Y.quoteChar||'"',Mt=(Y.newline||(Y.newline=this.guessLineEndings(tr,Mt)),_e=!1,Y.delimiter?he(Y.delimiter)&&(Y.delimiter=Y.delimiter(tr),Ze.meta.delimiter=Y.delimiter):((Mt=((pt,Pr,Lt,Wt,ke)=>{var Xr,rn,vr,Wr;ke=ke||[",","	","|",";",x.RECORD_SEP,x.UNIT_SEP];for(var Hn=0;Hn<ke.length;Hn++){for(var fi,ba=ke[Hn],Rn=0,ai=0,pi=0,oi=(vr=void 0,new X({comments:Wt,delimiter:ba,newline:Pr,preview:10}).parse(pt)),Rt=0;Rt<oi.data.length;Rt++)Lt&&zt(oi.data[Rt])?pi++:(fi=oi.data[Rt].length,ai+=fi,vr===void 0?vr=fi:0<fi&&(Rn+=Math.abs(fi-vr),vr=fi));0<oi.data.length&&(ai/=oi.data.length-pi),(rn===void 0||Rn<=rn)&&(Wr===void 0||Wr<ai)&&1.99<ai&&(rn=Rn,Xr=ba,Wr=ai)}return{successful:!!(Y.delimiter=Xr),bestDelimiter:Xr}})(tr,Y.newline,Y.skipEmptyLines,Y.comments,Y.delimitersToGuess)).successful?Y.delimiter=Mt.bestDelimiter:(_e=!0,Y.delimiter=x.DefaultDelimiter),Ze.meta.delimiter=Y.delimiter),Q(Y));return Y.preview&&Y.header&&Mt.preview++,ie=tr,Ce=new X(Mt),Ze=Ce.parse(ie,at,Ht),Tt(),st?{meta:{paused:!0}}:Ze||{meta:{paused:!1}}},this.paused=function(){return st},this.pause=function(){st=!0,Ce.abort(),ie=he(Y.chunk)?"":ie.substring(Ce.getCharIndex())},this.resume=function(){ge.streamer._halted?(st=!1,ge.streamer.parseChunk(ie,!0)):setTimeout(ge.resume,3)},this.aborted=function(){return Ae},this.abort=function(){Ae=!0,Ce.abort(),Ze.meta.aborted=!0,he(Y.complete)&&Y.complete(Ze),ie=""},this.guessLineEndings=function(pt,Mt){pt=pt.substring(0,1048576);var Mt=new RegExp(G(Mt)+"([^]*?)"+G(Mt),"gm"),Ht=(pt=pt.replace(Mt,"")).split("\r"),Mt=pt.split(`
`),pt=1<Mt.length&&Mt[0].length<Ht[0].length;if(Ht.length===1||pt)return`
`;for(var Pr=0,Lt=0;Lt<Ht.length;Lt++)Ht[Lt][0]===`
`&&Pr++;return Pr>=Ht.length/2?`\r
`:"\r"}}function G(Y){return Y.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function X(Y){var ie=(Y=Y||{}).delimiter,Ce=Y.newline,_e=Y.comments,Me=Y.step,me=Y.preview,Ke=Y.fastMode,Re=null,pe=!1,ge=Y.quoteChar==null?'"':Y.quoteChar,ze=ge;if(Y.escapeChar!==void 0&&(ze=Y.escapeChar),(typeof ie!="string"||-1<x.BAD_DELIMITERS.indexOf(ie))&&(ie=","),_e===ie)throw new Error("Comment character same as delimiter");_e===!0?_e="#":(typeof _e!="string"||-1<x.BAD_DELIMITERS.indexOf(_e))&&(_e=!1),Ce!==`
`&&Ce!=="\r"&&Ce!==`\r
`&&(Ce=`
`);var Pe=0,st=!1;this.parse=function(Ae,qe,Ze){if(typeof Ae!="string")throw new Error("Input must be a string");var zt=Ae.length,Tt=ie.length,rr=Ce.length,Xt=_e.length,tr=he(Me),at=[],Ht=[],Mt=[],pt=Pe=0;if(!Ae)return Rn();if(Ke||Ke!==!1&&Ae.indexOf(ge)===-1){for(var Pr=Ae.split(Ce),Lt=0;Lt<Pr.length;Lt++){if(Mt=Pr[Lt],Pe+=Mt.length,Lt!==Pr.length-1)Pe+=Ce.length;else if(Ze)return Rn();if(!_e||Mt.substring(0,Xt)!==_e){if(tr){if(at=[],Wr(Mt.split(ie)),ai(),st)return Rn()}else Wr(Mt.split(ie));if(me&&me<=Lt)return at=at.slice(0,me),Rn(!0)}}return Rn()}for(var Wt=Ae.indexOf(ie,Pe),ke=Ae.indexOf(Ce,Pe),Xr=new RegExp(G(ze)+G(ge),"g"),rn=Ae.indexOf(ge,Pe);;)if(Ae[Pe]===ge)for(rn=Pe,Pe++;;){if((rn=Ae.indexOf(ge,rn+1))===-1)return Ze||Ht.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:at.length,index:Pe}),fi();if(rn===zt-1)return fi(Ae.substring(Pe,rn).replace(Xr,ge));if(ge===ze&&Ae[rn+1]===ze)rn++;else if(ge===ze||rn===0||Ae[rn-1]!==ze){Wt!==-1&&Wt<rn+1&&(Wt=Ae.indexOf(ie,rn+1));var vr=Hn((ke=ke!==-1&&ke<rn+1?Ae.indexOf(Ce,rn+1):ke)===-1?Wt:Math.min(Wt,ke));if(Ae.substr(rn+1+vr,Tt)===ie){Mt.push(Ae.substring(Pe,rn).replace(Xr,ge)),Ae[Pe=rn+1+vr+Tt]!==ge&&(rn=Ae.indexOf(ge,Pe)),Wt=Ae.indexOf(ie,Pe),ke=Ae.indexOf(Ce,Pe);break}if(vr=Hn(ke),Ae.substring(rn+1+vr,rn+1+vr+rr)===Ce){if(Mt.push(Ae.substring(Pe,rn).replace(Xr,ge)),ba(rn+1+vr+rr),Wt=Ae.indexOf(ie,Pe),rn=Ae.indexOf(ge,Pe),tr&&(ai(),st))return Rn();if(me&&at.length>=me)return Rn(!0);break}Ht.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:at.length,index:Pe}),rn++}}else if(_e&&Mt.length===0&&Ae.substring(Pe,Pe+Xt)===_e){if(ke===-1)return Rn();Pe=ke+rr,ke=Ae.indexOf(Ce,Pe),Wt=Ae.indexOf(ie,Pe)}else if(Wt!==-1&&(Wt<ke||ke===-1))Mt.push(Ae.substring(Pe,Wt)),Pe=Wt+Tt,Wt=Ae.indexOf(ie,Pe);else{if(ke===-1)break;if(Mt.push(Ae.substring(Pe,ke)),ba(ke+rr),tr&&(ai(),st))return Rn();if(me&&at.length>=me)return Rn(!0)}return fi();function Wr(pi){at.push(pi),pt=Pe}function Hn(pi){var oi=0;return oi=pi!==-1&&(pi=Ae.substring(rn+1,pi))&&pi.trim()===""?pi.length:oi}function fi(pi){return Ze||(pi===void 0&&(pi=Ae.substring(Pe)),Mt.push(pi),Pe=zt,Wr(Mt),tr&&ai()),Rn()}function ba(pi){Pe=pi,Wr(Mt),Mt=[],ke=Ae.indexOf(Ce,Pe)}function Rn(pi){if(Y.header&&!qe&&at.length&&!pe){var oi=at[0],Rt=Object.create(null),Fi=new Set(oi);let Fn=!1;for(let Pi=0;Pi<oi.length;Pi++){let ca=oi[Pi];if(Rt[ca=he(Y.transformHeader)?Y.transformHeader(ca,Pi):ca]){let nr,kr=Rt[ca];for(;nr=ca+"_"+kr,kr++,Fi.has(nr););Fi.add(nr),oi[Pi]=nr,Rt[ca]++,Fn=!0,(Re=Re===null?{}:Re)[nr]=ca}else Rt[ca]=1,oi[Pi]=ca;Fi.add(ca)}Fn&&console.warn("Duplicate headers found and renamed."),pe=!0}return{data:at,errors:Ht,meta:{delimiter:ie,linebreak:Ce,aborted:st,truncated:!!pi,cursor:pt+(qe||0),renamedHeaders:Re}}}function ai(){Me(Rn()),at=[],Ht=[]}},this.abort=function(){st=!0},this.getCharIndex=function(){return Pe}}function ae(Y){var ie=Y.data,Ce=u[ie.workerId],_e=!1;if(ie.error)Ce.userError(ie.error,ie.file);else if(ie.results&&ie.results.data){var Me={abort:function(){_e=!0,ne(ie.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ue,resume:ue};if(he(Ce.userStep)){for(var me=0;me<ie.results.data.length&&(Ce.userStep({data:ie.results.data[me],errors:ie.results.errors,meta:ie.results.meta},Me),!_e);me++);delete ie.results}else he(Ce.userChunk)&&(Ce.userChunk(ie.results,Me,ie.file),delete ie.results)}ie.finished&&!_e&&ne(ie.workerId,ie.results)}function ne(Y,ie){var Ce=u[Y];he(Ce.userComplete)&&Ce.userComplete(ie),Ce.terminate(),delete u[Y]}function ue(){throw new Error("Not implemented.")}function Q(Y){if(typeof Y!="object"||Y===null)return Y;var ie,Ce=Array.isArray(Y)?[]:{};for(ie in Y)Ce[ie]=Q(Y[ie]);return Ce}function de(Y,ie){return function(){Y.apply(ie,arguments)}}function he(Y){return typeof Y=="function"}return x.parse=function(Y,ie){var Ce=(ie=ie||{}).dynamicTyping||!1;if(he(Ce)&&(ie.dynamicTypingFunction=Ce,Ce={}),ie.dynamicTyping=Ce,ie.transform=!!he(ie.transform)&&ie.transform,!ie.worker||!x.WORKERS_SUPPORTED)return Ce=null,x.NODE_STREAM_INPUT,typeof Y=="string"?(Y=(_e=>_e.charCodeAt(0)!==65279?_e:_e.slice(1))(Y),Ce=new(ie.download?C:O)(ie)):Y.readable===!0&&he(Y.read)&&he(Y.on)?Ce=new U(ie):(n.File&&Y instanceof File||Y instanceof Object)&&(Ce=new P(ie)),Ce.stream(Y);(Ce=(()=>{var _e;return!!x.WORKERS_SUPPORTED&&(_e=(()=>{var Me=n.URL||n.webkitURL||null,me=r.toString();return x.BLOB_URL||(x.BLOB_URL=Me.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",me,")();"],{type:"text/javascript"})))})(),(_e=new n.Worker(_e)).onmessage=ae,_e.id=v++,u[_e.id]=_e)})()).userStep=ie.step,Ce.userChunk=ie.chunk,Ce.userComplete=ie.complete,Ce.userError=ie.error,ie.step=he(ie.step),ie.chunk=he(ie.chunk),ie.complete=he(ie.complete),ie.error=he(ie.error),delete ie.worker,Ce.postMessage({input:Y,config:ie,workerId:Ce.id})},x.unparse=function(Y,ie){var Ce=!1,_e=!0,Me=",",me=`\r
`,Ke='"',Re=Ke+Ke,pe=!1,ge=null,ze=!1,Pe=((()=>{if(typeof ie=="object"){if(typeof ie.delimiter!="string"||x.BAD_DELIMITERS.filter(function(qe){return ie.delimiter.indexOf(qe)!==-1}).length||(Me=ie.delimiter),typeof ie.quotes!="boolean"&&typeof ie.quotes!="function"&&!Array.isArray(ie.quotes)||(Ce=ie.quotes),typeof ie.skipEmptyLines!="boolean"&&typeof ie.skipEmptyLines!="string"||(pe=ie.skipEmptyLines),typeof ie.newline=="string"&&(me=ie.newline),typeof ie.quoteChar=="string"&&(Ke=ie.quoteChar),typeof ie.header=="boolean"&&(_e=ie.header),Array.isArray(ie.columns)){if(ie.columns.length===0)throw new Error("Option columns is empty");ge=ie.columns}ie.escapeChar!==void 0&&(Re=ie.escapeChar+Ke),ie.escapeFormulae instanceof RegExp?ze=ie.escapeFormulae:typeof ie.escapeFormulae=="boolean"&&ie.escapeFormulae&&(ze=/^[=+\-@\t\r].*$/)}})(),new RegExp(G(Ke),"g"));if(typeof Y=="string"&&(Y=JSON.parse(Y)),Array.isArray(Y)){if(!Y.length||Array.isArray(Y[0]))return st(null,Y,pe);if(typeof Y[0]=="object")return st(ge||Object.keys(Y[0]),Y,pe)}else if(typeof Y=="object")return typeof Y.data=="string"&&(Y.data=JSON.parse(Y.data)),Array.isArray(Y.data)&&(Y.fields||(Y.fields=Y.meta&&Y.meta.fields||ge),Y.fields||(Y.fields=Array.isArray(Y.data[0])?Y.fields:typeof Y.data[0]=="object"?Object.keys(Y.data[0]):[]),Array.isArray(Y.data[0])||typeof Y.data[0]=="object"||(Y.data=[Y.data])),st(Y.fields||[],Y.data||[],pe);throw new Error("Unable to serialize unrecognized input");function st(qe,Ze,zt){var Tt="",rr=(typeof qe=="string"&&(qe=JSON.parse(qe)),typeof Ze=="string"&&(Ze=JSON.parse(Ze)),Array.isArray(qe)&&0<qe.length),Xt=!Array.isArray(Ze[0]);if(rr&&_e){for(var tr=0;tr<qe.length;tr++)0<tr&&(Tt+=Me),Tt+=Ae(qe[tr],tr);0<Ze.length&&(Tt+=me)}for(var at=0;at<Ze.length;at++){var Ht=(rr?qe:Ze[at]).length,Mt=!1,pt=rr?Object.keys(Ze[at]).length===0:Ze[at].length===0;if(zt&&!rr&&(Mt=zt==="greedy"?Ze[at].join("").trim()==="":Ze[at].length===1&&Ze[at][0].length===0),zt==="greedy"&&rr){for(var Pr=[],Lt=0;Lt<Ht;Lt++){var Wt=Xt?qe[Lt]:Lt;Pr.push(Ze[at][Wt])}Mt=Pr.join("").trim()===""}if(!Mt){for(var ke=0;ke<Ht;ke++){0<ke&&!pt&&(Tt+=Me);var Xr=rr&&Xt?qe[ke]:ke;Tt+=Ae(Ze[at][Xr],ke)}at<Ze.length-1&&(!zt||0<Ht&&!pt)&&(Tt+=me)}}return Tt}function Ae(qe,Ze){var zt,Tt;return qe==null?"":qe.constructor===Date?JSON.stringify(qe).slice(1,25):(Tt=!1,ze&&typeof qe=="string"&&ze.test(qe)&&(qe="'"+qe,Tt=!0),zt=qe.toString().replace(Pe,Re),(Tt=Tt||Ce===!0||typeof Ce=="function"&&Ce(qe,Ze)||Array.isArray(Ce)&&Ce[Ze]||((rr,Xt)=>{for(var tr=0;tr<Xt.length;tr++)if(-1<rr.indexOf(Xt[tr]))return!0;return!1})(zt,x.BAD_DELIMITERS)||-1<zt.indexOf(Me)||zt.charAt(0)===" "||zt.charAt(zt.length-1)===" ")?Ke+zt+Ke:zt)}},x.RECORD_SEP="",x.UNIT_SEP="",x.BYTE_ORDER_MARK="\uFEFF",x.BAD_DELIMITERS=["\r",`
`,'"',x.BYTE_ORDER_MARK],x.WORKERS_SUPPORTED=!l&&!!n.Worker,x.NODE_STREAM_INPUT=1,x.LocalChunkSize=10485760,x.RemoteChunkSize=5242880,x.DefaultDelimiter=",",x.Parser=X,x.ParserHandle=W,x.NetworkStreamer=C,x.FileStreamer=P,x.StringStreamer=O,x.ReadableStreamStreamer=U,n.jQuery&&((o=n.jQuery).fn.parse=function(Y){var ie=Y.config||{},Ce=[];return this.each(function(me){if(!(o(this).prop("tagName").toUpperCase()==="INPUT"&&o(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var Ke=0;Ke<this.files.length;Ke++)Ce.push({file:this.files[Ke],inputElem:this,instanceConfig:o.extend({},ie)})}),_e(),this;function _e(){if(Ce.length===0)he(Y.complete)&&Y.complete();else{var me,Ke,Re,pe,ge=Ce[0];if(he(Y.before)){var ze=Y.before(ge.file,ge.inputElem);if(typeof ze=="object"){if(ze.action==="abort")return me="AbortError",Ke=ge.file,Re=ge.inputElem,pe=ze.reason,void(he(Y.error)&&Y.error({name:me},Ke,Re,pe));if(ze.action==="skip")return void Me();typeof ze.config=="object"&&(ge.instanceConfig=o.extend(ge.instanceConfig,ze.config))}else if(ze==="skip")return void Me()}var Pe=ge.instanceConfig.complete;ge.instanceConfig.complete=function(st){he(Pe)&&Pe(st,ge.file,ge.inputElem),Me()},x.parse(ge.file,ge.instanceConfig)}}function Me(){Ce.splice(0,1),_e()}}),h&&(n.onmessage=function(Y){Y=Y.data,x.WORKER_ID===void 0&&Y&&(x.WORKER_ID=Y.workerId),typeof Y.input=="string"?n.postMessage({workerId:x.WORKER_ID,results:x.parse(Y.input,Y.config),finished:!0}):(n.File&&Y.input instanceof File||Y.input instanceof Object)&&(Y=x.parse(Y.input,Y.config))&&n.postMessage({workerId:x.WORKER_ID,results:Y,finished:!0})}),(C.prototype=Object.create(A.prototype)).constructor=C,(P.prototype=Object.create(A.prototype)).constructor=P,(O.prototype=Object.create(O.prototype)).constructor=O,(U.prototype=Object.create(A.prototype)).constructor=U,x})})(c1)),c1.exports}var eF=QB();const Ww=Fl(eF),tF=({onClose:e})=>{const[t,r]=N.useState(null),[n,o]=N.useState(null),[l,h]=N.useState(""),[u,v]=N.useState(""),[x,A]=N.useState(""),[C,P]=N.useState(""),[O,U]=N.useState(null),[W,G]=N.useState(!1),[X,ae]=N.useState(""),[ne,ue]=N.useState(!1),[Q,de]=N.useState(!1),he=N.useCallback((me,Ke,Re)=>{ae(""),Ww.parse(me,{header:!0,skipEmptyLines:!0,complete:pe=>{if(pe.data.length>0){const ge=Object.keys(pe.data[0]);Ke({headers:ge,rows:pe.data}),Re(me.name)}},error:pe=>{ae(`Error parsing ${me.name}: ${pe.message}`)}})},[]),Y=N.useCallback(()=>{if(!t||!n||!x||!C){ae("Please upload both files and select join columns");return}G(!0),ae(""),setTimeout(()=>{try{const me=new Map;n.rows.forEach(Re=>{const pe=String(Re[C]||"").trim().toLowerCase();pe&&me.set(pe,Re)});const Ke=t.rows.map(Re=>{const pe=String(Re[x]||"").trim().toLowerCase(),ge=me.get(pe);if(ge){const ze={...Re};return Object.keys(ge).forEach(Pe=>{const st=Pe===C?Pe:`file2_${Pe}`;ze[st]=ge[Pe]}),ze}return Re});n.rows.forEach(Re=>{const pe=String(Re[C]||"").trim().toLowerCase();if(!t.rows.some(ze=>String(ze[x]||"").trim().toLowerCase()===pe)){const ze={};Object.keys(Re).forEach(Pe=>{const st=Pe===C?x:`file2_${Pe}`;ze[st]=Re[Pe]}),Ke.push(ze)}}),U(Ke)}catch(me){ae(`Error joining data: ${me instanceof Error?me.message:"Unknown error"}`)}finally{G(!1)}},1500)},[t,n,x,C]),ie=N.useCallback(()=>{if(!O||O.length===0)return;const me=Ww.unparse(O),Ke=new Blob([me],{type:"text/csv;charset=utf-8;"}),Re=document.createElement("a"),pe=URL.createObjectURL(Ke);Re.setAttribute("href",pe),Re.setAttribute("download",`joined_data_${Date.now()}.csv`),Re.style.visibility="hidden",document.body.appendChild(Re),Re.click(),document.body.removeChild(Re)},[O]),Ce=N.useCallback((me,Ke)=>{me.preventDefault(),me.stopPropagation(),Ke===1?ue(!0):de(!0)},[]),_e=N.useCallback((me,Ke)=>{me.preventDefault(),me.stopPropagation(),Ke===1?ue(!1):de(!1)},[]),Me=N.useCallback((me,Ke,Re,pe)=>{me.preventDefault(),me.stopPropagation(),Ke===1?ue(!1):de(!1);const ge=me.dataTransfer.files;if(ge&&ge.length>0){const ze=ge[0];ze.type==="text/csv"||ze.name.endsWith(".csv")?he(ze,Re,pe):ae("Please upload a valid CSV file")}},[he]);return S.jsx("div",{className:"csv-join-overlay",children:S.jsxs("div",{className:"csv-join-container",children:[S.jsxs("div",{className:"csv-join-header",children:[S.jsxs("h2",{children:[S.jsx(Ck,{})," CSV Data Join Tool"]}),S.jsx("button",{className:"close-btn",onClick:e,title:"Close",children:S.jsx(vE,{})})]}),S.jsxs("div",{className:"csv-join-content",children:[X&&S.jsx("div",{className:"error-message",children:X}),S.jsxs("div",{className:"upload-section",children:[S.jsxs("div",{className:"upload-card",children:[S.jsxs("div",{className:"upload-header",children:[S.jsx("h3",{children:"File 1"}),l&&S.jsx("span",{className:"file-name",children:l})]}),S.jsxs("label",{className:`upload-area ${ne?"drag-over":""}`,onDragOver:me=>Ce(me,1),onDragLeave:me=>_e(me,1),onDrop:me=>Me(me,1,r,h),children:[S.jsx("input",{type:"file",accept:".csv",onChange:me=>{var Re;const Ke=(Re=me.target.files)==null?void 0:Re[0];Ke&&he(Ke,r,h)}}),S.jsx(Cv,{}),S.jsx("span",{children:"Click or drag & drop CSV file here"})]}),t&&S.jsxs("div",{className:"column-select",children:[S.jsx("label",{children:"Join Column:"}),S.jsxs("select",{value:x,onChange:me=>A(me.target.value),children:[S.jsx("option",{value:"",children:"Select column..."}),t.headers.map(me=>S.jsx("option",{value:me,children:me},me))]}),S.jsxs("div",{className:"data-info",children:[t.rows.length," rows, ",t.headers.length," columns"]})]})]}),S.jsxs("div",{className:"upload-card",children:[S.jsxs("div",{className:"upload-header",children:[S.jsx("h3",{children:"File 2"}),u&&S.jsx("span",{className:"file-name",children:u})]}),S.jsxs("label",{className:`upload-area ${Q?"drag-over":""}`,onDragOver:me=>Ce(me,2),onDragLeave:me=>_e(me,2),onDrop:me=>Me(me,2,o,v),children:[S.jsx("input",{type:"file",accept:".csv",onChange:me=>{var Re;const Ke=(Re=me.target.files)==null?void 0:Re[0];Ke&&he(Ke,o,v)}}),S.jsx(Cv,{}),S.jsx("span",{children:"Click or drag & drop CSV file here"})]}),n&&S.jsxs("div",{className:"column-select",children:[S.jsx("label",{children:"Join Column:"}),S.jsxs("select",{value:C,onChange:me=>P(me.target.value),children:[S.jsx("option",{value:"",children:"Select column..."}),n.headers.map(me=>S.jsx("option",{value:me,children:me},me))]}),S.jsxs("div",{className:"data-info",children:[n.rows.length," rows, ",n.headers.length," columns"]})]})]})]}),S.jsx("div",{className:"action-section",children:S.jsx("button",{className:"join-btn",onClick:Y,disabled:!t||!n||!x||!C||W,children:W?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"spinner"}),"Joining Data..."]}):S.jsxs(S.Fragment,{children:[S.jsx(Ck,{})," Join Data"]})})}),W&&S.jsxs("div",{className:"loading-animation",children:[S.jsxs("div",{className:"loading-bars",children:[S.jsx("div",{className:"bar"}),S.jsx("div",{className:"bar"}),S.jsx("div",{className:"bar"}),S.jsx("div",{className:"bar"}),S.jsx("div",{className:"bar"})]}),S.jsx("p",{children:"Processing your data..."})]}),O&&!W&&S.jsxs("div",{className:"result-section",children:[S.jsxs("div",{className:"result-header",children:[S.jsx("h3",{children:"Join Result"}),S.jsxs("button",{className:"export-btn",onClick:ie,children:[S.jsx(zD,{})," Export CSV"]})]}),S.jsxs("div",{className:"result-info",children:["Total rows: ",O.length," | Columns: ",Object.keys(O[0]||{}).length]}),S.jsxs("div",{className:"result-preview",children:[S.jsxs("table",{children:[S.jsx("thead",{children:S.jsx("tr",{children:O.length>0&&Object.keys(O[0]).map(me=>S.jsx("th",{children:me},me))})}),S.jsx("tbody",{children:O.slice(0,10).map((me,Ke)=>S.jsx("tr",{children:Object.values(me).map((Re,pe)=>S.jsx("td",{children:String(Re||"")},pe))},Ke))})]}),O.length>10&&S.jsxs("div",{className:"preview-note",children:["Showing first 10 rows of ",O.length]})]})]})]})]})})},Bk={Cisco:"#1ba1e2",Huawei:"#e51400",Arista:"#60a917",Juniper:"#f09609",MikroTik:"#d80073"},rF=()=>{const e=Qv(),t=N.useMemo(()=>new yE,[]),[r,n]=N.useState(!1),[o,l]=N.useState(!1),[h,u]=N.useState(null),[v,x]=N.useState([]),[A,C]=N.useState([]),[P,O]=N.useState([]),[U,W]=N.useState(!1),[G,X]=N.useState(!1),[ae,ne]=N.useState(null),[ue,Q]=N.useState({manufactures:{},regions:{},models:{}}),[de,he]=N.useState(null),Y=N.useMemo(()=>({defaultDrawNodeLabel:OD,defaultDrawNodeHover:ID,defaultNodeType:"circle",defaultEdgeType:"arrow",labelDensity:.07,labelGridCellSize:60,labelRenderedSizeThreshold:15,labelFont:"Lato, sans-serif",zIndex:!0}),[]);N.useEffect(()=>{fetch("./dataset.json").then(_e=>_e.json()).then(_e=>{t.clear();const Me=la.uniq(_e.map(pe=>pe.manufacture)),me=la.uniq(_e.map(pe=>pe.region)),Ke=la.uniq(_e.map(pe=>pe.model));x(Me),C(me),O(Ke),_e.forEach(pe=>{const ge=Bk[pe.manufacture]||"#666666";t.addNode(pe.hostname,{...pe,label:pe.hostname,color:ge,size:Math.max(5,(pe.percentage_used||50)/100*20+3),x:((pe.longitude||0)+180)*2,y:-((pe.latitude||0)+90)*2})});const Re=la.groupBy(_e,"region");Object.values(Re).forEach(pe=>{if(pe.length>1)for(let ge=0;ge<pe.length-1;ge++)for(let ze=ge+1;ze<pe.length;ze++)Math.random()>.7&&t.addEdge(pe[ge].hostname,pe[ze].hostname,{size:1,color:"#cccccc"})}),Q({manufactures:la.mapValues(la.groupBy(Me,pe=>pe),()=>!0),regions:la.mapValues(la.groupBy(me,pe=>pe),()=>!0),models:la.mapValues(la.groupBy(Ke,pe=>pe),()=>!0)}),u(_e),requestAnimationFrame(()=>l(!0))})},[t]);const ie=_e=>{const{nodes:Me,edges:me}=_e;Me.forEach(Pe=>{if(t.hasNode(Pe.hostname)){console.warn(`Node ${Pe.hostname} already exists, skipping...`);return}const st=Bk[Pe.manufacture]||"#666666",Ae=Pe.longitude!==void 0?(Pe.longitude+180)*2:Math.random()*1e3,qe=Pe.latitude!==void 0?-(Pe.latitude+90)*2:Math.random()*1e3;t.addNode(Pe.hostname,{...Pe,label:Pe.hostname,color:st,size:Math.max(5,(Pe.percentage_used||50)/100*20+3),x:Ae,y:qe})}),me&&me.length>0&&me.forEach(Pe=>{if(!t.hasNode(Pe.source)){console.warn(`Source node ${Pe.source} not found, skipping edge...`);return}if(!t.hasNode(Pe.target)){console.warn(`Target node ${Pe.target} not found, skipping edge...`);return}t.hasEdge(Pe.source,Pe.target)||t.addEdge(Pe.source,Pe.target,{size:Pe.size||1,color:Pe.color||"#cccccc",label:Pe.label||""})});const Ke=Sk.inferSettings(t);Sk.assign(t,{iterations:100,settings:{...Ke,gravity:1,scalingRatio:10}});const Re=h?[...h,...Me]:Me;u(Re);const pe=la.uniq(Re.map(Pe=>Pe.manufacture)),ge=la.uniq(Re.map(Pe=>Pe.region)),ze=la.uniq(Re.map(Pe=>Pe.model));x(pe),C(ge),O(ze),Q(Pe=>({manufactures:{...Pe.manufactures,...la.mapValues(la.groupBy(pe.filter(st=>!Pe.manufactures[st]),st=>st),()=>!0)},regions:{...Pe.regions,...la.mapValues(la.groupBy(ge.filter(st=>!Pe.regions[st]),st=>st),()=>!0)},models:{...Pe.models,...la.mapValues(la.groupBy(ze.filter(st=>!Pe.models[st]),st=>st),()=>!0)}}))},Ce=(_e,Me)=>{ne({message:_e,type:Me})};return h?S.jsxs("div",{id:"app-root",className:r?"show-contents":"",children:[S.jsxs(y9,{graph:t,settings:Y,className:"react-sigma",children:[S.jsx(UB,{hoveredNode:de}),S.jsx($B,{setHoveredNode:he}),S.jsx(FB,{filters:ue}),o&&S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"controls",children:[S.jsx("div",{className:"react-sigma-control ico",children:S.jsx("button",{type:"button",className:"show-contents",onClick:()=>n(!0),title:"Show caption and description",children:S.jsx(YN,{})})}),S.jsx("div",{className:"react-sigma-control ico",children:S.jsx("button",{type:"button",className:"maplibre-view",onClick:()=>e("/map"),title:"Switch to MapLibre view",children:S.jsx(Vw,{})})}),S.jsx("div",{className:"react-sigma-control ico",children:S.jsx("button",{type:"button",className:"csv-join-view",onClick:()=>X(!0),title:"CSV Join Tool",children:S.jsx(CB,{})})}),S.jsx("div",{className:"react-sigma-control ico",children:S.jsx("button",{type:"button",className:"add-data",onClick:()=>W(!0),title:"Add dynamic data",children:S.jsx(CD,{})})}),S.jsxs(E9,{className:"ico",children:[S.jsx(QN,{}),S.jsx(eB,{})]}),S.jsxs(b9,{className:"ico",children:[S.jsx(nB,{}),S.jsx(iB,{}),S.jsx(JN,{})]})]}),S.jsxs("div",{className:"contents",children:[S.jsx("div",{className:"ico",children:S.jsx("button",{type:"button",className:"ico hide-contents",onClick:()=>n(!1),title:"Hide caption and description",children:S.jsx(vE,{})})}),S.jsx(VB,{filters:ue}),S.jsxs("div",{className:"panels",children:[S.jsx(YB,{filters:ue}),S.jsx(BB,{}),S.jsx(WB,{manufacturers:v,filters:ue,setManufacturers:_e=>Q(Me=>({...Me,manufactures:_e})),toggleManufacturer:_e=>{Q(Me=>({...Me,manufactures:Me.manufactures[_e]?{...Me.manufactures,[_e]:!1}:{...Me.manufactures,[_e]:!0}}))}}),S.jsx(XB,{regions:A,filters:ue,setRegions:_e=>Q(Me=>({...Me,regions:_e})),toggleRegion:_e=>{Q(Me=>({...Me,regions:Me.regions[_e]?{...Me.regions,[_e]:!1}:{...Me.regions,[_e]:!0}}))}}),S.jsx(ZB,{models:P,filters:ue,setModels:_e=>Q(Me=>({...Me,models:_e})),toggleModel:_e=>{Q(Me=>({...Me,models:Me.models[_e]?{...Me.models,[_e]:!1}:{...Me.models,[_e]:!0}}))}})]})]})]})]}),G&&S.jsx(tF,{onClose:()=>X(!1)}),S.jsx(LB,{isOpen:U,onClose:()=>W(!1),onSubmit:ie,onNotify:Ce}),ae&&S.jsx(jD,{message:ae.message,type:ae.type,onClose:()=>ne(null)})]}):null};var d1={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */var nF=d1.exports,Fk;function iF(){return Fk||(Fk=1,(function(e,t){(function(r,n){e.exports=n()})(nF,(function(){var r={},n={};function o(h,u,v){if(n[h]=v,h==="index"){var x="var sharedModule = {}; ("+n.shared+")(sharedModule); ("+n.worker+")(sharedModule);",A={};return n.shared(A),n.index(r,A),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([x],{type:"text/javascript"}))),r}}o("shared",["exports"],(function(h){function u(c,a,f,m){return new(f||(f=Promise))((function(w,M){function z(q){try{B(m.next(q))}catch(Z){M(Z)}}function I(q){try{B(m.throw(q))}catch(Z){M(Z)}}function B(q){var Z;q.done?w(q.value):(Z=q.value,Z instanceof f?Z:new f((function(J){J(Z)}))).then(z,I)}B((m=m.apply(c,a||[])).next())}))}function v(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}typeof SuppressedError=="function"&&SuppressedError;var x=A;function A(c,a){this.x=c,this.y=a}A.prototype={clone:function(){return new A(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,a){return this.clone()._rotateAround(c,a)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var a=c.x-this.x,f=c.y-this.y;return a*a+f*f},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,a){return Math.atan2(this.x*a-this.y*c,this.x*c+this.y*a)},_matMult:function(c){var a=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=a,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var a=Math.cos(c),f=Math.sin(c),m=f*this.x+a*this.y;return this.x=a*this.x-f*this.y,this.y=m,this},_rotateAround:function(c,a){var f=Math.cos(c),m=Math.sin(c),w=a.y+m*(this.x-a.x)+f*(this.y-a.y);return this.x=a.x+f*(this.x-a.x)-m*(this.y-a.y),this.y=w,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},A.convert=function(c){return c instanceof A?c:Array.isArray(c)?new A(c[0],c[1]):c};var C=v(x),P=O;function O(c,a,f,m){this.cx=3*c,this.bx=3*(f-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(m-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=a,this.p2x=f,this.p2y=m}O.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,a){if(a===void 0&&(a=1e-6),c<0)return 0;if(c>1)return 1;for(var f=c,m=0;m<8;m++){var w=this.sampleCurveX(f)-c;if(Math.abs(w)<a)return f;var M=this.sampleCurveDerivativeX(f);if(Math.abs(M)<1e-6)break;f-=w/M}var z=0,I=1;for(f=c,m=0;m<20&&(w=this.sampleCurveX(f),!(Math.abs(w-c)<a));m++)c>w?z=f:I=f,f=.5*(I-z)+z;return f},solve:function(c,a){return this.sampleCurveY(this.solveCurveX(c,a))}};var U=v(P);let W,G;function X(){return W==null&&(W=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),W}function ae(){if(G==null&&(G=!1,X())){const a=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(a){for(let m=0;m<25;m++){const w=4*m;a.fillStyle=`rgb(${w},${w+1},${w+2})`,a.fillRect(m%5,Math.floor(m/5),1,1)}const f=a.getImageData(0,0,5,5).data;for(let m=0;m<100;m++)if(m%4!=3&&f[m]!==m){G=!0;break}}}return G||!1}function ne(c,a,f,m){const w=new U(c,a,f,m);return M=>w.solve(M)}const ue=ne(.25,.1,.25,1);function Q(c,a,f){return Math.min(f,Math.max(a,c))}function de(c,a,f){const m=f-a,w=((c-a)%m+m)%m+a;return w===a?f:w}function he(c,...a){for(const f of a)for(const m in f)c[m]=f[m];return c}let Y=1;function ie(c,a,f){const m={};for(const w in c)m[w]=a.call(this,c[w],w,c);return m}function Ce(c,a,f){const m={};for(const w in c)a.call(this,c[w],w,c)&&(m[w]=c[w]);return m}function _e(c){return Array.isArray(c)?c.map(_e):typeof c=="object"&&c?ie(c,_e):c}const Me={};function me(c){Me[c]||(typeof console<"u"&&console.warn(c),Me[c]=!0)}function Ke(c,a,f){return(f.y-c.y)*(a.x-c.x)>(a.y-c.y)*(f.x-c.x)}function Re(c){return typeof WorkerGlobalScope<"u"&&c!==void 0&&c instanceof WorkerGlobalScope}let pe=null;function ge(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const ze="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Pe(c,a,f,m,w){return u(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const M=new VideoFrame(c,{timestamp:0});try{const z=M==null?void 0:M.format;if(!z||!z.startsWith("BGR")&&!z.startsWith("RGB"))throw new Error(`Unrecognized format ${z}`);const I=z.startsWith("BGR"),B=new Uint8ClampedArray(m*w*4);if(yield M.copyTo(B,(function(q,Z,J,oe,ce){const xe=4*Math.max(-Z,0),ve=(Math.max(0,J)-J)*oe*4+xe,Oe=4*oe,Be=Math.max(0,Z),dt=Math.max(0,J);return{rect:{x:Be,y:dt,width:Math.min(q.width,Z+oe)-Be,height:Math.min(q.height,J+ce)-dt},layout:[{offset:ve,stride:Oe}]}})(c,a,f,m,w)),I)for(let q=0;q<B.length;q+=4){const Z=B[q];B[q]=B[q+2],B[q+2]=Z}return B}finally{M.close()}}))}let st,Ae;const qe="AbortError";function Ze(){return new Error(qe)}const zt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Tt(c){return zt.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))]}const rr="global-dispatcher";class Xt extends Error{constructor(a,f,m,w){super(`AJAXError: ${f} (${a}): ${m}`),this.status=a,this.statusText=f,this.url=m,this.body=w}}const tr=()=>Re(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,at=function(c,a){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){const m=Tt(c.url);if(m)return m(c,a);if(Re(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,targetMapId:rr},a)}if(!(/^file:/.test(f=c.url)||/^file:/.test(tr())&&!/^\w+:/.test(f))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(m,w){return u(this,void 0,void 0,(function*(){const M=new Request(m.url,{method:m.method||"GET",body:m.body,credentials:m.credentials,headers:m.headers,cache:m.cache,referrer:tr(),signal:w.signal});m.type!=="json"||M.headers.has("Accept")||M.headers.set("Accept","application/json");const z=yield fetch(M);if(!z.ok){const q=yield z.blob();throw new Xt(z.status,z.statusText,m.url,q)}let I;I=m.type==="arrayBuffer"||m.type==="image"?z.arrayBuffer():m.type==="json"?z.json():z.text();const B=yield I;if(w.signal.aborted)throw Ze();return{data:B,cacheControl:z.headers.get("Cache-Control"),expires:z.headers.get("Expires")}}))})(c,a);if(Re(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,mustQueue:!0,targetMapId:rr},a)}var f;return(function(m,w){return new Promise(((M,z)=>{var I;const B=new XMLHttpRequest;B.open(m.method||"GET",m.url,!0),m.type!=="arrayBuffer"&&m.type!=="image"||(B.responseType="arraybuffer");for(const q in m.headers)B.setRequestHeader(q,m.headers[q]);m.type==="json"&&(B.responseType="text",!((I=m.headers)===null||I===void 0)&&I.Accept||B.setRequestHeader("Accept","application/json")),B.withCredentials=m.credentials==="include",B.onerror=()=>{z(new Error(B.statusText))},B.onload=()=>{if(!w.signal.aborted)if((B.status>=200&&B.status<300||B.status===0)&&B.response!==null){let q=B.response;if(m.type==="json")try{q=JSON.parse(B.response)}catch(Z){return void z(Z)}M({data:q,cacheControl:B.getResponseHeader("Cache-Control"),expires:B.getResponseHeader("Expires")})}else{const q=new Blob([B.response],{type:B.getResponseHeader("Content-Type")});z(new Xt(B.status,B.statusText,m.url,q))}},w.signal.addEventListener("abort",(()=>{B.abort(),z(Ze())})),B.send(m.body)}))})(c,a)};function Ht(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;const a=new URL(c),f=window.location;return a.protocol===f.protocol&&a.host===f.host}function Mt(c,a,f){f[c]&&f[c].indexOf(a)!==-1||(f[c]=f[c]||[],f[c].push(a))}function pt(c,a,f){if(f&&f[c]){const m=f[c].indexOf(a);m!==-1&&f[c].splice(m,1)}}class Pr{constructor(a,f={}){he(this,f),this.type=a}}class Lt extends Pr{constructor(a,f={}){super("error",he({error:a},f))}}class Wt{on(a,f){return this._listeners=this._listeners||{},Mt(a,f,this._listeners),this}off(a,f){return pt(a,f,this._listeners),pt(a,f,this._oneTimeListeners),this}once(a,f){return f?(this._oneTimeListeners=this._oneTimeListeners||{},Mt(a,f,this._oneTimeListeners),this):new Promise((m=>this.once(a,m)))}fire(a,f){typeof a=="string"&&(a=new Pr(a,f||{}));const m=a.type;if(this.listens(m)){a.target=this;const w=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(const I of w)I.call(this,a);const M=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(const I of M)pt(m,I,this._oneTimeListeners),I.call(this,a);const z=this._eventedParent;z&&(he(a,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),z.fire(a))}else a instanceof Lt&&console.error(a.error);return this}listens(a){return this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a)}setEventedParent(a,f){return this._eventedParent=a,this._eventedParentData=f,this}}var ke={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Xr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function rn(c,a){const f={};for(const m in c)m!=="ref"&&(f[m]=c[m]);return Xr.forEach((m=>{m in a&&(f[m]=a[m])})),f}function vr(c,a){if(Array.isArray(c)){if(!Array.isArray(a)||c.length!==a.length)return!1;for(let f=0;f<c.length;f++)if(!vr(c[f],a[f]))return!1;return!0}if(typeof c=="object"&&c!==null&&a!==null){if(typeof a!="object"||Object.keys(c).length!==Object.keys(a).length)return!1;for(const f in c)if(!vr(c[f],a[f]))return!1;return!0}return c===a}function Wr(c,a){c.push(a)}function Hn(c,a,f){Wr(f,{command:"addSource",args:[c,a[c]]})}function fi(c,a,f){Wr(a,{command:"removeSource",args:[c]}),f[c]=!0}function ba(c,a,f,m){fi(c,f,m),Hn(c,a,f)}function Rn(c,a,f){let m;for(m in c[f])if(Object.prototype.hasOwnProperty.call(c[f],m)&&m!=="data"&&!vr(c[f][m],a[f][m]))return!1;for(m in a[f])if(Object.prototype.hasOwnProperty.call(a[f],m)&&m!=="data"&&!vr(c[f][m],a[f][m]))return!1;return!0}function ai(c,a,f,m,w,M){c=c||{},a=a||{};for(const z in c)Object.prototype.hasOwnProperty.call(c,z)&&(vr(c[z],a[z])||f.push({command:M,args:[m,z,a[z],w]}));for(const z in a)Object.prototype.hasOwnProperty.call(a,z)&&!Object.prototype.hasOwnProperty.call(c,z)&&(vr(c[z],a[z])||f.push({command:M,args:[m,z,a[z],w]}))}function pi(c){return c.id}function oi(c,a){return c[a.id]=a,c}class Rt{constructor(a,f,m,w){this.message=(a?`${a}: `:"")+m,w&&(this.identifier=w),f!=null&&f.__line__&&(this.line=f.__line__)}}function Fi(c,...a){for(const f of a)for(const m in f)c[m]=f[m];return c}class Fn extends Error{constructor(a,f){super(f),this.message=f,this.key=a}}class Pi{constructor(a,f=[]){this.parent=a,this.bindings={};for(const[m,w]of f)this.bindings[m]=w}concat(a){return new Pi(this,a)}get(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(`${a} not found in scope.`)}has(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)}}const ca={kind:"null"},nr={kind:"number"},kr={kind:"string"},jr={kind:"boolean"},Jn={kind:"color"},Xa={kind:"object"},nn={kind:"value"},Go={kind:"collator"},Uo={kind:"formatted"},Io={kind:"padding"},wo={kind:"resolvedImage"},Ne={kind:"variableAnchorOffsetCollection"};function se(c,a){return{kind:"array",itemType:c,N:a}}function le(c){if(c.kind==="array"){const a=le(c.itemType);return typeof c.N=="number"?`array<${a}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${a}>`}return c.kind}const Ee=[ca,nr,kr,jr,Jn,Uo,Xa,se(nn),Io,wo,Ne];function Ie(c,a){if(a.kind==="error")return null;if(c.kind==="array"){if(a.kind==="array"&&(a.N===0&&a.itemType.kind==="value"||!Ie(c.itemType,a.itemType))&&(typeof c.N!="number"||c.N===a.N))return null}else{if(c.kind===a.kind)return null;if(c.kind==="value"){for(const f of Ee)if(!Ie(f,a))return null}}return`Expected ${le(c)} but found ${le(a)} instead.`}function Ye(c,a){return a.some((f=>f.kind===c.kind))}function tt(c,a){return a.some((f=>f==="null"?c===null:f==="array"?Array.isArray(c):f==="object"?c&&!Array.isArray(c)&&typeof c=="object":f===typeof c))}function ut(c,a){return c.kind==="array"&&a.kind==="array"?c.itemType.kind===a.itemType.kind&&typeof c.N=="number":c.kind===a.kind}const Ue=.96422,At=.82521,Vt=4/29,_t=6/29,lr=3*_t*_t,Lr=_t*_t*_t,$r=Math.PI/180,wn=180/Math.PI;function Ir(c){return(c%=360)<0&&(c+=360),c}function cn([c,a,f,m]){let w,M;const z=ea((.2225045*(c=_n(c))+.7168786*(a=_n(a))+.0606169*(f=_n(f)))/1);c===a&&a===f?w=M=z:(w=ea((.4360747*c+.3850649*a+.1430804*f)/Ue),M=ea((.0139322*c+.0971045*a+.7141733*f)/At));const I=116*z-16;return[I<0?0:I,500*(w-z),200*(z-M),m]}function _n(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function ea(c){return c>Lr?Math.pow(c,1/3):c/lr+Vt}function gi([c,a,f,m]){let w=(c+16)/116,M=isNaN(a)?w:w+a/500,z=isNaN(f)?w:w-f/200;return w=1*si(w),M=Ue*si(M),z=At*si(z),[Sn(3.1338561*M-1.6168667*w-.4906146*z),Sn(-.9787684*M+1.9161415*w+.033454*z),Sn(.0719453*M-.2289914*w+1.4052427*z),m]}function Sn(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function si(c){return c>_t?c*c*c:lr*(c-Vt)}function li(c){return parseInt(c.padEnd(2,c),16)/255}function Ca(c,a){return Hi(a?c/100:c,0,1)}function Hi(c,a,f){return Math.min(Math.max(a,c),f)}function $i(c){return!c.some(Number.isNaN)}const Hs={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Nn{constructor(a,f,m,w=1,M=!0){this.r=a,this.g=f,this.b=m,this.a=w,M||(this.r*=w,this.g*=w,this.b*=w,w||this.overwriteGetter("rgb",[a,f,m,w]))}static parse(a){if(a instanceof Nn)return a;if(typeof a!="string")return;const f=(function(m){if((m=m.toLowerCase().trim())==="transparent")return[0,0,0,0];const w=Hs[m];if(w){const[z,I,B]=w;return[z/255,I/255,B/255,1]}if(m.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(m)){const z=m.length<6?1:2;let I=1;return[li(m.slice(I,I+=z)),li(m.slice(I,I+=z)),li(m.slice(I,I+=z)),li(m.slice(I,I+z)||"ff")]}if(m.startsWith("rgb")){const z=m.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(z){const[I,B,q,Z,J,oe,ce,xe,ve,Oe,Be,dt]=z,Je=[Z||" ",ce||" ",Oe].join("");if(Je==="  "||Je==="  /"||Je===",,"||Je===",,,"){const Qe=[q,oe,ve].join(""),Dt=Qe==="%%%"?100:Qe===""?255:0;if(Dt){const Jt=[Hi(+B/Dt,0,1),Hi(+J/Dt,0,1),Hi(+xe/Dt,0,1),Be?Ca(+Be,dt):1];if($i(Jt))return Jt}}return}}const M=m.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(M){const[z,I,B,q,Z,J,oe,ce,xe]=M,ve=[B||" ",Z||" ",oe].join("");if(ve==="  "||ve==="  /"||ve===",,"||ve===",,,"){const Oe=[+I,Hi(+q,0,100),Hi(+J,0,100),ce?Ca(+ce,xe):1];if($i(Oe))return(function([Be,dt,Je,Qe]){function Dt(Jt){const yr=(Jt+Be/30)%12,Zr=dt*Math.min(Je,1-Je);return Je-Zr*Math.max(-1,Math.min(yr-3,9-yr,1))}return Be=Ir(Be),dt/=100,Je/=100,[Dt(0),Dt(8),Dt(4),Qe]})(Oe)}}})(a);return f?new Nn(...f,!1):void 0}get rgb(){const{r:a,g:f,b:m,a:w}=this,M=w||1/0;return this.overwriteGetter("rgb",[a/M,f/M,m/M,w])}get hcl(){return this.overwriteGetter("hcl",(function(a){const[f,m,w,M]=cn(a),z=Math.sqrt(m*m+w*w);return[Math.round(1e4*z)?Ir(Math.atan2(w,m)*wn):NaN,z,f,M]})(this.rgb))}get lab(){return this.overwriteGetter("lab",cn(this.rgb))}overwriteGetter(a,f){return Object.defineProperty(this,a,{value:f}),f}toString(){const[a,f,m,w]=this.rgb;return`rgba(${[a,f,m].map((M=>Math.round(255*M))).join(",")},${w})`}}Nn.black=new Nn(0,0,0,1),Nn.white=new Nn(1,1,1,1),Nn.transparent=new Nn(0,0,0,0),Nn.red=new Nn(1,0,0,1);class Ta{constructor(a,f,m){this.sensitivity=a?f?"variant":"case":f?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(a,f){return this.collator.compare(a,f)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class dc{constructor(a,f,m,w,M){this.text=a,this.image=f,this.scale=m,this.fontStack=w,this.textColor=M}}class Oo{constructor(a){this.sections=a}static fromString(a){return new Oo([new dc(a,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((a=>a.text.length!==0||a.image&&a.image.name.length!==0))}static factory(a){return a instanceof Oo?a:Oo.fromString(a)}toString(){return this.sections.length===0?"":this.sections.map((a=>a.text)).join("")}}class wa{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof wa)return a;if(typeof a=="number")return new wa([a,a,a,a]);if(Array.isArray(a)&&!(a.length<1||a.length>4)){for(const f of a)if(typeof f!="number")return;switch(a.length){case 1:a=[a[0],a[0],a[0],a[0]];break;case 2:a=[a[0],a[1],a[0],a[1]];break;case 3:a=[a[0],a[1],a[2],a[1]]}return new wa(a)}}toString(){return JSON.stringify(this.values)}}const vl=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class jo{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof jo)return a;if(Array.isArray(a)&&!(a.length<1)&&a.length%2==0){for(let f=0;f<a.length;f+=2){const m=a[f],w=a[f+1];if(typeof m!="string"||!vl.has(m)||!Array.isArray(w)||w.length!==2||typeof w[0]!="number"||typeof w[1]!="number")return}return new jo(a)}}toString(){return JSON.stringify(this.values)}}class So{constructor(a){this.name=a.name,this.available=a.available}toString(){return this.name}static fromString(a){return a?new So({name:a,available:!1}):null}}function Gl(c,a,f,m){return typeof c=="number"&&c>=0&&c<=255&&typeof a=="number"&&a>=0&&a<=255&&typeof f=="number"&&f>=0&&f<=255?m===void 0||typeof m=="number"&&m>=0&&m<=1?null:`Invalid rgba value [${[c,a,f,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof m=="number"?[c,a,f,m]:[c,a,f]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ul(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof Nn||c instanceof Ta||c instanceof Oo||c instanceof wa||c instanceof jo||c instanceof So)return!0;if(Array.isArray(c)){for(const a of c)if(!Ul(a))return!1;return!0}if(typeof c=="object"){for(const a in c)if(!Ul(c[a]))return!1;return!0}return!1}function Zi(c){if(c===null)return ca;if(typeof c=="string")return kr;if(typeof c=="boolean")return jr;if(typeof c=="number")return nr;if(c instanceof Nn)return Jn;if(c instanceof Ta)return Go;if(c instanceof Oo)return Uo;if(c instanceof wa)return Io;if(c instanceof jo)return Ne;if(c instanceof So)return wo;if(Array.isArray(c)){const a=c.length;let f;for(const m of c){const w=Zi(m);if(f){if(f===w)continue;f=nn;break}f=w}return se(f||nn,a)}return Xa}function Zs(c){const a=typeof c;return c===null?"":a==="string"||a==="number"||a==="boolean"?String(c):c instanceof Nn||c instanceof Oo||c instanceof wa||c instanceof jo||c instanceof So?c.toString():JSON.stringify(c)}class da{constructor(a,f){this.type=a,this.value=f}static parse(a,f){if(a.length!==2)return f.error(`'literal' expression requires exactly one argument, but found ${a.length-1} instead.`);if(!Ul(a[1]))return f.error("invalid value");const m=a[1];let w=Zi(m);const M=f.expectedType;return w.kind!=="array"||w.N!==0||!M||M.kind!=="array"||typeof M.N=="number"&&M.N!==0||(w=M),new da(w,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Qn{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}}const Vl={string:kr,number:nr,boolean:jr,object:Xa};class ls{constructor(a,f){this.type=a,this.args=f}static parse(a,f){if(a.length<2)return f.error("Expected at least one argument.");let m,w=1;const M=a[0];if(M==="array"){let I,B;if(a.length>2){const q=a[1];if(typeof q!="string"||!(q in Vl)||q==="object")return f.error('The item type argument of "array" must be one of string, number, boolean',1);I=Vl[q],w++}else I=nn;if(a.length>3){if(a[2]!==null&&(typeof a[2]!="number"||a[2]<0||a[2]!==Math.floor(a[2])))return f.error('The length argument to "array" must be a positive integer literal',2);B=a[2],w++}m=se(I,B)}else{if(!Vl[M])throw new Error(`Types doesn't contain name = ${M}`);m=Vl[M]}const z=[];for(;w<a.length;w++){const I=f.parse(a[w],w,nn);if(!I)return null;z.push(I)}return new ls(m,z)}evaluate(a){for(let f=0;f<this.args.length;f++){const m=this.args[f].evaluate(a);if(!Ie(this.type,Zi(m)))return m;if(f===this.args.length-1)throw new Qn(`Expected value to be of type ${le(this.type)}, but found ${le(Zi(m))} instead.`)}throw new Error}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every((a=>a.outputDefined()))}}const lu={"to-boolean":jr,"to-color":Jn,"to-number":nr,"to-string":kr};class lo{constructor(a,f){this.type=a,this.args=f}static parse(a,f){if(a.length<2)return f.error("Expected at least one argument.");const m=a[0];if(!lu[m])throw new Error(`Can't parse ${m} as it is not part of the known types`);if((m==="to-boolean"||m==="to-string")&&a.length!==2)return f.error("Expected one argument.");const w=lu[m],M=[];for(let z=1;z<a.length;z++){const I=f.parse(a[z],z,nn);if(!I)return null;M.push(I)}return new lo(w,M)}evaluate(a){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(a);case"color":{let f,m;for(const w of this.args){if(f=w.evaluate(a),m=null,f instanceof Nn)return f;if(typeof f=="string"){const M=a.parseColor(f);if(M)return M}else if(Array.isArray(f)&&(m=f.length<3||f.length>4?`Invalid rbga value ${JSON.stringify(f)}: expected an array containing either three or four numeric values.`:Gl(f[0],f[1],f[2],f[3]),!m))return new Nn(f[0]/255,f[1]/255,f[2]/255,f[3])}throw new Qn(m||`Could not parse color from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"padding":{let f;for(const m of this.args){f=m.evaluate(a);const w=wa.parse(f);if(w)return w}throw new Qn(`Could not parse padding from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"variableAnchorOffsetCollection":{let f;for(const m of this.args){f=m.evaluate(a);const w=jo.parse(f);if(w)return w}throw new Qn(`Could not parse variableAnchorOffsetCollection from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"number":{let f=null;for(const m of this.args){if(f=m.evaluate(a),f===null)return 0;const w=Number(f);if(!isNaN(w))return w}throw new Qn(`Could not convert ${JSON.stringify(f)} to number.`)}case"formatted":return Oo.fromString(Zs(this.args[0].evaluate(a)));case"resolvedImage":return So.fromString(Zs(this.args[0].evaluate(a)));default:return Zs(this.args[0].evaluate(a))}}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every((a=>a.outputDefined()))}}const hc=["Unknown","Point","LineString","Polygon"];class Kc{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?hc[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(a){let f=this._parseColorCache[a];return f||(f=this._parseColorCache[a]=Nn.parse(a)),f}}class La{constructor(a,f,m=[],w,M=new Pi,z=[]){this.registry=a,this.path=m,this.key=m.map((I=>`[${I}]`)).join(""),this.scope=M,this.errors=z,this.expectedType=w,this._isConstant=f}parse(a,f,m,w,M={}){return f?this.concat(f,m,w)._parse(a,M):this._parse(a,M)}_parse(a,f){function m(w,M,z){return z==="assert"?new ls(M,[w]):z==="coerce"?new lo(M,[w]):w}if(a!==null&&typeof a!="string"&&typeof a!="boolean"&&typeof a!="number"||(a=["literal",a]),Array.isArray(a)){if(a.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const w=a[0];if(typeof w!="string")return this.error(`Expression name must be a string, but found ${typeof w} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const M=this.registry[w];if(M){let z=M.parse(a,this);if(!z)return null;if(this.expectedType){const I=this.expectedType,B=z.type;if(I.kind!=="string"&&I.kind!=="number"&&I.kind!=="boolean"&&I.kind!=="object"&&I.kind!=="array"||B.kind!=="value")if(I.kind!=="color"&&I.kind!=="formatted"&&I.kind!=="resolvedImage"||B.kind!=="value"&&B.kind!=="string")if(I.kind!=="padding"||B.kind!=="value"&&B.kind!=="number"&&B.kind!=="array")if(I.kind!=="variableAnchorOffsetCollection"||B.kind!=="value"&&B.kind!=="array"){if(this.checkSubtype(I,B))return null}else z=m(z,I,f.typeAnnotation||"coerce");else z=m(z,I,f.typeAnnotation||"coerce");else z=m(z,I,f.typeAnnotation||"coerce");else z=m(z,I,f.typeAnnotation||"assert")}if(!(z instanceof da)&&z.type.kind!=="resolvedImage"&&this._isConstant(z)){const I=new Kc;try{z=new da(z.type,z.evaluate(I))}catch(B){return this.error(B.message),null}}return z}return this.error(`Unknown expression "${w}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(a===void 0?"'undefined' value invalid. Use null instead.":typeof a=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof a} instead.`)}concat(a,f,m){const w=typeof a=="number"?this.path.concat(a):this.path,M=m?this.scope.concat(m):this.scope;return new La(this.registry,this._isConstant,w,f||null,M,this.errors)}error(a,...f){const m=`${this.key}${f.map((w=>`[${w}]`)).join("")}`;this.errors.push(new Fn(m,a))}checkSubtype(a,f){const m=Ie(a,f);return m&&this.error(m),m}}class Vo{constructor(a,f){this.type=f.type,this.bindings=[].concat(a),this.result=f}evaluate(a){return this.result.evaluate(a)}eachChild(a){for(const f of this.bindings)a(f[1]);a(this.result)}static parse(a,f){if(a.length<4)return f.error(`Expected at least 3 arguments, but found ${a.length-1} instead.`);const m=[];for(let M=1;M<a.length-1;M+=2){const z=a[M];if(typeof z!="string")return f.error(`Expected string, but found ${typeof z} instead.`,M);if(/[^a-zA-Z0-9_]/.test(z))return f.error("Variable names must contain only alphanumeric characters or '_'.",M);const I=f.parse(a[M+1],M+1);if(!I)return null;m.push([z,I])}const w=f.parse(a[a.length-1],a.length-1,f.expectedType,m);return w?new Vo(m,w):null}outputDefined(){return this.result.outputDefined()}}class Zn{constructor(a,f){this.type=f.type,this.name=a,this.boundExpression=f}static parse(a,f){if(a.length!==2||typeof a[1]!="string")return f.error("'var' expression requires exactly one string literal argument.");const m=a[1];return f.scope.has(m)?new Zn(m,f.scope.get(m)):f.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(a){return this.boundExpression.evaluate(a)}eachChild(){}outputDefined(){return!1}}class fc{constructor(a,f,m){this.type=a,this.index=f,this.input=m}static parse(a,f){if(a.length!==3)return f.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const m=f.parse(a[1],1,nr),w=f.parse(a[2],2,se(f.expectedType||nn));return m&&w?new fc(w.type.itemType,m,w):null}evaluate(a){const f=this.index.evaluate(a),m=this.input.evaluate(a);if(f<0)throw new Qn(`Array index out of bounds: ${f} < 0.`);if(f>=m.length)throw new Qn(`Array index out of bounds: ${f} > ${m.length-1}.`);if(f!==Math.floor(f))throw new Qn(`Array index must be an integer, but found ${f} instead.`);return m[f]}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}}class qo{constructor(a,f){this.type=jr,this.needle=a,this.haystack=f}static parse(a,f){if(a.length!==3)return f.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const m=f.parse(a[1],1,nn),w=f.parse(a[2],2,nn);return m&&w?Ye(m.type,[jr,kr,nr,ca,nn])?new qo(m,w):f.error(`Expected first argument to be of type boolean, string, number or null, but found ${le(m.type)} instead`):null}evaluate(a){const f=this.needle.evaluate(a),m=this.haystack.evaluate(a);if(!m)return!1;if(!tt(f,["boolean","string","number","null"]))throw new Qn(`Expected first argument to be of type boolean, string, number or null, but found ${le(Zi(f))} instead.`);if(!tt(m,["string","array"]))throw new Qn(`Expected second argument to be of type array or string, but found ${le(Zi(m))} instead.`);return m.indexOf(f)>=0}eachChild(a){a(this.needle),a(this.haystack)}outputDefined(){return!0}}class xl{constructor(a,f,m){this.type=nr,this.needle=a,this.haystack=f,this.fromIndex=m}static parse(a,f){if(a.length<=2||a.length>=5)return f.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const m=f.parse(a[1],1,nn),w=f.parse(a[2],2,nn);if(!m||!w)return null;if(!Ye(m.type,[jr,kr,nr,ca,nn]))return f.error(`Expected first argument to be of type boolean, string, number or null, but found ${le(m.type)} instead`);if(a.length===4){const M=f.parse(a[3],3,nr);return M?new xl(m,w,M):null}return new xl(m,w)}evaluate(a){const f=this.needle.evaluate(a),m=this.haystack.evaluate(a);if(!tt(f,["boolean","string","number","null"]))throw new Qn(`Expected first argument to be of type boolean, string, number or null, but found ${le(Zi(f))} instead.`);let w;if(this.fromIndex&&(w=this.fromIndex.evaluate(a)),tt(m,["string"])){const M=m.indexOf(f,w);return M===-1?-1:[...m.slice(0,M)].length}if(tt(m,["array"]))return m.indexOf(f,w);throw new Qn(`Expected second argument to be of type array or string, but found ${le(Zi(m))} instead.`)}eachChild(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)}outputDefined(){return!1}}class vt{constructor(a,f,m,w,M,z){this.inputType=a,this.type=f,this.input=m,this.cases=w,this.outputs=M,this.otherwise=z}static parse(a,f){if(a.length<5)return f.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length%2!=1)return f.error("Expected an even number of arguments.");let m,w;f.expectedType&&f.expectedType.kind!=="value"&&(w=f.expectedType);const M={},z=[];for(let q=2;q<a.length-1;q+=2){let Z=a[q];const J=a[q+1];Array.isArray(Z)||(Z=[Z]);const oe=f.concat(q);if(Z.length===0)return oe.error("Expected at least one branch label.");for(const xe of Z){if(typeof xe!="number"&&typeof xe!="string")return oe.error("Branch labels must be numbers or strings.");if(typeof xe=="number"&&Math.abs(xe)>Number.MAX_SAFE_INTEGER)return oe.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof xe=="number"&&Math.floor(xe)!==xe)return oe.error("Numeric branch labels must be integer values.");if(m){if(oe.checkSubtype(m,Zi(xe)))return null}else m=Zi(xe);if(M[String(xe)]!==void 0)return oe.error("Branch labels must be unique.");M[String(xe)]=z.length}const ce=f.parse(J,q,w);if(!ce)return null;w=w||ce.type,z.push(ce)}const I=f.parse(a[1],1,nn);if(!I)return null;const B=f.parse(a[a.length-1],a.length-1,w);return B?I.type.kind!=="value"&&f.concat(1).checkSubtype(m,I.type)?null:new vt(m,w,I,M,z,B):null}evaluate(a){const f=this.input.evaluate(a);return(Zi(f)===this.inputType&&this.outputs[this.cases[f]]||this.otherwise).evaluate(a)}eachChild(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)}outputDefined(){return this.outputs.every((a=>a.outputDefined()))&&this.otherwise.outputDefined()}}class Ge{constructor(a,f,m){this.type=a,this.branches=f,this.otherwise=m}static parse(a,f){if(a.length<4)return f.error(`Expected at least 3 arguments, but found only ${a.length-1}.`);if(a.length%2!=0)return f.error("Expected an odd number of arguments.");let m;f.expectedType&&f.expectedType.kind!=="value"&&(m=f.expectedType);const w=[];for(let z=1;z<a.length-1;z+=2){const I=f.parse(a[z],z,jr);if(!I)return null;const B=f.parse(a[z+1],z+1,m);if(!B)return null;w.push([I,B]),m=m||B.type}const M=f.parse(a[a.length-1],a.length-1,m);if(!M)return null;if(!m)throw new Error("Can't infer output type");return new Ge(m,w,M)}evaluate(a){for(const[f,m]of this.branches)if(f.evaluate(a))return m.evaluate(a);return this.otherwise.evaluate(a)}eachChild(a){for(const[f,m]of this.branches)a(f),a(m);a(this.otherwise)}outputDefined(){return this.branches.every((([a,f])=>f.outputDefined()))&&this.otherwise.outputDefined()}}class ot{constructor(a,f,m,w){this.type=a,this.input=f,this.beginIndex=m,this.endIndex=w}static parse(a,f){if(a.length<=2||a.length>=5)return f.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const m=f.parse(a[1],1,nn),w=f.parse(a[2],2,nr);if(!m||!w)return null;if(!Ye(m.type,[se(nn),kr,nn]))return f.error(`Expected first argument to be of type array or string, but found ${le(m.type)} instead`);if(a.length===4){const M=f.parse(a[3],3,nr);return M?new ot(m.type,m,w,M):null}return new ot(m.type,m,w)}evaluate(a){const f=this.input.evaluate(a),m=this.beginIndex.evaluate(a);let w;if(this.endIndex&&(w=this.endIndex.evaluate(a)),tt(f,["string"]))return[...f].slice(m,w).join("");if(tt(f,["array"]))return f.slice(m,w);throw new Qn(`Expected first argument to be of type array or string, but found ${le(Zi(f))} instead.`)}eachChild(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)}outputDefined(){return!1}}function ht(c,a){const f=c.length-1;let m,w,M=0,z=f,I=0;for(;M<=z;)if(I=Math.floor((M+z)/2),m=c[I],w=c[I+1],m<=a){if(I===f||a<w)return I;M=I+1}else{if(!(m>a))throw new Qn("Input is not a number.");z=I-1}return 0}class $t{constructor(a,f,m){this.type=a,this.input=f,this.labels=[],this.outputs=[];for(const[w,M]of m)this.labels.push(w),this.outputs.push(M)}static parse(a,f){if(a.length-1<4)return f.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return f.error("Expected an even number of arguments.");const m=f.parse(a[1],1,nr);if(!m)return null;const w=[];let M=null;f.expectedType&&f.expectedType.kind!=="value"&&(M=f.expectedType);for(let z=1;z<a.length;z+=2){const I=z===1?-1/0:a[z],B=a[z+1],q=z,Z=z+1;if(typeof I!="number")return f.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',q);if(w.length&&w[w.length-1][0]>=I)return f.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',q);const J=f.parse(B,Z,M);if(!J)return null;M=M||J.type,w.push([I,J])}return new $t(M,m,w)}evaluate(a){const f=this.labels,m=this.outputs;if(f.length===1)return m[0].evaluate(a);const w=this.input.evaluate(a);if(w<=f[0])return m[0].evaluate(a);const M=f.length;return w>=f[M-1]?m[M-1].evaluate(a):m[ht(f,w)].evaluate(a)}eachChild(a){a(this.input);for(const f of this.outputs)a(f)}outputDefined(){return this.outputs.every((a=>a.outputDefined()))}}function Gr(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var wt=jt;function jt(c,a,f,m){this.cx=3*c,this.bx=3*(f-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(m-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=a,this.p2x=f,this.p2y=m}jt.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,a){if(a===void 0&&(a=1e-6),c<0)return 0;if(c>1)return 1;for(var f=c,m=0;m<8;m++){var w=this.sampleCurveX(f)-c;if(Math.abs(w)<a)return f;var M=this.sampleCurveDerivativeX(f);if(Math.abs(M)<1e-6)break;f-=w/M}var z=0,I=1;for(f=c,m=0;m<20&&(w=this.sampleCurveX(f),!(Math.abs(w-c)<a));m++)c>w?z=f:I=f,f=.5*(I-z)+z;return f},solve:function(c,a){return this.sampleCurveY(this.solveCurveX(c,a))}};var xt=Gr(wt);function Nt(c,a,f){return c+f*(a-c)}function Yr(c,a,f){return c.map(((m,w)=>Nt(m,a[w],f)))}const Tr={number:Nt,color:function(c,a,f,m="rgb"){switch(m){case"rgb":{const[w,M,z,I]=Yr(c.rgb,a.rgb,f);return new Nn(w,M,z,I,!1)}case"hcl":{const[w,M,z,I]=c.hcl,[B,q,Z,J]=a.hcl;let oe,ce;if(isNaN(w)||isNaN(B))isNaN(w)?isNaN(B)?oe=NaN:(oe=B,z!==1&&z!==0||(ce=q)):(oe=w,Z!==1&&Z!==0||(ce=M));else{let dt=B-w;B>w&&dt>180?dt-=360:B<w&&w-B>180&&(dt+=360),oe=w+f*dt}const[xe,ve,Oe,Be]=(function([dt,Je,Qe,Dt]){return dt=isNaN(dt)?0:dt*$r,gi([Qe,Math.cos(dt)*Je,Math.sin(dt)*Je,Dt])})([oe,ce??Nt(M,q,f),Nt(z,Z,f),Nt(I,J,f)]);return new Nn(xe,ve,Oe,Be,!1)}case"lab":{const[w,M,z,I]=gi(Yr(c.lab,a.lab,f));return new Nn(w,M,z,I,!1)}}},array:Yr,padding:function(c,a,f){return new wa(Yr(c.values,a.values,f))},variableAnchorOffsetCollection:function(c,a,f){const m=c.values,w=a.values;if(m.length!==w.length)throw new Qn(`Cannot interpolate values of different length. from: ${c.toString()}, to: ${a.toString()}`);const M=[];for(let z=0;z<m.length;z+=2){if(m[z]!==w[z])throw new Qn(`Cannot interpolate values containing mismatched anchors. from[${z}]: ${m[z]}, to[${z}]: ${w[z]}`);M.push(m[z]);const[I,B]=m[z+1],[q,Z]=w[z+1];M.push([Nt(I,q,f),Nt(B,Z,f)])}return new jo(M)}};class Gt{constructor(a,f,m,w,M){this.type=a,this.operator=f,this.interpolation=m,this.input=w,this.labels=[],this.outputs=[];for(const[z,I]of M)this.labels.push(z),this.outputs.push(I)}static interpolationFactor(a,f,m,w){let M=0;if(a.name==="exponential")M=gn(f,a.base,m,w);else if(a.name==="linear")M=gn(f,1,m,w);else if(a.name==="cubic-bezier"){const z=a.controlPoints;M=new xt(z[0],z[1],z[2],z[3]).solve(gn(f,1,m,w))}return M}static parse(a,f){let[m,w,M,...z]=a;if(!Array.isArray(w)||w.length===0)return f.error("Expected an interpolation type expression.",1);if(w[0]==="linear")w={name:"linear"};else if(w[0]==="exponential"){const q=w[1];if(typeof q!="number")return f.error("Exponential interpolation requires a numeric base.",1,1);w={name:"exponential",base:q}}else{if(w[0]!=="cubic-bezier")return f.error(`Unknown interpolation type ${String(w[0])}`,1,0);{const q=w.slice(1);if(q.length!==4||q.some((Z=>typeof Z!="number"||Z<0||Z>1)))return f.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);w={name:"cubic-bezier",controlPoints:q}}}if(a.length-1<4)return f.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return f.error("Expected an even number of arguments.");if(M=f.parse(M,2,nr),!M)return null;const I=[];let B=null;m==="interpolate-hcl"||m==="interpolate-lab"?B=Jn:f.expectedType&&f.expectedType.kind!=="value"&&(B=f.expectedType);for(let q=0;q<z.length;q+=2){const Z=z[q],J=z[q+1],oe=q+3,ce=q+4;if(typeof Z!="number")return f.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',oe);if(I.length&&I[I.length-1][0]>=Z)return f.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',oe);const xe=f.parse(J,ce,B);if(!xe)return null;B=B||xe.type,I.push([Z,xe])}return ut(B,nr)||ut(B,Jn)||ut(B,Io)||ut(B,Ne)||ut(B,se(nr))?new Gt(B,m,w,M,I):f.error(`Type ${le(B)} is not interpolatable.`)}evaluate(a){const f=this.labels,m=this.outputs;if(f.length===1)return m[0].evaluate(a);const w=this.input.evaluate(a);if(w<=f[0])return m[0].evaluate(a);const M=f.length;if(w>=f[M-1])return m[M-1].evaluate(a);const z=ht(f,w),I=Gt.interpolationFactor(this.interpolation,w,f[z],f[z+1]),B=m[z].evaluate(a),q=m[z+1].evaluate(a);switch(this.operator){case"interpolate":return Tr[this.type.kind](B,q,I);case"interpolate-hcl":return Tr.color(B,q,I,"hcl");case"interpolate-lab":return Tr.color(B,q,I,"lab")}}eachChild(a){a(this.input);for(const f of this.outputs)a(f)}outputDefined(){return this.outputs.every((a=>a.outputDefined()))}}function gn(c,a,f,m){const w=m-f,M=c-f;return w===0?0:a===1?M/w:(Math.pow(a,M)-1)/(Math.pow(a,w)-1)}class He{constructor(a,f){this.type=a,this.args=f}static parse(a,f){if(a.length<2)return f.error("Expectected at least one argument.");let m=null;const w=f.expectedType;w&&w.kind!=="value"&&(m=w);const M=[];for(const I of a.slice(1)){const B=f.parse(I,1+M.length,m,void 0,{typeAnnotation:"omit"});if(!B)return null;m=m||B.type,M.push(B)}if(!m)throw new Error("No output type");const z=w&&M.some((I=>Ie(w,I.type)));return new He(z?nn:m,M)}evaluate(a){let f,m=null,w=0;for(const M of this.args)if(w++,m=M.evaluate(a),m&&m instanceof So&&!m.available&&(f||(f=m.name),m=null,w===this.args.length&&(m=f)),m!==null)break;return m}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every((a=>a.outputDefined()))}}function bt(c,a){return c==="=="||c==="!="?a.kind==="boolean"||a.kind==="string"||a.kind==="number"||a.kind==="null"||a.kind==="value":a.kind==="string"||a.kind==="number"||a.kind==="value"}function ct(c,a,f,m){return m.compare(a,f)===0}function yt(c,a,f){const m=c!=="=="&&c!=="!=";return class RD{constructor(M,z,I){this.type=jr,this.lhs=M,this.rhs=z,this.collator=I,this.hasUntypedArgument=M.type.kind==="value"||z.type.kind==="value"}static parse(M,z){if(M.length!==3&&M.length!==4)return z.error("Expected two or three arguments.");const I=M[0];let B=z.parse(M[1],1,nn);if(!B)return null;if(!bt(I,B.type))return z.concat(1).error(`"${I}" comparisons are not supported for type '${le(B.type)}'.`);let q=z.parse(M[2],2,nn);if(!q)return null;if(!bt(I,q.type))return z.concat(2).error(`"${I}" comparisons are not supported for type '${le(q.type)}'.`);if(B.type.kind!==q.type.kind&&B.type.kind!=="value"&&q.type.kind!=="value")return z.error(`Cannot compare types '${le(B.type)}' and '${le(q.type)}'.`);m&&(B.type.kind==="value"&&q.type.kind!=="value"?B=new ls(q.type,[B]):B.type.kind!=="value"&&q.type.kind==="value"&&(q=new ls(B.type,[q])));let Z=null;if(M.length===4){if(B.type.kind!=="string"&&q.type.kind!=="string"&&B.type.kind!=="value"&&q.type.kind!=="value")return z.error("Cannot use collator to compare non-string types.");if(Z=z.parse(M[3],3,Go),!Z)return null}return new RD(B,q,Z)}evaluate(M){const z=this.lhs.evaluate(M),I=this.rhs.evaluate(M);if(m&&this.hasUntypedArgument){const B=Zi(z),q=Zi(I);if(B.kind!==q.kind||B.kind!=="string"&&B.kind!=="number")throw new Qn(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${B.kind}, ${q.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){const B=Zi(z),q=Zi(I);if(B.kind!=="string"||q.kind!=="string")return a(M,z,I)}return this.collator?f(M,z,I,this.collator.evaluate(M)):a(M,z,I)}eachChild(M){M(this.lhs),M(this.rhs),this.collator&&M(this.collator)}outputDefined(){return!0}}}const Or=yt("==",(function(c,a,f){return a===f}),ct),Nr=yt("!=",(function(c,a,f){return a!==f}),(function(c,a,f,m){return!ct(0,a,f,m)})),gr=yt("<",(function(c,a,f){return a<f}),(function(c,a,f,m){return m.compare(a,f)<0})),mn=yt(">",(function(c,a,f){return a>f}),(function(c,a,f,m){return m.compare(a,f)>0})),Xn=yt("<=",(function(c,a,f){return a<=f}),(function(c,a,f,m){return m.compare(a,f)<=0})),qt=yt(">=",(function(c,a,f){return a>=f}),(function(c,a,f,m){return m.compare(a,f)>=0}));class Br{constructor(a,f,m){this.type=Go,this.locale=m,this.caseSensitive=a,this.diacriticSensitive=f}static parse(a,f){if(a.length!==2)return f.error("Expected one argument.");const m=a[1];if(typeof m!="object"||Array.isArray(m))return f.error("Collator options argument must be an object.");const w=f.parse(m["case-sensitive"]!==void 0&&m["case-sensitive"],1,jr);if(!w)return null;const M=f.parse(m["diacritic-sensitive"]!==void 0&&m["diacritic-sensitive"],1,jr);if(!M)return null;let z=null;return m.locale&&(z=f.parse(m.locale,1,kr),!z)?null:new Br(w,M,z)}evaluate(a){return new Ta(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)}eachChild(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)}outputDefined(){return!1}}class Ai{constructor(a,f,m,w,M){this.type=kr,this.number=a,this.locale=f,this.currency=m,this.minFractionDigits=w,this.maxFractionDigits=M}static parse(a,f){if(a.length!==3)return f.error("Expected two arguments.");const m=f.parse(a[1],1,nr);if(!m)return null;const w=a[2];if(typeof w!="object"||Array.isArray(w))return f.error("NumberFormat options argument must be an object.");let M=null;if(w.locale&&(M=f.parse(w.locale,1,kr),!M))return null;let z=null;if(w.currency&&(z=f.parse(w.currency,1,kr),!z))return null;let I=null;if(w["min-fraction-digits"]&&(I=f.parse(w["min-fraction-digits"],1,nr),!I))return null;let B=null;return w["max-fraction-digits"]&&(B=f.parse(w["max-fraction-digits"],1,nr),!B)?null:new Ai(m,M,z,I,B)}evaluate(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))}eachChild(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)}outputDefined(){return!1}}class Sa{constructor(a){this.type=Uo,this.sections=a}static parse(a,f){if(a.length<2)return f.error("Expected at least one argument.");const m=a[1];if(!Array.isArray(m)&&typeof m=="object")return f.error("First argument must be an image or text section.");const w=[];let M=!1;for(let z=1;z<=a.length-1;++z){const I=a[z];if(M&&typeof I=="object"&&!Array.isArray(I)){M=!1;let B=null;if(I["font-scale"]&&(B=f.parse(I["font-scale"],1,nr),!B))return null;let q=null;if(I["text-font"]&&(q=f.parse(I["text-font"],1,se(kr)),!q))return null;let Z=null;if(I["text-color"]&&(Z=f.parse(I["text-color"],1,Jn),!Z))return null;const J=w[w.length-1];J.scale=B,J.font=q,J.textColor=Z}else{const B=f.parse(a[z],1,nn);if(!B)return null;const q=B.type.kind;if(q!=="string"&&q!=="value"&&q!=="null"&&q!=="resolvedImage")return f.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");M=!0,w.push({content:B,scale:null,font:null,textColor:null})}}return new Sa(w)}evaluate(a){return new Oo(this.sections.map((f=>{const m=f.content.evaluate(a);return Zi(m)===wo?new dc("",m,null,null,null):new dc(Zs(m),null,f.scale?f.scale.evaluate(a):null,f.font?f.font.evaluate(a).join(","):null,f.textColor?f.textColor.evaluate(a):null)})))}eachChild(a){for(const f of this.sections)a(f.content),f.scale&&a(f.scale),f.font&&a(f.font),f.textColor&&a(f.textColor)}outputDefined(){return!1}}class Wo{constructor(a){this.type=wo,this.input=a}static parse(a,f){if(a.length!==2)return f.error("Expected two arguments.");const m=f.parse(a[1],1,kr);return m?new Wo(m):f.error("No image name provided.")}evaluate(a){const f=this.input.evaluate(a),m=So.fromString(f);return m&&a.availableImages&&(m.available=a.availableImages.indexOf(f)>-1),m}eachChild(a){a(this.input)}outputDefined(){return!1}}class bi{constructor(a){this.type=nr,this.input=a}static parse(a,f){if(a.length!==2)return f.error(`Expected 1 argument, but found ${a.length-1} instead.`);const m=f.parse(a[1],1);return m?m.type.kind!=="array"&&m.type.kind!=="string"&&m.type.kind!=="value"?f.error(`Expected argument of type string or array, but found ${le(m.type)} instead.`):new bi(m):null}evaluate(a){const f=this.input.evaluate(a);if(typeof f=="string")return[...f].length;if(Array.isArray(f))return f.length;throw new Qn(`Expected value to be of type string or array, but found ${le(Zi(f))} instead.`)}eachChild(a){a(this.input)}outputDefined(){return!1}}const wi=8192;function Ho(c,a){const f=(180+c[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,w=Math.pow(2,a.z);return[Math.round(f*w*wi),Math.round(m*w*wi)]}function Ki(c,a){const f=Math.pow(2,a.z);return[(w=(c[0]/wi+a.x)/f,360*w-180),(m=(c[1]/wi+a.y)/f,360/Math.PI*Math.atan(Math.exp((180-360*m)*Math.PI/180))-90)];var m,w}function uo(c,a){c[0]=Math.min(c[0],a[0]),c[1]=Math.min(c[1],a[1]),c[2]=Math.max(c[2],a[0]),c[3]=Math.max(c[3],a[1])}function $n(c,a){return!(c[0]<=a[0]||c[2]>=a[2]||c[1]<=a[1]||c[3]>=a[3])}function Dn(c,a,f){const m=c[0]-a[0],w=c[1]-a[1],M=c[0]-f[0],z=c[1]-f[1];return m*z-M*w==0&&m*M<=0&&w*z<=0}function Ro(c,a,f,m){return(w=[m[0]-f[0],m[1]-f[1]])[0]*(M=[a[0]-c[0],a[1]-c[1]])[1]-w[1]*M[0]!=0&&!(!Gd(c,a,f,m)||!Gd(f,m,c,a));var w,M}function ks(c,a,f){for(const m of f)for(let w=0;w<m.length-1;++w)if(Ro(c,a,m[w],m[w+1]))return!0;return!1}function _l(c,a,f=!1){let m=!1;for(const I of a)for(let B=0;B<I.length-1;B++){if(Dn(c,I[B],I[B+1]))return f;(M=I[B])[1]>(w=c)[1]!=(z=I[B+1])[1]>w[1]&&w[0]<(z[0]-M[0])*(w[1]-M[1])/(z[1]-M[1])+M[0]&&(m=!m)}var w,M,z;return m}function Ks(c,a){for(const f of a)if(_l(c,f))return!0;return!1}function jf(c,a){for(const f of c)if(!_l(f,a))return!1;for(let f=0;f<c.length-1;++f)if(ks(c[f],c[f+1],a))return!1;return!0}function og(c,a){for(const f of a)if(jf(c,f))return!0;return!1}function Gd(c,a,f,m){const w=m[0]-f[0],M=m[1]-f[1],z=(c[0]-f[0])*M-w*(c[1]-f[1]),I=(a[0]-f[0])*M-w*(a[1]-f[1]);return z>0&&I<0||z<0&&I>0}function zh(c,a,f){const m=[];for(let w=0;w<c.length;w++){const M=[];for(let z=0;z<c[w].length;z++){const I=Ho(c[w][z],f);uo(a,I),M.push(I)}m.push(M)}return m}function Rf(c,a,f){const m=[];for(let w=0;w<c.length;w++){const M=zh(c[w],a,f);m.push(M)}return m}function Nf(c,a,f,m){if(c[0]<f[0]||c[0]>f[2]){const w=.5*m;let M=c[0]-f[0]>w?-m:f[0]-c[0]>w?m:0;M===0&&(M=c[0]-f[2]>w?-m:f[2]-c[0]>w?m:0),c[0]+=M}uo(a,c)}function us(c,a,f,m){const w=Math.pow(2,m.z)*wi,M=[m.x*wi,m.y*wi],z=[];for(const I of c)for(const B of I){const q=[B.x+M[0],B.y+M[1]];Nf(q,a,f,w),z.push(q)}return z}function sg(c,a,f,m){const w=Math.pow(2,m.z)*wi,M=[m.x*wi,m.y*wi],z=[];for(const B of c){const q=[];for(const Z of B){const J=[Z.x+M[0],Z.y+M[1]];uo(a,J),q.push(J)}z.push(q)}if(a[2]-a[0]<=w/2){(I=a)[0]=I[1]=1/0,I[2]=I[3]=-1/0;for(const B of z)for(const q of B)Nf(q,a,f,w)}var I;return z}class Ya{constructor(a,f){this.type=jr,this.geojson=a,this.geometries=f}static parse(a,f){if(a.length!==2)return f.error(`'within' expression requires exactly one argument, but found ${a.length-1} instead.`);if(Ul(a[1])){const m=a[1];if(m.type==="FeatureCollection"){const w=[];for(const M of m.features){const{type:z,coordinates:I}=M.geometry;z==="Polygon"&&w.push(I),z==="MultiPolygon"&&w.push(...I)}if(w.length)return new Ya(m,{type:"MultiPolygon",coordinates:w})}else if(m.type==="Feature"){const w=m.geometry.type;if(w==="Polygon"||w==="MultiPolygon")return new Ya(m,m.geometry)}else if(m.type==="Polygon"||m.type==="MultiPolygon")return new Ya(m,m)}return f.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return(function(f,m){const w=[1/0,1/0,-1/0,-1/0],M=[1/0,1/0,-1/0,-1/0],z=f.canonicalID();if(m.type==="Polygon"){const I=zh(m.coordinates,M,z),B=us(f.geometry(),w,M,z);if(!$n(w,M))return!1;for(const q of B)if(!_l(q,I))return!1}if(m.type==="MultiPolygon"){const I=Rf(m.coordinates,M,z),B=us(f.geometry(),w,M,z);if(!$n(w,M))return!1;for(const q of B)if(!Ks(q,I))return!1}return!0})(a,this.geometries);if(a.geometryType()==="LineString")return(function(f,m){const w=[1/0,1/0,-1/0,-1/0],M=[1/0,1/0,-1/0,-1/0],z=f.canonicalID();if(m.type==="Polygon"){const I=zh(m.coordinates,M,z),B=sg(f.geometry(),w,M,z);if(!$n(w,M))return!1;for(const q of B)if(!jf(q,I))return!1}if(m.type==="MultiPolygon"){const I=Rf(m.coordinates,M,z),B=sg(f.geometry(),w,M,z);if(!$n(w,M))return!1;for(const q of B)if(!og(q,I))return!1}return!0})(a,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let lg=class{constructor(c=[],a=((f,m)=>f<m?-1:f>m?1:0)){if(this.data=c,this.length=this.data.length,this.compare=a,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(c){this.data.push(c),this._up(this.length++)}pop(){if(this.length===0)return;const c=this.data[0],a=this.data.pop();return--this.length>0&&(this.data[0]=a,this._down(0)),c}peek(){return this.data[0]}_up(c){const{data:a,compare:f}=this,m=a[c];for(;c>0;){const w=c-1>>1,M=a[w];if(f(m,M)>=0)break;a[c]=M,c=w}a[c]=m}_down(c){const{data:a,compare:f}=this,m=this.length>>1,w=a[c];for(;c<m;){let M=1+(c<<1);const z=M+1;if(z<this.length&&f(a[z],a[M])<0&&(M=z),f(a[M],w)>=0)break;a[c]=a[M],c=M}a[c]=w}};function ug(c,a,f,m,w){uu(c,a,f,m||c.length-1,w||Ud)}function uu(c,a,f,m,w){for(;m>f;){if(m-f>600){var M=m-f+1,z=a-f+1,I=Math.log(M),B=.5*Math.exp(2*I/3),q=.5*Math.sqrt(I*B*(M-B)/M)*(z-M/2<0?-1:1);uu(c,a,Math.max(f,Math.floor(a-z*B/M+q)),Math.min(m,Math.floor(a+(M-z)*B/M+q)),w)}var Z=c[a],J=f,oe=m;for(Nu(c,f,a),w(c[m],Z)>0&&Nu(c,f,m);J<oe;){for(Nu(c,J,oe),J++,oe--;w(c[J],Z)<0;)J++;for(;w(c[oe],Z)>0;)oe--}w(c[f],Z)===0?Nu(c,f,oe):Nu(c,++oe,m),oe<=a&&(f=oe+1),a<=oe&&(m=oe-1)}}function Nu(c,a,f){var m=c[a];c[a]=c[f],c[f]=m}function Ud(c,a){return c<a?-1:c>a?1:0}function Gi(c,a){if(c.length<=1)return[c];const f=[];let m,w;for(const M of c){const z=Bf(M);z!==0&&(M.area=Math.abs(z),w===void 0&&(w=z<0),w===z<0?(m&&f.push(m),m=[M]):m.push(M))}if(m&&f.push(m),a>1)for(let M=0;M<f.length;M++)f[M].length<=a||(ug(f[M],a,1,f[M].length-1,Bu),f[M]=f[M].slice(0,a));return f}function Bu(c,a){return a.area-c.area}function Bf(c){let a=0;for(let f,m,w=0,M=c.length,z=M-1;w<M;z=w++)f=c[w],m=c[z],a+=(m.x-f.x)*(f.y+m.y);return a}const Ff=1/298.257223563,Ph=Ff*(2-Ff),cg=Math.PI/180;class $f{constructor(a){const f=6378.137*cg*1e3,m=Math.cos(a*cg),w=1/(1-Ph*(1-m*m)),M=Math.sqrt(w);this.kx=f*M*m,this.ky=f*M*w*(1-Ph)}distance(a,f){const m=this.wrap(a[0]-f[0])*this.kx,w=(a[1]-f[1])*this.ky;return Math.sqrt(m*m+w*w)}pointOnLine(a,f){let m,w,M,z,I=1/0;for(let B=0;B<a.length-1;B++){let q=a[B][0],Z=a[B][1],J=this.wrap(a[B+1][0]-q)*this.kx,oe=(a[B+1][1]-Z)*this.ky,ce=0;J===0&&oe===0||(ce=(this.wrap(f[0]-q)*this.kx*J+(f[1]-Z)*this.ky*oe)/(J*J+oe*oe),ce>1?(q=a[B+1][0],Z=a[B+1][1]):ce>0&&(q+=J/this.kx*ce,Z+=oe/this.ky*ce)),J=this.wrap(f[0]-q)*this.kx,oe=(f[1]-Z)*this.ky;const xe=J*J+oe*oe;xe<I&&(I=xe,m=q,w=Z,M=B,z=ce)}return{point:[m,w],index:M,t:Math.max(0,Math.min(1,z))}}wrap(a){for(;a<-180;)a+=360;for(;a>180;)a-=360;return a}}function dg(c,a){return a[0]-c[0]}function Vd(c){return c[1]-c[0]+1}function Xs(c,a){return c[1]>=c[0]&&c[1]<a}function Fu(c,a){if(c[0]>c[1])return[null,null];const f=Vd(c);if(a){if(f===2)return[c,null];const w=Math.floor(f/2);return[[c[0],c[0]+w],[c[0]+w,c[1]]]}if(f===1)return[c,null];const m=Math.floor(f/2)-1;return[[c[0],c[0]+m],[c[0]+m+1,c[1]]]}function Gf(c,a){if(!Xs(a,c.length))return[1/0,1/0,-1/0,-1/0];const f=[1/0,1/0,-1/0,-1/0];for(let m=a[0];m<=a[1];++m)uo(f,c[m]);return f}function Lh(c){const a=[1/0,1/0,-1/0,-1/0];for(const f of c)for(const m of f)uo(a,m);return a}function pc(c){return c[0]!==-1/0&&c[1]!==-1/0&&c[2]!==1/0&&c[3]!==1/0}function cu(c,a,f){if(!pc(c)||!pc(a))return NaN;let m=0,w=0;return c[2]<a[0]&&(m=a[0]-c[2]),c[0]>a[2]&&(m=c[0]-a[2]),c[1]>a[3]&&(w=c[1]-a[3]),c[3]<a[1]&&(w=a[1]-c[3]),f.distance([0,0],[m,w])}function du(c,a,f){const m=f.pointOnLine(a,c);return f.distance(c,m.point)}function qd(c,a,f,m,w){const M=Math.min(du(c,[f,m],w),du(a,[f,m],w)),z=Math.min(du(f,[c,a],w),du(m,[c,a],w));return Math.min(M,z)}function hg(c,a,f,m,w){if(!Xs(a,c.length)||!Xs(m,f.length))return 1/0;let M=1/0;for(let z=a[0];z<a[1];++z){const I=c[z],B=c[z+1];for(let q=m[0];q<m[1];++q){const Z=f[q],J=f[q+1];if(Ro(I,B,Z,J))return 0;M=Math.min(M,qd(I,B,Z,J,w))}}return M}function ta(c,a,f,m,w){if(!Xs(a,c.length)||!Xs(m,f.length))return NaN;let M=1/0;for(let z=a[0];z<=a[1];++z)for(let I=m[0];I<=m[1];++I)if(M=Math.min(M,w.distance(c[z],f[I])),M===0)return M;return M}function Ih(c,a,f){if(_l(c,a,!0))return 0;let m=1/0;for(const w of a){const M=w[0],z=w[w.length-1];if(M!==z&&(m=Math.min(m,du(c,[z,M],f)),m===0))return m;const I=f.pointOnLine(w,c);if(m=Math.min(m,f.distance(c,I.point)),m===0)return m}return m}function Mn(c,a,f,m){if(!Xs(a,c.length))return NaN;for(let M=a[0];M<=a[1];++M)if(_l(c[M],f,!0))return 0;let w=1/0;for(let M=a[0];M<a[1];++M){const z=c[M],I=c[M+1];for(const B of f)for(let q=0,Z=B.length,J=Z-1;q<Z;J=q++){const oe=B[J],ce=B[q];if(Ro(z,I,oe,ce))return 0;w=Math.min(w,qd(z,I,oe,ce,m))}}return w}function ql(c,a){for(const f of c)for(const m of f)if(_l(m,a,!0))return!0;return!1}function Gn(c,a,f,m=1/0){const w=Lh(c),M=Lh(a);if(m!==1/0&&cu(w,M,f)>=m)return m;if($n(w,M)){if(ql(c,a))return 0}else if(ql(a,c))return 0;let z=1/0;for(const I of c)for(let B=0,q=I.length,Z=q-1;B<q;Z=B++){const J=I[Z],oe=I[B];for(const ce of a)for(let xe=0,ve=ce.length,Oe=ve-1;xe<ve;Oe=xe++){const Be=ce[Oe],dt=ce[xe];if(Ro(J,oe,Be,dt))return 0;z=Math.min(z,qd(J,oe,Be,dt,f))}}return z}function mi(c,a,f,m,w,M){if(!M)return;const z=cu(Gf(m,M),w,f);z<a&&c.push([z,M,[0,0]])}function bl(c,a,f,m,w,M,z){if(!M||!z)return;const I=cu(Gf(m,M),Gf(w,z),f);I<a&&c.push([I,M,z])}function gc(c,a,f,m,w=1/0){let M=Math.min(m.distance(c[0],f[0][0]),w);if(M===0)return M;const z=new lg([[0,[0,c.length-1],[0,0]]],dg),I=Lh(f);for(;z.length>0;){const B=z.pop();if(B[0]>=M)continue;const q=B[1],Z=a?50:100;if(Vd(q)<=Z){if(!Xs(q,c.length))return NaN;if(a){const J=Mn(c,q,f,m);if(isNaN(J)||J===0)return J;M=Math.min(M,J)}else for(let J=q[0];J<=q[1];++J){const oe=Ih(c[J],f,m);if(M=Math.min(M,oe),M===0)return 0}}else{const J=Fu(q,a);mi(z,M,m,c,I,J[0]),mi(z,M,m,c,I,J[1])}}return M}function mc(c,a,f,m,w,M=1/0){let z=Math.min(M,w.distance(c[0],f[0]));if(z===0)return z;const I=new lg([[0,[0,c.length-1],[0,f.length-1]]],dg);for(;I.length>0;){const B=I.pop();if(B[0]>=z)continue;const q=B[1],Z=B[2],J=a?50:100,oe=m?50:100;if(Vd(q)<=J&&Vd(Z)<=oe){if(!Xs(q,c.length)&&Xs(Z,f.length))return NaN;let ce;if(a&&m)ce=hg(c,q,f,Z,w),z=Math.min(z,ce);else if(a&&!m){const xe=c.slice(q[0],q[1]+1);for(let ve=Z[0];ve<=Z[1];++ve)if(ce=du(f[ve],xe,w),z=Math.min(z,ce),z===0)return z}else if(!a&&m){const xe=f.slice(Z[0],Z[1]+1);for(let ve=q[0];ve<=q[1];++ve)if(ce=du(c[ve],xe,w),z=Math.min(z,ce),z===0)return z}else ce=ta(c,q,f,Z,w),z=Math.min(z,ce)}else{const ce=Fu(q,a),xe=Fu(Z,m);bl(I,z,w,c,f,ce[0],xe[0]),bl(I,z,w,c,f,ce[0],xe[1]),bl(I,z,w,c,f,ce[1],xe[0]),bl(I,z,w,c,f,ce[1],xe[1])}}return z}function yc(c){return c.type==="MultiPolygon"?c.coordinates.map((a=>({type:"Polygon",coordinates:a}))):c.type==="MultiLineString"?c.coordinates.map((a=>({type:"LineString",coordinates:a}))):c.type==="MultiPoint"?c.coordinates.map((a=>({type:"Point",coordinates:a}))):[c]}class wl{constructor(a,f){this.type=nr,this.geojson=a,this.geometries=f}static parse(a,f){if(a.length!==2)return f.error(`'distance' expression requires exactly one argument, but found ${a.length-1} instead.`);if(Ul(a[1])){const m=a[1];if(m.type==="FeatureCollection")return new wl(m,m.features.map((w=>yc(w.geometry))).flat());if(m.type==="Feature")return new wl(m,yc(m.geometry));if("type"in m&&"coordinates"in m)return new wl(m,yc(m))}return f.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return(function(f,m){const w=f.geometry(),M=w.flat().map((B=>Ki([B.x,B.y],f.canonical)));if(w.length===0)return NaN;const z=new $f(M[0][1]);let I=1/0;for(const B of m){switch(B.type){case"Point":I=Math.min(I,mc(M,!1,[B.coordinates],!1,z,I));break;case"LineString":I=Math.min(I,mc(M,!1,B.coordinates,!0,z,I));break;case"Polygon":I=Math.min(I,gc(M,!1,B.coordinates,z,I))}if(I===0)return I}return I})(a,this.geometries);if(a.geometryType()==="LineString")return(function(f,m){const w=f.geometry(),M=w.flat().map((B=>Ki([B.x,B.y],f.canonical)));if(w.length===0)return NaN;const z=new $f(M[0][1]);let I=1/0;for(const B of m){switch(B.type){case"Point":I=Math.min(I,mc(M,!0,[B.coordinates],!1,z,I));break;case"LineString":I=Math.min(I,mc(M,!0,B.coordinates,!0,z,I));break;case"Polygon":I=Math.min(I,gc(M,!0,B.coordinates,z,I))}if(I===0)return I}return I})(a,this.geometries);if(a.geometryType()==="Polygon")return(function(f,m){const w=f.geometry();if(w.length===0||w[0].length===0)return NaN;const M=Gi(w,0).map((B=>B.map((q=>q.map((Z=>Ki([Z.x,Z.y],f.canonical))))))),z=new $f(M[0][0][0][1]);let I=1/0;for(const B of m)for(const q of M){switch(B.type){case"Point":I=Math.min(I,gc([B.coordinates],!1,q,z,I));break;case"LineString":I=Math.min(I,gc(B.coordinates,!0,q,z,I));break;case"Polygon":I=Math.min(I,Gn(q,B.coordinates,z,I))}if(I===0)return I}return I})(a,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Xc={"==":Or,"!=":Nr,">":mn,"<":gr,">=":qt,"<=":Xn,array:ls,at:fc,boolean:ls,case:Ge,coalesce:He,collator:Br,format:Sa,image:Wo,in:qo,"index-of":xl,interpolate:Gt,"interpolate-hcl":Gt,"interpolate-lab":Gt,length:bi,let:Vo,literal:da,match:vt,number:ls,"number-format":Ai,object:ls,slice:ot,step:$t,string:ls,"to-boolean":lo,"to-color":lo,"to-number":lo,"to-string":lo,var:Zn,within:Ya,distance:wl};class Zo{constructor(a,f,m,w){this.name=a,this.type=f,this._evaluate=m,this.args=w}evaluate(a){return this._evaluate(a,this.args)}eachChild(a){this.args.forEach(a)}outputDefined(){return!1}static parse(a,f){const m=a[0],w=Zo.definitions[m];if(!w)return f.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);const M=Array.isArray(w)?w[0]:w.type,z=Array.isArray(w)?[[w[1],w[2]]]:w.overloads,I=z.filter((([q])=>!Array.isArray(q)||q.length===a.length-1));let B=null;for(const[q,Z]of I){B=new La(f.registry,$u,f.path,null,f.scope);const J=[];let oe=!1;for(let ce=1;ce<a.length;ce++){const xe=a[ce],ve=Array.isArray(q)?q[ce-1]:q.type,Oe=B.parse(xe,1+J.length,ve);if(!Oe){oe=!0;break}J.push(Oe)}if(!oe)if(Array.isArray(q)&&q.length!==J.length)B.error(`Expected ${q.length} arguments, but found ${J.length} instead.`);else{for(let ce=0;ce<J.length;ce++){const xe=Array.isArray(q)?q[ce]:q.type,ve=J[ce];B.concat(ce+1).checkSubtype(xe,ve.type)}if(B.errors.length===0)return new Zo(m,M,Z,J)}}if(I.length===1)f.errors.push(...B.errors);else{const q=(I.length?I:z).map((([J])=>{return oe=J,Array.isArray(oe)?`(${oe.map(le).join(", ")})`:`(${le(oe.type)}...)`;var oe})).join(" | "),Z=[];for(let J=1;J<a.length;J++){const oe=f.parse(a[J],1+Z.length);if(!oe)return null;Z.push(le(oe.type))}f.error(`Expected arguments of type ${q}, but found (${Z.join(", ")}) instead.`)}return null}static register(a,f){Zo.definitions=f;for(const m in f)a[m]=Zo}}function Oh(c,[a,f,m,w]){a=a.evaluate(c),f=f.evaluate(c),m=m.evaluate(c);const M=w?w.evaluate(c):1,z=Gl(a,f,m,M);if(z)throw new Qn(z);return new Nn(a/255,f/255,m/255,M,!1)}function hu(c,a){return c in a}function Wd(c,a){const f=a[c];return f===void 0?null:f}function fu(c){return{type:c}}function $u(c){if(c instanceof Zn)return $u(c.boundExpression);if(c instanceof Zo&&c.name==="error"||c instanceof Br||c instanceof Ya||c instanceof wl)return!1;const a=c instanceof lo||c instanceof ls;let f=!0;return c.eachChild((m=>{f=a?f&&$u(m):f&&m instanceof da})),!!f&&vc(c)&&Gu(c,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function vc(c){if(c instanceof Zo&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof Ya||c instanceof wl)return!1;let a=!0;return c.eachChild((f=>{a&&!vc(f)&&(a=!1)})),a}function cs(c){if(c instanceof Zo&&c.name==="feature-state")return!1;let a=!0;return c.eachChild((f=>{a&&!cs(f)&&(a=!1)})),a}function Gu(c,a){if(c instanceof Zo&&a.indexOf(c.name)>=0)return!1;let f=!0;return c.eachChild((m=>{f&&!Gu(m,a)&&(f=!1)})),f}function jh(c){return{result:"success",value:c}}function Yc(c){return{result:"error",value:c}}function Jc(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function xc(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function ra(c){return!!c.expression&&c.expression.interpolated}function Un(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Hd(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function fg(c){return c}function Uf(c,a){const f=a.type==="color",m=c.stops&&typeof c.stops[0][0]=="object",w=m||!(m||c.property!==void 0),M=c.type||(ra(a)?"exponential":"interval");if(f||a.type==="padding"){const Z=f?Nn.parse:wa.parse;(c=Fi({},c)).stops&&(c.stops=c.stops.map((J=>[J[0],Z(J[1])]))),c.default=Z(c.default?c.default:a.default)}if(c.colorSpace&&(z=c.colorSpace)!=="rgb"&&z!=="hcl"&&z!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var z;let I,B,q;if(M==="exponential")I=lt;else if(M==="interval")I=pu;else if(M==="categorical"){I=Rh,B=Object.create(null);for(const Z of c.stops)B[Z[0]]=Z[1];q=typeof c.stops[0][0]}else{if(M!=="identity")throw new Error(`Unknown function type "${M}"`);I=Ft}if(m){const Z={},J=[];for(let xe=0;xe<c.stops.length;xe++){const ve=c.stops[xe],Oe=ve[0].zoom;Z[Oe]===void 0&&(Z[Oe]={zoom:Oe,type:c.type,property:c.property,default:c.default,stops:[]},J.push(Oe)),Z[Oe].stops.push([ve[0].value,ve[1]])}const oe=[];for(const xe of J)oe.push([Z[xe].zoom,Uf(Z[xe],a)]);const ce={name:"linear"};return{kind:"composite",interpolationType:ce,interpolationFactor:Gt.interpolationFactor.bind(void 0,ce),zoomStops:oe.map((xe=>xe[0])),evaluate:({zoom:xe},ve)=>lt({stops:oe,base:c.base},a,xe).evaluate(xe,ve)}}if(w){const Z=M==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:Z,interpolationFactor:Gt.interpolationFactor.bind(void 0,Z),zoomStops:c.stops.map((J=>J[0])),evaluate:({zoom:J})=>I(c,a,J,B,q)}}return{kind:"source",evaluate(Z,J){const oe=J&&J.properties?J.properties[c.property]:void 0;return oe===void 0?_c(c.default,a.default):I(c,a,oe,B,q)}}}function _c(c,a,f){return c!==void 0?c:a!==void 0?a:f!==void 0?f:void 0}function Rh(c,a,f,m,w){return _c(typeof f===w?m[f]:void 0,c.default,a.default)}function pu(c,a,f){if(Un(f)!=="number")return _c(c.default,a.default);const m=c.stops.length;if(m===1||f<=c.stops[0][0])return c.stops[0][1];if(f>=c.stops[m-1][0])return c.stops[m-1][1];const w=ht(c.stops.map((M=>M[0])),f);return c.stops[w][1]}function lt(c,a,f){const m=c.base!==void 0?c.base:1;if(Un(f)!=="number")return _c(c.default,a.default);const w=c.stops.length;if(w===1||f<=c.stops[0][0])return c.stops[0][1];if(f>=c.stops[w-1][0])return c.stops[w-1][1];const M=ht(c.stops.map((Z=>Z[0])),f),z=(function(Z,J,oe,ce){const xe=ce-oe,ve=Z-oe;return xe===0?0:J===1?ve/xe:(Math.pow(J,ve)-1)/(Math.pow(J,xe)-1)})(f,m,c.stops[M][0],c.stops[M+1][0]),I=c.stops[M][1],B=c.stops[M+1][1],q=Tr[a.type]||fg;return typeof I.evaluate=="function"?{evaluate(...Z){const J=I.evaluate.apply(void 0,Z),oe=B.evaluate.apply(void 0,Z);if(J!==void 0&&oe!==void 0)return q(J,oe,z,c.colorSpace)}}:q(I,B,z,c.colorSpace)}function Ft(c,a,f){switch(a.type){case"color":f=Nn.parse(f);break;case"formatted":f=Oo.fromString(f.toString());break;case"resolvedImage":f=So.fromString(f.toString());break;case"padding":f=wa.parse(f);break;default:Un(f)===a.type||a.type==="enum"&&a.values[f]||(f=void 0)}return _c(f,c.default,a.default)}Zo.register(Xc,{error:[{kind:"error"},[kr],(c,[a])=>{throw new Qn(a.evaluate(c))}],typeof:[kr,[nn],(c,[a])=>le(Zi(a.evaluate(c)))],"to-rgba":[se(nr,4),[Jn],(c,[a])=>{const[f,m,w,M]=a.evaluate(c).rgb;return[255*f,255*m,255*w,M]}],rgb:[Jn,[nr,nr,nr],Oh],rgba:[Jn,[nr,nr,nr,nr],Oh],has:{type:jr,overloads:[[[kr],(c,[a])=>hu(a.evaluate(c),c.properties())],[[kr,Xa],(c,[a,f])=>hu(a.evaluate(c),f.evaluate(c))]]},get:{type:nn,overloads:[[[kr],(c,[a])=>Wd(a.evaluate(c),c.properties())],[[kr,Xa],(c,[a,f])=>Wd(a.evaluate(c),f.evaluate(c))]]},"feature-state":[nn,[kr],(c,[a])=>Wd(a.evaluate(c),c.featureState||{})],properties:[Xa,[],c=>c.properties()],"geometry-type":[kr,[],c=>c.geometryType()],id:[nn,[],c=>c.id()],zoom:[nr,[],c=>c.globals.zoom],"heatmap-density":[nr,[],c=>c.globals.heatmapDensity||0],"line-progress":[nr,[],c=>c.globals.lineProgress||0],accumulated:[nn,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[nr,fu(nr),(c,a)=>{let f=0;for(const m of a)f+=m.evaluate(c);return f}],"*":[nr,fu(nr),(c,a)=>{let f=1;for(const m of a)f*=m.evaluate(c);return f}],"-":{type:nr,overloads:[[[nr,nr],(c,[a,f])=>a.evaluate(c)-f.evaluate(c)],[[nr],(c,[a])=>-a.evaluate(c)]]},"/":[nr,[nr,nr],(c,[a,f])=>a.evaluate(c)/f.evaluate(c)],"%":[nr,[nr,nr],(c,[a,f])=>a.evaluate(c)%f.evaluate(c)],ln2:[nr,[],()=>Math.LN2],pi:[nr,[],()=>Math.PI],e:[nr,[],()=>Math.E],"^":[nr,[nr,nr],(c,[a,f])=>Math.pow(a.evaluate(c),f.evaluate(c))],sqrt:[nr,[nr],(c,[a])=>Math.sqrt(a.evaluate(c))],log10:[nr,[nr],(c,[a])=>Math.log(a.evaluate(c))/Math.LN10],ln:[nr,[nr],(c,[a])=>Math.log(a.evaluate(c))],log2:[nr,[nr],(c,[a])=>Math.log(a.evaluate(c))/Math.LN2],sin:[nr,[nr],(c,[a])=>Math.sin(a.evaluate(c))],cos:[nr,[nr],(c,[a])=>Math.cos(a.evaluate(c))],tan:[nr,[nr],(c,[a])=>Math.tan(a.evaluate(c))],asin:[nr,[nr],(c,[a])=>Math.asin(a.evaluate(c))],acos:[nr,[nr],(c,[a])=>Math.acos(a.evaluate(c))],atan:[nr,[nr],(c,[a])=>Math.atan(a.evaluate(c))],min:[nr,fu(nr),(c,a)=>Math.min(...a.map((f=>f.evaluate(c))))],max:[nr,fu(nr),(c,a)=>Math.max(...a.map((f=>f.evaluate(c))))],abs:[nr,[nr],(c,[a])=>Math.abs(a.evaluate(c))],round:[nr,[nr],(c,[a])=>{const f=a.evaluate(c);return f<0?-Math.round(-f):Math.round(f)}],floor:[nr,[nr],(c,[a])=>Math.floor(a.evaluate(c))],ceil:[nr,[nr],(c,[a])=>Math.ceil(a.evaluate(c))],"filter-==":[jr,[kr,nn],(c,[a,f])=>c.properties()[a.value]===f.value],"filter-id-==":[jr,[nn],(c,[a])=>c.id()===a.value],"filter-type-==":[jr,[kr],(c,[a])=>c.geometryType()===a.value],"filter-<":[jr,[kr,nn],(c,[a,f])=>{const m=c.properties()[a.value],w=f.value;return typeof m==typeof w&&m<w}],"filter-id-<":[jr,[nn],(c,[a])=>{const f=c.id(),m=a.value;return typeof f==typeof m&&f<m}],"filter->":[jr,[kr,nn],(c,[a,f])=>{const m=c.properties()[a.value],w=f.value;return typeof m==typeof w&&m>w}],"filter-id->":[jr,[nn],(c,[a])=>{const f=c.id(),m=a.value;return typeof f==typeof m&&f>m}],"filter-<=":[jr,[kr,nn],(c,[a,f])=>{const m=c.properties()[a.value],w=f.value;return typeof m==typeof w&&m<=w}],"filter-id-<=":[jr,[nn],(c,[a])=>{const f=c.id(),m=a.value;return typeof f==typeof m&&f<=m}],"filter->=":[jr,[kr,nn],(c,[a,f])=>{const m=c.properties()[a.value],w=f.value;return typeof m==typeof w&&m>=w}],"filter-id->=":[jr,[nn],(c,[a])=>{const f=c.id(),m=a.value;return typeof f==typeof m&&f>=m}],"filter-has":[jr,[nn],(c,[a])=>a.value in c.properties()],"filter-has-id":[jr,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[jr,[se(kr)],(c,[a])=>a.value.indexOf(c.geometryType())>=0],"filter-id-in":[jr,[se(nn)],(c,[a])=>a.value.indexOf(c.id())>=0],"filter-in-small":[jr,[kr,se(nn)],(c,[a,f])=>f.value.indexOf(c.properties()[a.value])>=0],"filter-in-large":[jr,[kr,se(nn)],(c,[a,f])=>(function(m,w,M,z){for(;M<=z;){const I=M+z>>1;if(w[I]===m)return!0;w[I]>m?z=I-1:M=I+1}return!1})(c.properties()[a.value],f.value,0,f.value.length-1)],all:{type:jr,overloads:[[[jr,jr],(c,[a,f])=>a.evaluate(c)&&f.evaluate(c)],[fu(jr),(c,a)=>{for(const f of a)if(!f.evaluate(c))return!1;return!0}]]},any:{type:jr,overloads:[[[jr,jr],(c,[a,f])=>a.evaluate(c)||f.evaluate(c)],[fu(jr),(c,a)=>{for(const f of a)if(f.evaluate(c))return!0;return!1}]]},"!":[jr,[jr],(c,[a])=>!a.evaluate(c)],"is-supported-script":[jr,[kr],(c,[a])=>{const f=c.globals&&c.globals.isSupportedScript;return!f||f(a.evaluate(c))}],upcase:[kr,[kr],(c,[a])=>a.evaluate(c).toUpperCase()],downcase:[kr,[kr],(c,[a])=>a.evaluate(c).toLowerCase()],concat:[kr,fu(nn),(c,a)=>a.map((f=>Zs(f.evaluate(c)))).join("")],"resolved-locale":[kr,[Go],(c,[a])=>a.evaluate(c).resolvedLocale()]});class Ct{constructor(a,f){var m;this.expression=a,this._warningHistory={},this._evaluator=new Kc,this._defaultValue=f?(m=f).type==="color"&&Hd(m.default)?new Nn(0,0,0,0):m.type==="color"?Nn.parse(m.default)||null:m.type==="padding"?wa.parse(m.default)||null:m.type==="variableAnchorOffsetCollection"?jo.parse(m.default)||null:m.default===void 0?null:m.default:null,this._enumValues=f&&f.type==="enum"?f.values:null}evaluateWithoutErrorHandling(a,f,m,w,M,z){return this._evaluator.globals=a,this._evaluator.feature=f,this._evaluator.featureState=m,this._evaluator.canonical=w,this._evaluator.availableImages=M||null,this._evaluator.formattedSection=z,this.expression.evaluate(this._evaluator)}evaluate(a,f,m,w,M,z){this._evaluator.globals=a,this._evaluator.feature=f||null,this._evaluator.featureState=m||null,this._evaluator.canonical=w,this._evaluator.availableImages=M||null,this._evaluator.formattedSection=z||null;try{const I=this.expression.evaluate(this._evaluator);if(I==null||typeof I=="number"&&I!=I)return this._defaultValue;if(this._enumValues&&!(I in this._enumValues))throw new Qn(`Expected value to be one of ${Object.keys(this._enumValues).map((B=>JSON.stringify(B))).join(", ")}, but found ${JSON.stringify(I)} instead.`);return I}catch(I){return this._warningHistory[I.message]||(this._warningHistory[I.message]=!0,typeof console<"u"&&console.warn(I.message)),this._defaultValue}}}function Cr(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in Xc}function hn(c,a){const f=new La(Xc,$u,[],a?(function(w){const M={color:Jn,string:kr,number:nr,enum:kr,boolean:jr,formatted:Uo,padding:Io,resolvedImage:wo,variableAnchorOffsetCollection:Ne};return w.type==="array"?se(M[w.value]||nn,w.length):M[w.type]})(a):void 0),m=f.parse(c,void 0,void 0,void 0,a&&a.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?jh(new Ct(m,a)):Yc(f.errors)}class zn{constructor(a,f){this.kind=a,this._styleExpression=f,this.isStateDependent=a!=="constant"&&!cs(f.expression)}evaluateWithoutErrorHandling(a,f,m,w,M,z){return this._styleExpression.evaluateWithoutErrorHandling(a,f,m,w,M,z)}evaluate(a,f,m,w,M,z){return this._styleExpression.evaluate(a,f,m,w,M,z)}}class ki{constructor(a,f,m,w){this.kind=a,this.zoomStops=m,this._styleExpression=f,this.isStateDependent=a!=="camera"&&!cs(f.expression),this.interpolationType=w}evaluateWithoutErrorHandling(a,f,m,w,M,z){return this._styleExpression.evaluateWithoutErrorHandling(a,f,m,w,M,z)}evaluate(a,f,m,w,M,z){return this._styleExpression.evaluate(a,f,m,w,M,z)}interpolationFactor(a,f,m){return this.interpolationType?Gt.interpolationFactor(this.interpolationType,a,f,m):0}}function yi(c,a){const f=hn(c,a);if(f.result==="error")return f;const m=f.value.expression,w=vc(m);if(!w&&!Jc(a))return Yc([new Fn("","data expressions not supported")]);const M=Gu(m,["zoom"]);if(!M&&!xc(a))return Yc([new Fn("","zoom expressions not supported")]);const z=Sl(m);return z||M?z instanceof Fn?Yc([z]):z instanceof Gt&&!ra(a)?Yc([new Fn("",'"interpolate" expressions cannot be used with this property')]):jh(z?new ki(w?"camera":"composite",f.value,z.labels,z instanceof Gt?z.interpolation:void 0):new zn(w?"constant":"source",f.value)):Yc([new Fn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class gu{constructor(a,f){this._parameters=a,this._specification=f,Fi(this,Uf(this._parameters,this._specification))}static deserialize(a){return new gu(a._parameters,a._specification)}static serialize(a){return{_parameters:a._parameters,_specification:a._specification}}}function Sl(c){let a=null;if(c instanceof Vo)a=Sl(c.result);else if(c instanceof He){for(const f of c.args)if(a=Sl(f),a)break}else(c instanceof $t||c instanceof Gt)&&c.input instanceof Zo&&c.input.name==="zoom"&&(a=c);return a instanceof Fn||c.eachChild((f=>{const m=Sl(f);m instanceof Fn?a=m:!a&&m?a=new Fn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):a&&m&&a!==m&&(a=new Fn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),a}function No(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const a of c.slice(1))if(!No(a)&&typeof a!="boolean")return!1;return!0;default:return!0}}const Uu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Nh(c){if(c==null)return{filter:()=>!0,needGeometry:!1};No(c)||(c=bc(c));const a=hn(c,Uu);if(a.result==="error")throw new Error(a.value.map((f=>`${f.key}: ${f.message}`)).join(", "));return{filter:(f,m,w)=>a.value.evaluate(f,m,{},w),needGeometry:Zd(c)}}function Qc(c,a){return c<a?-1:c>a?1:0}function Zd(c){if(!Array.isArray(c))return!1;if(c[0]==="within"||c[0]==="distance")return!0;for(let a=1;a<c.length;a++)if(Zd(c[a]))return!0;return!1}function bc(c){if(!c)return!0;const a=c[0];return c.length<=1?a!=="any":a==="=="?ui(c[1],c[2],"=="):a==="!="?Ci(ui(c[1],c[2],"==")):a==="<"||a===">"||a==="<="||a===">="?ui(c[1],c[2],a):a==="any"?(f=c.slice(1),["any"].concat(f.map(bc))):a==="all"?["all"].concat(c.slice(1).map(bc)):a==="none"?["all"].concat(c.slice(1).map(bc).map(Ci)):a==="in"?ed(c[1],c.slice(2)):a==="!in"?Ci(ed(c[1],c.slice(2))):a==="has"?Vu(c[1]):a!=="!has"||Ci(Vu(c[1]));var f}function ui(c,a,f){switch(c){case"$type":return[`filter-type-${f}`,a];case"$id":return[`filter-id-${f}`,a];default:return[`filter-${f}`,c,a]}}function ed(c,a){if(a.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some((f=>typeof f!=typeof a[0]))?["filter-in-large",c,["literal",a.sort(Qc)]]:["filter-in-small",c,["literal",a]]}}function Vu(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function Ci(c){return["!",c]}function Wl(c){const a=typeof c;if(a==="number"||a==="boolean"||a==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let w="[";for(const M of c)w+=`${Wl(M)},`;return`${w}]`}const f=Object.keys(c).sort();let m="{";for(let w=0;w<f.length;w++)m+=`${JSON.stringify(f[w])}:${Wl(c[f[w]])},`;return`${m}}`}function Cs(c){let a="";for(const f of Xr)a+=`/${Wl(c[f])}`;return a}function wc(c){const a=c.value;return a?[new Rt(c.key,a,"constants have been deprecated as of v8")]:[]}function Ui(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function Ia(c){if(Array.isArray(c))return c.map(Ia);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const a={};for(const f in c)a[f]=Ia(c[f]);return a}return Ui(c)}function Ja(c){const a=c.key,f=c.value,m=c.valueSpec||{},w=c.objectElementValidators||{},M=c.style,z=c.styleSpec,I=c.validateSpec;let B=[];const q=Un(f);if(q!=="object")return[new Rt(a,f,`object expected, ${q} found`)];for(const Z in f){const J=Z.split(".")[0],oe=m[J]||m["*"];let ce;if(w[J])ce=w[J];else if(m[J])ce=I;else if(w["*"])ce=w["*"];else{if(!m["*"]){B.push(new Rt(a,f[Z],`unknown property "${Z}"`));continue}ce=I}B=B.concat(ce({key:(a&&`${a}.`)+Z,value:f[Z],valueSpec:oe,style:M,styleSpec:z,object:f,objectKey:Z,validateSpec:I},f))}for(const Z in m)w[Z]||m[Z].required&&m[Z].default===void 0&&f[Z]===void 0&&B.push(new Rt(a,f,`missing required property "${Z}"`));return B}function qu(c){const a=c.value,f=c.valueSpec,m=c.style,w=c.styleSpec,M=c.key,z=c.arrayElementValidator||c.validateSpec;if(Un(a)!=="array")return[new Rt(M,a,`array expected, ${Un(a)} found`)];if(f.length&&a.length!==f.length)return[new Rt(M,a,`array length ${f.length} expected, length ${a.length} found`)];if(f["min-length"]&&a.length<f["min-length"])return[new Rt(M,a,`array length at least ${f["min-length"]} expected, length ${a.length} found`)];let I={type:f.value,values:f.values};w.$version<7&&(I.function=f.function),Un(f.value)==="object"&&(I=f.value);let B=[];for(let q=0;q<a.length;q++)B=B.concat(z({array:a,arrayIndex:q,value:a[q],valueSpec:I,validateSpec:c.validateSpec,style:m,styleSpec:w,key:`${M}[${q}]`}));return B}function Ys(c){const a=c.key,f=c.value,m=c.valueSpec;let w=Un(f);return w==="number"&&f!=f&&(w="NaN"),w!=="number"?[new Rt(a,f,`number expected, ${w} found`)]:"minimum"in m&&f<m.minimum?[new Rt(a,f,`${f} is less than the minimum value ${m.minimum}`)]:"maximum"in m&&f>m.maximum?[new Rt(a,f,`${f} is greater than the maximum value ${m.maximum}`)]:[]}function td(c){const a=c.valueSpec,f=Ui(c.value.type);let m,w,M,z={};const I=f!=="categorical"&&c.value.property===void 0,B=!I,q=Un(c.value.stops)==="array"&&Un(c.value.stops[0])==="array"&&Un(c.value.stops[0][0])==="object",Z=Ja({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(ce){if(f==="identity")return[new Rt(ce.key,ce.value,'identity function may not have a "stops" property')];let xe=[];const ve=ce.value;return xe=xe.concat(qu({key:ce.key,value:ve,valueSpec:ce.valueSpec,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec,arrayElementValidator:J})),Un(ve)==="array"&&ve.length===0&&xe.push(new Rt(ce.key,ve,"array must have at least one stop")),xe},default:function(ce){return ce.validateSpec({key:ce.key,value:ce.value,valueSpec:a,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec})}}});return f==="identity"&&I&&Z.push(new Rt(c.key,c.value,'missing required property "property"')),f==="identity"||c.value.stops||Z.push(new Rt(c.key,c.value,'missing required property "stops"')),f==="exponential"&&c.valueSpec.expression&&!ra(c.valueSpec)&&Z.push(new Rt(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(B&&!Jc(c.valueSpec)?Z.push(new Rt(c.key,c.value,"property functions not supported")):I&&!xc(c.valueSpec)&&Z.push(new Rt(c.key,c.value,"zoom functions not supported"))),f!=="categorical"&&!q||c.value.property!==void 0||Z.push(new Rt(c.key,c.value,'"property" property is required')),Z;function J(ce){let xe=[];const ve=ce.value,Oe=ce.key;if(Un(ve)!=="array")return[new Rt(Oe,ve,`array expected, ${Un(ve)} found`)];if(ve.length!==2)return[new Rt(Oe,ve,`array length 2 expected, length ${ve.length} found`)];if(q){if(Un(ve[0])!=="object")return[new Rt(Oe,ve,`object expected, ${Un(ve[0])} found`)];if(ve[0].zoom===void 0)return[new Rt(Oe,ve,"object stop key must have zoom")];if(ve[0].value===void 0)return[new Rt(Oe,ve,"object stop key must have value")];if(M&&M>Ui(ve[0].zoom))return[new Rt(Oe,ve[0].zoom,"stop zoom values must appear in ascending order")];Ui(ve[0].zoom)!==M&&(M=Ui(ve[0].zoom),w=void 0,z={}),xe=xe.concat(Ja({key:`${Oe}[0]`,value:ve[0],valueSpec:{zoom:{}},validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec,objectElementValidators:{zoom:Ys,value:oe}}))}else xe=xe.concat(oe({key:`${Oe}[0]`,value:ve[0],validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec},ve));return Cr(Ia(ve[1]))?xe.concat([new Rt(`${Oe}[1]`,ve[1],"expressions are not allowed in function stops.")]):xe.concat(ce.validateSpec({key:`${Oe}[1]`,value:ve[1],valueSpec:a,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec}))}function oe(ce,xe){const ve=Un(ce.value),Oe=Ui(ce.value),Be=ce.value!==null?ce.value:xe;if(m){if(ve!==m)return[new Rt(ce.key,Be,`${ve} stop domain type must match previous stop domain type ${m}`)]}else m=ve;if(ve!=="number"&&ve!=="string"&&ve!=="boolean")return[new Rt(ce.key,Be,"stop domain value must be a number, string, or boolean")];if(ve!=="number"&&f!=="categorical"){let dt=`number expected, ${ve} found`;return Jc(a)&&f===void 0&&(dt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Rt(ce.key,Be,dt)]}return f!=="categorical"||ve!=="number"||isFinite(Oe)&&Math.floor(Oe)===Oe?f!=="categorical"&&ve==="number"&&w!==void 0&&Oe<w?[new Rt(ce.key,Be,"stop domain values must appear in ascending order")]:(w=Oe,f==="categorical"&&Oe in z?[new Rt(ce.key,Be,"stop domain values must be unique")]:(z[Oe]=!0,[])):[new Rt(ce.key,Be,`integer expected, found ${Oe}`)]}}function Hl(c){const a=(c.expressionContext==="property"?yi:hn)(Ia(c.value),c.valueSpec);if(a.result==="error")return a.value.map((m=>new Rt(`${c.key}${m.key}`,c.value,m.message)));const f=a.value.expression||a.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!f.outputDefined())return[new Rt(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!cs(f))return[new Rt(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!cs(f))return[new Rt(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!Gu(f,["zoom","feature-state"]))return[new Rt(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!vc(f))return[new Rt(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Eo(c){const a=c.key,f=c.value,m=c.valueSpec,w=[];return Array.isArray(m.values)?m.values.indexOf(Ui(f))===-1&&w.push(new Rt(a,f,`expected one of [${m.values.join(", ")}], ${JSON.stringify(f)} found`)):Object.keys(m.values).indexOf(Ui(f))===-1&&w.push(new Rt(a,f,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(f)} found`)),w}function Bh(c){return No(Ia(c.value))?Hl(Fi({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):qa(c)}function qa(c){const a=c.value,f=c.key;if(Un(a)!=="array")return[new Rt(f,a,`array expected, ${Un(a)} found`)];const m=c.styleSpec;let w,M=[];if(a.length<1)return[new Rt(f,a,"filter array must have at least 1 element")];switch(M=M.concat(Eo({key:`${f}[0]`,value:a[0],valueSpec:m.filter_operator,style:c.style,styleSpec:c.styleSpec})),Ui(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&Ui(a[1])==="$type"&&M.push(new Rt(f,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":a.length!==3&&M.push(new Rt(f,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(w=Un(a[1]),w!=="string"&&M.push(new Rt(`${f}[1]`,a[1],`string expected, ${w} found`)));for(let z=2;z<a.length;z++)w=Un(a[z]),Ui(a[1])==="$type"?M=M.concat(Eo({key:`${f}[${z}]`,value:a[z],valueSpec:m.geometry_type,style:c.style,styleSpec:c.styleSpec})):w!=="string"&&w!=="number"&&w!=="boolean"&&M.push(new Rt(`${f}[${z}]`,a[z],`string, number, or boolean expected, ${w} found`));break;case"any":case"all":case"none":for(let z=1;z<a.length;z++)M=M.concat(qa({key:`${f}[${z}]`,value:a[z],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":w=Un(a[1]),a.length!==2?M.push(new Rt(f,a,`filter array for "${a[0]}" operator must have 2 elements`)):w!=="string"&&M.push(new Rt(`${f}[1]`,a[1],`string expected, ${w} found`))}return M}function El(c,a){const f=c.key,m=c.validateSpec,w=c.style,M=c.styleSpec,z=c.value,I=c.objectKey,B=M[`${a}_${c.layerType}`];if(!B)return[];const q=I.match(/^(.*)-transition$/);if(a==="paint"&&q&&B[q[1]]&&B[q[1]].transition)return m({key:f,value:z,valueSpec:M.transition,style:w,styleSpec:M});const Z=c.valueSpec||B[I];if(!Z)return[new Rt(f,z,`unknown property "${I}"`)];let J;if(Un(z)==="string"&&Jc(Z)&&!Z.tokens&&(J=/^{([^}]+)}$/.exec(z)))return[new Rt(f,z,`"${I}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(J[1])} }\`.`)];const oe=[];return c.layerType==="symbol"&&(I==="text-field"&&w&&!w.glyphs&&oe.push(new Rt(f,z,'use of "text-field" requires a style "glyphs" property')),I==="text-font"&&Hd(Ia(z))&&Ui(z.type)==="identity"&&oe.push(new Rt(f,z,'"text-font" does not support identity functions'))),oe.concat(m({key:c.key,value:z,valueSpec:Z,style:w,styleSpec:M,expressionContext:"property",propertyType:a,propertyKey:I}))}function Ko(c){return El(c,"paint")}function Fh(c){return El(c,"layout")}function rd(c){let a=[];const f=c.value,m=c.key,w=c.style,M=c.styleSpec;f.type||f.ref||a.push(new Rt(m,f,'either "type" or "ref" is required'));let z=Ui(f.type);const I=Ui(f.ref);if(f.id){const B=Ui(f.id);for(let q=0;q<c.arrayIndex;q++){const Z=w.layers[q];Ui(Z.id)===B&&a.push(new Rt(m,f.id,`duplicate layer id "${f.id}", previously used at line ${Z.id.__line__}`))}}if("ref"in f){let B;["type","source","source-layer","filter","layout"].forEach((q=>{q in f&&a.push(new Rt(m,f[q],`"${q}" is prohibited for ref layers`))})),w.layers.forEach((q=>{Ui(q.id)===I&&(B=q)})),B?B.ref?a.push(new Rt(m,f.ref,"ref cannot reference another ref layer")):z=Ui(B.type):a.push(new Rt(m,f.ref,`ref layer "${I}" not found`))}else if(z!=="background")if(f.source){const B=w.sources&&w.sources[f.source],q=B&&Ui(B.type);B?q==="vector"&&z==="raster"?a.push(new Rt(m,f.source,`layer "${f.id}" requires a raster source`)):q!=="raster-dem"&&z==="hillshade"?a.push(new Rt(m,f.source,`layer "${f.id}" requires a raster-dem source`)):q==="raster"&&z!=="raster"?a.push(new Rt(m,f.source,`layer "${f.id}" requires a vector source`)):q!=="vector"||f["source-layer"]?q==="raster-dem"&&z!=="hillshade"?a.push(new Rt(m,f.source,"raster-dem source can only be used with layer type 'hillshade'.")):z!=="line"||!f.paint||!f.paint["line-gradient"]||q==="geojson"&&B.lineMetrics||a.push(new Rt(m,f,`layer "${f.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):a.push(new Rt(m,f,`layer "${f.id}" must specify a "source-layer"`)):a.push(new Rt(m,f.source,`source "${f.source}" not found`))}else a.push(new Rt(m,f,'missing required property "source"'));return a=a.concat(Ja({key:m,value:f,valueSpec:M.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${m}.type`,value:f.type,valueSpec:M.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:f,objectKey:"type"}),filter:Bh,layout:B=>Ja({layer:f,key:B.key,value:B.value,style:B.style,styleSpec:B.styleSpec,validateSpec:B.validateSpec,objectElementValidators:{"*":q=>Fh(Fi({layerType:z},q))}}),paint:B=>Ja({layer:f,key:B.key,value:B.value,style:B.style,styleSpec:B.styleSpec,validateSpec:B.validateSpec,objectElementValidators:{"*":q=>Ko(Fi({layerType:z},q))}})}})),a}function Ts(c){const a=c.value,f=c.key,m=Un(a);return m!=="string"?[new Rt(f,a,`string expected, ${m} found`)]:[]}const mu={promoteId:function({key:c,value:a}){if(Un(a)==="string")return Ts({key:c,value:a});{const f=[];for(const m in a)f.push(...Ts({key:`${c}.${m}`,value:a[m]}));return f}}};function yu(c){const a=c.value,f=c.key,m=c.styleSpec,w=c.style,M=c.validateSpec;if(!a.type)return[new Rt(f,a,'"type" is required')];const z=Ui(a.type);let I;switch(z){case"vector":case"raster":return I=Ja({key:f,value:a,valueSpec:m[`source_${z.replace("-","_")}`],style:c.style,styleSpec:m,objectElementValidators:mu,validateSpec:M}),I;case"raster-dem":return I=(function(B){var q;const Z=(q=B.sourceName)!==null&&q!==void 0?q:"",J=B.value,oe=B.styleSpec,ce=oe.source_raster_dem,xe=B.style;let ve=[];const Oe=Un(J);if(J===void 0)return ve;if(Oe!=="object")return ve.push(new Rt("source_raster_dem",J,`object expected, ${Oe} found`)),ve;const Be=Ui(J.encoding)==="custom",dt=["redFactor","greenFactor","blueFactor","baseShift"],Je=B.value.encoding?`"${B.value.encoding}"`:"Default";for(const Qe in J)!Be&&dt.includes(Qe)?ve.push(new Rt(Qe,J[Qe],`In "${Z}": "${Qe}" is only valid when "encoding" is set to "custom". ${Je} encoding found`)):ce[Qe]?ve=ve.concat(B.validateSpec({key:Qe,value:J[Qe],valueSpec:ce[Qe],validateSpec:B.validateSpec,style:xe,styleSpec:oe})):ve.push(new Rt(Qe,J[Qe],`unknown property "${Qe}"`));return ve})({sourceName:f,value:a,style:c.style,styleSpec:m,validateSpec:M}),I;case"geojson":if(I=Ja({key:f,value:a,valueSpec:m.source_geojson,style:w,styleSpec:m,validateSpec:M,objectElementValidators:mu}),a.cluster)for(const B in a.clusterProperties){const[q,Z]=a.clusterProperties[B],J=typeof q=="string"?[q,["accumulated"],["get",B]]:q;I.push(...Hl({key:`${f}.${B}.map`,value:Z,expressionContext:"cluster-map"})),I.push(...Hl({key:`${f}.${B}.reduce`,value:J,expressionContext:"cluster-reduce"}))}return I;case"video":return Ja({key:f,value:a,valueSpec:m.source_video,style:w,validateSpec:M,styleSpec:m});case"image":return Ja({key:f,value:a,valueSpec:m.source_image,style:w,validateSpec:M,styleSpec:m});case"canvas":return[new Rt(f,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Eo({key:`${f}.type`,value:a.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Sc(c){const a=c.value,f=c.styleSpec,m=f.light,w=c.style;let M=[];const z=Un(a);if(a===void 0)return M;if(z!=="object")return M=M.concat([new Rt("light",a,`object expected, ${z} found`)]),M;for(const I in a){const B=I.match(/^(.*)-transition$/);M=M.concat(B&&m[B[1]]&&m[B[1]].transition?c.validateSpec({key:I,value:a[I],valueSpec:f.transition,validateSpec:c.validateSpec,style:w,styleSpec:f}):m[I]?c.validateSpec({key:I,value:a[I],valueSpec:m[I],validateSpec:c.validateSpec,style:w,styleSpec:f}):[new Rt(I,a[I],`unknown property "${I}"`)])}return M}function $h(c){const a=c.value,f=c.styleSpec,m=f.sky,w=c.style,M=Un(a);if(a===void 0)return[];if(M!=="object")return[new Rt("sky",a,`object expected, ${M} found`)];let z=[];for(const I in a)z=z.concat(m[I]?c.validateSpec({key:I,value:a[I],valueSpec:m[I],style:w,styleSpec:f}):[new Rt(I,a[I],`unknown property "${I}"`)]);return z}function Xo(c){const a=c.value,f=c.styleSpec,m=f.terrain,w=c.style;let M=[];const z=Un(a);if(a===void 0)return M;if(z!=="object")return M=M.concat([new Rt("terrain",a,`object expected, ${z} found`)]),M;for(const I in a)M=M.concat(m[I]?c.validateSpec({key:I,value:a[I],valueSpec:m[I],validateSpec:c.validateSpec,style:w,styleSpec:f}):[new Rt(I,a[I],`unknown property "${I}"`)]);return M}function Wu(c){let a=[];const f=c.value,m=c.key;if(Array.isArray(f)){const w=[],M=[];for(const z in f)f[z].id&&w.includes(f[z].id)&&a.push(new Rt(m,f,`all the sprites' ids must be unique, but ${f[z].id} is duplicated`)),w.push(f[z].id),f[z].url&&M.includes(f[z].url)&&a.push(new Rt(m,f,`all the sprites' URLs must be unique, but ${f[z].url} is duplicated`)),M.push(f[z].url),a=a.concat(Ja({key:`${m}[${z}]`,value:f[z],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return a}return Ts({key:m,value:f})}const vu={"*":()=>[],array:qu,boolean:function(c){const a=c.value,f=c.key,m=Un(a);return m!=="boolean"?[new Rt(f,a,`boolean expected, ${m} found`)]:[]},number:Ys,color:function(c){const a=c.key,f=c.value,m=Un(f);return m!=="string"?[new Rt(a,f,`color expected, ${m} found`)]:Nn.parse(String(f))?[]:[new Rt(a,f,`color expected, "${f}" found`)]},constants:wc,enum:Eo,filter:Bh,function:td,layer:rd,object:Ja,source:yu,light:Sc,sky:$h,terrain:Xo,projection:function(c){const a=c.value,f=c.styleSpec,m=f.projection,w=c.style,M=Un(a);if(a===void 0)return[];if(M!=="object")return[new Rt("projection",a,`object expected, ${M} found`)];let z=[];for(const I in a)z=z.concat(m[I]?c.validateSpec({key:I,value:a[I],valueSpec:m[I],style:w,styleSpec:f}):[new Rt(I,a[I],`unknown property "${I}"`)]);return z},string:Ts,formatted:function(c){return Ts(c).length===0?[]:Hl(c)},resolvedImage:function(c){return Ts(c).length===0?[]:Hl(c)},padding:function(c){const a=c.key,f=c.value;if(Un(f)==="array"){if(f.length<1||f.length>4)return[new Rt(a,f,`padding requires 1 to 4 values; ${f.length} values found`)];const m={type:"number"};let w=[];for(let M=0;M<f.length;M++)w=w.concat(c.validateSpec({key:`${a}[${M}]`,value:f[M],validateSpec:c.validateSpec,valueSpec:m}));return w}return Ys({key:a,value:f,valueSpec:{}})},variableAnchorOffsetCollection:function(c){const a=c.key,f=c.value,m=Un(f),w=c.styleSpec;if(m!=="array"||f.length<1||f.length%2!=0)return[new Rt(a,f,"variableAnchorOffsetCollection requires a non-empty array of even length")];let M=[];for(let z=0;z<f.length;z+=2)M=M.concat(Eo({key:`${a}[${z}]`,value:f[z],valueSpec:w.layout_symbol["text-anchor"]})),M=M.concat(qu({key:`${a}[${z+1}]`,value:f[z+1],valueSpec:{length:2,value:"number"},validateSpec:c.validateSpec,style:c.style,styleSpec:w}));return M},sprite:Wu};function Xi(c){const a=c.value,f=c.valueSpec,m=c.styleSpec;return c.validateSpec=Xi,f.expression&&Hd(Ui(a))?td(c):f.expression&&Cr(Ia(a))?Hl(c):f.type&&vu[f.type]?vu[f.type](c):Ja(Fi({},c,{valueSpec:f.type?m[f.type]:f}))}function Oa(c){const a=c.value,f=c.key,m=Ts(c);return m.length||(a.indexOf("{fontstack}")===-1&&m.push(new Rt(f,a,'"glyphs" url must include a "{fontstack}" token')),a.indexOf("{range}")===-1&&m.push(new Rt(f,a,'"glyphs" url must include a "{range}" token'))),m}function Ea(c,a=ke){let f=[];return f=f.concat(Xi({key:"",value:c,valueSpec:a.$root,styleSpec:a,style:c,validateSpec:Xi,objectElementValidators:{glyphs:Oa,"*":()=>[]}})),c.constants&&(f=f.concat(wc({key:"constants",value:c.constants}))),Al(f)}function ja(c){return function(a){return c({...a,validateSpec:Xi})}}function Al(c){return[].concat(c).sort(((a,f)=>a.line-f.line))}function Wa(c){return function(...a){return Al(c.apply(this,a))}}Ea.source=Wa(ja(yu)),Ea.sprite=Wa(ja(Wu)),Ea.glyphs=Wa(ja(Oa)),Ea.light=Wa(ja(Sc)),Ea.sky=Wa(ja($h)),Ea.terrain=Wa(ja(Xo)),Ea.layer=Wa(ja(rd)),Ea.filter=Wa(ja(Bh)),Ea.paintProperty=Wa(ja(Ko)),Ea.layoutProperty=Wa(ja(Fh));const co=Ea,Ds=co.light,Gh=co.sky,xu=co.paintProperty,Hu=co.layoutProperty;function Zu(c,a){let f=!1;if(a&&a.length)for(const m of a)c.fire(new Lt(new Error(m.message))),f=!0;return f}class na{constructor(a,f,m){const w=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;const z=new Int32Array(this.arrayBuffer);a=z[0],this.d=(f=z[1])+2*(m=z[2]);for(let B=0;B<this.d*this.d;B++){const q=z[3+B],Z=z[3+B+1];w.push(q===Z?null:z.subarray(q,Z))}const I=z[3+w.length+1];this.keys=z.subarray(z[3+w.length],I),this.bboxes=z.subarray(I),this.insert=this._insertReadonly}else{this.d=f+2*m;for(let z=0;z<this.d*this.d;z++)w.push([]);this.keys=[],this.bboxes=[]}this.n=f,this.extent=a,this.padding=m,this.scale=f/a,this.uid=0;const M=m/f*a;this.min=-M,this.max=a+M}insert(a,f,m,w,M){this._forEachCell(f,m,w,M,this._insertCell,this.uid++,void 0,void 0),this.keys.push(a),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(w),this.bboxes.push(M)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(a,f,m,w,M,z){this.cells[M].push(z)}query(a,f,m,w,M){const z=this.min,I=this.max;if(a<=z&&f<=z&&I<=m&&I<=w&&!M)return Array.prototype.slice.call(this.keys);{const B=[];return this._forEachCell(a,f,m,w,this._queryCell,B,{},M),B}}_queryCell(a,f,m,w,M,z,I,B){const q=this.cells[M];if(q!==null){const Z=this.keys,J=this.bboxes;for(let oe=0;oe<q.length;oe++){const ce=q[oe];if(I[ce]===void 0){const xe=4*ce;(B?B(J[xe+0],J[xe+1],J[xe+2],J[xe+3]):a<=J[xe+2]&&f<=J[xe+3]&&m>=J[xe+0]&&w>=J[xe+1])?(I[ce]=!0,z.push(Z[ce])):I[ce]=!1}}}}_forEachCell(a,f,m,w,M,z,I,B){const q=this._convertToCellCoord(a),Z=this._convertToCellCoord(f),J=this._convertToCellCoord(m),oe=this._convertToCellCoord(w);for(let ce=q;ce<=J;ce++)for(let xe=Z;xe<=oe;xe++){const ve=this.d*xe+ce;if((!B||B(this._convertFromCellCoord(ce),this._convertFromCellCoord(xe),this._convertFromCellCoord(ce+1),this._convertFromCellCoord(xe+1)))&&M.call(this,a,f,m,w,ve,z,I,B))return}}_convertFromCellCoord(a){return(a-this.padding)/this.scale}_convertToCellCoord(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const a=this.cells,f=3+this.cells.length+1+1;let m=0;for(let z=0;z<this.cells.length;z++)m+=this.cells[z].length;const w=new Int32Array(f+m+this.keys.length+this.bboxes.length);w[0]=this.extent,w[1]=this.n,w[2]=this.padding;let M=f;for(let z=0;z<a.length;z++){const I=a[z];w[3+z]=M,w.set(I,M),M+=I.length}return w[3+a.length]=M,w.set(this.keys,M),M+=this.keys.length,w[3+a.length+1]=M,w.set(this.bboxes,M),M+=this.bboxes.length,w.buffer}static serialize(a,f){const m=a.toArrayBuffer();return f&&f.push(m),{buffer:m}}static deserialize(a){return new na(a.buffer)}}const Bn={};function Yt(c,a,f={}){if(Bn[c])throw new Error(`${c} is already registered.`);Object.defineProperty(a,"_classRegistryKey",{value:c,writeable:!1}),Bn[c]={klass:a,omit:f.omit||[],shallow:f.shallow||[]}}Yt("Object",Object),Yt("TransferableGridIndex",na),Yt("Color",Nn),Yt("Error",Error),Yt("AJAXError",Xt),Yt("ResolvedImage",So),Yt("StylePropertyFunction",gu),Yt("StyleExpression",Ct,{omit:["_evaluator"]}),Yt("ZoomDependentExpression",ki),Yt("ZoomConstantExpression",zn),Yt("CompoundExpression",Zo,{omit:["_evaluate"]});for(const c in Xc)Xc[c]._classRegistryKey||Yt(`Expression_${c}`,Xc[c]);function kl(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function ds(c){return c.$name||c.constructor._classRegistryKey}function Uh(c){return!(function(a){if(a===null||typeof a!="object")return!1;const f=ds(a);return!(!f||f==="Object")})(c)&&(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||c instanceof Error||kl(c)||ge(c)||ArrayBuffer.isView(c)||c instanceof ImageData)}function Ms(c,a){if(Uh(c))return(kl(c)||ge(c))&&a&&a.push(c),ArrayBuffer.isView(c)&&a&&a.push(c.buffer),c instanceof ImageData&&a&&a.push(c.data.buffer),c;if(Array.isArray(c)){const M=[];for(const z of c)M.push(Ms(z,a));return M}if(typeof c!="object")throw new Error("can't serialize object of type "+typeof c);const f=ds(c);if(!f)throw new Error(`can't serialize object of unregistered class ${c.constructor.name}`);if(!Bn[f])throw new Error(`${f} is not registered.`);const{klass:m}=Bn[f],w=m.serialize?m.serialize(c,a):{};if(m.serialize){if(a&&w===a[a.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const M in c){if(!c.hasOwnProperty(M)||Bn[f].omit.indexOf(M)>=0)continue;const z=c[M];w[M]=Bn[f].shallow.indexOf(M)>=0?z:Ms(z,a)}c instanceof Error&&(w.message=c.message)}if(w.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(w.$name=f),w}function Zl(c){if(Uh(c))return c;if(Array.isArray(c))return c.map(Zl);if(typeof c!="object")throw new Error("can't deserialize object of type "+typeof c);const a=ds(c)||"Object";if(!Bn[a])throw new Error(`can't deserialize unregistered class ${a}`);const{klass:f}=Bn[a];if(!f)throw new Error(`can't deserialize unregistered class ${a}`);if(f.deserialize)return f.deserialize(c);const m=Object.create(f.prototype);for(const w of Object.keys(c)){if(w==="$name")continue;const M=c[w];m[w]=Bn[a].shallow.indexOf(w)>=0?M:Zl(M)}return m}class Ku{constructor(){this.first=!0}update(a,f){const m=Math.floor(a);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=a,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=f):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=f),a!==this.lastZoom&&(this.lastZoom=a,this.lastFloorZoom=m,!0))}}const En={"Latin-1 Supplement":c=>c>=128&&c<=255,"Hangul Jamo":c=>c>=4352&&c<=4607,Khmer:c=>c>=6016&&c<=6143,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Katakana:c=>c>=12448&&c<=12543,Kanbun:c=>c>=12688&&c<=12703,"CJK Strokes":c=>c>=12736&&c<=12783,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"Private Use Area":c=>c>=57344&&c<=63743,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function be(c){for(const a of c)if(Yl(a.charCodeAt(0)))return!0;return!1}function Xu(c){for(const a of c)if(!vn(a.charCodeAt(0)))return!1;return!0}function Kl(c){const a=c.map((f=>{try{return new RegExp(`\\p{sc=${f}}`,"u").source}catch{return null}})).filter((f=>f));return new RegExp(a.join("|"),"u")}const hs=Kl(["Arab","Dupl","Mong","Ougr","Syrc"]);function vn(c){return!hs.test(String.fromCodePoint(c))}const Xl=Kl(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Yl(c){return!(c!==746&&c!==747&&(c<4352||!(En["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||En["CJK Compatibility"](c)||En["CJK Strokes"](c)||!(!En["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||En["Enclosed CJK Letters and Months"](c)||En["Ideographic Description Characters"](c)||En.Kanbun(c)||En.Katakana(c)&&c!==12540||!(!En["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!En["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||En["Vertical Forms"](c)||En["Yijing Hexagram Symbols"](c)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(c))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(c))||Xl.test(String.fromCodePoint(c)))))}function Jl(c){return!(Yl(c)||(function(a){return!!(En["Latin-1 Supplement"](a)&&(a===167||a===169||a===174||a===177||a===188||a===189||a===190||a===215||a===247)||En["General Punctuation"](a)&&(a===8214||a===8224||a===8225||a===8240||a===8241||a===8251||a===8252||a===8258||a===8263||a===8264||a===8265||a===8273)||En["Letterlike Symbols"](a)||En["Number Forms"](a)||En["Miscellaneous Technical"](a)&&(a>=8960&&a<=8967||a>=8972&&a<=8991||a>=8996&&a<=9e3||a===9003||a>=9085&&a<=9114||a>=9150&&a<=9165||a===9167||a>=9169&&a<=9179||a>=9186&&a<=9215)||En["Control Pictures"](a)&&a!==9251||En["Optical Character Recognition"](a)||En["Enclosed Alphanumerics"](a)||En["Geometric Shapes"](a)||En["Miscellaneous Symbols"](a)&&!(a>=9754&&a<=9759)||En["Miscellaneous Symbols and Arrows"](a)&&(a>=11026&&a<=11055||a>=11088&&a<=11097||a>=11192&&a<=11243)||En["CJK Symbols and Punctuation"](a)||En.Katakana(a)||En["Private Use Area"](a)||En["CJK Compatibility Forms"](a)||En["Small Form Variants"](a)||En["Halfwidth and Fullwidth Forms"](a)||a===8734||a===8756||a===8757||a>=9984&&a<=10087||a>=10102&&a<=10131||a===65532||a===65533)})(c))}const _u=Kl(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Kd(c){return _u.test(String.fromCodePoint(c))}function nd(c,a){return!(!a&&Kd(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||En.Khmer(c))}function Vh(c){for(const a of c)if(Kd(a.charCodeAt(0)))return!0;return!1}const Qa=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(c){this.pluginStatus=c.pluginStatus,this.pluginURL=c.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(c){this.applyArabicShaping=c.applyArabicShaping,this.processBidirectionalText=c.processBidirectionalText,this.processStyledBidirectionalText=c.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Pn{constructor(a,f){this.zoom=a,f?(this.now=f.now,this.fadeDuration=f.fadeDuration,this.zoomHistory=f.zoomHistory,this.transition=f.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ku,this.transition={})}isSupportedScript(a){return(function(f,m){for(const w of f)if(!nd(w.charCodeAt(0),m))return!1;return!0})(a,Qa.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const a=this.zoom,f=a-Math.floor(a),m=this.crossFadingFactor();return a>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:f+(1-f)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*f}}}class Ao{constructor(a,f){this.property=a,this.value=f,this.expression=(function(m,w){if(Hd(m))return new gu(m,w);if(Cr(m)){const M=yi(m,w);if(M.result==="error")throw new Error(M.value.map((z=>`${z.key}: ${z.message}`)).join(", "));return M.value}{let M=m;return w.type==="color"&&typeof m=="string"?M=Nn.parse(m):w.type!=="padding"||typeof m!="number"&&!Array.isArray(m)?w.type==="variableAnchorOffsetCollection"&&Array.isArray(m)&&(M=jo.parse(m)):M=wa.parse(m),{kind:"constant",evaluate:()=>M}}})(f===void 0?a.specification.default:f,a.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(a,f,m){return this.property.possiblyEvaluate(this,a,f,m)}}class Xd{constructor(a){this.property=a,this.value=new Ao(a,void 0)}transitioned(a,f){return new pg(this.property,this.value,f,he({},a.transition,this.transition),a.now)}untransitioned(){return new pg(this.property,this.value,null,{},0)}}class qh{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues)}getValue(a){return _e(this._values[a].value.value)}setValue(a,f){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new Xd(this._values[a].property)),this._values[a].value=new Ao(this._values[a].property,f===null?void 0:_e(f))}getTransition(a){return _e(this._values[a].transition)}setTransition(a,f){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new Xd(this._values[a].property)),this._values[a].transition=_e(f)||void 0}serialize(){const a={};for(const f of Object.keys(this._values)){const m=this.getValue(f);m!==void 0&&(a[f]=m);const w=this.getTransition(f);w!==void 0&&(a[`${f}-transition`]=w)}return a}transitioned(a,f){const m=new Yd(this._properties);for(const w of Object.keys(this._values))m._values[w]=this._values[w].transitioned(a,f._values[w]);return m}untransitioned(){const a=new Yd(this._properties);for(const f of Object.keys(this._values))a._values[f]=this._values[f].untransitioned();return a}}class pg{constructor(a,f,m,w,M){this.property=a,this.value=f,this.begin=M+w.delay||0,this.end=this.begin+w.duration||0,a.specification.transition&&(w.delay||w.duration)&&(this.prior=m)}possiblyEvaluate(a,f,m){const w=a.now||0,M=this.value.possiblyEvaluate(a,f,m),z=this.prior;if(z){if(w>this.end)return this.prior=null,M;if(this.value.isDataDriven())return this.prior=null,M;if(w<this.begin)return z.possiblyEvaluate(a,f,m);{const I=(w-this.begin)/(this.end-this.begin);return this.property.interpolate(z.possiblyEvaluate(a,f,m),M,(function(B){if(B<=0)return 0;if(B>=1)return 1;const q=B*B,Z=q*B;return 4*(B<.5?Z:3*(B-q)+Z-.75)})(I))}}return M}}class Yd{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)}possiblyEvaluate(a,f,m){const w=new bu(this._properties);for(const M of Object.keys(this._values))w._values[M]=this._values[M].possiblyEvaluate(a,f,m);return w}hasTransition(){for(const a of Object.keys(this._values))if(this._values[a].prior)return!0;return!1}}class ha{constructor(a){this._properties=a,this._values=Object.create(a.defaultPropertyValues)}hasValue(a){return this._values[a].value!==void 0}getValue(a){return _e(this._values[a].value)}setValue(a,f){this._values[a]=new Ao(this._values[a].property,f===null?void 0:_e(f))}serialize(){const a={};for(const f of Object.keys(this._values)){const m=this.getValue(f);m!==void 0&&(a[f]=m)}return a}possiblyEvaluate(a,f,m){const w=new bu(this._properties);for(const M of Object.keys(this._values))w._values[M]=this._values[M].possiblyEvaluate(a,f,m);return w}}class Ha{constructor(a,f,m){this.property=a,this.value=f,this.parameters=m}isConstant(){return this.value.kind==="constant"}constantOr(a){return this.value.kind==="constant"?this.value.value:a}evaluate(a,f,m,w){return this.property.evaluate(this.value,this.parameters,a,f,m,w)}}class bu{constructor(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)}get(a){return this._values[a]}}class Ar{constructor(a){this.specification=a}possiblyEvaluate(a,f){if(a.isDataDriven())throw new Error("Value should not be data driven");return a.expression.evaluate(f)}interpolate(a,f,m){const w=Tr[this.specification.type];return w?w(a,f,m):a}}class qr{constructor(a,f){this.specification=a,this.overrides=f}possiblyEvaluate(a,f,m,w){return new Ha(this,a.expression.kind==="constant"||a.expression.kind==="camera"?{kind:"constant",value:a.expression.evaluate(f,null,{},m,w)}:a.expression,f)}interpolate(a,f,m){if(a.value.kind!=="constant"||f.value.kind!=="constant")return a;if(a.value.value===void 0||f.value.value===void 0)return new Ha(this,{kind:"constant",value:void 0},a.parameters);const w=Tr[this.specification.type];if(w){const M=w(a.value.value,f.value.value,m);return new Ha(this,{kind:"constant",value:M},a.parameters)}return a}evaluate(a,f,m,w,M,z){return a.kind==="constant"?a.value:a.evaluate(f,m,w,M,z)}}class wu extends qr{possiblyEvaluate(a,f,m,w){if(a.value===void 0)return new Ha(this,{kind:"constant",value:void 0},f);if(a.expression.kind==="constant"){const M=a.expression.evaluate(f,null,{},m,w),z=a.property.specification.type==="resolvedImage"&&typeof M!="string"?M.name:M,I=this._calculate(z,z,z,f);return new Ha(this,{kind:"constant",value:I},f)}if(a.expression.kind==="camera"){const M=this._calculate(a.expression.evaluate({zoom:f.zoom-1}),a.expression.evaluate({zoom:f.zoom}),a.expression.evaluate({zoom:f.zoom+1}),f);return new Ha(this,{kind:"constant",value:M},f)}return new Ha(this,a.expression,f)}evaluate(a,f,m,w,M,z){if(a.kind==="source"){const I=a.evaluate(f,m,w,M,z);return this._calculate(I,I,I,f)}return a.kind==="composite"?this._calculate(a.evaluate({zoom:Math.floor(f.zoom)-1},m,w),a.evaluate({zoom:Math.floor(f.zoom)},m,w),a.evaluate({zoom:Math.floor(f.zoom)+1},m,w),f):a.value}_calculate(a,f,m,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:a,to:f}:{from:m,to:f}}interpolate(a){return a}}class Su{constructor(a){this.specification=a}possiblyEvaluate(a,f,m,w){if(a.value!==void 0){if(a.expression.kind==="constant"){const M=a.expression.evaluate(f,null,{},m,w);return this._calculate(M,M,M,f)}return this._calculate(a.expression.evaluate(new Pn(Math.floor(f.zoom-1),f)),a.expression.evaluate(new Pn(Math.floor(f.zoom),f)),a.expression.evaluate(new Pn(Math.floor(f.zoom+1),f)),f)}}_calculate(a,f,m,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:a,to:f}:{from:m,to:f}}interpolate(a){return a}}class Eu{constructor(a){this.specification=a}possiblyEvaluate(a,f,m,w){return!!a.expression.evaluate(f,null,{},m,w)}interpolate(){return!1}}class D{constructor(a){this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const f in a){const m=a[f];m.specification.overridable&&this.overridableProperties.push(f);const w=this.defaultPropertyValues[f]=new Ao(m,void 0),M=this.defaultTransitionablePropertyValues[f]=new Xd(m);this.defaultTransitioningPropertyValues[f]=M.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=w.possiblyEvaluate({})}}}Yt("DataDrivenProperty",qr),Yt("DataConstantProperty",Ar),Yt("CrossFadedDataDrivenProperty",wu),Yt("CrossFadedProperty",Su),Yt("ColorRampProperty",Eu);const i="-transition";class p extends Wt{constructor(a,f){if(super(),this.id=a.id,this.type=a.type,this._featureFilter={filter:()=>!0,needGeometry:!1},a.type!=="custom"&&(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,a.type!=="background"&&(this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter),f.layout&&(this._unevaluatedLayout=new ha(f.layout)),f.paint)){this._transitionablePaint=new qh(f.paint);for(const m in a.paint)this.setPaintProperty(m,a.paint[m],{validate:!1});for(const m in a.layout)this.setLayoutProperty(m,a.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new bu(f.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(a){return a==="visibility"?this.visibility:this._unevaluatedLayout.getValue(a)}setLayoutProperty(a,f,m={}){f!=null&&this._validate(Hu,`layers.${this.id}.layout.${a}`,a,f,m)||(a!=="visibility"?this._unevaluatedLayout.setValue(a,f):this.visibility=f)}getPaintProperty(a){return a.endsWith(i)?this._transitionablePaint.getTransition(a.slice(0,-11)):this._transitionablePaint.getValue(a)}setPaintProperty(a,f,m={}){if(f!=null&&this._validate(xu,`layers.${this.id}.paint.${a}`,a,f,m))return!1;if(a.endsWith(i))return this._transitionablePaint.setTransition(a.slice(0,-11),f||void 0),!1;{const w=this._transitionablePaint._values[a],M=w.property.specification["property-type"]==="cross-faded-data-driven",z=w.value.isDataDriven(),I=w.value;this._transitionablePaint.setValue(a,f),this._handleSpecialPaintPropertyUpdate(a);const B=this._transitionablePaint._values[a].value;return B.isDataDriven()||z||M||this._handleOverridablePaintPropertyUpdate(a,I,B)}}_handleSpecialPaintPropertyUpdate(a){}_handleOverridablePaintPropertyUpdate(a,f,m){return!1}isHidden(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||this.visibility==="none"}updateTransitions(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(a,f){a.getCrossfadeParameters&&(this._crossfadeParameters=a.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a,void 0,f)),this.paint=this._transitioningPaint.possiblyEvaluate(a,void 0,f)}serialize(){const a={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(a.layout=a.layout||{},a.layout.visibility=this.visibility),Ce(a,((f,m)=>!(f===void 0||m==="layout"&&!Object.keys(f).length||m==="paint"&&!Object.keys(f).length)))}_validate(a,f,m,w,M={}){return(!M||M.validate!==!1)&&Zu(this,a.call(co,{key:f,layerType:this.type,objectKey:m,value:w,styleSpec:ke,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const a in this.paint._values){const f=this.paint.get(a);if(f instanceof Ha&&Jc(f.property.specification)&&(f.value.kind==="source"||f.value.kind==="composite")&&f.value.isStateDependent)return!0}return!1}}const _={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class b{constructor(a,f){this._structArray=a,this._pos1=f*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class T{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(a,f){return a._trim(),f&&(a.isTransferred=!0,f.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}}static deserialize(a){const f=Object.create(this.prototype);return f.arrayBuffer=a.arrayBuffer,f.length=a.length,f.capacity=a.arrayBuffer.byteLength/f.bytesPerElement,f._refreshViews(),f}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(a){this.reserve(a),this.length=a}reserve(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const f=this.uint8;this._refreshViews(),f&&this.uint8.set(f)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function j(c,a=1){let f=0,m=0;return{members:c.map((w=>{const M=_[w.type].BYTES_PER_ELEMENT,z=f=$(f,Math.max(a,M)),I=w.components||1;return m=Math.max(m,M),f+=M*I,{name:w.name,type:w.type,components:I,offset:z}})),size:$(f,Math.max(m,a)),alignment:a}}function $(c,a){return Math.ceil(c/a)*a}class V extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,f){const m=this.length;return this.resize(m+1),this.emplace(m,a,f)}emplace(a,f,m){const w=2*a;return this.int16[w+0]=f,this.int16[w+1]=m,a}}V.prototype.bytesPerElement=4,Yt("StructArrayLayout2i4",V);class K extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,f,m){const w=this.length;return this.resize(w+1),this.emplace(w,a,f,m)}emplace(a,f,m,w){const M=3*a;return this.int16[M+0]=f,this.int16[M+1]=m,this.int16[M+2]=w,a}}K.prototype.bytesPerElement=6,Yt("StructArrayLayout3i6",K);class te extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,f,m,w){const M=this.length;return this.resize(M+1),this.emplace(M,a,f,m,w)}emplace(a,f,m,w,M){const z=4*a;return this.int16[z+0]=f,this.int16[z+1]=m,this.int16[z+2]=w,this.int16[z+3]=M,a}}te.prototype.bytesPerElement=8,Yt("StructArrayLayout4i8",te);class re extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,f,m,w,M,z){const I=this.length;return this.resize(I+1),this.emplace(I,a,f,m,w,M,z)}emplace(a,f,m,w,M,z,I){const B=6*a;return this.int16[B+0]=f,this.int16[B+1]=m,this.int16[B+2]=w,this.int16[B+3]=M,this.int16[B+4]=z,this.int16[B+5]=I,a}}re.prototype.bytesPerElement=12,Yt("StructArrayLayout2i4i12",re);class ye extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,f,m,w,M,z){const I=this.length;return this.resize(I+1),this.emplace(I,a,f,m,w,M,z)}emplace(a,f,m,w,M,z,I){const B=4*a,q=8*a;return this.int16[B+0]=f,this.int16[B+1]=m,this.uint8[q+4]=w,this.uint8[q+5]=M,this.uint8[q+6]=z,this.uint8[q+7]=I,a}}ye.prototype.bytesPerElement=8,Yt("StructArrayLayout2i4ub8",ye);class we extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,f){const m=this.length;return this.resize(m+1),this.emplace(m,a,f)}emplace(a,f,m){const w=2*a;return this.float32[w+0]=f,this.float32[w+1]=m,a}}we.prototype.bytesPerElement=8,Yt("StructArrayLayout2f8",we);class Te extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,f,m,w,M,z,I,B,q,Z){const J=this.length;return this.resize(J+1),this.emplace(J,a,f,m,w,M,z,I,B,q,Z)}emplace(a,f,m,w,M,z,I,B,q,Z,J){const oe=10*a;return this.uint16[oe+0]=f,this.uint16[oe+1]=m,this.uint16[oe+2]=w,this.uint16[oe+3]=M,this.uint16[oe+4]=z,this.uint16[oe+5]=I,this.uint16[oe+6]=B,this.uint16[oe+7]=q,this.uint16[oe+8]=Z,this.uint16[oe+9]=J,a}}Te.prototype.bytesPerElement=20,Yt("StructArrayLayout10ui20",Te);class je extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,f,m,w,M,z,I,B,q,Z,J,oe){const ce=this.length;return this.resize(ce+1),this.emplace(ce,a,f,m,w,M,z,I,B,q,Z,J,oe)}emplace(a,f,m,w,M,z,I,B,q,Z,J,oe,ce){const xe=12*a;return this.int16[xe+0]=f,this.int16[xe+1]=m,this.int16[xe+2]=w,this.int16[xe+3]=M,this.uint16[xe+4]=z,this.uint16[xe+5]=I,this.uint16[xe+6]=B,this.uint16[xe+7]=q,this.int16[xe+8]=Z,this.int16[xe+9]=J,this.int16[xe+10]=oe,this.int16[xe+11]=ce,a}}je.prototype.bytesPerElement=24,Yt("StructArrayLayout4i4ui4i24",je);class Fe extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,f,m){const w=this.length;return this.resize(w+1),this.emplace(w,a,f,m)}emplace(a,f,m,w){const M=3*a;return this.float32[M+0]=f,this.float32[M+1]=m,this.float32[M+2]=w,a}}Fe.prototype.bytesPerElement=12,Yt("StructArrayLayout3f12",Fe);class $e extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a){const f=this.length;return this.resize(f+1),this.emplace(f,a)}emplace(a,f){return this.uint32[1*a+0]=f,a}}$e.prototype.bytesPerElement=4,Yt("StructArrayLayout1ul4",$e);class We extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,f,m,w,M,z,I,B,q){const Z=this.length;return this.resize(Z+1),this.emplace(Z,a,f,m,w,M,z,I,B,q)}emplace(a,f,m,w,M,z,I,B,q,Z){const J=10*a,oe=5*a;return this.int16[J+0]=f,this.int16[J+1]=m,this.int16[J+2]=w,this.int16[J+3]=M,this.int16[J+4]=z,this.int16[J+5]=I,this.uint32[oe+3]=B,this.uint16[J+8]=q,this.uint16[J+9]=Z,a}}We.prototype.bytesPerElement=20,Yt("StructArrayLayout6i1ul2ui20",We);class Le extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,f,m,w,M,z){const I=this.length;return this.resize(I+1),this.emplace(I,a,f,m,w,M,z)}emplace(a,f,m,w,M,z,I){const B=6*a;return this.int16[B+0]=f,this.int16[B+1]=m,this.int16[B+2]=w,this.int16[B+3]=M,this.int16[B+4]=z,this.int16[B+5]=I,a}}Le.prototype.bytesPerElement=12,Yt("StructArrayLayout2i2i2i12",Le);class et extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,f,m,w,M){const z=this.length;return this.resize(z+1),this.emplace(z,a,f,m,w,M)}emplace(a,f,m,w,M,z){const I=4*a,B=8*a;return this.float32[I+0]=f,this.float32[I+1]=m,this.float32[I+2]=w,this.int16[B+6]=M,this.int16[B+7]=z,a}}et.prototype.bytesPerElement=16,Yt("StructArrayLayout2f1f2i16",et);class rt extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,f,m,w,M,z){const I=this.length;return this.resize(I+1),this.emplace(I,a,f,m,w,M,z)}emplace(a,f,m,w,M,z,I){const B=16*a,q=4*a,Z=8*a;return this.uint8[B+0]=f,this.uint8[B+1]=m,this.float32[q+1]=w,this.float32[q+2]=M,this.int16[Z+6]=z,this.int16[Z+7]=I,a}}rt.prototype.bytesPerElement=16,Yt("StructArrayLayout2ub2f2i16",rt);class gt extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,f,m){const w=this.length;return this.resize(w+1),this.emplace(w,a,f,m)}emplace(a,f,m,w){const M=3*a;return this.uint16[M+0]=f,this.uint16[M+1]=m,this.uint16[M+2]=w,a}}gt.prototype.bytesPerElement=6,Yt("StructArrayLayout3ui6",gt);class Bt extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,f,m,w,M,z,I,B,q,Z,J,oe,ce,xe,ve,Oe,Be){const dt=this.length;return this.resize(dt+1),this.emplace(dt,a,f,m,w,M,z,I,B,q,Z,J,oe,ce,xe,ve,Oe,Be)}emplace(a,f,m,w,M,z,I,B,q,Z,J,oe,ce,xe,ve,Oe,Be,dt){const Je=24*a,Qe=12*a,Dt=48*a;return this.int16[Je+0]=f,this.int16[Je+1]=m,this.uint16[Je+2]=w,this.uint16[Je+3]=M,this.uint32[Qe+2]=z,this.uint32[Qe+3]=I,this.uint32[Qe+4]=B,this.uint16[Je+10]=q,this.uint16[Je+11]=Z,this.uint16[Je+12]=J,this.float32[Qe+7]=oe,this.float32[Qe+8]=ce,this.uint8[Dt+36]=xe,this.uint8[Dt+37]=ve,this.uint8[Dt+38]=Oe,this.uint32[Qe+10]=Be,this.int16[Je+22]=dt,a}}Bt.prototype.bytesPerElement=48,Yt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Bt);class ir extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,f,m,w,M,z,I,B,q,Z,J,oe,ce,xe,ve,Oe,Be,dt,Je,Qe,Dt,Jt,yr,Zr,dr,pr,zr,Er){const br=this.length;return this.resize(br+1),this.emplace(br,a,f,m,w,M,z,I,B,q,Z,J,oe,ce,xe,ve,Oe,Be,dt,Je,Qe,Dt,Jt,yr,Zr,dr,pr,zr,Er)}emplace(a,f,m,w,M,z,I,B,q,Z,J,oe,ce,xe,ve,Oe,Be,dt,Je,Qe,Dt,Jt,yr,Zr,dr,pr,zr,Er,br){const Ot=32*a,wr=16*a;return this.int16[Ot+0]=f,this.int16[Ot+1]=m,this.int16[Ot+2]=w,this.int16[Ot+3]=M,this.int16[Ot+4]=z,this.int16[Ot+5]=I,this.int16[Ot+6]=B,this.int16[Ot+7]=q,this.uint16[Ot+8]=Z,this.uint16[Ot+9]=J,this.uint16[Ot+10]=oe,this.uint16[Ot+11]=ce,this.uint16[Ot+12]=xe,this.uint16[Ot+13]=ve,this.uint16[Ot+14]=Oe,this.uint16[Ot+15]=Be,this.uint16[Ot+16]=dt,this.uint16[Ot+17]=Je,this.uint16[Ot+18]=Qe,this.uint16[Ot+19]=Dt,this.uint16[Ot+20]=Jt,this.uint16[Ot+21]=yr,this.uint16[Ot+22]=Zr,this.uint32[wr+12]=dr,this.float32[wr+13]=pr,this.float32[wr+14]=zr,this.uint16[Ot+30]=Er,this.uint16[Ot+31]=br,a}}ir.prototype.bytesPerElement=64,Yt("StructArrayLayout8i15ui1ul2f2ui64",ir);class ur extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a){const f=this.length;return this.resize(f+1),this.emplace(f,a)}emplace(a,f){return this.float32[1*a+0]=f,a}}ur.prototype.bytesPerElement=4,Yt("StructArrayLayout1f4",ur);class mr extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,f,m){const w=this.length;return this.resize(w+1),this.emplace(w,a,f,m)}emplace(a,f,m,w){const M=3*a;return this.uint16[6*a+0]=f,this.float32[M+1]=m,this.float32[M+2]=w,a}}mr.prototype.bytesPerElement=12,Yt("StructArrayLayout1ui2f12",mr);class hr extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,f,m){const w=this.length;return this.resize(w+1),this.emplace(w,a,f,m)}emplace(a,f,m,w){const M=4*a;return this.uint32[2*a+0]=f,this.uint16[M+2]=m,this.uint16[M+3]=w,a}}hr.prototype.bytesPerElement=8,Yt("StructArrayLayout1ul2ui8",hr);class or extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,f){const m=this.length;return this.resize(m+1),this.emplace(m,a,f)}emplace(a,f,m){const w=2*a;return this.uint16[w+0]=f,this.uint16[w+1]=m,a}}or.prototype.bytesPerElement=4,Yt("StructArrayLayout2ui4",or);class xr extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a){const f=this.length;return this.resize(f+1),this.emplace(f,a)}emplace(a,f){return this.uint16[1*a+0]=f,a}}xr.prototype.bytesPerElement=2,Yt("StructArrayLayout1ui2",xr);class Jr extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,f,m,w){const M=this.length;return this.resize(M+1),this.emplace(M,a,f,m,w)}emplace(a,f,m,w,M){const z=4*a;return this.float32[z+0]=f,this.float32[z+1]=m,this.float32[z+2]=w,this.float32[z+3]=M,a}}Jr.prototype.bytesPerElement=16,Yt("StructArrayLayout4f16",Jr);class fr extends b{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new C(this.anchorPointX,this.anchorPointY)}}fr.prototype.size=20;class ar extends We{get(a){return new fr(this,a)}}Yt("CollisionBoxArray",ar);class Hr extends b{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(a){this._structArray.uint8[this._pos1+37]=a}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(a){this._structArray.uint8[this._pos1+38]=a}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(a){this._structArray.uint32[this._pos4+10]=a}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Hr.prototype.size=48;class vi extends Bt{get(a){return new Hr(this,a)}}Yt("PlacedSymbolArray",vi);class an extends b{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(a){this._structArray.uint32[this._pos4+12]=a}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}an.prototype.size=64;class Ln extends ir{get(a){return new an(this,a)}}Yt("SymbolInstanceArray",Ln);class ni extends ur{getoffsetX(a){return this.float32[1*a+0]}}Yt("GlyphOffsetArray",ni);class ia extends K{getx(a){return this.int16[3*a+0]}gety(a){return this.int16[3*a+1]}gettileUnitDistanceFromAnchor(a){return this.int16[3*a+2]}}Yt("SymbolLineVertexArray",ia);class zs extends b{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}zs.prototype.size=12;class In extends mr{get(a){return new zs(this,a)}}Yt("TextAnchorOffsetArray",In);class ho extends b{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ho.prototype.size=8;class Vi extends hr{get(a){return new ho(this,a)}}Yt("FeatureIndexArray",Vi);class qi extends V{}class Da extends V{}class fs extends V{}class Ec extends re{}class Yo extends ye{}class eo extends we{}class ci extends Te{}class Ac extends je{}class Jo extends Fe{}class sn extends $e{}class Vn extends Le{}class Ti extends rt{}class Qo extends gt{}class Ma extends or{}const za=j([{name:"a_pos",components:2,type:"Int16"}],4),{members:Bo}=za;class Cn{constructor(a=[]){this.segments=a}prepareSegment(a,f,m,w){let M=this.segments[this.segments.length-1];return a>Cn.MAX_VERTEX_ARRAY_LENGTH&&me(`Max vertices per segment is ${Cn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${a}`),(!M||M.vertexLength+a>Cn.MAX_VERTEX_ARRAY_LENGTH||M.sortKey!==w)&&(M={vertexOffset:f.length,primitiveOffset:m.length,vertexLength:0,primitiveLength:0},w!==void 0&&(M.sortKey=w),this.segments.push(M)),M}get(){return this.segments}destroy(){for(const a of this.segments)for(const f in a.vaos)a.vaos[f].destroy()}static simpleSegment(a,f,m,w){return new Cn([{vertexOffset:a,primitiveOffset:f,vertexLength:m,primitiveLength:w,vaos:{},sortKey:0}])}}function ps(c,a){return 256*(c=Q(Math.floor(c),0,255))+Q(Math.floor(a),0,255)}Cn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Yt("SegmentVector",Cn);const id=j([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Di={exports:{}},Jd={exports:{}};Jd.exports=function(c,a){var f,m,w,M,z,I,B,q;for(m=c.length-(f=3&c.length),w=a,z=3432918353,I=461845907,q=0;q<m;)B=255&c.charCodeAt(q)|(255&c.charCodeAt(++q))<<8|(255&c.charCodeAt(++q))<<16|(255&c.charCodeAt(++q))<<24,++q,w=27492+(65535&(M=5*(65535&(w=(w^=B=(65535&(B=(B=(65535&B)*z+(((B>>>16)*z&65535)<<16)&4294967295)<<15|B>>>17))*I+(((B>>>16)*I&65535)<<16)&4294967295)<<13|w>>>19))+((5*(w>>>16)&65535)<<16)&4294967295))+((58964+(M>>>16)&65535)<<16);switch(B=0,f){case 3:B^=(255&c.charCodeAt(q+2))<<16;case 2:B^=(255&c.charCodeAt(q+1))<<8;case 1:w^=B=(65535&(B=(B=(65535&(B^=255&c.charCodeAt(q)))*z+(((B>>>16)*z&65535)<<16)&4294967295)<<15|B>>>17))*I+(((B>>>16)*I&65535)<<16)&4294967295}return w^=c.length,w=2246822507*(65535&(w^=w>>>16))+((2246822507*(w>>>16)&65535)<<16)&4294967295,w=3266489909*(65535&(w^=w>>>13))+((3266489909*(w>>>16)&65535)<<16)&4294967295,(w^=w>>>16)>>>0};var Wh=Jd.exports,Hh={exports:{}};Hh.exports=function(c,a){for(var f,m=c.length,w=a^m,M=0;m>=4;)f=1540483477*(65535&(f=255&c.charCodeAt(M)|(255&c.charCodeAt(++M))<<8|(255&c.charCodeAt(++M))<<16|(255&c.charCodeAt(++M))<<24))+((1540483477*(f>>>16)&65535)<<16),w=1540483477*(65535&w)+((1540483477*(w>>>16)&65535)<<16)^(f=1540483477*(65535&(f^=f>>>24))+((1540483477*(f>>>16)&65535)<<16)),m-=4,++M;switch(m){case 3:w^=(255&c.charCodeAt(M+2))<<16;case 2:w^=(255&c.charCodeAt(M+1))<<8;case 1:w=1540483477*(65535&(w^=255&c.charCodeAt(M)))+((1540483477*(w>>>16)&65535)<<16)}return w=1540483477*(65535&(w^=w>>>13))+((1540483477*(w>>>16)&65535)<<16),(w^=w>>>15)>>>0};var Js=Wh,gg=Hh.exports;Di.exports=Js,Di.exports.murmur3=Js,Di.exports.murmur2=gg;var kc=v(Di.exports);class Yu{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(a,f,m,w){this.ids.push(ad(a)),this.positions.push(f,m,w)}getPositions(a){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const f=ad(a);let m=0,w=this.ids.length-1;for(;m<w;){const z=m+w>>1;this.ids[z]>=f?w=z:m=z+1}const M=[];for(;this.ids[m]===f;)M.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return M}static serialize(a,f){const m=new Float64Array(a.ids),w=new Uint32Array(a.positions);return to(m,w,0,m.length-1),f&&f.push(m.buffer,w.buffer),{ids:m,positions:w}}static deserialize(a){const f=new Yu;return f.ids=a.ids,f.positions=a.positions,f.indexed=!0,f}}function ad(c){const a=+c;return!isNaN(a)&&a<=Number.MAX_SAFE_INTEGER?a:kc(String(c))}function to(c,a,f,m){for(;f<m;){const w=c[f+m>>1];let M=f-1,z=m+1;for(;;){do M++;while(c[M]<w);do z--;while(c[z]>w);if(M>=z)break;Yi(c,M,z),Yi(a,3*M,3*z),Yi(a,3*M+1,3*z+1),Yi(a,3*M+2,3*z+2)}z-f<m-z?(to(c,a,f,z),f=z+1):(to(c,a,z+1,m),m=z)}}function Yi(c,a,f){const m=c[a];c[a]=c[f],c[f]=m}Yt("FeaturePositionMap",Yu);class Ql{constructor(a,f){this.gl=a.gl,this.location=f}}class Cc extends Ql{constructor(a,f){super(a,f),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1f(this.location,a))}}class Qd extends Ql{constructor(a,f){super(a,f),this.current=[0,0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]&&a[3]===this.current[3]||(this.current=a,this.gl.uniform4f(this.location,a[0],a[1],a[2],a[3]))}}class mg extends Ql{constructor(a,f){super(a,f),this.current=Nn.transparent}set(a){a.r===this.current.r&&a.g===this.current.g&&a.b===this.current.b&&a.a===this.current.a||(this.current=a,this.gl.uniform4f(this.location,a.r,a.g,a.b,a.a))}}const Au=new Float32Array(16);function On(c){return[ps(255*c.r,255*c.g),ps(255*c.b,255*c.a)]}class eh{constructor(a,f,m){this.value=a,this.uniformNames=f.map((w=>`u_${w}`)),this.type=m}setUniform(a,f,m){a.set(m.constantOr(this.value))}getBinding(a,f,m){return this.type==="color"?new mg(a,f):new Cc(a,f)}}class od{constructor(a,f){this.uniformNames=f.map((m=>`u_${m}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(a,f){this.pixelRatioFrom=f.pixelRatio,this.pixelRatioTo=a.pixelRatio,this.patternFrom=f.tlbr,this.patternTo=a.tlbr}setUniform(a,f,m,w){const M=w==="u_pattern_to"?this.patternTo:w==="u_pattern_from"?this.patternFrom:w==="u_pixel_ratio_to"?this.pixelRatioTo:w==="u_pixel_ratio_from"?this.pixelRatioFrom:null;M&&a.set(M)}getBinding(a,f,m){return m.substr(0,9)==="u_pattern"?new Qd(a,f):new Cc(a,f)}}class Qs{constructor(a,f,m,w){this.expression=a,this.type=m,this.maxValue=0,this.paintVertexAttributes=f.map((M=>({name:`a_${M}`,type:"Float32",components:m==="color"?2:1,offset:0}))),this.paintVertexArray=new w}populatePaintArray(a,f,m,w,M){const z=this.paintVertexArray.length,I=this.expression.evaluate(new Pn(0),f,{},w,[],M);this.paintVertexArray.resize(a),this._setPaintValue(z,a,I)}updatePaintArray(a,f,m,w){const M=this.expression.evaluate({zoom:0},m,w);this._setPaintValue(a,f,M)}_setPaintValue(a,f,m){if(this.type==="color"){const w=On(m);for(let M=a;M<f;M++)this.paintVertexArray.emplace(M,w[0],w[1])}else{for(let w=a;w<f;w++)this.paintVertexArray.emplace(w,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Cl{constructor(a,f,m,w,M,z){this.expression=a,this.uniformNames=f.map((I=>`u_${I}_t`)),this.type=m,this.useIntegerZoom=w,this.zoom=M,this.maxValue=0,this.paintVertexAttributes=f.map((I=>({name:`a_${I}`,type:"Float32",components:m==="color"?4:2,offset:0}))),this.paintVertexArray=new z}populatePaintArray(a,f,m,w,M){const z=this.expression.evaluate(new Pn(this.zoom),f,{},w,[],M),I=this.expression.evaluate(new Pn(this.zoom+1),f,{},w,[],M),B=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(B,a,z,I)}updatePaintArray(a,f,m,w){const M=this.expression.evaluate({zoom:this.zoom},m,w),z=this.expression.evaluate({zoom:this.zoom+1},m,w);this._setPaintValue(a,f,M,z)}_setPaintValue(a,f,m,w){if(this.type==="color"){const M=On(m),z=On(w);for(let I=a;I<f;I++)this.paintVertexArray.emplace(I,M[0],M[1],z[0],z[1])}else{for(let M=a;M<f;M++)this.paintVertexArray.emplace(M,m,w);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(w))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(a,f){const m=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,w=Q(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);a.set(w)}getBinding(a,f,m){return new Cc(a,f)}}class Tc{constructor(a,f,m,w,M,z){this.expression=a,this.type=f,this.useIntegerZoom=m,this.zoom=w,this.layerId=z,this.zoomInPaintVertexArray=new M,this.zoomOutPaintVertexArray=new M}populatePaintArray(a,f,m){const w=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(a),this.zoomOutPaintVertexArray.resize(a),this._setPaintValues(w,a,f.patterns&&f.patterns[this.layerId],m)}updatePaintArray(a,f,m,w,M){this._setPaintValues(a,f,m.patterns&&m.patterns[this.layerId],M)}_setPaintValues(a,f,m,w){if(!w||!m)return;const{min:M,mid:z,max:I}=m,B=w[M],q=w[z],Z=w[I];if(B&&q&&Z)for(let J=a;J<f;J++)this.zoomInPaintVertexArray.emplace(J,q.tl[0],q.tl[1],q.br[0],q.br[1],B.tl[0],B.tl[1],B.br[0],B.br[1],q.pixelRatio,B.pixelRatio),this.zoomOutPaintVertexArray.emplace(J,q.tl[0],q.tl[1],q.br[0],q.br[1],Z.tl[0],Z.tl[1],Z.br[0],Z.br[1],q.pixelRatio,Z.pixelRatio)}upload(a){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=a.createVertexBuffer(this.zoomInPaintVertexArray,id.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=a.createVertexBuffer(this.zoomOutPaintVertexArray,id.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class um{constructor(a,f,m){this.binders={},this._buffers=[];const w=[];for(const M in a.paint._values){if(!m(M))continue;const z=a.paint.get(M);if(!(z instanceof Ha&&Jc(z.property.specification)))continue;const I=vy(M,a.type),B=z.value,q=z.property.specification.type,Z=z.property.useIntegerZoom,J=z.property.specification["property-type"],oe=J==="cross-faded"||J==="cross-faded-data-driven";if(B.kind==="constant")this.binders[M]=oe?new od(B.value,I):new eh(B.value,I,q),w.push(`/u_${M}`);else if(B.kind==="source"||oe){const ce=th(M,q,"source");this.binders[M]=oe?new Tc(B,q,Z,f,ce,a.id):new Qs(B,I,q,ce),w.push(`/a_${M}`)}else{const ce=th(M,q,"composite");this.binders[M]=new Cl(B,I,q,Z,f,ce),w.push(`/z_${M}`)}}this.cacheKey=w.sort().join("")}getMaxValue(a){const f=this.binders[a];return f instanceof Qs||f instanceof Cl?f.maxValue:0}populatePaintArrays(a,f,m,w,M){for(const z in this.binders){const I=this.binders[z];(I instanceof Qs||I instanceof Cl||I instanceof Tc)&&I.populatePaintArray(a,f,m,w,M)}}setConstantPatternPositions(a,f){for(const m in this.binders){const w=this.binders[m];w instanceof od&&w.setConstantPatternPositions(a,f)}}updatePaintArrays(a,f,m,w,M){let z=!1;for(const I in a){const B=f.getPositions(I);for(const q of B){const Z=m.feature(q.index);for(const J in this.binders){const oe=this.binders[J];if((oe instanceof Qs||oe instanceof Cl||oe instanceof Tc)&&oe.expression.isStateDependent===!0){const ce=w.paint.get(J);oe.expression=ce.value,oe.updatePaintArray(q.start,q.end,Z,a[I],M),z=!0}}}}return z}defines(){const a=[];for(const f in this.binders){const m=this.binders[f];(m instanceof eh||m instanceof od)&&a.push(...m.uniformNames.map((w=>`#define HAS_UNIFORM_${w}`)))}return a}getBinderAttributes(){const a=[];for(const f in this.binders){const m=this.binders[f];if(m instanceof Qs||m instanceof Cl)for(let w=0;w<m.paintVertexAttributes.length;w++)a.push(m.paintVertexAttributes[w].name);else if(m instanceof Tc)for(let w=0;w<id.members.length;w++)a.push(id.members[w].name)}return a}getBinderUniforms(){const a=[];for(const f in this.binders){const m=this.binders[f];if(m instanceof eh||m instanceof od||m instanceof Cl)for(const w of m.uniformNames)a.push(w)}return a}getPaintVertexBuffers(){return this._buffers}getUniforms(a,f){const m=[];for(const w in this.binders){const M=this.binders[w];if(M instanceof eh||M instanceof od||M instanceof Cl){for(const z of M.uniformNames)if(f[z]){const I=M.getBinding(a,f[z],z);m.push({name:z,property:w,binding:I})}}}return m}setUniforms(a,f,m,w){for(const{name:M,property:z,binding:I}of f)this.binders[z].setUniform(I,w,m.get(z),M)}updatePaintBuffers(a){this._buffers=[];for(const f in this.binders){const m=this.binders[f];if(a&&m instanceof Tc){const w=a.fromScale===2?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;w&&this._buffers.push(w)}else(m instanceof Qs||m instanceof Cl)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}}upload(a){for(const f in this.binders){const m=this.binders[f];(m instanceof Qs||m instanceof Cl||m instanceof Tc)&&m.upload(a)}this.updatePaintBuffers()}destroy(){for(const a in this.binders){const f=this.binders[a];(f instanceof Qs||f instanceof Cl||f instanceof Tc)&&f.destroy()}}}class ko{constructor(a,f,m=(()=>!0)){this.programConfigurations={};for(const w of a)this.programConfigurations[w.id]=new um(w,f,m);this.needsUpload=!1,this._featureMap=new Yu,this._bufferOffset=0}populatePaintArrays(a,f,m,w,M,z){for(const I in this.programConfigurations)this.programConfigurations[I].populatePaintArrays(a,f,w,M,z);f.id!==void 0&&this._featureMap.add(f.id,m,this._bufferOffset,a),this._bufferOffset=a,this.needsUpload=!0}updatePaintArrays(a,f,m,w){for(const M of m)this.needsUpload=this.programConfigurations[M.id].updatePaintArrays(a,this._featureMap,f,M,w)||this.needsUpload}get(a){return this.programConfigurations[a]}upload(a){if(this.needsUpload){for(const f in this.programConfigurations)this.programConfigurations[f].upload(a);this.needsUpload=!1}}destroy(){for(const a in this.programConfigurations)this.programConfigurations[a].destroy()}}function vy(c,a){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${a}-`,"").replace(/-/g,"_")]}function th(c,a,f){const m={color:{source:we,composite:Jr},number:{source:ur,composite:we}},w=(function(M){return{"line-pattern":{source:ci,composite:ci},"fill-pattern":{source:ci,composite:ci},"fill-extrusion-pattern":{source:ci,composite:ci}}[M]})(c);return w&&w[f]||m[a][f]}Yt("ConstantBinder",eh),Yt("CrossFadedConstantBinder",od),Yt("SourceExpressionBinder",Qs),Yt("CrossFadedCompositeBinder",Tc),Yt("CompositeExpressionBinder",Cl),Yt("ProgramConfiguration",um,{omit:["_buffers"]}),Yt("ProgramConfigurationSet",ko);const Aa=8192,yg=Math.pow(2,14)-1,vg=-yg-1;function fo(c){const a=Aa/c.extent,f=c.loadGeometry();for(let m=0;m<f.length;m++){const w=f[m];for(let M=0;M<w.length;M++){const z=w[M],I=Math.round(z.x*a),B=Math.round(z.y*a);z.x=Q(I,vg,yg),z.y=Q(B,vg,yg),(I<z.x||I>z.x+1||B<z.y||B>z.y+1)&&me("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return f}function Ps(c,a){return{type:c.type,id:c.id,properties:c.properties,geometry:a?fo(c):[]}}function sd(c,a,f,m,w){c.emplaceBack(2*a+(m+1)/2,2*f+(w+1)/2)}class Vf{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map((f=>f.id)),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new Da,this.indexArray=new Qo,this.segments=new Cn,this.programConfigurations=new ko(a.layers,a.zoom),this.stateDependentLayerIds=this.layers.filter((f=>f.isStateDependent())).map((f=>f.id))}populate(a,f,m){const w=this.layers[0],M=[];let z=null,I=!1;w.type==="circle"&&(z=w.layout.get("circle-sort-key"),I=!z.isConstant());for(const{feature:B,id:q,index:Z,sourceLayerIndex:J}of a){const oe=this.layers[0]._featureFilter.needGeometry,ce=Ps(B,oe);if(!this.layers[0]._featureFilter.filter(new Pn(this.zoom),ce,m))continue;const xe=I?z.evaluate(ce,{},m):void 0,ve={id:q,properties:B.properties,type:B.type,sourceLayerIndex:J,index:Z,geometry:oe?ce.geometry:fo(B),patterns:{},sortKey:xe};M.push(ve)}I&&M.sort(((B,q)=>B.sortKey-q.sortKey));for(const B of M){const{geometry:q,index:Z,sourceLayerIndex:J}=B,oe=a[Z].feature;this.addFeature(B,q,Z,m),f.featureIndex.insert(oe,q,Z,J,this.index)}}update(a,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,f,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Bo),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(a,f,m,w){for(const M of f)for(const z of M){const I=z.x,B=z.y;if(I<0||I>=Aa||B<0||B>=Aa)continue;const q=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,a.sortKey),Z=q.vertexLength;sd(this.layoutVertexArray,I,B,-1,-1),sd(this.layoutVertexArray,I,B,1,-1),sd(this.layoutVertexArray,I,B,1,1),sd(this.layoutVertexArray,I,B,-1,1),this.indexArray.emplaceBack(Z,Z+1,Z+2),this.indexArray.emplaceBack(Z,Z+3,Z+2),q.vertexLength+=4,q.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,m,{},w)}}function Zh(c,a){for(let f=0;f<c.length;f++)if(Ju(a,c[f]))return!0;for(let f=0;f<a.length;f++)if(Ju(c,a[f]))return!0;return!!Wf(c,a)}function cm(c,a,f){return!!Ju(c,a)||!!Ls(a,c,f)}function qf(c,a){if(c.length===1)return eu(a,c[0]);for(let f=0;f<a.length;f++){const m=a[f];for(let w=0;w<m.length;w++)if(Ju(c,m[w]))return!0}for(let f=0;f<c.length;f++)if(eu(a,c[f]))return!0;for(let f=0;f<a.length;f++)if(Wf(c,a[f]))return!0;return!1}function dm(c,a,f){if(c.length>1){if(Wf(c,a))return!0;for(let m=0;m<a.length;m++)if(Ls(a[m],c,f))return!0}for(let m=0;m<c.length;m++)if(Ls(c[m],a,f))return!0;return!1}function Wf(c,a){if(c.length===0||a.length===0)return!1;for(let f=0;f<c.length-1;f++){const m=c[f],w=c[f+1];for(let M=0;M<a.length-1;M++)if(xg(m,w,a[M],a[M+1]))return!0}return!1}function xg(c,a,f,m){return Ke(c,f,m)!==Ke(a,f,m)&&Ke(c,a,f)!==Ke(c,a,m)}function Ls(c,a,f){const m=f*f;if(a.length===1)return c.distSqr(a[0])<m;for(let w=1;w<a.length;w++)if(hm(c,a[w-1],a[w])<m)return!0;return!1}function hm(c,a,f){const m=a.distSqr(f);if(m===0)return c.distSqr(a);const w=((c.x-a.x)*(f.x-a.x)+(c.y-a.y)*(f.y-a.y))/m;return c.distSqr(w<0?a:w>1?f:f.sub(a)._mult(w)._add(a))}function eu(c,a){let f,m,w,M=!1;for(let z=0;z<c.length;z++){f=c[z];for(let I=0,B=f.length-1;I<f.length;B=I++)m=f[I],w=f[B],m.y>a.y!=w.y>a.y&&a.x<(w.x-m.x)*(a.y-m.y)/(w.y-m.y)+m.x&&(M=!M)}return M}function Ju(c,a){let f=!1;for(let m=0,w=c.length-1;m<c.length;w=m++){const M=c[m],z=c[w];M.y>a.y!=z.y>a.y&&a.x<(z.x-M.x)*(a.y-M.y)/(z.y-M.y)+M.x&&(f=!f)}return f}function fm(c,a,f){const m=f[0],w=f[2];if(c.x<m.x&&a.x<m.x||c.x>w.x&&a.x>w.x||c.y<m.y&&a.y<m.y||c.y>w.y&&a.y>w.y)return!1;const M=Ke(c,a,f[0]);return M!==Ke(c,a,f[1])||M!==Ke(c,a,f[2])||M!==Ke(c,a,f[3])}function Dc(c,a,f){const m=a.paint.get(c).value;return m.kind==="constant"?m.value:f.programConfigurations.get(a.id).getMaxValue(c)}function _g(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function Hf(c,a,f,m,w){if(!a[0]&&!a[1])return c;const M=C.convert(a)._mult(w);f==="viewport"&&M._rotate(-m);const z=[];for(let I=0;I<c.length;I++)z.push(c[I].sub(M));return z}let pm,bg;Yt("CircleBucket",Vf,{omit:["layers"]});var gm={get paint(){return bg=bg||new D({"circle-radius":new qr(ke.paint_circle["circle-radius"]),"circle-color":new qr(ke.paint_circle["circle-color"]),"circle-blur":new qr(ke.paint_circle["circle-blur"]),"circle-opacity":new qr(ke.paint_circle["circle-opacity"]),"circle-translate":new Ar(ke.paint_circle["circle-translate"]),"circle-translate-anchor":new Ar(ke.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ar(ke.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ar(ke.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new qr(ke.paint_circle["circle-stroke-width"]),"circle-stroke-color":new qr(ke.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new qr(ke.paint_circle["circle-stroke-opacity"])})},get layout(){return pm=pm||new D({"circle-sort-key":new qr(ke.layout_circle["circle-sort-key"])})}},es=1e-6,Mc=typeof Float32Array<"u"?Float32Array:Array;function Zf(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function gs(c,a,f){var m=a[0],w=a[1],M=a[2],z=a[3],I=a[4],B=a[5],q=a[6],Z=a[7],J=a[8],oe=a[9],ce=a[10],xe=a[11],ve=a[12],Oe=a[13],Be=a[14],dt=a[15],Je=f[0],Qe=f[1],Dt=f[2],Jt=f[3];return c[0]=Je*m+Qe*I+Dt*J+Jt*ve,c[1]=Je*w+Qe*B+Dt*oe+Jt*Oe,c[2]=Je*M+Qe*q+Dt*ce+Jt*Be,c[3]=Je*z+Qe*Z+Dt*xe+Jt*dt,c[4]=(Je=f[4])*m+(Qe=f[5])*I+(Dt=f[6])*J+(Jt=f[7])*ve,c[5]=Je*w+Qe*B+Dt*oe+Jt*Oe,c[6]=Je*M+Qe*q+Dt*ce+Jt*Be,c[7]=Je*z+Qe*Z+Dt*xe+Jt*dt,c[8]=(Je=f[8])*m+(Qe=f[9])*I+(Dt=f[10])*J+(Jt=f[11])*ve,c[9]=Je*w+Qe*B+Dt*oe+Jt*Oe,c[10]=Je*M+Qe*q+Dt*ce+Jt*Be,c[11]=Je*z+Qe*Z+Dt*xe+Jt*dt,c[12]=(Je=f[12])*m+(Qe=f[13])*I+(Dt=f[14])*J+(Jt=f[15])*ve,c[13]=Je*w+Qe*B+Dt*oe+Jt*Oe,c[14]=Je*M+Qe*q+Dt*ce+Jt*Be,c[15]=Je*z+Qe*Z+Dt*xe+Jt*dt,c}Math.hypot||(Math.hypot=function(){for(var c=0,a=arguments.length;a--;)c+=arguments[a]*arguments[a];return Math.sqrt(c)});var ms,xy=gs;function Kf(c,a,f){var m=a[0],w=a[1],M=a[2],z=a[3];return c[0]=f[0]*m+f[4]*w+f[8]*M+f[12]*z,c[1]=f[1]*m+f[5]*w+f[9]*M+f[13]*z,c[2]=f[2]*m+f[6]*w+f[10]*M+f[14]*z,c[3]=f[3]*m+f[7]*w+f[11]*M+f[15]*z,c}ms=new Mc(4),Mc!=Float32Array&&(ms[0]=0,ms[1]=0,ms[2]=0,ms[3]=0);class wg extends p{constructor(a){super(a,gm)}createBucket(a){return new Vf(a)}queryRadius(a){const f=a;return Dc("circle-radius",this,f)+Dc("circle-stroke-width",this,f)+_g(this.paint.get("circle-translate"))}queryIntersectsFeature(a,f,m,w,M,z,I,B){const q=Hf(a,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),z.angle,I),Z=this.paint.get("circle-radius").evaluate(f,m)+this.paint.get("circle-stroke-width").evaluate(f,m),J=this.paint.get("circle-pitch-alignment")==="map",oe=J?q:(function(xe,ve){return xe.map((Oe=>zc(Oe,ve)))})(q,B),ce=J?Z*I:Z;for(const xe of w)for(const ve of xe){const Oe=J?ve:zc(ve,B);let Be=ce;const dt=Kf([],[ve.x,ve.y,0,1],B);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Be*=dt[3]/z.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Be*=z.cameraToCenterDistance/dt[3]),cm(oe,Oe,Be))return!0}return!1}}function zc(c,a){const f=Kf([],[c.x,c.y,0,1],a);return new C(f[0]/f[3],f[1]/f[3])}class Sg extends Vf{}let Eg;Yt("HeatmapBucket",Sg,{omit:["layers"]});var mm={get paint(){return Eg=Eg||new D({"heatmap-radius":new qr(ke.paint_heatmap["heatmap-radius"]),"heatmap-weight":new qr(ke.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ar(ke.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Eu(ke.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ar(ke.paint_heatmap["heatmap-opacity"])})}};function Xf(c,{width:a,height:f},m,w){if(w){if(w instanceof Uint8ClampedArray)w=new Uint8Array(w.buffer);else if(w.length!==a*f*m)throw new RangeError(`mismatched image size. expected: ${w.length} but got: ${a*f*m}`)}else w=new Uint8Array(a*f*m);return c.width=a,c.height=f,c.data=w,c}function ld(c,{width:a,height:f},m){if(a===c.width&&f===c.height)return;const w=Xf({},{width:a,height:f},m);rh(c,w,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,a),height:Math.min(c.height,f)},m),c.width=a,c.height=f,c.data=w.data}function rh(c,a,f,m,w,M){if(w.width===0||w.height===0)return a;if(w.width>c.width||w.height>c.height||f.x>c.width-w.width||f.y>c.height-w.height)throw new RangeError("out of range source coordinates for image copy");if(w.width>a.width||w.height>a.height||m.x>a.width-w.width||m.y>a.height-w.height)throw new RangeError("out of range destination coordinates for image copy");const z=c.data,I=a.data;if(z===I)throw new Error("srcData equals dstData, so image is already copied");for(let B=0;B<w.height;B++){const q=((f.y+B)*c.width+f.x)*M,Z=((m.y+B)*a.width+m.x)*M;for(let J=0;J<w.width*M;J++)I[Z+J]=z[q+J]}return a}class Yf{constructor(a,f){Xf(this,a,1,f)}resize(a){ld(this,a,1)}clone(){return new Yf({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,f,m,w,M){rh(a,f,m,w,M,1)}}class Is{constructor(a,f){Xf(this,a,4,f)}resize(a){ld(this,a,4)}replace(a,f){f?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a}clone(){return new Is({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,f,m,w,M){rh(a,f,m,w,M,4)}}function nh(c){const a={},f=c.resolution||256,m=c.clips?c.clips.length:1,w=c.image||new Is({width:f,height:m});if(Math.log(f)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${f}`);const M=(z,I,B)=>{a[c.evaluationKey]=B;const q=c.expression.evaluate(a);w.data[z+I+0]=Math.floor(255*q.r/q.a),w.data[z+I+1]=Math.floor(255*q.g/q.a),w.data[z+I+2]=Math.floor(255*q.b/q.a),w.data[z+I+3]=Math.floor(255*q.a)};if(c.clips)for(let z=0,I=0;z<m;++z,I+=4*f)for(let B=0,q=0;B<f;B++,q+=4){const Z=B/(f-1),{start:J,end:oe}=c.clips[z];M(I,q,J*(1-Z)+oe*Z)}else for(let z=0,I=0;z<f;z++,I+=4)M(0,I,z/(f-1));return w}Yt("AlphaImage",Yf),Yt("RGBAImage",Is);const ud="big-fb";class Jf extends p{createBucket(a){return new Sg(a)}constructor(a){super(a,mm),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=nh({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(ud)&&this.heatmapFbos.delete(ud)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Kh;var Ag={get paint(){return Kh=Kh||new D({"hillshade-illumination-direction":new Ar(ke.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ar(ke.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ar(ke.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ar(ke.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ar(ke.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ar(ke.paint_hillshade["hillshade-accent-color"])})}};class cd extends p{constructor(a){super(a,Ag)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const _y=j([{name:"a_pos",components:2,type:"Int16"}],4),{members:kg}=_y;function Xh(c,a,f=2){const m=a&&a.length,w=m?a[0]*f:c.length;let M=Qf(c,0,w,f,!0);const z=[];if(!M||M.next===M.prev)return z;let I,B,q;if(m&&(M=(function(Z,J,oe,ce){const xe=[];for(let ve=0,Oe=J.length;ve<Oe;ve++){const Be=Qf(Z,J[ve]*ce,ve<Oe-1?J[ve+1]*ce:Z.length,ce,!1);Be===Be.next&&(Be.steiner=!0),xe.push(Qu(Be))}xe.sort(by);for(let ve=0;ve<xe.length;ve++)oe=ep(xe[ve],oe);return oe})(c,a,M,f)),c.length>80*f){I=1/0,B=1/0;let Z=-1/0,J=-1/0;for(let oe=f;oe<w;oe+=f){const ce=c[oe],xe=c[oe+1];ce<I&&(I=ce),xe<B&&(B=xe),ce>Z&&(Z=ce),xe>J&&(J=xe)}q=Math.max(Z-I,J-B),q=q!==0?32767/q:0}return Yh(M,z,f,I,B,q,0),z}function Qf(c,a,f,m,w){let M;if(w===(function(z,I,B,q){let Z=0;for(let J=I,oe=B-q;J<B;J+=q)Z+=(z[oe]-z[J])*(z[J+1]+z[oe+1]),oe=J;return Z})(c,a,f,m)>0)for(let z=a;z<f;z+=m)M=Jh(z/m|0,c[z],c[z+1],M);else for(let z=f-m;z>=a;z-=m)M=Jh(z/m|0,c[z],c[z+1],M);return M&&fa(M,M.next)&&(fd(M),M=M.next),M}function ku(c,a){if(!c)return c;a||(a=c);let f,m=c;do if(f=!1,m.steiner||!fa(m,m.next)&&aa(m.prev,m,m.next)!==0)m=m.next;else{if(fd(m),m=a=m.prev,m===m.next)break;f=!0}while(f||m!==a);return a}function Yh(c,a,f,m,w,M,z){if(!c)return;!z&&M&&(function(B,q,Z,J){let oe=B;do oe.z===0&&(oe.z=tp(oe.x,oe.y,q,Z,J)),oe.prevZ=oe.prev,oe.nextZ=oe.next,oe=oe.next;while(oe!==B);oe.prevZ.nextZ=null,oe.prevZ=null,(function(ce){let xe,ve=1;do{let Oe,Be=ce;ce=null;let dt=null;for(xe=0;Be;){xe++;let Je=Be,Qe=0;for(let Jt=0;Jt<ve&&(Qe++,Je=Je.nextZ,Je);Jt++);let Dt=ve;for(;Qe>0||Dt>0&&Je;)Qe!==0&&(Dt===0||!Je||Be.z<=Je.z)?(Oe=Be,Be=Be.nextZ,Qe--):(Oe=Je,Je=Je.nextZ,Dt--),dt?dt.nextZ=Oe:ce=Oe,Oe.prevZ=dt,dt=Oe;Be=Je}dt.nextZ=null,ve*=2}while(xe>1)})(oe)})(c,m,w,M);let I=c;for(;c.prev!==c.next;){const B=c.prev,q=c.next;if(M?Os(c,m,w,M):ym(c))a.push(B.i,c.i,q.i),fd(c),c=q.next,I=q.next;else if((c=q)===I){z?z===1?Yh(c=vm(ku(c),a),a,f,m,w,M,2):z===2&&xm(c,a,f,m,w,M):Yh(ku(c),a,f,m,w,M,1);break}}}function ym(c){const a=c.prev,f=c,m=c.next;if(aa(a,f,m)>=0)return!1;const w=a.x,M=f.x,z=m.x,I=a.y,B=f.y,q=m.y,Z=w<M?w<z?w:z:M<z?M:z,J=I<B?I<q?I:q:B<q?B:q,oe=w>M?w>z?w:z:M>z?M:z,ce=I>B?I>q?I:q:B>q?B:q;let xe=m.next;for(;xe!==a;){if(xe.x>=Z&&xe.x<=oe&&xe.y>=J&&xe.y<=ce&&Pc(w,I,M,B,z,q,xe.x,xe.y)&&aa(xe.prev,xe,xe.next)>=0)return!1;xe=xe.next}return!0}function Os(c,a,f,m){const w=c.prev,M=c,z=c.next;if(aa(w,M,z)>=0)return!1;const I=w.x,B=M.x,q=z.x,Z=w.y,J=M.y,oe=z.y,ce=I<B?I<q?I:q:B<q?B:q,xe=Z<J?Z<oe?Z:oe:J<oe?J:oe,ve=I>B?I>q?I:q:B>q?B:q,Oe=Z>J?Z>oe?Z:oe:J>oe?J:oe,Be=tp(ce,xe,a,f,m),dt=tp(ve,Oe,a,f,m);let Je=c.prevZ,Qe=c.nextZ;for(;Je&&Je.z>=Be&&Qe&&Qe.z<=dt;){if(Je.x>=ce&&Je.x<=ve&&Je.y>=xe&&Je.y<=Oe&&Je!==w&&Je!==z&&Pc(I,Z,B,J,q,oe,Je.x,Je.y)&&aa(Je.prev,Je,Je.next)>=0||(Je=Je.prevZ,Qe.x>=ce&&Qe.x<=ve&&Qe.y>=xe&&Qe.y<=Oe&&Qe!==w&&Qe!==z&&Pc(I,Z,B,J,q,oe,Qe.x,Qe.y)&&aa(Qe.prev,Qe,Qe.next)>=0))return!1;Qe=Qe.nextZ}for(;Je&&Je.z>=Be;){if(Je.x>=ce&&Je.x<=ve&&Je.y>=xe&&Je.y<=Oe&&Je!==w&&Je!==z&&Pc(I,Z,B,J,q,oe,Je.x,Je.y)&&aa(Je.prev,Je,Je.next)>=0)return!1;Je=Je.prevZ}for(;Qe&&Qe.z<=dt;){if(Qe.x>=ce&&Qe.x<=ve&&Qe.y>=xe&&Qe.y<=Oe&&Qe!==w&&Qe!==z&&Pc(I,Z,B,J,q,oe,Qe.x,Qe.y)&&aa(Qe.prev,Qe,Qe.next)>=0)return!1;Qe=Qe.nextZ}return!0}function vm(c,a){let f=c;do{const m=f.prev,w=f.next.next;!fa(m,w)&&Ra(m,f,f.next,w)&&hd(m,w)&&hd(w,m)&&(a.push(m.i,f.i,w.i),fd(f),fd(f.next),f=c=w),f=f.next}while(f!==c);return ku(f)}function xm(c,a,f,m,w,M){let z=c;do{let I=z.next.next;for(;I!==z.prev;){if(z.i!==I.i&&_m(z,I)){let B=Lc(z,I);return z=ku(z,z.next),B=ku(B,B.next),Yh(z,a,f,m,w,M,0),void Yh(B,a,f,m,w,M,0)}I=I.next}z=z.next}while(z!==c)}function by(c,a){return c.x-a.x}function ep(c,a){const f=(function(w,M){let z=M;const I=w.x,B=w.y;let q,Z=-1/0;do{if(B<=z.y&&B>=z.next.y&&z.next.y!==z.y){const ve=z.x+(B-z.y)*(z.next.x-z.x)/(z.next.y-z.y);if(ve<=I&&ve>Z&&(Z=ve,q=z.x<z.next.x?z:z.next,ve===I))return q}z=z.next}while(z!==M);if(!q)return null;const J=q,oe=q.x,ce=q.y;let xe=1/0;z=q;do{if(I>=z.x&&z.x>=oe&&I!==z.x&&Pc(B<ce?I:Z,B,oe,ce,B<ce?Z:I,B,z.x,z.y)){const ve=Math.abs(B-z.y)/(I-z.x);hd(z,w)&&(ve<xe||ve===xe&&(z.x>q.x||z.x===q.x&&wy(q,z)))&&(q=z,xe=ve)}z=z.next}while(z!==J);return q})(c,a);if(!f)return a;const m=Lc(f,c);return ku(m,m.next),ku(f,f.next)}function wy(c,a){return aa(c.prev,c,a.prev)<0&&aa(a.next,c,c.next)<0}function tp(c,a,f,m,w){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-f)*w|0)|c<<8))|c<<4))|c<<2))|c<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-m)*w|0)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function Qu(c){let a=c,f=c;do(a.x<f.x||a.x===f.x&&a.y<f.y)&&(f=a),a=a.next;while(a!==c);return f}function Pc(c,a,f,m,w,M,z,I){return(w-z)*(a-I)>=(c-z)*(M-I)&&(c-z)*(m-I)>=(f-z)*(a-I)&&(f-z)*(M-I)>=(w-z)*(m-I)}function _m(c,a){return c.next.i!==a.i&&c.prev.i!==a.i&&!(function(f,m){let w=f;do{if(w.i!==f.i&&w.next.i!==f.i&&w.i!==m.i&&w.next.i!==m.i&&Ra(w,w.next,f,m))return!0;w=w.next}while(w!==f);return!1})(c,a)&&(hd(c,a)&&hd(a,c)&&(function(f,m){let w=f,M=!1;const z=(f.x+m.x)/2,I=(f.y+m.y)/2;do w.y>I!=w.next.y>I&&w.next.y!==w.y&&z<(w.next.x-w.x)*(I-w.y)/(w.next.y-w.y)+w.x&&(M=!M),w=w.next;while(w!==f);return M})(c,a)&&(aa(c.prev,c,a.prev)||aa(c,a.prev,a))||fa(c,a)&&aa(c.prev,c,c.next)>0&&aa(a.prev,a,a.next)>0)}function aa(c,a,f){return(a.y-c.y)*(f.x-a.x)-(a.x-c.x)*(f.y-a.y)}function fa(c,a){return c.x===a.x&&c.y===a.y}function Ra(c,a,f,m){const w=dd(aa(c,a,f)),M=dd(aa(c,a,m)),z=dd(aa(f,m,c)),I=dd(aa(f,m,a));return w!==M&&z!==I||!(w!==0||!ln(c,f,a))||!(M!==0||!ln(c,m,a))||!(z!==0||!ln(f,c,m))||!(I!==0||!ln(f,a,m))}function ln(c,a,f){return a.x<=Math.max(c.x,f.x)&&a.x>=Math.min(c.x,f.x)&&a.y<=Math.max(c.y,f.y)&&a.y>=Math.min(c.y,f.y)}function dd(c){return c>0?1:c<0?-1:0}function hd(c,a){return aa(c.prev,c,c.next)<0?aa(c,a,c.next)>=0&&aa(c,c.prev,a)>=0:aa(c,a,c.prev)<0||aa(c,c.next,a)<0}function Lc(c,a){const f=ih(c.i,c.x,c.y),m=ih(a.i,a.x,a.y),w=c.next,M=a.prev;return c.next=a,a.prev=c,f.next=w,w.prev=f,m.next=f,f.prev=m,M.next=m,m.prev=M,m}function Jh(c,a,f,m){const w=ih(c,a,f);return m?(w.next=m.next,w.prev=m,m.next.prev=w,m.next=w):(w.prev=w,w.next=w),w}function fd(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function ih(c,a,f){return{i:c,x:a,y:f,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Co(c,a,f){const m=f.patternDependencies;let w=!1;for(const M of a){const z=M.paint.get(`${c}-pattern`);z.isConstant()||(w=!0);const I=z.constantOr(null);I&&(w=!0,m[I.to]=!0,m[I.from]=!0)}return w}function bm(c,a,f,m,w){const M=w.patternDependencies;for(const z of a){const I=z.paint.get(`${c}-pattern`).value;if(I.kind!=="constant"){let B=I.evaluate({zoom:m-1},f,{},w.availableImages),q=I.evaluate({zoom:m},f,{},w.availableImages),Z=I.evaluate({zoom:m+1},f,{},w.availableImages);B=B&&B.name?B.name:B,q=q&&q.name?q.name:q,Z=Z&&Z.name?Z.name:Z,M[B]=!0,M[q]=!0,M[Z]=!0,f.patterns[z.id]={min:B,mid:q,max:Z}}}return f}class Qh{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map((f=>f.id)),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new fs,this.indexArray=new Qo,this.indexArray2=new Ma,this.programConfigurations=new ko(a.layers,a.zoom),this.segments=new Cn,this.segments2=new Cn,this.stateDependentLayerIds=this.layers.filter((f=>f.isStateDependent())).map((f=>f.id))}populate(a,f,m){this.hasPattern=Co("fill",this.layers,f);const w=this.layers[0].layout.get("fill-sort-key"),M=!w.isConstant(),z=[];for(const{feature:I,id:B,index:q,sourceLayerIndex:Z}of a){const J=this.layers[0]._featureFilter.needGeometry,oe=Ps(I,J);if(!this.layers[0]._featureFilter.filter(new Pn(this.zoom),oe,m))continue;const ce=M?w.evaluate(oe,{},m,f.availableImages):void 0,xe={id:B,properties:I.properties,type:I.type,sourceLayerIndex:Z,index:q,geometry:J?oe.geometry:fo(I),patterns:{},sortKey:ce};z.push(xe)}M&&z.sort(((I,B)=>I.sortKey-B.sortKey));for(const I of z){const{geometry:B,index:q,sourceLayerIndex:Z}=I;if(this.hasPattern){const J=bm("fill",this.layers,I,this.zoom,f);this.patternFeatures.push(J)}else this.addFeature(I,B,q,m,{});f.featureIndex.insert(a[q].feature,B,q,Z,this.index)}}update(a,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,f,this.stateDependentLayers,m)}addFeatures(a,f,m){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,f,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,kg),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(a,f,m,w,M){for(const z of Gi(f,500)){let I=0;for(const ce of z)I+=ce.length;const B=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray),q=B.vertexLength,Z=[],J=[];for(const ce of z){if(ce.length===0)continue;ce!==z[0]&&J.push(Z.length/2);const xe=this.segments2.prepareSegment(ce.length,this.layoutVertexArray,this.indexArray2),ve=xe.vertexLength;this.layoutVertexArray.emplaceBack(ce[0].x,ce[0].y),this.indexArray2.emplaceBack(ve+ce.length-1,ve),Z.push(ce[0].x),Z.push(ce[0].y);for(let Oe=1;Oe<ce.length;Oe++)this.layoutVertexArray.emplaceBack(ce[Oe].x,ce[Oe].y),this.indexArray2.emplaceBack(ve+Oe-1,ve+Oe),Z.push(ce[Oe].x),Z.push(ce[Oe].y);xe.vertexLength+=ce.length,xe.primitiveLength+=ce.length}const oe=Xh(Z,J);for(let ce=0;ce<oe.length;ce+=3)this.indexArray.emplaceBack(q+oe[ce],q+oe[ce+1],q+oe[ce+2]);B.vertexLength+=I,B.primitiveLength+=oe.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,m,M,w)}}let rp,wm;Yt("FillBucket",Qh,{omit:["layers","patternFeatures"]});var Sm={get paint(){return wm=wm||new D({"fill-antialias":new Ar(ke.paint_fill["fill-antialias"]),"fill-opacity":new qr(ke.paint_fill["fill-opacity"]),"fill-color":new qr(ke.paint_fill["fill-color"]),"fill-outline-color":new qr(ke.paint_fill["fill-outline-color"]),"fill-translate":new Ar(ke.paint_fill["fill-translate"]),"fill-translate-anchor":new Ar(ke.paint_fill["fill-translate-anchor"]),"fill-pattern":new wu(ke.paint_fill["fill-pattern"])})},get layout(){return rp=rp||new D({"fill-sort-key":new qr(ke.layout_fill["fill-sort-key"])})}};class Sy extends p{constructor(a){super(a,Sm)}recalculate(a,f){super.recalculate(a,f);const m=this.paint._values["fill-outline-color"];m.value.kind==="constant"&&m.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new Qh(a)}queryRadius(){return _g(this.paint.get("fill-translate"))}queryIntersectsFeature(a,f,m,w,M,z,I){return qf(Hf(a,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),z.angle,I),w)}isTileClipped(){return!0}}const Em=j([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Am=j([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Cu}=Em;var Na={},np=x,ip=ec;function ec(c,a,f,m,w){this.properties={},this.extent=f,this.type=0,this._pbf=c,this._geometry=-1,this._keys=m,this._values=w,c.readFields(Ey,this,a)}function Ey(c,a,f){c==1?a.id=f.readVarint():c==2?(function(m,w){for(var M=m.readVarint()+m.pos;m.pos<M;){var z=w._keys[m.readVarint()],I=w._values[m.readVarint()];w.properties[z]=I}})(f,a):c==3?a.type=f.readVarint():c==4&&(a._geometry=f.pos)}function km(c){for(var a,f,m=0,w=0,M=c.length,z=M-1;w<M;z=w++)m+=((f=c[z]).x-(a=c[w]).x)*(a.y+f.y);return m}ec.types=["Unknown","Point","LineString","Polygon"],ec.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var a,f=c.readVarint()+c.pos,m=1,w=0,M=0,z=0,I=[];c.pos<f;){if(w<=0){var B=c.readVarint();m=7&B,w=B>>3}if(w--,m===1||m===2)M+=c.readSVarint(),z+=c.readSVarint(),m===1&&(a&&I.push(a),a=[]),a.push(new np(M,z));else{if(m!==7)throw new Error("unknown command "+m);a&&a.push(a[0].clone())}}return a&&I.push(a),I},ec.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var a=c.readVarint()+c.pos,f=1,m=0,w=0,M=0,z=1/0,I=-1/0,B=1/0,q=-1/0;c.pos<a;){if(m<=0){var Z=c.readVarint();f=7&Z,m=Z>>3}if(m--,f===1||f===2)(w+=c.readSVarint())<z&&(z=w),w>I&&(I=w),(M+=c.readSVarint())<B&&(B=M),M>q&&(q=M);else if(f!==7)throw new Error("unknown command "+f)}return[z,B,I,q]},ec.prototype.toGeoJSON=function(c,a,f){var m,w,M=this.extent*Math.pow(2,f),z=this.extent*c,I=this.extent*a,B=this.loadGeometry(),q=ec.types[this.type];function Z(ce){for(var xe=0;xe<ce.length;xe++){var ve=ce[xe];ce[xe]=[360*(ve.x+z)/M-180,360/Math.PI*Math.atan(Math.exp((180-360*(ve.y+I)/M)*Math.PI/180))-90]}}switch(this.type){case 1:var J=[];for(m=0;m<B.length;m++)J[m]=B[m][0];Z(B=J);break;case 2:for(m=0;m<B.length;m++)Z(B[m]);break;case 3:for(B=(function(ce){var xe=ce.length;if(xe<=1)return[ce];for(var ve,Oe,Be=[],dt=0;dt<xe;dt++){var Je=km(ce[dt]);Je!==0&&(Oe===void 0&&(Oe=Je<0),Oe===Je<0?(ve&&Be.push(ve),ve=[ce[dt]]):ve.push(ce[dt]))}return ve&&Be.push(ve),Be})(B),m=0;m<B.length;m++)for(w=0;w<B[m].length;w++)Z(B[m][w])}B.length===1?B=B[0]:q="Multi"+q;var oe={type:"Feature",geometry:{type:q,coordinates:B},properties:this.properties};return"id"in this&&(oe.id=this.id),oe};var ef=ip,Tu=ap;function ap(c,a){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(q0,this,a),this.length=this._features.length}function q0(c,a,f){c===15?a.version=f.readVarint():c===1?a.name=f.readString():c===5?a.extent=f.readVarint():c===2?a._features.push(f.pos):c===3?a._keys.push(f.readString()):c===4&&a._values.push((function(m){for(var w=null,M=m.readVarint()+m.pos;m.pos<M;){var z=m.readVarint()>>3;w=z===1?m.readString():z===2?m.readFloat():z===3?m.readDouble():z===4?m.readVarint64():z===5?m.readVarint():z===6?m.readSVarint():z===7?m.readBoolean():null}return w})(f))}ap.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var a=this._pbf.readVarint()+this._pbf.pos;return new ef(this._pbf,a,this.extent,this._keys,this._values)};var Ay=Tu;function Ic(c,a,f){if(c===3){var m=new Ay(f,f.readVarint()+f.pos);m.length&&(a[m.name]=m)}}Na.VectorTile=function(c,a){this.layers=c.readFields(Ic,{},a)},Na.VectorTileFeature=ip,Na.VectorTileLayer=Tu;const Cm=Na.VectorTileFeature.types,op=Math.pow(2,13);function Oc(c,a,f,m,w,M,z,I){c.emplaceBack(a,f,2*Math.floor(m*op)+z,w*op*2,M*op*2,Math.round(I))}class ah{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map((f=>f.id)),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new Ec,this.centroidVertexArray=new qi,this.indexArray=new Qo,this.programConfigurations=new ko(a.layers,a.zoom),this.segments=new Cn,this.stateDependentLayerIds=this.layers.filter((f=>f.isStateDependent())).map((f=>f.id))}populate(a,f,m){this.features=[],this.hasPattern=Co("fill-extrusion",this.layers,f);for(const{feature:w,id:M,index:z,sourceLayerIndex:I}of a){const B=this.layers[0]._featureFilter.needGeometry,q=Ps(w,B);if(!this.layers[0]._featureFilter.filter(new Pn(this.zoom),q,m))continue;const Z={id:M,sourceLayerIndex:I,index:z,geometry:B?q.geometry:fo(w),properties:w.properties,type:w.type,patterns:{}};this.hasPattern?this.features.push(bm("fill-extrusion",this.layers,Z,this.zoom,f)):this.addFeature(Z,Z.geometry,z,m,{}),f.featureIndex.insert(w,Z.geometry,z,I,this.index,!0)}}addFeatures(a,f,m){for(const w of this.features){const{geometry:M}=w;this.addFeature(w,M,w.index,f,m)}}update(a,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,f,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Cu),this.centroidVertexBuffer=a.createVertexBuffer(this.centroidVertexArray,Am.members,!0),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(a,f,m,w,M){for(const z of Gi(f,500)){const I={x:0,y:0,vertexCount:0};let B=0;for(const xe of z)B+=xe.length;let q=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const xe of z){if(xe.length===0||ky(xe))continue;let ve=0;for(let Oe=0;Oe<xe.length;Oe++){const Be=xe[Oe];if(Oe>=1){const dt=xe[Oe-1];if(!oa(Be,dt)){q.vertexLength+4>Cn.MAX_VERTEX_ARRAY_LENGTH&&(q=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Je=Be.sub(dt)._perp()._unit(),Qe=dt.dist(Be);ve+Qe>32768&&(ve=0),Oc(this.layoutVertexArray,Be.x,Be.y,Je.x,Je.y,0,0,ve),Oc(this.layoutVertexArray,Be.x,Be.y,Je.x,Je.y,0,1,ve),I.x+=2*Be.x,I.y+=2*Be.y,I.vertexCount+=2,ve+=Qe,Oc(this.layoutVertexArray,dt.x,dt.y,Je.x,Je.y,0,0,ve),Oc(this.layoutVertexArray,dt.x,dt.y,Je.x,Je.y,0,1,ve),I.x+=2*dt.x,I.y+=2*dt.y,I.vertexCount+=2;const Dt=q.vertexLength;this.indexArray.emplaceBack(Dt,Dt+2,Dt+1),this.indexArray.emplaceBack(Dt+1,Dt+2,Dt+3),q.vertexLength+=4,q.primitiveLength+=2}}}}if(q.vertexLength+B>Cn.MAX_VERTEX_ARRAY_LENGTH&&(q=this.segments.prepareSegment(B,this.layoutVertexArray,this.indexArray)),Cm[a.type]!=="Polygon")continue;const Z=[],J=[],oe=q.vertexLength;for(const xe of z)if(xe.length!==0){xe!==z[0]&&J.push(Z.length/2);for(let ve=0;ve<xe.length;ve++){const Oe=xe[ve];Oc(this.layoutVertexArray,Oe.x,Oe.y,0,0,1,1,0),I.x+=Oe.x,I.y+=Oe.y,I.vertexCount+=1,Z.push(Oe.x),Z.push(Oe.y)}}const ce=Xh(Z,J);for(let xe=0;xe<ce.length;xe+=3)this.indexArray.emplaceBack(oe+ce[xe],oe+ce[xe+2],oe+ce[xe+1]);q.primitiveLength+=ce.length/3,q.vertexLength+=B;for(let xe=0;xe<I.vertexCount;xe++){const ve=Math.floor(I.x/I.vertexCount),Oe=Math.floor(I.y/I.vertexCount);this.centroidVertexArray.emplaceBack(ve,Oe)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,m,M,w)}}function oa(c,a){return c.x===a.x&&(c.x<0||c.x>Aa)||c.y===a.y&&(c.y<0||c.y>Aa)}function ky(c){return c.every((a=>a.x<0))||c.every((a=>a.x>Aa))||c.every((a=>a.y<0))||c.every((a=>a.y>Aa))}let tf;Yt("FillExtrusionBucket",ah,{omit:["layers","features"]});var Cg={get paint(){return tf=tf||new D({"fill-extrusion-opacity":new Ar(ke["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new qr(ke["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ar(ke["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ar(ke["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new wu(ke["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new qr(ke["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new qr(ke["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ar(ke["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class rf extends p{constructor(a){super(a,Cg)}createBucket(a){return new ah(a)}queryRadius(){return _g(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(a,f,m,w,M,z,I,B){const q=Hf(a,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),z.angle,I),Z=this.paint.get("fill-extrusion-height").evaluate(f,m),J=this.paint.get("fill-extrusion-base").evaluate(f,m),oe=(function(xe,ve,Oe,Be){const dt=[];for(const Je of xe){const Qe=[Je.x,Je.y,0,1];Kf(Qe,Qe,ve),dt.push(new C(Qe[0]/Qe[3],Qe[1]/Qe[3]))}return dt})(q,B),ce=(function(xe,ve,Oe,Be){const dt=[],Je=[],Qe=Be[8]*ve,Dt=Be[9]*ve,Jt=Be[10]*ve,yr=Be[11]*ve,Zr=Be[8]*Oe,dr=Be[9]*Oe,pr=Be[10]*Oe,zr=Be[11]*Oe;for(const Er of xe){const br=[],Ot=[];for(const wr of Er){const Dr=wr.x,Qr=wr.y,ti=Be[0]*Dr+Be[4]*Qr+Be[12],Mi=Be[1]*Dr+Be[5]*Qr+Be[13],yo=Be[2]*Dr+Be[6]*Qr+Be[14],Mo=Be[3]*Dr+Be[7]*Qr+Be[15],zo=yo+Jt,Za=Mo+yr,_s=ti+Zr,bs=Mi+dr,ws=yo+pr,qn=Mo+zr,xi=new C((ti+Qe)/Za,(Mi+Dt)/Za);xi.z=zo/Za,br.push(xi);const ns=new C(_s/qn,bs/qn);ns.z=ws/qn,Ot.push(ns)}dt.push(br),Je.push(Ot)}return[dt,Je]})(w,J,Z,B);return(function(xe,ve,Oe){let Be=1/0;qf(Oe,ve)&&(Be=nf(Oe,ve[0]));for(let dt=0;dt<ve.length;dt++){const Je=ve[dt],Qe=xe[dt];for(let Dt=0;Dt<Je.length-1;Dt++){const Jt=Je[Dt],yr=[Jt,Je[Dt+1],Qe[Dt+1],Qe[Dt],Jt];Zh(Oe,yr)&&(Be=Math.min(Be,nf(Oe,yr)))}}return Be!==1/0&&Be})(ce[0],ce[1],oe)}}function Tl(c,a){return c.x*a.x+c.y*a.y}function nf(c,a){if(c.length===1){let f=0;const m=a[f++];let w;for(;!w||m.equals(w);)if(w=a[f++],!w)return 1/0;for(;f<a.length;f++){const M=a[f],z=c[0],I=w.sub(m),B=M.sub(m),q=z.sub(m),Z=Tl(I,I),J=Tl(I,B),oe=Tl(B,B),ce=Tl(q,I),xe=Tl(q,B),ve=Z*oe-J*J,Oe=(oe*ce-J*xe)/ve,Be=(Z*xe-J*ce)/ve,dt=m.z*(1-Oe-Be)+w.z*Oe+M.z*Be;if(isFinite(dt))return dt}return 1/0}{let f=1/0;for(const m of a)f=Math.min(f,m.z);return f}}const Tm=j([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:el}=Tm,ys=j([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Cy}=ys,Tg=Na.VectorTileFeature.types,Ty=Math.cos(Math.PI/180*37.5),Dg=Math.pow(2,14)/.5;class sp{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map((f=>f.id)),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((f=>{this.gradients[f.id]={}})),this.layoutVertexArray=new Yo,this.layoutVertexArray2=new eo,this.indexArray=new Qo,this.programConfigurations=new ko(a.layers,a.zoom),this.segments=new Cn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((f=>f.isStateDependent())).map((f=>f.id))}populate(a,f,m){this.hasPattern=Co("line",this.layers,f);const w=this.layers[0].layout.get("line-sort-key"),M=!w.isConstant(),z=[];for(const{feature:I,id:B,index:q,sourceLayerIndex:Z}of a){const J=this.layers[0]._featureFilter.needGeometry,oe=Ps(I,J);if(!this.layers[0]._featureFilter.filter(new Pn(this.zoom),oe,m))continue;const ce=M?w.evaluate(oe,{},m):void 0,xe={id:B,properties:I.properties,type:I.type,sourceLayerIndex:Z,index:q,geometry:J?oe.geometry:fo(I),patterns:{},sortKey:ce};z.push(xe)}M&&z.sort(((I,B)=>I.sortKey-B.sortKey));for(const I of z){const{geometry:B,index:q,sourceLayerIndex:Z}=I;if(this.hasPattern){const J=bm("line",this.layers,I,this.zoom,f);this.patternFeatures.push(J)}else this.addFeature(I,B,q,m,{});f.featureIndex.insert(a[q].feature,B,q,Z,this.index)}}update(a,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,f,this.stateDependentLayers,m)}addFeatures(a,f,m){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,f,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,Cy)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,el),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(a){if(a.properties&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}}addFeature(a,f,m,w,M){const z=this.layers[0].layout,I=z.get("line-join").evaluate(a,{}),B=z.get("line-cap"),q=z.get("line-miter-limit"),Z=z.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(const J of f)this.addLine(J,a,I,B,q,Z);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,m,M,w)}addLine(a,f,m,w,M,z){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Be=0;Be<a.length-1;Be++)this.totalDistance+=a[Be].dist(a[Be+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const I=Tg[f.type]==="Polygon";let B=a.length;for(;B>=2&&a[B-1].equals(a[B-2]);)B--;let q=0;for(;q<B-1&&a[q].equals(a[q+1]);)q++;if(B<(I?3:2))return;m==="bevel"&&(M=1.05);const Z=this.overscaling<=16?15*Aa/(512*this.overscaling):0,J=this.segments.prepareSegment(10*B,this.layoutVertexArray,this.indexArray);let oe,ce,xe,ve,Oe;this.e1=this.e2=-1,I&&(oe=a[B-2],Oe=a[q].sub(oe)._unit()._perp());for(let Be=q;Be<B;Be++){if(xe=Be===B-1?I?a[q+1]:void 0:a[Be+1],xe&&a[Be].equals(xe))continue;Oe&&(ve=Oe),oe&&(ce=oe),oe=a[Be],Oe=xe?xe.sub(oe)._unit()._perp():ve,ve=ve||Oe;let dt=ve.add(Oe);dt.x===0&&dt.y===0||dt._unit();const Je=ve.x*Oe.x+ve.y*Oe.y,Qe=dt.x*Oe.x+dt.y*Oe.y,Dt=Qe!==0?1/Qe:1/0,Jt=2*Math.sqrt(2-2*Qe),yr=Qe<Ty&&ce&&xe,Zr=ve.x*Oe.y-ve.y*Oe.x>0;if(yr&&Be>q){const zr=oe.dist(ce);if(zr>2*Z){const Er=oe.sub(oe.sub(ce)._mult(Z/zr)._round());this.updateDistance(ce,Er),this.addCurrentVertex(Er,ve,0,0,J),ce=Er}}const dr=ce&&xe;let pr=dr?m:I?"butt":w;if(dr&&pr==="round"&&(Dt<z?pr="miter":Dt<=2&&(pr="fakeround")),pr==="miter"&&Dt>M&&(pr="bevel"),pr==="bevel"&&(Dt>2&&(pr="flipbevel"),Dt<M&&(pr="miter")),ce&&this.updateDistance(ce,oe),pr==="miter")dt._mult(Dt),this.addCurrentVertex(oe,dt,0,0,J);else if(pr==="flipbevel"){if(Dt>100)dt=Oe.mult(-1);else{const zr=Dt*ve.add(Oe).mag()/ve.sub(Oe).mag();dt._perp()._mult(zr*(Zr?-1:1))}this.addCurrentVertex(oe,dt,0,0,J),this.addCurrentVertex(oe,dt.mult(-1),0,0,J)}else if(pr==="bevel"||pr==="fakeround"){const zr=-Math.sqrt(Dt*Dt-1),Er=Zr?zr:0,br=Zr?0:zr;if(ce&&this.addCurrentVertex(oe,ve,Er,br,J),pr==="fakeround"){const Ot=Math.round(180*Jt/Math.PI/20);for(let wr=1;wr<Ot;wr++){let Dr=wr/Ot;if(Dr!==.5){const ti=Dr-.5;Dr+=Dr*ti*(Dr-1)*((1.0904+Je*(Je*(3.55645-1.43519*Je)-3.2452))*ti*ti+(.848013+Je*(.215638*Je-1.06021)))}const Qr=Oe.sub(ve)._mult(Dr)._add(ve)._unit()._mult(Zr?-1:1);this.addHalfVertex(oe,Qr.x,Qr.y,!1,Zr,0,J)}}xe&&this.addCurrentVertex(oe,Oe,-Er,-br,J)}else if(pr==="butt")this.addCurrentVertex(oe,dt,0,0,J);else if(pr==="square"){const zr=ce?1:-1;this.addCurrentVertex(oe,dt,zr,zr,J)}else pr==="round"&&(ce&&(this.addCurrentVertex(oe,ve,0,0,J),this.addCurrentVertex(oe,ve,1,1,J,!0)),xe&&(this.addCurrentVertex(oe,Oe,-1,-1,J,!0),this.addCurrentVertex(oe,Oe,0,0,J)));if(yr&&Be<B-1){const zr=oe.dist(xe);if(zr>2*Z){const Er=oe.add(xe.sub(oe)._mult(Z/zr)._round());this.updateDistance(oe,Er),this.addCurrentVertex(Er,Oe,0,0,J),oe=Er}}}}addCurrentVertex(a,f,m,w,M,z=!1){const I=f.y*w-f.x,B=-f.y-f.x*w;this.addHalfVertex(a,f.x+f.y*m,f.y-f.x*m,z,!1,m,M),this.addHalfVertex(a,I,B,z,!0,-w,M),this.distance>Dg/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(a,f,m,w,M,z))}addHalfVertex({x:a,y:f},m,w,M,z,I,B){const q=.5*(this.lineClips?this.scaledDistance*(Dg-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((a<<1)+(M?1:0),(f<<1)+(z?1:0),Math.round(63*m)+128,Math.round(63*w)+128,1+(I===0?0:I<0?-1:1)|(63&q)<<2,q>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Z=B.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Z),B.primitiveLength++),z?this.e2=Z:this.e1=Z}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(a,f){this.distance+=a.dist(f),this.updateScaledDistance()}}let lp,Dm;Yt("LineBucket",sp,{omit:["layers","patternFeatures"]});var tc={get paint(){return Dm=Dm||new D({"line-opacity":new qr(ke.paint_line["line-opacity"]),"line-color":new qr(ke.paint_line["line-color"]),"line-translate":new Ar(ke.paint_line["line-translate"]),"line-translate-anchor":new Ar(ke.paint_line["line-translate-anchor"]),"line-width":new qr(ke.paint_line["line-width"]),"line-gap-width":new qr(ke.paint_line["line-gap-width"]),"line-offset":new qr(ke.paint_line["line-offset"]),"line-blur":new qr(ke.paint_line["line-blur"]),"line-dasharray":new Su(ke.paint_line["line-dasharray"]),"line-pattern":new wu(ke.paint_line["line-pattern"]),"line-gradient":new Eu(ke.paint_line["line-gradient"])})},get layout(){return lp=lp||new D({"line-cap":new Ar(ke.layout_line["line-cap"]),"line-join":new qr(ke.layout_line["line-join"]),"line-miter-limit":new Ar(ke.layout_line["line-miter-limit"]),"line-round-limit":new Ar(ke.layout_line["line-round-limit"]),"line-sort-key":new qr(ke.layout_line["line-sort-key"])})}};class po extends qr{possiblyEvaluate(a,f){return f=new Pn(Math.floor(f.zoom),{now:f.now,fadeDuration:f.fadeDuration,zoomHistory:f.zoomHistory,transition:f.transition}),super.possiblyEvaluate(a,f)}evaluate(a,f,m,w){return f=he({},f,{zoom:Math.floor(f.zoom)}),super.evaluate(a,f,m,w)}}let af;class Dy extends p{constructor(a){super(a,tc),this.gradientVersion=0,af||(af=new po(tc.paint.properties["line-width"].specification),af.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(a){if(a==="line-gradient"){const f=this.gradientExpression();this.stepInterpolant=!!(function(m){return m._styleExpression!==void 0})(f)&&f._styleExpression.expression instanceof $t,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(a,f){super.recalculate(a,f),this.paint._values["line-floorwidth"]=af.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new sp(a)}queryRadius(a){const f=a,m=To(Dc("line-width",this,f),Dc("line-gap-width",this,f)),w=Dc("line-offset",this,f);return m/2+Math.abs(w)+_g(this.paint.get("line-translate"))}queryIntersectsFeature(a,f,m,w,M,z,I){const B=Hf(a,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),z.angle,I),q=I/2*To(this.paint.get("line-width").evaluate(f,m),this.paint.get("line-gap-width").evaluate(f,m)),Z=this.paint.get("line-offset").evaluate(f,m);return Z&&(w=(function(J,oe){const ce=[];for(let xe=0;xe<J.length;xe++){const ve=J[xe],Oe=[];for(let Be=0;Be<ve.length;Be++){const dt=ve[Be-1],Je=ve[Be],Qe=ve[Be+1],Dt=Be===0?new C(0,0):Je.sub(dt)._unit()._perp(),Jt=Be===ve.length-1?new C(0,0):Qe.sub(Je)._unit()._perp(),yr=Dt._add(Jt)._unit(),Zr=yr.x*Jt.x+yr.y*Jt.y;Zr!==0&&yr._mult(1/Zr),Oe.push(yr._mult(oe)._add(Je))}ce.push(Oe)}return ce})(w,Z*I)),(function(J,oe,ce){for(let xe=0;xe<oe.length;xe++){const ve=oe[xe];if(J.length>=3){for(let Oe=0;Oe<ve.length;Oe++)if(Ju(J,ve[Oe]))return!0}if(dm(J,ve,ce))return!0}return!1})(B,w,q)}isTileClipped(){return!0}}function To(c,a){return a>0?a+2*c:c}const W0=j([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Mm=j([{name:"a_projected_pos",components:3,type:"Float32"}],4);j([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const zm=j([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);j([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const pa=j([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),tl=j([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function jc(c,a,f){return c.sections.forEach((m=>{m.text=(function(w,M,z){const I=M.layout.get("text-transform").evaluate(z,{});return I==="uppercase"?w=w.toLocaleUpperCase():I==="lowercase"&&(w=w.toLocaleLowerCase()),Qa.applyArabicShaping&&(w=Qa.applyArabicShaping(w)),w})(m.text,a,f)})),c}j([{name:"triangle",components:3,type:"Uint16"}]),j([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),j([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),j([{type:"Float32",name:"offsetX"}]),j([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),j([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const of={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Ba=24,Pm=jn,My=function(c,a,f,m,w){var M,z,I=8*w-m-1,B=(1<<I)-1,q=B>>1,Z=-7,J=w-1,oe=-1,ce=c[a+J];for(J+=oe,M=ce&(1<<-Z)-1,ce>>=-Z,Z+=I;Z>0;M=256*M+c[a+J],J+=oe,Z-=8);for(z=M&(1<<-Z)-1,M>>=-Z,Z+=m;Z>0;z=256*z+c[a+J],J+=oe,Z-=8);if(M===0)M=1-q;else{if(M===B)return z?NaN:1/0*(ce?-1:1);z+=Math.pow(2,m),M-=q}return(ce?-1:1)*z*Math.pow(2,M-m)},up=function(c,a,f,m,w,M){var z,I,B,q=8*M-w-1,Z=(1<<q)-1,J=Z>>1,oe=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,ce=0,xe=1,ve=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(I=isNaN(a)?1:0,z=Z):(z=Math.floor(Math.log(a)/Math.LN2),a*(B=Math.pow(2,-z))<1&&(z--,B*=2),(a+=z+J>=1?oe/B:oe*Math.pow(2,1-J))*B>=2&&(z++,B/=2),z+J>=Z?(I=0,z=Z):z+J>=1?(I=(a*B-1)*Math.pow(2,w),z+=J):(I=a*Math.pow(2,J-1)*Math.pow(2,w),z=0));w>=8;c[f+ce]=255&I,ce+=xe,I/=256,w-=8);for(z=z<<w|I,q+=w;q>0;c[f+ce]=255&z,ce+=xe,z/=256,q-=8);c[f+ce-xe]|=128*ve};function jn(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}jn.Varint=0,jn.Fixed64=1,jn.Bytes=2,jn.Fixed32=5;var Dl=4294967296,Lm=1/Dl,ga=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function rc(c){return c.type===jn.Bytes?c.readVarint()+c.pos:c.pos+1}function rl(c,a,f){return f?4294967296*a+(c>>>0):4294967296*(a>>>0)+(c>>>0)}function pd(c,a,f){var m=a<=16383?1:a<=2097151?2:a<=268435455?3:Math.floor(Math.log(a)/(7*Math.LN2));f.realloc(m);for(var w=f.pos-1;w>=c;w--)f.buf[w+m]=f.buf[w]}function nc(c,a){for(var f=0;f<c.length;f++)a.writeVarint(c[f])}function Im(c,a){for(var f=0;f<c.length;f++)a.writeSVarint(c[f])}function Om(c,a){for(var f=0;f<c.length;f++)a.writeFloat(c[f])}function Du(c,a){for(var f=0;f<c.length;f++)a.writeDouble(c[f])}function zy(c,a){for(var f=0;f<c.length;f++)a.writeBoolean(c[f])}function gd(c,a){for(var f=0;f<c.length;f++)a.writeFixed32(c[f])}function cp(c,a){for(var f=0;f<c.length;f++)a.writeSFixed32(c[f])}function dp(c,a){for(var f=0;f<c.length;f++)a.writeFixed64(c[f])}function sf(c,a){for(var f=0;f<c.length;f++)a.writeSFixed64(c[f])}function hp(c,a){return(c[a]|c[a+1]<<8|c[a+2]<<16)+16777216*c[a+3]}function oh(c,a,f){c[f]=a,c[f+1]=a>>>8,c[f+2]=a>>>16,c[f+3]=a>>>24}function lf(c,a){return(c[a]|c[a+1]<<8|c[a+2]<<16)+(c[a+3]<<24)}jn.prototype={destroy:function(){this.buf=null},readFields:function(c,a,f){for(f=f||this.length;this.pos<f;){var m=this.readVarint(),w=m>>3,M=this.pos;this.type=7&m,c(w,a,this),this.pos===M&&this.skip(m)}return a},readMessage:function(c,a){return this.readFields(c,a,this.readVarint()+this.pos)},readFixed32:function(){var c=hp(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=lf(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=hp(this.buf,this.pos)+hp(this.buf,this.pos+4)*Dl;return this.pos+=8,c},readSFixed64:function(){var c=hp(this.buf,this.pos)+lf(this.buf,this.pos+4)*Dl;return this.pos+=8,c},readFloat:function(){var c=My(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=My(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var a,f,m=this.buf;return a=127&(f=m[this.pos++]),f<128?a:(a|=(127&(f=m[this.pos++]))<<7,f<128?a:(a|=(127&(f=m[this.pos++]))<<14,f<128?a:(a|=(127&(f=m[this.pos++]))<<21,f<128?a:(function(w,M,z){var I,B,q=z.buf;if(I=(112&(B=q[z.pos++]))>>4,B<128||(I|=(127&(B=q[z.pos++]))<<3,B<128)||(I|=(127&(B=q[z.pos++]))<<10,B<128)||(I|=(127&(B=q[z.pos++]))<<17,B<128)||(I|=(127&(B=q[z.pos++]))<<24,B<128)||(I|=(1&(B=q[z.pos++]))<<31,B<128))return rl(w,I,M);throw new Error("Expected varint not more than 10 bytes")})(a|=(15&(f=m[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,a=this.pos;return this.pos=c,c-a>=12&&ga?(function(f,m,w){return ga.decode(f.subarray(m,w))})(this.buf,a,c):(function(f,m,w){for(var M="",z=m;z<w;){var I,B,q,Z=f[z],J=null,oe=Z>239?4:Z>223?3:Z>191?2:1;if(z+oe>w)break;oe===1?Z<128&&(J=Z):oe===2?(192&(I=f[z+1]))==128&&(J=(31&Z)<<6|63&I)<=127&&(J=null):oe===3?(B=f[z+2],(192&(I=f[z+1]))==128&&(192&B)==128&&((J=(15&Z)<<12|(63&I)<<6|63&B)<=2047||J>=55296&&J<=57343)&&(J=null)):oe===4&&(B=f[z+2],q=f[z+3],(192&(I=f[z+1]))==128&&(192&B)==128&&(192&q)==128&&((J=(15&Z)<<18|(63&I)<<12|(63&B)<<6|63&q)<=65535||J>=1114112)&&(J=null)),J===null?(J=65533,oe=1):J>65535&&(J-=65536,M+=String.fromCharCode(J>>>10&1023|55296),J=56320|1023&J),M+=String.fromCharCode(J),z+=oe}return M})(this.buf,a,c)},readBytes:function(){var c=this.readVarint()+this.pos,a=this.buf.subarray(this.pos,c);return this.pos=c,a},readPackedVarint:function(c,a){if(this.type!==jn.Bytes)return c.push(this.readVarint(a));var f=rc(this);for(c=c||[];this.pos<f;)c.push(this.readVarint(a));return c},readPackedSVarint:function(c){if(this.type!==jn.Bytes)return c.push(this.readSVarint());var a=rc(this);for(c=c||[];this.pos<a;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==jn.Bytes)return c.push(this.readBoolean());var a=rc(this);for(c=c||[];this.pos<a;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==jn.Bytes)return c.push(this.readFloat());var a=rc(this);for(c=c||[];this.pos<a;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==jn.Bytes)return c.push(this.readDouble());var a=rc(this);for(c=c||[];this.pos<a;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==jn.Bytes)return c.push(this.readFixed32());var a=rc(this);for(c=c||[];this.pos<a;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==jn.Bytes)return c.push(this.readSFixed32());var a=rc(this);for(c=c||[];this.pos<a;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==jn.Bytes)return c.push(this.readFixed64());var a=rc(this);for(c=c||[];this.pos<a;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==jn.Bytes)return c.push(this.readSFixed64());var a=rc(this);for(c=c||[];this.pos<a;)c.push(this.readSFixed64());return c},skip:function(c){var a=7&c;if(a===jn.Varint)for(;this.buf[this.pos++]>127;);else if(a===jn.Bytes)this.pos=this.readVarint()+this.pos;else if(a===jn.Fixed32)this.pos+=4;else{if(a!==jn.Fixed64)throw new Error("Unimplemented type: "+a);this.pos+=8}},writeTag:function(c,a){this.writeVarint(c<<3|a)},realloc:function(c){for(var a=this.length||16;a<this.pos+c;)a*=2;if(a!==this.length){var f=new Uint8Array(a);f.set(this.buf),this.buf=f,this.length=a}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),oh(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),oh(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),oh(this.buf,-1&c,this.pos),oh(this.buf,Math.floor(c*Lm),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),oh(this.buf,-1&c,this.pos),oh(this.buf,Math.floor(c*Lm),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?(function(a,f){var m,w;if(a>=0?(m=a%4294967296|0,w=a/4294967296|0):(w=~(-a/4294967296),4294967295^(m=~(-a%4294967296))?m=m+1|0:(m=0,w=w+1|0)),a>=18446744073709552e3||a<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");f.realloc(10),(function(M,z,I){I.buf[I.pos++]=127&M|128,M>>>=7,I.buf[I.pos++]=127&M|128,M>>>=7,I.buf[I.pos++]=127&M|128,M>>>=7,I.buf[I.pos++]=127&M|128,I.buf[I.pos]=127&(M>>>=7)})(m,0,f),(function(M,z){var I=(7&M)<<4;z.buf[z.pos++]|=I|((M>>>=3)?128:0),M&&(z.buf[z.pos++]=127&M|((M>>>=7)?128:0),M&&(z.buf[z.pos++]=127&M|((M>>>=7)?128:0),M&&(z.buf[z.pos++]=127&M|((M>>>=7)?128:0),M&&(z.buf[z.pos++]=127&M|((M>>>=7)?128:0),M&&(z.buf[z.pos++]=127&M)))))})(w,f)})(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var a=this.pos;this.pos=(function(m,w,M){for(var z,I,B=0;B<w.length;B++){if((z=w.charCodeAt(B))>55295&&z<57344){if(!I){z>56319||B+1===w.length?(m[M++]=239,m[M++]=191,m[M++]=189):I=z;continue}if(z<56320){m[M++]=239,m[M++]=191,m[M++]=189,I=z;continue}z=I-55296<<10|z-56320|65536,I=null}else I&&(m[M++]=239,m[M++]=191,m[M++]=189,I=null);z<128?m[M++]=z:(z<2048?m[M++]=z>>6|192:(z<65536?m[M++]=z>>12|224:(m[M++]=z>>18|240,m[M++]=z>>12&63|128),m[M++]=z>>6&63|128),m[M++]=63&z|128)}return M})(this.buf,c,this.pos);var f=this.pos-a;f>=128&&pd(a,f,this),this.pos=a-1,this.writeVarint(f),this.pos+=f},writeFloat:function(c){this.realloc(4),up(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),up(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var a=c.length;this.writeVarint(a),this.realloc(a);for(var f=0;f<a;f++)this.buf[this.pos++]=c[f]},writeRawMessage:function(c,a){this.pos++;var f=this.pos;c(a,this);var m=this.pos-f;m>=128&&pd(f,m,this),this.pos=f-1,this.writeVarint(m),this.pos+=m},writeMessage:function(c,a,f){this.writeTag(c,jn.Bytes),this.writeRawMessage(a,f)},writePackedVarint:function(c,a){a.length&&this.writeMessage(c,nc,a)},writePackedSVarint:function(c,a){a.length&&this.writeMessage(c,Im,a)},writePackedBoolean:function(c,a){a.length&&this.writeMessage(c,zy,a)},writePackedFloat:function(c,a){a.length&&this.writeMessage(c,Om,a)},writePackedDouble:function(c,a){a.length&&this.writeMessage(c,Du,a)},writePackedFixed32:function(c,a){a.length&&this.writeMessage(c,gd,a)},writePackedSFixed32:function(c,a){a.length&&this.writeMessage(c,cp,a)},writePackedFixed64:function(c,a){a.length&&this.writeMessage(c,dp,a)},writePackedSFixed64:function(c,a){a.length&&this.writeMessage(c,sf,a)},writeBytesField:function(c,a){this.writeTag(c,jn.Bytes),this.writeBytes(a)},writeFixed32Field:function(c,a){this.writeTag(c,jn.Fixed32),this.writeFixed32(a)},writeSFixed32Field:function(c,a){this.writeTag(c,jn.Fixed32),this.writeSFixed32(a)},writeFixed64Field:function(c,a){this.writeTag(c,jn.Fixed64),this.writeFixed64(a)},writeSFixed64Field:function(c,a){this.writeTag(c,jn.Fixed64),this.writeSFixed64(a)},writeVarintField:function(c,a){this.writeTag(c,jn.Varint),this.writeVarint(a)},writeSVarintField:function(c,a){this.writeTag(c,jn.Varint),this.writeSVarint(a)},writeStringField:function(c,a){this.writeTag(c,jn.Bytes),this.writeString(a)},writeFloatField:function(c,a){this.writeTag(c,jn.Fixed32),this.writeFloat(a)},writeDoubleField:function(c,a){this.writeTag(c,jn.Fixed64),this.writeDouble(a)},writeBooleanField:function(c,a){this.writeVarintField(c,!!a)}};var Mg=v(Pm);const uf=3;function Py(c,a,f){c===1&&f.readMessage(H0,a)}function H0(c,a,f){if(c===3){const{id:m,bitmap:w,width:M,height:z,left:I,top:B,advance:q}=f.readMessage(Z0,{});a.push({id:m,bitmap:new Yf({width:M+2*uf,height:z+2*uf},w),metrics:{width:M,height:z,left:I,top:B,advance:q}})}}function Z0(c,a,f){c===1?a.id=f.readVarint():c===2?a.bitmap=f.readBytes():c===3?a.width=f.readVarint():c===4?a.height=f.readVarint():c===5?a.left=f.readSVarint():c===6?a.top=f.readSVarint():c===7&&(a.advance=f.readVarint())}const Si=uf;function Ji(c){let a=0,f=0;for(const z of c)a+=z.w*z.h,f=Math.max(f,z.w);c.sort(((z,I)=>I.h-z.h));const m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),f),h:1/0}];let w=0,M=0;for(const z of c)for(let I=m.length-1;I>=0;I--){const B=m[I];if(!(z.w>B.w||z.h>B.h)){if(z.x=B.x,z.y=B.y,M=Math.max(M,z.y+z.h),w=Math.max(w,z.x+z.w),z.w===B.w&&z.h===B.h){const q=m.pop();I<m.length&&(m[I]=q)}else z.h===B.h?(B.x+=z.w,B.w-=z.w):z.w===B.w?(B.y+=z.h,B.h-=z.h):(m.push({x:B.x+z.w,y:B.y,w:B.w-z.w,h:z.h}),B.y+=z.h,B.h-=z.h);break}}return{w,h:M,fill:a/(w*M)||0}}const pn=1;class ei{constructor(a,{pixelRatio:f,version:m,stretchX:w,stretchY:M,content:z,textFitWidth:I,textFitHeight:B}){this.paddedRect=a,this.pixelRatio=f,this.stretchX=w,this.stretchY=M,this.content=z,this.version=m,this.textFitWidth=I,this.textFitHeight=B}get tl(){return[this.paddedRect.x+pn,this.paddedRect.y+pn]}get br(){return[this.paddedRect.x+this.paddedRect.w-pn,this.paddedRect.y+this.paddedRect.h-pn]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*pn)/this.pixelRatio,(this.paddedRect.h-2*pn)/this.pixelRatio]}}class Li{constructor(a,f){const m={},w={};this.haveRenderCallbacks=[];const M=[];this.addImages(a,m,M),this.addImages(f,w,M);const{w:z,h:I}=Ji(M),B=new Is({width:z||1,height:I||1});for(const q in a){const Z=a[q],J=m[q].paddedRect;Is.copy(Z.data,B,{x:0,y:0},{x:J.x+pn,y:J.y+pn},Z.data)}for(const q in f){const Z=f[q],J=w[q].paddedRect,oe=J.x+pn,ce=J.y+pn,xe=Z.data.width,ve=Z.data.height;Is.copy(Z.data,B,{x:0,y:0},{x:oe,y:ce},Z.data),Is.copy(Z.data,B,{x:0,y:ve-1},{x:oe,y:ce-1},{width:xe,height:1}),Is.copy(Z.data,B,{x:0,y:0},{x:oe,y:ce+ve},{width:xe,height:1}),Is.copy(Z.data,B,{x:xe-1,y:0},{x:oe-1,y:ce},{width:1,height:ve}),Is.copy(Z.data,B,{x:0,y:0},{x:oe+xe,y:ce},{width:1,height:ve})}this.image=B,this.iconPositions=m,this.patternPositions=w}addImages(a,f,m){for(const w in a){const M=a[w],z={x:0,y:0,w:M.data.width+2*pn,h:M.data.height+2*pn};m.push(z),f[w]=new ei(z,M),M.hasRenderCallback&&this.haveRenderCallbacks.push(w)}}patchUpdatedImages(a,f){a.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const m in a.updatedImages)this.patchUpdatedImage(this.iconPositions[m],a.getImage(m),f),this.patchUpdatedImage(this.patternPositions[m],a.getImage(m),f)}patchUpdatedImage(a,f,m){if(!a||!f||a.version===f.version)return;a.version=f.version;const[w,M]=a.tl;m.update(f.data,void 0,{x:w,y:M})}}var go;Yt("ImagePosition",ei),Yt("ImageAtlas",Li),h.ah=void 0,(go=h.ah||(h.ah={}))[go.none=0]="none",go[go.horizontal=1]="horizontal",go[go.vertical=2]="vertical",go[go.horizontalOnly=3]="horizontalOnly";const tu=-17;class ic{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(a,f){const m=new ic;return m.scale=a||1,m.fontStack=f,m}static forImage(a){const f=new ic;return f.imageName=a,f}}class md{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(a,f){const m=new md;for(let w=0;w<a.sections.length;w++){const M=a.sections[w];M.image?m.addImageSection(M):m.addTextSection(M,f)}return m}length(){return this.text.length}getSection(a){return this.sections[this.sectionIndex[a]]}getSectionIndex(a){return this.sectionIndex[a]}getCharCode(a){return this.text.charCodeAt(a)}verticalizePunctuation(){this.text=(function(a){let f="";for(let m=0;m<a.length;m++){const w=a.charCodeAt(m+1)||null,M=a.charCodeAt(m-1)||null;f+=w&&Jl(w)&&!of[a[m+1]]||M&&Jl(M)&&!of[a[m-1]]||!of[a[m]]?a[m]:of[a[m]]}return f})(this.text)}trim(){let a=0;for(let m=0;m<this.text.length&&ma[this.text.charCodeAt(m)];m++)a++;let f=this.text.length;for(let m=this.text.length-1;m>=0&&m>=a&&ma[this.text.charCodeAt(m)];m--)f--;this.text=this.text.substring(a,f),this.sectionIndex=this.sectionIndex.slice(a,f)}substring(a,f){const m=new md;return m.text=this.text.substring(a,f),m.sectionIndex=this.sectionIndex.slice(a,f),m.sections=this.sections,m}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((a,f)=>Math.max(a,this.sections[f].scale)),0)}addTextSection(a,f){this.text+=a.text,this.sections.push(ic.forText(a.scale,a.fontStack||f));const m=this.sections.length-1;for(let w=0;w<a.text.length;++w)this.sectionIndex.push(m)}addImageSection(a){const f=a.image?a.image.name:"";if(f.length===0)return void me("Can't add FormattedSection with an empty image.");const m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push(ic.forImage(f)),this.sectionIndex.push(this.sections.length-1)):me("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function nl(c,a,f,m,w,M,z,I,B,q,Z,J,oe,ce,xe){const ve=md.fromFeature(c,w);let Oe;J===h.ah.vertical&&ve.verticalizePunctuation();const{processBidirectionalText:Be,processStyledBidirectionalText:dt}=Qa;if(Be&&ve.sections.length===1){Oe=[];const Dt=Be(ve.toString(),fp(ve,q,M,a,m,ce));for(const Jt of Dt){const yr=new md;yr.text=Jt,yr.sections=ve.sections;for(let Zr=0;Zr<Jt.length;Zr++)yr.sectionIndex.push(0);Oe.push(yr)}}else if(dt){Oe=[];const Dt=dt(ve.text,ve.sectionIndex,fp(ve,q,M,a,m,ce));for(const Jt of Dt){const yr=new md;yr.text=Jt[0],yr.sectionIndex=Jt[1],yr.sections=ve.sections,Oe.push(yr)}}else Oe=(function(Dt,Jt){const yr=[],Zr=Dt.text;let dr=0;for(const pr of Jt)yr.push(Dt.substring(dr,pr)),dr=pr;return dr<Zr.length&&yr.push(Dt.substring(dr,Zr.length)),yr})(ve,fp(ve,q,M,a,m,ce));const Je=[],Qe={positionedLines:Je,text:ve.toString(),top:Z[1],bottom:Z[1],left:Z[0],right:Z[0],writingMode:J,iconsInText:!1,verticalizable:!1};return(function(Dt,Jt,yr,Zr,dr,pr,zr,Er,br,Ot,wr,Dr){let Qr=0,ti=tu,Mi=0,yo=0;const Mo=Er==="right"?1:Er==="left"?0:.5;let zo=0;for(const qn of dr){qn.trim();const xi=qn.getMaxScale(),ns=(xi-1)*Ba,Po={positionedGlyphs:[],lineOffset:0};Dt.positionedLines[zo]=Po;const no=Po.positionedGlyphs;let Ua=0;if(!qn.length()){ti+=pr,++zo;continue}for(let Ns=0;Ns<qn.length();Ns++){const Wn=qn.getSection(Ns),di=qn.getSectionIndex(Ns),Wi=qn.getCharCode(Ns);let is=0,sa=null,Bc=null,ol=null,zu=Ba;const Ll=!(br===h.ah.horizontal||!wr&&!Yl(Wi)||wr&&(ma[Wi]||(Za=Wi,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(Za)))));if(Wn.imageName){const Il=Zr[Wn.imageName];if(!Il)continue;ol=Wn.imageName,Dt.iconsInText=Dt.iconsInText||!0,Bc=Il.paddedRect;const vo=Il.displaySize;Wn.scale=Wn.scale*Ba/Dr,sa={width:vo[0],height:vo[1],left:pn,top:-Si,advance:Ll?vo[1]:vo[0]},is=ns+(Ba-vo[1]*Wn.scale),zu=sa.advance;const sl=Ll?vo[0]*Wn.scale-Ba*xi:vo[1]*Wn.scale-Ba*xi;sl>0&&sl>Ua&&(Ua=sl)}else{const Il=yr[Wn.fontStack],vo=Il&&Il[Wi];if(vo&&vo.rect)Bc=vo.rect,sa=vo.metrics;else{const sl=Jt[Wn.fontStack],mh=sl&&sl[Wi];if(!mh)continue;sa=mh.metrics}is=(xi-Wn.scale)*Ba}Ll?(Dt.verticalizable=!0,no.push({glyph:Wi,imageName:ol,x:Qr,y:ti+is,vertical:Ll,scale:Wn.scale,fontStack:Wn.fontStack,sectionIndex:di,metrics:sa,rect:Bc}),Qr+=zu*Wn.scale+Ot):(no.push({glyph:Wi,imageName:ol,x:Qr,y:ti+is,vertical:Ll,scale:Wn.scale,fontStack:Wn.fontStack,sectionIndex:di,metrics:sa,rect:Bc}),Qr+=sa.advance*Wn.scale+Ot)}no.length!==0&&(Mi=Math.max(Qr-Ot,Mi),Ly(no,0,no.length-1,Mo,Ua)),Qr=0;const al=pr*xi+Ua;Po.lineOffset=Math.max(Ua,ns),ti+=al,yo=Math.max(al,yo),++zo}var Za;const _s=ti-tu,{horizontalAlign:bs,verticalAlign:ws}=lh(zr);(function(qn,xi,ns,Po,no,Ua,al,Ns,Wn){const di=(xi-ns)*no;let Wi=0;Wi=Ua!==al?-Ns*Po-tu:(-Po*Wn+.5)*al;for(const is of qn)for(const sa of is.positionedGlyphs)sa.x+=di,sa.y+=Wi})(Dt.positionedLines,Mo,bs,ws,Mi,yo,pr,_s,dr.length),Dt.top+=-ws*_s,Dt.bottom=Dt.top+_s,Dt.left+=-bs*Mi,Dt.right=Dt.left+Mi})(Qe,a,f,m,Oe,z,I,B,J,q,oe,xe),!(function(Dt){for(const Jt of Dt)if(Jt.positionedGlyphs.length!==0)return!1;return!0})(Je)&&Qe}const ma={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},yd={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},sh={40:!0};function zg(c,a,f,m,w,M){if(a.imageName){const z=m[a.imageName];return z?z.displaySize[0]*a.scale*Ba/M+w:0}{const z=f[a.fontStack],I=z&&z[c];return I?I.metrics.advance*a.scale+w:0}}function il(c,a,f,m){const w=Math.pow(c-a,2);return m?c<a?w/2:2*w:w+Math.abs(f)*f}function cf(c,a,f){let m=0;return c===10&&(m-=1e4),f&&(m+=150),c!==40&&c!==65288||(m+=50),a!==41&&a!==65289||(m+=50),m}function df(c,a,f,m,w,M){let z=null,I=il(a,f,w,M);for(const B of m){const q=il(a-B.x,f,w,M)+B.badness;q<=I&&(z=B,I=q)}return{index:c,x:a,priorBreak:z,badness:I}}function js(c){return c?js(c.priorBreak).concat(c.index):[]}function fp(c,a,f,m,w,M){if(!c)return[];const z=[],I=(function(J,oe,ce,xe,ve,Oe){let Be=0;for(let dt=0;dt<J.length();dt++){const Je=J.getSection(dt);Be+=zg(J.getCharCode(dt),Je,xe,ve,oe,Oe)}return Be/Math.max(1,Math.ceil(Be/ce))})(c,a,f,m,w,M),B=c.text.indexOf("")>=0;let q=0;for(let J=0;J<c.length();J++){const oe=c.getSection(J),ce=c.getCharCode(J);if(ma[ce]||(q+=zg(ce,oe,m,w,a,M)),J<c.length()-1){const xe=!((Z=ce)<11904)&&(!!En["CJK Compatibility Forms"](Z)||!!En["CJK Compatibility"](Z)||!!En["CJK Strokes"](Z)||!!En["CJK Symbols and Punctuation"](Z)||!!En["Enclosed CJK Letters and Months"](Z)||!!En["Halfwidth and Fullwidth Forms"](Z)||!!En["Ideographic Description Characters"](Z)||!!En["Vertical Forms"](Z)||Xl.test(String.fromCodePoint(Z)));(yd[ce]||xe||oe.imageName||J!==c.length()-2&&sh[c.getCharCode(J+1)])&&z.push(df(J+1,q,I,z,cf(ce,c.getCharCode(J+1),xe&&B),!1))}}var Z;return js(df(c.length(),q,I,z,0,!0))}function lh(c){let a=.5,f=.5;switch(c){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":f=1;break;case"top":case"top-right":case"top-left":f=0}return{horizontalAlign:a,verticalAlign:f}}function Ly(c,a,f,m,w){if(!m&&!w)return;const M=c[f],z=(c[f].x+M.metrics.advance*M.scale)*m;for(let I=a;I<=f;I++)c[I].x-=z,c[I].y+=w}function uh(c,a,f){const{horizontalAlign:m,verticalAlign:w}=lh(f),M=a[0]-c.displaySize[0]*m,z=a[1]-c.displaySize[1]*w;return{image:c,top:z,bottom:z+c.displaySize[1],left:M,right:M+c.displaySize[0]}}function pp(c){var a,f;let m=c.left,w=c.top,M=c.right-m,z=c.bottom-w;const I=(a=c.image.textFitWidth)!==null&&a!==void 0?a:"stretchOrShrink",B=(f=c.image.textFitHeight)!==null&&f!==void 0?f:"stretchOrShrink",q=(c.image.content[2]-c.image.content[0])/(c.image.content[3]-c.image.content[1]);if(B==="proportional"){if(I==="stretchOnly"&&M/z<q||I==="proportional"){const Z=Math.ceil(z*q);m*=Z/M,M=Z}}else if(I==="proportional"&&B==="stretchOnly"&&q!==0&&M/z>q){const Z=Math.ceil(M/q);w*=Z/z,z=Z}return{x1:m,y1:w,x2:m+M,y2:w+z}}function Rc(c,a,f,m,w,M){const z=c.image;let I;if(z.content){const Oe=z.content,Be=z.pixelRatio||1;I=[Oe[0]/Be,Oe[1]/Be,z.displaySize[0]-Oe[2]/Be,z.displaySize[1]-Oe[3]/Be]}const B=a.left*M,q=a.right*M;let Z,J,oe,ce;f==="width"||f==="both"?(ce=w[0]+B-m[3],J=w[0]+q+m[1]):(ce=w[0]+(B+q-z.displaySize[0])/2,J=ce+z.displaySize[0]);const xe=a.top*M,ve=a.bottom*M;return f==="height"||f==="both"?(Z=w[1]+xe-m[0],oe=w[1]+ve+m[2]):(Z=w[1]+(xe+ve-z.displaySize[1])/2,oe=Z+z.displaySize[1]),{image:z,top:Z,right:J,bottom:oe,left:ce,collisionPadding:I}}const Fa=255,ts=128,Ml=Fa*ts;function ac(c,a){const{expression:f}=a;if(f.kind==="constant")return{kind:"constant",layoutSize:f.evaluate(new Pn(c+1))};if(f.kind==="source")return{kind:"source"};{const{zoomStops:m,interpolationType:w}=f;let M=0;for(;M<m.length&&m[M]<=c;)M++;M=Math.max(0,M-1);let z=M;for(;z<m.length&&m[z]<c+1;)z++;z=Math.min(m.length-1,z);const I=m[M],B=m[z];return f.kind==="composite"?{kind:"composite",minZoom:I,maxZoom:B,interpolationType:w}:{kind:"camera",minZoom:I,maxZoom:B,minSize:f.evaluate(new Pn(I)),maxSize:f.evaluate(new Pn(B)),interpolationType:w}}}function gp(c,a,f){let m="never";const w=c.get(a);return w?m=w:c.get(f)&&(m="always"),m}const jm=Na.VectorTileFeature.types,Iy=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function vd(c,a,f,m,w,M,z,I,B,q,Z,J,oe){const ce=I?Math.min(Ml,Math.round(I[0])):0,xe=I?Math.min(Ml,Math.round(I[1])):0;c.emplaceBack(a,f,Math.round(32*m),Math.round(32*w),M,z,(ce<<1)+(B?1:0),xe,16*q,16*Z,256*J,256*oe)}function mp(c,a,f){c.emplaceBack(a.x,a.y,f),c.emplaceBack(a.x,a.y,f),c.emplaceBack(a.x,a.y,f),c.emplaceBack(a.x,a.y,f)}function zl(c){for(const a of c.sections)if(Vh(a.text))return!0;return!1}class Pg{constructor(a){this.layoutVertexArray=new Ac,this.indexArray=new Qo,this.programConfigurations=a,this.segments=new Cn,this.dynamicLayoutVertexArray=new Jo,this.opacityVertexArray=new sn,this.hasVisibleVertices=!1,this.placedSymbolArray=new vi}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(a,f,m,w){this.isEmpty()||(m&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,W0.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,f),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,Mm.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,Iy,!0),this.opacityVertexBuffer.itemSize=1),(m||w)&&this.programConfigurations.upload(a))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Yt("SymbolBuffers",Pg);class vs{constructor(a,f,m){this.layoutVertexArray=new a,this.layoutAttributes=f,this.indexArray=new m,this.segments=new Cn,this.collisionVertexArray=new Ti}upload(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,zm.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Yt("CollisionBuffers",vs);class ch{constructor(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map((z=>z.id)),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Zf([]),this.placementViewportMatrix=Zf([]);const f=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ac(this.zoom,f["text-size"]),this.iconSizeData=ac(this.zoom,f["icon-size"]);const m=this.layers[0].layout,w=m.get("symbol-sort-key"),M=m.get("symbol-z-order");this.canOverlap=gp(m,"text-overlap","text-allow-overlap")!=="never"||gp(m,"icon-overlap","icon-allow-overlap")!=="never"||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey=M!=="viewport-y"&&!w.isConstant(),this.sortFeaturesByY=(M==="viewport-y"||M==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,m.get("symbol-placement")==="point"&&(this.writingModes=m.get("text-writing-mode").map((z=>h.ah[z]))),this.stateDependentLayerIds=this.layers.filter((z=>z.isStateDependent())).map((z=>z.id)),this.sourceID=a.sourceID}createArrays(){this.text=new Pg(new ko(this.layers,this.zoom,(a=>/^text/.test(a)))),this.icon=new Pg(new ko(this.layers,this.zoom,(a=>/^icon/.test(a)))),this.glyphOffsetArray=new ni,this.lineVertexArray=new ia,this.symbolInstances=new Ln,this.textAnchorOffsets=new In}calculateGlyphDependencies(a,f,m,w,M){for(let z=0;z<a.length;z++)if(f[a.charCodeAt(z)]=!0,(m||w)&&M){const I=of[a.charAt(z)];I&&(f[I.charCodeAt(0)]=!0)}}populate(a,f,m){const w=this.layers[0],M=w.layout,z=M.get("text-font"),I=M.get("text-field"),B=M.get("icon-image"),q=(I.value.kind!=="constant"||I.value.value instanceof Oo&&!I.value.value.isEmpty()||I.value.value.toString().length>0)&&(z.value.kind!=="constant"||z.value.value.length>0),Z=B.value.kind!=="constant"||!!B.value.value||Object.keys(B.parameters).length>0,J=M.get("symbol-sort-key");if(this.features=[],!q&&!Z)return;const oe=f.iconDependencies,ce=f.glyphDependencies,xe=f.availableImages,ve=new Pn(this.zoom);for(const{feature:Oe,id:Be,index:dt,sourceLayerIndex:Je}of a){const Qe=w._featureFilter.needGeometry,Dt=Ps(Oe,Qe);if(!w._featureFilter.filter(ve,Dt,m))continue;let Jt,yr;if(Qe||(Dt.geometry=fo(Oe)),q){const dr=w.getValueAndResolveTokens("text-field",Dt,m,xe),pr=Oo.factory(dr),zr=this.hasRTLText=this.hasRTLText||zl(pr);(!zr||Qa.getRTLTextPluginStatus()==="unavailable"||zr&&Qa.isParsed())&&(Jt=jc(pr,w,Dt))}if(Z){const dr=w.getValueAndResolveTokens("icon-image",Dt,m,xe);yr=dr instanceof So?dr:So.fromString(dr)}if(!Jt&&!yr)continue;const Zr=this.sortFeaturesByKey?J.evaluate(Dt,{},m):void 0;if(this.features.push({id:Be,text:Jt,icon:yr,index:dt,sourceLayerIndex:Je,geometry:Dt.geometry,properties:Oe.properties,type:jm[Oe.type],sortKey:Zr}),yr&&(oe[yr.name]=!0),Jt){const dr=z.evaluate(Dt,{},m).join(","),pr=M.get("text-rotation-alignment")!=="viewport"&&M.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(h.ah.vertical)>=0;for(const zr of Jt.sections)if(zr.image)oe[zr.image.name]=!0;else{const Er=be(Jt.toString()),br=zr.fontStack||dr,Ot=ce[br]=ce[br]||{};this.calculateGlyphDependencies(zr.text,Ot,pr,this.allowVerticalPlacement,Er)}}}M.get("symbol-placement")==="line"&&(this.features=(function(Oe){const Be={},dt={},Je=[];let Qe=0;function Dt(dr){Je.push(Oe[dr]),Qe++}function Jt(dr,pr,zr){const Er=dt[dr];return delete dt[dr],dt[pr]=Er,Je[Er].geometry[0].pop(),Je[Er].geometry[0]=Je[Er].geometry[0].concat(zr[0]),Er}function yr(dr,pr,zr){const Er=Be[pr];return delete Be[pr],Be[dr]=Er,Je[Er].geometry[0].shift(),Je[Er].geometry[0]=zr[0].concat(Je[Er].geometry[0]),Er}function Zr(dr,pr,zr){const Er=zr?pr[0][pr[0].length-1]:pr[0][0];return`${dr}:${Er.x}:${Er.y}`}for(let dr=0;dr<Oe.length;dr++){const pr=Oe[dr],zr=pr.geometry,Er=pr.text?pr.text.toString():null;if(!Er){Dt(dr);continue}const br=Zr(Er,zr),Ot=Zr(Er,zr,!0);if(br in dt&&Ot in Be&&dt[br]!==Be[Ot]){const wr=yr(br,Ot,zr),Dr=Jt(br,Ot,Je[wr].geometry);delete Be[br],delete dt[Ot],dt[Zr(Er,Je[Dr].geometry,!0)]=Dr,Je[wr].geometry=null}else br in dt?Jt(br,Ot,zr):Ot in Be?yr(br,Ot,zr):(Dt(dr),Be[br]=Qe-1,dt[Ot]=Qe-1)}return Je.filter((dr=>dr.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((Oe,Be)=>Oe.sortKey-Be.sortKey))}update(a,f,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(a,f,this.layers,m),this.icon.programConfigurations.updatePaintArrays(a,f,this.layers,m))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(a,f){const m=this.lineVertexArray.length;if(a.segment!==void 0){let w=a.dist(f[a.segment+1]),M=a.dist(f[a.segment]);const z={};for(let I=a.segment+1;I<f.length;I++)z[I]={x:f[I].x,y:f[I].y,tileUnitDistanceFromAnchor:w},I<f.length-1&&(w+=f[I+1].dist(f[I]));for(let I=a.segment||0;I>=0;I--)z[I]={x:f[I].x,y:f[I].y,tileUnitDistanceFromAnchor:M},I>0&&(M+=f[I-1].dist(f[I]));for(let I=0;I<f.length;I++){const B=z[I];this.lineVertexArray.emplaceBack(B.x,B.y,B.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(a,f,m,w,M,z,I,B,q,Z,J,oe){const ce=a.indexArray,xe=a.layoutVertexArray,ve=a.segments.prepareSegment(4*f.length,xe,ce,this.canOverlap?z.sortKey:void 0),Oe=this.glyphOffsetArray.length,Be=ve.vertexLength,dt=this.allowVerticalPlacement&&I===h.ah.vertical?Math.PI/2:0,Je=z.text&&z.text.sections;for(let Qe=0;Qe<f.length;Qe++){const{tl:Dt,tr:Jt,bl:yr,br:Zr,tex:dr,pixelOffsetTL:pr,pixelOffsetBR:zr,minFontScaleX:Er,minFontScaleY:br,glyphOffset:Ot,isSDF:wr,sectionIndex:Dr}=f[Qe],Qr=ve.vertexLength,ti=Ot[1];vd(xe,B.x,B.y,Dt.x,ti+Dt.y,dr.x,dr.y,m,wr,pr.x,pr.y,Er,br),vd(xe,B.x,B.y,Jt.x,ti+Jt.y,dr.x+dr.w,dr.y,m,wr,zr.x,pr.y,Er,br),vd(xe,B.x,B.y,yr.x,ti+yr.y,dr.x,dr.y+dr.h,m,wr,pr.x,zr.y,Er,br),vd(xe,B.x,B.y,Zr.x,ti+Zr.y,dr.x+dr.w,dr.y+dr.h,m,wr,zr.x,zr.y,Er,br),mp(a.dynamicLayoutVertexArray,B,dt),ce.emplaceBack(Qr,Qr+1,Qr+2),ce.emplaceBack(Qr+1,Qr+2,Qr+3),ve.vertexLength+=4,ve.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ot[0]),Qe!==f.length-1&&Dr===f[Qe+1].sectionIndex||a.programConfigurations.populatePaintArrays(xe.length,z,z.index,{},oe,Je&&Je[Dr])}a.placedSymbolArray.emplaceBack(B.x,B.y,Oe,this.glyphOffsetArray.length-Oe,Be,q,Z,B.segment,m?m[0]:0,m?m[1]:0,w[0],w[1],I,0,!1,0,J)}_addCollisionDebugVertex(a,f,m,w,M,z){return f.emplaceBack(0,0),a.emplaceBack(m.x,m.y,w,M,Math.round(z.x),Math.round(z.y))}addCollisionDebugVertices(a,f,m,w,M,z,I){const B=M.segments.prepareSegment(4,M.layoutVertexArray,M.indexArray),q=B.vertexLength,Z=M.layoutVertexArray,J=M.collisionVertexArray,oe=I.anchorX,ce=I.anchorY;this._addCollisionDebugVertex(Z,J,z,oe,ce,new C(a,f)),this._addCollisionDebugVertex(Z,J,z,oe,ce,new C(m,f)),this._addCollisionDebugVertex(Z,J,z,oe,ce,new C(m,w)),this._addCollisionDebugVertex(Z,J,z,oe,ce,new C(a,w)),B.vertexLength+=4;const xe=M.indexArray;xe.emplaceBack(q,q+1),xe.emplaceBack(q+1,q+2),xe.emplaceBack(q+2,q+3),xe.emplaceBack(q+3,q),B.primitiveLength+=4}addDebugCollisionBoxes(a,f,m,w){for(let M=a;M<f;M++){const z=this.collisionBoxArray.get(M);this.addCollisionDebugVertices(z.x1,z.y1,z.x2,z.y2,w?this.textCollisionBox:this.iconCollisionBox,z.anchorPoint,m)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new vs(Vn,pa.members,Ma),this.iconCollisionBox=new vs(Vn,pa.members,Ma);for(let a=0;a<this.symbolInstances.length;a++){const f=this.symbolInstances.get(a);this.addDebugCollisionBoxes(f.textBoxStartIndex,f.textBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.iconBoxStartIndex,f.iconBoxEndIndex,f,!1),this.addDebugCollisionBoxes(f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex,f,!1)}}_deserializeCollisionBoxesForSymbol(a,f,m,w,M,z,I,B,q){const Z={};for(let J=f;J<m;J++){const oe=a.get(J);Z.textBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},Z.textFeatureIndex=oe.featureIndex;break}for(let J=w;J<M;J++){const oe=a.get(J);Z.verticalTextBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},Z.verticalTextFeatureIndex=oe.featureIndex;break}for(let J=z;J<I;J++){const oe=a.get(J);Z.iconBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},Z.iconFeatureIndex=oe.featureIndex;break}for(let J=B;J<q;J++){const oe=a.get(J);Z.verticalIconBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},Z.verticalIconFeatureIndex=oe.featureIndex;break}return Z}deserializeCollisionBoxes(a){this.collisionArrays=[];for(let f=0;f<this.symbolInstances.length;f++){const m=this.symbolInstances.get(f);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(a,f){const m=a.placedSymbolArray.get(f),w=m.vertexStartIndex+4*m.numGlyphs;for(let M=m.vertexStartIndex;M<w;M+=4)a.indexArray.emplaceBack(M,M+1,M+2),a.indexArray.emplaceBack(M+1,M+2,M+3)}getSortedSymbolIndexes(a){if(this.sortedAngle===a&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const f=Math.sin(a),m=Math.cos(a),w=[],M=[],z=[];for(let I=0;I<this.symbolInstances.length;++I){z.push(I);const B=this.symbolInstances.get(I);w.push(0|Math.round(f*B.anchorX+m*B.anchorY)),M.push(B.featureIndex)}return z.sort(((I,B)=>w[I]-w[B]||M[B]-M[I])),z}addToSortKeyRanges(a,f){const m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===f?m.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:f,symbolInstanceStart:a,symbolInstanceEnd:a+1})}sortFeatures(a){if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const f of this.symbolInstanceIndexes){const m=this.symbolInstances.get(f);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach(((w,M,z)=>{w>=0&&z.indexOf(w)===M&&this.addIndicesForPlacedSymbol(this.text,w)})),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Rm,Nm;Yt("SymbolBucket",ch,{omit:["layers","collisionBoxArray","features","compareText"]}),ch.MAX_GLYPHS=65535,ch.addDynamicAttributes=mp;var Mu={get paint(){return Nm=Nm||new D({"icon-opacity":new qr(ke.paint_symbol["icon-opacity"]),"icon-color":new qr(ke.paint_symbol["icon-color"]),"icon-halo-color":new qr(ke.paint_symbol["icon-halo-color"]),"icon-halo-width":new qr(ke.paint_symbol["icon-halo-width"]),"icon-halo-blur":new qr(ke.paint_symbol["icon-halo-blur"]),"icon-translate":new Ar(ke.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ar(ke.paint_symbol["icon-translate-anchor"]),"text-opacity":new qr(ke.paint_symbol["text-opacity"]),"text-color":new qr(ke.paint_symbol["text-color"],{runtimeType:Jn,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new qr(ke.paint_symbol["text-halo-color"]),"text-halo-width":new qr(ke.paint_symbol["text-halo-width"]),"text-halo-blur":new qr(ke.paint_symbol["text-halo-blur"]),"text-translate":new Ar(ke.paint_symbol["text-translate"]),"text-translate-anchor":new Ar(ke.paint_symbol["text-translate-anchor"])})},get layout(){return Rm=Rm||new D({"symbol-placement":new Ar(ke.layout_symbol["symbol-placement"]),"symbol-spacing":new Ar(ke.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ar(ke.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new qr(ke.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ar(ke.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ar(ke.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Ar(ke.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Ar(ke.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ar(ke.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ar(ke.layout_symbol["icon-rotation-alignment"]),"icon-size":new qr(ke.layout_symbol["icon-size"]),"icon-text-fit":new Ar(ke.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ar(ke.layout_symbol["icon-text-fit-padding"]),"icon-image":new qr(ke.layout_symbol["icon-image"]),"icon-rotate":new qr(ke.layout_symbol["icon-rotate"]),"icon-padding":new qr(ke.layout_symbol["icon-padding"]),"icon-keep-upright":new Ar(ke.layout_symbol["icon-keep-upright"]),"icon-offset":new qr(ke.layout_symbol["icon-offset"]),"icon-anchor":new qr(ke.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ar(ke.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ar(ke.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ar(ke.layout_symbol["text-rotation-alignment"]),"text-field":new qr(ke.layout_symbol["text-field"]),"text-font":new qr(ke.layout_symbol["text-font"]),"text-size":new qr(ke.layout_symbol["text-size"]),"text-max-width":new qr(ke.layout_symbol["text-max-width"]),"text-line-height":new Ar(ke.layout_symbol["text-line-height"]),"text-letter-spacing":new qr(ke.layout_symbol["text-letter-spacing"]),"text-justify":new qr(ke.layout_symbol["text-justify"]),"text-radial-offset":new qr(ke.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ar(ke.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new qr(ke.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new qr(ke.layout_symbol["text-anchor"]),"text-max-angle":new Ar(ke.layout_symbol["text-max-angle"]),"text-writing-mode":new Ar(ke.layout_symbol["text-writing-mode"]),"text-rotate":new qr(ke.layout_symbol["text-rotate"]),"text-padding":new Ar(ke.layout_symbol["text-padding"]),"text-keep-upright":new Ar(ke.layout_symbol["text-keep-upright"]),"text-transform":new qr(ke.layout_symbol["text-transform"]),"text-offset":new qr(ke.layout_symbol["text-offset"]),"text-allow-overlap":new Ar(ke.layout_symbol["text-allow-overlap"]),"text-overlap":new Ar(ke.layout_symbol["text-overlap"]),"text-ignore-placement":new Ar(ke.layout_symbol["text-ignore-placement"]),"text-optional":new Ar(ke.layout_symbol["text-optional"])})}};class yp{constructor(a){if(a.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=a.property.overrides?a.property.overrides.runtimeType:ca,this.defaultValue=a}evaluate(a){if(a.formattedSection){const f=this.defaultValue.property.overrides;if(f&&f.hasOverride(a.formattedSection))return f.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default}eachChild(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Yt("FormatSectionOverride",yp,{omit:["defaultValue"]});class hf extends p{constructor(a){super(a,Mu)}recalculate(a,f){if(super.recalculate(a,f),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const m=this.layout.get("text-writing-mode");if(m){const w=[];for(const M of m)w.indexOf(M)<0&&w.push(M);this.layout._values["text-writing-mode"]=w}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(a,f,m,w){const M=this.layout.get(a).evaluate(f,{},m,w),z=this._unevaluatedLayout._values[a];return z.isDataDriven()||Cr(z.value)||!M?M:(function(I,B){return B.replace(/{([^{}]+)}/g,((q,Z)=>I&&Z in I?String(I[Z]):""))})(f.properties,M)}createBucket(a){return new ch(a)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const a of Mu.paint.overridableProperties){if(!hf.hasPaintOverride(this.layout,a))continue;const f=this.paint.get(a),m=new yp(f),w=new Ct(m,f.property.specification);let M=null;M=f.value.kind==="constant"||f.value.kind==="source"?new zn("source",w):new ki("composite",w,f.value.zoomStops),this.paint._values[a]=new Ha(f.property,M,f.parameters)}}_handleOverridablePaintPropertyUpdate(a,f,m){return!(!this.layout||f.isDataDriven()||m.isDataDriven())&&hf.hasPaintOverride(this.layout,a)}static hasPaintOverride(a,f){const m=a.get("text-field"),w=Mu.paint.properties[f];let M=!1;const z=I=>{for(const B of I)if(w.overrides&&w.overrides.hasOverride(B))return void(M=!0)};if(m.value.kind==="constant"&&m.value.value instanceof Oo)z(m.value.value.sections);else if(m.value.kind==="source"){const I=q=>{M||(q instanceof da&&Zi(q.value)===Uo?z(q.value.sections):q instanceof Sa?z(q.sections):q.eachChild(I))},B=m.value;B._styleExpression&&I(B._styleExpression.expression)}return M}}let dh;var Oy={get paint(){return dh=dh||new D({"background-color":new Ar(ke.paint_background["background-color"]),"background-pattern":new Su(ke.paint_background["background-pattern"]),"background-opacity":new Ar(ke.paint_background["background-opacity"])})}};class vp extends p{constructor(a){super(a,Oy)}}let Bm;var jy={get paint(){return Bm=Bm||new D({"raster-opacity":new Ar(ke.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ar(ke.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ar(ke.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ar(ke.paint_raster["raster-brightness-max"]),"raster-saturation":new Ar(ke.paint_raster["raster-saturation"]),"raster-contrast":new Ar(ke.paint_raster["raster-contrast"]),"raster-resampling":new Ar(ke.paint_raster["raster-resampling"]),"raster-fade-duration":new Ar(ke.paint_raster["raster-fade-duration"])})}};class Lg extends p{constructor(a){super(a,jy)}}class Fm extends p{constructor(a){super(a,{}),this.onAdd=f=>{this.implementation.onAdd&&this.implementation.onAdd(f,f.painter.context.gl)},this.onRemove=f=>{this.implementation.onRemove&&this.implementation.onRemove(f,f.painter.context.gl)},this.implementation=a}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class K0{constructor(a){this._methodToThrottle=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const $m=63710088e-1;class xd{constructor(a,f){if(isNaN(a)||isNaN(f))throw new Error(`Invalid LngLat object: (${a}, ${f})`);if(this.lng=+a,this.lat=+f,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new xd(de(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(a){const f=Math.PI/180,m=this.lat*f,w=a.lat*f,M=Math.sin(m)*Math.sin(w)+Math.cos(m)*Math.cos(w)*Math.cos((a.lng-this.lng)*f);return $m*Math.acos(Math.min(M,1))}static convert(a){if(a instanceof xd)return a;if(Array.isArray(a)&&(a.length===2||a.length===3))return new xd(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&typeof a=="object"&&a!==null)return new xd(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Gm=2*Math.PI*$m;function Um(c){return Gm*Math.cos(c*Math.PI/180)}function hh(c){return(180+c)/360}function xp(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function ff(c,a){return c/Um(a)}function Ig(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}class fh{constructor(a,f,m=0){this.x=+a,this.y=+f,this.z=+m}static fromLngLat(a,f=0){const m=xd.convert(a);return new fh(hh(m.lng),xp(m.lat),ff(f,m.lat))}toLngLat(){return new xd(360*this.x-180,Ig(this.y))}toAltitude(){return this.z*Um(Ig(this.y))}meterInMercatorCoordinateUnits(){return 1/Gm*(a=Ig(this.y),1/Math.cos(a*Math.PI/180));var a}}function Og(c,a,f){var m=2*Math.PI*6378137/256/Math.pow(2,f);return[c*m-2*Math.PI*6378137/2,a*m-2*Math.PI*6378137/2]}class pf{constructor(a,f,m){if(!(function(w,M,z){return!(w<0||w>25||z<0||z>=Math.pow(2,w)||M<0||M>=Math.pow(2,w))})(a,f,m))throw new Error(`x=${f}, y=${m}, z=${a} outside of bounds. 0<=x<${Math.pow(2,a)}, 0<=y<${Math.pow(2,a)} 0<=z<=25 `);this.z=a,this.x=f,this.y=m,this.key=ph(0,a,a,f,m)}equals(a){return this.z===a.z&&this.x===a.x&&this.y===a.y}url(a,f,m){const w=(z=this.y,I=this.z,B=Og(256*(M=this.x),256*(z=Math.pow(2,I)-z-1),I),q=Og(256*(M+1),256*(z+1),I),B[0]+","+B[1]+","+q[0]+","+q[1]);var M,z,I,B,q;const Z=(function(J,oe,ce){let xe,ve="";for(let Oe=J;Oe>0;Oe--)xe=1<<Oe-1,ve+=(oe&xe?1:0)+(ce&xe?2:0);return ve})(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(m==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,f>1?"@2x":"").replace(/{quadkey}/g,Z).replace(/{bbox-epsg-3857}/g,w)}isChildOf(a){const f=this.z-a.z;return f>0&&a.x===this.x>>f&&a.y===this.y>>f}getTilePoint(a){const f=Math.pow(2,this.z);return new C((a.x*f-this.x)*Aa,(a.y*f-this.y)*Aa)}toString(){return`${this.z}/${this.x}/${this.y}`}}class jg{constructor(a,f){this.wrap=a,this.canonical=f,this.key=ph(a,f.z,f.z,f.x,f.y)}}class rs{constructor(a,f,m,w,M){if(a<m)throw new Error(`overscaledZ should be >= z; overscaledZ = ${a}; z = ${m}`);this.overscaledZ=a,this.wrap=f,this.canonical=new pf(m,+w,+M),this.key=ph(f,a,m,w,M)}clone(){return new rs(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)}scaledTo(a){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-a;return a>this.canonical.z?new rs(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new rs(a,this.wrap,a,this.canonical.x>>f,this.canonical.y>>f)}calculateScaledKey(a,f){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const m=this.canonical.z-a;return a>this.canonical.z?ph(this.wrap*+f,a,this.canonical.z,this.canonical.x,this.canonical.y):ph(this.wrap*+f,a,a,this.canonical.x>>m,this.canonical.y>>m)}isChildOf(a){if(a.wrap!==this.wrap)return!1;const f=this.canonical.z-a.canonical.z;return a.overscaledZ===0||a.overscaledZ<this.overscaledZ&&a.canonical.x===this.canonical.x>>f&&a.canonical.y===this.canonical.y>>f}children(a){if(this.overscaledZ>=a)return[new rs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const f=this.canonical.z+1,m=2*this.canonical.x,w=2*this.canonical.y;return[new rs(f,this.wrap,f,m,w),new rs(f,this.wrap,f,m+1,w),new rs(f,this.wrap,f,m,w+1),new rs(f,this.wrap,f,m+1,w+1)]}isLessThan(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))}wrapped(){return new rs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(a){return new rs(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new jg(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(a){return this.canonical.getTilePoint(new fh(a.x-this.wrap,a.y))}}function ph(c,a,f,m,w){(c*=2)<0&&(c=-1*c-1);const M=1<<f;return(M*M*c+M*w+m).toString(36)+f.toString(36)+a.toString(36)}Yt("CanonicalTileID",pf),Yt("OverscaledTileID",rs,{omit:["posMatrix"]});class Rg{constructor(a,f,m,w=1,M=1,z=1,I=0){if(this.uid=a,f.height!==f.width)throw new RangeError("DEM tiles must be square");if(m&&!["mapbox","terrarium","custom"].includes(m))return void me(`"${m}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=f.height;const B=this.dim=f.height-2;switch(this.data=new Uint32Array(f.data.buffer),m){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=w,this.greenFactor=M,this.blueFactor=z,this.baseShift=I;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let q=0;q<B;q++)this.data[this._idx(-1,q)]=this.data[this._idx(0,q)],this.data[this._idx(B,q)]=this.data[this._idx(B-1,q)],this.data[this._idx(q,-1)]=this.data[this._idx(q,0)],this.data[this._idx(q,B)]=this.data[this._idx(q,B-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(B,-1)]=this.data[this._idx(B-1,0)],this.data[this._idx(-1,B)]=this.data[this._idx(0,B-1)],this.data[this._idx(B,B)]=this.data[this._idx(B-1,B-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let q=0;q<B;q++)for(let Z=0;Z<B;Z++){const J=this.get(q,Z);J>this.max&&(this.max=J),J<this.min&&(this.min=J)}}get(a,f){const m=new Uint8Array(this.data.buffer),w=4*this._idx(a,f);return this.unpack(m[w],m[w+1],m[w+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(a,f){if(a<-1||a>=this.dim+1||f<-1||f>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(f+1)*this.stride+(a+1)}unpack(a,f,m){return a*this.redFactor+f*this.greenFactor+m*this.blueFactor-this.baseShift}getPixels(){return new Is({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(a,f,m){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");let w=f*this.dim,M=f*this.dim+this.dim,z=m*this.dim,I=m*this.dim+this.dim;switch(f){case-1:w=M-1;break;case 1:M=w+1}switch(m){case-1:z=I-1;break;case 1:I=z+1}const B=-f*this.dim,q=-m*this.dim;for(let Z=z;Z<I;Z++)for(let J=w;J<M;J++)this.data[this._idx(J,Z)]=a.data[this._idx(J+B,Z+q)]}}Yt("DEMData",Rg);class Ii{constructor(a){this._stringToNumber={},this._numberToString=[];for(let f=0;f<a.length;f++){const m=a[f];this._stringToNumber[m]=f,this._numberToString[f]=m}}encode(a){return this._stringToNumber[a]}decode(a){if(a>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${a} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[a]}}class Ng{constructor(a,f,m,w,M){this.type="Feature",this._vectorTileFeature=a,a._z=f,a._x=m,a._y=w,this.properties=a.properties,this.id=M}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(a){this._geometry=a}toJSON(){const a={geometry:this.geometry};for(const f in this)f!=="_geometry"&&f!=="_vectorTileFeature"&&(a[f]=this[f]);return a}}class Ry{constructor(a,f){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new na(Aa,16,0),this.grid3D=new na(Aa,16,0),this.featureIndexArray=new Vi,this.promoteId=f}insert(a,f,m,w,M,z){const I=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,w,M);const B=z?this.grid3D:this.grid;for(let q=0;q<f.length;q++){const Z=f[q],J=[1/0,1/0,-1/0,-1/0];for(let oe=0;oe<Z.length;oe++){const ce=Z[oe];J[0]=Math.min(J[0],ce.x),J[1]=Math.min(J[1],ce.y),J[2]=Math.max(J[2],ce.x),J[3]=Math.max(J[3],ce.y)}J[0]<Aa&&J[1]<Aa&&J[2]>=0&&J[3]>=0&&B.insert(I,J[0],J[1],J[2],J[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Na.VectorTile(new Mg(this.rawTileData)).layers,this.sourceLayerCoder=new Ii(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(a,f,m,w){this.loadVTLayers();const M=a.params||{},z=Aa/a.tileSize/a.scale,I=Nh(M.filter),B=a.queryGeometry,q=a.queryPadding*z,Z=_p(B),J=this.grid.query(Z.minX-q,Z.minY-q,Z.maxX+q,Z.maxY+q),oe=_p(a.cameraQueryGeometry),ce=this.grid3D.query(oe.minX-q,oe.minY-q,oe.maxX+q,oe.maxY+q,((Oe,Be,dt,Je)=>(function(Qe,Dt,Jt,yr,Zr){for(const pr of Qe)if(Dt<=pr.x&&Jt<=pr.y&&yr>=pr.x&&Zr>=pr.y)return!0;const dr=[new C(Dt,Jt),new C(Dt,Zr),new C(yr,Zr),new C(yr,Jt)];if(Qe.length>2){for(const pr of dr)if(Ju(Qe,pr))return!0}for(let pr=0;pr<Qe.length-1;pr++)if(fm(Qe[pr],Qe[pr+1],dr))return!0;return!1})(a.cameraQueryGeometry,Oe-q,Be-q,dt+q,Je+q)));for(const Oe of ce)J.push(Oe);J.sort(X0);const xe={};let ve;for(let Oe=0;Oe<J.length;Oe++){const Be=J[Oe];if(Be===ve)continue;ve=Be;const dt=this.featureIndexArray.get(Be);let Je=null;this.loadMatchingFeature(xe,dt.bucketIndex,dt.sourceLayerIndex,dt.featureIndex,I,M.layers,M.availableImages,f,m,w,((Qe,Dt,Jt)=>(Je||(Je=fo(Qe)),Dt.queryIntersectsFeature(B,Qe,Jt,Je,this.z,a.transform,z,a.pixelPosMatrix))))}return xe}loadMatchingFeature(a,f,m,w,M,z,I,B,q,Z,J){const oe=this.bucketLayerIDs[f];if(z&&!(function(Oe,Be){for(let dt=0;dt<Oe.length;dt++)if(Be.indexOf(Oe[dt])>=0)return!0;return!1})(z,oe))return;const ce=this.sourceLayerCoder.decode(m),xe=this.vtLayers[ce].feature(w);if(M.needGeometry){const Oe=Ps(xe,!0);if(!M.filter(new Pn(this.tileID.overscaledZ),Oe,this.tileID.canonical))return}else if(!M.filter(new Pn(this.tileID.overscaledZ),xe))return;const ve=this.getId(xe,ce);for(let Oe=0;Oe<oe.length;Oe++){const Be=oe[Oe];if(z&&z.indexOf(Be)<0)continue;const dt=B[Be];if(!dt)continue;let Je={};ve&&Z&&(Je=Z.getState(dt.sourceLayer||"_geojsonTileLayer",ve));const Qe=he({},q[Be]);Qe.paint=gf(Qe.paint,dt.paint,xe,Je,I),Qe.layout=gf(Qe.layout,dt.layout,xe,Je,I);const Dt=!J||J(xe,dt,Je);if(!Dt)continue;const Jt=new Ng(xe,this.z,this.x,this.y,ve);Jt.layer=Qe;let yr=a[Be];yr===void 0&&(yr=a[Be]=[]),yr.push({featureIndex:w,feature:Jt,intersectionZ:Dt})}}lookupSymbolFeatures(a,f,m,w,M,z,I,B){const q={};this.loadVTLayers();const Z=Nh(M);for(const J of a)this.loadMatchingFeature(q,m,w,J,Z,z,I,B,f);return q}hasLayer(a){for(const f of this.bucketLayerIDs)for(const m of f)if(a===m)return!0;return!1}getId(a,f){let m=a.id;return this.promoteId&&(m=a.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[f]],typeof m=="boolean"&&(m=Number(m))),m}}function gf(c,a,f,m,w){return ie(c,((M,z)=>{const I=a instanceof bu?a.get(z):null;return I&&I.evaluate?I.evaluate(f,m,w):I}))}function _p(c){let a=1/0,f=1/0,m=-1/0,w=-1/0;for(const M of c)a=Math.min(a,M.x),f=Math.min(f,M.y),m=Math.max(m,M.x),w=Math.max(w,M.y);return{minX:a,minY:f,maxX:m,maxY:w}}function X0(c,a){return a-c}function Ny(c,a,f,m,w){const M=[];for(let z=0;z<c.length;z++){const I=c[z];let B;for(let q=0;q<I.length-1;q++){let Z=I[q],J=I[q+1];Z.x<a&&J.x<a||(Z.x<a?Z=new C(a,Z.y+(a-Z.x)/(J.x-Z.x)*(J.y-Z.y))._round():J.x<a&&(J=new C(a,Z.y+(a-Z.x)/(J.x-Z.x)*(J.y-Z.y))._round()),Z.y<f&&J.y<f||(Z.y<f?Z=new C(Z.x+(f-Z.y)/(J.y-Z.y)*(J.x-Z.x),f)._round():J.y<f&&(J=new C(Z.x+(f-Z.y)/(J.y-Z.y)*(J.x-Z.x),f)._round()),Z.x>=m&&J.x>=m||(Z.x>=m?Z=new C(m,Z.y+(m-Z.x)/(J.x-Z.x)*(J.y-Z.y))._round():J.x>=m&&(J=new C(m,Z.y+(m-Z.x)/(J.x-Z.x)*(J.y-Z.y))._round()),Z.y>=w&&J.y>=w||(Z.y>=w?Z=new C(Z.x+(w-Z.y)/(J.y-Z.y)*(J.x-Z.x),w)._round():J.y>=w&&(J=new C(Z.x+(w-Z.y)/(J.y-Z.y)*(J.x-Z.x),w)._round()),B&&Z.equals(B[B.length-1])||(B=[Z],M.push(B)),B.push(J)))))}}return M}Yt("FeatureIndex",Ry,{omit:["rawTileData","sourceLayerCoder"]});class Pl extends C{constructor(a,f,m,w){super(a,f),this.angle=m,w!==void 0&&(this.segment=w)}clone(){return new Pl(this.x,this.y,this.angle,this.segment)}}function _d(c,a,f,m,w){if(a.segment===void 0||f===0)return!0;let M=a,z=a.segment+1,I=0;for(;I>-f/2;){if(z--,z<0)return!1;I-=c[z].dist(M),M=c[z]}I+=c[z].dist(c[z+1]),z++;const B=[];let q=0;for(;I<f/2;){const Z=c[z],J=c[z+1];if(!J)return!1;let oe=c[z-1].angleTo(Z)-Z.angleTo(J);for(oe=Math.abs((oe+3*Math.PI)%(2*Math.PI)-Math.PI),B.push({distance:I,angleDelta:oe}),q+=oe;I-B[0].distance>m;)q-=B.shift().angleDelta;if(q>w)return!1;z++,I+=Z.dist(J)}return!0}function Bg(c){let a=0;for(let f=0;f<c.length-1;f++)a+=c[f].dist(c[f+1]);return a}function bp(c,a,f){return c?.6*a*f:0}function Fg(c,a){return Math.max(c?c.right-c.left:0,a?a.right-a.left:0)}function bd(c,a,f,m,w,M){const z=bp(f,w,M),I=Fg(f,m)*M;let B=0;const q=Bg(c)/2;for(let Z=0;Z<c.length-1;Z++){const J=c[Z],oe=c[Z+1],ce=J.dist(oe);if(B+ce>q){const xe=(q-B)/ce,ve=Tr.number(J.x,oe.x,xe),Oe=Tr.number(J.y,oe.y,xe),Be=new Pl(ve,Oe,oe.angleTo(J),Z);return Be._round(),!z||_d(c,Be,I,z,a)?Be:void 0}B+=ce}}function oc(c,a,f,m,w,M,z,I,B){const q=bp(m,M,z),Z=Fg(m,w),J=Z*z,oe=c[0].x===0||c[0].x===B||c[0].y===0||c[0].y===B;return a-J<a/4&&(a=J+a/4),mf(c,oe?a/2*I%a:(Z/2+2*M)*z*I%a,a,q,f,J,oe,!1,B)}function mf(c,a,f,m,w,M,z,I,B){const q=M/2,Z=Bg(c);let J=0,oe=a-f,ce=[];for(let xe=0;xe<c.length-1;xe++){const ve=c[xe],Oe=c[xe+1],Be=ve.dist(Oe),dt=Oe.angleTo(ve);for(;oe+f<J+Be;){oe+=f;const Je=(oe-J)/Be,Qe=Tr.number(ve.x,Oe.x,Je),Dt=Tr.number(ve.y,Oe.y,Je);if(Qe>=0&&Qe<B&&Dt>=0&&Dt<B&&oe-q>=0&&oe+q<=Z){const Jt=new Pl(Qe,Dt,dt,xe);Jt._round(),m&&!_d(c,Jt,M,m,w)||ce.push(Jt)}}J+=Be}return I||ce.length||z||(ce=mf(c,J/2,f,m,w,M,z,!0,B)),ce}Yt("Anchor",Pl);const yf=pn;function Vm(c,a,f,m){const w=[],M=c.image,z=M.pixelRatio,I=M.paddedRect.w-2*yf,B=M.paddedRect.h-2*yf;let q={x1:c.left,y1:c.top,x2:c.right,y2:c.bottom};const Z=M.stretchX||[[0,I]],J=M.stretchY||[[0,B]],oe=(Ot,wr)=>Ot+wr[1]-wr[0],ce=Z.reduce(oe,0),xe=J.reduce(oe,0),ve=I-ce,Oe=B-xe;let Be=0,dt=ce,Je=0,Qe=xe,Dt=0,Jt=ve,yr=0,Zr=Oe;if(M.content&&m){const Ot=M.content,wr=Ot[2]-Ot[0],Dr=Ot[3]-Ot[1];(M.textFitWidth||M.textFitHeight)&&(q=pp(c)),Be=wp(Z,0,Ot[0]),Je=wp(J,0,Ot[1]),dt=wp(Z,Ot[0],Ot[2]),Qe=wp(J,Ot[1],Ot[3]),Dt=Ot[0]-Be,yr=Ot[1]-Je,Jt=wr-dt,Zr=Dr-Qe}const dr=q.x1,pr=q.y1,zr=q.x2-dr,Er=q.y2-pr,br=(Ot,wr,Dr,Qr)=>{const ti=Sp(Ot.stretch-Be,dt,zr,dr),Mi=$g(Ot.fixed-Dt,Jt,Ot.stretch,ce),yo=Sp(wr.stretch-Je,Qe,Er,pr),Mo=$g(wr.fixed-yr,Zr,wr.stretch,xe),zo=Sp(Dr.stretch-Be,dt,zr,dr),Za=$g(Dr.fixed-Dt,Jt,Dr.stretch,ce),_s=Sp(Qr.stretch-Je,Qe,Er,pr),bs=$g(Qr.fixed-yr,Zr,Qr.stretch,xe),ws=new C(ti,yo),qn=new C(zo,yo),xi=new C(zo,_s),ns=new C(ti,_s),Po=new C(Mi/z,Mo/z),no=new C(Za/z,bs/z),Ua=a*Math.PI/180;if(Ua){const Wn=Math.sin(Ua),di=Math.cos(Ua),Wi=[di,-Wn,Wn,di];ws._matMult(Wi),qn._matMult(Wi),ns._matMult(Wi),xi._matMult(Wi)}const al=Ot.stretch+Ot.fixed,Ns=wr.stretch+wr.fixed;return{tl:ws,tr:qn,bl:ns,br:xi,tex:{x:M.paddedRect.x+yf+al,y:M.paddedRect.y+yf+Ns,w:Dr.stretch+Dr.fixed-al,h:Qr.stretch+Qr.fixed-Ns},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Po,pixelOffsetBR:no,minFontScaleX:Jt/z/zr,minFontScaleY:Zr/z/Er,isSDF:f}};if(m&&(M.stretchX||M.stretchY)){const Ot=qm(Z,ve,ce),wr=qm(J,Oe,xe);for(let Dr=0;Dr<Ot.length-1;Dr++){const Qr=Ot[Dr],ti=Ot[Dr+1];for(let Mi=0;Mi<wr.length-1;Mi++)w.push(br(Qr,wr[Mi],ti,wr[Mi+1]))}}else w.push(br({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:I+1},{fixed:0,stretch:B+1}));return w}function wp(c,a,f){let m=0;for(const w of c)m+=Math.max(a,Math.min(f,w[1]))-Math.max(a,Math.min(f,w[0]));return m}function qm(c,a,f){const m=[{fixed:-yf,stretch:0}];for(const[w,M]of c){const z=m[m.length-1];m.push({fixed:w-z.stretch,stretch:z.stretch}),m.push({fixed:w-z.stretch,stretch:z.stretch+(M-w)})}return m.push({fixed:a+yf,stretch:f}),m}function Sp(c,a,f,m){return c/a*f+m}function $g(c,a,f,m){return c-a*f/m}class xs{constructor(a,f,m,w,M,z,I,B,q,Z){var J;if(this.boxStartIndex=a.length,q){let oe=z.top,ce=z.bottom;const xe=z.collisionPadding;xe&&(oe-=xe[1],ce+=xe[3]);let ve=ce-oe;ve>0&&(ve=Math.max(10,ve),this.circleDiameter=ve)}else{const oe=!((J=z.image)===null||J===void 0)&&J.content&&(z.image.textFitWidth||z.image.textFitHeight)?pp(z):{x1:z.left,y1:z.top,x2:z.right,y2:z.bottom};oe.y1=oe.y1*I-B[0],oe.y2=oe.y2*I+B[2],oe.x1=oe.x1*I-B[3],oe.x2=oe.x2*I+B[1];const ce=z.collisionPadding;if(ce&&(oe.x1-=ce[0]*I,oe.y1-=ce[1]*I,oe.x2+=ce[2]*I,oe.y2+=ce[3]*I),Z){const xe=new C(oe.x1,oe.y1),ve=new C(oe.x2,oe.y1),Oe=new C(oe.x1,oe.y2),Be=new C(oe.x2,oe.y2),dt=Z*Math.PI/180;xe._rotate(dt),ve._rotate(dt),Oe._rotate(dt),Be._rotate(dt),oe.x1=Math.min(xe.x,ve.x,Oe.x,Be.x),oe.x2=Math.max(xe.x,ve.x,Oe.x,Be.x),oe.y1=Math.min(xe.y,ve.y,Oe.y,Be.y),oe.y2=Math.max(xe.y,ve.y,Oe.y,Be.y)}a.emplaceBack(f.x,f.y,oe.x1,oe.y1,oe.x2,oe.y2,m,w,M)}this.boxEndIndex=a.length}}class By{constructor(a=[],f=((m,w)=>m<w?-1:m>w?1:0)){if(this.data=a,this.length=this.data.length,this.compare=f,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(a){this.data.push(a),this._up(this.length++)}pop(){if(this.length===0)return;const a=this.data[0],f=this.data.pop();return--this.length>0&&(this.data[0]=f,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:f,compare:m}=this,w=f[a];for(;a>0;){const M=a-1>>1,z=f[M];if(m(w,z)>=0)break;f[a]=z,a=M}f[a]=w}_down(a){const{data:f,compare:m}=this,w=this.length>>1,M=f[a];for(;a<w;){let z=1+(a<<1);const I=z+1;if(I<this.length&&m(f[I],f[z])<0&&(z=I),m(f[z],M)>=0)break;f[a]=f[z],a=z}f[a]=M}}function Fy(c,a=1,f=!1){let m=1/0,w=1/0,M=-1/0,z=-1/0;const I=c[0];for(let ce=0;ce<I.length;ce++){const xe=I[ce];(!ce||xe.x<m)&&(m=xe.x),(!ce||xe.y<w)&&(w=xe.y),(!ce||xe.x>M)&&(M=xe.x),(!ce||xe.y>z)&&(z=xe.y)}const B=Math.min(M-m,z-w);let q=B/2;const Z=new By([],gh);if(B===0)return new C(m,w);for(let ce=m;ce<M;ce+=B)for(let xe=w;xe<z;xe+=B)Z.push(new yn(ce+q,xe+q,q,c));let J=(function(ce){let xe=0,ve=0,Oe=0;const Be=ce[0];for(let dt=0,Je=Be.length,Qe=Je-1;dt<Je;Qe=dt++){const Dt=Be[dt],Jt=Be[Qe],yr=Dt.x*Jt.y-Jt.x*Dt.y;ve+=(Dt.x+Jt.x)*yr,Oe+=(Dt.y+Jt.y)*yr,xe+=3*yr}return new yn(ve/xe,Oe/xe,0,ce)})(c),oe=Z.length;for(;Z.length;){const ce=Z.pop();(ce.d>J.d||!J.d)&&(J=ce,f&&console.log("found best %d after %d probes",Math.round(1e4*ce.d)/1e4,oe)),ce.max-J.d<=a||(q=ce.h/2,Z.push(new yn(ce.p.x-q,ce.p.y-q,q,c)),Z.push(new yn(ce.p.x+q,ce.p.y-q,q,c)),Z.push(new yn(ce.p.x-q,ce.p.y+q,q,c)),Z.push(new yn(ce.p.x+q,ce.p.y+q,q,c)),oe+=4)}return f&&(console.log(`num probes: ${oe}`),console.log(`best distance: ${J.d}`)),J.p}function gh(c,a){return a.max-c.max}function yn(c,a,f,m){this.p=new C(c,a),this.h=f,this.d=(function(w,M){let z=!1,I=1/0;for(let B=0;B<M.length;B++){const q=M[B];for(let Z=0,J=q.length,oe=J-1;Z<J;oe=Z++){const ce=q[Z],xe=q[oe];ce.y>w.y!=xe.y>w.y&&w.x<(xe.x-ce.x)*(w.y-ce.y)/(xe.y-ce.y)+ce.x&&(z=!z),I=Math.min(I,hm(w,ce,xe))}}return(z?1:-1)*Math.sqrt(I)})(this.p,m),this.max=this.d+this.h*Math.SQRT2}var mo;h.aq=void 0,(mo=h.aq||(h.aq={}))[mo.center=1]="center",mo[mo.left=2]="left",mo[mo.right=3]="right",mo[mo.top=4]="top",mo[mo.bottom=5]="bottom",mo[mo["top-left"]=6]="top-left",mo[mo["top-right"]=7]="top-right",mo[mo["bottom-left"]=8]="bottom-left",mo[mo["bottom-right"]=9]="bottom-right";const ro=7,$a=Number.POSITIVE_INFINITY;function vf(c,a){return a[1]!==$a?(function(f,m,w){let M=0,z=0;switch(m=Math.abs(m),w=Math.abs(w),f){case"top-right":case"top-left":case"top":z=w-ro;break;case"bottom-right":case"bottom-left":case"bottom":z=-w+ro}switch(f){case"top-right":case"bottom-right":case"right":M=-m;break;case"top-left":case"bottom-left":case"left":M=m}return[M,z]})(c,a[0],a[1]):(function(f,m){let w=0,M=0;m<0&&(m=0);const z=m/Math.SQRT2;switch(f){case"top-right":case"top-left":M=z-ro;break;case"bottom-right":case"bottom-left":M=-z+ro;break;case"bottom":M=-m+ro;break;case"top":M=m-ro}switch(f){case"top-right":case"bottom-right":w=-z;break;case"top-left":case"bottom-left":w=z;break;case"left":w=m;break;case"right":w=-m}return[w,M]})(c,a[0])}function Nc(c,a,f){var m;const w=c.layout,M=(m=w.get("text-variable-anchor-offset"))===null||m===void 0?void 0:m.evaluate(a,{},f);if(M){const I=M.values,B=[];for(let q=0;q<I.length;q+=2){const Z=B[q]=I[q],J=I[q+1].map((oe=>oe*Ba));Z.startsWith("top")?J[1]-=ro:Z.startsWith("bottom")&&(J[1]+=ro),B[q+1]=J}return new jo(B)}const z=w.get("text-variable-anchor");if(z){let I;I=c._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[w.get("text-radial-offset").evaluate(a,{},f)*Ba,$a]:w.get("text-offset").evaluate(a,{},f).map((q=>q*Ba));const B=[];for(const q of z)B.push(q,vf(q,I));return new jo(B)}return null}function Gg(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ri(c,a,f,m,w,M,z,I,B,q,Z){let J=M.textMaxSize.evaluate(a,{});J===void 0&&(J=z);const oe=c.layers[0].layout,ce=oe.get("icon-offset").evaluate(a,{},Z),xe=Ep(f.horizontal),ve=z/24,Oe=c.tilePixelRatio*ve,Be=c.tilePixelRatio*J/24,dt=c.tilePixelRatio*I,Je=c.tilePixelRatio*oe.get("symbol-spacing"),Qe=oe.get("text-padding")*c.tilePixelRatio,Dt=(function(Ot,wr,Dr,Qr=1){const ti=Ot.get("icon-padding").evaluate(wr,{},Dr),Mi=ti&&ti.values;return[Mi[0]*Qr,Mi[1]*Qr,Mi[2]*Qr,Mi[3]*Qr]})(oe,a,Z,c.tilePixelRatio),Jt=oe.get("text-max-angle")/180*Math.PI,yr=oe.get("text-rotation-alignment")!=="viewport"&&oe.get("symbol-placement")!=="point",Zr=oe.get("icon-rotation-alignment")==="map"&&oe.get("symbol-placement")!=="point",dr=oe.get("symbol-placement"),pr=Je/2,zr=oe.get("icon-text-fit");let Er;m&&zr!=="none"&&(c.allowVerticalPlacement&&f.vertical&&(Er=Rc(m,f.vertical,zr,oe.get("icon-text-fit-padding"),ce,ve)),xe&&(m=Rc(m,xe,zr,oe.get("icon-text-fit-padding"),ce,ve)));const br=(Ot,wr)=>{wr.x<0||wr.x>=Aa||wr.y<0||wr.y>=Aa||(function(Dr,Qr,ti,Mi,yo,Mo,zo,Za,_s,bs,ws,qn,xi,ns,Po,no,Ua,al,Ns,Wn,di,Wi,is,sa,Bc){const ol=Dr.addToLineVertexArray(Qr,ti);let zu,Ll,Il,vo,sl=0,mh=0,$y=0,Dp=0,bf=-1,wf=-1;const sc={};let yh=kc("");if(Dr.allowVerticalPlacement&&Mi.vertical){const Fo=Za.layout.get("text-rotate").evaluate(di,{},sa)+90;Il=new xs(_s,Qr,bs,ws,qn,Mi.vertical,xi,ns,Po,Fo),zo&&(vo=new xs(_s,Qr,bs,ws,qn,zo,Ua,al,Po,Fo))}if(yo){const Fo=Za.layout.get("icon-rotate").evaluate(di,{}),Bs=Za.layout.get("icon-text-fit")!=="none",ll=Vm(yo,Fo,is,Bs),$o=zo?Vm(zo,Fo,is,Bs):void 0;Ll=new xs(_s,Qr,bs,ws,qn,yo,Ua,al,!1,Fo),sl=4*ll.length;const ul=Dr.iconSizeData;let cl=null;ul.kind==="source"?(cl=[ts*Za.layout.get("icon-size").evaluate(di,{})],cl[0]>Ml&&me(`${Dr.layerIds[0]}: Value for "icon-size" is >= ${Fa}. Reduce your "icon-size".`)):ul.kind==="composite"&&(cl=[ts*Wi.compositeIconSizes[0].evaluate(di,{},sa),ts*Wi.compositeIconSizes[1].evaluate(di,{},sa)],(cl[0]>Ml||cl[1]>Ml)&&me(`${Dr.layerIds[0]}: Value for "icon-size" is >= ${Fa}. Reduce your "icon-size".`)),Dr.addSymbols(Dr.icon,ll,cl,Wn,Ns,di,h.ah.none,Qr,ol.lineStartIndex,ol.lineLength,-1,sa),bf=Dr.icon.placedSymbolArray.length-1,$o&&(mh=4*$o.length,Dr.addSymbols(Dr.icon,$o,cl,Wn,Ns,di,h.ah.vertical,Qr,ol.lineStartIndex,ol.lineLength,-1,sa),wf=Dr.icon.placedSymbolArray.length-1)}const Gy=Object.keys(Mi.horizontal);for(const Fo of Gy){const Bs=Mi.horizontal[Fo];if(!zu){yh=kc(Bs.text);const $o=Za.layout.get("text-rotate").evaluate(di,{},sa);zu=new xs(_s,Qr,bs,ws,qn,Bs,xi,ns,Po,$o)}const ll=Bs.positionedLines.length===1;if($y+=Ug(Dr,Qr,Bs,Mo,Za,Po,di,no,ol,Mi.vertical?h.ah.horizontal:h.ah.horizontalOnly,ll?Gy:[Fo],sc,bf,Wi,sa),ll)break}Mi.vertical&&(Dp+=Ug(Dr,Qr,Mi.vertical,Mo,Za,Po,di,no,ol,h.ah.vertical,["vertical"],sc,wf,Wi,sa));const Uy=zu?zu.boxStartIndex:Dr.collisionBoxArray.length,Vy=zu?zu.boxEndIndex:Dr.collisionBoxArray.length,qy=Il?Il.boxStartIndex:Dr.collisionBoxArray.length,Wy=Il?Il.boxEndIndex:Dr.collisionBoxArray.length,Hm=Ll?Ll.boxStartIndex:Dr.collisionBoxArray.length,Hy=Ll?Ll.boxEndIndex:Dr.collisionBoxArray.length,Zy=vo?vo.boxStartIndex:Dr.collisionBoxArray.length,qg=vo?vo.boxEndIndex:Dr.collisionBoxArray.length;let Pu=-1;const Wg=(Fo,Bs)=>Fo&&Fo.circleDiameter?Math.max(Fo.circleDiameter,Bs):Bs;Pu=Wg(zu,Pu),Pu=Wg(Il,Pu),Pu=Wg(Ll,Pu),Pu=Wg(vo,Pu);const Hg=Pu>-1?1:0;Hg&&(Pu*=Bc/Ba),Dr.glyphOffsetArray.length>=ch.MAX_GLYPHS&&me("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),di.sortKey!==void 0&&Dr.addToSortKeyRanges(Dr.symbolInstances.length,di.sortKey);const Zm=Nc(Za,di,sa),[Zg,Km]=(function(Fo,Bs){const ll=Fo.length,$o=Bs==null?void 0:Bs.values;if(($o==null?void 0:$o.length)>0)for(let ul=0;ul<$o.length;ul+=2){const cl=$o[ul+1];Fo.emplaceBack(h.aq[$o[ul]],cl[0],cl[1])}return[ll,Fo.length]})(Dr.textAnchorOffsets,Zm);Dr.symbolInstances.emplaceBack(Qr.x,Qr.y,sc.right>=0?sc.right:-1,sc.center>=0?sc.center:-1,sc.left>=0?sc.left:-1,sc.vertical||-1,bf,wf,yh,Uy,Vy,qy,Wy,Hm,Hy,Zy,qg,bs,$y,Dp,sl,mh,Hg,0,xi,Pu,Zg,Km)})(c,wr,Ot,f,m,w,Er,c.layers[0],c.collisionBoxArray,a.index,a.sourceLayerIndex,c.index,Oe,[Qe,Qe,Qe,Qe],yr,B,dt,Dt,Zr,ce,a,M,q,Z,z)};if(dr==="line")for(const Ot of Ny(a.geometry,0,0,Aa,Aa)){const wr=oc(Ot,Je,Jt,f.vertical||xe,m,24,Be,c.overscaling,Aa);for(const Dr of wr)xe&&Wm(c,xe.text,pr,Dr)||br(Ot,Dr)}else if(dr==="line-center"){for(const Ot of a.geometry)if(Ot.length>1){const wr=bd(Ot,Jt,f.vertical||xe,m,24,Be);wr&&br(Ot,wr)}}else if(a.type==="Polygon")for(const Ot of Gi(a.geometry,0)){const wr=Fy(Ot,16);br(Ot[0],new Pl(wr.x,wr.y,0))}else if(a.type==="LineString")for(const Ot of a.geometry)br(Ot,new Pl(Ot[0].x,Ot[0].y,0));else if(a.type==="Point")for(const Ot of a.geometry)for(const wr of Ot)br([wr],new Pl(wr.x,wr.y,0))}function Ug(c,a,f,m,w,M,z,I,B,q,Z,J,oe,ce,xe){const ve=(function(dt,Je,Qe,Dt,Jt,yr,Zr,dr){const pr=Dt.layout.get("text-rotate").evaluate(yr,{})*Math.PI/180,zr=[];for(const Er of Je.positionedLines)for(const br of Er.positionedGlyphs){if(!br.rect)continue;const Ot=br.rect||{};let wr=Si+1,Dr=!0,Qr=1,ti=0;const Mi=(Jt||dr)&&br.vertical,yo=br.metrics.advance*br.scale/2;if(dr&&Je.verticalizable&&(ti=Er.lineOffset/2-(br.imageName?-(Ba-br.metrics.width*br.scale)/2:(br.scale-1)*Ba)),br.imageName){const Wn=Zr[br.imageName];Dr=Wn.sdf,Qr=Wn.pixelRatio,wr=pn/Qr}const Mo=Jt?[br.x+yo,br.y]:[0,0];let zo=Jt?[0,0]:[br.x+yo+Qe[0],br.y+Qe[1]-ti],Za=[0,0];Mi&&(Za=zo,zo=[0,0]);const _s=br.metrics.isDoubleResolution?2:1,bs=(br.metrics.left-wr)*br.scale-yo+zo[0],ws=(-br.metrics.top-wr)*br.scale+zo[1],qn=bs+Ot.w/_s*br.scale/Qr,xi=ws+Ot.h/_s*br.scale/Qr,ns=new C(bs,ws),Po=new C(qn,ws),no=new C(bs,xi),Ua=new C(qn,xi);if(Mi){const Wn=new C(-yo,yo-tu),di=-Math.PI/2,Wi=Ba/2-yo,is=new C(5-tu-Wi,-(br.imageName?Wi:0)),sa=new C(...Za);ns._rotateAround(di,Wn)._add(is)._add(sa),Po._rotateAround(di,Wn)._add(is)._add(sa),no._rotateAround(di,Wn)._add(is)._add(sa),Ua._rotateAround(di,Wn)._add(is)._add(sa)}if(pr){const Wn=Math.sin(pr),di=Math.cos(pr),Wi=[di,-Wn,Wn,di];ns._matMult(Wi),Po._matMult(Wi),no._matMult(Wi),Ua._matMult(Wi)}const al=new C(0,0),Ns=new C(0,0);zr.push({tl:ns,tr:Po,bl:no,br:Ua,tex:Ot,writingMode:Je.writingMode,glyphOffset:Mo,sectionIndex:br.sectionIndex,isSDF:Dr,pixelOffsetTL:al,pixelOffsetBR:Ns,minFontScaleX:0,minFontScaleY:0})}return zr})(0,f,I,w,M,z,m,c.allowVerticalPlacement),Oe=c.textSizeData;let Be=null;Oe.kind==="source"?(Be=[ts*w.layout.get("text-size").evaluate(z,{})],Be[0]>Ml&&me(`${c.layerIds[0]}: Value for "text-size" is >= ${Fa}. Reduce your "text-size".`)):Oe.kind==="composite"&&(Be=[ts*ce.compositeTextSizes[0].evaluate(z,{},xe),ts*ce.compositeTextSizes[1].evaluate(z,{},xe)],(Be[0]>Ml||Be[1]>Ml)&&me(`${c.layerIds[0]}: Value for "text-size" is >= ${Fa}. Reduce your "text-size".`)),c.addSymbols(c.text,ve,Be,I,M,z,q,a,B.lineStartIndex,B.lineLength,oe,xe);for(const dt of Z)J[dt]=c.text.placedSymbolArray.length-1;return 4*ve.length}function Ep(c){for(const a in c)return c[a];return null}function Wm(c,a,f,m){const w=c.compareText;if(a in w){const M=w[a];for(let z=M.length-1;z>=0;z--)if(m.dist(M[z])<f)return!0}else w[a]=[];return w[a].push(m),!1}const Ap=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class kp{static from(a){if(!(a instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[f,m]=new Uint8Array(a,0,2);if(f!==219)throw new Error("Data does not appear to be in a KDBush format.");const w=m>>4;if(w!==1)throw new Error(`Got v${w} data when expected v1.`);const M=Ap[15&m];if(!M)throw new Error("Unrecognized array type.");const[z]=new Uint16Array(a,2,1),[I]=new Uint32Array(a,4,1);return new kp(I,z,M,a)}constructor(a,f=64,m=Float64Array,w){if(isNaN(a)||a<0)throw new Error(`Unpexpected numItems value: ${a}.`);this.numItems=+a,this.nodeSize=Math.min(Math.max(+f,2),65535),this.ArrayType=m,this.IndexArrayType=a<65536?Uint16Array:Uint32Array;const M=Ap.indexOf(this.ArrayType),z=2*a*this.ArrayType.BYTES_PER_ELEMENT,I=a*this.IndexArrayType.BYTES_PER_ELEMENT,B=(8-I%8)%8;if(M<0)throw new Error(`Unexpected typed array class: ${m}.`);w&&w instanceof ArrayBuffer?(this.data=w,this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+I+B,2*a),this._pos=2*a,this._finished=!0):(this.data=new ArrayBuffer(8+z+I+B),this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+I+B,2*a),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+M]),new Uint16Array(this.data,2,1)[0]=f,new Uint32Array(this.data,4,1)[0]=a)}add(a,f){const m=this._pos>>1;return this.ids[m]=m,this.coords[this._pos++]=a,this.coords[this._pos++]=f,m}finish(){const a=this._pos>>1;if(a!==this.numItems)throw new Error(`Added ${a} items when expected ${this.numItems}.`);return Rs(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(a,f,m,w){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:M,coords:z,nodeSize:I}=this,B=[0,M.length-1,0],q=[];for(;B.length;){const Z=B.pop()||0,J=B.pop()||0,oe=B.pop()||0;if(J-oe<=I){for(let Oe=oe;Oe<=J;Oe++){const Be=z[2*Oe],dt=z[2*Oe+1];Be>=a&&Be<=m&&dt>=f&&dt<=w&&q.push(M[Oe])}continue}const ce=oe+J>>1,xe=z[2*ce],ve=z[2*ce+1];xe>=a&&xe<=m&&ve>=f&&ve<=w&&q.push(M[ce]),(Z===0?a<=xe:f<=ve)&&(B.push(oe),B.push(ce-1),B.push(1-Z)),(Z===0?m>=xe:w>=ve)&&(B.push(ce+1),B.push(J),B.push(1-Z))}return q}within(a,f,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:M,nodeSize:z}=this,I=[0,w.length-1,0],B=[],q=m*m;for(;I.length;){const Z=I.pop()||0,J=I.pop()||0,oe=I.pop()||0;if(J-oe<=z){for(let Oe=oe;Oe<=J;Oe++)Ga(M[2*Oe],M[2*Oe+1],a,f)<=q&&B.push(w[Oe]);continue}const ce=oe+J>>1,xe=M[2*ce],ve=M[2*ce+1];Ga(xe,ve,a,f)<=q&&B.push(w[ce]),(Z===0?a-m<=xe:f-m<=ve)&&(I.push(oe),I.push(ce-1),I.push(1-Z)),(Z===0?a+m>=xe:f+m>=ve)&&(I.push(ce+1),I.push(J),I.push(1-Z))}return B}}function Rs(c,a,f,m,w,M){if(w-m<=f)return;const z=m+w>>1;xf(c,a,z,m,w,M),Rs(c,a,f,m,z-1,1-M),Rs(c,a,f,z+1,w,1-M)}function xf(c,a,f,m,w,M){for(;w>m;){if(w-m>600){const q=w-m+1,Z=f-m+1,J=Math.log(q),oe=.5*Math.exp(2*J/3),ce=.5*Math.sqrt(J*oe*(q-oe)/q)*(Z-q/2<0?-1:1);xf(c,a,f,Math.max(m,Math.floor(f-Z*oe/q+ce)),Math.min(w,Math.floor(f+(q-Z)*oe/q+ce)),M)}const z=a[2*f+M];let I=m,B=w;for(wd(c,a,m,f),a[2*w+M]>z&&wd(c,a,m,w);I<B;){for(wd(c,a,I,B),I++,B--;a[2*I+M]<z;)I++;for(;a[2*B+M]>z;)B--}a[2*m+M]===z?wd(c,a,m,B):(B++,wd(c,a,B,w)),B<=f&&(m=B+1),f<=B&&(w=B-1)}}function wd(c,a,f,m){ya(c,f,m),ya(a,2*f,2*m),ya(a,2*f+1,2*m+1)}function ya(c,a,f){const m=c[a];c[a]=c[f],c[f]=m}function Ga(c,a,f,m){const w=c-f,M=a-m;return w*w+M*M}var Vg;h.bg=void 0,(Vg=h.bg||(h.bg={})).create="create",Vg.load="load",Vg.fullLoad="fullLoad";let Cp=null,_f=[];const Oi=1e3/60,Tp="loadTime",Do="fullLoadTime",Y0={mark(c){performance.mark(c)},frame(c){const a=c;Cp!=null&&_f.push(a-Cp),Cp=a},clearMetrics(){Cp=null,_f=[],performance.clearMeasures(Tp),performance.clearMeasures(Do);for(const c in h.bg)performance.clearMarks(h.bg[c])},getPerformanceMetrics(){performance.measure(Tp,h.bg.create,h.bg.load),performance.measure(Do,h.bg.create,h.bg.fullLoad);const c=performance.getEntriesByName(Tp)[0].duration,a=performance.getEntriesByName(Do)[0].duration,f=_f.length,m=1/(_f.reduce(((M,z)=>M+z),0)/f/1e3),w=_f.filter((M=>M>Oi)).reduce(((M,z)=>M+(z-Oi)/Oi),0);return{loadTime:c,fullLoadTime:a,fps:m,percentDroppedFrames:w/(f+w)*100,totalFrames:f}}};h.$=class extends te{},h.A=Mc,h.B=Gh,h.C=function(c){if(pe==null){const a=c.navigator?c.navigator.userAgent:null;pe=!!c.safari||!(!a||!(/\b(iPad|iPhone|iPod)\b/.test(a)||a.match("Safari")&&!a.match("Chrome")))}return pe},h.D=Ar,h.E=Wt,h.F=class{constructor(c,a){this.target=c,this.mapId=a,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new K0((()=>this.process())),this.subscription=(function(f,m,w,M){return f.addEventListener(m,w,!1),{unsubscribe:()=>{f.removeEventListener(m,w,!1)}}})(this.target,"message",(f=>this.receive(f))),this.globalScope=Re(self)?c:window}registerMessageHandler(c,a){this.messageHandlers[c]=a}sendAsync(c,a){return new Promise(((f,m)=>{const w=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[w]={resolve:f,reject:m},a&&a.signal.addEventListener("abort",(()=>{delete this.resolveRejects[w];const I={id:w,type:"<cancel>",origin:location.origin,targetMapId:c.targetMapId,sourceMapId:this.mapId};this.target.postMessage(I)}),{once:!0});const M=[],z=Object.assign(Object.assign({},c),{id:w,sourceMapId:this.mapId,origin:location.origin,data:Ms(c.data,M)});this.target.postMessage(z,{transfer:M})}))}receive(c){const a=c.data,f=a.id;if(!(a.origin!=="file://"&&location.origin!=="file://"&&a.origin!=="resource://android"&&location.origin!=="resource://android"&&a.origin!==location.origin||a.targetMapId&&this.mapId!==a.targetMapId)){if(a.type==="<cancel>"){delete this.tasks[f];const m=this.abortControllers[f];return delete this.abortControllers[f],void(m&&m.abort())}if(Re(self)||a.mustQueue)return this.tasks[f]=a,this.taskQueue.push(f),void this.invoker.trigger();this.processTask(f,a)}}process(){if(this.taskQueue.length===0)return;const c=this.taskQueue.shift(),a=this.tasks[c];delete this.tasks[c],this.taskQueue.length>0&&this.invoker.trigger(),a&&this.processTask(c,a)}processTask(c,a){return u(this,void 0,void 0,(function*(){if(a.type==="<response>"){const w=this.resolveRejects[c];return delete this.resolveRejects[c],w?void(a.error?w.reject(Zl(a.error)):w.resolve(Zl(a.data))):void 0}if(!this.messageHandlers[a.type])return void this.completeTask(c,new Error(`Could not find a registered handler for ${a.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const f=Zl(a.data),m=new AbortController;this.abortControllers[c]=m;try{const w=yield this.messageHandlers[a.type](a.sourceMapId,f,m);this.completeTask(c,null,w)}catch(w){this.completeTask(c,w)}}))}completeTask(c,a,f){const m=[];delete this.abortControllers[c];const w={id:c,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:a?Ms(a):null,data:Ms(f,m)};this.target.postMessage(w,{transfer:m})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},h.G=rr,h.H=function(){var c=new Mc(16);return Mc!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},h.I=ei,h.J=function(c,a,f){var m,w,M,z,I,B,q,Z,J,oe,ce,xe,ve=f[0],Oe=f[1],Be=f[2];return a===c?(c[12]=a[0]*ve+a[4]*Oe+a[8]*Be+a[12],c[13]=a[1]*ve+a[5]*Oe+a[9]*Be+a[13],c[14]=a[2]*ve+a[6]*Oe+a[10]*Be+a[14],c[15]=a[3]*ve+a[7]*Oe+a[11]*Be+a[15]):(w=a[1],M=a[2],z=a[3],I=a[4],B=a[5],q=a[6],Z=a[7],J=a[8],oe=a[9],ce=a[10],xe=a[11],c[0]=m=a[0],c[1]=w,c[2]=M,c[3]=z,c[4]=I,c[5]=B,c[6]=q,c[7]=Z,c[8]=J,c[9]=oe,c[10]=ce,c[11]=xe,c[12]=m*ve+I*Oe+J*Be+a[12],c[13]=w*ve+B*Oe+oe*Be+a[13],c[14]=M*ve+q*Oe+ce*Be+a[14],c[15]=z*ve+Z*Oe+xe*Be+a[15]),c},h.K=function(c,a,f){var m=f[0],w=f[1],M=f[2];return c[0]=a[0]*m,c[1]=a[1]*m,c[2]=a[2]*m,c[3]=a[3]*m,c[4]=a[4]*w,c[5]=a[5]*w,c[6]=a[6]*w,c[7]=a[7]*w,c[8]=a[8]*M,c[9]=a[9]*M,c[10]=a[10]*M,c[11]=a[11]*M,c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c},h.L=gs,h.M=function(c,a){const f={};for(let m=0;m<a.length;m++){const w=a[m];w in c&&(f[w]=c[w])}return f},h.N=xd,h.O=hh,h.P=C,h.Q=xp,h.R=Is,h.S=rs,h.T=qh,h.U=X,h.V=ae,h.W=Pe,h.X=Aa,h.Y=j,h.Z=fh,h._=u,h.a=zt,h.a$=function(c,a){var f=c[0],m=c[1],w=c[2],M=c[3],z=c[4],I=c[5],B=c[6],q=c[7],Z=c[8],J=c[9],oe=c[10],ce=c[11],xe=c[12],ve=c[13],Oe=c[14],Be=c[15],dt=a[0],Je=a[1],Qe=a[2],Dt=a[3],Jt=a[4],yr=a[5],Zr=a[6],dr=a[7],pr=a[8],zr=a[9],Er=a[10],br=a[11],Ot=a[12],wr=a[13],Dr=a[14],Qr=a[15];return Math.abs(f-dt)<=es*Math.max(1,Math.abs(f),Math.abs(dt))&&Math.abs(m-Je)<=es*Math.max(1,Math.abs(m),Math.abs(Je))&&Math.abs(w-Qe)<=es*Math.max(1,Math.abs(w),Math.abs(Qe))&&Math.abs(M-Dt)<=es*Math.max(1,Math.abs(M),Math.abs(Dt))&&Math.abs(z-Jt)<=es*Math.max(1,Math.abs(z),Math.abs(Jt))&&Math.abs(I-yr)<=es*Math.max(1,Math.abs(I),Math.abs(yr))&&Math.abs(B-Zr)<=es*Math.max(1,Math.abs(B),Math.abs(Zr))&&Math.abs(q-dr)<=es*Math.max(1,Math.abs(q),Math.abs(dr))&&Math.abs(Z-pr)<=es*Math.max(1,Math.abs(Z),Math.abs(pr))&&Math.abs(J-zr)<=es*Math.max(1,Math.abs(J),Math.abs(zr))&&Math.abs(oe-Er)<=es*Math.max(1,Math.abs(oe),Math.abs(Er))&&Math.abs(ce-br)<=es*Math.max(1,Math.abs(ce),Math.abs(br))&&Math.abs(xe-Ot)<=es*Math.max(1,Math.abs(xe),Math.abs(Ot))&&Math.abs(ve-wr)<=es*Math.max(1,Math.abs(ve),Math.abs(wr))&&Math.abs(Oe-Dr)<=es*Math.max(1,Math.abs(Oe),Math.abs(Dr))&&Math.abs(Be-Qr)<=es*Math.max(1,Math.abs(Be),Math.abs(Qr))},h.a0=Cn,h.a1=pf,h.a2=Rt,h.a3=c=>{const a=window.document.createElement("video");return a.muted=!0,new Promise((f=>{a.onloadstart=()=>{f(a)};for(const m of c){const w=window.document.createElement("source");Ht(m)||(a.crossOrigin="Anonymous"),w.src=m,a.appendChild(w)}}))},h.a4=function(){return Y++},h.a5=ar,h.a6=ch,h.a7=Nh,h.a8=Ps,h.a9=Ng,h.aA=function(c){if(c.type==="custom")return new Fm(c);switch(c.type){case"background":return new vp(c);case"circle":return new wg(c);case"fill":return new Sy(c);case"fill-extrusion":return new rf(c);case"heatmap":return new Jf(c);case"hillshade":return new cd(c);case"line":return new Dy(c);case"raster":return new Lg(c);case"symbol":return new hf(c)}},h.aB=_e,h.aC=function(c,a){if(!c)return[{command:"setStyle",args:[a]}];let f=[];try{if(!vr(c.version,a.version))return[{command:"setStyle",args:[a]}];vr(c.center,a.center)||f.push({command:"setCenter",args:[a.center]}),vr(c.zoom,a.zoom)||f.push({command:"setZoom",args:[a.zoom]}),vr(c.bearing,a.bearing)||f.push({command:"setBearing",args:[a.bearing]}),vr(c.pitch,a.pitch)||f.push({command:"setPitch",args:[a.pitch]}),vr(c.sprite,a.sprite)||f.push({command:"setSprite",args:[a.sprite]}),vr(c.glyphs,a.glyphs)||f.push({command:"setGlyphs",args:[a.glyphs]}),vr(c.transition,a.transition)||f.push({command:"setTransition",args:[a.transition]}),vr(c.light,a.light)||f.push({command:"setLight",args:[a.light]}),vr(c.terrain,a.terrain)||f.push({command:"setTerrain",args:[a.terrain]}),vr(c.sky,a.sky)||f.push({command:"setSky",args:[a.sky]}),vr(c.projection,a.projection)||f.push({command:"setProjection",args:[a.projection]});const m={},w=[];(function(z,I,B,q){let Z;for(Z in I=I||{},z=z||{})Object.prototype.hasOwnProperty.call(z,Z)&&(Object.prototype.hasOwnProperty.call(I,Z)||fi(Z,B,q));for(Z in I)Object.prototype.hasOwnProperty.call(I,Z)&&(Object.prototype.hasOwnProperty.call(z,Z)?vr(z[Z],I[Z])||(z[Z].type==="geojson"&&I[Z].type==="geojson"&&Rn(z,I,Z)?Wr(B,{command:"setGeoJSONSourceData",args:[Z,I[Z].data]}):ba(Z,I,B,q)):Hn(Z,I,B))})(c.sources,a.sources,w,m);const M=[];c.layers&&c.layers.forEach((z=>{"source"in z&&m[z.source]?f.push({command:"removeLayer",args:[z.id]}):M.push(z)})),f=f.concat(w),(function(z,I,B){I=I||[];const q=(z=z||[]).map(pi),Z=I.map(pi),J=z.reduce(oi,{}),oe=I.reduce(oi,{}),ce=q.slice(),xe=Object.create(null);let ve,Oe,Be,dt,Je;for(let Qe=0,Dt=0;Qe<q.length;Qe++)ve=q[Qe],Object.prototype.hasOwnProperty.call(oe,ve)?Dt++:(Wr(B,{command:"removeLayer",args:[ve]}),ce.splice(ce.indexOf(ve,Dt),1));for(let Qe=0,Dt=0;Qe<Z.length;Qe++)ve=Z[Z.length-1-Qe],ce[ce.length-1-Qe]!==ve&&(Object.prototype.hasOwnProperty.call(J,ve)?(Wr(B,{command:"removeLayer",args:[ve]}),ce.splice(ce.lastIndexOf(ve,ce.length-Dt),1)):Dt++,dt=ce[ce.length-Qe],Wr(B,{command:"addLayer",args:[oe[ve],dt]}),ce.splice(ce.length-Qe,0,ve),xe[ve]=!0);for(let Qe=0;Qe<Z.length;Qe++)if(ve=Z[Qe],Oe=J[ve],Be=oe[ve],!xe[ve]&&!vr(Oe,Be))if(vr(Oe.source,Be.source)&&vr(Oe["source-layer"],Be["source-layer"])&&vr(Oe.type,Be.type)){for(Je in ai(Oe.layout,Be.layout,B,ve,null,"setLayoutProperty"),ai(Oe.paint,Be.paint,B,ve,null,"setPaintProperty"),vr(Oe.filter,Be.filter)||Wr(B,{command:"setFilter",args:[ve,Be.filter]}),vr(Oe.minzoom,Be.minzoom)&&vr(Oe.maxzoom,Be.maxzoom)||Wr(B,{command:"setLayerZoomRange",args:[ve,Be.minzoom,Be.maxzoom]}),Oe)Object.prototype.hasOwnProperty.call(Oe,Je)&&Je!=="layout"&&Je!=="paint"&&Je!=="filter"&&Je!=="metadata"&&Je!=="minzoom"&&Je!=="maxzoom"&&(Je.indexOf("paint.")===0?ai(Oe[Je],Be[Je],B,ve,Je.slice(6),"setPaintProperty"):vr(Oe[Je],Be[Je])||Wr(B,{command:"setLayerProperty",args:[ve,Je,Be[Je]]}));for(Je in Be)Object.prototype.hasOwnProperty.call(Be,Je)&&!Object.prototype.hasOwnProperty.call(Oe,Je)&&Je!=="layout"&&Je!=="paint"&&Je!=="filter"&&Je!=="metadata"&&Je!=="minzoom"&&Je!=="maxzoom"&&(Je.indexOf("paint.")===0?ai(Oe[Je],Be[Je],B,ve,Je.slice(6),"setPaintProperty"):vr(Oe[Je],Be[Je])||Wr(B,{command:"setLayerProperty",args:[ve,Je,Be[Je]]}))}else Wr(B,{command:"removeLayer",args:[ve]}),dt=ce[ce.lastIndexOf(ve)+1],Wr(B,{command:"addLayer",args:[Be,dt]})})(M,a.layers,f)}catch(m){console.warn("Unable to compute style diff:",m),f=[{command:"setStyle",args:[a]}]}return f},h.aD=function(c){const a=[],f=c.id;return f===void 0&&a.push({message:`layers.${f}: missing required property "id"`}),c.render===void 0&&a.push({message:`layers.${f}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&a.push({message:`layers.${f}: property "renderingMode" must be either "2d" or "3d"`}),a},h.aE=function c(a,f){if(Array.isArray(a)){if(!Array.isArray(f)||a.length!==f.length)return!1;for(let m=0;m<a.length;m++)if(!c(a[m],f[m]))return!1;return!0}if(typeof a=="object"&&a!==null&&f!==null){if(typeof f!="object"||Object.keys(a).length!==Object.keys(f).length)return!1;for(const m in a)if(!c(a[m],f[m]))return!1;return!0}return a===f},h.aF=ie,h.aG=Ce,h.aH=class extends Ql{constructor(c,a){super(c,a),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},h.aI=Cc,h.aJ=class extends Ql{constructor(c,a){super(c,a),this.current=Au}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let a=1;a<16;a++)if(c[a]!==this.current[a]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},h.aK=Qd,h.aL=mg,h.aM=Nn,h.aN=class extends Ql{constructor(c,a){super(c,a),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},h.aO=class extends Ql{constructor(c,a){super(c,a),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},h.aP=function(c,a,f,m,w,M,z){var I=1/(a-f),B=1/(m-w),q=1/(M-z);return c[0]=-2*I,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*B,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*q,c[11]=0,c[12]=(a+f)*I,c[13]=(w+m)*B,c[14]=(z+M)*q,c[15]=1,c},h.aQ=xy,h.aR=class extends et{},h.aS=tl,h.aT=class extends gt{},h.aU=ud,h.aV=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},h.aW=nh,h.aX=qi,h.aY=Qo,h.aZ=class extends xr{},h.a_=function(c,a){return c[0]===a[0]&&c[1]===a[1]&&c[2]===a[2]&&c[3]===a[3]&&c[4]===a[4]&&c[5]===a[5]&&c[6]===a[6]&&c[7]===a[7]&&c[8]===a[8]&&c[9]===a[9]&&c[10]===a[10]&&c[11]===a[11]&&c[12]===a[12]&&c[13]===a[13]&&c[14]===a[14]&&c[15]===a[15]},h.aa=function(c){const a={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((f,m,w,M)=>{const z=w||M;return a[m]=!z||z.toLowerCase(),""})),a["max-age"]){const f=parseInt(a["max-age"],10);isNaN(f)?delete a["max-age"]:a["max-age"]=f}return a},h.ab=function(c,a){const f=[];for(const m in c)m in a||f.push(m);return f},h.ac=Q,h.ad=function(c,a,f){var m=Math.sin(f),w=Math.cos(f),M=a[0],z=a[1],I=a[2],B=a[3],q=a[4],Z=a[5],J=a[6],oe=a[7];return a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]),c[0]=M*w+q*m,c[1]=z*w+Z*m,c[2]=I*w+J*m,c[3]=B*w+oe*m,c[4]=q*w-M*m,c[5]=Z*w-z*m,c[6]=J*w-I*m,c[7]=oe*w-B*m,c},h.ae=function(c){var a=new Mc(16);return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15],a},h.af=Kf,h.ag=function(c,a){let f=0,m=0;if(c.kind==="constant")m=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:w,minZoom:M,maxZoom:z}=c,I=w?Q(Gt.interpolationFactor(w,a,M,z),0,1):0;c.kind==="camera"?m=Tr.number(c.minSize,c.maxSize,I):f=I}return{uSizeT:f,uSize:m}},h.ai=function(c,{uSize:a,uSizeT:f},{lowerSize:m,upperSize:w}){return c.kind==="source"?m/ts:c.kind==="composite"?Tr.number(m/ts,w/ts,f):a},h.aj=mp,h.ak=function(c,a,f,m){const w=a.y-c.y,M=a.x-c.x,z=m.y-f.y,I=m.x-f.x,B=z*M-I*w;if(B===0)return null;const q=(I*(c.y-f.y)-z*(c.x-f.x))/B;return new C(c.x+q*M,c.y+q*w)},h.al=Ny,h.am=Zh,h.an=Zf,h.ao=function(c){let a=1/0,f=1/0,m=-1/0,w=-1/0;for(const M of c)a=Math.min(a,M.x),f=Math.min(f,M.y),m=Math.max(m,M.x),w=Math.max(w,M.y);return[a,f,m,w]},h.ap=Ba,h.ar=gp,h.as=function(c,a){var f=a[0],m=a[1],w=a[2],M=a[3],z=a[4],I=a[5],B=a[6],q=a[7],Z=a[8],J=a[9],oe=a[10],ce=a[11],xe=a[12],ve=a[13],Oe=a[14],Be=a[15],dt=f*I-m*z,Je=f*B-w*z,Qe=f*q-M*z,Dt=m*B-w*I,Jt=m*q-M*I,yr=w*q-M*B,Zr=Z*ve-J*xe,dr=Z*Oe-oe*xe,pr=Z*Be-ce*xe,zr=J*Oe-oe*ve,Er=J*Be-ce*ve,br=oe*Be-ce*Oe,Ot=dt*br-Je*Er+Qe*zr+Dt*pr-Jt*dr+yr*Zr;return Ot?(c[0]=(I*br-B*Er+q*zr)*(Ot=1/Ot),c[1]=(w*Er-m*br-M*zr)*Ot,c[2]=(ve*yr-Oe*Jt+Be*Dt)*Ot,c[3]=(oe*Jt-J*yr-ce*Dt)*Ot,c[4]=(B*pr-z*br-q*dr)*Ot,c[5]=(f*br-w*pr+M*dr)*Ot,c[6]=(Oe*Qe-xe*yr-Be*Je)*Ot,c[7]=(Z*yr-oe*Qe+ce*Je)*Ot,c[8]=(z*Er-I*pr+q*Zr)*Ot,c[9]=(m*pr-f*Er-M*Zr)*Ot,c[10]=(xe*Jt-ve*Qe+Be*dt)*Ot,c[11]=(J*Qe-Z*Jt-ce*dt)*Ot,c[12]=(I*dr-z*zr-B*Zr)*Ot,c[13]=(f*zr-m*dr+w*Zr)*Ot,c[14]=(ve*Je-xe*Dt-Oe*dt)*Ot,c[15]=(Z*Dt-J*Je+oe*dt)*Ot,c):null},h.at=Gg,h.au=lh,h.av=kp,h.aw=function(){const c={},a=ke.$version;for(const f in ke.$root){const m=ke.$root[f];if(m.required){let w=null;w=f==="version"?a:m.type==="array"?[]:{},w!=null&&(c[f]=w)}}return c},h.ax=Ku,h.ay=tr,h.az=function(c){c=c.slice();const a=Object.create(null);for(let f=0;f<c.length;f++)a[c[f].id]=c[f];for(let f=0;f<c.length;f++)"ref"in c[f]&&(c[f]=rn(c[f],a[c[f].ref]));return c},h.b=ge,h.b0=function(c,a){return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c},h.b1=function(c,a,f){return c[0]=a[0]*f[0],c[1]=a[1]*f[1],c[2]=a[2]*f[2],c[3]=a[3]*f[3],c},h.b2=function(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]+c[3]*a[3]},h.b3=de,h.b4=jg,h.b5=ff,h.b6=function(c,a,f,m,w){var M,z=1/Math.tan(a/2);return c[0]=z/f,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=z,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,w!=null&&w!==1/0?(c[10]=(w+m)*(M=1/(m-w)),c[14]=2*w*m*M):(c[10]=-1,c[14]=-2*m),c},h.b7=function(c,a,f){var m=Math.sin(f),w=Math.cos(f),M=a[4],z=a[5],I=a[6],B=a[7],q=a[8],Z=a[9],J=a[10],oe=a[11];return a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]),c[4]=M*w+q*m,c[5]=z*w+Z*m,c[6]=I*w+J*m,c[7]=B*w+oe*m,c[8]=q*w-M*m,c[9]=Z*w-z*m,c[10]=J*w-I*m,c[11]=oe*w-B*m,c},h.b8=ne,h.b9=ue,h.bA=Pm,h.bB=function(c){return c.message===qe},h.bC=hn,h.bD=Qa,h.ba=function(c){return c*Math.PI/180},h.bb=function(c,a){const{x:f,y:m}=fh.fromLngLat(a);return!(c<0||c>25||m<0||m>=1||f<0||f>=1)},h.bc=function(c,a){return c[0]=a[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=a[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=a[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},h.bd=class extends K{},h.be=$m,h.bf=Y0,h.bh=Xt,h.bi=function(c,a){zt.REGISTERED_PROTOCOLS[c]=a},h.bj=function(c){delete zt.REGISTERED_PROTOCOLS[c]},h.bk=function(c,a){const f={};for(let w=0;w<c.length;w++){const M=a&&a[c[w].id]||Cs(c[w]);a&&(a[c[w].id]=M);let z=f[M];z||(z=f[M]=[]),z.push(c[w])}const m=[];for(const w in f)m.push(f[w]);return m},h.bl=Yt,h.bm=Ii,h.bn=Ry,h.bo=Li,h.bp=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=Aa/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const a=c.bucket.layers[0],f=a.layout,m=a._unevaluatedLayout._values,w={layoutIconSize:m["icon-size"].possiblyEvaluate(new Pn(c.bucket.zoom+1),c.canonical),layoutTextSize:m["text-size"].possiblyEvaluate(new Pn(c.bucket.zoom+1),c.canonical),textMaxSize:m["text-size"].possiblyEvaluate(new Pn(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:q,maxZoom:Z}=c.bucket.textSizeData;w.compositeTextSizes=[m["text-size"].possiblyEvaluate(new Pn(q),c.canonical),m["text-size"].possiblyEvaluate(new Pn(Z),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:q,maxZoom:Z}=c.bucket.iconSizeData;w.compositeIconSizes=[m["icon-size"].possiblyEvaluate(new Pn(q),c.canonical),m["icon-size"].possiblyEvaluate(new Pn(Z),c.canonical)]}const M=f.get("text-line-height")*Ba,z=f.get("text-rotation-alignment")!=="viewport"&&f.get("symbol-placement")!=="point",I=f.get("text-keep-upright"),B=f.get("text-size");for(const q of c.bucket.features){const Z=f.get("text-font").evaluate(q,{},c.canonical).join(","),J=B.evaluate(q,{},c.canonical),oe=w.layoutTextSize.evaluate(q,{},c.canonical),ce=w.layoutIconSize.evaluate(q,{},c.canonical),xe={horizontal:{},vertical:void 0},ve=q.text;let Oe,Be=[0,0];if(ve){const Qe=ve.toString(),Dt=f.get("text-letter-spacing").evaluate(q,{},c.canonical)*Ba,Jt=Xu(Qe)?Dt:0,yr=f.get("text-anchor").evaluate(q,{},c.canonical),Zr=Nc(a,q,c.canonical);if(!Zr){const Er=f.get("text-radial-offset").evaluate(q,{},c.canonical);Be=Er?vf(yr,[Er*Ba,$a]):f.get("text-offset").evaluate(q,{},c.canonical).map((br=>br*Ba))}let dr=z?"center":f.get("text-justify").evaluate(q,{},c.canonical);const pr=f.get("symbol-placement")==="point"?f.get("text-max-width").evaluate(q,{},c.canonical)*Ba:1/0,zr=()=>{c.bucket.allowVerticalPlacement&&be(Qe)&&(xe.vertical=nl(ve,c.glyphMap,c.glyphPositions,c.imagePositions,Z,pr,M,yr,"left",Jt,Be,h.ah.vertical,!0,oe,J))};if(!z&&Zr){const Er=new Set;if(dr==="auto")for(let Ot=0;Ot<Zr.values.length;Ot+=2)Er.add(Gg(Zr.values[Ot]));else Er.add(dr);let br=!1;for(const Ot of Er)if(!xe.horizontal[Ot])if(br)xe.horizontal[Ot]=xe.horizontal[0];else{const wr=nl(ve,c.glyphMap,c.glyphPositions,c.imagePositions,Z,pr,M,"center",Ot,Jt,Be,h.ah.horizontal,!1,oe,J);wr&&(xe.horizontal[Ot]=wr,br=wr.positionedLines.length===1)}zr()}else{dr==="auto"&&(dr=Gg(yr));const Er=nl(ve,c.glyphMap,c.glyphPositions,c.imagePositions,Z,pr,M,yr,dr,Jt,Be,h.ah.horizontal,!1,oe,J);Er&&(xe.horizontal[dr]=Er),zr(),be(Qe)&&z&&I&&(xe.vertical=nl(ve,c.glyphMap,c.glyphPositions,c.imagePositions,Z,pr,M,yr,dr,Jt,Be,h.ah.vertical,!1,oe,J))}}let dt=!1;if(q.icon&&q.icon.name){const Qe=c.imageMap[q.icon.name];Qe&&(Oe=uh(c.imagePositions[q.icon.name],f.get("icon-offset").evaluate(q,{},c.canonical),f.get("icon-anchor").evaluate(q,{},c.canonical)),dt=!!Qe.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=dt:c.bucket.sdfIcons!==dt&&me("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Qe.pixelRatio!==c.bucket.pixelRatio||f.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const Je=Ep(xe.horizontal)||xe.vertical;c.bucket.iconsInText=!!Je&&Je.iconsInText,(Je||Oe)&&ri(c.bucket,q,xe,Oe,c.imageMap,w,oe,ce,Be,dt,c.canonical)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},h.bq=sp,h.br=Qh,h.bs=ah,h.bt=Na,h.bu=Mg,h.bv=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},h.bw=function(c,a,f,m,w){return u(this,void 0,void 0,(function*(){if(ae())try{return yield Pe(c,a,f,m,w)}catch{}return(function(M,z,I,B,q){const Z=M.width,J=M.height;st&&Ae||(st=new OffscreenCanvas(Z,J),Ae=st.getContext("2d",{willReadFrequently:!0})),st.width=Z,st.height=J,Ae.drawImage(M,0,0,Z,J);const oe=Ae.getImageData(z,I,B,q);return Ae.clearRect(0,0,Z,J),oe.data})(c,a,f,m,w)}))},h.bx=Rg,h.by=v,h.bz=x,h.c=Ze,h.d=c=>u(void 0,void 0,void 0,(function*(){if(c.byteLength===0)return createImageBitmap(new ImageData(1,1));const a=new Blob([new Uint8Array(c)],{type:"image/png"});try{return createImageBitmap(a)}catch(f){throw new Error(`Could not load image because of ${f.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),h.e=he,h.f=c=>new Promise(((a,f)=>{const m=new Image;m.onload=()=>{a(m),URL.revokeObjectURL(m.src),m.onload=null,window.requestAnimationFrame((()=>{m.src=ze}))},m.onerror=()=>f(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const w=new Blob([new Uint8Array(c)],{type:"image/png"});m.src=c.byteLength?URL.createObjectURL(w):ze})),h.g=Tt,h.h=(c,a)=>at(he(c,{type:"json"}),a),h.i=Re,h.j=Lt,h.k=Pr,h.l=(c,a)=>at(he(c,{type:"arrayBuffer"}),a),h.m=at,h.n=function(c){return new Mg(c).readFields(Py,[])},h.o=Yf,h.p=Ji,h.q=D,h.r=Ds,h.s=Ht,h.t=Zu,h.u=co,h.v=ke,h.w=me,h.x=function([c,a,f]){return a+=90,a*=Math.PI/180,f*=Math.PI/180,{x:c*Math.cos(a)*Math.sin(f),y:c*Math.sin(a)*Math.sin(f),z:c*Math.cos(f)}},h.y=Tr,h.z=Pn})),o("worker",["./shared"],(function(h){class u{constructor(se){this.keyCache={},se&&this.replace(se)}replace(se){this._layerConfigs={},this._layers={},this.update(se,[])}update(se,le){for(const Ie of se){this._layerConfigs[Ie.id]=Ie;const Ye=this._layers[Ie.id]=h.aA(Ie);Ye._featureFilter=h.a7(Ye.filter),this.keyCache[Ie.id]&&delete this.keyCache[Ie.id]}for(const Ie of le)delete this.keyCache[Ie],delete this._layerConfigs[Ie],delete this._layers[Ie];this.familiesBySource={};const Ee=h.bk(Object.values(this._layerConfigs),this.keyCache);for(const Ie of Ee){const Ye=Ie.map((_t=>this._layers[_t.id])),tt=Ye[0];if(tt.visibility==="none")continue;const ut=tt.source||"";let Ue=this.familiesBySource[ut];Ue||(Ue=this.familiesBySource[ut]={});const At=tt.sourceLayer||"_geojsonTileLayer";let Vt=Ue[At];Vt||(Vt=Ue[At]=[]),Vt.push(Ye)}}}class v{constructor(se){const le={},Ee=[];for(const ut in se){const Ue=se[ut],At=le[ut]={};for(const Vt in Ue){const _t=Ue[+Vt];if(!_t||_t.bitmap.width===0||_t.bitmap.height===0)continue;const lr={x:0,y:0,w:_t.bitmap.width+2,h:_t.bitmap.height+2};Ee.push(lr),At[Vt]={rect:lr,metrics:_t.metrics}}}const{w:Ie,h:Ye}=h.p(Ee),tt=new h.o({width:Ie||1,height:Ye||1});for(const ut in se){const Ue=se[ut];for(const At in Ue){const Vt=Ue[+At];if(!Vt||Vt.bitmap.width===0||Vt.bitmap.height===0)continue;const _t=le[ut][At].rect;h.o.copy(Vt.bitmap,tt,{x:0,y:0},{x:_t.x+1,y:_t.y+1},Vt.bitmap)}}this.image=tt,this.positions=le}}h.bl("GlyphAtlas",v);class x{constructor(se){this.tileID=new h.S(se.tileID.overscaledZ,se.tileID.wrap,se.tileID.canonical.z,se.tileID.canonical.x,se.tileID.canonical.y),this.uid=se.uid,this.zoom=se.zoom,this.pixelRatio=se.pixelRatio,this.tileSize=se.tileSize,this.source=se.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=se.showCollisionBoxes,this.collectResourceTiming=!!se.collectResourceTiming,this.returnDependencies=!!se.returnDependencies,this.promoteId=se.promoteId,this.inFlightDependencies=[]}parse(se,le,Ee,Ie){return h._(this,void 0,void 0,(function*(){this.status="parsing",this.data=se,this.collisionBoxArray=new h.a5;const Ye=new h.bm(Object.keys(se.layers).sort()),tt=new h.bn(this.tileID,this.promoteId);tt.bucketLayerIDs=[];const ut={},Ue={featureIndex:tt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ee},At=le.familiesBySource[this.source];for(const Sn in At){const si=se.layers[Sn];if(!si)continue;si.version===1&&h.w(`Vector tile source "${this.source}" layer "${Sn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const li=Ye.encode(Sn),Ca=[];for(let Hi=0;Hi<si.length;Hi++){const $i=si.feature(Hi),Hs=tt.getId($i,Sn);Ca.push({feature:$i,id:Hs,index:Hi,sourceLayerIndex:li})}for(const Hi of At[Sn]){const $i=Hi[0];$i.source!==this.source&&h.w(`layer.source = ${$i.source} does not equal this.source = ${this.source}`),$i.minzoom&&this.zoom<Math.floor($i.minzoom)||$i.maxzoom&&this.zoom>=$i.maxzoom||$i.visibility!=="none"&&(A(Hi,this.zoom,Ee),(ut[$i.id]=$i.createBucket({index:tt.bucketLayerIDs.length,layers:Hi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:li,sourceID:this.source})).populate(Ca,Ue,this.tileID.canonical),tt.bucketLayerIDs.push(Hi.map((Hs=>Hs.id))))}}const Vt=h.aF(Ue.glyphDependencies,(Sn=>Object.keys(Sn).map(Number)));this.inFlightDependencies.forEach((Sn=>Sn==null?void 0:Sn.abort())),this.inFlightDependencies=[];let _t=Promise.resolve({});if(Object.keys(Vt).length){const Sn=new AbortController;this.inFlightDependencies.push(Sn),_t=Ie.sendAsync({type:"GG",data:{stacks:Vt,source:this.source,tileID:this.tileID,type:"glyphs"}},Sn)}const lr=Object.keys(Ue.iconDependencies);let Lr=Promise.resolve({});if(lr.length){const Sn=new AbortController;this.inFlightDependencies.push(Sn),Lr=Ie.sendAsync({type:"GI",data:{icons:lr,source:this.source,tileID:this.tileID,type:"icons"}},Sn)}const $r=Object.keys(Ue.patternDependencies);let wn=Promise.resolve({});if($r.length){const Sn=new AbortController;this.inFlightDependencies.push(Sn),wn=Ie.sendAsync({type:"GI",data:{icons:$r,source:this.source,tileID:this.tileID,type:"patterns"}},Sn)}const[Ir,cn,_n]=yield Promise.all([_t,Lr,wn]),ea=new v(Ir),gi=new h.bo(cn,_n);for(const Sn in ut){const si=ut[Sn];si instanceof h.a6?(A(si.layers,this.zoom,Ee),h.bp({bucket:si,glyphMap:Ir,glyphPositions:ea.positions,imageMap:cn,imagePositions:gi.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):si.hasPattern&&(si instanceof h.bq||si instanceof h.br||si instanceof h.bs)&&(A(si.layers,this.zoom,Ee),si.addFeatures(Ue,this.tileID.canonical,gi.patternPositions))}return this.status="done",{buckets:Object.values(ut).filter((Sn=>!Sn.isEmpty())),featureIndex:tt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ea.image,imageAtlas:gi,glyphMap:this.returnDependencies?Ir:null,iconMap:this.returnDependencies?cn:null,glyphPositions:this.returnDependencies?ea.positions:null}}))}}function A(Ne,se,le){const Ee=new h.z(se);for(const Ie of Ne)Ie.recalculate(Ee,le)}class C{constructor(se,le,Ee){this.actor=se,this.layerIndex=le,this.availableImages=Ee,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(se,le){return h._(this,void 0,void 0,(function*(){const Ee=yield h.l(se.request,le);try{return{vectorTile:new h.bt.VectorTile(new h.bu(Ee.data)),rawData:Ee.data,cacheControl:Ee.cacheControl,expires:Ee.expires}}catch(Ie){const Ye=new Uint8Array(Ee.data);let tt=`Unable to parse the tile at ${se.request.url}, `;throw tt+=Ye[0]===31&&Ye[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ie.message}`,new Error(tt)}}))}loadTile(se){return h._(this,void 0,void 0,(function*(){const le=se.uid,Ee=!!(se&&se.request&&se.request.collectResourceTiming)&&new h.bv(se.request),Ie=new x(se);this.loading[le]=Ie;const Ye=new AbortController;Ie.abort=Ye;try{const tt=yield this.loadVectorTile(se,Ye);if(delete this.loading[le],!tt)return null;const ut=tt.rawData,Ue={};tt.expires&&(Ue.expires=tt.expires),tt.cacheControl&&(Ue.cacheControl=tt.cacheControl);const At={};if(Ee){const _t=Ee.finish();_t&&(At.resourceTiming=JSON.parse(JSON.stringify(_t)))}Ie.vectorTile=tt.vectorTile;const Vt=Ie.parse(tt.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[le]=Ie,this.fetching[le]={rawTileData:ut,cacheControl:Ue,resourceTiming:At};try{const _t=yield Vt;return h.e({rawTileData:ut.slice(0)},_t,Ue,At)}finally{delete this.fetching[le]}}catch(tt){throw delete this.loading[le],Ie.status="done",this.loaded[le]=Ie,tt}}))}reloadTile(se){return h._(this,void 0,void 0,(function*(){const le=se.uid;if(!this.loaded||!this.loaded[le])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Ee=this.loaded[le];if(Ee.showCollisionBoxes=se.showCollisionBoxes,Ee.status==="parsing"){const Ie=yield Ee.parse(Ee.vectorTile,this.layerIndex,this.availableImages,this.actor);let Ye;if(this.fetching[le]){const{rawTileData:tt,cacheControl:ut,resourceTiming:Ue}=this.fetching[le];delete this.fetching[le],Ye=h.e({rawTileData:tt.slice(0)},Ie,ut,Ue)}else Ye=Ie;return Ye}if(Ee.status==="done"&&Ee.vectorTile)return Ee.parse(Ee.vectorTile,this.layerIndex,this.availableImages,this.actor)}))}abortTile(se){return h._(this,void 0,void 0,(function*(){const le=this.loading,Ee=se.uid;le&&le[Ee]&&le[Ee].abort&&(le[Ee].abort.abort(),delete le[Ee])}))}removeTile(se){return h._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[se.uid]&&delete this.loaded[se.uid]}))}}class P{constructor(){this.loaded={}}loadTile(se){return h._(this,void 0,void 0,(function*(){const{uid:le,encoding:Ee,rawImageData:Ie,redFactor:Ye,greenFactor:tt,blueFactor:ut,baseShift:Ue}=se,At=Ie.width+2,Vt=Ie.height+2,_t=h.b(Ie)?new h.R({width:At,height:Vt},yield h.bw(Ie,-1,-1,At,Vt)):Ie,lr=new h.bx(le,_t,Ee,Ye,tt,ut,Ue);return this.loaded=this.loaded||{},this.loaded[le]=lr,lr}))}removeTile(se){const le=this.loaded,Ee=se.uid;le&&le[Ee]&&delete le[Ee]}}function O(Ne,se){if(Ne.length!==0){U(Ne[0],se);for(var le=1;le<Ne.length;le++)U(Ne[le],!se)}}function U(Ne,se){for(var le=0,Ee=0,Ie=0,Ye=Ne.length,tt=Ye-1;Ie<Ye;tt=Ie++){var ut=(Ne[Ie][0]-Ne[tt][0])*(Ne[tt][1]+Ne[Ie][1]),Ue=le+ut;Ee+=Math.abs(le)>=Math.abs(ut)?le-Ue+ut:ut-Ue+le,le=Ue}le+Ee>=0!=!!se&&Ne.reverse()}var W=h.by((function Ne(se,le){var Ee,Ie=se&&se.type;if(Ie==="FeatureCollection")for(Ee=0;Ee<se.features.length;Ee++)Ne(se.features[Ee],le);else if(Ie==="GeometryCollection")for(Ee=0;Ee<se.geometries.length;Ee++)Ne(se.geometries[Ee],le);else if(Ie==="Feature")Ne(se.geometry,le);else if(Ie==="Polygon")O(se.coordinates,le);else if(Ie==="MultiPolygon")for(Ee=0;Ee<se.coordinates.length;Ee++)O(se.coordinates[Ee],le);return se}));const G=h.bt.VectorTileFeature.prototype.toGeoJSON;var X={exports:{}},ae=h.bz,ne=h.bt.VectorTileFeature,ue=Q;function Q(Ne,se){this.options=se||{},this.features=Ne,this.length=Ne.length}function de(Ne,se){this.id=typeof Ne.id=="number"?Ne.id:void 0,this.type=Ne.type,this.rawGeometry=Ne.type===1?[Ne.geometry]:Ne.geometry,this.properties=Ne.tags,this.extent=se||4096}Q.prototype.feature=function(Ne){return new de(this.features[Ne],this.options.extent)},de.prototype.loadGeometry=function(){var Ne=this.rawGeometry;this.geometry=[];for(var se=0;se<Ne.length;se++){for(var le=Ne[se],Ee=[],Ie=0;Ie<le.length;Ie++)Ee.push(new ae(le[Ie][0],le[Ie][1]));this.geometry.push(Ee)}return this.geometry},de.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ne=this.geometry,se=1/0,le=-1/0,Ee=1/0,Ie=-1/0,Ye=0;Ye<Ne.length;Ye++)for(var tt=Ne[Ye],ut=0;ut<tt.length;ut++){var Ue=tt[ut];se=Math.min(se,Ue.x),le=Math.max(le,Ue.x),Ee=Math.min(Ee,Ue.y),Ie=Math.max(Ie,Ue.y)}return[se,Ee,le,Ie]},de.prototype.toGeoJSON=ne.prototype.toGeoJSON;var he=h.bA,Y=ue;function ie(Ne){var se=new he;return(function(le,Ee){for(var Ie in le.layers)Ee.writeMessage(3,Ce,le.layers[Ie])})(Ne,se),se.finish()}function Ce(Ne,se){var le;se.writeVarintField(15,Ne.version||1),se.writeStringField(1,Ne.name||""),se.writeVarintField(5,Ne.extent||4096);var Ee={keys:[],values:[],keycache:{},valuecache:{}};for(le=0;le<Ne.length;le++)Ee.feature=Ne.feature(le),se.writeMessage(2,_e,Ee);var Ie=Ee.keys;for(le=0;le<Ie.length;le++)se.writeStringField(3,Ie[le]);var Ye=Ee.values;for(le=0;le<Ye.length;le++)se.writeMessage(4,pe,Ye[le])}function _e(Ne,se){var le=Ne.feature;le.id!==void 0&&se.writeVarintField(1,le.id),se.writeMessage(2,Me,Ne),se.writeVarintField(3,le.type),se.writeMessage(4,Re,le)}function Me(Ne,se){var le=Ne.feature,Ee=Ne.keys,Ie=Ne.values,Ye=Ne.keycache,tt=Ne.valuecache;for(var ut in le.properties){var Ue=le.properties[ut],At=Ye[ut];if(Ue!==null){At===void 0&&(Ee.push(ut),Ye[ut]=At=Ee.length-1),se.writeVarint(At);var Vt=typeof Ue;Vt!=="string"&&Vt!=="boolean"&&Vt!=="number"&&(Ue=JSON.stringify(Ue));var _t=Vt+":"+Ue,lr=tt[_t];lr===void 0&&(Ie.push(Ue),tt[_t]=lr=Ie.length-1),se.writeVarint(lr)}}}function me(Ne,se){return(se<<3)+(7&Ne)}function Ke(Ne){return Ne<<1^Ne>>31}function Re(Ne,se){for(var le=Ne.loadGeometry(),Ee=Ne.type,Ie=0,Ye=0,tt=le.length,ut=0;ut<tt;ut++){var Ue=le[ut],At=1;Ee===1&&(At=Ue.length),se.writeVarint(me(1,At));for(var Vt=Ee===3?Ue.length-1:Ue.length,_t=0;_t<Vt;_t++){_t===1&&Ee!==1&&se.writeVarint(me(2,Vt-1));var lr=Ue[_t].x-Ie,Lr=Ue[_t].y-Ye;se.writeVarint(Ke(lr)),se.writeVarint(Ke(Lr)),Ie+=lr,Ye+=Lr}Ee===3&&se.writeVarint(me(7,1))}}function pe(Ne,se){var le=typeof Ne;le==="string"?se.writeStringField(1,Ne):le==="boolean"?se.writeBooleanField(7,Ne):le==="number"&&(Ne%1!=0?se.writeDoubleField(3,Ne):Ne<0?se.writeSVarintField(6,Ne):se.writeVarintField(5,Ne))}X.exports=ie,X.exports.fromVectorTileJs=ie,X.exports.fromGeojsonVt=function(Ne,se){se=se||{};var le={};for(var Ee in Ne)le[Ee]=new Y(Ne[Ee].features,se),le[Ee].name=Ee,le[Ee].version=se.version,le[Ee].extent=se.extent;return ie({layers:le})},X.exports.GeoJSONWrapper=Y;var ge=h.by(X.exports);const ze={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ne=>Ne},Pe=Math.fround||(st=new Float32Array(1),Ne=>(st[0]=+Ne,st[0]));var st;const Ae=3,qe=5,Ze=6;class zt{constructor(se){this.options=Object.assign(Object.create(ze),se),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(se){const{log:le,minZoom:Ee,maxZoom:Ie}=this.options;le&&console.time("total time");const Ye=`prepare ${se.length} points`;le&&console.time(Ye),this.points=se;const tt=[];for(let Ue=0;Ue<se.length;Ue++){const At=se[Ue];if(!At.geometry)continue;const[Vt,_t]=At.geometry.coordinates,lr=Pe(Xt(Vt)),Lr=Pe(tr(_t));tt.push(lr,Lr,1/0,Ue,-1,1),this.options.reduce&&tt.push(0)}let ut=this.trees[Ie+1]=this._createTree(tt);le&&console.timeEnd(Ye);for(let Ue=Ie;Ue>=Ee;Ue--){const At=+Date.now();ut=this.trees[Ue]=this._createTree(this._cluster(ut,Ue)),le&&console.log("z%d: %d clusters in %dms",Ue,ut.numItems,+Date.now()-At)}return le&&console.timeEnd("total time"),this}getClusters(se,le){let Ee=((se[0]+180)%360+360)%360-180;const Ie=Math.max(-90,Math.min(90,se[1]));let Ye=se[2]===180?180:((se[2]+180)%360+360)%360-180;const tt=Math.max(-90,Math.min(90,se[3]));if(se[2]-se[0]>=360)Ee=-180,Ye=180;else if(Ee>Ye){const _t=this.getClusters([Ee,Ie,180,tt],le),lr=this.getClusters([-180,Ie,Ye,tt],le);return _t.concat(lr)}const ut=this.trees[this._limitZoom(le)],Ue=ut.range(Xt(Ee),tr(tt),Xt(Ye),tr(Ie)),At=ut.data,Vt=[];for(const _t of Ue){const lr=this.stride*_t;Vt.push(At[lr+qe]>1?Tt(At,lr,this.clusterProps):this.points[At[lr+Ae]])}return Vt}getChildren(se){const le=this._getOriginId(se),Ee=this._getOriginZoom(se),Ie="No cluster with the specified id.",Ye=this.trees[Ee];if(!Ye)throw new Error(Ie);const tt=Ye.data;if(le*this.stride>=tt.length)throw new Error(Ie);const ut=this.options.radius/(this.options.extent*Math.pow(2,Ee-1)),Ue=Ye.within(tt[le*this.stride],tt[le*this.stride+1],ut),At=[];for(const Vt of Ue){const _t=Vt*this.stride;tt[_t+4]===se&&At.push(tt[_t+qe]>1?Tt(tt,_t,this.clusterProps):this.points[tt[_t+Ae]])}if(At.length===0)throw new Error(Ie);return At}getLeaves(se,le,Ee){const Ie=[];return this._appendLeaves(Ie,se,le=le||10,Ee=Ee||0,0),Ie}getTile(se,le,Ee){const Ie=this.trees[this._limitZoom(se)],Ye=Math.pow(2,se),{extent:tt,radius:ut}=this.options,Ue=ut/tt,At=(Ee-Ue)/Ye,Vt=(Ee+1+Ue)/Ye,_t={features:[]};return this._addTileFeatures(Ie.range((le-Ue)/Ye,At,(le+1+Ue)/Ye,Vt),Ie.data,le,Ee,Ye,_t),le===0&&this._addTileFeatures(Ie.range(1-Ue/Ye,At,1,Vt),Ie.data,Ye,Ee,Ye,_t),le===Ye-1&&this._addTileFeatures(Ie.range(0,At,Ue/Ye,Vt),Ie.data,-1,Ee,Ye,_t),_t.features.length?_t:null}getClusterExpansionZoom(se){let le=this._getOriginZoom(se)-1;for(;le<=this.options.maxZoom;){const Ee=this.getChildren(se);if(le++,Ee.length!==1)break;se=Ee[0].properties.cluster_id}return le}_appendLeaves(se,le,Ee,Ie,Ye){const tt=this.getChildren(le);for(const ut of tt){const Ue=ut.properties;if(Ue&&Ue.cluster?Ye+Ue.point_count<=Ie?Ye+=Ue.point_count:Ye=this._appendLeaves(se,Ue.cluster_id,Ee,Ie,Ye):Ye<Ie?Ye++:se.push(ut),se.length===Ee)break}return Ye}_createTree(se){const le=new h.av(se.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Ee=0;Ee<se.length;Ee+=this.stride)le.add(se[Ee],se[Ee+1]);return le.finish(),le.data=se,le}_addTileFeatures(se,le,Ee,Ie,Ye,tt){for(const ut of se){const Ue=ut*this.stride,At=le[Ue+qe]>1;let Vt,_t,lr;if(At)Vt=rr(le,Ue,this.clusterProps),_t=le[Ue],lr=le[Ue+1];else{const wn=this.points[le[Ue+Ae]];Vt=wn.properties;const[Ir,cn]=wn.geometry.coordinates;_t=Xt(Ir),lr=tr(cn)}const Lr={type:1,geometry:[[Math.round(this.options.extent*(_t*Ye-Ee)),Math.round(this.options.extent*(lr*Ye-Ie))]],tags:Vt};let $r;$r=At||this.options.generateId?le[Ue+Ae]:this.points[le[Ue+Ae]].id,$r!==void 0&&(Lr.id=$r),tt.features.push(Lr)}}_limitZoom(se){return Math.max(this.options.minZoom,Math.min(Math.floor(+se),this.options.maxZoom+1))}_cluster(se,le){const{radius:Ee,extent:Ie,reduce:Ye,minPoints:tt}=this.options,ut=Ee/(Ie*Math.pow(2,le)),Ue=se.data,At=[],Vt=this.stride;for(let _t=0;_t<Ue.length;_t+=Vt){if(Ue[_t+2]<=le)continue;Ue[_t+2]=le;const lr=Ue[_t],Lr=Ue[_t+1],$r=se.within(Ue[_t],Ue[_t+1],ut),wn=Ue[_t+qe];let Ir=wn;for(const cn of $r){const _n=cn*Vt;Ue[_n+2]>le&&(Ir+=Ue[_n+qe])}if(Ir>wn&&Ir>=tt){let cn,_n=lr*wn,ea=Lr*wn,gi=-1;const Sn=((_t/Vt|0)<<5)+(le+1)+this.points.length;for(const si of $r){const li=si*Vt;if(Ue[li+2]<=le)continue;Ue[li+2]=le;const Ca=Ue[li+qe];_n+=Ue[li]*Ca,ea+=Ue[li+1]*Ca,Ue[li+4]=Sn,Ye&&(cn||(cn=this._map(Ue,_t,!0),gi=this.clusterProps.length,this.clusterProps.push(cn)),Ye(cn,this._map(Ue,li)))}Ue[_t+4]=Sn,At.push(_n/Ir,ea/Ir,1/0,Sn,-1,Ir),Ye&&At.push(gi)}else{for(let cn=0;cn<Vt;cn++)At.push(Ue[_t+cn]);if(Ir>1)for(const cn of $r){const _n=cn*Vt;if(!(Ue[_n+2]<=le)){Ue[_n+2]=le;for(let ea=0;ea<Vt;ea++)At.push(Ue[_n+ea])}}}}return At}_getOriginId(se){return se-this.points.length>>5}_getOriginZoom(se){return(se-this.points.length)%32}_map(se,le,Ee){if(se[le+qe]>1){const tt=this.clusterProps[se[le+Ze]];return Ee?Object.assign({},tt):tt}const Ie=this.points[se[le+Ae]].properties,Ye=this.options.map(Ie);return Ee&&Ye===Ie?Object.assign({},Ye):Ye}}function Tt(Ne,se,le){return{type:"Feature",id:Ne[se+Ae],properties:rr(Ne,se,le),geometry:{type:"Point",coordinates:[(Ee=Ne[se],360*(Ee-.5)),at(Ne[se+1])]}};var Ee}function rr(Ne,se,le){const Ee=Ne[se+qe],Ie=Ee>=1e4?`${Math.round(Ee/1e3)}k`:Ee>=1e3?Math.round(Ee/100)/10+"k":Ee,Ye=Ne[se+Ze],tt=Ye===-1?{}:Object.assign({},le[Ye]);return Object.assign(tt,{cluster:!0,cluster_id:Ne[se+Ae],point_count:Ee,point_count_abbreviated:Ie})}function Xt(Ne){return Ne/360+.5}function tr(Ne){const se=Math.sin(Ne*Math.PI/180),le=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return le<0?0:le>1?1:le}function at(Ne){const se=(180-360*Ne)*Math.PI/180;return 360*Math.atan(Math.exp(se))/Math.PI-90}function Ht(Ne,se,le,Ee){let Ie=Ee;const Ye=se+(le-se>>1);let tt,ut=le-se;const Ue=Ne[se],At=Ne[se+1],Vt=Ne[le],_t=Ne[le+1];for(let lr=se+3;lr<le;lr+=3){const Lr=Mt(Ne[lr],Ne[lr+1],Ue,At,Vt,_t);if(Lr>Ie)tt=lr,Ie=Lr;else if(Lr===Ie){const $r=Math.abs(lr-Ye);$r<ut&&(tt=lr,ut=$r)}}Ie>Ee&&(tt-se>3&&Ht(Ne,se,tt,Ee),Ne[tt+2]=Ie,le-tt>3&&Ht(Ne,tt,le,Ee))}function Mt(Ne,se,le,Ee,Ie,Ye){let tt=Ie-le,ut=Ye-Ee;if(tt!==0||ut!==0){const Ue=((Ne-le)*tt+(se-Ee)*ut)/(tt*tt+ut*ut);Ue>1?(le=Ie,Ee=Ye):Ue>0&&(le+=tt*Ue,Ee+=ut*Ue)}return tt=Ne-le,ut=se-Ee,tt*tt+ut*ut}function pt(Ne,se,le,Ee){const Ie={id:Ne??null,type:se,geometry:le,tags:Ee,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(se==="Point"||se==="MultiPoint"||se==="LineString")Pr(Ie,le);else if(se==="Polygon")Pr(Ie,le[0]);else if(se==="MultiLineString")for(const Ye of le)Pr(Ie,Ye);else if(se==="MultiPolygon")for(const Ye of le)Pr(Ie,Ye[0]);return Ie}function Pr(Ne,se){for(let le=0;le<se.length;le+=3)Ne.minX=Math.min(Ne.minX,se[le]),Ne.minY=Math.min(Ne.minY,se[le+1]),Ne.maxX=Math.max(Ne.maxX,se[le]),Ne.maxY=Math.max(Ne.maxY,se[le+1])}function Lt(Ne,se,le,Ee){if(!se.geometry)return;const Ie=se.geometry.coordinates;if(Ie&&Ie.length===0)return;const Ye=se.geometry.type,tt=Math.pow(le.tolerance/((1<<le.maxZoom)*le.extent),2);let ut=[],Ue=se.id;if(le.promoteId?Ue=se.properties[le.promoteId]:le.generateId&&(Ue=Ee||0),Ye==="Point")Wt(Ie,ut);else if(Ye==="MultiPoint")for(const At of Ie)Wt(At,ut);else if(Ye==="LineString")ke(Ie,ut,tt,!1);else if(Ye==="MultiLineString"){if(le.lineMetrics){for(const At of Ie)ut=[],ke(At,ut,tt,!1),Ne.push(pt(Ue,"LineString",ut,se.properties));return}Xr(Ie,ut,tt,!1)}else if(Ye==="Polygon")Xr(Ie,ut,tt,!0);else{if(Ye!=="MultiPolygon"){if(Ye==="GeometryCollection"){for(const At of se.geometry.geometries)Lt(Ne,{id:Ue,geometry:At,properties:se.properties},le,Ee);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const At of Ie){const Vt=[];Xr(At,Vt,tt,!0),ut.push(Vt)}}Ne.push(pt(Ue,Ye,ut,se.properties))}function Wt(Ne,se){se.push(rn(Ne[0]),vr(Ne[1]),0)}function ke(Ne,se,le,Ee){let Ie,Ye,tt=0;for(let Ue=0;Ue<Ne.length;Ue++){const At=rn(Ne[Ue][0]),Vt=vr(Ne[Ue][1]);se.push(At,Vt,0),Ue>0&&(tt+=Ee?(Ie*Vt-At*Ye)/2:Math.sqrt(Math.pow(At-Ie,2)+Math.pow(Vt-Ye,2))),Ie=At,Ye=Vt}const ut=se.length-3;se[2]=1,Ht(se,0,ut,le),se[ut+2]=1,se.size=Math.abs(tt),se.start=0,se.end=se.size}function Xr(Ne,se,le,Ee){for(let Ie=0;Ie<Ne.length;Ie++){const Ye=[];ke(Ne[Ie],Ye,le,Ee),se.push(Ye)}}function rn(Ne){return Ne/360+.5}function vr(Ne){const se=Math.sin(Ne*Math.PI/180),le=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return le<0?0:le>1?1:le}function Wr(Ne,se,le,Ee,Ie,Ye,tt,ut){if(Ee/=se,Ye>=(le/=se)&&tt<Ee)return Ne;if(tt<le||Ye>=Ee)return null;const Ue=[];for(const At of Ne){const Vt=At.geometry;let _t=At.type;const lr=Ie===0?At.minX:At.minY,Lr=Ie===0?At.maxX:At.maxY;if(lr>=le&&Lr<Ee){Ue.push(At);continue}if(Lr<le||lr>=Ee)continue;let $r=[];if(_t==="Point"||_t==="MultiPoint")Hn(Vt,$r,le,Ee,Ie);else if(_t==="LineString")fi(Vt,$r,le,Ee,Ie,!1,ut.lineMetrics);else if(_t==="MultiLineString")Rn(Vt,$r,le,Ee,Ie,!1);else if(_t==="Polygon")Rn(Vt,$r,le,Ee,Ie,!0);else if(_t==="MultiPolygon")for(const wn of Vt){const Ir=[];Rn(wn,Ir,le,Ee,Ie,!0),Ir.length&&$r.push(Ir)}if($r.length){if(ut.lineMetrics&&_t==="LineString"){for(const wn of $r)Ue.push(pt(At.id,_t,wn,At.tags));continue}_t!=="LineString"&&_t!=="MultiLineString"||($r.length===1?(_t="LineString",$r=$r[0]):_t="MultiLineString"),_t!=="Point"&&_t!=="MultiPoint"||(_t=$r.length===3?"Point":"MultiPoint"),Ue.push(pt(At.id,_t,$r,At.tags))}}return Ue.length?Ue:null}function Hn(Ne,se,le,Ee,Ie){for(let Ye=0;Ye<Ne.length;Ye+=3){const tt=Ne[Ye+Ie];tt>=le&&tt<=Ee&&ai(se,Ne[Ye],Ne[Ye+1],Ne[Ye+2])}}function fi(Ne,se,le,Ee,Ie,Ye,tt){let ut=ba(Ne);const Ue=Ie===0?pi:oi;let At,Vt,_t=Ne.start;for(let Ir=0;Ir<Ne.length-3;Ir+=3){const cn=Ne[Ir],_n=Ne[Ir+1],ea=Ne[Ir+2],gi=Ne[Ir+3],Sn=Ne[Ir+4],si=Ie===0?cn:_n,li=Ie===0?gi:Sn;let Ca=!1;tt&&(At=Math.sqrt(Math.pow(cn-gi,2)+Math.pow(_n-Sn,2))),si<le?li>le&&(Vt=Ue(ut,cn,_n,gi,Sn,le),tt&&(ut.start=_t+At*Vt)):si>Ee?li<Ee&&(Vt=Ue(ut,cn,_n,gi,Sn,Ee),tt&&(ut.start=_t+At*Vt)):ai(ut,cn,_n,ea),li<le&&si>=le&&(Vt=Ue(ut,cn,_n,gi,Sn,le),Ca=!0),li>Ee&&si<=Ee&&(Vt=Ue(ut,cn,_n,gi,Sn,Ee),Ca=!0),!Ye&&Ca&&(tt&&(ut.end=_t+At*Vt),se.push(ut),ut=ba(Ne)),tt&&(_t+=At)}let lr=Ne.length-3;const Lr=Ne[lr],$r=Ne[lr+1],wn=Ie===0?Lr:$r;wn>=le&&wn<=Ee&&ai(ut,Lr,$r,Ne[lr+2]),lr=ut.length-3,Ye&&lr>=3&&(ut[lr]!==ut[0]||ut[lr+1]!==ut[1])&&ai(ut,ut[0],ut[1],ut[2]),ut.length&&se.push(ut)}function ba(Ne){const se=[];return se.size=Ne.size,se.start=Ne.start,se.end=Ne.end,se}function Rn(Ne,se,le,Ee,Ie,Ye){for(const tt of Ne)fi(tt,se,le,Ee,Ie,Ye,!1)}function ai(Ne,se,le,Ee){Ne.push(se,le,Ee)}function pi(Ne,se,le,Ee,Ie,Ye){const tt=(Ye-se)/(Ee-se);return ai(Ne,Ye,le+(Ie-le)*tt,1),tt}function oi(Ne,se,le,Ee,Ie,Ye){const tt=(Ye-le)/(Ie-le);return ai(Ne,se+(Ee-se)*tt,Ye,1),tt}function Rt(Ne,se){const le=[];for(let Ee=0;Ee<Ne.length;Ee++){const Ie=Ne[Ee],Ye=Ie.type;let tt;if(Ye==="Point"||Ye==="MultiPoint"||Ye==="LineString")tt=Fi(Ie.geometry,se);else if(Ye==="MultiLineString"||Ye==="Polygon"){tt=[];for(const ut of Ie.geometry)tt.push(Fi(ut,se))}else if(Ye==="MultiPolygon"){tt=[];for(const ut of Ie.geometry){const Ue=[];for(const At of ut)Ue.push(Fi(At,se));tt.push(Ue)}}le.push(pt(Ie.id,Ye,tt,Ie.tags))}return le}function Fi(Ne,se){const le=[];le.size=Ne.size,Ne.start!==void 0&&(le.start=Ne.start,le.end=Ne.end);for(let Ee=0;Ee<Ne.length;Ee+=3)le.push(Ne[Ee]+se,Ne[Ee+1],Ne[Ee+2]);return le}function Fn(Ne,se){if(Ne.transformed)return Ne;const le=1<<Ne.z,Ee=Ne.x,Ie=Ne.y;for(const Ye of Ne.features){const tt=Ye.geometry,ut=Ye.type;if(Ye.geometry=[],ut===1)for(let Ue=0;Ue<tt.length;Ue+=2)Ye.geometry.push(Pi(tt[Ue],tt[Ue+1],se,le,Ee,Ie));else for(let Ue=0;Ue<tt.length;Ue++){const At=[];for(let Vt=0;Vt<tt[Ue].length;Vt+=2)At.push(Pi(tt[Ue][Vt],tt[Ue][Vt+1],se,le,Ee,Ie));Ye.geometry.push(At)}}return Ne.transformed=!0,Ne}function Pi(Ne,se,le,Ee,Ie,Ye){return[Math.round(le*(Ne*Ee-Ie)),Math.round(le*(se*Ee-Ye))]}function ca(Ne,se,le,Ee,Ie){const Ye=se===Ie.maxZoom?0:Ie.tolerance/((1<<se)*Ie.extent),tt={features:[],numPoints:0,numSimplified:0,numFeatures:Ne.length,source:null,x:le,y:Ee,z:se,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const ut of Ne)nr(tt,ut,Ye,Ie);return tt}function nr(Ne,se,le,Ee){const Ie=se.geometry,Ye=se.type,tt=[];if(Ne.minX=Math.min(Ne.minX,se.minX),Ne.minY=Math.min(Ne.minY,se.minY),Ne.maxX=Math.max(Ne.maxX,se.maxX),Ne.maxY=Math.max(Ne.maxY,se.maxY),Ye==="Point"||Ye==="MultiPoint")for(let ut=0;ut<Ie.length;ut+=3)tt.push(Ie[ut],Ie[ut+1]),Ne.numPoints++,Ne.numSimplified++;else if(Ye==="LineString")kr(tt,Ie,Ne,le,!1,!1);else if(Ye==="MultiLineString"||Ye==="Polygon")for(let ut=0;ut<Ie.length;ut++)kr(tt,Ie[ut],Ne,le,Ye==="Polygon",ut===0);else if(Ye==="MultiPolygon")for(let ut=0;ut<Ie.length;ut++){const Ue=Ie[ut];for(let At=0;At<Ue.length;At++)kr(tt,Ue[At],Ne,le,!0,At===0)}if(tt.length){let ut=se.tags||null;if(Ye==="LineString"&&Ee.lineMetrics){ut={};for(const At in se.tags)ut[At]=se.tags[At];ut.mapbox_clip_start=Ie.start/Ie.size,ut.mapbox_clip_end=Ie.end/Ie.size}const Ue={geometry:tt,type:Ye==="Polygon"||Ye==="MultiPolygon"?3:Ye==="LineString"||Ye==="MultiLineString"?2:1,tags:ut};se.id!==null&&(Ue.id=se.id),Ne.features.push(Ue)}}function kr(Ne,se,le,Ee,Ie,Ye){const tt=Ee*Ee;if(Ee>0&&se.size<(Ie?tt:Ee))return void(le.numPoints+=se.length/3);const ut=[];for(let Ue=0;Ue<se.length;Ue+=3)(Ee===0||se[Ue+2]>tt)&&(le.numSimplified++,ut.push(se[Ue],se[Ue+1])),le.numPoints++;Ie&&(function(Ue,At){let Vt=0;for(let _t=0,lr=Ue.length,Lr=lr-2;_t<lr;Lr=_t,_t+=2)Vt+=(Ue[_t]-Ue[Lr])*(Ue[_t+1]+Ue[Lr+1]);if(Vt>0===At)for(let _t=0,lr=Ue.length;_t<lr/2;_t+=2){const Lr=Ue[_t],$r=Ue[_t+1];Ue[_t]=Ue[lr-2-_t],Ue[_t+1]=Ue[lr-1-_t],Ue[lr-2-_t]=Lr,Ue[lr-1-_t]=$r}})(ut,Ye),Ne.push(ut)}const jr={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Jn{constructor(se,le){const Ee=(le=this.options=(function(Ye,tt){for(const ut in tt)Ye[ut]=tt[ut];return Ye})(Object.create(jr),le)).debug;if(Ee&&console.time("preprocess data"),le.maxZoom<0||le.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(le.promoteId&&le.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ie=(function(Ye,tt){const ut=[];if(Ye.type==="FeatureCollection")for(let Ue=0;Ue<Ye.features.length;Ue++)Lt(ut,Ye.features[Ue],tt,Ue);else Lt(ut,Ye.type==="Feature"?Ye:{geometry:Ye},tt);return ut})(se,le);this.tiles={},this.tileCoords=[],Ee&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",le.indexMaxZoom,le.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ie=(function(Ye,tt){const ut=tt.buffer/tt.extent;let Ue=Ye;const At=Wr(Ye,1,-1-ut,ut,0,-1,2,tt),Vt=Wr(Ye,1,1-ut,2+ut,0,-1,2,tt);return(At||Vt)&&(Ue=Wr(Ye,1,-ut,1+ut,0,-1,2,tt)||[],At&&(Ue=Rt(At,1).concat(Ue)),Vt&&(Ue=Ue.concat(Rt(Vt,-1)))),Ue})(Ie,le),Ie.length&&this.splitTile(Ie,0,0,0),Ee&&(Ie.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(se,le,Ee,Ie,Ye,tt,ut){const Ue=[se,le,Ee,Ie],At=this.options,Vt=At.debug;for(;Ue.length;){Ie=Ue.pop(),Ee=Ue.pop(),le=Ue.pop(),se=Ue.pop();const _t=1<<le,lr=Xa(le,Ee,Ie);let Lr=this.tiles[lr];if(!Lr&&(Vt>1&&console.time("creation"),Lr=this.tiles[lr]=ca(se,le,Ee,Ie,At),this.tileCoords.push({z:le,x:Ee,y:Ie}),Vt)){Vt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",le,Ee,Ie,Lr.numFeatures,Lr.numPoints,Lr.numSimplified),console.timeEnd("creation"));const Ca=`z${le}`;this.stats[Ca]=(this.stats[Ca]||0)+1,this.total++}if(Lr.source=se,Ye==null){if(le===At.indexMaxZoom||Lr.numPoints<=At.indexMaxPoints)continue}else{if(le===At.maxZoom||le===Ye)continue;if(Ye!=null){const Ca=Ye-le;if(Ee!==tt>>Ca||Ie!==ut>>Ca)continue}}if(Lr.source=null,se.length===0)continue;Vt>1&&console.time("clipping");const $r=.5*At.buffer/At.extent,wn=.5-$r,Ir=.5+$r,cn=1+$r;let _n=null,ea=null,gi=null,Sn=null,si=Wr(se,_t,Ee-$r,Ee+Ir,0,Lr.minX,Lr.maxX,At),li=Wr(se,_t,Ee+wn,Ee+cn,0,Lr.minX,Lr.maxX,At);se=null,si&&(_n=Wr(si,_t,Ie-$r,Ie+Ir,1,Lr.minY,Lr.maxY,At),ea=Wr(si,_t,Ie+wn,Ie+cn,1,Lr.minY,Lr.maxY,At),si=null),li&&(gi=Wr(li,_t,Ie-$r,Ie+Ir,1,Lr.minY,Lr.maxY,At),Sn=Wr(li,_t,Ie+wn,Ie+cn,1,Lr.minY,Lr.maxY,At),li=null),Vt>1&&console.timeEnd("clipping"),Ue.push(_n||[],le+1,2*Ee,2*Ie),Ue.push(ea||[],le+1,2*Ee,2*Ie+1),Ue.push(gi||[],le+1,2*Ee+1,2*Ie),Ue.push(Sn||[],le+1,2*Ee+1,2*Ie+1)}}getTile(se,le,Ee){se=+se,le=+le,Ee=+Ee;const Ie=this.options,{extent:Ye,debug:tt}=Ie;if(se<0||se>24)return null;const ut=1<<se,Ue=Xa(se,le=le+ut&ut-1,Ee);if(this.tiles[Ue])return Fn(this.tiles[Ue],Ye);tt>1&&console.log("drilling down to z%d-%d-%d",se,le,Ee);let At,Vt=se,_t=le,lr=Ee;for(;!At&&Vt>0;)Vt--,_t>>=1,lr>>=1,At=this.tiles[Xa(Vt,_t,lr)];return At&&At.source?(tt>1&&(console.log("found parent tile z%d-%d-%d",Vt,_t,lr),console.time("drilling down")),this.splitTile(At.source,Vt,_t,lr,se,le,Ee),tt>1&&console.timeEnd("drilling down"),this.tiles[Ue]?Fn(this.tiles[Ue],Ye):null):null}}function Xa(Ne,se,le){return 32*((1<<Ne)*le+se)+Ne}function nn(Ne,se){return se?Ne.properties[se]:Ne.id}function Go(Ne,se){if(Ne==null)return!0;if(Ne.type==="Feature")return nn(Ne,se)!=null;if(Ne.type==="FeatureCollection"){const le=new Set;for(const Ee of Ne.features){const Ie=nn(Ee,se);if(Ie==null||le.has(Ie))return!1;le.add(Ie)}return!0}return!1}function Uo(Ne,se){const le=new Map;if(Ne!=null)if(Ne.type==="Feature")le.set(nn(Ne,se),Ne);else for(const Ee of Ne.features)le.set(nn(Ee,se),Ee);return le}class Io extends C{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(se,le){return h._(this,void 0,void 0,(function*(){const Ee=se.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ie=this._geoJSONIndex.getTile(Ee.z,Ee.x,Ee.y);if(!Ie)return null;const Ye=new class{constructor(ut){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=h.X,this.length=ut.length,this._features=ut}feature(ut){return new class{constructor(Ue){this._feature=Ue,this.extent=h.X,this.type=Ue.type,this.properties=Ue.tags,"id"in Ue&&!isNaN(Ue.id)&&(this.id=parseInt(Ue.id,10))}loadGeometry(){if(this._feature.type===1){const Ue=[];for(const At of this._feature.geometry)Ue.push([new h.P(At[0],At[1])]);return Ue}{const Ue=[];for(const At of this._feature.geometry){const Vt=[];for(const _t of At)Vt.push(new h.P(_t[0],_t[1]));Ue.push(Vt)}return Ue}}toGeoJSON(Ue,At,Vt){return G.call(this,Ue,At,Vt)}}(this._features[ut])}}(Ie.features);let tt=ge(Ye);return tt.byteOffset===0&&tt.byteLength===tt.buffer.byteLength||(tt=new Uint8Array(tt)),{vectorTile:Ye,rawData:tt.buffer}}))}loadData(se){return h._(this,void 0,void 0,(function*(){var le;(le=this._pendingRequest)===null||le===void 0||le.abort();const Ee=!!(se&&se.request&&se.request.collectResourceTiming)&&new h.bv(se.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(se,this._pendingRequest),this._geoJSONIndex=se.cluster?new zt((function({superclusterOptions:tt,clusterProperties:ut}){if(!ut||!tt)return tt;const Ue={},At={},Vt={accumulated:null,zoom:0},_t={properties:null},lr=Object.keys(ut);for(const Lr of lr){const[$r,wn]=ut[Lr],Ir=h.bC(wn),cn=h.bC(typeof $r=="string"?[$r,["accumulated"],["get",Lr]]:$r);Ue[Lr]=Ir.value,At[Lr]=cn.value}return tt.map=Lr=>{_t.properties=Lr;const $r={};for(const wn of lr)$r[wn]=Ue[wn].evaluate(Vt,_t);return $r},tt.reduce=(Lr,$r)=>{_t.properties=$r;for(const wn of lr)Vt.accumulated=Lr[wn],Lr[wn]=At[wn].evaluate(Vt,_t)},tt})(se)).load((yield this._pendingData).features):(Ie=yield this._pendingData,new Jn(Ie,se.geojsonVtOptions)),this.loaded={};const Ye={};if(Ee){const tt=Ee.finish();tt&&(Ye.resourceTiming={},Ye.resourceTiming[se.source]=JSON.parse(JSON.stringify(tt)))}return Ye}catch(Ye){if(delete this._pendingRequest,h.bB(Ye))return{abandoned:!0};throw Ye}var Ie}))}getData(){return h._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(se){const le=this.loaded;return le&&le[se.uid]?super.reloadTile(se):this.loadTile(se)}loadAndProcessGeoJSON(se,le){return h._(this,void 0,void 0,(function*(){let Ee=yield this.loadGeoJSON(se,le);if(delete this._pendingRequest,typeof Ee!="object")throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(W(Ee,!0),se.filter){const Ie=h.bC(se.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ie.result==="error")throw new Error(Ie.value.map((tt=>`${tt.key}: ${tt.message}`)).join(", "));Ee={type:"FeatureCollection",features:Ee.features.filter((tt=>Ie.value.evaluate({zoom:0},tt)))}}return Ee}))}loadGeoJSON(se,le){return h._(this,void 0,void 0,(function*(){const{promoteId:Ee}=se;if(se.request){const Ie=yield h.h(se.request,le);return this._dataUpdateable=Go(Ie.data,Ee)?Uo(Ie.data,Ee):void 0,Ie.data}if(typeof se.data=="string")try{const Ie=JSON.parse(se.data);return this._dataUpdateable=Go(Ie,Ee)?Uo(Ie,Ee):void 0,Ie}catch{throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`)}if(!se.dataDiff)throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${se.source}`);return(function(Ie,Ye,tt){var ut,Ue,At,Vt;if(Ye.removeAll&&Ie.clear(),Ye.remove)for(const _t of Ye.remove)Ie.delete(_t);if(Ye.add)for(const _t of Ye.add){const lr=nn(_t,tt);lr!=null&&Ie.set(lr,_t)}if(Ye.update)for(const _t of Ye.update){let lr=Ie.get(_t.id);if(lr==null)continue;const Lr=!_t.removeAllProperties&&(((ut=_t.removeProperties)===null||ut===void 0?void 0:ut.length)>0||((Ue=_t.addOrUpdateProperties)===null||Ue===void 0?void 0:Ue.length)>0);if((_t.newGeometry||_t.removeAllProperties||Lr)&&(lr=Object.assign({},lr),Ie.set(_t.id,lr),Lr&&(lr.properties=Object.assign({},lr.properties))),_t.newGeometry&&(lr.geometry=_t.newGeometry),_t.removeAllProperties)lr.properties={};else if(((At=_t.removeProperties)===null||At===void 0?void 0:At.length)>0)for(const $r of _t.removeProperties)Object.prototype.hasOwnProperty.call(lr.properties,$r)&&delete lr.properties[$r];if(((Vt=_t.addOrUpdateProperties)===null||Vt===void 0?void 0:Vt.length)>0)for(const{key:$r,value:wn}of _t.addOrUpdateProperties)lr.properties[$r]=wn}})(this._dataUpdateable,se.dataDiff,Ee),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(se){return h._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(se){return this._geoJSONIndex.getClusterExpansionZoom(se.clusterId)}getClusterChildren(se){return this._geoJSONIndex.getChildren(se.clusterId)}getClusterLeaves(se){return this._geoJSONIndex.getLeaves(se.clusterId,se.limit,se.offset)}}class wo{constructor(se){this.self=se,this.actor=new h.F(se),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(le,Ee)=>{if(this.externalWorkerSourceTypes[le])throw new Error(`Worker source with name "${le}" already registered.`);this.externalWorkerSourceTypes[le]=Ee},this.self.addProtocol=h.bi,this.self.removeProtocol=h.bj,this.self.registerRTLTextPlugin=le=>{if(h.bD.isParsed())throw new Error("RTL text plugin already registered.");h.bD.setMethods(le)},this.actor.registerMessageHandler("LDT",((le,Ee)=>this._getDEMWorkerSource(le,Ee.source).loadTile(Ee))),this.actor.registerMessageHandler("RDT",((le,Ee)=>h._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(le,Ee.source).removeTile(Ee)})))),this.actor.registerMessageHandler("GCEZ",((le,Ee)=>h._(this,void 0,void 0,(function*(){return this._getWorkerSource(le,Ee.type,Ee.source).getClusterExpansionZoom(Ee)})))),this.actor.registerMessageHandler("GCC",((le,Ee)=>h._(this,void 0,void 0,(function*(){return this._getWorkerSource(le,Ee.type,Ee.source).getClusterChildren(Ee)})))),this.actor.registerMessageHandler("GCL",((le,Ee)=>h._(this,void 0,void 0,(function*(){return this._getWorkerSource(le,Ee.type,Ee.source).getClusterLeaves(Ee)})))),this.actor.registerMessageHandler("LD",((le,Ee)=>this._getWorkerSource(le,Ee.type,Ee.source).loadData(Ee))),this.actor.registerMessageHandler("GD",((le,Ee)=>this._getWorkerSource(le,Ee.type,Ee.source).getData())),this.actor.registerMessageHandler("LT",((le,Ee)=>this._getWorkerSource(le,Ee.type,Ee.source).loadTile(Ee))),this.actor.registerMessageHandler("RT",((le,Ee)=>this._getWorkerSource(le,Ee.type,Ee.source).reloadTile(Ee))),this.actor.registerMessageHandler("AT",((le,Ee)=>this._getWorkerSource(le,Ee.type,Ee.source).abortTile(Ee))),this.actor.registerMessageHandler("RMT",((le,Ee)=>this._getWorkerSource(le,Ee.type,Ee.source).removeTile(Ee))),this.actor.registerMessageHandler("RS",((le,Ee)=>h._(this,void 0,void 0,(function*(){if(!this.workerSources[le]||!this.workerSources[le][Ee.type]||!this.workerSources[le][Ee.type][Ee.source])return;const Ie=this.workerSources[le][Ee.type][Ee.source];delete this.workerSources[le][Ee.type][Ee.source],Ie.removeSource!==void 0&&Ie.removeSource(Ee)})))),this.actor.registerMessageHandler("RM",(le=>h._(this,void 0,void 0,(function*(){delete this.layerIndexes[le],delete this.availableImages[le],delete this.workerSources[le],delete this.demWorkerSources[le]})))),this.actor.registerMessageHandler("SR",((le,Ee)=>h._(this,void 0,void 0,(function*(){this.referrer=Ee})))),this.actor.registerMessageHandler("SRPS",((le,Ee)=>this._syncRTLPluginState(le,Ee))),this.actor.registerMessageHandler("IS",((le,Ee)=>h._(this,void 0,void 0,(function*(){this.self.importScripts(Ee)})))),this.actor.registerMessageHandler("SI",((le,Ee)=>this._setImages(le,Ee))),this.actor.registerMessageHandler("UL",((le,Ee)=>h._(this,void 0,void 0,(function*(){this._getLayerIndex(le).update(Ee.layers,Ee.removedIds)})))),this.actor.registerMessageHandler("SL",((le,Ee)=>h._(this,void 0,void 0,(function*(){this._getLayerIndex(le).replace(Ee)}))))}_setImages(se,le){return h._(this,void 0,void 0,(function*(){this.availableImages[se]=le;for(const Ee in this.workerSources[se]){const Ie=this.workerSources[se][Ee];for(const Ye in Ie)Ie[Ye].availableImages=le}}))}_syncRTLPluginState(se,le){return h._(this,void 0,void 0,(function*(){if(h.bD.isParsed())return h.bD.getState();if(le.pluginStatus!=="loading")return h.bD.setState(le),le;const Ee=le.pluginURL;if(this.self.importScripts(Ee),h.bD.isParsed()){const Ie={pluginStatus:"loaded",pluginURL:Ee};return h.bD.setState(Ie),Ie}throw h.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${Ee}`)}))}_getAvailableImages(se){let le=this.availableImages[se];return le||(le=[]),le}_getLayerIndex(se){let le=this.layerIndexes[se];return le||(le=this.layerIndexes[se]=new u),le}_getWorkerSource(se,le,Ee){if(this.workerSources[se]||(this.workerSources[se]={}),this.workerSources[se][le]||(this.workerSources[se][le]={}),!this.workerSources[se][le][Ee]){const Ie={sendAsync:(Ye,tt)=>(Ye.targetMapId=se,this.actor.sendAsync(Ye,tt))};switch(le){case"vector":this.workerSources[se][le][Ee]=new C(Ie,this._getLayerIndex(se),this._getAvailableImages(se));break;case"geojson":this.workerSources[se][le][Ee]=new Io(Ie,this._getLayerIndex(se),this._getAvailableImages(se));break;default:this.workerSources[se][le][Ee]=new this.externalWorkerSourceTypes[le](Ie,this._getLayerIndex(se),this._getAvailableImages(se))}}return this.workerSources[se][le][Ee]}_getDEMWorkerSource(se,le){return this.demWorkerSources[se]||(this.demWorkerSources[se]={}),this.demWorkerSources[se][le]||(this.demWorkerSources[se][le]=new P),this.demWorkerSources[se][le]}}return h.i(self)&&(self.worker=new wo(self)),wo})),o("index",["exports","./shared"],(function(h,u){var v="4.7.1";let x,A;const C={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:D=>new Promise(((i,p)=>{const _=requestAnimationFrame(i);D.signal.addEventListener("abort",(()=>{cancelAnimationFrame(_),p(u.c())}))})),getImageData(D,i=0){return this.getImageCanvasContext(D).getImageData(-i,-i,D.width+2*i,D.height+2*i)},getImageCanvasContext(D){const i=window.document.createElement("canvas"),p=i.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("failed to create canvas 2d context");return i.width=D.width,i.height=D.height,p.drawImage(D,0,0,D.width,D.height),p},resolveURL:D=>(x||(x=document.createElement("a")),x.href=D,x.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(A==null&&(A=matchMedia("(prefers-reduced-motion: reduce)")),A.matches)}};class P{static testProp(i){if(!P.docStyle)return i[0];for(let p=0;p<i.length;p++)if(i[p]in P.docStyle)return i[p];return i[0]}static create(i,p,_){const b=window.document.createElement(i);return p!==void 0&&(b.className=p),_&&_.appendChild(b),b}static createNS(i,p){return window.document.createElementNS(i,p)}static disableDrag(){P.docStyle&&P.selectProp&&(P.userSelect=P.docStyle[P.selectProp],P.docStyle[P.selectProp]="none")}static enableDrag(){P.docStyle&&P.selectProp&&(P.docStyle[P.selectProp]=P.userSelect)}static setTransform(i,p){i.style[P.transformProp]=p}static addEventListener(i,p,_,b={}){i.addEventListener(p,_,"passive"in b?b:b.capture)}static removeEventListener(i,p,_,b={}){i.removeEventListener(p,_,"passive"in b?b:b.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",P.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",P.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",P.suppressClickInternal,!0)}),0)}static getScale(i){const p=i.getBoundingClientRect();return{x:p.width/i.offsetWidth||1,y:p.height/i.offsetHeight||1,boundingClientRect:p}}static getPoint(i,p,_){const b=p.boundingClientRect;return new u.P((_.clientX-b.left)/p.x-i.clientLeft,(_.clientY-b.top)/p.y-i.clientTop)}static mousePos(i,p){const _=P.getScale(i);return P.getPoint(i,_,p)}static touchPos(i,p){const _=[],b=P.getScale(i);for(let T=0;T<p.length;T++)_.push(P.getPoint(i,b,p[T]));return _}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}P.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,P.selectProp=P.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),P.transformProp=P.testProp(["transform","WebkitTransform"]);const O={supported:!1,testSupport:function(D){!G&&W&&(X?ae(D):U=D)}};let U,W,G=!1,X=!1;function ae(D){const i=D.createTexture();D.bindTexture(D.TEXTURE_2D,i);try{if(D.texImage2D(D.TEXTURE_2D,0,D.RGBA,D.RGBA,D.UNSIGNED_BYTE,W),D.isContextLost())return;O.supported=!0}catch{}D.deleteTexture(i),G=!0}var ne;typeof document<"u"&&(W=document.createElement("img"),W.onload=()=>{U&&ae(U),U=null,X=!0},W.onerror=()=>{G=!0,U=null},W.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(D){let i,p,_,b;D.resetRequestQueue=()=>{i=[],p=0,_=0,b={}},D.addThrottleControl=V=>{const K=_++;return b[K]=V,K},D.removeThrottleControl=V=>{delete b[V],j()},D.getImage=(V,K,te=!0)=>new Promise(((re,ye)=>{O.supported&&(V.headers||(V.headers={}),V.headers.accept="image/webp,*/*"),u.e(V,{type:"image"}),i.push({abortController:K,requestParameters:V,supportImageRefresh:te,state:"queued",onError:we=>{ye(we)},onSuccess:we=>{re(we)}}),j()}));const T=V=>u._(this,void 0,void 0,(function*(){V.state="running";const{requestParameters:K,supportImageRefresh:te,onError:re,onSuccess:ye,abortController:we}=V,Te=te===!1&&!u.i(self)&&!u.g(K.url)&&(!K.headers||Object.keys(K.headers).reduce((($e,We)=>$e&&We==="accept"),!0));p++;const je=Te?$(K,we):u.m(K,we);try{const $e=yield je;delete V.abortController,V.state="completed",$e.data instanceof HTMLImageElement||u.b($e.data)?ye($e):$e.data&&ye({data:yield(Fe=$e.data,typeof createImageBitmap=="function"?u.d(Fe):u.f(Fe)),cacheControl:$e.cacheControl,expires:$e.expires})}catch($e){delete V.abortController,re($e)}finally{p--,j()}var Fe})),j=()=>{const V=(()=>{for(const K of Object.keys(b))if(b[K]())return!0;return!1})()?u.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let K=p;K<V&&i.length>0;K++){const te=i.shift();te.abortController.signal.aborted?K--:T(te)}},$=(V,K)=>new Promise(((te,re)=>{const ye=new Image,we=V.url,Te=V.credentials;Te&&Te==="include"?ye.crossOrigin="use-credentials":(Te&&Te==="same-origin"||!u.s(we))&&(ye.crossOrigin="anonymous"),K.signal.addEventListener("abort",(()=>{ye.src="",re(u.c())})),ye.fetchPriority="high",ye.onload=()=>{ye.onerror=ye.onload=null,te({data:ye})},ye.onerror=()=>{ye.onerror=ye.onload=null,K.signal.aborted||re(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},ye.src=we}))})(ne||(ne={})),ne.resetRequestQueue();class ue{constructor(i){this._transformRequestFn=i}transformRequest(i,p){return this._transformRequestFn&&this._transformRequestFn(i,p)||{url:i}}setTransformRequest(i){this._transformRequestFn=i}}function Q(D){var i=new u.A(3);return i[0]=D[0],i[1]=D[1],i[2]=D[2],i}var de,he=function(D,i,p){return D[0]=i[0]-p[0],D[1]=i[1]-p[1],D[2]=i[2]-p[2],D};de=new u.A(3),u.A!=Float32Array&&(de[0]=0,de[1]=0,de[2]=0);var Y=function(D){var i=D[0],p=D[1];return i*i+p*p};function ie(D){const i=[];if(typeof D=="string")i.push({id:"default",url:D});else if(D&&D.length>0){const p=[];for(const{id:_,url:b}of D){const T=`${_}${b}`;p.indexOf(T)===-1&&(p.push(T),i.push({id:_,url:b}))}}return i}function Ce(D,i,p){const _=D.split("?");return _[0]+=`${i}${p}`,_.join("?")}(function(){var D=new u.A(2);u.A!=Float32Array&&(D[0]=0,D[1]=0)})();class _e{constructor(i,p,_,b){this.context=i,this.format=_,this.texture=i.gl.createTexture(),this.update(p,b)}update(i,p,_){const{width:b,height:T}=i,j=!(this.size&&this.size[0]===b&&this.size[1]===T||_),{context:$}=this,{gl:V}=$;if(this.useMipmap=!!(p&&p.useMipmap),V.bindTexture(V.TEXTURE_2D,this.texture),$.pixelStoreUnpackFlipY.set(!1),$.pixelStoreUnpack.set(1),$.pixelStoreUnpackPremultiplyAlpha.set(this.format===V.RGBA&&(!p||p.premultiply!==!1)),j)this.size=[b,T],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||u.b(i)?V.texImage2D(V.TEXTURE_2D,0,this.format,this.format,V.UNSIGNED_BYTE,i):V.texImage2D(V.TEXTURE_2D,0,this.format,b,T,0,this.format,V.UNSIGNED_BYTE,i.data);else{const{x:K,y:te}=_||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||u.b(i)?V.texSubImage2D(V.TEXTURE_2D,0,K,te,V.RGBA,V.UNSIGNED_BYTE,i):V.texSubImage2D(V.TEXTURE_2D,0,K,te,b,T,V.RGBA,V.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&V.generateMipmap(V.TEXTURE_2D)}bind(i,p,_){const{context:b}=this,{gl:T}=b;T.bindTexture(T.TEXTURE_2D,this.texture),_!==T.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(_=T.LINEAR),i!==this.filter&&(T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,i),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,_||i),this.filter=i),p!==this.wrap&&(T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,p),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,p),this.wrap=p)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function Me(D){const{userImage:i}=D;return!!(i&&i.render&&i.render())&&(D.data.replace(new Uint8Array(i.data.buffer)),!0)}class me extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:p,promiseResolve:_}of this.requestors)_(this._getImagesForIds(p));this.requestors=[]}}getImage(i){const p=this.images[i];if(p&&!p.data&&p.spriteData){const _=p.spriteData;p.data=new u.R({width:_.width,height:_.height},_.context.getImageData(_.x,_.y,_.width,_.height).data),p.spriteData=null}return p}addImage(i,p){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,p)&&(this.images[i]=p)}_validate(i,p){let _=!0;const b=p.data||p.spriteData;return this._validateStretch(p.stretchX,b&&b.width)||(this.fire(new u.j(new Error(`Image "${i}" has invalid "stretchX" value`))),_=!1),this._validateStretch(p.stretchY,b&&b.height)||(this.fire(new u.j(new Error(`Image "${i}" has invalid "stretchY" value`))),_=!1),this._validateContent(p.content,p)||(this.fire(new u.j(new Error(`Image "${i}" has invalid "content" value`))),_=!1),_}_validateStretch(i,p){if(!i)return!0;let _=0;for(const b of i){if(b[0]<_||b[1]<b[0]||p<b[1])return!1;_=b[1]}return!0}_validateContent(i,p){if(!i)return!0;if(i.length!==4)return!1;const _=p.spriteData,b=_&&_.width||p.data.width,T=_&&_.height||p.data.height;return!(i[0]<0||b<i[0]||i[1]<0||T<i[1]||i[2]<0||b<i[2]||i[3]<0||T<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,p,_=!0){const b=this.getImage(i);if(_&&(b.data.width!==p.data.width||b.data.height!==p.data.height))throw new Error(`size mismatch between old image (${b.data.width}x${b.data.height}) and new image (${p.data.width}x${p.data.height}).`);p.version=b.version+1,this.images[i]=p,this.updatedImages[i]=!0}removeImage(i){const p=this.images[i];delete this.images[i],delete this.patterns[i],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i){return new Promise(((p,_)=>{let b=!0;if(!this.isLoaded())for(const T of i)this.images[T]||(b=!1);this.isLoaded()||b?p(this._getImagesForIds(i)):this.requestors.push({ids:i,promiseResolve:p})}))}_getImagesForIds(i){const p={};for(const _ of i){let b=this.getImage(_);b||(this.fire(new u.k("styleimagemissing",{id:_})),b=this.getImage(_)),b?p[_]={data:b.data.clone(),pixelRatio:b.pixelRatio,sdf:b.sdf,version:b.version,stretchX:b.stretchX,stretchY:b.stretchY,content:b.content,textFitWidth:b.textFitWidth,textFitHeight:b.textFitHeight,hasRenderCallback:!!(b.userImage&&b.userImage.render)}:u.w(`Image "${_}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return p}getPixelSize(){const{width:i,height:p}=this.atlasImage;return{width:i,height:p}}getPattern(i){const p=this.patterns[i],_=this.getImage(i);if(!_)return null;if(p&&p.position.version===_.version)return p.position;if(p)p.position.version=_.version;else{const b={w:_.data.width+2,h:_.data.height+2,x:0,y:0},T=new u.I(b,_);this.patterns[i]={bin:b,position:T}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const p=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new _e(i,this.atlasImage,p.RGBA),this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const T in this.patterns)i.push(this.patterns[T].bin);const{w:p,h:_}=u.p(i),b=this.atlasImage;b.resize({width:p||1,height:_||1});for(const T in this.patterns){const{bin:j}=this.patterns[T],$=j.x+1,V=j.y+1,K=this.getImage(T).data,te=K.width,re=K.height;u.R.copy(K,b,{x:0,y:0},{x:$,y:V},{width:te,height:re}),u.R.copy(K,b,{x:0,y:re-1},{x:$,y:V-1},{width:te,height:1}),u.R.copy(K,b,{x:0,y:0},{x:$,y:V+re},{width:te,height:1}),u.R.copy(K,b,{x:te-1,y:0},{x:$-1,y:V},{width:1,height:re}),u.R.copy(K,b,{x:0,y:0},{x:$+te,y:V},{width:1,height:re})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const p of i){if(this.callbackDispatchedThisFrame[p])continue;this.callbackDispatchedThisFrame[p]=!0;const _=this.getImage(p);_||u.w(`Image with ID: "${p}" was not found`),Me(_)&&this.updateImage(p,_)}}}const Ke=1e20;function Re(D,i,p,_,b,T,j,$,V){for(let K=i;K<i+_;K++)pe(D,p*T+K,T,b,j,$,V);for(let K=p;K<p+b;K++)pe(D,K*T+i,1,_,j,$,V)}function pe(D,i,p,_,b,T,j){T[0]=0,j[0]=-Ke,j[1]=Ke,b[0]=D[i];for(let $=1,V=0,K=0;$<_;$++){b[$]=D[i+$*p];const te=$*$;do{const re=T[V];K=(b[$]-b[re]+te-re*re)/($-re)/2}while(K<=j[V]&&--V>-1);V++,T[V]=$,j[V]=K,j[V+1]=Ke}for(let $=0,V=0;$<_;$++){for(;j[V+1]<$;)V++;const K=T[V],te=$-K;D[i+$*p]=b[K]+te*te}}class ge{constructor(i,p){this.requestManager=i,this.localIdeographFontFamily=p,this.entries={}}setURL(i){this.url=i}getGlyphs(i){return u._(this,void 0,void 0,(function*(){const p=[];for(const T in i)for(const j of i[T])p.push(this._getAndCacheGlyphsPromise(T,j));const _=yield Promise.all(p),b={};for(const{stack:T,id:j,glyph:$}of _)b[T]||(b[T]={}),b[T][j]=$&&{id:$.id,bitmap:$.bitmap.clone(),metrics:$.metrics};return b}))}_getAndCacheGlyphsPromise(i,p){return u._(this,void 0,void 0,(function*(){let _=this.entries[i];_||(_=this.entries[i]={glyphs:{},requests:{},ranges:{}});let b=_.glyphs[p];if(b!==void 0)return{stack:i,id:p,glyph:b};if(b=this._tinySDF(_,i,p),b)return _.glyphs[p]=b,{stack:i,id:p,glyph:b};const T=Math.floor(p/256);if(256*T>65535)throw new Error("glyphs > 65535 not supported");if(_.ranges[T])return{stack:i,id:p,glyph:b};if(!this.url)throw new Error("glyphsUrl is not set");if(!_.requests[T]){const $=ge.loadGlyphRange(i,T,this.url,this.requestManager);_.requests[T]=$}const j=yield _.requests[T];for(const $ in j)this._doesCharSupportLocalGlyph(+$)||(_.glyphs[+$]=j[+$]);return _.ranges[T]=!0,{stack:i,id:p,glyph:j[p]||null}}))}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(i))}_tinySDF(i,p,_){const b=this.localIdeographFontFamily;if(!b||!this._doesCharSupportLocalGlyph(_))return;let T=i.tinySDF;if(!T){let $="400";/bold/i.test(p)?$="900":/medium/i.test(p)?$="500":/light/i.test(p)&&($="200"),T=i.tinySDF=new ge.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:b,fontWeight:$})}const j=T.draw(String.fromCharCode(_));return{id:_,bitmap:new u.o({width:j.width||60,height:j.height||60},j.data),metrics:{width:j.glyphWidth/2||24,height:j.glyphHeight/2||24,left:j.glyphLeft/2+.5||0,top:j.glyphTop/2-27.5||-8,advance:j.glyphAdvance/2||24,isDoubleResolution:!0}}}}ge.loadGlyphRange=function(D,i,p,_){return u._(this,void 0,void 0,(function*(){const b=256*i,T=b+255,j=_.transformRequest(p.replace("{fontstack}",D).replace("{range}",`${b}-${T}`),"Glyphs"),$=yield u.l(j,new AbortController);if(!$||!$.data)throw new Error(`Could not load glyph range. range: ${i}, ${b}-${T}`);const V={};for(const K of u.n($.data))V[K.id]=K;return V}))},ge.TinySDF=class{constructor({fontSize:D=24,buffer:i=3,radius:p=8,cutoff:_=.25,fontFamily:b="sans-serif",fontWeight:T="normal",fontStyle:j="normal"}={}){this.buffer=i,this.cutoff=_,this.radius=p;const $=this.size=D+4*i,V=this._createCanvas($),K=this.ctx=V.getContext("2d",{willReadFrequently:!0});K.font=`${j} ${T} ${D}px ${b}`,K.textBaseline="alphabetic",K.textAlign="left",K.fillStyle="black",this.gridOuter=new Float64Array($*$),this.gridInner=new Float64Array($*$),this.f=new Float64Array($),this.z=new Float64Array($+1),this.v=new Uint16Array($)}_createCanvas(D){const i=document.createElement("canvas");return i.width=i.height=D,i}draw(D){const{width:i,actualBoundingBoxAscent:p,actualBoundingBoxDescent:_,actualBoundingBoxLeft:b,actualBoundingBoxRight:T}=this.ctx.measureText(D),j=Math.ceil(p),$=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(T-b))),V=Math.min(this.size-this.buffer,j+Math.ceil(_)),K=$+2*this.buffer,te=V+2*this.buffer,re=Math.max(K*te,0),ye=new Uint8ClampedArray(re),we={data:ye,width:K,height:te,glyphWidth:$,glyphHeight:V,glyphTop:j,glyphLeft:0,glyphAdvance:i};if($===0||V===0)return we;const{ctx:Te,buffer:je,gridInner:Fe,gridOuter:$e}=this;Te.clearRect(je,je,$,V),Te.fillText(D,je,je+j);const We=Te.getImageData(je,je,$,V);$e.fill(Ke,0,re),Fe.fill(0,0,re);for(let Le=0;Le<V;Le++)for(let et=0;et<$;et++){const rt=We.data[4*(Le*$+et)+3]/255;if(rt===0)continue;const gt=(Le+je)*K+et+je;if(rt===1)$e[gt]=0,Fe[gt]=Ke;else{const Bt=.5-rt;$e[gt]=Bt>0?Bt*Bt:0,Fe[gt]=Bt<0?Bt*Bt:0}}Re($e,0,0,K,te,K,this.f,this.v,this.z),Re(Fe,je,je,$,V,K,this.f,this.v,this.z);for(let Le=0;Le<re;Le++){const et=Math.sqrt($e[Le])-Math.sqrt(Fe[Le]);ye[Le]=Math.round(255-255*(et/this.radius+this.cutoff))}return we}};class ze{constructor(){this.specification=u.v.light.position}possiblyEvaluate(i,p){return u.x(i.expression.evaluate(p))}interpolate(i,p,_){return{x:u.y.number(i.x,p.x,_),y:u.y.number(i.y,p.y,_),z:u.y.number(i.z,p.z,_)}}}let Pe;class st extends u.E{constructor(i){super(),Pe=Pe||new u.q({anchor:new u.D(u.v.light.anchor),position:new ze,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(Pe),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,p={}){if(!this._validate(u.r,i,p))for(const _ in i){const b=i[_];_.endsWith("-transition")?this._transitionable.setTransition(_.slice(0,-11),b):this._transitionable.setValue(_,b)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,p,_){return(!_||_.validate!==!1)&&u.t(this,i.call(u.u,{value:p,style:{glyphs:!0,sprite:!0},styleSpec:u.v}))}}const Ae=new u.q({"sky-color":new u.D(u.v.sky["sky-color"]),"horizon-color":new u.D(u.v.sky["horizon-color"]),"fog-color":new u.D(u.v.sky["fog-color"]),"fog-ground-blend":new u.D(u.v.sky["fog-ground-blend"]),"horizon-fog-blend":new u.D(u.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new u.D(u.v.sky["sky-horizon-blend"]),"atmosphere-blend":new u.D(u.v.sky["atmosphere-blend"])});class qe extends u.E{constructor(i){super(),this._transitionable=new u.T(Ae),this.setSky(i),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new u.z(0))}setSky(i,p={}){if(!this._validate(u.B,i,p)){i||(i={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const _ in i){const b=i[_];_.endsWith("-transition")?this._transitionable.setTransition(_.slice(0,-11),b):this._transitionable.setValue(_,b)}}}getSky(){return this._transitionable.serialize()}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,p,_={}){return(_==null?void 0:_.validate)!==!1&&u.t(this,i.call(u.u,u.e({value:p,style:{glyphs:!0,sprite:!0},styleSpec:u.v})))}calculateFogBlendOpacity(i){return i<60?0:i<70?(i-60)/10:1}}class Ze{constructor(i,p){this.width=i,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,p){const _=i.join(",")+String(p);return this.dashEntry[_]||(this.dashEntry[_]=this.addDash(i,p)),this.dashEntry[_]}getDashRanges(i,p,_){const b=[];let T=i.length%2==1?-i[i.length-1]*_:0,j=i[0]*_,$=!0;b.push({left:T,right:j,isDash:$,zeroLength:i[0]===0});let V=i[0];for(let K=1;K<i.length;K++){$=!$;const te=i[K];T=V*_,V+=te,j=V*_,b.push({left:T,right:j,isDash:$,zeroLength:te===0})}return b}addRoundDash(i,p,_){const b=p/2;for(let T=-_;T<=_;T++){const j=this.width*(this.nextRow+_+T);let $=0,V=i[$];for(let K=0;K<this.width;K++){K/V.right>1&&(V=i[++$]);const te=Math.abs(K-V.left),re=Math.abs(K-V.right),ye=Math.min(te,re);let we;const Te=T/_*(b+1);if(V.isDash){const je=b-Math.abs(Te);we=Math.sqrt(ye*ye+je*je)}else we=b-Math.sqrt(ye*ye+Te*Te);this.data[j+K]=Math.max(0,Math.min(255,we+128))}}}addRegularDash(i){for(let $=i.length-1;$>=0;--$){const V=i[$],K=i[$+1];V.zeroLength?i.splice($,1):K&&K.isDash===V.isDash&&(K.left=V.left,i.splice($,1))}const p=i[0],_=i[i.length-1];p.isDash===_.isDash&&(p.left=_.left-this.width,_.right=p.right+this.width);const b=this.width*this.nextRow;let T=0,j=i[T];for(let $=0;$<this.width;$++){$/j.right>1&&(j=i[++T]);const V=Math.abs($-j.left),K=Math.abs($-j.right),te=Math.min(V,K);this.data[b+$]=Math.max(0,Math.min(255,(j.isDash?te:-te)+128))}}addDash(i,p){const _=p?7:0,b=2*_+1;if(this.nextRow+b>this.height)return u.w("LineAtlas out of space"),null;let T=0;for(let $=0;$<i.length;$++)T+=i[$];if(T!==0){const $=this.width/T,V=this.getDashRanges(i,this.width,$);p?this.addRoundDash(V,$,_):this.addRegularDash(V)}const j={y:(this.nextRow+_+.5)/this.height,height:2*_/this.height,width:T};return this.nextRow+=b,this.dirty=!0,j}bind(i){const p=i.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))}}const zt="maplibre_preloaded_worker_pool";class Tt{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Tt.workerCount;)this.workers.push(new Worker(u.a.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach((p=>{p.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[zt]}numActive(){return Object.keys(this.active).length}}const rr=Math.floor(C.hardwareConcurrency/2);let Xt,tr;function at(){return Xt||(Xt=new Tt),Xt}Tt.workerCount=u.C(globalThis)?Math.max(Math.min(rr,3),1):1;class Ht{constructor(i,p){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=p;const _=this.workerPool.acquire(p);for(let b=0;b<_.length;b++){const T=new u.F(_[b],p);T.name=`Worker ${b}`,this.actors.push(T)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,p){const _=[];for(const b of this.actors)_.push(b.sendAsync({type:i,data:p}));return Promise.all(_)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach((p=>{p.remove()})),this.actors=[],i&&this.workerPool.release(this.id)}registerMessageHandler(i,p){for(const _ of this.actors)_.registerMessageHandler(i,p)}}function Mt(){return tr||(tr=new Ht(at(),u.G),tr.registerMessageHandler("GR",((D,i,p)=>u.m(i,p)))),tr}function pt(D,i){const p=u.H();return u.J(p,p,[1,1,0]),u.K(p,p,[.5*D.width,.5*D.height,1]),u.L(p,p,D.calculatePosMatrix(i.toUnwrapped()))}function Pr(D,i,p,_,b,T){const j=(function(re,ye,we){if(re)for(const Te of re){const je=ye[Te];if(je&&je.source===we&&je.type==="fill-extrusion")return!0}else for(const Te in ye){const je=ye[Te];if(je.source===we&&je.type==="fill-extrusion")return!0}return!1})(b&&b.layers,i,D.id),$=T.maxPitchScaleFactor(),V=D.tilesIn(_,$,j);V.sort(Lt);const K=[];for(const re of V)K.push({wrappedTileID:re.tileID.wrapped().key,queryResults:re.tile.queryRenderedFeatures(i,p,D._state,re.queryGeometry,re.cameraQueryGeometry,re.scale,b,T,$,pt(D.transform,re.tileID))});const te=(function(re){const ye={},we={};for(const Te of re){const je=Te.queryResults,Fe=Te.wrappedTileID,$e=we[Fe]=we[Fe]||{};for(const We in je){const Le=je[We],et=$e[We]=$e[We]||{},rt=ye[We]=ye[We]||[];for(const gt of Le)et[gt.featureIndex]||(et[gt.featureIndex]=!0,rt.push(gt))}}return ye})(K);for(const re in te)te[re].forEach((ye=>{const we=ye.feature,Te=D.getFeatureState(we.layer["source-layer"],we.id);we.source=we.layer.source,we.layer["source-layer"]&&(we.sourceLayer=we.layer["source-layer"]),we.state=Te}));return te}function Lt(D,i){const p=D.tileID,_=i.tileID;return p.overscaledZ-_.overscaledZ||p.canonical.y-_.canonical.y||p.wrap-_.wrap||p.canonical.x-_.canonical.x}function Wt(D,i,p){return u._(this,void 0,void 0,(function*(){let _=D;if(D.url?_=(yield u.h(i.transformRequest(D.url,"Source"),p)).data:yield C.frameAsync(p),!_)return null;const b=u.M(u.e(_,D),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in _&&_.vector_layers&&(b.vectorLayerIds=_.vector_layers.map((T=>T.id))),b}))}class ke{constructor(i,p){i&&(p?this.setSouthWest(i).setNorthEast(p):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof u.N?new u.N(i.lng,i.lat):u.N.convert(i),this}setSouthWest(i){return this._sw=i instanceof u.N?new u.N(i.lng,i.lat):u.N.convert(i),this}extend(i){const p=this._sw,_=this._ne;let b,T;if(i instanceof u.N)b=i,T=i;else{if(!(i instanceof ke))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(ke.convert(i)):this.extend(u.N.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(u.N.convert(i)):this;if(b=i._sw,T=i._ne,!b||!T)return this}return p||_?(p.lng=Math.min(b.lng,p.lng),p.lat=Math.min(b.lat,p.lat),_.lng=Math.max(T.lng,_.lng),_.lat=Math.max(T.lat,_.lat)):(this._sw=new u.N(b.lng,b.lat),this._ne=new u.N(T.lng,T.lat)),this}getCenter(){return new u.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.N(this.getWest(),this.getNorth())}getSouthEast(){return new u.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:p,lat:_}=u.N.convert(i);let b=this._sw.lng<=p&&p<=this._ne.lng;return this._sw.lng>this._ne.lng&&(b=this._sw.lng>=p&&p>=this._ne.lng),this._sw.lat<=_&&_<=this._ne.lat&&b}static convert(i){return i instanceof ke?i:i&&new ke(i)}static fromLngLat(i,p=0){const _=360*p/40075017,b=_/Math.cos(Math.PI/180*i.lat);return new ke(new u.N(i.lng-b,i.lat-_),new u.N(i.lng+b,i.lat+_))}adjustAntiMeridian(){const i=new u.N(this._sw.lng,this._sw.lat),p=new u.N(this._ne.lng,this._ne.lat);return new ke(i,i.lng>p.lng?new u.N(p.lng+360,p.lat):p)}}class Xr{constructor(i,p,_){this.bounds=ke.convert(this.validateBounds(i)),this.minzoom=p||0,this.maxzoom=_||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const p=Math.pow(2,i.z),_=Math.floor(u.O(this.bounds.getWest())*p),b=Math.floor(u.Q(this.bounds.getNorth())*p),T=Math.ceil(u.O(this.bounds.getEast())*p),j=Math.ceil(u.Q(this.bounds.getSouth())*p);return i.x>=_&&i.x<T&&i.y>=b&&i.y<j}}class rn extends u.E{constructor(i,p,_,b){if(super(),this.id=i,this.dispatcher=_,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.M(p,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(b)}load(){return u._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const i=yield Wt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i&&(u.e(this,i),i.bounds&&(this.tileBounds=new Xr(i.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this.fire(new u.j(i))}}))}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.abort(),i(),this.load()}setTiles(i){return this.setSourceProperty((()=>{this._options.tiles=i})),this}setUrl(i){return this.setSourceProperty((()=>{this.url=i,this._options.url=i})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(i){return u._(this,void 0,void 0,(function*(){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),_={request:this.map._requestManager.transformRequest(p,"Tile"),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};_.request.collectResourceTiming=this._collectResourceTiming;let b="RT";if(i.actor&&i.state!=="expired"){if(i.state==="loading")return new Promise(((T,j)=>{i.reloadPromise={resolve:T,reject:j}}))}else i.actor=this.dispatcher.getActor(),b="LT";i.abortController=new AbortController;try{const T=yield i.actor.sendAsync({type:b,data:_},i.abortController);if(delete i.abortController,i.aborted)return;this._afterTileLoadWorkerResponse(i,T)}catch(T){if(delete i.abortController,i.aborted)return;if(T&&T.status!==404)throw T;this._afterTileLoadWorkerResponse(i,null)}}))}_afterTileLoadWorkerResponse(i,p){if(p&&p.resourceTiming&&(i.resourceTiming=p.resourceTiming),p&&this.map._refreshExpiredTiles&&i.setExpiryData(p),i.loadVectorData(p,this.map.painter),i.reloadPromise){const _=i.reloadPromise;i.reloadPromise=null,this.loadTile(i).then(_.resolve).catch(_.reject)}}abortTile(i){return u._(this,void 0,void 0,(function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.actor&&(yield i.actor.sendAsync({type:"AT",data:{uid:i.uid,type:this.type,source:this.id}}))}))}unloadTile(i){return u._(this,void 0,void 0,(function*(){i.unloadVectorData(),i.actor&&(yield i.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class vr extends u.E{constructor(i,p,_,b){super(),this.id=i,this.dispatcher=_,this.setEventedParent(b),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},p),u.e(this,u.M(p,["url","scheme","tileSize"]))}load(){return u._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const i=yield Wt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,i&&(u.e(this,i),i.bounds&&(this.tileBounds=new Xr(i.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this.fire(new u.j(i))}}))}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),i(),this.load()}setTiles(i){return this.setSourceProperty((()=>{this._options.tiles=i})),this}setUrl(i){return this.setSourceProperty((()=>{this.url=i,this._options.url=i})),this}serialize(){return u.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i){return u._(this,void 0,void 0,(function*(){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.abortController=new AbortController;try{const _=yield ne.getImage(this.map._requestManager.transformRequest(p,"Tile"),i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(_&&_.data){this.map._refreshExpiredTiles&&_.cacheControl&&_.expires&&i.setExpiryData({cacheControl:_.cacheControl,expires:_.expires});const b=this.map.painter.context,T=b.gl,j=_.data;i.texture=this.map.painter.getTileTexture(j.width),i.texture?i.texture.update(j,{useMipmap:!0}):(i.texture=new _e(b,j,T.RGBA,{useMipmap:!0}),i.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST)),i.state="loaded"}}catch(_){if(delete i.abortController,i.aborted)i.state="unloaded";else if(_)throw i.state="errored",_}}))}abortTile(i){return u._(this,void 0,void 0,(function*(){i.abortController&&(i.abortController.abort(),delete i.abortController)}))}unloadTile(i){return u._(this,void 0,void 0,(function*(){i.texture&&this.map.painter.saveTileTexture(i.texture)}))}hasTransition(){return!1}}class Wr extends vr{constructor(i,p,_,b){super(i,p,_,b),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},p),this.encoding=p.encoding||"mapbox",this.redFactor=p.redFactor,this.greenFactor=p.greenFactor,this.blueFactor=p.blueFactor,this.baseShift=p.baseShift}loadTile(i){return u._(this,void 0,void 0,(function*(){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),_=this.map._requestManager.transformRequest(p,"Tile");i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.abortController=new AbortController;try{const b=yield ne.getImage(_,i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(b&&b.data){const T=b.data;this.map._refreshExpiredTiles&&b.cacheControl&&b.expires&&i.setExpiryData({cacheControl:b.cacheControl,expires:b.expires});const j=u.b(T)&&u.U()?T:yield this.readImageNow(T),$={type:this.type,uid:i.uid,source:this.id,rawImageData:j,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!i.actor||i.state==="expired"){i.actor=this.dispatcher.getActor();const V=yield i.actor.sendAsync({type:"LDT",data:$});i.dem=V,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded"}}}catch(b){if(delete i.abortController,i.aborted)i.state="unloaded";else if(b)throw i.state="errored",b}}))}readImageNow(i){return u._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&u.V()){const p=i.width+2,_=i.height+2;try{return new u.R({width:p,height:_},yield u.W(i,-1,-1,p,_))}catch{}}return C.getImageData(i,1)}))}_getNeighboringTiles(i){const p=i.canonical,_=Math.pow(2,p.z),b=(p.x-1+_)%_,T=p.x===0?i.wrap-1:i.wrap,j=(p.x+1+_)%_,$=p.x+1===_?i.wrap+1:i.wrap,V={};return V[new u.S(i.overscaledZ,T,p.z,b,p.y).key]={backfilled:!1},V[new u.S(i.overscaledZ,$,p.z,j,p.y).key]={backfilled:!1},p.y>0&&(V[new u.S(i.overscaledZ,T,p.z,b,p.y-1).key]={backfilled:!1},V[new u.S(i.overscaledZ,i.wrap,p.z,p.x,p.y-1).key]={backfilled:!1},V[new u.S(i.overscaledZ,$,p.z,j,p.y-1).key]={backfilled:!1}),p.y+1<_&&(V[new u.S(i.overscaledZ,T,p.z,b,p.y+1).key]={backfilled:!1},V[new u.S(i.overscaledZ,i.wrap,p.z,p.x,p.y+1).key]={backfilled:!1},V[new u.S(i.overscaledZ,$,p.z,j,p.y+1).key]={backfilled:!1}),V}unloadTile(i){return u._(this,void 0,void 0,(function*(){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&(yield i.actor.sendAsync({type:"RDT",data:{type:this.type,uid:i.uid,source:this.id}}))}))}}class Hn extends u.E{constructor(i,p,_,b){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=_.getActor(),this.setEventedParent(b),this._data=p.data,this._options=u.e({},p),this._collectResourceTiming=p.collectResourceTiming,p.maxzoom!==void 0&&(this.maxzoom=p.maxzoom),p.type&&(this.type=p.type),p.attribution&&(this.attribution=p.attribution),this.promoteId=p.promoteId;const T=u.X/this.tileSize;p.clusterMaxZoom!==void 0&&this.maxzoom<=p.clusterMaxZoom&&u.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${p.clusterMaxZoom}".`),this.workerOptions=u.e({source:this.id,cluster:p.cluster||!1,geojsonVtOptions:{buffer:(p.buffer!==void 0?p.buffer:128)*T,tolerance:(p.tolerance!==void 0?p.tolerance:.375)*T,extent:u.X,maxZoom:this.maxzoom,lineMetrics:p.lineMetrics||!1,generateId:p.generateId||!1},superclusterOptions:{maxZoom:p.clusterMaxZoom!==void 0?p.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,p.clusterMinPoints||2),extent:u.X,radius:(p.clusterRadius||50)*T,log:!1,generateId:p.generateId||!1},clusterProperties:p.clusterProperties,filter:p.filter},p.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return u._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}getData(){return u._(this,void 0,void 0,(function*(){const i=u.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:i})}))}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:i,source:this.id}})}getClusterChildren(i){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:i,source:this.id}})}getClusterLeaves(i,p,_){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:i,limit:p,offset:_}})}_updateWorkerData(i){return u._(this,void 0,void 0,(function*(){const p=u.e({type:this.type},this.workerOptions);i?p.dataDiff=i:typeof this._data=="string"?(p.request=this.map._requestManager.transformRequest(C.resolveURL(this._data),"Source"),p.request.collectResourceTiming=this._collectResourceTiming):p.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.k("dataloading",{dataType:"source"}));try{const _=yield this.actor.sendAsync({type:"LD",data:p});if(this._pendingLoads--,this._removed||_.abandoned)return void this.fire(new u.k("dataabort",{dataType:"source"}));let b=null;_.resourceTiming&&_.resourceTiming[this.id]&&(b=_.resourceTiming[this.id].slice(0));const T={dataType:"source"};this._collectResourceTiming&&b&&b.length>0&&u.e(T,{resourceTiming:b}),this.fire(new u.k("data",Object.assign(Object.assign({},T),{sourceDataType:"metadata"}))),this.fire(new u.k("data",Object.assign(Object.assign({},T),{sourceDataType:"content"})))}catch(_){if(this._pendingLoads--,this._removed)return void this.fire(new u.k("dataabort",{dataType:"source"}));this.fire(new u.j(_))}}))}loaded(){return this._pendingLoads===0}loadTile(i){return u._(this,void 0,void 0,(function*(){const p=i.actor?"RT":"LT";i.actor=this.actor;const _={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.abortController=new AbortController;const b=yield this.actor.sendAsync({type:p,data:_},i.abortController);delete i.abortController,i.unloadVectorData(),i.aborted||i.loadVectorData(b,this.map.painter,p==="RT")}))}abortTile(i){return u._(this,void 0,void 0,(function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.aborted=!0}))}unloadTile(i){return u._(this,void 0,void 0,(function*(){i.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var fi=u.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ba extends u.E{constructor(i,p,_,b){super(),this.id=i,this.dispatcher=_,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(b),this.options=p}load(i){return u._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const p=yield ne.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,p&&p.data&&(this.image=p.data,i&&(this.coordinates=i),this._finishLoading())}catch(p){this._request=null,this._loaded=!0,this.fire(new u.j(p))}}))}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=i.url,this.load(i.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(i){this.coordinates=i;const p=i.map(u.Z.fromLngLat);this.tileID=(function(b){let T=1/0,j=1/0,$=-1/0,V=-1/0;for(const ye of b)T=Math.min(T,ye.x),j=Math.min(j,ye.y),$=Math.max($,ye.x),V=Math.max(V,ye.y);const K=Math.max($-T,V-j),te=Math.max(0,Math.floor(-Math.log(K)/Math.LN2)),re=Math.pow(2,te);return new u.a1(te,Math.floor((T+$)/2*re),Math.floor((j+V)/2*re))})(p),this.minzoom=this.maxzoom=this.tileID.z;const _=p.map((b=>this.tileID.getTilePoint(b)._round()));return this._boundsArray=new u.$,this._boundsArray.emplaceBack(_[0].x,_[0].y,0,0),this._boundsArray.emplaceBack(_[1].x,_[1].y,u.X,0),this._boundsArray.emplaceBack(_[3].x,_[3].y,0,u.X),this._boundsArray.emplaceBack(_[2].x,_[2].y,u.X,u.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,p=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,fi.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new _e(i,this.image,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let _=!1;for(const b in this.tiles){const T=this.tiles[b];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,_=!0)}_&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(i){return u._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={}):i.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Rn extends ba{constructor(i,p,_,b){super(i,p,_,b),this.roundZoom=!0,this.type="video",this.options=p}load(){return u._(this,void 0,void 0,(function*(){this._loaded=!1;const i=this.options;this.urls=[];for(const p of i.urls)this.urls.push(this.map._requestManager.transformRequest(p,"Source").url);try{const p=yield u.a3(this.urls);if(this._loaded=!0,!p)return;this.video=p,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(p){this.fire(new u.j(p))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const p=this.video.seekable;i<p.start(0)||i>p.end(0)?this.fire(new u.j(new u.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${p.start(0)} and ${p.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const i=this.map.painter.context,p=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,fi.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE),p.texSubImage2D(p.TEXTURE_2D,0,0,0,p.RGBA,p.UNSIGNED_BYTE,this.video)):(this.texture=new _e(i,this.video,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let _=!1;for(const b in this.tiles){const T=this.tiles[b];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,_=!0)}_&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ai extends ba{constructor(i,p,_,b){super(i,p,_,b),p.coordinates?Array.isArray(p.coordinates)&&p.coordinates.length===4&&!p.coordinates.some((T=>!Array.isArray(T)||T.length!==2||T.some((j=>typeof j!="number"))))||this.fire(new u.j(new u.a2(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.j(new u.a2(`sources.${i}`,null,'missing required property "coordinates"'))),p.animate&&typeof p.animate!="boolean"&&this.fire(new u.j(new u.a2(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),p.canvas?typeof p.canvas=="string"||p.canvas instanceof HTMLCanvasElement||this.fire(new u.j(new u.a2(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.j(new u.a2(`sources.${i}`,null,'missing required property "canvas"'))),this.options=p,this.animate=p.animate===void 0||p.animate}load(){return u._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const p=this.map.painter.context,_=p.gl;this.boundsBuffer||(this.boundsBuffer=p.createVertexBuffer(this._boundsArray,fi.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new _e(p,this.canvas,_.RGBA,{premultiply:!0});let b=!1;for(const T in this.tiles){const j=this.tiles[T];j.state!=="loaded"&&(j.state="loaded",j.texture=this.texture,b=!0)}b&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const pi={},oi=D=>{switch(D){case"geojson":return Hn;case"image":return ba;case"raster":return vr;case"raster-dem":return Wr;case"vector":return rn;case"video":return Rn;case"canvas":return ai}return pi[D]},Rt="RTLPluginLoaded";class Fi extends u.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Mt()}_syncState(i){return this.status=i,this.dispatcher.broadcast("SRPS",{pluginStatus:i,pluginURL:this.url}).catch((p=>{throw this.status="error",p}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(i){return u._(this,arguments,void 0,(function*(p,_=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=C.resolveURL(p),!this.url)throw new Error(`requested url ${p} is invalid`);if(this.status==="unavailable"){if(!_)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return u._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new u.k(Rt))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Fn=null;function Pi(){return Fn||(Fn=new Fi),Fn}class ca{constructor(i,p){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=u.a4(),this.uses=0,this.tileSize=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const p=i+this.timeAdded;p<this.fadeEndTime||(this.fadeEndTime=p)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,p,_){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=(function(b,T){const j={};if(!T)return j;for(const $ of b){const V=$.layerIds.map((K=>T.getLayer(K))).filter(Boolean);if(V.length!==0){$.layers=V,$.stateDependentLayerIds&&($.stateDependentLayers=$.stateDependentLayerIds.map((K=>V.filter((te=>te.id===K))[0])));for(const K of V)j[K.id]=$}}return j})(i.buckets,p.style),this.hasSymbolBuckets=!1;for(const b in this.buckets){const T=this.buckets[b];if(T instanceof u.a6){if(this.hasSymbolBuckets=!0,!_)break;T.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const b in this.buckets){const T=this.buckets[b];if(T instanceof u.a6&&T.hasRTLText){this.hasRTLText=!0,Pi().lazyLoad();break}}this.queryPadding=0;for(const b in this.buckets){const T=this.buckets[b];this.queryPadding=Math.max(this.queryPadding,p.style.getLayer(b).queryRadius(T))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new u.a5}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const _ in this.buckets){const b=this.buckets[_];b.uploadPending()&&b.upload(i)}const p=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new _e(i,this.imageAtlas.image,p.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new _e(i,this.glyphAtlasImage,p.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,p,_,b,T,j,$,V,K,te){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:b,cameraQueryGeometry:T,scale:j,tileSize:this.tileSize,pixelPosMatrix:te,transform:V,params:$,queryPadding:this.queryPadding*K},i,p,_):{}}querySourceFeatures(i,p){const _=this.latestFeatureIndex;if(!_||!_.rawTileData)return;const b=_.loadVTLayers(),T=p&&p.sourceLayer?p.sourceLayer:"",j=b._geojsonTileLayer||b[T];if(!j)return;const $=u.a7(p&&p.filter),{z:V,x:K,y:te}=this.tileID.canonical,re={z:V,x:K,y:te};for(let ye=0;ye<j.length;ye++){const we=j.feature(ye);if($.needGeometry){const Fe=u.a8(we,!0);if(!$.filter(new u.z(this.tileID.overscaledZ),Fe,this.tileID.canonical))continue}else if(!$.filter(new u.z(this.tileID.overscaledZ),we))continue;const Te=_.getId(we,T),je=new u.a9(we,V,K,te,Te);je.tile=re,i.push(je)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const p=this.expirationTime;if(i.cacheControl){const _=u.aa(i.cacheControl);_["max-age"]&&(this.expirationTime=Date.now()+1e3*_["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const _=Date.now();let b=!1;if(this.expirationTime>_)b=!1;else if(p)if(this.expirationTime<p)b=!0;else{const T=this.expirationTime-p;T?this.expirationTime=_+Math.max(T,3e4):b=!0}else b=!0;b?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,p){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const _=this.latestFeatureIndex.loadVTLayers();for(const b in this.buckets){if(!p.style.hasLayer(b))continue;const T=this.buckets[b],j=T.layers[0].sourceLayer||"_geojsonTileLayer",$=_[j],V=i[j];if(!$||!V||Object.keys(V).length===0)continue;T.update(V,$,this.imageAtlas&&this.imageAtlas.patternPositions||{});const K=p&&p.style&&p.style.getLayer(b);K&&(this.queryPadding=Math.max(this.queryPadding,K.queryRadius(T)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<C.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=C.now()+i}setDependencies(i,p){const _={};for(const b of p)_[b]=!0;this.dependencies[i]=_}hasDependency(i,p){for(const _ of i){const b=this.dependencies[_];if(b){for(const T of p)if(b[T])return!0}}return!1}}class nr{constructor(i,p){this.max=i,this.onRemove=p,this.reset()}reset(){for(const i in this.data)for(const p of this.data[i])p.timeout&&clearTimeout(p.timeout),this.onRemove(p.value);return this.data={},this.order=[],this}add(i,p,_){const b=i.wrapped().key;this.data[b]===void 0&&(this.data[b]=[]);const T={value:p,timeout:void 0};if(_!==void 0&&(T.timeout=setTimeout((()=>{this.remove(i,T)}),_)),this.data[b].push(T),this.order.push(b),this.order.length>this.max){const j=this._getAndRemoveByKey(this.order[0]);j&&this.onRemove(j)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const p=this.data[i].shift();return p.timeout&&clearTimeout(p.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),p.value}getByKey(i){const p=this.data[i];return p?p[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,p){if(!this.has(i))return this;const _=i.wrapped().key,b=p===void 0?0:this.data[_].indexOf(p),T=this.data[_][b];return this.data[_].splice(b,1),T.timeout&&clearTimeout(T.timeout),this.data[_].length===0&&delete this.data[_],this.onRemove(T.value),this.order.splice(this.order.indexOf(_),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this}filter(i){const p=[];for(const _ in this.data)for(const b of this.data[_])i(b.value)||p.push(b);for(const _ of p)this.remove(_.value.tileID,_)}}class kr{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,p,_){const b=String(p);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][b]=this.stateChanges[i][b]||{},u.e(this.stateChanges[i][b],_),this.deletedStates[i]===null){this.deletedStates[i]={};for(const T in this.state[i])T!==b&&(this.deletedStates[i][T]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][b]===null){this.deletedStates[i][b]={};for(const T in this.state[i][b])_[T]||(this.deletedStates[i][b][T]=null)}else for(const T in _)this.deletedStates[i]&&this.deletedStates[i][b]&&this.deletedStates[i][b][T]===null&&delete this.deletedStates[i][b][T]}removeFeatureState(i,p,_){if(this.deletedStates[i]===null)return;const b=String(p);if(this.deletedStates[i]=this.deletedStates[i]||{},_&&p!==void 0)this.deletedStates[i][b]!==null&&(this.deletedStates[i][b]=this.deletedStates[i][b]||{},this.deletedStates[i][b][_]=null);else if(p!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][b])for(_ in this.deletedStates[i][b]={},this.stateChanges[i][b])this.deletedStates[i][b][_]=null;else this.deletedStates[i][b]=null;else this.deletedStates[i]=null}getState(i,p){const _=String(p),b=u.e({},(this.state[i]||{})[_],(this.stateChanges[i]||{})[_]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const T=this.deletedStates[i][p];if(T===null)return{};for(const j in T)delete b[j]}return b}initializeTileState(i,p){i.setFeatureState(this.state,p)}coalesceChanges(i,p){const _={};for(const b in this.stateChanges){this.state[b]=this.state[b]||{};const T={};for(const j in this.stateChanges[b])this.state[b][j]||(this.state[b][j]={}),u.e(this.state[b][j],this.stateChanges[b][j]),T[j]=this.state[b][j];_[b]=T}for(const b in this.deletedStates){this.state[b]=this.state[b]||{};const T={};if(this.deletedStates[b]===null)for(const j in this.state[b])T[j]={},this.state[b][j]={};else for(const j in this.deletedStates[b]){if(this.deletedStates[b][j]===null)this.state[b][j]={};else for(const $ of Object.keys(this.deletedStates[b][j]))delete this.state[b][j][$];T[j]=this.state[b][j]}_[b]=_[b]||{},u.e(_[b],T)}if(this.stateChanges={},this.deletedStates={},Object.keys(_).length!==0)for(const b in i)i[b].setFeatureState(_,p)}}class jr extends u.E{constructor(i,p,_){super(),this.id=i,this.dispatcher=_,this.on("data",(b=>this._dataHandler(b))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((b,T,j,$)=>{const V=new(oi(T.type))(b,T,j,$);if(V.id!==b)throw new Error(`Expected Source id to be ${b} instead of ${V.id}`);return V})(i,p,_,this),this._tiles={},this._cache=new nr(0,(b=>this._unloadTile(b))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new kr,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const p=this._tiles[i];if(p.state!=="loaded"&&p.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,p,_){return u._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(i),this._tileLoaded(i,p,_)}catch(b){i.state="errored",b.status!==404?this._source.fire(new u.j(b,{tile:i})):this.update(this.transform,this.terrain)}}))}_unloadTile(i){this._source.unloadTile&&this._source.unloadTile(i)}_abortTile(i){this._source.abortTile&&this._source.abortTile(i),this._source.fire(new u.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const p in this._tiles){const _=this._tiles[p];_.upload(i),_.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((i=>i.tileID)).sort(Jn).map((i=>i.key))}getRenderableIds(i){const p=[];for(const _ in this._tiles)this._isIdRenderable(_,i)&&p.push(this._tiles[_]);return i?p.sort(((_,b)=>{const T=_.tileID,j=b.tileID,$=new u.P(T.canonical.x,T.canonical.y)._rotate(this.transform.angle),V=new u.P(j.canonical.x,j.canonical.y)._rotate(this.transform.angle);return T.overscaledZ-j.overscaledZ||V.y-$.y||V.x-$.x})).map((_=>_.tileID.key)):p.map((_=>_.tileID)).sort(Jn).map((_=>_.key))}hasRenderableParent(i){const p=this.findLoadedParent(i,0);return!!p&&this._isIdRenderable(p.tileID.key)}_isIdRenderable(i,p){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(p||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,p){return u._(this,void 0,void 0,(function*(){const _=this._tiles[i];_&&(_.state!=="loading"&&(_.state=p),yield this._loadTile(_,i,p))}))}_tileLoaded(i,p,_){i.timeAdded=C.now(),_==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(p,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new u.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const p=this.getRenderableIds();for(let b=0;b<p.length;b++){const T=p[b];if(i.neighboringTiles&&i.neighboringTiles[T]){const j=this.getTileByID(T);_(i,j),_(j,i)}}function _(b,T){b.needsHillshadePrepare=!0,b.needsTerrainPrepare=!0;let j=T.tileID.canonical.x-b.tileID.canonical.x;const $=T.tileID.canonical.y-b.tileID.canonical.y,V=Math.pow(2,b.tileID.canonical.z),K=T.tileID.key;j===0&&$===0||Math.abs($)>1||(Math.abs(j)>1&&(Math.abs(j+V)===1?j+=V:Math.abs(j-V)===1&&(j-=V)),T.dem&&b.dem&&(b.dem.backfillBorder(T.dem,j,$),b.neighboringTiles&&b.neighboringTiles[K]&&(b.neighboringTiles[K].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,p,_,b){for(const T in this._tiles){let j=this._tiles[T];if(b[T]||!j.hasData()||j.tileID.overscaledZ<=p||j.tileID.overscaledZ>_)continue;let $=j.tileID;for(;j&&j.tileID.overscaledZ>p+1;){const K=j.tileID.scaledTo(j.tileID.overscaledZ-1);j=this._tiles[K.key],j&&j.hasData()&&($=K)}let V=$;for(;V.overscaledZ>p;)if(V=V.scaledTo(V.overscaledZ-1),i[V.key]){b[$.key]=$;break}}}findLoadedParent(i,p){if(i.key in this._loadedParentTiles){const _=this._loadedParentTiles[i.key];return _&&_.tileID.overscaledZ>=p?_:null}for(let _=i.overscaledZ-1;_>=p;_--){const b=i.scaledTo(_),T=this._getLoadedTile(b);if(T)return T}}findLoadedSibling(i){return this._getLoadedTile(i)}_getLoadedTile(i){const p=this._tiles[i.key];return p&&p.hasData()?p:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const p=Math.ceil(i.width/this._source.tileSize)+1,_=Math.ceil(i.height/this._source.tileSize)+1,b=Math.floor(p*_*(this._maxTileCacheZoomLevels===null?u.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),T=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,b):b;this._cache.setMaxSize(T)}handleWrapJump(i){const p=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,p){const _={};for(const b in this._tiles){const T=this._tiles[b];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+p),_[T.tileID.key]=T}this._tiles=_;for(const b in this._timers)clearTimeout(this._timers[b]),delete this._timers[b];for(const b in this._tiles)this._setTileReloadTimer(b,this._tiles[b])}}_updateCoveredAndRetainedTiles(i,p,_,b,T,j){const $={},V={},K=Object.keys(i),te=C.now();for(const re of K){const ye=i[re],we=this._tiles[re];if(!we||we.fadeEndTime!==0&&we.fadeEndTime<=te)continue;const Te=this.findLoadedParent(ye,p),je=this.findLoadedSibling(ye),Fe=Te||je||null;Fe&&(this._addTile(Fe.tileID),$[Fe.tileID.key]=Fe.tileID),V[re]=ye}this._retainLoadedChildren(V,b,_,i);for(const re in $)i[re]||(this._coveredTiles[re]=!0,i[re]=$[re]);if(j){const re={},ye={};for(const we of T)this._tiles[we.key].hasData()?re[we.key]=we:ye[we.key]=we;for(const we in ye){const Te=ye[we].children(this._source.maxzoom);this._tiles[Te[0].key]&&this._tiles[Te[1].key]&&this._tiles[Te[2].key]&&this._tiles[Te[3].key]&&(re[Te[0].key]=i[Te[0].key]=Te[0],re[Te[1].key]=i[Te[1].key]=Te[1],re[Te[2].key]=i[Te[2].key]=Te[2],re[Te[3].key]=i[Te[3].key]=Te[3],delete ye[we])}for(const we in ye){const Te=ye[we],je=this.findLoadedParent(Te,this._source.minzoom),Fe=this.findLoadedSibling(Te),$e=je||Fe||null;if($e){re[$e.tileID.key]=i[$e.tileID.key]=$e.tileID;for(const We in re)re[We].isChildOf($e.tileID)&&delete re[We]}}for(const we in this._tiles)re[we]||(this._coveredTiles[we]=!0)}}update(i,p){if(!this._sourceLoaded||this._paused)return;let _;this.transform=i,this.terrain=p,this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?_=i.getVisibleUnwrappedCoordinates(this._source.tileID).map((te=>new u.S(te.canonical.z,te.wrap,te.canonical.z,te.canonical.x,te.canonical.y))):(_=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:p}),this._source.hasTile&&(_=_.filter((te=>this._source.hasTile(te))))):_=[];const b=i.coveringZoomLevel(this._source),T=Math.max(b-jr.maxOverzooming,this._source.minzoom),j=Math.max(b+jr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const te={};for(const re of _)if(re.canonical.z>this._source.minzoom){const ye=re.scaledTo(re.canonical.z-1);te[ye.key]=ye;const we=re.scaledTo(Math.max(this._source.minzoom,Math.min(re.canonical.z,5)));te[we.key]=we}_=_.concat(Object.values(te))}const $=_.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,$&&this.fire(new u.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const V=this._updateRetainedTiles(_,b);Xa(this._source.type)&&this._updateCoveredAndRetainedTiles(V,T,j,b,_,p);for(const te in V)this._tiles[te].clearFadeHold();const K=u.ab(this._tiles,V);for(const te of K){const re=this._tiles[te];re.hasSymbolBuckets&&!re.holdingForFade()?re.setHoldDuration(this.map._fadeDuration):re.hasSymbolBuckets&&!re.symbolFadeFinished()||this._removeTile(te)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,p){var _;const b={},T={},j=Math.max(p-jr.maxOverzooming,this._source.minzoom),$=Math.max(p+jr.maxUnderzooming,this._source.minzoom),V={};for(const K of i){const te=this._addTile(K);b[K.key]=K,te.hasData()||p<this._source.maxzoom&&(V[K.key]=K)}this._retainLoadedChildren(V,p,$,b);for(const K of i){let te=this._tiles[K.key];if(te.hasData())continue;if(p+1>this._source.maxzoom){const ye=K.children(this._source.maxzoom)[0],we=this.getTile(ye);if(we&&we.hasData()){b[ye.key]=ye;continue}}else{const ye=K.children(this._source.maxzoom);if(b[ye[0].key]&&b[ye[1].key]&&b[ye[2].key]&&b[ye[3].key])continue}let re=te.wasRequested();for(let ye=K.overscaledZ-1;ye>=j;--ye){const we=K.scaledTo(ye);if(T[we.key])break;if(T[we.key]=!0,te=this.getTile(we),!te&&re&&(te=this._addTile(we)),te){const Te=te.hasData();if((Te||!(!((_=this.map)===null||_===void 0)&&_.cancelPendingTileRequestsWhileZooming)||re)&&(b[we.key]=we),re=te.wasRequested(),Te)break}}}return b}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const p=[];let _,b=this._tiles[i].tileID;for(;b.overscaledZ>0;){if(b.key in this._loadedParentTiles){_=this._loadedParentTiles[b.key];break}p.push(b.key);const T=b.scaledTo(b.overscaledZ-1);if(_=this._getLoadedTile(T),_)break;b=T}for(const T of p)this._loadedParentTiles[T]=_}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const i in this._tiles){const p=this._tiles[i].tileID,_=this._getLoadedTile(p);this._loadedSiblingTiles[p.key]=_}}_addTile(i){let p=this._tiles[i.key];if(p)return p;p=this._cache.getAndRemove(i),p&&(this._setTileReloadTimer(i.key,p),p.tileID=i,this._state.initializeTileState(p,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,p)));const _=p;return p||(p=new ca(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(p,i.key,p.state)),p.uses++,this._tiles[i.key]=p,_||this._source.fire(new u.k("dataloading",{tile:p,coord:p.tileID,dataType:"source"})),p}_setTileReloadTimer(i,p){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const _=p.getExpiryTimeout();_&&(this._timers[i]=setTimeout((()=>{this._reloadTile(i,"expired"),delete this._timers[i]}),_))}_removeTile(i){const p=this._tiles[i];p&&(p.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),p.uses>0||(p.hasData()&&p.state!=="reloading"?this._cache.add(p.tileID,p,p.getExpiryTimeout()):(p.aborted=!0,this._abortTile(p),this._unloadTile(p))))}_dataHandler(i){const p=i.sourceDataType;i.dataType==="source"&&p==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&i.dataType==="source"&&p==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,p,_){const b=[],T=this.transform;if(!T)return b;const j=_?T.getCameraQueryGeometry(i):i,$=i.map((Te=>T.pointCoordinate(Te,this.terrain))),V=j.map((Te=>T.pointCoordinate(Te,this.terrain))),K=this.getIds();let te=1/0,re=1/0,ye=-1/0,we=-1/0;for(const Te of V)te=Math.min(te,Te.x),re=Math.min(re,Te.y),ye=Math.max(ye,Te.x),we=Math.max(we,Te.y);for(let Te=0;Te<K.length;Te++){const je=this._tiles[K[Te]];if(je.holdingForFade())continue;const Fe=je.tileID,$e=Math.pow(2,T.zoom-je.tileID.overscaledZ),We=p*je.queryPadding*u.X/je.tileSize/$e,Le=[Fe.getTilePoint(new u.Z(te,re)),Fe.getTilePoint(new u.Z(ye,we))];if(Le[0].x-We<u.X&&Le[0].y-We<u.X&&Le[1].x+We>=0&&Le[1].y+We>=0){const et=$.map((gt=>Fe.getTilePoint(gt))),rt=V.map((gt=>Fe.getTilePoint(gt)));b.push({tile:je,tileID:Fe,queryGeometry:et,cameraQueryGeometry:rt,scale:$e})}}return b}getVisibleCoordinates(i){const p=this.getRenderableIds(i).map((_=>this._tiles[_].tileID));for(const _ of p)_.posMatrix=this.transform.calculatePosMatrix(_.toUnwrapped());return p}hasTransition(){if(this._source.hasTransition())return!0;if(Xa(this._source.type)){const i=C.now();for(const p in this._tiles)if(this._tiles[p].fadeEndTime>=i)return!0}return!1}setFeatureState(i,p,_){this._state.updateState(i=i||"_geojsonTileLayer",p,_)}removeFeatureState(i,p,_){this._state.removeFeatureState(i=i||"_geojsonTileLayer",p,_)}getFeatureState(i,p){return this._state.getState(i=i||"_geojsonTileLayer",p)}setDependencies(i,p,_){const b=this._tiles[i];b&&b.setDependencies(p,_)}reloadTilesForDependencies(i,p){for(const _ in this._tiles)this._tiles[_].hasDependency(i,p)&&this._reloadTile(_,"reloading");this._cache.filter((_=>!_.hasDependency(i,p)))}}function Jn(D,i){const p=Math.abs(2*D.wrap)-+(D.wrap<0),_=Math.abs(2*i.wrap)-+(i.wrap<0);return D.overscaledZ-i.overscaledZ||_-p||i.canonical.y-D.canonical.y||i.canonical.x-D.canonical.x}function Xa(D){return D==="raster"||D==="image"||D==="video"}jr.maxOverzooming=10,jr.maxUnderzooming=3;class nn{constructor(i,p){this.reset(i,p)}reset(i,p){this.points=i||[],this._distances=[0];for(let _=1;_<this.points.length;_++)this._distances[_]=this._distances[_-1]+this.points[_].dist(this.points[_-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=u.ac(i,0,1);let p=1,_=this._distances[p];const b=i*this.paddedLength+this.padding;for(;_<b&&p<this._distances.length;)_=this._distances[++p];const T=p-1,j=this._distances[T],$=_-j,V=$>0?(b-j)/$:0;return this.points[T].mult(1-V).add(this.points[p].mult(V))}}function Go(D,i){let p=!0;return D==="always"||D!=="never"&&i!=="never"||(p=!1),p}class Uo{constructor(i,p,_){const b=this.boxCells=[],T=this.circleCells=[];this.xCellCount=Math.ceil(i/_),this.yCellCount=Math.ceil(p/_);for(let j=0;j<this.xCellCount*this.yCellCount;j++)b.push([]),T.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=p,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,p,_,b,T){this._forEachCell(p,_,b,T,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(p),this.bboxes.push(_),this.bboxes.push(b),this.bboxes.push(T)}insertCircle(i,p,_,b){this._forEachCell(p-b,_-b,p+b,_+b,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(p),this.circles.push(_),this.circles.push(b)}_insertBoxCell(i,p,_,b,T,j){this.boxCells[T].push(j)}_insertCircleCell(i,p,_,b,T,j){this.circleCells[T].push(j)}_query(i,p,_,b,T,j,$){if(_<0||i>this.width||b<0||p>this.height)return[];const V=[];if(i<=0&&p<=0&&this.width<=_&&this.height<=b){if(T)return[{key:null,x1:i,y1:p,x2:_,y2:b}];for(let K=0;K<this.boxKeys.length;K++)V.push({key:this.boxKeys[K],x1:this.bboxes[4*K],y1:this.bboxes[4*K+1],x2:this.bboxes[4*K+2],y2:this.bboxes[4*K+3]});for(let K=0;K<this.circleKeys.length;K++){const te=this.circles[3*K],re=this.circles[3*K+1],ye=this.circles[3*K+2];V.push({key:this.circleKeys[K],x1:te-ye,y1:re-ye,x2:te+ye,y2:re+ye})}}else this._forEachCell(i,p,_,b,this._queryCell,V,{hitTest:T,overlapMode:j,seenUids:{box:{},circle:{}}},$);return V}query(i,p,_,b){return this._query(i,p,_,b,!1,null)}hitTest(i,p,_,b,T,j){return this._query(i,p,_,b,!0,T,j).length>0}hitTestCircle(i,p,_,b,T){const j=i-_,$=i+_,V=p-_,K=p+_;if($<0||j>this.width||K<0||V>this.height)return!1;const te=[];return this._forEachCell(j,V,$,K,this._queryCellCircle,te,{hitTest:!0,overlapMode:b,circle:{x:i,y:p,radius:_},seenUids:{box:{},circle:{}}},T),te.length>0}_queryCell(i,p,_,b,T,j,$,V){const{seenUids:K,hitTest:te,overlapMode:re}=$,ye=this.boxCells[T];if(ye!==null){const Te=this.bboxes;for(const je of ye)if(!K.box[je]){K.box[je]=!0;const Fe=4*je,$e=this.boxKeys[je];if(i<=Te[Fe+2]&&p<=Te[Fe+3]&&_>=Te[Fe+0]&&b>=Te[Fe+1]&&(!V||V($e))&&(!te||!Go(re,$e.overlapMode))&&(j.push({key:$e,x1:Te[Fe],y1:Te[Fe+1],x2:Te[Fe+2],y2:Te[Fe+3]}),te))return!0}}const we=this.circleCells[T];if(we!==null){const Te=this.circles;for(const je of we)if(!K.circle[je]){K.circle[je]=!0;const Fe=3*je,$e=this.circleKeys[je];if(this._circleAndRectCollide(Te[Fe],Te[Fe+1],Te[Fe+2],i,p,_,b)&&(!V||V($e))&&(!te||!Go(re,$e.overlapMode))){const We=Te[Fe],Le=Te[Fe+1],et=Te[Fe+2];if(j.push({key:$e,x1:We-et,y1:Le-et,x2:We+et,y2:Le+et}),te)return!0}}}return!1}_queryCellCircle(i,p,_,b,T,j,$,V){const{circle:K,seenUids:te,overlapMode:re}=$,ye=this.boxCells[T];if(ye!==null){const Te=this.bboxes;for(const je of ye)if(!te.box[je]){te.box[je]=!0;const Fe=4*je,$e=this.boxKeys[je];if(this._circleAndRectCollide(K.x,K.y,K.radius,Te[Fe+0],Te[Fe+1],Te[Fe+2],Te[Fe+3])&&(!V||V($e))&&!Go(re,$e.overlapMode))return j.push(!0),!0}}const we=this.circleCells[T];if(we!==null){const Te=this.circles;for(const je of we)if(!te.circle[je]){te.circle[je]=!0;const Fe=3*je,$e=this.circleKeys[je];if(this._circlesCollide(Te[Fe],Te[Fe+1],Te[Fe+2],K.x,K.y,K.radius)&&(!V||V($e))&&!Go(re,$e.overlapMode))return j.push(!0),!0}}}_forEachCell(i,p,_,b,T,j,$,V){const K=this._convertToXCellCoord(i),te=this._convertToYCellCoord(p),re=this._convertToXCellCoord(_),ye=this._convertToYCellCoord(b);for(let we=K;we<=re;we++)for(let Te=te;Te<=ye;Te++)if(T.call(this,i,p,_,b,this.xCellCount*Te+we,j,$,V))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,p,_,b,T,j){const $=b-i,V=T-p,K=_+j;return K*K>$*$+V*V}_circleAndRectCollide(i,p,_,b,T,j,$){const V=(j-b)/2,K=Math.abs(i-(b+V));if(K>V+_)return!1;const te=($-T)/2,re=Math.abs(p-(T+te));if(re>te+_)return!1;if(K<=V||re<=te)return!0;const ye=K-V,we=re-te;return ye*ye+we*we<=_*_}}function Io(D,i,p,_,b){const T=u.H();return i?(u.K(T,T,[1/b,1/b,1]),p||u.ad(T,T,_.angle)):u.L(T,_.labelPlaneMatrix,D),T}function wo(D,i,p,_,b){if(i){const T=u.ae(D);return u.K(T,T,[b,b,1]),p||u.ad(T,T,-_.angle),T}return _.glCoordMatrix}function Ne(D,i,p,_){let b;_?(b=[D,i,_(D,i),1],u.af(b,b,p)):(b=[D,i,0,1],wn(b,b,p));const T=b[3];return{point:new u.P(b[0]/T,b[1]/T),signedDistanceFromCamera:T,isOccluded:!1}}function se(D,i){return .5+D/i*.5}function le(D,i){return D.x>=-i[0]&&D.x<=i[0]&&D.y>=-i[1]&&D.y<=i[1]}function Ee(D,i,p,_,b,T,j,$,V,K,te,re,ye,we,Te){const je=_?D.textSizeData:D.iconSizeData,Fe=u.ag(je,p.transform.zoom),$e=[256/p.width*2+1,256/p.height*2+1],We=_?D.text.dynamicLayoutVertexArray:D.icon.dynamicLayoutVertexArray;We.clear();const Le=D.lineVertexArray,et=_?D.text.placedSymbolArray:D.icon.placedSymbolArray,rt=p.transform.width/p.transform.height;let gt=!1;for(let Bt=0;Bt<et.length;Bt++){const ir=et.get(Bt);if(ir.hidden||ir.writingMode===u.ah.vertical&&!gt){$r(ir.numGlyphs,We);continue}gt=!1;const ur=Ne(ir.anchorX,ir.anchorY,i,Te);if(!le(ur.point,$e)){$r(ir.numGlyphs,We);continue}const mr=se(p.transform.cameraToCenterDistance,ur.signedDistanceFromCamera),hr=u.ai(je,Fe,ir),or=j?hr/mr:hr*mr,xr={getElevation:Te,labelPlaneMatrix:b,lineVertexArray:Le,pitchWithMap:j,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:K,tileAnchorPoint:new u.P(ir.anchorX,ir.anchorY),unwrappedTileID:te,width:re,height:ye,translation:we},Jr=tt(xr,ir,or,!1,$,i,T,D.glyphOffsetArray,We,rt,V);gt=Jr.useVertical,(Jr.notEnoughRoom||gt||Jr.needsFlipping&&tt(xr,ir,or,!0,$,i,T,D.glyphOffsetArray,We,rt,V).notEnoughRoom)&&$r(ir.numGlyphs,We)}_?D.text.dynamicLayoutVertexBuffer.updateData(We):D.icon.dynamicLayoutVertexBuffer.updateData(We)}function Ie(D,i,p,_,b,T,j,$){const V=T.glyphStartIndex+T.numGlyphs,K=T.lineStartIndex,te=T.lineStartIndex+T.lineLength,re=i.getoffsetX(T.glyphStartIndex),ye=i.getoffsetX(V-1),we=lr(D*re,p,_,b,T.segment,K,te,$,j);if(!we)return null;const Te=lr(D*ye,p,_,b,T.segment,K,te,$,j);return Te?$.projectionCache.anyProjectionOccluded?null:{first:we,last:Te}:null}function Ye(D,i,p,_){return D===u.ah.horizontal&&Math.abs(p.y-i.y)>Math.abs(p.x-i.x)*_?{useVertical:!0}:(D===u.ah.vertical?i.y<p.y:i.x>p.x)?{needsFlipping:!0}:null}function tt(D,i,p,_,b,T,j,$,V,K,te){const re=p/24,ye=i.lineOffsetX*re,we=i.lineOffsetY*re;let Te;if(i.numGlyphs>1){const je=i.glyphStartIndex+i.numGlyphs,Fe=i.lineStartIndex,$e=i.lineStartIndex+i.lineLength,We=Ie(re,$,ye,we,_,i,te,D);if(!We)return{notEnoughRoom:!0};const Le=Ne(We.first.point.x,We.first.point.y,j,D.getElevation).point,et=Ne(We.last.point.x,We.last.point.y,j,D.getElevation).point;if(b&&!_){const rt=Ye(i.writingMode,Le,et,K);if(rt)return rt}Te=[We.first];for(let rt=i.glyphStartIndex+1;rt<je-1;rt++)Te.push(lr(re*$.getoffsetX(rt),ye,we,_,i.segment,Fe,$e,D,te));Te.push(We.last)}else{if(b&&!_){const Fe=Ne(D.tileAnchorPoint.x,D.tileAnchorPoint.y,T,D.getElevation).point,$e=i.lineStartIndex+i.segment+1,We=new u.P(D.lineVertexArray.getx($e),D.lineVertexArray.gety($e)),Le=Ne(We.x,We.y,T,D.getElevation),et=Le.signedDistanceFromCamera>0?Le.point:(function(gt,Bt,ir,ur,mr,hr){return ut(gt,Bt,ir,1,mr,hr)})(D.tileAnchorPoint,We,Fe,0,T,D),rt=Ye(i.writingMode,Fe,et,K);if(rt)return rt}const je=lr(re*$.getoffsetX(i.glyphStartIndex),ye,we,_,i.segment,i.lineStartIndex,i.lineStartIndex+i.lineLength,D,te);if(!je||D.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Te=[je]}for(const je of Te)u.aj(V,je.point,je.angle);return{}}function ut(D,i,p,_,b,T){const j=D.add(D.sub(i)._unit()),$=b!==void 0?Ne(j.x,j.y,b,T.getElevation).point:At(j.x,j.y,T).point,V=p.sub($);return p.add(V._mult(_/V.mag()))}function Ue(D,i,p){const _=i.projectionCache;if(_.projections[D])return _.projections[D];const b=new u.P(i.lineVertexArray.getx(D),i.lineVertexArray.gety(D)),T=At(b.x,b.y,i);if(T.signedDistanceFromCamera>0)return _.projections[D]=T.point,_.anyProjectionOccluded=_.anyProjectionOccluded||T.isOccluded,T.point;const j=D-p.direction;return(function($,V,K,te,re){return ut($,V,K,te,void 0,re)})(p.distanceFromAnchor===0?i.tileAnchorPoint:new u.P(i.lineVertexArray.getx(j),i.lineVertexArray.gety(j)),b,p.previousVertex,p.absOffsetX-p.distanceFromAnchor+1,i)}function At(D,i,p){const _=D+p.translation[0],b=i+p.translation[1];let T;return!p.pitchWithMap&&p.projection.useSpecialProjectionForSymbols?(T=p.projection.projectTileCoordinates(_,b,p.unwrappedTileID,p.getElevation),T.point.x=(.5*T.point.x+.5)*p.width,T.point.y=(.5*-T.point.y+.5)*p.height):(T=Ne(_,b,p.labelPlaneMatrix,p.getElevation),T.isOccluded=!1),T}function Vt(D,i,p){return D._unit()._perp()._mult(i*p)}function _t(D,i,p,_,b,T,j,$,V){if($.projectionCache.offsets[D])return $.projectionCache.offsets[D];const K=p.add(i);if(D+V.direction<_||D+V.direction>=b)return $.projectionCache.offsets[D]=K,K;const te=Ue(D+V.direction,$,V),re=Vt(te.sub(p),j,V.direction),ye=p.add(re),we=te.add(re);return $.projectionCache.offsets[D]=u.ak(T,K,ye,we)||K,$.projectionCache.offsets[D]}function lr(D,i,p,_,b,T,j,$,V){const K=_?D-i:D+i;let te=K>0?1:-1,re=0;_&&(te*=-1,re=Math.PI),te<0&&(re+=Math.PI);let ye,we=te>0?T+b:T+b+1;$.projectionCache.cachedAnchorPoint?ye=$.projectionCache.cachedAnchorPoint:(ye=At($.tileAnchorPoint.x,$.tileAnchorPoint.y,$).point,$.projectionCache.cachedAnchorPoint=ye);let Te,je,Fe=ye,$e=ye,We=0,Le=0;const et=Math.abs(K),rt=[];let gt;for(;We+Le<=et;){if(we+=te,we<T||we>=j)return null;We+=Le,$e=Fe,je=Te;const ur={absOffsetX:et,direction:te,distanceFromAnchor:We,previousVertex:$e};if(Fe=Ue(we,$,ur),p===0)rt.push($e),gt=Fe.sub($e);else{let mr;const hr=Fe.sub($e);mr=hr.mag()===0?Vt(Ue(we+te,$,ur).sub(Fe),p,te):Vt(hr,p,te),je||(je=$e.add(mr)),Te=_t(we,mr,Fe,T,j,je,p,$,ur),rt.push(je),gt=Te.sub(je)}Le=gt.mag()}const Bt=gt._mult((et-We)/Le)._add(je||$e),ir=re+Math.atan2(Fe.y-$e.y,Fe.x-$e.x);return rt.push(Bt),{point:Bt,angle:V?ir:0,path:rt}}const Lr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function $r(D,i){for(let p=0;p<D;p++){const _=i.length;i.resize(_+4),i.float32.set(Lr,3*_)}}function wn(D,i,p){const _=i[0],b=i[1];return D[0]=p[0]*_+p[4]*b+p[12],D[1]=p[1]*_+p[5]*b+p[13],D[3]=p[3]*_+p[7]*b+p[15],D}const Ir=100;class cn{constructor(i,p,_=new Uo(i.width+200,i.height+200,25),b=new Uo(i.width+200,i.height+200,25)){this.transform=i,this.mapProjection=p,this.grid=_,this.ignoredGrid=b,this.pitchFactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Ir,this.screenBottomBoundary=i.height+Ir,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,p,_,b,T,j,$,V,K,te,re){const ye=i.anchorPointX+V[0],we=i.anchorPointY+V[1],Te=this.projectAndGetPerspectiveRatio(b,ye,we,T,te),je=_*Te.perspectiveRatio;let Fe;if(j||$)Fe=this._projectCollisionBox(i,je,b,T,j,$,V,Te,te,re);else{const rt=Te.point.x+(re?re.x*je:0),gt=Te.point.y+(re?re.y*je:0);Fe={allPointsOccluded:!1,box:[rt+i.x1*je,gt+i.y1*je,rt+i.x2*je,gt+i.y2*je]}}const[$e,We,Le,et]=Fe.box;return this.mapProjection.useSpecialProjectionForSymbols&&(j?Fe.allPointsOccluded:this.mapProjection.isOccluded(ye,we,T))||Te.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid($e,We,Le,et)||p!=="always"&&this.grid.hitTest($e,We,Le,et,p,K)?{box:[$e,We,Le,et],placeable:!1,offscreen:!1}:{box:[$e,We,Le,et],placeable:!0,offscreen:this.isOffscreen($e,We,Le,et)}}placeCollisionCircles(i,p,_,b,T,j,$,V,K,te,re,ye,we,Te,je,Fe){const $e=[],We=new u.P(p.anchorX,p.anchorY),Le=this.getPerspectiveRatio(j,We.x,We.y,$,Fe),et=(re?T/Le:T*Le)/u.ap,rt={getElevation:Fe,labelPlaneMatrix:V,lineVertexArray:_,pitchWithMap:re,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:We,unwrappedTileID:$,width:this.transform.width,height:this.transform.height,translation:je},gt=Ie(et,b,p.lineOffsetX*et,p.lineOffsetY*et,!1,p,!1,rt);let Bt=!1,ir=!1,ur=!0;if(gt){const mr=.5*we*Le+Te,hr=new u.P(-100,-100),or=new u.P(this.screenRightBoundary,this.screenBottomBoundary),xr=new nn,Jr=gt.first,fr=gt.last;let ar=[];for(let an=Jr.path.length-1;an>=1;an--)ar.push(Jr.path[an]);for(let an=1;an<fr.path.length;an++)ar.push(fr.path[an]);const Hr=2.5*mr;if(K){const an=this.projectPathToScreenSpace(ar,rt,K);ar=an.some((Ln=>Ln.signedDistanceFromCamera<=0))?[]:an.map((Ln=>Ln.point))}let vi=[];if(ar.length>0){const an=ar[0].clone(),Ln=ar[0].clone();for(let ni=1;ni<ar.length;ni++)an.x=Math.min(an.x,ar[ni].x),an.y=Math.min(an.y,ar[ni].y),Ln.x=Math.max(Ln.x,ar[ni].x),Ln.y=Math.max(Ln.y,ar[ni].y);vi=an.x>=hr.x&&Ln.x<=or.x&&an.y>=hr.y&&Ln.y<=or.y?[ar]:Ln.x<hr.x||an.x>or.x||Ln.y<hr.y||an.y>or.y?[]:u.al([ar],hr.x,hr.y,or.x,or.y)}for(const an of vi){xr.reset(an,.25*mr);let Ln=0;Ln=xr.length<=.5*mr?1:Math.ceil(xr.paddedLength/Hr)+1;for(let ni=0;ni<Ln;ni++){const ia=ni/Math.max(Ln-1,1),zs=xr.lerp(ia),In=zs.x+Ir,ho=zs.y+Ir;$e.push(In,ho,mr,0);const Vi=In-mr,qi=ho-mr,Da=In+mr,fs=ho+mr;if(ur=ur&&this.isOffscreen(Vi,qi,Da,fs),ir=ir||this.isInsideGrid(Vi,qi,Da,fs),i!=="always"&&this.grid.hitTestCircle(In,ho,mr,i,ye)&&(Bt=!0,!te))return{circles:[],offscreen:!1,collisionDetected:Bt}}}}return{circles:!te&&Bt||!ir||Le<this.perspectiveRatioCutoff?[]:$e,offscreen:ur,collisionDetected:Bt}}projectPathToScreenSpace(i,p,_){return i.map((b=>Ne(b.x,b.y,_,p.getElevation)))}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const p=[];let _=1/0,b=1/0,T=-1/0,j=-1/0;for(const te of i){const re=new u.P(te.x+Ir,te.y+Ir);_=Math.min(_,re.x),b=Math.min(b,re.y),T=Math.max(T,re.x),j=Math.max(j,re.y),p.push(re)}const $=this.grid.query(_,b,T,j).concat(this.ignoredGrid.query(_,b,T,j)),V={},K={};for(const te of $){const re=te.key;if(V[re.bucketInstanceId]===void 0&&(V[re.bucketInstanceId]={}),V[re.bucketInstanceId][re.featureIndex])continue;const ye=[new u.P(te.x1,te.y1),new u.P(te.x2,te.y1),new u.P(te.x2,te.y2),new u.P(te.x1,te.y2)];u.am(p,ye)&&(V[re.bucketInstanceId][re.featureIndex]=!0,K[re.bucketInstanceId]===void 0&&(K[re.bucketInstanceId]=[]),K[re.bucketInstanceId].push(re.featureIndex))}return K}insertCollisionBox(i,p,_,b,T,j){(_?this.ignoredGrid:this.grid).insert({bucketInstanceId:b,featureIndex:T,collisionGroupID:j,overlapMode:p},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,p,_,b,T,j){const $=_?this.ignoredGrid:this.grid,V={bucketInstanceId:b,featureIndex:T,collisionGroupID:j,overlapMode:p};for(let K=0;K<i.length;K+=4)$.insertCircle(V,i[K],i[K+1],i[K+2])}projectAndGetPerspectiveRatio(i,p,_,b,T){let j;T?(j=[p,_,T(p,_),1],u.af(j,j,i)):(j=[p,_,0,1],wn(j,j,i));const $=j[3];return{point:new u.P((j[0]/$+1)/2*this.transform.width+Ir,(-j[1]/$+1)/2*this.transform.height+Ir),perspectiveRatio:.5+this.transform.cameraToCenterDistance/$*.5,isOccluded:!1,signedDistanceFromCamera:$}}getPerspectiveRatio(i,p,_,b,T){const j=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(p,_,b,T):Ne(p,_,i,T);return .5+this.transform.cameraToCenterDistance/j.signedDistanceFromCamera*.5}isOffscreen(i,p,_,b){return _<Ir||i>=this.screenRightBoundary||b<Ir||p>this.screenBottomBoundary}isInsideGrid(i,p,_,b){return _>=0&&i<this.gridRightBoundary&&b>=0&&p<this.gridBottomBoundary}getViewportMatrix(){const i=u.an([]);return u.J(i,i,[-100,-100,0]),i}_projectCollisionBox(i,p,_,b,T,j,$,V,K,te){let re=new u.P(1,0),ye=new u.P(0,1);const we=new u.P(i.anchorPointX+$[0],i.anchorPointY+$[1]);if(j&&!T){const ur=this.projectAndGetPerspectiveRatio(_,we.x+1,we.y,b,K).point.sub(V.point).unit(),mr=Math.atan(ur.y/ur.x)+(ur.x<0?Math.PI:0),hr=Math.sin(mr),or=Math.cos(mr);re=new u.P(or,hr),ye=new u.P(-hr,or)}else if(!j&&T){const ur=-this.transform.angle,mr=Math.sin(ur),hr=Math.cos(ur);re=new u.P(hr,mr),ye=new u.P(-mr,hr)}let Te=V.point,je=p;if(T){Te=we;const ur=this.transform.zoom-Math.floor(this.transform.zoom);je=Math.pow(2,-ur),je*=this.mapProjection.getPitchedTextCorrection(this.transform,we,b),te||(je*=u.ac(.5+V.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}te&&(Te=Te.add(re.mult(te.x*je)).add(ye.mult(te.y*je)));const Fe=i.x1*je,$e=i.x2*je,We=(Fe+$e)/2,Le=i.y1*je,et=i.y2*je,rt=(Le+et)/2,gt=[{offsetX:Fe,offsetY:Le},{offsetX:We,offsetY:Le},{offsetX:$e,offsetY:Le},{offsetX:$e,offsetY:rt},{offsetX:$e,offsetY:et},{offsetX:We,offsetY:et},{offsetX:Fe,offsetY:et},{offsetX:Fe,offsetY:rt}];let Bt=[];for(const{offsetX:ur,offsetY:mr}of gt)Bt.push(new u.P(Te.x+re.x*ur+ye.x*mr,Te.y+re.y*ur+ye.y*mr));let ir=!1;if(T){const ur=Bt.map((mr=>this.projectAndGetPerspectiveRatio(_,mr.x,mr.y,b,K)));ir=ur.some((mr=>!mr.isOccluded)),Bt=ur.map((mr=>mr.point))}else ir=!0;return{box:u.ao(Bt),allPointsOccluded:!ir}}}function _n(D,i,p){return i*(u.X/(D.tileSize*Math.pow(2,p-D.tileID.overscaledZ)))}class ea{constructor(i,p,_,b){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?p:-p))):b&&_?1:0,this.placed=_}isHidden(){return this.opacity===0&&!this.placed}}class gi{constructor(i,p,_,b,T){this.text=new ea(i?i.text:null,p,_,T),this.icon=new ea(i?i.icon:null,p,b,T)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Sn{constructor(i,p,_){this.text=i,this.icon=p,this.skipFade=_}}class si{constructor(){this.invProjMatrix=u.H(),this.viewportMatrix=u.H(),this.circles=[]}}class li{constructor(i,p,_,b,T){this.bucketInstanceId=i,this.featureIndex=p,this.sourceLayerIndex=_,this.bucketIndex=b,this.tileID=T}}class Ca{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const p=++this.maxGroupID;this.collisionGroups[i]={ID:p,predicate:_=>_.collisionGroupID===p}}return this.collisionGroups[i]}}function Hi(D,i,p,_,b){const{horizontalAlign:T,verticalAlign:j}=u.au(D);return new u.P(-(T-.5)*i+_[0]*b,-(j-.5)*p+_[1]*b)}class $i{constructor(i,p,_,b,T,j){this.transform=i.clone(),this.terrain=_,this.collisionIndex=new cn(this.transform,p),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=b,this.retainedQueryData={},this.collisionGroups=new Ca(T),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=j,j&&(j.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(i){const p=this.terrain;return p?(_,b)=>p.getElevation(i,_,b):null}getBucketParts(i,p,_,b){const T=_.getBucket(p),j=_.latestFeatureIndex;if(!T||!j||p.id!==T.layerIds[0])return;const $=_.collisionBoxArray,V=T.layers[0].layout,K=T.layers[0].paint,te=Math.pow(2,this.transform.zoom-_.tileID.overscaledZ),re=_.tileSize/u.X,ye=_.tileID.toUnwrapped(),we=this.transform.calculatePosMatrix(ye),Te=V.get("text-pitch-alignment")==="map",je=V.get("text-rotation-alignment")==="map",Fe=_n(_,1,this.transform.zoom),$e=this.collisionIndex.mapProjection.translatePosition(this.transform,_,K.get("text-translate"),K.get("text-translate-anchor")),We=this.collisionIndex.mapProjection.translatePosition(this.transform,_,K.get("icon-translate"),K.get("icon-translate-anchor")),Le=Io(we,Te,je,this.transform,Fe);let et=null;if(Te){const gt=wo(we,Te,je,this.transform,Fe);et=u.L([],this.transform.labelPlaneMatrix,gt)}this.retainedQueryData[T.bucketInstanceId]=new li(T.bucketInstanceId,j,T.sourceLayerIndex,T.index,_.tileID);const rt={bucket:T,layout:V,translationText:$e,translationIcon:We,posMatrix:we,unwrappedTileID:ye,textLabelPlaneMatrix:Le,labelToScreenMatrix:et,scale:te,textPixelRatio:re,holdingForFade:_.holdingForFade(),collisionBoxArray:$,partiallyEvaluatedTextSize:u.ag(T.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(T.sourceID)};if(b)for(const gt of T.sortKeyRanges){const{sortKey:Bt,symbolInstanceStart:ir,symbolInstanceEnd:ur}=gt;i.push({sortKey:Bt,symbolInstanceStart:ir,symbolInstanceEnd:ur,parameters:rt})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:T.symbolInstances.length,parameters:rt})}attemptAnchorPlacement(i,p,_,b,T,j,$,V,K,te,re,ye,we,Te,je,Fe,$e,We,Le){const et=u.aq[i.textAnchor],rt=[i.textOffset0,i.textOffset1],gt=Hi(et,_,b,rt,T),Bt=this.collisionIndex.placeCollisionBox(p,ye,V,K,te,$,j,Fe,re.predicate,Le,gt);if((!We||this.collisionIndex.placeCollisionBox(We,ye,V,K,te,$,j,$e,re.predicate,Le,gt).placeable)&&Bt.placeable){let ir;if(this.prevPlacement&&this.prevPlacement.variableOffsets[we.crossTileID]&&this.prevPlacement.placements[we.crossTileID]&&this.prevPlacement.placements[we.crossTileID].text&&(ir=this.prevPlacement.variableOffsets[we.crossTileID].anchor),we.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[we.crossTileID]={textOffset:rt,width:_,height:b,anchor:et,textBoxScale:T,prevAnchor:ir},this.markUsedJustification(Te,et,we,je),Te.allowVerticalPlacement&&(this.markUsedOrientation(Te,je,we),this.placedOrientations[we.crossTileID]=je),{shift:gt,placedGlyphBoxes:Bt}}}placeLayerBucketPart(i,p,_){const{bucket:b,layout:T,translationText:j,translationIcon:$,posMatrix:V,unwrappedTileID:K,textLabelPlaneMatrix:te,labelToScreenMatrix:re,textPixelRatio:ye,holdingForFade:we,collisionBoxArray:Te,partiallyEvaluatedTextSize:je,collisionGroup:Fe}=i.parameters,$e=T.get("text-optional"),We=T.get("icon-optional"),Le=u.ar(T,"text-overlap","text-allow-overlap"),et=Le==="always",rt=u.ar(T,"icon-overlap","icon-allow-overlap"),gt=rt==="always",Bt=T.get("text-rotation-alignment")==="map",ir=T.get("text-pitch-alignment")==="map",ur=T.get("icon-text-fit")!=="none",mr=T.get("symbol-z-order")==="viewport-y",hr=et&&(gt||!b.hasIconData()||We),or=gt&&(et||!b.hasTextData()||$e);!b.collisionArrays&&Te&&b.deserializeCollisionBoxes(Te);const xr=this._getTerrainElevationFunc(this.retainedQueryData[b.bucketInstanceId].tileID),Jr=(fr,ar,Hr)=>{var vi,an;if(p[fr.crossTileID])return;if(we)return void(this.placements[fr.crossTileID]=new Sn(!1,!1,!1));let Ln=!1,ni=!1,ia=!0,zs=null,In={box:null,placeable:!1,offscreen:null},ho={placeable:!1},Vi=null,qi=null,Da=null,fs=0,Ec=0,Yo=0;ar.textFeatureIndex?fs=ar.textFeatureIndex:fr.useRuntimeCollisionCircles&&(fs=fr.featureIndex),ar.verticalTextFeatureIndex&&(Ec=ar.verticalTextFeatureIndex);const eo=ar.textBox;if(eo){const sn=Ma=>{let za=u.ah.horizontal;if(b.allowVerticalPlacement&&!Ma&&this.prevPlacement){const Bo=this.prevPlacement.placedOrientations[fr.crossTileID];Bo&&(this.placedOrientations[fr.crossTileID]=Bo,za=Bo,this.markUsedOrientation(b,za,fr))}return za},Vn=(Ma,za)=>{if(b.allowVerticalPlacement&&fr.numVerticalGlyphVertices>0&&ar.verticalTextBox){for(const Bo of b.writingModes)if(Bo===u.ah.vertical?(In=za(),ho=In):In=Ma(),In&&In.placeable)break}else In=Ma()},Ti=fr.textAnchorOffsetStartIndex,Qo=fr.textAnchorOffsetEndIndex;if(Qo===Ti){const Ma=(za,Bo)=>{const Cn=this.collisionIndex.placeCollisionBox(za,Le,ye,V,K,ir,Bt,j,Fe.predicate,xr);return Cn&&Cn.placeable&&(this.markUsedOrientation(b,Bo,fr),this.placedOrientations[fr.crossTileID]=Bo),Cn};Vn((()=>Ma(eo,u.ah.horizontal)),(()=>{const za=ar.verticalTextBox;return b.allowVerticalPlacement&&fr.numVerticalGlyphVertices>0&&za?Ma(za,u.ah.vertical):{box:null,offscreen:null}})),sn(In&&In.placeable)}else{let Ma=u.aq[(an=(vi=this.prevPlacement)===null||vi===void 0?void 0:vi.variableOffsets[fr.crossTileID])===null||an===void 0?void 0:an.anchor];const za=(Cn,ps,id)=>{const Di=Cn.x2-Cn.x1,Jd=Cn.y2-Cn.y1,Wh=fr.textBoxScale,Hh=ur&&rt==="never"?ps:null;let Js=null,gg=Le==="never"?1:2,kc="never";Ma&&gg++;for(let Yu=0;Yu<gg;Yu++){for(let ad=Ti;ad<Qo;ad++){const to=b.textAnchorOffsets.get(ad);if(Ma&&to.textAnchor!==Ma)continue;const Yi=this.attemptAnchorPlacement(to,Cn,Di,Jd,Wh,Bt,ir,ye,V,K,Fe,kc,fr,b,id,j,$,Hh,xr);if(Yi&&(Js=Yi.placedGlyphBoxes,Js&&Js.placeable))return Ln=!0,zs=Yi.shift,Js}Ma?Ma=null:kc=Le}return _&&!Js&&(Js={box:this.collisionIndex.placeCollisionBox(eo,"always",ye,V,K,ir,Bt,j,Fe.predicate,xr,new u.P(0,0)).box,offscreen:!1,placeable:!1}),Js};Vn((()=>za(eo,ar.iconBox,u.ah.horizontal)),(()=>{const Cn=ar.verticalTextBox;return b.allowVerticalPlacement&&(!In||!In.placeable)&&fr.numVerticalGlyphVertices>0&&Cn?za(Cn,ar.verticalIconBox,u.ah.vertical):{box:null,occluded:!0,offscreen:null}})),In&&(Ln=In.placeable,ia=In.offscreen);const Bo=sn(In&&In.placeable);if(!Ln&&this.prevPlacement){const Cn=this.prevPlacement.variableOffsets[fr.crossTileID];Cn&&(this.variableOffsets[fr.crossTileID]=Cn,this.markUsedJustification(b,Cn.anchor,fr,Bo))}}}if(Vi=In,Ln=Vi&&Vi.placeable,ia=Vi&&Vi.offscreen,fr.useRuntimeCollisionCircles){const sn=b.text.placedSymbolArray.get(fr.centerJustifiedTextSymbolIndex),Vn=u.ai(b.textSizeData,je,sn),Ti=T.get("text-padding");qi=this.collisionIndex.placeCollisionCircles(Le,sn,b.lineVertexArray,b.glyphOffsetArray,Vn,V,K,te,re,_,ir,Fe.predicate,fr.collisionCircleDiameter,Ti,j,xr),qi.circles.length&&qi.collisionDetected&&!_&&u.w("Collisions detected, but collision boxes are not shown"),Ln=et||qi.circles.length>0&&!qi.collisionDetected,ia=ia&&qi.offscreen}if(ar.iconFeatureIndex&&(Yo=ar.iconFeatureIndex),ar.iconBox){const sn=Vn=>this.collisionIndex.placeCollisionBox(Vn,rt,ye,V,K,ir,Bt,$,Fe.predicate,xr,ur&&zs?zs:void 0);ho&&ho.placeable&&ar.verticalIconBox?(Da=sn(ar.verticalIconBox),ni=Da.placeable):(Da=sn(ar.iconBox),ni=Da.placeable),ia=ia&&Da.offscreen}const ci=$e||fr.numHorizontalGlyphVertices===0&&fr.numVerticalGlyphVertices===0,Ac=We||fr.numIconVertices===0;ci||Ac?Ac?ci||(ni=ni&&Ln):Ln=ni&&Ln:ni=Ln=ni&&Ln;const Jo=ni&&Da.placeable;if(Ln&&Vi.placeable&&this.collisionIndex.insertCollisionBox(Vi.box,Le,T.get("text-ignore-placement"),b.bucketInstanceId,ho&&ho.placeable&&Ec?Ec:fs,Fe.ID),Jo&&this.collisionIndex.insertCollisionBox(Da.box,rt,T.get("icon-ignore-placement"),b.bucketInstanceId,Yo,Fe.ID),qi&&Ln&&this.collisionIndex.insertCollisionCircles(qi.circles,Le,T.get("text-ignore-placement"),b.bucketInstanceId,fs,Fe.ID),_&&this.storeCollisionData(b.bucketInstanceId,Hr,ar,Vi,Da,qi),fr.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(b.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[fr.crossTileID]=new Sn(Ln||hr,ni||or,ia||b.justReloaded),p[fr.crossTileID]=!0};if(mr){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const fr=b.getSortedSymbolIndexes(this.transform.angle);for(let ar=fr.length-1;ar>=0;--ar){const Hr=fr[ar];Jr(b.symbolInstances.get(Hr),b.collisionArrays[Hr],Hr)}}else for(let fr=i.symbolInstanceStart;fr<i.symbolInstanceEnd;fr++)Jr(b.symbolInstances.get(fr),b.collisionArrays[fr],fr);if(_&&b.bucketInstanceId in this.collisionCircleArrays){const fr=this.collisionCircleArrays[b.bucketInstanceId];u.as(fr.invProjMatrix,V),fr.viewportMatrix=this.collisionIndex.getViewportMatrix()}b.justReloaded=!1}storeCollisionData(i,p,_,b,T,j){if(_.textBox||_.iconBox){let $,V;this.collisionBoxArrays.has(i)?$=this.collisionBoxArrays.get(i):($=new Map,this.collisionBoxArrays.set(i,$)),$.has(p)?V=$.get(p):(V={text:null,icon:null},$.set(p,V)),_.textBox&&(V.text=b.box),_.iconBox&&(V.icon=T.box)}if(j){let $=this.collisionCircleArrays[i];$===void 0&&($=this.collisionCircleArrays[i]=new si);for(let V=0;V<j.circles.length;V+=4)$.circles.push(j.circles[V+0]),$.circles.push(j.circles[V+1]),$.circles.push(j.circles[V+2]),$.circles.push(j.collisionDetected?1:0)}}markUsedJustification(i,p,_,b){let T;T=b===u.ah.vertical?_.verticalPlacedTextSymbolIndex:{left:_.leftJustifiedTextSymbolIndex,center:_.centerJustifiedTextSymbolIndex,right:_.rightJustifiedTextSymbolIndex}[u.at(p)];const j=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex,_.verticalPlacedTextSymbolIndex];for(const $ of j)$>=0&&(i.text.placedSymbolArray.get($).crossTileID=T>=0&&$!==T?0:_.crossTileID)}markUsedOrientation(i,p,_){const b=p===u.ah.horizontal||p===u.ah.horizontalOnly?p:0,T=p===u.ah.vertical?p:0,j=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex];for(const $ of j)i.text.placedSymbolArray.get($).placedOrientation=b;_.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(_.verticalPlacedTextSymbolIndex).placedOrientation=T)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const p=this.prevPlacement;let _=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;const b=p?p.symbolFadeChange(i):1,T=p?p.opacities:{},j=p?p.variableOffsets:{},$=p?p.placedOrientations:{};for(const V in this.placements){const K=this.placements[V],te=T[V];te?(this.opacities[V]=new gi(te,b,K.text,K.icon),_=_||K.text!==te.text.placed||K.icon!==te.icon.placed):(this.opacities[V]=new gi(null,b,K.text,K.icon,K.skipFade),_=_||K.text||K.icon)}for(const V in T){const K=T[V];if(!this.opacities[V]){const te=new gi(K,b,!1,!1);te.isHidden()||(this.opacities[V]=te,_=_||K.text.placed||K.icon.placed)}}for(const V in j)this.variableOffsets[V]||!this.opacities[V]||this.opacities[V].isHidden()||(this.variableOffsets[V]=j[V]);for(const V in $)this.placedOrientations[V]||!this.opacities[V]||this.opacities[V].isHidden()||(this.placedOrientations[V]=$[V]);if(p&&p.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");_?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:i)}updateLayerOpacities(i,p){const _={};for(const b of p){const T=b.getBucket(i);T&&b.latestFeatureIndex&&i.id===T.layerIds[0]&&this.updateBucketOpacities(T,b.tileID,_,b.collisionBoxArray)}}updateBucketOpacities(i,p,_,b){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const T=i.layers[0],j=T.layout,$=new gi(null,0,!1,!1,!0),V=j.get("text-allow-overlap"),K=j.get("icon-allow-overlap"),te=T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"),re=j.get("text-rotation-alignment")==="map",ye=j.get("text-pitch-alignment")==="map",we=j.get("icon-text-fit")!=="none",Te=new gi(null,0,V&&(K||!i.hasIconData()||j.get("icon-optional")),K&&(V||!i.hasTextData()||j.get("text-optional")),!0);!i.collisionArrays&&b&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(b);const je=($e,We,Le)=>{for(let et=0;et<We/4;et++)$e.opacityVertexArray.emplaceBack(Le);$e.hasVisibleVertices=$e.hasVisibleVertices||Le!==Gl},Fe=this.collisionBoxArrays.get(i.bucketInstanceId);for(let $e=0;$e<i.symbolInstances.length;$e++){const We=i.symbolInstances.get($e),{numHorizontalGlyphVertices:Le,numVerticalGlyphVertices:et,crossTileID:rt}=We;let gt=this.opacities[rt];_[rt]?gt=$:gt||(gt=Te,this.opacities[rt]=gt),_[rt]=!0;const Bt=We.numIconVertices>0,ir=this.placedOrientations[We.crossTileID],ur=ir===u.ah.vertical,mr=ir===u.ah.horizontal||ir===u.ah.horizontalOnly;if(Le>0||et>0){const or=So(gt.text);je(i.text,Le,ur?Gl:or),je(i.text,et,mr?Gl:or);const xr=gt.text.isHidden();[We.rightJustifiedTextSymbolIndex,We.centerJustifiedTextSymbolIndex,We.leftJustifiedTextSymbolIndex].forEach((ar=>{ar>=0&&(i.text.placedSymbolArray.get(ar).hidden=xr||ur?1:0)})),We.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(We.verticalPlacedTextSymbolIndex).hidden=xr||mr?1:0);const Jr=this.variableOffsets[We.crossTileID];Jr&&this.markUsedJustification(i,Jr.anchor,We,ir);const fr=this.placedOrientations[We.crossTileID];fr&&(this.markUsedJustification(i,"left",We,fr),this.markUsedOrientation(i,fr,We))}if(Bt){const or=So(gt.icon),xr=!(we&&We.verticalPlacedIconSymbolIndex&&ur);We.placedIconSymbolIndex>=0&&(je(i.icon,We.numIconVertices,xr?or:Gl),i.icon.placedSymbolArray.get(We.placedIconSymbolIndex).hidden=gt.icon.isHidden()),We.verticalPlacedIconSymbolIndex>=0&&(je(i.icon,We.numVerticalIconVertices,xr?Gl:or),i.icon.placedSymbolArray.get(We.verticalPlacedIconSymbolIndex).hidden=gt.icon.isHidden())}const hr=Fe&&Fe.has($e)?Fe.get($e):{text:null,icon:null};if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const or=i.collisionArrays[$e];if(or){let xr=new u.P(0,0);if(or.textBox||or.verticalTextBox){let Jr=!0;if(te){const fr=this.variableOffsets[rt];fr?(xr=Hi(fr.anchor,fr.width,fr.height,fr.textOffset,fr.textBoxScale),re&&xr._rotate(ye?this.transform.angle:-this.transform.angle)):Jr=!1}if(or.textBox||or.verticalTextBox){let fr;or.textBox&&(fr=ur),or.verticalTextBox&&(fr=mr),Hs(i.textCollisionBox.collisionVertexArray,gt.text.placed,!Jr||fr,hr.text,xr.x,xr.y)}}if(or.iconBox||or.verticalIconBox){const Jr=!!(!mr&&or.verticalIconBox);let fr;or.iconBox&&(fr=Jr),or.verticalIconBox&&(fr=!Jr),Hs(i.iconCollisionBox.collisionVertexArray,gt.icon.placed,fr,hr.icon,we?xr.x:0,we?xr.y:0)}}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const $e=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=$e.invProjMatrix,i.placementViewportMatrix=$e.viewportMatrix,i.collisionCircleArray=$e.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,p){const _=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*_>i}setStale(){this.stale=!0}}function Hs(D,i,p,_,b,T){_&&_.length!==0||(_=[0,0,0,0]);const j=_[0]-Ir,$=_[1]-Ir,V=_[2]-Ir,K=_[3]-Ir;D.emplaceBack(i?1:0,p?1:0,b||0,T||0,j,$),D.emplaceBack(i?1:0,p?1:0,b||0,T||0,V,$),D.emplaceBack(i?1:0,p?1:0,b||0,T||0,V,K),D.emplaceBack(i?1:0,p?1:0,b||0,T||0,j,K)}const Nn=Math.pow(2,25),Ta=Math.pow(2,24),dc=Math.pow(2,17),Oo=Math.pow(2,16),wa=Math.pow(2,9),vl=Math.pow(2,8),jo=Math.pow(2,1);function So(D){if(D.opacity===0&&!D.placed)return 0;if(D.opacity===1&&D.placed)return 4294967295;const i=D.placed?1:0,p=Math.floor(127*D.opacity);return p*Nn+i*Ta+p*dc+i*Oo+p*wa+i*vl+p*jo+i}const Gl=0;function Ul(){return{isOccluded:(D,i,p)=>!1,getPitchedTextCorrection:(D,i,p)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(D,i,p,_){throw new Error("Not implemented.")},translatePosition:(D,i,p,_)=>(function(b,T,j,$,V=!1){if(!j[0]&&!j[1])return[0,0];const K=V?$==="map"?b.angle:0:$==="viewport"?-b.angle:0;if(K){const te=Math.sin(K),re=Math.cos(K);j=[j[0]*re-j[1]*te,j[0]*te+j[1]*re]}return[V?j[0]:_n(T,j[0],b.zoom),V?j[1]:_n(T,j[1],b.zoom)]})(D,i,p,_),getCircleRadiusCorrection:D=>1}}class Zi{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,p,_,b,T){const j=this._bucketParts;for(;this._currentTileIndex<i.length;)if(p.getBucketParts(j,b,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,T())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,j.sort((($,V)=>$.sortKey-V.sortKey)));this._currentPartIndex<j.length;)if(p.placeLayerBucketPart(j[this._currentPartIndex],this._seenCrossTileIDs,_),this._currentPartIndex++,T())return!0;return!1}}class Zs{constructor(i,p,_,b,T,j,$,V){this.placement=new $i(i,Ul(),p,j,$,V),this._currentPlacementIndex=_.length-1,this._forceFullPlacement=b,this._showCollisionBoxes=T,this._done=!1}isDone(){return this._done}continuePlacement(i,p,_){const b=C.now(),T=()=>!this._forceFullPlacement&&C.now()-b>2;for(;this._currentPlacementIndex>=0;){const j=p[i[this._currentPlacementIndex]],$=this.placement.collisionIndex.transform.zoom;if(j.type==="symbol"&&(!j.minzoom||j.minzoom<=$)&&(!j.maxzoom||j.maxzoom>$)){if(this._inProgressLayer||(this._inProgressLayer=new Zi(j)),this._inProgressLayer.continuePlacement(_[j.source],this.placement,this._showCollisionBoxes,j,T))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const da=512/u.X/2;class Qn{constructor(i,p,_){this.tileID=i,this.bucketInstanceId=_,this._symbolsByKey={};const b=new Map;for(let T=0;T<p.length;T++){const j=p.get(T),$=j.key,V=b.get($);V?V.push(j):b.set($,[j])}for(const[T,j]of b){const $={positions:j.map((V=>({x:Math.floor(V.anchorX*da),y:Math.floor(V.anchorY*da)}))),crossTileIDs:j.map((V=>V.crossTileID))};if($.positions.length>128){const V=new u.av($.positions.length,16,Uint16Array);for(const{x:K,y:te}of $.positions)V.add(K,te);V.finish(),delete $.positions,$.index=V}this._symbolsByKey[T]=$}}getScaledCoordinates(i,p){const{x:_,y:b,z:T}=this.tileID.canonical,{x:j,y:$,z:V}=p.canonical,K=da/Math.pow(2,V-T),te=($*u.X+i.anchorY)*K,re=b*u.X*da;return{x:Math.floor((j*u.X+i.anchorX)*K-_*u.X*da),y:Math.floor(te-re)}}findMatches(i,p,_){const b=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z);for(let T=0;T<i.length;T++){const j=i.get(T);if(j.crossTileID)continue;const $=this._symbolsByKey[j.key];if(!$)continue;const V=this.getScaledCoordinates(j,p);if($.index){const K=$.index.range(V.x-b,V.y-b,V.x+b,V.y+b).sort();for(const te of K){const re=$.crossTileIDs[te];if(!_[re]){_[re]=!0,j.crossTileID=re;break}}}else if($.positions)for(let K=0;K<$.positions.length;K++){const te=$.positions[K],re=$.crossTileIDs[K];if(Math.abs(te.x-V.x)<=b&&Math.abs(te.y-V.y)<=b&&!_[re]){_[re]=!0,j.crossTileID=re;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:i})=>i))}}class Vl{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ls{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const p=Math.round((i-this.lng)/360);if(p!==0)for(const _ in this.indexes){const b=this.indexes[_],T={};for(const j in b){const $=b[j];$.tileID=$.tileID.unwrapTo($.tileID.wrap+p),T[$.tileID.key]=$}this.indexes[_]=T}this.lng=i}addBucket(i,p,_){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let T=0;T<p.symbolInstances.length;T++)p.symbolInstances.get(T).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const b=this.usedCrossTileIDs[i.overscaledZ];for(const T in this.indexes){const j=this.indexes[T];if(Number(T)>i.overscaledZ)for(const $ in j){const V=j[$];V.tileID.isChildOf(i)&&V.findMatches(p.symbolInstances,i,b)}else{const $=j[i.scaledTo(Number(T)).key];$&&$.findMatches(p.symbolInstances,i,b)}}for(let T=0;T<p.symbolInstances.length;T++){const j=p.symbolInstances.get(T);j.crossTileID||(j.crossTileID=_.generate(),b[j.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Qn(i,p.symbolInstances,p.bucketInstanceId),!0}removeBucketCrossTileIDs(i,p){for(const _ of p.getCrossTileIDsLists())for(const b of _)delete this.usedCrossTileIDs[i][b]}removeStaleBuckets(i){let p=!1;for(const _ in this.indexes){const b=this.indexes[_];for(const T in b)i[b[T].bucketInstanceId]||(this.removeBucketCrossTileIDs(_,b[T]),delete b[T],p=!0)}return p}}class lu{constructor(){this.layerIndexes={},this.crossTileIDs=new Vl,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,p,_){let b=this.layerIndexes[i.id];b===void 0&&(b=this.layerIndexes[i.id]=new ls);let T=!1;const j={};b.handleWrapJump(_);for(const $ of p){const V=$.getBucket(i);V&&i.id===V.layerIds[0]&&(V.bucketInstanceId||(V.bucketInstanceId=++this.maxBucketInstanceId),b.addBucket($.tileID,V,this.crossTileIDs)&&(T=!0),j[V.bucketInstanceId]=!0)}return b.removeStaleBuckets(j)&&(T=!0),T}pruneUnusedLayers(i){const p={};i.forEach((_=>{p[_]=!0}));for(const _ in this.layerIndexes)p[_]||delete this.layerIndexes[_]}}const lo=(D,i)=>u.t(D,i&&i.filter((p=>p.identifier!=="source.canvas"))),hc=u.aw();class Kc extends u.E{constructor(i,p={}){super(),this._rtlPluginLoaded=()=>{for(const _ in this.sourceCaches){const b=this.sourceCaches[_].getSource().type;b!=="vector"&&b!=="geojson"||this.sourceCaches[_].reload()}},this.map=i,this.dispatcher=new Ht(at(),i._getMapId()),this.dispatcher.registerMessageHandler("GG",((_,b)=>this.getGlyphs(_,b))),this.dispatcher.registerMessageHandler("GI",((_,b)=>this.getImages(_,b))),this.imageManager=new me,this.imageManager.setEventedParent(this),this.glyphManager=new ge(i._requestManager,p.localIdeographFontFamily),this.lineAtlas=new Ze(256,512),this.crossTileSymbolIndex=new lu,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",u.ay()),Pi().on(Rt,this._rtlPluginLoaded),this.on("data",(_=>{if(_.dataType!=="source"||_.sourceDataType!=="metadata")return;const b=this.sourceCaches[_.sourceId];if(!b)return;const T=b.getSource();if(T&&T.vectorLayerIds)for(const j in this._layers){const $=this._layers[j];$.source===T.id&&this._validateLayer($)}}))}loadURL(i,p={},_){this.fire(new u.k("dataloading",{dataType:"style"})),p.validate=typeof p.validate!="boolean"||p.validate;const b=this.map._requestManager.transformRequest(i,"Style");this._loadStyleRequest=new AbortController;const T=this._loadStyleRequest;u.h(b,this._loadStyleRequest).then((j=>{this._loadStyleRequest=null,this._load(j.data,p,_)})).catch((j=>{this._loadStyleRequest=null,j&&!T.signal.aborted&&this.fire(new u.j(j))}))}loadJSON(i,p={},_){this.fire(new u.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,C.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,p.validate=p.validate!==!1,this._load(i,p,_)})).catch((()=>{}))}loadEmpty(){this.fire(new u.k("dataloading",{dataType:"style"})),this._load(hc,{validate:!1})}_load(i,p,_){var b;const T=p.transformStyle?p.transformStyle(_,i):i;if(!p.validate||!lo(this,u.u(T))){this._loaded=!0,this.stylesheet=T;for(const j in T.sources)this.addSource(j,T.sources[j],{validate:!1});T.sprite?this._loadSprite(T.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(T.glyphs),this._createLayers(),this.light=new st(this.stylesheet.light),this.sky=new qe(this.stylesheet.sky),this.map.setTerrain((b=this.stylesheet.terrain)!==null&&b!==void 0?b:null),this.fire(new u.k("data",{dataType:"style"})),this.fire(new u.k("style.load"))}}_createLayers(){const i=u.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",i),this._order=i.map((p=>p.id)),this._layers={},this._serializedLayers=null;for(const p of i){const _=u.aA(p);_.setEventedParent(this,{layer:{id:p.id}}),this._layers[p.id]=_}}_loadSprite(i,p=!1,_=void 0){let b;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,(function(T,j,$,V){return u._(this,void 0,void 0,(function*(){const K=ie(T),te=$>1?"@2x":"",re={},ye={};for(const{id:we,url:Te}of K){const je=j.transformRequest(Ce(Te,te,".json"),"SpriteJSON");re[we]=u.h(je,V);const Fe=j.transformRequest(Ce(Te,te,".png"),"SpriteImage");ye[we]=ne.getImage(Fe,V)}return yield Promise.all([...Object.values(re),...Object.values(ye)]),(function(we,Te){return u._(this,void 0,void 0,(function*(){const je={};for(const Fe in we){je[Fe]={};const $e=C.getImageCanvasContext((yield Te[Fe]).data),We=(yield we[Fe]).data;for(const Le in We){const{width:et,height:rt,x:gt,y:Bt,sdf:ir,pixelRatio:ur,stretchX:mr,stretchY:hr,content:or,textFitWidth:xr,textFitHeight:Jr}=We[Le];je[Fe][Le]={data:null,pixelRatio:ur,sdf:ir,stretchX:mr,stretchY:hr,content:or,textFitWidth:xr,textFitHeight:Jr,spriteData:{width:et,height:rt,x:gt,y:Bt,context:$e}}}}return je}))})(re,ye)}))})(i,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((T=>{if(this._spriteRequest=null,T)for(const j in T){this._spritesImagesIds[j]=[];const $=this._spritesImagesIds[j]?this._spritesImagesIds[j].filter((V=>!(V in T))):[];for(const V of $)this.imageManager.removeImage(V),this._changedImages[V]=!0;for(const V in T[j]){const K=j==="default"?V:`${j}:${V}`;this._spritesImagesIds[j].push(K),K in this.imageManager.images?this.imageManager.updateImage(K,T[j][V],!1):this.imageManager.addImage(K,T[j][V]),p&&(this._changedImages[K]=!0)}}})).catch((T=>{this._spriteRequest=null,b=T,this.fire(new u.j(b))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),p&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"})),_&&_(b)}))}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}_validateLayer(i){const p=this.sourceCaches[i.source];if(!p)return;const _=i.sourceLayer;if(!_)return;const b=p.getSource();(b.type==="geojson"||b.vectorLayerIds&&b.vectorLayerIds.indexOf(_)===-1)&&this.fire(new u.j(new Error(`Source layer "${_}" does not exist on source "${b.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i,p=!1){const _=this._serializedAllLayers();if(!i||i.length===0)return Object.values(p?u.aB(_):_);const b=[];for(const T of i)if(_[T]){const j=p?u.aB(_[T]):_[T];b.push(j)}return b}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const p=Object.keys(this._layers);for(const _ of p){const b=this._layers[_];b.type!=="custom"&&(i[_]=b.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const p=this._changed;if(p){const b=Object.keys(this._updatedLayers),T=Object.keys(this._removedLayers);(b.length||T.length)&&this._updateWorkerLayers(b,T);for(const j in this._updatedSources){const $=this._updatedSources[j];if($==="reload")this._reloadSource(j);else{if($!=="clear")throw new Error(`Invalid action ${$}`);this._clearSource(j)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const j in this._updatedPaintProps)this._layers[j].updateTransitions(i);this.light.updateTransitions(i),this.sky.updateTransitions(i),this._resetUpdates()}const _={};for(const b in this.sourceCaches){const T=this.sourceCaches[b];_[b]=T.used,T.used=!1}for(const b of this._order){const T=this._layers[b];T.recalculate(i,this._availableImages),!T.isHidden(i.zoom)&&T.source&&(this.sourceCaches[T.source].used=!0)}for(const b in _){const T=this.sourceCaches[b];!!_[b]!=!!T.used&&T.fire(new u.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:b}))}this.light.recalculate(i),this.sky.recalculate(i),this.z=i.zoom,p&&this.fire(new u.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const p in this.sourceCaches)this.sourceCaches[p].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,p){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(i,!1),removedIds:p})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,p={}){var _;this._checkLoaded();const b=this.serialize();if(i=p.transformStyle?p.transformStyle(b,i):i,((_=p.validate)===null||_===void 0||_)&&lo(this,u.u(i)))return!1;(i=u.aB(i)).layers=u.az(i.layers);const T=u.aC(b,i),j=this._getOperationsToPerform(T);if(j.unimplemented.length>0)throw new Error(`Unimplemented: ${j.unimplemented.join(", ")}.`);if(j.operations.length===0)return!1;for(const $ of j.operations)$();return this.stylesheet=i,this._serializedLayers=null,!0}_getOperationsToPerform(i){const p=[],_=[];for(const b of i)switch(b.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":p.push((()=>this.addLayer.apply(this,b.args)));break;case"removeLayer":p.push((()=>this.removeLayer.apply(this,b.args)));break;case"setPaintProperty":p.push((()=>this.setPaintProperty.apply(this,b.args)));break;case"setLayoutProperty":p.push((()=>this.setLayoutProperty.apply(this,b.args)));break;case"setFilter":p.push((()=>this.setFilter.apply(this,b.args)));break;case"addSource":p.push((()=>this.addSource.apply(this,b.args)));break;case"removeSource":p.push((()=>this.removeSource.apply(this,b.args)));break;case"setLayerZoomRange":p.push((()=>this.setLayerZoomRange.apply(this,b.args)));break;case"setLight":p.push((()=>this.setLight.apply(this,b.args)));break;case"setGeoJSONSourceData":p.push((()=>this.setGeoJSONSourceData.apply(this,b.args)));break;case"setGlyphs":p.push((()=>this.setGlyphs.apply(this,b.args)));break;case"setSprite":p.push((()=>this.setSprite.apply(this,b.args)));break;case"setSky":p.push((()=>this.setSky.apply(this,b.args)));break;case"setTerrain":p.push((()=>this.map.setTerrain.apply(this,b.args)));break;case"setTransition":p.push((()=>{}));break;default:_.push(b.command)}return{operations:p,unimplemented:_}}addImage(i,p){if(this.getImage(i))return this.fire(new u.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,p),this._afterImageUpdated(i)}updateImage(i,p){this.imageManager.updateImage(i,p)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new u.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,p,_={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!p.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(p).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(u.u.source,`sources.${i}`,p,null,_))return;this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);const b=this.sourceCaches[i]=new jr(i,p,this.dispatcher);b.style=this,b.setEventedParent(this,(()=>({isSourceLoaded:b.loaded(),source:b.serialize(),sourceId:i}))),b.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const _ in this._layers)if(this._layers[_].source===i)return this.fire(new u.j(new Error(`Source "${i}" cannot be removed while layer "${_}" is using it.`)));const p=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],p.fire(new u.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),p.setEventedParent(null),p.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,p){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const _=this.sourceCaches[i].getSource();if(_.type!=="geojson")throw new Error(`geojsonSource.type is ${_.type}, which is !== 'geojson`);_.setData(p),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,p,_={}){this._checkLoaded();const b=i.id;if(this.getLayer(b))return void this.fire(new u.j(new Error(`Layer "${b}" already exists on this map.`)));let T;if(i.type==="custom"){if(lo(this,u.aD(i)))return;T=u.aA(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(b,i.source),i=u.aB(i),i=u.e(i,{source:b})),this._validate(u.u.layer,`layers.${b}`,i,{arrayIndex:-1},_))return;T=u.aA(i),this._validateLayer(T),T.setEventedParent(this,{layer:{id:b}})}const j=p?this._order.indexOf(p):this._order.length;if(p&&j===-1)this.fire(new u.j(new Error(`Cannot add layer "${b}" before non-existing layer "${p}".`)));else{if(this._order.splice(j,0,b),this._layerOrderChanged=!0,this._layers[b]=T,this._removedLayers[b]&&T.source&&T.type!=="custom"){const $=this._removedLayers[b];delete this._removedLayers[b],$.type!==T.type?this._updatedSources[T.source]="clear":(this._updatedSources[T.source]="reload",this.sourceCaches[T.source].pause())}this._updateLayer(T),T.onAdd&&T.onAdd(this.map)}}moveLayer(i,p){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new u.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===p)return;const _=this._order.indexOf(i);this._order.splice(_,1);const b=p?this._order.indexOf(p):this._order.length;p&&b===-1?this.fire(new u.j(new Error(`Cannot move layer "${i}" before non-existing layer "${p}".`))):(this._order.splice(b,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const p=this._layers[i];if(!p)return void this.fire(new u.j(new Error(`Cannot remove non-existing layer "${i}".`)));p.setEventedParent(null);const _=this._order.indexOf(i);this._order.splice(_,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=p,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],p.onRemove&&p.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,p,_){this._checkLoaded();const b=this.getLayer(i);b?b.minzoom===p&&b.maxzoom===_||(p!=null&&(b.minzoom=p),_!=null&&(b.maxzoom=_),this._updateLayer(b)):this.fire(new u.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,p,_={}){this._checkLoaded();const b=this.getLayer(i);if(b){if(!u.aE(b.filter,p))return p==null?(b.filter=void 0,void this._updateLayer(b)):void(this._validate(u.u.filter,`layers.${b.id}.filter`,p,null,_)||(b.filter=u.aB(p),this._updateLayer(b)))}else this.fire(new u.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return u.aB(this.getLayer(i).filter)}setLayoutProperty(i,p,_,b={}){this._checkLoaded();const T=this.getLayer(i);T?u.aE(T.getLayoutProperty(p),_)||(T.setLayoutProperty(p,_,b),this._updateLayer(T)):this.fire(new u.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,p){const _=this.getLayer(i);if(_)return _.getLayoutProperty(p);this.fire(new u.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,p,_,b={}){this._checkLoaded();const T=this.getLayer(i);T?u.aE(T.getPaintProperty(p),_)||(T.setPaintProperty(p,_,b)&&this._updateLayer(T),this._changed=!0,this._updatedPaintProps[i]=!0,this._serializedLayers=null):this.fire(new u.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,p){return this.getLayer(i).getPaintProperty(p)}setFeatureState(i,p){this._checkLoaded();const _=i.source,b=i.sourceLayer,T=this.sourceCaches[_];if(T===void 0)return void this.fire(new u.j(new Error(`The source '${_}' does not exist in the map's style.`)));const j=T.getSource().type;j==="geojson"&&b?this.fire(new u.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):j!=="vector"||b?(i.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),T.setFeatureState(b,i.id,p)):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,p){this._checkLoaded();const _=i.source,b=this.sourceCaches[_];if(b===void 0)return void this.fire(new u.j(new Error(`The source '${_}' does not exist in the map's style.`)));const T=b.getSource().type,j=T==="vector"?i.sourceLayer:void 0;T!=="vector"||j?p&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new u.j(new Error("A feature id is required to remove its specific state property."))):b.removeFeatureState(j,i.id,p):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const p=i.source,_=i.sourceLayer,b=this.sourceCaches[p];if(b!==void 0)return b.getSource().type!=="vector"||_?(i.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),b.getFeatureState(_,i.id)):void this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.j(new Error(`The source '${p}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=u.aF(this.sourceCaches,(T=>T.serialize())),p=this._serializeByIds(this._order,!0),_=this.map.getTerrain()||void 0,b=this.stylesheet;return u.aG({version:b.version,name:b.name,metadata:b.metadata,light:b.light,sky:b.sky,center:b.center,zoom:b.zoom,bearing:b.bearing,pitch:b.pitch,sprite:b.sprite,glyphs:b.glyphs,transition:b.transition,sources:i,layers:p,terrain:_},(T=>T!==void 0))}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const p=j=>this._layers[j].type==="fill-extrusion",_={},b=[];for(let j=this._order.length-1;j>=0;j--){const $=this._order[j];if(p($)){_[$]=j;for(const V of i){const K=V[$];if(K)for(const te of K)b.push(te)}}}b.sort(((j,$)=>$.intersectionZ-j.intersectionZ));const T=[];for(let j=this._order.length-1;j>=0;j--){const $=this._order[j];if(p($))for(let V=b.length-1;V>=0;V--){const K=b[V].feature;if(_[K.layer.id]<j)break;T.push(K),b.pop()}else for(const V of i){const K=V[$];if(K)for(const te of K)T.push(te.feature)}}return T}queryRenderedFeatures(i,p,_){p&&p.filter&&this._validate(u.u.filter,"queryRenderedFeatures.filter",p.filter,null,p);const b={};if(p&&p.layers){if(!Array.isArray(p.layers))return this.fire(new u.j(new Error("parameters.layers must be an Array."))),[];for(const $ of p.layers){const V=this._layers[$];if(!V)return this.fire(new u.j(new Error(`The layer '${$}' does not exist in the map's style and cannot be queried for features.`))),[];b[V.source]=!0}}const T=[];p.availableImages=this._availableImages;const j=this._serializedAllLayers();for(const $ in this.sourceCaches)p.layers&&!b[$]||T.push(Pr(this.sourceCaches[$],this._layers,j,i,p,_));return this.placement&&T.push((function($,V,K,te,re,ye,we){const Te={},je=ye.queryRenderedSymbols(te),Fe=[];for(const $e of Object.keys(je).map(Number))Fe.push(we[$e]);Fe.sort(Lt);for(const $e of Fe){const We=$e.featureIndex.lookupSymbolFeatures(je[$e.bucketInstanceId],V,$e.bucketIndex,$e.sourceLayerIndex,re.filter,re.layers,re.availableImages,$);for(const Le in We){const et=Te[Le]=Te[Le]||[],rt=We[Le];rt.sort(((gt,Bt)=>{const ir=$e.featureSortOrder;if(ir){const ur=ir.indexOf(gt.featureIndex);return ir.indexOf(Bt.featureIndex)-ur}return Bt.featureIndex-gt.featureIndex}));for(const gt of rt)et.push(gt)}}for(const $e in Te)Te[$e].forEach((We=>{const Le=We.feature,et=K[$[$e].source].getFeatureState(Le.layer["source-layer"],Le.id);Le.source=Le.layer.source,Le.layer["source-layer"]&&(Le.sourceLayer=Le.layer["source-layer"]),Le.state=et}));return Te})(this._layers,j,this.sourceCaches,i,p,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(T)}querySourceFeatures(i,p){p&&p.filter&&this._validate(u.u.filter,"querySourceFeatures.filter",p.filter,null,p);const _=this.sourceCaches[i];return _?(function(b,T){const j=b.getRenderableIds().map((K=>b.getTileByID(K))),$=[],V={};for(let K=0;K<j.length;K++){const te=j[K],re=te.tileID.canonical.key;V[re]||(V[re]=!0,te.querySourceFeatures($,T))}return $})(_,p):[]}getLight(){return this.light.getLight()}setLight(i,p={}){this._checkLoaded();const _=this.light.getLight();let b=!1;for(const j in i)if(!u.aE(i[j],_[j])){b=!0;break}if(!b)return;const T={now:C.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,p),this.light.updateTransitions(T)}getSky(){var i;return(i=this.stylesheet)===null||i===void 0?void 0:i.sky}setSky(i,p={}){const _=this.getSky();let b=!1;if(!i&&!_)return;if(i&&!_)b=!0;else if(!i&&_)b=!0;else for(const j in i)if(!u.aE(i[j],_[j])){b=!0;break}if(!b)return;const T={now:C.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=i,this.sky.setSky(i,p),this.sky.updateTransitions(T)}_validate(i,p,_,b,T={}){return(!T||T.validate!==!1)&&lo(this,i.call(u.u,u.e({key:p,style:this.serialize(),value:_,styleSpec:u.v},b)))}_remove(i=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Pi().off(Rt,this._rtlPluginLoaded);for(const p in this._layers)this._layers[p].setEventedParent(null);for(const p in this.sourceCaches){const _=this.sourceCaches[p];_.setEventedParent(null),_.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),i&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const p in this.sourceCaches)this.sourceCaches[p].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,p,_,b,T=!1){let j=!1,$=!1;const V={};for(const K of this._order){const te=this._layers[K];if(te.type!=="symbol")continue;if(!V[te.source]){const ye=this.sourceCaches[te.source];V[te.source]=ye.getRenderableIds(!0).map((we=>ye.getTileByID(we))).sort(((we,Te)=>Te.tileID.overscaledZ-we.tileID.overscaledZ||(we.tileID.isLessThan(Te.tileID)?-1:1)))}const re=this.crossTileSymbolIndex.addLayer(te,V[te.source],i.center.lng);j=j||re}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((T=T||this._layerOrderChanged||_===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(C.now(),i.zoom))&&(this.pauseablePlacement=new Zs(i,this.map.terrain,this._order,T,p,_,b,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,V),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(C.now()),$=!0),j&&this.pauseablePlacement.placement.setStale()),$||j)for(const K of this._order){const te=this._layers[K];te.type==="symbol"&&this.placement.updateLayerOpacities(te,V[te.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(C.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,p){return u._(this,void 0,void 0,(function*(){const _=yield this.imageManager.getImages(p.icons);this._updateTilesForChangedImages();const b=this.sourceCaches[p.source];return b&&b.setDependencies(p.tileID.key,p.type,p.icons),_}))}getGlyphs(i,p){return u._(this,void 0,void 0,(function*(){const _=yield this.glyphManager.getGlyphs(p.stacks),b=this.sourceCaches[p.source];return b&&b.setDependencies(p.tileID.key,p.type,[""]),_}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,p={}){this._checkLoaded(),i&&this._validate(u.u.glyphs,"glyphs",i,null,p)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,p,_={},b){this._checkLoaded();const T=[{id:i,url:p}],j=[...ie(this.stylesheet.sprite),...T];this._validate(u.u.sprite,"sprite",j,null,_)||(this.stylesheet.sprite=j,this._loadSprite(T,!0,b))}removeSprite(i){this._checkLoaded();const p=ie(this.stylesheet.sprite);if(p.find((_=>_.id===i))){if(this._spritesImagesIds[i])for(const _ of this._spritesImagesIds[i])this.imageManager.removeImage(_),this._changedImages[_]=!0;p.splice(p.findIndex((_=>_.id===i)),1),this.stylesheet.sprite=p.length>0?p:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}else this.fire(new u.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return ie(this.stylesheet.sprite)}setSprite(i,p={},_){this._checkLoaded(),i&&this._validate(u.u.sprite,"sprite",i,null,p)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,_):(this._unloadSprite(),_&&_(null)))}}var La=u.Y([{name:"a_pos",type:"Int16",components:2}]);const Vo={prelude:Zn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Zn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Zn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Zn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Zn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Zn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:Zn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Zn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Zn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Zn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Zn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Zn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Zn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Zn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Zn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Zn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Zn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Zn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Zn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Zn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Zn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Zn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Zn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Zn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Zn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Zn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Zn("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Zn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Zn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:Zn("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Zn(D,i){const p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,_=i.match(/attribute ([\w]+) ([\w]+)/g),b=D.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),j=T?T.concat(b):b,$={};return{fragmentSource:D=D.replace(p,((V,K,te,re,ye)=>($[ye]=!0,K==="define"?`
#ifndef HAS_UNIFORM_u_${ye}
varying ${te} ${re} ${ye};
#else
uniform ${te} ${re} u_${ye};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ye}
    ${te} ${re} ${ye} = u_${ye};
#endif
`))),vertexSource:i=i.replace(p,((V,K,te,re,ye)=>{const we=re==="float"?"vec2":"vec4",Te=ye.match(/color/)?"color":we;return $[ye]?K==="define"?`
#ifndef HAS_UNIFORM_u_${ye}
uniform lowp float u_${ye}_t;
attribute ${te} ${we} a_${ye};
varying ${te} ${re} ${ye};
#else
uniform ${te} ${re} u_${ye};
#endif
`:Te==="vec4"?`
#ifndef HAS_UNIFORM_u_${ye}
    ${ye} = a_${ye};
#else
    ${te} ${re} ${ye} = u_${ye};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ye}
    ${ye} = unpack_mix_${Te}(a_${ye}, u_${ye}_t);
#else
    ${te} ${re} ${ye} = u_${ye};
#endif
`:K==="define"?`
#ifndef HAS_UNIFORM_u_${ye}
uniform lowp float u_${ye}_t;
attribute ${te} ${we} a_${ye};
#else
uniform ${te} ${re} u_${ye};
#endif
`:Te==="vec4"?`
#ifndef HAS_UNIFORM_u_${ye}
    ${te} ${re} ${ye} = a_${ye};
#else
    ${te} ${re} ${ye} = u_${ye};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ye}
    ${te} ${re} ${ye} = unpack_mix_${Te}(a_${ye}, u_${ye}_t);
#else
    ${te} ${re} ${ye} = u_${ye};
#endif
`})),staticAttributes:_,staticUniforms:j}}class fc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,p,_,b,T,j,$,V,K){this.context=i;let te=this.boundPaintVertexBuffers.length!==b.length;for(let re=0;!te&&re<b.length;re++)this.boundPaintVertexBuffers[re]!==b[re]&&(te=!0);!this.vao||this.boundProgram!==p||this.boundLayoutVertexBuffer!==_||te||this.boundIndexBuffer!==T||this.boundVertexOffset!==j||this.boundDynamicVertexBuffer!==$||this.boundDynamicVertexBuffer2!==V||this.boundDynamicVertexBuffer3!==K?this.freshBind(p,_,b,T,j,$,V,K):(i.bindVertexArray.set(this.vao),$&&$.bind(),T&&T.dynamicDraw&&T.bind(),V&&V.bind(),K&&K.bind())}freshBind(i,p,_,b,T,j,$,V){const K=i.numAttributes,te=this.context,re=te.gl;this.vao&&this.destroy(),this.vao=te.createVertexArray(),te.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=_,this.boundIndexBuffer=b,this.boundVertexOffset=T,this.boundDynamicVertexBuffer=j,this.boundDynamicVertexBuffer2=$,this.boundDynamicVertexBuffer3=V,p.enableAttributes(re,i);for(const ye of _)ye.enableAttributes(re,i);j&&j.enableAttributes(re,i),$&&$.enableAttributes(re,i),V&&V.enableAttributes(re,i),p.bind(),p.setVertexAttribPointers(re,i,T);for(const ye of _)ye.bind(),ye.setVertexAttribPointers(re,i,T);j&&(j.bind(),j.setVertexAttribPointers(re,i,T)),b&&b.bind(),$&&($.bind(),$.setVertexAttribPointers(re,i,T)),V&&(V.bind(),V.setVertexAttribPointers(re,i,T)),te.currentNumAttributes=K}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const qo=(D,i,p,_,b)=>({u_matrix:D,u_texture:0,u_ele_delta:i,u_fog_matrix:p,u_fog_color:_?_.properties.get("fog-color"):u.aM.white,u_fog_ground_blend:_?_.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:_?_.calculateFogBlendOpacity(b):0,u_horizon_color:_?_.properties.get("horizon-color"):u.aM.white,u_horizon_fog_blend:_?_.properties.get("horizon-fog-blend"):1});function xl(D){const i=[];for(let p=0;p<D.length;p++){if(D[p]===null)continue;const _=D[p].split(" ");i.push(_.pop())}return i}class vt{constructor(i,p,_,b,T,j){const $=i.gl;this.program=$.createProgram();const V=xl(p.staticAttributes),K=_?_.getBinderAttributes():[],te=V.concat(K),re=Vo.prelude.staticUniforms?xl(Vo.prelude.staticUniforms):[],ye=p.staticUniforms?xl(p.staticUniforms):[],we=_?_.getBinderUniforms():[],Te=re.concat(ye).concat(we),je=[];for(const gt of Te)je.indexOf(gt)<0&&je.push(gt);const Fe=_?_.defines():[];T&&Fe.push("#define OVERDRAW_INSPECTOR;"),j&&Fe.push("#define TERRAIN3D;");const $e=Fe.concat(Vo.prelude.fragmentSource,p.fragmentSource).join(`
`),We=Fe.concat(Vo.prelude.vertexSource,p.vertexSource).join(`
`),Le=$.createShader($.FRAGMENT_SHADER);if($.isContextLost())return void(this.failedToCreate=!0);if($.shaderSource(Le,$e),$.compileShader(Le),!$.getShaderParameter(Le,$.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${$.getShaderInfoLog(Le)}`);$.attachShader(this.program,Le);const et=$.createShader($.VERTEX_SHADER);if($.isContextLost())return void(this.failedToCreate=!0);if($.shaderSource(et,We),$.compileShader(et),!$.getShaderParameter(et,$.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${$.getShaderInfoLog(et)}`);$.attachShader(this.program,et),this.attributes={};const rt={};this.numAttributes=te.length;for(let gt=0;gt<this.numAttributes;gt++)te[gt]&&($.bindAttribLocation(this.program,gt,te[gt]),this.attributes[te[gt]]=gt);if($.linkProgram(this.program),!$.getProgramParameter(this.program,$.LINK_STATUS))throw new Error(`Program failed to link: ${$.getProgramInfoLog(this.program)}`);$.deleteShader(et),$.deleteShader(Le);for(let gt=0;gt<je.length;gt++){const Bt=je[gt];if(Bt&&!rt[Bt]){const ir=$.getUniformLocation(this.program,Bt);ir&&(rt[Bt]=ir)}}this.fixedUniforms=b(i,rt),this.terrainUniforms=((gt,Bt)=>({u_depth:new u.aH(gt,Bt.u_depth),u_terrain:new u.aH(gt,Bt.u_terrain),u_terrain_dim:new u.aI(gt,Bt.u_terrain_dim),u_terrain_matrix:new u.aJ(gt,Bt.u_terrain_matrix),u_terrain_unpack:new u.aK(gt,Bt.u_terrain_unpack),u_terrain_exaggeration:new u.aI(gt,Bt.u_terrain_exaggeration)}))(i,rt),this.binderUniforms=_?_.getUniforms(i,rt):[]}draw(i,p,_,b,T,j,$,V,K,te,re,ye,we,Te,je,Fe,$e,We){const Le=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(_),i.setStencilMode(b),i.setColorMode(T),i.setCullFace(j),V){i.activeTexture.set(Le.TEXTURE2),Le.bindTexture(Le.TEXTURE_2D,V.depthTexture),i.activeTexture.set(Le.TEXTURE3),Le.bindTexture(Le.TEXTURE_2D,V.texture);for(const rt in this.terrainUniforms)this.terrainUniforms[rt].set(V[rt])}for(const rt in this.fixedUniforms)this.fixedUniforms[rt].set($[rt]);je&&je.setUniforms(i,this.binderUniforms,we,{zoom:Te});let et=0;switch(p){case Le.LINES:et=2;break;case Le.TRIANGLES:et=3;break;case Le.LINE_STRIP:et=1}for(const rt of ye.get()){const gt=rt.vaos||(rt.vaos={});(gt[K]||(gt[K]=new fc)).bind(i,this,te,je?je.getPaintVertexBuffers():[],re,rt.vertexOffset,Fe,$e,We),Le.drawElements(p,rt.primitiveLength*et,Le.UNSIGNED_SHORT,rt.primitiveOffset*et*2)}}}function Ge(D,i,p){const _=1/_n(p,1,i.transform.tileZoom),b=Math.pow(2,p.tileID.overscaledZ),T=p.tileSize*Math.pow(2,i.transform.tileZoom)/b,j=T*(p.tileID.canonical.x+p.tileID.wrap*b),$=T*p.tileID.canonical.y;return{u_image:0,u_texsize:p.imageAtlasTexture.size,u_scale:[_,D.fromScale,D.toScale],u_fade:D.t,u_pixel_coord_upper:[j>>16,$>>16],u_pixel_coord_lower:[65535&j,65535&$]}}const ot=(D,i,p,_)=>{const b=i.style.light,T=b.properties.get("position"),j=[T.x,T.y,T.z],$=(function(){var K=new u.A(9);return u.A!=Float32Array&&(K[1]=0,K[2]=0,K[3]=0,K[5]=0,K[6]=0,K[7]=0),K[0]=1,K[4]=1,K[8]=1,K})();b.properties.get("anchor")==="viewport"&&(function(K,te){var re=Math.sin(te),ye=Math.cos(te);K[0]=ye,K[1]=re,K[2]=0,K[3]=-re,K[4]=ye,K[5]=0,K[6]=0,K[7]=0,K[8]=1})($,-i.transform.angle),(function(K,te,re){var ye=te[0],we=te[1],Te=te[2];K[0]=ye*re[0]+we*re[3]+Te*re[6],K[1]=ye*re[1]+we*re[4]+Te*re[7],K[2]=ye*re[2]+we*re[5]+Te*re[8]})(j,j,$);const V=b.properties.get("color");return{u_matrix:D,u_lightpos:j,u_lightintensity:b.properties.get("intensity"),u_lightcolor:[V.r,V.g,V.b],u_vertical_gradient:+p,u_opacity:_}},ht=(D,i,p,_,b,T,j)=>u.e(ot(D,i,p,_),Ge(T,i,j),{u_height_factor:-Math.pow(2,b.overscaledZ)/j.tileSize/8}),$t=D=>({u_matrix:D}),Gr=(D,i,p,_)=>u.e($t(D),Ge(p,i,_)),wt=(D,i)=>({u_matrix:D,u_world:i}),jt=(D,i,p,_,b)=>u.e(Gr(D,i,p,_),{u_world:b}),xt=(D,i,p,_)=>{const b=D.transform;let T,j;if(_.paint.get("circle-pitch-alignment")==="map"){const $=_n(p,1,b.zoom);T=!0,j=[$,$]}else T=!1,j=b.pixelsToGLUnits;return{u_camera_to_center_distance:b.cameraToCenterDistance,u_scale_with_map:+(_.paint.get("circle-pitch-scale")==="map"),u_matrix:D.translatePosMatrix(i.posMatrix,p,_.paint.get("circle-translate"),_.paint.get("circle-translate-anchor")),u_pitch_with_map:+T,u_device_pixel_ratio:D.pixelRatio,u_extrude_scale:j}},Nt=(D,i,p)=>({u_matrix:D,u_inv_matrix:i,u_camera_to_center_distance:p.cameraToCenterDistance,u_viewport_size:[p.width,p.height]}),Yr=(D,i,p=1)=>({u_matrix:D,u_color:i,u_overlay:0,u_overlay_scale:p}),Tr=D=>({u_matrix:D}),Gt=(D,i,p,_)=>({u_matrix:D,u_extrude_scale:_n(i,1,p),u_intensity:_}),gn=(D,i,p,_)=>{const b=u.H();u.aP(b,0,D.width,D.height,0,0,1);const T=D.context.gl;return{u_matrix:b,u_world:[T.drawingBufferWidth,T.drawingBufferHeight],u_image:p,u_color_ramp:_,u_opacity:i.paint.get("heatmap-opacity")}};function He(D,i){const p=Math.pow(2,i.canonical.z),_=i.canonical.y;return[new u.Z(0,_/p).toLngLat().lat,new u.Z(0,(_+1)/p).toLngLat().lat]}const bt=(D,i,p,_)=>{const b=D.transform;return{u_matrix:gr(D,i,p,_),u_ratio:1/_n(i,1,b.zoom),u_device_pixel_ratio:D.pixelRatio,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},ct=(D,i,p,_,b)=>u.e(bt(D,i,p,b),{u_image:0,u_image_height:_}),yt=(D,i,p,_,b)=>{const T=D.transform,j=Nr(i,T);return{u_matrix:gr(D,i,p,b),u_texsize:i.imageAtlasTexture.size,u_ratio:1/_n(i,1,T.zoom),u_device_pixel_ratio:D.pixelRatio,u_image:0,u_scale:[j,_.fromScale,_.toScale],u_fade:_.t,u_units_to_pixels:[1/T.pixelsToGLUnits[0],1/T.pixelsToGLUnits[1]]}},Or=(D,i,p,_,b,T)=>{const j=D.lineAtlas,$=Nr(i,D.transform),V=p.layout.get("line-cap")==="round",K=j.getDash(_.from,V),te=j.getDash(_.to,V),re=K.width*b.fromScale,ye=te.width*b.toScale;return u.e(bt(D,i,p,T),{u_patternscale_a:[$/re,-K.height/2],u_patternscale_b:[$/ye,-te.height/2],u_sdfgamma:j.width/(256*Math.min(re,ye)*D.pixelRatio)/2,u_image:0,u_tex_y_a:K.y,u_tex_y_b:te.y,u_mix:b.t})};function Nr(D,i){return 1/_n(D,1,i.tileZoom)}function gr(D,i,p,_){return D.translatePosMatrix(_?_.posMatrix:i.tileID.posMatrix,i,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}const mn=(D,i,p,_,b)=>{return{u_matrix:D,u_tl_parent:i,u_scale_parent:p,u_buffer_scale:1,u_fade_t:_.mix,u_opacity:_.opacity*b.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:b.paint.get("raster-brightness-min"),u_brightness_high:b.paint.get("raster-brightness-max"),u_saturation_factor:(j=b.paint.get("raster-saturation"),j>0?1-1/(1.001-j):-j),u_contrast_factor:(T=b.paint.get("raster-contrast"),T>0?1/(1-T):1+T),u_spin_weights:Xn(b.paint.get("raster-hue-rotate"))};var T,j};function Xn(D){D*=Math.PI/180;const i=Math.sin(D),p=Math.cos(D);return[(2*p+1)/3,(-Math.sqrt(3)*i-p+1)/3,(Math.sqrt(3)*i-p+1)/3]}const qt=(D,i,p,_,b,T,j,$,V,K,te,re,ye,we)=>{const Te=j.transform;return{u_is_size_zoom_constant:+(D==="constant"||D==="source"),u_is_size_feature_constant:+(D==="constant"||D==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:Te.cameraToCenterDistance,u_pitch:Te.pitch/360*2*Math.PI,u_rotate_symbol:+p,u_aspect_ratio:Te.width/Te.height,u_fade_change:j.options.fadeDuration?j.symbolFadeChange:1,u_matrix:$,u_label_plane_matrix:V,u_coord_matrix:K,u_is_text:+re,u_pitch_with_map:+_,u_is_along_line:b,u_is_variable_anchor:T,u_texsize:ye,u_texture:0,u_translation:te,u_pitched_scale:we}},Br=(D,i,p,_,b,T,j,$,V,K,te,re,ye,we,Te)=>{const je=j.transform;return u.e(qt(D,i,p,_,b,T,j,$,V,K,te,re,ye,Te),{u_gamma_scale:_?Math.cos(je._pitch)*je.cameraToCenterDistance:1,u_device_pixel_ratio:j.pixelRatio,u_is_halo:1})},Ai=(D,i,p,_,b,T,j,$,V,K,te,re,ye,we)=>u.e(Br(D,i,p,_,b,T,j,$,V,K,te,!0,re,!0,we),{u_texsize_icon:ye,u_texture_icon:1}),Sa=(D,i,p)=>({u_matrix:D,u_opacity:i,u_color:p}),Wo=(D,i,p,_,b,T)=>u.e((function(j,$,V,K){const te=V.imageManager.getPattern(j.from.toString()),re=V.imageManager.getPattern(j.to.toString()),{width:ye,height:we}=V.imageManager.getPixelSize(),Te=Math.pow(2,K.tileID.overscaledZ),je=K.tileSize*Math.pow(2,V.transform.tileZoom)/Te,Fe=je*(K.tileID.canonical.x+K.tileID.wrap*Te),$e=je*K.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:te.tl,u_pattern_br_a:te.br,u_pattern_tl_b:re.tl,u_pattern_br_b:re.br,u_texsize:[ye,we],u_mix:$.t,u_pattern_size_a:te.displaySize,u_pattern_size_b:re.displaySize,u_scale_a:$.fromScale,u_scale_b:$.toScale,u_tile_units_to_pixels:1/_n(K,1,V.transform.tileZoom),u_pixel_coord_upper:[Fe>>16,$e>>16],u_pixel_coord_lower:[65535&Fe,65535&$e]}})(_,T,p,b),{u_matrix:D,u_opacity:i}),bi={fillExtrusion:(D,i)=>({u_matrix:new u.aJ(D,i.u_matrix),u_lightpos:new u.aN(D,i.u_lightpos),u_lightintensity:new u.aI(D,i.u_lightintensity),u_lightcolor:new u.aN(D,i.u_lightcolor),u_vertical_gradient:new u.aI(D,i.u_vertical_gradient),u_opacity:new u.aI(D,i.u_opacity)}),fillExtrusionPattern:(D,i)=>({u_matrix:new u.aJ(D,i.u_matrix),u_lightpos:new u.aN(D,i.u_lightpos),u_lightintensity:new u.aI(D,i.u_lightintensity),u_lightcolor:new u.aN(D,i.u_lightcolor),u_vertical_gradient:new u.aI(D,i.u_vertical_gradient),u_height_factor:new u.aI(D,i.u_height_factor),u_image:new u.aH(D,i.u_image),u_texsize:new u.aO(D,i.u_texsize),u_pixel_coord_upper:new u.aO(D,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(D,i.u_pixel_coord_lower),u_scale:new u.aN(D,i.u_scale),u_fade:new u.aI(D,i.u_fade),u_opacity:new u.aI(D,i.u_opacity)}),fill:(D,i)=>({u_matrix:new u.aJ(D,i.u_matrix)}),fillPattern:(D,i)=>({u_matrix:new u.aJ(D,i.u_matrix),u_image:new u.aH(D,i.u_image),u_texsize:new u.aO(D,i.u_texsize),u_pixel_coord_upper:new u.aO(D,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(D,i.u_pixel_coord_lower),u_scale:new u.aN(D,i.u_scale),u_fade:new u.aI(D,i.u_fade)}),fillOutline:(D,i)=>({u_matrix:new u.aJ(D,i.u_matrix),u_world:new u.aO(D,i.u_world)}),fillOutlinePattern:(D,i)=>({u_matrix:new u.aJ(D,i.u_matrix),u_world:new u.aO(D,i.u_world),u_image:new u.aH(D,i.u_image),u_texsize:new u.aO(D,i.u_texsize),u_pixel_coord_upper:new u.aO(D,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(D,i.u_pixel_coord_lower),u_scale:new u.aN(D,i.u_scale),u_fade:new u.aI(D,i.u_fade)}),circle:(D,i)=>({u_camera_to_center_distance:new u.aI(D,i.u_camera_to_center_distance),u_scale_with_map:new u.aH(D,i.u_scale_with_map),u_pitch_with_map:new u.aH(D,i.u_pitch_with_map),u_extrude_scale:new u.aO(D,i.u_extrude_scale),u_device_pixel_ratio:new u.aI(D,i.u_device_pixel_ratio),u_matrix:new u.aJ(D,i.u_matrix)}),collisionBox:(D,i)=>({u_matrix:new u.aJ(D,i.u_matrix),u_pixel_extrude_scale:new u.aO(D,i.u_pixel_extrude_scale)}),collisionCircle:(D,i)=>({u_matrix:new u.aJ(D,i.u_matrix),u_inv_matrix:new u.aJ(D,i.u_inv_matrix),u_camera_to_center_distance:new u.aI(D,i.u_camera_to_center_distance),u_viewport_size:new u.aO(D,i.u_viewport_size)}),debug:(D,i)=>({u_color:new u.aL(D,i.u_color),u_matrix:new u.aJ(D,i.u_matrix),u_overlay:new u.aH(D,i.u_overlay),u_overlay_scale:new u.aI(D,i.u_overlay_scale)}),clippingMask:(D,i)=>({u_matrix:new u.aJ(D,i.u_matrix)}),heatmap:(D,i)=>({u_extrude_scale:new u.aI(D,i.u_extrude_scale),u_intensity:new u.aI(D,i.u_intensity),u_matrix:new u.aJ(D,i.u_matrix)}),heatmapTexture:(D,i)=>({u_matrix:new u.aJ(D,i.u_matrix),u_world:new u.aO(D,i.u_world),u_image:new u.aH(D,i.u_image),u_color_ramp:new u.aH(D,i.u_color_ramp),u_opacity:new u.aI(D,i.u_opacity)}),hillshade:(D,i)=>({u_matrix:new u.aJ(D,i.u_matrix),u_image:new u.aH(D,i.u_image),u_latrange:new u.aO(D,i.u_latrange),u_light:new u.aO(D,i.u_light),u_shadow:new u.aL(D,i.u_shadow),u_highlight:new u.aL(D,i.u_highlight),u_accent:new u.aL(D,i.u_accent)}),hillshadePrepare:(D,i)=>({u_matrix:new u.aJ(D,i.u_matrix),u_image:new u.aH(D,i.u_image),u_dimension:new u.aO(D,i.u_dimension),u_zoom:new u.aI(D,i.u_zoom),u_unpack:new u.aK(D,i.u_unpack)}),line:(D,i)=>({u_matrix:new u.aJ(D,i.u_matrix),u_ratio:new u.aI(D,i.u_ratio),u_device_pixel_ratio:new u.aI(D,i.u_device_pixel_ratio),u_units_to_pixels:new u.aO(D,i.u_units_to_pixels)}),lineGradient:(D,i)=>({u_matrix:new u.aJ(D,i.u_matrix),u_ratio:new u.aI(D,i.u_ratio),u_device_pixel_ratio:new u.aI(D,i.u_device_pixel_ratio),u_units_to_pixels:new u.aO(D,i.u_units_to_pixels),u_image:new u.aH(D,i.u_image),u_image_height:new u.aI(D,i.u_image_height)}),linePattern:(D,i)=>({u_matrix:new u.aJ(D,i.u_matrix),u_texsize:new u.aO(D,i.u_texsize),u_ratio:new u.aI(D,i.u_ratio),u_device_pixel_ratio:new u.aI(D,i.u_device_pixel_ratio),u_image:new u.aH(D,i.u_image),u_units_to_pixels:new u.aO(D,i.u_units_to_pixels),u_scale:new u.aN(D,i.u_scale),u_fade:new u.aI(D,i.u_fade)}),lineSDF:(D,i)=>({u_matrix:new u.aJ(D,i.u_matrix),u_ratio:new u.aI(D,i.u_ratio),u_device_pixel_ratio:new u.aI(D,i.u_device_pixel_ratio),u_units_to_pixels:new u.aO(D,i.u_units_to_pixels),u_patternscale_a:new u.aO(D,i.u_patternscale_a),u_patternscale_b:new u.aO(D,i.u_patternscale_b),u_sdfgamma:new u.aI(D,i.u_sdfgamma),u_image:new u.aH(D,i.u_image),u_tex_y_a:new u.aI(D,i.u_tex_y_a),u_tex_y_b:new u.aI(D,i.u_tex_y_b),u_mix:new u.aI(D,i.u_mix)}),raster:(D,i)=>({u_matrix:new u.aJ(D,i.u_matrix),u_tl_parent:new u.aO(D,i.u_tl_parent),u_scale_parent:new u.aI(D,i.u_scale_parent),u_buffer_scale:new u.aI(D,i.u_buffer_scale),u_fade_t:new u.aI(D,i.u_fade_t),u_opacity:new u.aI(D,i.u_opacity),u_image0:new u.aH(D,i.u_image0),u_image1:new u.aH(D,i.u_image1),u_brightness_low:new u.aI(D,i.u_brightness_low),u_brightness_high:new u.aI(D,i.u_brightness_high),u_saturation_factor:new u.aI(D,i.u_saturation_factor),u_contrast_factor:new u.aI(D,i.u_contrast_factor),u_spin_weights:new u.aN(D,i.u_spin_weights)}),symbolIcon:(D,i)=>({u_is_size_zoom_constant:new u.aH(D,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(D,i.u_is_size_feature_constant),u_size_t:new u.aI(D,i.u_size_t),u_size:new u.aI(D,i.u_size),u_camera_to_center_distance:new u.aI(D,i.u_camera_to_center_distance),u_pitch:new u.aI(D,i.u_pitch),u_rotate_symbol:new u.aH(D,i.u_rotate_symbol),u_aspect_ratio:new u.aI(D,i.u_aspect_ratio),u_fade_change:new u.aI(D,i.u_fade_change),u_matrix:new u.aJ(D,i.u_matrix),u_label_plane_matrix:new u.aJ(D,i.u_label_plane_matrix),u_coord_matrix:new u.aJ(D,i.u_coord_matrix),u_is_text:new u.aH(D,i.u_is_text),u_pitch_with_map:new u.aH(D,i.u_pitch_with_map),u_is_along_line:new u.aH(D,i.u_is_along_line),u_is_variable_anchor:new u.aH(D,i.u_is_variable_anchor),u_texsize:new u.aO(D,i.u_texsize),u_texture:new u.aH(D,i.u_texture),u_translation:new u.aO(D,i.u_translation),u_pitched_scale:new u.aI(D,i.u_pitched_scale)}),symbolSDF:(D,i)=>({u_is_size_zoom_constant:new u.aH(D,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(D,i.u_is_size_feature_constant),u_size_t:new u.aI(D,i.u_size_t),u_size:new u.aI(D,i.u_size),u_camera_to_center_distance:new u.aI(D,i.u_camera_to_center_distance),u_pitch:new u.aI(D,i.u_pitch),u_rotate_symbol:new u.aH(D,i.u_rotate_symbol),u_aspect_ratio:new u.aI(D,i.u_aspect_ratio),u_fade_change:new u.aI(D,i.u_fade_change),u_matrix:new u.aJ(D,i.u_matrix),u_label_plane_matrix:new u.aJ(D,i.u_label_plane_matrix),u_coord_matrix:new u.aJ(D,i.u_coord_matrix),u_is_text:new u.aH(D,i.u_is_text),u_pitch_with_map:new u.aH(D,i.u_pitch_with_map),u_is_along_line:new u.aH(D,i.u_is_along_line),u_is_variable_anchor:new u.aH(D,i.u_is_variable_anchor),u_texsize:new u.aO(D,i.u_texsize),u_texture:new u.aH(D,i.u_texture),u_gamma_scale:new u.aI(D,i.u_gamma_scale),u_device_pixel_ratio:new u.aI(D,i.u_device_pixel_ratio),u_is_halo:new u.aH(D,i.u_is_halo),u_translation:new u.aO(D,i.u_translation),u_pitched_scale:new u.aI(D,i.u_pitched_scale)}),symbolTextAndIcon:(D,i)=>({u_is_size_zoom_constant:new u.aH(D,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(D,i.u_is_size_feature_constant),u_size_t:new u.aI(D,i.u_size_t),u_size:new u.aI(D,i.u_size),u_camera_to_center_distance:new u.aI(D,i.u_camera_to_center_distance),u_pitch:new u.aI(D,i.u_pitch),u_rotate_symbol:new u.aH(D,i.u_rotate_symbol),u_aspect_ratio:new u.aI(D,i.u_aspect_ratio),u_fade_change:new u.aI(D,i.u_fade_change),u_matrix:new u.aJ(D,i.u_matrix),u_label_plane_matrix:new u.aJ(D,i.u_label_plane_matrix),u_coord_matrix:new u.aJ(D,i.u_coord_matrix),u_is_text:new u.aH(D,i.u_is_text),u_pitch_with_map:new u.aH(D,i.u_pitch_with_map),u_is_along_line:new u.aH(D,i.u_is_along_line),u_is_variable_anchor:new u.aH(D,i.u_is_variable_anchor),u_texsize:new u.aO(D,i.u_texsize),u_texsize_icon:new u.aO(D,i.u_texsize_icon),u_texture:new u.aH(D,i.u_texture),u_texture_icon:new u.aH(D,i.u_texture_icon),u_gamma_scale:new u.aI(D,i.u_gamma_scale),u_device_pixel_ratio:new u.aI(D,i.u_device_pixel_ratio),u_is_halo:new u.aH(D,i.u_is_halo),u_translation:new u.aO(D,i.u_translation),u_pitched_scale:new u.aI(D,i.u_pitched_scale)}),background:(D,i)=>({u_matrix:new u.aJ(D,i.u_matrix),u_opacity:new u.aI(D,i.u_opacity),u_color:new u.aL(D,i.u_color)}),backgroundPattern:(D,i)=>({u_matrix:new u.aJ(D,i.u_matrix),u_opacity:new u.aI(D,i.u_opacity),u_image:new u.aH(D,i.u_image),u_pattern_tl_a:new u.aO(D,i.u_pattern_tl_a),u_pattern_br_a:new u.aO(D,i.u_pattern_br_a),u_pattern_tl_b:new u.aO(D,i.u_pattern_tl_b),u_pattern_br_b:new u.aO(D,i.u_pattern_br_b),u_texsize:new u.aO(D,i.u_texsize),u_mix:new u.aI(D,i.u_mix),u_pattern_size_a:new u.aO(D,i.u_pattern_size_a),u_pattern_size_b:new u.aO(D,i.u_pattern_size_b),u_scale_a:new u.aI(D,i.u_scale_a),u_scale_b:new u.aI(D,i.u_scale_b),u_pixel_coord_upper:new u.aO(D,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(D,i.u_pixel_coord_lower),u_tile_units_to_pixels:new u.aI(D,i.u_tile_units_to_pixels)}),terrain:(D,i)=>({u_matrix:new u.aJ(D,i.u_matrix),u_texture:new u.aH(D,i.u_texture),u_ele_delta:new u.aI(D,i.u_ele_delta),u_fog_matrix:new u.aJ(D,i.u_fog_matrix),u_fog_color:new u.aL(D,i.u_fog_color),u_fog_ground_blend:new u.aI(D,i.u_fog_ground_blend),u_fog_ground_blend_opacity:new u.aI(D,i.u_fog_ground_blend_opacity),u_horizon_color:new u.aL(D,i.u_horizon_color),u_horizon_fog_blend:new u.aI(D,i.u_horizon_fog_blend)}),terrainDepth:(D,i)=>({u_matrix:new u.aJ(D,i.u_matrix),u_ele_delta:new u.aI(D,i.u_ele_delta)}),terrainCoords:(D,i)=>({u_matrix:new u.aJ(D,i.u_matrix),u_texture:new u.aH(D,i.u_texture),u_terrain_coords_id:new u.aI(D,i.u_terrain_coords_id),u_ele_delta:new u.aI(D,i.u_ele_delta)}),sky:(D,i)=>({u_sky_color:new u.aL(D,i.u_sky_color),u_horizon_color:new u.aL(D,i.u_horizon_color),u_horizon:new u.aI(D,i.u_horizon),u_sky_horizon_blend:new u.aI(D,i.u_sky_horizon_blend)})};class wi{constructor(i,p,_){this.context=i;const b=i.gl;this.buffer=b.createBuffer(),this.dynamicDraw=!!_,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const p=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ho={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ki{constructor(i,p,_,b){this.length=p.length,this.attributes=_,this.itemSize=p.bytesPerElement,this.dynamicDraw=b,this.context=i;const T=i.gl;this.buffer=T.createBuffer(),i.bindVertexBuffer.set(this.buffer),T.bufferData(T.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?T.DYNAMIC_DRAW:T.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,p){for(let _=0;_<this.attributes.length;_++){const b=p.attributes[this.attributes[_].name];b!==void 0&&i.enableVertexAttribArray(b)}}setVertexAttribPointers(i,p,_){for(let b=0;b<this.attributes.length;b++){const T=this.attributes[b],j=p.attributes[T.name];j!==void 0&&i.vertexAttribPointer(j,T.components,i[Ho[T.type]],!1,this.itemSize,T.offset+this.itemSize*(_||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const uo=new WeakMap;function $n(D){var i;if(uo.has(D))return uo.get(D);{const p=(i=D.getParameter(D.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return uo.set(D,p),p}}class Dn{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ro extends Dn{getDefault(){return u.aM.transparent}set(i){const p=this.current;(i.r!==p.r||i.g!==p.g||i.b!==p.b||i.a!==p.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class ks extends Dn{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class _l extends Dn{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Ks extends Dn{getDefault(){return[!0,!0,!0,!0]}set(i){const p=this.current;(i[0]!==p[0]||i[1]!==p[1]||i[2]!==p[2]||i[3]!==p[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class jf extends Dn{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class og extends Dn{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Gd extends Dn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const p=this.current;(i.func!==p.func||i.ref!==p.ref||i.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class zh extends Dn{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const p=this.current;(i[0]!==p[0]||i[1]!==p[1]||i[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Rf extends Dn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const p=this.gl;i?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=i,this.dirty=!1}}class Nf extends Dn{getDefault(){return[0,1]}set(i){const p=this.current;(i[0]!==p[0]||i[1]!==p[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class us extends Dn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const p=this.gl;i?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=i,this.dirty=!1}}class sg extends Dn{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Ya extends Dn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const p=this.gl;i?p.enable(p.BLEND):p.disable(p.BLEND),this.current=i,this.dirty=!1}}class lg extends Dn{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const p=this.current;(i[0]!==p[0]||i[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class ug extends Dn{getDefault(){return u.aM.transparent}set(i){const p=this.current;(i.r!==p.r||i.g!==p.g||i.b!==p.b||i.a!==p.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class uu extends Dn{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Nu extends Dn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const p=this.gl;i?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=i,this.dirty=!1}}class Ud extends Dn{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Gi extends Dn{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Bu extends Dn{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class Bf extends Dn{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Ff extends Dn{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const p=this.current;(i[0]!==p[0]||i[1]!==p[1]||i[2]!==p[2]||i[3]!==p[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Ph extends Dn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class cg extends Dn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class $f extends Dn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const p=this.gl;p.bindTexture(p.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class dg extends Dn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Vd extends Dn{getDefault(){return null}set(i){const p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Xs extends Dn{getDefault(){return null}set(i){var p;if(i===this.current&&!this.dirty)return;const _=this.gl;$n(_)?_.bindVertexArray(i):(p=_.getExtension("OES_vertex_array_object"))===null||p===void 0||p.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class Fu extends Dn{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class Gf extends Dn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Lh extends Dn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class pc extends Dn{constructor(i,p){super(i),this.context=i,this.parent=p}getDefault(){return null}}class cu extends pc{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class du extends pc{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class qd extends pc{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class hg{constructor(i,p,_,b,T){this.context=i,this.width=p,this.height=_;const j=i.gl,$=this.framebuffer=j.createFramebuffer();if(this.colorAttachment=new cu(i,$),b)this.depthAttachment=T?new qd(i,$):new du(i,$);else if(T)throw new Error("Stencil cannot be set without depth");if(j.checkFramebufferStatus(j.FRAMEBUFFER)!==j.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,p=this.colorAttachment.get();if(p&&i.deleteTexture(p),this.depthAttachment){const _=this.depthAttachment.get();_&&i.deleteRenderbuffer(_)}i.deleteFramebuffer(this.framebuffer)}}class ta{constructor(i,p,_){this.blendFunction=i,this.blendColor=p,this.mask=_}}ta.Replace=[1,0],ta.disabled=new ta(ta.Replace,u.aM.transparent,[!1,!1,!1,!1]),ta.unblended=new ta(ta.Replace,u.aM.transparent,[!0,!0,!0,!0]),ta.alphaBlended=new ta([1,771],u.aM.transparent,[!0,!0,!0,!0]);class Ih{constructor(i){var p,_;if(this.gl=i,this.clearColor=new Ro(this),this.clearDepth=new ks(this),this.clearStencil=new _l(this),this.colorMask=new Ks(this),this.depthMask=new jf(this),this.stencilMask=new og(this),this.stencilFunc=new Gd(this),this.stencilOp=new zh(this),this.stencilTest=new Rf(this),this.depthRange=new Nf(this),this.depthTest=new us(this),this.depthFunc=new sg(this),this.blend=new Ya(this),this.blendFunc=new lg(this),this.blendColor=new ug(this),this.blendEquation=new uu(this),this.cullFace=new Nu(this),this.cullFaceSide=new Ud(this),this.frontFace=new Gi(this),this.program=new Bu(this),this.activeTexture=new Bf(this),this.viewport=new Ff(this),this.bindFramebuffer=new Ph(this),this.bindRenderbuffer=new cg(this),this.bindTexture=new $f(this),this.bindVertexBuffer=new dg(this),this.bindElementBuffer=new Vd(this),this.bindVertexArray=new Xs(this),this.pixelStoreUnpack=new Fu(this),this.pixelStoreUnpackPremultiplyAlpha=new Gf(this),this.pixelStoreUnpackFlipY=new Lh(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),$n(i)){this.HALF_FLOAT=i.HALF_FLOAT;const b=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(p=i.RGBA16F)!==null&&p!==void 0?p:b==null?void 0:b.RGBA16F_EXT,this.RGB16F=(_=i.RGB16F)!==null&&_!==void 0?_:b==null?void 0:b.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const b=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=b==null?void 0:b.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,p){return new wi(this,i,p)}createVertexBuffer(i,p,_){return new Ki(this,i,p,_)}createRenderbuffer(i,p,_){const b=this.gl,T=b.createRenderbuffer();return this.bindRenderbuffer.set(T),b.renderbufferStorage(b.RENDERBUFFER,i,p,_),this.bindRenderbuffer.set(null),T}createFramebuffer(i,p,_,b){return new hg(this,i,p,_,b)}clear({color:i,depth:p,stencil:_}){const b=this.gl;let T=0;i&&(T|=b.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),p!==void 0&&(T|=b.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),_!==void 0&&(T|=b.STENCIL_BUFFER_BIT,this.clearStencil.set(_),this.stencilMask.set(255)),b.clear(T)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){u.aE(i.blendFunction,ta.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return $n(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var p;return $n(this.gl)?this.gl.deleteVertexArray(i):(p=this.gl.getExtension("OES_vertex_array_object"))===null||p===void 0?void 0:p.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class Mn{constructor(i,p,_){this.func=i,this.mask=p,this.range=_}}Mn.ReadOnly=!1,Mn.ReadWrite=!0,Mn.disabled=new Mn(519,Mn.ReadOnly,[0,1]);const ql=7680;class Gn{constructor(i,p,_,b,T,j){this.test=i,this.ref=p,this.mask=_,this.fail=b,this.depthFail=T,this.pass=j}}Gn.disabled=new Gn({func:519,mask:0},0,0,ql,ql,ql);class mi{constructor(i,p,_){this.enable=i,this.mode=p,this.frontFace=_}}let bl;function gc(D,i,p,_,b){const T=D.context,j=T.gl,$=D.useProgram("collisionBox"),V=[];let K=0,te=0;for(let $e=0;$e<_.length;$e++){const We=_[$e],Le=i.getTile(We).getBucket(p);if(!Le)continue;const et=b?Le.textCollisionBox:Le.iconCollisionBox,rt=Le.collisionCircleArray;if(rt.length>0){const gt=u.H();u.aQ(gt,Le.placementInvProjMatrix,D.transform.glCoordMatrix),u.aQ(gt,gt,Le.placementViewportMatrix),V.push({circleArray:rt,circleOffset:te,transform:We.posMatrix,invTransform:gt,coord:We}),K+=rt.length/4,te=K}et&&$.draw(T,j.LINES,Mn.disabled,Gn.disabled,D.colorModeForRenderPass(),mi.disabled,{u_matrix:We.posMatrix,u_pixel_extrude_scale:[1/(re=D.transform).width,1/re.height]},D.style.map.terrain&&D.style.map.terrain.getTerrainData(We),p.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,null,D.transform.zoom,null,null,et.collisionVertexBuffer)}var re;if(!b||!V.length)return;const ye=D.useProgram("collisionCircle"),we=new u.aR;we.resize(4*K),we._trim();let Te=0;for(const $e of V)for(let We=0;We<$e.circleArray.length/4;We++){const Le=4*We,et=$e.circleArray[Le+0],rt=$e.circleArray[Le+1],gt=$e.circleArray[Le+2],Bt=$e.circleArray[Le+3];we.emplace(Te++,et,rt,gt,Bt,0),we.emplace(Te++,et,rt,gt,Bt,1),we.emplace(Te++,et,rt,gt,Bt,2),we.emplace(Te++,et,rt,gt,Bt,3)}(!bl||bl.length<2*K)&&(bl=(function($e){const We=2*$e,Le=new u.aT;Le.resize(We),Le._trim();for(let et=0;et<We;et++){const rt=6*et;Le.uint16[rt+0]=4*et+0,Le.uint16[rt+1]=4*et+1,Le.uint16[rt+2]=4*et+2,Le.uint16[rt+3]=4*et+2,Le.uint16[rt+4]=4*et+3,Le.uint16[rt+5]=4*et+0}return Le})(K));const je=T.createIndexBuffer(bl,!0),Fe=T.createVertexBuffer(we,u.aS.members,!0);for(const $e of V){const We=Nt($e.transform,$e.invTransform,D.transform);ye.draw(T,j.TRIANGLES,Mn.disabled,Gn.disabled,D.colorModeForRenderPass(),mi.disabled,We,D.style.map.terrain&&D.style.map.terrain.getTerrainData($e.coord),p.id,Fe,je,u.a0.simpleSegment(0,2*$e.circleOffset,$e.circleArray.length,$e.circleArray.length/2),null,D.transform.zoom,null,null,null)}Fe.destroy(),je.destroy()}mi.disabled=new mi(!1,1029,2305),mi.backCCW=new mi(!0,1029,2305);const mc=u.an(new Float32Array(16));function yc(D,i,p,_,b,T){const{horizontalAlign:j,verticalAlign:$}=u.au(D);return new u.P((-(j-.5)*i/b+_[0])*T,(-($-.5)*p/b+_[1])*T)}function wl(D,i,p,_,b,T){const j=i.tileAnchorPoint.add(new u.P(i.translation[0],i.translation[1]));if(i.pitchWithMap){let $=_.mult(T);p||($=$.rotate(-b));const V=j.add($);return Ne(V.x,V.y,i.labelPlaneMatrix,i.getElevation).point}if(p){const $=At(i.tileAnchorPoint.x+1,i.tileAnchorPoint.y,i).point.sub(D),V=Math.atan($.y/$.x)+($.x<0?Math.PI:0);return D.add(_.rotate(V))}return D.add(_)}function Xc(D,i,p,_,b,T,j,$,V,K,te,re,ye,we){const Te=D.text.placedSymbolArray,je=D.text.dynamicLayoutVertexArray,Fe=D.icon.dynamicLayoutVertexArray,$e={};je.clear();for(let We=0;We<Te.length;We++){const Le=Te.get(We),et=Le.hidden||!Le.crossTileID||D.allowVerticalPlacement&&!Le.placedOrientation?null:_[Le.crossTileID];if(et){const rt=new u.P(Le.anchorX,Le.anchorY),gt={getElevation:we,width:b.width,height:b.height,labelPlaneMatrix:T,pitchWithMap:p,projection:te,tileAnchorPoint:rt,translation:re,unwrappedTileID:ye},Bt=p?Ne(rt.x,rt.y,j,we):At(rt.x,rt.y,gt),ir=se(b.cameraToCenterDistance,Bt.signedDistanceFromCamera);let ur=u.ai(D.textSizeData,V,Le)*ir/u.ap;p&&(ur*=D.tilePixelRatio/$);const{width:mr,height:hr,anchor:or,textOffset:xr,textBoxScale:Jr}=et,fr=yc(or,mr,hr,xr,Jr,ur),ar=te.getPitchedTextCorrection(b,rt.add(new u.P(re[0],re[1])),ye),Hr=wl(Bt.point,gt,i,fr,b.angle,ar),vi=D.allowVerticalPlacement&&Le.placedOrientation===u.ah.vertical?Math.PI/2:0;for(let an=0;an<Le.numGlyphs;an++)u.aj(je,Hr,vi);K&&Le.associatedIconIndex>=0&&($e[Le.associatedIconIndex]={shiftedAnchor:Hr,angle:vi})}else $r(Le.numGlyphs,je)}if(K){Fe.clear();const We=D.icon.placedSymbolArray;for(let Le=0;Le<We.length;Le++){const et=We.get(Le);if(et.hidden)$r(et.numGlyphs,Fe);else{const rt=$e[Le];if(rt)for(let gt=0;gt<et.numGlyphs;gt++)u.aj(Fe,rt.shiftedAnchor,rt.angle);else $r(et.numGlyphs,Fe)}}D.icon.dynamicLayoutVertexBuffer.updateData(Fe)}D.text.dynamicLayoutVertexBuffer.updateData(je)}function Zo(D,i,p){return p.iconsInText&&i?"symbolTextAndIcon":D?"symbolSDF":"symbolIcon"}function Oh(D,i,p,_,b,T,j,$,V,K,te,re){const ye=D.context,we=ye.gl,Te=D.transform,je=Ul(),Fe=$==="map",$e=V==="map",We=$!=="viewport"&&p.layout.get("symbol-placement")!=="point",Le=Fe&&!$e&&!We,et=!$e&&We,rt=!p.layout.get("symbol-sort-key").isConstant();let gt=!1;const Bt=D.depthModeForSublayer(0,Mn.ReadOnly),ir=p._unevaluatedLayout.hasValue("text-variable-anchor")||p._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ur=[],mr=je.getCircleRadiusCorrection(Te);for(const hr of _){const or=i.getTile(hr),xr=or.getBucket(p);if(!xr)continue;const Jr=b?xr.text:xr.icon;if(!Jr||!Jr.segments.get().length||!Jr.hasVisibleVertices)continue;const fr=Jr.programConfigurations.get(p.id),ar=b||xr.sdfIcons,Hr=b?xr.textSizeData:xr.iconSizeData,vi=$e||Te.pitch!==0,an=D.useProgram(Zo(ar,b,xr),fr),Ln=u.ag(Hr,Te.zoom),ni=D.style.map.terrain&&D.style.map.terrain.getTerrainData(hr);let ia,zs,In,ho,Vi=[0,0],qi=null;if(b)zs=or.glyphAtlasTexture,In=we.LINEAR,ia=or.glyphAtlasTexture.size,xr.iconsInText&&(Vi=or.imageAtlasTexture.size,qi=or.imageAtlasTexture,ho=vi||D.options.rotating||D.options.zooming||Hr.kind==="composite"||Hr.kind==="camera"?we.LINEAR:we.NEAREST);else{const Cn=p.layout.get("icon-size").constantOr(0)!==1||xr.iconsNeedLinear;zs=or.imageAtlasTexture,In=ar||D.options.rotating||D.options.zooming||Cn||vi?we.LINEAR:we.NEAREST,ia=or.imageAtlasTexture.size}const Da=_n(or,1,D.transform.zoom),fs=et?hr.posMatrix:mc,Ec=Io(fs,$e,Fe,D.transform,Da),Yo=wo(fs,$e,Fe,D.transform,Da),eo=wo(hr.posMatrix,$e,Fe,D.transform,Da),ci=je.translatePosition(D.transform,or,T,j),Ac=ir&&xr.hasTextData(),Jo=p.layout.get("icon-text-fit")!=="none"&&Ac&&xr.hasIconData();if(We){const Cn=D.style.map.terrain?(id,Di)=>D.style.map.terrain.getElevation(hr,id,Di):null,ps=p.layout.get("text-rotation-alignment")==="map";Ee(xr,hr.posMatrix,D,b,Ec,eo,$e,K,ps,je,hr.toUnwrapped(),Te.width,Te.height,ci,Cn)}const sn=hr.posMatrix,Vn=b&&ir||Jo,Ti=We||Vn?mc:Ec,Qo=Yo,Ma=ar&&p.paint.get(b?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let za;za=ar?xr.iconsInText?Ai(Hr.kind,Ln,Le,$e,We,Vn,D,sn,Ti,Qo,ci,ia,Vi,mr):Br(Hr.kind,Ln,Le,$e,We,Vn,D,sn,Ti,Qo,ci,b,ia,!0,mr):qt(Hr.kind,Ln,Le,$e,We,Vn,D,sn,Ti,Qo,ci,b,ia,mr);const Bo={program:an,buffers:Jr,uniformValues:za,atlasTexture:zs,atlasTextureIcon:qi,atlasInterpolation:In,atlasInterpolationIcon:ho,isSDF:ar,hasHalo:Ma};if(rt&&xr.canOverlap){gt=!0;const Cn=Jr.segments.get();for(const ps of Cn)ur.push({segments:new u.a0([ps]),sortKey:ps.sortKey,state:Bo,terrainData:ni})}else ur.push({segments:Jr.segments,sortKey:0,state:Bo,terrainData:ni})}gt&&ur.sort(((hr,or)=>hr.sortKey-or.sortKey));for(const hr of ur){const or=hr.state;if(ye.activeTexture.set(we.TEXTURE0),or.atlasTexture.bind(or.atlasInterpolation,we.CLAMP_TO_EDGE),or.atlasTextureIcon&&(ye.activeTexture.set(we.TEXTURE1),or.atlasTextureIcon&&or.atlasTextureIcon.bind(or.atlasInterpolationIcon,we.CLAMP_TO_EDGE)),or.isSDF){const xr=or.uniformValues;or.hasHalo&&(xr.u_is_halo=1,hu(or.buffers,hr.segments,p,D,or.program,Bt,te,re,xr,hr.terrainData)),xr.u_is_halo=0}hu(or.buffers,hr.segments,p,D,or.program,Bt,te,re,or.uniformValues,hr.terrainData)}}function hu(D,i,p,_,b,T,j,$,V,K){const te=_.context;b.draw(te,te.gl.TRIANGLES,T,j,$,mi.disabled,V,K,p.id,D.layoutVertexBuffer,D.indexBuffer,i,p.paint,_.transform.zoom,D.programConfigurations.get(p.id),D.dynamicLayoutVertexBuffer,D.opacityVertexBuffer)}function Wd(D,i,p,_){const b=D.context,T=b.gl,j=Gn.disabled,$=new ta([T.ONE,T.ONE],u.aM.transparent,[!0,!0,!0,!0]),V=i.getBucket(p);if(!V)return;const K=_.key;let te=p.heatmapFbos.get(K);te||(te=$u(b,i.tileSize,i.tileSize),p.heatmapFbos.set(K,te)),b.bindFramebuffer.set(te.framebuffer),b.viewport.set([0,0,i.tileSize,i.tileSize]),b.clear({color:u.aM.transparent});const re=V.programConfigurations.get(p.id),ye=D.useProgram("heatmap",re),we=D.style.map.terrain.getTerrainData(_);ye.draw(b,T.TRIANGLES,Mn.disabled,j,$,mi.disabled,Gt(_.posMatrix,i,D.transform.zoom,p.paint.get("heatmap-intensity")),we,p.id,V.layoutVertexBuffer,V.indexBuffer,V.segments,p.paint,D.transform.zoom,re)}function fu(D,i,p){const _=D.context,b=_.gl;_.setColorMode(D.colorModeForRenderPass());const T=vc(_,i),j=p.key,$=i.heatmapFbos.get(j);$&&(_.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,$.colorAttachment.get()),_.activeTexture.set(b.TEXTURE1),T.bind(b.LINEAR,b.CLAMP_TO_EDGE),D.useProgram("heatmapTexture").draw(_,b.TRIANGLES,Mn.disabled,Gn.disabled,D.colorModeForRenderPass(),mi.disabled,gn(D,i,0,1),null,i.id,D.rasterBoundsBuffer,D.quadTriangleIndexBuffer,D.rasterBoundsSegments,i.paint,D.transform.zoom),$.destroy(),i.heatmapFbos.delete(j))}function $u(D,i,p){var _,b;const T=D.gl,j=T.createTexture();T.bindTexture(T.TEXTURE_2D,j),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.LINEAR),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,T.LINEAR);const $=(_=D.HALF_FLOAT)!==null&&_!==void 0?_:T.UNSIGNED_BYTE,V=(b=D.RGBA16F)!==null&&b!==void 0?b:T.RGBA;T.texImage2D(T.TEXTURE_2D,0,V,i,p,0,T.RGBA,$,null);const K=D.createFramebuffer(i,p,!1,!1);return K.colorAttachment.set(j),K}function vc(D,i){return i.colorRampTexture||(i.colorRampTexture=new _e(D,i.colorRamp,D.gl.RGBA)),i.colorRampTexture}function cs(D,i,p,_,b){if(!p||!_||!_.imageAtlas)return;const T=_.imageAtlas.patternPositions;let j=T[p.to.toString()],$=T[p.from.toString()];if(!j&&$&&(j=$),!$&&j&&($=j),!j||!$){const V=b.getPaintProperty(i);j=T[V],$=T[V]}j&&$&&D.setConstantPatternPositions(j,$)}function Gu(D,i,p,_,b,T,j){const $=D.context.gl,V="fill-pattern",K=p.paint.get(V),te=K&&K.constantOr(1),re=p.getCrossfadeParameters();let ye,we,Te,je,Fe;j?(we=te&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ye=$.LINES):(we=te?"fillPattern":"fill",ye=$.TRIANGLES);const $e=K.constantOr(null);for(const We of _){const Le=i.getTile(We);if(te&&!Le.patternsLoaded())continue;const et=Le.getBucket(p);if(!et)continue;const rt=et.programConfigurations.get(p.id),gt=D.useProgram(we,rt),Bt=D.style.map.terrain&&D.style.map.terrain.getTerrainData(We);te&&(D.context.activeTexture.set($.TEXTURE0),Le.imageAtlasTexture.bind($.LINEAR,$.CLAMP_TO_EDGE),rt.updatePaintBuffers(re)),cs(rt,V,$e,Le,p);const ir=Bt?We:null,ur=D.translatePosMatrix(ir?ir.posMatrix:We.posMatrix,Le,p.paint.get("fill-translate"),p.paint.get("fill-translate-anchor"));if(j){je=et.indexBuffer2,Fe=et.segments2;const mr=[$.drawingBufferWidth,$.drawingBufferHeight];Te=we==="fillOutlinePattern"&&te?jt(ur,D,re,Le,mr):wt(ur,mr)}else je=et.indexBuffer,Fe=et.segments,Te=te?Gr(ur,D,re,Le):$t(ur);gt.draw(D.context,ye,b,D.stencilModeForClipping(We),T,mi.disabled,Te,Bt,p.id,et.layoutVertexBuffer,je,Fe,p.paint,D.transform.zoom,rt)}}function jh(D,i,p,_,b,T,j){const $=D.context,V=$.gl,K="fill-extrusion-pattern",te=p.paint.get(K),re=te.constantOr(1),ye=p.getCrossfadeParameters(),we=p.paint.get("fill-extrusion-opacity"),Te=te.constantOr(null);for(const je of _){const Fe=i.getTile(je),$e=Fe.getBucket(p);if(!$e)continue;const We=D.style.map.terrain&&D.style.map.terrain.getTerrainData(je),Le=$e.programConfigurations.get(p.id),et=D.useProgram(re?"fillExtrusionPattern":"fillExtrusion",Le);re&&(D.context.activeTexture.set(V.TEXTURE0),Fe.imageAtlasTexture.bind(V.LINEAR,V.CLAMP_TO_EDGE),Le.updatePaintBuffers(ye)),cs(Le,K,Te,Fe,p);const rt=D.translatePosMatrix(je.posMatrix,Fe,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),gt=p.paint.get("fill-extrusion-vertical-gradient"),Bt=re?ht(rt,D,gt,we,je,ye,Fe):ot(rt,D,gt,we);et.draw($,$.gl.TRIANGLES,b,T,j,mi.backCCW,Bt,We,p.id,$e.layoutVertexBuffer,$e.indexBuffer,$e.segments,p.paint,D.transform.zoom,Le,D.style.map.terrain&&$e.centroidVertexBuffer)}}function Yc(D,i,p,_,b,T,j){const $=D.context,V=$.gl,K=p.fbo;if(!K)return;const te=D.useProgram("hillshade"),re=D.style.map.terrain&&D.style.map.terrain.getTerrainData(i);$.activeTexture.set(V.TEXTURE0),V.bindTexture(V.TEXTURE_2D,K.colorAttachment.get()),te.draw($,V.TRIANGLES,b,T,j,mi.disabled,((ye,we,Te,je)=>{const Fe=Te.paint.get("hillshade-shadow-color"),$e=Te.paint.get("hillshade-highlight-color"),We=Te.paint.get("hillshade-accent-color");let Le=Te.paint.get("hillshade-illumination-direction")*(Math.PI/180);Te.paint.get("hillshade-illumination-anchor")==="viewport"&&(Le-=ye.transform.angle);const et=!ye.options.moving;return{u_matrix:je?je.posMatrix:ye.transform.calculatePosMatrix(we.tileID.toUnwrapped(),et),u_image:0,u_latrange:He(0,we.tileID),u_light:[Te.paint.get("hillshade-exaggeration"),Le],u_shadow:Fe,u_highlight:$e,u_accent:We}})(D,p,_,re?i:null),re,_.id,D.rasterBoundsBuffer,D.quadTriangleIndexBuffer,D.rasterBoundsSegments)}function Jc(D,i,p,_,b,T){const j=D.context,$=j.gl,V=i.dem;if(V&&V.data){const K=V.dim,te=V.stride,re=V.getPixels();if(j.activeTexture.set($.TEXTURE1),j.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||D.getTileTexture(te),i.demTexture){const we=i.demTexture;we.update(re,{premultiply:!1}),we.bind($.NEAREST,$.CLAMP_TO_EDGE)}else i.demTexture=new _e(j,re,$.RGBA,{premultiply:!1}),i.demTexture.bind($.NEAREST,$.CLAMP_TO_EDGE);j.activeTexture.set($.TEXTURE0);let ye=i.fbo;if(!ye){const we=new _e(j,{width:K,height:K,data:null},$.RGBA);we.bind($.LINEAR,$.CLAMP_TO_EDGE),ye=i.fbo=j.createFramebuffer(K,K,!0,!1),ye.colorAttachment.set(we.texture)}j.bindFramebuffer.set(ye.framebuffer),j.viewport.set([0,0,K,K]),D.useProgram("hillshadePrepare").draw(j,$.TRIANGLES,_,b,T,mi.disabled,((we,Te)=>{const je=Te.stride,Fe=u.H();return u.aP(Fe,0,u.X,-u.X,0,0,1),u.J(Fe,Fe,[0,-u.X,0]),{u_matrix:Fe,u_image:1,u_dimension:[je,je],u_zoom:we.overscaledZ,u_unpack:Te.getUnpackVector()}})(i.tileID,V),null,p.id,D.rasterBoundsBuffer,D.quadTriangleIndexBuffer,D.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function xc(D,i,p,_,b,T){const j=_.paint.get("raster-fade-duration");if(!T&&j>0){const $=C.now(),V=($-D.timeAdded)/j,K=i?($-i.timeAdded)/j:-1,te=p.getSource(),re=b.coveringZoomLevel({tileSize:te.tileSize,roundZoom:te.roundZoom}),ye=!i||Math.abs(i.tileID.overscaledZ-re)>Math.abs(D.tileID.overscaledZ-re),we=ye&&D.refreshedUponExpiration?1:u.ac(ye?V:1-K,0,1);return D.refreshedUponExpiration&&V>=1&&(D.refreshedUponExpiration=!1),i?{opacity:1,mix:1-we}:{opacity:we,mix:0}}return{opacity:1,mix:0}}const ra=new u.aM(1,0,0,1),Un=new u.aM(0,1,0,1),Hd=new u.aM(0,0,1,1),fg=new u.aM(1,0,1,1),Uf=new u.aM(0,1,1,1);function _c(D,i,p,_){pu(D,0,i+p/2,D.transform.width,p,_)}function Rh(D,i,p,_){pu(D,i-p/2,0,p,D.transform.height,_)}function pu(D,i,p,_,b,T){const j=D.context,$=j.gl;$.enable($.SCISSOR_TEST),$.scissor(i*D.pixelRatio,p*D.pixelRatio,_*D.pixelRatio,b*D.pixelRatio),j.clear({color:T}),$.disable($.SCISSOR_TEST)}function lt(D,i,p){const _=D.context,b=_.gl,T=p.posMatrix,j=D.useProgram("debug"),$=Mn.disabled,V=Gn.disabled,K=D.colorModeForRenderPass(),te="$debug",re=D.style.map.terrain&&D.style.map.terrain.getTerrainData(p);_.activeTexture.set(b.TEXTURE0);const ye=i.getTileByID(p.key).latestRawTileData,we=Math.floor((ye&&ye.byteLength||0)/1024),Te=i.getTile(p).tileSize,je=512/Math.min(Te,512)*(p.overscaledZ/D.transform.zoom)*.5;let Fe=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(Fe+=` => ${p.overscaledZ}`),(function($e,We){$e.initDebugOverlayCanvas();const Le=$e.debugOverlayCanvas,et=$e.context.gl,rt=$e.debugOverlayCanvas.getContext("2d");rt.clearRect(0,0,Le.width,Le.height),rt.shadowColor="white",rt.shadowBlur=2,rt.lineWidth=1.5,rt.strokeStyle="white",rt.textBaseline="top",rt.font="bold 36px Open Sans, sans-serif",rt.fillText(We,5,5),rt.strokeText(We,5,5),$e.debugOverlayTexture.update(Le),$e.debugOverlayTexture.bind(et.LINEAR,et.CLAMP_TO_EDGE)})(D,`${Fe} ${we}kB`),j.draw(_,b.TRIANGLES,$,V,ta.alphaBlended,mi.disabled,Yr(T,u.aM.transparent,je),null,te,D.debugBuffer,D.quadTriangleIndexBuffer,D.debugSegments),j.draw(_,b.LINE_STRIP,$,V,K,mi.disabled,Yr(T,u.aM.red),re,te,D.debugBuffer,D.tileBorderIndexBuffer,D.debugSegments)}function Ft(D,i,p){const _=D.context,b=_.gl,T=D.colorModeForRenderPass(),j=new Mn(b.LEQUAL,Mn.ReadWrite,D.depthRangeFor3D),$=D.useProgram("terrain"),V=i.getTerrainMesh();_.bindFramebuffer.set(null),_.viewport.set([0,0,D.width,D.height]);for(const K of p){const te=D.renderToTexture.getTexture(K),re=i.getTerrainData(K.tileID);_.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,te.texture);const ye=D.transform.calculatePosMatrix(K.tileID.toUnwrapped()),we=i.getMeshFrameDelta(D.transform.zoom),Te=D.transform.calculateFogMatrix(K.tileID.toUnwrapped()),je=qo(ye,we,Te,D.style.sky,D.transform.pitch);$.draw(_,b.TRIANGLES,j,Gn.disabled,T,mi.backCCW,je,re,"terrain",V.vertexBuffer,V.indexBuffer,V.segments)}}class Ct{constructor(i,p,_){this.vertexBuffer=i,this.indexBuffer=p,this.segments=_}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class Cr{constructor(i,p){this.context=new Ih(i),this.transform=p,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=jr.maxUnderzooming+jr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new lu}resize(i,p,_){if(this.width=Math.floor(i*_),this.height=Math.floor(p*_),this.pixelRatio=_,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const b of this.style._order)this.style._layers[b].resize()}setup(){const i=this.context,p=new u.aX;p.emplaceBack(0,0),p.emplaceBack(u.X,0),p.emplaceBack(0,u.X),p.emplaceBack(u.X,u.X),this.tileExtentBuffer=i.createVertexBuffer(p,La.members),this.tileExtentSegments=u.a0.simpleSegment(0,0,4,2);const _=new u.aX;_.emplaceBack(0,0),_.emplaceBack(u.X,0),_.emplaceBack(0,u.X),_.emplaceBack(u.X,u.X),this.debugBuffer=i.createVertexBuffer(_,La.members),this.debugSegments=u.a0.simpleSegment(0,0,4,5);const b=new u.$;b.emplaceBack(0,0,0,0),b.emplaceBack(u.X,0,u.X,0),b.emplaceBack(0,u.X,0,u.X),b.emplaceBack(u.X,u.X,u.X,u.X),this.rasterBoundsBuffer=i.createVertexBuffer(b,fi.members),this.rasterBoundsSegments=u.a0.simpleSegment(0,0,4,2);const T=new u.aX;T.emplaceBack(0,0),T.emplaceBack(1,0),T.emplaceBack(0,1),T.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(T,La.members),this.viewportSegments=u.a0.simpleSegment(0,0,4,2);const j=new u.aZ;j.emplaceBack(0),j.emplaceBack(1),j.emplaceBack(3),j.emplaceBack(2),j.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(j);const $=new u.aY;$.emplaceBack(0,1,2),$.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer($);const V=this.context.gl;this.stencilClearMode=new Gn({func:V.ALWAYS,mask:0},0,255,V.ZERO,V.ZERO,V.ZERO)}clearStencil(){const i=this.context,p=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const _=u.H();u.aP(_,0,this.width,this.height,0,0,1),u.K(_,_,[p.drawingBufferWidth,p.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,p.TRIANGLES,Mn.disabled,this.stencilClearMode,ta.disabled,mi.disabled,Tr(_),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,p){if(this.currentStencilSource===i.source||!i.isTileClipped()||!p||!p.length)return;this.currentStencilSource=i.source;const _=this.context,b=_.gl;this.nextStencilID+p.length>256&&this.clearStencil(),_.setColorMode(ta.disabled),_.setDepthMode(Mn.disabled);const T=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const j of p){const $=this._tileClippingMaskIDs[j.key]=this.nextStencilID++,V=this.style.map.terrain&&this.style.map.terrain.getTerrainData(j);T.draw(_,b.TRIANGLES,Mn.disabled,new Gn({func:b.ALWAYS,mask:0},$,255,b.KEEP,b.KEEP,b.REPLACE),ta.disabled,mi.disabled,Tr(j.posMatrix),V,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,p=this.context.gl;return new Gn({func:p.NOTEQUAL,mask:255},i,255,p.KEEP,p.KEEP,p.REPLACE)}stencilModeForClipping(i){const p=this.context.gl;return new Gn({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,p.KEEP,p.KEEP,p.REPLACE)}stencilConfigForOverlap(i){const p=this.context.gl,_=i.sort(((j,$)=>$.overscaledZ-j.overscaledZ)),b=_[_.length-1].overscaledZ,T=_[0].overscaledZ-b+1;if(T>1){this.currentStencilSource=void 0,this.nextStencilID+T>256&&this.clearStencil();const j={};for(let $=0;$<T;$++)j[$+b]=new Gn({func:p.GEQUAL,mask:255},$+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=T,[j,_]}return[{[b]:Gn.disabled},_]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new ta([i.CONSTANT_COLOR,i.ONE],new u.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ta.unblended:ta.alphaBlended}depthModeForSublayer(i,p,_){if(!this.opaquePassEnabledForLayer())return Mn.disabled;const b=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new Mn(_||this.context.gl.LEQUAL,p,[b,b])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,p){this.style=i,this.options=p,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(C.now()),this.imageManager.beginFrame();const _=this.style._order,b=this.style.sourceCaches,T={},j={},$={};for(const V in b){const K=b[V];K.used&&K.prepare(this.context),T[V]=K.getVisibleCoordinates(),j[V]=T[V].slice().reverse(),$[V]=K.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let V=0;V<_.length;V++)if(this.style._layers[_[V]].is3D()){this.opaquePassCutoff=V;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const V of _){const K=this.style._layers[V];if(!K.hasOffscreenPass()||K.isHidden(this.transform.zoom))continue;const te=j[K.source];(K.type==="custom"||te.length)&&this.renderLayer(this,b[K.source],K,te)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?u.aM.black:u.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(V,K){const te=V.context,re=te.gl,ye=(($e,We,Le)=>({u_sky_color:$e.properties.get("sky-color"),u_horizon_color:$e.properties.get("horizon-color"),u_horizon:(We.height/2+We.getHorizon())*Le,u_sky_horizon_blend:$e.properties.get("sky-horizon-blend")*We.height/2*Le}))(K,V.style.map.transform,V.pixelRatio),we=new Mn(re.LEQUAL,Mn.ReadWrite,[0,1]),Te=Gn.disabled,je=V.colorModeForRenderPass(),Fe=V.useProgram("sky");if(!K.mesh){const $e=new u.aX;$e.emplaceBack(-1,-1),$e.emplaceBack(1,-1),$e.emplaceBack(1,1),$e.emplaceBack(-1,1);const We=new u.aY;We.emplaceBack(0,1,2),We.emplaceBack(0,2,3),K.mesh=new Ct(te.createVertexBuffer($e,La.members),te.createIndexBuffer(We),u.a0.simpleSegment(0,0,$e.length,We.length))}Fe.draw(te,re.TRIANGLES,we,Te,je,mi.disabled,ye,void 0,"sky",K.mesh.vertexBuffer,K.mesh.indexBuffer,K.mesh.segments)})(this,this.style.sky),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=_.length-1;this.currentLayer>=0;this.currentLayer--){const V=this.style._layers[_[this.currentLayer]],K=b[V.source],te=T[V.source];this._renderTileClippingMasks(V,te),this.renderLayer(this,K,V,te)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<_.length;this.currentLayer++){const V=this.style._layers[_[this.currentLayer]],K=b[V.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(V))continue;const te=(V.type==="symbol"?$:j)[V.source];this._renderTileClippingMasks(V,T[V.source]),this.renderLayer(this,K,V,te)}if(this.options.showTileBoundaries){const V=(function(K,te){let re=null;const ye=Object.values(K._layers).flatMap((Fe=>Fe.source&&!Fe.isHidden(te)?[K.sourceCaches[Fe.source]]:[])),we=ye.filter((Fe=>Fe.getSource().type==="vector")),Te=ye.filter((Fe=>Fe.getSource().type!=="vector")),je=Fe=>{(!re||re.getSource().maxzoom<Fe.getSource().maxzoom)&&(re=Fe)};return we.forEach((Fe=>je(Fe))),re||Te.forEach((Fe=>je(Fe))),re})(this.style,this.transform.zoom);V&&(function(K,te,re){for(let ye=0;ye<re.length;ye++)lt(K,te,re[ye])})(this,V,V.getVisibleCoordinates())}this.options.showPadding&&(function(V){const K=V.transform.padding;_c(V,V.transform.height-(K.top||0),3,ra),_c(V,K.bottom||0,3,Un),Rh(V,K.left||0,3,Hd),Rh(V,V.transform.width-(K.right||0),3,fg);const te=V.transform.centerPoint;(function(re,ye,we,Te){pu(re,ye-1,we-10,2,20,Te),pu(re,ye-10,we-1,20,2,Te)})(V,te.x,V.transform.height-te.y,Uf)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(i){if(!this.style||!this.style.map||!this.style.map.terrain)return;const p=this.terrainFacilitator.matrix,_=this.transform.modelViewProjectionMatrix;let b=this.terrainFacilitator.dirty;b||(b=i?!u.a_(p,_):!u.a$(p,_)),b||(b=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),b&&(u.b0(p,_),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(T,j){const $=T.context,V=$.gl,K=ta.unblended,te=new Mn(V.LEQUAL,Mn.ReadWrite,[0,1]),re=j.getTerrainMesh(),ye=j.sourceCache.getRenderableTiles(),we=T.useProgram("terrainDepth");$.bindFramebuffer.set(j.getFramebuffer("depth").framebuffer),$.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),$.clear({color:u.aM.transparent,depth:1});for(const Te of ye){const je=j.getTerrainData(Te.tileID),Fe={u_matrix:T.transform.calculatePosMatrix(Te.tileID.toUnwrapped()),u_ele_delta:j.getMeshFrameDelta(T.transform.zoom)};we.draw($,V.TRIANGLES,te,Gn.disabled,K,mi.backCCW,Fe,je,"terrain",re.vertexBuffer,re.indexBuffer,re.segments)}$.bindFramebuffer.set(null),$.viewport.set([0,0,T.width,T.height])})(this,this.style.map.terrain),(function(T,j){const $=T.context,V=$.gl,K=ta.unblended,te=new Mn(V.LEQUAL,Mn.ReadWrite,[0,1]),re=j.getTerrainMesh(),ye=j.getCoordsTexture(),we=j.sourceCache.getRenderableTiles(),Te=T.useProgram("terrainCoords");$.bindFramebuffer.set(j.getFramebuffer("coords").framebuffer),$.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),$.clear({color:u.aM.transparent,depth:1}),j.coordsIndex=[];for(const je of we){const Fe=j.getTerrainData(je.tileID);$.activeTexture.set(V.TEXTURE0),V.bindTexture(V.TEXTURE_2D,ye.texture);const $e={u_matrix:T.transform.calculatePosMatrix(je.tileID.toUnwrapped()),u_terrain_coords_id:(255-j.coordsIndex.length)/255,u_texture:0,u_ele_delta:j.getMeshFrameDelta(T.transform.zoom)};Te.draw($,V.TRIANGLES,te,Gn.disabled,K,mi.backCCW,$e,Fe,"terrain",re.vertexBuffer,re.indexBuffer,re.segments),j.coordsIndex.push(je.tileID.key)}$.bindFramebuffer.set(null),$.viewport.set([0,0,T.width,T.height])})(this,this.style.map.terrain))}renderLayer(i,p,_,b){if(!_.isHidden(this.transform.zoom)&&(_.type==="background"||_.type==="custom"||(b||[]).length))switch(this.id=_.id,_.type){case"symbol":(function(T,j,$,V,K){if(T.renderPass!=="translucent")return;const te=Gn.disabled,re=T.colorModeForRenderPass();($._unevaluatedLayout.hasValue("text-variable-anchor")||$._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(ye,we,Te,je,Fe,$e,We,Le,et){const rt=we.transform,gt=Ul(),Bt=Fe==="map",ir=$e==="map";for(const ur of ye){const mr=je.getTile(ur),hr=mr.getBucket(Te);if(!hr||!hr.text||!hr.text.segments.get().length)continue;const or=u.ag(hr.textSizeData,rt.zoom),xr=_n(mr,1,we.transform.zoom),Jr=Io(ur.posMatrix,ir,Bt,we.transform,xr),fr=Te.layout.get("icon-text-fit")!=="none"&&hr.hasIconData();if(or){const ar=Math.pow(2,rt.zoom-mr.tileID.overscaledZ),Hr=we.style.map.terrain?(an,Ln)=>we.style.map.terrain.getElevation(ur,an,Ln):null,vi=gt.translatePosition(rt,mr,We,Le);Xc(hr,Bt,ir,et,rt,Jr,ur.posMatrix,ar,or,fr,gt,vi,ur.toUnwrapped(),Hr)}}})(V,T,$,j,$.layout.get("text-rotation-alignment"),$.layout.get("text-pitch-alignment"),$.paint.get("text-translate"),$.paint.get("text-translate-anchor"),K),$.paint.get("icon-opacity").constantOr(1)!==0&&Oh(T,j,$,V,!1,$.paint.get("icon-translate"),$.paint.get("icon-translate-anchor"),$.layout.get("icon-rotation-alignment"),$.layout.get("icon-pitch-alignment"),$.layout.get("icon-keep-upright"),te,re),$.paint.get("text-opacity").constantOr(1)!==0&&Oh(T,j,$,V,!0,$.paint.get("text-translate"),$.paint.get("text-translate-anchor"),$.layout.get("text-rotation-alignment"),$.layout.get("text-pitch-alignment"),$.layout.get("text-keep-upright"),te,re),j.map.showCollisionBoxes&&(gc(T,j,$,V,!0),gc(T,j,$,V,!1))})(i,p,_,b,this.style.placement.variableOffsets);break;case"circle":(function(T,j,$,V){if(T.renderPass!=="translucent")return;const K=$.paint.get("circle-opacity"),te=$.paint.get("circle-stroke-width"),re=$.paint.get("circle-stroke-opacity"),ye=!$.layout.get("circle-sort-key").isConstant();if(K.constantOr(1)===0&&(te.constantOr(1)===0||re.constantOr(1)===0))return;const we=T.context,Te=we.gl,je=T.depthModeForSublayer(0,Mn.ReadOnly),Fe=Gn.disabled,$e=T.colorModeForRenderPass(),We=[];for(let Le=0;Le<V.length;Le++){const et=V[Le],rt=j.getTile(et),gt=rt.getBucket($);if(!gt)continue;const Bt=gt.programConfigurations.get($.id),ir=T.useProgram("circle",Bt),ur=gt.layoutVertexBuffer,mr=gt.indexBuffer,hr=T.style.map.terrain&&T.style.map.terrain.getTerrainData(et),or={programConfiguration:Bt,program:ir,layoutVertexBuffer:ur,indexBuffer:mr,uniformValues:xt(T,et,rt,$),terrainData:hr};if(ye){const xr=gt.segments.get();for(const Jr of xr)We.push({segments:new u.a0([Jr]),sortKey:Jr.sortKey,state:or})}else We.push({segments:gt.segments,sortKey:0,state:or})}ye&&We.sort(((Le,et)=>Le.sortKey-et.sortKey));for(const Le of We){const{programConfiguration:et,program:rt,layoutVertexBuffer:gt,indexBuffer:Bt,uniformValues:ir,terrainData:ur}=Le.state;rt.draw(we,Te.TRIANGLES,je,Fe,$e,mi.disabled,ir,ur,$.id,gt,Bt,Le.segments,$.paint,T.transform.zoom,et)}})(i,p,_,b);break;case"heatmap":(function(T,j,$,V){if($.paint.get("heatmap-opacity")===0)return;const K=T.context;if(T.style.map.terrain){for(const te of V){const re=j.getTile(te);j.hasRenderableParent(te)||(T.renderPass==="offscreen"?Wd(T,re,$,te):T.renderPass==="translucent"&&fu(T,$,te))}K.viewport.set([0,0,T.width,T.height])}else T.renderPass==="offscreen"?(function(te,re,ye,we){const Te=te.context,je=Te.gl,Fe=Gn.disabled,$e=new ta([je.ONE,je.ONE],u.aM.transparent,[!0,!0,!0,!0]);(function(We,Le,et){const rt=We.gl;We.activeTexture.set(rt.TEXTURE1),We.viewport.set([0,0,Le.width/4,Le.height/4]);let gt=et.heatmapFbos.get(u.aU);gt?(rt.bindTexture(rt.TEXTURE_2D,gt.colorAttachment.get()),We.bindFramebuffer.set(gt.framebuffer)):(gt=$u(We,Le.width/4,Le.height/4),et.heatmapFbos.set(u.aU,gt))})(Te,te,ye),Te.clear({color:u.aM.transparent});for(let We=0;We<we.length;We++){const Le=we[We];if(re.hasRenderableParent(Le))continue;const et=re.getTile(Le),rt=et.getBucket(ye);if(!rt)continue;const gt=rt.programConfigurations.get(ye.id),Bt=te.useProgram("heatmap",gt),{zoom:ir}=te.transform;Bt.draw(Te,je.TRIANGLES,Mn.disabled,Fe,$e,mi.disabled,Gt(Le.posMatrix,et,ir,ye.paint.get("heatmap-intensity")),null,ye.id,rt.layoutVertexBuffer,rt.indexBuffer,rt.segments,ye.paint,te.transform.zoom,gt)}Te.viewport.set([0,0,te.width,te.height])})(T,j,$,V):T.renderPass==="translucent"&&(function(te,re){const ye=te.context,we=ye.gl;ye.setColorMode(te.colorModeForRenderPass());const Te=re.heatmapFbos.get(u.aU);Te&&(ye.activeTexture.set(we.TEXTURE0),we.bindTexture(we.TEXTURE_2D,Te.colorAttachment.get()),ye.activeTexture.set(we.TEXTURE1),vc(ye,re).bind(we.LINEAR,we.CLAMP_TO_EDGE),te.useProgram("heatmapTexture").draw(ye,we.TRIANGLES,Mn.disabled,Gn.disabled,te.colorModeForRenderPass(),mi.disabled,gn(te,re,0,1),null,re.id,te.viewportBuffer,te.quadTriangleIndexBuffer,te.viewportSegments,re.paint,te.transform.zoom))})(T,$)})(i,p,_,b);break;case"line":(function(T,j,$,V){if(T.renderPass!=="translucent")return;const K=$.paint.get("line-opacity"),te=$.paint.get("line-width");if(K.constantOr(1)===0||te.constantOr(1)===0)return;const re=T.depthModeForSublayer(0,Mn.ReadOnly),ye=T.colorModeForRenderPass(),we=$.paint.get("line-dasharray"),Te=$.paint.get("line-pattern"),je=Te.constantOr(1),Fe=$.paint.get("line-gradient"),$e=$.getCrossfadeParameters(),We=je?"linePattern":we?"lineSDF":Fe?"lineGradient":"line",Le=T.context,et=Le.gl;let rt=!0;for(const gt of V){const Bt=j.getTile(gt);if(je&&!Bt.patternsLoaded())continue;const ir=Bt.getBucket($);if(!ir)continue;const ur=ir.programConfigurations.get($.id),mr=T.context.program.get(),hr=T.useProgram(We,ur),or=rt||hr.program!==mr,xr=T.style.map.terrain&&T.style.map.terrain.getTerrainData(gt),Jr=Te.constantOr(null);if(Jr&&Bt.imageAtlas){const Hr=Bt.imageAtlas,vi=Hr.patternPositions[Jr.to.toString()],an=Hr.patternPositions[Jr.from.toString()];vi&&an&&ur.setConstantPatternPositions(vi,an)}const fr=xr?gt:null,ar=je?yt(T,Bt,$,$e,fr):we?Or(T,Bt,$,we,$e,fr):Fe?ct(T,Bt,$,ir.lineClipsArray.length,fr):bt(T,Bt,$,fr);if(je)Le.activeTexture.set(et.TEXTURE0),Bt.imageAtlasTexture.bind(et.LINEAR,et.CLAMP_TO_EDGE),ur.updatePaintBuffers($e);else if(we&&(or||T.lineAtlas.dirty))Le.activeTexture.set(et.TEXTURE0),T.lineAtlas.bind(Le);else if(Fe){const Hr=ir.gradients[$.id];let vi=Hr.texture;if($.gradientVersion!==Hr.version){let an=256;if($.stepInterpolant){const Ln=j.getSource().maxzoom,ni=gt.canonical.z===Ln?Math.ceil(1<<T.transform.maxZoom-gt.canonical.z):1;an=u.ac(u.aV(ir.maxLineLength/u.X*1024*ni),256,Le.maxTextureSize)}Hr.gradient=u.aW({expression:$.gradientExpression(),evaluationKey:"lineProgress",resolution:an,image:Hr.gradient||void 0,clips:ir.lineClipsArray}),Hr.texture?Hr.texture.update(Hr.gradient):Hr.texture=new _e(Le,Hr.gradient,et.RGBA),Hr.version=$.gradientVersion,vi=Hr.texture}Le.activeTexture.set(et.TEXTURE0),vi.bind($.stepInterpolant?et.NEAREST:et.LINEAR,et.CLAMP_TO_EDGE)}hr.draw(Le,et.TRIANGLES,re,T.stencilModeForClipping(gt),ye,mi.disabled,ar,xr,$.id,ir.layoutVertexBuffer,ir.indexBuffer,ir.segments,$.paint,T.transform.zoom,ur,ir.layoutVertexBuffer2),rt=!1}})(i,p,_,b);break;case"fill":(function(T,j,$,V){const K=$.paint.get("fill-color"),te=$.paint.get("fill-opacity");if(te.constantOr(1)===0)return;const re=T.colorModeForRenderPass(),ye=$.paint.get("fill-pattern"),we=T.opaquePassEnabledForLayer()&&!ye.constantOr(1)&&K.constantOr(u.aM.transparent).a===1&&te.constantOr(0)===1?"opaque":"translucent";if(T.renderPass===we){const Te=T.depthModeForSublayer(1,T.renderPass==="opaque"?Mn.ReadWrite:Mn.ReadOnly);Gu(T,j,$,V,Te,re,!1)}if(T.renderPass==="translucent"&&$.paint.get("fill-antialias")){const Te=T.depthModeForSublayer($.getPaintProperty("fill-outline-color")?2:0,Mn.ReadOnly);Gu(T,j,$,V,Te,re,!0)}})(i,p,_,b);break;case"fill-extrusion":(function(T,j,$,V){const K=$.paint.get("fill-extrusion-opacity");if(K!==0&&T.renderPass==="translucent"){const te=new Mn(T.context.gl.LEQUAL,Mn.ReadWrite,T.depthRangeFor3D);if(K!==1||$.paint.get("fill-extrusion-pattern").constantOr(1))jh(T,j,$,V,te,Gn.disabled,ta.disabled),jh(T,j,$,V,te,T.stencilModeFor3D(),T.colorModeForRenderPass());else{const re=T.colorModeForRenderPass();jh(T,j,$,V,te,Gn.disabled,re)}}})(i,p,_,b);break;case"hillshade":(function(T,j,$,V){if(T.renderPass!=="offscreen"&&T.renderPass!=="translucent")return;const K=T.context,te=T.depthModeForSublayer(0,Mn.ReadOnly),re=T.colorModeForRenderPass(),[ye,we]=T.renderPass==="translucent"?T.stencilConfigForOverlap(V):[{},V];for(const Te of we){const je=j.getTile(Te);je.needsHillshadePrepare!==void 0&&je.needsHillshadePrepare&&T.renderPass==="offscreen"?Jc(T,je,$,te,Gn.disabled,re):T.renderPass==="translucent"&&Yc(T,Te,je,$,te,ye[Te.overscaledZ],re)}K.viewport.set([0,0,T.width,T.height])})(i,p,_,b);break;case"raster":(function(T,j,$,V){if(T.renderPass!=="translucent"||$.paint.get("raster-opacity")===0||!V.length)return;const K=T.context,te=K.gl,re=j.getSource(),ye=T.useProgram("raster"),we=T.colorModeForRenderPass(),[Te,je]=re instanceof ba?[{},V]:T.stencilConfigForOverlap(V),Fe=je[je.length-1].overscaledZ,$e=!T.options.moving;for(const We of je){const Le=T.depthModeForSublayer(We.overscaledZ-Fe,$.paint.get("raster-opacity")===1?Mn.ReadWrite:Mn.ReadOnly,te.LESS),et=j.getTile(We);et.registerFadeDuration($.paint.get("raster-fade-duration"));const rt=j.findLoadedParent(We,0),gt=j.findLoadedSibling(We),Bt=xc(et,rt||gt||null,j,$,T.transform,T.style.map.terrain);let ir,ur;const mr=$.paint.get("raster-resampling")==="nearest"?te.NEAREST:te.LINEAR;K.activeTexture.set(te.TEXTURE0),et.texture.bind(mr,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),K.activeTexture.set(te.TEXTURE1),rt?(rt.texture.bind(mr,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),ir=Math.pow(2,rt.tileID.overscaledZ-et.tileID.overscaledZ),ur=[et.tileID.canonical.x*ir%1,et.tileID.canonical.y*ir%1]):et.texture.bind(mr,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),et.texture.useMipmap&&K.extTextureFilterAnisotropic&&T.transform.pitch>20&&te.texParameterf(te.TEXTURE_2D,K.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,K.extTextureFilterAnisotropicMax);const hr=T.style.map.terrain&&T.style.map.terrain.getTerrainData(We),or=hr?We:null,xr=or?or.posMatrix:T.transform.calculatePosMatrix(We.toUnwrapped(),$e),Jr=mn(xr,ur||[0,0],ir||1,Bt,$);re instanceof ba?ye.draw(K,te.TRIANGLES,Le,Gn.disabled,we,mi.disabled,Jr,hr,$.id,re.boundsBuffer,T.quadTriangleIndexBuffer,re.boundsSegments):ye.draw(K,te.TRIANGLES,Le,Te[We.overscaledZ],we,mi.disabled,Jr,hr,$.id,T.rasterBoundsBuffer,T.quadTriangleIndexBuffer,T.rasterBoundsSegments)}})(i,p,_,b);break;case"background":(function(T,j,$,V){const K=$.paint.get("background-color"),te=$.paint.get("background-opacity");if(te===0)return;const re=T.context,ye=re.gl,we=T.transform,Te=we.tileSize,je=$.paint.get("background-pattern");if(T.isPatternMissing(je))return;const Fe=!je&&K.a===1&&te===1&&T.opaquePassEnabledForLayer()?"opaque":"translucent";if(T.renderPass!==Fe)return;const $e=Gn.disabled,We=T.depthModeForSublayer(0,Fe==="opaque"?Mn.ReadWrite:Mn.ReadOnly),Le=T.colorModeForRenderPass(),et=T.useProgram(je?"backgroundPattern":"background"),rt=V||we.coveringTiles({tileSize:Te,terrain:T.style.map.terrain});je&&(re.activeTexture.set(ye.TEXTURE0),T.imageManager.bind(T.context));const gt=$.getCrossfadeParameters();for(const Bt of rt){const ir=V?Bt.posMatrix:T.transform.calculatePosMatrix(Bt.toUnwrapped()),ur=je?Wo(ir,te,T,je,{tileID:Bt,tileSize:Te},gt):Sa(ir,te,K),mr=T.style.map.terrain&&T.style.map.terrain.getTerrainData(Bt);et.draw(re,ye.TRIANGLES,We,$e,Le,mi.disabled,ur,mr,$.id,T.tileExtentBuffer,T.quadTriangleIndexBuffer,T.tileExtentSegments)}})(i,0,_,b);break;case"custom":(function(T,j,$){const V=T.context,K=$.implementation;if(T.renderPass==="offscreen"){const te=K.prerender;te&&(T.setCustomLayerDefaults(),V.setColorMode(T.colorModeForRenderPass()),te.call(K,V.gl,T.transform.customLayerMatrix()),V.setDirty(),T.setBaseState())}else if(T.renderPass==="translucent"){T.setCustomLayerDefaults(),V.setColorMode(T.colorModeForRenderPass()),V.setStencilMode(Gn.disabled);const te=K.renderingMode==="3d"?new Mn(T.context.gl.LEQUAL,Mn.ReadWrite,T.depthRangeFor3D):T.depthModeForSublayer(0,Mn.ReadOnly);V.setDepthMode(te),K.render(V.gl,T.transform.customLayerMatrix(),{farZ:T.transform.farZ,nearZ:T.transform.nearZ,fov:T.transform._fov,modelViewProjectionMatrix:T.transform.modelViewProjectionMatrix,projectionMatrix:T.transform.projectionMatrix}),V.setDirty(),T.setBaseState(),V.bindFramebuffer.set(null)}})(i,0,_)}}translatePosMatrix(i,p,_,b,T){if(!_[0]&&!_[1])return i;const j=T?b==="map"?this.transform.angle:0:b==="viewport"?-this.transform.angle:0;if(j){const K=Math.sin(j),te=Math.cos(j);_=[_[0]*te-_[1]*K,_[0]*K+_[1]*te]}const $=[T?_[0]:_n(p,_[0],this.transform.zoom),T?_[1]:_n(p,_[1],this.transform.zoom),0],V=new Float32Array(16);return u.J(V,i,$),V}saveTileTexture(i){const p=this._tileTextures[i.size[0]];p?p.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const p=this._tileTextures[i];return p&&p.length>0?p.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const p=this.imageManager.getPattern(i.from.toString()),_=this.imageManager.getPattern(i.to.toString());return!p||!_}useProgram(i,p){this.cache=this.cache||{};const _=i+(p?p.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[_]||(this.cache[_]=new vt(this.context,Vo[i],p,bi[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[_]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new _e(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:p}=this.context.gl;return this.width!==i||this.height!==p}}class hn{constructor(i,p){this.points=i,this.planes=p}static fromInvProjectionMatrix(i,p,_){const b=Math.pow(2,_),T=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(($=>{const V=1/($=u.af([],$,i))[3]/p*b;return u.b1($,$,[V,V,1/$[3],V])})),j=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(($=>{const V=(function(ye,we){var Te=we[0],je=we[1],Fe=we[2],$e=Te*Te+je*je+Fe*Fe;return $e>0&&($e=1/Math.sqrt($e)),ye[0]=we[0]*$e,ye[1]=we[1]*$e,ye[2]=we[2]*$e,ye})([],(function(ye,we,Te){var je=we[0],Fe=we[1],$e=we[2],We=Te[0],Le=Te[1],et=Te[2];return ye[0]=Fe*et-$e*Le,ye[1]=$e*We-je*et,ye[2]=je*Le-Fe*We,ye})([],he([],T[$[0]],T[$[1]]),he([],T[$[2]],T[$[1]]))),K=-((te=V)[0]*(re=T[$[1]])[0]+te[1]*re[1]+te[2]*re[2]);var te,re;return V.concat(K)}));return new hn(T,j)}}class zn{constructor(i,p){this.min=i,this.max=p,this.center=(function(_,b,T){return _[0]=.5*b[0],_[1]=.5*b[1],_[2]=.5*b[2],_})([],(function(_,b,T){return _[0]=b[0]+T[0],_[1]=b[1]+T[1],_[2]=b[2]+T[2],_})([],this.min,this.max))}quadrant(i){const p=[i%2==0,i<2],_=Q(this.min),b=Q(this.max);for(let T=0;T<p.length;T++)_[T]=p[T]?this.min[T]:this.center[T],b[T]=p[T]?this.center[T]:this.max[T];return b[2]=this.max[2],new zn(_,b)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const p=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let _=!0;for(let b=0;b<i.planes.length;b++){const T=i.planes[b];let j=0;for(let $=0;$<p.length;$++)u.b2(T,p[$])>=0&&j++;if(j===0)return 0;j!==p.length&&(_=!1)}if(_)return 2;for(let b=0;b<3;b++){let T=Number.MAX_VALUE,j=-Number.MAX_VALUE;for(let $=0;$<i.points.length;$++){const V=i.points[$][b]-this.min[b];T=Math.min(T,V),j=Math.max(j,V)}if(j<0||T>this.max[b]-this.min[b])return 0}return 1}}class ki{constructor(i=0,p=0,_=0,b=0){if(isNaN(i)||i<0||isNaN(p)||p<0||isNaN(_)||_<0||isNaN(b)||b<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=p,this.left=_,this.right=b}interpolate(i,p,_){return p.top!=null&&i.top!=null&&(this.top=u.y.number(i.top,p.top,_)),p.bottom!=null&&i.bottom!=null&&(this.bottom=u.y.number(i.bottom,p.bottom,_)),p.left!=null&&i.left!=null&&(this.left=u.y.number(i.left,p.left,_)),p.right!=null&&i.right!=null&&(this.right=u.y.number(i.right,p.right,_)),this}getCenter(i,p){const _=u.ac((this.left+i-this.right)/2,0,i),b=u.ac((this.top+p-this.bottom)/2,0,p);return new u.P(_,b)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new ki(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const yi=85.051129;class gu{constructor(i,p,_,b,T){this.tileSize=512,this._renderWorldCopies=T===void 0||!!T,this._minZoom=i||0,this._maxZoom=p||22,this._minPitch=_??0,this._maxPitch=b??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ki,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const i=new gu(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.lngRange=i.lngRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this.minElevationForCurrentTile=i.minElevationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const p=-u.b3(i,-180,180)*Math.PI/180;this.angle!==p&&(this._unmodified=!1,this.angle=p,this._calcMatrices(),this.rotationMatrix=(function(){var _=new u.A(4);return u.A!=Float32Array&&(_[1]=0,_[2]=0),_[0]=1,_[3]=1,_})(),(function(_,b,T){var j=b[0],$=b[1],V=b[2],K=b[3],te=Math.sin(T),re=Math.cos(T);_[0]=j*re+V*te,_[1]=$*re+K*te,_[2]=j*-te+V*re,_[3]=$*-te+K*re})(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const p=u.ac(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==p&&(this._unmodified=!1,this._pitch=p,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const p=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this.tileZoom=Math.max(0,Math.floor(p)),this.scale=this.zoomScale(p),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,p,_){this._unmodified=!1,this._edgeInsets.interpolate(i,p,_),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const p=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,p)}getVisibleUnwrappedCoordinates(i){const p=[new u.b4(0,i)];if(this._renderWorldCopies){const _=this.pointCoordinate(new u.P(0,0)),b=this.pointCoordinate(new u.P(this.width,0)),T=this.pointCoordinate(new u.P(this.width,this.height)),j=this.pointCoordinate(new u.P(0,this.height)),$=Math.floor(Math.min(_.x,b.x,T.x,j.x)),V=Math.floor(Math.max(_.x,b.x,T.x,j.x)),K=1;for(let te=$-K;te<=V+K;te++)te!==0&&p.push(new u.b4(te,i))}return p}coveringTiles(i){var p,_;let b=this.coveringZoomLevel(i);const T=b;if(i.minzoom!==void 0&&b<i.minzoom)return[];i.maxzoom!==void 0&&b>i.maxzoom&&(b=i.maxzoom);const j=this.pointCoordinate(this.getCameraPoint()),$=u.Z.fromLngLat(this.center),V=Math.pow(2,b),K=[V*j.x,V*j.y,0],te=[V*$.x,V*$.y,0],re=hn.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,b);let ye=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(ye=b);const we=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,Te=Le=>({aabb:new zn([Le*V,0,0],[(Le+1)*V,V,0]),zoom:0,x:0,y:0,wrap:Le,fullyVisible:!1}),je=[],Fe=[],$e=b,We=i.reparseOverscaled?T:b;if(this._renderWorldCopies)for(let Le=1;Le<=3;Le++)je.push(Te(-Le)),je.push(Te(Le));for(je.push(Te(0));je.length>0;){const Le=je.pop(),et=Le.x,rt=Le.y;let gt=Le.fullyVisible;if(!gt){const hr=Le.aabb.intersects(re);if(hr===0)continue;gt=hr===2}const Bt=i.terrain?K:te,ir=Le.aabb.distanceX(Bt),ur=Le.aabb.distanceY(Bt),mr=Math.max(Math.abs(ir),Math.abs(ur));if(Le.zoom===$e||mr>we+(1<<$e-Le.zoom)-2&&Le.zoom>=ye){const hr=$e-Le.zoom,or=K[0]-.5-(et<<hr),xr=K[1]-.5-(rt<<hr);Fe.push({tileID:new u.S(Le.zoom===$e?We:Le.zoom,Le.wrap,Le.zoom,et,rt),distanceSq:Y([te[0]-.5-et,te[1]-.5-rt]),tileDistanceToCamera:Math.sqrt(or*or+xr*xr)})}else for(let hr=0;hr<4;hr++){const or=(et<<1)+hr%2,xr=(rt<<1)+(hr>>1),Jr=Le.zoom+1;let fr=Le.aabb.quadrant(hr);if(i.terrain){const ar=new u.S(Jr,Le.wrap,Jr,or,xr),Hr=i.terrain.getMinMaxElevation(ar),vi=(p=Hr.minElevation)!==null&&p!==void 0?p:this.elevation,an=(_=Hr.maxElevation)!==null&&_!==void 0?_:this.elevation;fr=new zn([fr.min[0],fr.min[1],vi],[fr.max[0],fr.max[1],an])}je.push({aabb:fr,zoom:Jr,x:or,y:xr,wrap:Le.wrap,fullyVisible:gt})}}return Fe.sort(((Le,et)=>Le.distanceSq-et.distanceSq)).map((Le=>Le.tileID))}resize(i,p){this.width=i,this.height=p,this.pixelsToGLUnits=[2/i,-2/p],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const p=u.ac(i.lat,-85.051129,yi);return new u.P(u.O(i.lng)*this.worldSize,u.Q(p)*this.worldSize)}unproject(i){return new u.Z(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const p=this.elevation,_=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,b=this.pointLocation(this.centerPoint,i),T=i.getElevationForLngLatZoom(b,this.tileZoom);if(!(this.elevation-T))return;const j=_+p-T,$=Math.cos(this._pitch)*this.cameraToCenterDistance/j/u.b5(1,b.lat),V=this.scaleZoom($/this.tileSize);this._elevation=T,this._center=b,this.zoom=V}setLocationAtPoint(i,p){const _=this.pointCoordinate(p),b=this.pointCoordinate(this.centerPoint),T=this.locationCoordinate(i),j=new u.Z(T.x-(_.x-b.x),T.y-(_.y-b.y));this.center=this.coordinateLocation(j),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,p){return p?this.coordinatePoint(this.locationCoordinate(i),p.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,p){return this.coordinateLocation(this.pointCoordinate(i,p))}locationCoordinate(i){return u.Z.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,p){if(p){const ye=p.pointCoordinate(i);if(ye!=null)return ye}const _=[i.x,i.y,0,1],b=[i.x,i.y,1,1];u.af(_,_,this.pixelMatrixInverse),u.af(b,b,this.pixelMatrixInverse);const T=_[3],j=b[3],$=_[1]/T,V=b[1]/j,K=_[2]/T,te=b[2]/j,re=K===te?0:(0-K)/(te-K);return new u.Z(u.y.number(_[0]/T,b[0]/j,re)/this.worldSize,u.y.number($,V,re)/this.worldSize)}coordinatePoint(i,p=0,_=this.pixelMatrix){const b=[i.x*this.worldSize,i.y*this.worldSize,p,1];return u.af(b,b,_),new u.P(b[0]/b[3],b[1]/b[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new ke().extend(this.pointLocation(new u.P(0,i))).extend(this.pointLocation(new u.P(this.width,i))).extend(this.pointLocation(new u.P(this.width,this.height))).extend(this.pointLocation(new u.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new ke([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,yi])}calculateTileMatrix(i){const p=i.canonical,_=this.worldSize/this.zoomScale(p.z),b=p.x+Math.pow(2,p.z)*i.wrap,T=u.an(new Float64Array(16));return u.J(T,T,[b*_,p.y*_,0]),u.K(T,T,[_/u.X,_/u.X,1]),T}calculatePosMatrix(i,p=!1){const _=i.key,b=p?this._alignedPosMatrixCache:this._posMatrixCache;if(b[_])return b[_];const T=this.calculateTileMatrix(i);return u.L(T,p?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,T),b[_]=new Float32Array(T),b[_]}calculateFogMatrix(i){const p=i.key,_=this._fogMatrixCache;if(_[p])return _[p];const b=this.calculateTileMatrix(i);return u.L(b,this.fogMatrix,b),_[p]=new Float32Array(b),_[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(i,p){p=u.ac(+p,this.minZoom,this.maxZoom);const _={center:new u.N(i.lng,i.lat),zoom:p};let b=this.lngRange;if(!this._renderWorldCopies&&b===null){const Le=179.9999999999;b=[-Le,Le]}const T=this.tileSize*this.zoomScale(_.zoom);let j=0,$=T,V=0,K=T,te=0,re=0;const{x:ye,y:we}=this.size;if(this.latRange){const Le=this.latRange;j=u.Q(Le[1])*T,$=u.Q(Le[0])*T,$-j<we&&(te=we/($-j))}b&&(V=u.b3(u.O(b[0])*T,0,T),K=u.b3(u.O(b[1])*T,0,T),K<V&&(K+=T),K-V<ye&&(re=ye/(K-V)));const{x:Te,y:je}=this.project.call({worldSize:T},i);let Fe,$e;const We=Math.max(re||0,te||0);if(We){const Le=new u.P(re?(K+V)/2:Te,te?($+j)/2:je);return _.center=this.unproject.call({worldSize:T},Le).wrap(),_.zoom+=this.scaleZoom(We),_}if(this.latRange){const Le=we/2;je-Le<j&&($e=j+Le),je+Le>$&&($e=$-Le)}if(b){const Le=(V+K)/2;let et=Te;this._renderWorldCopies&&(et=u.b3(Te,Le-T/2,Le+T/2));const rt=ye/2;et-rt<V&&(Fe=V+rt),et+rt>K&&(Fe=K-rt)}if(Fe!==void 0||$e!==void 0){const Le=new u.P(Fe??Te,$e??je);_.center=this.unproject.call({worldSize:T},Le).wrap()}return _}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const i=this._unmodified,{center:p,zoom:_}=this.getConstrained(this.center,this.zoom);this.center=p,this.zoom=_,this._unmodified=i,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,p=this.point.x,_=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.b5(1,this.center.lat)*this.worldSize;let b=u.an(new Float64Array(16));u.K(b,b,[this.width/2,-this.height/2,1]),u.J(b,b,[1,-1,0]),this.labelPlaneMatrix=b,b=u.an(new Float64Array(16)),u.K(b,b,[1,-1,1]),u.J(b,b,[-1,-1,0]),u.K(b,b,[2/this.width,2/this.height,1]),this.glCoordMatrix=b;const T=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),j=Math.min(this.elevation,this.minElevationForCurrentTile),$=T-j*this._pixelPerMeter/Math.cos(this._pitch),V=j<0?$:T,K=Math.PI/2+this._pitch,te=this._fov*(.5+i.y/this.height),re=Math.sin(te)*V/Math.sin(u.ac(Math.PI-K-te,.01,Math.PI-.01)),ye=this.getHorizon(),we=2*Math.atan(ye/this.cameraToCenterDistance)*(.5+i.y/(2*ye)),Te=Math.sin(we)*V/Math.sin(u.ac(Math.PI-K-we,.01,Math.PI-.01)),je=Math.min(re,Te);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*je+V),this.nearZ=this.height/50,b=new Float64Array(16),u.b6(b,this._fov,this.width/this.height,this.nearZ,this.farZ),b[8]=2*-i.x/this.width,b[9]=2*i.y/this.height,this.projectionMatrix=u.ae(b),u.K(b,b,[1,-1,1]),u.J(b,b,[0,0,-this.cameraToCenterDistance]),u.b7(b,b,this._pitch),u.ad(b,b,this.angle),u.J(b,b,[-p,-_,0]),this.mercatorMatrix=u.K([],b,[this.worldSize,this.worldSize,this.worldSize]),u.K(b,b,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.L(new Float64Array(16),this.labelPlaneMatrix,b),u.J(b,b,[0,0,-this.elevation]),this.modelViewProjectionMatrix=b,this.invModelViewProjectionMatrix=u.as([],b),this.fogMatrix=new Float64Array(16),u.b6(this.fogMatrix,this._fov,this.width/this.height,T,this.farZ),this.fogMatrix[8]=2*-i.x/this.width,this.fogMatrix[9]=2*i.y/this.height,u.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),u.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),u.b7(this.fogMatrix,this.fogMatrix,this._pitch),u.ad(this.fogMatrix,this.fogMatrix,this.angle),u.J(this.fogMatrix,this.fogMatrix,[-p,-_,0]),u.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),u.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=u.L(new Float64Array(16),this.labelPlaneMatrix,b);const Fe=this.width%2/2,$e=this.height%2/2,We=Math.cos(this.angle),Le=Math.sin(this.angle),et=p-Math.round(p)+We*Fe+Le*$e,rt=_-Math.round(_)+We*$e+Le*Fe,gt=new Float64Array(b);if(u.J(gt,gt,[et>.5?et-1:et,rt>.5?rt-1:rt,0]),this.alignedModelViewProjectionMatrix=gt,b=u.as(new Float64Array(16),this.pixelMatrix),!b)throw new Error("failed to invert matrix");this.pixelMatrixInverse=b,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new u.P(0,0)),p=[i.x*this.worldSize,i.y*this.worldSize,0,1];return u.af(p,p,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(0,i))}getCameraQueryGeometry(i){const p=this.getCameraPoint();if(i.length===1)return[i[0],p];{let _=p.x,b=p.y,T=p.x,j=p.y;for(const $ of i)_=Math.min(_,$.x),b=Math.min(b,$.y),T=Math.max(T,$.x),j=Math.max(j,$.y);return[new u.P(_,b),new u.P(T,b),new u.P(T,j),new u.P(_,j),new u.P(_,b)]}}lngLatToCameraDepth(i,p){const _=this.locationCoordinate(i),b=[_.x*this.worldSize,_.y*this.worldSize,p,1];return u.af(b,b,this.modelViewProjectionMatrix),b[2]/b[3]}}function Sl(D,i){let p,_=!1,b=null,T=null;const j=()=>{b=null,_&&(D.apply(T,p),b=setTimeout(j,i),_=!1)};return(...$)=>(_=!0,T=this,p=$,b||j(),b)}class No{constructor(i){this._getCurrentHash=()=>{const p=window.location.hash.replace("#","");if(this._hashName){let _;return p.split("&").map((b=>b.split("="))).forEach((b=>{b[0]===this._hashName&&(_=b)})),(_&&_[1]||"").split("/")}return p.split("/")},this._onHashChange=()=>{const p=this._getCurrentHash();if(p.length>=3&&!p.some((_=>isNaN(_)))){const _=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(p[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+p[2],+p[1]],zoom:+p[0],bearing:_,pitch:+(p[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const p=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,p)},this._removeHash=()=>{const p=this._getCurrentHash();if(p.length===0)return;const _=p.join("/");let b=_;b.split("&").length>0&&(b=b.split("&")[0]),this._hashName&&(b=`${this._hashName}=${_}`);let T=window.location.hash.replace(b,"");T.startsWith("#&")?T=T.slice(0,1)+T.slice(2):T==="#"&&(T="");let j=window.location.href.replace(/(#.+)?$/,T);j=j.replace("&&","&"),window.history.replaceState(window.history.state,null,j)},this._updateHash=Sl(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(i){const p=this._map.getCenter(),_=Math.round(100*this._map.getZoom())/100,b=Math.ceil((_*Math.LN2+Math.log(512/360/.5))/Math.LN10),T=Math.pow(10,b),j=Math.round(p.lng*T)/T,$=Math.round(p.lat*T)/T,V=this._map.getBearing(),K=this._map.getPitch();let te="";if(te+=i?`/${j}/${$}/${_}`:`${_}/${$}/${j}`,(V||K)&&(te+="/"+Math.round(10*V)/10),K&&(te+=`/${Math.round(K)}`),this._hashName){const re=this._hashName;let ye=!1;const we=window.location.hash.slice(1).split("&").map((Te=>{const je=Te.split("=")[0];return je===re?(ye=!0,`${je}=${te}`):Te})).filter((Te=>Te));return ye||we.push(`${re}=${te}`),`#${we.join("&")}`}return`#${te}`}}const Uu={linearity:.3,easing:u.b8(0,0,.3,1)},Nh=u.e({deceleration:2500,maxSpeed:1400},Uu),Qc=u.e({deceleration:20,maxSpeed:1400},Uu),Zd=u.e({deceleration:1e3,maxSpeed:360},Uu),bc=u.e({deceleration:1e3,maxSpeed:90},Uu);class ui{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:C.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,p=C.now();for(;i.length>0&&p-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const p={zoom:0,bearing:0,pitch:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:T}of this._inertiaBuffer)p.zoom+=T.zoomDelta||0,p.bearing+=T.bearingDelta||0,p.pitch+=T.pitchDelta||0,T.panDelta&&p.pan._add(T.panDelta),T.around&&(p.around=T.around),T.pinchAround&&(p.pinchAround=T.pinchAround);const _=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,b={};if(p.pan.mag()){const T=Vu(p.pan.mag(),_,u.e({},Nh,i||{}));b.offset=p.pan.mult(T.amount/p.pan.mag()),b.center=this._map.transform.center,ed(b,T)}if(p.zoom){const T=Vu(p.zoom,_,Qc);b.zoom=this._map.transform.zoom+T.amount,ed(b,T)}if(p.bearing){const T=Vu(p.bearing,_,Zd);b.bearing=this._map.transform.bearing+u.ac(T.amount,-179,179),ed(b,T)}if(p.pitch){const T=Vu(p.pitch,_,bc);b.pitch=this._map.transform.pitch+T.amount,ed(b,T)}if(b.zoom||b.bearing){const T=p.pinchAround===void 0?p.around:p.pinchAround;b.around=T?this._map.unproject(T):this._map.getCenter()}return this.clear(),u.e(b,{noMoveStart:!0})}}function ed(D,i){(!D.duration||D.duration<i.duration)&&(D.duration=i.duration,D.easing=i.easing)}function Vu(D,i,p){const{maxSpeed:_,linearity:b,deceleration:T}=p,j=u.ac(D*b/(i/1e3),-_,_),$=Math.abs(j)/(T*b);return{easing:p.easing,duration:1e3*$,amount:j*($/2)}}class Ci extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,p,_,b={}){const T=P.mousePos(p.getCanvas(),_),j=p.unproject(T);super(i,u.e({point:T,lngLat:j,originalEvent:_},b)),this._defaultPrevented=!1,this.target=p}}class Wl extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,p,_){const b=i==="touchend"?_.changedTouches:_.touches,T=P.touchPos(p.getCanvasContainer(),b),j=T.map((V=>p.unproject(V))),$=T.reduce(((V,K,te,re)=>V.add(K.div(re.length))),new u.P(0,0));super(i,{points:T,point:$,lngLats:j,lngLat:p.unproject($),originalEvent:_}),this._defaultPrevented=!1}}class Cs extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,p,_){super(i,{originalEvent:_}),this._defaultPrevented=!1}}class wc{constructor(i,p){this._map=i,this._clickTolerance=p.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new Cs(i.type,this._map,i))}mousedown(i,p){return this._mousedownPos=p,this._firePreventable(new Ci(i.type,this._map,i))}mouseup(i){this._map.fire(new Ci(i.type,this._map,i))}click(i,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new Ci(i.type,this._map,i))}dblclick(i){return this._firePreventable(new Ci(i.type,this._map,i))}mouseover(i){this._map.fire(new Ci(i.type,this._map,i))}mouseout(i){this._map.fire(new Ci(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Wl(i.type,this._map,i))}touchmove(i){this._map.fire(new Wl(i.type,this._map,i))}touchend(i){this._map.fire(new Wl(i.type,this._map,i))}touchcancel(i){this._map.fire(new Wl(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ui{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new Ci(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ci("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new Ci(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ia{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(u.P.convert(i),this._map.terrain)}}class Ja{constructor(i,p){this._map=i,this._tr=new Ia(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=p.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,p){this.isEnabled()&&i.shiftKey&&i.button===0&&(P.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)}mousemoveWindow(i,p){if(!this._active)return;const _=p;if(this._lastPos.equals(_)||!this._box&&_.dist(this._startPos)<this._clickTolerance)return;const b=this._startPos;this._lastPos=_,this._box||(this._box=P.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const T=Math.min(b.x,_.x),j=Math.max(b.x,_.x),$=Math.min(b.y,_.y),V=Math.max(b.y,_.y);P.setTransform(this._box,`translate(${T}px,${$}px)`),this._box.style.width=j-T+"px",this._box.style.height=V-$+"px"}mouseupWindow(i,p){if(!this._active||i.button!==0)return;const _=this._startPos,b=p;if(this.reset(),P.suppressClick(),_.x!==b.x||_.y!==b.y)return this._map.fire(new u.k("boxzoomend",{originalEvent:i})),{cameraAnimation:T=>T.fitScreenCoordinates(_,b,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(P.remove(this._box),this._box=null),P.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,p){return this._map.fire(new u.k(i,{originalEvent:p}))}}function qu(D,i){if(D.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${D.length}, points ${i.length}`);const p={};for(let _=0;_<D.length;_++)p[D[_].identifier]=i[_];return p}class Ys{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,p,_){(this.centroid||_.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),_.length===this.numTouches&&(this.centroid=(function(b){const T=new u.P(0,0);for(const j of b)T._add(j);return T.div(b.length)})(p),this.touches=qu(_,p)))}touchmove(i,p,_){if(this.aborted||!this.centroid)return;const b=qu(_,p);for(const T in this.touches){const j=b[T];(!j||j.dist(this.touches[T])>30)&&(this.aborted=!0)}}touchend(i,p,_){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),_.length===0){const b=!this.aborted&&this.centroid;if(this.reset(),b)return b}}}class td{constructor(i){this.singleTap=new Ys(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,p,_){this.singleTap.touchstart(i,p,_)}touchmove(i,p,_){this.singleTap.touchmove(i,p,_)}touchend(i,p,_){const b=this.singleTap.touchend(i,p,_);if(b){const T=i.timeStamp-this.lastTime<500,j=!this.lastTap||this.lastTap.dist(b)<30;if(T&&j||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=b,this.count===this.numTaps)return this.reset(),b}}}class Hl{constructor(i){this._tr=new Ia(i),this._zoomIn=new td({numTouches:1,numTaps:2}),this._zoomOut=new td({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,p,_){this._zoomIn.touchstart(i,p,_),this._zoomOut.touchstart(i,p,_)}touchmove(i,p,_){this._zoomIn.touchmove(i,p,_),this._zoomOut.touchmove(i,p,_)}touchend(i,p,_){const b=this._zoomIn.touchend(i,p,_),T=this._zoomOut.touchend(i,p,_),j=this._tr;return b?(this._active=!0,i.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:$=>$.easeTo({duration:300,zoom:j.zoom+1,around:j.unproject(b)},{originalEvent:i})}):T?(this._active=!0,i.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:$=>$.easeTo({duration:300,zoom:j.zoom-1,around:j.unproject(T)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Eo{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const p=this._moveFunction(...i);if(p.bearingDelta||p.pitchDelta||p.around||p.panDelta)return this._active=!0,p}dragStart(i,p){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=p.length?p[0]:p,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,p){if(!this.isEnabled())return;const _=this._lastPoint;if(!_)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const b=p.length?p[0]:p;return!this._moved&&b.dist(_)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=b,this._move(_,b))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&P.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Bh={0:1,2:2};class qa{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const p=P.mouseButton(i);this._eventButton=p}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!(function(p,_){const b=Bh[_];return p.buttons===void 0||(p.buttons&b)!==b})(i,this._eventButton)}isValidEndEvent(i){return P.mouseButton(i)===this._eventButton}}class El{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const Ko=D=>{D.mousedown=D.dragStart,D.mousemoveWindow=D.dragMove,D.mouseup=D.dragEnd,D.contextmenu=i=>{i.preventDefault()}},Fh=({enable:D,clickTolerance:i,bearingDegreesPerPixelMoved:p=.8})=>{const _=new qa({checkCorrectEvent:b=>P.mouseButton(b)===0&&b.ctrlKey||P.mouseButton(b)===2});return new Eo({clickTolerance:i,move:(b,T)=>({bearingDelta:(T.x-b.x)*p}),moveStateManager:_,enable:D,assignEvents:Ko})},rd=({enable:D,clickTolerance:i,pitchDegreesPerPixelMoved:p=-.5})=>{const _=new qa({checkCorrectEvent:b=>P.mouseButton(b)===0&&b.ctrlKey||P.mouseButton(b)===2});return new Eo({clickTolerance:i,move:(b,T)=>({pitchDelta:(T.y-b.y)*p}),moveStateManager:_,enable:D,assignEvents:Ko})};class Ts{constructor(i,p){this._clickTolerance=i.clickTolerance||1,this._map=p,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}_shouldBePrevented(i){return i<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(i,p,_){return this._calculateTransform(i,p,_)}touchmove(i,p,_){if(this._active){if(!this._shouldBePrevented(_.length))return i.preventDefault(),this._calculateTransform(i,p,_);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",i)}}touchend(i,p,_){this._calculateTransform(i,p,_),this._active&&this._shouldBePrevented(_.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,p,_){_.length>0&&(this._active=!0);const b=qu(_,p),T=new u.P(0,0),j=new u.P(0,0);let $=0;for(const K in b){const te=b[K],re=this._touches[K];re&&(T._add(te),j._add(te.sub(re)),$++,b[K]=te)}if(this._touches=b,this._shouldBePrevented($)||!j.mag())return;const V=j.div($);return this._sum._add(V),this._sum.mag()<this._clickTolerance?void 0:{around:T.div($),panDelta:V}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class mu{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,p,_){this._firstTwoTouches||_.length<2||(this._firstTwoTouches=[_[0].identifier,_[1].identifier],this._start([p[0],p[1]]))}touchmove(i,p,_){if(!this._firstTwoTouches)return;i.preventDefault();const[b,T]=this._firstTwoTouches,j=yu(_,p,b),$=yu(_,p,T);if(!j||!$)return;const V=this._aroundCenter?null:j.add($).div(2);return this._move([j,$],V,i)}touchend(i,p,_){if(!this._firstTwoTouches)return;const[b,T]=this._firstTwoTouches,j=yu(_,p,b),$=yu(_,p,T);j&&$||(this._active&&P.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function yu(D,i,p){for(let _=0;_<D.length;_++)if(D[_].identifier===p)return i[_]}function Sc(D,i){return Math.log(D/i)/Math.LN2}class $h extends mu{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,p){const _=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Sc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Sc(this._distance,_),pinchAround:p}}}function Xo(D,i){return 180*D.angleWith(i)/Math.PI}class Wu extends mu{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,p,_){const b=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Xo(this._vector,b),pinchAround:p}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const p=25/(Math.PI*this._minDiameter)*360,_=Xo(i,this._startVector);return Math.abs(_)<p}}function vu(D){return Math.abs(D.y)>Math.abs(D.x)}class Xi extends mu{constructor(i){super(),this._currentTouchCount=0,this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,p,_){super.touchstart(i,p,_),this._currentTouchCount=_.length}_start(i){this._lastPoints=i,vu(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,p,_){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const b=i[0].sub(this._lastPoints[0]),T=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(b,T,_.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(b.y+T.y)/2*-.5}):void 0}gestureBeginsVertically(i,p,_){if(this._valid!==void 0)return this._valid;const b=i.mag()>=2,T=p.mag()>=2;if(!b&&!T)return;if(!b||!T)return this._firstMove===void 0&&(this._firstMove=_),_-this._firstMove<100&&void 0;const j=i.y>0==p.y>0;return vu(i)&&vu(p)&&j}}const Oa={panStep:100,bearingStep:15,pitchStep:10};class Ea{constructor(i){this._tr=new Ia(i);const p=Oa;this._panStep=p.panStep,this._bearingStep=p.bearingStep,this._pitchStep=p.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let p=0,_=0,b=0,T=0,j=0;switch(i.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:i.shiftKey?_=-1:(i.preventDefault(),T=-1);break;case 39:i.shiftKey?_=1:(i.preventDefault(),T=1);break;case 38:i.shiftKey?b=1:(i.preventDefault(),j=-1);break;case 40:i.shiftKey?b=-1:(i.preventDefault(),j=1);break;default:return}return this._rotationDisabled&&(_=0,b=0),{cameraAnimation:$=>{const V=this._tr;$.easeTo({duration:300,easeId:"keyboardHandler",easing:ja,zoom:p?Math.round(V.zoom)+p*(i.shiftKey?2:1):V.zoom,bearing:V.bearing+_*this._bearingStep,pitch:V.pitch+b*this._pitchStep,offset:[-T*this._panStep,-j*this._panStep],center:V.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ja(D){return D*(2-D)}const Al=4.000244140625;class Wa{constructor(i,p){this._onTimeout=_=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(_)},this._map=i,this._tr=new Ia(i),this._triggerRenderFrame=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(i){return!!this._map.cooperativeGestures.isEnabled()&&!(i.ctrlKey||this._map.cooperativeGestures.isBypassed(i))}wheel(i){if(!this.isEnabled())return;if(this._shouldBePrevented(i))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",i);let p=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const _=C.now(),b=_-(this._lastWheelEventTime||0);this._lastWheelEventTime=_,p!==0&&p%Al==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":b>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(b*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),i.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=i,this._delta-=p,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const p=P.mousePos(this._map.getCanvas(),i),_=this._tr;this._around=p.y>_.transform.height/2-_.transform.getHorizon()?u.N.convert(this._aroundCenter?_.center:_.unproject(p)):u.N.convert(_.center),this._aroundPoint=_.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const V=this._type==="wheel"&&Math.abs(this._delta)>Al?this._wheelZoomRate:this._defaultZoomRate;let K=2/(1+Math.exp(-Math.abs(this._delta*V)));this._delta<0&&K!==0&&(K=1/K);const te=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(te*K))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const p=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,_=this._startZoom,b=this._easing;let T,j=!1;const $=C.now()-this._lastWheelEventTime;if(this._type==="wheel"&&_&&b&&$){const V=Math.min($/200,1),K=b(V);T=u.y.number(_,p,K),V<1?this._frameId||(this._frameId=!0):j=!0}else T=p,j=!0;return this._active=!0,j&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!j,zoomDelta:T-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let p=u.b9;if(this._prevEase){const _=this._prevEase,b=(C.now()-_.start)/_.duration,T=_.easing(b+.01)-_.easing(b),j=.27/Math.sqrt(T*T+1e-4)*.01,$=Math.sqrt(.0729-j*j);p=u.b8(j,$,.25,1)}return this._prevEase={start:C.now(),duration:i,easing:p},p}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class co{constructor(i,p){this._clickZoom=i,this._tapZoom=p}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ds{constructor(i){this._tr=new Ia(i),this.reset()}reset(){this._active=!1}dblclick(i,p){return i.preventDefault(),{cameraAnimation:_=>{_.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(p)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gh{constructor(){this._tap=new td({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,p,_){if(!this._swipePoint)if(this._tapTime){const b=p[0],T=i.timeStamp-this._tapTime<500,j=this._tapPoint.dist(b)<30;T&&j?_.length>0&&(this._swipePoint=b,this._swipeTouch=_[0].identifier):this.reset()}else this._tap.touchstart(i,p,_)}touchmove(i,p,_){if(this._tapTime){if(this._swipePoint){if(_[0].identifier!==this._swipeTouch)return;const b=p[0],T=b.y-this._swipePoint.y;return this._swipePoint=b,i.preventDefault(),this._active=!0,{zoomDelta:T/128}}}else this._tap.touchmove(i,p,_)}touchend(i,p,_){if(this._tapTime)this._swipePoint&&_.length===0&&this.reset();else{const b=this._tap.touchend(i,p,_);b&&(this._tapTime=i.timeStamp,this._tapPoint=b)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xu{constructor(i,p,_){this._el=i,this._mousePan=p,this._touchPan=_}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Hu{constructor(i,p,_){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=p,this._mousePitch=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Zu{constructor(i,p,_,b){this._el=i,this._touchZoom=p,this._touchRotate=_,this._tapDragZoom=b,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class na{constructor(i,p){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=i,this._options=p,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const i=this._map.getCanvasContainer();i.classList.add("maplibregl-cooperative-gestures"),this._container=P.create("div","maplibregl-cooperative-gesture-screen",i);let p=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(p=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const _=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),b=document.createElement("div");b.className="maplibregl-desktop-message",b.textContent=p,this._container.appendChild(b);const T=document.createElement("div");T.className="maplibregl-mobile-message",T.textContent=_,this._container.appendChild(T),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(P.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(i){return i[this._bypassKey]}notifyGestureBlocked(i,p){this._enabled&&(this._map.fire(new u.k("cooperativegestureprevented",{gestureType:i,originalEvent:p})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const Bn=D=>D.zoom||D.drag||D.pitch||D.rotate;class Yt extends u.k{}function kl(D){return D.panDelta&&D.panDelta.mag()||D.zoomDelta||D.bearingDelta||D.pitchDelta}class ds{constructor(i,p){this.handleWindowEvent=b=>{this.handleEvent(b,`${b.type}Window`)},this.handleEvent=(b,T)=>{if(b.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const j=b.type==="renderFrame"?void 0:b,$={needsRenderFrame:!1},V={},K={},te=b.touches,re=te?this._getMapTouches(te):void 0,ye=re?P.touchPos(this._map.getCanvas(),re):P.mousePos(this._map.getCanvas(),b);for(const{handlerName:je,handler:Fe,allowed:$e}of this._handlers){if(!Fe.isEnabled())continue;let We;this._blockedByActive(K,$e,je)?Fe.reset():Fe[T||b.type]&&(We=Fe[T||b.type](b,ye,re),this.mergeHandlerResult($,V,We,je,j),We&&We.needsRenderFrame&&this._triggerRenderFrame()),(We||Fe.isActive())&&(K[je]=Fe)}const we={};for(const je in this._previousActiveHandlers)K[je]||(we[je]=j);this._previousActiveHandlers=K,(Object.keys(we).length||kl($))&&(this._changes.push([$,V,we]),this._triggerRenderFrame()),(Object.keys(K).length||kl($))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Te}=$;Te&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Te(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ui(i),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p);const _=this._el;this._listeners=[[_,"touchstart",{passive:!0}],[_,"touchmove",{passive:!1}],[_,"touchend",void 0],[_,"touchcancel",void 0],[_,"mousedown",void 0],[_,"mousemove",void 0],[_,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[_,"mouseover",void 0],[_,"mouseout",void 0],[_,"dblclick",void 0],[_,"click",void 0],[_,"keydown",{capture:!1}],[_,"keyup",void 0],[_,"wheel",{passive:!1}],[_,"contextmenu",void 0],[window,"blur",void 0]];for(const[b,T,j]of this._listeners)P.addEventListener(b,T,b===document?this.handleWindowEvent:this.handleEvent,j)}destroy(){for(const[i,p,_]of this._listeners)P.removeEventListener(i,p,i===document?this.handleWindowEvent:this.handleEvent,_)}_addDefaultHandlers(i){const p=this._map,_=p.getCanvasContainer();this._add("mapEvent",new wc(p,i));const b=p.boxZoom=new Ja(p,i);this._add("boxZoom",b),i.interactive&&i.boxZoom&&b.enable();const T=p.cooperativeGestures=new na(p,i.cooperativeGestures);this._add("cooperativeGestures",T),i.cooperativeGestures&&T.enable();const j=new Hl(p),$=new Ds(p);p.doubleClickZoom=new co($,j),this._add("tapZoom",j),this._add("clickZoom",$),i.interactive&&i.doubleClickZoom&&p.doubleClickZoom.enable();const V=new Gh;this._add("tapDragZoom",V);const K=p.touchPitch=new Xi(p);this._add("touchPitch",K),i.interactive&&i.touchPitch&&p.touchPitch.enable(i.touchPitch);const te=Fh(i),re=rd(i);p.dragRotate=new Hu(i,te,re),this._add("mouseRotate",te,["mousePitch"]),this._add("mousePitch",re,["mouseRotate"]),i.interactive&&i.dragRotate&&p.dragRotate.enable();const ye=(({enable:We,clickTolerance:Le})=>{const et=new qa({checkCorrectEvent:rt=>P.mouseButton(rt)===0&&!rt.ctrlKey});return new Eo({clickTolerance:Le,move:(rt,gt)=>({around:gt,panDelta:gt.sub(rt)}),activateOnStart:!0,moveStateManager:et,enable:We,assignEvents:Ko})})(i),we=new Ts(i,p);p.dragPan=new xu(_,ye,we),this._add("mousePan",ye),this._add("touchPan",we,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&p.dragPan.enable(i.dragPan);const Te=new Wu,je=new $h;p.touchZoomRotate=new Zu(_,je,Te,V),this._add("touchRotate",Te,["touchPan","touchZoom"]),this._add("touchZoom",je,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&p.touchZoomRotate.enable(i.touchZoomRotate);const Fe=p.scrollZoom=new Wa(p,(()=>this._triggerRenderFrame()));this._add("scrollZoom",Fe,["mousePan"]),i.interactive&&i.scrollZoom&&p.scrollZoom.enable(i.scrollZoom);const $e=p.keyboard=new Ea(p);this._add("keyboard",$e),i.interactive&&i.keyboard&&p.keyboard.enable(),this._add("blockableMapEvent",new Ui(p))}_add(i,p,_){this._handlers.push({handlerName:i,handler:p,allowed:_}),this._handlersById[i]=p}stop(i){if(!this._updatingCamera){for(const{handler:p}of this._handlers)p.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Bn(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,p,_){for(const b in i)if(b!==_&&(!p||p.indexOf(b)<0))return!0;return!1}_getMapTouches(i){const p=[];for(const _ of i)this._el.contains(_.target)&&p.push(_);return p}mergeHandlerResult(i,p,_,b,T){if(!_)return;u.e(i,_);const j={handlerName:b,originalEvent:_.originalEvent||T};_.zoomDelta!==void 0&&(p.zoom=j),_.panDelta!==void 0&&(p.drag=j),_.pitchDelta!==void 0&&(p.pitch=j),_.bearingDelta!==void 0&&(p.rotate=j)}_applyChanges(){const i={},p={},_={};for(const[b,T,j]of this._changes)b.panDelta&&(i.panDelta=(i.panDelta||new u.P(0,0))._add(b.panDelta)),b.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+b.zoomDelta),b.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+b.bearingDelta),b.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+b.pitchDelta),b.around!==void 0&&(i.around=b.around),b.pinchAround!==void 0&&(i.pinchAround=b.pinchAround),b.noInertia&&(i.noInertia=b.noInertia),u.e(p,T),u.e(_,j);this._updateMapTransform(i,p,_),this._changes=[]}_updateMapTransform(i,p,_){const b=this._map,T=b._getTransformForUpdate(),j=b.terrain;if(!(kl(i)||j&&this._terrainMovement))return this._fireEvents(p,_,!0);let{panDelta:$,zoomDelta:V,bearingDelta:K,pitchDelta:te,around:re,pinchAround:ye}=i;ye!==void 0&&(re=ye),b._stop(!0),re=re||b.transform.centerPoint;const we=T.pointLocation($?re.sub($):re);K&&(T.bearing+=K),te&&(T.pitch+=te),V&&(T.zoom+=V),j?this._terrainMovement||!p.drag&&!p.zoom?p.drag&&this._terrainMovement?T.center=T.pointLocation(T.centerPoint.sub($)):T.setLocationAtPoint(we,re):(this._terrainMovement=!0,this._map._elevationFreeze=!0,T.setLocationAtPoint(we,re)):T.setLocationAtPoint(we,re),b._applyUpdatedTransform(T),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(p,_,!0)}_fireEvents(i,p,_){const b=Bn(this._eventsInProgress),T=Bn(i),j={};for(const re in i){const{originalEvent:ye}=i[re];this._eventsInProgress[re]||(j[`${re}start`]=ye),this._eventsInProgress[re]=i[re]}!b&&T&&this._fireEvent("movestart",T.originalEvent);for(const re in j)this._fireEvent(re,j[re]);T&&this._fireEvent("move",T.originalEvent);for(const re in i){const{originalEvent:ye}=i[re];this._fireEvent(re,ye)}const $={};let V;for(const re in this._eventsInProgress){const{handlerName:ye,originalEvent:we}=this._eventsInProgress[re];this._handlersById[ye].isActive()||(delete this._eventsInProgress[re],V=p[ye]||we,$[`${re}end`]=V)}for(const re in $)this._fireEvent(re,$[re]);const K=Bn(this._eventsInProgress),te=(b||T)&&!K;if(te&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const re=this._map._getTransformForUpdate();re.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(re)}if(_&&te){this._updatingCamera=!0;const re=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ye=we=>we!==0&&-this._bearingSnap<we&&we<this._bearingSnap;!re||!re.essential&&C.prefersReducedMotion?(this._map.fire(new u.k("moveend",{originalEvent:V})),ye(this._map.getBearing())&&this._map.resetNorth()):(ye(re.bearing||this._map.getBearing())&&(re.bearing=0),re.freezeElevation=!0,this._map.easeTo(re,{originalEvent:V})),this._updatingCamera=!1}}_fireEvent(i,p){this._map.fire(new u.k(i,p?{originalEvent:p}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((i=>{delete this._frameId,this.handleEvent(new Yt("renderFrame",{timeStamp:i})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Uh extends u.E{constructor(i,p){super(),this._renderFrameCallback=()=>{const _=Math.min((C.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(_)),_<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=p.bearingSnap,this.on("moveend",(()=>{delete this._requestedCameraState}))}getCenter(){return new u.N(this.transform.center.lng,this.transform.center.lat)}setCenter(i,p){return this.jumpTo({center:i},p)}panBy(i,p,_){return i=u.P.convert(i).mult(-1),this.panTo(this.transform.center,u.e({offset:i},p),_)}panTo(i,p,_){return this.easeTo(u.e({center:i},p),_)}getZoom(){return this.transform.zoom}setZoom(i,p){return this.jumpTo({zoom:i},p),this}zoomTo(i,p,_){return this.easeTo(u.e({zoom:i},p),_)}zoomIn(i,p){return this.zoomTo(this.getZoom()+1,i,p),this}zoomOut(i,p){return this.zoomTo(this.getZoom()-1,i,p),this}getBearing(){return this.transform.bearing}setBearing(i,p){return this.jumpTo({bearing:i},p),this}getPadding(){return this.transform.padding}setPadding(i,p){return this.jumpTo({padding:i},p),this}rotateTo(i,p,_){return this.easeTo(u.e({bearing:i},p),_)}resetNorth(i,p){return this.rotateTo(0,u.e({duration:1e3},i),p),this}resetNorthPitch(i,p){return this.easeTo(u.e({bearing:0,pitch:0,duration:1e3},i),p),this}snapToNorth(i,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,p):this}getPitch(){return this.transform.pitch}setPitch(i,p){return this.jumpTo({pitch:i},p),this}cameraForBounds(i,p){i=ke.convert(i).adjustAntiMeridian();const _=p&&p.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),_,p)}_cameraForBoxAndBearing(i,p,_,b){const T={top:0,bottom:0,right:0,left:0};if(typeof(b=u.e({padding:T,offset:[0,0],maxZoom:this.transform.maxZoom},b)).padding=="number"){const hr=b.padding;b.padding={top:hr,bottom:hr,right:hr,left:hr}}b.padding=u.e(T,b.padding);const j=this.transform,$=j.padding,V=new ke(i,p),K=j.project(V.getNorthWest()),te=j.project(V.getNorthEast()),re=j.project(V.getSouthEast()),ye=j.project(V.getSouthWest()),we=u.ba(-_),Te=K.rotate(we),je=te.rotate(we),Fe=re.rotate(we),$e=ye.rotate(we),We=new u.P(Math.max(Te.x,je.x,$e.x,Fe.x),Math.max(Te.y,je.y,$e.y,Fe.y)),Le=new u.P(Math.min(Te.x,je.x,$e.x,Fe.x),Math.min(Te.y,je.y,$e.y,Fe.y)),et=We.sub(Le),rt=(j.width-($.left+$.right+b.padding.left+b.padding.right))/et.x,gt=(j.height-($.top+$.bottom+b.padding.top+b.padding.bottom))/et.y;if(gt<0||rt<0)return void u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Bt=Math.min(j.scaleZoom(j.scale*Math.min(rt,gt)),b.maxZoom),ir=u.P.convert(b.offset),ur=new u.P((b.padding.left-b.padding.right)/2,(b.padding.top-b.padding.bottom)/2).rotate(u.ba(_)),mr=ir.add(ur).mult(j.scale/j.zoomScale(Bt));return{center:j.unproject(K.add(re).div(2).sub(mr)),zoom:Bt,bearing:_}}fitBounds(i,p,_){return this._fitInternal(this.cameraForBounds(i,p),p,_)}fitScreenCoordinates(i,p,_,b,T){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.P.convert(i)),this.transform.pointLocation(u.P.convert(p)),_,b),b,T)}_fitInternal(i,p,_){return i?(delete(p=u.e(i,p)).padding,p.linear?this.easeTo(p,_):this.flyTo(p,_)):this}jumpTo(i,p){this.stop();const _=this._getTransformForUpdate();let b=!1,T=!1,j=!1;return"zoom"in i&&_.zoom!==+i.zoom&&(b=!0,_.zoom=+i.zoom),i.center!==void 0&&(_.center=u.N.convert(i.center)),"bearing"in i&&_.bearing!==+i.bearing&&(T=!0,_.bearing=+i.bearing),"pitch"in i&&_.pitch!==+i.pitch&&(j=!0,_.pitch=+i.pitch),i.padding==null||_.isPaddingEqual(i.padding)||(_.padding=i.padding),this._applyUpdatedTransform(_),this.fire(new u.k("movestart",p)).fire(new u.k("move",p)),b&&this.fire(new u.k("zoomstart",p)).fire(new u.k("zoom",p)).fire(new u.k("zoomend",p)),T&&this.fire(new u.k("rotatestart",p)).fire(new u.k("rotate",p)).fire(new u.k("rotateend",p)),j&&this.fire(new u.k("pitchstart",p)).fire(new u.k("pitch",p)).fire(new u.k("pitchend",p)),this.fire(new u.k("moveend",p))}calculateCameraOptionsFromTo(i,p,_,b=0){const T=u.Z.fromLngLat(i,p),j=u.Z.fromLngLat(_,b),$=j.x-T.x,V=j.y-T.y,K=j.z-T.z,te=Math.hypot($,V,K);if(te===0)throw new Error("Can't calculate camera options with same From and To");const re=Math.hypot($,V),ye=this.transform.scaleZoom(this.transform.cameraToCenterDistance/te/this.transform.tileSize),we=180*Math.atan2($,-V)/Math.PI;let Te=180*Math.acos(re/te)/Math.PI;return Te=K<0?90-Te:90+Te,{center:j.toLngLat(),zoom:ye,pitch:Te,bearing:we}}easeTo(i,p){var _;this._stop(!1,i.easeId),((i=u.e({offset:[0,0],duration:500,easing:u.b9},i)).animate===!1||!i.essential&&C.prefersReducedMotion)&&(i.duration=0);const b=this._getTransformForUpdate(),T=b.zoom,j=b.bearing,$=b.pitch,V=b.padding,K="bearing"in i?this._normalizeBearing(i.bearing,j):j,te="pitch"in i?+i.pitch:$,re="padding"in i?i.padding:b.padding,ye=u.P.convert(i.offset);let we=b.centerPoint.add(ye);const Te=b.pointLocation(we),{center:je,zoom:Fe}=b.getConstrained(u.N.convert(i.center||Te),(_=i.zoom)!==null&&_!==void 0?_:T);this._normalizeCenter(je,b);const $e=b.project(Te),We=b.project(je).sub($e),Le=b.zoomScale(Fe-T);let et,rt;i.around&&(et=u.N.convert(i.around),rt=b.locationPoint(et));const gt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Fe!==T,this._rotating=this._rotating||j!==K,this._pitching=this._pitching||te!==$,this._padding=!b.isPaddingEqual(re),this._easeId=i.easeId,this._prepareEase(p,i.noMoveStart,gt),this.terrain&&this._prepareElevation(je),this._ease((Bt=>{if(this._zooming&&(b.zoom=u.y.number(T,Fe,Bt)),this._rotating&&(b.bearing=u.y.number(j,K,Bt)),this._pitching&&(b.pitch=u.y.number($,te,Bt)),this._padding&&(b.interpolatePadding(V,re,Bt),we=b.centerPoint.add(ye)),this.terrain&&!i.freezeElevation&&this._updateElevation(Bt),et)b.setLocationAtPoint(et,rt);else{const ir=b.zoomScale(b.zoom-T),ur=Fe>T?Math.min(2,Le):Math.max(.5,Le),mr=Math.pow(ur,1-Bt),hr=b.unproject($e.add(We.mult(Bt*mr)).mult(ir));b.setLocationAtPoint(b.renderWorldCopies?hr.wrap():hr,we)}this._applyUpdatedTransform(b),this._fireMoveEvents(p)}),(Bt=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(p,Bt)}),i),this}_prepareEase(i,p,_={}){this._moving=!0,p||_.moving||this.fire(new u.k("movestart",i)),this._zooming&&!_.zooming&&this.fire(new u.k("zoomstart",i)),this._rotating&&!_.rotating&&this.fire(new u.k("rotatestart",i)),this._pitching&&!_.pitching&&this.fire(new u.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const p=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&p!==this._elevationTarget){const _=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(_-(p-(_*i+this._elevationStart))/(1-i)),this._elevationTarget=p}this.transform.elevation=u.y.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(i){const p=i.getCameraPosition(),_=this.terrain.getElevationForLngLatZoom(p.lngLat,i.zoom);if(p.altitude<_){const b=this.calculateCameraOptionsFromTo(p.lngLat,_,i.center,i.elevation);return{pitch:b.pitch,zoom:b.zoom}}return{}}_applyUpdatedTransform(i){const p=[];if(this.terrain&&p.push((b=>this._elevateCameraIfInsideTerrain(b))),this.transformCameraUpdate&&p.push((b=>this.transformCameraUpdate(b))),!p.length)return;const _=i.clone();for(const b of p){const T=_.clone(),{center:j,zoom:$,pitch:V,bearing:K,elevation:te}=b(T);j&&(T.center=j),$!==void 0&&(T.zoom=$),V!==void 0&&(T.pitch=V),K!==void 0&&(T.bearing=K),te!==void 0&&(T.elevation=te),_.apply(T)}this.transform.apply(_)}_fireMoveEvents(i){this.fire(new u.k("move",i)),this._zooming&&this.fire(new u.k("zoom",i)),this._rotating&&this.fire(new u.k("rotate",i)),this._pitching&&this.fire(new u.k("pitch",i))}_afterEase(i,p){if(this._easeId&&p&&this._easeId===p)return;delete this._easeId;const _=this._zooming,b=this._rotating,T=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,_&&this.fire(new u.k("zoomend",i)),b&&this.fire(new u.k("rotateend",i)),T&&this.fire(new u.k("pitchend",i)),this.fire(new u.k("moveend",i))}flyTo(i,p){var _;if(!i.essential&&C.prefersReducedMotion){const ar=u.M(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ar,p)}this.stop(),i=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.b9},i);const b=this._getTransformForUpdate(),T=b.zoom,j=b.bearing,$=b.pitch,V=b.padding,K="bearing"in i?this._normalizeBearing(i.bearing,j):j,te="pitch"in i?+i.pitch:$,re="padding"in i?i.padding:b.padding,ye=u.P.convert(i.offset);let we=b.centerPoint.add(ye);const Te=b.pointLocation(we),{center:je,zoom:Fe}=b.getConstrained(u.N.convert(i.center||Te),(_=i.zoom)!==null&&_!==void 0?_:T);this._normalizeCenter(je,b);const $e=b.zoomScale(Fe-T),We=b.project(Te),Le=b.project(je).sub(We);let et=i.curve;const rt=Math.max(b.width,b.height),gt=rt/$e,Bt=Le.mag();if("minZoom"in i){const ar=u.ac(Math.min(i.minZoom,T,Fe),b.minZoom,b.maxZoom),Hr=rt/b.zoomScale(ar-T);et=Math.sqrt(Hr/Bt*2)}const ir=et*et;function ur(ar){const Hr=(gt*gt-rt*rt+(ar?-1:1)*ir*ir*Bt*Bt)/(2*(ar?gt:rt)*ir*Bt);return Math.log(Math.sqrt(Hr*Hr+1)-Hr)}function mr(ar){return(Math.exp(ar)-Math.exp(-ar))/2}function hr(ar){return(Math.exp(ar)+Math.exp(-ar))/2}const or=ur(!1);let xr=function(ar){return hr(or)/hr(or+et*ar)},Jr=function(ar){return rt*((hr(or)*(mr(Hr=or+et*ar)/hr(Hr))-mr(or))/ir)/Bt;var Hr},fr=(ur(!0)-or)/et;if(Math.abs(Bt)<1e-6||!isFinite(fr)){if(Math.abs(rt-gt)<1e-6)return this.easeTo(i,p);const ar=gt<rt?-1:1;fr=Math.abs(Math.log(gt/rt))/et,Jr=()=>0,xr=Hr=>Math.exp(ar*et*Hr)}return i.duration="duration"in i?+i.duration:1e3*fr/("screenSpeed"in i?+i.screenSpeed/et:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=j!==K,this._pitching=te!==$,this._padding=!b.isPaddingEqual(re),this._prepareEase(p,!1),this.terrain&&this._prepareElevation(je),this._ease((ar=>{const Hr=ar*fr,vi=1/xr(Hr);b.zoom=ar===1?Fe:T+b.scaleZoom(vi),this._rotating&&(b.bearing=u.y.number(j,K,ar)),this._pitching&&(b.pitch=u.y.number($,te,ar)),this._padding&&(b.interpolatePadding(V,re,ar),we=b.centerPoint.add(ye)),this.terrain&&!i.freezeElevation&&this._updateElevation(ar);const an=ar===1?je:b.unproject(We.add(Le.mult(Jr(Hr))).mult(vi));b.setLocationAtPoint(b.renderWorldCopies?an.wrap():an,we),this._applyUpdatedTransform(b),this._fireMoveEvents(p)}),(()=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(p)}),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,p){var _;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const b=this._onEaseEnd;delete this._onEaseEnd,b.call(this,p)}return i||(_=this.handlers)===null||_===void 0||_.stop(!1),this}_ease(i,p,_){_.animate===!1||_.duration===0?(i(1),p()):(this._easeStart=C.now(),this._easeOptions=_,this._onEaseFrame=i,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,p){i=u.b3(i,-180,180);const _=Math.abs(i-p);return Math.abs(i-360-p)<_&&(i-=360),Math.abs(i+360-p)<_&&(i+=360),i}_normalizeCenter(i,p){if(!p.renderWorldCopies||p.lngRange)return;const _=i.lng-p.center.lng;i.lng+=_>180?-360:_<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(u.N.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}const Ms={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Zl{constructor(i=Ms){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=p=>{!p||p.sourceDataType!=="metadata"&&p.sourceDataType!=="visibility"&&p.dataType!=="style"&&p.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options.compact,this._container=P.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=P.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=P.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,p){const _=this._map._getUIString(`AttributionControl.${p}`);i.title=_,i.setAttribute("aria-label",_)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map((b=>typeof b!="string"?"":b))):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const b=this._map.style.stylesheet;this.styleOwner=b.owner,this.styleId=b.id}const p=this._map.style.sourceCaches;for(const b in p){const T=p[b];if(T.used||T.usedForTerrain){const j=T.getSource();j.attribution&&i.indexOf(j.attribution)<0&&i.push(j.attribution)}}i=i.filter((b=>String(b).trim())),i.sort(((b,T)=>b.length-T.length)),i=i.filter(((b,T)=>{for(let j=T+1;j<i.length;j++)if(i[j].indexOf(b)>=0)return!1;return!0}));const _=i.join(" | ");_!==this._attribHTML&&(this._attribHTML=_,i.length?(this._innerContainer.innerHTML=_,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Ku{constructor(i={}){this._updateCompact=()=>{const p=this._container.children;if(p.length){const _=p[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&_.classList.add("maplibregl-compact"):_.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=P.create("div","maplibregl-ctrl");const p=P.create("a","maplibregl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://maplibre.org/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){P.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class En{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const p=++this._id;return this._queue.push({callback:i,id:p,cancelled:!1}),p}remove(i){const p=this._currentlyRunning,_=p?this._queue.concat(p):this._queue;for(const b of _)if(b.id===i)return void(b.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const p=this._currentlyRunning=this._queue;this._queue=[];for(const _ of p)if(!_.cancelled&&(_.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var be=u.Y([{name:"a_pos3d",type:"Int16",components:3}]);class Xu extends u.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,p){this.sourceCache.update(i,p),this._renderableTilesKeys=[];const _={};for(const b of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:p}))_[b.key]=!0,this._renderableTilesKeys.push(b.key),this._tiles[b.key]||(b.posMatrix=new Float64Array(16),u.aP(b.posMatrix,0,u.X,0,u.X,0,1),this._tiles[b.key]=new ca(b,this.tileSize));for(const b in this._tiles)_[b]||delete this._tiles[b]}freeRtt(i){for(const p in this._tiles){const _=this._tiles[p];(!i||_.tileID.equals(i)||_.tileID.isChildOf(i)||i.isChildOf(_.tileID))&&(_.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((i=>this.getTileByID(i)))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const p={};for(const _ of this._renderableTilesKeys){const b=this._tiles[_].tileID;if(b.canonical.equals(i.canonical)){const T=i.clone();T.posMatrix=new Float64Array(16),u.aP(T.posMatrix,0,u.X,0,u.X,0,1),p[_]=T}else if(b.canonical.isChildOf(i.canonical)){const T=i.clone();T.posMatrix=new Float64Array(16);const j=b.canonical.z-i.canonical.z,$=b.canonical.x-(b.canonical.x>>j<<j),V=b.canonical.y-(b.canonical.y>>j<<j),K=u.X>>j;u.aP(T.posMatrix,0,K,0,K,0,1),u.J(T.posMatrix,T.posMatrix,[-$*K,-V*K,0]),p[_]=T}else if(i.canonical.isChildOf(b.canonical)){const T=i.clone();T.posMatrix=new Float64Array(16);const j=i.canonical.z-b.canonical.z,$=i.canonical.x-(i.canonical.x>>j<<j),V=i.canonical.y-(i.canonical.y>>j<<j),K=u.X>>j;u.aP(T.posMatrix,0,u.X,0,u.X,0,1),u.J(T.posMatrix,T.posMatrix,[$*K,V*K,0]),u.K(T.posMatrix,T.posMatrix,[1/2**j,1/2**j,0]),p[_]=T}}return p}getSourceTile(i,p){const _=this.sourceCache._source;let b=i.overscaledZ-this.deltaZoom;if(b>_.maxzoom&&(b=_.maxzoom),b<_.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(b).key);let T=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!T||!T.dem)&&p)for(;b>=_.minzoom&&(!T||!T.dem);)T=this.sourceCache.getTileByID(i.scaledTo(b--).key);return T}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter((p=>p.timeAdded>=i))}}class Kl{constructor(i,p,_){this.painter=i,this.sourceCache=new Xu(p),this.options=_,this.exaggeration=typeof _.exaggeration=="number"?_.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,p,_,b=u.X){var T;if(!(p>=0&&p<b&&_>=0&&_<b))return 0;const j=this.getTerrainData(i),$=(T=j.tile)===null||T===void 0?void 0:T.dem;if(!$)return 0;const V=(function(Te,je,Fe){var $e=je[0],We=je[1];return Te[0]=Fe[0]*$e+Fe[4]*We+Fe[12],Te[1]=Fe[1]*$e+Fe[5]*We+Fe[13],Te})([],[p/b*u.X,_/b*u.X],j.u_terrain_matrix),K=[V[0]*$.dim,V[1]*$.dim],te=Math.floor(K[0]),re=Math.floor(K[1]),ye=K[0]-te,we=K[1]-re;return $.get(te,re)*(1-ye)*(1-we)+$.get(te+1,re)*ye*(1-we)+$.get(te,re+1)*(1-ye)*we+$.get(te+1,re+1)*ye*we}getElevationForLngLatZoom(i,p){if(!u.bb(p,i.wrap()))return 0;const{tileID:_,mercatorX:b,mercatorY:T}=this._getOverscaledTileIDFromLngLatZoom(i,p);return this.getElevation(_,b%u.X,T%u.X,u.X)}getElevation(i,p,_,b=u.X){return this.getDEMElevation(i,p,_,b)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const b=this.painter.context,T=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new _e(b,T,b.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new _e(b,new u.R({width:1,height:1}),b.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.an([])}const p=this.sourceCache.getSourceTile(i,!0);if(p&&p.dem&&(!p.demTexture||p.needsTerrainPrepare)){const b=this.painter.context;p.demTexture=this.painter.getTileTexture(p.dem.stride),p.demTexture?p.demTexture.update(p.dem.getPixels(),{premultiply:!1}):p.demTexture=new _e(b,p.dem.getPixels(),b.gl.RGBA,{premultiply:!1}),p.demTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),p.needsTerrainPrepare=!1}const _=p&&p+p.tileID.key+i.key;if(_&&!this._demMatrixCache[_]){const b=this.sourceCache.sourceCache._source.maxzoom;let T=i.canonical.z-p.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=b?T=i.canonical.z-b:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const j=i.canonical.x-(i.canonical.x>>T<<T),$=i.canonical.y-(i.canonical.y>>T<<T),V=u.bc(new Float64Array(16),[1/(u.X<<T),1/(u.X<<T),0]);u.J(V,V,[j*u.X,$*u.X,0]),this._demMatrixCache[i.key]={matrix:V,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:p&&p.dem&&p.dem.dim||1,u_terrain_matrix:_?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:p&&p.dem&&p.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(p&&p.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:p}}getFramebuffer(i){const p=this.painter,_=p.width/devicePixelRatio,b=p.height/devicePixelRatio;return!this._fbo||this._fbo.width===_&&this._fbo.height===b||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new _e(p.context,{width:_,height:b,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new _e(p.context,{width:_,height:b,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=p.context.createFramebuffer(_,b,!0,!1),this._fbo.depthAttachment.set(p.context.createRenderbuffer(p.context.gl.DEPTH_COMPONENT16,_,b))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const p=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let T=0,j=0;T<this._coordsTextureSize;T++)for(let $=0;$<this._coordsTextureSize;$++,j+=4)p[j+0]=255&$,p[j+1]=255&T,p[j+2]=$>>8<<4|T>>8,p[j+3]=0;const _=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(p.buffer)),b=new _e(i,_,i.gl.RGBA,{premultiply:!1});return b.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=b,b}pointCoordinate(i){this.painter.maybeDrawDepthAndCoords(!0);const p=new Uint8Array(4),_=this.painter.context,b=_.gl,T=Math.round(i.x*this.painter.pixelRatio/devicePixelRatio),j=Math.round(i.y*this.painter.pixelRatio/devicePixelRatio),$=Math.round(this.painter.height/devicePixelRatio);_.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),b.readPixels(T,$-j-1,1,1,b.RGBA,b.UNSIGNED_BYTE,p),_.bindFramebuffer.set(null);const V=p[0]+(p[2]>>4<<8),K=p[1]+((15&p[2])<<8),te=this.coordsIndex[255-p[3]],re=te&&this.sourceCache.getTileByID(te);if(!re)return null;const ye=this._coordsTextureSize,we=(1<<re.tileID.canonical.z)*ye;return new u.Z((re.tileID.canonical.x*ye+V)/we+re.tileID.wrap,(re.tileID.canonical.y*ye+K)/we,this.getElevation(re.tileID,V,K,ye))}depthAtPoint(i){const p=new Uint8Array(4),_=this.painter.context,b=_.gl;return _.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),b.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,b.RGBA,b.UNSIGNED_BYTE,p),_.bindFramebuffer.set(null),(p[0]/16777216+p[1]/65536+p[2]/256+p[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,p=new u.bd,_=new u.aY,b=this.meshSize,T=u.X/b,j=b*b;for(let re=0;re<=b;re++)for(let ye=0;ye<=b;ye++)p.emplaceBack(ye*T,re*T,0);for(let re=0;re<j;re+=b+1)for(let ye=0;ye<b;ye++)_.emplaceBack(ye+re,b+ye+re+1,b+ye+re+2),_.emplaceBack(ye+re,b+ye+re+2,ye+re+1);const $=p.length,V=$+2*(b+1);for(const re of[0,1])for(let ye=0;ye<=b;ye++)for(const we of[0,1])p.emplaceBack(ye*T,re*u.X,we);for(let re=0;re<2*b;re+=2)_.emplaceBack(V+re,V+re+1,V+re+3),_.emplaceBack(V+re,V+re+3,V+re+2),_.emplaceBack($+re,$+re+3,$+re+1),_.emplaceBack($+re,$+re+2,$+re+3);const K=p.length,te=K+2*(b+1);for(const re of[0,1])for(let ye=0;ye<=b;ye++)for(const we of[0,1])p.emplaceBack(re*u.X,ye*T,we);for(let re=0;re<2*b;re+=2)_.emplaceBack(K+re,K+re+1,K+re+3),_.emplaceBack(K+re,K+re+3,K+re+2),_.emplaceBack(te+re,te+re+3,te+re+1),_.emplaceBack(te+re,te+re+2,te+re+3);return this._mesh=new Ct(i.createVertexBuffer(p,be.members),i.createIndexBuffer(_),u.a0.simpleSegment(0,0,p.length,_.length)),this._mesh}getMeshFrameDelta(i){return 2*Math.PI*u.be/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,p){var _;const{tileID:b}=this._getOverscaledTileIDFromLngLatZoom(i,p);return(_=this.getMinMaxElevation(b).minElevation)!==null&&_!==void 0?_:0}getMinMaxElevation(i){const p=this.getTerrainData(i).tile,_={minElevation:null,maxElevation:null};return p&&p.dem&&(_.minElevation=p.dem.min*this.exaggeration,_.maxElevation=p.dem.max*this.exaggeration),_}_getOverscaledTileIDFromLngLatZoom(i,p){const _=u.Z.fromLngLat(i.wrap()),b=(1<<p)*u.X,T=_.x*b,j=_.y*b,$=Math.floor(T/u.X),V=Math.floor(j/u.X);return{tileID:new u.S(p,0,p,$,V),mercatorX:T,mercatorY:j}}}class hs{constructor(i,p,_){this._context=i,this._size=p,this._tileSize=_,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const p=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),_=new _e(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return _.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),p.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),p.colorAttachment.set(_.texture),{id:i,fbo:p,texture:_,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((p=>i.id!==p)),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const p of this._recentlyUsed)if(!this._objects[p].inUse)return this._objects[p];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((i=>!i.inUse))===!1}}const vn={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Xl{constructor(i,p){this.painter=i,this.terrain=p,this.pool=new hs(i.context,30,p.sourceCache.tileSize*p.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,p){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter((_=>!i._layers[_].isHidden(p))),this._coordsDescendingInv={};for(const _ in i.sourceCaches){this._coordsDescendingInv[_]={};const b=i.sourceCaches[_].getVisibleCoordinates();for(const T of b){const j=this.terrain.sourceCache.getTerrainCoords(T);for(const $ in j)this._coordsDescendingInv[_][$]||(this._coordsDescendingInv[_][$]=[]),this._coordsDescendingInv[_][$].push(j[$])}}this._coordsDescendingInvStr={};for(const _ of i._order){const b=i._layers[_],T=b.source;if(vn[b.type]&&!this._coordsDescendingInvStr[T]){this._coordsDescendingInvStr[T]={};for(const j in this._coordsDescendingInv[T])this._coordsDescendingInvStr[T][j]=this._coordsDescendingInv[T][j].map(($=>$.key)).sort().join()}}for(const _ of this._renderableTiles)for(const b in this._coordsDescendingInvStr){const T=this._coordsDescendingInvStr[b][_.tileID.key];T&&T!==_.rttCoords[b]&&(_.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const p=i.type,_=this.painter,b=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(vn[p]&&(this._prevType&&vn[this._prevType]||this._stacks.push([]),this._prevType=p,this._stacks[this._stacks.length-1].push(i.id),!b))return!0;if(vn[this._prevType]||vn[p]&&b){this._prevType=p;const T=this._stacks.length-1,j=this._stacks[T]||[];for(const $ of this._renderableTiles){if(this.pool.isFull()&&(Ft(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push($),$.rtt[T]){const K=this.pool.getObjectForId($.rtt[T].id);if(K.stamp===$.rtt[T].stamp){this.pool.useObject(K);continue}}const V=this.pool.getOrCreateFreeObject();this.pool.useObject(V),this.pool.stampObject(V),$.rtt[T]={id:V.id,stamp:V.stamp},_.context.bindFramebuffer.set(V.fbo.framebuffer),_.context.clear({color:u.aM.transparent,stencil:0}),_.currentStencilSource=void 0;for(let K=0;K<j.length;K++){const te=_.style._layers[j[K]],re=te.source?this._coordsDescendingInv[te.source][$.tileID.key]:[$.tileID];_.context.viewport.set([0,0,V.fbo.width,V.fbo.height]),_._renderTileClippingMasks(te,re),_.renderLayer(_,_.style.sourceCaches[te.source],te,re),te.source&&($.rttCoords[te.source]=this._coordsDescendingInvStr[te.source][$.tileID.key])}}return Ft(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),vn[p]}return!1}}const Yl={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Jl=v,_u={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Ms,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Kd=D=>{D.touchstart=D.dragStart,D.touchmoveWindow=D.dragMove,D.touchend=D.dragEnd},nd={showCompass:!0,showZoom:!0,visualizePitch:!1};class Vh{constructor(i,p,_=!1){this.mousedown=j=>{this.startMouse(u.e({},j,{ctrlKey:!0,preventDefault:()=>j.preventDefault()}),P.mousePos(this.element,j)),P.addEventListener(window,"mousemove",this.mousemove),P.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=j=>{this.moveMouse(j,P.mousePos(this.element,j))},this.mouseup=j=>{this.mouseRotate.dragEnd(j),this.mousePitch&&this.mousePitch.dragEnd(j),this.offTemp()},this.touchstart=j=>{j.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=P.touchPos(this.element,j.targetTouches)[0],this.startTouch(j,this._startPos),P.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.addEventListener(window,"touchend",this.touchend))},this.touchmove=j=>{j.targetTouches.length!==1?this.reset():(this._lastPos=P.touchPos(this.element,j.targetTouches)[0],this.moveTouch(j,this._lastPos))},this.touchend=j=>{j.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const b=i.dragRotate._mouseRotate.getClickTolerance(),T=i.dragRotate._mousePitch.getClickTolerance();this.element=p,this.mouseRotate=Fh({clickTolerance:b,enable:!0}),this.touchRotate=(({enable:j,clickTolerance:$,bearingDegreesPerPixelMoved:V=.8})=>{const K=new El;return new Eo({clickTolerance:$,move:(te,re)=>({bearingDelta:(re.x-te.x)*V}),moveStateManager:K,enable:j,assignEvents:Kd})})({clickTolerance:b,enable:!0}),this.map=i,_&&(this.mousePitch=rd({clickTolerance:T,enable:!0}),this.touchPitch=(({enable:j,clickTolerance:$,pitchDegreesPerPixelMoved:V=-.5})=>{const K=new El;return new Eo({clickTolerance:$,move:(te,re)=>({pitchDelta:(re.y-te.y)*V}),moveStateManager:K,enable:j,assignEvents:Kd})})({clickTolerance:T,enable:!0})),P.addEventListener(p,"mousedown",this.mousedown),P.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),P.addEventListener(p,"touchcancel",this.reset)}startMouse(i,p){this.mouseRotate.dragStart(i,p),this.mousePitch&&this.mousePitch.dragStart(i,p),P.disableDrag()}startTouch(i,p){this.touchRotate.dragStart(i,p),this.touchPitch&&this.touchPitch.dragStart(i,p),P.disableDrag()}moveMouse(i,p){const _=this.map,{bearingDelta:b}=this.mouseRotate.dragMove(i,p)||{};if(b&&_.setBearing(_.getBearing()+b),this.mousePitch){const{pitchDelta:T}=this.mousePitch.dragMove(i,p)||{};T&&_.setPitch(_.getPitch()+T)}}moveTouch(i,p){const _=this.map,{bearingDelta:b}=this.touchRotate.dragMove(i,p)||{};if(b&&_.setBearing(_.getBearing()+b),this.touchPitch){const{pitchDelta:T}=this.touchPitch.dragMove(i,p)||{};T&&_.setPitch(_.getPitch()+T)}}off(){const i=this.element;P.removeEventListener(i,"mousedown",this.mousedown),P.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend),P.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){P.enableDrag(),P.removeEventListener(window,"mousemove",this.mousemove),P.removeEventListener(window,"mouseup",this.mouseup),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend)}}let Qa;function Pn(D,i,p){const _=new u.N(D.lng,D.lat);if(D=new u.N(D.lng,D.lat),i){const b=new u.N(D.lng-360,D.lat),T=new u.N(D.lng+360,D.lat),j=p.locationPoint(D).distSqr(i);p.locationPoint(b).distSqr(i)<j?D=b:p.locationPoint(T).distSqr(i)<j&&(D=T)}for(;Math.abs(D.lng-p.center.lng)>180;){const b=p.locationPoint(D);if(b.x>=0&&b.y>=0&&b.x<=p.width&&b.y<=p.height)break;D.lng>p.center.lng?D.lng-=360:D.lng+=360}return D.lng!==_.lng&&p.locationPoint(D).y>p.height/2-p.getHorizon()?D:_}const Ao={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Xd(D,i,p){const _=D.classList;for(const b in Ao)_.remove(`maplibregl-${p}-anchor-${b}`);_.add(`maplibregl-${p}-anchor-${i}`)}class qh extends u.E{constructor(i){if(super(),this._onKeyPress=p=>{const _=p.code,b=p.charCode||p.keyCode;_!=="Space"&&_!=="Enter"&&b!==32&&b!==13||this.togglePopup()},this._onMapClick=p=>{const _=p.originalEvent.target,b=this._element;this._popup&&(_===b||b.contains(_))&&this.togglePopup()},this._update=p=>{var _;if(!this._map)return;const b=this._map.loaded()&&!this._map.isMoving();((p==null?void 0:p.type)==="terrain"||(p==null?void 0:p.type)==="render"&&!b)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Pn(this._lngLat,this._flatPos,this._map.transform):(_=this._lngLat)===null||_===void 0?void 0:_.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let T="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?T=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(T=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let j="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?j="rotateX(0deg)":this._pitchAlignment==="map"&&(j=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||p&&p.type!=="moveend"||(this._pos=this._pos.round()),P.setTransform(this._element,`${Ao[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${j} ${T}`),C.frameAsync(new AbortController).then((()=>{this._updateOpacity(p&&p.type==="moveend")})).catch((()=>{}))},this._onMove=p=>{if(!this._isDragging){const _=this._clickTolerance||this._map._clickTolerance;this._isDragging=p.point.dist(this._pointerdownPos)>=_}this._isDragging&&(this._pos=p.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.k("dragstart"))),this.fire(new u.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.k("dragend")),this._state="inactive"},this._addDragHandler=p=>{this._element.contains(p.originalEvent.target)&&(p.preventDefault(),this._positionDelta=p.point.sub(this._pos).add(this._offset),this._pointerdownPos=p.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._subpixelPositioning=i&&i.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(i==null?void 0:i.opacity,i==null?void 0:i.opacityWhenCovered),i&&i.element)this._element=i.element,this._offset=u.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=P.create("div");const p=P.createNS("http://www.w3.org/2000/svg","svg"),_=41,b=27;p.setAttributeNS(null,"display","block"),p.setAttributeNS(null,"height",`${_}px`),p.setAttributeNS(null,"width",`${b}px`),p.setAttributeNS(null,"viewBox",`0 0 ${b} ${_}`);const T=P.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"stroke","none"),T.setAttributeNS(null,"stroke-width","1"),T.setAttributeNS(null,"fill","none"),T.setAttributeNS(null,"fill-rule","evenodd");const j=P.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"fill-rule","nonzero");const $=P.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"transform","translate(3.0, 29.0)"),$.setAttributeNS(null,"fill","#000000");const V=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const $e of V){const We=P.createNS("http://www.w3.org/2000/svg","ellipse");We.setAttributeNS(null,"opacity","0.04"),We.setAttributeNS(null,"cx","10.5"),We.setAttributeNS(null,"cy","5.80029008"),We.setAttributeNS(null,"rx",$e.rx),We.setAttributeNS(null,"ry",$e.ry),$.appendChild(We)}const K=P.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"fill",this._color);const te=P.createNS("http://www.w3.org/2000/svg","path");te.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),K.appendChild(te);const re=P.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"opacity","0.25"),re.setAttributeNS(null,"fill","#000000");const ye=P.createNS("http://www.w3.org/2000/svg","path");ye.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),re.appendChild(ye);const we=P.createNS("http://www.w3.org/2000/svg","g");we.setAttributeNS(null,"transform","translate(6.0, 7.0)"),we.setAttributeNS(null,"fill","#FFFFFF");const Te=P.createNS("http://www.w3.org/2000/svg","g");Te.setAttributeNS(null,"transform","translate(8.0, 8.0)");const je=P.createNS("http://www.w3.org/2000/svg","circle");je.setAttributeNS(null,"fill","#000000"),je.setAttributeNS(null,"opacity","0.25"),je.setAttributeNS(null,"cx","5.5"),je.setAttributeNS(null,"cy","5.5"),je.setAttributeNS(null,"r","5.4999962");const Fe=P.createNS("http://www.w3.org/2000/svg","circle");Fe.setAttributeNS(null,"fill","#FFFFFF"),Fe.setAttributeNS(null,"cx","5.5"),Fe.setAttributeNS(null,"cy","5.5"),Fe.setAttributeNS(null,"r","5.4999962"),Te.appendChild(je),Te.appendChild(Fe),j.appendChild($),j.appendChild(K),j.appendChild(re),j.appendChild(we),j.appendChild(Te),p.appendChild(j),p.setAttributeNS(null,"height",_*this._scale+"px"),p.setAttributeNS(null,"width",b*this._scale+"px"),this._element.appendChild(p),this._offset=u.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(p=>{p.preventDefault()})),this._element.addEventListener("mousedown",(p=>{p.preventDefault()})),Xd(this._element,this._anchor,"marker"),i&&i.className)for(const p of i.className.split(" "))this._element.classList.add(p);this._popup=null}addTo(i){return this.remove(),this._map=i,this._element.setAttribute("aria-label",i._getUIString("Marker.Title")),i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),P.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=u.N.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const b=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[b,-1*(38.1-13.5+b)],"bottom-right":[-b,-1*(38.1-13.5+b)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(i){return this._subpixelPositioning=i,this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:i?(i.isOpen()?i.remove():(i.setLngLat(this._lngLat),i.addTo(this._map)),this):this}_updateOpacity(i=!1){var p,_;if(!(!((p=this._map)===null||p===void 0)&&p.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(i)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const b=this._map,T=b.terrain.depthAtPoint(this._pos),j=b.terrain.getElevationForLngLatZoom(this._lngLat,b.transform.tileZoom);if(b.transform.lngLatToCameraDepth(this._lngLat,j)-T<.006)return void(this._element.style.opacity=this._opacity);const $=-this._offset.y/b.transform._pixelPerMeter,V=Math.sin(b.getPitch()*Math.PI/180)*$,K=b.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),te=b.transform.lngLatToCameraDepth(this._lngLat,j+V)-K>.006;!((_=this._popup)===null||_===void 0)&&_.isOpen()&&te&&this._popup.remove(),this._element.style.opacity=te?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(i){return this._offset=u.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(i,p){return i===void 0&&p===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),i!==void 0&&(this._opacity=i),p!==void 0&&(this._opacityWhenCovered=p),this._map&&this._updateOpacity(!0),this}}const pg={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Yd=0,ha=!1;const Ha={maxWidth:100,unit:"metric"};function bu(D,i,p){const _=p&&p.maxWidth||100,b=D._container.clientHeight/2,T=D.unproject([0,b]),j=D.unproject([_,b]),$=T.distanceTo(j);if(p&&p.unit==="imperial"){const V=3.2808*$;V>5280?Ar(i,_,V/5280,D._getUIString("ScaleControl.Miles")):Ar(i,_,V,D._getUIString("ScaleControl.Feet"))}else p&&p.unit==="nautical"?Ar(i,_,$/1852,D._getUIString("ScaleControl.NauticalMiles")):$>=1e3?Ar(i,_,$/1e3,D._getUIString("ScaleControl.Kilometers")):Ar(i,_,$,D._getUIString("ScaleControl.Meters"))}function Ar(D,i,p,_){const b=(function(T){const j=Math.pow(10,`${Math.floor(T)}`.length-1);let $=T/j;return $=$>=10?10:$>=5?5:$>=3?3:$>=2?2:$>=1?1:(function(V){const K=Math.pow(10,Math.ceil(-Math.log(V)/Math.LN10));return Math.round(V*K)/K})($),j*$})(p);D.style.width=i*(b/p)+"px",D.innerHTML=`${b}&nbsp;${_}`}const qr={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},wu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Su(D){if(D){if(typeof D=="number"){const i=Math.round(Math.abs(D)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,D),"top-left":new u.P(i,i),"top-right":new u.P(-i,i),bottom:new u.P(0,-D),"bottom-left":new u.P(i,-i),"bottom-right":new u.P(-i,-i),left:new u.P(D,0),right:new u.P(-D,0)}}if(D instanceof u.P||Array.isArray(D)){const i=u.P.convert(D);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:u.P.convert(D.center||[0,0]),top:u.P.convert(D.top||[0,0]),"top-left":u.P.convert(D["top-left"]||[0,0]),"top-right":u.P.convert(D["top-right"]||[0,0]),bottom:u.P.convert(D.bottom||[0,0]),"bottom-left":u.P.convert(D["bottom-left"]||[0,0]),"bottom-right":u.P.convert(D["bottom-right"]||[0,0]),left:u.P.convert(D.left||[0,0]),right:u.P.convert(D.right||[0,0])}}return Su(new u.P(0,0))}const Eu=v;h.AJAXError=u.bh,h.Evented=u.E,h.LngLat=u.N,h.MercatorCoordinate=u.Z,h.Point=u.P,h.addProtocol=u.bi,h.config=u.a,h.removeProtocol=u.bj,h.AttributionControl=Zl,h.BoxZoomHandler=Ja,h.CanvasSource=ai,h.CooperativeGesturesHandler=na,h.DoubleClickZoomHandler=co,h.DragPanHandler=xu,h.DragRotateHandler=Hu,h.EdgeInsets=ki,h.FullscreenControl=class extends u.E{constructor(D={}){super(),this._onFullscreenChange=()=>{var i;let p=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((i=p==null?void 0:p.shadowRoot)===null||i===void 0)&&i.fullscreenElement;)p=p.shadowRoot.fullscreenElement;p===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,D&&D.container&&(D.container instanceof HTMLElement?this._container=D.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(D){return this._map=D,this._container||(this._container=this._map.getContainer()),this._controlContainer=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){P.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const D=this._fullscreenButton=P.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);P.create("span","maplibregl-ctrl-icon",D).setAttribute("aria-hidden","true"),D.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const D=this._getTitle();this._fullscreenButton.setAttribute("aria-label",D),this._fullscreenButton.title=D}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},h.GeoJSONSource=Hn,h.GeolocateControl=class extends u.E{constructor(D){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new u.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{const p=new u.N(i.coords.longitude,i.coords.latitude),_=i.coords.accuracy,b=this._map.getBearing(),T=u.e({bearing:b},this.options.fitBoundsOptions),j=ke.fromLngLat(p,_);this._map.fitBounds(j,T,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const p=new u.N(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(p).addTo(this._map),this._userLocationDotMarker.setLngLat(p).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&ha)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(i=>i.preventDefault())),this._geolocateButton=P.create("button","maplibregl-ctrl-geolocate",this._container),P.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=i=>{if(this._map){if(i===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}else{const p=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=P.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new qh({element:this._dotElement}),this._circleElement=P.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new qh({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(p=>{p.geolocateSource||this._watchState!=="ACTIVE_LOCK"||p.originalEvent&&p.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.k("trackuserlocationend")),this.fire(new u.k("userlocationlostfocus")))}))}},this.options=u.e({},pg,D)}onAdd(D){return this._map=D,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return u._(this,arguments,void 0,(function*(i=!1){if(Qa!==void 0&&!i)return Qa;if(window.navigator.permissions===void 0)return Qa=!!window.navigator.geolocation,Qa;try{Qa=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Qa=!!window.navigator.geolocation}return Qa}))})().then((i=>this._finishSetupUI(i))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),P.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Yd=0,ha=!1}_isOutOfMapMaxBounds(D){const i=this._map.getMaxBounds(),p=D.coords;return i&&(p.longitude<i.getWest()||p.longitude>i.getEast()||p.latitude<i.getSouth()||p.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const D=this._map.getBounds(),i=D.getSouthEast(),p=D.getNorthEast(),_=i.distanceTo(p),b=Math.ceil(this._accuracy/(_/this._map._container.clientHeight)*2);this._circleElement.style.width=`${b}px`,this._circleElement.style.height=`${b}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Yd--,ha=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.k("trackuserlocationstart")),this.fire(new u.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let D;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Yd++,Yd>1?(D={maximumAge:6e5,timeout:0},ha=!0):(D=this.options.positionOptions,ha=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,D)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},h.Hash=No,h.ImageSource=ba,h.KeyboardHandler=Ea,h.LngLatBounds=ke,h.LogoControl=Ku,h.Map=class extends Uh{constructor(D){u.bf.mark(u.bg.create);const i=Object.assign(Object.assign({},_u),D);if(i.minZoom!=null&&i.maxZoom!=null&&i.minZoom>i.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(i.minPitch!=null&&i.maxPitch!=null&&i.minPitch>i.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(i.minPitch!=null&&i.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(i.maxPitch!=null&&i.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new gu(i.minZoom,i.maxZoom,i.minPitch,i.maxPitch,i.renderWorldCopies),{bearingSnap:i.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new En,this._controls=[],this._mapId=u.a4(),this._contextLost=p=>{p.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new u.k("webglcontextlost",{originalEvent:p}))},this._contextRestored=p=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.k("webglcontextrestored",{originalEvent:p}))},this._onMapScroll=p=>{if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=i.interactive,this._maxTileCacheSize=i.maxTileCacheSize,this._maxTileCacheZoomLevels=i.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=i.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=i.preserveDrawingBuffer===!0,this._antialias=i.antialias===!0,this._trackResize=i.trackResize===!0,this._bearingSnap=i.bearingSnap,this._refreshExpiredTiles=i.refreshExpiredTiles===!0,this._fadeDuration=i.fadeDuration,this._crossSourceCollisions=i.crossSourceCollisions===!0,this._collectResourceTiming=i.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Yl),i.locale),this._clickTolerance=i.clickTolerance,this._overridePixelRatio=i.pixelRatio,this._maxCanvasSize=i.maxCanvasSize,this.transformCameraUpdate=i.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=i.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ne.addThrottleControl((()=>this.isMoving())),this._requestManager=new ue(i.transformRequest),typeof i.container=="string"){if(this._container=document.getElementById(i.container),!this._container)throw new Error(`Container '${i.container}' not found.`)}else{if(!(i.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=i.container}if(i.maxBounds&&this.setMaxBounds(i.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))).on("moveend",(()=>this._update(!1))).on("zoom",(()=>this._update(!0))).on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})).once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let p=!1;const _=Sl((b=>{this._trackResize&&!this._removed&&(this.resize(b),this.redraw())}),50);this._resizeObserver=new ResizeObserver((b=>{p?_(b):p=!0})),this._resizeObserver.observe(this._container)}this.handlers=new ds(this,i),this._hash=i.hash&&new No(typeof i.hash=="string"&&i.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:i.center,zoom:i.zoom,bearing:i.bearing,pitch:i.pitch}),i.bounds&&(this.resize(),this.fitBounds(i.bounds,u.e({},i.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=i.localIdeographFontFamily,this._validateStyle=i.validateStyle,i.style&&this.setStyle(i.style,{localIdeographFontFamily:i.localIdeographFontFamily}),i.attributionControl&&this.addControl(new Zl(typeof i.attributionControl=="boolean"?void 0:i.attributionControl)),i.maplibreLogo&&this.addControl(new Ku,i.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(p=>{this._update(p.dataType==="style"),this.fire(new u.k(`${p.dataType}data`,p))})),this.on("dataloading",(p=>{this.fire(new u.k(`${p.dataType}dataloading`,p))})),this.on("dataabort",(p=>{this.fire(new u.k("sourcedataabort",p))}))}_getMapId(){return this._mapId}addControl(D,i){if(i===void 0&&(i=D.getDefaultPosition?D.getDefaultPosition():"top-right"),!D||!D.onAdd)return this.fire(new u.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const p=D.onAdd(this);this._controls.push(D);const _=this._controlPositions[i];return i.indexOf("bottom")!==-1?_.insertBefore(p,_.firstChild):_.appendChild(p),this}removeControl(D){if(!D||!D.onRemove)return this.fire(new u.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(D);return i>-1&&this._controls.splice(i,1),D.onRemove(this),this}hasControl(D){return this._controls.indexOf(D)>-1}calculateCameraOptionsFromTo(D,i,p,_){return _==null&&this.terrain&&(_=this.terrain.getElevationForLngLatZoom(p,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(D,i,p,_)}resize(D){var i;const p=this._containerDimensions(),_=p[0],b=p[1],T=this._getClampedPixelRatio(_,b);if(this._resizeCanvas(_,b,T),this.painter.resize(_,b,T),this.painter.overLimit()){const $=this.painter.context.gl;this._maxCanvasSize=[$.drawingBufferWidth,$.drawingBufferHeight];const V=this._getClampedPixelRatio(_,b);this._resizeCanvas(_,b,V),this.painter.resize(_,b,V)}this.transform.resize(_,b),(i=this._requestedCameraState)===null||i===void 0||i.resize(_,b);const j=!this._moving;return j&&(this.stop(),this.fire(new u.k("movestart",D)).fire(new u.k("move",D))),this.fire(new u.k("resize",D)),j&&this.fire(new u.k("moveend",D)),this}_getClampedPixelRatio(D,i){const{0:p,1:_}=this._maxCanvasSize,b=this.getPixelRatio(),T=D*b,j=i*b;return Math.min(T>p?p/T:1,j>_?_/j:1)*b}getPixelRatio(){var D;return(D=this._overridePixelRatio)!==null&&D!==void 0?D:devicePixelRatio}setPixelRatio(D){this._overridePixelRatio=D,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(D){return this.transform.setMaxBounds(ke.convert(D)),this._update()}setMinZoom(D){if((D=D??-2)>=-2&&D<=this.transform.maxZoom)return this.transform.minZoom=D,this._update(),this.getZoom()<D&&this.setZoom(D),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(D){if((D=D??22)>=this.transform.minZoom)return this.transform.maxZoom=D,this._update(),this.getZoom()>D&&this.setZoom(D),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(D){if((D=D??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(D>=0&&D<=this.transform.maxPitch)return this.transform.minPitch=D,this._update(),this.getPitch()<D&&this.setPitch(D),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(D){if((D=D??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(D>=this.transform.minPitch)return this.transform.maxPitch=D,this._update(),this.getPitch()>D&&this.setPitch(D),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(D){return this.transform.renderWorldCopies=D,this._update()}project(D){return this.transform.locationPoint(u.N.convert(D),this.style&&this.terrain)}unproject(D){return this.transform.pointLocation(u.P.convert(D),this.terrain)}isMoving(){var D;return this._moving||((D=this.handlers)===null||D===void 0?void 0:D.isMoving())}isZooming(){var D;return this._zooming||((D=this.handlers)===null||D===void 0?void 0:D.isZooming())}isRotating(){var D;return this._rotating||((D=this.handlers)===null||D===void 0?void 0:D.isRotating())}_createDelegatedListener(D,i,p){if(D==="mouseenter"||D==="mouseover"){let _=!1;return{layers:i,listener:p,delegates:{mousemove:T=>{const j=i.filter((V=>this.getLayer(V))),$=j.length!==0?this.queryRenderedFeatures(T.point,{layers:j}):[];$.length?_||(_=!0,p.call(this,new Ci(D,this,T.originalEvent,{features:$}))):_=!1},mouseout:()=>{_=!1}}}}if(D==="mouseleave"||D==="mouseout"){let _=!1;return{layers:i,listener:p,delegates:{mousemove:j=>{const $=i.filter((V=>this.getLayer(V)));($.length!==0?this.queryRenderedFeatures(j.point,{layers:$}):[]).length?_=!0:_&&(_=!1,p.call(this,new Ci(D,this,j.originalEvent)))},mouseout:j=>{_&&(_=!1,p.call(this,new Ci(D,this,j.originalEvent)))}}}}{const _=b=>{const T=i.filter(($=>this.getLayer($))),j=T.length!==0?this.queryRenderedFeatures(b.point,{layers:T}):[];j.length&&(b.features=j,p.call(this,b),delete b.features)};return{layers:i,listener:p,delegates:{[D]:_}}}}_saveDelegatedListener(D,i){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[D]=this._delegatedListeners[D]||[],this._delegatedListeners[D].push(i)}_removeDelegatedListener(D,i,p){if(!this._delegatedListeners||!this._delegatedListeners[D])return;const _=this._delegatedListeners[D];for(let b=0;b<_.length;b++){const T=_[b];if(T.listener===p&&T.layers.length===i.length&&T.layers.every((j=>i.includes(j)))){for(const j in T.delegates)this.off(j,T.delegates[j]);return void _.splice(b,1)}}}on(D,i,p){if(p===void 0)return super.on(D,i);const _=this._createDelegatedListener(D,typeof i=="string"?[i]:i,p);this._saveDelegatedListener(D,_);for(const b in _.delegates)this.on(b,_.delegates[b]);return this}once(D,i,p){if(p===void 0)return super.once(D,i);const _=typeof i=="string"?[i]:i,b=this._createDelegatedListener(D,_,p);for(const T in b.delegates){const j=b.delegates[T];b.delegates[T]=(...$)=>{this._removeDelegatedListener(D,_,p),j(...$)}}this._saveDelegatedListener(D,b);for(const T in b.delegates)this.once(T,b.delegates[T]);return this}off(D,i,p){return p===void 0?super.off(D,i):(this._removeDelegatedListener(D,typeof i=="string"?[i]:i,p),this)}queryRenderedFeatures(D,i){if(!this.style)return[];let p;const _=D instanceof u.P||Array.isArray(D),b=_?D:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(_?{}:D)||{},b instanceof u.P||typeof b[0]=="number")p=[u.P.convert(b)];else{const T=u.P.convert(b[0]),j=u.P.convert(b[1]);p=[T,new u.P(j.x,T.y),j,new u.P(T.x,j.y),T]}return this.style.queryRenderedFeatures(p,i,this.transform)}querySourceFeatures(D,i){return this.style.querySourceFeatures(D,i)}setStyle(D,i){return(i=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&D?(this._diffStyle(D,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(D,i))}setTransformRequest(D){return this._requestManager.setTransformRequest(D),this}_getUIString(D){const i=this._locale[D];if(i==null)throw new Error(`Missing UI string '${D}'`);return i}_updateStyle(D,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(D,i)));const p=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!D)),D?(this.style=new Kc(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof D=="string"?this.style.loadURL(D,i,p):this.style.loadJSON(D,i,p),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Kc(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(D,i){if(typeof D=="string"){const p=this._requestManager.transformRequest(D,"Style");u.h(p,new AbortController).then((_=>{this._updateDiff(_.data,i)})).catch((_=>{_&&this.fire(new u.j(_))}))}else typeof D=="object"&&this._updateDiff(D,i)}_updateDiff(D,i){try{this.style.setState(D,i)&&this._update(!0)}catch(p){u.w(`Unable to perform style diff: ${p.message||p.error||p}.  Rebuilding the style from scratch.`),this._updateStyle(D,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(D,i){return this._lazyInitEmptyStyle(),this.style.addSource(D,i),this._update(!0)}isSourceLoaded(D){const i=this.style&&this.style.sourceCaches[D];if(i!==void 0)return i.loaded();this.fire(new u.j(new Error(`There is no source with ID '${D}'`)))}setTerrain(D){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),D){const i=this.style.sourceCaches[D.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${D.source}`);this.terrain===null&&i.reload();for(const p in this.style._layers){const _=this.style._layers[p];_.type==="hillshade"&&_.source===D.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Kl(this.painter,i,D),this.painter.renderToTexture=new Xl(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=p=>{p.dataType==="style"?this.terrain.sourceCache.freeRtt():p.dataType==="source"&&p.tile&&(p.sourceId!==D.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(p.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new u.k("terrain",{terrain:D})),this}getTerrain(){var D,i;return(i=(D=this.terrain)===null||D===void 0?void 0:D.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const D=this.style&&this.style.sourceCaches;for(const i in D){const p=D[i]._tiles;for(const _ in p){const b=p[_];if(b.state!=="loaded"&&b.state!=="errored")return!1}}return!0}removeSource(D){return this.style.removeSource(D),this._update(!0)}getSource(D){return this.style.getSource(D)}addImage(D,i,p={}){const{pixelRatio:_=1,sdf:b=!1,stretchX:T,stretchY:j,content:$,textFitWidth:V,textFitHeight:K}=p;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||u.b(i))){if(i.width===void 0||i.height===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:te,height:re,data:ye}=i,we=i;return this.style.addImage(D,{data:new u.R({width:te,height:re},new Uint8Array(ye)),pixelRatio:_,stretchX:T,stretchY:j,content:$,textFitWidth:V,textFitHeight:K,sdf:b,version:0,userImage:we}),we.onAdd&&we.onAdd(this,D),this}}{const{width:te,height:re,data:ye}=C.getImageData(i);this.style.addImage(D,{data:new u.R({width:te,height:re},ye),pixelRatio:_,stretchX:T,stretchY:j,content:$,textFitWidth:V,textFitHeight:K,sdf:b,version:0})}}updateImage(D,i){const p=this.style.getImage(D);if(!p)return this.fire(new u.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const _=i instanceof HTMLImageElement||u.b(i)?C.getImageData(i):i,{width:b,height:T,data:j}=_;if(b===void 0||T===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(b!==p.data.width||T!==p.data.height)return this.fire(new u.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const $=!(i instanceof HTMLImageElement||u.b(i));return p.data.replace(j,$),this.style.updateImage(D,p),this}getImage(D){return this.style.getImage(D)}hasImage(D){return D?!!this.style.getImage(D):(this.fire(new u.j(new Error("Missing required image id"))),!1)}removeImage(D){this.style.removeImage(D)}loadImage(D){return ne.getImage(this._requestManager.transformRequest(D,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(D,i){return this._lazyInitEmptyStyle(),this.style.addLayer(D,i),this._update(!0)}moveLayer(D,i){return this.style.moveLayer(D,i),this._update(!0)}removeLayer(D){return this.style.removeLayer(D),this._update(!0)}getLayer(D){return this.style.getLayer(D)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(D,i,p){return this.style.setLayerZoomRange(D,i,p),this._update(!0)}setFilter(D,i,p={}){return this.style.setFilter(D,i,p),this._update(!0)}getFilter(D){return this.style.getFilter(D)}setPaintProperty(D,i,p,_={}){return this.style.setPaintProperty(D,i,p,_),this._update(!0)}getPaintProperty(D,i){return this.style.getPaintProperty(D,i)}setLayoutProperty(D,i,p,_={}){return this.style.setLayoutProperty(D,i,p,_),this._update(!0)}getLayoutProperty(D,i){return this.style.getLayoutProperty(D,i)}setGlyphs(D,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(D,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(D,i,p={}){return this._lazyInitEmptyStyle(),this.style.addSprite(D,i,p,(_=>{_||this._update(!0)})),this}removeSprite(D){return this._lazyInitEmptyStyle(),this.style.removeSprite(D),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(D,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(D,i,(p=>{p||this._update(!0)})),this}setLight(D,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(D,i),this._update(!0)}getLight(){return this.style.getLight()}setSky(D){return this._lazyInitEmptyStyle(),this.style.setSky(D),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(D,i){return this.style.setFeatureState(D,i),this._update()}removeFeatureState(D,i){return this.style.removeFeatureState(D,i),this._update()}getFeatureState(D){return this.style.getFeatureState(D)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let D=0,i=0;return this._container&&(D=this._container.clientWidth||400,i=this._container.clientHeight||300),[D,i]}_setupContainer(){const D=this._container;D.classList.add("maplibregl-map");const i=this._canvasContainer=P.create("div","maplibregl-canvas-container",D);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=P.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const p=this._containerDimensions(),_=this._getClampedPixelRatio(p[0],p[1]);this._resizeCanvas(p[0],p[1],_);const b=this._controlContainer=P.create("div","maplibregl-control-container",D),T=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((j=>{T[j]=P.create("div",`maplibregl-ctrl-${j} `,b)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(D,i,p){this._canvas.width=Math.floor(p*D),this._canvas.height=Math.floor(p*i),this._canvas.style.width=`${D}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const D={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",(_=>{i={requestedAttributes:D},_&&(i.statusMessage=_.statusMessage,i.type=_.type)}),{once:!0});const p=this._canvas.getContext("webgl2",D)||this._canvas.getContext("webgl",D);if(!p){const _="Failed to initialize WebGL";throw i?(i.message=_,new Error(JSON.stringify(i))):new Error(_)}this.painter=new Cr(p,this.transform),O.testSupport(p)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(D){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||D,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(D){return this._update(),this._renderTaskQueue.add(D)}_cancelRenderFrame(D){this._renderTaskQueue.remove(D)}_render(D){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(D),this._removed)return;let p=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const b=this.transform.zoom,T=C.now();this.style.zoomHistory.update(b,T);const j=new u.z(b,{now:T,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),$=j.crossFadingFactor();$===1&&$===this._crossFadingFactor||(p=!0,this._crossFadingFactor=$),this.style.update(j)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new u.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.bf.mark(u.bg.load),this.fire(new u.k("load"))),this.style&&(this.style.hasTransitions()||p)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const _=this._sourcesDirty||this._styleDirty||this._placementDirty;return _||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.k("idle")),!this._loaded||this._fullyLoaded||_||(this._fullyLoaded=!0,u.bf.mark(u.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var D;this._hash&&this._hash.remove();for(const p of this._controls)p.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ne.removeThrottleControl(this._imageQueueHandle),(D=this._resizeObserver)===null||D===void 0||D.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i!=null&&i.loseContext&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),P.remove(this._canvasContainer),P.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),u.bf.clearMetrics(),this._removed=!0,this.fire(new u.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,C.frameAsync(this._frameRequest).then((D=>{u.bf.frame(D),this._frameRequest=null,this._render(D)})).catch((()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(D){this._showTileBoundaries!==D&&(this._showTileBoundaries=D,this._update())}get showPadding(){return!!this._showPadding}set showPadding(D){this._showPadding!==D&&(this._showPadding=D,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(D){this._showCollisionBoxes!==D&&(this._showCollisionBoxes=D,D?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(D){this._showOverdrawInspector!==D&&(this._showOverdrawInspector=D,this._update())}get repaint(){return!!this._repaint}set repaint(D){this._repaint!==D&&(this._repaint=D,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(D){this._vertices=D,this._update()}get version(){return Jl}getCameraTargetElevation(){return this.transform.elevation}},h.MapMouseEvent=Ci,h.MapTouchEvent=Wl,h.MapWheelEvent=Cs,h.Marker=qh,h.NavigationControl=class{constructor(D){this._updateZoomButtons=()=>{const i=this._map.getZoom(),p=i===this._map.getMaxZoom(),_=i===this._map.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=_,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",_.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,p)=>{const _=this._map._getUIString(`NavigationControl.${p}`);i.title=_,i.setAttribute("aria-label",_)},this.options=u.e({},nd,D),this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(i=>i.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(i=>this._map.zoomIn({},{originalEvent:i}))),P.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(i=>this._map.zoomOut({},{originalEvent:i}))),P.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})})),this._compassIcon=P.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(D){return this._map=D,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Vh(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){P.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(D,i){const p=P.create("button",D,this._container);return p.type="button",p.addEventListener("click",i),p}},h.Popup=class extends u.E{constructor(D){super(),this.remove=()=>(this._content&&P.remove(this._content),this._container&&(P.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new u.k("close"))),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{var p;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=P.create("div","maplibregl-popup",this._map.getContainer()),this._tip=P.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const $ of this.options.className.split(" "))this._container.classList.add($);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Pn(this._lngLat,this._flatPos,this._map.transform):(p=this._lngLat)===null||p===void 0?void 0:p.wrap(),this._trackPointer&&!i)return;const _=this._flatPos=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&i?i:this._map.transform.locationPoint(this._lngLat));let b=this.options.anchor;const T=Su(this.options.offset);if(!b){const $=this._container.offsetWidth,V=this._container.offsetHeight;let K;K=_.y+T.bottom.y<V?["top"]:_.y>this._map.transform.height-V?["bottom"]:[],_.x<$/2?K.push("left"):_.x>this._map.transform.width-$/2&&K.push("right"),b=K.length===0?"bottom":K.join("-")}let j=_.add(T[b]);this.options.subpixelPositioning||(j=j.round()),P.setTransform(this._container,`${Ao[b]} translate(${j.x}px,${j.y}px)`),Xd(this._container,b,"popup")},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(qr),D)}addTo(D){return this._map&&this.remove(),this._map=D,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(D){return this._lngLat=u.N.convert(D),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(D){return this.setDOMContent(document.createTextNode(D))}setHTML(D){const i=document.createDocumentFragment(),p=document.createElement("body");let _;for(p.innerHTML=D;_=p.firstChild,_;)i.appendChild(_);return this.setDOMContent(i)}getMaxWidth(){var D;return(D=this._container)===null||D===void 0?void 0:D.style.maxWidth}setMaxWidth(D){return this.options.maxWidth=D,this._update(),this}setDOMContent(D){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=P.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(D),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(D){return this._container&&this._container.classList.add(D),this}removeClassName(D){return this._container&&this._container.classList.remove(D),this}setOffset(D){return this.options.offset=D,this._update(),this}toggleClassName(D){if(this._container)return this._container.classList.toggle(D)}setSubpixelPositioning(D){this.options.subpixelPositioning=D}_createCloseButton(){this.options.closeButton&&(this._closeButton=P.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const D=this._container.querySelector(wu);D&&D.focus()}},h.RasterDEMTileSource=Wr,h.RasterTileSource=vr,h.ScaleControl=class{constructor(D){this._onMove=()=>{bu(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,bu(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Ha),D)}getDefaultPosition(){return"bottom-left"}onAdd(D){return this._map=D,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-scale",D.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){P.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},h.ScrollZoomHandler=Wa,h.Style=Kc,h.TerrainControl=class{constructor(D){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=D}onAdd(D){return this._map=D,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=P.create("button","maplibregl-ctrl-terrain",this._container),P.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){P.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},h.TwoFingersTouchPitchHandler=Xi,h.TwoFingersTouchRotateHandler=Wu,h.TwoFingersTouchZoomHandler=$h,h.TwoFingersTouchZoomRotateHandler=Zu,h.VectorTileSource=rn,h.VideoSource=Rn,h.addSourceType=(D,i)=>u._(void 0,void 0,void 0,(function*(){if(oi(D))throw new Error(`A source type called "${D}" already exists.`);((p,_)=>{pi[p]=_})(D,i)})),h.clearPrewarmedResources=function(){const D=Xt;D&&(D.isPreloaded()&&D.numActive()===1?(D.release(zt),Xt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},h.getMaxParallelImageRequests=function(){return u.a.MAX_PARALLEL_IMAGE_REQUESTS},h.getRTLTextPluginStatus=function(){return Pi().getRTLTextPluginStatus()},h.getVersion=function(){return Eu},h.getWorkerCount=function(){return Tt.workerCount},h.getWorkerUrl=function(){return u.a.WORKER_URL},h.importScriptInWorkers=function(D){return Mt().broadcast("IS",D)},h.prewarm=function(){at().acquire(zt)},h.setMaxParallelImageRequests=function(D){u.a.MAX_PARALLEL_IMAGE_REQUESTS=D},h.setRTLTextPlugin=function(D,i){return Pi().setRTLTextPlugin(D,i)},h.setWorkerCount=function(D){Tt.workerCount=D},h.setWorkerUrl=function(D){u.a.WORKER_URL=D}}));var l=r;return l}))})(d1)),d1.exports}var ND=iF();const Ss=Fl(ND);function hv(e,t){var r=ND.MercatorCoordinate.fromLngLat(t);return{x:r.x,y:e.getContainer().clientHeight-r.y}}function BD(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=BD(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function _a(){for(var e,t,r=0,n="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=BD(e))&&(n&&(n+=" "),n+=t);return n}var aF=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function kE(e){if(typeof e!="string")return!1;var t=aF;return t.includes(e)}var oF=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],sF=new Set(oF);function FD(e){return typeof e!="string"?!1:sF.has(e)}function $D(e){return typeof e=="string"&&e.startsWith("data-")}function Id(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(FD(r)||$D(r))&&(t[r]=e[r]);return t}function rx(e){if(e==null)return null;if(N.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Id(t)}return typeof e=="object"&&!Array.isArray(e)?Id(e):null}function iu(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(FD(r)||$D(r)||kE(r))&&(t[r]=e[r]);return t}function lF(e){return e==null?null:N.isValidElement(e)?iu(e.props):typeof e=="object"&&!Array.isArray(e)?iu(e):null}var uF=["children","width","height","viewBox","className","style","title","desc"];function Hw(){return Hw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hw.apply(null,arguments)}function cF(e,t){if(e==null)return{};var r,n,o=dF(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function dF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var CE=N.forwardRef((e,t)=>{var{children:r,width:n,height:o,viewBox:l,className:h,style:u,title:v,desc:x}=e,A=cF(e,uF),C=l||{width:n,height:o,x:0,y:0},P=_a("recharts-surface",h);return N.createElement("svg",Hw({},iu(A),{className:P,width:n,height:o,style:u,viewBox:"".concat(C.x," ").concat(C.y," ").concat(C.width," ").concat(C.height),ref:t}),N.createElement("title",null,v),N.createElement("desc",null,x),r)}),hF=["children","className"];function Zw(){return Zw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zw.apply(null,arguments)}function fF(e,t){if(e==null)return{};var r,n,o=pF(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function pF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var au=N.forwardRef((e,t)=>{var{children:r,className:n}=e,o=fF(e,hF),l=_a("recharts-layer",n);return N.createElement("g",Zw({className:l},iu(o),{ref:t}),r)}),GD=N.createContext(null),gF=()=>N.useContext(GD);function Ka(e){return function(){return e}}const UD=Math.cos,S1=Math.sin,Mh=Math.sqrt,E1=Math.PI,C_=2*E1,Kw=Math.PI,Xw=2*Kw,Qm=1e-6,mF=Xw-Qm;function VD(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function yF(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return VD;const r=10**t;return function(n){this._+=n[0];for(let o=1,l=n.length;o<l;++o)this._+=Math.round(arguments[o]*r)/r+n[o]}}class vF{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?VD:yF(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,o){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+o}`}bezierCurveTo(t,r,n,o,l,h){this._append`C${+t},${+r},${+n},${+o},${this._x1=+l},${this._y1=+h}`}arcTo(t,r,n,o,l){if(t=+t,r=+r,n=+n,o=+o,l=+l,l<0)throw new Error(`negative radius: ${l}`);let h=this._x1,u=this._y1,v=n-t,x=o-r,A=h-t,C=u-r,P=A*A+C*C;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(P>Qm)if(!(Math.abs(C*v-x*A)>Qm)||!l)this._append`L${this._x1=t},${this._y1=r}`;else{let O=n-h,U=o-u,W=v*v+x*x,G=O*O+U*U,X=Math.sqrt(W),ae=Math.sqrt(P),ne=l*Math.tan((Kw-Math.acos((W+P-G)/(2*X*ae)))/2),ue=ne/ae,Q=ne/X;Math.abs(ue-1)>Qm&&this._append`L${t+ue*A},${r+ue*C}`,this._append`A${l},${l},0,0,${+(C*O>A*U)},${this._x1=t+Q*v},${this._y1=r+Q*x}`}}arc(t,r,n,o,l,h){if(t=+t,r=+r,n=+n,h=!!h,n<0)throw new Error(`negative radius: ${n}`);let u=n*Math.cos(o),v=n*Math.sin(o),x=t+u,A=r+v,C=1^h,P=h?o-l:l-o;this._x1===null?this._append`M${x},${A}`:(Math.abs(this._x1-x)>Qm||Math.abs(this._y1-A)>Qm)&&this._append`L${x},${A}`,n&&(P<0&&(P=P%Xw+Xw),P>mF?this._append`A${n},${n},0,1,${C},${t-u},${r-v}A${n},${n},0,1,${C},${this._x1=x},${this._y1=A}`:P>Qm&&this._append`A${n},${n},0,${+(P>=Kw)},${C},${this._x1=t+n*Math.cos(l)},${this._y1=r+n*Math.sin(l)}`)}rect(t,r,n,o){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+o}h${-n}Z`}toString(){return this._}}function TE(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new vF(t)}function DE(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function qD(e){this._context=e}qD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function T_(e){return new qD(e)}function WD(e){return e[0]}function HD(e){return e[1]}function ZD(e,t){var r=Ka(!0),n=null,o=T_,l=null,h=TE(u);e=typeof e=="function"?e:e===void 0?WD:Ka(e),t=typeof t=="function"?t:t===void 0?HD:Ka(t);function u(v){var x,A=(v=DE(v)).length,C,P=!1,O;for(n==null&&(l=o(O=h())),x=0;x<=A;++x)!(x<A&&r(C=v[x],x,v))===P&&((P=!P)?l.lineStart():l.lineEnd()),P&&l.point(+e(C,x,v),+t(C,x,v));if(O)return l=null,O+""||null}return u.x=function(v){return arguments.length?(e=typeof v=="function"?v:Ka(+v),u):e},u.y=function(v){return arguments.length?(t=typeof v=="function"?v:Ka(+v),u):t},u.defined=function(v){return arguments.length?(r=typeof v=="function"?v:Ka(!!v),u):r},u.curve=function(v){return arguments.length?(o=v,n!=null&&(l=o(n)),u):o},u.context=function(v){return arguments.length?(v==null?n=l=null:l=o(n=v),u):n},u}function Vx(e,t,r){var n=null,o=Ka(!0),l=null,h=T_,u=null,v=TE(x);e=typeof e=="function"?e:e===void 0?WD:Ka(+e),t=typeof t=="function"?t:Ka(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?HD:Ka(+r);function x(C){var P,O,U,W=(C=DE(C)).length,G,X=!1,ae,ne=new Array(W),ue=new Array(W);for(l==null&&(u=h(ae=v())),P=0;P<=W;++P){if(!(P<W&&o(G=C[P],P,C))===X)if(X=!X)O=P,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),U=P-1;U>=O;--U)u.point(ne[U],ue[U]);u.lineEnd(),u.areaEnd()}X&&(ne[P]=+e(G,P,C),ue[P]=+t(G,P,C),u.point(n?+n(G,P,C):ne[P],r?+r(G,P,C):ue[P]))}if(ae)return u=null,ae+""||null}function A(){return ZD().defined(o).curve(h).context(l)}return x.x=function(C){return arguments.length?(e=typeof C=="function"?C:Ka(+C),n=null,x):e},x.x0=function(C){return arguments.length?(e=typeof C=="function"?C:Ka(+C),x):e},x.x1=function(C){return arguments.length?(n=C==null?null:typeof C=="function"?C:Ka(+C),x):n},x.y=function(C){return arguments.length?(t=typeof C=="function"?C:Ka(+C),r=null,x):t},x.y0=function(C){return arguments.length?(t=typeof C=="function"?C:Ka(+C),x):t},x.y1=function(C){return arguments.length?(r=C==null?null:typeof C=="function"?C:Ka(+C),x):r},x.lineX0=x.lineY0=function(){return A().x(e).y(t)},x.lineY1=function(){return A().x(e).y(r)},x.lineX1=function(){return A().x(n).y(t)},x.defined=function(C){return arguments.length?(o=typeof C=="function"?C:Ka(!!C),x):o},x.curve=function(C){return arguments.length?(h=C,l!=null&&(u=h(l)),x):h},x.context=function(C){return arguments.length?(C==null?l=u=null:u=h(l=C),x):l},x}class KD{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function xF(e){return new KD(e,!0)}function _F(e){return new KD(e,!1)}const ME={draw(e,t){const r=Mh(t/E1);e.moveTo(r,0),e.arc(0,0,r,0,C_)}},bF={draw(e,t){const r=Mh(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},XD=Mh(1/3),wF=XD*2,SF={draw(e,t){const r=Mh(t/wF),n=r*XD;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},EF={draw(e,t){const r=Mh(t),n=-r/2;e.rect(n,n,r,r)}},AF=.8908130915292852,YD=S1(E1/10)/S1(7*E1/10),kF=S1(C_/10)*YD,CF=-UD(C_/10)*YD,TF={draw(e,t){const r=Mh(t*AF),n=kF*r,o=CF*r;e.moveTo(0,-r),e.lineTo(n,o);for(let l=1;l<5;++l){const h=C_*l/5,u=UD(h),v=S1(h);e.lineTo(v*r,-u*r),e.lineTo(u*n-v*o,v*n+u*o)}e.closePath()}},Zb=Mh(3),DF={draw(e,t){const r=-Mh(t/(Zb*3));e.moveTo(0,r*2),e.lineTo(-Zb*r,-r),e.lineTo(Zb*r,-r),e.closePath()}},Ad=-.5,kd=Mh(3)/2,Yw=1/Mh(12),MF=(Yw/2+1)*3,zF={draw(e,t){const r=Mh(t/MF),n=r/2,o=r*Yw,l=n,h=r*Yw+r,u=-l,v=h;e.moveTo(n,o),e.lineTo(l,h),e.lineTo(u,v),e.lineTo(Ad*n-kd*o,kd*n+Ad*o),e.lineTo(Ad*l-kd*h,kd*l+Ad*h),e.lineTo(Ad*u-kd*v,kd*u+Ad*v),e.lineTo(Ad*n+kd*o,Ad*o-kd*n),e.lineTo(Ad*l+kd*h,Ad*h-kd*l),e.lineTo(Ad*u+kd*v,Ad*v-kd*u),e.closePath()}};function PF(e,t){let r=null,n=TE(o);e=typeof e=="function"?e:Ka(e||ME),t=typeof t=="function"?t:Ka(t===void 0?64:+t);function o(){let l;if(r||(r=l=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),l)return r=null,l+""||null}return o.type=function(l){return arguments.length?(e=typeof l=="function"?l:Ka(l),o):e},o.size=function(l){return arguments.length?(t=typeof l=="function"?l:Ka(+l),o):t},o.context=function(l){return arguments.length?(r=l??null,o):r},o}function A1(){}function k1(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function JD(e){this._context=e}JD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:k1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:k1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function LF(e){return new JD(e)}function QD(e){this._context=e}QD.prototype={areaStart:A1,areaEnd:A1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:k1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function IF(e){return new QD(e)}function eM(e){this._context=e}eM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:k1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function OF(e){return new eM(e)}function tM(e){this._context=e}tM.prototype={areaStart:A1,areaEnd:A1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function jF(e){return new tM(e)}function $k(e){return e<0?-1:1}function Gk(e,t,r){var n=e._x1-e._x0,o=t-e._x1,l=(e._y1-e._y0)/(n||o<0&&-0),h=(r-e._y1)/(o||n<0&&-0),u=(l*o+h*n)/(n+o);return($k(l)+$k(h))*Math.min(Math.abs(l),Math.abs(h),.5*Math.abs(u))||0}function Uk(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Kb(e,t,r){var n=e._x0,o=e._y0,l=e._x1,h=e._y1,u=(l-n)/3;e._context.bezierCurveTo(n+u,o+u*t,l-u,h-u*r,l,h)}function C1(e){this._context=e}C1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Kb(this,this._t0,Uk(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Kb(this,Uk(this,r=Gk(this,e,t)),r);break;default:Kb(this,this._t0,r=Gk(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function rM(e){this._context=new nM(e)}(rM.prototype=Object.create(C1.prototype)).point=function(e,t){C1.prototype.point.call(this,t,e)};function nM(e){this._context=e}nM.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,o,l){this._context.bezierCurveTo(t,e,n,r,l,o)}};function RF(e){return new C1(e)}function NF(e){return new rM(e)}function iM(e){this._context=e}iM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=Vk(e),o=Vk(t),l=0,h=1;h<r;++l,++h)this._context.bezierCurveTo(n[0][l],o[0][l],n[1][l],o[1][l],e[h],t[h]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Vk(e){var t,r=e.length-1,n,o=new Array(r),l=new Array(r),h=new Array(r);for(o[0]=0,l[0]=2,h[0]=e[0]+2*e[1],t=1;t<r-1;++t)o[t]=1,l[t]=4,h[t]=4*e[t]+2*e[t+1];for(o[r-1]=2,l[r-1]=7,h[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=o[t]/l[t-1],l[t]-=n,h[t]-=n*h[t-1];for(o[r-1]=h[r-1]/l[r-1],t=r-2;t>=0;--t)o[t]=(h[t]-o[t+1])/l[t];for(l[r-1]=(e[r]+o[r-1])/2,t=0;t<r-1;++t)l[t]=2*e[t+1]-o[t+1];return[o,l]}function BF(e){return new iM(e)}function D_(e,t){this._context=e,this._t=t}D_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function FF(e){return new D_(e,.5)}function $F(e){return new D_(e,0)}function GF(e){return new D_(e,1)}function m0(e,t){if((h=e.length)>1)for(var r=1,n,o,l=e[t[0]],h,u=l.length;r<h;++r)for(o=l,l=e[t[r]],n=0;n<u;++n)l[n][1]+=l[n][0]=isNaN(o[n][1])?o[n][0]:o[n][1]}function Jw(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function UF(e,t){return e[t]}function VF(e){const t=[];return t.key=e,t}function qF(){var e=Ka([]),t=Jw,r=m0,n=UF;function o(l){var h=Array.from(e.apply(this,arguments),VF),u,v=h.length,x=-1,A;for(const C of l)for(u=0,++x;u<v;++u)(h[u][x]=[0,+n(C,h[u].key,x,l)]).data=C;for(u=0,A=DE(t(h));u<v;++u)h[A[u]].index=u;return r(h,A),h}return o.keys=function(l){return arguments.length?(e=typeof l=="function"?l:Ka(Array.from(l)),o):e},o.value=function(l){return arguments.length?(n=typeof l=="function"?l:Ka(+l),o):n},o.order=function(l){return arguments.length?(t=l==null?Jw:typeof l=="function"?l:Ka(Array.from(l)),o):t},o.offset=function(l){return arguments.length?(r=l??m0,o):r},o}function WF(e,t){if((n=e.length)>0){for(var r,n,o=0,l=e[0].length,h;o<l;++o){for(h=r=0;r<n;++r)h+=e[r][o][1]||0;if(h)for(r=0;r<n;++r)e[r][o][1]/=h}m0(e,t)}}function HF(e,t){if((o=e.length)>0){for(var r=0,n=e[t[0]],o,l=n.length;r<l;++r){for(var h=0,u=0;h<o;++h)u+=e[h][r][1]||0;n[r][1]+=n[r][0]=-u/2}m0(e,t)}}function ZF(e,t){if(!(!((h=e.length)>0)||!((l=(o=e[t[0]]).length)>0))){for(var r=0,n=1,o,l,h;n<l;++n){for(var u=0,v=0,x=0;u<h;++u){for(var A=e[t[u]],C=A[n][1]||0,P=A[n-1][1]||0,O=(C-P)/2,U=0;U<u;++U){var W=e[t[U]],G=W[n][1]||0,X=W[n-1][1]||0;O+=G-X}v+=C,x+=O*C}o[n-1][1]+=o[n-1][0]=r,v&&(r-=x/v)}o[n-1][1]+=o[n-1][0]=r,m0(e,t)}}var Xb={},Yb={},qk;function KF(){return qk||(qk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(Yb)),Yb}var Jb={},Wk;function aM(){return Wk||(Wk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(Jb)),Jb}var Qb={},Hk;function zE(){return Hk||(Hk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(Qb)),Qb}var e2={},t2={},Zk;function XF(){return Zk||(Zk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(t2)),t2}var Kk;function PE(){return Kk||(Kk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XF(),r=zE();function n(o){if(Array.isArray(o))return o.map(r.toKey);if(typeof o=="symbol")return[o];o=t.toString(o);const l=[],h=o.length;if(h===0)return l;let u=0,v="",x="",A=!1;for(o.charCodeAt(0)===46&&(l.push(""),u++);u<h;){const C=o[u];x?C==="\\"&&u+1<h?(u++,v+=o[u]):C===x?x="":v+=C:A?C==='"'||C==="'"?x=C:C==="]"?(A=!1,l.push(v),v=""):v+=C:C==="["?(A=!0,v&&(l.push(v),v="")):C==="."?v&&(l.push(v),v=""):v+=C,u++}return v&&l.push(v),l}e.toPath=n})(e2)),e2}var Xk;function LE(){return Xk||(Xk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KF(),r=aM(),n=zE(),o=PE();function l(u,v,x){if(u==null)return x;switch(typeof v){case"string":{if(t.isUnsafeProperty(v))return x;const A=u[v];return A===void 0?r.isDeepKey(v)?l(u,o.toPath(v),x):x:A}case"number":case"symbol":{typeof v=="number"&&(v=n.toKey(v));const A=u[v];return A===void 0?x:A}default:{if(Array.isArray(v))return h(u,v,x);if(Object.is(v==null?void 0:v.valueOf(),-0)?v="-0":v=String(v),t.isUnsafeProperty(v))return x;const A=u[v];return A===void 0?x:A}}}function h(u,v,x){if(v.length===0)return x;let A=u;for(let C=0;C<v.length;C++){if(A==null||t.isUnsafeProperty(v[C]))return x;A=A[v[C]]}return A===void 0?x:A}e.get=l})(Xb)),Xb}var r2,Yk;function YF(){return Yk||(Yk=1,r2=LE().get),r2}var JF=YF();const y0=Fl(JF);var Vc=e=>e===0?0:e>0?1:-1,Ch=e=>typeof e=="number"&&e!=+e,qp=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,tn=e=>(typeof e=="number"||e instanceof Number)&&!Ch(e),Df=e=>tn(e)||typeof e=="string",QF=0,Ov=e=>{var t=++QF;return"".concat(e||"").concat(t)},Th=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!tn(t)&&typeof t!="string")return n;var l;if(qp(t)){if(r==null)return n;var h=t.indexOf("%");l=r*parseFloat(t.slice(0,h))/100}else l=+t;return Ch(l)&&(l=n),o&&r!=null&&l>r&&(l=r),l},oM=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function Pa(e,t,r){return tn(e)&&tn(t)?e+r*(t-e):t}function sM(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):y0(n,t))===r)}var ao=e=>e===null||typeof e>"u",nx=e=>ao(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function e7(e){return e!=null}function ix(){}var t7=["type","size","sizeType"];function Qw(){return Qw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qw.apply(null,arguments)}function Jk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Qk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jk(Object(r),!0).forEach(function(n){r7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function r7(e,t,r){return(t=n7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n7(e){var t=i7(e,"string");return typeof t=="symbol"?t:t+""}function i7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function a7(e,t){if(e==null)return{};var r,n,o=o7(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function o7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var lM={symbolCircle:ME,symbolCross:bF,symbolDiamond:SF,symbolSquare:EF,symbolStar:TF,symbolTriangle:DF,symbolWye:zF},s7=Math.PI/180,l7=e=>{var t="symbol".concat(nx(e));return lM[t]||ME},u7=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*s7;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},c7=(e,t)=>{lM["symbol".concat(nx(e))]=t},IE=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,o=a7(e,t7),l=Qk(Qk({},o),{},{type:t,size:r,sizeType:n}),h="circle";typeof t=="string"&&(h=t);var u=()=>{var P=l7(h),O=PF().type(P).size(u7(r,n,h)),U=O();if(U!==null)return U},{className:v,cx:x,cy:A}=l,C=iu(l);return tn(x)&&tn(A)&&tn(r)?N.createElement("path",Qw({},C,{className:_a("recharts-symbols",v),transform:"translate(".concat(x,", ").concat(A,")"),d:u()})):null};IE.registerSymbol=c7;var uM=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,OE=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(N.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(o=>{kE(o)&&(n[o]=(l=>r[o](r,l)))}),n},d7=(e,t,r)=>n=>(e(t,r,n),null),M_=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(o=>{var l=e[o];kE(o)&&typeof l=="function"&&(n||(n={}),n[o]=d7(l,t,r))}),n};function eC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function h7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eC(Object(r),!0).forEach(function(n){f7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f7(e,t,r){return(t=p7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p7(e){var t=g7(e,"string");return typeof t=="symbol"?t:t+""}function g7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gl(e,t){var r=h7({},e),n=t,o=Object.keys(t),l=o.reduce((h,u)=>(h[u]===void 0&&n[u]!==void 0&&(h[u]=n[u]),h),r);return l}function T1(){return T1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},T1.apply(null,arguments)}function tC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function m7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tC(Object(r),!0).forEach(function(n){y7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function y7(e,t,r){return(t=v7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v7(e){var t=x7(e,"string");return typeof t=="symbol"?t:t+""}function x7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Td=32,_7={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function b7(e){var{data:t,iconType:r,inactiveColor:n}=e,o=Td/2,l=Td/6,h=Td/3,u=t.inactive?n:t.color,v=r??t.type;if(v==="none")return null;if(v==="plainline"){var x;return N.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:(x=t.payload)===null||x===void 0?void 0:x.strokeDasharray,x1:0,y1:o,x2:Td,y2:o,className:"recharts-legend-icon"})}if(v==="line")return N.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(o,"h").concat(h,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(2*h,",").concat(o,`
            H`).concat(Td,"M").concat(2*h,",").concat(o,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(h,",").concat(o),className:"recharts-legend-icon"});if(v==="rect")return N.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(Td/8,"h").concat(Td,"v").concat(Td*3/4,"h").concat(-Td,"z"),className:"recharts-legend-icon"});if(N.isValidElement(t.legendIcon)){var A=m7({},t);return delete A.legendIcon,N.cloneElement(t.legendIcon,A)}return N.createElement(IE,{fill:u,cx:o,cy:o,size:Td,sizeType:"diameter",type:v})}function w7(e){var{payload:t,iconSize:r,layout:n,formatter:o,inactiveColor:l,iconType:h}=e,u={x:0,y:0,width:Td,height:Td},v={display:n==="horizontal"?"inline-block":"block",marginRight:10},x={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((A,C)=>{var P=A.formatter||o,O=_a({"recharts-legend-item":!0,["legend-item-".concat(C)]:!0,inactive:A.inactive});if(A.type==="none")return null;var U=A.inactive?l:A.color,W=P?P(A.value,A,C):A.value;return N.createElement("li",T1({className:O,style:v,key:"legend-item-".concat(C)},M_(e,A,C)),N.createElement(CE,{width:r,height:r,viewBox:u,style:x,"aria-label":"".concat(W," legend icon")},N.createElement(b7,{data:A,iconType:h,inactiveColor:l})),N.createElement("span",{className:"recharts-legend-item-text",style:{color:U}},W))})}var S7=e=>{var t=gl(e,_7),{payload:r,layout:n,align:o}=t;if(!r||!r.length)return null;var l={padding:0,margin:0,textAlign:n==="horizontal"?o:"left"};return N.createElement("ul",{className:"recharts-default-legend",style:l},N.createElement(w7,T1({},t,{payload:r})))},n2={},i2={},rC;function E7(){return rC||(rC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const o=new Map;for(let l=0;l<r.length;l++){const h=r[l],u=n(h);o.has(u)||o.set(u,h)}return Array.from(o.values())}e.uniqBy=t})(i2)),i2}var a2={},nC;function cM(){return nC||(nC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(a2)),a2}var o2={},s2={},l2={},iC;function A7(){return iC||(iC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(l2)),l2}var aC;function jE(){return aC||(aC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=A7();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(s2)),s2}var u2={},oC;function k7(){return oC||(oC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(u2)),u2}var sC;function C7(){return sC||(sC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jE(),r=k7();function n(o){return r.isObjectLike(o)&&t.isArrayLike(o)}e.isArrayLikeObject=n})(o2)),o2}var c2={},d2={},lC;function T7(){return lC||(lC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LE();function r(n){return function(o){return t.get(o,n)}}e.property=r})(d2)),d2}var h2={},f2={},p2={},g2={},uC;function dM(){return uC||(uC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(g2)),g2}var m2={},cC;function hM(){return cC||(cC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(m2)),m2}var y2={},dC;function fM(){return dC||(dC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(y2)),y2}var hC;function D7(){return hC||(hC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dM(),r=hM(),n=fM();function o(A,C,P){return typeof P!="function"?o(A,C,()=>{}):l(A,C,function O(U,W,G,X,ae,ne){const ue=P(U,W,G,X,ae,ne);return ue!==void 0?!!ue:l(U,W,O,ne)},new Map)}function l(A,C,P,O){if(C===A)return!0;switch(typeof C){case"object":return h(A,C,P,O);case"function":return Object.keys(C).length>0?l(A,{...C},P,O):n.eq(A,C);default:return t.isObject(A)?typeof C=="string"?C==="":!0:n.eq(A,C)}}function h(A,C,P,O){if(C==null)return!0;if(Array.isArray(C))return v(A,C,P,O);if(C instanceof Map)return u(A,C,P,O);if(C instanceof Set)return x(A,C,P,O);const U=Object.keys(C);if(A==null)return U.length===0;if(U.length===0)return!0;if(O!=null&&O.has(C))return O.get(C)===A;O==null||O.set(C,A);try{for(let W=0;W<U.length;W++){const G=U[W];if(!r.isPrimitive(A)&&!(G in A)||C[G]===void 0&&A[G]!==void 0||C[G]===null&&A[G]!==null||!P(A[G],C[G],G,A,C,O))return!1}return!0}finally{O==null||O.delete(C)}}function u(A,C,P,O){if(C.size===0)return!0;if(!(A instanceof Map))return!1;for(const[U,W]of C.entries()){const G=A.get(U);if(P(G,W,U,A,C,O)===!1)return!1}return!0}function v(A,C,P,O){if(C.length===0)return!0;if(!Array.isArray(A))return!1;const U=new Set;for(let W=0;W<C.length;W++){const G=C[W];let X=!1;for(let ae=0;ae<A.length;ae++){if(U.has(ae))continue;const ne=A[ae];let ue=!1;if(P(ne,G,W,A,C,O)&&(ue=!0),ue){U.add(ae),X=!0;break}}if(!X)return!1}return!0}function x(A,C,P,O){return C.size===0?!0:A instanceof Set?v([...A],[...C],P,O):!1}e.isMatchWith=o,e.isSetMatch=x})(p2)),p2}var fC;function pM(){return fC||(fC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=D7();function r(n,o){return t.isMatchWith(n,o,()=>{})}e.isMatch=r})(f2)),f2}var v2={},x2={},_2={},pC;function M7(){return pC||(pC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(_2)),_2}var b2={},gC;function gM(){return gC||(gC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(b2)),b2}var w2={},mC;function mM(){return mC||(mC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",o="[object Boolean]",l="[object Arguments]",h="[object Symbol]",u="[object Date]",v="[object Map]",x="[object Set]",A="[object Array]",C="[object Function]",P="[object ArrayBuffer]",O="[object Object]",U="[object Error]",W="[object DataView]",G="[object Uint8Array]",X="[object Uint8ClampedArray]",ae="[object Uint16Array]",ne="[object Uint32Array]",ue="[object BigUint64Array]",Q="[object Int8Array]",de="[object Int16Array]",he="[object Int32Array]",Y="[object BigInt64Array]",ie="[object Float32Array]",Ce="[object Float64Array]";e.argumentsTag=l,e.arrayBufferTag=P,e.arrayTag=A,e.bigInt64ArrayTag=Y,e.bigUint64ArrayTag=ue,e.booleanTag=o,e.dataViewTag=W,e.dateTag=u,e.errorTag=U,e.float32ArrayTag=ie,e.float64ArrayTag=Ce,e.functionTag=C,e.int16ArrayTag=de,e.int32ArrayTag=he,e.int8ArrayTag=Q,e.mapTag=v,e.numberTag=n,e.objectTag=O,e.regexpTag=t,e.setTag=x,e.stringTag=r,e.symbolTag=h,e.uint16ArrayTag=ae,e.uint32ArrayTag=ne,e.uint8ArrayTag=G,e.uint8ClampedArrayTag=X})(w2)),w2}var S2={},yC;function z7(){return yC||(yC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(S2)),S2}var vC;function yM(){return vC||(vC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=M7(),r=gM(),n=mM(),o=hM(),l=z7();function h(A,C){return u(A,void 0,A,new Map,C)}function u(A,C,P,O=new Map,U=void 0){const W=U==null?void 0:U(A,C,P,O);if(W!==void 0)return W;if(o.isPrimitive(A))return A;if(O.has(A))return O.get(A);if(Array.isArray(A)){const G=new Array(A.length);O.set(A,G);for(let X=0;X<A.length;X++)G[X]=u(A[X],X,P,O,U);return Object.hasOwn(A,"index")&&(G.index=A.index),Object.hasOwn(A,"input")&&(G.input=A.input),G}if(A instanceof Date)return new Date(A.getTime());if(A instanceof RegExp){const G=new RegExp(A.source,A.flags);return G.lastIndex=A.lastIndex,G}if(A instanceof Map){const G=new Map;O.set(A,G);for(const[X,ae]of A)G.set(X,u(ae,X,P,O,U));return G}if(A instanceof Set){const G=new Set;O.set(A,G);for(const X of A)G.add(u(X,void 0,P,O,U));return G}if(typeof Buffer<"u"&&Buffer.isBuffer(A))return A.subarray();if(l.isTypedArray(A)){const G=new(Object.getPrototypeOf(A)).constructor(A.length);O.set(A,G);for(let X=0;X<A.length;X++)G[X]=u(A[X],X,P,O,U);return G}if(A instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&A instanceof SharedArrayBuffer)return A.slice(0);if(A instanceof DataView){const G=new DataView(A.buffer.slice(0),A.byteOffset,A.byteLength);return O.set(A,G),v(G,A,P,O,U),G}if(typeof File<"u"&&A instanceof File){const G=new File([A],A.name,{type:A.type});return O.set(A,G),v(G,A,P,O,U),G}if(typeof Blob<"u"&&A instanceof Blob){const G=new Blob([A],{type:A.type});return O.set(A,G),v(G,A,P,O,U),G}if(A instanceof Error){const G=new A.constructor;return O.set(A,G),G.message=A.message,G.name=A.name,G.stack=A.stack,G.cause=A.cause,v(G,A,P,O,U),G}if(A instanceof Boolean){const G=new Boolean(A.valueOf());return O.set(A,G),v(G,A,P,O,U),G}if(A instanceof Number){const G=new Number(A.valueOf());return O.set(A,G),v(G,A,P,O,U),G}if(A instanceof String){const G=new String(A.valueOf());return O.set(A,G),v(G,A,P,O,U),G}if(typeof A=="object"&&x(A)){const G=Object.create(Object.getPrototypeOf(A));return O.set(A,G),v(G,A,P,O,U),G}return A}function v(A,C,P=A,O,U){const W=[...Object.keys(C),...t.getSymbols(C)];for(let G=0;G<W.length;G++){const X=W[G],ae=Object.getOwnPropertyDescriptor(A,X);(ae==null||ae.writable)&&(A[X]=u(C[X],X,P,O,U))}}function x(A){switch(r.getTag(A)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=h,e.cloneDeepWithImpl=u,e.copyProperties=v})(x2)),x2}var xC;function P7(){return xC||(xC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yM();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(v2)),v2}var _C;function L7(){return _C||(_C=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pM(),r=P7();function n(o){return o=r.cloneDeep(o),l=>t.isMatch(l,o)}e.matches=n})(h2)),h2}var E2={},A2={},k2={},bC;function I7(){return bC||(bC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yM(),r=mM();function n(o,l){return t.cloneDeepWith(o,(h,u,v,x)=>{const A=l==null?void 0:l(h,u,v,x);if(A!==void 0)return A;if(typeof o=="object")switch(Object.prototype.toString.call(o)){case r.numberTag:case r.stringTag:case r.booleanTag:{const C=new o.constructor(o==null?void 0:o.valueOf());return t.copyProperties(C,o),C}case r.argumentsTag:{const C={};return t.copyProperties(C,o),C.length=o.length,C[Symbol.iterator]=o[Symbol.iterator],C}default:return}})}e.cloneDeepWith=n})(k2)),k2}var wC;function O7(){return wC||(wC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=I7();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(A2)),A2}var C2={},T2={},SC;function vM(){return SC||(SC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,o=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<o;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(T2)),T2}var D2={},EC;function j7(){return EC||(EC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gM();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(D2)),D2}var AC;function R7(){return AC||(AC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aM(),r=vM(),n=j7(),o=PE();function l(h,u){let v;if(Array.isArray(u)?v=u:typeof u=="string"&&t.isDeepKey(u)&&(h==null?void 0:h[u])==null?v=o.toPath(u):v=[u],v.length===0)return!1;let x=h;for(let A=0;A<v.length;A++){const C=v[A];if((x==null||!Object.hasOwn(x,C))&&!((Array.isArray(x)||n.isArguments(x))&&r.isIndex(C)&&C<x.length))return!1;x=x[C]}return!0}e.has=l})(C2)),C2}var kC;function N7(){return kC||(kC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pM(),r=zE(),n=O7(),o=LE(),l=R7();function h(u,v){switch(typeof u){case"object":{Object.is(u==null?void 0:u.valueOf(),-0)&&(u="-0");break}case"number":{u=r.toKey(u);break}}return v=n.cloneDeep(v),function(x){const A=o.get(x,u);return A===void 0?l.has(x,u):v===void 0?A===void 0:t.isMatch(A,v)}}e.matchesProperty=h})(E2)),E2}var CC;function B7(){return CC||(CC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cM(),r=T7(),n=L7(),o=N7();function l(h){if(h==null)return t.identity;switch(typeof h){case"function":return h;case"object":return Array.isArray(h)&&h.length===2?o.matchesProperty(h[0],h[1]):n.matches(h);case"string":case"symbol":case"number":return r.property(h)}}e.iteratee=l})(c2)),c2}var TC;function F7(){return TC||(TC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=E7(),r=cM(),n=C7(),o=B7();function l(h,u=r.identity){return n.isArrayLikeObject(h)?t.uniqBy(Array.from(h),o.iteratee(u)):[]}e.uniqBy=l})(n2)),n2}var M2,DC;function $7(){return DC||(DC=1,M2=F7().uniqBy),M2}var G7=$7();const MC=Fl(G7);function xM(e,t,r){return t===!0?MC(e,r):typeof t=="function"?MC(e,t):e}var z2={exports:{}},P2={},L2={exports:{}},I2={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zC;function U7(){if(zC)return I2;zC=1;var e=A0();function t(C,P){return C===P&&(C!==0||1/C===1/P)||C!==C&&P!==P}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,o=e.useEffect,l=e.useLayoutEffect,h=e.useDebugValue;function u(C,P){var O=P(),U=n({inst:{value:O,getSnapshot:P}}),W=U[0].inst,G=U[1];return l(function(){W.value=O,W.getSnapshot=P,v(W)&&G({inst:W})},[C,O,P]),o(function(){return v(W)&&G({inst:W}),C(function(){v(W)&&G({inst:W})})},[C]),h(O),O}function v(C){var P=C.getSnapshot;C=C.value;try{var O=P();return!r(C,O)}catch{return!0}}function x(C,P){return P()}var A=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?x:u;return I2.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:A,I2}var PC;function V7(){return PC||(PC=1,L2.exports=U7()),L2.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LC;function q7(){if(LC)return P2;LC=1;var e=A0(),t=V7();function r(x,A){return x===A&&(x!==0||1/x===1/A)||x!==x&&A!==A}var n=typeof Object.is=="function"?Object.is:r,o=t.useSyncExternalStore,l=e.useRef,h=e.useEffect,u=e.useMemo,v=e.useDebugValue;return P2.useSyncExternalStoreWithSelector=function(x,A,C,P,O){var U=l(null);if(U.current===null){var W={hasValue:!1,value:null};U.current=W}else W=U.current;U=u(function(){function X(de){if(!ae){if(ae=!0,ne=de,de=P(de),O!==void 0&&W.hasValue){var he=W.value;if(O(he,de))return ue=he}return ue=de}if(he=ue,n(ne,de))return he;var Y=P(de);return O!==void 0&&O(he,Y)?(ne=de,he):(ne=de,ue=Y)}var ae=!1,ne,ue,Q=C===void 0?null:C;return[function(){return X(A())},Q===null?void 0:function(){return X(Q())}]},[A,C,P,O]);var G=o(x,U[0],U[1]);return h(function(){W.hasValue=!0,W.value=G},[G]),v(G),G},P2}var IC;function W7(){return IC||(IC=1,z2.exports=q7()),z2.exports}var H7=W7(),RE=N.createContext(null),Z7=e=>e,Lo=()=>{var e=N.useContext(RE);return e?e.store.dispatch:Z7},h1=()=>{},K7=()=>h1,X7=(e,t)=>e===t;function un(e){var t=N.useContext(RE);return H7.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:K7,t?t.store.getState:h1,t?t.store.getState:h1,t?e:h1,X7)}function Y7(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function J7(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Q7(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var OC=e=>Array.isArray(e)?e:[e];function e$(e){const t=Array.isArray(e[0])?e[0]:e;return Q7(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function t$(e,t){const r=[],{length:n}=e;for(let o=0;o<n;o++)r.push(e[o].apply(null,t));return r}var r$=class{constructor(e){this.value=e}deref(){return this.value}},n$=typeof WeakRef<"u"?WeakRef:r$,i$=0,jC=1;function qx(){return{s:i$,v:void 0,o:null,p:null}}function _M(e,t={}){let r=qx();const{resultEqualityCheck:n}=t;let o,l=0;function h(){var C;let u=r;const{length:v}=arguments;for(let P=0,O=v;P<O;P++){const U=arguments[P];if(typeof U=="function"||typeof U=="object"&&U!==null){let W=u.o;W===null&&(u.o=W=new WeakMap);const G=W.get(U);G===void 0?(u=qx(),W.set(U,u)):u=G}else{let W=u.p;W===null&&(u.p=W=new Map);const G=W.get(U);G===void 0?(u=qx(),W.set(U,u)):u=G}}const x=u;let A;if(u.s===jC)A=u.v;else if(A=e.apply(null,arguments),l++,n){const P=((C=o==null?void 0:o.deref)==null?void 0:C.call(o))??o;P!=null&&n(P,A)&&(A=P,l!==0&&l--),o=typeof A=="object"&&A!==null||typeof A=="function"?new n$(A):A}return x.s=jC,x.v=A,A}return h.clearCache=()=>{r=qx(),h.resetResultsCount()},h.resultsCount=()=>l,h.resetResultsCount=()=>{l=0},h}function a$(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...o)=>{let l=0,h=0,u,v={},x=o.pop();typeof x=="object"&&(v=x,x=o.pop()),Y7(x,`createSelector expects an output function after the inputs, but received: [${typeof x}]`);const A={...r,...v},{memoize:C,memoizeOptions:P=[],argsMemoize:O=_M,argsMemoizeOptions:U=[]}=A,W=OC(P),G=OC(U),X=e$(o),ae=C(function(){return l++,x.apply(null,arguments)},...W),ne=O(function(){h++;const Q=t$(X,arguments);return u=ae.apply(null,Q),u},...G);return Object.assign(ne,{resultFunc:x,memoizedResultFunc:ae,dependencies:X,dependencyRecomputations:()=>h,resetDependencyRecomputations:()=>{h=0},lastResult:()=>u,recomputations:()=>l,resetRecomputations:()=>{l=0},memoize:C,argsMemoize:O})};return Object.assign(n,{withTypes:()=>n}),n}var Pt=a$(_M),o$=Object.assign((e,t=Pt)=>{J7(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(l=>e[l]);return t(n,(...l)=>l.reduce((h,u,v)=>(h[r[v]]=u,h),{}))},{withTypes:()=>o$}),O2={},j2={},R2={},RC;function s$(){return RC||(RC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,o,l)=>{if(n!==o){const h=t(n),u=t(o);if(h===u&&h===0){if(n<o)return l==="desc"?1:-1;if(n>o)return l==="desc"?-1:1}return l==="desc"?u-h:h-u}return 0};e.compareValues=r})(R2)),R2}var N2={},B2={},NC;function bM(){return NC||(NC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(B2)),B2}var BC;function l$(){return BC||(BC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bM(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function o(l,h){return Array.isArray(l)?!1:typeof l=="number"||typeof l=="boolean"||l==null||t.isSymbol(l)?!0:typeof l=="string"&&(n.test(l)||!r.test(l))||h!=null&&Object.hasOwn(h,l)}e.isKey=o})(N2)),N2}var FC;function u$(){return FC||(FC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=s$(),r=l$(),n=PE();function o(l,h,u,v){if(l==null)return[];u=v?void 0:u,Array.isArray(l)||(l=Object.values(l)),Array.isArray(h)||(h=h==null?[null]:[h]),h.length===0&&(h=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(O=>String(O));const x=(O,U)=>{let W=O;for(let G=0;G<U.length&&W!=null;++G)W=W[U[G]];return W},A=(O,U)=>U==null||O==null?U:typeof O=="object"&&"key"in O?Object.hasOwn(U,O.key)?U[O.key]:x(U,O.path):typeof O=="function"?O(U):Array.isArray(O)?x(U,O):typeof U=="object"?U[O]:U,C=h.map(O=>(Array.isArray(O)&&O.length===1&&(O=O[0]),O==null||typeof O=="function"||Array.isArray(O)||r.isKey(O)?O:{key:O,path:n.toPath(O)}));return l.map(O=>({original:O,criteria:C.map(U=>A(U,O))})).slice().sort((O,U)=>{for(let W=0;W<C.length;W++){const G=t.compareValues(O.criteria[W],U.criteria[W],u[W]);if(G!==0)return G}return 0}).map(O=>O.original)}e.orderBy=o})(j2)),j2}var F2={},$C;function c$(){return $C||($C=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const o=[],l=Math.floor(n),h=(u,v)=>{for(let x=0;x<u.length;x++){const A=u[x];Array.isArray(A)&&v<l?h(A,v+1):o.push(A)}};return h(r,0),o}e.flatten=t})(F2)),F2}var $2={},GC;function wM(){return GC||(GC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vM(),r=jE(),n=dM(),o=fM();function l(h,u,v){return n.isObject(v)&&(typeof u=="number"&&r.isArrayLike(v)&&t.isIndex(u)&&u<v.length||typeof u=="string"&&u in v)?o.eq(v[u],h):!1}e.isIterateeCall=l})($2)),$2}var UC;function d$(){return UC||(UC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=u$(),r=c$(),n=wM();function o(l,...h){const u=h.length;return u>1&&n.isIterateeCall(l,h[0],h[1])?h=[]:u>2&&n.isIterateeCall(h[0],h[1],h[2])&&(h=[h[0]]),t.orderBy(l,r.flatten(h),["asc"])}e.sortBy=o})(O2)),O2}var G2,VC;function h$(){return VC||(VC=1,G2=d$().sortBy),G2}var f$=h$();const z_=Fl(f$);var SM=e=>e.legend.settings,p$=e=>e.legend.size,g$=e=>e.legend.payload,m$=Pt([g$,SM],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?z_(n,r):n});function y$(){return un(m$)}var Wx=1;function EM(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=N.useState({height:0,left:0,top:0,width:0}),n=N.useCallback(o=>{if(o!=null){var l=o.getBoundingClientRect(),h={height:l.height,left:l.left,top:l.top,width:l.width};(Math.abs(h.height-t.height)>Wx||Math.abs(h.left-t.left)>Wx||Math.abs(h.top-t.top)>Wx||Math.abs(h.width-t.width)>Wx)&&r({height:h.height,left:h.left,top:h.top,width:h.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function jl(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var v$=typeof Symbol=="function"&&Symbol.observable||"@@observable",qC=v$,U2=()=>Math.random().toString(36).substring(7).split("").join("."),x$={INIT:`@@redux/INIT${U2()}`,REPLACE:`@@redux/REPLACE${U2()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${U2()}`},D1=x$;function NE(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function AM(e,t,r){if(typeof e!="function")throw new Error(jl(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(jl(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(jl(1));return r(AM)(e,t)}let n=e,o=t,l=new Map,h=l,u=0,v=!1;function x(){h===l&&(h=new Map,l.forEach((G,X)=>{h.set(X,G)}))}function A(){if(v)throw new Error(jl(3));return o}function C(G){if(typeof G!="function")throw new Error(jl(4));if(v)throw new Error(jl(5));let X=!0;x();const ae=u++;return h.set(ae,G),function(){if(X){if(v)throw new Error(jl(6));X=!1,x(),h.delete(ae),l=null}}}function P(G){if(!NE(G))throw new Error(jl(7));if(typeof G.type>"u")throw new Error(jl(8));if(typeof G.type!="string")throw new Error(jl(17));if(v)throw new Error(jl(9));try{v=!0,o=n(o,G)}finally{v=!1}return(l=h).forEach(ae=>{ae()}),G}function O(G){if(typeof G!="function")throw new Error(jl(10));n=G,P({type:D1.REPLACE})}function U(){const G=C;return{subscribe(X){if(typeof X!="object"||X===null)throw new Error(jl(11));function ae(){const ue=X;ue.next&&ue.next(A())}return ae(),{unsubscribe:G(ae)}},[qC](){return this}}}return P({type:D1.INIT}),{dispatch:P,subscribe:C,getState:A,replaceReducer:O,[qC]:U}}function _$(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:D1.INIT})>"u")throw new Error(jl(12));if(typeof r(void 0,{type:D1.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(jl(13))})}function kM(e){const t=Object.keys(e),r={};for(let l=0;l<t.length;l++){const h=t[l];typeof e[h]=="function"&&(r[h]=e[h])}const n=Object.keys(r);let o;try{_$(r)}catch(l){o=l}return function(h={},u){if(o)throw o;let v=!1;const x={};for(let A=0;A<n.length;A++){const C=n[A],P=r[C],O=h[C],U=P(O,u);if(typeof U>"u")throw u&&u.type,new Error(jl(14));x[C]=U,v=v||U!==O}return v=v||n.length!==Object.keys(h).length,v?x:h}}function M1(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function b$(...e){return t=>(r,n)=>{const o=t(r,n);let l=()=>{throw new Error(jl(15))};const h={getState:o.getState,dispatch:(v,...x)=>l(v,...x)},u=e.map(v=>v(h));return l=M1(...u)(o.dispatch),{...o,dispatch:l}}}function CM(e){return NE(e)&&"type"in e&&typeof e.type=="string"}var TM=Symbol.for("immer-nothing"),WC=Symbol.for("immer-draftable"),ju=Symbol.for("immer-state");function Sh(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var qc=Object,v0=qc.getPrototypeOf,z1="constructor",P_="prototype",eS="configurable",P1="enumerable",f1="writable",jv="value",Wp=e=>!!e&&!!e[ju];function Dh(e){var t;return e?DM(e)||L_(e)||!!e[WC]||!!((t=e[z1])!=null&&t[WC])||I_(e)||O_(e):!1}var w$=qc[P_][z1].toString(),HC=new WeakMap;function DM(e){if(!e||!BE(e))return!1;const t=v0(e);if(t===null||t===qc[P_])return!0;const r=qc.hasOwnProperty.call(t,z1)&&t[z1];if(r===Object)return!0;if(!o0(r))return!1;let n=HC.get(r);return n===void 0&&(n=Function.toString.call(r),HC.set(r,n)),n===w$}function ax(e,t,r=!0){ox(e)===0?(r?Reflect.ownKeys(e):qc.keys(e)).forEach(o=>{t(o,e[o],e)}):e.forEach((n,o)=>t(o,n,e))}function ox(e){const t=e[ju];return t?t.type_:L_(e)?1:I_(e)?2:O_(e)?3:0}var ZC=(e,t,r=ox(e))=>r===2?e.has(t):qc[P_].hasOwnProperty.call(e,t),tS=(e,t,r=ox(e))=>r===2?e.get(t):e[t],L1=(e,t,r,n=ox(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function S$(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var L_=Array.isArray,I_=e=>e instanceof Map,O_=e=>e instanceof Set,BE=e=>typeof e=="object",o0=e=>typeof e=="function",V2=e=>typeof e=="boolean",Ip=e=>e.copy_||e.base_,FE=e=>e.modified_?e.copy_:e.base_;function rS(e,t){if(I_(e))return new Map(e);if(O_(e))return new Set(e);if(L_(e))return Array[P_].slice.call(e);const r=DM(e);if(t===!0||t==="class_only"&&!r){const n=qc.getOwnPropertyDescriptors(e);delete n[ju];let o=Reflect.ownKeys(n);for(let l=0;l<o.length;l++){const h=o[l],u=n[h];u[f1]===!1&&(u[f1]=!0,u[eS]=!0),(u.get||u.set)&&(n[h]={[eS]:!0,[f1]:!0,[P1]:u[P1],[jv]:e[h]})}return qc.create(v0(e),n)}else{const n=v0(e);if(n!==null&&r)return{...e};const o=qc.create(n);return qc.assign(o,e)}}function $E(e,t=!1){return j_(e)||Wp(e)||!Dh(e)||(ox(e)>1&&qc.defineProperties(e,{set:Hx,add:Hx,clear:Hx,delete:Hx}),qc.freeze(e),t&&ax(e,(r,n)=>{$E(n,!0)},!1)),e}function E$(){Sh(2)}var Hx={[jv]:E$};function j_(e){return e===null||!BE(e)?!0:qc.isFrozen(e)}var I1="MapSet",nS="Patches",MM={};function x0(e){const t=MM[e];return t||Sh(0,e),t}var A$=e=>!!MM[e],Rv,zM=()=>Rv,k$=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:A$(I1)?x0(I1):void 0});function KC(e,t){t&&(e.patchPlugin_=x0(nS),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function iS(e){aS(e),e.drafts_.forEach(C$),e.drafts_=null}function aS(e){e===Rv&&(Rv=e.parent_)}var XC=e=>Rv=k$(Rv,e);function C$(e){const t=e[ju];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function YC(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[ju].modified_&&(iS(t),Sh(4)),Dh(e)&&(e=JC(t,e));const{patchPlugin_:o}=t;o&&o.generateReplacementPatches_(r[ju].base_,e,t)}else e=JC(t,r);return T$(t,e,!0),iS(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==TM?e:void 0}function JC(e,t){if(j_(t))return t;const r=t[ju];if(!r)return GE(t,e.handledSet_,e);if(!R_(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);IM(r,e)}return r.copy_}function T$(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&$E(t,r)}function PM(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var R_=(e,t)=>e.scope_===t,D$=[];function LM(e,t,r,n){const o=Ip(e),l=e.type_;if(n!==void 0&&tS(o,n,l)===t){L1(o,n,r,l);return}if(!e.draftLocations_){const u=e.draftLocations_=new Map;ax(o,(v,x)=>{if(Wp(x)){const A=u.get(x)||[];A.push(v),u.set(x,A)}})}const h=e.draftLocations_.get(t)??D$;for(const u of h)L1(o,u,r,l)}function M$(e,t,r){e.callbacks_.push(function(o){var u;const l=t;if(!l||!R_(l,o))return;(u=o.mapSetPlugin_)==null||u.fixSetContents(l);const h=FE(l);LM(e,l.draft_??l,h,r),IM(l,o)})}function IM(e,t){var n;if(e.modified_&&!e.finalized_&&(e.type_===3||(((n=e.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:o}=t;if(o){const l=o.getPath(e);l&&o.generatePatches_(e,l,t)}PM(e)}}function z$(e,t,r){const{scope_:n}=e;if(Wp(r)){const o=r[ju];R_(o,n)&&o.callbacks_.push(function(){p1(e);const h=FE(o);LM(e,r,h,t)})}else Dh(r)&&e.callbacks_.push(function(){const l=Ip(e);tS(l,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&GE(tS(e.copy_,t,e.type_),n.handledSet_,n)})}function GE(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||Wp(e)||t.has(e)||!Dh(e)||j_(e)||(t.add(e),ax(e,(n,o)=>{if(Wp(o)){const l=o[ju];if(R_(l,r)){const h=FE(l);L1(e,n,h,e.type_),PM(l)}}else Dh(o)&&GE(o,t,r)})),e}function P$(e,t){const r=L_(e),n={type_:r?1:0,scope_:t?t.scope_:zM(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let o=n,l=UE;r&&(o=[n],l=Nv);const{revoke:h,proxy:u}=Proxy.revocable(o,l);return n.draft_=u,n.revoke_=h,[u,n]}var UE={get(e,t){if(t===ju)return e;const r=Ip(e);if(!ZC(r,t,e.type_))return L$(e,r,t);const n=r[t];if(e.finalized_||!Dh(n))return n;if(n===q2(e.base_,t)){p1(e);const o=e.type_===1?+t:t,l=sS(e.scope_,n,e,o);return e.copy_[o]=l}return n},has(e,t){return t in Ip(e)},ownKeys(e){return Reflect.ownKeys(Ip(e))},set(e,t,r){const n=OM(Ip(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const o=q2(Ip(e),t),l=o==null?void 0:o[ju];if(l&&l.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(S$(r,o)&&(r!==void 0||ZC(e.base_,t,e.type_)))return!0;p1(e),oS(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),z$(e,t,r)),!0},deleteProperty(e,t){return p1(e),q2(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),oS(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Ip(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[f1]:!0,[eS]:e.type_!==1||t!=="length",[P1]:n[P1],[jv]:r[t]}},defineProperty(){Sh(11)},getPrototypeOf(e){return v0(e.base_)},setPrototypeOf(){Sh(12)}},Nv={};ax(UE,(e,t)=>{Nv[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}});Nv.deleteProperty=function(e,t){return Nv.set.call(this,e,t,void 0)};Nv.set=function(e,t,r){return UE.set.call(this,e[0],t,r,e[0])};function q2(e,t){const r=e[ju];return(r?Ip(r):e)[t]}function L$(e,t,r){var o;const n=OM(t,r);return n?jv in n?n[jv]:(o=n.get)==null?void 0:o.call(e.draft_):void 0}function OM(e,t){if(!(t in e))return;let r=v0(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=v0(r)}}function oS(e){e.modified_||(e.modified_=!0,e.parent_&&oS(e.parent_))}function p1(e){e.copy_||(e.assigned_=new Map,e.copy_=rS(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var I$=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,o)=>{if(o0(r)&&!o0(n)){const h=n;n=r;const u=this;return function(x=h,...A){return u.produce(x,C=>n.call(this,C,...A))}}o0(n)||Sh(6),o!==void 0&&!o0(o)&&Sh(7);let l;if(Dh(r)){const h=XC(this),u=sS(h,r,void 0);let v=!0;try{l=n(u),v=!1}finally{v?iS(h):aS(h)}return KC(h,o),YC(l,h)}else if(!r||!BE(r)){if(l=n(r),l===void 0&&(l=r),l===TM&&(l=void 0),this.autoFreeze_&&$E(l,!0),o){const h=[],u=[];x0(nS).generateReplacementPatches_(r,l,{patches_:h,inversePatches_:u}),o(h,u)}return l}else Sh(1,r)},this.produceWithPatches=(r,n)=>{if(o0(r))return(u,...v)=>this.produceWithPatches(u,x=>r(x,...v));let o,l;return[this.produce(r,n,(u,v)=>{o=u,l=v}),o,l]},V2(t==null?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),V2(t==null?void 0:t.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),V2(t==null?void 0:t.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Dh(t)||Sh(8),Wp(t)&&(t=kh(t));const r=XC(this),n=sS(r,t,void 0);return n[ju].isManual_=!0,aS(r),n}finishDraft(t,r){const n=t&&t[ju];(!n||!n.isManual_)&&Sh(9);const{scope_:o}=n;return KC(o,r),YC(void 0,o)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const l=r[n];if(l.path.length===0&&l.op==="replace"){t=l.value;break}}n>-1&&(r=r.slice(n+1));const o=x0(nS).applyPatches_;return Wp(t)?o(t,r):this.produce(t,l=>o(l,r))}};function sS(e,t,r,n){const[o,l]=I_(t)?x0(I1).proxyMap_(t,r):O_(t)?x0(I1).proxySet_(t,r):P$(t,r);return((r==null?void 0:r.scope_)??zM()).drafts_.push(o),l.callbacks_=(r==null?void 0:r.callbacks_)??[],l.key_=n,r&&n!==void 0?M$(r,l,n):l.callbacks_.push(function(v){var A;(A=v.mapSetPlugin_)==null||A.fixSetContents(l);const{patchPlugin_:x}=v;l.modified_&&x&&x.generatePatches_(l,[],v)}),o}function kh(e){return Wp(e)||Sh(10,e),jM(e)}function jM(e){if(!Dh(e)||j_(e))return e;const t=e[ju];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=rS(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=rS(e,!0);return ax(r,(o,l)=>{L1(r,o,jM(l))},n),t&&(t.finalized_=!1),r}var O$=new I$,RM=O$.produce;function NM(e){return({dispatch:r,getState:n})=>o=>l=>typeof l=="function"?l(r,n,e):o(l)}var j$=NM(),R$=NM,N$=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?M1:M1.apply(null,arguments)};function Od(e,t){function r(...n){if(t){let o=t(...n);if(!o)throw new Error(Wc(0));return{type:e,payload:o.payload,..."meta"in o&&{meta:o.meta},..."error"in o&&{error:o.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>CM(n)&&n.type===e,r}var BM=class Ev extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Ev.prototype)}static get[Symbol.species](){return Ev}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Ev(...t[0].concat(this)):new Ev(...t.concat(this))}};function QC(e){return Dh(e)?RM(e,()=>{}):e}function Zx(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function B$(e){return typeof e=="boolean"}var F$=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:o=!0,actionCreatorCheck:l=!0}=t??{};let h=new BM;return r&&(B$(r)?h.push(j$):h.push(R$(r.extraArgument))),h},FM="RTK_autoBatch",xo=()=>e=>({payload:e,meta:{[FM]:!0}}),eT=e=>t=>{setTimeout(t,e)},$M=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let o=!0,l=!1,h=!1;const u=new Set,v=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:eT(10):e.type==="callback"?e.queueNotification:eT(e.timeout),x=()=>{h=!1,l&&(l=!1,u.forEach(A=>A()))};return Object.assign({},n,{subscribe(A){const C=()=>o&&A(),P=n.subscribe(C);return u.add(A),()=>{P(),u.delete(A)}},dispatch(A){var C;try{return o=!((C=A==null?void 0:A.meta)!=null&&C[FM]),l=!o,l&&(h||(h=!0,v(x))),n.dispatch(A)}finally{o=!0}}})},$$=e=>function(r){const{autoBatch:n=!0}=r??{};let o=new BM(e);return n&&o.push($M(typeof n=="object"?n:void 0)),o};function G$(e){const t=F$(),{reducer:r=void 0,middleware:n,devTools:o=!0,preloadedState:l=void 0,enhancers:h=void 0}=e||{};let u;if(typeof r=="function")u=r;else if(NE(r))u=kM(r);else throw new Error(Wc(1));let v;typeof n=="function"?v=n(t):v=t();let x=M1;o&&(x=N$({trace:!1,...typeof o=="object"&&o}));const A=b$(...v),C=$$(A);let P=typeof h=="function"?h(C):C();const O=x(...P);return AM(u,l,O)}function GM(e){const t={},r=[];let n;const o={addCase(l,h){const u=typeof l=="string"?l:l.type;if(!u)throw new Error(Wc(28));if(u in t)throw new Error(Wc(29));return t[u]=h,o},addAsyncThunk(l,h){return h.pending&&(t[l.pending.type]=h.pending),h.rejected&&(t[l.rejected.type]=h.rejected),h.fulfilled&&(t[l.fulfilled.type]=h.fulfilled),h.settled&&r.push({matcher:l.settled,reducer:h.settled}),o},addMatcher(l,h){return r.push({matcher:l,reducer:h}),o},addDefaultCase(l){return n=l,o}};return e(o),[t,r,n]}function U$(e){return typeof e=="function"}function V$(e,t){let[r,n,o]=GM(t),l;if(U$(e))l=()=>QC(e());else{const u=QC(e);l=()=>u}function h(u=l(),v){let x=[r[v.type],...n.filter(({matcher:A})=>A(v)).map(({reducer:A})=>A)];return x.filter(A=>!!A).length===0&&(x=[o]),x.reduce((A,C)=>{if(C)if(Wp(A)){const O=C(A,v);return O===void 0?A:O}else{if(Dh(A))return RM(A,P=>C(P,v));{const P=C(A,v);if(P===void 0){if(A===null)return A;throw Error("A case reducer on a non-draftable value must not return undefined")}return P}}return A},u)}return h.getInitialState=l,h}var q$="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",W$=(e=21)=>{let t="",r=e;for(;r--;)t+=q$[Math.random()*64|0];return t},H$=Symbol.for("rtk-slice-createasyncthunk");function Z$(e,t){return`${e}/${t}`}function K$({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[H$];return function(o){const{name:l,reducerPath:h=l}=o;if(!l)throw new Error(Wc(11));const u=(typeof o.reducers=="function"?o.reducers(Y$()):o.reducers)||{},v=Object.keys(u),x={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},A={addCase(ue,Q){const de=typeof ue=="string"?ue:ue.type;if(!de)throw new Error(Wc(12));if(de in x.sliceCaseReducersByType)throw new Error(Wc(13));return x.sliceCaseReducersByType[de]=Q,A},addMatcher(ue,Q){return x.sliceMatchers.push({matcher:ue,reducer:Q}),A},exposeAction(ue,Q){return x.actionCreators[ue]=Q,A},exposeCaseReducer(ue,Q){return x.sliceCaseReducersByName[ue]=Q,A}};v.forEach(ue=>{const Q=u[ue],de={reducerName:ue,type:Z$(l,ue),createNotation:typeof o.reducers=="function"};Q$(Q)?tG(de,Q,A,t):J$(de,Q,A)});function C(){const[ue={},Q=[],de=void 0]=typeof o.extraReducers=="function"?GM(o.extraReducers):[o.extraReducers],he={...ue,...x.sliceCaseReducersByType};return V$(o.initialState,Y=>{for(let ie in he)Y.addCase(ie,he[ie]);for(let ie of x.sliceMatchers)Y.addMatcher(ie.matcher,ie.reducer);for(let ie of Q)Y.addMatcher(ie.matcher,ie.reducer);de&&Y.addDefaultCase(de)})}const P=ue=>ue,O=new Map,U=new WeakMap;let W;function G(ue,Q){return W||(W=C()),W(ue,Q)}function X(){return W||(W=C()),W.getInitialState()}function ae(ue,Q=!1){function de(Y){let ie=Y[ue];return typeof ie>"u"&&Q&&(ie=Zx(U,de,X)),ie}function he(Y=P){const ie=Zx(O,Q,()=>new WeakMap);return Zx(ie,Y,()=>{const Ce={};for(const[_e,Me]of Object.entries(o.selectors??{}))Ce[_e]=X$(Me,Y,()=>Zx(U,Y,X),Q);return Ce})}return{reducerPath:ue,getSelectors:he,get selectors(){return he(de)},selectSlice:de}}const ne={name:l,reducer:G,actions:x.actionCreators,caseReducers:x.sliceCaseReducersByName,getInitialState:X,...ae(h),injectInto(ue,{reducerPath:Q,...de}={}){const he=Q??h;return ue.inject({reducerPath:he,reducer:G},de),{...ne,...ae(he,!0)}}};return ne}}function X$(e,t,r,n){function o(l,...h){let u=t(l);return typeof u>"u"&&n&&(u=r()),e(u,...h)}return o.unwrapped=e,o}var cc=K$();function Y$(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function J$({type:e,reducerName:t,createNotation:r},n,o){let l,h;if("reducer"in n){if(r&&!eG(n))throw new Error(Wc(17));l=n.reducer,h=n.prepare}else l=n;o.addCase(e,l).exposeCaseReducer(t,l).exposeAction(t,h?Od(e,h):Od(e))}function Q$(e){return e._reducerDefinitionType==="asyncThunk"}function eG(e){return e._reducerDefinitionType==="reducerWithPrepare"}function tG({type:e,reducerName:t},r,n,o){if(!o)throw new Error(Wc(18));const{payloadCreator:l,fulfilled:h,pending:u,rejected:v,settled:x,options:A}=r,C=o(e,l,A);n.exposeAction(t,C),h&&n.addCase(C.fulfilled,h),u&&n.addCase(C.pending,u),v&&n.addCase(C.rejected,v),x&&n.addMatcher(C.settled,x),n.exposeCaseReducer(t,{fulfilled:h||Kx,pending:u||Kx,rejected:v||Kx,settled:x||Kx})}function Kx(){}var rG="task",UM="listener",VM="completed",VE="cancelled",nG=`task-${VE}`,iG=`task-${VM}`,lS=`${UM}-${VE}`,aG=`${UM}-${VM}`,N_=class{constructor(e){vb(this,"name","TaskAbortError");vb(this,"message");this.code=e,this.message=`${rG} ${VE} (reason: ${e})`}},qE=(e,t)=>{if(typeof e!="function")throw new TypeError(Wc(32))},O1=()=>{},qM=(e,t=O1)=>(e.catch(t),e),WM=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),iy=e=>{if(e.aborted)throw new N_(e.reason)};function HM(e,t){let r=O1;return new Promise((n,o)=>{const l=()=>o(new N_(e.reason));if(e.aborted){l();return}r=WM(e,l),t.finally(()=>r()).then(n,o)}).finally(()=>{r=O1})}var oG=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof N_?"cancelled":"rejected",error:r}}finally{t==null||t()}},j1=e=>t=>qM(HM(e,t).then(r=>(iy(e),r))),ZM=e=>{const t=j1(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:d0}=Object,tT={},B_="listenerMiddleware",sG=(e,t)=>{const r=n=>WM(e,()=>n.abort(e.reason));return(n,o)=>{qE(n);const l=new AbortController;r(l);const h=oG(async()=>{iy(e),iy(l.signal);const u=await n({pause:j1(l.signal),delay:ZM(l.signal),signal:l.signal});return iy(l.signal),u},()=>l.abort(iG));return o!=null&&o.autoJoin&&t.push(h.catch(O1)),{result:j1(e)(h),cancel(){l.abort(nG)}}}},lG=(e,t)=>{const r=async(n,o)=>{iy(t);let l=()=>{};const u=[new Promise((v,x)=>{let A=e({predicate:n,effect:(C,P)=>{P.unsubscribe(),v([C,P.getState(),P.getOriginalState()])}});l=()=>{A(),x()}})];o!=null&&u.push(new Promise(v=>setTimeout(v,o,null)));try{const v=await HM(t,Promise.race(u));return iy(t),v}finally{l()}};return(n,o)=>qM(r(n,o))},KM=e=>{let{type:t,actionCreator:r,matcher:n,predicate:o,effect:l}=e;if(t)o=Od(t).match;else if(r)t=r.type,o=r.match;else if(n)o=n;else if(!o)throw new Error(Wc(21));return qE(l),{predicate:o,type:t,effect:l}},XM=d0(e=>{const{type:t,predicate:r,effect:n}=KM(e);return{id:W$(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Wc(22))}}},{withTypes:()=>XM}),rT=(e,t)=>{const{type:r,effect:n,predicate:o}=KM(t);return Array.from(e.values()).find(l=>(typeof r=="string"?l.type===r:l.predicate===o)&&l.effect===n)},uS=e=>{e.pending.forEach(t=>{t.abort(lS)})},uG=(e,t)=>()=>{for(const r of t.keys())uS(r);e.clear()},nT=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},YM=d0(Od(`${B_}/add`),{withTypes:()=>YM}),cG=Od(`${B_}/removeAll`),JM=d0(Od(`${B_}/remove`),{withTypes:()=>JM}),dG=(...e)=>{console.error(`${B_}/error`,...e)},sx=(e={})=>{const t=new Map,r=new Map,n=O=>{const U=r.get(O)??0;r.set(O,U+1)},o=O=>{const U=r.get(O)??1;U===1?r.delete(O):r.set(O,U-1)},{extra:l,onError:h=dG}=e;qE(h);const u=O=>(O.unsubscribe=()=>t.delete(O.id),t.set(O.id,O),U=>{O.unsubscribe(),U!=null&&U.cancelActive&&uS(O)}),v=O=>{const U=rT(t,O)??XM(O);return u(U)};d0(v,{withTypes:()=>v});const x=O=>{const U=rT(t,O);return U&&(U.unsubscribe(),O.cancelActive&&uS(U)),!!U};d0(x,{withTypes:()=>x});const A=async(O,U,W,G)=>{const X=new AbortController,ae=lG(v,X.signal),ne=[];try{O.pending.add(X),n(O),await Promise.resolve(O.effect(U,d0({},W,{getOriginalState:G,condition:(ue,Q)=>ae(ue,Q).then(Boolean),take:ae,delay:ZM(X.signal),pause:j1(X.signal),extra:l,signal:X.signal,fork:sG(X.signal,ne),unsubscribe:O.unsubscribe,subscribe:()=>{t.set(O.id,O)},cancelActiveListeners:()=>{O.pending.forEach((ue,Q,de)=>{ue!==X&&(ue.abort(lS),de.delete(ue))})},cancel:()=>{X.abort(lS),O.pending.delete(X)},throwIfCancelled:()=>{iy(X.signal)}})))}catch(ue){ue instanceof N_||nT(h,ue,{raisedBy:"effect"})}finally{await Promise.all(ne),X.abort(aG),o(O),O.pending.delete(X)}},C=uG(t,r);return{middleware:O=>U=>W=>{if(!CM(W))return U(W);if(YM.match(W))return v(W.payload);if(cG.match(W)){C();return}if(JM.match(W))return x(W.payload);let G=O.getState();const X=()=>{if(G===tT)throw new Error(Wc(23));return G};let ae;try{if(ae=U(W),t.size>0){const ne=O.getState(),ue=Array.from(t.values());for(const Q of ue){let de=!1;try{de=Q.predicate(W,ne,G)}catch(he){de=!1,nT(h,he,{raisedBy:"predicate"})}de&&A(Q,W,O,X)}}}finally{G=tT}return ae},startListening:v,stopListening:x,clearListeners:C}};function Wc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var hG={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},QM=cc({name:"chartLayout",initialState:hG,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,o,l;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(o=t.payload.bottom)!==null&&o!==void 0?o:0,e.margin.left=(l=t.payload.left)!==null&&l!==void 0?l:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:fG,setLayout:pG,setChartSize:gG,setScale:mG}=QM.actions,yG=QM.reducer;function ez(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function iT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function s0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iT(Object(r),!0).forEach(function(n){vG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vG(e,t,r){return(t=xG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xG(e){var t=_G(e,"string");return typeof t=="symbol"?t:t+""}function _G(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ss(e,t,r){return ao(e)||ao(t)?r:Df(t)?y0(e,t,r):typeof t=="function"?t(e):r}var bG=(e,t,r)=>{if(t&&r){var{width:n,height:o}=r,{align:l,verticalAlign:h,layout:u}=t;if((u==="vertical"||u==="horizontal"&&h==="middle")&&l!=="center"&&tn(e[l]))return s0(s0({},e),{},{[l]:e[l]+(n||0)});if((u==="horizontal"||u==="vertical"&&l==="center")&&h!=="middle"&&tn(e[h]))return s0(s0({},e),{},{[h]:e[h]+(o||0)})}return e},Of=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",aT=1e-4,wG=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),o=Math.min(n[0],n[1])-aT,l=Math.max(n[0],n[1])+aT,h=e(t[0]),u=e(t[r-1]);(h<o||h>l||u<o||u>l)&&e.domain([t[0],t[r-1]])}},SG=(e,t)=>{if(!t||t.length!==2||!tn(t[0])||!tn(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),o=[e[0],e[1]];return(!tn(e[0])||e[0]<r)&&(o[0]=r),(!tn(e[1])||e[1]>n)&&(o[1]=n),o[0]>n&&(o[0]=n),o[1]<r&&(o[1]=r),o},EG=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var o=0,l=0,h=0;h<t;++h){var u=Ch(e[h][r][1])?e[h][r][0]:e[h][r][1];u>=0?(e[h][r][0]=o,e[h][r][1]=o+u,o=e[h][r][1]):(e[h][r][0]=l,e[h][r][1]=l+u,l=e[h][r][1])}},AG=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var o=0,l=0;l<t;++l){var h=Ch(e[l][r][1])?e[l][r][0]:e[l][r][1];h>=0?(e[l][r][0]=o,e[l][r][1]=o+h,o=e[l][r][1]):(e[l][r][0]=0,e[l][r][1]=0)}},kG={sign:EG,expand:WF,none:m0,silhouette:HF,wiggle:ZF,positive:AG},CG=(e,t,r)=>{var n=kG[r],o=qF().keys(t).value((l,h)=>Number(ss(l,h,0))).order(Jw).offset(n);return o(e)};function tz(e){return e==null?void 0:String(e)}function R1(e){var{axis:t,ticks:r,bandSize:n,entry:o,index:l,dataKey:h}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!ao(o[t.dataKey])){var u=sM(r,"value",o[t.dataKey]);if(u)return u.coordinate+n/2}return r[l]?r[l].coordinate+n/2:null}var v=ss(o,ao(h)?t.dataKey:h);return ao(v)?null:t.scale(v)}var oT=e=>{var{axis:t,ticks:r,offset:n,bandSize:o,entry:l,index:h}=e;if(t.type==="category")return r[h]?r[h].coordinate+n:null;var u=ss(l,t.dataKey,t.scale.domain()[h]);return ao(u)?null:t.scale(u)-o/2+n},TG=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]);return n<=0&&o>=0?0:o<0?o:n}return r[0]},DG=e=>{var t=e.flat(2).filter(tn);return[Math.min(...t),Math.max(...t)]},MG=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],zG=(e,t,r)=>{if(e!=null)return MG(Object.keys(e).reduce((n,o)=>{var l=e[o],{stackedData:h}=l,u=h.reduce((v,x)=>{var A=ez(x,t,r),C=DG(A);return[Math.min(v[0],C[0]),Math.max(v[1],C[1])]},[1/0,-1/0]);return[Math.min(u[0],n[0]),Math.max(u[1],n[1])]},[1/0,-1/0]))},sT=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,lT=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,rm=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var o=z_(t,A=>A.coordinate),l=1/0,h=1,u=o.length;h<u;h++){var v=o[h],x=o[h-1];l=Math.min((v.coordinate||0)-(x.coordinate||0),l)}return l===1/0?0:l}return r?void 0:0};function uT(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:o,name:l}=e;return s0(s0({},t),{},{dataKey:r,payload:n,value:o,name:l})}function O0(e,t){if(e)return String(e);if(typeof t=="string")return t}var PG=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},LG=(e,t)=>t==="centric"?e.angle:e.radius,eg=e=>e.layout.width,tg=e=>e.layout.height,IG=e=>e.layout.scale,rz=e=>e.layout.margin,F_=Pt(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),$_=Pt(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),OG="data-recharts-item-index",jG="data-recharts-item-data-key",lx=60;function cT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Xx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cT(Object(r),!0).forEach(function(n){RG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RG(e,t,r){return(t=NG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NG(e){var t=BG(e,"string");return typeof t=="symbol"?t:t+""}function BG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FG=e=>e.brush.height;function $G(e){var t=$_(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var o=typeof n.width=="number"?n.width:lx;return r+o}return r},0)}function GG(e){var t=$_(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var o=typeof n.width=="number"?n.width:lx;return r+o}return r},0)}function UG(e){var t=F_(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function VG(e){var t=F_(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var ml=Pt([eg,tg,rz,FG,$G,GG,UG,VG,SM,p$],(e,t,r,n,o,l,h,u,v,x)=>{var A={left:(r.left||0)+o,right:(r.right||0)+l},C={top:(r.top||0)+h,bottom:(r.bottom||0)+u},P=Xx(Xx({},C),A),O=P.bottom;P.bottom+=n,P=bG(P,v,x);var U=e-P.left-P.right,W=t-P.top-P.bottom;return Xx(Xx({brushBottom:O},P),{},{width:Math.max(U,0),height:Math.max(W,0)})}),qG=Pt(ml,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),WE=Pt(eg,tg,(e,t)=>({x:0,y:0,width:e,height:t})),WG=N.createContext(null),$l=()=>N.useContext(WG)!=null,G_=e=>e.brush,U_=Pt([G_,ml,rz],(e,t,r)=>({height:e.height,x:tn(e.x)?e.x:t.left,y:tn(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:tn(e.width)?e.width:t.width})),W2={},H2={},Z2={},dT;function HG(){return dT||(dT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:o,edges:l}={}){let h,u=null;const v=l!=null&&l.includes("leading"),x=l==null||l.includes("trailing"),A=()=>{u!==null&&(r.apply(h,u),h=void 0,u=null)},C=()=>{x&&A(),W()};let P=null;const O=()=>{P!=null&&clearTimeout(P),P=setTimeout(()=>{P=null,C()},n)},U=()=>{P!==null&&(clearTimeout(P),P=null)},W=()=>{U(),h=void 0,u=null},G=()=>{A()},X=function(...ae){if(o!=null&&o.aborted)return;h=this,u=ae;const ne=P==null;O(),v&&ne&&A()};return X.schedule=O,X.cancel=W,X.flush=G,o==null||o.addEventListener("abort",W,{once:!0}),X}e.debounce=t})(Z2)),Z2}var hT;function ZG(){return hT||(hT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HG();function r(n,o=0,l={}){typeof l!="object"&&(l={});const{leading:h=!1,trailing:u=!0,maxWait:v}=l,x=Array(2);h&&(x[0]="leading"),u&&(x[1]="trailing");let A,C=null;const P=t.debounce(function(...W){A=n.apply(this,W),C=null},o,{edges:x}),O=function(...W){return v!=null&&(C===null&&(C=Date.now()),Date.now()-C>=v)?(A=n.apply(this,W),C=Date.now(),P.cancel(),P.schedule(),A):(P.apply(this,W),A)},U=()=>(P.flush(),A);return O.cancel=P.cancel,O.flush=U,O}e.debounce=r})(H2)),H2}var fT;function KG(){return fT||(fT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZG();function r(n,o=0,l={}){const{leading:h=!0,trailing:u=!0}=l;return t.debounce(n,o,{leading:h,maxWait:o,trailing:u})}e.throttle=r})(W2)),W2}var K2,pT;function XG(){return pT||(pT=1,K2=KG().throttle),K2}var YG=XG();const JG=Fl(YG);var gT=function(t,r){for(var n=arguments.length,o=new Array(n>2?n-2:0),l=2;l<n;l++)o[l-2]=arguments[l];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var h=0;console.warn(r.replace(/%s/g,()=>o[h++]))}},nz=(e,t,r)=>{var{width:n="100%",height:o="100%",aspect:l,maxHeight:h}=r,u=qp(n)?e:Number(n),v=qp(o)?t:Number(o);return l&&l>0&&(u?v=u/l:v&&(u=v*l),h&&v!=null&&v>h&&(v=h)),{calculatedWidth:u,calculatedHeight:v}},QG={width:0,height:0,overflow:"visible"},eU={width:0,overflowX:"visible"},tU={height:0,overflowY:"visible"},rU={},nU=e=>{var{width:t,height:r}=e,n=qp(t),o=qp(r);return n&&o?QG:n?eU:o?tU:rU};function iU(e){var{width:t,height:r,aspect:n}=e,o=t,l=r;return o===void 0&&l===void 0?(o="100%",l="100%"):o===void 0?o=n&&n>0?void 0:"100%":l===void 0&&(l=n&&n>0?void 0:"100%"),{width:o,height:l}}function so(e){return Number.isFinite(e)}function nm(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function cS(){return cS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cS.apply(null,arguments)}function mT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function yT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mT(Object(r),!0).forEach(function(n){aU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aU(e,t,r){return(t=oU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oU(e){var t=sU(e,"string");return typeof t=="symbol"?t:t+""}function sU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iz=N.createContext({width:-1,height:-1});function lU(e){return nm(e.width)&&nm(e.height)}function az(e){var{children:t,width:r,height:n}=e,o=N.useMemo(()=>({width:r,height:n}),[r,n]);return lU(o)?N.createElement(iz.Provider,{value:o},t):null}var HE=()=>N.useContext(iz),uU=N.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:o,height:l,minWidth:h=0,minHeight:u,maxHeight:v,children:x,debounce:A=0,id:C,className:P,onResize:O,style:U={}}=e,W=N.useRef(null),G=N.useRef();G.current=O,N.useImperativeHandle(t,()=>W.current);var[X,ae]=N.useState({containerWidth:n.width,containerHeight:n.height}),ne=N.useCallback((Y,ie)=>{ae(Ce=>{var _e=Math.round(Y),Me=Math.round(ie);return Ce.containerWidth===_e&&Ce.containerHeight===Me?Ce:{containerWidth:_e,containerHeight:Me}})},[]);N.useEffect(()=>{if(W.current==null||typeof ResizeObserver>"u")return ix;var Y=Me=>{var me,{width:Ke,height:Re}=Me[0].contentRect;ne(Ke,Re),(me=G.current)===null||me===void 0||me.call(G,Ke,Re)};A>0&&(Y=JG(Y,A,{trailing:!0,leading:!1}));var ie=new ResizeObserver(Y),{width:Ce,height:_e}=W.current.getBoundingClientRect();return ne(Ce,_e),ie.observe(W.current),()=>{ie.disconnect()}},[ne,A]);var{containerWidth:ue,containerHeight:Q}=X;gT(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:de,calculatedHeight:he}=nz(ue,Q,{width:o,height:l,aspect:r,maxHeight:v});return gT(de!=null&&de>0||he!=null&&he>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,de,he,o,l,h,u,r),N.createElement("div",{id:C?"".concat(C):void 0,className:_a("recharts-responsive-container",P),style:yT(yT({},U),{},{width:o,height:l,minWidth:h,minHeight:u,maxHeight:v}),ref:W},N.createElement("div",{style:nU({width:o,height:l})},N.createElement(az,{width:de,height:he},x)))}),g1=N.forwardRef((e,t)=>{var r=HE();if(nm(r.width)&&nm(r.height))return e.children;var{width:n,height:o}=iU({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:l,calculatedHeight:h}=nz(void 0,void 0,{width:n,height:o,aspect:e.aspect,maxHeight:e.maxHeight});return tn(l)&&tn(h)?N.createElement(az,{width:l,height:h},e.children):N.createElement(uU,cS({},e,{width:n,height:o,ref:t}))});function oz(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var V_=()=>{var e,t=$l(),r=un(qG),n=un(U_),o=(e=un(G_))===null||e===void 0?void 0:e.padding;return!t||!n||!o?r:{width:n.width-o.left-o.right,height:n.height-o.top-o.bottom,x:o.left,y:o.top}},cU={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},dU=()=>{var e;return(e=un(ml))!==null&&e!==void 0?e:cU},sz=()=>un(eg),lz=()=>un(tg),hU=()=>un(e=>e.layout.margin),Bi=e=>e.layout.layoutType,gy=()=>un(Bi),fU=()=>{var e=gy();if(e==="horizontal"||e==="vertical")return e},pU=()=>{var e=gy();return e!==void 0},q_=e=>{var t=Lo(),r=$l(),{width:n,height:o}=e,l=HE(),h=n,u=o;return l&&(h=l.width>0?l.width:n,u=l.height>0?l.height:o),N.useEffect(()=>{!r&&nm(h)&&nm(u)&&t(gG({width:h,height:u}))},[t,r,h,u]),null},uz=Symbol.for("immer-nothing"),vT=Symbol.for("immer-draftable"),Hc=Symbol.for("immer-state");function Eh(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Bv=Object.getPrototypeOf;function _0(e){return!!e&&!!e[Hc]}function uy(e){var t;return e?cz(e)||Array.isArray(e)||!!e[vT]||!!((t=e.constructor)!=null&&t[vT])||ux(e)||H_(e):!1}var gU=Object.prototype.constructor.toString(),xT=new WeakMap;function cz(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=xT.get(r);return n===void 0&&(n=Function.toString.call(r),xT.set(r,n)),n===gU}function N1(e,t,r=!0){W_(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(o=>{t(o,e[o],e)}):e.forEach((n,o)=>t(o,n,e))}function W_(e){const t=e[Hc];return t?t.type_:Array.isArray(e)?1:ux(e)?2:H_(e)?3:0}function dS(e,t){return W_(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function dz(e,t,r){const n=W_(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function mU(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function ux(e){return e instanceof Map}function H_(e){return e instanceof Set}function ey(e){return e.copy_||e.base_}function hS(e,t){if(ux(e))return new Map(e);if(H_(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=cz(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Hc];let o=Reflect.ownKeys(n);for(let l=0;l<o.length;l++){const h=o[l],u=n[h];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(n[h]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[h]})}return Object.create(Bv(e),n)}else{const n=Bv(e);if(n!==null&&r)return{...e};const o=Object.create(n);return Object.assign(o,e)}}function ZE(e,t=!1){return Z_(e)||_0(e)||!uy(e)||(W_(e)>1&&Object.defineProperties(e,{set:Yx,add:Yx,clear:Yx,delete:Yx}),Object.freeze(e),t&&Object.values(e).forEach(r=>ZE(r,!0))),e}function yU(){Eh(2)}var Yx={value:yU};function Z_(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var vU={};function cy(e){const t=vU[e];return t||Eh(0,e),t}var Fv;function hz(){return Fv}function xU(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function _T(e,t){t&&(cy("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function fS(e){pS(e),e.drafts_.forEach(_U),e.drafts_=null}function pS(e){e===Fv&&(Fv=e.parent_)}function bT(e){return Fv=xU(Fv,e)}function _U(e){const t=e[Hc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function wT(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Hc].modified_&&(fS(t),Eh(4)),uy(e)&&(e=B1(t,e),t.parent_||F1(t,e)),t.patches_&&cy("Patches").generateReplacementPatches_(r[Hc].base_,e,t.patches_,t.inversePatches_)):e=B1(t,r,[]),fS(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==uz?e:void 0}function B1(e,t,r){if(Z_(t))return t;const n=e.immer_.shouldUseStrictIteration(),o=t[Hc];if(!o)return N1(t,(l,h)=>ST(e,o,t,l,h,r),n),t;if(o.scope_!==e)return t;if(!o.modified_)return F1(e,o.base_,!0),o.base_;if(!o.finalized_){o.finalized_=!0,o.scope_.unfinalizedDrafts_--;const l=o.copy_;let h=l,u=!1;o.type_===3&&(h=new Set(l),l.clear(),u=!0),N1(h,(v,x)=>ST(e,o,l,v,x,r,u),n),F1(e,l,!1),r&&e.patches_&&cy("Patches").generatePatches_(o,r,e.patches_,e.inversePatches_)}return o.copy_}function ST(e,t,r,n,o,l,h){if(o==null||typeof o!="object"&&!h)return;const u=Z_(o);if(!(u&&!h)){if(_0(o)){const v=l&&t&&t.type_!==3&&!dS(t.assigned_,n)?l.concat(n):void 0,x=B1(e,o,v);if(dz(r,n,x),_0(x))e.canAutoFreeze_=!1;else return}else h&&r.add(o);if(uy(o)&&!u){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===o&&u)return;B1(e,o),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(ux(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&F1(e,o)}}}function F1(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&ZE(t,r)}function bU(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:hz(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=n,l=KE;r&&(o=[n],l=$v);const{revoke:h,proxy:u}=Proxy.revocable(o,l);return n.draft_=u,n.revoke_=h,u}var KE={get(e,t){if(t===Hc)return e;const r=ey(e);if(!dS(r,t))return wU(e,r,t);const n=r[t];return e.finalized_||!uy(n)?n:n===X2(e.base_,t)?(Y2(e),e.copy_[t]=mS(n,e)):n},has(e,t){return t in ey(e)},ownKeys(e){return Reflect.ownKeys(ey(e))},set(e,t,r){const n=fz(ey(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const o=X2(ey(e),t),l=o==null?void 0:o[Hc];if(l&&l.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(mU(r,o)&&(r!==void 0||dS(e.base_,t)))return!0;Y2(e),gS(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return X2(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Y2(e),gS(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=ey(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Eh(11)},getPrototypeOf(e){return Bv(e.base_)},setPrototypeOf(){Eh(12)}},$v={};N1(KE,(e,t)=>{$v[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});$v.deleteProperty=function(e,t){return $v.set.call(this,e,t,void 0)};$v.set=function(e,t,r){return KE.set.call(this,e[0],t,r,e[0])};function X2(e,t){const r=e[Hc];return(r?ey(r):e)[t]}function wU(e,t,r){var o;const n=fz(t,r);return n?"value"in n?n.value:(o=n.get)==null?void 0:o.call(e.draft_):void 0}function fz(e,t){if(!(t in e))return;let r=Bv(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Bv(r)}}function gS(e){e.modified_||(e.modified_=!0,e.parent_&&gS(e.parent_))}function Y2(e){e.copy_||(e.copy_=hS(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var SU=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const l=r;r=t;const h=this;return function(v=l,...x){return h.produce(v,A=>r.call(this,A,...x))}}typeof r!="function"&&Eh(6),n!==void 0&&typeof n!="function"&&Eh(7);let o;if(uy(t)){const l=bT(this),h=mS(t,void 0);let u=!0;try{o=r(h),u=!1}finally{u?fS(l):pS(l)}return _T(l,n),wT(o,l)}else if(!t||typeof t!="object"){if(o=r(t),o===void 0&&(o=t),o===uz&&(o=void 0),this.autoFreeze_&&ZE(o,!0),n){const l=[],h=[];cy("Patches").generateReplacementPatches_(t,o,l,h),n(l,h)}return o}else Eh(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(h,...u)=>this.produceWithPatches(h,v=>t(v,...u));let n,o;return[this.produce(t,r,(h,u)=>{n=h,o=u}),n,o]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){uy(e)||Eh(8),_0(e)&&(e=EU(e));const t=bT(this),r=mS(e,void 0);return r[Hc].isManual_=!0,pS(t),r}finishDraft(e,t){const r=e&&e[Hc];(!r||!r.isManual_)&&Eh(9);const{scope_:n}=r;return _T(n,t),wT(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const o=t[r];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}r>-1&&(t=t.slice(r+1));const n=cy("Patches").applyPatches_;return _0(e)?n(e,t):this.produce(e,o=>n(o,t))}};function mS(e,t){const r=ux(e)?cy("MapSet").proxyMap_(e,t):H_(e)?cy("MapSet").proxySet_(e,t):bU(e,t);return(t?t.scope_:hz()).drafts_.push(r),r}function EU(e){return _0(e)||Eh(10,e),pz(e)}function pz(e){if(!uy(e)||Z_(e))return e;const t=e[Hc];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=hS(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=hS(e,!0);return N1(r,(o,l)=>{dz(r,o,pz(l))},n),t&&(t.finalized_=!1),r}var AU=new SU;AU.produce;var kU={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},gz=cc({name:"legend",initialState:kU,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:xo()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,o=kh(e).payload.indexOf(r);o>-1&&(e.payload[o]=n)},prepare:xo()},removeLegendPayload:{reducer(e,t){var r=kh(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:xo()}}}),{setLegendSize:ET,setLegendSettings:CU,addLegendPayload:TU,replaceLegendPayload:DU,removeLegendPayload:MU}=gz.actions,zU=gz.reducer,PU=["contextPayload"];function yS(){return yS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yS.apply(null,arguments)}function AT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function b0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AT(Object(r),!0).forEach(function(n){LU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LU(e,t,r){return(t=IU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IU(e){var t=OU(e,"string");return typeof t=="symbol"?t:t+""}function OU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jU(e,t){if(e==null)return{};var r,n,o=RU(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function RU(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function NU(e){return e.value}function BU(e){var{contextPayload:t}=e,r=jU(e,PU),n=xM(t,e.payloadUniqBy,NU),o=b0(b0({},r),{},{payload:n});return N.isValidElement(e.content)?N.cloneElement(e.content,o):typeof e.content=="function"?N.createElement(e.content,o):N.createElement(S7,o)}function FU(e,t,r,n,o,l){var{layout:h,align:u,verticalAlign:v}=t,x,A;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(u==="center"&&h==="vertical"?x={left:((n||0)-l.width)/2}:x=u==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(v==="middle"?A={top:((o||0)-l.height)/2}:A=v==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),b0(b0({},x),A)}function $U(e){var t=Lo();return N.useEffect(()=>{t(CU(e))},[t,e]),null}function GU(e){var t=Lo();return N.useEffect(()=>(t(ET(e)),()=>{t(ET({width:0,height:0}))}),[t,e]),null}function UU(e,t,r,n){return e==="vertical"&&tn(t)?{height:t}:e==="horizontal"?{width:r||n}:null}var VU={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function mz(e){var t=gl(e,VU),r=y$(),n=gF(),o=hU(),{width:l,height:h,wrapperStyle:u,portal:v}=t,[x,A]=EM([r]),C=sz(),P=lz();if(C==null||P==null)return null;var O=C-((o==null?void 0:o.left)||0)-((o==null?void 0:o.right)||0),U=UU(t.layout,h,l,O),W=v?u:b0(b0({position:"absolute",width:(U==null?void 0:U.width)||l||"auto",height:(U==null?void 0:U.height)||h||"auto"},FU(u,t,o,C,P,x)),u),G=v??n;if(G==null||r==null)return null;var X=N.createElement("div",{className:"recharts-legend-wrapper",style:W,ref:A},N.createElement($U,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!v&&N.createElement(GU,{width:x.width,height:x.height}),N.createElement(BU,yS({},t,U,{margin:o,chartWidth:C,chartHeight:P,contextPayload:r})));return __.createPortal(X,G)}mz.displayName="Legend";function vS(){return vS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vS.apply(null,arguments)}function kT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function J2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kT(Object(r),!0).forEach(function(n){qU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qU(e,t,r){return(t=WU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WU(e){var t=HU(e,"string");return typeof t=="symbol"?t:t+""}function HU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZU(e){return Array.isArray(e)&&Df(e[0])&&Df(e[1])?e.join(" ~ "):e}var KU=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:o={},payload:l,formatter:h,itemSorter:u,wrapperClassName:v,labelClassName:x,label:A,labelFormatter:C,accessibilityLayer:P=!1}=e,O=()=>{if(l&&l.length){var Q={padding:0,margin:0},de=(u?z_(l,u):l).map((he,Y)=>{if(he.type==="none")return null;var ie=he.formatter||h||ZU,{value:Ce,name:_e}=he,Me=Ce,me=_e;if(ie){var Ke=ie(Ce,_e,he,Y,l);if(Array.isArray(Ke))[Me,me]=Ke;else if(Ke!=null)Me=Ke;else return null}var Re=J2({display:"block",paddingTop:4,paddingBottom:4,color:he.color||"#000"},n);return N.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Y),style:Re},Df(me)?N.createElement("span",{className:"recharts-tooltip-item-name"},me):null,Df(me)?N.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,N.createElement("span",{className:"recharts-tooltip-item-value"},Me),N.createElement("span",{className:"recharts-tooltip-item-unit"},he.unit||""))});return N.createElement("ul",{className:"recharts-tooltip-item-list",style:Q},de)}return null},U=J2({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),W=J2({margin:0},o),G=!ao(A),X=G?A:"",ae=_a("recharts-default-tooltip",v),ne=_a("recharts-tooltip-label",x);G&&C&&l!==void 0&&l!==null&&(X=C(A,l));var ue=P?{role:"status","aria-live":"assertive"}:{};return N.createElement("div",vS({className:ae,style:U},ue),N.createElement("p",{className:ne,style:W},N.isValidElement(X)?X:"".concat(X)),O())},fv="recharts-tooltip-wrapper",XU={visibility:"hidden"};function YU(e){var{coordinate:t,translateX:r,translateY:n}=e;return _a(fv,{["".concat(fv,"-right")]:tn(r)&&t&&tn(t.x)&&r>=t.x,["".concat(fv,"-left")]:tn(r)&&t&&tn(t.x)&&r<t.x,["".concat(fv,"-bottom")]:tn(n)&&t&&tn(t.y)&&n>=t.y,["".concat(fv,"-top")]:tn(n)&&t&&tn(t.y)&&n<t.y})}function CT(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:o,position:l,reverseDirection:h,tooltipDimension:u,viewBox:v,viewBoxDimension:x}=e;if(l&&tn(l[n]))return l[n];var A=r[n]-u-(o>0?o:0),C=r[n]+o;if(t[n])return h[n]?A:C;var P=v[n];if(P==null)return 0;if(h[n]){var O=A,U=P;return O<U?Math.max(C,P):Math.max(A,P)}if(x==null)return 0;var W=C+u,G=P+x;return W>G?Math.max(A,P):Math.max(C,P)}function JU(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function QU(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:o,reverseDirection:l,tooltipBox:h,useTranslate3d:u,viewBox:v}=e,x,A,C;return h.height>0&&h.width>0&&r?(A=CT({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:o,reverseDirection:l,tooltipDimension:h.width,viewBox:v,viewBoxDimension:v.width}),C=CT({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:o,reverseDirection:l,tooltipDimension:h.height,viewBox:v,viewBoxDimension:v.height}),x=JU({translateX:A,translateY:C,useTranslate3d:u})):x=XU,{cssProperties:x,cssClasses:YU({translateX:A,translateY:C,coordinate:r})}}function TT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Jx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TT(Object(r),!0).forEach(function(n){xS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xS(e,t,r){return(t=eV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eV(e){var t=tV(e,"string");return typeof t=="symbol"?t:t+""}function tV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class rV extends N.PureComponent{constructor(){super(...arguments),xS(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),xS(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,o,l;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(o=(l=this.props.coordinate)===null||l===void 0?void 0:l.y)!==null&&o!==void 0?o:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:o,children:l,coordinate:h,hasPayload:u,isAnimationActive:v,offset:x,position:A,reverseDirection:C,useTranslate3d:P,viewBox:O,wrapperStyle:U,lastBoundingBox:W,innerRef:G,hasPortalFromProps:X}=this.props,{cssClasses:ae,cssProperties:ne}=QU({allowEscapeViewBox:r,coordinate:h,offsetTopLeft:x,position:A,reverseDirection:C,tooltipBox:{height:W.height,width:W.width},useTranslate3d:P,viewBox:O}),ue=X?{}:Jx(Jx({transition:v&&t?"transform ".concat(n,"ms ").concat(o):void 0},ne),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),Q=Jx(Jx({},ue),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},U);return N.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:ae,style:Q,ref:G},l)}}var yz=()=>{var e;return(e=un(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function _S(){return _S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_S.apply(null,arguments)}function DT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function MT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DT(Object(r),!0).forEach(function(n){nV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nV(e,t,r){return(t=iV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iV(e){var t=aV(e,"string");return typeof t=="symbol"?t:t+""}function aV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zT={curveBasisClosed:IF,curveBasisOpen:OF,curveBasis:LF,curveBumpX:xF,curveBumpY:_F,curveLinearClosed:jF,curveLinear:T_,curveMonotoneX:RF,curveMonotoneY:NF,curveNatural:BF,curveStep:FF,curveStepAfter:GF,curveStepBefore:$F},$1=e=>so(e.x)&&so(e.y),PT=e=>e.base!=null&&$1(e.base)&&$1(e),pv=e=>e.x,gv=e=>e.y,oV=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(nx(e));return(r==="curveMonotone"||r==="curveBump")&&t?zT["".concat(r).concat(t==="vertical"?"Y":"X")]:zT[r]||T_},sV=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:o,connectNulls:l=!1}=e,h=oV(t,o),u=l?r.filter($1):r,v;if(Array.isArray(n)){var x=r.map((O,U)=>MT(MT({},O),{},{base:n[U]}));o==="vertical"?v=Vx().y(gv).x1(pv).x0(O=>O.base.x):v=Vx().x(pv).y1(gv).y0(O=>O.base.y);var A=v.defined(PT).curve(h),C=l?x.filter(PT):x;return A(C)}o==="vertical"&&tn(n)?v=Vx().y(gv).x1(pv).x0(n):tn(n)?v=Vx().x(pv).y1(gv).y0(n):v=ZD().x(pv).y(gv);var P=v.defined($1).curve(h);return P(u)},Tv=e=>{var{className:t,points:r,path:n,pathRef:o}=e;if((!r||!r.length)&&!n)return null;var l=r&&r.length?sV(e):n;return N.createElement("path",_S({},Id(e),OE(e),{className:_a("recharts-curve",t),d:l===null?void 0:l,ref:o}))},lV=["x","y","top","left","width","height","className"];function bS(){return bS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bS.apply(null,arguments)}function LT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function uV(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LT(Object(r),!0).forEach(function(n){cV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cV(e,t,r){return(t=dV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dV(e){var t=hV(e,"string");return typeof t=="symbol"?t:t+""}function hV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fV(e,t){if(e==null)return{};var r,n,o=pV(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function pV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var gV=(e,t,r,n,o,l)=>"M".concat(e,",").concat(o,"v").concat(n,"M").concat(l,",").concat(t,"h").concat(r),mV=e=>{var{x:t=0,y:r=0,top:n=0,left:o=0,width:l=0,height:h=0,className:u}=e,v=fV(e,lV),x=uV({x:t,y:r,top:n,left:o,width:l,height:h},v);return!tn(t)||!tn(r)||!tn(l)||!tn(h)||!tn(n)||!tn(o)?null:N.createElement("path",bS({},iu(x),{className:_a("recharts-cross",u),d:gV(t,r,l,h,n,o)}))};function yV(e,t,r,n){var o=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-o:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-o,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function IT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function OT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IT(Object(r),!0).forEach(function(n){vV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vV(e,t,r){return(t=xV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xV(e){var t=_V(e,"string");return typeof t=="symbol"?t:t+""}function _V(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bV=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),vz=(e,t,r)=>e.map(n=>"".concat(bV(n)," ").concat(t,"ms ").concat(r)).join(","),wV=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(o=>n.includes(o))),Gv=(e,t)=>Object.keys(t).reduce((r,n)=>OT(OT({},r),{},{[n]:e(n,t[n])}),{});function jT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Fs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jT(Object(r),!0).forEach(function(n){SV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SV(e,t,r){return(t=EV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EV(e){var t=AV(e,"string");return typeof t=="symbol"?t:t+""}function AV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var G1=(e,t,r)=>e+(t-e)*r,wS=e=>{var{from:t,to:r}=e;return t!==r},xz=(e,t,r)=>{var n=Gv((o,l)=>{if(wS(l)){var[h,u]=e(l.from,l.to,l.velocity);return Fs(Fs({},l),{},{from:h,velocity:u})}return l},t);return r<1?Gv((o,l)=>wS(l)?Fs(Fs({},l),{},{velocity:G1(l.velocity,n[o].velocity,r),from:G1(l.from,n[o].from,r)}):l,t):xz(e,n,r-1)};function kV(e,t,r,n,o,l){var h,u=n.reduce((P,O)=>Fs(Fs({},P),{},{[O]:{from:e[O],velocity:0,to:t[O]}}),{}),v=()=>Gv((P,O)=>O.from,u),x=()=>!Object.values(u).filter(wS).length,A=null,C=P=>{h||(h=P);var O=P-h,U=O/r.dt;u=xz(r,u,U),o(Fs(Fs(Fs({},e),t),v())),h=P,x()||(A=l.setTimeout(C))};return()=>(A=l.setTimeout(C),()=>{var P;(P=A)===null||P===void 0||P()})}function CV(e,t,r,n,o,l,h){var u=null,v=o.reduce((C,P)=>Fs(Fs({},C),{},{[P]:[e[P],t[P]]}),{}),x,A=C=>{x||(x=C);var P=(C-x)/n,O=Gv((W,G)=>G1(...G,r(P)),v);if(l(Fs(Fs(Fs({},e),t),O)),P<1)u=h.setTimeout(A);else{var U=Gv((W,G)=>G1(...G,r(1)),v);l(Fs(Fs(Fs({},e),t),U))}};return()=>(u=h.setTimeout(A),()=>{var C;(C=u)===null||C===void 0||C()})}const TV=(e,t,r,n,o,l)=>{var h=wV(e,t);return r==null?()=>(o(Fs(Fs({},e),t)),()=>{}):r.isStepper===!0?kV(e,t,r,h,o,l):CV(e,t,r,n,h,o,l)};var U1=1e-4,_z=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],bz=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),RT=(e,t)=>r=>{var n=_z(e,t);return bz(n,r)},DV=(e,t)=>r=>{var n=_z(e,t),o=[...n.map((l,h)=>l*h).slice(1),0];return bz(o,r)},MV=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var o,l=r[0].split("(");if(l[0]==="cubic-bezier"&&((o=l[1])===null||o===void 0?void 0:o.split(")")[0].split(",").length)===4){var h=l[1].split(")")[0].split(",").map(u=>parseFloat(u));return[h[0],h[1],h[2],h[3]]}}}return r.length===4?r:[0,0,1,1]},zV=(e,t,r,n)=>{var o=RT(e,r),l=RT(t,n),h=DV(e,r),u=x=>x>1?1:x<0?0:x,v=x=>{for(var A=x>1?1:x,C=A,P=0;P<8;++P){var O=o(C)-A,U=h(C);if(Math.abs(O-A)<U1||U<U1)return l(C);C=u(C-O/U)}return l(C)};return v.isStepper=!1,v},NT=function(){return zV(...MV(...arguments))},PV=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:o=17}=t,l=(h,u,v)=>{var x=-(h-u)*r,A=v*n,C=v+(x-A)*o/1e3,P=v*o/1e3+h;return Math.abs(P-u)<U1&&Math.abs(C)<U1?[u,0]:[P,C]};return l.isStepper=!0,l.dt=o,l},LV=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return NT(e);case"spring":return PV();default:if(e.split("(")[0]==="cubic-bezier")return NT(e)}return typeof e=="function"?e:null};function IV(e){var t,r=()=>null,n=!1,o=null,l=h=>{if(!n){if(Array.isArray(h)){if(!h.length)return;var u=h,[v,...x]=u;if(typeof v=="number"){o=e.setTimeout(l.bind(null,x),v);return}l(v),o=e.setTimeout(l.bind(null,x));return}typeof h=="string"&&(t=h,r(t)),typeof h=="object"&&(t=h,r(t)),typeof h=="function"&&h()}};return{stop:()=>{n=!0},start:h=>{n=!1,o&&(o(),o=null),l(h)},subscribe:h=>(r=h,()=>{r=()=>null}),getTimeoutController:()=>e}}class OV{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),o=null,l=h=>{h-n>=r?t(h):typeof requestAnimationFrame=="function"&&(o=requestAnimationFrame(l))};return o=requestAnimationFrame(l),()=>{o!=null&&cancelAnimationFrame(o)}}}function jV(){return IV(new OV)}var RV=N.createContext(jV);function NV(e,t){var r=N.useContext(RV);return N.useMemo(()=>t??r(e),[e,t,r])}var BV=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),j0={devToolsEnabled:!1,isSsr:BV()},FV={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},BT={t:0},Q2={t:1};function cx(e){var t=gl(e,FV),{isActive:r,canBegin:n,duration:o,easing:l,begin:h,onAnimationEnd:u,onAnimationStart:v,children:x}=t,A=r==="auto"?!j0.isSsr:r,C=NV(t.animationId,t.animationManager),[P,O]=N.useState(A?BT:Q2),U=N.useRef(null);return N.useEffect(()=>{A||O(Q2)},[A]),N.useEffect(()=>{if(!A||!n)return ix;var W=TV(BT,Q2,LV(l),o,O,C.getTimeoutController()),G=()=>{U.current=W()};return C.start([v,h,G,o,u]),()=>{C.stop(),U.current&&U.current(),u()}},[A,n,o,l,h,v,u,C]),x(P.t)}function dx(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=N.useRef(Ov(t)),n=N.useRef(e);return n.current!==e&&(r.current=Ov(t),n.current=e),r.current}var $V=["radius"],GV=["radius"];function FT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function $T(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FT(Object(r),!0).forEach(function(n){UV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UV(e,t,r){return(t=VV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VV(e){var t=qV(e,"string");return typeof t=="symbol"?t:t+""}function qV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V1(){return V1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},V1.apply(null,arguments)}function GT(e,t){if(e==null)return{};var r,n,o=WV(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function WV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var UT=(e,t,r,n,o)=>{var l=Math.min(Math.abs(r)/2,Math.abs(n)/2),h=n>=0?1:-1,u=r>=0?1:-1,v=n>=0&&r>=0||n<0&&r<0?1:0,x;if(l>0&&o instanceof Array){for(var A=[0,0,0,0],C=0,P=4;C<P;C++)A[C]=o[C]>l?l:o[C];x="M".concat(e,",").concat(t+h*A[0]),A[0]>0&&(x+="A ".concat(A[0],",").concat(A[0],",0,0,").concat(v,",").concat(e+u*A[0],",").concat(t)),x+="L ".concat(e+r-u*A[1],",").concat(t),A[1]>0&&(x+="A ".concat(A[1],",").concat(A[1],",0,0,").concat(v,`,
        `).concat(e+r,",").concat(t+h*A[1])),x+="L ".concat(e+r,",").concat(t+n-h*A[2]),A[2]>0&&(x+="A ".concat(A[2],",").concat(A[2],",0,0,").concat(v,`,
        `).concat(e+r-u*A[2],",").concat(t+n)),x+="L ".concat(e+u*A[3],",").concat(t+n),A[3]>0&&(x+="A ".concat(A[3],",").concat(A[3],",0,0,").concat(v,`,
        `).concat(e,",").concat(t+n-h*A[3])),x+="Z"}else if(l>0&&o===+o&&o>0){var O=Math.min(l,o);x="M ".concat(e,",").concat(t+h*O,`
            A `).concat(O,",").concat(O,",0,0,").concat(v,",").concat(e+u*O,",").concat(t,`
            L `).concat(e+r-u*O,",").concat(t,`
            A `).concat(O,",").concat(O,",0,0,").concat(v,",").concat(e+r,",").concat(t+h*O,`
            L `).concat(e+r,",").concat(t+n-h*O,`
            A `).concat(O,",").concat(O,",0,0,").concat(v,",").concat(e+r-u*O,",").concat(t+n,`
            L `).concat(e+u*O,",").concat(t+n,`
            A `).concat(O,",").concat(O,",0,0,").concat(v,",").concat(e,",").concat(t+n-h*O," Z")}else x="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return x},VT={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},wz=e=>{var t=gl(e,VT),r=N.useRef(null),[n,o]=N.useState(-1);N.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var ge=r.current.getTotalLength();ge&&o(ge)}catch{}},[]);var{x:l,y:h,width:u,height:v,radius:x,className:A}=t,{animationEasing:C,animationDuration:P,animationBegin:O,isAnimationActive:U,isUpdateAnimationActive:W}=t,G=N.useRef(u),X=N.useRef(v),ae=N.useRef(l),ne=N.useRef(h),ue=N.useMemo(()=>({x:l,y:h,width:u,height:v,radius:x}),[l,h,u,v,x]),Q=dx(ue,"rectangle-");if(l!==+l||h!==+h||u!==+u||v!==+v||u===0||v===0)return null;var de=_a("recharts-rectangle",A);if(!W){var he=iu(t),{radius:Y}=he,ie=GT(he,$V);return N.createElement("path",V1({},ie,{radius:typeof x=="number"?x:void 0,className:de,d:UT(l,h,u,v,x)}))}var Ce=G.current,_e=X.current,Me=ae.current,me=ne.current,Ke="0px ".concat(n===-1?1:n,"px"),Re="".concat(n,"px 0px"),pe=vz(["strokeDasharray"],P,typeof C=="string"?C:VT.animationEasing);return N.createElement(cx,{animationId:Q,key:Q,canBegin:n>0,duration:P,easing:C,isActive:W,begin:O},ge=>{var ze=Pa(Ce,u,ge),Pe=Pa(_e,v,ge),st=Pa(Me,l,ge),Ae=Pa(me,h,ge);r.current&&(G.current=ze,X.current=Pe,ae.current=st,ne.current=Ae);var qe;U?ge>0?qe={transition:pe,strokeDasharray:Re}:qe={strokeDasharray:Ke}:qe={strokeDasharray:Re};var Ze=iu(t),{radius:zt}=Ze,Tt=GT(Ze,GV);return N.createElement("path",V1({},Tt,{radius:typeof x=="number"?x:void 0,className:de,d:UT(st,Ae,ze,Pe,x),ref:r,style:$T($T({},qe),t.style)}))})};function qT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function WT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qT(Object(r),!0).forEach(function(n){HV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HV(e,t,r){return(t=ZV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZV(e){var t=KV(e,"string");return typeof t=="symbol"?t:t+""}function KV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var q1=Math.PI/180,XV=e=>e*180/Math.PI,Bl=(e,t,r,n)=>({x:e+Math.cos(-q1*n)*r,y:t+Math.sin(-q1*n)*r}),YV=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},JV=(e,t)=>{var{x:r,y:n}=e,{x:o,y:l}=t;return Math.sqrt((r-o)**2+(n-l)**2)},QV=(e,t)=>{var{x:r,y:n}=e,{cx:o,cy:l}=t,h=JV({x:r,y:n},{x:o,y:l});if(h<=0)return{radius:h,angle:0};var u=(r-o)/h,v=Math.acos(u);return n>l&&(v=2*Math.PI-v),{radius:h,angle:XV(v),angleInRadian:v}},eq=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),o=Math.floor(r/360),l=Math.min(n,o);return{startAngle:t-l*360,endAngle:r-l*360}},tq=(e,t)=>{var{startAngle:r,endAngle:n}=t,o=Math.floor(r/360),l=Math.floor(n/360),h=Math.min(o,l);return e+h*360},rq=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:o,angle:l}=QV({x:r,y:n},t),{innerRadius:h,outerRadius:u}=t;if(o<h||o>u||o===0)return null;var{startAngle:v,endAngle:x}=eq(t),A=l,C;if(v<=x){for(;A>x;)A-=360;for(;A<v;)A+=360;C=A>=v&&A<=x}else{for(;A>v;)A-=360;for(;A<x;)A+=360;C=A>=x&&A<=v}return C?WT(WT({},t),{},{radius:o,angle:tq(A,t)}):null};function Sz(e){var{cx:t,cy:r,radius:n,startAngle:o,endAngle:l}=e,h=Bl(t,r,n,o),u=Bl(t,r,n,l);return{points:[h,u],cx:t,cy:r,radius:n,startAngle:o,endAngle:l}}function SS(){return SS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SS.apply(null,arguments)}var nq=(e,t)=>{var r=Vc(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Qx=e=>{var{cx:t,cy:r,radius:n,angle:o,sign:l,isExternal:h,cornerRadius:u,cornerIsExternal:v}=e,x=u*(h?1:-1)+n,A=Math.asin(u/x)/q1,C=v?o:o+l*A,P=Bl(t,r,x,C),O=Bl(t,r,n,C),U=v?o-l*A:o,W=Bl(t,r,x*Math.cos(A*q1),U);return{center:P,circleTangency:O,lineTangency:W,theta:A}},Ez=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:o,startAngle:l,endAngle:h}=e,u=nq(l,h),v=l+u,x=Bl(t,r,o,l),A=Bl(t,r,o,v),C="M ".concat(x.x,",").concat(x.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(l>v),`,
    `).concat(A.x,",").concat(A.y,`
  `);if(n>0){var P=Bl(t,r,n,l),O=Bl(t,r,n,v);C+="L ".concat(O.x,",").concat(O.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(l<=v),`,
            `).concat(P.x,",").concat(P.y," Z")}else C+="L ".concat(t,",").concat(r," Z");return C},iq=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:o,cornerRadius:l,forceCornerRadius:h,cornerIsExternal:u,startAngle:v,endAngle:x}=e,A=Vc(x-v),{circleTangency:C,lineTangency:P,theta:O}=Qx({cx:t,cy:r,radius:o,angle:v,sign:A,cornerRadius:l,cornerIsExternal:u}),{circleTangency:U,lineTangency:W,theta:G}=Qx({cx:t,cy:r,radius:o,angle:x,sign:-A,cornerRadius:l,cornerIsExternal:u}),X=u?Math.abs(v-x):Math.abs(v-x)-O-G;if(X<0)return h?"M ".concat(P.x,",").concat(P.y,`
        a`).concat(l,",").concat(l,",0,0,1,").concat(l*2,`,0
        a`).concat(l,",").concat(l,",0,0,1,").concat(-l*2,`,0
      `):Ez({cx:t,cy:r,innerRadius:n,outerRadius:o,startAngle:v,endAngle:x});var ae="M ".concat(P.x,",").concat(P.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(A<0),",").concat(C.x,",").concat(C.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(X>180),",").concat(+(A<0),",").concat(U.x,",").concat(U.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(A<0),",").concat(W.x,",").concat(W.y,`
  `);if(n>0){var{circleTangency:ne,lineTangency:ue,theta:Q}=Qx({cx:t,cy:r,radius:n,angle:v,sign:A,isExternal:!0,cornerRadius:l,cornerIsExternal:u}),{circleTangency:de,lineTangency:he,theta:Y}=Qx({cx:t,cy:r,radius:n,angle:x,sign:-A,isExternal:!0,cornerRadius:l,cornerIsExternal:u}),ie=u?Math.abs(v-x):Math.abs(v-x)-Q-Y;if(ie<0&&l===0)return"".concat(ae,"L").concat(t,",").concat(r,"Z");ae+="L".concat(he.x,",").concat(he.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(A<0),",").concat(de.x,",").concat(de.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(ie>180),",").concat(+(A>0),",").concat(ne.x,",").concat(ne.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(A<0),",").concat(ue.x,",").concat(ue.y,"Z")}else ae+="L".concat(t,",").concat(r,"Z");return ae},aq={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Az=e=>{var t=gl(e,aq),{cx:r,cy:n,innerRadius:o,outerRadius:l,cornerRadius:h,forceCornerRadius:u,cornerIsExternal:v,startAngle:x,endAngle:A,className:C}=t;if(l<o||x===A)return null;var P=_a("recharts-sector",C),O=l-o,U=Th(h,O,0,!0),W;return U>0&&Math.abs(x-A)<360?W=iq({cx:r,cy:n,innerRadius:o,outerRadius:l,cornerRadius:Math.min(U,O/2),forceCornerRadius:u,cornerIsExternal:v,startAngle:x,endAngle:A}):W=Ez({cx:r,cy:n,innerRadius:o,outerRadius:l,startAngle:x,endAngle:A}),N.createElement("path",SS({},iu(t),{className:P,d:W}))};function oq(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(uM(t)){if(e==="centric"){var{cx:n,cy:o,innerRadius:l,outerRadius:h,angle:u}=t,v=Bl(n,o,l,u),x=Bl(n,o,h,u);return[{x:v.x,y:v.y},{x:x.x,y:x.y}]}return Sz(t)}}var ew={},tw={},rw={},HT;function sq(){return HT||(HT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bM();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(rw)),rw}var ZT;function lq(){return ZT||(ZT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sq();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(tw)),tw}var KT;function uq(){return KT||(KT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wM(),r=lq();function n(o,l,h){h&&typeof h!="number"&&t.isIterateeCall(o,l,h)&&(l=h=void 0),o=r.toFinite(o),l===void 0?(l=o,o=0):l=r.toFinite(l),h=h===void 0?o<l?1:-1:r.toFinite(h);const u=Math.max(Math.ceil((l-o)/(h||1)),0),v=new Array(u);for(let x=0;x<u;x++)v[x]=o,o+=h;return v}e.range=n})(ew)),ew}var nw,XT;function cq(){return XT||(XT=1,nw=uq().range),nw}var dq=cq();const kz=Fl(dq);function tm(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function hq(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function XE(e){let t,r,n;e.length!==2?(t=tm,r=(u,v)=>tm(e(u),v),n=(u,v)=>e(u)-v):(t=e===tm||e===hq?e:fq,r=e,n=e);function o(u,v,x=0,A=u.length){if(x<A){if(t(v,v)!==0)return A;do{const C=x+A>>>1;r(u[C],v)<0?x=C+1:A=C}while(x<A)}return x}function l(u,v,x=0,A=u.length){if(x<A){if(t(v,v)!==0)return A;do{const C=x+A>>>1;r(u[C],v)<=0?x=C+1:A=C}while(x<A)}return x}function h(u,v,x=0,A=u.length){const C=o(u,v,x,A-1);return C>x&&n(u[C-1],v)>-n(u[C],v)?C-1:C}return{left:o,center:h,right:l}}function fq(){return 0}function Cz(e){return e===null?NaN:+e}function*pq(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const gq=XE(tm),hx=gq.right;XE(Cz).center;class YT extends Map{constructor(t,r=vq){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,o]of t)this.set(n,o)}get(t){return super.get(JT(this,t))}has(t){return super.has(JT(this,t))}set(t,r){return super.set(mq(this,t),r)}delete(t){return super.delete(yq(this,t))}}function JT({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function mq({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function yq({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function vq(e){return e!==null&&typeof e=="object"?e.valueOf():e}function xq(e=tm){if(e===tm)return Tz;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function Tz(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const _q=Math.sqrt(50),bq=Math.sqrt(10),wq=Math.sqrt(2);function W1(e,t,r){const n=(t-e)/Math.max(0,r),o=Math.floor(Math.log10(n)),l=n/Math.pow(10,o),h=l>=_q?10:l>=bq?5:l>=wq?2:1;let u,v,x;return o<0?(x=Math.pow(10,-o)/h,u=Math.round(e*x),v=Math.round(t*x),u/x<e&&++u,v/x>t&&--v,x=-x):(x=Math.pow(10,o)*h,u=Math.round(e/x),v=Math.round(t/x),u*x<e&&++u,v*x>t&&--v),v<u&&.5<=r&&r<2?W1(e,t,r*2):[u,v,x]}function ES(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[o,l,h]=n?W1(t,e,r):W1(e,t,r);if(!(l>=o))return[];const u=l-o+1,v=new Array(u);if(n)if(h<0)for(let x=0;x<u;++x)v[x]=(l-x)/-h;else for(let x=0;x<u;++x)v[x]=(l-x)*h;else if(h<0)for(let x=0;x<u;++x)v[x]=(o+x)/-h;else for(let x=0;x<u;++x)v[x]=(o+x)*h;return v}function AS(e,t,r){return t=+t,e=+e,r=+r,W1(e,t,r)[2]}function kS(e,t,r){t=+t,e=+e,r=+r;const n=t<e,o=n?AS(t,e,r):AS(e,t,r);return(n?-1:1)*(o<0?1/-o:o)}function QT(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function e3(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Dz(e,t,r=0,n=1/0,o){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(o=o===void 0?Tz:xq(o);n>r;){if(n-r>600){const v=n-r+1,x=t-r+1,A=Math.log(v),C=.5*Math.exp(2*A/3),P=.5*Math.sqrt(A*C*(v-C)/v)*(x-v/2<0?-1:1),O=Math.max(r,Math.floor(t-x*C/v+P)),U=Math.min(n,Math.floor(t+(v-x)*C/v+P));Dz(e,t,O,U,o)}const l=e[t];let h=r,u=n;for(mv(e,r,t),o(e[n],l)>0&&mv(e,r,n);h<u;){for(mv(e,h,u),++h,--u;o(e[h],l)<0;)++h;for(;o(e[u],l)>0;)--u}o(e[r],l)===0?mv(e,r,u):(++u,mv(e,u,n)),u<=t&&(r=u+1),t<=u&&(n=u-1)}return e}function mv(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Sq(e,t,r){if(e=Float64Array.from(pq(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return e3(e);if(t>=1)return QT(e);var n,o=(n-1)*t,l=Math.floor(o),h=QT(Dz(e,l).subarray(0,l+1)),u=e3(e.subarray(l+1));return h+(u-h)*(o-l)}}function Eq(e,t,r=Cz){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,o=(n-1)*t,l=Math.floor(o),h=+r(e[l],l,e),u=+r(e[l+1],l+1,e);return h+(u-h)*(o-l)}}function Aq(e,t,r){e=+e,t=+t,r=(o=arguments.length)<2?(t=e,e=0,1):o<3?1:+r;for(var n=-1,o=Math.max(0,Math.ceil((t-e)/r))|0,l=new Array(o);++n<o;)l[n]=e+n*r;return l}function Fd(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function rg(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const CS=Symbol("implicit");function YE(){var e=new YT,t=[],r=[],n=CS;function o(l){let h=e.get(l);if(h===void 0){if(n!==CS)return n;e.set(l,h=t.push(l)-1)}return r[h%r.length]}return o.domain=function(l){if(!arguments.length)return t.slice();t=[],e=new YT;for(const h of l)e.has(h)||e.set(h,t.push(h)-1);return o},o.range=function(l){return arguments.length?(r=Array.from(l),o):r.slice()},o.unknown=function(l){return arguments.length?(n=l,o):n},o.copy=function(){return YE(t,r).unknown(n)},Fd.apply(o,arguments),o}function JE(){var e=YE().unknown(void 0),t=e.domain,r=e.range,n=0,o=1,l,h,u=!1,v=0,x=0,A=.5;delete e.unknown;function C(){var P=t().length,O=o<n,U=O?o:n,W=O?n:o;l=(W-U)/Math.max(1,P-v+x*2),u&&(l=Math.floor(l)),U+=(W-U-l*(P-v))*A,h=l*(1-v),u&&(U=Math.round(U),h=Math.round(h));var G=Aq(P).map(function(X){return U+l*X});return r(O?G.reverse():G)}return e.domain=function(P){return arguments.length?(t(P),C()):t()},e.range=function(P){return arguments.length?([n,o]=P,n=+n,o=+o,C()):[n,o]},e.rangeRound=function(P){return[n,o]=P,n=+n,o=+o,u=!0,C()},e.bandwidth=function(){return h},e.step=function(){return l},e.round=function(P){return arguments.length?(u=!!P,C()):u},e.padding=function(P){return arguments.length?(v=Math.min(1,x=+P),C()):v},e.paddingInner=function(P){return arguments.length?(v=Math.min(1,P),C()):v},e.paddingOuter=function(P){return arguments.length?(x=+P,C()):x},e.align=function(P){return arguments.length?(A=Math.max(0,Math.min(1,P)),C()):A},e.copy=function(){return JE(t(),[n,o]).round(u).paddingInner(v).paddingOuter(x).align(A)},Fd.apply(C(),arguments)}function Mz(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Mz(t())},e}function kq(){return Mz(JE.apply(null,arguments).paddingInner(1))}function QE(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function zz(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function fx(){}var Uv=.7,H1=1/Uv,h0="\\s*([+-]?\\d+)\\s*",Vv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Tf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Cq=/^#([0-9a-f]{3,8})$/,Tq=new RegExp(`^rgb\\(${h0},${h0},${h0}\\)$`),Dq=new RegExp(`^rgb\\(${Tf},${Tf},${Tf}\\)$`),Mq=new RegExp(`^rgba\\(${h0},${h0},${h0},${Vv}\\)$`),zq=new RegExp(`^rgba\\(${Tf},${Tf},${Tf},${Vv}\\)$`),Pq=new RegExp(`^hsl\\(${Vv},${Tf},${Tf}\\)$`),Lq=new RegExp(`^hsla\\(${Vv},${Tf},${Tf},${Vv}\\)$`),t3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};QE(fx,qv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:r3,formatHex:r3,formatHex8:Iq,formatHsl:Oq,formatRgb:n3,toString:n3});function r3(){return this.rgb().formatHex()}function Iq(){return this.rgb().formatHex8()}function Oq(){return Pz(this).formatHsl()}function n3(){return this.rgb().formatRgb()}function qv(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Cq.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?i3(t):r===3?new uc(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?e1(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?e1(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Tq.exec(e))?new uc(t[1],t[2],t[3],1):(t=Dq.exec(e))?new uc(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Mq.exec(e))?e1(t[1],t[2],t[3],t[4]):(t=zq.exec(e))?e1(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Pq.exec(e))?s3(t[1],t[2]/100,t[3]/100,1):(t=Lq.exec(e))?s3(t[1],t[2]/100,t[3]/100,t[4]):t3.hasOwnProperty(e)?i3(t3[e]):e==="transparent"?new uc(NaN,NaN,NaN,0):null}function i3(e){return new uc(e>>16&255,e>>8&255,e&255,1)}function e1(e,t,r,n){return n<=0&&(e=t=r=NaN),new uc(e,t,r,n)}function jq(e){return e instanceof fx||(e=qv(e)),e?(e=e.rgb(),new uc(e.r,e.g,e.b,e.opacity)):new uc}function TS(e,t,r,n){return arguments.length===1?jq(e):new uc(e,t,r,n??1)}function uc(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}QE(uc,TS,zz(fx,{brighter(e){return e=e==null?H1:Math.pow(H1,e),new uc(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Uv:Math.pow(Uv,e),new uc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new uc(ay(this.r),ay(this.g),ay(this.b),Z1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:a3,formatHex:a3,formatHex8:Rq,formatRgb:o3,toString:o3}));function a3(){return`#${ry(this.r)}${ry(this.g)}${ry(this.b)}`}function Rq(){return`#${ry(this.r)}${ry(this.g)}${ry(this.b)}${ry((isNaN(this.opacity)?1:this.opacity)*255)}`}function o3(){const e=Z1(this.opacity);return`${e===1?"rgb(":"rgba("}${ay(this.r)}, ${ay(this.g)}, ${ay(this.b)}${e===1?")":`, ${e})`}`}function Z1(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ay(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ry(e){return e=ay(e),(e<16?"0":"")+e.toString(16)}function s3(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ah(e,t,r,n)}function Pz(e){if(e instanceof Ah)return new Ah(e.h,e.s,e.l,e.opacity);if(e instanceof fx||(e=qv(e)),!e)return new Ah;if(e instanceof Ah)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,o=Math.min(t,r,n),l=Math.max(t,r,n),h=NaN,u=l-o,v=(l+o)/2;return u?(t===l?h=(r-n)/u+(r<n)*6:r===l?h=(n-t)/u+2:h=(t-r)/u+4,u/=v<.5?l+o:2-l-o,h*=60):u=v>0&&v<1?0:h,new Ah(h,u,v,e.opacity)}function Nq(e,t,r,n){return arguments.length===1?Pz(e):new Ah(e,t,r,n??1)}function Ah(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}QE(Ah,Nq,zz(fx,{brighter(e){return e=e==null?H1:Math.pow(H1,e),new Ah(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Uv:Math.pow(Uv,e),new Ah(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,o=2*r-n;return new uc(iw(e>=240?e-240:e+120,o,n),iw(e,o,n),iw(e<120?e+240:e-120,o,n),this.opacity)},clamp(){return new Ah(l3(this.h),t1(this.s),t1(this.l),Z1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Z1(this.opacity);return`${e===1?"hsl(":"hsla("}${l3(this.h)}, ${t1(this.s)*100}%, ${t1(this.l)*100}%${e===1?")":`, ${e})`}`}}));function l3(e){return e=(e||0)%360,e<0?e+360:e}function t1(e){return Math.max(0,Math.min(1,e||0))}function iw(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const e5=e=>()=>e;function Bq(e,t){return function(r){return e+r*t}}function Fq(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function $q(e){return(e=+e)==1?Lz:function(t,r){return r-t?Fq(t,r,e):e5(isNaN(t)?r:t)}}function Lz(e,t){var r=t-e;return r?Bq(e,r):e5(isNaN(e)?t:e)}const u3=(function e(t){var r=$q(t);function n(o,l){var h=r((o=TS(o)).r,(l=TS(l)).r),u=r(o.g,l.g),v=r(o.b,l.b),x=Lz(o.opacity,l.opacity);return function(A){return o.r=h(A),o.g=u(A),o.b=v(A),o.opacity=x(A),o+""}}return n.gamma=e,n})(1);function Gq(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),o;return function(l){for(o=0;o<r;++o)n[o]=e[o]*(1-l)+t[o]*l;return n}}function Uq(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Vq(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,o=new Array(n),l=new Array(r),h;for(h=0;h<n;++h)o[h]=R0(e[h],t[h]);for(;h<r;++h)l[h]=t[h];return function(u){for(h=0;h<n;++h)l[h]=o[h](u);return l}}function qq(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function K1(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Wq(e,t){var r={},n={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?r[o]=R0(e[o],t[o]):n[o]=t[o];return function(l){for(o in r)n[o]=r[o](l);return n}}var DS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,aw=new RegExp(DS.source,"g");function Hq(e){return function(){return e}}function Zq(e){return function(t){return e(t)+""}}function Kq(e,t){var r=DS.lastIndex=aw.lastIndex=0,n,o,l,h=-1,u=[],v=[];for(e=e+"",t=t+"";(n=DS.exec(e))&&(o=aw.exec(t));)(l=o.index)>r&&(l=t.slice(r,l),u[h]?u[h]+=l:u[++h]=l),(n=n[0])===(o=o[0])?u[h]?u[h]+=o:u[++h]=o:(u[++h]=null,v.push({i:h,x:K1(n,o)})),r=aw.lastIndex;return r<t.length&&(l=t.slice(r),u[h]?u[h]+=l:u[++h]=l),u.length<2?v[0]?Zq(v[0].x):Hq(t):(t=v.length,function(x){for(var A=0,C;A<t;++A)u[(C=v[A]).i]=C.x(x);return u.join("")})}function R0(e,t){var r=typeof t,n;return t==null||r==="boolean"?e5(t):(r==="number"?K1:r==="string"?(n=qv(t))?(t=n,u3):Kq:t instanceof qv?u3:t instanceof Date?qq:Uq(t)?Gq:Array.isArray(t)?Vq:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Wq:K1)(e,t)}function t5(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Xq(e,t){t===void 0&&(t=e,e=R0);for(var r=0,n=t.length-1,o=t[0],l=new Array(n<0?0:n);r<n;)l[r]=e(o,o=t[++r]);return function(h){var u=Math.max(0,Math.min(n-1,Math.floor(h*=n)));return l[u](h-u)}}function Yq(e){return function(){return e}}function X1(e){return+e}var c3=[0,1];function Ou(e){return e}function MS(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Yq(isNaN(t)?NaN:.5)}function Jq(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function Qq(e,t,r){var n=e[0],o=e[1],l=t[0],h=t[1];return o<n?(n=MS(o,n),l=r(h,l)):(n=MS(n,o),l=r(l,h)),function(u){return l(n(u))}}function eW(e,t,r){var n=Math.min(e.length,t.length)-1,o=new Array(n),l=new Array(n),h=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++h<n;)o[h]=MS(e[h],e[h+1]),l[h]=r(t[h],t[h+1]);return function(u){var v=hx(e,u,1,n)-1;return l[v](o[v](u))}}function px(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function K_(){var e=c3,t=c3,r=R0,n,o,l,h=Ou,u,v,x;function A(){var P=Math.min(e.length,t.length);return h!==Ou&&(h=Jq(e[0],e[P-1])),u=P>2?eW:Qq,v=x=null,C}function C(P){return P==null||isNaN(P=+P)?l:(v||(v=u(e.map(n),t,r)))(n(h(P)))}return C.invert=function(P){return h(o((x||(x=u(t,e.map(n),K1)))(P)))},C.domain=function(P){return arguments.length?(e=Array.from(P,X1),A()):e.slice()},C.range=function(P){return arguments.length?(t=Array.from(P),A()):t.slice()},C.rangeRound=function(P){return t=Array.from(P),r=t5,A()},C.clamp=function(P){return arguments.length?(h=P?!0:Ou,A()):h!==Ou},C.interpolate=function(P){return arguments.length?(r=P,A()):r},C.unknown=function(P){return arguments.length?(l=P,C):l},function(P,O){return n=P,o=O,A()}}function r5(){return K_()(Ou,Ou)}function tW(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Y1(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function w0(e){return e=Y1(Math.abs(e)),e?e[1]:NaN}function rW(e,t){return function(r,n){for(var o=r.length,l=[],h=0,u=e[0],v=0;o>0&&u>0&&(v+u+1>n&&(u=Math.max(1,n-v)),l.push(r.substring(o-=u,o+u)),!((v+=u+1)>n));)u=e[h=(h+1)%e.length];return l.reverse().join(t)}}function nW(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var iW=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Wv(e){if(!(t=iW.exec(e)))throw new Error("invalid format: "+e);var t;return new n5({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Wv.prototype=n5.prototype;function n5(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}n5.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function aW(e){e:for(var t=e.length,r=1,n=-1,o;r<t;++r)switch(e[r]){case".":n=o=r;break;case"0":n===0&&(n=r),o=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(o+1):e}var Iz;function oW(e,t){var r=Y1(e,t);if(!r)return e+"";var n=r[0],o=r[1],l=o-(Iz=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,h=n.length;return l===h?n:l>h?n+new Array(l-h+1).join("0"):l>0?n.slice(0,l)+"."+n.slice(l):"0."+new Array(1-l).join("0")+Y1(e,Math.max(0,t+l-1))[0]}function d3(e,t){var r=Y1(e,t);if(!r)return e+"";var n=r[0],o=r[1];return o<0?"0."+new Array(-o).join("0")+n:n.length>o+1?n.slice(0,o+1)+"."+n.slice(o+1):n+new Array(o-n.length+2).join("0")}const h3={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:tW,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>d3(e*100,t),r:d3,s:oW,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function f3(e){return e}var p3=Array.prototype.map,g3=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function sW(e){var t=e.grouping===void 0||e.thousands===void 0?f3:rW(p3.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",o=e.decimal===void 0?".":e.decimal+"",l=e.numerals===void 0?f3:nW(p3.call(e.numerals,String)),h=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",v=e.nan===void 0?"NaN":e.nan+"";function x(C){C=Wv(C);var P=C.fill,O=C.align,U=C.sign,W=C.symbol,G=C.zero,X=C.width,ae=C.comma,ne=C.precision,ue=C.trim,Q=C.type;Q==="n"?(ae=!0,Q="g"):h3[Q]||(ne===void 0&&(ne=12),ue=!0,Q="g"),(G||P==="0"&&O==="=")&&(G=!0,P="0",O="=");var de=W==="$"?r:W==="#"&&/[boxX]/.test(Q)?"0"+Q.toLowerCase():"",he=W==="$"?n:/[%p]/.test(Q)?h:"",Y=h3[Q],ie=/[defgprs%]/.test(Q);ne=ne===void 0?6:/[gprs]/.test(Q)?Math.max(1,Math.min(21,ne)):Math.max(0,Math.min(20,ne));function Ce(_e){var Me=de,me=he,Ke,Re,pe;if(Q==="c")me=Y(_e)+me,_e="";else{_e=+_e;var ge=_e<0||1/_e<0;if(_e=isNaN(_e)?v:Y(Math.abs(_e),ne),ue&&(_e=aW(_e)),ge&&+_e==0&&U!=="+"&&(ge=!1),Me=(ge?U==="("?U:u:U==="-"||U==="("?"":U)+Me,me=(Q==="s"?g3[8+Iz/3]:"")+me+(ge&&U==="("?")":""),ie){for(Ke=-1,Re=_e.length;++Ke<Re;)if(pe=_e.charCodeAt(Ke),48>pe||pe>57){me=(pe===46?o+_e.slice(Ke+1):_e.slice(Ke))+me,_e=_e.slice(0,Ke);break}}}ae&&!G&&(_e=t(_e,1/0));var ze=Me.length+_e.length+me.length,Pe=ze<X?new Array(X-ze+1).join(P):"";switch(ae&&G&&(_e=t(Pe+_e,Pe.length?X-me.length:1/0),Pe=""),O){case"<":_e=Me+_e+me+Pe;break;case"=":_e=Me+Pe+_e+me;break;case"^":_e=Pe.slice(0,ze=Pe.length>>1)+Me+_e+me+Pe.slice(ze);break;default:_e=Pe+Me+_e+me;break}return l(_e)}return Ce.toString=function(){return C+""},Ce}function A(C,P){var O=x((C=Wv(C),C.type="f",C)),U=Math.max(-8,Math.min(8,Math.floor(w0(P)/3)))*3,W=Math.pow(10,-U),G=g3[8+U/3];return function(X){return O(W*X)+G}}return{format:x,formatPrefix:A}}var r1,i5,Oz;lW({thousands:",",grouping:[3],currency:["$",""]});function lW(e){return r1=sW(e),i5=r1.format,Oz=r1.formatPrefix,r1}function uW(e){return Math.max(0,-w0(Math.abs(e)))}function cW(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(w0(t)/3)))*3-w0(Math.abs(e)))}function dW(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,w0(t)-w0(e))+1}function jz(e,t,r,n){var o=kS(e,t,r),l;switch(n=Wv(n??",f"),n.type){case"s":{var h=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(l=cW(o,h))&&(n.precision=l),Oz(n,h)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(l=dW(o,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=l-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(l=uW(o))&&(n.precision=l-(n.type==="%")*2);break}}return i5(n)}function om(e){var t=e.domain;return e.ticks=function(r){var n=t();return ES(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var o=t();return jz(o[0],o[o.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),o=0,l=n.length-1,h=n[o],u=n[l],v,x,A=10;for(u<h&&(x=h,h=u,u=x,x=o,o=l,l=x);A-- >0;){if(x=AS(h,u,r),x===v)return n[o]=h,n[l]=u,t(n);if(x>0)h=Math.floor(h/x)*x,u=Math.ceil(u/x)*x;else if(x<0)h=Math.ceil(h*x)/x,u=Math.floor(u*x)/x;else break;v=x}return e},e}function Rz(){var e=r5();return e.copy=function(){return px(e,Rz())},Fd.apply(e,arguments),om(e)}function Nz(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,X1),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return Nz(e).unknown(t)},e=arguments.length?Array.from(e,X1):[0,1],om(r)}function Bz(e,t){e=e.slice();var r=0,n=e.length-1,o=e[r],l=e[n],h;return l<o&&(h=r,r=n,n=h,h=o,o=l,l=h),e[r]=t.floor(o),e[n]=t.ceil(l),e}function m3(e){return Math.log(e)}function y3(e){return Math.exp(e)}function hW(e){return-Math.log(-e)}function fW(e){return-Math.exp(-e)}function pW(e){return isFinite(e)?+("1e"+e):e<0?0:e}function gW(e){return e===10?pW:e===Math.E?Math.exp:t=>Math.pow(e,t)}function mW(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function v3(e){return(t,r)=>-e(-t,r)}function a5(e){const t=e(m3,y3),r=t.domain;let n=10,o,l;function h(){return o=mW(n),l=gW(n),r()[0]<0?(o=v3(o),l=v3(l),e(hW,fW)):e(m3,y3),t}return t.base=function(u){return arguments.length?(n=+u,h()):n},t.domain=function(u){return arguments.length?(r(u),h()):r()},t.ticks=u=>{const v=r();let x=v[0],A=v[v.length-1];const C=A<x;C&&([x,A]=[A,x]);let P=o(x),O=o(A),U,W;const G=u==null?10:+u;let X=[];if(!(n%1)&&O-P<G){if(P=Math.floor(P),O=Math.ceil(O),x>0){for(;P<=O;++P)for(U=1;U<n;++U)if(W=P<0?U/l(-P):U*l(P),!(W<x)){if(W>A)break;X.push(W)}}else for(;P<=O;++P)for(U=n-1;U>=1;--U)if(W=P>0?U/l(-P):U*l(P),!(W<x)){if(W>A)break;X.push(W)}X.length*2<G&&(X=ES(x,A,G))}else X=ES(P,O,Math.min(O-P,G)).map(l);return C?X.reverse():X},t.tickFormat=(u,v)=>{if(u==null&&(u=10),v==null&&(v=n===10?"s":","),typeof v!="function"&&(!(n%1)&&(v=Wv(v)).precision==null&&(v.trim=!0),v=i5(v)),u===1/0)return v;const x=Math.max(1,n*u/t.ticks().length);return A=>{let C=A/l(Math.round(o(A)));return C*n<n-.5&&(C*=n),C<=x?v(A):""}},t.nice=()=>r(Bz(r(),{floor:u=>l(Math.floor(o(u))),ceil:u=>l(Math.ceil(o(u)))})),t}function Fz(){const e=a5(K_()).domain([1,10]);return e.copy=()=>px(e,Fz()).base(e.base()),Fd.apply(e,arguments),e}function x3(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function _3(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function o5(e){var t=1,r=e(x3(t),_3(t));return r.constant=function(n){return arguments.length?e(x3(t=+n),_3(t)):t},om(r)}function $z(){var e=o5(K_());return e.copy=function(){return px(e,$z()).constant(e.constant())},Fd.apply(e,arguments)}function b3(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function yW(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function vW(e){return e<0?-e*e:e*e}function s5(e){var t=e(Ou,Ou),r=1;function n(){return r===1?e(Ou,Ou):r===.5?e(yW,vW):e(b3(r),b3(1/r))}return t.exponent=function(o){return arguments.length?(r=+o,n()):r},om(t)}function l5(){var e=s5(K_());return e.copy=function(){return px(e,l5()).exponent(e.exponent())},Fd.apply(e,arguments),e}function xW(){return l5.apply(null,arguments).exponent(.5)}function w3(e){return Math.sign(e)*e*e}function _W(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Gz(){var e=r5(),t=[0,1],r=!1,n;function o(l){var h=_W(e(l));return isNaN(h)?n:r?Math.round(h):h}return o.invert=function(l){return e.invert(w3(l))},o.domain=function(l){return arguments.length?(e.domain(l),o):e.domain()},o.range=function(l){return arguments.length?(e.range((t=Array.from(l,X1)).map(w3)),o):t.slice()},o.rangeRound=function(l){return o.range(l).round(!0)},o.round=function(l){return arguments.length?(r=!!l,o):r},o.clamp=function(l){return arguments.length?(e.clamp(l),o):e.clamp()},o.unknown=function(l){return arguments.length?(n=l,o):n},o.copy=function(){return Gz(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Fd.apply(o,arguments),om(o)}function Uz(){var e=[],t=[],r=[],n;function o(){var h=0,u=Math.max(1,t.length);for(r=new Array(u-1);++h<u;)r[h-1]=Eq(e,h/u);return l}function l(h){return h==null||isNaN(h=+h)?n:t[hx(r,h)]}return l.invertExtent=function(h){var u=t.indexOf(h);return u<0?[NaN,NaN]:[u>0?r[u-1]:e[0],u<r.length?r[u]:e[e.length-1]]},l.domain=function(h){if(!arguments.length)return e.slice();e=[];for(let u of h)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(tm),o()},l.range=function(h){return arguments.length?(t=Array.from(h),o()):t.slice()},l.unknown=function(h){return arguments.length?(n=h,l):n},l.quantiles=function(){return r.slice()},l.copy=function(){return Uz().domain(e).range(t).unknown(n)},Fd.apply(l,arguments)}function Vz(){var e=0,t=1,r=1,n=[.5],o=[0,1],l;function h(v){return v!=null&&v<=v?o[hx(n,v,0,r)]:l}function u(){var v=-1;for(n=new Array(r);++v<r;)n[v]=((v+1)*t-(v-r)*e)/(r+1);return h}return h.domain=function(v){return arguments.length?([e,t]=v,e=+e,t=+t,u()):[e,t]},h.range=function(v){return arguments.length?(r=(o=Array.from(v)).length-1,u()):o.slice()},h.invertExtent=function(v){var x=o.indexOf(v);return x<0?[NaN,NaN]:x<1?[e,n[0]]:x>=r?[n[r-1],t]:[n[x-1],n[x]]},h.unknown=function(v){return arguments.length&&(l=v),h},h.thresholds=function(){return n.slice()},h.copy=function(){return Vz().domain([e,t]).range(o).unknown(l)},Fd.apply(om(h),arguments)}function qz(){var e=[.5],t=[0,1],r,n=1;function o(l){return l!=null&&l<=l?t[hx(e,l,0,n)]:r}return o.domain=function(l){return arguments.length?(e=Array.from(l),n=Math.min(e.length,t.length-1),o):e.slice()},o.range=function(l){return arguments.length?(t=Array.from(l),n=Math.min(e.length,t.length-1),o):t.slice()},o.invertExtent=function(l){var h=t.indexOf(l);return[e[h-1],e[h]]},o.unknown=function(l){return arguments.length?(r=l,o):r},o.copy=function(){return qz().domain(e).range(t).unknown(r)},Fd.apply(o,arguments)}const ow=new Date,sw=new Date;function Us(e,t,r,n){function o(l){return e(l=arguments.length===0?new Date:new Date(+l)),l}return o.floor=l=>(e(l=new Date(+l)),l),o.ceil=l=>(e(l=new Date(l-1)),t(l,1),e(l),l),o.round=l=>{const h=o(l),u=o.ceil(l);return l-h<u-l?h:u},o.offset=(l,h)=>(t(l=new Date(+l),h==null?1:Math.floor(h)),l),o.range=(l,h,u)=>{const v=[];if(l=o.ceil(l),u=u==null?1:Math.floor(u),!(l<h)||!(u>0))return v;let x;do v.push(x=new Date(+l)),t(l,u),e(l);while(x<l&&l<h);return v},o.filter=l=>Us(h=>{if(h>=h)for(;e(h),!l(h);)h.setTime(h-1)},(h,u)=>{if(h>=h)if(u<0)for(;++u<=0;)for(;t(h,-1),!l(h););else for(;--u>=0;)for(;t(h,1),!l(h););}),r&&(o.count=(l,h)=>(ow.setTime(+l),sw.setTime(+h),e(ow),e(sw),Math.floor(r(ow,sw))),o.every=l=>(l=Math.floor(l),!isFinite(l)||!(l>0)?null:l>1?o.filter(n?h=>n(h)%l===0:h=>o.count(0,h)%l===0):o)),o}const J1=Us(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);J1.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Us(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):J1);J1.range;const Np=1e3,Dd=Np*60,Bp=Dd*60,Hp=Bp*24,u5=Hp*7,S3=Hp*30,lw=Hp*365,ny=Us(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Np)},(e,t)=>(t-e)/Np,e=>e.getUTCSeconds());ny.range;const c5=Us(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Np)},(e,t)=>{e.setTime(+e+t*Dd)},(e,t)=>(t-e)/Dd,e=>e.getMinutes());c5.range;const d5=Us(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Dd)},(e,t)=>(t-e)/Dd,e=>e.getUTCMinutes());d5.range;const h5=Us(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Np-e.getMinutes()*Dd)},(e,t)=>{e.setTime(+e+t*Bp)},(e,t)=>(t-e)/Bp,e=>e.getHours());h5.range;const f5=Us(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Bp)},(e,t)=>(t-e)/Bp,e=>e.getUTCHours());f5.range;const gx=Us(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Dd)/Hp,e=>e.getDate()-1);gx.range;const X_=Us(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Hp,e=>e.getUTCDate()-1);X_.range;const Wz=Us(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Hp,e=>Math.floor(e/Hp));Wz.range;function my(e){return Us(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Dd)/u5)}const Y_=my(0),Q1=my(1),bW=my(2),wW=my(3),S0=my(4),SW=my(5),EW=my(6);Y_.range;Q1.range;bW.range;wW.range;S0.range;SW.range;EW.range;function yy(e){return Us(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/u5)}const J_=yy(0),e_=yy(1),AW=yy(2),kW=yy(3),E0=yy(4),CW=yy(5),TW=yy(6);J_.range;e_.range;AW.range;kW.range;E0.range;CW.range;TW.range;const p5=Us(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());p5.range;const g5=Us(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());g5.range;const Zp=Us(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Zp.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Us(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Zp.range;const Kp=Us(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Kp.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Us(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Kp.range;function Hz(e,t,r,n,o,l){const h=[[ny,1,Np],[ny,5,5*Np],[ny,15,15*Np],[ny,30,30*Np],[l,1,Dd],[l,5,5*Dd],[l,15,15*Dd],[l,30,30*Dd],[o,1,Bp],[o,3,3*Bp],[o,6,6*Bp],[o,12,12*Bp],[n,1,Hp],[n,2,2*Hp],[r,1,u5],[t,1,S3],[t,3,3*S3],[e,1,lw]];function u(x,A,C){const P=A<x;P&&([x,A]=[A,x]);const O=C&&typeof C.range=="function"?C:v(x,A,C),U=O?O.range(x,+A+1):[];return P?U.reverse():U}function v(x,A,C){const P=Math.abs(A-x)/C,O=XE(([,,G])=>G).right(h,P);if(O===h.length)return e.every(kS(x/lw,A/lw,C));if(O===0)return J1.every(Math.max(kS(x,A,C),1));const[U,W]=h[P/h[O-1][2]<h[O][2]/P?O-1:O];return U.every(W)}return[u,v]}const[DW,MW]=Hz(Kp,g5,J_,Wz,f5,d5),[zW,PW]=Hz(Zp,p5,Y_,gx,h5,c5);function uw(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function cw(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function yv(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function LW(e){var t=e.dateTime,r=e.date,n=e.time,o=e.periods,l=e.days,h=e.shortDays,u=e.months,v=e.shortMonths,x=vv(o),A=xv(o),C=vv(l),P=xv(l),O=vv(h),U=xv(h),W=vv(u),G=xv(u),X=vv(v),ae=xv(v),ne={a:ge,A:ze,b:Pe,B:st,c:null,d:D3,e:D3,f:rH,g:hH,G:pH,H:QW,I:eH,j:tH,L:Zz,m:nH,M:iH,p:Ae,q:qe,Q:P3,s:L3,S:aH,u:oH,U:sH,V:lH,w:uH,W:cH,x:null,X:null,y:dH,Y:fH,Z:gH,"%":z3},ue={a:Ze,A:zt,b:Tt,B:rr,c:null,d:M3,e:M3,f:xH,g:DH,G:zH,H:mH,I:yH,j:vH,L:Xz,m:_H,M:bH,p:Xt,q:tr,Q:P3,s:L3,S:wH,u:SH,U:EH,V:AH,w:kH,W:CH,x:null,X:null,y:TH,Y:MH,Z:PH,"%":z3},Q={a:Ce,A:_e,b:Me,B:me,c:Ke,d:C3,e:C3,f:KW,g:k3,G:A3,H:T3,I:T3,j:qW,L:ZW,m:VW,M:WW,p:ie,q:UW,Q:YW,s:JW,S:HW,u:NW,U:BW,V:FW,w:RW,W:$W,x:Re,X:pe,y:k3,Y:A3,Z:GW,"%":XW};ne.x=de(r,ne),ne.X=de(n,ne),ne.c=de(t,ne),ue.x=de(r,ue),ue.X=de(n,ue),ue.c=de(t,ue);function de(at,Ht){return function(Mt){var pt=[],Pr=-1,Lt=0,Wt=at.length,ke,Xr,rn;for(Mt instanceof Date||(Mt=new Date(+Mt));++Pr<Wt;)at.charCodeAt(Pr)===37&&(pt.push(at.slice(Lt,Pr)),(Xr=E3[ke=at.charAt(++Pr)])!=null?ke=at.charAt(++Pr):Xr=ke==="e"?" ":"0",(rn=Ht[ke])&&(ke=rn(Mt,Xr)),pt.push(ke),Lt=Pr+1);return pt.push(at.slice(Lt,Pr)),pt.join("")}}function he(at,Ht){return function(Mt){var pt=yv(1900,void 0,1),Pr=Y(pt,at,Mt+="",0),Lt,Wt;if(Pr!=Mt.length)return null;if("Q"in pt)return new Date(pt.Q);if("s"in pt)return new Date(pt.s*1e3+("L"in pt?pt.L:0));if(Ht&&!("Z"in pt)&&(pt.Z=0),"p"in pt&&(pt.H=pt.H%12+pt.p*12),pt.m===void 0&&(pt.m="q"in pt?pt.q:0),"V"in pt){if(pt.V<1||pt.V>53)return null;"w"in pt||(pt.w=1),"Z"in pt?(Lt=cw(yv(pt.y,0,1)),Wt=Lt.getUTCDay(),Lt=Wt>4||Wt===0?e_.ceil(Lt):e_(Lt),Lt=X_.offset(Lt,(pt.V-1)*7),pt.y=Lt.getUTCFullYear(),pt.m=Lt.getUTCMonth(),pt.d=Lt.getUTCDate()+(pt.w+6)%7):(Lt=uw(yv(pt.y,0,1)),Wt=Lt.getDay(),Lt=Wt>4||Wt===0?Q1.ceil(Lt):Q1(Lt),Lt=gx.offset(Lt,(pt.V-1)*7),pt.y=Lt.getFullYear(),pt.m=Lt.getMonth(),pt.d=Lt.getDate()+(pt.w+6)%7)}else("W"in pt||"U"in pt)&&("w"in pt||(pt.w="u"in pt?pt.u%7:"W"in pt?1:0),Wt="Z"in pt?cw(yv(pt.y,0,1)).getUTCDay():uw(yv(pt.y,0,1)).getDay(),pt.m=0,pt.d="W"in pt?(pt.w+6)%7+pt.W*7-(Wt+5)%7:pt.w+pt.U*7-(Wt+6)%7);return"Z"in pt?(pt.H+=pt.Z/100|0,pt.M+=pt.Z%100,cw(pt)):uw(pt)}}function Y(at,Ht,Mt,pt){for(var Pr=0,Lt=Ht.length,Wt=Mt.length,ke,Xr;Pr<Lt;){if(pt>=Wt)return-1;if(ke=Ht.charCodeAt(Pr++),ke===37){if(ke=Ht.charAt(Pr++),Xr=Q[ke in E3?Ht.charAt(Pr++):ke],!Xr||(pt=Xr(at,Mt,pt))<0)return-1}else if(ke!=Mt.charCodeAt(pt++))return-1}return pt}function ie(at,Ht,Mt){var pt=x.exec(Ht.slice(Mt));return pt?(at.p=A.get(pt[0].toLowerCase()),Mt+pt[0].length):-1}function Ce(at,Ht,Mt){var pt=O.exec(Ht.slice(Mt));return pt?(at.w=U.get(pt[0].toLowerCase()),Mt+pt[0].length):-1}function _e(at,Ht,Mt){var pt=C.exec(Ht.slice(Mt));return pt?(at.w=P.get(pt[0].toLowerCase()),Mt+pt[0].length):-1}function Me(at,Ht,Mt){var pt=X.exec(Ht.slice(Mt));return pt?(at.m=ae.get(pt[0].toLowerCase()),Mt+pt[0].length):-1}function me(at,Ht,Mt){var pt=W.exec(Ht.slice(Mt));return pt?(at.m=G.get(pt[0].toLowerCase()),Mt+pt[0].length):-1}function Ke(at,Ht,Mt){return Y(at,t,Ht,Mt)}function Re(at,Ht,Mt){return Y(at,r,Ht,Mt)}function pe(at,Ht,Mt){return Y(at,n,Ht,Mt)}function ge(at){return h[at.getDay()]}function ze(at){return l[at.getDay()]}function Pe(at){return v[at.getMonth()]}function st(at){return u[at.getMonth()]}function Ae(at){return o[+(at.getHours()>=12)]}function qe(at){return 1+~~(at.getMonth()/3)}function Ze(at){return h[at.getUTCDay()]}function zt(at){return l[at.getUTCDay()]}function Tt(at){return v[at.getUTCMonth()]}function rr(at){return u[at.getUTCMonth()]}function Xt(at){return o[+(at.getUTCHours()>=12)]}function tr(at){return 1+~~(at.getUTCMonth()/3)}return{format:function(at){var Ht=de(at+="",ne);return Ht.toString=function(){return at},Ht},parse:function(at){var Ht=he(at+="",!1);return Ht.toString=function(){return at},Ht},utcFormat:function(at){var Ht=de(at+="",ue);return Ht.toString=function(){return at},Ht},utcParse:function(at){var Ht=he(at+="",!0);return Ht.toString=function(){return at},Ht}}}var E3={"-":"",_:" ",0:"0"},yl=/^\s*\d+/,IW=/^%/,OW=/[\\^$*+?|[\]().{}]/g;function Qi(e,t,r){var n=e<0?"-":"",o=(n?-e:e)+"",l=o.length;return n+(l<r?new Array(r-l+1).join(t)+o:o)}function jW(e){return e.replace(OW,"\\$&")}function vv(e){return new RegExp("^(?:"+e.map(jW).join("|")+")","i")}function xv(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function RW(e,t,r){var n=yl.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function NW(e,t,r){var n=yl.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function BW(e,t,r){var n=yl.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function FW(e,t,r){var n=yl.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function $W(e,t,r){var n=yl.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function A3(e,t,r){var n=yl.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function k3(e,t,r){var n=yl.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function GW(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function UW(e,t,r){var n=yl.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function VW(e,t,r){var n=yl.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function C3(e,t,r){var n=yl.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function qW(e,t,r){var n=yl.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function T3(e,t,r){var n=yl.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function WW(e,t,r){var n=yl.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function HW(e,t,r){var n=yl.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function ZW(e,t,r){var n=yl.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function KW(e,t,r){var n=yl.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function XW(e,t,r){var n=IW.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function YW(e,t,r){var n=yl.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function JW(e,t,r){var n=yl.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function D3(e,t){return Qi(e.getDate(),t,2)}function QW(e,t){return Qi(e.getHours(),t,2)}function eH(e,t){return Qi(e.getHours()%12||12,t,2)}function tH(e,t){return Qi(1+gx.count(Zp(e),e),t,3)}function Zz(e,t){return Qi(e.getMilliseconds(),t,3)}function rH(e,t){return Zz(e,t)+"000"}function nH(e,t){return Qi(e.getMonth()+1,t,2)}function iH(e,t){return Qi(e.getMinutes(),t,2)}function aH(e,t){return Qi(e.getSeconds(),t,2)}function oH(e){var t=e.getDay();return t===0?7:t}function sH(e,t){return Qi(Y_.count(Zp(e)-1,e),t,2)}function Kz(e){var t=e.getDay();return t>=4||t===0?S0(e):S0.ceil(e)}function lH(e,t){return e=Kz(e),Qi(S0.count(Zp(e),e)+(Zp(e).getDay()===4),t,2)}function uH(e){return e.getDay()}function cH(e,t){return Qi(Q1.count(Zp(e)-1,e),t,2)}function dH(e,t){return Qi(e.getFullYear()%100,t,2)}function hH(e,t){return e=Kz(e),Qi(e.getFullYear()%100,t,2)}function fH(e,t){return Qi(e.getFullYear()%1e4,t,4)}function pH(e,t){var r=e.getDay();return e=r>=4||r===0?S0(e):S0.ceil(e),Qi(e.getFullYear()%1e4,t,4)}function gH(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Qi(t/60|0,"0",2)+Qi(t%60,"0",2)}function M3(e,t){return Qi(e.getUTCDate(),t,2)}function mH(e,t){return Qi(e.getUTCHours(),t,2)}function yH(e,t){return Qi(e.getUTCHours()%12||12,t,2)}function vH(e,t){return Qi(1+X_.count(Kp(e),e),t,3)}function Xz(e,t){return Qi(e.getUTCMilliseconds(),t,3)}function xH(e,t){return Xz(e,t)+"000"}function _H(e,t){return Qi(e.getUTCMonth()+1,t,2)}function bH(e,t){return Qi(e.getUTCMinutes(),t,2)}function wH(e,t){return Qi(e.getUTCSeconds(),t,2)}function SH(e){var t=e.getUTCDay();return t===0?7:t}function EH(e,t){return Qi(J_.count(Kp(e)-1,e),t,2)}function Yz(e){var t=e.getUTCDay();return t>=4||t===0?E0(e):E0.ceil(e)}function AH(e,t){return e=Yz(e),Qi(E0.count(Kp(e),e)+(Kp(e).getUTCDay()===4),t,2)}function kH(e){return e.getUTCDay()}function CH(e,t){return Qi(e_.count(Kp(e)-1,e),t,2)}function TH(e,t){return Qi(e.getUTCFullYear()%100,t,2)}function DH(e,t){return e=Yz(e),Qi(e.getUTCFullYear()%100,t,2)}function MH(e,t){return Qi(e.getUTCFullYear()%1e4,t,4)}function zH(e,t){var r=e.getUTCDay();return e=r>=4||r===0?E0(e):E0.ceil(e),Qi(e.getUTCFullYear()%1e4,t,4)}function PH(){return"+0000"}function z3(){return"%"}function P3(e){return+e}function L3(e){return Math.floor(+e/1e3)}var t0,Jz,Qz;LH({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function LH(e){return t0=LW(e),Jz=t0.format,t0.parse,Qz=t0.utcFormat,t0.utcParse,t0}function IH(e){return new Date(e)}function OH(e){return e instanceof Date?+e:+new Date(+e)}function m5(e,t,r,n,o,l,h,u,v,x){var A=r5(),C=A.invert,P=A.domain,O=x(".%L"),U=x(":%S"),W=x("%I:%M"),G=x("%I %p"),X=x("%a %d"),ae=x("%b %d"),ne=x("%B"),ue=x("%Y");function Q(de){return(v(de)<de?O:u(de)<de?U:h(de)<de?W:l(de)<de?G:n(de)<de?o(de)<de?X:ae:r(de)<de?ne:ue)(de)}return A.invert=function(de){return new Date(C(de))},A.domain=function(de){return arguments.length?P(Array.from(de,OH)):P().map(IH)},A.ticks=function(de){var he=P();return e(he[0],he[he.length-1],de??10)},A.tickFormat=function(de,he){return he==null?Q:x(he)},A.nice=function(de){var he=P();return(!de||typeof de.range!="function")&&(de=t(he[0],he[he.length-1],de??10)),de?P(Bz(he,de)):A},A.copy=function(){return px(A,m5(e,t,r,n,o,l,h,u,v,x))},A}function jH(){return Fd.apply(m5(zW,PW,Zp,p5,Y_,gx,h5,c5,ny,Jz).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function RH(){return Fd.apply(m5(DW,MW,Kp,g5,J_,X_,f5,d5,ny,Qz).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Q_(){var e=0,t=1,r,n,o,l,h=Ou,u=!1,v;function x(C){return C==null||isNaN(C=+C)?v:h(o===0?.5:(C=(l(C)-r)*o,u?Math.max(0,Math.min(1,C)):C))}x.domain=function(C){return arguments.length?([e,t]=C,r=l(e=+e),n=l(t=+t),o=r===n?0:1/(n-r),x):[e,t]},x.clamp=function(C){return arguments.length?(u=!!C,x):u},x.interpolator=function(C){return arguments.length?(h=C,x):h};function A(C){return function(P){var O,U;return arguments.length?([O,U]=P,h=C(O,U),x):[h(0),h(1)]}}return x.range=A(R0),x.rangeRound=A(t5),x.unknown=function(C){return arguments.length?(v=C,x):v},function(C){return l=C,r=C(e),n=C(t),o=r===n?0:1/(n-r),x}}function sm(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function e8(){var e=om(Q_()(Ou));return e.copy=function(){return sm(e,e8())},rg.apply(e,arguments)}function t8(){var e=a5(Q_()).domain([1,10]);return e.copy=function(){return sm(e,t8()).base(e.base())},rg.apply(e,arguments)}function r8(){var e=o5(Q_());return e.copy=function(){return sm(e,r8()).constant(e.constant())},rg.apply(e,arguments)}function y5(){var e=s5(Q_());return e.copy=function(){return sm(e,y5()).exponent(e.exponent())},rg.apply(e,arguments)}function NH(){return y5.apply(null,arguments).exponent(.5)}function n8(){var e=[],t=Ou;function r(n){if(n!=null&&!isNaN(n=+n))return t((hx(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let o of n)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(tm),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,o)=>t(o/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(o,l)=>Sq(e,l/n))},r.copy=function(){return n8(t).domain(e)},rg.apply(r,arguments)}function eb(){var e=0,t=.5,r=1,n=1,o,l,h,u,v,x=Ou,A,C=!1,P;function O(W){return isNaN(W=+W)?P:(W=.5+((W=+A(W))-l)*(n*W<n*l?u:v),x(C?Math.max(0,Math.min(1,W)):W))}O.domain=function(W){return arguments.length?([e,t,r]=W,o=A(e=+e),l=A(t=+t),h=A(r=+r),u=o===l?0:.5/(l-o),v=l===h?0:.5/(h-l),n=l<o?-1:1,O):[e,t,r]},O.clamp=function(W){return arguments.length?(C=!!W,O):C},O.interpolator=function(W){return arguments.length?(x=W,O):x};function U(W){return function(G){var X,ae,ne;return arguments.length?([X,ae,ne]=G,x=Xq(W,[X,ae,ne]),O):[x(0),x(.5),x(1)]}}return O.range=U(R0),O.rangeRound=U(t5),O.unknown=function(W){return arguments.length?(P=W,O):P},function(W){return A=W,o=W(e),l=W(t),h=W(r),u=o===l?0:.5/(l-o),v=l===h?0:.5/(h-l),n=l<o?-1:1,O}}function i8(){var e=om(eb()(Ou));return e.copy=function(){return sm(e,i8())},rg.apply(e,arguments)}function a8(){var e=a5(eb()).domain([.1,1,10]);return e.copy=function(){return sm(e,a8()).base(e.base())},rg.apply(e,arguments)}function o8(){var e=o5(eb());return e.copy=function(){return sm(e,o8()).constant(e.constant())},rg.apply(e,arguments)}function v5(){var e=s5(eb());return e.copy=function(){return sm(e,v5()).exponent(e.exponent())},rg.apply(e,arguments)}function BH(){return v5.apply(null,arguments).exponent(.5)}const Av=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:JE,scaleDiverging:i8,scaleDivergingLog:a8,scaleDivergingPow:v5,scaleDivergingSqrt:BH,scaleDivergingSymlog:o8,scaleIdentity:Nz,scaleImplicit:CS,scaleLinear:Rz,scaleLog:Fz,scaleOrdinal:YE,scalePoint:kq,scalePow:l5,scaleQuantile:Uz,scaleQuantize:Vz,scaleRadial:Gz,scaleSequential:e8,scaleSequentialLog:t8,scaleSequentialPow:y5,scaleSequentialQuantile:n8,scaleSequentialSqrt:NH,scaleSequentialSymlog:r8,scaleSqrt:xW,scaleSymlog:$z,scaleThreshold:qz,scaleTime:jH,scaleUtc:RH,tickFormat:jz},Symbol.toStringTag,{value:"Module"}));var lm=e=>e.chartData,FH=Pt([lm],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),mx=(e,t,r,n)=>n?FH(e):lm(e);function im(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(so(t)&&so(r))return!0}return!1}function I3(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function s8(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,o,l;if(so(r))o=r;else if(typeof r=="function")return;if(so(n))l=n;else if(typeof n=="function")return;var h=[o,l];if(im(h))return h}}function $H(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(im(n))return I3(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[o,l]=e,h,u;if(o==="auto")t!=null&&(h=Math.min(...t));else if(tn(o))h=o;else if(typeof o=="function")try{t!=null&&(h=o(t==null?void 0:t[0]))}catch{}else if(typeof o=="string"&&sT.test(o)){var v=sT.exec(o);if(v==null||t==null)h=void 0;else{var x=+v[1];h=t[0]-x}}else h=t==null?void 0:t[0];if(l==="auto")t!=null&&(u=Math.max(...t));else if(tn(l))u=l;else if(typeof l=="function")try{t!=null&&(u=l(t==null?void 0:t[1]))}catch{}else if(typeof l=="string"&&lT.test(l)){var A=lT.exec(l);if(A==null||t==null)u=void 0;else{var C=+A[1];u=t[1]+C}}else u=t==null?void 0:t[1];var P=[h,u];if(im(P))return t==null?P:I3(P,t,r)}}}var N0=1e9,GH={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},_5,_o=!0,jd="[DecimalError] ",oy=jd+"Invalid argument: ",x5=jd+"Exponent out of range: ",B0=Math.floor,ty=Math.pow,UH=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Uc,fl=1e7,io=7,l8=9007199254740991,t_=B0(l8/io),Vr={};Vr.absoluteValue=Vr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Vr.comparedTo=Vr.cmp=function(e){var t,r,n,o,l=this;if(e=new l.constructor(e),l.s!==e.s)return l.s||-e.s;if(l.e!==e.e)return l.e>e.e^l.s<0?1:-1;for(n=l.d.length,o=e.d.length,t=0,r=n<o?n:o;t<r;++t)if(l.d[t]!==e.d[t])return l.d[t]>e.d[t]^l.s<0?1:-1;return n===o?0:n>o^l.s<0?1:-1};Vr.decimalPlaces=Vr.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*io;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Vr.dividedBy=Vr.div=function(e){return Up(this,new this.constructor(e))};Vr.dividedToIntegerBy=Vr.idiv=function(e){var t=this,r=t.constructor;return Va(Up(t,new r(e),0,1),r.precision)};Vr.equals=Vr.eq=function(e){return!this.cmp(e)};Vr.exponent=function(){return As(this)};Vr.greaterThan=Vr.gt=function(e){return this.cmp(e)>0};Vr.greaterThanOrEqualTo=Vr.gte=function(e){return this.cmp(e)>=0};Vr.isInteger=Vr.isint=function(){return this.e>this.d.length-2};Vr.isNegative=Vr.isneg=function(){return this.s<0};Vr.isPositive=Vr.ispos=function(){return this.s>0};Vr.isZero=function(){return this.s===0};Vr.lessThan=Vr.lt=function(e){return this.cmp(e)<0};Vr.lessThanOrEqualTo=Vr.lte=function(e){return this.cmp(e)<1};Vr.logarithm=Vr.log=function(e){var t,r=this,n=r.constructor,o=n.precision,l=o+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Uc))throw Error(jd+"NaN");if(r.s<1)throw Error(jd+(r.s?"NaN":"-Infinity"));return r.eq(Uc)?new n(0):(_o=!1,t=Up(Hv(r,l),Hv(e,l),l),_o=!0,Va(t,o))};Vr.minus=Vr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?d8(t,e):u8(t,(e.s=-e.s,e))};Vr.modulo=Vr.mod=function(e){var t,r=this,n=r.constructor,o=n.precision;if(e=new n(e),!e.s)throw Error(jd+"NaN");return r.s?(_o=!1,t=Up(r,e,0,1).times(e),_o=!0,r.minus(t)):Va(new n(r),o)};Vr.naturalExponential=Vr.exp=function(){return c8(this)};Vr.naturalLogarithm=Vr.ln=function(){return Hv(this)};Vr.negated=Vr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Vr.plus=Vr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?u8(t,e):d8(t,(e.s=-e.s,e))};Vr.precision=Vr.sd=function(e){var t,r,n,o=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(oy+e);if(t=As(o)+1,n=o.d.length-1,r=n*io+1,n=o.d[n],n){for(;n%10==0;n/=10)r--;for(n=o.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Vr.squareRoot=Vr.sqrt=function(){var e,t,r,n,o,l,h,u=this,v=u.constructor;if(u.s<1){if(!u.s)return new v(0);throw Error(jd+"NaN")}for(e=As(u),_o=!1,o=Math.sqrt(+u),o==0||o==1/0?(t=Cf(u.d),(t.length+e)%2==0&&(t+="0"),o=Math.sqrt(t),e=B0((e+1)/2)-(e<0||e%2),o==1/0?t="5e"+e:(t=o.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new v(t)):n=new v(o.toString()),r=v.precision,o=h=r+3;;)if(l=n,n=l.plus(Up(u,l,h+2)).times(.5),Cf(l.d).slice(0,h)===(t=Cf(n.d)).slice(0,h)){if(t=t.slice(h-3,h+1),o==h&&t=="4999"){if(Va(l,r+1,0),l.times(l).eq(u)){n=l;break}}else if(t!="9999")break;h+=4}return _o=!0,Va(n,r)};Vr.times=Vr.mul=function(e){var t,r,n,o,l,h,u,v,x,A=this,C=A.constructor,P=A.d,O=(e=new C(e)).d;if(!A.s||!e.s)return new C(0);for(e.s*=A.s,r=A.e+e.e,v=P.length,x=O.length,v<x&&(l=P,P=O,O=l,h=v,v=x,x=h),l=[],h=v+x,n=h;n--;)l.push(0);for(n=x;--n>=0;){for(t=0,o=v+n;o>n;)u=l[o]+O[n]*P[o-n-1]+t,l[o--]=u%fl|0,t=u/fl|0;l[o]=(l[o]+t)%fl|0}for(;!l[--h];)l.pop();return t?++r:l.shift(),e.d=l,e.e=r,_o?Va(e,C.precision):e};Vr.toDecimalPlaces=Vr.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Mf(e,0,N0),t===void 0?t=n.rounding:Mf(t,0,8),Va(r,e+As(r)+1,t))};Vr.toExponential=function(e,t){var r,n=this,o=n.constructor;return e===void 0?r=dy(n,!0):(Mf(e,0,N0),t===void 0?t=o.rounding:Mf(t,0,8),n=Va(new o(n),e+1,t),r=dy(n,!0,e+1)),r};Vr.toFixed=function(e,t){var r,n,o=this,l=o.constructor;return e===void 0?dy(o):(Mf(e,0,N0),t===void 0?t=l.rounding:Mf(t,0,8),n=Va(new l(o),e+As(o)+1,t),r=dy(n.abs(),!1,e+As(n)+1),o.isneg()&&!o.isZero()?"-"+r:r)};Vr.toInteger=Vr.toint=function(){var e=this,t=e.constructor;return Va(new t(e),As(e)+1,t.rounding)};Vr.toNumber=function(){return+this};Vr.toPower=Vr.pow=function(e){var t,r,n,o,l,h,u=this,v=u.constructor,x=12,A=+(e=new v(e));if(!e.s)return new v(Uc);if(u=new v(u),!u.s){if(e.s<1)throw Error(jd+"Infinity");return u}if(u.eq(Uc))return u;if(n=v.precision,e.eq(Uc))return Va(u,n);if(t=e.e,r=e.d.length-1,h=t>=r,l=u.s,h){if((r=A<0?-A:A)<=l8){for(o=new v(Uc),t=Math.ceil(n/io+4),_o=!1;r%2&&(o=o.times(u),j3(o.d,t)),r=B0(r/2),r!==0;)u=u.times(u),j3(u.d,t);return _o=!0,e.s<0?new v(Uc).div(o):Va(o,n)}}else if(l<0)throw Error(jd+"NaN");return l=l<0&&e.d[Math.max(t,r)]&1?-1:1,u.s=1,_o=!1,o=e.times(Hv(u,n+x)),_o=!0,o=c8(o),o.s=l,o};Vr.toPrecision=function(e,t){var r,n,o=this,l=o.constructor;return e===void 0?(r=As(o),n=dy(o,r<=l.toExpNeg||r>=l.toExpPos)):(Mf(e,1,N0),t===void 0?t=l.rounding:Mf(t,0,8),o=Va(new l(o),e,t),r=As(o),n=dy(o,e<=r||r<=l.toExpNeg,e)),n};Vr.toSignificantDigits=Vr.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Mf(e,1,N0),t===void 0?t=n.rounding:Mf(t,0,8)),Va(new n(r),e,t)};Vr.toString=Vr.valueOf=Vr.val=Vr.toJSON=Vr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=As(e),r=e.constructor;return dy(e,t<=r.toExpNeg||t>=r.toExpPos)};function u8(e,t){var r,n,o,l,h,u,v,x,A=e.constructor,C=A.precision;if(!e.s||!t.s)return t.s||(t=new A(e)),_o?Va(t,C):t;if(v=e.d,x=t.d,h=e.e,o=t.e,v=v.slice(),l=h-o,l){for(l<0?(n=v,l=-l,u=x.length):(n=x,o=h,u=v.length),h=Math.ceil(C/io),u=h>u?h+1:u+1,l>u&&(l=u,n.length=1),n.reverse();l--;)n.push(0);n.reverse()}for(u=v.length,l=x.length,u-l<0&&(l=u,n=x,x=v,v=n),r=0;l;)r=(v[--l]=v[l]+x[l]+r)/fl|0,v[l]%=fl;for(r&&(v.unshift(r),++o),u=v.length;v[--u]==0;)v.pop();return t.d=v,t.e=o,_o?Va(t,C):t}function Mf(e,t,r){if(e!==~~e||e<t||e>r)throw Error(oy+e)}function Cf(e){var t,r,n,o=e.length-1,l="",h=e[0];if(o>0){for(l+=h,t=1;t<o;t++)n=e[t]+"",r=io-n.length,r&&(l+=Jg(r)),l+=n;h=e[t],n=h+"",r=io-n.length,r&&(l+=Jg(r))}else if(h===0)return"0";for(;h%10===0;)h/=10;return l+h}var Up=(function(){function e(n,o){var l,h=0,u=n.length;for(n=n.slice();u--;)l=n[u]*o+h,n[u]=l%fl|0,h=l/fl|0;return h&&n.unshift(h),n}function t(n,o,l,h){var u,v;if(l!=h)v=l>h?1:-1;else for(u=v=0;u<l;u++)if(n[u]!=o[u]){v=n[u]>o[u]?1:-1;break}return v}function r(n,o,l){for(var h=0;l--;)n[l]-=h,h=n[l]<o[l]?1:0,n[l]=h*fl+n[l]-o[l];for(;!n[0]&&n.length>1;)n.shift()}return function(n,o,l,h){var u,v,x,A,C,P,O,U,W,G,X,ae,ne,ue,Q,de,he,Y,ie=n.constructor,Ce=n.s==o.s?1:-1,_e=n.d,Me=o.d;if(!n.s)return new ie(n);if(!o.s)throw Error(jd+"Division by zero");for(v=n.e-o.e,he=Me.length,Q=_e.length,O=new ie(Ce),U=O.d=[],x=0;Me[x]==(_e[x]||0);)++x;if(Me[x]>(_e[x]||0)&&--v,l==null?ae=l=ie.precision:h?ae=l+(As(n)-As(o))+1:ae=l,ae<0)return new ie(0);if(ae=ae/io+2|0,x=0,he==1)for(A=0,Me=Me[0],ae++;(x<Q||A)&&ae--;x++)ne=A*fl+(_e[x]||0),U[x]=ne/Me|0,A=ne%Me|0;else{for(A=fl/(Me[0]+1)|0,A>1&&(Me=e(Me,A),_e=e(_e,A),he=Me.length,Q=_e.length),ue=he,W=_e.slice(0,he),G=W.length;G<he;)W[G++]=0;Y=Me.slice(),Y.unshift(0),de=Me[0],Me[1]>=fl/2&&++de;do A=0,u=t(Me,W,he,G),u<0?(X=W[0],he!=G&&(X=X*fl+(W[1]||0)),A=X/de|0,A>1?(A>=fl&&(A=fl-1),C=e(Me,A),P=C.length,G=W.length,u=t(C,W,P,G),u==1&&(A--,r(C,he<P?Y:Me,P))):(A==0&&(u=A=1),C=Me.slice()),P=C.length,P<G&&C.unshift(0),r(W,C,G),u==-1&&(G=W.length,u=t(Me,W,he,G),u<1&&(A++,r(W,he<G?Y:Me,G))),G=W.length):u===0&&(A++,W=[0]),U[x++]=A,u&&W[0]?W[G++]=_e[ue]||0:(W=[_e[ue]],G=1);while((ue++<Q||W[0]!==void 0)&&ae--)}return U[0]||U.shift(),O.e=v,Va(O,h?l+As(O)+1:l)}})();function c8(e,t){var r,n,o,l,h,u,v=0,x=0,A=e.constructor,C=A.precision;if(As(e)>16)throw Error(x5+As(e));if(!e.s)return new A(Uc);for(_o=!1,u=C,h=new A(.03125);e.abs().gte(.1);)e=e.times(h),x+=5;for(n=Math.log(ty(2,x))/Math.LN10*2+5|0,u+=n,r=o=l=new A(Uc),A.precision=u;;){if(o=Va(o.times(e),u),r=r.times(++v),h=l.plus(Up(o,r,u)),Cf(h.d).slice(0,u)===Cf(l.d).slice(0,u)){for(;x--;)l=Va(l.times(l),u);return A.precision=C,t==null?(_o=!0,Va(l,C)):l}l=h}}function As(e){for(var t=e.e*io,r=e.d[0];r>=10;r/=10)t++;return t}function dw(e,t,r){if(t>e.LN10.sd())throw _o=!0,r&&(e.precision=r),Error(jd+"LN10 precision limit exceeded");return Va(new e(e.LN10),t)}function Jg(e){for(var t="";e--;)t+="0";return t}function Hv(e,t){var r,n,o,l,h,u,v,x,A,C=1,P=10,O=e,U=O.d,W=O.constructor,G=W.precision;if(O.s<1)throw Error(jd+(O.s?"NaN":"-Infinity"));if(O.eq(Uc))return new W(0);if(t==null?(_o=!1,x=G):x=t,O.eq(10))return t==null&&(_o=!0),dw(W,x);if(x+=P,W.precision=x,r=Cf(U),n=r.charAt(0),l=As(O),Math.abs(l)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)O=O.times(e),r=Cf(O.d),n=r.charAt(0),C++;l=As(O),n>1?(O=new W("0."+r),l++):O=new W(n+"."+r.slice(1))}else return v=dw(W,x+2,G).times(l+""),O=Hv(new W(n+"."+r.slice(1)),x-P).plus(v),W.precision=G,t==null?(_o=!0,Va(O,G)):O;for(u=h=O=Up(O.minus(Uc),O.plus(Uc),x),A=Va(O.times(O),x),o=3;;){if(h=Va(h.times(A),x),v=u.plus(Up(h,new W(o),x)),Cf(v.d).slice(0,x)===Cf(u.d).slice(0,x))return u=u.times(2),l!==0&&(u=u.plus(dw(W,x+2,G).times(l+""))),u=Up(u,new W(C),x),W.precision=G,t==null?(_o=!0,Va(u,G)):u;u=v,o+=2}}function O3(e,t){var r,n,o;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(o=t.length;t.charCodeAt(o-1)===48;)--o;if(t=t.slice(n,o),t){if(o-=n,r=r-n-1,e.e=B0(r/io),e.d=[],n=(r+1)%io,r<0&&(n+=io),n<o){for(n&&e.d.push(+t.slice(0,n)),o-=io;n<o;)e.d.push(+t.slice(n,n+=io));t=t.slice(n),n=io-t.length}else n-=o;for(;n--;)t+="0";if(e.d.push(+t),_o&&(e.e>t_||e.e<-t_))throw Error(x5+r)}else e.s=0,e.e=0,e.d=[0];return e}function Va(e,t,r){var n,o,l,h,u,v,x,A,C=e.d;for(h=1,l=C[0];l>=10;l/=10)h++;if(n=t-h,n<0)n+=io,o=t,x=C[A=0];else{if(A=Math.ceil((n+1)/io),l=C.length,A>=l)return e;for(x=l=C[A],h=1;l>=10;l/=10)h++;n%=io,o=n-io+h}if(r!==void 0&&(l=ty(10,h-o-1),u=x/l%10|0,v=t<0||C[A+1]!==void 0||x%l,v=r<4?(u||v)&&(r==0||r==(e.s<0?3:2)):u>5||u==5&&(r==4||v||r==6&&(n>0?o>0?x/ty(10,h-o):0:C[A-1])%10&1||r==(e.s<0?8:7))),t<1||!C[0])return v?(l=As(e),C.length=1,t=t-l-1,C[0]=ty(10,(io-t%io)%io),e.e=B0(-t/io)||0):(C.length=1,C[0]=e.e=e.s=0),e;if(n==0?(C.length=A,l=1,A--):(C.length=A+1,l=ty(10,io-n),C[A]=o>0?(x/ty(10,h-o)%ty(10,o)|0)*l:0),v)for(;;)if(A==0){(C[0]+=l)==fl&&(C[0]=1,++e.e);break}else{if(C[A]+=l,C[A]!=fl)break;C[A--]=0,l=1}for(n=C.length;C[--n]===0;)C.pop();if(_o&&(e.e>t_||e.e<-t_))throw Error(x5+As(e));return e}function d8(e,t){var r,n,o,l,h,u,v,x,A,C,P=e.constructor,O=P.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new P(e),_o?Va(t,O):t;if(v=e.d,C=t.d,n=t.e,x=e.e,v=v.slice(),h=x-n,h){for(A=h<0,A?(r=v,h=-h,u=C.length):(r=C,n=x,u=v.length),o=Math.max(Math.ceil(O/io),u)+2,h>o&&(h=o,r.length=1),r.reverse(),o=h;o--;)r.push(0);r.reverse()}else{for(o=v.length,u=C.length,A=o<u,A&&(u=o),o=0;o<u;o++)if(v[o]!=C[o]){A=v[o]<C[o];break}h=0}for(A&&(r=v,v=C,C=r,t.s=-t.s),u=v.length,o=C.length-u;o>0;--o)v[u++]=0;for(o=C.length;o>h;){if(v[--o]<C[o]){for(l=o;l&&v[--l]===0;)v[l]=fl-1;--v[l],v[o]+=fl}v[o]-=C[o]}for(;v[--u]===0;)v.pop();for(;v[0]===0;v.shift())--n;return v[0]?(t.d=v,t.e=n,_o?Va(t,O):t):new P(0)}function dy(e,t,r){var n,o=As(e),l=Cf(e.d),h=l.length;return t?(r&&(n=r-h)>0?l=l.charAt(0)+"."+l.slice(1)+Jg(n):h>1&&(l=l.charAt(0)+"."+l.slice(1)),l=l+(o<0?"e":"e+")+o):o<0?(l="0."+Jg(-o-1)+l,r&&(n=r-h)>0&&(l+=Jg(n))):o>=h?(l+=Jg(o+1-h),r&&(n=r-o-1)>0&&(l=l+"."+Jg(n))):((n=o+1)<h&&(l=l.slice(0,n)+"."+l.slice(n)),r&&(n=r-h)>0&&(o+1===h&&(l+="."),l+=Jg(n))),e.s<0?"-"+l:l}function j3(e,t){if(e.length>t)return e.length=t,!0}function h8(e){var t,r,n;function o(l){var h=this;if(!(h instanceof o))return new o(l);if(h.constructor=o,l instanceof o){h.s=l.s,h.e=l.e,h.d=(l=l.d)?l.slice():l;return}if(typeof l=="number"){if(l*0!==0)throw Error(oy+l);if(l>0)h.s=1;else if(l<0)l=-l,h.s=-1;else{h.s=0,h.e=0,h.d=[0];return}if(l===~~l&&l<1e7){h.e=0,h.d=[l];return}return O3(h,l.toString())}else if(typeof l!="string")throw Error(oy+l);if(l.charCodeAt(0)===45?(l=l.slice(1),h.s=-1):h.s=1,UH.test(l))O3(h,l);else throw Error(oy+l)}if(o.prototype=Vr,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=h8,o.config=o.set=VH,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return o.config(e),o}function VH(e){if(!e||typeof e!="object")throw Error(jd+"Object expected");var t,r,n,o=["precision",1,N0,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<o.length;t+=3)if((n=e[r=o[t]])!==void 0)if(B0(n)===n&&n>=o[t+1]&&n<=o[t+2])this[r]=n;else throw Error(oy+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(oy+r+": "+n);return this}var _5=h8(GH);Uc=new _5(1);const ka=_5;var qH=e=>e,f8={},p8=e=>e===f8,R3=e=>function t(){return arguments.length===0||arguments.length===1&&p8(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},g8=(e,t)=>e===1?t:R3(function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];var l=n.filter(h=>h!==f8).length;return l>=e?t(...n):g8(e-l,R3(function(){for(var h=arguments.length,u=new Array(h),v=0;v<h;v++)u[v]=arguments[v];var x=n.map(A=>p8(A)?u.shift():A);return t(...x,...u)}))}),WH=e=>g8(e.length,e),zS=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},HH=WH((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),ZH=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return qH;var o=r.reverse(),l=o[0],h=o.slice(1);return function(){return h.reduce((u,v)=>v(u),l(...arguments))}},PS=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join("");function m8(e){var t;return e===0?t=1:t=Math.floor(new ka(e).abs().log(10).toNumber())+1,t}function y8(e,t,r){for(var n=new ka(e),o=0,l=[];n.lt(t)&&o<1e5;)l.push(n.toNumber()),n=n.add(r),o++;return l}var v8=e=>{var[t,r]=e,[n,o]=[t,r];return t>r&&([n,o]=[r,t]),[n,o]},x8=(e,t,r)=>{if(e.lte(0))return new ka(0);var n=m8(e.toNumber()),o=new ka(10).pow(n),l=e.div(o),h=n!==1?.05:.1,u=new ka(Math.ceil(l.div(h).toNumber())).add(r).mul(h),v=u.mul(o);return t?new ka(v.toNumber()):new ka(Math.ceil(v.toNumber()))},KH=(e,t,r)=>{var n=new ka(1),o=new ka(e);if(!o.isint()&&r){var l=Math.abs(e);l<1?(n=new ka(10).pow(m8(e)-1),o=new ka(Math.floor(o.div(n).toNumber())).mul(n)):l>1&&(o=new ka(Math.floor(e)))}else e===0?o=new ka(Math.floor((t-1)/2)):r||(o=new ka(Math.floor(e)));var h=Math.floor((t-1)/2),u=ZH(HH(v=>o.add(new ka(v-h).mul(n)).toNumber()),zS);return u(0,t)},_8=function(t,r,n,o){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ka(0),tickMin:new ka(0),tickMax:new ka(0)};var h=x8(new ka(r).sub(t).div(n-1),o,l),u;t<=0&&r>=0?u=new ka(0):(u=new ka(t).add(r).div(2),u=u.sub(new ka(u).mod(h)));var v=Math.ceil(u.sub(t).div(h).toNumber()),x=Math.ceil(new ka(r).sub(u).div(h).toNumber()),A=v+x+1;return A>n?_8(t,r,n,o,l+1):(A<n&&(x=r>0?x+(n-A):x,v=r>0?v:v+(n-A)),{step:h,tickMin:u.sub(new ka(v).mul(h)),tickMax:u.add(new ka(x).mul(h))})},XH=function(t){var[r,n]=t,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,h=Math.max(o,2),[u,v]=v8([r,n]);if(u===-1/0||v===1/0){var x=v===1/0?[u,...zS(0,o-1).map(()=>1/0)]:[...zS(0,o-1).map(()=>-1/0),v];return r>n?PS(x):x}if(u===v)return KH(u,o,l);var{step:A,tickMin:C,tickMax:P}=_8(u,v,h,l,0),O=y8(C,P.add(new ka(.1).mul(A)),A);return r>n?PS(O):O},YH=function(t,r){var[n,o]=t,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[h,u]=v8([n,o]);if(h===-1/0||u===1/0)return[n,o];if(h===u)return[h];var v=Math.max(r,2),x=x8(new ka(u).sub(h).div(v-1),l,0),A=[...y8(new ka(h),new ka(u),x),u];return l===!1&&(A=A.map(C=>Math.round(C))),n>o?PS(A):A},b8=e=>e.rootProps.maxBarSize,JH=e=>e.rootProps.barGap,w8=e=>e.rootProps.barCategoryGap,QH=e=>e.rootProps.barSize,tb=e=>e.rootProps.stackOffset,S8=e=>e.rootProps.reverseStackOrder,b5=e=>e.options.chartName,w5=e=>e.rootProps.syncId,E8=e=>e.rootProps.syncMethod,S5=e=>e.options.eventEmitter,eZ=e=>e.rootProps.baseValue,pl={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},jp={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Gc={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},rb=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},tZ={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:jp.angleAxisId,includeHidden:!1,name:void 0,reversed:jp.reversed,scale:jp.scale,tick:jp.tick,tickCount:void 0,ticks:void 0,type:jp.type,unit:void 0},rZ={allowDataOverflow:Gc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Gc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Gc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Gc.scale,tick:Gc.tick,tickCount:Gc.tickCount,ticks:void 0,type:Gc.type,unit:void 0},nZ={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:jp.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:jp.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:jp.scale,tick:jp.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},iZ={allowDataOverflow:Gc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Gc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Gc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Gc.scale,tick:Gc.tick,tickCount:Gc.tickCount,ticks:void 0,type:"category",unit:void 0},E5=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?nZ:tZ,A5=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?iZ:rZ,nb=e=>e.polarOptions,k5=Pt([eg,tg,ml],YV),A8=Pt([nb,k5],(e,t)=>{if(e!=null)return Th(e.innerRadius,t,0)}),k8=Pt([nb,k5],(e,t)=>{if(e!=null)return Th(e.outerRadius,t,t*.8)}),aZ=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},C8=Pt([nb],aZ);Pt([E5,C8],rb);var T8=Pt([k5,A8,k8],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});Pt([A5,T8],rb);var D8=Pt([Bi,nb,A8,k8,eg,tg],(e,t,r,n,o,l)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:h,cy:u,startAngle:v,endAngle:x}=t;return{cx:Th(h,o,o/2),cy:Th(u,l,l/2),innerRadius:r,outerRadius:n,startAngle:v,endAngle:x,clockWise:!1}}}),Vs=(e,t)=>t,ib=(e,t,r)=>r;function ab(e){return e==null?void 0:e.id}function M8(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:o,dataKey:l}=r,h=new Map;return e.forEach(u=>{var v,x=(v=u.data)!==null&&v!==void 0?v:n;if(!(x==null||x.length===0)){var A=ab(u);x.forEach((C,P)=>{var O=l==null||o?P:String(ss(C,l,null)),U=ss(C,u.dataKey,0),W;h.has(O)?W=h.get(O):W={},Object.assign(W,{[A]:U}),h.set(O,W)})}}),Array.from(h.values())}function ob(e){return e.stackId!=null&&e.dataKey!=null}var sb=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function lb(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function oZ(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var qs=e=>{var t=Bi(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},F0=e=>e.tooltip.settings.axisId;function N3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function r_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N3(Object(r),!0).forEach(function(n){sZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sZ(e,t,r){return(t=lZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lZ(e){var t=uZ(e,"string");return typeof t=="symbol"?t:t+""}function uZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LS=[0,"auto"],dl={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},z8=(e,t)=>e.cartesianAxis.xAxis[t],ng=(e,t)=>{var r=z8(e,t);return r??dl},hl={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:LS,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:lx},P8=(e,t)=>e.cartesianAxis.yAxis[t],ig=(e,t)=>{var r=P8(e,t);return r??hl},cZ={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},C5=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??cZ},Ru=(e,t,r)=>{switch(t){case"xAxis":return ng(e,r);case"yAxis":return ig(e,r);case"zAxis":return C5(e,r);case"angleAxis":return E5(e,r);case"radiusAxis":return A5(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},dZ=(e,t,r)=>{switch(t){case"xAxis":return ng(e,r);case"yAxis":return ig(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},yx=(e,t,r)=>{switch(t){case"xAxis":return ng(e,r);case"yAxis":return ig(e,r);case"angleAxis":return E5(e,r);case"radiusAxis":return A5(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},L8=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function I8(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var vx=e=>e.graphicalItems.cartesianItems,hZ=Pt([Vs,ib],I8),O8=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),xx=Pt([vx,Ru,hZ],O8,{memoizeOptions:{resultEqualityCheck:lb}}),j8=Pt([xx],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(ob)),R8=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),fZ=Pt([xx],R8),N8=e=>e.map(t=>t.data).filter(Boolean).flat(1),pZ=Pt([xx],N8,{memoizeOptions:{resultEqualityCheck:lb}}),B8=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:o}=t;return e.length>0?e:r.slice(n,o+1)},T5=Pt([pZ,mx],B8),F8=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:ss(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(o=>({value:ss(o,n)}))):e.map(n=>({value:n})),ub=Pt([T5,Ru,xx],F8);function $8(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function m1(e){if(Df(e)||e instanceof Date){var t=Number(e);if(so(t))return t}}function B3(e){if(Array.isArray(e)){var t=[m1(e[0]),m1(e[1])];return im(t)?t:void 0}var r=m1(e);if(r!=null)return[r,r]}function Xp(e){return e.map(m1).filter(e7)}function gZ(e,t,r){return!r||typeof t!="number"||Ch(t)?[]:r.length?Xp(r.flatMap(n=>{var o=ss(e,n.dataKey),l,h;if(Array.isArray(o)?[l,h]=o:l=h=o,!(!so(l)||!so(h)))return[t-l,t+h]})):[]}var Ws=e=>{var t=qs(e),r=F0(e);return yx(e,t,r)},_x=Pt([Ws],e=>e==null?void 0:e.dataKey),mZ=Pt([j8,mx,Ws],M8),G8=(e,t,r,n)=>{var o={},l=t.reduce((h,u)=>(u.stackId==null||(h[u.stackId]==null&&(h[u.stackId]=[]),h[u.stackId].push(u)),h),o);return Object.fromEntries(Object.entries(l).map(h=>{var[u,v]=h,x=n?[...v].reverse():v,A=x.map(ab);return[u,{stackedData:CG(e,A,r),graphicalItems:x}]}))},Zv=Pt([mZ,j8,tb,S8],G8),U8=(e,t,r,n)=>{var{dataStartIndex:o,dataEndIndex:l}=t;if(n==null&&r!=="zAxis"){var h=zG(e,o,l);if(!(h!=null&&h[0]===0&&h[1]===0))return h}},yZ=Pt([Ru],e=>e.allowDataOverflow),D5=e=>{var t;if(e==null||!("domain"in e))return LS;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Xp(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:LS},V8=Pt([Ru],D5),q8=Pt([V8,yZ],s8),vZ=Pt([Zv,lm,Vs,q8],U8,{memoizeOptions:{resultEqualityCheck:sb}}),M5=e=>e.errorBars,xZ=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>$8(r,n)),n_=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=r.filter(Boolean);if(o.length!==0){var l=o.flat(),h=Math.min(...l),u=Math.max(...l);return[h,u]}},W8=(e,t,r,n,o)=>{var l,h;if(r.length>0&&e.forEach(u=>{r.forEach(v=>{var x,A,C=(x=n[v.id])===null||x===void 0?void 0:x.filter(X=>$8(o,X)),P=ss(u,(A=t.dataKey)!==null&&A!==void 0?A:v.dataKey),O=gZ(u,P,C);if(O.length>=2){var U=Math.min(...O),W=Math.max(...O);(l==null||U<l)&&(l=U),(h==null||W>h)&&(h=W)}var G=B3(P);G!=null&&(l=l==null?G[0]:Math.min(l,G[0]),h=h==null?G[1]:Math.max(h,G[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(u=>{var v=B3(ss(u,t.dataKey));v!=null&&(l=l==null?v[0]:Math.min(l,v[0]),h=h==null?v[1]:Math.max(h,v[1]))}),so(l)&&so(h))return[l,h]},_Z=Pt([T5,Ru,fZ,M5,Vs],W8,{memoizeOptions:{resultEqualityCheck:sb}});function bZ(e){var{value:t}=e;if(Df(t)||t instanceof Date)return t}var wZ=(e,t,r)=>{var n=e.map(bZ).filter(o=>o!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&oM(n))?kz(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},H8=e=>e.referenceElements.dots,$0=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),SZ=Pt([H8,Vs,ib],$0),Z8=e=>e.referenceElements.areas,EZ=Pt([Z8,Vs,ib],$0),K8=e=>e.referenceElements.lines,AZ=Pt([K8,Vs,ib],$0),X8=(e,t)=>{var r=Xp(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},kZ=Pt(SZ,Vs,X8),Y8=(e,t)=>{var r=Xp(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},CZ=Pt([EZ,Vs],Y8);function TZ(e){var t;if(e.x!=null)return Xp([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:Xp(r)}function DZ(e){var t;if(e.y!=null)return Xp([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:Xp(r)}var J8=(e,t)=>{var r=e.flatMap(n=>t==="xAxis"?TZ(n):DZ(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},MZ=Pt([AZ,Vs],J8),zZ=Pt(kZ,MZ,CZ,(e,t,r)=>n_(e,r,t)),Q8=(e,t,r,n,o,l,h,u)=>{if(r!=null)return r;var v=h==="vertical"&&u==="xAxis"||h==="horizontal"&&u==="yAxis",x=v?n_(n,l,o):n_(l,o);return $H(t,x,e.allowDataOverflow)},PZ=Pt([Ru,V8,q8,vZ,_Z,zZ,Bi,Vs],Q8,{memoizeOptions:{resultEqualityCheck:sb}}),LZ=[0,1],eP=(e,t,r,n,o,l,h)=>{if(!((e==null||r==null||r.length===0)&&h===void 0)){var{dataKey:u,type:v}=e,x=Of(t,l);if(x&&u==null){var A;return kz(0,(A=r==null?void 0:r.length)!==null&&A!==void 0?A:0)}return v==="category"?wZ(n,e,x):o==="expand"?LZ:h}},z5=Pt([Ru,Bi,T5,ub,tb,Vs,PZ],eP),tP=(e,t,r,n,o)=>{if(e!=null){var{scale:l,type:h}=e;if(l==="auto")return t==="radial"&&o==="radiusAxis"?"band":t==="radial"&&o==="angleAxis"?"linear":h==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":h==="category"?"band":"linear";if(typeof l=="string"){var u="scale".concat(nx(l));return u in Av?u:"point"}}},bx=Pt([Ru,Bi,L8,b5,Vs],tP);function IZ(e){if(e!=null){if(e in Av)return Av[e]();var t="scale".concat(nx(e));if(t in Av)return Av[t]()}}function P5(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var o=IZ(t);if(o!=null){var l=o.domain(r).range(n);return wG(l),l}}}var rP=(e,t,r)=>{var n=D5(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&im(e))return XH(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&im(e))return YH(e,t.tickCount,t.allowDecimals)}},L5=Pt([z5,yx,bx],rP),nP=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&im(t)&&Array.isArray(r)&&r.length>0){var o=t[0],l=r[0],h=t[1],u=r[r.length-1];return[Math.min(o,l),Math.max(h,u)]}return t},OZ=Pt([Ru,z5,L5,Vs],nP),jZ=Pt(ub,Ru,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Xp(e.map(u=>u.value))).sort((u,v)=>u-v);if(n.length<2)return 1/0;var o=n[n.length-1]-n[0];if(o===0)return 1/0;for(var l=0;l<n.length-1;l++){var h=n[l+1]-n[l];r=Math.min(r,h)}return r/o}}),iP=Pt(jZ,Bi,w8,ml,(e,t,r,n)=>n,(e,t,r,n,o)=>{if(!so(e))return 0;var l=t==="vertical"?n.height:n.width;if(o==="gap")return e*l/2;if(o==="no-gap"){var h=Th(r,e*l),u=e*l/2;return u-h-(u-h)/l*h}return 0}),RZ=(e,t)=>{var r=ng(e,t);return r==null||typeof r.padding!="string"?0:iP(e,"xAxis",t,r.padding)},NZ=(e,t)=>{var r=ig(e,t);return r==null||typeof r.padding!="string"?0:iP(e,"yAxis",t,r.padding)},BZ=Pt(ng,RZ,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:o}=e;return typeof o=="string"?{left:t,right:t}:{left:((r=o.left)!==null&&r!==void 0?r:0)+t,right:((n=o.right)!==null&&n!==void 0?n:0)+t}}),FZ=Pt(ig,NZ,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:o}=e;return typeof o=="string"?{top:t,bottom:t}:{top:((r=o.top)!==null&&r!==void 0?r:0)+t,bottom:((n=o.bottom)!==null&&n!==void 0?n:0)+t}}),$Z=Pt([ml,BZ,U_,G_,(e,t,r)=>r],(e,t,r,n,o)=>{var{padding:l}=n;return o?[l.left,r.width-l.right]:[e.left+t.left,e.left+e.width-t.right]}),GZ=Pt([ml,Bi,FZ,U_,G_,(e,t,r)=>r],(e,t,r,n,o,l)=>{var{padding:h}=o;return l?[n.height-h.bottom,h.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),wx=(e,t,r,n)=>{var o;switch(t){case"xAxis":return $Z(e,r,n);case"yAxis":return GZ(e,r,n);case"zAxis":return(o=C5(e,r))===null||o===void 0?void 0:o.range;case"angleAxis":return C8(e);case"radiusAxis":return T8(e,r);default:return}},aP=Pt([Ru,wx],rb),G0=Pt([Ru,bx,OZ,aP],P5);Pt([xx,M5,Vs],xZ);function oP(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var cb=(e,t)=>t,db=(e,t,r)=>r,UZ=Pt(F_,cb,db,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(oP)),VZ=Pt($_,cb,db,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(oP)),sP=(e,t)=>({width:e.width,height:t.height}),qZ=(e,t)=>{var r=typeof t.width=="number"?t.width:lx;return{width:r,height:e.height}},lP=Pt(ml,ng,sP),WZ=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},HZ=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},ZZ=Pt(tg,ml,UZ,cb,db,(e,t,r,n,o)=>{var l={},h;return r.forEach(u=>{var v=sP(t,u);h==null&&(h=WZ(t,n,e));var x=n==="top"&&!o||n==="bottom"&&o;l[u.id]=h-Number(x)*v.height,h+=(x?-1:1)*v.height}),l}),KZ=Pt(eg,ml,VZ,cb,db,(e,t,r,n,o)=>{var l={},h;return r.forEach(u=>{var v=qZ(t,u);h==null&&(h=HZ(t,n,e));var x=n==="left"&&!o||n==="right"&&o;l[u.id]=h-Number(x)*v.width,h+=(x?-1:1)*v.width}),l}),XZ=(e,t)=>{var r=ng(e,t);if(r!=null)return ZZ(e,r.orientation,r.mirror)},YZ=Pt([ml,ng,XZ,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var o=r==null?void 0:r[n];return o==null?{x:e.left,y:0}:{x:e.left,y:o}}}),JZ=(e,t)=>{var r=ig(e,t);if(r!=null)return KZ(e,r.orientation,r.mirror)},QZ=Pt([ml,ig,JZ,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var o=r==null?void 0:r[n];return o==null?{x:0,y:e.top}:{x:o,y:e.top}}}),uP=Pt(ml,ig,(e,t)=>{var r=typeof t.width=="number"?t.width:lx;return{width:r,height:e.height}}),F3=(e,t,r)=>{switch(t){case"xAxis":return lP(e,r).width;case"yAxis":return uP(e,r).height;default:return}},cP=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:o,type:l,dataKey:h}=r,u=Of(e,n),v=t.map(x=>x.value);if(h&&u&&l==="category"&&o&&oM(v))return v}},I5=Pt([Bi,ub,Ru,Vs],cP),dP=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:o,scale:l}=r,h=Of(e,n);if(h&&(o==="number"||l!=="auto"))return t.map(u=>u.value)}},O5=Pt([Bi,ub,yx,Vs],dP);Pt([Bi,dZ,bx,G0,I5,O5,wx,L5,Vs],(e,t,r,n,o,l,h,u,v)=>{if(t!=null){var x=Of(e,v);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:v,categoricalDomain:l,duplicateDomain:o,isCategorical:x,niceTicks:u,range:h,realScaleType:r,scale:n}}});var eK=(e,t,r,n,o,l,h,u,v)=>{if(!(t==null||n==null)){var x=Of(e,v),{type:A,ticks:C,tickCount:P}=t,O=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,U=A==="category"&&n.bandwidth?n.bandwidth()/O:0;U=v==="angleAxis"&&l!=null&&l.length>=2?Vc(l[0]-l[1])*2*U:U;var W=C||o;if(W){var G=W.map((X,ae)=>{var ne=h?h.indexOf(X):X;return{index:ae,coordinate:n(ne)+U,value:X,offset:U}});return G.filter(X=>so(X.coordinate))}return x&&u?u.map((X,ae)=>({coordinate:n(X)+U,value:X,index:ae,offset:U})).filter(X=>so(X.coordinate)):n.ticks?n.ticks(P).map(X=>({coordinate:n(X)+U,value:X,offset:U})):n.domain().map((X,ae)=>({coordinate:n(X)+U,value:h?h[X]:X,index:ae,offset:U}))}},hP=Pt([Bi,yx,bx,G0,L5,wx,I5,O5,Vs],eK),tK=(e,t,r,n,o,l,h)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var u=Of(e,h),{tickCount:v}=t,x=0;return x=h==="angleAxis"&&(n==null?void 0:n.length)>=2?Vc(n[0]-n[1])*2*x:x,u&&l?l.map((A,C)=>({coordinate:r(A)+x,value:A,index:C,offset:x})):r.ticks?r.ticks(v).map(A=>({coordinate:r(A)+x,value:A,offset:x})):r.domain().map((A,C)=>({coordinate:r(A)+x,value:o?o[A]:A,index:C,offset:x}))}},zf=Pt([Bi,yx,G0,wx,I5,O5,Vs],tK),Pf=Pt(Ru,G0,(e,t)=>{if(!(e==null||t==null))return r_(r_({},e),{},{scale:t})}),rK=Pt([Ru,bx,z5,aP],P5);Pt((e,t,r)=>C5(e,r),rK,(e,t)=>{if(!(e==null||t==null))return r_(r_({},e),{},{scale:t})});var nK=Pt([Bi,F_,$_],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),fP=e=>e.options.defaultTooltipEventType,pP=e=>e.options.validateTooltipEventTypes;function gP(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function j5(e,t){var r=fP(e),n=pP(e);return gP(t,r,n)}function iK(e){return un(t=>j5(t,e))}var mP=(e,t)=>{var r,n=Number(t);if(!(Ch(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},aK=e=>e.tooltip.settings,em={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},oK={itemInteraction:{click:em,hover:em},axisInteraction:{click:em,hover:em},keyboardInteraction:em,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},yP=cc({name:"tooltip",initialState:oK,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:xo()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,o=kh(e).tooltipItemPayloads.indexOf(r);o>-1&&(e.tooltipItemPayloads[o]=n)},prepare:xo()},removeTooltipEntrySettings:{reducer(e,t){var r=kh(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:xo()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:sK,replaceTooltipEntrySettings:lK,removeTooltipEntrySettings:uK,setTooltipSettingsState:cK,setActiveMouseOverItemIndex:vP,mouseLeaveItem:dK,mouseLeaveChart:xP,setActiveClickItemIndex:hK,setMouseOverAxisIndex:_P,setMouseClickAxisIndex:fK,setSyncInteraction:IS,setKeyboardInteraction:OS}=yP.actions,pK=yP.reducer;function $3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function n1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$3(Object(r),!0).forEach(function(n){gK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gK(e,t,r){return(t=mK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mK(e){var t=yK(e,"string");return typeof t=="symbol"?t:t+""}function yK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vK(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function xK(e){return e.index!=null}var bP=(e,t,r,n)=>{if(t==null)return em;var o=vK(e,t,r);if(o==null)return em;if(o.active)return o;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var l=e.settings.active===!0;if(xK(o)){if(l)return n1(n1({},o),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return n1(n1({},em),{},{coordinate:o.coordinate})};function _K(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function bK(e,t){var r=_K(e),n=t[0],o=t[1];if(r===void 0)return!1;var l=Math.min(n,o),h=Math.max(n,o);return r>=l&&r<=h}function wK(e,t,r){if(r==null||t==null)return!0;var n=ss(e,t);return n==null||!im(r)?!0:bK(n,r)}var R5=(e,t,r,n)=>{var o=e==null?void 0:e.index;if(o==null)return null;var l=Number(o);if(!so(l))return o;var h=0,u=1/0;t.length>0&&(u=t.length-1);var v=Math.max(h,Math.min(l,u)),x=t[v];return x==null||wK(x,r,n)?String(v):null},wP=(e,t,r,n,o,l,h,u)=>{if(!(l==null||u==null)){var v=h[0],x=v==null?void 0:u(v.positions,l);if(x!=null)return x;var A=o==null?void 0:o[Number(l)];if(A)switch(r){case"horizontal":return{x:A.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:A.coordinate}}}},SP=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var o;return r==="hover"?o=e.itemInteraction.hover.dataKey:o=e.itemInteraction.click.dataKey,o==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(l=>{var h;return((h=l.settings)===null||h===void 0?void 0:h.dataKey)===o})},Sx=e=>e.options.tooltipPayloadSearcher,U0=e=>e.tooltip;function G3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function U3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G3(Object(r),!0).forEach(function(n){SK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SK(e,t,r){return(t=EK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EK(e){var t=AK(e,"string");return typeof t=="symbol"?t:t+""}function AK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kK(e,t){return e??t}var EP=(e,t,r,n,o,l,h)=>{if(!(t==null||l==null)){var{chartData:u,computedData:v,dataStartIndex:x,dataEndIndex:A}=r,C=[];return e.reduce((P,O)=>{var U,{dataDefinedOnItem:W,settings:G}=O,X=kK(W,u),ae=Array.isArray(X)?ez(X,x,A):X,ne=(U=G==null?void 0:G.dataKey)!==null&&U!==void 0?U:n,ue=G==null?void 0:G.nameKey,Q;if(n&&Array.isArray(ae)&&!Array.isArray(ae[0])&&h==="axis"?Q=sM(ae,n,o):Q=l(ae,t,v,ue),Array.isArray(Q))Q.forEach(he=>{var Y=U3(U3({},G),{},{name:he.name,unit:he.unit,color:void 0,fill:void 0});P.push(uT({tooltipEntrySettings:Y,dataKey:he.dataKey,payload:he.payload,value:ss(he.payload,he.dataKey),name:he.name}))});else{var de;P.push(uT({tooltipEntrySettings:G,dataKey:ne,payload:Q,value:ss(Q,ne),name:(de=ss(Q,ue))!==null&&de!==void 0?de:G==null?void 0:G.name}))}return P},C)}},N5=Pt([Ws,Bi,L8,b5,qs],tP),CK=Pt([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),TK=Pt([qs,F0],I8),Ex=Pt([CK,Ws,TK],O8,{memoizeOptions:{resultEqualityCheck:lb}}),DK=Pt([Ex],e=>e.filter(ob)),MK=Pt([Ex],N8,{memoizeOptions:{resultEqualityCheck:lb}}),V0=Pt([MK,lm],B8),zK=Pt([DK,lm,Ws],M8),B5=Pt([V0,Ws,Ex],F8),AP=Pt([Ws],D5),PK=Pt([Ws],e=>e.allowDataOverflow),kP=Pt([AP,PK],s8),LK=Pt([Ex],e=>e.filter(ob)),IK=Pt([zK,LK,tb,S8],G8),OK=Pt([IK,lm,qs,kP],U8),jK=Pt([Ex],R8),RK=Pt([V0,Ws,jK,M5,qs],W8,{memoizeOptions:{resultEqualityCheck:sb}}),NK=Pt([H8,qs,F0],$0),BK=Pt([NK,qs],X8),FK=Pt([Z8,qs,F0],$0),$K=Pt([FK,qs],Y8),GK=Pt([K8,qs,F0],$0),UK=Pt([GK,qs],J8),VK=Pt([BK,UK,$K],n_),qK=Pt([Ws,AP,kP,OK,RK,VK,Bi,qs],Q8),Ax=Pt([Ws,Bi,V0,B5,tb,qs,qK],eP),WK=Pt([Ax,Ws,N5],rP),HK=Pt([Ws,Ax,WK,qs],nP),CP=e=>{var t=qs(e),r=F0(e),n=!1;return wx(e,t,r,n)},TP=Pt([Ws,CP],rb),DP=Pt([Ws,N5,HK,TP],P5),ZK=Pt([Bi,B5,Ws,qs],cP),KK=Pt([Bi,B5,Ws,qs],dP),XK=(e,t,r,n,o,l,h,u)=>{if(t){var{type:v}=t,x=Of(e,u);if(n){var A=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,C=v==="category"&&n.bandwidth?n.bandwidth()/A:0;return C=u==="angleAxis"&&o!=null&&(o==null?void 0:o.length)>=2?Vc(o[0]-o[1])*2*C:C,x&&h?h.map((P,O)=>({coordinate:n(P)+C,value:P,index:O,offset:C})):n.domain().map((P,O)=>({coordinate:n(P)+C,value:l?l[P]:P,index:O,offset:C}))}}},ag=Pt([Bi,Ws,N5,DP,CP,ZK,KK,qs],XK),F5=Pt([fP,pP,aK],(e,t,r)=>gP(r.shared,e,t)),MP=e=>e.tooltip.settings.trigger,$5=e=>e.tooltip.settings.defaultIndex,kx=Pt([U0,F5,MP,$5],bP),hy=Pt([kx,V0,_x,Ax],R5),zP=Pt([ag,hy],mP),PP=Pt([kx],e=>{if(e)return e.dataKey});Pt([kx],e=>{if(e)return e.graphicalItemId});var LP=Pt([U0,F5,MP,$5],SP),YK=Pt([eg,tg,Bi,ml,ag,$5,LP,Sx],wP),JK=Pt([kx,YK],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),QK=Pt([kx],e=>e.active),eX=Pt([LP,hy,lm,_x,zP,Sx,F5],EP),tX=Pt([eX],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function V3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function q3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V3(Object(r),!0).forEach(function(n){rX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rX(e,t,r){return(t=nX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nX(e){var t=iX(e,"string");return typeof t=="symbol"?t:t+""}function iX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aX=()=>un(Ws),oX=()=>{var e=aX(),t=un(ag),r=un(DP);return rm(!e||!r?void 0:q3(q3({},e),{},{scale:r}),t)};function W3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function r0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W3(Object(r),!0).forEach(function(n){sX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sX(e,t,r){return(t=lX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lX(e){var t=uX(e,"string");return typeof t=="symbol"?t:t+""}function uX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cX=(e,t,r,n)=>{var o=t.find(l=>l&&l.index===r);if(o){if(e==="horizontal")return{x:o.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:o.coordinate}}return{x:0,y:0}},dX=(e,t,r,n)=>{var o=t.find(x=>x&&x.index===r);if(o){if(e==="centric"){var l=o.coordinate,{radius:h}=n;return r0(r0(r0({},n),Bl(n.cx,n.cy,h,l)),{},{angle:l,radius:h})}var u=o.coordinate,{angle:v}=n;return r0(r0(r0({},n),Bl(n.cx,n.cy,u,v)),{},{angle:v,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function hX(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var IP=(e,t,r,n,o)=>{var l,h=-1,u=(l=t==null?void 0:t.length)!==null&&l!==void 0?l:0;if(u<=1||e==null)return 0;if(n==="angleAxis"&&o!=null&&Math.abs(Math.abs(o[1]-o[0])-360)<=1e-6)for(var v=0;v<u;v++){var x=v>0?r[v-1].coordinate:r[u-1].coordinate,A=r[v].coordinate,C=v>=u-1?r[0].coordinate:r[v+1].coordinate,P=void 0;if(Vc(A-x)!==Vc(C-A)){var O=[];if(Vc(C-A)===Vc(o[1]-o[0])){P=C;var U=A+o[1]-o[0];O[0]=Math.min(U,(U+x)/2),O[1]=Math.max(U,(U+x)/2)}else{P=x;var W=C+o[1]-o[0];O[0]=Math.min(A,(W+A)/2),O[1]=Math.max(A,(W+A)/2)}var G=[Math.min(A,(P+A)/2),Math.max(A,(P+A)/2)];if(e>G[0]&&e<=G[1]||e>=O[0]&&e<=O[1]){({index:h}=r[v]);break}}else{var X=Math.min(x,C),ae=Math.max(x,C);if(e>(X+A)/2&&e<=(ae+A)/2){({index:h}=r[v]);break}}}else if(t){for(var ne=0;ne<u;ne++)if(ne===0&&e<=(t[ne].coordinate+t[ne+1].coordinate)/2||ne>0&&ne<u-1&&e>(t[ne].coordinate+t[ne-1].coordinate)/2&&e<=(t[ne].coordinate+t[ne+1].coordinate)/2||ne===u-1&&e>(t[ne].coordinate+t[ne-1].coordinate)/2){({index:h}=t[ne]);break}}return h},OP=()=>un(b5),G5=(e,t)=>t,jP=(e,t,r)=>r,U5=(e,t,r,n)=>n,fX=Pt(ag,e=>z_(e,t=>t.coordinate)),V5=Pt([U0,G5,jP,U5],bP),q5=Pt([V5,V0,_x,Ax],R5),pX=(e,t,r)=>{if(t!=null){var n=U0(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},RP=Pt([U0,G5,jP,U5],SP),i_=Pt([eg,tg,Bi,ml,ag,U5,RP,Sx],wP),gX=Pt([V5,i_],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),NP=Pt([ag,q5],mP),mX=Pt([RP,q5,lm,_x,NP,Sx,G5],EP),yX=Pt([V5,q5],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),vX=(e,t,r,n,o,l,h)=>{if(!(!e||!r||!n||!o)&&hX(e,h)){var u=PG(e,t),v=IP(u,l,o,r,n),x=cX(t,o,v,e);return{activeIndex:String(v),activeCoordinate:x}}},xX=(e,t,r,n,o,l,h)=>{if(!(!e||!n||!o||!l||!r)){var u=rq(e,r);if(u){var v=LG(u,t),x=IP(v,h,l,n,o),A=dX(t,l,x,u);return{activeIndex:String(x),activeCoordinate:A}}}},_X=(e,t,r,n,o,l,h,u)=>{if(!(!e||!t||!n||!o||!l))return t==="horizontal"||t==="vertical"?vX(e,t,n,o,l,h,u):xX(e,t,r,n,o,l,h)},bX=Pt(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElementId:n.elementId}}),wX=Pt(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(pl)),r=Array.from(new Set(t));return r.sort((n,o)=>n-o)},{memoizeOptions:{resultEqualityCheck:oZ}});function H3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Z3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H3(Object(r),!0).forEach(function(n){SX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SX(e,t,r){return(t=EX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EX(e){var t=AX(e,"string");return typeof t=="symbol"?t:t+""}function AX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kX={},CX={zIndexMap:Object.values(pl).reduce((e,t)=>Z3(Z3({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),kX)},TX=new Set(Object.values(pl));function DX(e){return TX.has(e)}var BP=cc({name:"zIndex",initialState:CX,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:xo()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!DX(r)&&delete e.zIndexMap[r])},prepare:xo()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:o}=t.payload;e.zIndexMap[r]?o?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:o?void 0:n,panoramaElementId:o?n:void 0}},prepare:xo()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:xo()}}}),{registerZIndexPortal:MX,unregisterZIndexPortal:zX,registerZIndexPortalId:PX,unregisterZIndexPortalId:LX}=BP.actions,IX=BP.reducer;function $d(e){var{zIndex:t,children:r}=e,n=pU(),o=n&&t!==void 0&&t!==0,l=$l(),h=Lo();N.useLayoutEffect(()=>o?(h(MX({zIndex:t})),()=>{h(zX({zIndex:t}))}):ix,[h,t,o]);var u=un(x=>bX(x,t,l));if(!o)return r;if(!u)return null;var v=document.getElementById(u);return v?__.createPortal(r,v):null}function jS(){return jS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jS.apply(null,arguments)}function K3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function i1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K3(Object(r),!0).forEach(function(n){OX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OX(e,t,r){return(t=jX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jX(e){var t=RX(e,"string");return typeof t=="symbol"?t:t+""}function RX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NX(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return N.isValidElement(t)?N.cloneElement(t,n):N.createElement(r,n)}function BX(e){var t,{coordinate:r,payload:n,index:o,offset:l,tooltipAxisBandSize:h,layout:u,cursor:v,tooltipEventType:x,chartName:A}=e,C=r,P=n,O=o;if(!v||!C||A!=="ScatterChart"&&x!=="axis")return null;var U,W,G;if(A==="ScatterChart")U=C,W=mV,G=pl.cursorLine;else if(A==="BarChart")U=yV(u,C,l,h),W=wz,G=pl.cursorRectangle;else if(u==="radial"&&uM(C)){var{cx:X,cy:ae,radius:ne,startAngle:ue,endAngle:Q}=Sz(C);U={cx:X,cy:ae,startAngle:ue,endAngle:Q,innerRadius:ne,outerRadius:ne},W=Az,G=pl.cursorLine}else U={points:oq(u,C,l)},W=Tv,G=pl.cursorLine;var de=typeof v=="object"&&"className"in v?v.className:void 0,he=i1(i1(i1(i1({stroke:"#ccc",pointerEvents:"none"},l),U),rx(v)),{},{payload:P,payloadIndex:O,className:_a("recharts-tooltip-cursor",de)});return N.createElement($d,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:G},N.createElement(NX,{cursor:v,cursorComp:W,cursorProps:he}))}function FX(e){var t=oX(),r=dU(),n=gy(),o=OP();return t==null||r==null||n==null||o==null?null:N.createElement(BX,jS({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:o}))}var FP=N.createContext(null),$X=()=>N.useContext(FP),hw={exports:{}},X3;function GX(){return X3||(X3=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function o(v,x,A){this.fn=v,this.context=x,this.once=A||!1}function l(v,x,A,C,P){if(typeof A!="function")throw new TypeError("The listener must be a function");var O=new o(A,C||v,P),U=r?r+x:x;return v._events[U]?v._events[U].fn?v._events[U]=[v._events[U],O]:v._events[U].push(O):(v._events[U]=O,v._eventsCount++),v}function h(v,x){--v._eventsCount===0?v._events=new n:delete v._events[x]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var x=[],A,C;if(this._eventsCount===0)return x;for(C in A=this._events)t.call(A,C)&&x.push(r?C.slice(1):C);return Object.getOwnPropertySymbols?x.concat(Object.getOwnPropertySymbols(A)):x},u.prototype.listeners=function(x){var A=r?r+x:x,C=this._events[A];if(!C)return[];if(C.fn)return[C.fn];for(var P=0,O=C.length,U=new Array(O);P<O;P++)U[P]=C[P].fn;return U},u.prototype.listenerCount=function(x){var A=r?r+x:x,C=this._events[A];return C?C.fn?1:C.length:0},u.prototype.emit=function(x,A,C,P,O,U){var W=r?r+x:x;if(!this._events[W])return!1;var G=this._events[W],X=arguments.length,ae,ne;if(G.fn){switch(G.once&&this.removeListener(x,G.fn,void 0,!0),X){case 1:return G.fn.call(G.context),!0;case 2:return G.fn.call(G.context,A),!0;case 3:return G.fn.call(G.context,A,C),!0;case 4:return G.fn.call(G.context,A,C,P),!0;case 5:return G.fn.call(G.context,A,C,P,O),!0;case 6:return G.fn.call(G.context,A,C,P,O,U),!0}for(ne=1,ae=new Array(X-1);ne<X;ne++)ae[ne-1]=arguments[ne];G.fn.apply(G.context,ae)}else{var ue=G.length,Q;for(ne=0;ne<ue;ne++)switch(G[ne].once&&this.removeListener(x,G[ne].fn,void 0,!0),X){case 1:G[ne].fn.call(G[ne].context);break;case 2:G[ne].fn.call(G[ne].context,A);break;case 3:G[ne].fn.call(G[ne].context,A,C);break;case 4:G[ne].fn.call(G[ne].context,A,C,P);break;default:if(!ae)for(Q=1,ae=new Array(X-1);Q<X;Q++)ae[Q-1]=arguments[Q];G[ne].fn.apply(G[ne].context,ae)}}return!0},u.prototype.on=function(x,A,C){return l(this,x,A,C,!1)},u.prototype.once=function(x,A,C){return l(this,x,A,C,!0)},u.prototype.removeListener=function(x,A,C,P){var O=r?r+x:x;if(!this._events[O])return this;if(!A)return h(this,O),this;var U=this._events[O];if(U.fn)U.fn===A&&(!P||U.once)&&(!C||U.context===C)&&h(this,O);else{for(var W=0,G=[],X=U.length;W<X;W++)(U[W].fn!==A||P&&!U[W].once||C&&U[W].context!==C)&&G.push(U[W]);G.length?this._events[O]=G.length===1?G[0]:G:h(this,O)}return this},u.prototype.removeAllListeners=function(x){var A;return x?(A=r?r+x:x,this._events[A]&&h(this,A)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u})(hw)),hw.exports}var UX=GX();const VX=Fl(UX);var Kv=new VX,RS="recharts.syncEvent.tooltip",Y3="recharts.syncEvent.brush";function W5(e,t){if(t){var r=Number.parseInt(t,10);if(!Ch(r))return e==null?void 0:e[r]}}var qX={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},$P=cc({name:"options",initialState:qX,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),WX=$P.reducer,{createEventEmitter:HX}=$P.actions;function ZX(e){return e.tooltip.syncInteraction}var KX={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},GP=cc({name:"chartData",initialState:KX,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:J3,setDataStartEndIndexes:XX,setComputedData:jie}=GP.actions,YX=GP.reducer,JX=["x","y"];function Q3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function n0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q3(Object(r),!0).forEach(function(n){QX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QX(e,t,r){return(t=eY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eY(e){var t=tY(e,"string");return typeof t=="symbol"?t:t+""}function tY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rY(e,t){if(e==null)return{};var r,n,o=nY(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function nY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function iY(){var e=un(w5),t=un(S5),r=Lo(),n=un(E8),o=un(ag),l=gy(),h=V_(),u=un(v=>v.rootProps.className);N.useEffect(()=>{if(e==null)return ix;var v=(x,A,C)=>{if(t!==C&&e===x){if(n==="index"){var P;if(h&&A!==null&&A!==void 0&&(P=A.payload)!==null&&P!==void 0&&P.coordinate&&A.payload.sourceViewBox){var O=A.payload.coordinate,{x:U,y:W}=O,G=rY(O,JX),{x:X,y:ae,width:ne,height:ue}=A.payload.sourceViewBox,Q=n0(n0({},G),{},{x:h.x+(ne?(U-X)/ne:0)*h.width,y:h.y+(ue?(W-ae)/ue:0)*h.height});r(n0(n0({},A),{},{payload:n0(n0({},A.payload),{},{coordinate:Q})}))}else r(A);return}if(o!=null){var de;if(typeof n=="function"){var he={activeTooltipIndex:A.payload.index==null?void 0:Number(A.payload.index),isTooltipActive:A.payload.active,activeIndex:A.payload.index==null?void 0:Number(A.payload.index),activeLabel:A.payload.label,activeDataKey:A.payload.dataKey,activeCoordinate:A.payload.coordinate},Y=n(o,he);de=o[Y]}else n==="value"&&(de=o.find(pe=>String(pe.value)===A.payload.label));var{coordinate:ie}=A.payload;if(de==null||A.payload.active===!1||ie==null||h==null){r(IS({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:Ce,y:_e}=ie,Me=Math.min(Ce,h.x+h.width),me=Math.min(_e,h.y+h.height),Ke={x:l==="horizontal"?de.coordinate:Me,y:l==="horizontal"?me:de.coordinate},Re=IS({active:A.payload.active,coordinate:Ke,dataKey:A.payload.dataKey,index:String(de.index),label:A.payload.label,sourceViewBox:A.payload.sourceViewBox,graphicalItemId:A.payload.graphicalItemId});r(Re)}}};return Kv.on(RS,v),()=>{Kv.off(RS,v)}},[u,r,t,e,n,o,l,h])}function aY(){var e=un(w5),t=un(S5),r=Lo();N.useEffect(()=>{if(e==null)return ix;var n=(o,l,h)=>{t!==h&&e===o&&r(XX(l))};return Kv.on(Y3,n),()=>{Kv.off(Y3,n)}},[r,t,e])}function oY(){var e=Lo();N.useEffect(()=>{e(HX())},[e]),iY(),aY()}function sY(e,t,r,n,o,l){var h=un(O=>pX(O,e,t)),u=un(S5),v=un(w5),x=un(E8),A=un(ZX),C=A==null?void 0:A.active,P=V_();N.useEffect(()=>{if(!C&&v!=null&&u!=null){var O=IS({active:l,coordinate:r,dataKey:h,index:o,label:typeof n=="number"?String(n):n,sourceViewBox:P,graphicalItemId:void 0});Kv.emit(RS,v,O,u)}},[C,r,h,o,n,u,v,x,l,P])}function e4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function t4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e4(Object(r),!0).forEach(function(n){lY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lY(e,t,r){return(t=uY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uY(e){var t=cY(e,"string");return typeof t=="symbol"?t:t+""}function cY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dY(e){return e.dataKey}function hY(e,t){return N.isValidElement(e)?N.cloneElement(e,t):typeof e=="function"?N.createElement(e,t):N.createElement(KU,t)}var r4=[],fY={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function y1(e){var t,r,n=gl(e,fY),{active:o,allowEscapeViewBox:l,animationDuration:h,animationEasing:u,content:v,filterNull:x,isAnimationActive:A,offset:C,payloadUniqBy:P,position:O,reverseDirection:U,useTranslate3d:W,wrapperStyle:G,cursor:X,shared:ae,trigger:ne,defaultIndex:ue,portal:Q,axisId:de}=n,he=Lo(),Y=typeof ue=="number"?String(ue):ue;N.useEffect(()=>{he(cK({shared:ae,trigger:ne,axisId:de,active:o,defaultIndex:Y}))},[he,ae,ne,de,o,Y]);var ie=V_(),Ce=yz(),_e=iK(ae),{activeIndex:Me,isActive:me}=(t=un(Xt=>yX(Xt,_e,ne,Y)))!==null&&t!==void 0?t:{},Ke=un(Xt=>mX(Xt,_e,ne,Y)),Re=un(Xt=>NP(Xt,_e,ne,Y)),pe=un(Xt=>gX(Xt,_e,ne,Y)),ge=Ke,ze=$X(),Pe=(r=o??me)!==null&&r!==void 0?r:!1,[st,Ae]=EM([ge,Pe]),qe=_e==="axis"?Re:void 0;sY(_e,ne,pe,qe,Me,Pe);var Ze=Q??ze;if(Ze==null||ie==null||_e==null)return null;var zt=ge??r4;Pe||(zt=r4),x&&zt.length&&(zt=xM(zt.filter(Xt=>Xt.value!=null&&(Xt.hide!==!0||n.includeHidden)),P,dY));var Tt=zt.length>0,rr=N.createElement(rV,{allowEscapeViewBox:l,animationDuration:h,animationEasing:u,isAnimationActive:A,active:Pe,coordinate:pe,hasPayload:Tt,offset:C,position:O,reverseDirection:U,useTranslate3d:W,viewBox:ie,wrapperStyle:G,lastBoundingBox:st,innerRef:Ae,hasPortalFromProps:!!Q},hY(v,t4(t4({},n),{},{payload:zt,label:qe,active:Pe,activeIndex:Me,coordinate:pe,accessibilityLayer:Ce})));return N.createElement(N.Fragment,null,__.createPortal(rr,Ze),Pe&&N.createElement(FX,{cursor:X,tooltipEventType:_e,coordinate:pe,payload:zt,index:Me}))}var UP=e=>null;UP.displayName="Cell";function pY(e,t,r){return(t=gY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gY(e){var t=mY(e,"string");return typeof t=="symbol"?t:t+""}function mY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class yY{constructor(t){pY(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function n4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function vY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n4(Object(r),!0).forEach(function(n){xY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xY(e,t,r){return(t=_Y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Y(e){var t=bY(e,"string");return typeof t=="symbol"?t:t+""}function bY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wY={cacheSize:2e3,enableCache:!0},VP=vY({},wY),i4=new yY(VP.cacheSize),SY={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},a4="recharts_measurement_span";function EY(e,t){var r=t.fontSize||"",n=t.fontFamily||"",o=t.fontWeight||"",l=t.fontStyle||"",h=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(o,"|").concat(l,"|").concat(h,"|").concat(u)}var o4=(e,t)=>{try{var r=document.getElementById(a4);r||(r=document.createElement("span"),r.setAttribute("id",a4),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,SY,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Dv=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||j0.isSsr)return{width:0,height:0};if(!VP.enableCache)return o4(t,r);var n=EY(t,r),o=i4.get(n);if(o)return o;var l=o4(t,r);return i4.set(n,l),l},s4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,l4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,AY=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,kY=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,qP={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},CY=Object.keys(qP),l0="NaN";function TY(e,t){return e*qP[t]}class lc{static parse(t){var r,[,n,o]=(r=kY.exec(t))!==null&&r!==void 0?r:[];return new lc(parseFloat(n),o??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Ch(t)&&(this.unit=""),r!==""&&!AY.test(r)&&(this.num=NaN,this.unit=""),CY.includes(r)&&(this.num=TY(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new lc(NaN,""):new lc(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new lc(NaN,""):new lc(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new lc(NaN,""):new lc(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new lc(NaN,""):new lc(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ch(this.num)}}function WP(e){if(e.includes(l0))return l0;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,o,l]=(r=s4.exec(t))!==null&&r!==void 0?r:[],h=lc.parse(n??""),u=lc.parse(l??""),v=o==="*"?h.multiply(u):h.divide(u);if(v.isNaN())return l0;t=t.replace(s4,v.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var x,[,A,C,P]=(x=l4.exec(t))!==null&&x!==void 0?x:[],O=lc.parse(A??""),U=lc.parse(P??""),W=C==="+"?O.add(U):O.subtract(U);if(W.isNaN())return l0;t=t.replace(l4,W.toString())}return t}var u4=/\(([^()]*)\)/;function DY(e){for(var t=e,r;(r=u4.exec(t))!=null;){var[,n]=r;t=t.replace(u4,WP(n))}return t}function MY(e){var t=e.replace(/\s+/g,"");return t=DY(t),t=WP(t),t}function zY(e){try{return MY(e)}catch{return l0}}function fw(e){var t=zY(e.slice(5,-1));return t===l0?"":t}var PY=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],LY=["dx","dy","angle","className","breakAll"];function NS(){return NS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},NS.apply(null,arguments)}function c4(e,t){if(e==null)return{};var r,n,o=IY(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function IY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var HP=/[ \f\n\r\t\v\u2028\u2029]+/,ZP=e=>{var{children:t,breakAll:r,style:n}=e;try{var o=[];ao(t)||(r?o=t.toString().split(""):o=t.toString().split(HP));var l=o.map(u=>({word:u,width:Dv(u,n).width})),h=r?0:Dv("",n).width;return{wordsWithComputedWidth:l,spaceWidth:h}}catch{return null}};function OY(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var KP=(e,t,r,n)=>e.reduce((o,l)=>{var{word:h,width:u}=l,v=o[o.length-1];if(v&&u!=null&&(t==null||n||v.width+u+r<Number(t)))v.words.push(h),v.width+=u+r;else{var x={words:[h],width:u};o.push(x)}return o},[]),XP=e=>e.reduce((t,r)=>t.width>r.width?t:r),jY="",d4=(e,t,r,n,o,l,h,u)=>{var v=e.slice(0,t),x=ZP({breakAll:r,style:n,children:v+jY});if(!x)return[!1,[]];var A=KP(x.wordsWithComputedWidth,l,h,u),C=A.length>o||XP(A).width>Number(l);return[C,A]},RY=(e,t,r,n,o)=>{var{maxLines:l,children:h,style:u,breakAll:v}=e,x=tn(l),A=String(h),C=KP(t,n,r,o);if(!x||o)return C;var P=C.length>l||XP(C).width>Number(n);if(!P)return C;for(var O=0,U=A.length-1,W=0,G;O<=U&&W<=A.length-1;){var X=Math.floor((O+U)/2),ae=X-1,[ne,ue]=d4(A,ae,v,u,l,n,r,o),[Q]=d4(A,X,v,u,l,n,r,o);if(!ne&&!Q&&(O=X+1),ne&&Q&&(U=X-1),!ne&&Q){G=ue;break}W++}return G||C},h4=e=>{var t=ao(e)?[]:e.toString().split(HP);return[{words:t,width:void 0}]},NY=e=>{var{width:t,scaleToFit:r,children:n,style:o,breakAll:l,maxLines:h}=e;if((t||r)&&!j0.isSsr){var u,v,x=ZP({breakAll:l,children:n,style:o});if(x){var{wordsWithComputedWidth:A,spaceWidth:C}=x;u=A,v=C}else return h4(n);return RY({breakAll:l,children:n,maxLines:h,style:o},u,v,t,!!r)}return h4(n)},YP="#808080",BY={angle:0,breakAll:!1,capHeight:"0.71em",fill:YP,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},H5=N.forwardRef((e,t)=>{var r=gl(e,BY),{x:n,y:o,lineHeight:l,capHeight:h,fill:u,scaleToFit:v,textAnchor:x,verticalAnchor:A}=r,C=c4(r,PY),P=N.useMemo(()=>NY({breakAll:C.breakAll,children:C.children,maxLines:C.maxLines,scaleToFit:v,style:C.style,width:C.width}),[C.breakAll,C.children,C.maxLines,v,C.style,C.width]),{dx:O,dy:U,angle:W,className:G,breakAll:X}=C,ae=c4(C,LY);if(!Df(n)||!Df(o)||P.length===0)return null;var ne=Number(n)+(tn(O)?O:0),ue=Number(o)+(tn(U)?U:0);if(!so(ne)||!so(ue))return null;var Q;switch(A){case"start":Q=fw("calc(".concat(h,")"));break;case"middle":Q=fw("calc(".concat((P.length-1)/2," * -").concat(l," + (").concat(h," / 2))"));break;default:Q=fw("calc(".concat(P.length-1," * -").concat(l,")"));break}var de=[];if(v){var he=P[0].width,{width:Y}=C;de.push("scale(".concat(tn(Y)&&tn(he)?Y/he:1,")"))}return W&&de.push("rotate(".concat(W,", ").concat(ne,", ").concat(ue,")")),de.length&&(ae.transform=de.join(" ")),N.createElement("text",NS({},iu(ae),{ref:t,x:ne,y:ue,className:_a("recharts-text",G),textAnchor:x,fill:u.includes("url")?YP:u}),P.map((ie,Ce)=>{var _e=ie.words.join(X?"":" ");return N.createElement("tspan",{x:ne,dy:Ce===0?Q:l,key:"".concat(_e,"-").concat(Ce)},_e)}))});H5.displayName="Text";var FY=["labelRef"];function $Y(e,t){if(e==null)return{};var r,n,o=GY(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function GY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function f4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function os(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f4(Object(r),!0).forEach(function(n){UY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UY(e,t,r){return(t=VY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VY(e){var t=qY(e,"string");return typeof t=="symbol"?t:t+""}function qY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rp(){return Rp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rp.apply(null,arguments)}var JP=N.createContext(null),WY=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:o,width:l,height:h,children:u}=e,v=N.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:o,width:l,height:h}),[t,r,n,o,l,h]);return N.createElement(JP.Provider,{value:v},u)},QP=()=>{var e=N.useContext(JP),t=V_();return e||oz(t)},HY=N.createContext(null),ZY=()=>{var e=N.useContext(HY),t=un(D8);return e||t},KY=e=>{var{value:t,formatter:r}=e,n=ao(e.children)?t:e.children;return typeof r=="function"?r(n):n},Z5=e=>e!=null&&typeof e=="function",XY=(e,t)=>{var r=Vc(t-e),n=Math.min(Math.abs(t-e),360);return r*n},YY=(e,t,r,n,o)=>{var{offset:l,className:h}=e,{cx:u,cy:v,innerRadius:x,outerRadius:A,startAngle:C,endAngle:P,clockWise:O}=o,U=(x+A)/2,W=XY(C,P),G=W>=0?1:-1,X,ae;switch(t){case"insideStart":X=C+G*l,ae=O;break;case"insideEnd":X=P-G*l,ae=!O;break;case"end":X=P+G*l,ae=O;break;default:throw new Error("Unsupported position ".concat(t))}ae=W<=0?ae:!ae;var ne=Bl(u,v,U,X),ue=Bl(u,v,U,X+(ae?1:-1)*359),Q="M".concat(ne.x,",").concat(ne.y,`
    A`).concat(U,",").concat(U,",0,1,").concat(ae?0:1,`,
    `).concat(ue.x,",").concat(ue.y),de=ao(e.id)?Ov("recharts-radial-line-"):e.id;return N.createElement("text",Rp({},n,{dominantBaseline:"central",className:_a("recharts-radial-bar-label",h)}),N.createElement("defs",null,N.createElement("path",{id:de,d:Q})),N.createElement("textPath",{xlinkHref:"#".concat(de)},r))},JY=(e,t,r)=>{var{cx:n,cy:o,innerRadius:l,outerRadius:h,startAngle:u,endAngle:v}=e,x=(u+v)/2;if(r==="outside"){var{x:A,y:C}=Bl(n,o,h+t,x);return{x:A,y:C,textAnchor:A>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:o,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:o,textAnchor:"middle",verticalAnchor:"end"};var P=(l+h)/2,{x:O,y:U}=Bl(n,o,P,x);return{x:O,y:U,textAnchor:"middle",verticalAnchor:"middle"}},BS=e=>"cx"in e&&tn(e.cx),QY=(e,t)=>{var{parentViewBox:r,offset:n,position:o}=e,l;r!=null&&!BS(r)&&(l=r);var{x:h,y:u,upperWidth:v,lowerWidth:x,height:A}=t,C=h,P=h+(v-x)/2,O=(C+P)/2,U=(v+x)/2,W=C+v/2,G=A>=0?1:-1,X=G*n,ae=G>0?"end":"start",ne=G>0?"start":"end",ue=v>=0?1:-1,Q=ue*n,de=ue>0?"end":"start",he=ue>0?"start":"end";if(o==="top"){var Y={x:C+v/2,y:u-X,textAnchor:"middle",verticalAnchor:ae};return os(os({},Y),l?{height:Math.max(u-l.y,0),width:v}:{})}if(o==="bottom"){var ie={x:P+x/2,y:u+A+X,textAnchor:"middle",verticalAnchor:ne};return os(os({},ie),l?{height:Math.max(l.y+l.height-(u+A),0),width:x}:{})}if(o==="left"){var Ce={x:O-Q,y:u+A/2,textAnchor:de,verticalAnchor:"middle"};return os(os({},Ce),l?{width:Math.max(Ce.x-l.x,0),height:A}:{})}if(o==="right"){var _e={x:O+U+Q,y:u+A/2,textAnchor:he,verticalAnchor:"middle"};return os(os({},_e),l?{width:Math.max(l.x+l.width-_e.x,0),height:A}:{})}var Me=l?{width:U,height:A}:{};return o==="insideLeft"?os({x:O+Q,y:u+A/2,textAnchor:he,verticalAnchor:"middle"},Me):o==="insideRight"?os({x:O+U-Q,y:u+A/2,textAnchor:de,verticalAnchor:"middle"},Me):o==="insideTop"?os({x:C+v/2,y:u+X,textAnchor:"middle",verticalAnchor:ne},Me):o==="insideBottom"?os({x:P+x/2,y:u+A-X,textAnchor:"middle",verticalAnchor:ae},Me):o==="insideTopLeft"?os({x:C+Q,y:u+X,textAnchor:he,verticalAnchor:ne},Me):o==="insideTopRight"?os({x:C+v-Q,y:u+X,textAnchor:de,verticalAnchor:ne},Me):o==="insideBottomLeft"?os({x:P+Q,y:u+A-X,textAnchor:he,verticalAnchor:ae},Me):o==="insideBottomRight"?os({x:P+x-Q,y:u+A-X,textAnchor:de,verticalAnchor:ae},Me):o&&typeof o=="object"&&(tn(o.x)||qp(o.x))&&(tn(o.y)||qp(o.y))?os({x:h+Th(o.x,U),y:u+Th(o.y,A),textAnchor:"end",verticalAnchor:"end"},Me):os({x:W,y:u+A/2,textAnchor:"middle",verticalAnchor:"middle"},Me)},eJ={angle:0,offset:5,zIndex:pl.label,position:"middle",textBreakAll:!1};function Qg(e){var t=gl(e,eJ),{viewBox:r,position:n,value:o,children:l,content:h,className:u="",textBreakAll:v,labelRef:x}=t,A=ZY(),C=QP(),P=n==="center"?C:A??C,O,U,W;if(r==null?O=P:BS(r)?O=r:O=oz(r),!O||ao(o)&&ao(l)&&!N.isValidElement(h)&&typeof h!="function")return null;var G=os(os({},t),{},{viewBox:O});if(N.isValidElement(h)){var{labelRef:X}=G,ae=$Y(G,FY);return N.cloneElement(h,ae)}if(typeof h=="function"){if(U=N.createElement(h,G),N.isValidElement(U))return U}else U=KY(t);var ne=iu(t);if(BS(O)){if(n==="insideStart"||n==="insideEnd"||n==="end")return YY(t,n,U,ne,O);W=JY(O,t.offset,t.position)}else W=QY(t,O);return N.createElement($d,{zIndex:t.zIndex},N.createElement(H5,Rp({ref:x,className:_a("recharts-label",u)},ne,W,{textAnchor:OY(ne.textAnchor)?ne.textAnchor:W.textAnchor,breakAll:v}),U))}Qg.displayName="Label";var tJ=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?N.createElement(Qg,Rp({key:"label-implicit"},n)):Df(e)?N.createElement(Qg,Rp({key:"label-implicit",value:e},n)):N.isValidElement(e)?e.type===Qg?N.cloneElement(e,os({key:"label-implicit"},n)):N.createElement(Qg,Rp({key:"label-implicit",content:e},n)):Z5(e)?N.createElement(Qg,Rp({key:"label-implicit",content:e},n)):e&&typeof e=="object"?N.createElement(Qg,Rp({},e,{key:"label-implicit"},n)):null};function rJ(e){var{label:t,labelRef:r}=e,n=QP();return tJ(t,n,r)||null}var pw={},gw={},p4;function nJ(){return p4||(p4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(gw)),gw}var mw={},g4;function iJ(){return g4||(g4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(mw)),mw}var m4;function aJ(){return m4||(m4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nJ(),r=iJ(),n=jE();function o(l){if(n.isArrayLike(l))return t.last(r.toArray(l))}e.last=o})(pw)),pw}var yw,y4;function oJ(){return y4||(y4=1,yw=aJ().last),yw}var sJ=oJ();const lJ=Fl(sJ);var uJ=["valueAccessor"],cJ=["dataKey","clockWise","id","textBreakAll","zIndex"];function a_(){return a_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a_.apply(null,arguments)}function v4(e,t){if(e==null)return{};var r,n,o=dJ(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function dJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var hJ=e=>Array.isArray(e.value)?lJ(e.value):e.value,eL=N.createContext(void 0),K5=eL.Provider,tL=N.createContext(void 0);tL.Provider;function fJ(){return N.useContext(eL)}function pJ(){return N.useContext(tL)}function v1(e){var{valueAccessor:t=hJ}=e,r=v4(e,uJ),{dataKey:n,clockWise:o,id:l,textBreakAll:h,zIndex:u}=r,v=v4(r,cJ),x=fJ(),A=pJ(),C=x||A;return!C||!C.length?null:N.createElement($d,{zIndex:u??pl.label},N.createElement(au,{className:"recharts-label-list"},C.map((P,O)=>{var U,W=ao(n)?t(P,O):ss(P&&P.payload,n),G=ao(l)?{}:{id:"".concat(l,"-").concat(O)};return N.createElement(Qg,a_({key:"label-".concat(O)},iu(P),v,G,{fill:(U=r.fill)!==null&&U!==void 0?U:P.fill,parentViewBox:P.parentViewBox,value:W,textBreakAll:h,viewBox:P.viewBox,index:O,zIndex:0}))})))}v1.displayName="LabelList";function X5(e){var{label:t}=e;return t?t===!0?N.createElement(v1,{key:"labelList-implicit"}):N.isValidElement(t)||Z5(t)?N.createElement(v1,{key:"labelList-implicit",content:t}):typeof t=="object"?N.createElement(v1,a_({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function FS(){return FS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},FS.apply(null,arguments)}var rL=e=>{var{cx:t,cy:r,r:n,className:o}=e,l=_a("recharts-dot",o);return tn(t)&&tn(r)&&tn(n)?N.createElement("circle",FS({},Id(e),OE(e),{className:l,cx:t,cy:r,r:n})):null},gJ={radiusAxis:{},angleAxis:{}},nL=cc({name:"polarAxis",initialState:gJ,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Rie,removeRadiusAxis:Nie,addAngleAxis:Bie,removeAngleAxis:Fie}=nL.actions,mJ=nL.reducer,vw={exports:{}},xa={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x4;function yJ(){if(x4)return xa;x4=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),u=Symbol.for("react.server_context"),v=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),O=Symbol.for("react.offscreen"),U;U=Symbol.for("react.module.reference");function W(G){if(typeof G=="object"&&G!==null){var X=G.$$typeof;switch(X){case e:switch(G=G.type,G){case r:case o:case n:case x:case A:return G;default:switch(G=G&&G.$$typeof,G){case u:case h:case v:case P:case C:case l:return G;default:return X}}case t:return X}}}return xa.ContextConsumer=h,xa.ContextProvider=l,xa.Element=e,xa.ForwardRef=v,xa.Fragment=r,xa.Lazy=P,xa.Memo=C,xa.Portal=t,xa.Profiler=o,xa.StrictMode=n,xa.Suspense=x,xa.SuspenseList=A,xa.isAsyncMode=function(){return!1},xa.isConcurrentMode=function(){return!1},xa.isContextConsumer=function(G){return W(G)===h},xa.isContextProvider=function(G){return W(G)===l},xa.isElement=function(G){return typeof G=="object"&&G!==null&&G.$$typeof===e},xa.isForwardRef=function(G){return W(G)===v},xa.isFragment=function(G){return W(G)===r},xa.isLazy=function(G){return W(G)===P},xa.isMemo=function(G){return W(G)===C},xa.isPortal=function(G){return W(G)===t},xa.isProfiler=function(G){return W(G)===o},xa.isStrictMode=function(G){return W(G)===n},xa.isSuspense=function(G){return W(G)===x},xa.isSuspenseList=function(G){return W(G)===A},xa.isValidElementType=function(G){return typeof G=="string"||typeof G=="function"||G===r||G===o||G===n||G===x||G===A||G===O||typeof G=="object"&&G!==null&&(G.$$typeof===P||G.$$typeof===C||G.$$typeof===l||G.$$typeof===h||G.$$typeof===v||G.$$typeof===U||G.getModuleId!==void 0)},xa.typeOf=W,xa}var _4;function vJ(){return _4||(_4=1,vw.exports=yJ()),vw.exports}var xJ=vJ(),b4=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",w4=null,xw=null,iL=e=>{if(e===w4&&Array.isArray(xw))return xw;var t=[];return N.Children.forEach(e,r=>{ao(r)||(xJ.isFragment(r)?t=t.concat(iL(r.props.children)):t.push(r))}),xw=t,w4=e,t};function _J(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(o=>b4(o)):n=[b4(t)],iL(e).forEach(o=>{var l=y0(o,"type.displayName")||y0(o,"type.name");l&&n.indexOf(l)!==-1&&r.push(o)}),r}var Y5=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,_w={},S4;function bJ(){return S4||(S4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var o;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const l=r[Symbol.toStringTag];return l==null||!((o=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&o.writable)?!1:r.toString()===`[object ${l}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(_w)),_w}var bw,E4;function wJ(){return E4||(E4=1,bw=bJ().isPlainObject),bw}var SJ=wJ();const EJ=Fl(SJ);function A4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function k4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A4(Object(r),!0).forEach(function(n){AJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AJ(e,t,r){return(t=kJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kJ(e){var t=CJ(e,"string");return typeof t=="symbol"?t:t+""}function CJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function o_(){return o_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o_.apply(null,arguments)}var C4=(e,t,r,n,o)=>{var l=r-n,h;return h="M ".concat(e,",").concat(t),h+="L ".concat(e+r,",").concat(t),h+="L ".concat(e+r-l/2,",").concat(t+o),h+="L ".concat(e+r-l/2-n,",").concat(t+o),h+="L ".concat(e,",").concat(t," Z"),h},TJ={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},DJ=e=>{var t=gl(e,TJ),{x:r,y:n,upperWidth:o,lowerWidth:l,height:h,className:u}=t,{animationEasing:v,animationDuration:x,animationBegin:A,isUpdateAnimationActive:C}=t,P=N.useRef(null),[O,U]=N.useState(-1),W=N.useRef(o),G=N.useRef(l),X=N.useRef(h),ae=N.useRef(r),ne=N.useRef(n),ue=dx(e,"trapezoid-");if(N.useEffect(()=>{if(P.current&&P.current.getTotalLength)try{var Ke=P.current.getTotalLength();Ke&&U(Ke)}catch{}},[]),r!==+r||n!==+n||o!==+o||l!==+l||h!==+h||o===0&&l===0||h===0)return null;var Q=_a("recharts-trapezoid",u);if(!C)return N.createElement("g",null,N.createElement("path",o_({},iu(t),{className:Q,d:C4(r,n,o,l,h)})));var de=W.current,he=G.current,Y=X.current,ie=ae.current,Ce=ne.current,_e="0px ".concat(O===-1?1:O,"px"),Me="".concat(O,"px 0px"),me=vz(["strokeDasharray"],x,v);return N.createElement(cx,{animationId:ue,key:ue,canBegin:O>0,duration:x,easing:v,isActive:C,begin:A},Ke=>{var Re=Pa(de,o,Ke),pe=Pa(he,l,Ke),ge=Pa(Y,h,Ke),ze=Pa(ie,r,Ke),Pe=Pa(Ce,n,Ke);P.current&&(W.current=Re,G.current=pe,X.current=ge,ae.current=ze,ne.current=Pe);var st=Ke>0?{transition:me,strokeDasharray:Me}:{strokeDasharray:_e};return N.createElement("path",o_({},iu(t),{className:Q,d:C4(ze,Pe,Re,pe,ge),ref:P,style:k4(k4({},st),t.style)}))})},MJ=["option","shapeType","propTransformer","activeClassName"];function zJ(e,t){if(e==null)return{};var r,n,o=PJ(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function PJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function T4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function s_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T4(Object(r),!0).forEach(function(n){LJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LJ(e,t,r){return(t=IJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IJ(e){var t=OJ(e,"string");return typeof t=="symbol"?t:t+""}function OJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jJ(e,t){return s_(s_({},t),e)}function RJ(e,t){return e==="symbols"}function D4(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return N.createElement(wz,r);case"trapezoid":return N.createElement(DJ,r);case"sector":return N.createElement(Az,r);case"symbols":if(RJ(t))return N.createElement(IE,r);break;case"curve":return N.createElement(Tv,r);default:return null}}function NJ(e){return N.isValidElement(e)?e.props:e}function aL(e){var{option:t,shapeType:r,propTransformer:n=jJ,activeClassName:o="recharts-active-shape"}=e,l=zJ(e,MJ),h;if(N.isValidElement(t))h=N.cloneElement(t,s_(s_({},l),NJ(t)));else if(typeof t=="function")h=t(l,l.index);else if(EJ(t)&&typeof t!="boolean"){var u=n(t,l);h=N.createElement(D4,{shapeType:r,elementProps:u})}else{var v=l;h=N.createElement(D4,{shapeType:r,elementProps:v})}return l.isActive?N.createElement(au,{className:o},h):h}var oL=(e,t,r)=>{var n=Lo();return(o,l)=>h=>{e==null||e(o,l,h),n(vP({activeIndex:String(l),activeDataKey:t,activeCoordinate:o.tooltipPosition,activeGraphicalItemId:r}))}},sL=e=>{var t=Lo();return(r,n)=>o=>{e==null||e(r,n,o),t(dK())}},lL=(e,t,r)=>{var n=Lo();return(o,l)=>h=>{e==null||e(o,l,h),n(hK({activeIndex:String(l),activeDataKey:t,activeCoordinate:o.tooltipPosition,activeGraphicalItemId:r}))}};function J5(e){var{tooltipEntrySettings:t}=e,r=Lo(),n=$l(),o=N.useRef(null);return N.useLayoutEffect(()=>{n||(o.current===null?r(sK(t)):o.current!==t&&r(lK({prev:o.current,next:t})),o.current=t)},[t,r,n]),N.useLayoutEffect(()=>()=>{o.current&&(r(uK(o.current)),o.current=null)},[r]),null}function Q5(e){var{legendPayload:t}=e,r=Lo(),n=$l(),o=N.useRef(null);return N.useLayoutEffect(()=>{n||(o.current===null?r(TU(t)):o.current!==t&&r(DU({prev:o.current,next:t})),o.current=t)},[r,n,t]),N.useLayoutEffect(()=>()=>{o.current&&(r(MU(o.current)),o.current=null)},[r]),null}var ww,BJ=()=>{var[e]=N.useState(()=>Ov("uid-"));return e},FJ=(ww=sI.useId)!==null&&ww!==void 0?ww:BJ;function uL(e,t){var r=FJ();return t||(e?"".concat(e,"-").concat(r):r)}var $J=N.createContext(void 0),eA=e=>{var{id:t,type:r,children:n}=e,o=uL("recharts-".concat(r),t);return N.createElement($J.Provider,{value:o},n(o))},GJ={cartesianItems:[],polarItems:[]},cL=cc({name:"graphicalItems",initialState:GJ,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:xo()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,o=kh(e).cartesianItems.indexOf(r);o>-1&&(e.cartesianItems[o]=n)},prepare:xo()},removeCartesianGraphicalItem:{reducer(e,t){var r=kh(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:xo()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:xo()},removePolarGraphicalItem:{reducer(e,t){var r=kh(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:xo()}}}),{addCartesianGraphicalItem:UJ,replaceCartesianGraphicalItem:VJ,removeCartesianGraphicalItem:qJ,addPolarGraphicalItem:$ie,removePolarGraphicalItem:Gie}=cL.actions,WJ=cL.reducer,HJ=e=>{var t=Lo(),r=N.useRef(null);return N.useLayoutEffect(()=>{r.current===null?t(UJ(e)):r.current!==e&&t(VJ({prev:r.current,next:e})),r.current=e},[t,e]),N.useLayoutEffect(()=>()=>{r.current&&(t(qJ(r.current)),r.current=null)},[t]),null},tA=N.memo(HJ),ZJ=["points"];function M4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Sw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M4(Object(r),!0).forEach(function(n){KJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KJ(e,t,r){return(t=XJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XJ(e){var t=YJ(e,"string");return typeof t=="symbol"?t:t+""}function YJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function l_(){return l_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l_.apply(null,arguments)}function JJ(e,t){if(e==null)return{};var r,n,o=QJ(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function QJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function eQ(e){var{option:t,dotProps:r,className:n}=e;if(N.isValidElement(t))return N.cloneElement(t,r);if(typeof t=="function")return t(r);var o=_a(n,typeof t!="boolean"?t.className:""),l=r??{},{points:h}=l,u=JJ(l,ZJ);return N.createElement(rL,l_({},u,{className:o}))}function tQ(e,t){return e==null?!1:t?!0:e.length===1}function dL(e){var{points:t,dot:r,className:n,dotClassName:o,dataKey:l,baseProps:h,needClip:u,clipPathId:v,zIndex:x=pl.scatter}=e;if(!tQ(t,r))return null;var A=Y5(r),C=lF(r),P=t.map((U,W)=>{var G,X,ae=Sw(Sw(Sw({r:3},h),C),{},{index:W,cx:(G=U.x)!==null&&G!==void 0?G:void 0,cy:(X=U.y)!==null&&X!==void 0?X:void 0,dataKey:l,value:U.value,payload:U.payload,points:t});return N.createElement(eQ,{key:"dot-".concat(W),option:r,dotProps:ae,className:o})}),O={};return u&&v!=null&&(O.clipPath="url(#clipPath-".concat(A?"":"dots-").concat(v,")")),N.createElement($d,{zIndex:x},N.createElement(au,l_({className:n},O),P))}function z4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function P4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z4(Object(r),!0).forEach(function(n){rQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rQ(e,t,r){return(t=nQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nQ(e){var t=iQ(e,"string");return typeof t=="symbol"?t:t+""}function iQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aQ={xAxis:{},yAxis:{},zAxis:{}},hL=cc({name:"cartesianAxis",initialState:aQ,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:xo()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:xo()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:xo()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:xo()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:xo()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:xo()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:xo()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:xo()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:xo()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,o=e.yAxis[r];if(o){var l=o.widthHistory||[];if(l.length===3&&l[0]===l[2]&&n===l[1]&&n!==o.width&&Math.abs(n-l[0])<=1)return;var h=[...l,n].slice(-3);e.yAxis[r]=P4(P4({},e.yAxis[r]),{},{width:n,widthHistory:h})}}}}),{addXAxis:oQ,replaceXAxis:sQ,removeXAxis:lQ,addYAxis:uQ,replaceYAxis:cQ,removeYAxis:dQ,addZAxis:Uie,replaceZAxis:Vie,removeZAxis:qie,updateYAxisWidth:hQ}=hL.actions,fQ=hL.reducer,pQ=Pt([ml],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),gQ=Pt([pQ,eg,tg],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),hb=()=>un(gQ),mQ=()=>un(tX);function L4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Ew(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L4(Object(r),!0).forEach(function(n){yQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yQ(e,t,r){return(t=vQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vQ(e){var t=xQ(e,"string");return typeof t=="symbol"?t:t+""}function xQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _Q=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:o,dataKey:l,clipPath:h}=e;if(o===!1||t.x==null||t.y==null)return null;var u={index:r,dataKey:l,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},v=Ew(Ew(Ew({},u),rx(o)),OE(o)),x;return N.isValidElement(o)?x=N.cloneElement(o,v):typeof o=="function"?x=o(v):x=N.createElement(rL,v),N.createElement(au,{className:"recharts-active-dot",clipPath:h},x)};function $S(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:o,clipPath:l,zIndex:h=pl.activeDot}=e,u=un(hy),v=mQ();if(t==null||v==null)return null;var x=t.find(A=>v.includes(A.payload));return ao(x)?null:N.createElement($d,{zIndex:h},N.createElement(_Q,{point:x,childIndex:Number(u),mainColor:r,dataKey:o,activeDot:n,clipPath:l}))}var bQ="Invariant failed";function wQ(e,t){throw new Error(bQ)}var SQ=["x","y"];function GS(){return GS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},GS.apply(null,arguments)}function I4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function _v(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I4(Object(r),!0).forEach(function(n){EQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EQ(e,t,r){return(t=AQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AQ(e){var t=kQ(e,"string");return typeof t=="symbol"?t:t+""}function kQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CQ(e,t){if(e==null)return{};var r,n,o=TQ(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function TQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function DQ(e,t){var{x:r,y:n}=e,o=CQ(e,SQ),l="".concat(r),h=parseInt(l,10),u="".concat(n),v=parseInt(u,10),x="".concat(t.height||o.height),A=parseInt(x,10),C="".concat(t.width||o.width),P=parseInt(C,10);return _v(_v(_v(_v(_v({},t),o),h?{x:h}:{}),v?{y:v}:{}),{},{height:A,width:P,name:t.name,radius:t.radius})}function u_(e){return N.createElement(aL,GS({shapeType:"rectangle",propTransformer:DQ,activeClassName:"recharts-active-bar"},e))}var MQ=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,o)=>{if(tn(t))return t;var l=tn(n)||ao(n);return l?t(n,o):(l||wQ(),r)}},zQ={},fL=cc({name:"errorBars",initialState:zQ,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:o}=t.payload;e[r]&&(e[r]=e[r].map(l=>l.dataKey===n.dataKey&&l.direction===n.direction?o:l))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(o=>o.dataKey!==n.dataKey||o.direction!==n.direction))}}}),{addErrorBar:Wie,replaceErrorBar:Hie,removeErrorBar:Zie}=fL.actions,PQ=fL.reducer,LQ=["children"];function IQ(e,t){if(e==null)return{};var r,n,o=OQ(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function OQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var jQ={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},RQ=N.createContext(jQ);function pL(e){var{children:t}=e,r=IQ(e,LQ);return N.createElement(RQ.Provider,{value:r},t)}function fb(e,t){var r,n,o=un(x=>ng(x,e)),l=un(x=>ig(x,t)),h=(r=o==null?void 0:o.allowDataOverflow)!==null&&r!==void 0?r:dl.allowDataOverflow,u=(n=l==null?void 0:l.allowDataOverflow)!==null&&n!==void 0?n:hl.allowDataOverflow,v=h||u;return{needClip:v,needClipX:h,needClipY:u}}function rA(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,o=hb(),{needClipX:l,needClipY:h,needClip:u}=fb(t,r);if(!u||!o)return null;var{x:v,y:x,width:A,height:C}=o;return N.createElement("clipPath",{id:"clipPath-".concat(n)},N.createElement("rect",{x:l?v:v-A/2,y:h?x:x-C/2,width:l?A:A*2,height:h?C:C*2}))}function NQ(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&so(e.zIndex)?e.zIndex:t}var Aw={exports:{}},kw={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O4;function BQ(){if(O4)return kw;O4=1;var e=A0();function t(v,x){return v===x&&(v!==0||1/v===1/x)||v!==v&&x!==x}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,o=e.useRef,l=e.useEffect,h=e.useMemo,u=e.useDebugValue;return kw.useSyncExternalStoreWithSelector=function(v,x,A,C,P){var O=o(null);if(O.current===null){var U={hasValue:!1,value:null};O.current=U}else U=O.current;O=h(function(){function G(Q){if(!X){if(X=!0,ae=Q,Q=C(Q),P!==void 0&&U.hasValue){var de=U.value;if(P(de,Q))return ne=de}return ne=Q}if(de=ne,r(ae,Q))return de;var he=C(Q);return P!==void 0&&P(de,he)?(ae=Q,de):(ae=Q,ne=he)}var X=!1,ae,ne,ue=A===void 0?null:A;return[function(){return G(x())},ue===null?void 0:function(){return G(ue())}]},[x,A,C,P]);var W=n(v,O[0],O[1]);return l(function(){U.hasValue=!0,U.value=W},[W]),u(W),W},kw}var j4;function FQ(){return j4||(j4=1,Aw.exports=BQ()),Aw.exports}FQ();function $Q(e){e()}function GQ(){let e=null,t=null;return{clear(){e=null,t=null},notify(){$Q(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const o=t={callback:r,next:null,prev:t};return o.prev?o.prev.next=o:e=o,function(){!n||e===null||(n=!1,o.next?o.next.prev=o.prev:t=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}var R4={notify(){},get:()=>[]};function UQ(e,t){let r,n=R4,o=0,l=!1;function h(W){A();const G=n.subscribe(W);let X=!1;return()=>{X||(X=!0,G(),C())}}function u(){n.notify()}function v(){U.onStateChange&&U.onStateChange()}function x(){return l}function A(){o++,r||(r=e.subscribe(v),n=GQ())}function C(){o--,r&&o===0&&(r(),r=void 0,n.clear(),n=R4)}function P(){l||(l=!0,A())}function O(){l&&(l=!1,C())}const U={addNestedSub:h,notifyNestedSubs:u,handleChangeWrapper:v,isSubscribed:x,trySubscribe:P,tryUnsubscribe:O,getListeners:()=>n};return U}var VQ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qQ=VQ(),WQ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",HQ=WQ(),ZQ=()=>qQ||HQ?N.useLayoutEffect:N.useEffect,KQ=ZQ();function N4(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function XQ(e,t){if(N4(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let o=0;o<r.length;o++)if(!Object.prototype.hasOwnProperty.call(t,r[o])||!N4(e[r[o]],t[r[o]]))return!1;return!0}var Cw=Symbol.for("react-redux-context"),Tw=typeof globalThis<"u"?globalThis:{};function YQ(){if(!N.createContext)return{};const e=Tw[Cw]??(Tw[Cw]=new Map);let t=e.get(N.createContext);return t||(t=N.createContext(null),e.set(N.createContext,t)),t}var JQ=YQ();function QQ(e){const{children:t,context:r,serverState:n,store:o}=e,l=N.useMemo(()=>{const v=UQ(o);return{store:o,subscription:v,getServerState:n?()=>n:void 0}},[o,n]),h=N.useMemo(()=>o.getState(),[o]);KQ(()=>{const{subscription:v}=l;return v.onStateChange=v.notifyNestedSubs,v.trySubscribe(),h!==o.getState()&&v.notifyNestedSubs(),()=>{v.tryUnsubscribe(),v.onStateChange=void 0}},[l,h]);const u=r||JQ;return N.createElement(u.Provider,{value:l},t)}var eee=QQ,tee=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function ree(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function Cx(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(tee.has(n)){if(e[n]==null&&t[n]==null)continue;if(!XQ(e[n],t[n]))return!1}else if(!ree(e[n],t[n]))return!1;return!0}var nee=["onMouseEnter","onMouseLeave","onClick"],iee=["value","background","tooltipPosition"],aee=["id"],oee=["onMouseEnter","onClick","onMouseLeave"];function Yp(){return Yp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yp.apply(null,arguments)}function B4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Iu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B4(Object(r),!0).forEach(function(n){see(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function see(e,t,r){return(t=lee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lee(e){var t=uee(e,"string");return typeof t=="symbol"?t:t+""}function uee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function c_(e,t){if(e==null)return{};var r,n,o=cee(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function cee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var dee=e=>{var{dataKey:t,name:r,fill:n,legendType:o,hide:l}=e;return[{inactive:l,dataKey:t,type:o,color:n,value:O0(r,t),payload:e}]},hee=N.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:o,name:l,hide:h,unit:u,tooltipType:v}=e,x={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:o,dataKey:t,nameKey:void 0,name:O0(l,t),hide:h,type:v,color:o,unit:u}};return N.createElement(J5,{tooltipEntrySettings:x})});function fee(e){var t=un(hy),{data:r,dataKey:n,background:o,allOtherBarProps:l}=e,{onMouseEnter:h,onMouseLeave:u,onClick:v}=l,x=c_(l,nee),A=oL(h,n),C=sL(u),P=lL(v,n);if(!o||r==null)return null;var O=rx(o);return N.createElement($d,{zIndex:NQ(o,pl.barBackground)},r.map((U,W)=>{var{value:G,background:X,tooltipPosition:ae}=U,ne=c_(U,iee);if(!X)return null;var ue=A(U,W),Q=C(U,W),de=P(U,W),he=Iu(Iu(Iu(Iu(Iu({option:o,isActive:String(W)===t},ne),{},{fill:"#eee"},X),O),M_(x,U,W)),{},{onMouseEnter:ue,onMouseLeave:Q,onClick:de,dataKey:n,index:W,className:"recharts-bar-background-rectangle"});return N.createElement(u_,Yp({key:"background-bar-".concat(W)},he))}))}function pee(e){var{showLabels:t,children:r,rects:n}=e,o=n==null?void 0:n.map(l=>{var h={x:l.x,y:l.y,width:l.width,lowerWidth:l.width,upperWidth:l.width,height:l.height};return Iu(Iu({},h),{},{value:l.value,payload:l.payload,parentViewBox:l.parentViewBox,viewBox:h,fill:l.fill})});return N.createElement(K5,{value:t?o:void 0},r)}function gee(e){var{shape:t,activeBar:r,baseProps:n,entry:o,index:l,dataKey:h}=e,u=un(hy),v=un(PP),x=r&&String(l)===u&&(v==null||h===v),A=x?r:t;return x?N.createElement($d,{zIndex:pl.activeBar},N.createElement(u_,Yp({},n,{name:String(n.name)},o,{isActive:x,option:A,index:l,dataKey:h}))):N.createElement(u_,Yp({},n,{name:String(n.name)},o,{isActive:x,option:A,index:l,dataKey:h}))}function mee(e){var{shape:t,baseProps:r,entry:n,index:o,dataKey:l}=e;return N.createElement(u_,Yp({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:o,dataKey:l}))}function yee(e){var t,{data:r,props:n}=e,o=(t=Id(n))!==null&&t!==void 0?t:{},{id:l}=o,h=c_(o,aee),{shape:u,dataKey:v,activeBar:x}=n,{onMouseEnter:A,onClick:C,onMouseLeave:P}=n,O=c_(n,oee),U=oL(A,v),W=sL(P),G=lL(C,v);return r?N.createElement(N.Fragment,null,r.map((X,ae)=>N.createElement(au,Yp({key:"rectangle-".concat(X==null?void 0:X.x,"-").concat(X==null?void 0:X.y,"-").concat(X==null?void 0:X.value,"-").concat(ae),className:"recharts-bar-rectangle"},M_(O,X,ae),{onMouseEnter:U(X,ae),onMouseLeave:W(X,ae),onClick:G(X,ae)}),x?N.createElement(gee,{shape:u,activeBar:x,baseProps:h,entry:X,index:ae,dataKey:v}):N.createElement(mee,{shape:u,baseProps:h,entry:X,index:ae,dataKey:v})))):null}function vee(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:o,isAnimationActive:l,animationBegin:h,animationDuration:u,animationEasing:v,onAnimationEnd:x,onAnimationStart:A}=t,C=r.current,P=dx(t,"recharts-bar-"),[O,U]=N.useState(!1),W=!O,G=N.useCallback(()=>{typeof x=="function"&&x(),U(!1)},[x]),X=N.useCallback(()=>{typeof A=="function"&&A(),U(!0)},[A]);return N.createElement(pee,{showLabels:W,rects:n},N.createElement(cx,{animationId:P,begin:h,duration:u,isActive:l,easing:v,onAnimationEnd:G,onAnimationStart:X,key:P},ae=>{var ne=ae===1?n:n==null?void 0:n.map((ue,Q)=>{var de=C&&C[Q];if(de)return Iu(Iu({},ue),{},{x:Pa(de.x,ue.x,ae),y:Pa(de.y,ue.y,ae),width:Pa(de.width,ue.width,ae),height:Pa(de.height,ue.height,ae)});if(o==="horizontal"){var he=Pa(0,ue.height,ae),Y=Pa(ue.stackedBarStart,ue.y,ae);return Iu(Iu({},ue),{},{y:Y,height:he})}var ie=Pa(0,ue.width,ae),Ce=Pa(ue.stackedBarStart,ue.x,ae);return Iu(Iu({},ue),{},{width:ie,x:Ce})});return ae>0&&(r.current=ne??null),ne==null?null:N.createElement(au,null,N.createElement(yee,{props:t,data:ne}))}),N.createElement(X5,{label:t.label}),t.children)}function xee(e){var t=N.useRef(null);return N.createElement(vee,{previousRectanglesRef:t,props:e})}var gL=0,_ee=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:ss(e,t)}};class bee extends N.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:o,xAxisId:l,yAxisId:h,needClip:u,background:v,id:x}=this.props;if(t||r==null)return null;var A=_a("recharts-bar",o),C=x;return N.createElement(au,{className:A,id:x},u&&N.createElement("defs",null,N.createElement(rA,{clipPathId:C,xAxisId:l,yAxisId:h})),N.createElement(au,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(C,")"):void 0},N.createElement(fee,{data:r,dataKey:n,background:v,allOtherBarProps:this.props}),N.createElement(xee,this.props)))}}var wee={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:gL,xAxisId:0,yAxisId:0,zIndex:pl.bar};function See(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:o,minPointSize:l,activeBar:h,animationBegin:u,animationDuration:v,animationEasing:x,isAnimationActive:A}=e,{needClip:C}=fb(t,r),P=gy(),O=$l(),U=_J(e.children,UP),W=un(ae=>Yee(ae,t,r,O,e.id,U));if(P!=="vertical"&&P!=="horizontal")return null;var G,X=W==null?void 0:W[0];return X==null||X.height==null||X.width==null?G=0:G=P==="vertical"?X.height/2:X.width/2,N.createElement(pL,{xAxisId:t,yAxisId:r,data:W,dataPointFormatter:_ee,errorBarOffset:G},N.createElement(bee,Yp({},e,{layout:P,needClip:C,data:W,xAxisId:t,yAxisId:r,hide:n,legendType:o,minPointSize:l,activeBar:h,animationBegin:u,animationDuration:v,animationEasing:x,isAnimationActive:A})))}function Eee(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:o,bandSize:l,xAxis:h,yAxis:u,xAxisTicks:v,yAxisTicks:x,stackedData:A,displayedData:C,offset:P,cells:O,parentViewBox:U,dataStartIndex:W}=e,G=t==="horizontal"?u:h,X=A?G.scale.domain():null,ae=TG({numericAxis:G}),ne=G.scale(ae);return C.map((ue,Q)=>{var de,he,Y,ie,Ce,_e;A?de=SG(A[Q+W],X):(de=ss(ue,r),Array.isArray(de)||(de=[ae,de]));var Me=MQ(n,gL)(de[1],Q);if(t==="horizontal"){var me,[Ke,Re]=[u.scale(de[0]),u.scale(de[1])];he=oT({axis:h,ticks:v,bandSize:l,offset:o.offset,entry:ue,index:Q}),Y=(me=Re??Ke)!==null&&me!==void 0?me:void 0,ie=o.size;var pe=Ke-Re;if(Ce=Ch(pe)?0:pe,_e={x:he,y:P.top,width:ie,height:P.height},Math.abs(Me)>0&&Math.abs(Ce)<Math.abs(Me)){var ge=Vc(Ce||Me)*(Math.abs(Me)-Math.abs(Ce));Y-=ge,Ce+=ge}}else{var[ze,Pe]=[h.scale(de[0]),h.scale(de[1])];if(he=ze,Y=oT({axis:u,ticks:x,bandSize:l,offset:o.offset,entry:ue,index:Q}),ie=Pe-ze,Ce=o.size,_e={x:P.left,y:Y,width:P.width,height:Ce},Math.abs(Me)>0&&Math.abs(ie)<Math.abs(Me)){var st=Vc(ie||Me)*(Math.abs(Me)-Math.abs(ie));ie+=st}}if(he==null||Y==null||ie==null||Ce==null)return null;var Ae=Iu(Iu({},ue),{},{stackedBarStart:ne,x:he,y:Y,width:ie,height:Ce,value:A?de:de[1],payload:ue,background:_e,tooltipPosition:{x:he+ie/2,y:Y+Ce/2},parentViewBox:U},O&&O[Q]&&O[Q].props);return Ae}).filter(Boolean)}function Aee(e){var t=gl(e,wee),r=$l();return N.createElement(eA,{id:t.id,type:"bar"},n=>N.createElement(N.Fragment,null,N.createElement(Q5,{legendPayload:dee(t)}),N.createElement(hee,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),N.createElement(tA,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:tz(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),N.createElement($d,{zIndex:t.zIndex},N.createElement(See,Yp({},t,{id:n})))))}var mL=N.memo(Aee,Cx);mL.displayName="Bar";function F4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function a1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F4(Object(r),!0).forEach(function(n){kee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kee(e,t,r){return(t=Cee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cee(e){var t=Tee(e,"string");return typeof t=="symbol"?t:t+""}function Tee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dee=(e,t)=>t,Mee=(e,t,r)=>r,zee=(e,t,r,n)=>n,Pee=(e,t,r,n,o)=>o,Tx=Pt([vx,Pee],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),Lee=Pt([Tx],e=>e==null?void 0:e.maxBarSize),Iee=(e,t,r,n,o,l)=>l,$4=(e,t,r)=>{var n=r??e;if(!ao(n))return Th(n,t,0)},Oee=Pt([Bi,vx,Dee,Mee,zee],(e,t,r,n,o)=>t.filter(l=>e==="horizontal"?l.xAxisId===r:l.yAxisId===n).filter(l=>l.isPanorama===o).filter(l=>l.hide===!1).filter(l=>l.type==="bar")),jee=(e,t,r,n)=>{var o=Bi(e);return o==="horizontal"?Zv(e,"yAxis",r,n):Zv(e,"xAxis",t,n)},Ree=(e,t,r)=>{var n=Bi(e);return n==="horizontal"?F3(e,"xAxis",t):F3(e,"yAxis",r)},Nee=(e,t,r)=>{var n={},o=e.filter(ob),l=e.filter(x=>x.stackId==null),h=o.reduce((x,A)=>(x[A.stackId]||(x[A.stackId]=[]),x[A.stackId].push(A),x),n),u=Object.entries(h).map(x=>{var[A,C]=x,P=C.map(U=>U.dataKey),O=$4(t,r,C[0].barSize);return{stackId:A,dataKeys:P,barSize:O}}),v=l.map(x=>{var A=[x.dataKey].filter(P=>P!=null),C=$4(t,r,x.barSize);return{stackId:void 0,dataKeys:A,barSize:C}});return[...u,...v]},Bee=Pt([Oee,QH,Ree],Nee),Fee=(e,t,r,n,o)=>{var l,h,u=Tx(e,t,r,n,o);if(u!=null){var v=Bi(e),x=b8(e),{maxBarSize:A}=u,C=ao(A)?x:A,P,O;return v==="horizontal"?(P=Pf(e,"xAxis",t,n),O=zf(e,"xAxis",t,n)):(P=Pf(e,"yAxis",r,n),O=zf(e,"yAxis",r,n)),(l=(h=rm(P,O,!0))!==null&&h!==void 0?h:C)!==null&&l!==void 0?l:0}},yL=(e,t,r,n)=>{var o=Bi(e),l,h;return o==="horizontal"?(l=Pf(e,"xAxis",t,n),h=zf(e,"xAxis",t,n)):(l=Pf(e,"yAxis",r,n),h=zf(e,"yAxis",r,n)),rm(l,h)};function $ee(e,t,r,n,o){var l=n.length;if(!(l<1)){var h=Th(e,r,0,!0),u,v=[];if(so(n[0].barSize)){var x=!1,A=r/l,C=n.reduce((X,ae)=>X+(ae.barSize||0),0);C+=(l-1)*h,C>=r&&(C-=(l-1)*h,h=0),C>=r&&A>0&&(x=!0,A*=.9,C=l*A);var P=(r-C)/2>>0,O={offset:P-h,size:0};u=n.reduce((X,ae)=>{var ne,ue={stackId:ae.stackId,dataKeys:ae.dataKeys,position:{offset:O.offset+O.size+h,size:x?A:(ne=ae.barSize)!==null&&ne!==void 0?ne:0}},Q=[...X,ue];return O=Q[Q.length-1].position,Q},v)}else{var U=Th(t,r,0,!0);r-2*U-(l-1)*h<=0&&(h=0);var W=(r-2*U-(l-1)*h)/l;W>1&&(W>>=0);var G=so(o)?Math.min(W,o):W;u=n.reduce((X,ae,ne)=>[...X,{stackId:ae.stackId,dataKeys:ae.dataKeys,position:{offset:U+(W+h)*ne+(W-G)/2,size:G}}],v)}return u}}var Gee=(e,t,r,n,o,l,h)=>{var u=ao(h)?t:h,v=$ee(r,n,o!==l?o:l,e,u);return o!==l&&v!=null&&(v=v.map(x=>a1(a1({},x),{},{position:a1(a1({},x.position),{},{offset:x.position.offset-o/2})}))),v},Uee=Pt([Bee,b8,JH,w8,Fee,yL,Lee],Gee),Vee=(e,t,r,n)=>Pf(e,"xAxis",t,n),qee=(e,t,r,n)=>Pf(e,"yAxis",r,n),Wee=(e,t,r,n)=>zf(e,"xAxis",t,n),Hee=(e,t,r,n)=>zf(e,"yAxis",r,n),Zee=Pt([Uee,Tx],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),Kee=(e,t)=>{var r=ab(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var o=e[n];if(o){var{stackedData:l}=o;if(l)return l.find(h=>h.key===r)}}}},Xee=Pt([jee,Tx],Kee),Yee=Pt([ml,WE,Vee,qee,Wee,Hee,Zee,Bi,mx,yL,Xee,Tx,Iee],(e,t,r,n,o,l,h,u,v,x,A,C,P)=>{var{chartData:O,dataStartIndex:U,dataEndIndex:W}=v;if(!(C==null||h==null||t==null||u!=="horizontal"&&u!=="vertical"||r==null||n==null||o==null||l==null||x==null)){var{data:G}=C,X;if(G!=null&&G.length>0?X=G:X=O==null?void 0:O.slice(U,W+1),X!=null)return Eee({layout:u,barSettings:C,pos:h,parentViewBox:t,bandSize:x,xAxis:r,yAxis:n,xAxisTicks:o,yAxisTicks:l,stackedData:A,displayedData:X,offset:e,cells:P,dataStartIndex:U})}}),Jee=e=>{var{chartData:t}=e,r=Lo(),n=$l();return N.useEffect(()=>n?()=>{}:(r(J3(t)),()=>{r(J3(void 0))}),[t,r,n]),null},G4={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},vL=cc({name:"brush",initialState:G4,reducers:{setBrushSettings(e,t){return t.payload==null?G4:t.payload}}}),{setBrushSettings:Kie}=vL.actions,Qee=vL.reducer;function ete(e,t,r){return(t=tte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tte(e){var t=rte(e,"string");return typeof t=="symbol"?t:t+""}function rte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class nA{static create(t){return new nA(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(t)+l}default:return this.scale(t)}if(r){var h=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+h}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],o=r[r.length-1];return n<=o?t>=n&&t<=o:t>=o&&t<=n}}ete(nA,"EPS",1e-4);function nte(e){return(e%180+180)%180}var ite=function(t){var{width:r,height:n}=t,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=nte(o),h=l*Math.PI/180,u=Math.atan(n/r),v=h>u&&h<Math.PI-u?n/Math.sin(h):r/Math.cos(h);return Math.abs(v)},ate={dots:[],areas:[],lines:[]},xL=cc({name:"referenceElements",initialState:ate,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=kh(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=kh(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=kh(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Xie,removeDot:Yie,addArea:Jie,removeArea:Qie,addLine:eae,removeLine:tae}=xL.actions,ote=xL.reducer,ste=N.createContext(void 0),lte=e=>{var{children:t}=e,[r]=N.useState("".concat(Ov("recharts"),"-clip")),n=hb();if(n==null)return null;var{x:o,y:l,width:h,height:u}=n;return N.createElement(ste.Provider,{value:r},N.createElement("defs",null,N.createElement("clipPath",{id:r},N.createElement("rect",{x:o,y:l,height:u,width:h}))),t)};function _L(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function ute(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return ite(n,r)}function cte(e,t,r){var n=r==="width",{x:o,y:l,width:h,height:u}=e;return t===1?{start:n?o:l,end:n?o+h:l+u}:{start:n?o+h:l+u,end:n?o:l}}function d_(e,t,r,n,o){if(e*t<e*n||e*t>e*o)return!1;var l=r();return e*(t-e*l/2-n)>=0&&e*(t+e*l/2-o)<=0}function dte(e,t){return _L(e,t+1)}function hte(e,t,r,n,o){for(var l=(n||[]).slice(),{start:h,end:u}=t,v=0,x=1,A=h,C=function(){var U=n==null?void 0:n[v];if(U===void 0)return{v:_L(n,x)};var W=v,G,X=()=>(G===void 0&&(G=r(U,W)),G),ae=U.coordinate,ne=v===0||d_(e,ae,X,A,u);ne||(v=0,A=h,x+=1),ne&&(A=ae+e*(X()/2+o),v+=x)},P;x<=l.length;)if(P=C(),P)return P.v;return[]}function U4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function nu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U4(Object(r),!0).forEach(function(n){fte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fte(e,t,r){return(t=pte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pte(e){var t=gte(e,"string");return typeof t=="symbol"?t:t+""}function gte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mte(e,t,r,n,o){for(var l=(n||[]).slice(),h=l.length,{start:u}=t,{end:v}=t,x=function(P){var O=l[P],U,W=()=>(U===void 0&&(U=r(O,P)),U);if(P===h-1){var G=e*(O.coordinate+e*W()/2-v);l[P]=O=nu(nu({},O),{},{tickCoord:G>0?O.coordinate-G*e:O.coordinate})}else l[P]=O=nu(nu({},O),{},{tickCoord:O.coordinate});if(O.tickCoord!=null){var X=d_(e,O.tickCoord,W,u,v);X&&(v=O.tickCoord-e*(W()/2+o),l[P]=nu(nu({},O),{},{isShow:!0}))}},A=h-1;A>=0;A--)x(A);return l}function yte(e,t,r,n,o,l){var h=(n||[]).slice(),u=h.length,{start:v,end:x}=t;if(l){var A=n[u-1],C=r(A,u-1),P=e*(A.coordinate+e*C/2-x);if(h[u-1]=A=nu(nu({},A),{},{tickCoord:P>0?A.coordinate-P*e:A.coordinate}),A.tickCoord!=null){var O=d_(e,A.tickCoord,()=>C,v,x);O&&(x=A.tickCoord-e*(C/2+o),h[u-1]=nu(nu({},A),{},{isShow:!0}))}}for(var U=l?u-1:u,W=function(ae){var ne=h[ae],ue,Q=()=>(ue===void 0&&(ue=r(ne,ae)),ue);if(ae===0){var de=e*(ne.coordinate-e*Q()/2-v);h[ae]=ne=nu(nu({},ne),{},{tickCoord:de<0?ne.coordinate-de*e:ne.coordinate})}else h[ae]=ne=nu(nu({},ne),{},{tickCoord:ne.coordinate});if(ne.tickCoord!=null){var he=d_(e,ne.tickCoord,Q,v,x);he&&(v=ne.tickCoord+e*(Q()/2+o),h[ae]=nu(nu({},ne),{},{isShow:!0}))}},G=0;G<U;G++)W(G);return h}function vte(e,t,r){var{tick:n,ticks:o,viewBox:l,minTickGap:h,orientation:u,interval:v,tickFormatter:x,unit:A,angle:C}=e;if(!o||!o.length||!n)return[];if(tn(v)||j0.isSsr){var P;return(P=dte(o,tn(v)?v:0))!==null&&P!==void 0?P:[]}var O=[],U=u==="top"||u==="bottom"?"width":"height",W=A&&U==="width"?Dv(A,{fontSize:t,letterSpacing:r}):{width:0,height:0},G=(ne,ue)=>{var Q=typeof x=="function"?x(ne.value,ue):ne.value;return U==="width"?ute(Dv(Q,{fontSize:t,letterSpacing:r}),W,C):Dv(Q,{fontSize:t,letterSpacing:r})[U]},X=o.length>=2?Vc(o[1].coordinate-o[0].coordinate):1,ae=cte(l,X,U);return v==="equidistantPreserveStart"?hte(X,ae,G,o,h):(v==="preserveStart"||v==="preserveStartEnd"?O=yte(X,ae,G,o,h,v==="preserveStartEnd"):O=mte(X,ae,G,o,h),O.filter(ne=>ne.isShow))}var xte=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:o=0,tickMargin:l=0}=e,h=0;if(t){Array.from(t).forEach(A=>{if(A){var C=A.getBoundingClientRect();C.width>h&&(h=C.width)}});var u=r?r.getBoundingClientRect().width:0,v=o+l,x=h+v+u+(r?n:0);return Math.round(x)}return 0},_te=["axisLine","width","height","className","hide","ticks","axisType"];function bte(e,t){if(e==null)return{};var r,n,o=wte(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function wte(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function fy(){return fy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fy.apply(null,arguments)}function V4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Es(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V4(Object(r),!0).forEach(function(n){Ste(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ste(e,t,r){return(t=Ete(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ete(e){var t=Ate(e,"string");return typeof t=="symbol"?t:t+""}function Ate(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sy={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:pl.axis};function kte(e){var{x:t,y:r,width:n,height:o,orientation:l,mirror:h,axisLine:u,otherSvgProps:v}=e;if(!u)return null;var x=Es(Es(Es({},v),Id(u)),{},{fill:"none"});if(l==="top"||l==="bottom"){var A=+(l==="top"&&!h||l==="bottom"&&h);x=Es(Es({},x),{},{x1:t,y1:r+A*o,x2:t+n,y2:r+A*o})}else{var C=+(l==="left"&&!h||l==="right"&&h);x=Es(Es({},x),{},{x1:t+C*n,y1:r,x2:t+C*n,y2:r+o})}return N.createElement("line",fy({},x,{className:_a("recharts-cartesian-axis-line",y0(u,"className"))}))}function Cte(e,t,r,n,o,l,h,u,v){var x,A,C,P,O,U,W=u?-1:1,G=e.tickSize||h,X=tn(e.tickCoord)?e.tickCoord:e.coordinate;switch(l){case"top":x=A=e.coordinate,P=r+ +!u*o,C=P-W*G,U=C-W*v,O=X;break;case"left":C=P=e.coordinate,A=t+ +!u*n,x=A-W*G,O=x-W*v,U=X;break;case"right":C=P=e.coordinate,A=t+ +u*n,x=A+W*G,O=x+W*v,U=X;break;default:x=A=e.coordinate,P=r+ +u*o,C=P+W*G,U=C+W*v,O=X;break}return{line:{x1:x,y1:C,x2:A,y2:P},tick:{x:O,y:U}}}function Tte(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function Dte(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function Mte(e){var{option:t,tickProps:r,value:n}=e,o,l=_a(r.className,"recharts-cartesian-axis-tick-value");if(N.isValidElement(t))o=N.cloneElement(t,Es(Es({},r),{},{className:l}));else if(typeof t=="function")o=t(Es(Es({},r),{},{className:l}));else{var h="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(h=_a(h,t==null?void 0:t.className)),o=N.createElement(H5,fy({},r,{className:h}),n)}return o}var zte=N.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:o,stroke:l,tickFormatter:h,unit:u,padding:v,tickTextProps:x,orientation:A,mirror:C,x:P,y:O,width:U,height:W,tickSize:G,tickMargin:X,fontSize:ae,letterSpacing:ne,getTicksConfig:ue,events:Q,axisType:de}=e,he=vte(Es(Es({},ue),{},{ticks:r}),ae,ne),Y=Tte(A,C),ie=Dte(A,C),Ce=Id(ue),_e=rx(n),Me={};typeof o=="object"&&(Me=o);var me=Es(Es({},Ce),{},{fill:"none"},Me),Ke=he.map(ge=>Es({entry:ge},Cte(ge,P,O,U,W,A,G,C,X))),Re=Ke.map(ge=>{var{entry:ze,line:Pe}=ge;return N.createElement(au,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(ze.value,"-").concat(ze.coordinate,"-").concat(ze.tickCoord)},o&&N.createElement("line",fy({},me,Pe,{className:_a("recharts-cartesian-axis-tick-line",y0(o,"className"))})))}),pe=Ke.map((ge,ze)=>{var{entry:Pe,tick:st}=ge,Ae=Es(Es(Es(Es({textAnchor:Y,verticalAnchor:ie},Ce),{},{stroke:"none",fill:l},_e),st),{},{index:ze,payload:Pe,visibleTicksCount:he.length,tickFormatter:h,padding:v},x);return N.createElement(au,fy({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(Pe.value,"-").concat(Pe.coordinate,"-").concat(Pe.tickCoord)},M_(Q,Pe,ze)),n&&N.createElement(Mte,{option:n,tickProps:Ae,value:"".concat(typeof h=="function"?h(Pe.value,ze):Pe.value).concat(u||"")}))});return N.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(de,"-ticks")},pe.length>0&&N.createElement($d,{zIndex:pl.label},N.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(de,"-tick-labels"),ref:t},pe)),Re.length>0&&N.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(de,"-tick-lines")},Re))}),Pte=N.forwardRef((e,t)=>{var{axisLine:r,width:n,height:o,className:l,hide:h,ticks:u,axisType:v}=e,x=bte(e,_te),[A,C]=N.useState(""),[P,O]=N.useState(""),U=N.useRef(null);N.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var G;return xte({ticks:U.current,label:(G=e.labelRef)===null||G===void 0?void 0:G.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var W=N.useCallback(G=>{if(G){var X=G.getElementsByClassName("recharts-cartesian-axis-tick-value");U.current=X;var ae=X[0];if(ae){var ne=window.getComputedStyle(ae),ue=ne.fontSize,Q=ne.letterSpacing;(ue!==A||Q!==P)&&(C(ue),O(Q))}}},[A,P]);return h||n!=null&&n<=0||o!=null&&o<=0?null:N.createElement($d,{zIndex:e.zIndex},N.createElement(au,{className:_a("recharts-cartesian-axis",l)},N.createElement(kte,{x:e.x,y:e.y,width:n,height:o,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Id(e)}),N.createElement(zte,{ref:W,axisType:v,events:x,fontSize:A,getTicksConfig:e,height:e.height,letterSpacing:P,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:u,unit:e.unit,width:e.width,x:e.x,y:e.y}),N.createElement(WY,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},N.createElement(rJ,{label:e.label,labelRef:e.labelRef}),e.children)))}),iA=N.forwardRef((e,t)=>{var r=gl(e,sy);return N.createElement(Pte,fy({},r,{ref:t}))});iA.displayName="CartesianAxis";var bL=(e,t,r,n)=>Pf(e,"xAxis",t,n),wL=(e,t,r,n)=>zf(e,"xAxis",t,n),SL=(e,t,r,n)=>Pf(e,"yAxis",r,n),EL=(e,t,r,n)=>zf(e,"yAxis",r,n),Lte=Pt([Bi,bL,SL,wL,EL],(e,t,r,n,o)=>Of(e,"xAxis")?rm(t,n,!1):rm(r,o,!1)),Ite=(e,t,r,n,o)=>o;function Ote(e){return e.type==="line"}var jte=Pt([vx,Ite],(e,t)=>e.filter(Ote).find(r=>r.id===t)),Rte=Pt([Bi,bL,SL,wL,EL,jte,Lte,mx],(e,t,r,n,o,l,h,u)=>{var{chartData:v,dataStartIndex:x,dataEndIndex:A}=u;if(!(l==null||t==null||r==null||n==null||o==null||n.length===0||o.length===0||h==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:C,data:P}=l,O;if(P!=null&&P.length>0?O=P:O=v==null?void 0:v.slice(x,A+1),O!=null)return nre({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:o,dataKey:C,bandSize:h,displayedData:O})}});function AL(e){var t=rx(e),r=3,n=2;if(t!=null){var{r:o,strokeWidth:l}=t,h=Number(o),u=Number(l);return(Number.isNaN(h)||h<0)&&(h=r),(Number.isNaN(u)||u<0)&&(u=n),{r:h,strokeWidth:u}}return{r,strokeWidth:n}}var Nte=["id"],Bte=["type","layout","connectNulls","needClip","shape"],Fte=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Xv(){return Xv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xv.apply(null,arguments)}function q4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Af(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q4(Object(r),!0).forEach(function(n){$te(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $te(e,t,r){return(t=Gte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gte(e){var t=Ute(e,"string");return typeof t=="symbol"?t:t+""}function Ute(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aA(e,t){if(e==null)return{};var r,n,o=Vte(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Vte(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var qte=e=>{var{dataKey:t,name:r,stroke:n,legendType:o,hide:l}=e;return[{inactive:l,dataKey:t,type:o,color:n,value:O0(r,t),payload:e}]},Wte=N.memo(e=>{var{dataKey:t,data:r,stroke:n,strokeWidth:o,fill:l,name:h,hide:u,unit:v,tooltipType:x}=e,A={dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:o,fill:l,dataKey:t,nameKey:void 0,name:O0(h,t),hide:u,type:x,color:n,unit:v}};return N.createElement(J5,{tooltipEntrySettings:A})}),kL=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function Hte(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],o=0;o<t;++o)n=[...n,...r];return n}var Zte=(e,t,r)=>{var n=r.reduce((C,P)=>C+P);if(!n)return kL(t,e);for(var o=Math.floor(e/n),l=e%n,h=t-e,u=[],v=0,x=0;v<r.length;x+=r[v],++v)if(x+r[v]>l){u=[...r.slice(0,v),l-x];break}var A=u.length%2===0?[0,h]:[h];return[...Hte(r,o),...u,...A].map(C=>"".concat(C,"px")).join(", ")};function Kte(e){var{clipPathId:t,points:r,props:n}=e,{dot:o,dataKey:l,needClip:h}=n,{id:u}=n,v=aA(n,Nte),x=Id(v);return N.createElement(dL,{points:r,dot:o,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:l,baseProps:x,needClip:h,clipPathId:t})}function Xte(e){var{showLabels:t,children:r,points:n}=e,o=N.useMemo(()=>n==null?void 0:n.map(l=>{var h,u,v={x:(h=l.x)!==null&&h!==void 0?h:0,y:(u=l.y)!==null&&u!==void 0?u:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Af(Af({},v),{},{value:l.value,payload:l.payload,viewBox:v,parentViewBox:void 0,fill:void 0})}),[n]);return N.createElement(K5,{value:t?o:void 0},r)}function W4(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:o,props:l}=e,{type:h,layout:u,connectNulls:v,needClip:x,shape:A}=l,C=aA(l,Bte),P=Af(Af({},iu(C)),{},{fill:"none",className:"recharts-line-curve",clipPath:x?"url(#clipPath-".concat(t,")"):void 0,points:n,type:h,layout:u,connectNulls:v,strokeDasharray:o??l.strokeDasharray});return N.createElement(N.Fragment,null,(n==null?void 0:n.length)>1&&N.createElement(aL,Xv({shapeType:"curve",option:A},P,{pathRef:r})),N.createElement(Kte,{points:n,clipPathId:t,props:l}))}function Yte(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function Jte(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:o,longestAnimatedLengthRef:l}=e,{points:h,strokeDasharray:u,isAnimationActive:v,animationBegin:x,animationDuration:A,animationEasing:C,animateNewValues:P,width:O,height:U,onAnimationEnd:W,onAnimationStart:G}=r,X=o.current,ae=dx(h,"recharts-line-"),ne=N.useRef(ae),[ue,Q]=N.useState(!1),de=!ue,he=N.useCallback(()=>{typeof W=="function"&&W(),Q(!1)},[W]),Y=N.useCallback(()=>{typeof G=="function"&&G(),Q(!0)},[G]),ie=Yte(n.current),Ce=N.useRef(0);ne.current!==ae&&(Ce.current=l.current,ne.current=ae);var _e=Ce.current;return N.createElement(Xte,{points:h,showLabels:de},r.children,N.createElement(cx,{animationId:ae,begin:x,duration:A,isActive:v,easing:C,onAnimationEnd:he,onAnimationStart:Y,key:ae},Me=>{var me=Pa(_e,ie+_e,Me),Ke=Math.min(me,ie),Re;if(v)if(u){var pe="".concat(u).split(/[,\s]+/gim).map(Pe=>parseFloat(Pe));Re=Zte(Ke,ie,pe)}else Re=kL(ie,Ke);else Re=u==null?void 0:String(u);if(Me>0&&ie>0&&(o.current=h,l.current=Math.max(l.current,Ke)),X){var ge=X.length/h.length,ze=Me===1?h:h.map((Pe,st)=>{var Ae=Math.floor(st*ge);if(X[Ae]){var qe=X[Ae];return Af(Af({},Pe),{},{x:Pa(qe.x,Pe.x,Me),y:Pa(qe.y,Pe.y,Me)})}return P?Af(Af({},Pe),{},{x:Pa(O*2,Pe.x,Me),y:Pa(U/2,Pe.y,Me)}):Af(Af({},Pe),{},{x:Pe.x,y:Pe.y})});return o.current=ze,N.createElement(W4,{props:r,points:ze,clipPathId:t,pathRef:n,strokeDasharray:Re})}return N.createElement(W4,{props:r,points:h,clipPathId:t,pathRef:n,strokeDasharray:Re})}),N.createElement(X5,{label:r.label}))}function Qte(e){var{clipPathId:t,props:r}=e,n=N.useRef(null),o=N.useRef(0),l=N.useRef(null);return N.createElement(Jte,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:o,pathRef:l})}var ere=(e,t)=>{var r,n;return{x:(r=e.x)!==null&&r!==void 0?r:void 0,y:(n=e.y)!==null&&n!==void 0?n:void 0,value:e.value,errorVal:ss(e.payload,t)}};class tre extends N.Component{render(){var{hide:t,dot:r,points:n,className:o,xAxisId:l,yAxisId:h,top:u,left:v,width:x,height:A,id:C,needClip:P,zIndex:O}=this.props;if(t)return null;var U=_a("recharts-line",o),W=C,{r:G,strokeWidth:X}=AL(r),ae=Y5(r),ne=G*2+X,ue=P?"url(#clipPath-".concat(ae?"":"dots-").concat(W,")"):void 0;return N.createElement($d,{zIndex:O},N.createElement(au,{className:U},P&&N.createElement("defs",null,N.createElement(rA,{clipPathId:W,xAxisId:l,yAxisId:h}),!ae&&N.createElement("clipPath",{id:"clipPath-dots-".concat(W)},N.createElement("rect",{x:v-ne/2,y:u-ne/2,width:x+ne,height:A+ne}))),N.createElement(pL,{xAxisId:l,yAxisId:h,data:n,dataPointFormatter:ere,errorBarOffset:0},N.createElement(Qte,{props:this.props,clipPathId:W}))),N.createElement($S,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:ue}))}}var CL={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:pl.line,type:"linear"};function rre(e){var t=gl(e,CL),{activeDot:r,animateNewValues:n,animationBegin:o,animationDuration:l,animationEasing:h,connectNulls:u,dot:v,hide:x,isAnimationActive:A,label:C,legendType:P,xAxisId:O,yAxisId:U,id:W}=t,G=aA(t,Fte),{needClip:X}=fb(O,U),ae=hb(),ne=gy(),ue=$l(),Q=un(Ce=>Rte(Ce,O,U,ue,W));if(ne!=="horizontal"&&ne!=="vertical"||Q==null||ae==null)return null;var{height:de,width:he,x:Y,y:ie}=ae;return N.createElement(tre,Xv({},G,{id:W,connectNulls:u,dot:v,activeDot:r,animateNewValues:n,animationBegin:o,animationDuration:l,animationEasing:h,isAnimationActive:A,hide:x,label:C,legendType:P,xAxisId:O,yAxisId:U,points:Q,layout:ne,height:de,width:he,left:Y,top:ie,needClip:X}))}function nre(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:o,yAxisTicks:l,dataKey:h,bandSize:u,displayedData:v}=e;return v.map((x,A)=>{var C=ss(x,h);if(t==="horizontal"){var P=R1({axis:r,ticks:o,bandSize:u,entry:x,index:A}),O=ao(C)?null:n.scale(C);return{x:P,y:O,value:C,payload:x}}var U=ao(C)?null:r.scale(C),W=R1({axis:n,ticks:l,bandSize:u,entry:x,index:A});return U==null||W==null?null:{x:U,y:W,value:C,payload:x}}).filter(Boolean)}function ire(e){var t=gl(e,CL),r=$l();return N.createElement(eA,{id:t.id,type:"line"},n=>N.createElement(N.Fragment,null,N.createElement(Q5,{legendPayload:qte(t)}),N.createElement(Wte,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),N.createElement(tA,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),N.createElement(rre,Xv({},t,{id:n}))))}var h_=N.memo(ire,Cx);h_.displayName="Line";var TL=(e,t,r,n)=>Pf(e,"xAxis",t,n),DL=(e,t,r,n)=>zf(e,"xAxis",t,n),ML=(e,t,r,n)=>Pf(e,"yAxis",r,n),zL=(e,t,r,n)=>zf(e,"yAxis",r,n),are=Pt([Bi,TL,ML,DL,zL],(e,t,r,n,o)=>Of(e,"xAxis")?rm(t,n,!1):rm(r,o,!1)),ore=(e,t,r,n,o)=>o,PL=Pt([vx,ore],(e,t)=>e.filter(r=>r.type==="area").find(r=>r.id===t)),sre=(e,t,r,n,o)=>{var l,h=PL(e,t,r,n,o);if(h!=null){var u=Bi(e),v=Of(u,"xAxis"),x;if(v?x=Zv(e,"yAxis",r,n):x=Zv(e,"xAxis",t,n),x!=null){var{stackId:A}=h,C=ab(h);if(!(A==null||C==null)){var P=(l=x[A])===null||l===void 0?void 0:l.stackedData;return P==null?void 0:P.find(O=>O.key===C)}}}},lre=Pt([Bi,TL,ML,DL,zL,sre,mx,are,PL,eZ],(e,t,r,n,o,l,h,u,v,x)=>{var{chartData:A,dataStartIndex:C,dataEndIndex:P}=h;if(!(v==null||e!=="horizontal"&&e!=="vertical"||t==null||r==null||n==null||o==null||n.length===0||o.length===0||u==null)){var{data:O}=v,U;if(O&&O.length>0?U=O:U=A==null?void 0:A.slice(C,P+1),U!=null)return Cre({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:o,dataStartIndex:C,areaSettings:v,stackedData:l,displayedData:U,chartBaseValue:x,bandSize:u})}}),ure=["id"],cre=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function ly(){return ly=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ly.apply(null,arguments)}function LL(e,t){if(e==null)return{};var r,n,o=dre(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function dre(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function H4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function u0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H4(Object(r),!0).forEach(function(n){hre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hre(e,t,r){return(t=fre(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fre(e){var t=pre(e,"string");return typeof t=="symbol"?t:t+""}function pre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function f_(e,t){return e&&e!=="none"?e:t}var gre=e=>{var{dataKey:t,name:r,stroke:n,fill:o,legendType:l,hide:h}=e;return[{inactive:h,dataKey:t,type:l,color:f_(n,o),value:O0(r,t),payload:e}]},mre=N.memo(e=>{var{dataKey:t,data:r,stroke:n,strokeWidth:o,fill:l,name:h,hide:u,unit:v,tooltipType:x}=e,A={dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:o,fill:l,dataKey:t,nameKey:void 0,name:O0(h,t),hide:u,type:x,color:f_(n,l),unit:v}};return N.createElement(J5,{tooltipEntrySettings:A})});function yre(e){var{clipPathId:t,points:r,props:n}=e,{needClip:o,dot:l,dataKey:h}=n,u=Id(n);return N.createElement(dL,{points:r,dot:l,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:h,baseProps:u,needClip:o,clipPathId:t})}function vre(e){var{showLabels:t,children:r,points:n}=e,o=n.map(l=>{var h,u,v={x:(h=l.x)!==null&&h!==void 0?h:0,y:(u=l.y)!==null&&u!==void 0?u:0,width:0,lowerWidth:0,upperWidth:0,height:0};return u0(u0({},v),{},{value:l.value,payload:l.payload,parentViewBox:void 0,viewBox:v,fill:void 0})});return N.createElement(K5,{value:t?o:void 0},r)}function Z4(e){var{points:t,baseLine:r,needClip:n,clipPathId:o,props:l}=e,{layout:h,type:u,stroke:v,connectNulls:x,isRange:A}=l,{id:C}=l,P=LL(l,ure),O=Id(P),U=iu(P);return N.createElement(N.Fragment,null,(t==null?void 0:t.length)>1&&N.createElement(au,{clipPath:n?"url(#clipPath-".concat(o,")"):void 0},N.createElement(Tv,ly({},U,{id:C,points:t,connectNulls:x,type:u,baseLine:r,layout:h,stroke:"none",className:"recharts-area-area"})),v!=="none"&&N.createElement(Tv,ly({},O,{className:"recharts-area-curve",layout:h,type:u,connectNulls:x,fill:"none",points:t})),v!=="none"&&A&&N.createElement(Tv,ly({},O,{className:"recharts-area-curve",layout:h,type:u,connectNulls:x,fill:"none",points:r}))),N.createElement(yre,{points:t,props:P,clipPathId:o}))}function xre(e){var{alpha:t,baseLine:r,points:n,strokeWidth:o}=e,l=n[0].y,h=n[n.length-1].y;if(!so(l)||!so(h))return null;var u=t*Math.abs(l-h),v=Math.max(...n.map(x=>x.x||0));return tn(r)?v=Math.max(r,v):r&&Array.isArray(r)&&r.length&&(v=Math.max(...r.map(x=>x.x||0),v)),tn(v)?N.createElement("rect",{x:0,y:l<h?l:l-u,width:v+(o?parseInt("".concat(o),10):1),height:Math.floor(u)}):null}function _re(e){var{alpha:t,baseLine:r,points:n,strokeWidth:o}=e,l=n[0].x,h=n[n.length-1].x;if(!so(l)||!so(h))return null;var u=t*Math.abs(l-h),v=Math.max(...n.map(x=>x.y||0));return tn(r)?v=Math.max(r,v):r&&Array.isArray(r)&&r.length&&(v=Math.max(...r.map(x=>x.y||0),v)),tn(v)?N.createElement("rect",{x:l<h?l:l-u,y:0,width:u,height:Math.floor(v+(o?parseInt("".concat(o),10):1))}):null}function bre(e){var{alpha:t,layout:r,points:n,baseLine:o,strokeWidth:l}=e;return r==="vertical"?N.createElement(xre,{alpha:t,points:n,baseLine:o,strokeWidth:l}):N.createElement(_re,{alpha:t,points:n,baseLine:o,strokeWidth:l})}function wre(e){var{needClip:t,clipPathId:r,props:n,previousPointsRef:o,previousBaselineRef:l}=e,{points:h,baseLine:u,isAnimationActive:v,animationBegin:x,animationDuration:A,animationEasing:C,onAnimationStart:P,onAnimationEnd:O}=n,U=N.useMemo(()=>({points:h,baseLine:u}),[h,u]),W=dx(U,"recharts-area-"),G=fU(),[X,ae]=N.useState(!1),ne=!X,ue=N.useCallback(()=>{typeof O=="function"&&O(),ae(!1)},[O]),Q=N.useCallback(()=>{typeof P=="function"&&P(),ae(!0)},[P]);if(G==null)return null;var de=o.current,he=l.current;return N.createElement(vre,{showLabels:ne,points:h},n.children,N.createElement(cx,{animationId:W,begin:x,duration:A,isActive:v,easing:C,onAnimationEnd:ue,onAnimationStart:Q,key:W},Y=>{if(de){var ie=de.length/h.length,Ce=Y===1?h:h.map((Me,me)=>{var Ke=Math.floor(me*ie);if(de[Ke]){var Re=de[Ke];return u0(u0({},Me),{},{x:Pa(Re.x,Me.x,Y),y:Pa(Re.y,Me.y,Y)})}return Me}),_e;return tn(u)?_e=Pa(he,u,Y):ao(u)||Ch(u)?_e=Pa(he,0,Y):_e=u.map((Me,me)=>{var Ke=Math.floor(me*ie);if(Array.isArray(he)&&he[Ke]){var Re=he[Ke];return u0(u0({},Me),{},{x:Pa(Re.x,Me.x,Y),y:Pa(Re.y,Me.y,Y)})}return Me}),Y>0&&(o.current=Ce,l.current=_e),N.createElement(Z4,{points:Ce,baseLine:_e,needClip:t,clipPathId:r,props:n})}return Y>0&&(o.current=h,l.current=u),N.createElement(au,null,v&&N.createElement("defs",null,N.createElement("clipPath",{id:"animationClipPath-".concat(r)},N.createElement(bre,{alpha:Y,points:h,baseLine:u,layout:G,strokeWidth:n.strokeWidth}))),N.createElement(au,{clipPath:"url(#animationClipPath-".concat(r,")")},N.createElement(Z4,{points:h,baseLine:u,needClip:t,clipPathId:r,props:n})))}),N.createElement(X5,{label:n.label}))}function Sre(e){var{needClip:t,clipPathId:r,props:n}=e,o=N.useRef(null),l=N.useRef();return N.createElement(wre,{needClip:t,clipPathId:r,props:n,previousPointsRef:o,previousBaselineRef:l})}class Ere extends N.PureComponent{render(){var{hide:t,dot:r,points:n,className:o,top:l,left:h,needClip:u,xAxisId:v,yAxisId:x,width:A,height:C,id:P,baseLine:O,zIndex:U}=this.props;if(t)return null;var W=_a("recharts-area",o),G=P,{r:X,strokeWidth:ae}=AL(r),ne=Y5(r),ue=X*2+ae,Q=u?"url(#clipPath-".concat(ne?"":"dots-").concat(G,")"):void 0;return N.createElement($d,{zIndex:U},N.createElement(au,{className:W},u&&N.createElement("defs",null,N.createElement(rA,{clipPathId:G,xAxisId:v,yAxisId:x}),!ne&&N.createElement("clipPath",{id:"clipPath-dots-".concat(G)},N.createElement("rect",{x:h-ue/2,y:l-ue/2,width:A+ue,height:C+ue}))),N.createElement(Sre,{needClip:u,clipPathId:G,props:this.props})),N.createElement($S,{points:n,mainColor:f_(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:Q}),this.props.isRange&&Array.isArray(O)&&N.createElement($S,{points:O,mainColor:f_(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:Q}))}}var IL={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:pl.area};function Are(e){var t,r=gl(e,IL),{activeDot:n,animationBegin:o,animationDuration:l,animationEasing:h,connectNulls:u,dot:v,fill:x,fillOpacity:A,hide:C,isAnimationActive:P,legendType:O,stroke:U,xAxisId:W,yAxisId:G}=r,X=LL(r,cre),ae=gy(),ne=OP(),{needClip:ue}=fb(W,G),Q=$l(),{points:de,isRange:he,baseLine:Y}=(t=un(Ke=>lre(Ke,W,G,Q,e.id)))!==null&&t!==void 0?t:{},ie=hb();if(ae!=="horizontal"&&ae!=="vertical"||ie==null||ne!=="AreaChart"&&ne!=="ComposedChart")return null;var{height:Ce,width:_e,x:Me,y:me}=ie;return!de||!de.length?null:N.createElement(Ere,ly({},X,{activeDot:n,animationBegin:o,animationDuration:l,animationEasing:h,baseLine:Y,connectNulls:u,dot:v,fill:x,fillOpacity:A,height:Ce,hide:C,layout:ae,isAnimationActive:P==="auto"?!j0.isSsr:P,isRange:he,legendType:O,needClip:ue,points:de,stroke:U,width:_e,left:Me,top:me,xAxisId:W,yAxisId:G}))}var kre=(e,t,r,n,o)=>{var l=r??t;if(tn(l))return l;var h=e==="horizontal"?o:n,u=h.scale.domain();if(h.type==="number"){var v=Math.max(u[0],u[1]),x=Math.min(u[0],u[1]);return l==="dataMin"?x:l==="dataMax"||v<0?v:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]};function Cre(e){var{areaSettings:{connectNulls:t,baseValue:r,dataKey:n},stackedData:o,layout:l,chartBaseValue:h,xAxis:u,yAxis:v,displayedData:x,dataStartIndex:A,xAxisTicks:C,yAxisTicks:P,bandSize:O}=e,U=o&&o.length,W=kre(l,h,r,u,v),G=l==="horizontal",X=!1,ae=x.map((ue,Q)=>{var de;U?de=o[A+Q]:(de=ss(ue,n),Array.isArray(de)?X=!0:de=[W,de]);var he=de[1]==null||U&&!t&&ss(ue,n)==null;return G?{x:R1({axis:u,ticks:C,bandSize:O,entry:ue,index:Q}),y:he?null:v.scale(de[1]),value:de,payload:ue}:{x:he?null:u.scale(de[1]),y:R1({axis:v,ticks:P,bandSize:O,entry:ue,index:Q}),value:de,payload:ue}}),ne;return U||X?ne=ae.map(ue=>{var Q=Array.isArray(ue.value)?ue.value[0]:null;return G?{x:ue.x,y:Q!=null&&ue.y!=null?v.scale(Q):null,payload:ue.payload}:{x:Q!=null?u.scale(Q):null,y:ue.y,payload:ue.payload}}):ne=G?v.scale(W):u.scale(W),{points:ae,baseLine:ne,isRange:X}}function Tre(e){var t=gl(e,IL),r=$l();return N.createElement(eA,{id:t.id,type:"area"},n=>N.createElement(N.Fragment,null,N.createElement(Q5,{legendPayload:gre(t)}),N.createElement(mre,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),N.createElement(tA,{type:"area",id:n,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:tz(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:r,connectNulls:t.connectNulls}),N.createElement(Are,ly({},t,{id:n}))))}var OL=N.memo(Tre,Cx);OL.displayName="Area";var Dre=["domain","range"],Mre=["domain","range"];function K4(e,t){if(e==null)return{};var r,n,o=zre(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function zre(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function X4(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function jL(e,t){if(e===t)return!0;var{domain:r,range:n}=e,o=K4(e,Dre),{domain:l,range:h}=t,u=K4(t,Mre);return!X4(r,l)||!X4(n,h)?!1:Cx(o,u)}var Pre=["dangerouslySetInnerHTML","ticks"],Lre=["id"];function US(){return US=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},US.apply(null,arguments)}function Y4(e,t){if(e==null)return{};var r,n,o=Ire(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Ire(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ore(e){var t=Lo(),r=N.useRef(null);return N.useLayoutEffect(()=>{r.current===null?t(oQ(e)):r.current!==e&&t(sQ({prev:r.current,next:e})),r.current=e},[e,t]),N.useLayoutEffect(()=>()=>{r.current&&(t(lQ(r.current)),r.current=null)},[t]),null}var jre=e=>{var{xAxisId:t,className:r}=e,n=un(WE),o=$l(),l="xAxis",h=un(G=>G0(G,l,t,o)),u=un(G=>hP(G,l,t,o)),v=un(G=>lP(G,t)),x=un(G=>YZ(G,t)),A=un(G=>z8(G,t));if(v==null||x==null||A==null)return null;var{dangerouslySetInnerHTML:C,ticks:P}=e,O=Y4(e,Pre),{id:U}=A,W=Y4(A,Lre);return N.createElement(iA,US({},O,W,{scale:h,x:x.x,y:x.y,width:v.width,height:v.height,className:_a("recharts-".concat(l," ").concat(l),r),viewBox:n,ticks:u,axisType:l}))},Rre={allowDataOverflow:dl.allowDataOverflow,allowDecimals:dl.allowDecimals,allowDuplicatedCategory:dl.allowDuplicatedCategory,angle:dl.angle,axisLine:sy.axisLine,height:dl.height,hide:!1,includeHidden:dl.includeHidden,interval:dl.interval,minTickGap:dl.minTickGap,mirror:dl.mirror,orientation:dl.orientation,padding:dl.padding,reversed:dl.reversed,scale:dl.scale,tick:dl.tick,tickCount:dl.tickCount,tickLine:sy.tickLine,tickSize:sy.tickSize,type:dl.type,xAxisId:0},Nre=e=>{var t=gl(e,Rre);return N.createElement(N.Fragment,null,N.createElement(Ore,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),N.createElement(jre,t))},Mv=N.memo(Nre,jL);Mv.displayName="XAxis";var Bre=["dangerouslySetInnerHTML","ticks"],Fre=["id"];function VS(){return VS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},VS.apply(null,arguments)}function J4(e,t){if(e==null)return{};var r,n,o=$re(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function $re(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Gre(e){var t=Lo(),r=N.useRef(null);return N.useLayoutEffect(()=>{r.current===null?t(uQ(e)):r.current!==e&&t(cQ({prev:r.current,next:e})),r.current=e},[e,t]),N.useLayoutEffect(()=>()=>{r.current&&(t(dQ(r.current)),r.current=null)},[t]),null}var Ure=e=>{var{yAxisId:t,className:r,width:n,label:o}=e,l=N.useRef(null),h=N.useRef(null),u=un(WE),v=$l(),x=Lo(),A="yAxis",C=un(Q=>G0(Q,A,t,v)),P=un(Q=>uP(Q,t)),O=un(Q=>QZ(Q,t)),U=un(Q=>hP(Q,A,t,v)),W=un(Q=>P8(Q,t));if(N.useLayoutEffect(()=>{if(!(n!=="auto"||!P||Z5(o)||N.isValidElement(o)||W==null)){var Q=l.current;if(Q){var de=Q.getCalculatedWidth();Math.round(P.width)!==Math.round(de)&&x(hQ({id:t,width:de}))}}},[U,P,x,o,t,n,W]),P==null||O==null||W==null)return null;var{dangerouslySetInnerHTML:G,ticks:X}=e,ae=J4(e,Bre),{id:ne}=W,ue=J4(W,Fre);return N.createElement(iA,VS({},ae,ue,{ref:l,labelRef:h,scale:C,x:O.x,y:O.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:P.width,height:P.height,className:_a("recharts-".concat(A," ").concat(A),r),viewBox:u,ticks:U,axisType:A}))},Vre={allowDataOverflow:hl.allowDataOverflow,allowDecimals:hl.allowDecimals,allowDuplicatedCategory:hl.allowDuplicatedCategory,angle:hl.angle,axisLine:sy.axisLine,hide:!1,includeHidden:hl.includeHidden,interval:hl.interval,minTickGap:hl.minTickGap,mirror:hl.mirror,orientation:hl.orientation,padding:hl.padding,reversed:hl.reversed,scale:hl.scale,tick:hl.tick,tickCount:hl.tickCount,tickLine:sy.tickLine,tickSize:sy.tickSize,type:hl.type,width:hl.width,yAxisId:0},qre=e=>{var t=gl(e,Vre);return N.createElement(N.Fragment,null,N.createElement(Gre,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),N.createElement(Ure,t))},zv=N.memo(qre,jL);zv.displayName="YAxis";var Wre=(e,t)=>t,oA=Pt([Wre,Bi,D8,qs,TP,ag,fX,ml],_X),sA=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},RL=Od("mouseClick"),NL=sx();NL.startListening({actionCreator:RL,effect:(e,t)=>{var r=e.payload,n=oA(t.getState(),sA(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(fK({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var qS=Od("mouseMove"),BL=sx(),o1=null;BL.startListening({actionCreator:qS,effect:(e,t)=>{var r=e.payload;o1!==null&&cancelAnimationFrame(o1);var n=sA(r);o1=requestAnimationFrame(()=>{var o=t.getState(),l=j5(o,o.tooltip.settings.shared);if(l==="axis"){var h=oA(o,n);(h==null?void 0:h.activeIndex)!=null?t.dispatch(_P({activeIndex:h.activeIndex,activeDataKey:void 0,activeCoordinate:h.activeCoordinate})):t.dispatch(xP())}o1=null})}});var Q4={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},FL=cc({name:"rootProps",initialState:Q4,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:Q4.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),Hre=FL.reducer,{updateOptions:Zre}=FL.actions,$L=cc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:rae}=$L.actions,Kre=$L.reducer,GL=Od("keyDown"),UL=Od("focus"),lA=sx();lA.startListening({actionCreator:GL,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:o}=r.tooltip,l=e.payload;if(!(l!=="ArrowRight"&&l!=="ArrowLeft"&&l!=="Enter")){var h=R5(o,V0(r),_x(r),Ax(r)),u=h==null?-1:Number(h);if(!(!Number.isFinite(u)||u<0)){var v=ag(r);if(l==="Enter"){var x=i_(r,"axis","hover",String(o.index));t.dispatch(OS({active:!o.active,activeIndex:o.index,activeDataKey:o.dataKey,activeCoordinate:x}));return}var A=nK(r),C=A==="left-to-right"?1:-1,P=l==="ArrowRight"?1:-1,O=u+P*C;if(!(v==null||O>=v.length||O<0)){var U=i_(r,"axis","hover",String(O));t.dispatch(OS({active:!0,activeIndex:O.toString(),activeDataKey:void 0,activeCoordinate:U}))}}}}}});lA.startListening({actionCreator:UL,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:o}=r.tooltip;if(!o.active&&o.index==null){var l="0",h=i_(r,"axis","hover",String(l));t.dispatch(OS({activeDataKey:void 0,active:!0,activeIndex:l,activeCoordinate:h}))}}}});var Cd=Od("externalEvent"),VL=sx(),Dw=new Map;VL.startListening({actionCreator:Cd,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var o=n.type,l=Dw.get(o);l!==void 0&&cancelAnimationFrame(l);var h=requestAnimationFrame(()=>{try{var u=t.getState(),v={activeCoordinate:JK(u),activeDataKey:PP(u),activeIndex:hy(u),activeLabel:zP(u),activeTooltipIndex:hy(u),isTooltipActive:QK(u)};r(v,n)}finally{Dw.delete(o)}});Dw.set(o,h)}}});var Xre=Pt([U0],e=>e.tooltipItemPayloads),Yre=Pt([Xre,Sx,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var o=e.find(u=>u.settings.dataKey===n);if(o!=null){var{positions:l}=o;if(l!=null){var h=t(l,r);return h}}}),qL=Od("touchMove"),WL=sx();WL.startListening({actionCreator:qL,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),o=j5(n,n.tooltip.settings.shared);if(o==="axis"){var l=oA(n,sA({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(l==null?void 0:l.activeIndex)!=null&&t.dispatch(_P({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate}))}else if(o==="item"){var h,u=r.touches[0];if(document.elementFromPoint==null)return;var v=document.elementFromPoint(u.clientX,u.clientY);if(!v||!v.getAttribute)return;var x=v.getAttribute(OG),A=(h=v.getAttribute(jG))!==null&&h!==void 0?h:void 0,C=Yre(t.getState(),x,A);t.dispatch(vP({activeDataKey:A,activeIndex:x,activeCoordinate:C}))}}}});var Jre=kM({brush:Qee,cartesianAxis:fQ,chartData:YX,errorBars:PQ,graphicalItems:WJ,layout:yG,legend:zU,options:WX,polarAxis:mJ,polarOptions:Kre,referenceElements:ote,rootProps:Hre,tooltip:pK,zIndex:IX}),Qre=function(t){return G$({reducer:Jre,preloadedState:t,middleware:r=>{var n;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((n="es6")!==null&&n!==void 0?n:"")}).concat([NL.middleware,BL.middleware,lA.middleware,VL.middleware,WL.middleware])},enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat($M({type:"raf"}))},devTools:j0.devToolsEnabled})};function ene(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,o=$l(),l=N.useRef(null);if(o)return r;l.current==null&&(l.current=Qre(t));var h=RE;return N.createElement(eee,{context:h,store:l.current},r)}function tne(e){var{layout:t,margin:r}=e,n=Lo(),o=$l();return N.useEffect(()=>{o||(n(pG(t)),n(fG(r)))},[n,o,t,r]),null}var rne=N.memo(tne,Cx);function nne(e){var t=Lo();return N.useEffect(()=>{t(Zre(e))},[t,e]),null}function e6(e){var{zIndex:t,isPanorama:r}=e,n=r?"recharts-zindex-panorama-":"recharts-zindex-",o=uL("".concat(n).concat(t)),l=Lo();return N.useLayoutEffect(()=>(l(PX({zIndex:t,elementId:o,isPanorama:r})),()=>{l(LX({zIndex:t,isPanorama:r}))}),[l,t,o,r]),N.createElement("g",{tabIndex:-1,id:o})}function t6(e){var{children:t,isPanorama:r}=e,n=un(wX);if(!n||n.length===0)return t;var o=n.filter(h=>h<0),l=n.filter(h=>h>0);return N.createElement(N.Fragment,null,o.map(h=>N.createElement(e6,{key:h,zIndex:h,isPanorama:r})),t,l.map(h=>N.createElement(e6,{key:h,zIndex:h,isPanorama:r})))}var ine=["children"];function ane(e,t){if(e==null)return{};var r,n,o=one(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function one(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function p_(){return p_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p_.apply(null,arguments)}var sne={width:"100%",height:"100%",display:"block"},lne=N.forwardRef((e,t)=>{var r=sz(),n=lz(),o=yz();if(!nm(r)||!nm(n))return null;var{children:l,otherAttributes:h,title:u,desc:v}=e,x,A;return h!=null&&(typeof h.tabIndex=="number"?x=h.tabIndex:x=o?0:void 0,typeof h.role=="string"?A=h.role:A=o?"application":void 0),N.createElement(CE,p_({},h,{title:u,desc:v,role:A,tabIndex:x,width:r,height:n,style:sne,ref:t}),l)}),une=e=>{var{children:t}=e,r=un(U_);if(!r)return null;var{width:n,height:o,y:l,x:h}=r;return N.createElement(CE,{width:n,height:o,x:h,y:l},t)},r6=N.forwardRef((e,t)=>{var{children:r}=e,n=ane(e,ine),o=$l();return o?N.createElement(une,null,N.createElement(t6,{isPanorama:!0},r)):N.createElement(lne,p_({ref:t},n),N.createElement(t6,{isPanorama:!1},r))});function cne(){var e=Lo(),[t,r]=N.useState(null),n=un(IG);return N.useEffect(()=>{if(t!=null){var o=t.getBoundingClientRect(),l=o.width/t.offsetWidth;so(l)&&l!==n&&e(mG(l))}},[t,e,n]),r}function n6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function dne(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n6(Object(r),!0).forEach(function(n){hne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hne(e,t,r){return(t=fne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fne(e){var t=pne(e,"string");return typeof t=="symbol"?t:t+""}function pne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function py(){return py=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},py.apply(null,arguments)}var gne=()=>(oY(),null);function g_(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var mne=N.forwardRef((e,t)=>{var r,n,o=N.useRef(null),[l,h]=N.useState({containerWidth:g_((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:g_((n=e.style)===null||n===void 0?void 0:n.height)}),u=N.useCallback((x,A)=>{h(C=>{var P=Math.round(x),O=Math.round(A);return C.containerWidth===P&&C.containerHeight===O?C:{containerWidth:P,containerHeight:O}})},[]),v=N.useCallback(x=>{if(typeof t=="function"&&t(x),x!=null&&typeof ResizeObserver<"u"){var{width:A,height:C}=x.getBoundingClientRect();u(A,C);var P=U=>{var{width:W,height:G}=U[0].contentRect;u(W,G)},O=new ResizeObserver(P);O.observe(x),o.current=O}},[t,u]);return N.useEffect(()=>()=>{var x=o.current;x!=null&&x.disconnect()},[u]),N.createElement(N.Fragment,null,N.createElement(q_,{width:l.containerWidth,height:l.containerHeight}),N.createElement("div",py({ref:v},e)))}),yne=N.forwardRef((e,t)=>{var{width:r,height:n}=e,[o,l]=N.useState({containerWidth:g_(r),containerHeight:g_(n)}),h=N.useCallback((v,x)=>{l(A=>{var C=Math.round(v),P=Math.round(x);return A.containerWidth===C&&A.containerHeight===P?A:{containerWidth:C,containerHeight:P}})},[]),u=N.useCallback(v=>{if(typeof t=="function"&&t(v),v!=null){var{width:x,height:A}=v.getBoundingClientRect();h(x,A)}},[t,h]);return N.createElement(N.Fragment,null,N.createElement(q_,{width:o.containerWidth,height:o.containerHeight}),N.createElement("div",py({ref:u},e)))}),vne=N.forwardRef((e,t)=>{var{width:r,height:n}=e;return N.createElement(N.Fragment,null,N.createElement(q_,{width:r,height:n}),N.createElement("div",py({ref:t},e)))}),xne=N.forwardRef((e,t)=>{var{width:r,height:n}=e;return qp(r)||qp(n)?N.createElement(yne,py({},e,{ref:t})):N.createElement(vne,py({},e,{ref:t}))});function _ne(e){return e===!0?mne:xne}var bne=N.forwardRef((e,t)=>{var{children:r,className:n,height:o,onClick:l,onContextMenu:h,onDoubleClick:u,onMouseDown:v,onMouseEnter:x,onMouseLeave:A,onMouseMove:C,onMouseUp:P,onTouchEnd:O,onTouchMove:U,onTouchStart:W,style:G,width:X,responsive:ae,dispatchTouchEvents:ne=!0}=e,ue=N.useRef(null),Q=Lo(),[de,he]=N.useState(null),[Y,ie]=N.useState(null),Ce=cne(),_e=HE(),Me=(_e==null?void 0:_e.width)>0?_e.width:X,me=(_e==null?void 0:_e.height)>0?_e.height:o,Ke=N.useCallback(at=>{Ce(at),typeof t=="function"&&t(at),he(at),ie(at),at!=null&&(ue.current=at)},[Ce,t,he,ie]),Re=N.useCallback(at=>{Q(RL(at)),Q(Cd({handler:l,reactEvent:at}))},[Q,l]),pe=N.useCallback(at=>{Q(qS(at)),Q(Cd({handler:x,reactEvent:at}))},[Q,x]),ge=N.useCallback(at=>{Q(xP()),Q(Cd({handler:A,reactEvent:at}))},[Q,A]),ze=N.useCallback(at=>{Q(qS(at)),Q(Cd({handler:C,reactEvent:at}))},[Q,C]),Pe=N.useCallback(()=>{Q(UL())},[Q]),st=N.useCallback(at=>{Q(GL(at.key))},[Q]),Ae=N.useCallback(at=>{Q(Cd({handler:h,reactEvent:at}))},[Q,h]),qe=N.useCallback(at=>{Q(Cd({handler:u,reactEvent:at}))},[Q,u]),Ze=N.useCallback(at=>{Q(Cd({handler:v,reactEvent:at}))},[Q,v]),zt=N.useCallback(at=>{Q(Cd({handler:P,reactEvent:at}))},[Q,P]),Tt=N.useCallback(at=>{Q(Cd({handler:W,reactEvent:at}))},[Q,W]),rr=N.useCallback(at=>{ne&&Q(qL(at)),Q(Cd({handler:U,reactEvent:at}))},[Q,ne,U]),Xt=N.useCallback(at=>{Q(Cd({handler:O,reactEvent:at}))},[Q,O]),tr=_ne(ae);return N.createElement(FP.Provider,{value:de},N.createElement(GD.Provider,{value:Y},N.createElement(tr,{width:Me??(G==null?void 0:G.width),height:me??(G==null?void 0:G.height),className:_a("recharts-wrapper",n),style:dne({position:"relative",cursor:"default",width:Me,height:me},G),onClick:Re,onContextMenu:Ae,onDoubleClick:qe,onFocus:Pe,onKeyDown:st,onMouseDown:Ze,onMouseEnter:pe,onMouseLeave:ge,onMouseMove:ze,onMouseUp:zt,onTouchEnd:Xt,onTouchMove:rr,onTouchStart:Tt,ref:Ke},N.createElement(gne,null),r)))}),wne=["width","height","responsive","children","className","style","compact","title","desc"];function Sne(e,t){if(e==null)return{};var r,n,o=Ene(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Ene(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ane=N.forwardRef((e,t)=>{var{width:r,height:n,responsive:o,children:l,className:h,style:u,compact:v,title:x,desc:A}=e,C=Sne(e,wne),P=Id(C);return v?N.createElement(N.Fragment,null,N.createElement(q_,{width:r,height:n}),N.createElement(r6,{otherAttributes:P,title:x,desc:A},l)):N.createElement(bne,{className:h,style:u,width:r,height:n,responsive:o??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},N.createElement(r6,{otherAttributes:P,title:x,desc:A,ref:t},N.createElement(lte,null,l)))});function WS(){return WS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},WS.apply(null,arguments)}var kne={top:5,right:5,bottom:5,left:5},Cne={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:kne,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},uA=N.forwardRef(function(t,r){var n,o=gl(t.categoricalChartProps,Cne),{chartName:l,defaultTooltipEventType:h,validateTooltipEventTypes:u,tooltipPayloadSearcher:v,categoricalChartProps:x}=t,A={chartName:l,defaultTooltipEventType:h,validateTooltipEventTypes:u,tooltipPayloadSearcher:v,eventEmitter:void 0};return N.createElement(ene,{preloadedState:{options:A},reduxStoreName:(n=x.id)!==null&&n!==void 0?n:l},N.createElement(Jee,{chartData:x.data}),N.createElement(rne,{layout:o.layout,margin:o.margin}),N.createElement(nne,{baseValue:o.baseValue,accessibilityLayer:o.accessibilityLayer,barCategoryGap:o.barCategoryGap,maxBarSize:o.maxBarSize,stackOffset:o.stackOffset,barGap:o.barGap,barSize:o.barSize,syncId:o.syncId,syncMethod:o.syncMethod,className:o.className,reverseStackOrder:o.reverseStackOrder}),N.createElement(Ane,WS({},o,{ref:r})))}),Tne=["axis"],HL=N.forwardRef((e,t)=>N.createElement(uA,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Tne,tooltipPayloadSearcher:W5,categoricalChartProps:e,ref:t})),Dne=["axis","item"],Mne=N.forwardRef((e,t)=>N.createElement(uA,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Dne,tooltipPayloadSearcher:W5,categoricalChartProps:e,ref:t})),zne=["axis"],Pne=N.forwardRef((e,t)=>N.createElement(uA,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:zne,tooltipPayloadSearcher:W5,categoricalChartProps:e,ref:t}));function Lne({onClose:e}){const[t,r]=N.useState("overview"),n=[{month:"Jan",utilization:65,capacity:100,traffic:58},{month:"Feb",utilization:68,capacity:100,traffic:62},{month:"Mar",utilization:71,capacity:100,traffic:65},{month:"Apr",utilization:69,capacity:100,traffic:63},{month:"May",utilization:74,capacity:100,traffic:70},{month:"Jun",utilization:72,capacity:100,traffic:68}],o=[{vendor:"CISCO",count:385,percentage:45},{vendor:"HUAWEI",count:299,percentage:35},{vendor:"NOKIA",count:172,percentage:20}],l=[{region:"Jakarta",links:245,utilization:78},{region:"Surabaya",links:189,utilization:72},{region:"Bandung",links:156,utilization:68},{region:"Medan",links:134,utilization:65},{region:"Makassar",links:98,utilization:62}];return S.jsx("div",{style:{position:"fixed",top:"16px",bottom:"16px",left:"304px",right:"16px",zIndex:1001},children:S.jsxs("div",{style:{height:"100%",background:"linear-gradient(145deg, rgba(255,255,255,0.95), rgba(240,240,240,0.9))",backdropFilter:"blur(20px)",borderRadius:"20px",border:"1px solid rgba(255,255,255,0.3)",boxShadow:"0 20px 40px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8)",display:"flex",flexDirection:"column",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[S.jsx("div",{style:{padding:"20px 24px",borderBottom:"1px solid rgba(0,0,0,0.05)"},children:S.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[S.jsx("div",{style:{background:"linear-gradient(135deg, #3B82F6, #8B5CF6)",padding:"8px",borderRadius:"8px"},children:S.jsx(DD,{style:{width:"20px",height:"20px",color:"white"}})}),S.jsxs("div",{children:[S.jsx("h2",{style:{fontSize:"18px",color:"#1F2937",fontWeight:"700",margin:0},children:"Analytics Dashboard"}),S.jsx("p",{style:{fontSize:"12px",color:"#6B7280",margin:0},children:"Network Performance & Insights"})]})]}),S.jsx("button",{onClick:e,style:{background:"linear-gradient(145deg, rgba(255,255,255,0.9), rgba(240,240,240,0.7))",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.3)",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:S.jsx(kf,{style:{width:"16px",height:"16px",color:"#6B7280"}})})]})}),S.jsx("div",{style:{padding:"12px 24px",borderBottom:"1px solid rgba(0,0,0,0.05)"},children:S.jsx("div",{style:{display:"flex",gap:"8px",background:"rgba(0,0,0,0.03)",padding:"4px",borderRadius:"8px"},children:["overview","performance","vendors","regions"].map(h=>S.jsx("button",{onClick:()=>r(h),style:{flex:1,padding:"8px 16px",borderRadius:"6px",border:"none",cursor:"pointer",fontSize:"13px",fontWeight:"500",background:t===h?"white":"transparent",color:t===h?"#1F2937":"#6B7280",boxShadow:t===h?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.2s ease",textTransform:"capitalize"},children:h},h))})}),S.jsxs("div",{style:{flex:1,overflow:"auto",padding:"24px"},children:[t==="overview"&&S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[S.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px"},children:[S.jsxs("div",{style:{background:"linear-gradient(135deg, #EFF6FF, #DBEAFE)",borderRadius:"12px",border:"1px solid #BFDBFE",padding:"16px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"8px"},children:[S.jsx("div",{style:{background:"#3B82F6",padding:"8px",borderRadius:"8px"},children:S.jsx(TD,{style:{width:"16px",height:"16px",color:"white"}})}),S.jsx("span",{style:{fontSize:"12px",color:"#2563EB"},children:"+12%"})]}),S.jsx("div",{style:{fontSize:"28px",color:"#1F2937",marginBottom:"4px",fontWeight:"700"},children:"1,247"}),S.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:"Total Links"})]}),S.jsxs("div",{style:{background:"linear-gradient(135deg, #F0FDF4, #DCFCE7)",borderRadius:"12px",border:"1px solid #BBF7D0",padding:"16px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"8px"},children:[S.jsx("div",{style:{background:"#10B981",padding:"8px",borderRadius:"8px"},children:S.jsx(PD,{style:{width:"16px",height:"16px",color:"white"}})}),S.jsx("span",{style:{fontSize:"12px",color:"#059669"},children:"+8%"})]}),S.jsx("div",{style:{fontSize:"28px",color:"#1F2937",marginBottom:"4px",fontWeight:"700"},children:"72%"}),S.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:"Avg Utilization"})]}),S.jsxs("div",{style:{background:"linear-gradient(135deg, #FAF5FF, #F3E8FF)",borderRadius:"12px",border:"1px solid #E9D5FF",padding:"16px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"8px"},children:[S.jsx("div",{style:{background:"#8B5CF6",padding:"8px",borderRadius:"8px"},children:S.jsx(LD,{style:{width:"16px",height:"16px",color:"white"}})}),S.jsx("span",{style:{fontSize:"12px",color:"#7C3AED"},children:"+15%"})]}),S.jsx("div",{style:{fontSize:"28px",color:"#1F2937",marginBottom:"4px",fontWeight:"700"},children:"856"}),S.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:"Active NE"})]}),S.jsxs("div",{style:{background:"linear-gradient(135deg, #FFF7ED, #FFEDD5)",borderRadius:"12px",border:"1px solid #FED7AA",padding:"16px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"8px"},children:[S.jsx("div",{style:{background:"#F97316",padding:"8px",borderRadius:"8px"},children:S.jsx(SE,{style:{width:"16px",height:"16px",color:"white"}})}),S.jsx("span",{style:{fontSize:"12px",color:"#EA580C"},children:"+5%"})]}),S.jsx("div",{style:{fontSize:"28px",color:"#1F2937",marginBottom:"4px",fontWeight:"700"},children:"12.5 Tbps"}),S.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:"Total Capacity"})]})]}),S.jsxs("div",{style:{background:"rgba(255,255,255,0.5)",backdropFilter:"blur(4px)",borderRadius:"12px",border:"1px solid rgba(0,0,0,0.05)",padding:"16px"},children:[S.jsx("h3",{style:{fontSize:"14px",color:"#1F2937",marginBottom:"16px",fontWeight:"600"},children:"Network Utilization Trend"}),S.jsx(g1,{width:"100%",height:250,children:S.jsxs(Pne,{data:n,children:[S.jsx("defs",{children:S.jsxs("linearGradient",{id:"colorUtil",x1:"0",y1:"0",x2:"0",y2:"1",children:[S.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),S.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),S.jsx(Mv,{dataKey:"month",tick:{fontSize:12},stroke:"#9ca3af"}),S.jsx(zv,{tick:{fontSize:12},stroke:"#9ca3af"}),S.jsx(y1,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px"}}),S.jsx(OL,{type:"monotone",dataKey:"utilization",stroke:"#3b82f6",strokeWidth:2,fill:"url(#colorUtil)"})]})})]})]}),t==="performance"&&S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[S.jsxs("div",{style:{background:"rgba(255,255,255,0.5)",backdropFilter:"blur(4px)",borderRadius:"12px",border:"1px solid rgba(0,0,0,0.05)",padding:"16px"},children:[S.jsx("h3",{style:{fontSize:"14px",color:"#1F2937",marginBottom:"16px",fontWeight:"600"},children:"Performance Metrics Comparison"}),S.jsx(g1,{width:"100%",height:300,children:S.jsxs(HL,{data:n,children:[S.jsx(Mv,{dataKey:"month",tick:{fontSize:12},stroke:"#9ca3af"}),S.jsx(zv,{tick:{fontSize:12},stroke:"#9ca3af"}),S.jsx(y1,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px"}}),S.jsx(mz,{}),S.jsx(h_,{type:"monotone",dataKey:"utilization",stroke:"#3b82f6",strokeWidth:2}),S.jsx(h_,{type:"monotone",dataKey:"traffic",stroke:"#10b981",strokeWidth:2})]})})]}),S.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:[S.jsxs("div",{style:{background:"rgba(255,255,255,0.5)",backdropFilter:"blur(4px)",borderRadius:"12px",border:"1px solid rgba(0,0,0,0.05)",padding:"16px"},children:[S.jsx("h4",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"12px",fontWeight:"600"},children:"Latency"}),S.jsx("div",{style:{fontSize:"28px",color:"#1F2937",marginBottom:"4px",fontWeight:"700"},children:"12.3 ms"}),S.jsx("div",{style:{fontSize:"12px",color:"#10B981"},children:" 5% from last month"})]}),S.jsxs("div",{style:{background:"rgba(255,255,255,0.5)",backdropFilter:"blur(4px)",borderRadius:"12px",border:"1px solid rgba(0,0,0,0.05)",padding:"16px"},children:[S.jsx("h4",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"12px",fontWeight:"600"},children:"Packet Loss"}),S.jsx("div",{style:{fontSize:"28px",color:"#1F2937",marginBottom:"4px",fontWeight:"700"},children:"0.01%"}),S.jsx("div",{style:{fontSize:"12px",color:"#10B981"},children:" 2% from last month"})]}),S.jsxs("div",{style:{background:"rgba(255,255,255,0.5)",backdropFilter:"blur(4px)",borderRadius:"12px",border:"1px solid rgba(0,0,0,0.05)",padding:"16px"},children:[S.jsx("h4",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"12px",fontWeight:"600"},children:"Availability"}),S.jsx("div",{style:{fontSize:"28px",color:"#1F2937",marginBottom:"4px",fontWeight:"700"},children:"99.98%"}),S.jsx("div",{style:{fontSize:"12px",color:"#10B981"},children:" 0.1% from last month"})]})]})]}),t==="vendors"&&S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[S.jsxs("div",{style:{background:"rgba(255,255,255,0.5)",backdropFilter:"blur(4px)",borderRadius:"12px",border:"1px solid rgba(0,0,0,0.05)",padding:"16px"},children:[S.jsx("h3",{style:{fontSize:"14px",color:"#1F2937",marginBottom:"16px",fontWeight:"600"},children:"Vendor Distribution"}),S.jsx(g1,{width:"100%",height:250,children:S.jsxs(Mne,{data:o,children:[S.jsx(Mv,{dataKey:"vendor",tick:{fontSize:12},stroke:"#9ca3af"}),S.jsx(zv,{tick:{fontSize:12},stroke:"#9ca3af"}),S.jsx(y1,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px"}}),S.jsx(mL,{dataKey:"count",fill:"#3b82f6",radius:[8,8,0,0]})]})})]}),S.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:o.map(h=>S.jsxs("div",{style:{background:"rgba(255,255,255,0.5)",backdropFilter:"blur(4px)",borderRadius:"12px",border:"1px solid rgba(0,0,0,0.05)",padding:"16px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[S.jsx("span",{style:{fontSize:"14px",color:"#1F2937",fontWeight:"600"},children:h.vendor}),S.jsxs("span",{style:{fontSize:"12px",color:"#6B7280"},children:[h.percentage,"%"]})]}),S.jsx("div",{style:{fontSize:"20px",color:"#1F2937",marginBottom:"8px",fontWeight:"700"},children:h.count}),S.jsx("div",{style:{width:"100%",height:"8px",background:"#E5E7EB",borderRadius:"4px",overflow:"hidden"},children:S.jsx("div",{style:{height:"100%",background:"#3B82F6",width:`${h.percentage}%`}})})]},h.vendor))})]}),t==="regions"&&S.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:S.jsxs("div",{style:{background:"rgba(255,255,255,0.5)",backdropFilter:"blur(4px)",borderRadius:"12px",border:"1px solid rgba(0,0,0,0.05)",padding:"16px"},children:[S.jsx("h3",{style:{fontSize:"14px",color:"#1F2937",marginBottom:"16px",fontWeight:"600"},children:"Regional Performance"}),S.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:l.map(h=>S.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",background:"rgba(255,255,255,0.5)",borderRadius:"8px"},children:S.jsxs("div",{style:{flex:1},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[S.jsx("span",{style:{fontSize:"14px",color:"#1F2937",fontWeight:"500"},children:h.region}),S.jsxs("span",{style:{fontSize:"12px",color:"#6B7280"},children:[h.links," links"]})]}),S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[S.jsx("div",{style:{flex:1,height:"8px",background:"#E5E7EB",borderRadius:"4px",overflow:"hidden"},children:S.jsx("div",{style:{height:"100%",background:h.utilization>75?"#F59E0B":"#10B981",width:`${h.utilization}%`}})}),S.jsxs("span",{style:{fontSize:"12px",color:"#6B7280",width:"48px",textAlign:"right"},children:[h.utilization,"%"]})]})]})},h.region))})]})})]})]})})}const Ine=({isOpen:e,onClose:t,onUpload:r})=>{const[n,o]=N.useState(null),[l,h]=N.useState(!1),[u,v]=N.useState(null),[x,A]=N.useState(!1),C=N.useRef(null),P=ae=>{if(ae.target.files&&ae.target.files[0]){const ne=ae.target.files[0];ne.name.endsWith(".csv")?(o(ne),v(null)):v("File harus berformat .csv")}},O=ae=>{ae.preventDefault(),A(!0)},U=ae=>{ae.preventDefault(),A(!1)},W=ae=>{if(ae.preventDefault(),A(!1),ae.dataTransfer.files&&ae.dataTransfer.files[0]){const ne=ae.dataTransfer.files[0];ne.name.endsWith(".csv")?(o(ne),v(null)):v("File harus berformat .csv")}},G=async()=>{if(!n){v("Silakan upload file CSV terlebih dahulu!");return}h(!0),v(null);try{const ae=await n.text();r(ae),h(!1),t(),o(null)}catch{v("Gagal membaca file CSV. Pastikan format file benar."),h(!1)}},X=()=>{o(null),v(null),C.current&&(C.current.value="")};return e?S.jsxs("div",{className:"modal-overlay",onClick:t,children:[S.jsxs("div",{className:"modal-content",onClick:ae=>ae.stopPropagation(),children:[S.jsxs("div",{className:"modal-header",children:[S.jsx("h2",{children:" Upload Data CSV"}),S.jsx("button",{className:"close-button",onClick:t,children:S.jsx(kf,{})})]}),S.jsxs("div",{className:"modal-body",children:[S.jsxs("div",{className:`drag-drop-area ${x?"dragging":""} ${n?"has-file":""}`,onDragOver:O,onDragLeave:U,onDrop:W,onClick:()=>{var ae;return(ae=C.current)==null?void 0:ae.click()},children:[S.jsx("input",{ref:C,type:"file",accept:".csv",onChange:P,style:{display:"none"}}),n?S.jsxs(S.Fragment,{children:[S.jsx(Cv,{className:"upload-icon success"}),S.jsx("p",{className:"file-selected",children:S.jsxs("strong",{children:[" ",n.name]})}),S.jsxs("p",{className:"file-size",children:[(n.size/1024).toFixed(2)," KB"]}),S.jsx("button",{type:"button",className:"change-file-button",onClick:ae=>{ae.stopPropagation(),X()},children:"Ganti File"})]}):S.jsxs(S.Fragment,{children:[S.jsx(Cv,{className:"upload-icon"}),S.jsx("p",{className:"drag-text",children:S.jsx("strong",{children:"Drag & drop file CSV di sini"})}),S.jsx("p",{className:"or-text",children:"atau"}),S.jsx("button",{type:"button",className:"browse-button",children:"Pilih File"}),S.jsxs("p",{className:"help-text",children:["File harus memiliki kolom: ",S.jsx("strong",{children:"node, latitude, longitude"})]})]})]}),u&&S.jsx("div",{className:"error-message",children:u}),S.jsxs("div",{className:"info-box",children:[S.jsx("p",{children:S.jsx("strong",{children:" Info:"})}),S.jsxs("ul",{children:[S.jsx("li",{children:"Setiap node merepresentasikan STO (Sentral Telepon Otomat)"}),S.jsx("li",{children:"Titik akan ditampilkan berdasarkan koordinat latitude/longitude"}),S.jsx("li",{children:"Koneksi antar node akan digenerate otomatis berdasarkan kedekatan geografis"})]})]})]}),S.jsxs("div",{className:"modal-footer",children:[S.jsx("button",{className:"button secondary",onClick:t,disabled:l,children:"Batal"}),S.jsx("button",{className:"button primary",onClick:G,disabled:l||!n,children:l?S.jsx(S.Fragment,{children:" Memproses..."}):S.jsxs(S.Fragment,{children:[S.jsx(Cv,{})," Upload & Visualisasi"]})})]})]}),S.jsx("style",{children:`
        .modal-overlay {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.6);
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 1000;
          backdrop-filter: blur(4px);
        }

        .modal-content {
          background: white;
          border-radius: 12px;
          max-width: 600px;
          width: 90%;
          max-height: 90vh;
          overflow-y: auto;
          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        .modal-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 20px 24px;
          border-bottom: 1px solid #e0e0e0;
        }

        .modal-header h2 {
          margin: 0;
          font-size: 1.5rem;
          color: #333;
        }

        .close-button {
          background: none;
          border: none;
          font-size: 1.5rem;
          cursor: pointer;
          padding: 4px;
          color: #666;
          transition: color 0.2s;
        }

        .close-button:hover {
          color: #333;
        }

        .modal-body {
          padding: 24px;
        }

        .drag-drop-area {
          border: 3px dashed #ccc;
          border-radius: 12px;
          padding: 60px 40px;
          text-align: center;
          cursor: pointer;
          transition: all 0.3s ease;
          background: #fafafa;
          margin-bottom: 20px;
        }

        .drag-drop-area:hover {
          border-color: #007bff;
          background: #f0f8ff;
        }

        .drag-drop-area.dragging {
          border-color: #007bff;
          background: #e3f2fd;
          transform: scale(1.02);
        }

        .drag-drop-area.has-file {
          border-color: #28a745;
          background: #f0fff4;
        }

        .upload-icon {
          font-size: 4rem;
          color: #007bff;
          margin-bottom: 16px;
        }

        .upload-icon.success {
          color: #28a745;
        }

        .drag-text {
          font-size: 1.1rem;
          color: #333;
          margin: 12px 0 8px 0;
        }

        .or-text {
          color: #999;
          margin: 12px 0;
          font-size: 0.9rem;
        }

        .browse-button {
          background: #007bff;
          color: white;
          border: none;
          padding: 10px 24px;
          border-radius: 6px;
          font-size: 1rem;
          cursor: pointer;
          transition: background 0.2s;
          margin: 8px 0;
        }

        .browse-button:hover {
          background: #0056b3;
        }

        .file-selected {
          font-size: 1.2rem;
          color: #28a745;
          margin: 12px 0 8px 0;
        }

        .file-size {
          color: #666;
          font-size: 0.9rem;
          margin-bottom: 16px;
        }

        .change-file-button {
          background: #6c757d;
          color: white;
          border: none;
          padding: 8px 20px;
          border-radius: 6px;
          font-size: 0.9rem;
          cursor: pointer;
          transition: background 0.2s;
        }

        .change-file-button:hover {
          background: #545b62;
        }

        .help-text {
          display: block;
          font-size: 0.85rem;
          color: #666;
          margin-top: 12px;
        }

        .error-message {
          background: #fee;
          border: 1px solid #fcc;
          color: #c33;
          padding: 12px;
          border-radius: 6px;
          margin-top: 16px;
        }

        .info-box {
          background: #f0f8ff;
          border: 1px solid #b8daff;
          border-radius: 6px;
          padding: 12px;
          margin-top: 16px;
          font-size: 0.9rem;
          color: #004085;
        }

        .info-box ul {
          margin: 8px 0 0 0;
          padding-left: 20px;
        }

        .info-box li {
          margin-bottom: 4px;
        }

        .modal-footer {
          display: flex;
          justify-content: flex-end;
          gap: 12px;
          padding: 20px 24px;
          border-top: 1px solid #e0e0e0;
        }

        .button {
          padding: 10px 20px;
          border: none;
          border-radius: 6px;
          font-size: 1rem;
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: 8px;
          transition: all 0.2s;
        }

        .button.primary {
          background: #007bff;
          color: white;
        }

        .button.primary:hover:not(:disabled) {
          background: #0056b3;
        }

        .button.secondary {
          background: #6c757d;
          color: white;
        }

        .button.secondary:hover:not(:disabled) {
          background: #545b62;
        }

        .button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }
      `})]}):null};function One({onSearch:e,suggestions:t=[],platformFilters:r=[],onFilterClick:n,onClearFilter:o}){const[l,h]=N.useState(""),[u,v]=N.useState(""),[x,A]=N.useState(""),[C,P]=N.useState(!1),[O,U]=N.useState(!1),[W,G]=N.useState(!1),[X,ae]=N.useState([]),[ne,ue]=N.useState(-1),[Q,de]=N.useState(null),he=N.useRef(null),Y=N.useRef(null);N.useEffect(()=>{if(l.trim().length>0){const Re=t.filter(pe=>{var ge,ze;return pe.label.toLowerCase().includes(l.toLowerCase())||pe.type.toLowerCase().includes(l.toLowerCase())||((ge=pe.metadata)==null?void 0:ge.witel)&&pe.metadata.witel.toLowerCase().includes(l.toLowerCase())||((ze=pe.metadata)==null?void 0:ze.sto)&&pe.metadata.sto.toLowerCase().includes(l.toLowerCase())}).slice(0,10);ae(Re),G(Re.length>0)}else ae([]),G(!1);ue(-1)},[l,t]),N.useEffect(()=>{const Re=pe=>{Y.current&&!Y.current.contains(pe.target)&&he.current&&!he.current.contains(pe.target)&&G(!1)};return document.addEventListener("mousedown",Re),()=>document.removeEventListener("mousedown",Re)},[]);const ie=()=>{l.trim()&&(e(l,Q||void 0),G(!1))},Ce=Re=>{h(Re.label),de(Re),G(!1),e(Re.label,Re)},_e=Re=>{Re.key==="Enter"?ne>=0&&X[ne]?Ce(X[ne]):ie():Re.key==="ArrowDown"?(Re.preventDefault(),ue(pe=>pe<X.length-1?pe+1:pe)):Re.key==="ArrowUp"?(Re.preventDefault(),ue(pe=>pe>0?pe-1:-1)):Re.key==="Escape"&&G(!1)},Me=()=>{U(!O),O&&(v(""),A(""))},me=()=>{u.trim()&&x.trim()&&e(`Route: ${u}  ${x}`)},Ke=Re=>{O?u?x||A(Re):v(Re):(n&&n(Re),h(Re)),P(!1)};return O?S.jsx("div",{style:{position:"fixed",top:"16px",left:"50%",transform:"translateX(-50%)",zIndex:999,width:"100%",maxWidth:"896px",padding:"0 16px"},children:S.jsxs("div",{style:{background:"linear-gradient(145deg, rgba(255,255,255,0.95), rgba(240,240,240,0.9))",backdropFilter:"blur(20px)",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.3)",boxShadow:"0 20px 40px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8)"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flex:1},children:[S.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"28px",height:"28px",borderRadius:"50%",background:"linear-gradient(135deg, #D1FAE5, #A7F3D0)",flexShrink:0},children:S.jsx(A_,{style:{width:"14px",height:"14px",color:"#059669"}})}),S.jsx("input",{placeholder:"Start point...",value:u,onChange:Re=>v(Re.target.value),style:{border:"none",background:"transparent",height:"32px",fontSize:"14px",outline:"none",padding:0,flex:1,color:"#1F2937",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'}}),u&&S.jsx("button",{onClick:()=>v(""),style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#9CA3AF"},children:S.jsx(kf,{style:{width:"14px",height:"14px"}})})]}),S.jsx("div",{style:{fontSize:"14px",color:"#9CA3AF"},children:""}),S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flex:1},children:[S.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"28px",height:"28px",borderRadius:"50%",background:"linear-gradient(135deg, #FEE2E2, #FECACA)",flexShrink:0},children:S.jsx(EB,{style:{width:"14px",height:"14px",color:"#DC2626"}})}),S.jsx("input",{placeholder:"Destination...",value:x,onChange:Re=>A(Re.target.value),style:{border:"none",background:"transparent",height:"32px",fontSize:"14px",outline:"none",padding:0,flex:1,color:"#1F2937",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'}}),x&&S.jsx("button",{onClick:()=>A(""),style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#9CA3AF"},children:S.jsx(kf,{style:{width:"14px",height:"14px"}})})]}),S.jsx("div",{style:{height:"16px",width:"1px",background:"#E5E7EB"}}),S.jsx("button",{onClick:()=>P(!C),style:{background:C?"linear-gradient(135deg, #4F46E520, #3B82F610)":"linear-gradient(145deg, rgba(255,255,255,0.9), rgba(240,240,240,0.7))",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.3)",padding:"6px",cursor:"pointer",color:C?"#4F46E5":"#6B7280"},children:S.jsx(Uw,{style:{width:"16px",height:"16px"}})}),S.jsx("button",{onClick:Me,style:{background:"linear-gradient(145deg, rgba(255,255,255,0.9), rgba(240,240,240,0.7))",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.3)",padding:"6px",cursor:"pointer",color:"#6B7280"},children:S.jsx(kf,{style:{width:"16px",height:"16px"}})}),S.jsx("button",{onClick:me,disabled:!u||!x,style:{background:!u||!x?"linear-gradient(135deg, #9CA3AF, #6B7280)":"linear-gradient(135deg, #8B5CF6, #7C3AED)",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.3)",padding:"6px 12px",cursor:!u||!x?"not-allowed":"pointer",color:"#FFFFFF",fontSize:"12px",fontWeight:"600",opacity:!u||!x?.5:1},children:"Find Route"})]}),C&&S.jsxs("div",{style:{borderTop:"1px solid rgba(0,0,0,0.05)",padding:"12px"},children:[S.jsxs("div",{style:{fontSize:"12px",color:"#6B7280",fontWeight:"600",marginBottom:"8px"},children:["Quick Select ",u?x?"":"(Destination)":"(Start)",":"]}),S.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:["Jakarta PE1","Surabaya PE2","Bandung PE3","Medan PE4","Semarang PE5"].map(Re=>S.jsx("button",{onClick:()=>Ke(Re),style:{fontSize:"12px",padding:"6px 12px",background:"rgba(255,255,255,0.6)",borderRadius:"8px",color:"#374151",border:"1px solid rgba(0,0,0,0.05)",cursor:"pointer"},children:Re},Re))})]})]})}):S.jsx("div",{style:{position:"fixed",top:"16px",left:"50%",transform:"translateX(-50%)",zIndex:999,width:"100%",maxWidth:"448px",padding:"0 16px"},children:S.jsxs("div",{style:{background:"linear-gradient(145deg, rgba(255,255,255,0.95), rgba(240,240,240,0.9))",backdropFilter:"blur(20px)",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.3)",boxShadow:"0 20px 40px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8)",position:"relative"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px"},children:[S.jsx(wE,{style:{width:"16px",height:"16px",color:"#9CA3AF",flexShrink:0}}),S.jsx("input",{ref:he,placeholder:"Search STO ",value:l,onChange:Re=>{h(Re.target.value),de(null),Re.target.value===""&&o&&o()},onKeyDown:_e,onFocus:()=>{X.length>0&&G(!0)},style:{border:"none",background:"transparent",height:"32px",fontSize:"14px",outline:"none",padding:0,flex:1,color:"#1F2937",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'}}),l&&S.jsx("button",{onClick:()=>{h(""),de(null),G(!1),o&&o()},style:{background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#9CA3AF"},title:"Clear search and filters",children:S.jsx(kf,{style:{width:"14px",height:"14px"}})}),S.jsx("div",{style:{height:"16px",width:"1px",background:"#E5E7EB"}}),S.jsx("button",{onClick:()=>P(!C),title:"Filters",style:{background:C?"linear-gradient(135deg, #4F46E520, #3B82F610)":"linear-gradient(145deg, rgba(255,255,255,0.9), rgba(240,240,240,0.7))",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.3)",padding:"6px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:C?"#4F46E5":"#6B7280",transition:"all 0.2s ease"},children:S.jsx(Uw,{style:{width:"16px",height:"16px"}})}),S.jsx("button",{onClick:Me,title:"Route Planning",style:{background:"linear-gradient(145deg, rgba(255,255,255,0.9), rgba(240,240,240,0.7))",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.3)",padding:"6px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"#6B7280",transition:"all 0.2s ease"},children:S.jsx(wB,{style:{width:"16px",height:"16px"}})}),S.jsx("button",{onClick:ie,style:{background:"linear-gradient(135deg, #4F46E5, #3B82F6)",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.3)",padding:"6px 12px",cursor:"pointer",color:"#FFFFFF",fontSize:"12px",fontWeight:"600",transition:"all 0.2s ease"},children:"Search"})]}),C&&S.jsxs("div",{style:{borderTop:"1px solid rgba(0,0,0,0.05)",padding:"12px"},children:[S.jsxs("div",{style:{fontSize:"12px",color:"#6B7280",fontWeight:"600",marginBottom:"8px"},children:["Platform Filters ",r.length>0?`(${r.length} available)`:"",":"]}),S.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:r.length>0?r.map(Re=>S.jsx("button",{onClick:()=>Ke(Re),style:{fontSize:"12px",padding:"6px 12px",background:"rgba(255,255,255,0.6)",backdropFilter:"blur(4px)",borderRadius:"8px",color:"#374151",transition:"all 0.2s",border:"1px solid rgba(0,0,0,0.05)",cursor:"pointer"},onMouseEnter:pe=>{pe.currentTarget.style.background="rgba(79, 70, 229, 0.15)",pe.currentTarget.style.borderColor="rgba(79, 70, 229, 0.3)"},onMouseLeave:pe=>{pe.currentTarget.style.background="rgba(255,255,255,0.6)",pe.currentTarget.style.borderColor="rgba(0,0,0,0.05)"},children:Re},Re)):S.jsx("div",{style:{fontSize:"11px",color:"#9CA3AF",fontStyle:"italic"},children:"No platforms available. Please select a layer first."})})]}),W&&X.length>0&&S.jsx("div",{ref:Y,style:{position:"absolute",top:"100%",left:"16px",right:"16px",marginTop:"8px",background:"linear-gradient(145deg, rgba(255,255,255,0.98), rgba(240,240,240,0.95))",backdropFilter:"blur(20px)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.3)",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",maxHeight:"320px",overflowY:"auto",zIndex:1e3},children:X.map((Re,pe)=>{var ge,ze;return S.jsx("div",{onClick:()=>Ce(Re),style:{padding:"10px 14px",cursor:"pointer",borderBottom:pe<X.length-1?"1px solid rgba(0,0,0,0.05)":"none",background:ne===pe?"rgba(79, 70, 229, 0.1)":"transparent",transition:"background 0.15s ease",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},onMouseEnter:Pe=>{Pe.currentTarget.style.background="rgba(79, 70, 229, 0.1)"},onMouseLeave:Pe=>{ne!==pe&&(Pe.currentTarget.style.background="transparent")},children:S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[S.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:Re.type==="capacity"?"#FF6B35":Re.type==="sirkit"?"#4ECDC4":Re.type==="multilayer"?"#9B59B6":Re.type==="nodeedges"?"#00BFFF":"#999999",flexShrink:0}}),S.jsxs("div",{style:{flex:1},children:[S.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:"#1F2937",marginBottom:"2px"},children:Re.label}),S.jsxs("div",{style:{fontSize:"11px",color:"#6B7280"},children:[Re.type==="capacity"&&" Capacity Node",Re.type==="sirkit"&&" Sirkit Node",Re.type==="multilayer"&&" Multilayer Node",Re.type==="nodeedges"&&" Network Node",((ge=Re.metadata)==null?void 0:ge.witel)&&`  ${Re.metadata.witel}`,((ze=Re.metadata)==null?void 0:ze.sto)&&`  ${Re.metadata.sto}`]})]})]})},Re.id)})})]})})}function jne({kpiData:e,onClose:t}){const[r,n]=N.useState("counter");return S.jsx("div",{style:{position:"fixed",top:"16px",bottom:"16px",right:"16px",width:"384px",zIndex:1e3},children:S.jsxs("div",{style:{height:"100%",background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(4px)",borderRadius:"16px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",border:"1px solid rgba(229, 231, 235, 0.5)",display:"flex",flexDirection:"column",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[S.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid rgba(229, 231, 235, 0.5)"},children:[S.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:S.jsx("button",{onClick:t,style:{background:"transparent",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",transition:"background-color 0.2s"},onMouseEnter:o=>{o.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.05)"},onMouseLeave:o=>{o.currentTarget.style.backgroundColor="transparent"},children:S.jsx(kf,{style:{width:"16px",height:"16px",color:"#6B7280"}})})}),S.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"4px",background:"rgba(243, 244, 246, 0.5)",borderRadius:"8px",padding:"4px"},children:["counter","analysis","business"].map(o=>S.jsx("button",{onClick:()=>n(o),style:{padding:"6px 12px",fontSize:"12px",fontWeight:"500",border:"none",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s",background:r===o?"white":"transparent",color:r===o?"#111827":"#6B7280",boxShadow:r===o?"0 1px 2px rgba(0, 0, 0, 0.05)":"none"},children:o.charAt(0).toUpperCase()+o.slice(1)},o))})]}),S.jsx("div",{style:{flex:1,overflow:"auto",padding:"16px"},children:S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[S.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px"},children:[S.jsxs("div",{style:{background:"linear-gradient(135deg, #ECFEFF 0%, #CFFAFE 100%)",borderRadius:"12px",border:"1px solid rgba(6, 182, 212, 0.3)",padding:"16px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"8px"},children:[S.jsx("div",{style:{background:"#06B6D4",borderRadius:"8px",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:S.jsx(PD,{style:{width:"16px",height:"16px",color:"white"}})}),S.jsxs("div",{style:{fontSize:"12px",color:"#0E7490"},children:["+",e.revenue.change,"%"]})]}),S.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:"#111827",marginBottom:"4px"},children:e.revenue.value}),S.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:"BKIS Revenue"})]}),S.jsxs("div",{style:{background:"linear-gradient(135deg, #F0FDF4 0%, #DCFCE7 100%)",borderRadius:"12px",border:"1px solid rgba(34, 197, 94, 0.3)",padding:"16px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"8px"},children:[S.jsx("div",{style:{background:"#22C55E",borderRadius:"8px",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:S.jsx(TD,{style:{width:"16px",height:"16px",color:"white"}})}),S.jsxs("div",{style:{fontSize:"12px",color:"#15803D"},children:["+",e.utilization.change,"%"]})]}),S.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:"#111827",marginBottom:"4px"},children:e.utilization.value}),S.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:"Network Utilization"})]}),S.jsxs("div",{style:{background:"linear-gradient(135deg, #FAF5FF 0%, #F3E8FF 100%)",borderRadius:"12px",border:"1px solid rgba(168, 85, 247, 0.3)",padding:"16px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"8px"},children:[S.jsx("div",{style:{background:"#A855F7",borderRadius:"8px",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:S.jsx(LD,{style:{width:"16px",height:"16px",color:"white"}})}),S.jsxs("div",{style:{fontSize:"12px",color:"#7E22CE"},children:["+",e.customerCount.change,"%"]})]}),S.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:"#111827",marginBottom:"4px"},children:e.customerCount.value}),S.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:"Customer Count"})]}),S.jsxs("div",{style:{background:"linear-gradient(135deg, #FFF7ED 0%, #FFEDD5 100%)",borderRadius:"12px",border:"1px solid rgba(249, 115, 22, 0.3)",padding:"16px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"8px"},children:[S.jsx("div",{style:{background:"#F97316",borderRadius:"8px",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:S.jsx(SE,{style:{width:"16px",height:"16px",color:"white"}})}),S.jsxs("div",{style:{fontSize:"12px",color:"#C2410C"},children:["+",e.bandwidth.change,"%"]})]}),S.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:"#111827",marginBottom:"4px"},children:e.bandwidth.value}),S.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:"Bandwidth Usage"})]})]}),S.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",borderRadius:"12px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"16px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[S.jsx("h3",{style:{margin:0,fontSize:"14px",fontWeight:"600",color:"#111827"},children:"Historical Trend"}),S.jsx("span",{style:{fontSize:"12px",color:"#3B82F6"},children:"6 Months"})]}),S.jsx(g1,{width:"100%",height:150,children:S.jsxs(HL,{data:e.historicalTrend,children:[S.jsx(Mv,{dataKey:"month",tick:{fontSize:10},stroke:"#9ca3af"}),S.jsx(zv,{tick:{fontSize:10},stroke:"#9ca3af"}),S.jsx(y1,{contentStyle:{fontSize:12,backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px"}}),S.jsx(h_,{type:"monotone",dataKey:"value",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",r:3}})]})})]}),S.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",borderRadius:"12px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"16px"},children:[S.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"14px",fontWeight:"600",color:"#111827"},children:"Network Summary"}),S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[S.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:"Total Links"}),S.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:"#111827"},children:"1,247"})]}),S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[S.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:"Active NE"}),S.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:"#111827"},children:"856"})]}),S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[S.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:"Total Capacity"}),S.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:"#111827"},children:"12.5 Tbps"})]}),S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[S.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:"Avg Utilization"}),S.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:"#22C55E"},children:"68%"})]})]})]}),S.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",borderRadius:"12px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"16px"},children:[S.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"14px",fontWeight:"600",color:"#111827"},children:"Vendor Distribution"}),S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[S.jsx("div",{style:{flex:"0 0 45%",height:"8px",background:"#3B82F6",borderRadius:"9999px"}}),S.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:"CISCO"}),S.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:"#111827",marginLeft:"auto"},children:"45%"})]}),S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[S.jsx("div",{style:{flex:"0 0 35%",height:"8px",background:"#EC4899",borderRadius:"9999px"}}),S.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:"HUAWEI"}),S.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:"#111827",marginLeft:"auto"},children:"35%"})]}),S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[S.jsx("div",{style:{flex:"0 0 20%",height:"8px",background:"#A855F7",borderRadius:"9999px"}}),S.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:"NOKIA"}),S.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:"#111827",marginLeft:"auto"},children:"20%"})]})]})]})]})})]})})}function Rne({nodes:e,expandedRows:t,onToggleExpand:r}){const[n,o]=N.useState({});return S.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[S.jsx("thead",{style:{position:"sticky",top:0,background:"linear-gradient(180deg, rgba(255,255,255,0.98) 0%, rgba(250,250,250,0.95) 100%)",backdropFilter:"blur(8px)",zIndex:10,boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:S.jsxs("tr",{children:[S.jsx("th",{style:{padding:"14px 16px",textAlign:"left",fontSize:"12px",fontWeight:"700",color:"#374151",borderBottom:"2px solid rgba(0,0,0,0.08)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Node ID"}),S.jsx("th",{style:{padding:"14px 16px",textAlign:"left",fontSize:"12px",fontWeight:"700",color:"#374151",borderBottom:"2px solid rgba(0,0,0,0.08)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Label"}),S.jsx("th",{style:{padding:"14px 16px",textAlign:"left",fontSize:"12px",fontWeight:"700",color:"#374151",borderBottom:"2px solid rgba(0,0,0,0.08)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Layer"}),S.jsx("th",{style:{padding:"14px 16px",textAlign:"left",fontSize:"12px",fontWeight:"700",color:"#374151",borderBottom:"2px solid rgba(0,0,0,0.08)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Platform"}),S.jsx("th",{style:{padding:"14px 16px",textAlign:"left",fontSize:"12px",fontWeight:"700",color:"#374151",borderBottom:"2px solid rgba(0,0,0,0.08)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Region"}),S.jsx("th",{style:{padding:"14px 16px",textAlign:"left",fontSize:"12px",fontWeight:"700",color:"#374151",borderBottom:"2px solid rgba(0,0,0,0.08)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Witel"}),S.jsx("th",{style:{padding:"14px 16px",textAlign:"left",fontSize:"12px",fontWeight:"700",color:"#374151",borderBottom:"2px solid rgba(0,0,0,0.08)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Type"}),S.jsx("th",{style:{padding:"14px 16px",textAlign:"center",fontSize:"12px",fontWeight:"700",color:"#374151",borderBottom:"2px solid rgba(0,0,0,0.08)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Coordinates"}),S.jsx("th",{style:{padding:"14px 16px",textAlign:"center",fontSize:"12px",fontWeight:"700",color:"#374151",borderBottom:"2px solid rgba(0,0,0,0.08)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Details"})]})}),S.jsx("tbody",{children:e.map((l,h)=>{var x,A;const u=t.has(l.id),v=l.details&&l.details.length>0;return S.jsxs(S.Fragment,{children:[S.jsxs("tr",{style:{borderBottom:"1px solid rgba(0,0,0,0.06)",background:h%2===0?"rgba(255,255,255,0.5)":"rgba(249,250,251,0.5)",transition:"all 0.2s"},onMouseEnter:C=>{C.currentTarget.style.background="rgba(59, 130, 246, 0.05)"},onMouseLeave:C=>{C.currentTarget.style.background=h%2===0?"rgba(255,255,255,0.5)":"rgba(249,250,251,0.5)"},children:[S.jsx("td",{style:{padding:"12px 16px",fontSize:"13px",fontFamily:"monospace",color:"#1F2937",fontWeight:"600"},children:l.id}),S.jsx("td",{style:{padding:"12px 16px",fontSize:"13px",color:"#1F2937",fontWeight:"500"},children:l.label||"N/A"}),S.jsx("td",{style:{padding:"12px 16px",fontSize:"13px"},children:S.jsx("span",{style:{display:"inline-block",padding:"4px 10px",borderRadius:"6px",fontSize:"11px",fontWeight:"600",background:"linear-gradient(135deg, #10B981 0%, #059669 100%)",color:"white",boxShadow:"0 2px 4px rgba(16, 185, 129, 0.2)"},children:l.layer||"N/A"})}),S.jsx("td",{style:{padding:"12px 16px",fontSize:"13px",color:"#1F2937"},children:l.platform||"N/A"}),S.jsxs("td",{style:{padding:"12px 16px",fontSize:"13px",color:"#1F2937"},children:["REG ",l.reg||"N/A"]}),S.jsx("td",{style:{padding:"12px 16px",fontSize:"13px",color:"#1F2937"},children:l.witel||"N/A"}),S.jsx("td",{style:{padding:"12px 16px",fontSize:"13px",color:"#1F2937"},children:l.types||"N/A"}),S.jsxs("td",{style:{padding:"12px 16px",fontSize:"11px",fontFamily:"monospace",color:"#6B7280",textAlign:"center"},children:[l.x.toFixed(4),", ",l.y.toFixed(4)]}),S.jsx("td",{style:{padding:"12px 16px",textAlign:"center"},children:v&&S.jsxs("button",{onClick:()=>r(l.id),style:{background:u?"linear-gradient(135deg, #3B82F6 0%, #2563EB 100%)":"rgba(59, 130, 246, 0.1)",border:"none",borderRadius:"6px",padding:"6px 12px",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"6px",fontSize:"11px",fontWeight:"600",color:u?"white":"#3B82F6",transition:"all 0.2s"},children:[u?S.jsx(xE,{}):S.jsx(Iv,{}),S.jsxs("span",{children:[((x=l.details)==null?void 0:x.length)||0," items"]})]})})]},l.id),u&&v&&S.jsx("tr",{children:S.jsx("td",{colSpan:9,style:{padding:"0",background:"rgba(59, 130, 246, 0.02)"},children:S.jsxs("div",{style:{padding:"16px",borderLeft:"4px solid #3B82F6"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"12px"},children:[S.jsxs("h4",{style:{fontSize:"13px",fontWeight:"700",color:"#1F2937",margin:0,whiteSpace:"nowrap"},children:["Node Details (",((A=l.details)==null?void 0:A.length)||0," items)"]}),S.jsxs("div",{style:{position:"relative",flex:1,maxWidth:"400px"},children:[S.jsx(wE,{style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#9CA3AF",width:"16px",height:"16px"}}),S.jsx("input",{type:"text",placeholder:"Search in details...",value:n[l.id]||"",onChange:C=>o({...n,[l.id]:C.target.value}),style:{width:"100%",padding:"8px 12px 8px 36px",borderRadius:"8px",border:"1px solid rgba(0,0,0,0.1)",fontSize:"12px",outline:"none",transition:"all 0.2s"},onFocus:C=>{C.currentTarget.style.borderColor="#3B82F6",C.currentTarget.style.boxShadow="0 0 0 3px rgba(59, 130, 246, 0.1)"},onBlur:C=>{C.currentTarget.style.borderColor="rgba(0,0,0,0.1)",C.currentTarget.style.boxShadow="none"}})]})]}),S.jsx("div",{style:{overflowX:"auto",overflowY:"visible",borderRadius:"8px",border:"1px solid rgba(0,0,0,0.06)",maxHeight:"500px"},children:S.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",background:"white"},children:[S.jsx("thead",{style:{background:"linear-gradient(135deg, #F8FAFC, #F1F5F9)"},children:S.jsx("tr",{children:l.details&&l.details.length>0&&Object.keys(l.details[0]).map(C=>S.jsx("th",{style:{padding:"10px 12px",fontSize:"11px",fontWeight:"700",color:"#475569",textAlign:"left",textTransform:"uppercase",letterSpacing:"0.5px",borderBottom:"2px solid rgba(0,0,0,0.06)",whiteSpace:"nowrap"},children:C.replace(/_/g," ")},C))})}),S.jsx("tbody",{children:(l.details||[]).filter(C=>{const P=(n[l.id]||"").toLowerCase();return P?Object.values(C).some(O=>String(O).toLowerCase().includes(P)):!0}).map((C,P)=>S.jsx("tr",{style:{borderBottom:"1px solid rgba(0,0,0,0.04)",background:P%2===0?"white":"rgba(249,250,251,0.5)",transition:"background 0.2s"},onMouseEnter:O=>{O.currentTarget.style.background="rgba(59, 130, 246, 0.05)"},onMouseLeave:O=>{O.currentTarget.style.background=P%2===0?"white":"rgba(249,250,251,0.5)"},children:Object.entries(C).map(([O,U])=>S.jsx("td",{style:{padding:"10px 12px",fontSize:"12px",color:"#1F2937",whiteSpace:"nowrap"},children:String(U)},O))},P))})]})}),(l.details||[]).filter(C=>{const P=(n[l.id]||"").toLowerCase();return P?Object.values(C).some(O=>String(O).toLowerCase().includes(P)):!0}).length===0&&n[l.id]&&S.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"#6B7280",fontSize:"13px",background:"white",borderRadius:"8px",marginTop:"8px"},children:['No results found for "',n[l.id],'"']})]})})})]})})})]})}function Nne({edges:e,expandedRows:t,onToggleExpand:r}){const[n,o]=N.useState({});return S.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[S.jsx("thead",{style:{position:"sticky",top:0,background:"linear-gradient(180deg, rgba(255,255,255,0.98) 0%, rgba(250,250,250,0.95) 100%)",backdropFilter:"blur(8px)",zIndex:10,boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:S.jsxs("tr",{children:[S.jsx("th",{style:{padding:"14px 16px",textAlign:"left",fontSize:"12px",fontWeight:"700",color:"#374151",borderBottom:"2px solid rgba(0,0,0,0.08)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Edge ID"}),S.jsx("th",{style:{padding:"14px 16px",textAlign:"left",fontSize:"12px",fontWeight:"700",color:"#374151",borderBottom:"2px solid rgba(0,0,0,0.08)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Source"}),S.jsx("th",{style:{padding:"14px 16px",textAlign:"left",fontSize:"12px",fontWeight:"700",color:"#374151",borderBottom:"2px solid rgba(0,0,0,0.08)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Target"}),S.jsx("th",{style:{padding:"14px 16px",textAlign:"left",fontSize:"12px",fontWeight:"700",color:"#374151",borderBottom:"2px solid rgba(0,0,0,0.08)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Ruas"}),S.jsx("th",{style:{padding:"14px 16px",textAlign:"left",fontSize:"12px",fontWeight:"700",color:"#374151",borderBottom:"2px solid rgba(0,0,0,0.08)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Layer"}),S.jsx("th",{style:{padding:"14px 16px",textAlign:"right",fontSize:"12px",fontWeight:"700",color:"#374151",borderBottom:"2px solid rgba(0,0,0,0.08)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Capacity"}),S.jsx("th",{style:{padding:"14px 16px",textAlign:"right",fontSize:"12px",fontWeight:"700",color:"#374151",borderBottom:"2px solid rgba(0,0,0,0.08)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Traffic Max"}),S.jsx("th",{style:{padding:"14px 16px",textAlign:"right",fontSize:"12px",fontWeight:"700",color:"#374151",borderBottom:"2px solid rgba(0,0,0,0.08)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Utilization"}),S.jsx("th",{style:{padding:"14px 16px",textAlign:"center",fontSize:"12px",fontWeight:"700",color:"#374151",borderBottom:"2px solid rgba(0,0,0,0.08)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Links"}),S.jsx("th",{style:{padding:"14px 16px",textAlign:"center",fontSize:"12px",fontWeight:"700",color:"#374151",borderBottom:"2px solid rgba(0,0,0,0.08)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Details"})]})}),S.jsx("tbody",{children:e.map((l,h)=>{var U,W;const u=t.has(l.id),v=l.details&&l.details.length>0;let x=0;v?x=(l.details||[]).reduce((G,X)=>{const ae=typeof X.capacity=="number"?X.capacity:0;return G+ae},0):x=l.total_capacity||0;const A=x>0?(x/1e3).toFixed(2):"0",C=l.traffic_max?(l.traffic_max/1e9).toFixed(2):l.total_traffic_max_in?(Math.max(l.total_traffic_max_in,l.total_traffic_max_out||0)/1e9).toFixed(2):"0",P=l.avg_utilization||0;let O="#10B981";return P>80?O="#EF4444":P>60?O="#F59E0B":P>40&&(O="#FBBF24"),S.jsxs(S.Fragment,{children:[S.jsxs("tr",{style:{borderBottom:"1px solid rgba(0,0,0,0.06)",background:h%2===0?"rgba(255,255,255,0.5)":"rgba(249,250,251,0.5)",transition:"all 0.2s"},onMouseEnter:G=>{G.currentTarget.style.background="rgba(139, 92, 246, 0.05)"},onMouseLeave:G=>{G.currentTarget.style.background=h%2===0?"rgba(255,255,255,0.5)":"rgba(249,250,251,0.5)"},children:[S.jsx("td",{style:{padding:"12px 16px",fontSize:"11px",fontFamily:"monospace",color:"#1F2937",fontWeight:"600"},children:l.id}),S.jsx("td",{style:{padding:"12px 16px",fontSize:"13px",color:"#1F2937",fontWeight:"500"},children:S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[S.jsx("span",{style:{color:"#3B82F6",fontWeight:"600"},children:l.source_label||l.source}),S.jsx("span",{style:{fontSize:"10px",color:"#9CA3AF",fontFamily:"monospace"},children:l.source})]})}),S.jsx("td",{style:{padding:"12px 16px",fontSize:"13px",color:"#1F2937",fontWeight:"500"},children:S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[S.jsx("span",{style:{color:"#10B981",fontWeight:"600"},children:l.target_label||l.target}),S.jsx("span",{style:{fontSize:"10px",color:"#9CA3AF",fontFamily:"monospace"},children:l.target})]})}),S.jsx("td",{style:{padding:"12px 16px",fontSize:"12px",color:"#6B7280"},children:l.ruas_list||"N/A"}),S.jsx("td",{style:{padding:"12px 16px",fontSize:"13px"},children:S.jsx("span",{style:{display:"inline-block",padding:"4px 10px",borderRadius:"6px",fontSize:"11px",fontWeight:"600",background:"linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%)",color:"white",boxShadow:"0 2px 4px rgba(139, 92, 246, 0.2)"},children:l.layer_list||"N/A"})}),S.jsxs("td",{style:{padding:"12px 16px",fontSize:"13px",fontWeight:"700",color:"#8B5CF6",textAlign:"right"},children:[A," Gbps"]}),S.jsxs("td",{style:{padding:"12px 16px",fontSize:"13px",fontWeight:"600",color:"#6366F1",textAlign:"right"},children:[C," Gbps"]}),S.jsx("td",{style:{padding:"12px 16px",textAlign:"right"},children:S.jsxs("span",{style:{display:"inline-block",padding:"4px 10px",borderRadius:"6px",fontSize:"12px",fontWeight:"700",background:`${O}20`,color:O},children:[P.toFixed(1),"%"]})}),S.jsx("td",{style:{padding:"12px 16px",textAlign:"center"},children:S.jsx("span",{style:{display:"inline-block",padding:"4px 10px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",background:"rgba(59, 130, 246, 0.1)",color:"#3B82F6"},children:l.link_count||1})}),S.jsx("td",{style:{padding:"12px 16px",textAlign:"center"},children:v&&S.jsxs("button",{onClick:()=>r(l.id),style:{background:u?"linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%)":"rgba(139, 92, 246, 0.1)",border:"none",borderRadius:"6px",padding:"6px 12px",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"6px",fontSize:"11px",fontWeight:"600",color:u?"white":"#8B5CF6",transition:"all 0.2s"},children:[u?S.jsx(xE,{}):S.jsx(Iv,{}),S.jsxs("span",{children:[((U=l.details)==null?void 0:U.length)||0," items"]})]})})]},l.id),u&&v&&S.jsx("tr",{children:S.jsx("td",{colSpan:11,style:{padding:"0",background:"rgba(139, 92, 246, 0.02)"},children:S.jsxs("div",{style:{padding:"16px",borderLeft:"4px solid #8B5CF6"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"12px"},children:[S.jsxs("h4",{style:{fontSize:"13px",fontWeight:"700",color:"#1F2937",margin:0,whiteSpace:"nowrap"},children:["Edge Details (",((W=l.details)==null?void 0:W.length)||0," physical links)"]}),S.jsxs("div",{style:{position:"relative",flex:1,maxWidth:"400px"},children:[S.jsx(wE,{style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#9CA3AF",width:"16px",height:"16px"}}),S.jsx("input",{type:"text",placeholder:"Search in details...",value:n[l.id]||"",onChange:G=>o({...n,[l.id]:G.target.value}),style:{width:"100%",padding:"8px 12px 8px 36px",borderRadius:"8px",border:"1px solid rgba(0,0,0,0.1)",fontSize:"12px",outline:"none",transition:"all 0.2s"},onFocus:G=>{G.currentTarget.style.borderColor="#8B5CF6",G.currentTarget.style.boxShadow="0 0 0 3px rgba(139, 92, 246, 0.1)"},onBlur:G=>{G.currentTarget.style.borderColor="rgba(0,0,0,0.1)",G.currentTarget.style.boxShadow="none"}})]})]}),S.jsx("div",{style:{overflowX:"auto",overflowY:"visible",borderRadius:"8px",border:"1px solid rgba(0,0,0,0.06)",maxHeight:"500px"},children:S.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",background:"white"},children:[S.jsx("thead",{style:{background:"linear-gradient(135deg, #F8FAFC, #F1F5F9)"},children:S.jsx("tr",{children:l.details&&l.details.length>0&&Object.keys(l.details[0]).map(G=>S.jsx("th",{style:{padding:"10px 12px",fontSize:"11px",fontWeight:"700",color:"#475569",textAlign:"left",textTransform:"uppercase",letterSpacing:"0.5px",borderBottom:"2px solid rgba(0,0,0,0.06)",whiteSpace:"nowrap"},children:G.replace(/_/g," ")},G))})}),S.jsx("tbody",{children:(l.details||[]).filter(G=>{const X=(n[l.id]||"").toLowerCase();return X?Object.values(G).some(ae=>String(ae).toLowerCase().includes(X)):!0}).map((G,X)=>S.jsx("tr",{style:{borderBottom:"1px solid rgba(0,0,0,0.04)",background:X%2===0?"white":"rgba(249,250,251,0.5)",transition:"background 0.2s"},onMouseEnter:ae=>{ae.currentTarget.style.background="rgba(139, 92, 246, 0.05)"},onMouseLeave:ae=>{ae.currentTarget.style.background=X%2===0?"white":"rgba(249,250,251,0.5)"},children:Object.entries(G).map(([ae,ne])=>S.jsx("td",{style:{padding:"10px 12px",fontSize:"12px",color:"#1F2937",whiteSpace:"nowrap"},children:String(ne)},ae))},X))})]})}),(l.details||[]).filter(G=>{const X=(n[l.id]||"").toLowerCase();return X?Object.values(G).some(ae=>String(ae).toLowerCase().includes(X)):!0}).length===0&&n[l.id]&&S.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"#6B7280",fontSize:"13px",background:"white",borderRadius:"8px",marginTop:"8px"},children:['No results found for "',n[l.id],'"']})]})})})]})})})]})}function Bne({elements:e=[],ruasRekapData:t,selectedRuasLayer:r,onClose:n}){const[o,l]=N.useState(""),[h,u]=N.useState("nodes"),[v,x]=N.useState(new Set),A=(t==null?void 0:t.nodes)||[],C=(t==null?void 0:t.edges)||[],P=X=>{const ae=new Set(v);ae.has(X)?ae.delete(X):ae.add(X),x(ae)},O=A.filter(X=>{var ae,ne,ue,Q,de;return((ae=String(X.id||""))==null?void 0:ae.toLowerCase().includes(o.toLowerCase()))||((ne=String(X.label||""))==null?void 0:ne.toLowerCase().includes(o.toLowerCase()))||((ue=String(X.platform||""))==null?void 0:ue.toLowerCase().includes(o.toLowerCase()))||((Q=String(X.witel||""))==null?void 0:Q.toLowerCase().includes(o.toLowerCase()))||((de=String(X.layer||""))==null?void 0:de.toLowerCase().includes(o.toLowerCase()))}),U=C.filter(X=>{var ae,ne,ue,Q,de,he;return((ae=String(X.id||""))==null?void 0:ae.toLowerCase().includes(o.toLowerCase()))||((ne=String(X.source||""))==null?void 0:ne.toLowerCase().includes(o.toLowerCase()))||((ue=String(X.target||""))==null?void 0:ue.toLowerCase().includes(o.toLowerCase()))||((Q=String(X.source_label||""))==null?void 0:Q.toLowerCase().includes(o.toLowerCase()))||((de=String(X.target_label||""))==null?void 0:de.toLowerCase().includes(o.toLowerCase()))||((he=String(X.ruas_list||""))==null?void 0:he.toLowerCase().includes(o.toLowerCase()))}),W=()=>{const X=h==="nodes"?O:U;if(X.length===0){alert("No data to export");return}const ae=Object.keys(X[0]).filter(he=>he!=="details"),ne=[ae.join(","),...X.map(he=>ae.map(Y=>{const ie=he[Y];return typeof ie=="string"&&ie.includes(",")?`"${ie}"`:ie}).join(","))].join(`
`),ue=new Blob([ne],{type:"text/csv"}),Q=URL.createObjectURL(ue),de=document.createElement("a");de.href=Q,de.download=`${r||"data"}_${h}_${new Date().toISOString().split("T")[0]}.csv`,de.click(),URL.revokeObjectURL(Q)},G=t&&(A.length>0||C.length>0);return S.jsx("div",{style:{position:"fixed",top:"16px",bottom:"16px",left:"16px",right:"16px",zIndex:1e3},children:S.jsxs("div",{style:{height:"100%",background:"linear-gradient(145deg, rgba(255,255,255,0.98), rgba(245,245,245,0.95))",backdropFilter:"blur(20px)",borderRadius:"20px",border:"1px solid rgba(255,255,255,0.3)",boxShadow:"0 20px 60px rgba(0,0,0,0.15), inset 0 1px 0 rgba(255,255,255,0.9)",display:"flex",flexDirection:"column",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[S.jsxs("div",{style:{padding:"20px",borderBottom:"2px solid rgba(0,0,0,0.06)"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[S.jsxs("div",{children:[S.jsx("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1F2937",margin:0,marginBottom:"4px"},children:G?`${r||"Ruas Rekap"} Layer Data`:"Network Elements Data"}),S.jsx("p",{style:{fontSize:"13px",color:"#6B7280",margin:0},children:G?`${A.length} nodes and ${C.length} edges in this layer`:`${e.length} network elements`})]}),S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[S.jsxs("button",{onClick:W,style:{background:"linear-gradient(135deg, #3B82F6 0%, #2563EB 100%)",borderRadius:"10px",border:"none",padding:"8px 16px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"13px",fontWeight:"600",color:"white",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)",transition:"all 0.2s"},children:[S.jsx(zD,{style:{width:"16px",height:"16px"}}),S.jsx("span",{children:"Export CSV"})]}),S.jsx("button",{onClick:n,style:{background:"linear-gradient(145deg, rgba(255,255,255,0.9), rgba(240,240,240,0.7))",borderRadius:"10px",border:"1px solid rgba(0,0,0,0.1)",padding:"10px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},children:S.jsx(kf,{style:{width:"18px",height:"18px",color:"#6B7280"}})})]})]}),G&&S.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:[S.jsxs("button",{onClick:()=>u("nodes"),style:{flex:1,padding:"10px 16px",borderRadius:"10px",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"13px",fontWeight:"600",background:h==="nodes"?"linear-gradient(135deg, #10B981 0%, #059669 100%)":"rgba(255,255,255,0.5)",color:h==="nodes"?"white":"#6B7280",boxShadow:h==="nodes"?"0 4px 12px rgba(16, 185, 129, 0.3)":"none",transition:"all 0.2s"},children:[S.jsx(I0,{style:{width:"16px",height:"16px"}}),S.jsxs("span",{children:["Nodes (",O.length,")"]})]}),S.jsxs("button",{onClick:()=>u("edges"),style:{flex:1,padding:"10px 16px",borderRadius:"10px",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"13px",fontWeight:"600",background:h==="edges"?"linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%)":"rgba(255,255,255,0.5)",color:h==="edges"?"white":"#6B7280",boxShadow:h==="edges"?"0 4px 12px rgba(139, 92, 246, 0.3)":"none",transition:"all 0.2s"},children:[S.jsx(xB,{style:{width:"16px",height:"16px"}}),S.jsxs("span",{children:["Edges (",U.length,")"]})]})]}),S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[S.jsx("div",{style:{flex:1,position:"relative"},children:S.jsx("input",{placeholder:G?h==="nodes"?"Search nodes by ID, label, platform, witel...":"Search edges by ID, source, target, ruas...":"Search by hostname, site, area...",value:o,onChange:X=>l(X.target.value),style:{width:"98%",padding:"10px 14px",fontSize:"14px",border:"2px solid rgba(0,0,0,0.08)",borderRadius:"10px",outline:"none",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',transition:"all 0.2s"}})}),S.jsxs("button",{style:{background:"white",borderRadius:"10px",border:"2px solid rgba(0,0,0,0.08)",padding:"10px 16px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"13px",fontWeight:"600",color:"#1F2937",transition:"all 0.2s"},children:[S.jsx(Uw,{style:{width:"16px",height:"16px"}}),S.jsx("span",{children:"Filters"})]})]})]}),S.jsx("div",{style:{flex:1,overflow:"auto",background:"rgba(249,250,251,0.3)"},children:G?h==="nodes"?S.jsx(Rne,{nodes:O,expandedRows:v,onToggleExpand:P}):S.jsx(Nne,{edges:U,expandedRows:v,onToggleExpand:P}):S.jsxs("div",{style:{padding:"40px",textAlign:"center",color:"#6B7280"},children:[S.jsx("p",{style:{fontSize:"14px",marginBottom:"8px"},children:"No Ruas Rekap data available"}),S.jsx("p",{style:{fontSize:"12px"},children:"Please select a Ruas layer from the left sidebar"})]})}),S.jsx("div",{style:{padding:"16px 20px",borderTop:"2px solid rgba(0,0,0,0.06)",background:"rgba(255,255,255,0.8)"},children:S.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:[S.jsxs("span",{children:["Showing ",G?h==="nodes"?O.length:U.length:0," of ",G?h==="nodes"?A.length:C.length:0," ",h]}),S.jsxs("span",{children:["Last updated: ",new Date().toLocaleString()]})]})})]})})}const Fne={national:_E,regional:I0,witel:A_,sto:bE},$ne=[{level:"national",name:"National",description:"Nationwide overview",icon:_E,zoom:4,targetZoom:4.5},{level:"regional",name:"Regional",description:"Regional clusters",icon:I0,zoom:6,targetZoom:6.5},{level:"witel",name:"Witel",description:"Witel districts",icon:A_,zoom:8,targetZoom:8.5},{level:"sto",name:"STO",description:"STO sites",icon:bE,zoom:10,targetZoom:11}],Gne=e=>e<5.5?{layer:"L1",name:"National Backbone",description:"Core infrastructure",icon:SE,color:"#DC2626",bgGradient:"linear-gradient(135deg, #FEE2E2, #FECACA)"}:e<7?{layer:"L2",name:"Regional Aggregation",description:"Metropolitan networks",icon:I0,color:"#EA580C",bgGradient:"linear-gradient(135deg, #FED7AA, #FDBA74)"}:e<9?{layer:"L3",name:"Witel Distribution",description:"Local distribution",icon:A_,color:"#059669",bgGradient:"linear-gradient(135deg, #D1FAE5, #A7F3D0)"}:{layer:"L4",name:"STO Detail",description:"Site details",icon:bE,color:"#4F46E5",bgGradient:"linear-gradient(135deg, #E0E7FF, #C7D2FE)"};function Une({currentLevel:e,navigationPath:t,onLevelChange:r,onNavigateBack:n,onZoomToLevel:o,currentZoom:l=5,totalNodes:h=0,totalLinks:u=0}){const[v,x]=N.useState({x:310,y:16}),[A,C]=N.useState(!1),[P,O]=N.useState(!0),[U,W]=N.useState(!1),[G,X]=N.useState({x:0,y:0}),ae=N.useRef(null),ne=Gne(l),ue=he=>{if(ae.current){const Y=ae.current.getBoundingClientRect();X({x:he.clientX-Y.left,y:he.clientY-Y.top}),W(!0)}};N.useEffect(()=>{const he=ie=>{U&&x({x:ie.clientX-G.x,y:ie.clientY-G.y})},Y=()=>{W(!1)};return U&&(document.addEventListener("mousemove",he),document.addEventListener("mouseup",Y)),()=>{document.removeEventListener("mousemove",he),document.removeEventListener("mouseup",Y)}},[U,G]);const Q=({children:he,style:Y={}})=>S.jsx("div",{style:{background:"linear-gradient(145deg, rgba(255,255,255,0.95), rgba(240,240,240,0.9))",backdropFilter:"blur(20px)",borderRadius:"20px",border:"1px solid rgba(255,255,255,0.3)",boxShadow:"0 20px 40px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',...Y},children:he}),de=({onClick:he,children:Y,title:ie,size:Ce="normal"})=>S.jsx("button",{onClick:he,title:ie,style:{background:"linear-gradient(145deg, rgba(255,255,255,0.9), rgba(240,240,240,0.7))",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.3)",boxShadow:"inset 0 1px 2px rgba(255,255,255,0.8), inset 0 -1px 2px rgba(0,0,0,0.1)",padding:Ce==="small"?"6px":"8px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",color:"#6B7280"},onMouseEnter:_e=>{_e.currentTarget.style.transform="translateY(-1px)",_e.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.15), inset 0 1px 2px rgba(255,255,255,0.9)"},onMouseLeave:_e=>{_e.currentTarget.style.transform="translateY(0px)",_e.currentTarget.style.boxShadow="inset 0 1px 2px rgba(255,255,255,0.8), inset 0 -1px 2px rgba(0,0,0,0.1)"},children:Y});return P?S.jsx("div",{ref:ae,style:{position:"fixed",left:`${v.x}px`,top:`${v.y}px`,zIndex:1e3,cursor:U?"grabbing":"grab"},children:S.jsx(Q,{children:S.jsxs("div",{style:{padding:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[S.jsx("div",{onMouseDown:ue,style:{cursor:"grab",display:"flex",alignItems:"center"},children:S.jsx(Tk,{style:{width:"16px",height:"16px",color:"#6B7280"}})}),S.jsx(de,{onClick:()=>O(!1),title:"Expand Hierarchy Panel",children:S.jsx(I0,{style:{width:"16px",height:"16px"}})})]})})}):S.jsx("div",{ref:ae,style:{position:"fixed",left:`${v.x}px`,top:`${v.y}px`,zIndex:1e3,width:A?"280px":"420px",cursor:U?"grabbing":"default",transition:U?"none":"width 0.3s ease"},children:S.jsxs(Q,{style:{display:"flex",flexDirection:"column",overflow:"hidden"},children:[S.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid rgba(0,0,0,0.05)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[S.jsx("div",{onMouseDown:ue,style:{cursor:U?"grabbing":"grab",padding:"4px",borderRadius:"6px",background:"linear-gradient(135deg, #6B728020, #6B728010)",border:"1px solid #6B728030",display:"flex",alignItems:"center",justifyContent:"center"},title:"Drag to move panel",children:S.jsx(Tk,{style:{width:"14px",height:"14px",color:"#6B7280"}})}),!A&&S.jsxs("div",{children:[S.jsx("div",{style:{fontSize:"16px",fontWeight:"700",color:"#1F2937",marginBottom:"2px"},children:"Network Hierarchy"}),S.jsxs("div",{style:{fontSize:"11px",color:"#6B7280",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px"},children:[h," nodes  ",u," links"]})]})]}),S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[S.jsx(de,{onClick:()=>C(!A),title:A?"Expand":"Collapse",size:"small",children:A?S.jsx(Iv,{style:{width:"14px",height:"14px"}}):S.jsx(MD,{style:{width:"14px",height:"14px"}})}),S.jsx(de,{onClick:()=>O(!0),title:"Minimize Panel",size:"small",children:S.jsx(bB,{style:{width:"14px",height:"14px"}})})]})]}),!A&&S.jsxs(S.Fragment,{children:[S.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid rgba(0,0,0,0.05)"},children:[S.jsx("div",{style:{fontSize:"12px",color:"#6B7280",fontWeight:"600",marginBottom:"8px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Navigation Path"}),S.jsx("div",{style:{display:"flex",alignItems:"center",gap:"6px",flexWrap:"wrap"},children:t.map((he,Y)=>{const ie=Fne[he.level],Ce=Y===t.length-1,_e=!Ce;return S.jsxs(Ei.Fragment,{children:[S.jsxs("button",{onClick:()=>_e?n(he.level):void 0,disabled:!_e,style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 10px",borderRadius:"8px",border:"none",cursor:_e?"pointer":"default",transition:"all 0.2s ease",background:Ce?"linear-gradient(135deg, #4F46E5, #3B82F6)":"linear-gradient(145deg, rgba(255,255,255,0.8), rgba(240,240,240,0.6))",color:Ce?"#FFFFFF":"#374151",fontWeight:Ce?"600":"500",fontSize:"12px"},children:[S.jsx(ie,{style:{width:"12px",height:"12px"}}),S.jsx("span",{children:he.name})]}),!Ce&&S.jsx(Iv,{style:{width:"12px",height:"12px",color:"#9CA3AF"}})]},`${he.level}-${he.identifier||he.name}`)})})]}),S.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid rgba(0,0,0,0.05)"},children:[S.jsx("div",{style:{fontSize:"12px",color:"#6B7280",fontWeight:"600",marginBottom:"12px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Hierarchy Levels"}),S.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:$ne.map(he=>{const Y=he.icon,ie=e===he.level,Ce=t.some(_e=>_e.level===he.level)||he.level==="national";return S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[S.jsxs("button",{onClick:()=>{Ce&&(r(he.level),o(he.level,he.targetZoom))},disabled:!Ce,style:{flex:1,display:"flex",alignItems:"center",gap:"10px",padding:"10px 12px",borderRadius:"10px",border:"none",cursor:Ce?"pointer":"not-allowed",transition:"all 0.3s ease",fontSize:"13px",fontWeight:"500",background:ie?"linear-gradient(135deg, #4F46E5, #3B82F6)":Ce?"linear-gradient(145deg, rgba(255,255,255,0.8), rgba(240,240,240,0.6))":"rgba(156,163,175,0.3)",color:ie?"#FFFFFF":Ce?"#374151":"#9CA3AF",opacity:Ce?1:.5},children:[S.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"24px",height:"24px",borderRadius:"6px",background:ie?"rgba(255,255,255,0.2)":"rgba(79,70,229,0.1)",border:"1px solid rgba(79,70,229,0.2)"},children:S.jsx(Y,{style:{width:"12px",height:"12px"}})}),S.jsxs("div",{style:{flex:1,textAlign:"left"},children:[S.jsx("div",{style:{fontWeight:"600"},children:he.name}),S.jsx("div",{style:{fontSize:"10px",color:ie?"rgba(255,255,255,0.8)":"#9CA3AF",fontWeight:"500"},children:he.description})]}),S.jsxs("div",{style:{fontSize:"10px",fontWeight:"600",color:ie?"rgba(255,255,255,0.9)":"#6B7280"},children:[he.targetZoom,"x"]})]}),S.jsxs("div",{style:{display:"flex",gap:"4px"},children:[S.jsx(de,{onClick:()=>o(he.level,he.targetZoom-1),title:"Zoom Out",size:"small",children:S.jsx(kB,{style:{width:"10px",height:"10px"}})}),S.jsx(de,{onClick:()=>o(he.level,he.targetZoom+1),title:"Zoom In",size:"small",children:S.jsx(AB,{style:{width:"10px",height:"10px"}})})]})]},he.level)})})]}),S.jsxs("div",{style:{padding:"16px"},children:[S.jsx("div",{style:{fontSize:"12px",color:"#6B7280",fontWeight:"600",marginBottom:"8px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Current Layer"}),S.jsx("div",{style:{background:ne.bgGradient,borderRadius:"12px",padding:"12px",border:"1px solid rgba(255,255,255,0.4)"},children:S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[S.jsx("div",{style:{padding:"6px",borderRadius:"8px",background:"rgba(255,255,255,0.6)",display:"flex",alignItems:"center",justifyContent:"center"},children:S.jsx(ne.icon,{style:{width:"16px",height:"16px",color:ne.color}})}),S.jsxs("div",{style:{flex:1},children:[S.jsxs("div",{style:{fontSize:"13px",fontWeight:"700",color:"#1F2937",marginBottom:"2px"},children:[ne.layer," - ",ne.name]}),S.jsx("div",{style:{fontSize:"10px",color:"#6B7280",fontWeight:"500"},children:ne.description})]}),S.jsxs("div",{style:{fontSize:"11px",color:"#9CA3AF",fontWeight:"600",fontFamily:"monospace"},children:[l.toFixed(1),"x"]})]})})]})]})]})})}function Vne({onMenuClick:e,activeMenu:t,selectedLayer:r="none",onLayerChange:n,ruasRekapDataAvailable:o=!1,ruasRekapData:l=null,onFilterRuasNodes:h,ruasRekapStoData:u=null,isLayerLoading:v=!1,selectedRuasLayer:x="tera-tera",onRuasLayerChange:A}){var ge;const[C,P]=N.useState(!1),[O,U]=N.useState(!1),[W,G]=N.useState(!1),[X,ae]=N.useState(""),[ne,ue]=N.useState(new Set),Q=N.useRef(!1),de=N.useRef(null),he=N.useRef(null),Y=N.useRef(0),ie=N.useCallback(ze=>{const Pe=ze.target.value,st=ze.target.selectionStart;__.flushSync(()=>{ae(Pe)}),requestAnimationFrame(()=>{de.current&&(de.current.focus(),st!==null&&de.current.setSelectionRange(st,st))})},[]),Ce=N.useCallback(ze=>{he.current&&(Y.current=he.current.scrollTop),A&&A(ze)},[A]);Ei.useEffect(()=>{he.current&&Y.current>0&&(he.current.scrollTop=Y.current)});const _e=Ei.useMemo(()=>{const ze=[{value:"tera-tera",label:"TERA - TERA",color:"#3B82F6"},{value:"tera-metro",label:"TERA - METRO",color:"#10B981"},{value:"tera-swc",label:"TERA - SWC",color:"#F59E0B"},{value:"tera-pevoice",label:"TERA - PEVOICE",color:"#8B5CF6"},{value:"tera-pemobile",label:"TERA - PEMOBILE",color:"#EC4899"},{value:"tera-pehsi",label:"TERA - PEHSI",color:"#14B8A6"},{value:"tera-pehdc",label:"TERA - PEHDC",color:"#F97316"},{value:"tera-cgw",label:"TERA - CGW",color:"#6366F1"},{value:"trunk_all_metro_metro",label:"METRO - METRO",color:"#06B6D4"},{value:"trunk_all_metro_spine",label:"METRO - SPINE",color:"#8B5CF6"},{value:"trunk_all_metro_dcn",label:"METRO - DCN",color:"#EC4899"},{value:"trunk_all_metro_bras",label:"METRO - BRAS",color:"#F59E0B"},{value:"trunk_all_metro_cdn",label:"METRO - CDN",color:"#10B981"},{value:"trunk_all_metro_cndc",label:"METRO - CNDC",color:"#EF4444"},{value:"trunk_all_metro_wac",label:"METRO - WAC",color:"#84CC16"},{value:"trunk_all_metro_wag",label:"METRO - WAG",color:"#A855F7"},{value:"trunk_all_metro_pedatin",label:"METRO - PEDATIN",color:"#F43F5E"},{value:"trunk_all_metro_pehsi",label:"METRO - PEHSI",color:"#0EA5E9"},{value:"trunk_all_metro_pevoice",label:"METRO - PEVOICE",color:"#22C55E"},{value:"trunk_all_metro_rantsel",label:"METRO - RANTSEL",color:"#14B8A6"},{value:"trunk_all_metro_twamp",label:"METRO - TWAMP",color:"#F97316"},{value:"trunk_all_metro_starlink",label:"METRO - STARLINK",color:"#6366F1"},{value:"trunk_all_pe_spine",label:"PE - SPINE",color:"#1E3A8A"},{value:"trunk_all_pe_teradatin",label:"PE - TERADATIN",color:"#065F46"},{value:"trunk_all_pe_cdn",label:"PE - CDN",color:"#78350F"},{value:"trunk_all_pe_wac",label:"PE - WAC",color:"#7C3AED"},{value:"trunk_all_pe_wag",label:"PE - WAG",color:"#BE185D"},{value:"trunk_all_pemobile_pemobile",label:"PEMOBILE - PEMOBILE",color:"#0F766E"},{value:"trunk_all_pemobile_metro",label:"PEMOBILE - METRO",color:"#1E40AF"},{value:"trunk_all_pemobile_rantsel",label:"PEMOBILE - RANTSEL",color:"#9A3412"},{value:"trunk_all_pemobile_it_agg",label:"PEMOBILE - IT_AGG",color:"#7F1D1D"},{value:"trunk_all_pemobile_cps",label:"PEMOBILE - CPS",color:"#4D7C0F"},{value:"trunk_all_pemobile_blf",label:"PEMOBILE - BLF",color:"#4338CA"},{value:"trunk_all_pemobile_twamp",label:"PEMOBILE - TWAMP",color:"#A16207"},{value:"trunk_all_pehsi_swc",label:"PEHSI - SWC",color:"#3A0CA3"},{value:"trunk_all_pehsi_ebr",label:"PEHSI - EBR",color:"#7C2D12"},{value:"trunk_all_pehsi_lb",label:"PEHSI - LB",color:"#0369A1"},{value:"trunk_all_pehsi_sig",label:"PEHSI - SIG",color:"#15803D"},{value:"trunk_all_petransit_ebr",label:"PETRANSIT - EBR",color:"#6B21A8"},{value:"trunk_all_me_bngtsel",label:"ME - BNGTSEL",color:"#9F1239"},{value:"trunk_all_bngtsel_pehsi",label:"BNGTSEL - PEHSI",color:"#0C4A6E"},{value:"trunk_all_bras_pehsi",label:"BRAS - PEHSI",color:"#B45309"},{value:"trunk_all_allot_pehsi",label:"ALLOT - PEHSI",color:"#14532D"},{value:"trunk_all_nodeb_metro",label:"NODEB - METRO",color:"#3F6212"},{value:"trunk_all_olt_metro",label:"OLT - METRO",color:"#701A75"}],Pe=X.toLowerCase().trim();return Pe?ze.filter(st=>st.label.toLowerCase().includes(Pe)):ze},[X]),Me=Ei.useMemo(()=>{const ze=r==="ruasrekapsto"?u:l;if(!(ze!=null&&ze.nodes))return[];const Pe=new Set;return r==="ruasrekapsto"?ze.nodes.forEach(st=>{st.layer&&Pe.add(st.layer)}):(ze.nodes.forEach(st=>{st.layer&&Pe.add(st.layer)}),ze.edges&&Array.isArray(ze.edges)&&ze.edges.forEach(st=>{st.layer_list?Pe.add(st.layer_list):st.layer&&Pe.add(st.layer)}),ze.nodes.forEach(st=>{st.topology&&Array.isArray(st.topology)&&st.topology.forEach(Ae=>{Ae.layer&&Pe.add(Ae.layer)})})),Array.from(Pe).sort()},[l,u,r]);Ei.useEffect(()=>{if(r==="ruasrekap"&&l){Q.current=!0,G(!0);const ze=new Set(Me);ue(ze),setTimeout(()=>{Q.current=!1},100)}else if(r==="ruasrekapsto"&&u){Q.current=!0,G(!0);const ze=new Set(Me);ue(ze),setTimeout(()=>{Q.current=!1},100)}else r!=="ruasrekap"&&r!=="ruasrekapsto"&&G(!1)},[r,l,u,Me]),Ei.useEffect(()=>{if(Q.current||!W||!h)return;const ze=r==="ruasrekapsto"?u:l;if(!ze)return;if(ne.size===0){h([]);return}let Pe=[];if(r==="ruasrekapsto")Pe=ze.nodes.filter(st=>st.layer&&ne.has(st.layer)).map(st=>st.id);else{const st=new Set,Ae=new Set;ze.nodes.forEach(qe=>{qe.layer&&ne.has(qe.layer)&&st.add(qe.id)}),ze.edges&&Array.isArray(ze.edges)&&ze.edges.forEach(qe=>{const Ze=qe.layer_list||qe.layer;Ze&&ne.has(Ze)&&(qe.source&&Ae.add(qe.source),qe.target&&Ae.add(qe.target))}),ze.nodes.forEach(qe=>{qe.topology&&Array.isArray(qe.topology)&&qe.topology.some(zt=>zt.layer&&ne.has(zt.layer))&&st.add(qe.id)}),Pe=Array.from(new Set([...st,...Ae]))}console.log(`[Filter] Layer: ${r}, Selected Layers: ${ne.size}, Filtered Nodes: ${Pe.length}`),h(Pe)},[ne,W,r,l,u,h]);const me=[{id:"dashboard",icon:_E,label:"Dashboard",color:"#3B82F6",description:"Main overview",badge:"5"},{id:"topology",icon:Vw,label:"Topology",color:"#8B5CF6",description:"Network view",badge:"12"},{id:"layers",icon:I0,label:"Layers",color:"#10B981",description:"Map layers",badge:""},{id:"analytics",icon:DD,label:"Analytics",color:"#F59E0B",description:"Data analysis",badge:"7"},{id:"settings",icon:qw,label:"Settings",color:"#6B7280",description:"Configuration",badge:""}],Ke=({children:ze,className:Pe="",style:st={}})=>S.jsx("div",{className:Pe,style:{background:"linear-gradient(145deg, rgba(255,255,255,0.95), rgba(240,240,240,0.9))",backdropFilter:"blur(20px)",borderRadius:"20px",border:"1px solid rgba(255,255,255,0.3)",boxShadow:"0 20px 40px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',...st},children:ze}),Re=({onClick:ze,children:Pe,title:st,size:Ae="normal"})=>S.jsx("button",{onClick:ze,title:st,style:{background:"linear-gradient(145deg, rgba(255,255,255,0.9), rgba(240,240,240,0.7))",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.3)",boxShadow:"inset 0 1px 2px rgba(255,255,255,0.8), inset 0 -1px 2px rgba(0,0,0,0.1)",padding:Ae==="small"?"6px":"8px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",color:"#6B7280"},onMouseEnter:qe=>{qe.currentTarget.style.boxShadow="inset 0 2px 4px rgba(255,255,255,0.9), inset 0 -2px 4px rgba(0,0,0,0.15), 0 4px 8px rgba(0,0,0,0.1)",qe.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:qe=>{qe.currentTarget.style.boxShadow="inset 0 1px 2px rgba(255,255,255,0.8), inset 0 -1px 2px rgba(0,0,0,0.1)",qe.currentTarget.style.transform="translateY(0px)"},children:Pe}),pe=()=>S.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.75)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,animation:"fadeIn 0.3s ease"},children:[S.jsx("style",{children:`
          @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
          }
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
          @keyframes reverseSpin {
            0% { transform: rotate(360deg); }
            100% { transform: rotate(0deg); }
          }
          @keyframes pulse {
            0%, 100% {
              transform: scale(1);
              opacity: 1;
            }
            50% {
              transform: scale(1.05);
              opacity: 0.7;
            }
          }
          @keyframes bounce {
            0%, 100% {
              transform: translateY(0px);
            }
            50% {
              transform: translateY(-8px);
            }
          }
          @keyframes ping {
            0% {
              transform: scale(0.95);
              opacity: 0.8;
            }
            50% {
              opacity: 0.4;
            }
            100% {
              transform: scale(1.8);
              opacity: 0;
            }
          }
          @keyframes dotPulse {
            0%, 100% {
              transform: scale(0.8);
              opacity: 0.5;
            }
            50% {
              transform: scale(1.2);
              opacity: 1;
            }
          }
        `}),S.jsxs("div",{style:{background:"linear-gradient(145deg, #ffffff, #f5f5f5)",borderRadius:"28px",padding:"56px 48px",boxShadow:"0 30px 60px rgba(0,0,0,0.25), 0 10px 20px rgba(0,0,0,0.15), inset 0 1px 0 rgba(255,255,255,0.8)",display:"flex",flexDirection:"column",alignItems:"center",gap:"32px",minWidth:"360px",maxWidth:"400px",position:"relative",overflow:"hidden"},children:[S.jsx("div",{style:{position:"absolute",top:"-50%",right:"-50%",width:"200%",height:"200%",background:"radial-gradient(circle, rgba(59,130,246,0.05) 0%, transparent 70%)",pointerEvents:"none"}}),S.jsxs("div",{style:{position:"relative",width:"140px",height:"140px",display:"flex",alignItems:"center",justifyContent:"center"},children:[S.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",width:"100%",height:"100%",marginTop:"-50%",marginLeft:"-50%",border:"4px solid transparent",borderTopColor:"#3B82F6",borderRightColor:"#8B5CF6",borderRadius:"50%",animation:"spin 3s linear infinite"}}),S.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",width:"85%",height:"85%",marginTop:"-42.5%",marginLeft:"-42.5%",border:"3px solid transparent",borderBottomColor:"#10B981",borderLeftColor:"#059669",borderRadius:"50%",animation:"reverseSpin 2.5s linear infinite"}}),S.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",width:"70%",height:"70%",marginTop:"-35%",marginLeft:"-35%",border:"2px solid rgba(59, 130, 246, 0.3)",borderRadius:"50%",animation:"pulse 2s ease-in-out infinite"}}),S.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",width:"50px",height:"50px",marginTop:"-25px",marginLeft:"-25px",borderRadius:"50%",background:"rgba(59, 130, 246, 0.3)",animation:"ping 2s cubic-bezier(0, 0, 0.2, 1) infinite"}}),S.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",width:"50px",height:"50px",marginTop:"-25px",marginLeft:"-25px",borderRadius:"50%",background:"rgba(139, 92, 246, 0.3)",animation:"ping 2s cubic-bezier(0, 0, 0.2, 1) infinite 1s"}}),S.jsx("div",{style:{position:"relative",zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",width:"56px",height:"56px",borderRadius:"50%",background:"linear-gradient(135deg, #3B82F6, #8B5CF6)",boxShadow:"0 8px 24px rgba(59, 130, 246, 0.4)",animation:"bounce 2s ease-in-out infinite"},children:S.jsx(Vw,{style:{width:"28px",height:"28px",color:"#FFFFFF",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"}})}),[0,1,2,3].map(ze=>S.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",width:"10px",height:"10px",marginTop:"-5px",marginLeft:"-5px",borderRadius:"50%",background:ze%2===0?"linear-gradient(135deg, #3B82F6, #8B5CF6)":"linear-gradient(135deg, #10B981, #059669)",boxShadow:`0 2px 8px ${ze%2===0?"rgba(59, 130, 246, 0.4)":"rgba(16, 185, 129, 0.4)"}`,transform:`rotate(${ze*90}deg) translateY(-60px)`,animation:`pulse 1.5s ease-in-out infinite ${ze*.25}s`}},ze))]}),S.jsxs("div",{style:{textAlign:"center",position:"relative",zIndex:1},children:[S.jsx("div",{style:{fontSize:"24px",fontWeight:"700",marginBottom:"8px",background:"linear-gradient(135deg, #3B82F6 0%, #8B5CF6 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",letterSpacing:"-0.5px"},children:"Loading Map Layer"}),S.jsx("div",{style:{fontSize:"14px",color:"#6B7280",fontWeight:"500",letterSpacing:"0.3px"},children:"Preparing visualization..."})]}),S.jsx("div",{style:{display:"flex",gap:"12px",alignItems:"center",position:"relative",zIndex:1},children:[0,1,2].map(ze=>S.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"linear-gradient(135deg, #3B82F6, #8B5CF6)",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.4)",animation:`dotPulse 1.4s ease-in-out infinite ${ze*.2}s`}},ze))})]})]});return O?S.jsx("div",{style:{position:"fixed",left:"16px",top:"16px",zIndex:1e3},children:S.jsx(Re,{onClick:()=>U(!1),title:"Open Control Panel",children:S.jsx(_B,{style:{width:"20px",height:"20px"}})})}):S.jsxs(S.Fragment,{children:[v&&S.jsx(pe,{}),S.jsx("div",{style:{position:"fixed",left:"16px",top:"16px",bottom:"16px",zIndex:1e3,width:C?"86px":"288px",transition:"width 0.3s ease",display:"flex",flexDirection:"column"},children:S.jsxs(Ke,{style:{display:"flex",flexDirection:"column",overflow:"hidden",height:"100%",maxHeight:"calc(100vh - 32px)"},children:[S.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid rgba(0,0,0,0.05)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[!C&&S.jsx("div",{children:S.jsx("img",{src:"/images/infranexia-side.png",alt:"Infranexia",style:{height:"50px",width:"auto",objectFit:"contain"}})}),S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[S.jsx(Re,{onClick:()=>P(!C),title:C?"Expand":"Collapse",size:"small",children:C?S.jsx(Iv,{style:{width:"14px",height:"14px"}}):S.jsx(MD,{style:{width:"14px",height:"14px"}})}),!C&&S.jsx(Re,{onClick:()=>U(!0),title:"Minimize Panel",size:"small",children:S.jsx(kf,{style:{width:"14px",height:"14px"}})})]})]}),!C&&S.jsxs("div",{style:{padding:"12px",borderBottom:"1px solid rgba(0,0,0,0.05)",display:"flex",flexDirection:"column",gap:"8px",overflowY:"auto",maxHeight:"calc(100vh - 200px)"},children:[n&&S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[S.jsx("label",{style:{fontSize:"12px",fontWeight:"500",color:"#374151"},children:"Data Layer"}),S.jsxs("select",{value:r,onChange:ze=>{const Pe=ze.target.value;n(Pe),G(Pe==="ruasrekap"||Pe==="ruasrekapsto")},style:{width:"100%",padding:"10px 12px",borderRadius:"10px",border:"1px solid rgba(0,0,0,0.1)",background:"linear-gradient(145deg, rgba(255,255,255,0.9), rgba(240,240,240,0.7))",fontSize:"13px",fontWeight:"500",color:"#374151",cursor:"pointer",boxShadow:"inset 0 1px 2px rgba(255,255,255,0.8), inset 0 -1px 2px rgba(0,0,0,0.1)",transition:"all 0.2s ease",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[S.jsx("option",{value:"none",children:"Pilih Layer"}),S.jsxs("option",{value:"ruasrekap",disabled:!o,children:["Ruas Rekap "," ",o?`(${((ge=l==null?void 0:l.nodes)==null?void 0:ge.length)||0} nodes)`:"(Loading...)"]})]})]}),r==="ruasrekap"&&A&&l&&S.jsxs("div",{style:{marginTop:"12px",padding:"12px",borderRadius:"10px",background:"linear-gradient(145deg, rgba(59,130,246,0.05), rgba(59,130,246,0.02))",border:"1px solid rgba(59,130,246,0.1)",display:"flex",flexDirection:"column",gap:"8px"},children:[S.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:S.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#8B5CF6"},children:"Ruas Layer Selection"})}),S.jsx("input",{ref:de,type:"text",placeholder:"Search ruas layers...",value:X,onChange:ie,autoComplete:"off",autoFocus:!1,style:{width:"91%",padding:"8px 10px",borderRadius:"8px",border:"1px solid rgba(139, 92, 246, 0.2)",background:"rgba(255,255,255,0.9)",fontSize:"12px",fontWeight:"400",color:"#374151",boxShadow:"inset 0 1px 2px rgba(0,0,0,0.05)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',marginBottom:"8px",outline:"none"}}),S.jsx("div",{ref:he,style:{border:"1px solid rgba(139, 92, 246, 0.2)",borderRadius:"8px",overflow:"hidden",background:"rgba(255,255,255,0.5)",maxHeight:"300px",overflowY:"auto"},children:_e.length>0?_e.map(ze=>S.jsxs("div",{onClick:Pe=>{Pe.preventDefault(),Pe.stopPropagation(),Ce(ze.value)},onMouseDown:Pe=>{Pe.preventDefault()},style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 12px",cursor:"pointer",fontSize:"12px",fontWeight:"500",color:"#374151",background:x===ze.value?"rgba(139, 92, 246, 0.15)":"transparent",borderBottom:"1px solid rgba(139, 92, 246, 0.08)",transition:"background 0.2s ease"},onMouseEnter:Pe=>{x!==ze.value&&(Pe.currentTarget.style.background="rgba(139, 92, 246, 0.08)")},onMouseLeave:Pe=>{x!==ze.value&&(Pe.currentTarget.style.background="transparent")},children:[S.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"4px",background:ze.color,boxShadow:`0 2px 4px ${ze.color}40`,border:"1px solid rgba(255,255,255,0.5)",flexShrink:0}}),S.jsx("span",{style:{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontWeight:x===ze.value?"600":"500"},children:ze.label}),x===ze.value&&S.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:ze.color,boxShadow:`0 0 8px ${ze.color}80`,flexShrink:0}})]},ze.value)):S.jsx("div",{style:{padding:"20px",textAlign:"center",fontSize:"12px",color:"#9CA3AF",fontWeight:"500"},children:"No layers found"})})]})]}),S.jsx("div",{style:{padding:"12px",display:"flex",flexDirection:"column",gap:"8px"},children:me.map(ze=>{const Pe=ze.icon,st=t===ze.id;return S.jsx("div",{style:{position:"relative"},children:S.jsxs("button",{onClick:()=>e(ze.id),style:{width:"100%",display:"flex",alignItems:"center",gap:"12px",padding:"12px",borderRadius:"12px",border:"none",cursor:"pointer",transition:"all 0.3s ease",fontSize:"14px",fontWeight:"500",position:"relative",background:st?"linear-gradient(135deg, #4F46E5, #3B82F6)":"linear-gradient(145deg, rgba(255,255,255,0.8), rgba(240,240,240,0.6))",color:st?"#FFFFFF":"#374151",boxShadow:st?"0 8px 25px rgba(79,70,229,0.3), inset 0 1px 0 rgba(255,255,255,0.2)":"inset 0 1px 2px rgba(255,255,255,0.8), inset 0 -1px 2px rgba(0,0,0,0.1)"},onMouseEnter:Ae=>{st||(Ae.currentTarget.style.background="linear-gradient(145deg, rgba(255,255,255,0.9), rgba(240,240,240,0.8))",Ae.currentTarget.style.transform="translateY(-1px)",Ae.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1), inset 0 1px 2px rgba(255,255,255,0.9)")},onMouseLeave:Ae=>{st||(Ae.currentTarget.style.background="linear-gradient(145deg, rgba(255,255,255,0.8), rgba(240,240,240,0.6))",Ae.currentTarget.style.transform="translateY(0px)",Ae.currentTarget.style.boxShadow="inset 0 1px 2px rgba(255,255,255,0.8), inset 0 -1px 2px rgba(0,0,0,0.1)")},children:[S.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"8px",background:st?"rgba(255,255,255,0.2)":`linear-gradient(135deg, ${ze.color}15, ${ze.color}08)`,border:st?"1px solid rgba(255,255,255,0.3)":`1px solid ${ze.color}20`,flexShrink:0},children:S.jsx(Pe,{style:{width:"16px",height:"16px",color:st?"#FFFFFF":ze.color}})}),!C&&S.jsxs(S.Fragment,{children:[S.jsxs("div",{style:{flex:1,textAlign:"left"},children:[S.jsx("div",{style:{fontWeight:"600",marginBottom:"2px"},children:ze.label}),S.jsx("div",{style:{fontSize:"11px",color:st?"rgba(255,255,255,0.8)":"#9CA3AF",fontWeight:"500"},children:ze.description})]}),ze.badge&&S.jsx("div",{style:{padding:"4px 8px",borderRadius:"6px",fontSize:"10px",fontWeight:"600",background:st?"rgba(255,255,255,0.2)":`linear-gradient(135deg, ${ze.color}20, ${ze.color}10)`,color:st?"#FFFFFF":ze.color,border:st?"1px solid rgba(255,255,255,0.3)":`1px solid ${ze.color}30`},children:ze.badge})]}),C&&st&&S.jsx("div",{style:{position:"absolute",right:"4px",top:"50%",transform:"translateY(-50%)",width:"3px",height:"16px",background:"#FFFFFF",borderRadius:"2px",boxShadow:"0 0 8px rgba(255,255,255,0.5)"}})]})},ze.id)})})]})})]})}function qne(){const[e,t]=N.useState(!0);return S.jsx("div",{style:{position:"fixed",bottom:"16px",right:"16px",zIndex:998},children:S.jsxs("div",{style:{background:"linear-gradient(145deg, rgba(255,255,255,0.95), rgba(240,240,240,0.9))",backdropFilter:"blur(20px)",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.3)",boxShadow:"0 20px 40px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8)"},children:[S.jsxs("div",{style:{padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px",borderBottom:e?"1px solid rgba(0,0,0,0.05)":"none"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[S.jsx(vB,{style:{width:"14px",height:"14px",color:"#3B82F6"}}),S.jsx("span",{style:{fontSize:"12px",color:"#1F2937",fontWeight:"600"},children:"Legend"})]}),S.jsx("button",{onClick:()=>t(!e),style:{background:"linear-gradient(145deg, rgba(255,255,255,0.9), rgba(240,240,240,0.7))",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.3)",padding:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"#6B7280"},children:e?S.jsx(xE,{style:{width:"12px",height:"12px"}}):S.jsx(mB,{style:{width:"12px",height:"12px"}})})]}),e&&S.jsx("div",{style:{padding:"12px",display:"flex",flexDirection:"column",gap:"12px"},children:S.jsxs("div",{children:[S.jsx("div",{style:{fontSize:"10px",color:"#6B7280",marginBottom:"6px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Link Severity:"}),S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[S.jsx("div",{style:{width:"24px",height:"2px",background:"#10B981",borderRadius:"1px"}}),S.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:"Normal (0-40%)"})]}),S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[S.jsx("div",{style:{width:"24px",height:"2px",background:"#F59E0B",borderRadius:"1px"}}),S.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:"Warning (41-84%)"})]}),S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[S.jsx("div",{style:{width:"24px",height:"2px",background:"#EF4444",borderRadius:"1px"}}),S.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:"Critical (85-100%)"})]})]})]})})]})})}/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wne=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Hne=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),i6=e=>{const t=Hne(e);return t.charAt(0).toUpperCase()+t.slice(1)},ZL=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),Zne=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kne={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xne=N.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:o="",children:l,iconNode:h,...u},v)=>N.createElement("svg",{ref:v,...Kne,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:ZL("lucide",o),...!l&&!Zne(u)&&{"aria-hidden":"true"},...u},[...h.map(([x,A])=>N.createElement(x,A)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=(e,t)=>{const r=N.forwardRef(({className:n,...o},l)=>N.createElement(Xne,{ref:l,iconNode:t,className:ZL(`lucide-${Wne(i6(e))}`,`lucide-${e}`,n),...o}));return r.displayName=i6(e),r};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yne=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Yv=Zc("activity",Yne);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jne=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],HS=Zc("chevron-left",Jne);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qne=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ZS=Zc("chevron-right",Qne);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],a6=Zc("circle",eie);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tie=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],f0=Zc("git-branch",tie);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rie=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],KL=Zc("move",rie);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nie=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],Pv=Zc("network",nie);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iie=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],o6=Zc("refresh-cw",iie);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aie=[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]],oie=Zc("signal",aie);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sie=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],i0=Zc("trending-up",sie);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lie=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],uie=Zc("triangle-alert",lie);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cie=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],m_=Zc("x",cie);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const die=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],hie=Zc("zap",die),fie=e=>{const t=e.latency||Math.random()*20+5,r=e.packetLoss||Math.random()*.1,n=e.linkCount||(e.bandwidth_mbps&&e.bandwidth_mbps>=5e3?2:1),o=[];for(let l=1;l<=n;l++){const h=Math.floor((e.bandwidth_mbps||1e3)/n),u=Math.random()*20-10,v=Math.max(0,Math.min(100,(e.utilization||50)+u));o.push({id:l,linkName:`${e.from}-PE${l}--${e.to}-PE${l}`,capacity:`${h}M`,utilization:Math.round(v),status:v<95?"Active":"Warning",latency:`${(t+Math.random()*2).toFixed(1)}ms`,packetLoss:`${(r+Math.random()*.02).toFixed(3)}%`,interface:e.type==="L1_BACKBONE"?"TenGigE":e.type==="L2_AGGREGATION"?"GigE":"FastEthernet",vlan:100+l,qos:e.type==="L1_BACKBONE"?"Premium":e.type==="L2_AGGREGATION"?"Business":"Standard"})}return o};function pie({connection:e,onClose:t,onShowTopology:r,isTopologyVisible:n=!1}){var Q,de,he;console.log("LinkDetailsPanel - connection data:",e),console.log("LinkDetailsPanel - linkDetails:",e.linkDetails),console.log("LinkDetailsPanel - clickedType:",e.clickedType),e.linkDetails&&e.linkDetails.length>0&&(console.log("LinkDetailsPanel - first linkDetail:",e.linkDetails[0]),console.log("LinkDetailsPanel - source_port_used:",e.linkDetails[0].source_port_used,"type:",typeof e.linkDetails[0].source_port_used),console.log("LinkDetailsPanel - source_port_count:",e.linkDetails[0].source_port_count,"type:",typeof e.linkDetails[0].source_port_count),console.log("LinkDetailsPanel - target_port_used:",e.linkDetails[0].target_port_used,"type:",typeof e.linkDetails[0].target_port_used),console.log("LinkDetailsPanel - target_port_count:",e.linkDetails[0].target_port_count,"type:",typeof e.linkDetails[0].target_port_count),e.linkDetails.forEach((Y,ie)=>{console.log(`LinkDetailsPanel - detail[${ie}] ports:`,{source_port_used:Y.source_port_used,source_port_count:Y.source_port_count,target_port_used:Y.target_port_used,target_port_count:Y.target_port_count})}));const o=fie(e),l=o.reduce((Y,ie)=>Y+ie.utilization,0)/o.length,h=e.linkDetails&&e.linkDetails.length>0&&e.linkDetails[0]&&(typeof e.linkDetails[0].capacity<"u"||typeof e.linkDetails[0].traffic_in_log<"u"),u=h?[]:o;let v=0,x=0,A=0,C=0,P=0,O=0,U=h?0:l;if(h&&e.linkDetails&&e.linkDetails.length>0){v=e.linkDetails.reduce((ie,Ce)=>ie+(typeof Ce.capacity=="number"?Ce.capacity:0),0),x=e.linkDetails.reduce((ie,Ce)=>ie+(typeof Ce.traffic_in_log=="number"?Ce.traffic_in_log:0),0),A=e.linkDetails.reduce((ie,Ce)=>ie+(typeof Ce.traffic_out_log=="number"?Ce.traffic_out_log:0),0),C=e.linkDetails.reduce((ie,Ce)=>ie+(typeof Ce.traffic_in_psk=="number"?Ce.traffic_in_psk:0),0),P=e.linkDetails.reduce((ie,Ce)=>ie+(typeof Ce.traffic_out_psk=="number"?Ce.traffic_out_psk:0),0),O=e.linkDetails.reduce((ie,Ce)=>ie+(typeof Ce.traffic_max=="number"?Ce.traffic_max:0),0);const Y=e.linkDetails.filter(ie=>typeof ie.utilization=="number");Y.length>0&&(U=Y.reduce((ie,Ce)=>ie+(typeof Ce.utilization=="number"?Ce.utilization:0),0)/Y.length)}!h&&e.nodeData&&e.clickedType==="edge"&&(typeof e.nodeData.traffic_max=="number"&&(O=e.nodeData.traffic_max),typeof e.nodeData.traffic_in_log=="number"&&(x=e.nodeData.traffic_in_log),typeof e.nodeData.traffic_out_log=="number"&&(A=e.nodeData.traffic_out_log),typeof e.nodeData.traffic_in_psk=="number"&&(C=e.nodeData.traffic_in_psk),typeof e.nodeData.traffic_out_psk=="number"&&(P=e.nodeData.traffic_out_psk),typeof e.nodeData.utilization=="number"&&(U=e.nodeData.utilization),typeof e.nodeData.capacity=="number"&&(v=e.nodeData.capacity));const W=Y=>Y>=1e3?`${(Y/1e3).toFixed(2)}K Gbps`:`${Y.toFixed(2)} Gbps`;let G;if(e.linkDetails&&e.linkDetails.length>0){const Y=e.linkDetails.reduce((ie,Ce)=>{const _e=typeof Ce.capacity=="number"?Ce.capacity:0;return ie+_e},0);if(Y>0){const ie=Y/1e3;G=W(ie)}else G=e.totalCapacity||(e.bandwidth_mbps?`${e.bandwidth_mbps}M`:"N/A")}else G=e.totalCapacity||(e.bandwidth_mbps?`${e.bandwidth_mbps}M`:"N/A");const X=o.reduce((Y,ie)=>Y+parseFloat(ie.latency),0)/o.length,ae=o.reduce((Y,ie)=>Y+parseFloat(ie.packetLoss),0)/o.length,ne=({children:Y,className:ie=""})=>S.jsx("div",{className:ie,style:{background:"linear-gradient(145deg, rgba(255,255,255,0.9), rgba(240,240,240,0.8))",backdropFilter:"blur(20px)",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.3)",boxShadow:"0 8px 32px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8)",padding:"16px"},children:Y}),ue=({icon:Y,label:ie,value:Ce,color:_e})=>S.jsxs("div",{style:{background:`linear-gradient(135deg, ${_e}15, ${_e}08)`,border:`1px solid ${_e}25`,borderRadius:"8px",padding:"8px 10px",display:"flex",alignItems:"center",gap:"8px",flex:1,minWidth:"0"},children:[S.jsx("div",{style:{background:`linear-gradient(135deg, ${_e}25, ${_e}15)`,borderRadius:"6px",padding:"6px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:S.jsx(Y,{style:{width:"14px",height:"14px",color:_e}})}),S.jsxs("div",{style:{flex:1,minWidth:"0"},children:[S.jsx("div",{style:{fontSize:"9px",color:"#6B7280",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"2px"},children:ie}),S.jsx("div",{style:{fontSize:"14px",color:"#1F2937",fontWeight:"700",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:Ce})]})]});return S.jsx("div",{style:{position:"fixed",top:"16px",bottom:"16px",right:"16px",width:"600px",zIndex:1001},children:S.jsxs("div",{style:{height:"100%",background:"linear-gradient(145deg, rgba(255,255,255,0.95), rgba(240,240,240,0.9))",backdropFilter:"blur(20px)",borderRadius:"24px",border:"1px solid rgba(255,255,255,0.3)",boxShadow:"0 20px 40px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8)",display:"flex",flexDirection:"column",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[S.jsx("div",{style:{padding:"20px",paddingBottom:"1px",borderBottom:"1px solid rgba(0,0,0,0.05)"},children:S.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"16px"},children:[S.jsxs("div",{style:{flex:1},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px"},children:[S.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"700",color:"#1F2937"},children:"Link Analytics"}),e.clickedType&&S.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"10px",fontSize:"11px",fontWeight:"700",background:e.clickedType==="node"?"linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(37, 99, 235, 0.15))":"linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(124, 58, 237, 0.15))",color:e.clickedType==="node"?"#1E40AF":"#6D28D9",border:e.clickedType==="node"?"1.5px solid rgba(59, 130, 246, 0.4)":"1.5px solid rgba(139, 92, 246, 0.4)",textTransform:"uppercase",letterSpacing:"0.8px",boxShadow:e.clickedType==="node"?"0 2px 8px rgba(59, 130, 246, 0.15)":"0 2px 8px rgba(139, 92, 246, 0.15)",transition:"all 0.2s ease",animation:"fadeInBadge 0.3s ease-out"},children:[e.clickedType==="node"?S.jsx(a6,{style:{width:"13px",height:"13px",strokeWidth:2.5}}):S.jsx(f0,{style:{width:"13px",height:"13px",strokeWidth:2.5}}),e.clickedType==="node"?"Node":"Edge"]}),S.jsx("style",{children:`
                  @keyframes fadeInBadge {
                    from {
                      opacity: 0;
                      transform: scale(0.9);
                    }
                    to {
                      opacity: 1;
                      transform: scale(1);
                    }
                  }
                `})]}),S.jsx("p",{style:{margin:0,fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:e.description||`${e.from}  ${e.to}`})]}),S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r&&S.jsxs("button",{onClick:r,style:{background:n?"linear-gradient(145deg, rgba(239, 68, 68, 0.9), rgba(220, 38, 38, 0.8))":"linear-gradient(145deg, rgba(147, 51, 234, 0.9), rgba(126, 34, 206, 0.8))",border:n?"1px solid rgba(239, 68, 68, 0.3)":"1px solid rgba(147, 51, 234, 0.3)",borderRadius:"8px",padding:"8px 12px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},onMouseEnter:Y=>{Y.currentTarget.style.transform="scale(1.05)",Y.currentTarget.style.boxShadow=n?"0 4px 12px rgba(239, 68, 68, 0.3)":"0 4px 12px rgba(147, 51, 234, 0.3)"},onMouseLeave:Y=>{Y.currentTarget.style.transform="scale(1)",Y.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.1)"},title:n?"Hide Network Topology":"Show Network Topology",children:[S.jsx(Pv,{style:{width:"16px",height:"16px",color:"#FFFFFF"}}),S.jsxs("span",{style:{fontSize:"12px",color:"#FFFFFF",fontWeight:"600"},children:[n?"Hide":"Show"," Topology"]})]}),S.jsx("button",{onClick:t,style:{background:"linear-gradient(145deg, rgba(255,255,255,0.9), rgba(240,240,240,0.7))",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"8px",padding:"8px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:Y=>{Y.currentTarget.style.transform="scale(1.05)",Y.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)"},onMouseLeave:Y=>{Y.currentTarget.style.transform="scale(1)",Y.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.1)"},children:S.jsx(m_,{style:{width:"16px",height:"16px",color:"#6B7280"}})})]})]})}),S.jsxs("div",{style:{flex:1,overflow:"auto",padding:"10px",display:"flex",flexDirection:"column",gap:"10px"},children:[S.jsxs(ne,{children:[S.jsxs("h4",{style:{margin:"0 0 12px 0",fontSize:"16px",fontWeight:"600",color:"#1F2937",display:"flex",alignItems:"center",gap:"8px"},children:[S.jsx(uie,{style:{width:"16px",height:"16px",color:"#F59E0B"}}),"Recent Alerts"]}),S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[(h?U:l)>80&&S.jsxs("div",{style:{padding:"8px 12px",borderRadius:"8px",background:"#FEF3C7",border:"1px solid #FDE68A",fontSize:"12px",color:"#92400E"},children:[S.jsx("strong",{children:"Warning:"})," High utilization detected (",(h?U:l).toFixed(0),"%) at ",new Date().toLocaleTimeString()]}),S.jsxs("div",{style:{padding:"8px 12px",borderRadius:"8px",background:"#DBEAFE",border:"1px solid #BFDBFE",fontSize:"12px",color:"#1E40AF"},children:[S.jsx("strong",{children:"Info:"})," Scheduled maintenance window: Sunday 02:00-04:00 WIB"]}),Math.random()>.5&&S.jsxs("div",{style:{padding:"8px 12px",borderRadius:"8px",background:"#D1FAE5",border:"1px solid #A7F3D0",fontSize:"12px",color:"#065F46"},children:[S.jsx("strong",{children:"Success:"})," Link optimization completed successfully"]})]})]}),S.jsxs(ne,{children:[S.jsxs("div",{style:{display:"flex",gap:"6px",marginBottom:"8px"},children:[S.jsx(ue,{icon:hie,label:"CAPACITY",value:G,color:"#8B5CF6"}),S.jsx(ue,{icon:i0,label:"TRAFFIC MAX",value:O>0?`${(O/1e9).toFixed(2)} Gbps`:"0.00 Gbps",color:"#F59E0B"})]}),S.jsxs("div",{style:{display:"flex",gap:"6px",marginBottom:"8px"},children:[S.jsx(ue,{icon:Yv,label:"LAYER",value:((Q=e.nodeData)==null?void 0:Q.layer)||((de=e.nodeData)==null?void 0:de.trunk_layer)||(e.linkDetails&&e.linkDetails.length>0?e.linkDetails[0].layer:"tera - tera"),color:"#1F2937"}),S.jsx(ue,{icon:i0,label:"TRAFFIC IN LOG",value:x>0?`${(x/1e9).toFixed(2)} Gbps`:"0.00 Gbps",color:"#3B82F6"})]}),S.jsxs("div",{style:{display:"flex",gap:"6px",marginBottom:"8px"},children:[S.jsx(ue,{icon:i0,label:"TRAFFIC OUT LOG",value:A>0?`${(A/1e9).toFixed(2)} Gbps`:"0.00 Gbps",color:"#10B981"}),S.jsx(ue,{icon:i0,label:"TRAFFIC IN PSK",value:C>0?`${(C/1e9).toFixed(2)} Gbps`:"0.00 Gbps",color:"#6366F1"})]}),S.jsxs("div",{style:{display:"flex",gap:"6px"},children:[S.jsx(ue,{icon:i0,label:"TRAFFIC OUT PSK",value:P>0?`${(P/1e9).toFixed(2)} Gbps`:"0.00 Gbps",color:"#14B8A6"}),S.jsx(ue,{icon:Yv,label:"UTILIZATION",value:U>0?`${U.toFixed(2)}%`:`${l.toFixed(0)}%`,color:U>80?"#EF4444":U>60?"#F59E0B":"#10B981"})]})]}),S.jsxs(ne,{children:[S.jsxs("h4",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:"#1F2937",display:"flex",alignItems:"center",gap:"8px"},children:[S.jsx(oie,{style:{width:"16px",height:"16px",color:"#4F46E5"}}),"Physical Links",e.linkDetails&&Array.isArray(e.linkDetails)&&e.linkDetails.length>0&&S.jsxs("span",{style:{fontSize:"11px",fontWeight:"600",padding:"2px 8px",borderRadius:"6px",background:"#4F46E520",color:"#4F46E5",border:"1px solid #4F46E530"},children:[e.linkDetails.length," link",e.linkDetails.length!==1?"s":""]})]}),S.jsx("div",{style:{overflowX:"auto",overflowY:"visible",borderRadius:"12px",maxHeight:"400px"},children:S.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:e.linkDetails&&e.linkDetails.length>0?"2000px":"100%"},children:[S.jsx("thead",{style:{position:"sticky",top:0,zIndex:1},children:S.jsxs("tr",{style:{background:"linear-gradient(135deg, #F8FAFC, #F1F5F9)"},children:[S.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"left",minWidth:"180px"},children:"Ruas / Link Name"}),S.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"left",minWidth:"140px"},children:"Source Node"}),S.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"left",minWidth:"140px"},children:"Target Node"}),S.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"center",minWidth:"110px"},children:"Layer"}),S.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"center",minWidth:"110px"},children:"Port Log"}),S.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"right",minWidth:"110px"},children:"Capacity"}),S.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"right",minWidth:"110px"},children:"Traffic In Log (Mbps)"}),S.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"right",minWidth:"110px"},children:"Traffic Out Log (Mbps)"}),S.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"right",minWidth:"110px"},children:"Traffic In PSK (Mbps)"}),S.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"right",minWidth:"110px"},children:"Traffic Out PSK (Mbps)"}),S.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"right",minWidth:"110px"},children:"Traffic Max (Mbps)"}),S.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"center",minWidth:"100px"},children:"Utilization"}),S.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"center",minWidth:"90px"},children:"Jml Pisik"}),S.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"center",minWidth:"90px"},children:"Jml Rec"}),S.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"center",minWidth:"90px"},children:"Jml PSK"}),S.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"center",minWidth:"110px"},children:"Source Ports"}),S.jsx("th",{style:{padding:"10px 8px",fontSize:"10px",fontWeight:"600",color:"#475569",textAlign:"center",minWidth:"110px"},children:"Target Ports"})]})}),S.jsx("tbody",{children:e.linkDetails&&e.linkDetails.length>0?e.linkDetails.map((Y,ie)=>{const Ce=typeof Y.traffic_in_log=="number"?(Y.traffic_in_log/1e6).toFixed(2):"N/A",_e=typeof Y.traffic_out_log=="number"?(Y.traffic_out_log/1e6).toFixed(2):"N/A",Me=typeof Y.traffic_in_psk=="number"?(Y.traffic_in_psk/1e6).toFixed(2):"N/A",me=typeof Y.traffic_out_psk=="number"?(Y.traffic_out_psk/1e6).toFixed(2):"N/A",Ke=typeof Y.traffic_max=="number"?(Y.traffic_max/1e6).toFixed(2):"N/A",Re=typeof Y.utilization=="number"?Y.utilization.toFixed(2):"0.00";return S.jsxs("tr",{style:{borderTop:ie>0?"1px solid #E5E7EB":"none",background:ie%2===0?"rgba(248,250,252,0.5)":"transparent"},children:[S.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#374151",fontWeight:"500"},children:String(Y.ruas||"N/A")}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#374151"},children:S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[S.jsx("span",{style:{fontWeight:"600"},children:String(Y.source_node||Y.source||"N/A")}),S.jsx("span",{style:{fontSize:"9px",color:"#6B7280"},children:String(Y.source_label||"")})]})}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#374151"},children:S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[S.jsx("span",{style:{fontWeight:"600"},children:String(Y.target_node||Y.target||"N/A")}),S.jsx("span",{style:{fontSize:"9px",color:"#6B7280"},children:String(Y.target_label||"")})]})}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"10px",color:"#374151",textAlign:"center"},children:S.jsx("span",{style:{padding:"3px 6px",borderRadius:"4px",background:"#8B5CF615",color:"#8B5CF6",fontWeight:"600",fontSize:"9px"},children:String(Y.layer||Y.trunk_layer||"N/A")})}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"10px",color:"#374151",textAlign:"center",fontFamily:"monospace"},children:String(Y.port_log||"N/A")}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#4F46E5",textAlign:"right",fontWeight:"600"},children:typeof Y.capacity=="number"&&Y.capacity>0?(Y.capacity/1e3).toFixed(2)+" Gbps":"N/A"}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#3B82F6",textAlign:"right",fontWeight:"600"},children:Ce}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#10B981",textAlign:"right",fontWeight:"600"},children:_e}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#6366F1",textAlign:"right"},children:Me}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#14B8A6",textAlign:"right"},children:me}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#F59E0B",textAlign:"right",fontWeight:"600"},children:Ke}),S.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:S.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px"},children:S.jsxs("span",{style:{fontSize:"10px",color:"#374151",fontWeight:"700"},children:[Re,"%"]})})}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#374151",textAlign:"center",fontWeight:"600"},children:typeof Y.jml_pisik=="number"?Y.jml_pisik:"N/A"}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#374151",textAlign:"center",fontWeight:"600"},children:typeof Y.jml_rec=="number"?Y.jml_rec:"N/A"}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#374151",textAlign:"center",fontWeight:"600"},children:typeof Y.jmpsk=="number"?Y.jmpsk:"N/A"}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"10px",color:"#374151",textAlign:"center"},children:S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px",alignItems:"center"},children:[S.jsx("span",{style:{fontWeight:"600",color:"#3B82F6"},children:Y.source_port_used!==null&&Y.source_port_used!==void 0&&!isNaN(Number(Y.source_port_used))&&Y.source_port_count!==null&&Y.source_port_count!==void 0&&!isNaN(Number(Y.source_port_count))?`${Number(Y.source_port_used)}/${Number(Y.source_port_count)}`:"N/A"}),S.jsx("span",{style:{fontSize:"9px",color:"#6B7280"},children:Y.source_port_idle!==null&&Y.source_port_idle!==void 0&&!isNaN(Number(Y.source_port_idle))?`${Number(Y.source_port_idle)} idle`:""})]})}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"10px",color:"#374151",textAlign:"center"},children:S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px",alignItems:"center"},children:[S.jsx("span",{style:{fontWeight:"600",color:"#10B981"},children:Y.target_port_used!==null&&Y.target_port_used!==void 0&&!isNaN(Number(Y.target_port_used))&&Y.target_port_count!==null&&Y.target_port_count!==void 0&&!isNaN(Number(Y.target_port_count))?`${Number(Y.target_port_used)}/${Number(Y.target_port_count)}`:"N/A"}),S.jsx("span",{style:{fontSize:"9px",color:"#6B7280"},children:Y.target_port_idle!==null&&Y.target_port_idle!==void 0&&!isNaN(Number(Y.target_port_idle))?`${Number(Y.target_port_idle)} idle`:""})]})})]},ie)}):o.map((Y,ie)=>S.jsxs("tr",{style:{borderTop:ie>0?"1px solid #E5E7EB":"none",background:ie%2===0?"rgba(248,250,252,0.5)":"transparent"},children:[S.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#374151",fontWeight:"500"},children:Y.linkName}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#374151"},children:S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[S.jsx("span",{style:{fontWeight:"600"},children:e.from}),S.jsx("span",{style:{fontSize:"9px",color:"#6B7280"},children:"Source"})]})}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#374151"},children:S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[S.jsx("span",{style:{fontWeight:"600"},children:e.to}),S.jsx("span",{style:{fontSize:"9px",color:"#6B7280"},children:"Target"})]})}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"10px",color:"#374151",textAlign:"center"},children:S.jsx("span",{style:{padding:"3px 6px",borderRadius:"4px",background:"#8B5CF615",color:"#8B5CF6",fontWeight:"600",fontSize:"9px"},children:e.type||"N/A"})}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"10px",color:"#374151",textAlign:"center",fontFamily:"monospace"},children:Y.interface}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#4F46E5",textAlign:"right",fontWeight:"600"},children:Y.capacity}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#3B82F6",textAlign:"right",fontWeight:"600"},children:"N/A"}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#10B981",textAlign:"right",fontWeight:"600"},children:"N/A"}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#6366F1",textAlign:"right"},children:"N/A"}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#14B8A6",textAlign:"right"},children:"N/A"}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#F59E0B",textAlign:"right",fontWeight:"600"},children:"N/A"}),S.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:S.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px"},children:[S.jsx("div",{style:{width:"60px",height:"6px",background:"#E5E7EB",borderRadius:"3px",overflow:"hidden"}}),S.jsxs("span",{style:{fontSize:"10px",color:"#374151",fontWeight:"700"},children:[Y.utilization,"%"]})]})}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#374151",textAlign:"center",fontWeight:"600"},children:"N/A"}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#374151",textAlign:"center",fontWeight:"600"},children:"N/A"}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"11px",color:"#374151",textAlign:"center",fontWeight:"600"},children:"N/A"}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"10px",color:"#374151",textAlign:"center"},children:"N/A"}),S.jsx("td",{style:{padding:"10px 8px",fontSize:"10px",color:"#374151",textAlign:"center"},children:"N/A"})]},Y.id))})]})}),S.jsx("div",{style:{marginTop:"8px",padding:"6px 12px",background:"rgba(79, 70, 229, 0.05)",borderRadius:"6px",fontSize:"10px",color:"#4F46E5",textAlign:"center",fontWeight:"500"},children:" Scroll horizontally to view all columns "})]}),e.clickedType==="edge"&&e.nodeData&&S.jsxs(ne,{children:[S.jsxs("h4",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:"#1F2937",display:"flex",alignItems:"center",gap:"8px"},children:[S.jsx(f0,{style:{width:"16px",height:"16px",color:"#7C3AED"}}),"Edge Details"]}),S.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px"},children:Object.entries(e.nodeData).filter(([Y])=>!["details","topology","x","y","coordinates","source_lon","source_lat","target_lon","target_lat"].includes(Y)).map(([Y,ie])=>{const Ce=Y.split("_").map(me=>me.charAt(0).toUpperCase()+me.slice(1)).join(" ");let _e,Me="#1F2937";if((Y==="capacity"||Y==="total_capacity")&&typeof ie=="number")_e=`${((h&&v>0?v:ie)/1e3).toFixed(2)} Gbps`,Me="#8B5CF6";else if(Y==="traffic_in_log")_e=`${((h?x:typeof ie=="number"?ie:0)/1e9).toFixed(2)} Gbps`,Me="#3B82F6";else if(Y==="traffic_out_log")_e=`${((h?A:typeof ie=="number"?ie:0)/1e9).toFixed(2)} Gbps`,Me="#10B981";else if(Y==="traffic_in_psk")_e=`${((h?C:typeof ie=="number"?ie:0)/1e9).toFixed(2)} Gbps`,Me="#6366F1";else if(Y==="traffic_out_psk")_e=`${((h?P:typeof ie=="number"?ie:0)/1e9).toFixed(2)} Gbps`,Me="#14B8A6";else if(Y==="traffic_max"&&typeof ie=="number")_e=`${(ie/1e9).toFixed(2)} Gbps`,Me="#F59E0B";else if(Y==="utilization"){const me=h?U:typeof ie=="number"?ie:0;_e=`${me.toFixed(2)}%`,Me=me>80?"#EF4444":me>60?"#F59E0B":"#10B981"}else Y==="link_count"&&typeof ie=="number"?(_e=String(ie),Me="#8B5CF6"):Y==="size"&&typeof ie=="number"?(_e=String(ie),Me="#6366F1"):typeof ie=="string"&&ie.length>50?_e=ie.substring(0,47)+"...":ie==null||ie===""?_e="N/A":typeof ie=="object"?_e=JSON.stringify(ie):_e=String(ie);return S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"8px",background:"rgba(249, 250, 251, 0.5)",borderRadius:"8px",border:"1px solid rgba(229, 231, 235, 0.5)"},children:[S.jsx("span",{style:{fontSize:"11px",color:"#6B7280",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:Ce}),S.jsx("span",{style:{fontSize:"13px",color:Me,fontWeight:"600",wordBreak:"break-word"},children:_e})]},Y)})})]}),S.jsxs(ne,{children:[S.jsxs("h4",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:"#1F2937",display:"flex",alignItems:"center",gap:"8px"},children:[S.jsx(i0,{style:{width:"16px",height:"16px",color:"#10B981"}}),"Performance Metrics"]}),S.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[h?S.jsxs(S.Fragment,{children:[S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[S.jsx("span",{style:{fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:"Capacity"}),S.jsxs("span",{style:{fontSize:"14px",color:"#4F46E5",fontWeight:"700"},children:[(v/1e3).toFixed(2)," Gbps"]})]}),S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[S.jsx("span",{style:{fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:"Traffic In (LOG)"}),S.jsxs("span",{style:{fontSize:"14px",color:"#3B82F6",fontWeight:"700"},children:[(x/1e9).toFixed(2)," Gbps"]})]}),S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[S.jsx("span",{style:{fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:"Traffic Out (LOG)"}),S.jsxs("span",{style:{fontSize:"14px",color:"#10B981",fontWeight:"700"},children:[(A/1e9).toFixed(2)," Gbps"]})]}),S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[S.jsx("span",{style:{fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:"Traffic In (PSK)"}),S.jsxs("span",{style:{fontSize:"14px",color:"#6366F1",fontWeight:"700"},children:[(C/1e9).toFixed(2)," Gbps"]})]}),S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[S.jsx("span",{style:{fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:"Traffic Out (PSK)"}),S.jsxs("span",{style:{fontSize:"14px",color:"#14B8A6",fontWeight:"700"},children:[(P/1e9).toFixed(2)," Gbps"]})]}),S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[S.jsx("span",{style:{fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:"Avg Utilization"}),S.jsxs("span",{style:{fontSize:"14px",color:U>80?"#EF4444":U>60?"#F59E0B":"#10B981",fontWeight:"700"},children:[U.toFixed(2),"%"]})]})]}):S.jsxs(S.Fragment,{children:[S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[S.jsx("span",{style:{fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:"Average Latency"}),S.jsxs("span",{style:{fontSize:"14px",color:"#1F2937",fontWeight:"700"},children:[X.toFixed(1)," ms"]})]}),S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[S.jsx("span",{style:{fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:"Packet Loss"}),S.jsxs("span",{style:{fontSize:"14px",color:"#1F2937",fontWeight:"700"},children:[ae.toFixed(3),"%"]})]}),S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[S.jsx("span",{style:{fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:"Availability (24h)"}),S.jsxs("span",{style:{fontSize:"14px",color:"#10B981",fontWeight:"700"},children:["99.",Math.floor(Math.random()*10+90),"%"]})]}),S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[S.jsx("span",{style:{fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:"Total Traffic (24h)"}),S.jsxs("span",{style:{fontSize:"14px",color:"#1F2937",fontWeight:"700"},children:[(Math.random()*10+1).toFixed(1)," TB"]})]})]}),S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[S.jsx("span",{style:{fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:"Link Type"}),S.jsx("span",{style:{fontSize:"12px",fontWeight:"600",padding:"4px 8px",borderRadius:"6px",background:e.type==="L1_BACKBONE"?"#DC262620":e.type==="L2_AGGREGATION"?"#EA580C20":"#05966920",color:e.type==="L1_BACKBONE"?"#DC2626":e.type==="L2_AGGREGATION"?"#EA580C":"#059669",border:`1px solid ${e.type==="L1_BACKBONE"?"#DC262630":e.type==="L2_AGGREGATION"?"#EA580C30":"#05966930"}`},children:((he=e.type)==null?void 0:he.replace("_"," "))||"LEGACY"})]}),S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[S.jsx("span",{style:{fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:"Redundancy"}),S.jsx("span",{style:{fontSize:"14px",color:"#1F2937",fontWeight:"700"},children:u.length>1?"Active-Active":"Single Path"})]})]})]}),e.clickedType==="node"&&e.nodeData&&S.jsxs(ne,{children:[S.jsxs("h4",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:"#1F2937",display:"flex",alignItems:"center",gap:"8px"},children:[S.jsx(a6,{style:{width:"16px",height:"16px",color:"#3B82F6"}}),"Node Details"]}),S.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px"},children:Object.entries(e.nodeData).filter(([Y])=>!["topology","details","x","y","coordinates","source_lon","source_lat","target_lon","target_lat","platform"].includes(Y)).map(([Y,ie])=>{const Ce=Y.split("_").map(me=>me.charAt(0).toUpperCase()+me.slice(1)).join(" ");let _e,Me="#1F2937";return Y.includes("capacity")&&typeof ie=="number"?(_e=`${(ie/1e9).toFixed(2)} Gbps`,Me="#3B82F6"):Y.includes("traffic")&&typeof ie=="number"?(_e=`${(ie/1e6).toFixed(2)} Mbps`,Me=Y.includes("in")?"#3B82F6":"#10B981"):Y.includes("utilization")&&typeof ie=="number"?(_e=`${ie.toFixed(2)}%`,Me=ie>80?"#EF4444":ie>60?"#F59E0B":"#10B981"):typeof ie=="string"&&ie.length>50?_e=ie.substring(0,47)+"...":ie==null||ie===""?_e="N/A":typeof ie=="object"?_e=JSON.stringify(ie):_e=String(ie),S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"8px",background:"rgba(249, 250, 251, 0.5)",borderRadius:"8px",border:"1px solid rgba(229, 231, 235, 0.5)"},children:[S.jsx("span",{style:{fontSize:"11px",color:"#6B7280",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:Ce}),S.jsx("span",{style:{fontSize:"13px",color:Me,fontWeight:"600",wordBreak:"break-word"},children:_e})]},Y)})}),(e.nodeData.longitude!==void 0||e.nodeData.latitude!==void 0)&&S.jsxs("div",{style:{marginTop:"12px",padding:"10px",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(37, 99, 235, 0.05))",borderRadius:"8px",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[S.jsx("div",{style:{fontSize:"11px",color:"#6B7280",fontWeight:"600",marginBottom:"4px"},children:"COORDINATES"}),S.jsxs("div",{style:{fontSize:"13px",color:"#3B82F6",fontWeight:"700"},children:["Longitude: ",typeof e.nodeData.longitude=="string"?parseFloat(e.nodeData.longitude).toFixed(6):"N/A",", Latitude: ",typeof e.nodeData.latitude=="string"?parseFloat(e.nodeData.latitude).toFixed(6):"N/A"]})]})]})]})]})})}const gie=({username:e="Admin User",email:t="admin@infranexia.com",avatar:r})=>{const[n,o]=N.useState(!1),[l,h]=N.useState(!1),[u,v]=N.useState("menu"),x=N.useRef(null),A=Qv();N.useEffect(()=>{const O=U=>{x.current&&!x.current.contains(U.target)&&(o(!1),v("menu"))};return n&&document.addEventListener("mousedown",O),()=>{document.removeEventListener("mousedown",O)}},[n]);const C=()=>{h(!1),o(!1),A("/")},P=()=>e.split(" ").map(O=>O[0]).join("").toUpperCase().slice(0,2);return S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"profile-menu-container",ref:x,children:[S.jsxs("button",{className:`profile-button ${n?"active":""}`,onClick:()=>o(!n),"aria-label":"Profile Menu",children:[r?S.jsx("img",{src:r,alt:e,className:"profile-avatar"}):S.jsx("div",{className:"profile-avatar-placeholder",children:P()}),S.jsx("svg",{className:`profile-chevron ${n?"open":""}`,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M6 9L12 15L18 9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),n&&S.jsxs("div",{className:`profile-dropdown ${u!=="menu"?"expanded":""}`,children:[u==="menu"&&S.jsxs("div",{className:"profile-menu-content",children:[S.jsxs("div",{className:"profile-header",children:[S.jsx("div",{className:"profile-header-avatar",children:r?S.jsx("img",{src:r,alt:e}):S.jsx("div",{className:"profile-header-avatar-placeholder",children:P()})}),S.jsxs("div",{className:"profile-header-info",children:[S.jsx("h3",{className:"profile-header-name",children:e}),S.jsx("p",{className:"profile-header-email",children:t})]})]}),S.jsx("div",{className:"profile-menu-divider"}),S.jsxs("div",{className:"profile-menu-items",children:[S.jsxs("button",{className:"profile-menu-item",onClick:()=>v("profile"),children:[S.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[S.jsx("path",{d:"M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),S.jsx("path",{d:"M12 11C14.2091 11 16 9.20914 16 7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),S.jsx("span",{children:"Profile"}),S.jsx("svg",{className:"profile-menu-arrow",viewBox:"0 0 24 24",fill:"none",children:S.jsx("path",{d:"M9 18L15 12L9 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),S.jsxs("button",{className:"profile-menu-item",onClick:()=>v("settings"),children:[S.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[S.jsx("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),S.jsx("path",{d:"M19.4 15C19.2669 15.3016 19.2272 15.6362 19.286 15.9606C19.3448 16.285 19.4995 16.5843 19.73 16.82L19.79 16.88C19.976 17.0657 20.1235 17.2863 20.2241 17.5291C20.3248 17.7719 20.3766 18.0322 20.3766 18.295C20.3766 18.5578 20.3248 18.8181 20.2241 19.0609C20.1235 19.3037 19.976 19.5243 19.79 19.71C19.6043 19.896 19.3837 20.0435 19.1409 20.1441C18.8981 20.2448 18.6378 20.2966 18.375 20.2966C18.1122 20.2966 17.8519 20.2448 17.6091 20.1441C17.3663 20.0435 17.1457 19.896 16.96 19.71L16.9 19.65C16.6643 19.4195 16.365 19.2648 16.0406 19.206C15.7162 19.1472 15.3816 19.1869 15.08 19.32C14.7842 19.4468 14.532 19.6572 14.3543 19.9255C14.1766 20.1938 14.0813 20.5082 14.08 20.83V21C14.08 21.5304 13.8693 22.0391 13.4942 22.4142C13.1191 22.7893 12.6104 23 12.08 23C11.5496 23 11.0409 22.7893 10.6658 22.4142C10.2907 22.0391 10.08 21.5304 10.08 21V20.91C10.0723 20.579 9.96512 20.258 9.77251 19.9887C9.5799 19.7194 9.31074 19.5143 9 19.4C8.69838 19.2669 8.36381 19.2272 8.03941 19.286C7.71502 19.3448 7.41568 19.4995 7.18 19.73L7.12 19.79C6.93425 19.976 6.71368 20.1235 6.47088 20.2241C6.22808 20.3248 5.96783 20.3766 5.705 20.3766C5.44217 20.3766 5.18192 20.3248 4.93912 20.2241C4.69632 20.1235 4.47575 19.976 4.29 19.79C4.10405 19.6043 3.95653 19.3837 3.85588 19.1409C3.75523 18.8981 3.70343 18.6378 3.70343 18.375C3.70343 18.1122 3.75523 17.8519 3.85588 17.6091C3.95653 17.3663 4.10405 17.1457 4.29 16.96L4.35 16.9C4.58054 16.6643 4.73519 16.365 4.794 16.0406C4.85282 15.7162 4.81312 15.3816 4.68 15.08C4.55324 14.7842 4.34276 14.532 4.07447 14.3543C3.80618 14.1766 3.49179 14.0813 3.17 14.08H3C2.46957 14.08 1.96086 13.8693 1.58579 13.4942C1.21071 13.1191 1 12.6104 1 12.08C1 11.5496 1.21071 11.0409 1.58579 10.6658C1.96086 10.2907 2.46957 10.08 3 10.08H3.09C3.42099 10.0723 3.742 9.96512 4.0113 9.77251C4.28059 9.5799 4.48572 9.31074 4.6 9C4.73312 8.69838 4.77282 8.36381 4.714 8.03941C4.65519 7.71502 4.50054 7.41568 4.27 7.18L4.21 7.12C4.02405 6.93425 3.87653 6.71368 3.77588 6.47088C3.67523 6.22808 3.62343 5.96783 3.62343 5.705C3.62343 5.44217 3.67523 5.18192 3.77588 4.93912C3.87653 4.69632 4.02405 4.47575 4.21 4.29C4.39575 4.10405 4.61632 3.95653 4.85912 3.85588C5.10192 3.75523 5.36217 3.70343 5.625 3.70343C5.88783 3.70343 6.14808 3.75523 6.39088 3.85588C6.63368 3.95653 6.85425 4.10405 7.04 4.29L7.1 4.35C7.33568 4.58054 7.63502 4.73519 7.95941 4.794C8.28381 4.85282 8.61838 4.81312 8.92 4.68H9C9.29577 4.55324 9.54802 4.34276 9.72569 4.07447C9.90337 3.80618 9.99872 3.49179 10 3.17V3C10 2.46957 10.2107 1.96086 10.5858 1.58579C10.9609 1.21071 11.4696 1 12 1C12.5304 1 13.0391 1.21071 13.4142 1.58579C13.7893 1.96086 14 2.46957 14 3V3.09C14.0013 3.41179 14.0966 3.72618 14.2743 3.99447C14.452 4.26276 14.7042 4.47324 15 4.6C15.3016 4.73312 15.6362 4.77282 15.9606 4.714C16.285 4.65519 16.5843 4.50054 16.82 4.27L16.88 4.21C17.0657 4.02405 17.2863 3.87653 17.5291 3.77588C17.7719 3.67523 18.0322 3.62343 18.295 3.62343C18.5578 3.62343 18.8181 3.67523 19.0609 3.77588C19.3037 3.87653 19.5243 4.02405 19.71 4.21C19.896 4.39575 20.0435 4.61632 20.1441 4.85912C20.2448 5.10192 20.2966 5.36217 20.2966 5.625C20.2966 5.88783 20.2448 6.14808 20.1441 6.39088C20.0435 6.63368 19.896 6.85425 19.71 7.04L19.65 7.1C19.4195 7.33568 19.2648 7.63502 19.206 7.95941C19.1472 8.28381 19.1869 8.61838 19.32 8.92V9C19.4468 9.29577 19.6572 9.54802 19.9255 9.72569C20.1938 9.90337 20.5082 9.99872 20.83 10H21C21.5304 10 22.0391 10.2107 22.4142 10.5858C22.7893 10.9609 23 11.4696 23 12C23 12.5304 22.7893 13.0391 22.4142 13.4142C22.0391 13.7893 21.5304 14 21 14H20.91C20.5882 14.0013 20.2738 14.0966 20.0055 14.2743C19.7372 14.452 19.5268 14.7042 19.4 15Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),S.jsx("span",{children:"Settings"}),S.jsx("svg",{className:"profile-menu-arrow",viewBox:"0 0 24 24",fill:"none",children:S.jsx("path",{d:"M9 18L15 12L9 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),S.jsx("div",{className:"profile-menu-divider"}),S.jsxs("button",{className:"profile-menu-item logout",onClick:()=>h(!0),children:[S.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[S.jsx("path",{d:"M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),S.jsx("path",{d:"M16 17L21 12L16 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),S.jsx("path",{d:"M21 12H9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),S.jsx("span",{children:"Logout"})]})]}),u==="profile"&&S.jsxs("div",{className:"profile-detail-view",children:[S.jsxs("button",{className:"profile-back-button",onClick:()=>v("menu"),children:[S.jsx("svg",{viewBox:"0 0 24 24",fill:"none",children:S.jsx("path",{d:"M15 18L9 12L15 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back"]}),S.jsx("div",{className:"profile-detail-header",children:S.jsx("h3",{children:"Profile Information"})}),S.jsxs("div",{className:"profile-detail-content",children:[S.jsxs("div",{className:"profile-detail-avatar-section",children:[r?S.jsx("img",{src:r,alt:e,className:"profile-detail-avatar"}):S.jsx("div",{className:"profile-detail-avatar-placeholder",children:P()}),S.jsx("button",{className:"profile-change-avatar-btn",children:"Change Photo"})]}),S.jsxs("div",{className:"profile-detail-fields",children:[S.jsxs("div",{className:"profile-detail-field",children:[S.jsx("label",{children:"Full Name"}),S.jsx("input",{type:"text",value:e,readOnly:!0})]}),S.jsxs("div",{className:"profile-detail-field",children:[S.jsx("label",{children:"Email Address"}),S.jsx("input",{type:"email",value:t,readOnly:!0})]}),S.jsxs("div",{className:"profile-detail-field",children:[S.jsx("label",{children:"Role"}),S.jsx("input",{type:"text",value:"Administrator",readOnly:!0})]}),S.jsxs("div",{className:"profile-detail-field",children:[S.jsx("label",{children:"Department"}),S.jsx("input",{type:"text",value:"Network Operations",readOnly:!0})]})]}),S.jsxs("button",{className:"profile-edit-button",children:[S.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",children:[S.jsx("path",{d:"M11 4H4C3.46957 4 2.96086 4.21071 2.58579 4.58579C2.21071 4.96086 2 5.46957 2 6V20C2 20.5304 2.21071 21.0391 2.58579 21.4142C2.96086 21.7893 3.46957 22 4 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),S.jsx("path",{d:"M18.5 2.50001C18.8978 2.10219 19.4374 1.87869 20 1.87869C20.5626 1.87869 21.1022 2.10219 21.5 2.50001C21.8978 2.89784 22.1213 3.4374 22.1213 4.00001C22.1213 4.56262 21.8978 5.10219 21.5 5.50001L12 15L8 16L9 12L18.5 2.50001Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Edit Profile"]})]})]}),u==="settings"&&S.jsxs("div",{className:"profile-detail-view",children:[S.jsxs("button",{className:"profile-back-button",onClick:()=>v("menu"),children:[S.jsx("svg",{viewBox:"0 0 24 24",fill:"none",children:S.jsx("path",{d:"M15 18L9 12L15 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back"]}),S.jsx("div",{className:"profile-detail-header",children:S.jsx("h3",{children:"Settings"})}),S.jsxs("div",{className:"profile-detail-content",children:[S.jsxs("div",{className:"settings-section",children:[S.jsx("h4",{children:"Appearance"}),S.jsxs("div",{className:"settings-item",children:[S.jsxs("div",{className:"settings-item-info",children:[S.jsx("span",{className:"settings-item-label",children:"Dark Mode"}),S.jsx("span",{className:"settings-item-desc",children:"Enable dark theme"})]}),S.jsxs("label",{className:"settings-toggle",children:[S.jsx("input",{type:"checkbox"}),S.jsx("span",{className:"settings-toggle-slider"})]})]}),S.jsxs("div",{className:"settings-item",children:[S.jsxs("div",{className:"settings-item-info",children:[S.jsx("span",{className:"settings-item-label",children:"Compact View"}),S.jsx("span",{className:"settings-item-desc",children:"Reduce spacing and padding"})]}),S.jsxs("label",{className:"settings-toggle",children:[S.jsx("input",{type:"checkbox"}),S.jsx("span",{className:"settings-toggle-slider"})]})]})]}),S.jsxs("div",{className:"settings-section",children:[S.jsx("h4",{children:"Notifications"}),S.jsxs("div",{className:"settings-item",children:[S.jsxs("div",{className:"settings-item-info",children:[S.jsx("span",{className:"settings-item-label",children:"Email Notifications"}),S.jsx("span",{className:"settings-item-desc",children:"Receive email alerts"})]}),S.jsxs("label",{className:"settings-toggle",children:[S.jsx("input",{type:"checkbox",defaultChecked:!0}),S.jsx("span",{className:"settings-toggle-slider"})]})]}),S.jsxs("div",{className:"settings-item",children:[S.jsxs("div",{className:"settings-item-info",children:[S.jsx("span",{className:"settings-item-label",children:"Push Notifications"}),S.jsx("span",{className:"settings-item-desc",children:"Browser notifications"})]}),S.jsxs("label",{className:"settings-toggle",children:[S.jsx("input",{type:"checkbox",defaultChecked:!0}),S.jsx("span",{className:"settings-toggle-slider"})]})]})]}),S.jsxs("div",{className:"settings-section",children:[S.jsx("h4",{children:"Map Settings"}),S.jsxs("div",{className:"settings-item",children:[S.jsxs("div",{className:"settings-item-info",children:[S.jsx("span",{className:"settings-item-label",children:"Auto-refresh"}),S.jsx("span",{className:"settings-item-desc",children:"Refresh data automatically"})]}),S.jsxs("label",{className:"settings-toggle",children:[S.jsx("input",{type:"checkbox",defaultChecked:!0}),S.jsx("span",{className:"settings-toggle-slider"})]})]}),S.jsxs("div",{className:"settings-item",children:[S.jsxs("div",{className:"settings-item-info",children:[S.jsx("span",{className:"settings-item-label",children:"Show Labels"}),S.jsx("span",{className:"settings-item-desc",children:"Display node labels on map"})]}),S.jsxs("label",{className:"settings-toggle",children:[S.jsx("input",{type:"checkbox",defaultChecked:!0}),S.jsx("span",{className:"settings-toggle-slider"})]})]})]}),S.jsxs("button",{className:"profile-save-button",children:[S.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",children:[S.jsx("path",{d:"M19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H16L21 8V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),S.jsx("path",{d:"M17 21V13H7V21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),S.jsx("path",{d:"M7 3V8H15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Save Changes"]})]})]})]})]}),l&&S.jsx("div",{className:"logout-modal-overlay",children:S.jsxs("div",{className:"logout-modal",children:[S.jsx("div",{className:"logout-modal-icon",children:S.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[S.jsx("path",{d:"M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),S.jsx("path",{d:"M16 17L21 12L16 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),S.jsx("path",{d:"M21 12H9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),S.jsx("h3",{className:"logout-modal-title",children:"Confirm Logout"}),S.jsx("p",{className:"logout-modal-message",children:"Are you sure you want to logout? You will need to sign in again to access the system."}),S.jsxs("div",{className:"logout-modal-actions",children:[S.jsx("button",{className:"logout-modal-button cancel",onClick:()=>h(!1),children:"Cancel"}),S.jsxs("button",{className:"logout-modal-button confirm",onClick:C,children:[S.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",children:[S.jsx("path",{d:"M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),S.jsx("path",{d:"M16 17L21 12L16 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),S.jsx("path",{d:"M21 12H9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Logout"]})]})]})})]})};function mie({onClose:e}){return S.jsx("div",{style:{position:"fixed",top:"16px",bottom:"16px",left:"16px",right:"16px",marginLeft:"71vw",zIndex:1001},children:S.jsxs("div",{style:{height:"100%",background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(12px)",borderRadius:"16px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",border:"1px solid rgba(229, 231, 235, 0.5)",display:"flex",flexDirection:"column",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[S.jsx("div",{style:{padding:"16px 24px",borderBottom:"1px solid rgba(229, 231, 235, 0.5)"},children:S.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[S.jsx("div",{style:{background:"linear-gradient(135deg, #6B7280 0%, #4B5563 100%)",padding:"8px",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:S.jsx(qw,{style:{width:"20px",height:"20px",color:"white"}})}),S.jsxs("div",{children:[S.jsx("h2",{style:{fontSize:"18px",fontWeight:"600",color:"#111827",margin:0},children:"Settings"}),S.jsx("p",{style:{fontSize:"12px",color:"#6B7280",margin:0},children:"Manage platform preferences"})]})]}),S.jsx("button",{onClick:e,style:{background:"transparent",border:"none",cursor:"pointer",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"6px",transition:"background-color 0.2s"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.05)"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent"},children:S.jsx(kf,{style:{width:"16px",height:"16px",color:"#6B7280"}})})]})}),S.jsx("div",{style:{flex:1,overflow:"auto",padding:"24px"},children:S.jsxs("div",{style:{maxWidth:"672px",display:"flex",flexDirection:"column",gap:"24px"},children:[S.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",borderRadius:"12px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"16px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[S.jsx(qw,{style:{width:"16px",height:"16px",color:"#8B5CF6"}}),S.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",color:"#111827",margin:0},children:"Appearance"})]}),S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[S.jsxs("div",{children:[S.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#111827",margin:0},children:"Glassmorphism Effects"}),S.jsx("p",{style:{fontSize:"12px",color:"#6B7280",margin:0},children:"Enable transparent glass-like UI elements"})]}),S.jsxs("div",{style:{position:"relative",display:"inline-block",width:"44px",height:"24px",cursor:"pointer"},children:[S.jsx("input",{type:"checkbox",defaultChecked:!0,style:{position:"absolute",opacity:0,width:0,height:0}}),S.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:"#3B82F6",borderRadius:"24px",transition:"0.3s"},children:S.jsx("span",{style:{position:"absolute",height:"18px",width:"18px",left:"22px",bottom:"3px",background:"white",borderRadius:"50%",transition:"0.3s"}})})]})]}),S.jsx("div",{style:{height:"1px",background:"rgba(0, 0, 0, 0.05)"}}),S.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[S.jsxs("div",{children:[S.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#111827",margin:0},children:"Show Animations"}),S.jsx("p",{style:{fontSize:"12px",color:"#6B7280",margin:0},children:"Enable smooth transitions and animations"})]}),S.jsxs("div",{style:{position:"relative",display:"inline-block",width:"44px",height:"24px",cursor:"pointer"},children:[S.jsx("input",{type:"checkbox",defaultChecked:!0,style:{position:"absolute",opacity:0,width:0,height:0}}),S.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:"#3B82F6",borderRadius:"24px",transition:"0.3s"},children:S.jsx("span",{style:{position:"absolute",height:"18px",width:"18px",left:"22px",bottom:"3px",background:"white",borderRadius:"50%",transition:"0.3s"}})})]})]}),S.jsx("div",{style:{height:"1px",background:"rgba(0, 0, 0, 0.05)"}}),S.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[S.jsxs("div",{children:[S.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#111827",margin:0},children:"Dark Mode"}),S.jsx("p",{style:{fontSize:"12px",color:"#6B7280",margin:0},children:"Switch to dark color scheme"})]}),S.jsxs("div",{style:{position:"relative",display:"inline-block",width:"44px",height:"24px",cursor:"pointer"},children:[S.jsx("input",{type:"checkbox",style:{position:"absolute",opacity:0,width:0,height:0}}),S.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:"#D1D5DB",borderRadius:"24px",transition:"0.3s"},children:S.jsx("span",{style:{position:"absolute",height:"18px",width:"18px",left:"3px",bottom:"3px",background:"white",borderRadius:"50%",transition:"0.3s"}})})]})]})]})]}),S.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",borderRadius:"12px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"16px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[S.jsx(yB,{style:{width:"16px",height:"16px",color:"#3B82F6"}}),S.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",color:"#111827",margin:0},children:"Map & Visualization"})]}),S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[S.jsxs("div",{children:[S.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#111827",margin:0},children:"Show Link Labels"}),S.jsx("p",{style:{fontSize:"12px",color:"#6B7280",margin:0},children:"Display capacity labels on network links"})]}),S.jsxs("div",{style:{position:"relative",display:"inline-block",width:"44px",height:"24px",cursor:"pointer"},children:[S.jsx("input",{type:"checkbox",defaultChecked:!0,style:{position:"absolute",opacity:0,width:0,height:0}}),S.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:"#3B82F6",borderRadius:"24px",transition:"0.3s"},children:S.jsx("span",{style:{position:"absolute",height:"18px",width:"18px",left:"22px",bottom:"3px",background:"white",borderRadius:"50%",transition:"0.3s"}})})]})]}),S.jsx("div",{style:{height:"1px",background:"rgba(0, 0, 0, 0.05)"}}),S.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[S.jsxs("div",{children:[S.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#111827",margin:0},children:"Curved Links"}),S.jsx("p",{style:{fontSize:"12px",color:"#6B7280",margin:0},children:"Use curved paths for network connections"})]}),S.jsxs("div",{style:{position:"relative",display:"inline-block",width:"44px",height:"24px",cursor:"pointer"},children:[S.jsx("input",{type:"checkbox",defaultChecked:!0,style:{position:"absolute",opacity:0,width:0,height:0}}),S.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:"#3B82F6",borderRadius:"24px",transition:"0.3s"},children:S.jsx("span",{style:{position:"absolute",height:"18px",width:"18px",left:"22px",bottom:"3px",background:"white",borderRadius:"50%",transition:"0.3s"}})})]})]}),S.jsx("div",{style:{height:"1px",background:"rgba(0, 0, 0, 0.05)"}}),S.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[S.jsxs("div",{children:[S.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#111827",margin:0},children:"Auto-Zoom"}),S.jsx("p",{style:{fontSize:"12px",color:"#6B7280",margin:0},children:"Automatically zoom to selected elements"})]}),S.jsxs("div",{style:{position:"relative",display:"inline-block",width:"44px",height:"24px",cursor:"pointer"},children:[S.jsx("input",{type:"checkbox",defaultChecked:!0,style:{position:"absolute",opacity:0,width:0,height:0}}),S.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:"#3B82F6",borderRadius:"24px",transition:"0.3s"},children:S.jsx("span",{style:{position:"absolute",height:"18px",width:"18px",left:"22px",bottom:"3px",background:"white",borderRadius:"50%",transition:"0.3s"}})})]})]})]})]}),S.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",borderRadius:"12px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"16px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[S.jsx(gB,{style:{width:"16px",height:"16px",color:"#F59E0B"}}),S.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",color:"#111827",margin:0},children:"Notifications"})]}),S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[S.jsxs("div",{children:[S.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#111827",margin:0},children:"Performance Alerts"}),S.jsx("p",{style:{fontSize:"12px",color:"#6B7280",margin:0},children:"Get notified when utilization exceeds threshold"})]}),S.jsxs("div",{style:{position:"relative",display:"inline-block",width:"44px",height:"24px",cursor:"pointer"},children:[S.jsx("input",{type:"checkbox",defaultChecked:!0,style:{position:"absolute",opacity:0,width:0,height:0}}),S.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:"#3B82F6",borderRadius:"24px",transition:"0.3s"},children:S.jsx("span",{style:{position:"absolute",height:"18px",width:"18px",left:"22px",bottom:"3px",background:"white",borderRadius:"50%",transition:"0.3s"}})})]})]}),S.jsx("div",{style:{height:"1px",background:"rgba(0, 0, 0, 0.05)"}}),S.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[S.jsxs("div",{children:[S.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#111827",margin:0},children:"Fault Notifications"}),S.jsx("p",{style:{fontSize:"12px",color:"#6B7280",margin:0},children:"Receive alerts for network faults"})]}),S.jsxs("div",{style:{position:"relative",display:"inline-block",width:"44px",height:"24px",cursor:"pointer"},children:[S.jsx("input",{type:"checkbox",defaultChecked:!0,style:{position:"absolute",opacity:0,width:0,height:0}}),S.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:"#3B82F6",borderRadius:"24px",transition:"0.3s"},children:S.jsx("span",{style:{position:"absolute",height:"18px",width:"18px",left:"22px",bottom:"3px",background:"white",borderRadius:"50%",transition:"0.3s"}})})]})]}),S.jsx("div",{style:{height:"1px",background:"rgba(0, 0, 0, 0.05)"}}),S.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[S.jsxs("div",{children:[S.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#111827",margin:0},children:"Email Reports"}),S.jsx("p",{style:{fontSize:"12px",color:"#6B7280",margin:0},children:"Send daily network health reports via email"})]}),S.jsxs("div",{style:{position:"relative",display:"inline-block",width:"44px",height:"24px",cursor:"pointer"},children:[S.jsx("input",{type:"checkbox",style:{position:"absolute",opacity:0,width:0,height:0}}),S.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:"#D1D5DB",borderRadius:"24px",transition:"0.3s"},children:S.jsx("span",{style:{position:"absolute",height:"18px",width:"18px",left:"3px",bottom:"3px",background:"white",borderRadius:"50%",transition:"0.3s"}})})]})]})]})]}),S.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",borderRadius:"12px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"16px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[S.jsx(SB,{style:{width:"16px",height:"16px",color:"#10B981"}}),S.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",color:"#111827",margin:0},children:"Security & Privacy"})]}),S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[S.jsxs("div",{children:[S.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#111827",margin:0},children:"Auto-Lock"}),S.jsx("p",{style:{fontSize:"12px",color:"#6B7280",margin:0},children:"Lock session after 15 minutes of inactivity"})]}),S.jsxs("div",{style:{position:"relative",display:"inline-block",width:"44px",height:"24px",cursor:"pointer"},children:[S.jsx("input",{type:"checkbox",defaultChecked:!0,style:{position:"absolute",opacity:0,width:0,height:0}}),S.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:"#3B82F6",borderRadius:"24px",transition:"0.3s"},children:S.jsx("span",{style:{position:"absolute",height:"18px",width:"18px",left:"22px",bottom:"3px",background:"white",borderRadius:"50%",transition:"0.3s"}})})]})]}),S.jsx("div",{style:{height:"1px",background:"rgba(0, 0, 0, 0.05)"}}),S.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[S.jsxs("div",{children:[S.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#111827",margin:0},children:"Audit Logging"}),S.jsx("p",{style:{fontSize:"12px",color:"#6B7280",margin:0},children:"Track all user actions and changes"})]}),S.jsxs("div",{style:{position:"relative",display:"inline-block",width:"44px",height:"24px",cursor:"pointer"},children:[S.jsx("input",{type:"checkbox",defaultChecked:!0,style:{position:"absolute",opacity:0,width:0,height:0}}),S.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:"#3B82F6",borderRadius:"24px",transition:"0.3s"},children:S.jsx("span",{style:{position:"absolute",height:"18px",width:"18px",left:"22px",bottom:"3px",background:"white",borderRadius:"50%",transition:"0.3s"}})})]})]})]})]}),S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[S.jsx("button",{style:{background:"#3B82F6",borderRadius:"8px",border:"none",padding:"10px 20px",cursor:"pointer",color:"white",fontSize:"14px",fontWeight:"600",transition:"background-color 0.2s"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#2563EB"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="#3B82F6"},children:"Save Changes"}),S.jsx("button",{onClick:e,style:{background:"white",borderRadius:"8px",border:"1px solid #D1D5DB",padding:"10px 20px",cursor:"pointer",color:"#111827",fontSize:"14px",fontWeight:"500",transition:"background-color 0.2s"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#F9FAFB"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="white"},children:"Cancel"})]})]})})]})})}function yie({connection:e,onClose:t}){const[r,n]=N.useState(!1),[o,l]=N.useState({x:0,y:0}),[h,u]=N.useState(!1),[v,x]=N.useState({x:0,y:0}),[A,C]=N.useState("topology"),P=N.useRef(null),O=N.useRef(null),U=N.useRef(null),W=N.useRef(null),G=N.useRef(null),X=(Q,de,he)=>{if(!de.label)return;const Y=he.labelSize,ie=he.labelWeight;Q.fillStyle="#1f2937",Q.font=`${ie} ${Y}px 'Outfit', sans-serif`;const Ce=de.size+8,_e=-de.size-4;Q.fillText(de.label,de.x+Ce,de.y+_e)};N.useEffect(()=>{if(P.current&&o.x===0&&o.y===0){const Q=P.current.getBoundingClientRect();l({x:(window.innerWidth-Q.width)/2,y:window.innerHeight-Q.height-16})}},[]);const ae=Q=>{if(P.current){u(!0);const de=P.current.getBoundingClientRect();x({x:Q.clientX-de.left,y:Q.clientY-de.top})}};N.useEffect(()=>{const Q=he=>{if(h&&P.current){const Y=he.clientX-v.x,ie=he.clientY-v.y,Ce=P.current.getBoundingClientRect(),_e=window.innerWidth-Ce.width,Me=window.innerHeight-Ce.height;l({x:Math.max(0,Math.min(Y,_e)),y:Math.max(0,Math.min(ie,Me))})}},de=()=>{u(!1)};return h&&(document.addEventListener("mousemove",Q),document.addEventListener("mouseup",de)),()=>{document.removeEventListener("mousemove",Q),document.removeEventListener("mouseup",de)}},[h,v]),N.useEffect(()=>{var Re;if(!W.current||r||A!=="links"||!e.linkDetails||e.linkDetails.length===0)return;const Q=new ua,de=new Set,he=new Map;e.linkDetails.forEach(pe=>{const ge=pe.source_node||pe.source,ze=pe.target_node||pe.target;ge&&(de.add(ge),he.has(ge)||he.set(ge,{label:ge,peran:pe.source_peran,vendor:pe.source_vendor})),ze&&(de.add(ze),he.has(ze)||he.set(ze,{label:ze,peran:pe.target_peran,vendor:pe.target_vendor}))});const Y=Array.from(de);let ie=((Re=e.nodeData)==null?void 0:Re.id)||e.from;!de.has(ie)&&Y.length>0&&(ie=Y[0]);const Ce=he.get(ie)||{label:ie},_e=3,Me=pe=>{if(!pe)return"#3b82f6";const ge=pe.toLowerCase();return ge.includes("tera")?"#dc2626":ge.includes("metro")?"#ea580c":ge.includes("aggregation")||ge.includes("agg")?"#8b5cf6":ge.includes("access")||ge.includes("acc")?"#10b981":"#3b82f6"};Q.addNode(ie,{label:Ce.label,x:0,y:0,size:25,color:"#9333ea"});const me=Y.filter(pe=>pe!==ie);me.forEach((pe,ge)=>{const ze=2*Math.PI*ge/me.length,Pe=_e*Math.cos(ze),st=_e*Math.sin(ze),Ae=he.get(pe)||{label:pe};Q.addNode(pe,{label:Ae.label,x:Pe,y:st,size:18,color:Me(Ae.peran)})});const Ke=new Map;e.linkDetails.forEach(pe=>{var qe;const ge=pe.source_node||pe.source,ze=pe.target_node||pe.target,Pe=pe.layer||pe.trunk_layer||"unknown";if(!ge||!ze)return;const Ae=`${ge<ze?`${ge}-${ze}`:`${ze}-${ge}`}|${Pe}`;Ke.has(Ae)||Ke.set(Ae,[]),(qe=Ke.get(Ae))==null||qe.push(pe)}),Ke.forEach((pe,ge)=>{const ze=pe[0],Pe=ze.source_node||ze.source,st=ze.target_node||ze.target,Ae=ze.layer||ze.trunk_layer||"unknown";if(!Pe||!st)return;const Ze=pe.reduce((tr,at)=>{const Ht=typeof at.capacity=="number"?at.capacity:0;return tr+Ht},0)/1e9,zt=Ze>0?`${Ze.toFixed(1)}G`:"",Tt=pe.length>1?` (${pe.length}x)`:"",rr=Ae!=="unknown"?`
${Ae}`:"",Xt=`${zt}${Tt}${rr}`;try{if(Q.hasNode(Pe)&&Q.hasNode(st)){const tr=Math.max(2,Math.min(8,Ze/20));let at="#8b5cf6";const Ht=Ae.toLowerCase();Ht.includes("tera")?at="#dc2626":Ht.includes("metro")?at="#ea580c":Ht.includes("agg")?at="#8b5cf6":Ht.includes("access")?at="#10b981":at="#6b7280",Q.addEdgeWithKey(ge,Pe,st,{size:tr,color:at,label:Xt,type:"line"})}}catch{}});try{G.current=new _1(Q,W.current,{renderEdgeLabels:!0,defaultNodeColor:"#999999",defaultEdgeColor:"#FFFFFF",labelSize:12,labelWeight:"600",labelColor:{color:"#1f2937"},labelRenderedSizeThreshold:0,labelDensity:1,labelGridCellSize:60,edgeLabelSize:9,edgeLabelWeight:"500",edgeLabelColor:{color:"#6b7280"},enableEdgeEvents:!0,stagePadding:60,defaultDrawNodeLabel:X})}catch(pe){console.error("Error initializing Sigma for physical links:",pe)}return()=>{G.current&&(G.current.kill(),G.current=null)}},[e.linkDetails,e.nodeData,e.from,r,A]),N.useEffect(()=>{var de,he;if(!O.current||r||A!=="topology")return;const Q=new ua;if(e.topology&&e.topology.length>0){const Y=new Set,ie=new Map;e.topology.forEach(Re=>{const pe=Re.source,ge=Re.target;Y.add(pe),Y.add(ge)});const Ce=Array.from(Y),_e=((de=e.nodeData)==null?void 0:de.id)||e.from,Me=3,me=((he=e.nodeData)==null?void 0:he.label)||e.from;Q.addNode(_e,{label:me,x:0,y:0,size:25,color:"#9333ea"}),ie.set(_e,{x:0,y:0});const Ke=Ce.filter(Re=>Re!==_e);Ke.forEach((Re,pe)=>{var qe;const ge=2*Math.PI*pe/Ke.length,ze=Me*Math.cos(ge),Pe=Me*Math.sin(ge),st=(qe=e.topology)==null?void 0:qe.find(Ze=>Ze.source===Re||Ze.target===Re),Ae=Re===(st==null?void 0:st.source)?(st==null?void 0:st.source_label)||Re:(st==null?void 0:st.target_label)||Re;Q.addNode(Re,{label:Ae,x:ze,y:Pe,size:18,color:"#3b82f6"}),ie.set(Re,{x:ze,y:Pe})}),e.topology.forEach(Re=>{const ge=(Re.total_capacity||Re.source_capacity_total||0)/1e9,ze=ge>0?`${ge.toFixed(1)}G`:"";try{if(Q.hasNode(Re.source)&&Q.hasNode(Re.target)){const Pe=Math.max(2,Math.min(8,ge/10));let st="#8b5cf6";if(Re.avg_utilization!==void 0){const Ae=Re.avg_utilization;Ae>80?st="#ef4444":Ae>60?st="#f59e0b":Ae>40?st="#eab308":st="#10b981"}else ge>100?st="#10b981":ge>50&&(st="#3b82f6");Q.addEdge(Re.source,Re.target,{size:Pe,color:st,label:ze,type:"line"})}}catch{}})}else{Q.addNode("pe1",{label:`${e.from} PE1`,x:-3,y:3,size:20,color:"#3b82f6"}),Q.addNode("pe2",{label:`${e.to} PE2`,x:3,y:3,size:20,color:"#3b82f6"});const Ce="agg1",_e="agg2";Q.addNode(Ce,{label:`${e.from} AGG1`,x:-3,y:0,size:18,color:"#8b5cf6"}),Q.addNode(_e,{label:`${e.to} AGG1`,x:3,y:0,size:18,color:"#8b5cf6"});const Me="access1",me="access2",Ke="access3",Re="access4";Q.addNode(Me,{label:`${e.from} ACC1`,x:-4,y:-3,size:15,color:"#10b981"}),Q.addNode(me,{label:`${e.from} ACC2`,x:-2,y:-3,size:15,color:"#10b981"}),Q.addNode(Ke,{label:`${e.to} ACC1`,x:2,y:-3,size:15,color:"#10b981"}),Q.addNode(Re,{label:`${e.to} ACC2`,x:4,y:-3,size:15,color:"#10b981"}),Q.addEdge("pe1","pe2",{size:4,color:"#3b82f6",label:"100G",type:"line"}),Q.addEdge("pe1",Ce,{size:3,color:"#10b981",label:"100G",type:"line"}),Q.addEdge("pe2",_e,{size:3,color:"#10b981",label:"100G",type:"line"}),Q.addEdge(Ce,_e,{size:3,color:"#10b981",label:"50G",type:"line"}),Q.addEdge(Ce,Me,{size:2,color:"#10b981",label:"10G",type:"line"}),Q.addEdge(Ce,me,{size:2,color:"#10b981",label:"10G",type:"line"}),Q.addEdge(_e,Ke,{size:2,color:"#10b981",label:"10G",type:"line"}),Q.addEdge(_e,Re,{size:2,color:"#10b981",label:"10G",type:"line"})}try{U.current=new _1(Q,O.current,{renderEdgeLabels:!0,defaultNodeColor:"#999999",defaultEdgeColor:"#CCCCCC",labelSize:12,labelWeight:"600",labelColor:{color:"#1f2937"},labelRenderedSizeThreshold:0,labelDensity:1,labelGridCellSize:60,edgeLabelSize:9,edgeLabelWeight:"500",edgeLabelColor:{color:"#6b7280"},enableEdgeEvents:!0,stagePadding:60,defaultDrawNodeLabel:X})}catch(Y){console.error("Error initializing Sigma:",Y)}return()=>{U.current&&(U.current.kill(),U.current=null)}},[e.from,e.to,e.topology,e.linkDetails,e.clickedType,r,A]);const ue=(()=>{var Q;if(A==="topology"&&U.current){const de=U.current.getGraph();return{nodes:de.order,links:de.size}}else if(A==="links"&&G.current){const de=G.current.getGraph(),he=de.size,Y=((Q=e.linkDetails)==null?void 0:Q.length)||0;return{nodes:de.order,links:he,physicalLinks:Y}}return{nodes:8,links:8}})();return r?S.jsx("div",{ref:P,style:{position:"fixed",zIndex:9999,cursor:"move",left:`${o.x}px`,top:`${o.y}px`},onMouseDown:ae,children:S.jsxs("button",{onClick:Q=>{Q.stopPropagation(),n(!1)},style:{background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(12px)",borderRadius:"8px",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"8px 12px",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:Q=>{Q.currentTarget.style.background="rgba(255, 255, 255, 1)"},onMouseLeave:Q=>{Q.currentTarget.style.background="rgba(255, 255, 255, 0.9)"},children:[S.jsx(Pv,{style:{width:"16px",height:"16px",color:"#9333ea"}}),S.jsx("span",{style:{fontSize:"12px",color:"#111827"},children:"Topology View"}),S.jsx(ZS,{style:{width:"12px",height:"12px"}})]})}):S.jsx("div",{ref:P,style:{position:"fixed",zIndex:9999,width:"700px",left:`${o.x}px`,top:"200px"},children:S.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(12px)",borderRadius:"16px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",border:"1px solid rgba(229, 231, 235, 0.5)"},children:[S.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(229, 231, 235, 0.5)",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"move",userSelect:"none"},onMouseDown:ae,children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",pointerEvents:"none"},children:[S.jsx(KL,{style:{width:"16px",height:"16px",color:"#9ca3af"}}),S.jsx(f0,{style:{width:"16px",height:"16px",color:"#9333ea"}}),S.jsxs("div",{children:[S.jsx("h3",{style:{fontSize:"14px",color:"#111827",margin:0},children:"Network Topology"}),S.jsxs("p",{style:{fontSize:"12px",color:"#6b7280",margin:0},children:[e.from,"  ",e.to]})]})]}),S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",pointerEvents:"auto"},children:[S.jsx("button",{onClick:Q=>{Q.stopPropagation(),n(!0)},style:{width:"32px",height:"32px",padding:0,background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:Q=>{Q.currentTarget.style.background="#f3f4f6"},onMouseLeave:Q=>{Q.currentTarget.style.background="transparent"},children:S.jsx(HS,{style:{width:"16px",height:"16px"}})}),S.jsx("button",{onClick:Q=>{Q.stopPropagation(),t()},style:{width:"32px",height:"32px",padding:0,background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:Q=>{Q.currentTarget.style.background="#f3f4f6"},onMouseLeave:Q=>{Q.currentTarget.style.background="transparent"},children:S.jsx(m_,{style:{width:"16px",height:"16px"}})})]})]}),e.clickedType==="node"&&e.linkDetails&&e.linkDetails.length>0&&S.jsx("div",{style:{padding:"0 16px",borderBottom:"1px solid rgba(229, 231, 235, 0.5)"},children:S.jsxs("div",{style:{display:"flex",gap:"4px"},children:[S.jsx("button",{onClick:()=>C("topology"),style:{padding:"10px 16px",background:A==="topology"?"rgba(147, 51, 234, 0.1)":"transparent",border:"none",borderBottom:A==="topology"?"2px solid #9333ea":"2px solid transparent",color:A==="topology"?"#9333ea":"#6b7280",fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:Q=>{A!=="topology"&&(Q.currentTarget.style.background="rgba(243, 244, 246, 0.5)")},onMouseLeave:Q=>{A!=="topology"&&(Q.currentTarget.style.background="transparent")},children:"Network Topology"}),S.jsxs("button",{onClick:()=>C("links"),style:{padding:"10px 16px",background:A==="links"?"rgba(147, 51, 234, 0.1)":"transparent",border:"none",borderBottom:A==="links"?"2px solid #9333ea":"2px solid transparent",color:A==="links"?"#9333ea":"#6b7280",fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:Q=>{A!=="links"&&(Q.currentTarget.style.background="rgba(243, 244, 246, 0.5)")},onMouseLeave:Q=>{A!=="links"&&(Q.currentTarget.style.background="transparent")},children:["Node Physical Links",S.jsx("span",{style:{background:A==="links"?"#9333ea":"#9ca3af",color:"white",fontSize:"10px",fontWeight:"700",padding:"2px 6px",borderRadius:"10px",minWidth:"20px",textAlign:"center"},children:e.linkDetails.length})]})]})}),A==="topology"&&S.jsxs("div",{style:{padding:"16px"},children:[S.jsx("div",{style:{background:"linear-gradient(to bottom right, rgba(239, 246, 255, 0.5), rgba(250, 245, 255, 0.5))",borderRadius:"12px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"16px",height:"400px",position:"relative"},children:S.jsx("div",{ref:O,style:{width:"100%",height:"100%",borderRadius:"8px"}})}),S.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px",marginTop:"12px"},children:[S.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",borderRadius:"8px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"8px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginBottom:"4px"},children:[S.jsx(Pv,{style:{width:"12px",height:"12px",color:"#2563eb"}}),S.jsx("span",{style:{fontSize:"10px",color:"#6b7280"},children:"NODES"})]}),S.jsx("div",{style:{fontSize:"14px",color:"#111827"},children:ue.nodes})]}),S.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",borderRadius:"8px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"8px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginBottom:"4px"},children:[S.jsx(f0,{style:{width:"12px",height:"12px",color:"#9333ea"}}),S.jsx("span",{style:{fontSize:"10px",color:"#6b7280"},children:"LINKS"})]}),S.jsx("div",{style:{fontSize:"14px",color:"#111827"},children:ue.links})]}),S.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",borderRadius:"8px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"8px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginBottom:"4px"},children:[S.jsx(Yv,{style:{width:"12px",height:"12px",color:"#059669"}}),S.jsx("span",{style:{fontSize:"10px",color:"#6b7280"},children:"STATUS"})]}),S.jsx("div",{style:{fontSize:"14px",color:"#059669"},children:"All Active"})]})]})]}),A==="links"&&e.linkDetails&&e.linkDetails.length>0&&S.jsxs("div",{style:{padding:"16px"},children:[S.jsx("div",{style:{background:"linear-gradient(to bottom right, rgba(239, 246, 255, 0.5), rgba(250, 245, 255, 0.5))",borderRadius:"12px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"16px",height:"400px",position:"relative"},children:S.jsx("div",{ref:W,style:{width:"100%",height:"100%",borderRadius:"8px"}})}),S.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px",marginTop:"12px"},children:[S.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",borderRadius:"8px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"8px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginBottom:"4px"},children:[S.jsx(Pv,{style:{width:"12px",height:"12px",color:"#2563eb"}}),S.jsx("span",{style:{fontSize:"10px",color:"#6b7280"},children:"NODES"})]}),S.jsx("div",{style:{fontSize:"14px",color:"#111827"},children:ue.nodes})]}),S.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",borderRadius:"8px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"8px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginBottom:"4px"},children:[S.jsx(f0,{style:{width:"12px",height:"12px",color:"#9333ea"}}),S.jsx("span",{style:{fontSize:"10px",color:"#6b7280"},children:"AGGREGATED"})]}),S.jsx("div",{style:{fontSize:"14px",color:"#111827"},children:ue.links})]}),S.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",borderRadius:"8px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"8px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginBottom:"4px"},children:[S.jsx(Yv,{style:{width:"12px",height:"12px",color:"#059669"}}),S.jsx("span",{style:{fontSize:"10px",color:"#6b7280"},children:"PHYSICAL"})]}),S.jsx("div",{style:{fontSize:"14px",color:"#059669"},children:ue.physicalLinks||ue.links})]})]}),S.jsxs("div",{style:{marginTop:"12px",padding:"12px",background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",borderRadius:"8px",border:"1px solid rgba(229, 231, 235, 0.5)"},children:[S.jsx("div",{style:{fontSize:"10px",color:"#6b7280",fontWeight:"600",marginBottom:"8px"},children:"LAYER COLOR LEGEND"}),S.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[S.jsx("div",{style:{width:"20px",height:"4px",background:"#dc2626",borderRadius:"2px"}}),S.jsx("span",{style:{fontSize:"10px",color:"#374151",fontWeight:"500"},children:"TERA"})]}),S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[S.jsx("div",{style:{width:"20px",height:"4px",background:"#ea580c",borderRadius:"2px"}}),S.jsx("span",{style:{fontSize:"10px",color:"#374151",fontWeight:"500"},children:"METRO"})]}),S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[S.jsx("div",{style:{width:"20px",height:"4px",background:"#8b5cf6",borderRadius:"2px"}}),S.jsx("span",{style:{fontSize:"10px",color:"#374151",fontWeight:"500"},children:"AGGREGATION"})]}),S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[S.jsx("div",{style:{width:"20px",height:"4px",background:"#10b981",borderRadius:"2px"}}),S.jsx("span",{style:{fontSize:"10px",color:"#374151",fontWeight:"500"},children:"ACCESS"})]}),S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[S.jsx("div",{style:{width:"20px",height:"4px",background:"#6b7280",borderRadius:"2px"}}),S.jsx("span",{style:{fontSize:"10px",color:"#374151",fontWeight:"500"},children:"Unknown"})]})]})]})]})]})})}const s6={"pe - teradatin":"#2563eb","tera - pemobile":"#ec4899","tera - pehsi":"#06b6d4","tera - pevoice":"#a855f7","tera - metro":"#10b981","tera - tera":"#f59e0b","tera - swc":"#ef4444","":"#94a3b8",default:"#6b7280"},bv=e=>{const t=(e||"").toLowerCase().trim();return s6[t]||s6.default},wv=[{id:"scenario1",name:"Simple Star Topology",description:"Central hub with 5 connected nodes",nodes:[{id:"hub",label:"Central Hub",x:0,y:0,size:30,color:"#ef4444"},{id:"node1",label:"Node 1",x:4,y:0,size:20,color:"#3b82f6"},{id:"node2",label:"Node 2",x:2,y:3.5,size:20,color:"#3b82f6"},{id:"node3",label:"Node 3",x:-2,y:3.5,size:20,color:"#3b82f6"},{id:"node4",label:"Node 4",x:-4,y:0,size:20,color:"#3b82f6"},{id:"node5",label:"Node 5",x:0,y:-4,size:20,color:"#3b82f6"}],edges:[{source:"hub",target:"node1",size:4,color:"#10b981",label:"100G"},{source:"hub",target:"node2",size:4,color:"#10b981",label:"100G"},{source:"hub",target:"node3",size:4,color:"#10b981",label:"100G"},{source:"hub",target:"node4",size:4,color:"#10b981",label:"100G"},{source:"hub",target:"node5",size:4,color:"#10b981",label:"100G"}]},{id:"scenario2",name:"Ring Topology",description:"Circular network with 6 nodes",nodes:[{id:"ring1",label:"Ring Node 1",x:4,y:0,size:22,color:"#8b5cf6"},{id:"ring2",label:"Ring Node 2",x:2,y:3.5,size:22,color:"#8b5cf6"},{id:"ring3",label:"Ring Node 3",x:-2,y:3.5,size:22,color:"#8b5cf6"},{id:"ring4",label:"Ring Node 4",x:-4,y:0,size:22,color:"#8b5cf6"},{id:"ring5",label:"Ring Node 5",x:-2,y:-3.5,size:22,color:"#8b5cf6"},{id:"ring6",label:"Ring Node 6",x:2,y:-3.5,size:22,color:"#8b5cf6"}],edges:[{source:"ring1",target:"ring2",size:3,color:"#f59e0b",label:"50G"},{source:"ring2",target:"ring3",size:3,color:"#f59e0b",label:"50G"},{source:"ring3",target:"ring4",size:3,color:"#f59e0b",label:"50G"},{source:"ring4",target:"ring5",size:3,color:"#f59e0b",label:"50G"},{source:"ring5",target:"ring6",size:3,color:"#f59e0b",label:"50G"},{source:"ring6",target:"ring1",size:3,color:"#f59e0b",label:"50G"}]},{id:"scenario3",name:"Mesh Topology",description:"Fully connected mesh network",nodes:[{id:"mesh1",label:"Mesh A",x:-3,y:3,size:24,color:"#14b8a6"},{id:"mesh2",label:"Mesh B",x:3,y:3,size:24,color:"#14b8a6"},{id:"mesh3",label:"Mesh C",x:3,y:-3,size:24,color:"#14b8a6"},{id:"mesh4",label:"Mesh D",x:-3,y:-3,size:24,color:"#14b8a6"}],edges:[{source:"mesh1",target:"mesh2",size:5,color:"#10b981",label:"200G"},{source:"mesh2",target:"mesh3",size:5,color:"#10b981",label:"200G"},{source:"mesh3",target:"mesh4",size:5,color:"#10b981",label:"200G"},{source:"mesh4",target:"mesh1",size:5,color:"#10b981",label:"200G"},{source:"mesh1",target:"mesh3",size:3,color:"#3b82f6",label:"100G"},{source:"mesh2",target:"mesh4",size:3,color:"#3b82f6",label:"100G"}]},{id:"scenario4",name:"Hierarchical Topology",description:"Three-tier network architecture",nodes:[{id:"core1",label:"Core 1",x:-2,y:4,size:28,color:"#ef4444"},{id:"core2",label:"Core 2",x:2,y:4,size:28,color:"#ef4444"},{id:"dist1",label:"Dist 1",x:-3,y:0,size:22,color:"#f59e0b"},{id:"dist2",label:"Dist 2",x:0,y:0,size:22,color:"#f59e0b"},{id:"dist3",label:"Dist 3",x:3,y:0,size:22,color:"#f59e0b"},{id:"acc1",label:"Access 1",x:-4,y:-4,size:18,color:"#10b981"},{id:"acc2",label:"Access 2",x:-2,y:-4,size:18,color:"#10b981"},{id:"acc3",label:"Access 3",x:0,y:-4,size:18,color:"#10b981"},{id:"acc4",label:"Access 4",x:2,y:-4,size:18,color:"#10b981"},{id:"acc5",label:"Access 5",x:4,y:-4,size:18,color:"#10b981"}],edges:[{source:"core1",target:"core2",size:6,color:"#ef4444",label:"400G"},{source:"core1",target:"dist1",size:5,color:"#f59e0b",label:"200G"},{source:"core1",target:"dist2",size:5,color:"#f59e0b",label:"200G"},{source:"core2",target:"dist2",size:5,color:"#f59e0b",label:"200G"},{source:"core2",target:"dist3",size:5,color:"#f59e0b",label:"200G"},{source:"dist1",target:"acc1",size:3,color:"#10b981",label:"100G"},{source:"dist1",target:"acc2",size:3,color:"#10b981",label:"100G"},{source:"dist2",target:"acc2",size:3,color:"#10b981",label:"100G"},{source:"dist2",target:"acc3",size:3,color:"#10b981",label:"100G"},{source:"dist2",target:"acc4",size:3,color:"#10b981",label:"100G"},{source:"dist3",target:"acc4",size:3,color:"#10b981",label:"100G"},{source:"dist3",target:"acc5",size:3,color:"#10b981",label:"100G"}]},{id:"scenario5",name:"Complex Network",description:"Mixed topology with multiple connections",nodes:[{id:"main",label:"Main Router",x:0,y:0,size:32,color:"#9333ea"},{id:"pe1",label:"PE Router 1",x:-4,y:3,size:24,color:"#3b82f6"},{id:"pe2",label:"PE Router 2",x:4,y:3,size:24,color:"#3b82f6"},{id:"agg1",label:"Aggregation 1",x:-5,y:-1,size:20,color:"#8b5cf6"},{id:"agg2",label:"Aggregation 2",x:0,y:-3,size:20,color:"#8b5cf6"},{id:"agg3",label:"Aggregation 3",x:5,y:-1,size:20,color:"#8b5cf6"},{id:"edge1",label:"Edge 1",x:-6,y:-4,size:16,color:"#10b981"},{id:"edge2",label:"Edge 2",x:-3,y:-5,size:16,color:"#10b981"},{id:"edge3",label:"Edge 3",x:0,y:-6,size:16,color:"#10b981"},{id:"edge4",label:"Edge 4",x:3,y:-5,size:16,color:"#10b981"},{id:"edge5",label:"Edge 5",x:6,y:-4,size:16,color:"#10b981"}],edges:[{source:"main",target:"pe1",size:6,color:"#ef4444",label:"400G"},{source:"main",target:"pe2",size:6,color:"#ef4444",label:"400G"},{source:"pe1",target:"agg1",size:4,color:"#f59e0b",label:"200G"},{source:"pe1",target:"agg2",size:4,color:"#f59e0b",label:"200G"},{source:"pe2",target:"agg2",size:4,color:"#f59e0b",label:"200G"},{source:"pe2",target:"agg3",size:4,color:"#f59e0b",label:"200G"},{source:"agg1",target:"edge1",size:2,color:"#10b981",label:"100G"},{source:"agg1",target:"edge2",size:2,color:"#10b981",label:"100G"},{source:"agg2",target:"edge2",size:2,color:"#10b981",label:"100G"},{source:"agg2",target:"edge3",size:2,color:"#10b981",label:"100G"},{source:"agg2",target:"edge4",size:2,color:"#10b981",label:"100G"},{source:"agg3",target:"edge4",size:2,color:"#10b981",label:"100G"},{source:"agg3",target:"edge5",size:2,color:"#10b981",label:"100G"},{source:"agg1",target:"agg2",size:3,color:"#3b82f6",label:"100G"},{source:"agg2",target:"agg3",size:3,color:"#3b82f6",label:"100G"}]}];function vie({onClose:e}){const[t,r]=N.useState(!1),[n,o]=N.useState({x:0,y:0}),[l,h]=N.useState(!1),[u,v]=N.useState({x:0,y:0}),[x,A]=N.useState(0),[C,P]=N.useState([]),[O,U]=N.useState(!0),[W,G]=N.useState(!1),[X,ae]=N.useState(null),ne=N.useRef(null),ue=N.useRef(null),Q=N.useRef(null),de=wv[x];N.useEffect(()=>{(async()=>{try{const Re=await fetch("/data/topology-test.json");if(!Re.ok)throw new Error("Failed to load topology data");const pe=await Re.json();P(pe),U(!1)}catch(Re){console.error("Error loading topology data:",Re),U(!1)}})()},[]),N.useEffect(()=>{if(ne.current&&n.x===0&&n.y===0){const Ke=ne.current.getBoundingClientRect();o({x:(window.innerWidth-Ke.width)/2,y:window.innerHeight-Ke.height-16})}},[]);const he=Ke=>{if(ne.current){h(!0);const Re=ne.current.getBoundingClientRect();v({x:Ke.clientX-Re.left,y:Ke.clientY-Re.top})}};N.useEffect(()=>{const Ke=pe=>{if(l&&ne.current){const ge=pe.clientX-u.x,ze=pe.clientY-u.y,Pe=ne.current.getBoundingClientRect(),st=window.innerWidth-Pe.width,Ae=window.innerHeight-Pe.height;o({x:Math.max(0,Math.min(ge,st)),y:Math.max(0,Math.min(ze,Ae))})}},Re=()=>{h(!1)};return l&&(document.addEventListener("mousemove",Ke),document.addEventListener("mouseup",Re)),()=>{document.removeEventListener("mousemove",Ke),document.removeEventListener("mouseup",Re)}},[l,u]),N.useEffect(()=>{if(!ue.current||t)return;const Ke=new ua;if(W&&C.length>0){const Re=new Set,pe=new Map;C.forEach(zt=>{Re.add(zt.no_name),Re.add(zt.nbr),pe.has(zt.no_name)||pe.set(zt.no_name,zt.layer),pe.has(zt.nbr)||pe.set(zt.nbr,zt.layer)});const ge=Array.from(Re),ze=new Map,Pe=6;ge.forEach((zt,Tt)=>{const rr=2*Math.PI*Tt/ge.length,Xt=Pe*Math.cos(rr),tr=Pe*Math.sin(rr);ze.set(zt,{x:Xt,y:tr})});const st=100,Ae=2,qe=.01,Ze=.8;for(let zt=0;zt<st;zt++){const Tt=new Map;ge.forEach(rr=>{Tt.set(rr,{fx:0,fy:0})});for(let rr=0;rr<ge.length;rr++)for(let Xt=rr+1;Xt<ge.length;Xt++){const tr=ge[rr],at=ge[Xt],Ht=ze.get(tr),Mt=ze.get(at),pt=Mt.x-Ht.x,Pr=Mt.y-Ht.y,Lt=Math.sqrt(pt*pt+Pr*Pr)||.1,Wt=Ae/(Lt*Lt),ke=pt/Lt*Wt,Xr=Pr/Lt*Wt,rn=Tt.get(tr),vr=Tt.get(at);rn.fx-=ke,rn.fy-=Xr,vr.fx+=ke,vr.fy+=Xr}C.forEach(rr=>{if(ze.has(rr.no_name)&&ze.has(rr.nbr)){const Xt=ze.get(rr.no_name),tr=ze.get(rr.nbr),at=tr.x-Xt.x,Ht=tr.y-Xt.y,Mt=Math.sqrt(at*at+Ht*Ht)||.1,pt=Mt*qe,Pr=at/Mt*pt,Lt=Ht/Mt*pt,Wt=Tt.get(rr.no_name),ke=Tt.get(rr.nbr);Wt.fx+=Pr,Wt.fy+=Lt,ke.fx-=Pr,ke.fy-=Lt}}),ge.forEach(rr=>{const Xt=ze.get(rr),tr=Tt.get(rr);Xt.x+=tr.fx*Ze,Xt.y+=tr.fy*Ze})}ge.forEach(zt=>{const Tt=ze.get(zt),rr=pe.get(zt)||"",Xt=bv(rr);Ke.addNode(zt,{label:zt,x:Tt.x,y:Tt.y,size:22,color:Xt})}),C.forEach((zt,Tt)=>{const rr=zt.cap/1e9,Xt=rr>0?`${rr.toFixed(0)}G`:"",tr=bv(zt.layer),at=Math.max(3,Math.min(10,rr/50));try{Ke.hasNode(zt.no_name)&&Ke.hasNode(zt.nbr)&&Ke.addEdge(zt.no_name,zt.nbr,{size:at,color:tr,label:Xt,type:"line",edgeData:zt,edgeIndex:Tt})}catch{}})}else de.nodes.forEach(Re=>{Ke.addNode(Re.id,{label:Re.label,x:Re.x,y:Re.y,size:Re.size,color:Re.color})}),de.edges.forEach(Re=>{try{Ke.addEdge(Re.source,Re.target,{size:Re.size,color:Re.color,label:Re.label,type:"line"})}catch{}});try{Q.current=new _1(Ke,ue.current,{renderEdgeLabels:!0,defaultNodeColor:"#999999",defaultEdgeColor:"#CCCCCC",labelSize:12,labelWeight:"600",labelColor:{color:"#111827"},edgeLabelSize:11,edgeLabelWeight:"600",edgeLabelColor:{color:"#374151"},enableEdgeEvents:!0}),W&&C.length>0&&Q.current.on("clickEdge",({edge:Re})=>{const pe=Ke.getEdgeAttributes(Re);pe.edgeData&&ae(pe.edgeData)})}catch(Re){console.error("Error initializing Sigma:",Re)}return()=>{Q.current&&(Q.current.kill(),Q.current=null)}},[x,t,W,C]);const ie=(()=>{if(!Q.current){if(W&&C.length>0){const Re=new Set;return C.forEach(pe=>{Re.add(pe.no_name),Re.add(pe.nbr)}),{nodes:Re.size,links:C.length}}return{nodes:de.nodes.length,links:de.edges.length}}const Ke=Q.current.getGraph();return{nodes:Ke.order,links:Ke.size}})(),_e=(()=>{if(!W||C.length===0)return[];const Ke=new Set;return C.forEach(Re=>{Re.layer&&Re.layer.trim()&&Ke.add(Re.layer)}),Array.from(Ke).sort()})(),Me=()=>{A(Ke=>(Ke+1)%wv.length)},me=()=>{A(Ke=>(Ke-1+wv.length)%wv.length)};return t?S.jsx("div",{ref:ne,style:{position:"fixed",zIndex:9999,cursor:"move",left:`${n.x}px`,top:`${n.y}px`},onMouseDown:he,children:S.jsxs("button",{onClick:Ke=>{Ke.stopPropagation(),r(!1)},style:{background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(12px)",borderRadius:"8px",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"8px 12px",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:Ke=>{Ke.currentTarget.style.background="rgba(255, 255, 255, 1)"},onMouseLeave:Ke=>{Ke.currentTarget.style.background="rgba(255, 255, 255, 0.9)"},children:[S.jsx(o6,{style:{width:"16px",height:"16px",color:"#9333ea"}}),S.jsx("span",{style:{fontSize:"12px",color:"#111827"},children:"Topology Test"}),S.jsx(ZS,{style:{width:"12px",height:"12px"}})]})}):S.jsx("div",{ref:ne,style:{position:"fixed",zIndex:9999,width:"900px",left:`${n.x}px`,top:`${n.y}px`},children:S.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(12px)",borderRadius:"16px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",border:"1px solid rgba(229, 231, 235, 0.5)"},children:[S.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(229, 231, 235, 0.5)",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"move",userSelect:"none"},onMouseDown:he,children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",pointerEvents:"none"},children:[S.jsx(KL,{style:{width:"16px",height:"16px",color:"#9ca3af"}}),S.jsx(o6,{style:{width:"16px",height:"16px",color:"#9333ea"}}),S.jsxs("div",{children:[S.jsxs("h3",{style:{fontSize:"14px",color:"#111827",margin:0},children:["Topology Test - ",W?"Real Data":de.name]}),S.jsx("p",{style:{fontSize:"12px",color:"#6b7280",margin:0},children:W?"Data from topology-test.json":de.description})]})]}),S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",pointerEvents:"auto"},children:[S.jsx("button",{onClick:Ke=>{Ke.stopPropagation(),r(!0)},style:{width:"32px",height:"32px",padding:0,background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:Ke=>{Ke.currentTarget.style.background="#f3f4f6"},onMouseLeave:Ke=>{Ke.currentTarget.style.background="transparent"},children:S.jsx(HS,{style:{width:"16px",height:"16px"}})}),S.jsx("button",{onClick:Ke=>{Ke.stopPropagation(),e()},style:{width:"32px",height:"32px",padding:0,background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:Ke=>{Ke.currentTarget.style.background="#f3f4f6"},onMouseLeave:Ke=>{Ke.currentTarget.style.background="transparent"},children:S.jsx(m_,{style:{width:"16px",height:"16px"}})})]})]}),S.jsxs("div",{style:{padding:"16px"},children:[S.jsxs("div",{style:{background:"linear-gradient(to bottom right, rgba(239, 246, 255, 0.5), rgba(250, 245, 255, 0.5))",borderRadius:"12px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"16px",height:"500px",position:"relative"},children:[S.jsx("div",{ref:ue,style:{width:"100%",height:"100%",borderRadius:"8px"}}),X&&S.jsxs("div",{style:{position:"absolute",top:"16px",right:"16px",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(12px)",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.15)",border:"1px solid rgba(229, 231, 235, 0.8)",padding:"16px",maxWidth:"320px",zIndex:10},children:[S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"12px"},children:[S.jsxs("div",{children:[S.jsx("h4",{style:{margin:0,fontSize:"13px",fontWeight:"600",color:"#111827"},children:"Link Details"}),S.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"11px",color:"#6b7280"},children:X.ruas})]}),S.jsx("button",{onClick:()=>ae(null),style:{background:"transparent",border:"none",cursor:"pointer",padding:"4px",borderRadius:"4px"},onMouseEnter:Ke=>{Ke.currentTarget.style.background="#f3f4f6"},onMouseLeave:Ke=>{Ke.currentTarget.style.background="transparent"},children:S.jsx(m_,{style:{width:"14px",height:"14px",color:"#6b7280"}})})]}),S.jsxs("div",{style:{display:"grid",gap:"8px",fontSize:"11px"},children:[S.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gap:"8px",alignItems:"center"},children:[S.jsx("span",{style:{color:"#6b7280",fontWeight:"500"},children:"Source:"}),S.jsx("span",{style:{color:"#111827",fontWeight:"600"},children:X.no_name})]}),S.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gap:"8px",alignItems:"center"},children:[S.jsx("span",{style:{color:"#6b7280",fontWeight:"500"},children:"Target:"}),S.jsx("span",{style:{color:"#111827",fontWeight:"600"},children:X.nbr})]}),S.jsx("div",{style:{height:"1px",background:"#e5e7eb",margin:"4px 0"}}),S.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gap:"8px",alignItems:"center"},children:[S.jsx("span",{style:{color:"#6b7280",fontWeight:"500"},children:"Layer:"}),S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[S.jsx("div",{style:{width:"16px",height:"3px",background:bv(X.layer),borderRadius:"2px"}}),S.jsx("span",{style:{color:"#111827"},children:X.layer||"No Layer"})]})]}),S.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gap:"8px",alignItems:"center"},children:[S.jsx("span",{style:{color:"#6b7280",fontWeight:"500"},children:"Capacity:"}),S.jsxs("span",{style:{color:"#2563eb",fontWeight:"600"},children:[(X.cap/1e9).toFixed(0)," Gbps"]})]}),S.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gap:"8px",alignItems:"center"},children:[S.jsx("span",{style:{color:"#6b7280",fontWeight:"500"},children:"Physical Links:"}),S.jsx("span",{style:{color:"#111827"},children:X.jm_pshik})]}),S.jsx("div",{style:{height:"1px",background:"#e5e7eb",margin:"4px 0"}}),S.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gap:"8px",alignItems:"center"},children:[S.jsx("span",{style:{color:"#6b7280",fontWeight:"500"},children:"Traffic In (95%):"}),S.jsx("span",{style:{color:"#10b981"},children:X.trf95_in?(X.trf95_in/1e9).toFixed(2)+" Gbps":"N/A"})]}),S.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gap:"8px",alignItems:"center"},children:[S.jsx("span",{style:{color:"#6b7280",fontWeight:"500"},children:"Traffic Out (95%):"}),S.jsx("span",{style:{color:"#f59e0b"},children:X.trf95_ot?(X.trf95_ot/1e9).toFixed(2)+" Gbps":"N/A"})]}),S.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gap:"8px",alignItems:"center"},children:[S.jsx("span",{style:{color:"#6b7280",fontWeight:"500"},children:"Max Traffic In:"}),S.jsx("span",{style:{color:"#6b7280"},children:X.trfmax_in?(X.trfmax_in/1e9).toFixed(2)+" Gbps":"N/A"})]}),S.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gap:"8px",alignItems:"center"},children:[S.jsx("span",{style:{color:"#6b7280",fontWeight:"500"},children:"Max Traffic Out:"}),S.jsx("span",{style:{color:"#6b7280"},children:X.trfmax_ot?(X.trfmax_ot/1e9).toFixed(2)+" Gbps":"N/A"})]}),X.utz!==null&&S.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gap:"8px",alignItems:"center"},children:[S.jsx("span",{style:{color:"#6b7280",fontWeight:"500"},children:"Utilization:"}),S.jsxs("span",{style:{color:"#ef4444",fontWeight:"600"},children:[(X.utz*100).toFixed(1),"%"]})]})]})]})]}),S.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"12px",justifyContent:"center",alignItems:"center"},children:[S.jsx("button",{onClick:()=>G(!1),style:{padding:"8px 16px",background:W?"rgba(255, 255, 255, 0.8)":"rgba(147, 51, 234, 0.2)",border:W?"1px solid rgba(229, 231, 235, 0.5)":"1px solid rgba(147, 51, 234, 0.5)",borderRadius:"8px",cursor:"pointer",fontSize:"12px",color:W?"#374151":"#9333ea",fontWeight:W?"400":"600"},children:"Dummy Data"}),S.jsxs("button",{onClick:()=>G(!0),disabled:O||C.length===0,style:{padding:"8px 16px",background:W?"rgba(147, 51, 234, 0.2)":"rgba(255, 255, 255, 0.8)",border:W?"1px solid rgba(147, 51, 234, 0.5)":"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"8px",cursor:O||C.length===0?"not-allowed":"pointer",fontSize:"12px",color:W?"#9333ea":"#374151",fontWeight:W?"600":"400",opacity:O||C.length===0?.5:1},children:["Real Data ",O?"(Loading...)":C.length===0?"(No Data)":""]})]}),!W&&S.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"12px",justifyContent:"center"},children:[S.jsxs("button",{onClick:me,style:{padding:"8px 16px",background:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",color:"#374151"},children:[S.jsx(HS,{style:{width:"14px",height:"14px"}}),"Previous"]}),S.jsxs("div",{style:{padding:"8px 16px",background:"rgba(147, 51, 234, 0.1)",border:"1px solid rgba(147, 51, 234, 0.3)",borderRadius:"8px",fontSize:"12px",color:"#9333ea",fontWeight:"600"},children:[x+1," / ",wv.length]}),S.jsxs("button",{onClick:Me,style:{padding:"8px 16px",background:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",color:"#374151"},children:["Next",S.jsx(ZS,{style:{width:"14px",height:"14px"}})]})]}),W&&_e.length>0&&S.jsxs("div",{style:{marginTop:"12px",padding:"14px",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(249, 250, 251, 0.9))",backdropFilter:"blur(8px)",borderRadius:"10px",border:"1px solid rgba(229, 231, 235, 0.6)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)"},children:[S.jsx("div",{style:{fontSize:"12px",fontWeight:"700",color:"#374151",marginBottom:"10px",letterSpacing:"0.5px"},children:" LAYER LEGEND"}),S.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},children:_e.map(Ke=>S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"6px 8px",background:"rgba(255, 255, 255, 0.6)",borderRadius:"6px",border:"1px solid rgba(229, 231, 235, 0.4)"},children:[S.jsx("div",{style:{width:"24px",height:"4px",background:bv(Ke),borderRadius:"2px",boxShadow:`0 0 8px ${bv(Ke)}40`}}),S.jsx("span",{style:{fontSize:"10px",color:"#1f2937",fontWeight:"500",flex:1},children:Ke||"No Layer"})]},Ke))}),S.jsx("div",{style:{marginTop:"10px",padding:"8px",background:"rgba(59, 130, 246, 0.08)",borderRadius:"6px",fontSize:"10px",color:"#6b7280",textAlign:"center",fontStyle:"italic"},children:" Click on any edge to view detailed information"})]}),S.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px",marginTop:"12px"},children:[S.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",borderRadius:"8px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"8px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginBottom:"4px"},children:[S.jsx(Pv,{style:{width:"12px",height:"12px",color:"#2563eb"}}),S.jsx("span",{style:{fontSize:"10px",color:"#6b7280"},children:"NODES"})]}),S.jsx("div",{style:{fontSize:"14px",color:"#111827"},children:ie.nodes})]}),S.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",borderRadius:"8px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"8px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginBottom:"4px"},children:[S.jsx(f0,{style:{width:"12px",height:"12px",color:"#9333ea"}}),S.jsx("span",{style:{fontSize:"10px",color:"#6b7280"},children:"LINKS"})]}),S.jsx("div",{style:{fontSize:"14px",color:"#111827"},children:ie.links})]}),S.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",borderRadius:"8px",border:"1px solid rgba(229, 231, 235, 0.5)",padding:"8px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginBottom:"4px"},children:[S.jsx(Yv,{style:{width:"12px",height:"12px",color:"#059669"}}),S.jsx("span",{style:{fontSize:"10px",color:"#6b7280"},children:"TYPE"})]}),S.jsx("div",{style:{fontSize:"14px",color:"#059669"},children:W?"Real Data":"Test Data"})]})]})]})]})})}const y_={},xie=e=>{const t={};return e.features&&e.features.forEach(r=>{const n=r.properties,o=n.CC_2||n.GID_2;t[o]||(t[o]={id:o,name:n.NAME_2,provinsi:n.NAME_1,type:n.TYPE_2==="Kota"?"Kota":"Kabupaten",coordinates:{type:r.geometry.type,coordinates:r.geometry.coordinates},statistics:{population:Math.floor(Math.random()*1e6)+1e5,areaSize:`${Math.floor(Math.random()*1e3)+100} km`,btsCount:Math.floor(Math.random()*100)+10,coverage:`${(Math.random()*20+80).toFixed(1)}%`},performance:{avgThroughput:`${Math.floor(Math.random()*300+400)} Mbps`,availability:`${(Math.random()*5+95).toFixed(1)}%`,avgLatency:`${Math.floor(Math.random()*20+20)}ms`},traffic:{data:`${Math.floor(Math.random()*500+100)} GB`,voice:`${Math.floor(Math.random()*3e5+1e5)}`,sms:`${Math.floor(Math.random()*2e5+5e4)}`}})}),t},_ie=async()=>{try{const e=await fetch("/data/kota-kabupaten.json");if(!e.ok)throw new Error("Failed to load kabupaten data");const t=await e.json();return Object.assign(y_,xie(t)),console.log(`Loaded ${Object.keys(y_).length} kabupaten/kota`),!0}catch(e){return console.error("Error loading kabupaten data:",e),!1}},bie=e=>new Promise((t,r)=>{Ww.parse(e,{header:!0,skipEmptyLines:!0,dynamicTyping:!0,complete:n=>{const o=n.data.map(l=>{const h=l.file2_longitude||l.longitude,u=l.file2_latitude||l.latitude;return!h||!u||isNaN(h)||isNaN(u)?null:{node:l.node||l.hostname||"Unknown",sto_a:l.file2_sto_a||l.sto_a||"",types:l.file2_types||l.types||"",platform:l.file2_platform||l.platform||"",sto:l.file2_sto||l.sto||"",sto_l:l.file2_sto_l||l.sto_l||"",witel:l.file2_witel||l.witel||"",reg:l.file2_reg||l.reg||"",cluster:l.file2_cluster||l.cluster||"",longitude:parseFloat(h),latitude:parseFloat(u)}}).filter(l=>l!==null);t(o)},error:n=>{r(n)}})}),wie=async e=>({nodes:await bie(e),edges:[],bandwidthAggregation:new Map}),Ni={jabar:"#FF6B6B",jateng:"#4ECDC4",jatim:"#45B7D1",dki:"#FFA07A",banten:"#98D8C8",yogya:"#F7DC6F",aceh:"#E74C3C",sumut:"#BB8FCE",sumbar:"#85C1E2",riau:"#F8B739",jambi:"#52BE80",sumsel:"#EC7063",bengkulu:"#AF7AC5",lampung:"#5DADE2",babel:"#48C9B0",kepri:"#F4D03F",kalbar:"#EB984E",kalteng:"#DC7633",kalsel:"#CA6F1E",kaltim:"#BA4A00",kaltara:"#A04000",sulut:"#7D3C98",sulteng:"#6C3483",sulsel:"#5B2C6F",sultra:"#4A235A",gorontalo:"#76448A",sulbar:"#633974",bali:"#1ABC9C",ntb:"#16A085",ntt:"#138D75",maluku:"#117A65",malut:"#0E6655",papua:"#0B5345",papbar:"#186A3B"},Sie={jabar:{id:"jabar",name:"Jawa Barat",color:Ni.jabar,coordinates:[[[108.56916,-6.70834],[108.602501,-6.763056],[108.67437,-6.758971],[108.709129,-6.809689],[108.769806,-6.808595],[108.805817,-6.784571],[108.801231,-6.744212],[108.830612,-6.744647],[108.825981,-6.826869],[108.754517,-6.914639],[108.761108,-6.983061],[108.798851,-7.005829],[108.777687,-7.10483],[108.696846,-7.15117],[108.625366,-7.13698],[108.567177,-7.16577],[108.584663,-7.229239],[108.555428,-7.2864],[108.560173,-7.335101],[108.6614,-7.343176],[108.682167,-7.36908],[108.753296,-7.56022],[108.733803,-7.61757],[108.800354,-7.673753],[108.776482,-7.700318],[108.67363,-7.682003],[108.670181,-7.731625],[108.640854,-7.687573],[108.517296,-7.69865],[108.48922,-7.717109],[108.498558,-7.793009],[108.445457,-7.820151],[108.300041,-7.814594],[107.940552,-7.731939],[107.846878,-7.737311],[107.812683,-7.68903],[107.682068,-7.661919],[107.601654,-7.571306],[107.399536,-7.493769],[106.796669,-7.436666],[106.790276,-7.410278],[106.788452,-7.43691],[106.560226,-7.416988],[106.443886,-7.36083],[106.405556,-7.382778],[106.373138,-7.308633],[106.400558,-7.186389],[106.4627,-7.181409],[106.456551,-7.12988],[106.551666,-7.024721],[106.511948,-6.965001],[106.390396,-6.96854],[106.391403,-6.90002],[106.434303,-6.820608],[106.511497,-6.765959],[106.429398,-6.69578],[106.403702,-6.455621],[106.458298,-6.421798],[106.428001,-6.348768],[106.472282,-6.31181],[106.502007,-6.356301],[106.531693,-6.35331],[106.519547,-6.32599],[106.595253,-6.363669],[106.761696,-6.36268],[106.775948,-6.316749],[106.805023,-6.31454],[106.794601,-6.361689],[106.846298,-6.34686],[106.909447,-6.375459],[106.907608,-6.267298],[106.945259,-6.255381],[106.970306,-6.19889],[106.972839,-6.09111],[107.01722,-6.078333],[106.986115,-6.046944],[107.015556,-6.033612],[106.993057,-6.028611],[106.987778,-6.00778],[107.016113,-5.973889],[106.989723,-5.942777],[107.007774,-5.918055],[107.09639,-5.93583],[107.164719,-5.98778],[107.339996,-5.968889],[107.466347,-6.14317],[107.623055,-6.189167],[107.666542,-6.244673],[107.820557,-6.18333],[107.855621,-6.211535],[107.8909,-6.18976],[107.890266,-6.237501],[108.128067,-6.33466],[108.20977,-6.273844],[108.183754,-6.227846],[108.336662,-6.27466],[108.349319,-6.239657],[108.384048,-6.355161],[108.538109,-6.483586],[108.56916,-6.70834]]],statistics:{population:48e6,areaSize:"35,377.76 km",btsCount:1250,coverage:"98.5%"}},jateng:{id:"jateng",name:"Jawa Tengah",color:Ni.jateng,coordinates:[[[111.692879,-6.754612],[111.655281,-6.826329],[111.619156,-6.826409],[111.609039,-6.903619],[111.566597,-6.94502],[111.621803,-6.98183],[111.604263,-7.140271],[111.541611,-7.22794],[111.448273,-7.25188],[111.420197,-7.30742],[111.45295,-7.32056],[111.459091,-7.37659],[111.20414,-7.24505],[111.148041,-7.261489],[111.116676,-7.418],[111.154701,-7.571369],[111.193329,-7.608829],[111.179886,-7.70701],[111.230743,-7.74767],[111.284523,-7.745249],[111.314003,-7.850789],[111.248383,-7.944731],[111.183167,-7.916109],[111.14222,-7.93493],[111.111771,-8.06415],[111.077927,-8.04819],[111.026451,-8.083409],[110.956131,-8.063708],[110.911171,-8.121149],[110.900276,-8.212499],[110.837074,-8.206528],[110.828529,-8.137669],[110.786987,-8.151238],[110.755783,-8.019719],[110.786407,-7.819219],[110.67289,-7.787689],[110.577057,-7.805489],[110.494019,-7.767861],[110.447891,-7.543099],[110.281677,-7.697289],[110.262253,-7.646868],[110.128471,-7.656851],[110.13121,-7.745999],[110.06321,-7.81391],[110.042946,-7.892039],[110.008614,-7.890277],[109.643608,-7.780899],[109.470383,-7.758562],[109.41111,-7.779443],[109.386391,-7.754999],[109.388222,-7.71049],[109.179779,-7.692531],[109.174065,-7.670598],[109.167961,-7.691113],[109.050835,-7.700277],[109.016891,-7.75264],[108.99176,-7.699186],[109.027199,-7.654788],[109.009018,-7.661509],[109.010559,-7.67972],[108.993011,-7.665037],[108.985954,-7.729906],[108.953247,-7.66612],[108.963715,-7.713827],[108.938461,-7.7197],[108.871109,-7.691778],[108.859291,-7.659353],[108.81028,-7.670464],[108.82177,-7.62087],[108.788109,-7.668969],[108.733803,-7.61757],[108.753296,-7.56022],[108.682167,-7.36908],[108.6614,-7.343176],[108.557861,-7.330791],[108.584778,-7.227799],[108.567177,-7.16577],[108.625366,-7.13698],[108.696846,-7.15117],[108.777687,-7.10483],[108.798851,-7.005829],[108.761108,-6.983061],[108.754517,-6.914639],[108.825981,-6.826869],[108.832779,-6.74222],[108.852592,-6.795217],[108.94838,-6.828549],[109.068611,-6.757219],[109.101387,-6.83917],[109.275002,-6.873329],[109.43148,-6.844464],[109.520752,-6.777239],[109.573631,-6.83648],[109.882095,-6.916781],[110.000832,-6.92139],[110.172775,-6.843056],[110.315002,-6.940001],[110.446953,-6.956671],[110.487503,-6.945833],[110.520264,-6.834295],[110.576942,-6.772222],[110.543053,-6.764168],[110.54528,-6.725001],[110.619446,-6.70667],[110.661507,-6.57412],[110.64389,-6.555556],[110.681946,-6.525834],[110.663612,-6.502222],[110.728615,-6.433055],[110.980278,-6.402777],[111.047501,-6.427779],[111.063332,-6.52],[111.149437,-6.65639],[111.356941,-6.704445],[111.460419,-6.664791],[111.492432,-6.62007],[111.56237,-6.639479],[111.692879,-6.754612]]],statistics:{population:36e6,areaSize:"32,800.69 km",btsCount:980,coverage:"97.8%"}},jatim:{id:"jatim",name:"Jawa Timur",color:Ni.jatim,coordinates:[[[113.592079,-7.714859],[113.666946,-7.736666],[113.71167,-7.708056],[113.760834,-7.738056],[113.84111,-7.684166],[113.931107,-7.70028],[114.042778,-7.606388],[114.108032,-7.706919],[114.240898,-7.698089],[114.294998,-7.747779],[114.375832,-7.750555],[114.451942,-7.80194],[114.465385,-7.887235],[114.421944,-7.920556],[114.431259,-8.059984],[114.340279,-8.422531],[114.367226,-8.482499],[114.352219,-8.527501],[114.378349,-8.527027],[114.387184,-8.446678],[114.423073,-8.604269],[114.448692,-8.638862],[114.481377,-8.617821],[114.570427,-8.66032],[114.605492,-8.715309],[114.587502,-8.763888],[114.531952,-8.780528],[114.345123,-8.742929],[114.371567,-8.673268],[114.317093,-8.623077],[114.229721,-8.60194],[114.285072,-8.603959],[114.254173,-8.585829],[114.223412,-8.597115],[114.221123,-8.644735],[114.091667,-8.615277],[114.050003,-8.647087],[114.015091,-8.589911],[113.956223,-8.615029],[113.96003,-8.56337],[113.902222,-8.577498],[113.836113,-8.554721],[113.82972,-8.527499],[113.811012,-8.56172],[113.796417,-8.48946],[113.712502,-8.529167],[113.717636,-8.48497],[113.646263,-8.49529],[113.639488,-8.454617],[113.485458,-8.415411],[113.480408,-8.377279],[113.389175,-8.400594],[113.309723,-8.299236],[113.236397,-8.283989],[113.078339,-8.287089],[112.980835,-8.324722],[112.912781,-8.399445],[112.898331,-8.38083],[112.898613,-8.402224],[112.847221,-8.408888],[112.831947,-8.368889],[112.810555,-8.403056],[112.771042,-8.386748],[112.754723,-8.425555],[112.709167,-8.417779],[112.653389,-8.447706],[112.556946,-8.399999],[112.372154,-8.375492],[112.331665,-8.331666],[112.262497,-8.350556],[112.143646,-8.31587],[112.034164,-8.320277],[111.950554,-8.277778],[111.9375,-8.306666],[111.899445,-8.304444],[111.791023,-8.252959],[111.770279,-8.26778],[111.782028,-8.325699],[111.748337,-8.344721],[111.74662,-8.306268],[111.712906,-8.291244],[111.724068,-8.318169],[111.689163,-8.335814],[111.726944,-8.371111],[111.678741,-8.385019],[111.616821,-8.320239],[111.606941,-8.339999],[111.568054,-8.338611],[111.553886,-8.30583],[111.533607,-8.33361],[111.479027,-8.304588],[111.455276,-8.320834],[111.454979,-8.274499],[111.424797,-8.257259],[111.415001,-8.278334],[111.291389,-8.274168],[111.257225,-8.248056],[111.153221,-8.284841],[111.093613,-8.22083],[111.064163,-8.251944],[110.992226,-8.25361],[110.901146,-8.192949],[110.911171,-8.121149],[110.956131,-8.063708],[111.026451,-8.083409],[111.077927,-8.04819],[111.111771,-8.06415],[111.14222,-7.93493],[111.183167,-7.916109],[111.248383,-7.944731],[111.314003,-7.850789],[111.284523,-7.745249],[111.230743,-7.74767],[111.179886,-7.70701],[111.193329,-7.608829],[111.154701,-7.571369],[111.116676,-7.418],[111.148041,-7.261489],[111.20414,-7.24505],[111.459091,-7.37659],[111.45295,-7.32056],[111.420197,-7.30742],[111.448273,-7.25188],[111.541611,-7.22794],[111.604263,-7.140271],[111.621803,-6.98183],[111.566597,-6.94502],[111.609039,-6.903619],[111.619156,-6.826409],[111.655281,-6.826329],[111.692879,-6.754612],[111.839722,-6.80111],[111.964157,-6.762219],[112.046669,-6.881475],[112.1222,-6.901907],[112.328835,-6.86293],[112.430878,-6.906389],[112.524437,-6.893889],[112.598053,-6.93361],[112.673889,-6.92],[112.738892,-6.96389],[112.806946,-6.96389],[112.873611,-7.01389],[112.940277,-7.01389],[113.006943,-7.06389],[113.073608,-7.06389],[113.140274,-7.11389],[113.20694,-7.11389],[113.273605,-7.16389],[113.340271,-7.16389],[113.406937,-7.21389],[113.473602,-7.21389],[113.540268,-7.26389],[113.606934,-7.26389],[113.592079,-7.714859]]],statistics:{population:4e7,areaSize:"47,799.75 km",btsCount:1150,coverage:"98.2%"}},dki:{id:"dki",name:"DKI Jakarta",color:Ni.dki,coordinates:[[[106.6,-6.35],[106.95,-6.35],[106.95,-5.95],[106.6,-5.95],[106.6,-6.35]]],statistics:{population:105e5,areaSize:"664.01 km",btsCount:850,coverage:"99.5%"}},banten:{id:"banten",name:"Banten",color:Ni.banten,coordinates:[[[105.2,-7],[106.8,-7],[106.8,-5.8],[105.2,-5.8],[105.2,-7]]],statistics:{population:13e6,areaSize:"9,662.92 km",btsCount:720,coverage:"98.0%"}},yogya:{id:"yogya",name:"DI Yogyakarta",color:Ni.yogya,coordinates:[[[110.1,-8.2],[110.7,-8.2],[110.7,-7.7],[110.1,-7.7],[110.1,-8.2]]],statistics:{population:39e5,areaSize:"3,133.15 km",btsCount:420,coverage:"99.0%"}},aceh:{id:"aceh",name:"Aceh",color:Ni.aceh,coordinates:[[[95,6],[98,6],[98,2],[95,2],[95,6]]],statistics:{population:53e5,areaSize:"57,956.00 km",btsCount:580,coverage:"92.5%"}},sumut:{id:"sumut",name:"Sumatera Utara",color:Ni.sumut,coordinates:[[[98,4.5],[100.5,4.5],[100.5,1],[98,1],[98,4.5]]],statistics:{population:148e5,areaSize:"72,981.23 km",btsCount:920,coverage:"95.0%"}},sumbar:{id:"sumbar",name:"Sumatera Barat",color:Ni.sumbar,coordinates:[[[98.5,.5],[101.5,.5],[101.5,-2.5],[98.5,-2.5],[98.5,.5]]],statistics:{population:55e5,areaSize:"42,012.89 km",btsCount:650,coverage:"94.0%"}},riau:{id:"riau",name:"Riau",color:Ni.riau,coordinates:[[[100,2.5],[103.5,2.5],[103.5,-1.5],[100,-1.5],[100,2.5]]],statistics:{population:68e5,areaSize:"87,023.66 km",btsCount:710,coverage:"93.0%"}},jambi:{id:"jambi",name:"Jambi",color:Ni.jambi,coordinates:[[[101,0],[104.5,0],[104.5,-2.5],[101,-2.5],[101,0]]],statistics:{population:36e5,areaSize:"50,058.16 km",btsCount:480,coverage:"91.0%"}},sumsel:{id:"sumsel",name:"Sumatera Selatan",color:Ni.sumsel,coordinates:[[[102,-1.5],[106,-1.5],[106,-4.5],[102,-4.5],[102,-1.5]]],statistics:{population:85e5,areaSize:"91,592.43 km",btsCount:780,coverage:"93.5%"}},bengkulu:{id:"bengkulu",name:"Bengkulu",color:Ni.bengkulu,coordinates:[[[101,-2],[103.5,-2],[103.5,-5.5],[101,-5.5],[101,-2]]],statistics:{population:2e6,areaSize:"19,919.33 km",btsCount:320,coverage:"89.0%"}},lampung:{id:"lampung",name:"Lampung",color:Ni.lampung,coordinates:[[[103.5,-3.5],[106,-3.5],[106,-6],[103.5,-6],[103.5,-3.5]]],statistics:{population:9e6,areaSize:"34,623.80 km",btsCount:690,coverage:"94.5%"}},babel:{id:"babel",name:"Bangka Belitung",color:Ni.babel,coordinates:[[[105,-1],[108.5,-1],[108.5,-3.5],[105,-3.5],[105,-1]]],statistics:{population:15e5,areaSize:"16,424.14 km",btsCount:280,coverage:"90.0%"}},kepri:{id:"kepri",name:"Kepulauan Riau",color:Ni.kepri,coordinates:[[[103.5,2],[108.5,2],[108.5,-1],[103.5,-1],[103.5,2]]],statistics:{population:22e5,areaSize:"8,201.72 km",btsCount:380,coverage:"95.5%"}},kalbar:{id:"kalbar",name:"Kalimantan Barat",color:Ni.kalbar,coordinates:[[[108.5,2.5],[112.5,2.5],[112.5,-3.5],[108.5,-3.5],[108.5,2.5]]],statistics:{population:52e5,areaSize:"147,307.00 km",btsCount:520,coverage:"88.0%"}},kalteng:{id:"kalteng",name:"Kalimantan Tengah",color:Ni.kalteng,coordinates:[[[111,.5],[115.5,.5],[115.5,-4],[111,-4],[111,.5]]],statistics:{population:27e5,areaSize:"153,564.50 km",btsCount:380,coverage:"85.0%"}},kalsel:{id:"kalsel",name:"Kalimantan Selatan",color:Ni.kalsel,coordinates:[[[114.5,-1.5],[116.5,-1.5],[116.5,-4.5],[114.5,-4.5],[114.5,-1.5]]],statistics:{population:43e5,areaSize:"38,744.23 km",btsCount:560,coverage:"92.0%"}},kaltim:{id:"kaltim",name:"Kalimantan Timur",color:Ni.kaltim,coordinates:[[[115,3],[119.5,3],[119.5,-2.5],[115,-2.5],[115,3]]],statistics:{population:38e5,areaSize:"129,066.64 km",btsCount:490,coverage:"90.0%"}},kaltara:{id:"kaltara",name:"Kalimantan Utara",color:Ni.kaltara,coordinates:[[[115.5,4.5],[119,4.5],[119,2],[115.5,2],[115.5,4.5]]],statistics:{population:75e4,areaSize:"75,467.70 km",btsCount:180,coverage:"82.0%"}},sulut:{id:"sulut",name:"Sulawesi Utara",color:Ni.sulut,coordinates:[[[123.5,2],[127,2],[127,0],[123.5,0],[123.5,2]]],statistics:{population:26e5,areaSize:"13,851.64 km",btsCount:420,coverage:"94.0%"}},sulteng:{id:"sulteng",name:"Sulawesi Tengah",color:Ni.sulteng,coordinates:[[[119.5,1.5],[124,1.5],[124,-4],[119.5,-4],[119.5,1.5]]],statistics:{population:3e6,areaSize:"61,841.29 km",btsCount:380,coverage:"87.0%"}},sulsel:{id:"sulsel",name:"Sulawesi Selatan",color:Ni.sulsel,coordinates:[[[118.5,-2.5],[121.5,-2.5],[121.5,-6.5],[118.5,-6.5],[118.5,-2.5]]],statistics:{population:91e5,areaSize:"46,717.48 km",btsCount:780,coverage:"95.0%"}},sultra:{id:"sultra",name:"Sulawesi Tenggara",color:Ni.sultra,coordinates:[[[121,-2.5],[124.5,-2.5],[124.5,-6],[121,-6],[121,-2.5]]],statistics:{population:27e5,areaSize:"38,067.70 km",btsCount:360,coverage:"88.0%"}},gorontalo:{id:"gorontalo",name:"Gorontalo",color:Ni.gorontalo,coordinates:[[[121.5,1],[123.5,1],[123.5,0],[121.5,0],[121.5,1]]],statistics:{population:12e5,areaSize:"11,257.07 km",btsCount:220,coverage:"89.0%"}},sulbar:{id:"sulbar",name:"Sulawesi Barat",color:Ni.sulbar,coordinates:[[[118.5,-1.5],[120,-1.5],[120,-3.5],[118.5,-3.5],[118.5,-1.5]]],statistics:{population:14e5,areaSize:"16,787.18 km",btsCount:240,coverage:"85.0%"}},bali:{id:"bali",name:"Bali",color:Ni.bali,coordinates:[[[114.5,-8],[115.8,-8],[115.8,-8.9],[114.5,-8.9],[114.5,-8]]],statistics:{population:44e5,areaSize:"5,780.06 km",btsCount:620,coverage:"99.0%"}},ntb:{id:"ntb",name:"Nusa Tenggara Barat",color:Ni.ntb,coordinates:[[[115.5,-8],[119.5,-8],[119.5,-9.5],[115.5,-9.5],[115.5,-8]]],statistics:{population:53e5,areaSize:"18,572.32 km",btsCount:480,coverage:"91.0%"}},ntt:{id:"ntt",name:"Nusa Tenggara Timur",color:Ni.ntt,coordinates:[[[118.5,-8],[125.5,-8],[125.5,-11],[118.5,-11],[118.5,-8]]],statistics:{population:55e5,areaSize:"48,718.10 km",btsCount:420,coverage:"83.0%"}},maluku:{id:"maluku",name:"Maluku",color:Ni.maluku,coordinates:[[[125,-2],[132,-2],[132,-9],[125,-9],[125,-2]]],statistics:{population:18e5,areaSize:"46,914.03 km",btsCount:280,coverage:"80.0%"}},malut:{id:"malut",name:"Maluku Utara",color:Ni.malut,coordinates:[[[124,2.5],[129.5,2.5],[129.5,-1.5],[124,-1.5],[124,2.5]]],statistics:{population:13e5,areaSize:"31,982.50 km",btsCount:220,coverage:"78.0%"}},papua:{id:"papua",name:"Papua",color:Ni.papua,coordinates:[[[135,0],[141,0],[141,-9],[135,-9],[135,0]]],statistics:{population:34e5,areaSize:"319,036.05 km",btsCount:320,coverage:"65.0%"}},papbar:{id:"papbar",name:"Papua Barat",color:Ni.papbar,coordinates:[[[130,1.5],[135,1.5],[135,-4.5],[130,-4.5],[130,1.5]]],statistics:{population:11e5,areaSize:"102,955.15 km",btsCount:180,coverage:"62.0%"}}},Eie=()=>({type:"FeatureCollection",features:Object.values(Sie).map(t=>{var r,n,o,l;return{type:"Feature",properties:{id:t.id,name:t.name,color:t.color,population:((r=t.statistics)==null?void 0:r.population)||0,areaSize:((n=t.statistics)==null?void 0:n.areaSize)||"",btsCount:((o=t.statistics)==null?void 0:o.btsCount)||0,coverage:((l=t.statistics)==null?void 0:l.coverage)||""},geometry:{type:"Polygon",coordinates:t.coordinates}}})}),Aie=()=>{const e=N.useRef(null),t=N.useRef(null),r=N.useRef(null),n=N.useRef(null),o=N.useRef(null),[l,h]=N.useState(!1),[u,v]=N.useState([]),[x,A]=N.useState(!1),[C,P]=N.useState(!1),[O,U]=N.useState(!1),[W,G]=N.useState(!1),[X,ae]=N.useState([]),[ne,ue]=N.useState(!1),[Q,de]=N.useState(null),[he,Y]=N.useState(!1),[ie,Ce]=N.useState([]),[_e,Me]=N.useState("ruasrekap"),[me,Ke]=N.useState(!1),[Re,pe]=N.useState(null),[ge,ze]=N.useState(!1),[Pe,st]=N.useState(null),[Ae,qe]=N.useState(!1),[Ze,zt]=N.useState(!1),[Tt,rr]=N.useState(null),[Xt,tr]=N.useState([]),[at,Ht]=N.useState(!1),[Mt,pt]=N.useState(null),[Pr,Lt]=N.useState([]),[Wt,ke]=N.useState(!0),[Xr,rn]=N.useState(!0),[vr,Wr]=N.useState(null),[Hn,fi]=N.useState(null),[ba,Rn]=N.useState(null),[ai,pi]=N.useState(!0),[oi,Rt]=N.useState(!1),[Fi,Fn]=N.useState(null),[Pi,ca]=N.useState(!1),[nr,kr]=N.useState(null),[jr,Jn]=N.useState("national"),[Xa,nn]=N.useState("topology"),[Go,Uo]=N.useState(),[Io,wo]=N.useState(),[Ne,se]=N.useState([{level:"national",name:"Indonesia"}]),[le,Ee]=N.useState(5),[Ie,Ye]=N.useState(!1),[tt,ut]=N.useState(""),[Ue,At]=N.useState("info"),[Vt,_t]=N.useState(""),[lr,Lr]=N.useState([]),[$r,wn]=N.useState([]),[Ir,cn]=N.useState([]),[_n,ea]=N.useState(!1);N.useEffect(()=>{(async()=>{try{const Ge=await fetch("/joined_data.csv");if(!Ge.ok)throw new Error("Failed to load default data");const ot=await Ge.text();await li(ot)}catch(Ge){console.error("Error loading default data:",Ge)}})()},[]),N.useEffect(()=>{(async()=>{const Ge=await _ie();U(Ge),Ge&&console.log("Kabupaten data loaded successfully")})()},[]),N.useEffect(()=>{(async()=>{try{const Ge=await fetch("/data/cap-1.csv");if(!Ge.ok)throw new Error("Failed to load capacity data");const ht=(await Ge.text()).split(`
`),$t=ht[0].split(",").map(wt=>wt.replace(/"/g,"").trim()),Gr=ht.slice(1).filter(wt=>wt.trim()).map(wt=>{const jt=wt.match(/(".*?"|[^,]+)(?=\s*,|\s*$)/g)||[],xt={};return $t.forEach((Nt,Yr)=>{jt[Yr]&&(xt[Nt]=jt[Yr].replace(/^"|"$/g,"").trim())}),xt}).filter(wt=>wt.longitude&&wt.latitude);ae(Gr)}catch(Ge){console.error("Error loading capacity data:",Ge)}})()},[]),N.useEffect(()=>{(async()=>{try{const Ge=await fetch("/data/airports.json");if(!Ge.ok)throw new Error("Failed to load airports data");const ot=await Ge.json();de(ot)}catch(Ge){console.error("Error loading airports data:",Ge)}})()},[]),N.useEffect(()=>{(async()=>{try{const Ge=await fetch("/data/list_sirkit_ref_202511101614.csv");if(!Ge.ok)throw new Error("Failed to load sirkit data");const ht=(await Ge.text()).split(`
`),$t=ht[0].split(",").map(wt=>wt.replace(/"/g,"").trim()),Gr=ht.slice(1).filter(wt=>wt.trim()).map(wt=>{const jt=wt.match(/(".*?"|[^,]+)(?=\s*,|\s*$)/g)||[],xt={};return $t.forEach((Nt,Yr)=>{jt[Yr]&&(xt[Nt]=jt[Yr].replace(/^"|"$/g,"").trim())}),xt}).filter(wt=>wt.longitude&&wt.latitude);Ce(Gr)}catch(Ge){console.error("Error loading sirkit data:",Ge)}})()},[]),N.useEffect(()=>{(async()=>{try{const Ge=await fetch("/data/multilayer_map.geojson");if(!Ge.ok)throw new Error("Failed to load multilayer map data");const ot=await Ge.json();pe(ot),console.log("Multilayer map data loaded:",ot)}catch(Ge){console.error("Error loading multilayer map data:",Ge)}})()},[]),N.useEffect(()=>{(async()=>{try{const Ge=await fetch("/sigma-topology.json");if(!Ge.ok)throw new Error("Failed to load node edges data");const ot=await Ge.json();st(ot)}catch(Ge){console.error("Error loading node edges data:",Ge)}})()},[]);const[gi,Sn]=N.useState("tera-tera");N.useEffect(()=>{(async()=>{try{const Ge={"tera-tera":"/ruas-rekap/trunk_all_tera_tera_layer.json","tera-metro":"/ruas-rekap/trunk_all_tera_metro_layer.json","tera-swc":"/ruas-rekap/trunk_all_tera_swc_layer.json","tera-pevoice":"/ruas-rekap/trunk_all_tera_pevoice_layer.json","tera-pemobile":"/ruas-rekap/trunk_all_tera_pemobile_layer.json","tera-pehsi":"/ruas-rekap/trunk_all_tera_pehsi_layer.json","tera-pehdc":"/ruas-rekap/trunk_all_tera_pehdc_layer.json","tera-cgw":"/ruas-rekap/trunk_all_tera_cgw_layer.json",trunk_all_metro_metro:"/ruas-rekap/trunk_all_metro_metro_layer.json",trunk_all_metro_spine:"/ruas-rekap/trunk_all_metro_spine_layer.json",trunk_all_metro_dcn:"/ruas-rekap/trunk_all_metro_dcn_layer.json",trunk_all_metro_bras:"/ruas-rekap/trunk_all_metro_bras_layer.json",trunk_all_metro_cdn:"/ruas-rekap/trunk_all_metro_cdn_layer.json",trunk_all_metro_cndc:"/ruas-rekap/trunk_all_metro_cndc_layer.json",trunk_all_metro_wac:"/ruas-rekap/trunk_all_metro_wac_layer.json",trunk_all_metro_wag:"/ruas-rekap/trunk_all_metro_wag_layer.json",trunk_all_metro_pedatin:"/ruas-rekap/trunk_all_metro_pedatin_layer.json",trunk_all_metro_pehsi:"/ruas-rekap/trunk_all_metro_pehsi_layer.json",trunk_all_metro_pevoice:"/ruas-rekap/trunk_all_metro_pevoice_layer.json",trunk_all_metro_rantsel:"/ruas-rekap/trunk_all_metro_rantsel_layer.json",trunk_all_metro_twamp:"/ruas-rekap/trunk_all_metro_twamp_layer.json",trunk_all_metro_starlink:"/ruas-rekap/trunk_all_metro_starlink_layer.json",trunk_all_pe_spine:"/ruas-rekap/trunk_all_pe_spine_layer.json",trunk_all_pe_teradatin:"/ruas-rekap/trunk_all_pe_teradatin_layer.json",trunk_all_pe_cdn:"/ruas-rekap/trunk_all_pe_cdn_layer.json",trunk_all_pe_wac:"/ruas-rekap/trunk_all_pe_wac_layer.json",trunk_all_pe_wag:"/ruas-rekap/trunk_all_pe_wag_layer.json",trunk_all_pemobile_pemobile:"/ruas-rekap/trunk_all_pemobile_pemobile_layer.json",trunk_all_pemobile_metro:"/ruas-rekap/trunk_all_pemobile_metro_layer.json",trunk_all_pemobile_rantsel:"/ruas-rekap/trunk_all_pemobile_rantsel_layer.json",trunk_all_pemobile_it_agg:"/ruas-rekap/trunk_all_pemobile_it_agg_layer.json",trunk_all_pemobile_cps:"/ruas-rekap/trunk_all_pemobile_cps_layer.json",trunk_all_pemobile_blf:"/ruas-rekap/trunk_all_pemobile_blf_layer.json",trunk_all_pemobile_twamp:"/ruas-rekap/trunk_all_pemobile_twamp_layer.json",trunk_all_pehsi_swc:"/ruas-rekap/trunk_all_pehsi_swc_layer.json",trunk_all_pehsi_ebr:"/ruas-rekap/trunk_all_pehsi_ebr_layer.json",trunk_all_pehsi_lb:"/ruas-rekap/trunk_all_pehsi_lb_layer.json",trunk_all_pehsi_sig:"/ruas-rekap/trunk_all_pehsi_sig_layer.json",trunk_all_petransit_ebr:"/ruas-rekap/trunk_all_petransit_ebr_layer.json",trunk_all_me_bngtsel:"/ruas-rekap/trunk_all_me_bngtsel_layer.json",trunk_all_bngtsel_pehsi:"/ruas-rekap/trunk_all_bngtsel_pehsi_layer.json",trunk_all_bras_pehsi:"/ruas-rekap/trunk_all_bras_pehsi_layer.json",trunk_all_allot_pehsi:"/ruas-rekap/trunk_all_allot_pehsi_layer.json",trunk_all_nodeb_metro:"/ruas-rekap/trunk_all_nodeb_metro_layer.json",trunk_all_olt_metro:"/ruas-rekap/trunk_all_olt_metro_layer.json"},ot=Ge[gi]||Ge["tera-tera"],ht=await fetch(ot);if(!ht.ok)throw new Error("Failed to load ruas rekap data");const $t=await ht.json();if(rr($t),ke(!0),$t!=null&&$t.nodes&&Array.isArray($t.nodes)){const Gr=$t.nodes.map(wt=>wt.id);tr(Gr)}}catch(Ge){console.error("Error loading ruas rekap data:",Ge)}})()},[gi]),N.useEffect(()=>{(async()=>{try{const Ge=await fetch("/ruas-rekap/trunk_all.json");if(!Ge.ok)throw new Error("Failed to load trunk_all.json for port data");const ot=await Ge.json(),ht=new Map;ot!=null&&ot.nodes&&Array.isArray(ot.nodes)&&ot.nodes.forEach($t=>{$t.id&&$t.details&&Array.isArray($t.details)&&ht.set($t.id,$t.details)}),ot!=null&&ot.edges&&Array.isArray(ot.edges)&&ot.edges.forEach($t=>{const Gr=`edge_${$t.id||$t.source+"_"+$t.target}`;$t.details&&Array.isArray($t.details)&&ht.set(Gr,$t.details)}),Wr(ht),console.log("Loaded trunk_all.json port data for",ht.size,"nodes/edges")}catch(Ge){console.error("Error loading trunk_all.json for port data:",Ge)}})()},[]),N.useEffect(()=>{(async()=>{try{const Ge=await fetch("/ruas_rekap_sto.json");if(!Ge.ok)throw new Error("Failed to load ruas rekap STO data");const ot=await Ge.json();if(pt(ot),rn(!0),ot!=null&&ot.nodes&&Array.isArray(ot.nodes)){const ht=ot.nodes.map($t=>$t.id);Lt(ht)}}catch(Ge){console.error("Error loading ruas rekap STO data:",Ge)}})()},[]),N.useEffect(()=>{x&&Tt&&Ze&&r.current&&(jo(),Wt&&ke(!1))},[x,Tt,Ze,Xt]),N.useEffect(()=>{x&&Mt&&at&&r.current&&(Ul(),Xr&&rn(!1))},[x,Mt,at,Pr]),N.useEffect(()=>{if(e.current)return setTimeout(()=>{e.current&&(r.current=new Ss.Map({container:e.current,style:"https://api.maptiler.com/maps/streets-v2/style.json?key=4Iyrc6TBGKphNJNy3iTH",center:[117.4,-.8],zoom:5}),r.current.addControl(new Ss.NavigationControl,"top-right"),r.current.addControl(new Ss.FullscreenControl,"top-right"),r.current.on("load",()=>{var Ge;A(!0);const vt=((Ge=r.current)==null?void 0:Ge.getZoom())||5;console.log("Map Loaded - Initial Zoom Level:",vt.toFixed(2)),window.getMapZoom=()=>{var ht;const ot=(ht=r.current)==null?void 0:ht.getZoom();return console.log("Current Map Zoom:",ot==null?void 0:ot.toFixed(2)),ot}}))},0),()=>{var vt;(vt=r.current)==null||vt.remove()}},[]);const si=vt=>{if(!(!r.current||!x))try{["clusters","cluster-count","unclustered-point"].forEach(ot=>{r.current.getLayer(ot)&&r.current.removeLayer(ot)}),r.current.getSource("nodes")&&r.current.removeSource("nodes")}catch{alert("Terjadi kesalahan saat memperbarui peta. Silakan coba lagi.")}},li=async vt=>{try{const Ge=await wie(vt);v(Ge.nodes)}catch{alert("Gagal memproses file CSV. Pastikan format file sudah benar dan memiliki kolom: node, latitude, longitude")}},Ca=()=>{if(r.current)try{const vt=Eie();r.current.addSource("provinces",{type:"geojson",data:vt}),r.current.on("click","provinces-fill",Ge=>{if(Ge.features&&Ge.features.length>0){const ht=Ge.features[0].properties,$t=Ge.lngLat;new Ss.Popup().setLngLat($t).setHTML(`
              <div style="font-size: 12px; padding: 8px;">
                <strong style="font-size: 14px;">${(ht==null?void 0:ht.name)||"Unknown"}</strong><br/>
                <hr style="margin: 8px 0; border: none; border-top: 1px solid #ddd;"/>
                <strong>Population:</strong> ${((ht==null?void 0:ht.population)||0).toLocaleString()}<br/>
                <strong>Area Size:</strong> ${(ht==null?void 0:ht.areaSize)||"-"}<br/>
                <strong>BTS Count:</strong> ${(ht==null?void 0:ht.btsCount)||0}<br/>
                <strong>Coverage:</strong> ${(ht==null?void 0:ht.coverage)||"-"}
              </div>
            `).addTo(r.current)}}),r.current.on("mouseenter","provinces-fill",Ge=>{var ot;Ge.features&&Ge.features.length>0&&(r.current.setFilter("provinces-hover",["==","id",(ot=Ge.features[0].properties)==null?void 0:ot.id]),r.current.getCanvas().style.cursor="pointer")}),r.current.on("mouseleave","provinces-fill",()=>{r.current.setFilter("provinces-hover",["==","id",""]),r.current.getCanvas().style.cursor=""}),r.current.flyTo({center:[118,-2],zoom:4.5,duration:2e3})}catch(vt){alert(`Error adding province layer: ${vt}`)}},Hi=()=>{const vt=["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F7DC6F","#BB8FCE","#85C1E2","#F8B739","#52BE80","#EC7063","#AF7AC5","#5DADE2","#48C9B0","#F4D03F","#EB984E","#DC7633","#CA6F1E","#BA4A00","#A04000","#7D3C98","#6C3483","#5B2C6F","#4A235A","#76448A","#633974","#1ABC9C","#16A085","#138D75","#117A65","#0E6655","#0B5345","#186A3B","#E74C3C","#C0392B","#8E44AD","#9B59B6","#2980B9","#3498DB","#1ABC9C","#16A085","#27AE60","#2ECC71","#F39C12","#E67E22","#D35400","#E74C3C","#C0392B","#ECF0F1","#BDC3C7"];return vt[Math.floor(Math.random()*vt.length)]},$i=()=>{if(r.current&&!(!O||Object.keys(y_).length===0))try{const vt=Object.values(y_).map(Ge=>({type:"Feature",properties:{id:Ge.id,name:Ge.name,provinsi:Ge.provinsi,type:Ge.type,population:Ge.statistics.population,areaSize:Ge.statistics.areaSize,btsCount:Ge.statistics.btsCount,coverage:Ge.statistics.coverage,color:Hi()},geometry:Ge.coordinates}));r.current.getLayer("kabupaten-fill")&&r.current.removeLayer("kabupaten-fill"),r.current.getLayer("kabupaten-outline")&&r.current.removeLayer("kabupaten-outline"),r.current.getLayer("kabupaten-hover")&&r.current.removeLayer("kabupaten-hover"),r.current.getSource("kabupaten")&&r.current.removeSource("kabupaten"),r.current.addSource("kabupaten",{type:"geojson",data:{type:"FeatureCollection",features:vt}}),r.current.addLayer({id:"kabupaten-fill",type:"fill",source:"kabupaten",paint:{"fill-color":["get","color"],"fill-opacity":.5}}),r.current.addLayer({id:"kabupaten-outline",type:"line",source:"kabupaten",paint:{"line-color":"#FFFFFF","line-width":1.5}}),r.current.addLayer({id:"kabupaten-hover",type:"fill",source:"kabupaten",paint:{"fill-color":["get","color"],"fill-opacity":.7},filter:["==","id",""]}),r.current.on("click","kabupaten-fill",Ge=>{if(Ge.features&&Ge.features.length>0){const ht=Ge.features[0].properties,$t=Ge.lngLat;new Ss.Popup().setLngLat($t).setHTML(`
              <div style="font-size: 12px; padding: 8px;">
                <strong style="font-size: 14px;">${(ht==null?void 0:ht.type)||""} ${(ht==null?void 0:ht.name)||"Unknown"}</strong><br/>
                <strong>Provinsi:</strong> ${(ht==null?void 0:ht.provinsi)||"-"}<br/>
                <hr style="margin: 8px 0; border: none; border-top: 1px solid #ddd;"/>
                <strong>Population:</strong> ${((ht==null?void 0:ht.population)||0).toLocaleString()}<br/>
                <strong>Area Size:</strong> ${(ht==null?void 0:ht.areaSize)||"-"}<br/>
                <strong>BTS Count:</strong> ${(ht==null?void 0:ht.btsCount)||0}<br/>
                <strong>Coverage:</strong> ${(ht==null?void 0:ht.coverage)||"-"}
              </div>
            `).addTo(r.current)}}),r.current.on("mouseenter","kabupaten-fill",Ge=>{var ot;Ge.features&&Ge.features.length>0&&(r.current.setFilter("kabupaten-hover",["==","id",(ot=Ge.features[0].properties)==null?void 0:ot.id]),r.current.getCanvas().style.cursor="pointer")}),r.current.on("mouseleave","kabupaten-fill",()=>{r.current.setFilter("kabupaten-hover",["==","id",""]),r.current.getCanvas().style.cursor=""})}catch(vt){alert(`Error adding kabupaten layer: ${vt}`)}},Hs=()=>{if(!r.current)return;const vt=!C;if(P(vt),vt&&!r.current.getLayer("kabupaten-fill"))$i();else{const Ge=vt?"visible":"none";r.current.getLayer("kabupaten-fill")&&r.current.setLayoutProperty("kabupaten-fill","visibility",Ge),r.current.getLayer("kabupaten-outline")&&r.current.setLayoutProperty("kabupaten-outline","visibility",Ge),r.current.getLayer("kabupaten-hover")&&r.current.setLayoutProperty("kabupaten-hover","visibility",Ge)}},Nn=vt=>{try{return{type:"Polygon",coordinates:[vt.replace(/^POLYGON\s*\(\(/i,"").replace(/\)\)$/,"").trim().split(",").map(ht=>{const[$t,Gr]=ht.trim().split(/\s+/);return[parseFloat($t),parseFloat(Gr)]})]}}catch{return null}},Ta=()=>{if(!(!r.current||X.length===0))try{r.current.getLayer("capacity-points")&&r.current.removeLayer("capacity-points"),r.current.getLayer("capacity-lines")&&r.current.removeLayer("capacity-lines"),r.current.getLayer("capacity-lines-glow")&&r.current.removeLayer("capacity-lines-glow"),r.current.getLayer("capacity-boundaries-fill")&&r.current.removeLayer("capacity-boundaries-fill"),r.current.getLayer("capacity-boundaries-outline")&&r.current.removeLayer("capacity-boundaries-outline"),r.current.getLayer("capacity-boundaries-hover")&&r.current.removeLayer("capacity-boundaries-hover"),r.current.getSource("capacity")&&r.current.removeSource("capacity"),r.current.getSource("capacity-lines")&&r.current.removeSource("capacity-lines"),r.current.getSource("capacity-boundaries")&&r.current.removeSource("capacity-boundaries");const vt=new Map;X.forEach(jt=>{const xt=jt.code_area||jt.sto;xt&&jt.boundary&&!vt.has(xt)&&vt.set(xt,jt)});const Ge=Array.from(vt.values()).map(jt=>{const xt=Nn(jt.boundary);return xt?{type:"Feature",properties:{id:jt.code_area||jt.sto,name:jt.name_area||jt.sto_l||"N/A",type:jt.type_area||"STO",sto:jt.sto||"N/A",witel:jt.witel||"N/A",reg:jt.reg||"N/A",color:Hi()},geometry:xt}:null}).filter(jt=>jt!==null);Ge.length>0&&(r.current.addSource("capacity-boundaries",{type:"geojson",data:{type:"FeatureCollection",features:Ge}}),r.current.addLayer({id:"capacity-boundaries-fill",type:"fill",source:"capacity-boundaries",paint:{"fill-color":["get","color"],"fill-opacity":.4}}),r.current.addLayer({id:"capacity-boundaries-outline",type:"line",source:"capacity-boundaries",paint:{"line-color":"#FF6B35","line-width":2}}),r.current.addLayer({id:"capacity-boundaries-hover",type:"fill",source:"capacity-boundaries",paint:{"fill-color":["get","color"],"fill-opacity":.6},filter:["==","id",""]}),r.current.on("click","capacity-boundaries-fill",jt=>{if(jt.features&&jt.features.length>0){const Nt=jt.features[0].properties,Yr=jt.lngLat,Tr=X.filter(Gt=>(Gt.code_area||Gt.sto)===(Nt==null?void 0:Nt.id)).length;new Ss.Popup().setLngLat(Yr).setHTML(`
                <div style="font-size: 12px; padding: 8px;">
                  <strong style="font-size: 14px; color: #FF6B35;">${(Nt==null?void 0:Nt.type)||""} ${(Nt==null?void 0:Nt.name)||"Unknown"}</strong><br/>
                  <hr style="margin: 8px 0; border: none; border-top: 1px solid #ddd;"/>
                  <strong>STO:</strong> ${(Nt==null?void 0:Nt.sto)||"-"}<br/>
                  <strong>Witel:</strong> ${(Nt==null?void 0:Nt.witel)||"-"}<br/>
                  <strong>Region:</strong> ${(Nt==null?void 0:Nt.reg)||"-"}<br/>
                  <strong>Equipment Count:</strong> ${Tr}<br/>
                </div>
              `).addTo(r.current)}}),r.current.on("mouseenter","capacity-boundaries-fill",jt=>{var xt;jt.features&&jt.features.length>0&&(r.current.setFilter("capacity-boundaries-hover",["==","id",(xt=jt.features[0].properties)==null?void 0:xt.id]),r.current.getCanvas().style.cursor="pointer")}),r.current.on("mouseleave","capacity-boundaries-fill",()=>{r.current.setFilter("capacity-boundaries-hover",["==","id",""]),r.current.getCanvas().style.cursor=""}));const ot=X.map(jt=>({coords:[parseFloat(jt.longitude),parseFloat(jt.latitude)],hostname:jt.hostname||"N/A",sto:jt.sto||"N/A",witel:jt.witel||"N/A"})),ht=new Map;ot.forEach(jt=>{const xt=jt.sto;ht.has(xt)||ht.set(xt,[]),ht.get(xt).push(jt)});const $t=[],Gr=new Set;ht.forEach((jt,xt)=>{if(jt.length>1){const Nt=[...jt].sort((Yr,Tr)=>Yr.coords[0]-Tr.coords[0]);for(let Yr=0;Yr<Nt.length-1;Yr++){const Tr=Nt[Yr],Gt=Nt[Yr+1],gn=[Tr.hostname,Gt.hostname].sort().join("|");Gr.has(gn)||(Gr.add(gn),$t.push({type:"Feature",properties:{from:Tr.hostname,to:Gt.hostname,sto:xt},geometry:{type:"LineString",coordinates:[Tr.coords,Gt.coords]}}))}}}),ot.forEach((jt,xt)=>{const Nt=ot.map((Tr,Gt)=>{if(xt===Gt)return null;const gn=jt.coords[0]-Tr.coords[0],He=jt.coords[1]-Tr.coords[1],bt=Math.sqrt(gn*gn+He*He);return{index:Gt,distance:bt,point:Tr}}).filter(Tr=>Tr!==null).sort((Tr,Gt)=>Tr.distance-Gt.distance),Yr=Math.min(3,Nt.length);for(let Tr=0;Tr<Yr;Tr++){const Gt=Nt[Tr];if(Gt){const gn=[jt.hostname,Gt.point.hostname].sort().join("|");Gr.has(gn)||(Gr.add(gn),$t.push({type:"Feature",properties:{from:jt.hostname,to:Gt.point.hostname,sto:jt.sto===Gt.point.sto?jt.sto:"cross-sto"},geometry:{type:"LineString",coordinates:[jt.coords,Gt.point.coords]}}))}}});const wt=X.map(jt=>({type:"Feature",properties:{hostname:jt.hostname||"N/A",manufacture:jt.manufacture||"N/A",version:jt.version||"N/A",sto:jt.sto||"N/A",sto_l:jt.sto_l||"N/A",witel:jt.witel||"N/A",reg:jt.reg||"N/A",tipe_card:jt.tipe_card||"N/A",cap:jt.cap||"N/A",port_used:jt.port_used||"0",port_idle:jt.port_idle||"0",platform:jt.platform||"N/A"},geometry:{type:"Point",coordinates:[parseFloat(jt.longitude),parseFloat(jt.latitude)]}}));if(console.log(`Created ${$t.length} line connections`),r.current.addSource("capacity",{type:"geojson",data:{type:"FeatureCollection",features:wt}}),r.current.addLayer({id:"capacity-points",type:"circle",source:"capacity",paint:{"circle-radius":3,"circle-color":"#FF6B35","circle-stroke-width":1,"circle-stroke-color":"#FFFFFF","circle-opacity":.9}}),r.current.on("click","capacity-points",jt=>{if(jt.features&&jt.features.length>0){const Nt=jt.features[0].properties,Yr=jt.lngLat;new Ss.Popup().setLngLat(Yr).setHTML(`
              <div style="font-size: 12px; padding: 8px; max-width: 280px;">
                <strong style="font-size: 14px; color: #FF6B35;"> ${(Nt==null?void 0:Nt.hostname)||"Node"}</strong><br/>
                <hr style="margin: 8px 0; border: none; border-top: 1px solid #ddd;"/>
                <div style="display: grid; grid-template-columns: auto 1fr; gap: 4px 8px;">
                  <strong>Manufacture:</strong> <span>${(Nt==null?void 0:Nt.manufacture)||"N/A"}</span>
                  <strong>Version:</strong> <span>${(Nt==null?void 0:Nt.version)||"N/A"}</span>
                  <strong>Platform:</strong> <span>${(Nt==null?void 0:Nt.platform)||"N/A"}</span>
                  <strong>STO:</strong> <span>${(Nt==null?void 0:Nt.sto_l)||(Nt==null?void 0:Nt.sto)||"N/A"}</span>
                  <strong>Witel:</strong> <span>${(Nt==null?void 0:Nt.witel)||"N/A"}</span>
                  <strong>Region:</strong> <span>${(Nt==null?void 0:Nt.reg)||"N/A"}</span>
                  <strong>Capacity:</strong> <span>${(Nt==null?void 0:Nt.cap)||"N/A"}</span>
                  <strong>Port Used:</strong> <span style="color: #E74C3C;">${(Nt==null?void 0:Nt.port_used)||"0"}</span>
                  <strong>Port Idle:</strong> <span style="color: #2ECC71;">${(Nt==null?void 0:Nt.port_idle)||"0"}</span>
                </div>
              </div>
            `).addTo(r.current);const Tr=(Nt==null?void 0:Nt.hostname)||"Node";Fn({from:Tr,to:"Network",description:`${Tr} - Capacity Node`,bandwidth_mbps:1e4,utilization:70+Math.random()*20,latency:5+Math.random()*10,packetLoss:Math.random()*.1,linkCount:1,totalCapacity:"10G",type:"CAPACITY",nodeData:Nt,clickedType:"node"}),Rt(!0),kr({from:Tr,to:"Network",nodeData:Nt})}}),r.current.on("click","capacity-lines",jt=>{if(jt.features&&jt.features.length>0){const Nt=jt.features[0].properties,Yr=(Nt==null?void 0:Nt.from)||"Node A",Tr=(Nt==null?void 0:Nt.to)||"Node B";Fn({from:Yr,to:Tr,description:`${Yr}  ${Tr}`,bandwidth_mbps:1e4,utilization:70+Math.random()*20,latency:5+Math.random()*10,packetLoss:Math.random()*.1,linkCount:2,totalCapacity:"10G",type:"L2_AGGREGATION",nodeData:Nt,clickedType:"edge"}),Rt(!0),kr({from:Yr,to:Tr})}}),r.current.on("mouseenter","capacity-points",()=>{r.current.getCanvas().style.cursor="pointer"}),r.current.on("mouseleave","capacity-points",()=>{r.current.getCanvas().style.cursor=""}),ot.length>0){const jt=ot.map(Yr=>Yr.coords[0]),xt=ot.map(Yr=>Yr.coords[1]),Nt={minLng:Math.min(...jt),maxLng:Math.max(...jt),minLat:Math.min(...xt),maxLat:Math.max(...xt)};r.current.fitBounds([[Nt.minLng,Nt.minLat],[Nt.maxLng,Nt.maxLat]],{padding:50,duration:1e3})}}catch(vt){alert(`Error adding capacity layer: ${vt}`)}},dc=()=>{if(!r.current)return;const vt=!W;if(G(vt),vt&&!r.current.getLayer("capacity-points"))Ta();else{const Ge=vt?"visible":"none";r.current.getLayer("capacity-points")&&r.current.setLayoutProperty("capacity-points","visibility",Ge),r.current.getLayer("capacity-lines")&&r.current.setLayoutProperty("capacity-lines","visibility",Ge),r.current.getLayer("capacity-lines-glow")&&r.current.setLayoutProperty("capacity-lines-glow","visibility",Ge),r.current.getLayer("capacity-boundaries-fill")&&r.current.setLayoutProperty("capacity-boundaries-fill","visibility",Ge),r.current.getLayer("capacity-boundaries-outline")&&r.current.setLayoutProperty("capacity-boundaries-outline","visibility",Ge),r.current.getLayer("capacity-boundaries-hover")&&r.current.setLayoutProperty("capacity-boundaries-hover","visibility",Ge)}},Oo=()=>{if(!(!r.current||ie.length===0))try{["sirkit-points","sirkit-boundaries-fill","sirkit-boundaries-outline","sirkit-boundaries-hover"].forEach($t=>{r.current.getLayer($t)&&r.current.removeLayer($t)}),r.current.getSource("sirkit")&&r.current.removeSource("sirkit"),r.current.getSource("sirkit-boundaries")&&r.current.removeSource("sirkit-boundaries");const Ge=new Map;ie.forEach($t=>{const Gr=$t.sto||"unknown";Gr&&$t.boundary&&!Ge.has(Gr)&&Ge.set(Gr,$t)});const ot=Array.from(Ge.values()).map($t=>{const Gr=Nn($t.boundary);return Gr?{type:"Feature",properties:{id:$t.sto||"unknown",name:$t.sto_l||$t.sto||"N/A",witel:$t.witel||"N/A",reg:$t.reg||"N/A",types:$t.types||"N/A",platform:$t.platform||"N/A",color:Hi()},geometry:Gr}:null}).filter($t=>$t!==null);ot.length>0&&(r.current.addSource("sirkit-boundaries",{type:"geojson",data:{type:"FeatureCollection",features:ot}}),r.current.addLayer({id:"sirkit-boundaries-fill",type:"fill",source:"sirkit-boundaries",paint:{"fill-color":["get","color"],"fill-opacity":.3}}),r.current.addLayer({id:"sirkit-boundaries-outline",type:"line",source:"sirkit-boundaries",paint:{"line-color":"#4ECDC4","line-width":2}}),r.current.addLayer({id:"sirkit-boundaries-hover",type:"fill",source:"sirkit-boundaries",paint:{"fill-color":["get","color"],"fill-opacity":.5},filter:["==","id",""]}),r.current.on("click","sirkit-boundaries-fill",$t=>{if($t.features&&$t.features.length>0){const wt=$t.features[0].properties,jt=$t.lngLat,xt=ie.filter(Nt=>Nt.sto===(wt==null?void 0:wt.id)).length;new Ss.Popup().setLngLat(jt).setHTML(`
                <div style="font-size: 12px; padding: 8px;">
                  <strong style="font-size: 14px; color: #4ECDC4;">STO ${(wt==null?void 0:wt.name)||"Unknown"}</strong><br/>
                  <hr style="margin: 8px 0; border: none; border-top: 1px solid #ddd;"/>
                  <strong>Witel:</strong> ${(wt==null?void 0:wt.witel)||"-"}<br/>
                  <strong>Region:</strong> ${(wt==null?void 0:wt.reg)||"-"}<br/>
                  <strong>Type:</strong> ${(wt==null?void 0:wt.types)||"-"}<br/>
                  <strong>Platform:</strong> ${(wt==null?void 0:wt.platform)||"-"}<br/>
                  <strong>Circuit Count:</strong> ${xt}<br/>
                </div>
              `).addTo(r.current)}}),r.current.on("mouseenter","sirkit-boundaries-fill",$t=>{var Gr;$t.features&&$t.features.length>0&&(r.current.setFilter("sirkit-boundaries-hover",["==","id",(Gr=$t.features[0].properties)==null?void 0:Gr.id]),r.current.getCanvas().style.cursor="pointer")}),r.current.on("mouseleave","sirkit-boundaries-fill",()=>{r.current.setFilter("sirkit-boundaries-hover",["==","id",""]),r.current.getCanvas().style.cursor=""}));const ht=ie.map($t=>({type:"Feature",properties:{node:$t.node||"N/A",sto:$t.sto||"N/A",sto_l:$t.sto_l||"N/A",witel:$t.witel||"N/A",reg:$t.reg||"N/A",types:$t.types||"N/A",platform:$t.platform||"N/A",sap_descp:$t.sap_descp||"N/A",ipadd_v4:$t.ipadd_v4||"N/A",me_akses:$t.me_akses||"N/A",oltname:$t.oltname||"N/A",manufacture:$t.manufacture||"N/A"},geometry:{type:"Point",coordinates:[parseFloat($t.longitude),parseFloat($t.latitude)]}}));r.current.addSource("sirkit",{type:"geojson",data:{type:"FeatureCollection",features:ht}}),r.current.addLayer({id:"sirkit-points",type:"circle",source:"sirkit",paint:{"circle-radius":8,"circle-color":"#4ECDC4","circle-stroke-width":2,"circle-stroke-color":"#FFFFFF","circle-opacity":.9}}),r.current.on("click","sirkit-points",$t=>{if($t.features&&$t.features.length>0){const wt=$t.features[0].properties,jt=(wt==null?void 0:wt.node)||(wt==null?void 0:wt.hostname)||"Node";Fn({from:jt,to:"Network",description:`${jt} - Sirkit Node`,bandwidth_mbps:1e4,utilization:70+Math.random()*20,latency:5+Math.random()*10,packetLoss:Math.random()*.1,linkCount:1,totalCapacity:"10G",type:"SIRKIT",nodeData:wt,clickedType:"node"}),Rt(!0),kr({from:jt,to:"Network",nodeData:wt})}}),r.current.on("mouseenter","sirkit-points",()=>{r.current.getCanvas().style.cursor="pointer"}),r.current.on("mouseleave","sirkit-points",()=>{r.current.getCanvas().style.cursor=""})}catch(vt){alert(`Error adding sirkit layer: ${vt}`)}},wa=()=>{if(!r.current)return;const vt=!he;if(Y(vt),vt&&!r.current.getLayer("sirkit-points"))Oo();else{const Ge=vt?"visible":"none";r.current.getLayer("sirkit-points")&&r.current.setLayoutProperty("sirkit-points","visibility",Ge),r.current.getLayer("sirkit-boundaries-fill")&&r.current.setLayoutProperty("sirkit-boundaries-fill","visibility",Ge),r.current.getLayer("sirkit-boundaries-outline")&&r.current.setLayoutProperty("sirkit-boundaries-outline","visibility",Ge),r.current.getLayer("sirkit-boundaries-hover")&&r.current.setLayoutProperty("sirkit-boundaries-hover","visibility",Ge)}},vl=(vt,Ge,ot,ht,$t=.3)=>{const Gr=[],jt=(vt+ot)/2,xt=(Ge+ht)/2,Nt=ot-vt,Yr=ht-Ge,Tr=Math.sqrt(Nt*Nt+Yr*Yr),Gt=-Yr/Tr,gn=Nt/Tr,He=Tr*$t,bt=jt+Gt*He,ct=xt+gn*He;for(let yt=0;yt<=20;yt++){const Or=yt/20,Nr=1-Or,gr=Nr*Nr*vt+2*Nr*Or*bt+Or*Or*ot,mn=Nr*Nr*Ge+2*Nr*Or*ct+Or*Or*ht;Gr.push([gr,mn])}return Gr},jo=()=>{if(!(!r.current||!Tt))try{["ruasrekap-points-hitarea","ruasrekap-points","ruasrekap-lines","ruasrekap-lines-glow"].forEach(He=>{r.current.getLayer(He)&&r.current.removeLayer(He)}),r.current.getSource("ruasrekap")&&r.current.removeSource("ruasrekap");const Ge=Tt.nodes.filter(He=>Xt.includes(He.id)),ot=new Set(Ge.map(He=>He.id)),ht=[];Tt.edges&&Array.isArray(Tt.edges)?Tt.edges.forEach(He=>{if(ot.has(He.source)&&ot.has(He.target)){const bt=vl(He.source_lon,He.source_lat,He.target_lon,He.target_lat,.2),ct=He.avg_utilization||He.utilization||0;let yt="normal";if(He.severity){const Or=He.severity.toLowerCase();Or==="critical"?yt="critical":Or==="warning"?yt="warning":yt="normal"}else ct>=85?yt="critical":ct>=41?yt="warning":yt="normal";ht.length<3&&console.log("Creating edge feature:",{id:He.id,utilization:ct,originalSeverity:He.severity,normalizedSeverity:yt,source:He.source,target:He.target}),ht.push({type:"Feature",properties:{id:He.id||He.ruas_list||`${He.source}_to_${He.target}`,ruas:He.ruas_list||"N/A",source:He.source,target:He.target,source_label:He.source_label||He.source,target_label:He.target_label||He.target,capacity:He.total_capacity||He.capacity||0,layer:He.layer_list||He.layer||"N/A",traffic_in_log:He.traffic_in_log||0,traffic_out_log:He.traffic_out_log||0,traffic_in_psk:He.traffic_in_psk||0,traffic_out_psk:He.traffic_out_psk||0,utilization:ct,link_count:He.link_count||1,severity:yt,details:JSON.stringify(He.details||[])},geometry:{type:"LineString",coordinates:bt}})}}):Ge.forEach(He=>{He.topology&&Array.isArray(He.topology)&&He.topology.forEach(bt=>{if(ot.has(bt.source)&&ot.has(bt.target)){const ct=vl(bt.source_lon,bt.source_lat,bt.target_lon,bt.target_lat,.2),yt=bt.utilization||0;let Or="normal";if(bt.severity){const Nr=bt.severity.toLowerCase();Nr==="critical"?Or="critical":Nr==="warning"?Or="warning":Or="normal"}else yt>=85?Or="critical":yt>=41?Or="warning":Or="normal";ht.push({type:"Feature",properties:{id:bt.ruas||`${bt.source}_to_${bt.target}`,ruas:bt.ruas||"N/A",source:bt.source,target:bt.target,capacity:bt.capacity||0,layer:bt.layer||"N/A",traffic_in_log:bt.traffic_in_log||0,traffic_out_log:bt.traffic_out_log||0,traffic_in_psk:bt.traffic_in_psk||0,traffic_out_psk:bt.traffic_out_psk||0,utilization:yt,severity:Or,details:JSON.stringify([])},geometry:{type:"LineString",coordinates:ct}})}})});const $t=Ge.map(He=>({type:"Feature",properties:{id:He.id,label:He.label,size:He.size,layer:He.layer,platform:He.platform,reg:He.reg,witel:He.witel,types:He.types,details:JSON.stringify(He.details||[])},geometry:{type:"Point",coordinates:[He.x,He.y]}})),Gr=[...ht,...$t],wt={normal:0,warning:0,critical:0};ht.forEach(He=>{const bt=He.properties.severity;bt==="normal"?wt.normal++:bt==="warning"?wt.warning++:bt==="critical"&&wt.critical++}),console.log("Ruas Rekap Layer - Severity Distribution:",wt),console.log("Total edges:",ht.length),r.current.addSource("ruasrekap",{type:"geojson",data:{type:"FeatureCollection",features:Gr}});const xt={"tera-tera":"#3B82F6","tera-metro":"#10B981","tera-swc":"#F59E0B","tera-pevoice":"#8B5CF6","tera-pemobile":"#EC4899","tera-pehsi":"#14B8A6","tera-pehdc":"#F97316","tera-cgw":"#6366F1",trunk_all_metro_metro:"#06B6D4",trunk_all_metro_spine:"#8B5CF6",trunk_all_metro_dcn:"#EC4899",trunk_all_metro_bras:"#F59E0B",trunk_all_metro_cdn:"#10B981",trunk_all_metro_cndc:"#EF4444",trunk_all_metro_wac:"#84CC16",trunk_all_metro_wag:"#A855F7",trunk_all_metro_pedatin:"#F43F5E",trunk_all_metro_pehsi:"#0EA5E9",trunk_all_metro_pevoice:"#22C55E",trunk_all_metro_rantsel:"#14B8A6",trunk_all_metro_twamp:"#F97316",trunk_all_metro_starlink:"#6366F1",trunk_all_pe_spine:"#1E3A8A",trunk_all_pe_teradatin:"#065F46",trunk_all_pe_cdn:"#78350F",trunk_all_pe_wac:"#7C3AED",trunk_all_pe_wag:"#BE185D",trunk_all_pemobile_pemobile:"#0F766E",trunk_all_pemobile_metro:"#1E40AF",trunk_all_pemobile_rantsel:"#9A3412",trunk_all_pemobile_it_agg:"#7F1D1D",trunk_all_pemobile_cps:"#4D7C0F",trunk_all_pemobile_blf:"#4338CA",trunk_all_pemobile_twamp:"#A16207",trunk_all_pehsi_swc:"#3A0CA3",trunk_all_pehsi_ebr:"#7C2D12",trunk_all_pehsi_lb:"#0369A1",trunk_all_pehsi_sig:"#15803D",trunk_all_petransit_ebr:"#6B21A8",trunk_all_me_bngtsel:"#9F1239",trunk_all_bngtsel_pehsi:"#0C4A6E",trunk_all_bras_pehsi:"#B45309",trunk_all_allot_pehsi:"#14532D",trunk_all_nodeb_metro:"#3F6212",trunk_all_olt_metro:"#701A75"}[gi]||"#3B82F6";r.current.addLayer({id:"ruasrekap-lines-glow",type:"line",source:"ruasrekap",filter:["==",["geometry-type"],"LineString"],paint:{"line-color":["match",["get","severity"],"normal","#10B981","warning","#F59E0B","critical","#EF4444",xt],"line-width":10,"line-opacity":.1,"line-blur":2}}),r.current.addLayer({id:"ruasrekap-lines",type:"line",source:"ruasrekap",filter:["==",["geometry-type"],"LineString"],paint:{"line-color":["match",["get","severity"],"normal","#10B981","warning","#F59E0B","critical","#EF4444",xt],"line-width":2,"line-opacity":.9}}),r.current.addLayer({id:"ruasrekap-points",type:"circle",source:"ruasrekap",filter:["==",["geometry-type"],"Point"],paint:{"circle-radius":["interpolate",["linear"],["zoom"],5,["*",["get","size"],1],10,["*",["get","size"],2]],"circle-color":xt,"circle-stroke-width":2,"circle-stroke-color":"#FFFFFF","circle-opacity":.9}}),r.current.addLayer({id:"ruasrekap-points-hitarea",type:"circle",source:"ruasrekap",filter:["==",["geometry-type"],"Point"],paint:{"circle-radius":["interpolate",["linear"],["zoom"],5,["*",["get","size"],5],10,["*",["get","size"],10]],"circle-color":xt,"circle-opacity":0}});const Nt=He=>{var bt;if(He.preventDefault(),He.originalEvent&&He.originalEvent.stopPropagation(),He.features&&He.features.length>0){const yt=He.features[0].properties,Or=yt==null?void 0:yt.id,Nr=(yt==null?void 0:yt.label)||(yt==null?void 0:yt.id)||"Node";let gr=[];try{yt!=null&&yt.details&&typeof yt.details=="string"&&(gr=JSON.parse(yt.details))}catch{}if(gr.length===0&&(Tt!=null&&Tt.nodes)){const qt=Tt.nodes.find(Br=>Br.id===Or);qt!=null&&qt.details&&Array.isArray(qt.details)&&(gr=qt.details,console.log("Node details loaded from ruasRekapData:",gr.length,"items"))}if(gr.length>0&&vr){const qt=vr.get(Or);qt&&qt.length>0&&(gr=gr.map((Br,Ai)=>{const Sa=qt.find(Wo=>Wo.ruas===Br.ruas)||qt[Ai];return Sa?{...Br,source_port_used:Sa.source_port_used,source_port_count:Sa.source_port_count,source_port_idle:Sa.source_port_idle,target_port_used:Sa.target_port_used,target_port_count:Sa.target_port_count,target_port_idle:Sa.target_port_idle}:Br}),console.log("Merged port data from trunk_all.json for node:",Or))}const mn=((bt=Tt==null?void 0:Tt.edges)==null?void 0:bt.filter(qt=>qt.source===Or||qt.target===Or))||[],Xn=He.lngLat;if(new Ss.Popup().setLngLat(Xn).setHTML(`
              <div style="font-size: 12px; padding: 8px; max-width: 280px;">
                <strong style="font-size: 14px; color: #3B82F6;"> ${Nr}</strong><br/>
                <hr style="margin: 8px 0; border: none; border-top: 1px solid #ddd;"/>
                <div style="display: grid; grid-template-columns: auto 1fr; gap: 4px 8px;">
                  <strong>Node ID:</strong> <span>${(yt==null?void 0:yt.id)||"N/A"}</span>
                  <strong>Layer:</strong> <span>${(yt==null?void 0:yt.layer)||"N/A"}</span>
                  <strong>Platform:</strong> <span>${(yt==null?void 0:yt.platform)||"N/A"}</span>
                  <strong>Region:</strong> <span>REG ${(yt==null?void 0:yt.reg)||"N/A"}</span>
                  <strong>Witel:</strong> <span>${(yt==null?void 0:yt.witel)||"N/A"}</span>
                </div>
                <div style="margin-top: 8px; padding: 6px; background: rgba(59, 130, 246, 0.1); border-radius: 4px; font-size: 11px; color: #3B82F6; text-align: center;">
                  <strong> ${mn.length} connected link${mn.length!==1?"s":""}</strong>
                </div>
                ${gr.length>0?`<div style="margin-top: 6px; padding: 6px; background: rgba(139, 92, 246, 0.1); border-radius: 4px; font-size: 11px; color: #8B5CF6; text-align: center;">
                  <strong> ${gr.length} node detail${gr.length!==1?"s":""}</strong>
                </div>`:""}
                <div style="margin-top: 6px; font-size: 10px; color: #6B7280; text-align: center; font-style: italic;">
                  Viewing node details and topology 
                </div>
              </div>
            `).addTo(r.current),gr.length>0)Fn({from:Nr,to:"Network",description:`${Nr} - Node Details`,bandwidth_mbps:1e4,utilization:0,latency:5+Math.random()*10,packetLoss:Math.random()*.1,linkCount:gr.length,totalCapacity:"N/A",type:(yt==null?void 0:yt.layer)||"NODE",nodeData:yt,linkDetails:gr,clickedType:"node"}),Rt(!0);else if(mn.length>0){const qt=mn[0],Br=Math.max(qt.total_traffic_95_in||0,qt.total_traffic_95_out||0),Ai=qt.total_capacity>0?Br/qt.total_capacity*100:0;Fn({from:qt.source_label||qt.source,to:qt.target_label||qt.target,description:`${Nr} - ${mn.length} link${mn.length!==1?"s":""}`,bandwidth_mbps:qt.total_capacity?qt.total_capacity/1e6:1e4,utilization:Ai,latency:5+Math.random()*10,packetLoss:Math.random()*.1,linkCount:mn.length,totalCapacity:`${(qt.total_capacity/1e9).toFixed(2)}G`,type:qt.layer_list||"L2_AGGREGATION",nodeData:yt,linkDetails:gr.length>0?gr:void 0,clickedType:"node"}),Rt(!0)}kr({from:Nr,to:"Network",nodeData:yt,topology:mn,linkDetails:gr.length>0?gr:void 0,clickedType:"node"})}};r.current.on("click","ruasrekap-points",Nt),r.current.on("click","ruasrekap-points-hitarea",Nt);const Yr=He=>{const bt=r.current.queryRenderedFeatures(He.point,{layers:["ruasrekap-points","ruasrekap-points-hitarea"]});if(!(bt&&bt.length>0)&&(console.log("Edge click detected!",He),He.features&&He.features.length>0)){const ct=He.features[0],yt=ct.properties,Or=He.lngLat;console.log("Edge feature:",ct),console.log("Edge properties:",yt);const Nr=(yt==null?void 0:yt.source_label)||(yt==null?void 0:yt.source)||"Node A",gr=(yt==null?void 0:yt.target_label)||(yt==null?void 0:yt.target)||"Node B",mn=yt!=null&&yt.capacity?(yt.capacity/1e9).toFixed(2):"N/A",Xn=(yt==null?void 0:yt.link_count)||1;let qt=[];try{yt!=null&&yt.details&&typeof yt.details=="string"?(qt=JSON.parse(yt.details),console.log("Edge clicked - Details parsed:",qt)):console.log("No details found or details is not a string:",yt==null?void 0:yt.details)}catch(wi){console.error("Error parsing edge details:",wi)}if(qt.length>0&&vr){const wi=`edge_${(yt==null?void 0:yt.id)||(yt==null?void 0:yt.source)+"_"+(yt==null?void 0:yt.target)}`,Ho=vr.get(wi);Ho&&Ho.length>0&&(qt=qt.map((Ki,uo)=>{const $n=Ho.find(Dn=>Dn.ruas===Ki.ruas)||Ho[uo];return $n?{...Ki,source_port_used:$n.source_port_used,source_port_count:$n.source_port_count,source_port_idle:$n.source_port_idle,target_port_used:$n.target_port_used,target_port_count:$n.target_port_count,target_port_idle:$n.target_port_idle}:Ki}),console.log("Merged port data from trunk_all.json for edge:",wi))}qt.length>0&&console.log("Edge clicked - First detail port data after merge:",{source_port_used:qt[0].source_port_used,source_port_count:qt[0].source_port_count,source_port_idle:qt[0].source_port_idle,target_port_used:qt[0].target_port_used,target_port_count:qt[0].target_port_count,target_port_idle:qt[0].target_port_idle});const Br=(qt==null?void 0:qt.length)||0,Ai=Br>0?`<div style="margin-top: 8px; padding: 6px; background: rgba(37, 99, 235, 0.1); border-radius: 4px; font-size: 11px; color: #2563EB;">
                <strong>Details:</strong> ${Br} physical link(s) available
              </div>`:"",Sa=Xn>1?`<div style="margin-top: 4px; padding: 4px; background: rgba(139, 92, 246, 0.1); border-radius: 3px; font-size: 11px; color: #8B5CF6;">
                <strong> Aggregated Links:</strong> ${Xn}
              </div>`:"";new Ss.Popup().setLngLat(Or).setHTML(`
              <div style="font-size: 12px; padding: 8px; max-width: 320px;">
                <strong style="font-size: 14px; color: #2563EB;"> ${(yt==null?void 0:yt.ruas)||"Connection"}</strong><br/>
                <hr style="margin: 8px 0; border: none; border-top: 1px solid #ddd;"/>
                <div style="display: grid; grid-template-columns: auto 1fr; gap: 4px 8px;">
                  <strong>Source:</strong> <span>${Nr}</span>
                  <strong>Target:</strong> <span>${gr}</span>
                  <strong>Capacity:</strong> <span style="color: #2563EB; font-weight: 600;">${mn} Gbps</span>
                  <strong>Layer:</strong> <span>${(yt==null?void 0:yt.layer)||"N/A"}</span> 
                </div>
                ${Sa}
                ${Ai}
              </div>
            `).addTo(r.current);const Wo=Math.max((yt==null?void 0:yt.traffic_in_log)||0,(yt==null?void 0:yt.traffic_out_log)||0,(yt==null?void 0:yt.traffic_in_psk)||0,(yt==null?void 0:yt.traffic_out_psk)||0),bi=yt!=null&&yt.capacity&&yt.capacity>0?Wo/yt.capacity*100:0;console.log("Setting link details with:",{from:Nr,to:gr,linkDetails:qt,detailsCount:qt.length}),Fn({from:Nr,to:gr,description:(yt==null?void 0:yt.ruas)||`${Nr}  ${gr}`,bandwidth_mbps:yt!=null&&yt.capacity?yt.capacity/1e6:1e4,utilization:bi,latency:5+Math.random()*10,packetLoss:Math.random()*.1,linkCount:Xn,totalCapacity:`${mn}G`,type:(yt==null?void 0:yt.layer)||"L2_AGGREGATION",linkDetails:(qt==null?void 0:qt.length)>0?qt:void 0,nodeData:yt,clickedType:"edge"}),console.log("Calling setShowLinkDetails(true)"),Rt(!0),kr({from:Nr,to:gr,nodeData:yt,topology:(qt==null?void 0:qt.length)>0?qt:void 0})}};r.current.on("click","ruasrekap-lines",Yr),r.current.on("click","ruasrekap-lines-glow",Yr);const Tr=new Ss.Popup({closeButton:!1,closeOnClick:!1,offset:15,className:"hover-popup"}),Gt=He=>{if(r.current.getCanvas().style.cursor="pointer",He.features&&He.features.length>0){const bt=He.features[0],ct=bt.properties,yt=bt.geometry.coordinates.slice(),Or=(ct==null?void 0:ct.topologyCount)||0;let Nr=[];try{ct!=null&&ct.details&&typeof ct.details=="string"&&(Nr=JSON.parse(ct.details))}catch{}const gr=[];ct!=null&&ct.layer&&gr.push(`<strong>Layer:</strong> <span style="color: #8B5CF6; font-weight: 600;">${ct.layer}</span>`),ct!=null&&ct.platform&&gr.push(`<strong>Platform:</strong> <span>${ct.platform}</span>`),ct!=null&&ct.reg&&gr.push(`<strong>Region:</strong> <span>REG ${ct.reg}</span>`),ct!=null&&ct.witel&&gr.push(`<strong>Witel:</strong> <span>${ct.witel}</span>`),ct!=null&&ct.types&&gr.push(`<strong>Type:</strong> <span>${ct.types}</span>`),ct!=null&&ct.size&&gr.push(`<strong>Size:</strong> <span style="color: #6366F1; font-weight: 600;">${ct.size}</span>`);const mn=gr.length>0?gr.join(`
`):"",Xn=Nr.length>0?`<div style="margin-top: 4px; padding: 4px; background: rgba(139, 92, 246, 0.1); border-radius: 3px; font-size: 9px; color: #8B5CF6; text-align: center;">
                <strong> ${Nr.length} node detail${Nr.length!==1?"s":""}</strong>
              </div>`:"";Tr.setLngLat(yt).setHTML(`
              <div style="font-size: 11px; padding: 6px; max-width: 260px;">
                <strong style="font-size: 13px; color: #3B82F6;"> ${(ct==null?void 0:ct.label)||(ct==null?void 0:ct.id)||"Node"}</strong><br/>
                <hr style="margin: 6px 0; border: none; border-top: 1px solid #e5e7eb;"/>
                <div style="display: grid; grid-template-columns: auto 1fr; gap: 3px 6px; font-size: 10px;">
                  <strong>ID:</strong> <span>${(ct==null?void 0:ct.id)||"N/A"}</span>
                  ${mn}
                  <strong>Connections:</strong> <span style="color: #3B82F6; font-weight: 600;">${Or}</span>
                </div>
                ${Xn}
                <div style="margin-top: 6px; font-size: 9px; color: #6B7280; text-align: center; font-style: italic;">
                  Click for full details
                </div>
              </div>
            `).addTo(r.current)}},gn=()=>{r.current.getCanvas().style.cursor="",Tr.remove()};if(r.current.on("mouseenter","ruasrekap-points-hitarea",Gt),r.current.on("mouseleave","ruasrekap-points-hitarea",gn),r.current.on("mouseenter","ruasrekap-lines",He=>{if(r.current.getCanvas().style.cursor="pointer",He.features&&He.features.length>0){const ct=He.features[0].properties,yt=He.lngLat,Or=ct!=null&&ct.capacity?(ct.capacity/1e9).toFixed(2):"N/A",Nr=ct!=null&&ct.traffic_in_log?(ct.traffic_in_log/1e9).toFixed(2):"0",gr=ct!=null&&ct.traffic_out_log?(ct.traffic_out_log/1e9).toFixed(2):"0",mn=ct!=null&&ct.traffic_in_psk?(ct.traffic_in_psk/1e9).toFixed(2):"0",Xn=ct!=null&&ct.traffic_out_psk?(ct.traffic_out_psk/1e9).toFixed(2):"0";let qt="0.00";ct!=null&&ct.capacity&&ct.capacity>0&&(qt=(Math.max(parseFloat(Nr)||0,parseFloat(gr)||0,parseFloat(mn)||0,parseFloat(Xn)||0)/parseFloat(Or)*100).toFixed(2));const Br=(ct==null?void 0:ct.severity)||"normal";let Ai="#10B981";Br==="critical"?Ai="#EF4444":Br==="warning"&&(Ai="#F59E0B"),console.log("Edge hover - Severity:",Br,"Utilization:",qt,"Color:",Ai);const Sa=(ct==null?void 0:ct.source_label)||(ct==null?void 0:ct.source)||"N/A",Wo=(ct==null?void 0:ct.target_label)||(ct==null?void 0:ct.target)||"N/A",bi=(ct==null?void 0:ct.link_count)||1,wi=bi>1?`<div style="margin-top: 6px; padding: 4px; background: rgba(139, 92, 246, 0.1); border-radius: 3px; font-size: 10px; color: #8B5CF6; text-align: center;">
                <strong> ${bi} physical links aggregated</strong>
              </div>`:"";Tr.setLngLat(yt).setHTML(`
              <div style="font-size: 11px; padding: 6px; max-width: 260px;">
                <strong style="font-size: 13px; color: #8B5CF6;"> ${(ct==null?void 0:ct.ruas)||"Connection"}</strong><br/>
                <hr style="margin: 6px 0; border: none; border-top: 1px solid #e5e7eb;"/>
                <div style="display: grid; grid-template-columns: auto 1fr; gap: 3px 6px; font-size: 10px;">
                  <strong>Source:</strong> <span style="color: #3B82F6;">${Sa}</span>
                  <strong>Target:</strong> <span style="color: #10B981;">${Wo}</span>
                  <strong>Layer:</strong> <span>${(ct==null?void 0:ct.layer)||"N/A"}</span>
                  <strong>Capacity:</strong> <span style="color: #8B5CF6; font-weight: 600;">${Or} Gbps</span>
                  <strong>Traffic In (95%):</strong> <span style="color: #3B82F6;">${Nr} Gbps</span>
                  <strong>Traffic Out (95%):</strong> <span style="color: #10B981;">${gr} Gbps</span>
                  <strong>Max Traffic In:</strong> <span style="color: #6366F1;">${mn} Gbps</span>
                  <strong>Max Traffic Out:</strong> <span style="color: #14B8A6;">${Xn} Gbps</span>
                  <strong>Utilization:</strong> <span style="color: ${Ai}; font-weight: 600;">${qt}%</span>
                </div>
                ${wi}
                <div style="margin-top: 6px; font-size: 9px; color: #6B7280; text-align: center;">
                  Click for details
                </div>
              </div>
            `).addTo(r.current)}}),r.current.on("mouseleave","ruasrekap-lines",()=>{r.current.getCanvas().style.cursor="",Tr.remove()}),r.current.on("mouseenter","ruasrekap-lines-glow",He=>{if(r.current.getCanvas().style.cursor="pointer",He.features&&He.features.length>0){const ct=He.features[0].properties,yt=He.lngLat,Or=ct!=null&&ct.capacity?(ct.capacity/1e9).toFixed(2):"N/A",Nr=ct!=null&&ct.traffic_95_in?(ct.traffic_95_in/1e9).toFixed(2):"0",gr=ct!=null&&ct.traffic_95_out?(ct.traffic_95_out/1e9).toFixed(2):"0",mn=ct!=null&&ct.traffic_max_in?(ct.traffic_max_in/1e9).toFixed(2):"0",Xn=ct!=null&&ct.traffic_max_out?(ct.traffic_max_out/1e9).toFixed(2):"0";let qt="0.00";ct!=null&&ct.capacity&&ct.capacity>0&&(qt=(Math.max(parseFloat(Nr)||0,parseFloat(gr)||0)/parseFloat(Or)*100).toFixed(2));let Br="#2ECC71";parseFloat(qt)>80?Br="#E74C3C":parseFloat(qt)>60?Br="#F39C12":parseFloat(qt)>40&&(Br="#F1C40F");const Ai=(ct==null?void 0:ct.source_label)||(ct==null?void 0:ct.source)||"N/A",Sa=(ct==null?void 0:ct.target_label)||(ct==null?void 0:ct.target)||"N/A",Wo=(ct==null?void 0:ct.link_count)||1,bi=Wo>1?`<div style="margin-top: 6px; padding: 4px; background: rgba(139, 92, 246, 0.1); border-radius: 3px; font-size: 10px; color: #8B5CF6; text-align: center;">
                <strong> ${Wo} physical links aggregated</strong>
              </div>`:"";Tr.setLngLat(yt).setHTML(`
              <div style="font-size: 11px; padding: 6px; max-width: 260px;">
                <strong style="font-size: 13px; color: #8B5CF6;"> ${(ct==null?void 0:ct.ruas)||"Connection"}</strong><br/>
                <hr style="margin: 6px 0; border: none; border-top: 1px solid #e5e7eb;"/>
                <div style="display: grid; grid-template-columns: auto 1fr; gap: 3px 6px; font-size: 10px;">
                  <strong>Source:</strong> <span style="color: #3B82F6;">${Ai}</span>
                  <strong>Target:</strong> <span style="color: #10B981;">${Sa}</span>
                  <strong>Layer:</strong> <span>${(ct==null?void 0:ct.layer)||"N/A"}</span>
                  <strong>Capacity:</strong> <span style="color: #8B5CF6; font-weight: 600;">${Or} Gbps</span>
                  <strong>Traffic In (95%):</strong> <span style="color: #3B82F6;">${Nr} Gbps</span>
                  <strong>Traffic Out (95%):</strong> <span style="color: #10B981;">${gr} Gbps</span>
                  <strong>Max Traffic In:</strong> <span style="color: #6366F1;">${mn} Gbps</span>
                  <strong>Max Traffic Out:</strong> <span style="color: #14B8A6;">${Xn} Gbps</span>
                  <strong>Utilization:</strong> <span style="color: ${Br}; font-weight: 600;">${qt}%</span>
                </div>
                ${bi}
                <div style="margin-top: 6px; font-size: 9px; color: #6B7280; text-align: center;">
                  Click for details
                </div>
              </div>
            `).addTo(r.current)}}),r.current.on("mouseleave","ruasrekap-lines-glow",()=>{r.current.getCanvas().style.cursor="",Tr.remove()}),Ge.length>0&&Wt){const He=Ge.map(yt=>yt.x),bt=Ge.map(yt=>yt.y),ct={minLng:Math.min(...He),maxLng:Math.max(...He),minLat:Math.min(...bt),maxLat:Math.max(...bt)};r.current.fitBounds([[ct.minLng,ct.minLat],[ct.maxLng,ct.maxLat]],{padding:50,duration:1e3})}console.log(`Ruas rekap layer ${Wt?"added":"updated"} successfully - ${Ge.length} nodes, ${ht.length} edges`)}catch(vt){console.error("Error adding ruas rekap layer:",vt),alert(`Error adding ruas rekap layer: ${vt}`)}},So=()=>{if(!r.current)return;const vt=!Ze;if(zt(vt),vt&&!r.current.getLayer("ruasrekap-points"))jo();else{const Ge=vt?"visible":"none";["ruasrekap-lines","ruasrekap-lines-glow","ruasrekap-points","ruasrekap-points-hitarea"].forEach(ot=>{var ht;(ht=r.current)!=null&&ht.getLayer(ot)&&r.current.setLayoutProperty(ot,"visibility",Ge)})}},Gl=()=>{var Ge;if(!r.current)return;const vt=!at;if(Ht(vt),vt&&!((Ge=r.current)!=null&&Ge.getLayer("ruas-rekap-sto-points")))Ul();else{const ot=vt?"visible":"none";["ruas-rekap-sto-lines","ruas-rekap-sto-lines-glow","ruas-rekap-sto-points","ruas-rekap-sto-points-hitarea"].forEach($t=>{var Gr,wt;(Gr=r.current)!=null&&Gr.getLayer($t)&&((wt=r.current)==null||wt.setLayoutProperty($t,"visibility",ot))})}},Ul=()=>{var vt,Ge;if(!(!r.current||!Mt))try{["ruas-rekap-sto-points-hitarea","ruas-rekap-sto-points","ruas-rekap-sto-lines","ruas-rekap-sto-lines-glow"].forEach(Gt=>{var gn,He;(gn=r.current)!=null&&gn.getLayer(Gt)&&((He=r.current)==null||He.removeLayer(Gt))}),(vt=r.current)!=null&&vt.getSource("ruasrekapsto")&&((Ge=r.current)==null||Ge.removeSource("ruasrekapsto"));const ht=Mt.nodes.filter(Gt=>Pr.includes(Gt.id)),$t=new Set(ht.map(Gt=>Gt.id)),Gr=Mt.edges.filter(Gt=>$t.has(Gt.source)&&$t.has(Gt.target)).map(Gt=>{const gn=vl(Gt.source_lon,Gt.source_lat,Gt.target_lon,Gt.target_lat,.2),He=Gt.avg_utilization||Gt.utilization||0;let bt="normal";if(Gt.severity){const ct=Gt.severity.toLowerCase();ct==="critical"?bt="critical":ct==="warning"?bt="warning":bt="normal"}else He>=85?bt="critical":He>=41?bt="warning":bt="normal";return{type:"Feature",properties:{id:Gt.id,ruas:Gt.ruas_list||Gt.ruas,source:Gt.source,target:Gt.target,capacity:Gt.total_capacity||Gt.capacity,layer:Gt.layer_list||Gt.layer,traffic_95_in:Gt.total_traffic_95_in||Gt.traffic_95_in,traffic_95_out:Gt.total_traffic_95_out||Gt.traffic_95_out,traffic_max_in:Gt.total_traffic_max_in||Gt.traffic_max_in,traffic_max_out:Gt.total_traffic_max_out||Gt.traffic_max_out,utilization:He,link_count:Gt.link_count||1,severity:bt,details:JSON.stringify(Gt.details||[])},geometry:{type:"LineString",coordinates:gn}}}),wt=ht.map(Gt=>({type:"Feature",properties:{id:Gt.id,label:Gt.label,size:Gt.size||3,layer:Gt.layer||"N/A",platform:Gt.platform||"N/A",reg:Gt.reg||"N/A",witel:Gt.witel||"N/A",types:Gt.types||"N/A",details:JSON.stringify(Gt.details||[])},geometry:{type:"Point",coordinates:[Gt.x,Gt.y]}})),jt=[...Gr,...wt];r.current.addSource("ruasrekapsto",{type:"geojson",data:{type:"FeatureCollection",features:jt}}),r.current.addLayer({id:"ruas-rekap-sto-lines-glow",type:"line",source:"ruasrekapsto",filter:["==",["geometry-type"],"LineString"],paint:{"line-color":["match",["get","severity"],"normal","#10B981","warning","#F59E0B","critical","#EF4444","#10B981"],"line-width":8,"line-opacity":.1,"line-blur":2}}),r.current.addLayer({id:"ruas-rekap-sto-lines",type:"line",source:"ruasrekapsto",filter:["==",["geometry-type"],"LineString"],paint:{"line-color":["match",["get","severity"],"normal","#10B981","warning","#F59E0B","critical","#EF4444","#059669"],"line-width":2,"line-opacity":.9}}),r.current.addLayer({id:"ruas-rekap-sto-points",type:"circle",source:"ruasrekapsto",filter:["==",["geometry-type"],"Point"],paint:{"circle-radius":["interpolate",["linear"],["zoom"],5,["*",["get","size"],1],10,["*",["get","size"],2]],"circle-color":"#10B981","circle-stroke-width":2,"circle-stroke-color":"#FFFFFF","circle-opacity":.9}}),r.current.addLayer({id:"ruas-rekap-sto-points-hitarea",type:"circle",source:"ruasrekapsto",filter:["==",["geometry-type"],"Point"],paint:{"circle-radius":["interpolate",["linear"],["zoom"],5,["*",["get","size"],5],10,["*",["get","size"],10]],"circle-color":"#10B981","circle-opacity":0}});const xt=Gt=>{if(Gt.preventDefault(),Gt.originalEvent&&Gt.originalEvent.stopPropagation(),Gt.features&&Gt.features.length>0){const He=Gt.features[0].properties,bt=Gt.lngLat,ct=He==null?void 0:He.id,yt=(He==null?void 0:He.label)||(He==null?void 0:He.id)||"Node";Nt.remove();const Or=Mt.edges.filter(gr=>gr.source===ct||gr.target===ct);new Ss.Popup().setLngLat(bt).setHTML(`
              <div style="font-size: 12px; padding: 10px; max-width: 300px;">
                <strong style="font-size: 15px; color: #10B981;"> ${yt}</strong><br/>
                <div style="font-size: 10px; color: #6B7280; margin-top: 2px;">STO ID: ${ct||"N/A"}</div>
                <hr style="margin: 8px 0; border: none; border-top: 1px solid #e5e7eb;"/>
                <div style="display: grid; grid-template-columns: auto 1fr; gap: 4px 8px; font-size: 11px;">
                  <strong style="color: #6B7280;">Layer:</strong> <span style="color: #1F2937;">${(He==null?void 0:He.layer)||"N/A"}</span>
                  <strong style="color: #6B7280;">Platform:</strong> <span style="color: #1F2937;">${(He==null?void 0:He.platform)||"N/A"}</span>
                  <strong style="color: #6B7280;">Type:</strong> <span style="color: #1F2937;">${(He==null?void 0:He.types)||"N/A"}</span>
                  <strong style="color: #6B7280;">Region:</strong> <span style="color: #1F2937;">REG ${(He==null?void 0:He.reg)||"N/A"}</span>
                  <strong style="color: #6B7280;">Witel:</strong> <span style="color: #1F2937;">${(He==null?void 0:He.witel)||"N/A"}</span>
                </div>
                <div style="margin-top: 10px; padding: 8px; background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(5, 150, 105, 0.05)); border-left: 3px solid #10B981; border-radius: 4px; font-size: 11px; text-align: center;">
                  <strong style="color: #059669;"> ${Or.length} connected link${Or.length!==1?"s":""}</strong>
                </div>
                <div style="margin-top: 6px; font-size: 10px; color: #6B7280; text-align: center; font-style: italic;">
                  Viewing node details and topology 
                </div>
              </div>
            `).addTo(r.current);let Nr=[];try{He!=null&&He.details&&typeof He.details=="string"&&(Nr=JSON.parse(He.details))}catch{}if(Nr.length===0&&(Mt!=null&&Mt.nodes)){const gr=Mt.nodes.find(mn=>mn.id===ct);gr!=null&&gr.details&&Array.isArray(gr.details)&&(Nr=gr.details,console.log("STO Node details loaded from ruasRekapStoData:",Nr.length,"items"))}if(Nr.length>0&&vr){const gr=vr.get(ct);gr&&gr.length>0&&(Nr=Nr.map((mn,Xn)=>{const qt=gr.find(Br=>Br.ruas===mn.ruas)||gr[Xn];return qt?{...mn,source_port_used:qt.source_port_used,source_port_count:qt.source_port_count,source_port_idle:qt.source_port_idle,target_port_used:qt.target_port_used,target_port_count:qt.target_port_count,target_port_idle:qt.target_port_idle}:mn}),console.log("Merged port data from trunk_all.json for STO node:",ct))}if(Or.length>0){const gr=Or[0],mn=Math.max(gr.total_traffic_95_in||0,gr.total_traffic_95_out||0),Xn=gr.total_capacity>0?mn/gr.total_capacity*100:0;Fn({from:gr.source_label||gr.source,to:gr.target_label||gr.target,description:`${yt} - ${Or.length} link${Or.length!==1?"s":""}`,bandwidth_mbps:gr.total_capacity?gr.total_capacity/1e6:1e4,utilization:Xn,latency:5+Math.random()*10,packetLoss:Math.random()*.1,linkCount:Or.length,totalCapacity:`${(gr.total_capacity/1e9).toFixed(2)}G`,type:gr.layer_list||"L2_AGGREGATION",nodeData:He,linkDetails:Nr.length>0?Nr:void 0,clickedType:"node"}),Rt(!0)}kr({from:yt,to:"Network",nodeData:He,topology:Or,linkDetails:Nr.length>0?Nr:void 0,clickedType:"node"})}};r.current.on("click","ruas-rekap-sto-points",xt),r.current.on("click","ruas-rekap-sto-points-hitarea",xt),r.current.on("click","ruas-rekap-sto-lines",Gt=>{const gn=r.current.queryRenderedFeatures(Gt.point,{layers:["ruas-rekap-sto-points","ruas-rekap-sto-points-hitarea"]});if(!(gn&&gn.length>0)&&Gt.features&&Gt.features.length>0){const bt=Gt.features[0].properties,ct=Gt.lngLat;Nt.remove();const yt=Mt.nodes.find(uo=>uo.id===(bt==null?void 0:bt.source)),Or=Mt.nodes.find(uo=>uo.id===(bt==null?void 0:bt.target)),Nr=(yt==null?void 0:yt.label)||(bt==null?void 0:bt.source)||"Node A",gr=(Or==null?void 0:Or.label)||(bt==null?void 0:bt.target)||"Node B",mn=(bt==null?void 0:bt.source)||"N/A",Xn=(bt==null?void 0:bt.target)||"N/A",qt=bt!=null&&bt.capacity?(bt.capacity/1e9).toFixed(2):"N/A",Br=bt!=null&&bt.traffic_95_in?(bt.traffic_95_in/1e9).toFixed(2):"0",Ai=bt!=null&&bt.traffic_95_out?(bt.traffic_95_out/1e9).toFixed(2):"0",Sa=bt!=null&&bt.traffic_max_in?(bt.traffic_max_in/1e9).toFixed(2):"0",Wo=bt!=null&&bt.traffic_max_out?(bt.traffic_max_out/1e9).toFixed(2):"0";let bi="0.00";bt!=null&&bt.capacity&&bt.capacity>0&&(bi=(Math.max(parseFloat(Br)||0,parseFloat(Ai)||0)/parseFloat(qt)*100).toFixed(2));let wi="#2ECC71",Ho="rgba(46, 204, 113, 0.1)";parseFloat(bi)>80?(wi="#E74C3C",Ho="rgba(231, 76, 60, 0.1)"):parseFloat(bi)>60?(wi="#F39C12",Ho="rgba(243, 156, 18, 0.1)"):parseFloat(bi)>40&&(wi="#F1C40F",Ho="rgba(241, 196, 15, 0.1)");let Ki=[];try{bt!=null&&bt.details&&typeof bt.details=="string"&&(Ki=JSON.parse(bt.details))}catch{}if(Ki.length>0&&vr){const uo=`edge_${(bt==null?void 0:bt.id)||(bt==null?void 0:bt.source)+"_"+(bt==null?void 0:bt.target)}`,$n=vr.get(uo);$n&&$n.length>0&&(Ki=Ki.map((Dn,Ro)=>{const ks=$n.find(_l=>_l.ruas===Dn.ruas)||$n[Ro];return ks?{...Dn,source_port_used:ks.source_port_used,source_port_count:ks.source_port_count,source_port_idle:ks.source_port_idle,target_port_used:ks.target_port_used,target_port_count:ks.target_port_count,target_port_idle:ks.target_port_idle}:Dn}),console.log("Merged port data from trunk_all.json for STO edge:",uo))}console.log("STO Edge clicked - Details with port data:",Ki.length>0?{source_port_used:Ki[0].source_port_used,source_port_count:Ki[0].source_port_count,target_port_used:Ki[0].target_port_used,target_port_count:Ki[0].target_port_count}:"No details"),new Ss.Popup().setLngLat(ct).setHTML(`
              <div style="font-size: 12px; padding: 10px; max-width: 340px;">
                <strong style="font-size: 15px; color: #059669;"> Link Connection</strong><br/>
                <div style="font-size: 10px; color: #6B7280; margin-top: 2px;">${(bt==null?void 0:bt.ruas)||"N/A"}</div>
                <hr style="margin: 8px 0; border: none; border-top: 1px solid #e5e7eb;"/>

                <div style="display: grid; gap: 6px; font-size: 11px;">
                  <div style="padding: 6px; background: rgba(59, 130, 246, 0.05); border-radius: 4px;">
                    <strong style="color: #3B82F6;"> Source:</strong> <span style="color: #1F2937; font-weight: 600;">${Nr}</span>
                    <div style="font-size: 9px; color: #6B7280; margin-top: 2px;">ID: ${mn}</div>
                  </div>

                  <div style="padding: 6px; background: rgba(16, 185, 129, 0.05); border-radius: 4px;">
                    <strong style="color: #10B981;"> Target:</strong> <span style="color: #1F2937; font-weight: 600;">${gr}</span>
                    <div style="font-size: 9px; color: #6B7280; margin-top: 2px;">ID: ${Xn}</div>
                  </div>
                </div>

                <hr style="margin: 8px 0; border: none; border-top: 1px solid #e5e7eb;"/>

                <div style="display: grid; grid-template-columns: auto 1fr; gap: 4px 8px; font-size: 11px;">
                  <strong style="color: #6B7280;">Layer:</strong> <span style="color: #1F2937;">${(bt==null?void 0:bt.layer)||"N/A"}</span>
                  <strong style="color: #6B7280;">Link Count:</strong> <span style="color: #1F2937;">${(bt==null?void 0:bt.link_count)||1}</span>
                  <strong style="color: #6B7280;">Capacity:</strong> <span style="color: #059669; font-weight: 600;">${qt} Gbps</span>
                  <strong style="color: #6B7280;">Traffic In (95%):</strong> <span style="color: #3B82F6; font-weight: 600;">${Br} Gbps</span>
                  <strong style="color: #6B7280;">Traffic Out (95%):</strong> <span style="color: #10B981; font-weight: 600;">${Ai} Gbps</span>
                  <strong style="color: #6B7280;">Max Traffic In:</strong> <span style="color: #6366F1;">${Sa} Gbps</span>
                  <strong style="color: #6B7280;">Max Traffic Out:</strong> <span style="color: #14B8A6;">${Wo} Gbps</span>
                </div>

                <div style="margin-top: 10px; padding: 8px; background: ${Ho}; border-left: 3px solid ${wi}; border-radius: 4px;">
                  <strong style="color: #6B7280; font-size: 11px;">Utilization:</strong>
                  <span style="color: ${wi}; font-weight: 700; font-size: 13px; margin-left: 4px;">${bi}%</span>
                </div>
              </div>
            `).addTo(r.current),Fn({from:Nr,to:gr,description:(bt==null?void 0:bt.ruas)||`${Nr}  ${gr}`,bandwidth_mbps:bt!=null&&bt.capacity?bt.capacity/1e6:1e4,utilization:parseFloat(bi),latency:5+Math.random()*10,packetLoss:Math.random()*.1,linkCount:(bt==null?void 0:bt.link_count)||1,totalCapacity:`${qt}G`,type:(bt==null?void 0:bt.layer)||"L2_AGGREGATION",linkDetails:(Ki==null?void 0:Ki.length)>0?Ki:void 0,nodeData:bt,clickedType:"edge"}),Rt(!0),kr({from:Nr,to:gr})}});const Nt=new Ss.Popup({closeButton:!1,closeOnClick:!1,offset:15,className:"hover-popup"}),Yr=Gt=>{if(r.current.getCanvas().style.cursor="pointer",Gt.features&&Gt.features.length>0){const gn=Gt.features[0],He=gn.properties,bt=gn.geometry.coordinates.slice(),yt=Mt.edges.filter(Xn=>Xn.source===(He==null?void 0:He.id)||Xn.target===(He==null?void 0:He.id)).length;let Or=[];try{He!=null&&He.details&&typeof He.details=="string"&&(Or=JSON.parse(He.details))}catch{}const Nr=[];He!=null&&He.reg&&Nr.push(`<strong style="color: #6B7280;">Region:</strong> <span style="color: #1F2937;">REG ${He.reg}</span>`),He!=null&&He.types&&Nr.push(`<strong style="color: #6B7280;">Type:</strong> <span style="color: #1F2937;">${He.types}</span>`),He!=null&&He.size&&Nr.push(`<strong style="color: #6B7280;">Size:</strong> <span style="color: #6366F1; font-weight: 600;">${He.size}</span>`);const gr=Nr.length>0?Nr.join(`
`):"",mn=Or.length>0?`<div style="margin-top: 4px; padding: 4px; background: rgba(16, 185, 129, 0.1); border-radius: 3px; font-size: 9px; color: #10B981; text-align: center;">
                <strong> ${Or.length} node detail${Or.length!==1?"s":""}</strong>
              </div>`:"";Nt.setLngLat(bt).setHTML(`
              <div style="font-size: 11px; padding: 8px; max-width: 260px;">
                <strong style="font-size: 13px; color: #10B981;"> ${(He==null?void 0:He.label)||(He==null?void 0:He.id)||"Node"}</strong><br/>
                <div style="font-size: 9px; color: #6B7280; margin-top: 2px;">STO ID: ${(He==null?void 0:He.id)||"N/A"}</div>
                <hr style="margin: 6px 0; border: none; border-top: 1px solid #e5e7eb;"/>
                <div style="display: grid; grid-template-columns: auto 1fr; gap: 3px 6px; font-size: 10px;">
                  <strong style="color: #6B7280;">Layer:</strong> <span style="color: #1F2937;">${(He==null?void 0:He.layer)||"N/A"}</span>
                  <strong style="color: #6B7280;">Platform:</strong> <span style="color: #1F2937;">${(He==null?void 0:He.platform)||"N/A"}</span>
                  <strong style="color: #6B7280;">Witel:</strong> <span style="color: #1F2937;">${(He==null?void 0:He.witel)||"N/A"}</span>
                  ${gr}
                  <strong style="color: #6B7280;">Links:</strong> <span style="color: #10B981; font-weight: 600;">${yt}</span>
                </div>
                ${mn}
                <div style="margin-top: 6px; font-size: 9px; color: #6B7280; text-align: center; font-style: italic;">
                  Click for full details
                </div>
              </div>
            `).addTo(r.current)}},Tr=()=>{r.current.getCanvas().style.cursor="",Nt.remove()};if(r.current.on("mouseenter","ruas-rekap-sto-points-hitarea",Yr),r.current.on("mouseleave","ruas-rekap-sto-points-hitarea",Tr),r.current.on("mouseenter","ruas-rekap-sto-lines",Gt=>{if(r.current.getCanvas().style.cursor="pointer",Gt.features&&Gt.features.length>0){const He=Gt.features[0].properties,bt=Gt.lngLat,ct=Mt.nodes.find(Ai=>Ai.id===(He==null?void 0:He.source)),yt=Mt.nodes.find(Ai=>Ai.id===(He==null?void 0:He.target)),Or=(ct==null?void 0:ct.label)||(He==null?void 0:He.source)||"N/A",Nr=(yt==null?void 0:yt.label)||(He==null?void 0:He.target)||"N/A",gr=He!=null&&He.capacity?(He.capacity/1e9).toFixed(2):"N/A",mn=He!=null&&He.traffic_95_in?(He.traffic_95_in/1e9).toFixed(2):"0",Xn=He!=null&&He.traffic_95_out?(He.traffic_95_out/1e9).toFixed(2):"0";let qt="0.00";He!=null&&He.capacity&&He.capacity>0&&(qt=(Math.max(parseFloat(mn)||0,parseFloat(Xn)||0)/parseFloat(gr)*100).toFixed(2));let Br="#2ECC71";parseFloat(qt)>80?Br="#E74C3C":parseFloat(qt)>60?Br="#F39C12":parseFloat(qt)>40&&(Br="#F1C40F"),Nt.setLngLat(bt).setHTML(`
              <div style="font-size: 11px; padding: 8px; max-width: 280px;">
                <strong style="font-size: 13px; color: #059669;"> Link</strong><br/>
                <div style="font-size: 9px; color: #6B7280; margin-top: 2px;">${(He==null?void 0:He.ruas)||"N/A"}</div>
                <hr style="margin: 6px 0; border: none; border-top: 1px solid #e5e7eb;"/>
                <div style="display: grid; gap: 4px; font-size: 10px;">
                  <div><strong style="color: #6B7280;">From:</strong> <span style="color: #3B82F6; font-weight: 600;">${Or}</span></div>
                  <div><strong style="color: #6B7280;">To:</strong> <span style="color: #10B981; font-weight: 600;">${Nr}</span></div>
                </div>
                <hr style="margin: 6px 0; border: none; border-top: 1px solid #e5e7eb;"/>
                <div style="display: grid; grid-template-columns: auto 1fr; gap: 3px 6px; font-size: 10px;">
                  <strong style="color: #6B7280;">Capacity:</strong> <span style="color: #10B981; font-weight: 600;">${gr} Gbps</span>
                  <strong style="color: #6B7280;">Traffic In:</strong> <span style="color: #3B82F6;">${mn} Gbps</span>
                  <strong style="color: #6B7280;">Traffic Out:</strong> <span style="color: #10B981;">${Xn} Gbps</span>
                  <strong style="color: #6B7280;">Utilization:</strong> <span style="color: ${Br}; font-weight: 700;">${qt}%</span>
                </div>
                <div style="margin-top: 6px; font-size: 9px; color: #6B7280; text-align: center; font-style: italic;">
                  Click for full details
                </div>
              </div>
            `).addTo(r.current)}}),r.current.on("mouseleave","ruas-rekap-sto-lines",()=>{r.current.getCanvas().style.cursor="",Nt.remove()}),r.current.on("mouseleave","ruas-rekap-sto-lines-glow",()=>{r.current.getCanvas().style.cursor="",Nt.remove()}),ht.length>0&&Xr){const Gt=ht.map(bt=>bt.x),gn=ht.map(bt=>bt.y),He={minLng:Math.min(...Gt),maxLng:Math.max(...Gt),minLat:Math.min(...gn),maxLat:Math.max(...gn)};r.current.fitBounds([[He.minLng,He.minLat],[He.maxLng,He.maxLat]],{padding:50,duration:1e3})}console.log(`Ruas rekap STO layer ${Xr?"added":"updated"} successfully - ${ht.length} nodes, ${Gr.length} edges`)}catch(ot){console.error("Error adding ruas rekap STO layer:",ot),alert(`Error adding ruas rekap STO layer: ${ot}`)}},Zi=async()=>{if(!(!r.current||!Re))try{["multilayer-points","multilayer-polygons-fill","multilayer-polygons-outline","multilayer-polygons-hover","multilayer-lines","multilayer-lines-glow"].forEach(Ge=>{r.current.getLayer(Ge)&&r.current.removeLayer(Ge)}),r.current.getSource("multilayer-map")&&r.current.removeSource("multilayer-map"),r.current.addSource("multilayer-map",{type:"geojson",data:Re}),r.current.addLayer({id:"multilayer-polygons-fill",type:"fill",source:"multilayer-map",filter:["==",["geometry-type"],"Polygon"],paint:{"fill-color":"#9B59B6","fill-opacity":.4}}),r.current.addLayer({id:"multilayer-polygons-outline",type:"line",source:"multilayer-map",filter:["==",["geometry-type"],"Polygon"],paint:{"line-color":"#8E44AD","line-width":2}}),r.current.addLayer({id:"multilayer-lines-glow",type:"line",source:"multilayer-map",filter:["==",["geometry-type"],"LineString"],paint:{"line-color":["match",["get","status"],"good","#2ECC71","medium","#F39C12","low","#E74C3C","#3498DB"],"line-width":10,"line-opacity":.1,"line-blur":6}}),r.current.addLayer({id:"multilayer-lines",type:"line",source:"multilayer-map",filter:["==",["geometry-type"],"LineString"],paint:{"line-color":["match",["get","status"],"good","#2ECC71","medium","#F39C12","low","#E74C3C","#2980B9"],"line-width":4,"line-opacity":.8}}),r.current.addLayer({id:"multilayer-points",type:"circle",source:"multilayer-map",filter:["==",["geometry-type"],"Point"],paint:{"circle-radius":10,"circle-color":["match",["get","vendor"],"Cisco","#1BA1E2","Huawei","#E74C3C","Nokia","#27AE60","#999999"],"circle-stroke-width":3,"circle-stroke-color":"#FFFFFF","circle-opacity":.9}}),r.current.on("click","multilayer-polygons-fill",Ge=>{if(Ge.features&&Ge.features.length>0){const ht=Ge.features[0].properties,$t=Ge.lngLat;new Ss.Popup().setLngLat($t).setHTML(`
              <div style="font-size: 12px; padding: 8px;">
                <strong style="font-size: 14px; color: #9B59B6;">Polygon Area</strong><br/>
                <hr style="margin: 8px 0; border: none; border-top: 1px solid #ddd;"/>
                <strong>Hostname:</strong> ${(ht==null?void 0:ht.hostname)||"N/A"}<br/>
                <strong>Witel:</strong> ${(ht==null?void 0:ht.witel)||"N/A"}<br/>
                <strong>Type Area:</strong> ${(ht==null?void 0:ht.type_area)||"N/A"}
              </div>
            `).addTo(r.current)}}),r.current.on("mouseenter","multilayer-polygons-fill",Ge=>{var ot;Ge.features&&Ge.features.length>0&&(r.current.setFilter("multilayer-polygons-hover",["all",["==",["geometry-type"],"Polygon"],["==",["get","hostname"],((ot=Ge.features[0].properties)==null?void 0:ot.hostname)||""]]),r.current.getCanvas().style.cursor="pointer")}),r.current.on("mouseleave","multilayer-polygons-fill",()=>{r.current.setFilter("multilayer-polygons-hover",["all",["==",["geometry-type"],"Polygon"],["==",["get","hostname"],""]]),r.current.getCanvas().style.cursor=""}),r.current.on("click","multilayer-lines",Ge=>{if(Ge.features&&Ge.features.length>0){const ht=Ge.features[0].properties,$t=Ge.lngLat,Gr=((ht==null?void 0:ht.name)||"").split("-"),wt=Gr[0]||(ht==null?void 0:ht.hostname)||"Node A",jt=Gr[1]||"Node B",xt=(ht==null?void 0:ht.status)==="good"?"#2ECC71":(ht==null?void 0:ht.status)==="medium"?"#F39C12":(ht==null?void 0:ht.status)==="low"?"#E74C3C":"#2980B9";new Ss.Popup().setLngLat($t).setHTML(`
              <div style="font-size: 12px; padding: 8px;">
                <strong style="font-size: 14px; color: ${xt};"> ${(ht==null?void 0:ht.name)||"Connection Line"}</strong><br/>
                <hr style="margin: 8px 0; border: none; border-top: 1px solid #ddd;"/>
                <strong>Status:</strong> <span style="color: ${xt}; font-weight: 600; text-transform: uppercase;">${(ht==null?void 0:ht.status)||"N/A"}</span><br/>
              </div>
            `).addTo(r.current),Fn({from:wt,to:jt,description:(ht==null?void 0:ht.name)||`${wt}  ${jt}`,bandwidth_mbps:1e4,utilization:(ht==null?void 0:ht.status)==="good"?65:(ht==null?void 0:ht.status)==="medium"?75:85,latency:5+Math.random()*10,packetLoss:Math.random()*.1,linkCount:2,totalCapacity:"10G",type:"L2_AGGREGATION",nodeData:ht,clickedType:"edge"}),Rt(!0),kr({from:wt,to:jt})}}),r.current.on("mouseenter","multilayer-points",()=>{r.current.getCanvas().style.cursor="pointer"}),r.current.on("mouseleave","multilayer-points",()=>{r.current.getCanvas().style.cursor=""}),r.current.on("mouseenter","multilayer-lines",()=>{r.current.getCanvas().style.cursor="pointer"}),r.current.on("mouseleave","multilayer-lines",()=>{r.current.getCanvas().style.cursor=""}),console.log("Multilayer map layer added successfully")}catch(vt){console.error("Error adding multilayer map layer:",vt),alert(`Error adding multilayer map layer: ${vt}`)}},Zs=()=>{if(!r.current)return;const vt=!me;if(Ke(vt),vt&&!r.current.getLayer("multilayer-points"))Zi();else{const Ge=vt?"visible":"none";["multilayer-points","multilayer-polygons-fill","multilayer-polygons-outline","multilayer-polygons-hover","multilayer-lines","multilayer-lines-glow"].forEach(ht=>{r.current.getLayer(ht)&&r.current.setLayoutProperty(ht,"visibility",Ge)})}},da=()=>{if(!(!r.current||!Pe))try{["node-edges-points","node-edges-lines","node-edges-lines-glow"].forEach(wt=>{r.current.getLayer(wt)&&r.current.removeLayer(wt)}),r.current.getSource("node-edges")&&r.current.removeSource("node-edges");const Ge=new Map;Pe.nodes.forEach(wt=>{Ge.set(wt.id,{x:wt.x,y:wt.y,label:wt.label||wt.id,size:wt.size||3})});const ot=(wt,jt,xt=.3)=>{const Nt=[],Tr=(wt[0]+jt[0])/2,Gt=(wt[1]+jt[1])/2,gn=jt[0]-wt[0],He=jt[1]-wt[1],bt=Math.sqrt(gn*gn+He*He),ct=-He/bt,yt=gn/bt,Or=bt*xt,Nr=Tr+ct*Or,gr=Gt+yt*Or;for(let mn=0;mn<=20;mn++){const Xn=mn/20,qt=1-Xn,Br=qt*qt*wt[0]+2*qt*Xn*Nr+Xn*Xn*jt[0],Ai=qt*qt*wt[1]+2*qt*Xn*gr+Xn*Xn*jt[1];Nt.push([Br,Ai])}return Nt},ht=Pe.edges.map(wt=>{const jt=Ge.get(wt.source),xt=Ge.get(wt.target);if(!jt||!xt)return null;const Nt=ot([jt.x,jt.y],[xt.x,xt.y],.2);return{type:"Feature",properties:{id:wt.id,source:wt.source,target:wt.target,node_a_platform:wt.node_a_platform||"",node_b_platform:wt.node_b_platform||"",source_capacity_total:wt.source_capacity_total||0,target_capacity_total:wt.target_capacity_total||0,traffic_in:wt.traffic_in,traffic_out:wt.traffic_out,size:wt.size||1},geometry:{type:"LineString",coordinates:Nt}}}).filter(wt=>wt!==null),$t=Pe.nodes.map(wt=>({type:"Feature",properties:{id:wt.id,hostname:wt.hostname||wt.id,label:wt.label||wt.id,manufacture:wt.manufacture||"",platform:wt.platform||"",reg:wt.reg||"",sto_l:wt.sto_l||"",version:wt.version||"",witel:wt.witel||"",x:wt.x,y:wt.y,size:(wt.size||3)*.9,topology:wt.topology?JSON.stringify(wt.topology):void 0},geometry:{type:"Point",coordinates:[wt.x,wt.y]}})),Gr=[...ht,...$t];if(r.current.addSource("node-edges",{type:"geojson",data:{type:"FeatureCollection",features:Gr}}),r.current.addLayer({id:"node-edges-lines-glow",type:"line",source:"node-edges",filter:["==",["geometry-type"],"LineString"],paint:{"line-color":"#005873ff","line-width":1,"line-opacity":.2,"line-blur":2}}),r.current.addLayer({id:"node-edges-lines",type:"line",source:"node-edges",filter:["==",["geometry-type"],"LineString"],paint:{"line-color":"#00BFFF","line-width":.5,"line-opacity":.7}}),r.current.addLayer({id:"node-edges-points",type:"circle",source:"node-edges",filter:["==",["geometry-type"],"Point"],paint:{"circle-radius":["*",["get","size"],1.2],"circle-color":"#FF6B35","circle-stroke-width":1.5,"circle-stroke-color":"#FFFFFF","circle-opacity":.9}}),r.current.on("click","node-edges-points",wt=>{if(wt.features&&wt.features.length>0){const xt=wt.features[0].properties,Nt=wt.lngLat;let Yr;try{if(xt!=null&&xt.topology){const He=typeof xt.topology=="string"?JSON.parse(xt.topology):xt.topology;Yr=Array.isArray(He)?He:void 0}}catch{}const Tr=Yr?Yr.length:0,Gt=Tr>0?`<div style="margin-top: 8px; padding: 6px; background: rgba(255, 107, 53, 0.1); border-radius: 4px; font-size: 11px; color: #FF6B35;">
                <strong>Topology:</strong> ${Tr} connections available
              </div>`:"";new Ss.Popup().setLngLat(Nt).setHTML(`
              <div style="font-size: 12px; padding: 8px; max-width: 320px;">
                <strong style="font-size: 14px; color: #FF6B35;"> ${(xt==null?void 0:xt.hostname)||(xt==null?void 0:xt.label)||(xt==null?void 0:xt.id)||"Node"}</strong><br/>
                <hr style="margin: 8px 0; border: none; border-top: 1px solid #ddd;"/>
                <div style="display: grid; grid-template-columns: auto 1fr; gap: 4px 8px;">
                <strong>Hostname:</strong> <span>${(xt==null?void 0:xt.hostname)||"N/A"}</span>
                  <strong>Manufacture:</strong> <span>${(xt==null?void 0:xt.manufacture)||"N/A"}</span>
                  <strong>Platform:</strong> <span>${(xt==null?void 0:xt.platform)||"N/A"}</span>
                  <strong>Version:</strong> <span>${(xt==null?void 0:xt.version)||"N/A"}</span>
                  <strong>Region:</strong> <span>${(xt==null?void 0:xt.reg)||"N/A"}</span>
                  <strong>Witel:</strong> <span>${(xt==null?void 0:xt.witel)||"N/A"}</span>
                  <strong>STO:</strong> <span>${(xt==null?void 0:xt.sto_l)||"N/A"}</span>
                  <strong>Size:</strong> <span>${(xt==null?void 0:xt.size)||"N/A"}</span>
                  <strong>Coordinates:</strong> <span>${(xt==null?void 0:xt.x)||"N/A"}, ${(xt==null?void 0:xt.y)||"N/A"}</span>
                </div>
                ${Gt}
              </div>
            `).addTo(r.current);const gn=(xt==null?void 0:xt.hostname)||(xt==null?void 0:xt.label)||(xt==null?void 0:xt.id)||"Node";Fn({from:gn,to:"Network",description:`${gn} - Node Edges`,bandwidth_mbps:1e4,utilization:70+Math.random()*20,latency:5+Math.random()*10,packetLoss:Math.random()*.1,linkCount:Tr||1,totalCapacity:"10G",type:"NODE_EDGES",nodeData:xt,clickedType:"node"}),Rt(!0),kr({from:gn,to:"Network",nodeData:xt,topology:Yr||void 0})}}),r.current.on("click","node-edges-lines",wt=>{if(wt.features&&wt.features.length>0){const xt=wt.features[0].properties,Nt=wt.lngLat,Yr=(xt==null?void 0:xt.source)||"Node A",Tr=(xt==null?void 0:xt.target)||"Node B",Gt=xt!=null&&xt.source_capacity_total?(xt.source_capacity_total/1e3).toFixed(2):"N/A",gn=xt!=null&&xt.target_capacity_total?(xt.target_capacity_total/1e3).toFixed(2):"N/A";new Ss.Popup().setLngLat(Nt).setHTML(`
              <div style="font-size: 12px; padding: 8px; max-width: 320px;">
                <strong style="font-size: 14px; color: #00BFFF;"> ${Yr}  ${Tr}</strong><br/>
                <hr style="margin: 8px 0; border: none; border-top: 1px solid #ddd;"/>
                <div style="display: grid; grid-template-columns: auto 1fr; gap: 4px 8px;">
                  <strong>Edge ID:</strong> <span>${(xt==null?void 0:xt.id)||"N/A"}</span>
                  <strong>Source:</strong> <span>${Yr}</span>
                  <strong>Target:</strong> <span>${Tr}</span>
                   <strong>Source Capacity:</strong> <span style="color: #2ECC71; font-weight: 600;">${Gt} Gbps</span>
                  <strong>Target Capacity:</strong> <span style="color: #3498DB; font-weight: 600;">${gn} Gbps</span>
                  <strong>Size:</strong> <span>${(xt==null?void 0:xt.size)||"N/A"}</span>
                </div>
              </div>
            `).addTo(r.current);const He=(xt==null?void 0:xt.source_capacity_total)||1e4,bt=(xt==null?void 0:xt.target_capacity_total)||1e4,ct=(He+bt)/2;Fn({from:Yr,to:Tr,description:`${Yr}  ${Tr}`,bandwidth_mbps:ct,utilization:60+Math.random()*30,latency:5+Math.random()*10,packetLoss:Math.random()*.1,linkCount:1,totalCapacity:`${(ct/1e3).toFixed(1)}G`,type:"L2_AGGREGATION",nodeData:xt,clickedType:"edge"}),Rt(!0),kr({from:Yr,to:Tr,nodeData:xt})}}),r.current.on("mouseenter","node-edges-points",()=>{r.current.getCanvas().style.cursor="pointer"}),r.current.on("mouseleave","node-edges-points",()=>{r.current.getCanvas().style.cursor=""}),r.current.on("mouseenter","node-edges-lines",()=>{r.current.getCanvas().style.cursor="pointer"}),r.current.on("mouseleave","node-edges-lines",()=>{r.current.getCanvas().style.cursor=""}),Pe.nodes.length>0){const wt=Pe.nodes.map(Nt=>Nt.x),jt=Pe.nodes.map(Nt=>Nt.y),xt={minLng:Math.min(...wt),maxLng:Math.max(...wt),minLat:Math.min(...jt),maxLat:Math.max(...jt)};r.current.fitBounds([[xt.minLng,xt.minLat],[xt.maxLng,xt.maxLat]],{padding:50,duration:1e3})}console.log("Node edges layer added successfully")}catch(vt){console.error("Error adding node edges layer:",vt),alert(`Error adding node edges layer: ${vt}`)}},Qn=()=>{if(!r.current)return;const vt=!ge;if(ze(vt),vt&&!r.current.getLayer("node-edges-points"))da();else{const Ge=vt?"visible":"none";["node-edges-points","node-edges-lines","node-edges-lines-glow"].forEach(ht=>{r.current.getLayer(ht)&&r.current.setLayoutProperty(ht,"visibility",Ge)})}},Vl=vt=>{if(!r.current)return;const Ge=vt.viewportToFramedGraph(vt.graphToViewport(hv(r.current,r.current.getCenter()))),ot=r.current.getBounds(),ht=vt.graphToViewport(hv(r.current,ot.getNorthEast())),$t=vt.graphToViewport(hv(r.current,ot.getSouthWest())),Gr={width:Math.abs(ht.x-$t.x),height:Math.abs(ht.y-$t.y)},wt=vt.getDimensions(),jt=Math.min(Gr.width/wt.width,Gr.height/wt.height)*vt.getCamera().getState().ratio;vt.getCamera().setState({...Ge,ratio:jt})},ls=()=>{if(!t.current){setTimeout(()=>ls(),100);return}if(!(!Q||n.current||!r.current))try{const vt=ua.from(Q);vt.updateEachNodeAttributes((wt,jt)=>{const xt=hv(r.current,{lat:jt.latitude,lng:jt.longitude});return{...jt,label:jt.fullName,x:xt.x,y:xt.y}});const Ge=new _1(vt,t.current,{labelRenderedSizeThreshold:20,defaultNodeColor:"#e22352",defaultEdgeColor:"#ffaeaf",minEdgeThickness:2,stagePadding:0,enableCameraRotation:!1,renderEdgeLabels:!1,renderLabels:!0,labelColor:{color:"#000"},nodeReducer:(wt,jt)=>({...jt,size:Math.sqrt(vt.degree(wt))*2})}),ot=Ge.getWebGLContext();ot&&ot.clearColor(0,0,0,0);const ht=()=>{vt.updateEachNodeAttributes((wt,jt)=>{const xt=hv(r.current,{lat:jt.latitude,lng:jt.longitude});return{...jt,x:xt.x,y:xt.y}})},$t=()=>{r.current&&!r.current.isMoving()&&(ht(),Vl(Ge),Ge.refresh())};Vl(Ge),Ge.refresh(),r.current.on("moveend",$t),r.current.on("zoomend",$t);const Gr=()=>{r.current&&(r.current.off("moveend",$t),r.current.off("zoomend",$t)),Ge.kill()};n.current=Ge,o.current=Gr}catch(vt){alert(`Error adding Sigma layer: ${vt}`)}},lu=()=>{o.current&&(o.current(),o.current=null),n.current=null},lo=()=>{const vt=!ne;ue(vt),vt?ls():lu()};N.useEffect(()=>{x&&r.current&&Ca()},[x]),N.useEffect(()=>{x&&O&&C&&r.current&&$i()},[x,O]),N.useEffect(()=>{x&&Re&&me&&r.current&&Zi()},[x,Re,me]),N.useEffect(()=>{x&&Pe&&ge&&r.current&&da()},[x,Pe,ge]),N.useEffect(()=>{x&&Pe&&ge&&r.current&&da()},[x,Pe,ge]),N.useEffect(()=>{(async()=>{x&&Tt&&_e==="ruasrekap"&&!Ze&&(await new Promise(Ge=>setTimeout(Ge,500)),zt(!0))})()},[x,Tt,_e,Ze]),N.useEffect(()=>{x&&u.length>0&&si()},[u,x]),N.useEffect(()=>()=>{lu()},[]);const hc=vt=>{nn(vt),ut(`Switched to ${{topology:"Topology View",dashboard:"Dashboard",layers:"Data Layers",analytics:"Analytics",settings:"Settings"}[vt]||vt}`),At("info")};N.useEffect(()=>{const vt=[];W&&X.length>0&&X.forEach((ot,ht)=>{ot.hostname&&ot.latitude&&ot.longitude&&vt.push({id:`capacity-${ht}`,label:ot.hostname,type:"capacity",latitude:parseFloat(ot.latitude),longitude:parseFloat(ot.longitude),metadata:{manufacture:ot.manufacture,platform:ot.platform,witel:ot.witel,sto:ot.sto_l||ot.sto,reg:ot.reg}})}),he&&ie.length>0&&ie.forEach((ot,ht)=>{ot.node&&ot.latitude&&ot.longitude&&vt.push({id:`sirkit-${ht}`,label:ot.node,type:"sirkit",latitude:parseFloat(ot.latitude),longitude:parseFloat(ot.longitude),metadata:{witel:ot.witel,sto:ot.sto_l||ot.sto,reg:ot.reg,platform:ot.platform}})}),me&&Re&&Re.features.forEach((ot,ht)=>{if(ot.geometry.type==="Point"&&ot.properties){const $t=ot.geometry.coordinates;vt.push({id:`multilayer-${ht}`,label:ot.properties.hostname||ot.properties.label||`Node ${ht}`,type:"multilayer",latitude:$t[1],longitude:$t[0],metadata:{manufacture:ot.properties.manufacture,platform:ot.properties.platform,witel:ot.properties.witel,sto:ot.properties.sto_l,reg:ot.properties.reg}})}}),ge&&Pe&&Pe.nodes.forEach(ot=>{vt.push({id:`nodeedges-${ot.id}`,label:ot.hostname||ot.label||ot.id,type:"nodeedges",latitude:ot.y,longitude:ot.x,metadata:{manufacture:ot.manufacture,platform:ot.platform,witel:ot.witel,sto:ot.sto_l,reg:ot.reg}})}),Ze&&Tt&&Tt.nodes.forEach(ot=>{vt.push({id:`ruasrekap-${ot.id}`,label:ot.label||ot.id,type:gi||"ruasrekap",latitude:ot.y,longitude:ot.x,metadata:{platform:ot.platform,witel:ot.witel,reg:ot.reg,types:ot.types,layer:ot.layer}})}),at&&Mt&&Mt.nodes.forEach(ot=>{vt.push({id:`ruasrekapsto-${ot.id}`,label:ot.label||ot.id,type:"ruasrekapsto",latitude:ot.y,longitude:ot.x,metadata:{platform:ot.platform,witel:ot.witel,reg:ot.reg,types:ot.types,layer:ot.layer}})}),Lr(vt);const Ge=new Set;vt.forEach(ot=>{var ht;(ht=ot.metadata)!=null&&ht.platform&&ot.metadata.platform!=="N/A"&&Ge.add(ot.metadata.platform)}),wn(Array.from(Ge).sort()),console.log(`Search suggestions updated: ${vt.length} items`)},[W,X,he,ie,me,Re,ge,Pe,Ze,Tt,gi,at,Mt]);const Kc=()=>{cn([]),r.current&&(r.current.getLayer("filtered-nodes-highlight")&&r.current.removeLayer("filtered-nodes-highlight"),r.current.getSource("filtered-nodes")&&r.current.removeSource("filtered-nodes")),ut("Filter cleared"),At("info"),Ye(!0)},La=vt=>{const Ge=lr.filter(ot=>{var ht,$t;return(($t=(ht=ot.metadata)==null?void 0:ht.platform)==null?void 0:$t.toLowerCase())===vt.toLowerCase()});if(cn(Ge),ut(`Found ${Ge.length} nodes with platform: ${vt}`),At("info"),Ye(!0),Ge.length===1&&r.current){const ot=Ge[0];setTimeout(()=>{Vo(ot.label,ot)},500)}else if(Ge.length>1&&r.current){r.current.getLayer("filtered-nodes-highlight")&&r.current.removeLayer("filtered-nodes-highlight"),r.current.getSource("filtered-nodes")&&r.current.removeSource("filtered-nodes");const ot=Ge.map(wt=>{var jt;return{type:"Feature",properties:{label:wt.label,platform:((jt=wt.metadata)==null?void 0:jt.platform)||"N/A"},geometry:{type:"Point",coordinates:[wt.longitude,wt.latitude]}}});r.current.addSource("filtered-nodes",{type:"geojson",data:{type:"FeatureCollection",features:ot}}),r.current.addLayer({id:"filtered-nodes-highlight",type:"circle",source:"filtered-nodes",paint:{"circle-radius":9,"circle-color":"#1c9cc3ff","circle-stroke-width":2,"circle-stroke-color":"#FFFFFF","circle-opacity":.8}}),r.current.on("click","filtered-nodes-highlight",wt=>{if(wt.features&&wt.features.length>0){const xt=wt.features[0].properties,Nt=wt.lngLat;new Ss.Popup().setLngLat(Nt).setHTML(`
              <div style="font-size: 12px; padding: 8px;">
                <strong style="font-size: 14px; color: #4F46E5;"> ${(xt==null?void 0:xt.label)||"Node"}</strong><br/>
                <hr style="margin: 8px 0; border: none; border-top: 1px solid #ddd;"/>
                <strong>Platform:</strong> ${(xt==null?void 0:xt.platform)||"N/A"}<br/>
                <div style="margin-top: 8px; font-size: 11px; color: #6B7280;">
                  Click to view details
                </div>
              </div>
            `).addTo(r.current)}}),r.current.on("mouseenter","filtered-nodes-highlight",()=>{r.current.getCanvas().style.cursor="pointer"}),r.current.on("mouseleave","filtered-nodes-highlight",()=>{r.current.getCanvas().style.cursor=""});const ht=Ge.map(wt=>wt.longitude),$t=Ge.map(wt=>wt.latitude),Gr={minLng:Math.min(...ht),maxLng:Math.max(...ht),minLat:Math.min(...$t),maxLat:Math.max(...$t)};r.current.fitBounds([[Gr.minLng,Gr.minLat],[Gr.maxLng,Gr.maxLat]],{padding:100,duration:1500})}else Ge.length===0&&(r.current&&r.current.getLayer("filtered-nodes-highlight")&&r.current.removeLayer("filtered-nodes-highlight"),r.current&&r.current.getSource("filtered-nodes")&&r.current.removeSource("filtered-nodes"))},Vo=(vt,Ge)=>{if(_t(vt),Ir.length>0&&(cn([]),r.current&&r.current.getLayer("filtered-nodes-highlight")&&r.current.removeLayer("filtered-nodes-highlight"),r.current&&r.current.getSource("filtered-nodes")&&r.current.removeSource("filtered-nodes")),Ge&&r.current)r.current.flyTo({center:[Ge.longitude,Ge.latitude],zoom:15,duration:2e3,essential:!0}),setTimeout(()=>{var ot,ht,$t,Gr,wt;r.current&&new Ss.Popup({closeButton:!0,closeOnClick:!1}).setLngLat([Ge.longitude,Ge.latitude]).setHTML(`
              <div style="font-size: 12px; padding: 8px; max-width: 280px;">
                <strong style="font-size: 14px; color: #4F46E5;"> ${Ge.label}</strong><br/>
                <hr style="margin: 8px 0; border: none; border-top: 1px solid #ddd;"/>
                <div style="display: grid; grid-template-columns: auto 1fr; gap: 4px 8px;">
                  <strong>Type:</strong> <span>${Ge.type}</span>
                  ${(ot=Ge.metadata)!=null&&ot.manufacture?`<strong>Manufacture:</strong> <span>${Ge.metadata.manufacture}</span>`:""}
                  ${(ht=Ge.metadata)!=null&&ht.platform?`<strong>Platform:</strong> <span>${Ge.metadata.platform}</span>`:""}
                  ${($t=Ge.metadata)!=null&&$t.witel?`<strong>Witel:</strong> <span>${Ge.metadata.witel}</span>`:""}
                  ${(Gr=Ge.metadata)!=null&&Gr.sto?`<strong>STO:</strong> <span>${Ge.metadata.sto}</span>`:""}
                  ${(wt=Ge.metadata)!=null&&wt.reg?`<strong>Region:</strong> <span>${Ge.metadata.reg}</span>`:""}
                </div>
              </div>
            `).addTo(r.current)},2100),ut(`Navigating to ${Ge.label}`),At("success"),Ye(!0);else if(vt.trim()){const ot=lr.find(ht=>ht.label.toLowerCase().includes(vt.toLowerCase()));ot&&r.current?Vo(vt,ot):(ut(`No results found for "${vt}"`),At("error"),Ye(!0))}},Zn=vt=>{Jn(vt),qo(vt,{national:4.5,regional:6.5,witel:8.5,sto:11}[vt])},fc=vt=>{Jn(vt);const Ge={national:4.5,regional:6.5,witel:8.5,sto:11};r.current&&r.current.flyTo({zoom:Ge[vt],duration:1e3})},qo=(vt,Ge)=>{Ee(Ge),Jn(vt),r.current&&r.current.flyTo({zoom:Ge,duration:1e3})};N.useEffect(()=>{if(r.current){const vt=()=>{var ht;const Ge=((ht=r.current)==null?void 0:ht.getZoom())||5;Ee(Ge),console.log("Current Zoom Level:",Ge.toFixed(2));let ot="national";Ge>=10?ot="sto":Ge>=8?ot="witel":Ge>=6&&(ot="regional"),ot!==jr&&(Jn(ot),console.log("Hierarchy Level Changed to:",ot))};return r.current.on("zoom",vt),()=>{var Ge;(Ge=r.current)==null||Ge.off("zoom",vt)}}},[jr]);const xl=async vt=>{if(Me(vt),qe(!0),await new Promise(Ge=>setTimeout(Ge,800)),W&&dc(),ne&&lo(),he&&wa(),me&&Zs(),ge&&Qn(),Ze&&So(),at&&Gl(),vt==="multilayer")C||(P(!0),r.current&&!r.current.getLayer("kabupaten-fill")&&$i(),await new Promise(Ge=>setTimeout(Ge,300))),me||Zs();else{if(C&&(P(!1),r.current)){const Ge="none";r.current.getLayer("kabupaten-fill")&&r.current.setLayoutProperty("kabupaten-fill","visibility",Ge),r.current.getLayer("kabupaten-outline")&&r.current.setLayoutProperty("kabupaten-outline","visibility",Ge),r.current.getLayer("kabupaten-hover")&&r.current.setLayoutProperty("kabupaten-hover","visibility",Ge)}vt==="capacity"&&!W?dc():vt==="sigma"&&!ne?lo():vt==="sirkit"&&!he?wa():vt==="nodeedges"&&!ge?Qn():vt==="ruasrekap"&&!Ze?So():vt==="ruasrekapsto"&&!at&&Gl()}await new Promise(Ge=>setTimeout(Ge,500)),qe(!1)};return S.jsxs("div",{className:"maplibre-view",children:[S.jsx(Vne,{onMenuClick:hc,activeMenu:Xa,showKabupatenLayer:C,kabupatenLoaded:O,onToggleKabupaten:Hs,selectedLayer:_e,onLayerChange:xl,capacityDataLength:X.length,sirkitDataLength:ie.length,airportsDataAvailable:!!Q,multilayerMapDataAvailable:!!Re,nodeEdgesDataAvailable:!!Pe,ruasRekapDataAvailable:!!Tt,ruasRekapData:Tt,_filteredRuasNodes:Xt,onFilterRuasNodes:N.useCallback(vt=>{_e==="ruasrekapsto"?Lt(vt):tr(vt)},[_e]),ruasRekapStoDataAvailable:!!Mt,ruasRekapStoData:Mt,isLayerLoading:Ae,selectedRuasLayer:gi,onRuasLayerChange:Sn}),S.jsx(One,{onSearch:Vo,suggestions:Ir.length>0?Ir:lr,platformFilters:$r,onFilterClick:La,onClearFilter:Kc}),S.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:1e3},children:S.jsx(gie,{username:"Admin User",email:"admin@infranexia.com"})}),S.jsx(Une,{currentLevel:jr,navigationPath:Ne,onLevelChange:Zn,onNavigateBack:fc,onZoomToLevel:qo,currentZoom:le,totalNodes:X.length,totalLinks:0}),(Go||Io)&&S.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",background:"linear-gradient(145deg, rgba(255,255,255,0.95), rgba(240,240,240,0.9))",backdropFilter:"blur(20px)",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.3)",boxShadow:"0 20px 40px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8)",padding:"16px",minWidth:"280px",zIndex:20,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[S.jsx("h3",{style:{margin:0,fontSize:"14px",fontWeight:"600",color:"#1F2937"},children:"Current Selection"}),S.jsx("button",{onClick:()=>{Uo(void 0),wo(void 0),se([{level:"national",name:"Indonesia"}]),Jn("national"),qo("national",4.5)},style:{fontSize:"11px",color:"#6B7280",background:"none",border:"none",cursor:"pointer",textDecoration:"underline"},children:"Clear All"})]}),Go&&S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[S.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#3B82F6"}}),S.jsxs("span",{style:{fontSize:"13px",color:"#374151",fontWeight:"500"},children:[S.jsx("strong",{children:"Region:"})," ",Go]}),S.jsx("button",{onClick:()=>{Uo(void 0),se([{level:"national",name:"Indonesia"}]),Jn("national"),qo("national",4.5)},style:{marginLeft:"auto",fontSize:"11px",color:"#3B82F6",background:"none",border:"none",cursor:"pointer"},children:""})]}),Io&&S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[S.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#10B981"}}),S.jsxs("span",{style:{fontSize:"13px",color:"#374151",fontWeight:"500"},children:[S.jsx("strong",{children:"Witel:"})," ",Io]}),S.jsx("button",{onClick:()=>{wo(void 0),se([{level:"national",name:"Indonesia"},{level:"regional",name:Go||"Regional View"}]),Jn("regional"),qo("regional",6.5)},style:{marginLeft:"auto",fontSize:"11px",color:"#10B981",background:"none",border:"none",cursor:"pointer"},children:""})]}),S.jsxs("div",{style:{fontSize:"11px",color:"#6B7280",marginTop:"8px",fontWeight:"500"},children:["Showing ",X.length," nodes"]})]}),S.jsx(qne,{}),Xa==="dashboard"&&S.jsx(jne,{kpiData:{revenue:{value:"2.4M",change:12},utilization:{value:X.length>0?`${Math.round(X.reduce((vt,Ge)=>{const ot=parseFloat(Ge.utilization||"0");return vt+(isNaN(ot)?0:ot)},0)/X.length)}%`:"0%",change:5},customerCount:{value:"45.2K",change:8},bandwidth:{value:X.length>0?`${(X.reduce((vt,Ge)=>{const ot=parseFloat(Ge.capacity||"0");return vt+(isNaN(ot)?0:ot)},0)/1e3).toFixed(1)}TB`:"0TB",change:15},historicalTrend:[{month:"May",value:650},{month:"Jun",value:720},{month:"Jul",value:680},{month:"Aug",value:780},{month:"Sep",value:850},{month:"Oct",value:920}]},onClose:()=>nn("topology")}),Xa==="layers"&&S.jsx(Bne,{elements:X,ruasRekapData:_e==="ruasrekap"?Tt:_e==="ruasrekapsto"?Mt:null,selectedRuasLayer:gi,onClose:()=>nn("topology")}),Xa==="analytics"&&S.jsx(Lne,{onClose:()=>nn("topology")}),Xa==="settings"&&S.jsx(mie,{onClose:()=>nn("topology")}),S.jsxs("div",{className:"map-container",children:[S.jsx("div",{ref:e,style:{width:"100%",height:"100%"}}),S.jsx("div",{ref:t,className:"sigma-container",style:{visibility:ne?"visible":"hidden",pointerEvents:ne?"auto":"none"}})]}),S.jsx(Ine,{isOpen:l,onClose:()=>h(!1),onUpload:li}),Ie&&S.jsx(jD,{message:tt,type:Ue,onClose:()=>Ye(!1)}),oi&&Fi&&S.jsx(pie,{connection:Fi,onClose:()=>{Rt(!1),Fn(null)},onShowTopology:()=>{ca(!Pi)},isTopologyVisible:Pi}),Pi&&nr&&S.jsx(yie,{connection:nr,onClose:()=>{ca(!1),kr(null)}}),_n&&S.jsx(vie,{onClose:()=>ea(!1)})]})},kie=()=>{const[e,t]=N.useState("admin"),[r,n]=N.useState("admin123"),[o,l]=N.useState(""),[h,u]=N.useState(!1),v=Qv(),x="admin",A="admin123",C=P=>{P.preventDefault(),l(""),u(!0),setTimeout(()=>{e===x&&r===A?v("/map"):(l("Username atau password salah!"),u(!1))},1500)};return S.jsxs("div",{className:"login-container",children:[S.jsxs("div",{className:"login-background",children:[S.jsx("div",{className:"particle-grid"}),S.jsx("div",{className:"gradient-orb orb-1"}),S.jsx("div",{className:"gradient-orb orb-2"}),S.jsx("div",{className:"gradient-orb orb-3"}),S.jsxs("div",{className:"floating-shapes",children:[S.jsx("div",{className:"shape shape-1"}),S.jsx("div",{className:"shape shape-2"}),S.jsx("div",{className:"shape shape-3"}),S.jsx("div",{className:"shape shape-4"})]})]}),S.jsx("div",{className:"login-left",children:S.jsxs("div",{className:"login-branding",children:[S.jsx("img",{src:"/images/infranexia-side.png",alt:"Infranexia",className:"brand-logo"}),S.jsxs("h1",{className:"brand-title",children:[S.jsx("span",{className:"brand-highlight",children:"Faster"})," Connection"]}),S.jsx("p",{className:"brand-subtitle",children:"For All Your Business Needs"}),S.jsxs("div",{className:"brand-features",children:[S.jsxs("div",{className:"feature-item",children:[S.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[S.jsx("path",{d:"M9 12L11 14L15 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),S.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"})]}),S.jsx("span",{children:"Reliable Infrastructure"})]}),S.jsxs("div",{className:"feature-item",children:[S.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[S.jsx("path",{d:"M9 12L11 14L15 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),S.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"})]}),S.jsx("span",{children:"24/7 Network Monitoring"})]}),S.jsxs("div",{className:"feature-item",children:[S.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[S.jsx("path",{d:"M9 12L11 14L15 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),S.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"})]}),S.jsx("span",{children:"Enterprise Solutions"})]})]})]})}),S.jsx("div",{className:"login-right",children:S.jsxs("div",{className:"login-card",children:[S.jsxs("div",{className:"login-header",children:[S.jsx("h2",{className:"login-title",children:"Welcome Back"}),S.jsx("p",{className:"login-subtitle",children:"Sign in to access TIF System"})]}),S.jsxs("form",{onSubmit:C,className:"login-form",children:[S.jsxs("div",{className:"form-group",children:[S.jsx("label",{htmlFor:"username",className:"form-label",children:"USERNAME"}),S.jsxs("div",{className:"input-wrapper",children:[S.jsx("input",{id:"username",type:"text",className:"form-input",placeholder:"Enter your username",value:e,onChange:P=>t(P.target.value),required:!0}),S.jsxs("svg",{className:"input-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[S.jsx("path",{d:"M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),S.jsx("path",{d:"M12 11C14.2091 11 16 9.20914 16 7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})]})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{htmlFor:"password",className:"form-label",children:"PASSWORD"}),S.jsxs("div",{className:"input-wrapper",children:[S.jsx("input",{id:"password",type:"password",className:"form-input",placeholder:"Enter your password",value:r,onChange:P=>n(P.target.value),required:!0}),S.jsxs("svg",{className:"input-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[S.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),S.jsx("path",{d:"M7 11V7C7 5.67392 7.52678 4.40215 8.46447 3.46447C9.40215 2.52678 10.6739 2 12 2C13.3261 2 14.5979 2.52678 15.5355 3.46447C16.4732 4.40215 17 5.67392 17 7V11",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})]})]}),o&&S.jsxs("div",{className:"error-message",children:[S.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[S.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"}),S.jsx("path",{d:"M12 8V12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),S.jsx("path",{d:"M12 16H12.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),o]}),S.jsx("button",{type:"submit",className:`login-button ${h?"loading":""}`,disabled:h,children:h?S.jsxs(S.Fragment,{children:[S.jsx("span",{className:"spinner"}),"Signing in..."]}):"Sign In"})]}),S.jsx("div",{className:"login-footer",children:S.jsxs("p",{className:"hint-text",children:["Demo credentials: ",S.jsx("span",{className:"hint-value",children:"admin / admin123"})]})})]})})]})},Cie=pI.createRoot(document.getElementById("root"));Cie.render(S.jsx(Ei.StrictMode,{children:S.jsx(DO,{basename:"/",children:S.jsxs(oO,{children:[S.jsx(a0,{path:"/login",element:S.jsx(kie,{})}),S.jsx(a0,{path:"/map",element:S.jsx(Aie,{})}),S.jsx(a0,{path:"/base",element:S.jsx(rF,{})}),S.jsx(a0,{path:"/",element:S.jsx(kA,{to:"/login",replace:!0})}),S.jsx(a0,{path:"*",element:S.jsx(kA,{to:"/login",replace:!0})})]})})}));
